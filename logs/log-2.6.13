commit 02b3e4e2d71b6058ec11cc01c72ac651eb3ded2b
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 28 16:41:01 2005 -0700

    Linux v2.6.13

commit 20b1730af3ae05450b0e03f5aed40c4313f65db6
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun Aug 28 13:22:37 2005 -0700

    [PATCH] zfcp: bugfix and compile fixes
    
    Bugfix (usage of uninitialized pointer in zfcp_port_dequeue) and compile
    fixes for the zfcp device driver.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f84f226389fc5f47b3cb36818972e2e171607de
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Aug 28 15:33:53 2005 +0400

    [PATCH] zfcp: fix compilation due to rports changes
    
    struct zfcp_port::scsi_id was removed by commit
      3859f6a248cbdfbe7b41663f3a2b51f48e30b281
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d52acb34247816c453f94596e6c7fc4499b76dc
Merge: f786648... 214838a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 27 18:05:14 2005 -0700

    Merge refs/heads/upstream-fixes from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit f786648b89f00d4e66fe6b19beffd30e764651fc
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Aug 28 09:40:01 2005 +1000

    [PATCH] Remove race between con_open and con_close
    
    [ Same race and same patch also by Steven Rostedt <rostedt@goodmis.org> ]
    
    I have a laptop (G3 powerbook) which will pretty reliably hit a race
    between con_open and con_close late in the boot process and oops in
    vt_ioctl due to tty->driver_data being NULL.
    
    What happens is this: process A opens /dev/tty6; it comes into
    con_open() (drivers/char/vt.c) and assign a non-NULL value to
    tty->driver_data.  Then process A closes that and concurrently process
    B opens /dev/tty6.  Process A gets through con_close() and clears
    tty->driver_data, since tty->count == 1.  However, before process A
    can decrement tty->count, we switch to process B (e.g. at the
    down(&tty_sem) call at drivers/char/tty_io.c line 1626).
    
    So process B gets to run and comes into con_open with tty->count == 2,
    as tty->count is incremented (in init_dev) before con_open is called.
    Because tty->count != 1, we don't set tty->driver_data.  Then when the
    process tries to do anything with that fd, it oopses.
    
    The simple and effective fix for this is to test tty->driver_data
    rather than tty->count in con_open.  The testing and setting of
    tty->driver_data is serialized with respect to the clearing of
    tty->driver_data in con_close by the console_sem.  We can't get a
    situation where con_open sees tty->driver_data != NULL and then
    con_close on a different fd clears tty->driver_data, because
    tty->count is incremented before con_open is called.  Thus this patch
    eliminates the race, and in fact with this patch my laptop doesn't
    oops.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    [ Same patch
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
      in http://marc.theaimsgroup.com/?l=linux-kernel&m=112450820432121&w=2 ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3859f6a248cbdfbe7b41663f3a2b51f48e30b281
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Sat Aug 27 11:07:54 2005 -0700

    [PATCH] zfcp: add rports to enable scsi_add_device to work again
    
    This patch fixes a severe problem with 2.6.13-rc7.
    
    Due to recent SCSI changes it is not possible to add any LUNs to the zfcp
    device driver anymore.  With registration of remote ports this is fixed.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Acked-by: James Bottomley <jejb@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 729d70f5dfd663b44bca68a4479c96bde7e535d6
Author: Jan Blunck <j.blunck@tu-harburg.de>
Date:   Sat Aug 27 11:07:52 2005 -0700

    [PATCH] sg.c: fix a memory leak in devices seq_file implementation
    
    I know that scsi procfs is legacy code but this is a fix for a memory leak.
    
    While reading through sg.c I realized that the implementation of
    /proc/scsi/sg/devices with seq_file is leaking memory due to freeing the
    pointer returned by the next() iterator method.  Since next() might return
    NULL or an error this is wrong.  This patch fixes it through using the
    seq_files private field for holding the reference to the iterator object.
    
    Here is a small bash script to trigger the leak. Use slabtop to watch
    the size-32 usage grow and grow.
    
    #!/bin/sh
    
    while true; do
    	cat /proc/scsi/sg/devices > /dev/null
    done
    
    Signed-off-by: Jan Blunck <j.blunck@tu-harburg.de>
    Acked-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8126fdbc76351bdf99c6737ef4fecf88a22fa538
Author: Patrick Boettcher <patrick.boettcher@desy.de>
Date:   Sat Aug 27 19:30:30 2005 +0200

    [PATCH] fix for race problem in DVB USB drivers (dibusb)
    
    Fixed race between submitting streaming URBs in the driver and starting
    the actual transfer in hardware (demodulator and USB controller) which
    sometimes lead to garbled data transfers. URBs are now submitted first,
    then the transfer is enabled. Dibusb devices and clones are now fully
    functional again.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 820d220de400cfaaf846a2d8b5de93f9ea5a9b80
Author: James Morris <jmorris@namei.org>
Date:   Sat Aug 27 13:47:06 2005 +0200

    [PATCH] Fix capifs bug in initialization error path.
    
    This fixes a bug in the capifs initialization code, where the
    filesystem is not unregistered if kern_mount() fails.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dbddf17824861f2298de093549e6493d9844835
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Aug 27 00:56:18 2005 -0600

    [PATCH] acpi_shutdown: Only prepare for power off on power_off
    
    When acpi_sleep_prepare was moved into a shutdown method we
    started calling it for all shutdowns.
    
    It appears this triggers some systems to power off on reboot.
    
    Avoid this by only calling acpi_sleep_prepare if we are going to power
    off the system.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a029a90f5b93e2b50bcbbaef05ef91fa0c1d6b3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Aug 27 06:48:15 2005 +0100

    [PATCH] mmaper_kern.c fixes [buffer overruns]
    
     - copy_from_user() can fail; ->write() must check its return value.
    
     - severe buffer overruns both in ->read() and ->write() - lseek to the
       end (i.e.  to mmapper_size) and
    
    	if (count + *ppos > mmapper_size)
    		count = count + *ppos - mmapper_size;
    
       will do absolutely nothing.  Then it will call
    
    	copy_to_user(buf,&v_buf[*ppos],count);
    
       with obvious results (similar for ->write()).
    
       Fixed by turning read to simple_read_from_buffer() and by doing
       normal limiting of count in ->write().
    
     - gratitious lock_kernel() in ->mmap() - it's useless there.
    
     - lots of gratuitous includes.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 214838a2108b4b1e18abce2e28d37996e9bf7c68
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 24 18:01:33 2005 +0100

    [PATCH] Fix 6pack setting of MAC address
    
    Don't check type of sax25_family; dev_set_mac_address has already done
    that before and anyway, the type to check against would have been
    ARPHRD_AX25.  We only got away because AF_AX25 and ARPHRD_AX25 both happen
    to be defined to the same value.
    
    Don't check sax25_ndigis either; it's value is insignificant for the
    purpose of setting the MAC address and the check has shown to break
    some application software for no good reason.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 84a2ea1c2cee0288f96e0c6aa4f975d4d26508c7
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Aug 25 19:38:30 2005 +0100

    [PATCH] 6pack Timer initialization
    
    I dropped the timer initialization bits by accident when sending the
    p-persistence fix.  This patch gets the driver to work again on halfduplex
    links.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 36676bcbf9f6bcbea9d06e67ee8d04eacde54952
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 26 18:34:17 2005 -0700

    [PATCH] Fix oops in sysfs_hash_and_remove_file()
    
    The problem arises if an entity in sysfs is created and removed without
    ever having been made completely visible.  In SCSI this is triggered by
    removing a device while it's initialising.
    
    The problem appears to be that because it was never made visible in sysfs,
    the sysfs dentry has a null d_inode which oopses when a reference is made
    to it.  The solution is simply to check d_inode and assume the object was
    never made visible (and thus doesn't need deleting) if it's NULL.
    
    (akpm: possibly a stopgap for 2.6.13 scsi problems.  May not be the
    long-term fix)
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 657390d25d4241705cb4fc5b3b4ba5b30575dc17
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Aug 26 18:34:16 2005 -0700

    [PATCH] md: clear the 'recovery' flags when starting an md array.
    
    It's possible for this to still have flags in it and a previous instance
    has been stopped, and that confused the new array using the same mddev.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72008652dae7d10fa668d7b2ada3bddff7403d86
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Aug 26 18:34:15 2005 -0700

    [PATCH] md: create a MODULE_ALIAS for md corresponding to its block major number.
    
    I just discovered this is needed for module auto-loading.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1bcfcaa0b3bec2a67b22c565a0bf508ea90db1d
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Aug 26 18:34:14 2005 -0700

    [PATCH] IB: fix use-after-free in user verbs cleanup
    
    Fix a use-after-free bug in userspace verbs cleanup: we can't touch
    mr->device after we free mr by calling ib_dereg_mr().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c9cf6f9861f8d27303ee2531b3b7686269c71ce
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Aug 26 18:34:11 2005 -0700

    [PATCH] arm: fix IXP4xx flash resource range
    
    We are currently reserving one byte more than actually needed by the flash
    device and overlapping into the next I/O expansion bus window.  This a)
    causes us to allocate an extra page of VM due to ARM ioremap() alignment
    code and b) could cause problems if another driver tries to request the
    next expansion bus window.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 485761bd6a72d33b3d4fa884927b2b0d983b701e
Author: Andi Kleen <ak@suse.de>
Date:   Fri Aug 26 18:34:10 2005 -0700

    [PATCH] x86_64: Tell VM about holes in nodes
    
    Some nodes can have large holes on x86-64.
    
    This fixes problems with the VM allowing too many dirty pages because it
    overestimates the number of available RAM in a node.  In extreme cases you
    can end up with all RAM filled with dirty pages which can lead to deadlocks
    and other nasty behaviour.
    
    This patch just tells the VM about the known holes from e820.  Reserved
    (like the kernel text or mem_map) is still not taken into account, but that
    should be only a few percent error now.
    
    Small detail is that the flat setup uses the NUMA free_area_init_node() now
    too because it offers more flexibility.
    
    (akpm: lotsa thanks to Martin for working this problem out)
    
    Cc: Martin Bligh <mbligh@mbligh.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bebf4688e9dbbfdd421736685d607bced91a3c91
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Fri Aug 26 18:34:08 2005 -0700

    [PATCH] I2C hwmon: kfree fixes
    
    This patch fixes several instances of hwmon drivers kfree'ing the "wrong"
    pointer; the existing code works somewhat by accident.
    
    (akpm: plucked from Greg's queue based on lkml discussion.  Finishes off the
    patch from Jon Corbet)
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32818c2eb6b83ea5065c89e0c3cf774abc4dc02b
Author: Anton Blanchard <anton@samba.org>
Date:   Fri Aug 26 18:34:07 2005 -0700

    [PATCH] ppc64: Fix issue with gcc 4.0 compiled kernels
    
    I recently had a BUG_ON() go off spuriously on a gcc 4.0 compiled kernel.
    It turns out gcc-4.0 was removing a sign extension while earlier gcc
    versions would not.  Thinking this to be a compiler bug, I submitted a
    report:
    
    http://gcc.gnu.org/bugzilla/show_bug.cgi?id=23422
    
    It turns out we need to cast the input in order to tell gcc to sign extend
    it.
    
    Thanks to Andrew Pinski for his help on this bug.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 212d6d2237f60bc28c1518f8abf9d3ed6c17574a
Author: Paul Jackson <pj@sgi.com>
Date:   Thu Aug 25 12:47:56 2005 -0700

    [PATCH] completely disable cpu_exclusive sched domain
    
    At the suggestion of Nick Piggin and Dinakar, totally disable
    the facility to allow cpu_exclusive cpusets to define dynamic
    sched domains in Linux 2.6.13, in order to avoid problems
    first reported by John Hawkes (corrupt sched data structures
    and kernel oops).
    
    This has been built for ppc64, i386, ia64, x86_64, sparc, alpha.
    It has been built, booted and tested for cpuset functionality
    on an SN2 (ia64).
    
    Dinakar or Nick - could you verify that it for sure does avoid
    the problems Hawkes reported.  Hawkes is out of town, and I don't
    have the recipe to reproduce what he found.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca2f3daf779f5e89d14e9783fcfd7920842df9e9
Author: Paul Jackson <pj@sgi.com>
Date:   Thu Aug 25 12:47:50 2005 -0700

    [PATCH] undo partial cpu_exclusive sched domain disabling
    
    The partial disabling of Dinakar's new facility to allow
    cpu_exclusive cpusets to define dynamic sched domains
    doesn't go far enough.  At the suggestion of Nick Piggin
    and Dinakar, let us instead totally disable this facility
    for 2.6.13, in order to avoid problems first reported
    by John Hawkes (corrupt sched data structures and kernel oops).
    
    This patch removes the partial disabling code in 2.6.13-rc7,
    in anticipation of the next patch, which will totally disable
    it instead.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13142341ac867bb67e88204cbfcb8d90f9a861b7
Merge: 3fd1bb9... d4ef160...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 26 16:32:31 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 3fd1bb9baa394856b112e5edbfd3893d92dd1149
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 25 18:43:37 2005 +0200

    [PATCH] hwmon: Off-by-one error in fscpos driver
    
    Coverity uncovered an off-by-one error in the fscpos driver, in function
    set_temp_reset(). Writing to the temp3_reset sysfs file will lead to an
    array overrun, in turn causing an I2C write to a random register of the
    FSC Poseidon chip. Additionally, writing to temp1_reset and temp2_reset
    will not work as expected. The fix is straightforward.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 566ecb9b258ec4da3c7e1c6ca6fca8a5bb0c8eba
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Tue Aug 23 17:20:44 2005 -0300

    [PATCH] ppc32 8xx: fix m8xx_ide_init() #ifdef
    
    Be more precise on deciding whether to call m8xx_ide_init() at
    m8xx_setup.c:platform_init().
    
    Compilation fails if CONFIG_BLK_DEV_IDE is defined but
    CONFIG_BLK_DEV_MPC8xx_IDE isnt.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3515d0161d55d2fa1a340932625f94240a68c262
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 25 23:13:14 2005 +0100

    [PATCH] late spinlock initialization in ieee1394/ohci
    
    spinlock used in irq handler should be initialized before registering
    irq, even if we know that our device has interrupts disabled; handler
    is registered shared and taking spinlock is done unconditionally.  As
    it is, we can and do get oopsen on boot for some configuration, depending
    on irq routing - I've got a reproducer.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a46206e74e1897bf34d6b58f0991a0d6f3797e27
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 25 23:03:35 2005 +0100

    [PATCH] bogus function type in qdio
    
    In qdio_get_micros() volatile in return type is plain noise (even with old
    gccisms it would make no sense - noreturn function returning __u64 is a
    bit odd ;-)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6a9ad73897acb7ea4cf56aae0fc39ba1c471fba
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 25 22:59:48 2005 +0100

    [PATCH] bogus iounmap() in emac
    
    Dumb typo: iounmap(&local_pointer_variable).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f57ff89fee47a317e9e8ca63bf0f139802cc116
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Aug 26 01:49:14 2005 +0400

    [PATCH] drivers/hwmon/*: kfree() correct pointers
    
    The adm9240 driver, in adm9240_detect(), allocates a structure.  The
    error path attempts to kfree() ->client field of it (second one),
    resulting in an oops (or slab corruption) if the hardware is not present.
    
    ->client field in adm1026, adm1031, smsc47b397 and smsc47m1 is the first in
    ${HWMON}_data structure, but fix them too.
    
    Signed-off-by: Jonathan Corbet <corbet@lwn.net>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d634cc15e8f33332038dc9c078beae79f9382ada
Author: Steve French <smfltc@us.ibm.com>
Date:   Fri Aug 26 14:42:59 2005 -0500

    [PATCH] Fix oops in fs/locks.c on close of file with pending locks
    
    The recent change to locks_remove_flock code in fs/locks.c changes how
    byte range locks are removed from closing files, which shows up a bug in
    cifs.
    
    The assumption in the cifs code was that the close call sent to the
    server would remove any pending locks on the server on this file, but
    that is no longer safe as the fs/locks.c code on the client wants unlock
    of 0 to PATH_MAX to remove all locks (at least from this client, it is
    not possible AFAIK to remove all locks from other clients made to the
    server copy of the file).
    
    Note that cifs locks are different from posix locks - and it is not
    possible to map posix locks perfectly on the wire yet, due to
    restrictions of the cifs network protocol, even to Samba without adding
    a new request type to the network protocol (which we plan to do for
    Samba 3.0.21 within a few months), but the local client will have the
    correct, posix view, of the lock in most cases.
    
    The correct fix for cifs for this would involve a bigger change than I
    would like to do this late in the 2.6.13-rc cycle - and would involve
    cifs keeping track of all unmerged (uncoalesced) byte range locks for
    each remote inode and scanning that list to remove locks that intersect
    or fall wholly within the range - locks that intersect may have to be
    reaquired with the smaller, remaining range.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd589e0b662c1ea8cfb1e0d20d60a2510979865b
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Aug 26 16:57:53 2005 +0200

    [PATCH] hppfs: fix symlink error path
    
    While touching this code I noticed the error handling is bogus, so I
    fixed it up.
    
    I've removed the IS_ERR(proc_dentry) check, which will never trigger and
    is clearly a typo: we must check proc_file instead.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7a60d50d7713b65a3fd88f11d5717b83a6b6a97
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Aug 26 16:57:44 2005 +0200

    [PATCH] Fixup symlink function pointers for hppfs [for 2.6.13]
    
    Update hppfs for the symlink functions prototype change.
    
    Yes, I know the code I leave there is still _bogus_, see next patch for
    this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c657f2f25d50c602df9291bc6242b98fc090759
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Fri Aug 26 14:02:04 2005 -0400

    [PATCH] Document idr_get_new_above() semantics, update inotify
    
    There is an off by one problem with idr_get_new_above.
    
    The comment and function name suggest that it will return an id >
    starting_id, but it actually returned an id >= starting_id, and kernel
    callers other than inotify treated it as such.
    
    The patch below fixes the comment, and fixes inotifys usage.  The
    function name still doesn't match the behaviour, but it never did.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 755528c860b05fcecda1c88a2bdaffcb50760a7f
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 26 10:49:22 2005 -0700

    Ignore disabled ROM resources at setup
    
    Writing even a disabled value seems to mess up some matrox graphics
    cards.  It may be a card-related issue, but we may also be writing
    reserved low bits in the result.
    
    This was a fall-out of switching x86 over to the generic PCI resource
    allocation code, and needs more debugging.  In particular, the old x86
    code defaulted to not doing any resource allocations at all for ROM
    resources.
    
    In the meantime, this has been reported to make X happier by Helge
    Hafting <helgehaf@aitel.hist.no>.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26aad69e3dd854abe9028ca873fb40b410a39dd7
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 26 10:40:10 2005 -0700

    Only pre-allocate 256 bytes of cardbio IO range
    
    It may seem small, but most cards need much less, if any, and this not
    only makes the code adhere to the comment, it seems to fix a boot-time
    lockup on a ThinkPad 380XD laptop reported by Tero Roponen <teanropo@cc.jyu.fi>
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4ef16088913002255eab9958fff4e98b3b507d6
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:31:41 2005 -0700

    [TG3]: Fix ethtool loopback test lockup
    
    The tg3_abort_hw() call in tg3_test_loopback() is causing lockups on
    some devices. tg3_abort_hw() disables the memory arbiter, causing
    tg3_reset_hw() to hang when it tries to write the pre-reset signature.
    tg3_abort_hw() should only be called after the pre-reset signature has
    been written. This is all done in tg3_reset_hw() so the tg3_abort_hw()
    call is unnecessary and can be removed.
    
    [ Also bump driver version and release date. -DaveM ]
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c2c38a122cc23d6a09b8004d60a33913683eedf
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Aug 24 14:57:54 2005 +0200

    [PATCH] cfq-iosched.c: minor fixes
    
    One critical fix and two minor fixes for 2.6.13-rc7:
    
    - Max depth must currently be 2 to allow barriers to function on SCSI
    - Prefer sync request over async in choosing the next request
    - Never allow async request to preempt or disturb the "anticipation" for
      a single cfq process context. This is as-designed, the code right now
      is buggy in that area.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41290c14640bc9312bf63202d14ebef075b6171a
Author: Keith Owens <kaos@sgi.com>
Date:   Wed Aug 24 16:06:25 2005 +1000

    [PATCH] Export pcibios_bus_to_resource
    
    pcibios_bus_to_resource is exported on all architectures except ia64
    and sparc.  Add exports for the two missing architectures.  Needed when
    Yenta socket support is compiled as a module.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7561524765a30334bf31c56b523aeb3c1a04c7d
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 24 07:37:37 2005 +0200

    [PATCH] x86_64: update defconfig - reenable fusion
    
    I mistakedly disabled fusion support in an earlier update. Fusion
    is commonly used on many x86-64 systems, so this was a problem.
    This patch fixes that.
    
    Signed-off-by: And Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5477d30e841e0f707fd2daddc8cb6949858476ee
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Aug 24 14:18:53 2005 +1000

    [PATCH] ppc64: Export machine_power_off for therm_pm72 module
    
    This patch puts back the export of machine_power_off() that was removed
    by some janitor as it's used for emergency shutdown by the G5 thermal
    control driver. Wether that driver should use kernel_power_off() instead
    is debatable and a post-2.6.13 decision. In the meantime, please commit
    that patch that fixes the driver for now.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3725822f7c7134249addcd4549aff086950c8090
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Aug 24 04:15:10 2005 -0700

    [PATCH] cpu_exclusive sched domains build fix
    
    As reported by Paul Mackerras <paulus@samba.org>, the previous patch
    "cpu_exclusive sched domains fix" broke the ppc64 build with
    CONFIC_CPUSET, yielding error messages:
    
    kernel/cpuset.c: In function 'update_cpu_domains':
    kernel/cpuset.c:648: error: invalid lvalue in unary '&'
    kernel/cpuset.c:648: error: invalid lvalue in unary '&'
    
    On some arch's, the node_to_cpumask() is a function, returning
    a cpumask_t.  But the for_each_cpu_mask() requires an lvalue mask.
    
    The following patch fixes this build failure by making a copy
    of the cpumask_t on the stack.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40bb0c3ef52d872de348e10000eb5432a43a147d
Author: Andreas Schwab <schwab@suse.de>
Date:   Wed Aug 24 17:36:21 2005 +0200

    [PATCH] m68k: fix broken macros causing compile errors
    
    Add parens around macro parameters.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06c7427021f1cc83703f14659d8405ca773ba1ef
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 23 22:06:09 2005 -0700

    [FIB_TRIE]: Don't ignore negative results from fib_semantic_match
    
    When a semantic match occurs either success, not found or an error
    (for matching unreachable routes/blackholes) is returned. fib_trie
    ignores the errors and looks for a different matching route. Treat
    results other than "no match" as success and end lookup.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0572e3da3ff5c3744b2f606ecf296d5f89a4bbdf
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 23 20:39:14 2005 -0700

    Linux v2.6.13-rc7
    
    Too many changes to release a final 2.6.13.

commit 9138dccbb9f39f12474554ef93dcc24de2e9c8f6
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Tue Aug 23 13:30:29 2005 -0700

    [PATCH] Fix IXP4xx CLOCK_TICK_RATE
    
    As pointed out in the following thread, the CLOCK_TICK_RATE setting for
    IXP4xx is incorrect b/c the HW ignores the lowest 2 bits of the LATCH
    value.
    
       http://lists.arm.linux.org.uk/pipermail/linux-arm-kernel/2005-August/030950.html
    
    Tnx to George Anziger and Egil Hjelmeland for finding the issue.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d10689b68aff7b48e3de1a3f7fcd6567bd2905af
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Aug 23 01:04:27 2005 -0700

    [PATCH] cpu_exclusive sched domains on partial nodes temp fix
    
    This keeps the kernel/cpuset.c routine update_cpu_domains() from
    invoking the sched.c routine partition_sched_domains() if the cpuset in
    question doesn't fall on node boundaries.
    
    I have boot tested this on an SN2, and with the help of a couple of ad
    hoc printk's, determined that it does indeed avoid calling the
    partition_sched_domains() routine on partial nodes.
    
    I did not directly verify that this avoids setting up bogus sched
    domains or avoids the oops that Hawkes saw.
    
    This patch imposes a silent artificial constraint on which cpusets can
    be used to define dynamic sched domains.
    
    This patch should allow proceeding with this new feature in 2.6.13 for
    the configurations in which it is useful (node alligned sched domains)
    while avoiding trying to setup sched domains in the less useful cases
    that can cause the kernel corruption and oops.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Acked-by: John Hawkes <hawkes@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae75784bc576a1af70509c2f3ba2b70bb65a0c58
Merge: 005940e... 7087e29...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 23 20:00:48 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6

commit 005940ead619c2867e0465c8e0fffb9e5989b57e
Merge: d3813fc... 6885433...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 23 20:00:17 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit d3813fcf105814d06b47fa586f6b61f3cff1cefc
Author: Andi Kleen <ak@suse.de>
Date:   Tue Aug 23 03:14:27 2005 +0200

    [PATCH] x86_64: Don't oops at boot when empty Opteron node has IO
    
    The code to detect IO links on Opteron would not check
    if the node had actually memory. This could lead to pci_bus_to_node
    returning an invalid node, which might cause crashes later
    when dma_alloc_coherent passes it to page_alloc_node().
    
    The bug has been there forever but for some reason
    it is causing now crashes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bbfb16bf345acd81ab1e6e3d4b35964650517ac
Author: lepton <ytht.net@gmail.com>
Date:   Mon Aug 22 17:06:14 2005 -0700

    [PATCH] usbnet oops fix
    
    There's a "return the wrong SKB" error in the GL620A cable minidriver
    (for "usbnet") which can oops.  This would not appear when talking
    Linux-to-Linux, only Linux-to-Windows (for recent Linuxes).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1daec3089a129a67169d3ae975985a7480fe17f
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Tue Aug 23 21:36:40 2005 -0400

    [PATCH] i386: fix incorrect FP signal code
    
    i386 floating-point exception handling has a bug that can cause error
    code 0 to be sent instead of the proper code during signal delivery.
    
    This is caused by unconditionally checking the IS and c1 bits from the
    FPU status word when they are not always relevant.  The IS bit tells
    whether an exception is a stack fault and is only relevant when the
    exception is IE (invalid operation.) The C1 bit determines whether a
    stack fault is overflow or underflow and is only relevant when IS and IE
    are set.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11532cc6aa73a47023268d718bf43b646494615c
Merge: 17566c3... c1cc168...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 23 19:21:44 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 17566c3c5ed3ea8f941a135cf960387214c4f6ac
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:48:22 2005 +0100

    [PATCH] s390 __CHECKER__ ifdefs
    
    remove the bogus games with explicit ifdefs on __CHECKER__
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8032230694ec56c168a1404c67a54d281536cbed
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:48:17 2005 +0100

    [PATCH] %t... in vsnprintf
    
    handling of %t... (ptrdiff_t) in vsnprintf
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acd3bd82c08d1a399760605706a86821148243d9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:48:12 2005 +0100

    [PATCH] ad1980 makefile fix
    
    ac97_plugin_ad1980 should trigger build of ac97_codec
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa53bb650e6747628276e3ab6d98f51d9bfb0573
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:48:07 2005 +0100

    [PATCH] Kconfig fix (non-modular SCSI drivers)
    
    non-modular scsi drivers depend on built-in scsi
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e6d0d89343ab24ddeb39f8b2ffdd2d4c194427c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:48:02 2005 +0100

    [PATCH] Kconfig fix (missing dependencies on PCI in sound/*)
    
    a bunch of PCI-only drivers didn't have the right dependency
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eaaece266a78b8f56ade48fe23147b8b933364de
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:57 2005 +0100

    [PATCH] missing exports on m32r
    
    missing exports on m32r
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33215652e4a75dfa8adb20f4d741517457b0da2b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:52 2005 +0100

    [PATCH] qualifiers in return types - easy cases
    
    a bunch of functions switched from volatile to __attribute__((noreturn)) and
    from const to __attribute_pure__
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ade31f38f2ef61900e901d26061deff0c4dba085
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:47 2005 +0100

    [PATCH] typo fix in qdio.c
    
    dumb typo: u32 volatile * mistyped as u32 * volatile
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 530d8e97384fd2a6805fa4515a4e6828d7b53ee2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:42 2005 +0100

    [PATCH] emac netpoll fix
    
    netpoll is void(struct net_device *), not int(struct net_device *)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 791cdc7c561e2e72596388533f959e6d74dc6231
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:37 2005 +0100

    [PATCH] vidc gcc4 fix
    
    removes an extern for a static variable.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cbdff4f7fc642deb1f36bc035cf60b7bdc497d5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:32 2005 +0100

    [PATCH] broken inline asm on s390 (misuse of labels)
    
    use of explicit labels in inline asm is a Bad Idea(tm), since gcc can
    decide to inline the function in several places.  Fixed by use of 1f/f:
    instead of .Lfitsin/.Lfitsin:
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a828b8e4e699b5e3ce0dcbb708ecb099b86f3126
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:27 2005 +0100

    [PATCH] m32r_sio gcc4 fixes
    
    extern declaration followed by static in drivers/serial/m32r_sio.c
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c51d9943b11441fd1ea42c7e70cfb5eed33fe97b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:22 2005 +0100

    [PATCH] m32r icu_data gcc4 fixes
    
    either icu_data declaration for SMP case should be taken out of m32102.h,
    or its declarations for m32700ut and opsput should not be static for SMP.
    Patch does the latter - judging by comments in m32102.h it is intended to
    be non-static.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e231a9c4fdf402bcfd5a7c27be49050882631a95
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:17 2005 +0100

    [PATCH] m32r smp.h gcc4 fixes
    
    extern on physid_2_cpu[] does not belong in smp.h - the thing is static.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 719e5985cf79bb60f4a28816547efd27dde178f5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:12 2005 +0100

    [PATCH] alpha spinlock code and bogus constraints
    
    "=m" (lock->lock) / "1" (lock->lock) makes gcc4 unhappy; fixed by s/1/m/,
    same as in case of i386 rwsem.h where such variant had been accepted
    by both Linus and rth.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79fb7bdce363685b336e3f0fb8207312fd1f02fc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:07 2005 +0100

    [PATCH] alpha xchg fix
    
    alpha xchg has to be a macro - alpha disables always_inline and if that
    puppy does not get inlined, we immediately blow up on undefined reference.
    Happens even on gcc3; with gcc4 that happens a _lot_.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 531e5ca62bd9aabef6bd8340d8ae93bac1b5caa2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:47:01 2005 +0100

    [PATCH] missing include in pcmcia_resource.c
    
    missing include of asm/irq.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18415e923e90b986db316abd078f6d863cee7b18
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:56 2005 +0100

    [PATCH] alpha gcc4 warnings
    
    on UP smp_call_function() is expanded to expression.  Alpha oprofile
    calls that puppy and ignores the return value.  And has -Werror for
    arch/*...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a238b563502a7f458624b9c6404742e441b2f9e8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:51 2005 +0100

    [PATCH] Kconfig fix (sparc32 drivers/char dependencies)
    
    since sparc32 Kconfig includes drivers/char/Kconfig (instead of duplicating
    its parts) we need several new dependencies there to exclude the stuff
    broken on sparc32 and not excluded by existing dependencies.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 997183dc2a8992374d93e66f5ea0d58fa1022a47
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:46 2005 +0100

    [PATCH] Kconfig fix (emac dependencient)
    
    emac doesn't build modular; ibm_emac_debug doesn't build at all (missing
    headers).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6299afc40c8612a87358ecea80882395fe67111f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:41 2005 +0100

    [PATCH] Kconfig fix (CONFIG_PM on 44x)
    
    CONFIG_PM is broken on 44x; removed duplicate entry for CONFIG_PM, made
    the inclusion of generic one conditional on BROKEN || !44x.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f08243a491f3e21feabbb04476a03fb0cbc975ff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:36 2005 +0100

    [PATCH] Kconfig fix (ppc 4xx and early serial)
    
    a bunch of ppc 4xx variants unconditionally calls early_serial_setup() and
    therefore needs SERIAL_8250
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4457fb9010765620faebccf4daf83b288295154
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:31 2005 +0100

    [PATCH] Kconfig fix (IRQ_ALL_CPUS vs. MV64360)
    
    MV64360 does not support IRQ_ALL_CPUS - see arch/ppc/kernel/mv64360_pic.c.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee449f514d2af21f3422c29702e6b0995c4c2a9c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:26 2005 +0100

    [PATCH] Kconfig fix (ppc32 SMP dependencies)
    
    ppc SMP is supported only for 6xx/POWER3/POWER4 - i.e. ones that have
    PPC_STD_MMU.  Dependency fixed.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51583cf108b27baf81c6db3ec718f932314986ea
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:21 2005 +0100

    [PATCH] Kconfig fix (VGA console on arm/versatile)
    
    VGA console doesn't exist (or build) on arm/versatile; dependency fixed.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84b6a2323a2b9482958965bc66bbfbd2711cde71
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:16 2005 +0100

    [PATCH] Kconfig fix (amba on arm/versatile)
    
    AMBA_PL010 is broken on arm/versatile; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a838e543db8f65ccbc710548916f20c23e51a363
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:11 2005 +0100

    [PATCH] Kconfig fix (acornscsi)
    
    acornscsi had been broken for a long time; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ff658589b8549a9142708d34625c7db6e34a672
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:06 2005 +0100

    [PATCH] Kconfig fix (M32R_PLDSIO dependecies)
    
    M32R_PLDSIO depends on subarchitecture providing PLD_ESIO0CR and
    friends.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14d891d20374c139acfaa379e61a7091b00df8fa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:46:01 2005 +0100

    [PATCH] Kconfig fix (parport_pc on m32r)
    
    parport_pc shouldn't be picked on m32r (no asm/parport.h, for starters)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab62c1e1dae0dedfc300c9f8e5c74227a8e26665
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:56 2005 +0100

    [PATCH] Kconfig fix (airo_cs on m32r)
    
    airo_cs is broken on m32r; marked as such. [Proper fix would involve
    separating PCI-dependent parts and making sure they don't get in the
    way _and_ arranging for asm/scatterlist.h getting picked on m32r]
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4d544fdd30111a1183ab92ea25febb8b6460214
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:51 2005 +0100

    [PATCH] Kconfig fix (tms380tr and ISA_DMA_API)
    
    ISA parts of tms380tr are using ISA DMA helpers and should depend on
    ISA_DMA_API.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b545d48ca0e41803a19864c924d2efcdd4839df2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:46 2005 +0100

    [PATCH] Kconfig fix (arv)
    
    arv uses constants provided only by include/asm-m32r/m32700ut/m32700ut_lan.h
    It won't build for any subarchitecture other than M32700UT; marked as such.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2b2f45be7e9138bde7fcba3b8e9257fea04d087
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:41 2005 +0100

    [PATCH] Kconfig fix (infiniband and PCI)
    
    infiniband uses PCI helpers all over the place (including the core parts) and
    won't build without PCI.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 697ae16ac0482283741f42378108b67b492870e8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:36 2005 +0100

    [PATCH] Kconfig fix (DEBUG_PAGEALLOC on m32r)
    
    DEBUG_PAGEALLOC is broken on m32r - the option had been blindly copied from
    i386; kernel_map_pages() had not and that's what is needed for DEBUG_PAGEALLOC
    to work (or link, while we are at it).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3a0f7718c84737440a621f6a8600f2e7b896a44
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:31 2005 +0100

    [PATCH] Kconfig fix (PCI on m32r)
    
    PCI support is broken on m32r (pci_map_... missing, etc.); marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 897874fa9c58898767f081e12d70a1855b66331d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:26 2005 +0100

    [PATCH] Kconfig fix (PMAC_BACKLIGHT on ppc64)
    
    PMAC_BACKLIGHT is broken on ppc64; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6622b8c780366f21c6bfaeebc6db8e591aa9ca2b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:21 2005 +0100

    [PATCH] Kconfig fix (HISAX_FRITZPCI on ppc64)
    
    HISAX_FRITZPCI is broken on ppc64; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 253a9c3308dd931e35f8527d9bda7dba591601d3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:16 2005 +0100

    [PATCH] Kconfig fix (m32r genrtc)
    
    genrtc is not for m32r; marked as such.  Probably ought to put that into
    arch/* - list of "don't build it on <platform>" is getting too long.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5596b267a95bdea865b966a3d6cc6e52e7feae7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:11 2005 +0100

    [PATCH] Kconfig fix (m32r NUMA)
    
    NUMA is broken on m32r; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 276bd31ce5af01350465861af7aa6a25864eb108
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:06 2005 +0100

    [PATCH] Kconfig fix (ISA_DMA_API and sound/*)
    
    fixed kconfig dependencies on ISA_DMA_API for parts of sound/* that rely
    on it.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9bcb173dd1747075214a1ccdb65dc6320cae49d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:45:01 2005 +0100

    [PATCH] Kconfig fix (epca on 64bit)
    
    epca is broken on 64bit; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac6babd26ce514e0017ec5809051ea6cdc44c8f6
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:44:55 2005 +0100

    [PATCH] Kconfig fix (arm SMP)
    
    SMP is broken on arm; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6df7c994a0090bf1e9604d690cde8e76b2618e4a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Aug 23 22:44:50 2005 +0100

    [PATCH] Kconfig fix (alpha NUMA)
    
    NUMA is broken on alpha; marked as such
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1cc168442a943ed3997f6543db87c061987f9d7
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 23 14:55:32 2005 -0700

    [ROSE]: Fix typo in rose_route_frame() locking fix.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81065e2f415af6c028eac13f481fb9e60a0b487b
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Aug 22 13:11:09 2005 -0700

    [PATCH] zd1201 kmalloc size fix
    
    Noticed by Coverity checker.
    
    (akpm: I stole this from Greg's tree and used the (IMO) tidier sizeof(*p)
    construct).
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 005eca5e74b222db4360f8938140eb843d283325
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon Aug 22 13:11:08 2005 -0700

    [PATCH] md: make sure resync gets started when array starts.
    
    We weren't actually waking up the md thread after setting
    MD_RECOVERY_NEEDED when assembling an array, so it is possible to lose a
    race and not actually start resync.
    
    So add a call to md_wakeup_thread, and while we are at it, remove all the
    "if (mddev->thread)" guards as md_wake_thread does its own checking.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c5640cb5f5a6fd780d99397eca028b575cb1206
Author: David Meybohm <dmeybohmlkml@bellsouth.net>
Date:   Mon Aug 22 13:11:08 2005 -0700

    [PATCH] preempt race in getppid
    
    With CONFIG_PREEMPT && !CONFIG_SMP, it's possible for sys_getppid to
    return a bogus value if the parent's task_struct gets reallocated after
    current->group_leader->real_parent is read:
    
            asmlinkage long sys_getppid(void)
            {
                    int pid;
                    struct task_struct *me = current;
                    struct task_struct *parent;
    
                    parent = me->group_leader->real_parent;
    RACE HERE =>    for (;;) {
                            pid = parent->tgid;
            #ifdef CONFIG_SMP
            {
                            struct task_struct *old = parent;
    
                            /*
                             * Make sure we read the pid before re-reading the
                             * parent pointer:
                             */
                            smp_rmb();
                            parent = me->group_leader->real_parent;
                            if (old != parent)
                                    continue;
            }
            #endif
                            break;
                    }
                    return pid;
            }
    
    If the process gets preempted at the indicated point, the parent process
    can go ahead and call exit() and then get wait()'d on to reap its
    task_struct. When the preempted process gets resumed, it will not do any
    further checks of the parent pointer on !CONFIG_SMP: it will read the
    bad pid and return.
    
    So, the same algorithm used when SMP is enabled should be used when
    preempt is enabled, which will recheck ->real_parent in this case.
    
    Signed-off-by: David Meybohm <dmeybohmlkml@bellsouth.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f024c1a4bc8ef9a149879351ce8b3aa749e0c2f
Merge: a4cce10... dc16aaf...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 23 11:06:56 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit dc16aaf29d64b8c5e0b88f49a4d541edf5b61e42
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 23 10:50:09 2005 -0700

    [ROSE]: Fix missing unlocks in rose_route_frame()
    
    Noticed by Coverity checker.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5d283751ef3c05b6766501a46800cbee84959d6
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 23 10:49:54 2005 -0700

    [TCP]: Document non-trivial locking path in tcp_v{4,6}_get_port().
    
    This trips up a lot of folks reading this code.
    Put an unlikely() around the port-exhaustion test
    for good measure.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89ebd197eb2cd31d6187db344d5117064e19fdde
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 23 10:13:06 2005 -0700

    [TCP]: Unconditionally clear TCP_NAGLE_PUSH in skb_entail().
    
    Intention of this bit is to force pushing of the existing
    send queue when TCP_CORK or TCP_NODELAY state changes via
    setsockopt().
    
    But it's easy to create a situation where the bit never
    clears.  For example, if the send queue starts empty:
    
    1) set TCP_NODELAY
    2) clear TCP_NODELAY
    3) set TCP_CORK
    4) do small write()
    
    The current code will leave TCP_NAGLE_PUSH set after that
    sequence.  Unconditionally clearing the bit when new data
    is added via skb_entail() solves the problem.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fbbeb1ba43bd04f0f1d4f161b7f72437a1c8a03
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Aug 23 10:12:44 2005 -0700

    [PKT_SCHED]: Fix missing qdisc_destroy() in qdisc_create_dflt()
    
    qdisc_create_dflt() is missing to destroy the newly allocated
    default qdisc if the initialization fails resulting in leaks
    of all kinds. The only caller in mainline which may trigger
    this bug is sch_tbf.c in tbf_create_dflt_qdisc().
    
    Note: qdisc_create_dflt() doesn't fulfill the official locking
          requirements of qdisc_destroy() but since the qdisc could
          never be seen by the outside world this doesn't matter
          and it can stay as-is until the locking of pkt_sched
          is cleaned up.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d2287f844187158e5eddd0d5de8e95bd607abcb7
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Tue Aug 23 10:12:04 2005 -0700

    [SCTP]: Add SENTINEL to SCTP MIB stats
    
    Add SNMP_MIB_SENTINEL to the definition of the sctp_snmp_list so that
    the output routine in proc correctly terminates.  This was causing some
    problems running on ia64 systems.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 01d7dd0e9f8c5f1888619d2649c7da389232b408
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Aug 23 10:11:45 2005 -0700

    [AX25]: UID fixes
    
     o Brown paperbag bug - ax25_findbyuid() was always returning a NULL pointer
       as the result.  Breaks ROSE completly and AX.25 if UID policy set to deny.
    
     o While the list structure of AX.25's UID to callsign mapping table was
       properly protected by a spinlock, it's elements were not refcounted
       resulting in a race between removal and usage of an element.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53b924b31fa53ac3007df3fef6870d5074a9adf8
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Aug 23 10:11:30 2005 -0700

    [NET]: Fix socket bitop damage
    
    The socket flag cleanups that went into 2.6.12-rc1 are basically oring
    the flags of an old socket into the socket just being created.
    Unfortunately that one was just initialized by sock_init_data(), so already
    has SOCK_ZAPPED set.  As the result zapped sockets are created and all
    incoming connection will fail due to this bug which again was carefully
    replicated to at least AX.25, NET/ROM or ROSE.
    
    In order to keep the abstraction alive I've introduced sock_copy_flags()
    to copy the socket flags from one sockets to another and used that
    instead of the bitwise copy thing.  Anyway, the idea here has probably
    been to copy all flags, so sock_copy_flags() should be the right thing.
    With this the ham radio protocols are usable again, so I hope this will
    make it into 2.6.13.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 66a79a19a7c582efd99bb143c3a59fbda006eb39
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 23 10:10:35 2005 -0700

    [NETFILTER]: Fix HW checksum handling in ip_queue/ip6_queue
    
    The checksum needs to be filled in on output, after mangling a packet
    ip_summed needs to be reset.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1344a41637114485fac7afa1505bce2ff862807a
Author: Dave Johnson <djohnson+linux-kernel@sw.starentnetworks.com>
Date:   Tue Aug 23 10:10:15 2005 -0700

    [IPV4]: Fix negative timer loop with lots of ipv4 peers.
    
    From: Dave Johnson <djohnson+linux-kernel@sw.starentnetworks.com>
    
    Found this bug while doing some scaling testing that created 500K inet
    peers.
    
    peer_check_expire() in net/ipv4/inetpeer.c isn't using inet_peer_gc_mintime
    correctly and will end up creating an expire timer with less than the
    minimum duration, and even zero/negative if enough active peers are
    present.
    
    If >65K peers, the timer will be less than inet_peer_gc_mintime, and with
    >70K peers, the timer duration will reach zero and go negative.
    
    The timer handler will continue to schedule another zero/negative timer in
    a loop until peers can be aged.  This can continue for at least a few
    minutes or even longer if the peers remain active due to arriving packets
    while the loop is occurring.
    
    Bug is present in both 2.4 and 2.6.  Same patch will apply to both just
    fine.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3a20692ca5c8eb8cf5d0f489d4fc839ce7593d1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Aug 23 10:09:53 2005 -0700

    [RPC]: Kill bogus kmap in krb5
    
    While I was going through the crypto users recently, I noticed this
    bogus kmap in sunrpc.  It's totally unnecessary since the crypto
    layer will do its own kmap before touching the data.  Besides, the
    kmap is throwing the return value away.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 14869c388673e8db3348ab3706fa6485d0f0cf95
Author: Dmitry Yusupov <dima@neterion.com>
Date:   Tue Aug 23 10:09:27 2005 -0700

    [TCP]: Do TSO deferral even if tail SKB can go out now.
    
    If the tail SKB fits into the window, it is still
    benefitical to defer until the goal percentage of
    the window is available.  This give the application
    time to feed more data into the send queue and thus
    results in larger TSO frames going out.
    
    Patch from Dmitry Yusupov <dima@neterion.com>.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a4cce10492358b33d33bb43f98284c80482037e8
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Mon Aug 22 17:50:00 2005 -0700

    [IA64] Fix simulator boot (for real this time).
    
    Thanks to Stephane, we've now worked out the real cause of the
    `Linux  will not boot on simulator' problem.  Turns out it's a stack
    overflow because the stack pointer wasn't being initialised properly
    in boot_head.S (it was being initialised to the lowest instead of the
    highest address of the stack, so the first push started to overwrite
    data in the BSS).
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 62d75f3753647656323b0365faa43fc1a8f7be97
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Aug 23 07:39:15 2005 -0700

    [IA64] backout incorrect fix for simulator boot issue
    
    Earlier fix in 4aec0fb12267718c750475f3404337ad13caa8f5 just
    masked the real problem.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 034e5356a4c0401d1227393de4c756e9c414be35
Merge: 729c80c... c1ffb91...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Aug 23 07:27:28 2005 -0700

    Pull prarit-bus-sysdata into release branch

commit 6885433c25aaca2cb13ee52a94be156163d6aa23
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 23 02:53:51 2005 -0400

    libata: release prep (bump versions, etc.)
    
    - bump versions where necessary
    - remove two duplicated+outdated doc comments
    - add MODULE_VERSION() to AHCI driver

commit 7087e295543d3f6e161530e07982fd979e2d9efc
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Aug 4 14:40:25 2005 -0400

    [PATCH] i810_audio: fix release_region misordering in error exit from i810_probe
    
    Re-order release_region calls in i810_probe to properly unwind preceding
    allocations.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 729c80c6ffd7633210a09d4b55fdfab3c8d1866b
Merge: 4eaefb3... f6fdd7d...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 22 14:31:36 2005 -0700

    Auto-update from upstream

commit f6fdd7d9c273bb2a20ab467cb57067494f932fa3
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 20 18:51:29 2005 -0700

    Don't allow normal users to set idle IO priority
    
    It has all the normal priority inversion problems.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e71af49d46e4c25f17a2c8f53d62ffd14f01007
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Aug 20 17:40:41 2005 -0700

    [NETFILTER]: Fix HW checksum handling in TCPMSS target
    
    Most importantly, remove bogus BUG() in receive path.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f93592ff4fa4a55aa7640d435fa93338e190294d
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Aug 20 17:39:15 2005 -0700

    [NETFILTER]: Fix HW checksum handling in ECN target
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd841326d73096ad79be9c3fa348f9ad04541cc2
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Aug 20 17:38:40 2005 -0700

    [NETFILTER]: Fix ECN target TCP marking
    
    An incorrect check made it bail out before doing anything.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a5ea169c9581553662bb79a1c8c98fed1ee84246
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Aug 21 01:08:36 2005 +0400

    [PATCH] freevxfs: fix breakage introduced by symlink fixes
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db873896d168217e213902c7163fda7ee798781b
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 20 13:20:01 2005 -0700

    befs: fix up missed follow_link declaration change
    
    We'd updated the prototype and the return value, but not the function
    declaration itself.

commit 1eecd73cce4e11ba9d67ad767f92069cfba7b589
Author: Andi Kleen <ak@suse.de>
Date:   Fri Aug 19 06:56:40 2005 +0200

    [PATCH] x86_64: Fix race in TSC synchronization
    
    Plug a race in TSC synchronization
    
    We need to do tsc_sync_wait() before the CPU is set online to prevent
    multiple CPUs from doing it in parallel - which won't work because TSC
    sync has global unprotected state.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e5ec10499a00bf4ce3440d5a9e1a5a176c5a640
Author: Andi Kleen <ak@suse.de>
Date:   Fri Aug 19 06:56:04 2005 +0200

    [PATCH] x86_64: Don't print exceptions for ltrace
    
    Don't printk exceptions for ltrace
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 916fa469ab2248d86473577dda72003df599879b
Merge: b8d9598... 034ea63...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 19 19:15:57 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit b8d9598c41e999fb094d3811019248197c54274a
Merge: 01c314a... 83c4e43...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 19 18:59:49 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 01c314a0c0f6367960a7cb1ffb5796560ccaa1c1
Author: Steve Dickson <SteveD@redhat.com>
Date:   Fri Aug 19 17:57:48 2005 -0700

    [PATCH] NFSv4: unbalanced BKL in nfs_atomic_lookup()
    
    Added missing unlock_kernel() to NFSv4 atomic lookup.
    
    Signed-off-by: Steve Dickson <steved@redhat.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd3716ab40c6049479d29a74b29107fd7e0e1153
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Fri Aug 19 17:57:46 2005 -0700

    [PATCH] Mobil Pentium 4 HT and the NMI
    
    I'm trying to get the nmi working with my laptop (IBM ThinkPad G41) and after
    debugging it a while, I found that the nmi code doesn't want to set it up for
    this particular CPU.
    
    Here I have:
    
    $ cat /proc/cpuinfo
    processor       : 0
    vendor_id       : GenuineIntel
    cpu family      : 15
    model           : 4
    model name      : Mobile Intel(R) Pentium(R) 4 CPU 3.33GHz
    stepping        : 1
    cpu MHz         : 3320.084
    cache size      : 1024 KB
    physical id     : 0
    siblings        : 2
    core id         : 0
    cpu cores       : 1
    fdiv_bug        : no
    hlt_bug         : no
    f00f_bug        : no
    coma_bug        : no
    fpu             : yes
    fpu_exception   : yes
    cpuid level     : 3
    wp              : yes
    flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge
    mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe pni
    monitor ds_cpl est tm2 cid xtpr
    bogomips        : 6642.39
    
    processor       : 1
    vendor_id       : GenuineIntel
    cpu family      : 15
    model           : 4
    model name      : Mobile Intel(R) Pentium(R) 4 CPU 3.33GHz
    stepping        : 1
    cpu MHz         : 3320.084
    cache size      : 1024 KB
    physical id     : 0
    siblings        : 2
    core id         : 0
    cpu cores       : 1
    fdiv_bug        : no
    hlt_bug         : no
    f00f_bug        : no
    coma_bug        : no
    fpu             : yes
    fpu_exception   : yes
    cpuid level     : 3
    wp              : yes
    flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge
    mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe pni
    monitor ds_cpl est tm2 cid xtpr
    bogomips        : 6637.46
    
    And the following code shows:
    
    $ cat linux-2.6.13-rc6/arch/i386/kernel/nmi.c
    
    [...]
    
    void setup_apic_nmi_watchdog (void)
    {
            switch (boot_cpu_data.x86_vendor) {
            case X86_VENDOR_AMD:
                    if (boot_cpu_data.x86 != 6 && boot_cpu_data.x86 != 15)
                            return;
                    setup_k7_watchdog();
                    break;
            case X86_VENDOR_INTEL:
                     switch (boot_cpu_data.x86) {
                    case 6:
                            if (boot_cpu_data.x86_model > 0xd)
                                    return;
    
                            setup_p6_watchdog();
                            break;
                    case 15:
                            if (boot_cpu_data.x86_model > 0x3)
                                    return;
    
    Here I get boot_cpu_data.x86_model == 0x4.  So I decided to change it and
    reboot.  I now seem to have a working NMI.  So, unless there's something know
    to be bad about this processor and the NMI.  I'm submitting the following
    patch.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Acked-by: Mikael Pettersson <mikpe@csd.uu.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 008b150a3c4d971cd65d02d107b8fcc860bc959c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Aug 20 00:17:39 2005 +0100

    [PATCH] Fix up symlink function pointers
    
    This fixes up the symlink functions for the calling convention change:
    
     * afs, autofs4, befs, devfs, freevxfs, jffs2, jfs, ncpfs, procfs,
       smbfs, sysvfs, ufs, xfs - prototype change for ->follow_link()
     * befs, smbfs, xfs - same for ->put_link()
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc314eef0128a807e50fa03baf2d0abc0647952c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 19 18:02:56 2005 -0700

    Fix nasty ncpfs symlink handling bug.
    
    This bug could cause oopses and page state corruption, because ncpfs
    used the generic page-cache symlink handlign functions.  But those
    functions only work if the page cache is guaranteed to be "stable", ie a
    page that was installed when the symlink walk was started has to still
    be installed in the page cache at the end of the walk.
    
    We could have fixed ncpfs to not use the generic helper routines, but it
    is in many ways much cleaner to instead improve on the symlink walking
    helper routines so that they don't require that absolute stability.
    
    We do this by allowing "follow_link()" to return a error-pointer as a
    cookie, which is fed back to the cleanup "put_link()" routine.  This
    also simplifies NFS symlink handling.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fb1e3086df9b454538491fba8121298da37cd23
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Aug 19 22:42:16 2005 +0100

    [PATCH] jffs2: fix symlink error handling
    
    The current calling conventions for ->follow_link() are already fairly
    complex.
    
    What we have is
    	1) you can return -error; then you must release nameidata yourself
    	   and ->put_link() will _not_ be called.
    	2) you can do nd_set_link(nd, ERR_PTR(-error)) and return 0
    	3) you can do nd_set_link(nd, path) and return 0
    	4) you can return 0 (after having moved nameidata yourself)
    
    jffs2 follow_link() is broken - it has an exit where it returns
    -EIO and leaks nameidata.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83c4e43722a2c8a8438b8d165047720fd36aaea4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Aug 19 15:56:37 2005 -0700

    [SPARC]: Fix weak aliases
    
    sparc_ksyms.c used to declare weak alias to several gcc intrinsics.  It
    doesn't work with gcc4 anymore - it wants a declaration for the thing
    we are aliasing to and that's not going to happen for something like
    .mul, etc.  Replaced with direct injection of weak alias on the assembler
    level - .weak <alias> followed by <alias> = <aliased>; that works on all
    gcc versions.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a3f9985843b674cbcb58f39fab8416675e7ab842
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Aug 19 15:55:33 2005 -0700

    [SPARC64]: Move kernel unaligned trap handlers into assembler file.
    
    GCC 4.x really dislikes the games we are playing in
    unaligned.c, and the cleanest way to fix this is to
    move things into assembler.
    
    Noted by Al Viro.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8d5290149ee1c6a4cea5f5146d64e2a0d48f4988
Author: Ben Colline <bcollins@debian.org>
Date:   Fri Aug 19 13:44:57 2005 -0700

    [SPARC]: Deal with glibc changing macro names in modpost.c
    
    GLIBC 2.3.4 and later changed the STT_REGISTER macro to
    STT_SPARC_REGISTER, so we need to cope with that somehow.
    
    Original patch from fabbione, reposted by Ben Collins.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 034ea6388a51f571b45ef1f0fa4ed4298691768e
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Aug 19 12:57:31 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit da6b2d01d6bd2e79fd4f7a08acd37dc4e8fcdce8
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri Aug 19 12:54:29 2005 -0700

    [TG3]: Fix SerDes detection
    
    A problem was reported by Grant Grundler on an HP rx8620 using IOX
    Core LAN partno(A7109-6) 5701 copper NIC. The tg3 driver mistakenly
    detects this NIC as having a SerDes PHY and link does not come up as a
    result.
    
    The problem was caused by an incorrectly programmed eeprom that set the
    NIC_SRAM_DATA_CFG_PHY_TYPE_FIBER bit in the NIC_SRAM_DATA_CFG location.
    
    This patch will override the NIC_SRAM_DATA_CFG_PHY_TYPE_FIBER bit if a
    valid PHY ID is read from the MII registers on older 570x chips where
    the MII interface is not used on SerDes chips. On newer chips such as
    the 5780 that use MII for both copper and SerDes, SerDes detection must
    rely on the eeprom.
    
    This patch will make the SerDes detection identical to versions 3.25 and
    older.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Acked-by: Grant Grundler <iod00d@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4eaefb39528b3a78fb6a784162200b198d3e16ee
Merge: 3a931d4... 30d5b64...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Aug 18 16:44:15 2005 -0700

    Auto-update from upstream

commit 91aa9fb573fcc50bc74d5ee64c7e9b36131f1804
Merge: 5fdf193... 84f57fb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 18 15:16:12 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6

commit 5fdf193b15a08f6c32ca4eb5913fa9be788e790e
Merge: f3ed8b4... 2ae2d77...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 18 14:58:21 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit f3ed8b444781158c9c10f48a8eba6795ecec7023
Merge: 6fc8b9e... 2cab224...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 18 14:57:53 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 3a931d4cca1b6dabe1085cc04e909575df9219ae
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Aug 18 14:40:00 2005 -0700

    [IA64] remove unused function __ia64_get_io_port_base
    
    Not only was this unused, but its somewhat eccentric declaration
    of "static inline const unsigned long" gives gcc4 heartburn.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6fc8b9e7c60d4a3d4d7f1189f74e37651f5610e6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Aug 18 14:36:59 2005 -0700

    [IPCOMP]: Fix false smp_processor_id warning
    
    This patch fixes a false-positive from debug_smp_processor_id().
    
    The processor ID is only used to look up crypto_tfm objects.
    Any processor ID is acceptable here as long as it is one that is
    iterated on by for_each_cpu().
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2cab224d1f6557e7014601f251d6a41982963e6b
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Aug 18 14:35:38 2005 -0700

    [SPARC64]: Fix 2 bugs in cpufreq drivers.
    
    1) cpufreq wants frequenceis in KHZ not MHZ
    2) provide ->get() method so curfreq node is created
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4aec0fb12267718c750475f3404337ad13caa8f5
Author: Ian Wienand <ianw@gelato.unsw.edu.au>
Date:   Tue Jul 19 22:32:00 2005 -0700

    [IA64] Simulator bootloader fails with gcc 4
    After building a fresh tree with gcc 4 I can't boot the simulator as
    the bootloader loader dies with
    
    loading /home/ianw/kerntest/kerncomp//build/sim_defconfig/vmlinux...
    failed to read phdr
    
    After some investigation I believe this is do with differences between
    the alignment of variables on the stack between gcc 3 and 4 and the
    ski simulator.  If you trace through with the simulator you can see
    that the disk_stat structure value returned from the SSC_WAIT_COMPLETION
    call seems to be only half loaded.  I guess it doesn't like the alignment
    of the input.
    
    Signed-off-by: Ian Wienand <ianw@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cb94c62c252796f42bb83fe40960d12f3ea5a82a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Aug 18 14:05:44 2005 -0700

    [IPV4]: Fix DST leak in icmp_push_reply()
    
    Based upon a bug report and initial patch by
    Ollie Wild.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 22783649568a28839c5a362f47da7819ecfcbb9f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Aug 18 14:05:18 2005 -0700

    [NET]: Fix comment in loopback driver.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 001dd250c1c68667a5c3b74979fa614e2edc9ceb
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Thu Aug 18 14:04:51 2005 -0700

    [TOKENRING]: Use interrupt-safe locking with rif_lock.
    
    Change operations on rif_lock from spin_{un}lock_bh to
    spin_{un}lock_irq{save,restore} equivalents.  Some of the
    rif_lock critical sections are called from interrupt context via
    tr_type_trans->tr_add_rif_info.  The TR NIC drivers call tr_type_trans
    from their packet receive handlers.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ae2d77cfa424587014cb34a89eed0ff2149fd5c
Author: Ben Dooks <ben-netdev@fluff.org>
Date:   Sat Jul 23 17:29:38 2005 +0100

    [PATCH] DM9000 - incorrect ioctl() handling
    
    The DM9000 driver is responding to ioctl() calls it should not be. This
    can cause problems with the wireless tools incorrectly indentifying the
    device as wireless capable, and crashing under certain operations.
    
    This patch also moves the version printk() to the init call, so that
    you only get it once for multiple devices, and to show it is loaded
    if there are no defined dm9000s
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9ef9ac51cc5fa5f5811230b5fb242536b636ff47
Author: Ben Dooks <ben-netdev@fluff.org>
Date:   Sat Jul 23 17:25:18 2005 +0100

    [PATCH] DM9000 - spinlock fixes
    
    Fix DM9000 driver usage of spinlocks, which mainly came to light
    when running a kernel with spinlock debugging. These come down to:
    
    1) Un-initialised spin lock
    
    2) Several cases of using  spin_xxx(lock) and not spin_xxx(&lock)
    
    3) move the locking around the phy reg for read/write to only
       keep the lock when actually reading or writing to the phy.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a4cf0761493495681d72dcc0b34efb86e94a5527
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Mon Jul 4 00:22:53 2005 +0200

    [PATCH] 8139cp - redetect link after suspend
    
    After suspend the driver needs to retest link status in case the cable
    has been inserted or removed during the suspend.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 852ea22ab24df4c64c0211c3b6d6358eb0e759f9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Aug 2 11:01:27 2005 +0100

    [PATCH] IOC3 fixes
    
     - Using the right register clearly improves chances of getting the MII
       code and thus the driver working at all.
     - On startup check the media type before setting up duplex or we might
       spend the first 1.2s with a wrong duplex setting.
     - Get rid of whitespace lines.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 84f57fbc724e3b56dc87c37dddac89f82cf75ef6
Author: Narendra Sankar <nsankar@broadcom.com>
Date:   Thu Aug 18 22:30:35 2005 +0200

    [PATCH] serverworks: add support for new southbridge IDE
    
    BCM5785 (HT1000) is a Opteron Southbridge from Serverworks/Broadcom that
    incorporates a single channel ATA100 IDE controller that is functionally
    identical to the Serverworks CSB6 IDE controller.  This patch adds support
    for the new PCI device ID and also the support for this controller.
    
    Signed-off-by: Narendra Sankar <nsankar@broadcom.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 2f09a7f4af131bf23c013ead89373deba1c7593c
Author: Matt Gillette <matt.gillette@netcell.com>
Date:   Thu Aug 18 22:27:07 2005 +0200

    [PATCH] ide: add support for Netcell Revolution to pci-ide generic driver
    
    Adds support for Netcell Revolution to pci-ide generic driver by including
    it in the list of devices matched.  Includes the Revolution in the list of
    simplex devices forced into DMA mode.
    
    Signed-off-by: Matt Gillette <matt.gillette@netcell.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit b07e5eccaf512ae3209beae5cd2e3a27c92c300b
Author: Grant Coady <gcoady@gmail.com>
Date:   Thu Aug 18 22:19:55 2005 +0200

    [PATCH] ide: fix PCI_DEVIEC_ID_APPLE_UNI_N_ATA spelling
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 0ac72b351bdf29252e4181b07fa7feed8501b5d2
Author: Juha-Matti Tapio <jmtapio@verkkotelakka.net>
Date:   Thu Aug 18 22:13:44 2005 +0200

    [PATCH] ide: fix the BLK_DEV_IDEDMA_PCI dependency for drivers/ide/ppc/pmac.c
    
    drivers/ide/ppc/pmac.c uses symbols ide_build_sglist,
    __ide_dma_off_quietly, __ide_dma_on and __ide_dma_timeout when
    CONFIG_BLK_DEV_IDEDMA_PMAC is defined. The declarations for these
    symbols (in ide.h) depend on CONFIG_BLK_DEV_IDEDMA_PCI. There is a
    missing dependency for this in drivers/ide/Kconfig which causes
    drivers/ide/ppc/pmac.c to fail to build if CONFIG_BLK_DEV_IDEDMA_PMAC
    is selected but CONFIG_BLK_DEV_IDEDMA_PCI is not.
    
    Signed-off-by: Juha-Matti Tapio <jmtapio@verkkotelakka.net>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit c40d3d38a8f04fff4394c7323db239bce780db60
Author: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>
Date:   Thu Aug 18 22:09:21 2005 +0200

    [PATCH] ide-floppy: fix IDEFLOPPY_TICKS_DELAY
    
    * IDEFLOPPY_TICKS_DELAY assumed HZ == 100, fix it
    * increase the delay to 50ms (to match comment in the code)
    
    Thanks to Manfred Scherer <manfred.scherer.mhm@t-online.de>
    for reporting the problem and testing the patch.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 6be382ea0c767a81be0e7980400b9b18167b3261
Author: Andi Kleen <ak@suse.de>
Date:   Thu Aug 18 11:24:27 2005 -0700

    [PATCH] x86: Remove obsolete get_cpu_vendor call
    
    Since early CPU identify is in this information is already available
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6a3ea22af7a2ed36afa4672a86b3a86d604db33
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Thu Aug 18 11:24:26 2005 -0700

    [PATCH] ppc32: Fix PPC440SP SRAM controller DCRs
    
    Fixes the incorrect DCR base value for the 440SP SRAM controller.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28cd1d17801774561c81a5be53bfb2d632aee2a2
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Thu Aug 18 11:24:25 2005 -0700

    [PATCH] ppc32: fix ppc4xx stb03xxx dma build
    
    Fixes build on 4xx stb03xxx when general purpose dma engine support is
    enabled.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2eaa297ca234eb518673b28dd6f3715d4b292e09
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Aug 18 11:24:25 2005 -0700

    [PATCH] uml: fix a crash under screen
    
    Running UML inside a detached screen delivers SIGWINCH when UML is not
    expecting it.  This patch ignores them.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 718d8989bca49761daf65f77249b0067c40756b2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 18 11:24:23 2005 -0700

    [PATCH] uml: fix the x86_64 build
    
    asm/elf.h breaks the x86_64 build.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 024f474795af7a0d41bd6d60061d78bd66d13f56
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 18 11:24:19 2005 -0700

    [PATCH] Make RLIMIT_NICE ranges consistent with getpriority(2)
    
    As suggested by Michael Kerrisk <mtk-manpages@gmx.net>, make RLIMIT_NICE
    consistent with getpriority before it becomes available in released glibc.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cbe9de7a4353d1a1b77887b5459ac5304c0984a
Author: Michael Iatrou <m.iatrou@freemail.gr>
Date:   Thu Aug 18 11:24:18 2005 -0700

    [PATCH] disable debug info in radeonfb old driver
    
    This driver spams the user.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d86c390ffbf5746df9a3cc2c5f7b75d27704580f
Author: Jan Kara <jack@suse.cz>
Date:   Thu Aug 18 11:24:17 2005 -0700

    [PATCH] reiserfs+acl+quota deadlock fix
    
    When i_acl_default is set to some error we do not hold the lock (hence we
    are not allowed to drop it and reacquire later).
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Cc: Jeff Mahoney <jeffm@suse.com>
    Cc: Chris Mason <mason@suse.com>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9223214e8d757663f366133ba5f9b58aa6b28efb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 18 11:24:16 2005 -0700

    [PATCH] md: make sure mddev->bitmap_offset gets cleared between array instantiations.
    
    ... otherwise we might try to load a bitmap from an array which hasn't one.
    
    The bug is that if you create an array with an internal bitmap, shut it down,
    and then create an array with the same md device, the md drive will assume it
    should have a bitmap too.  As the array can be created with a different md
    device, it is mostly an inconvenience.  I'm pretty sure there is no risk of
    data corruption.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60d7603a18a5c07252e7aa0b0e2424315195d4dc
Author: Robert Love <rlove@rlove.org>
Date:   Thu Aug 18 11:24:14 2005 -0700

    [PATCH] SH64: inotify and ioprio syscalls
    
    Add inotify and ioprio syscall stubs to SH64.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2926b7953c5f23265c062992516fed6674105db
Author: Robert Love <rml@novell.com>
Date:   Thu Aug 18 11:24:13 2005 -0700

    [PATCH] SH: inotify and ioprio syscalls
    
    Add inotify and ioprio syscall stubs to SH.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc59250c6ebed099a9bc0a11298e2281dd896657
Author: Chuck Lever <cel@citi.umich.edu>
Date:   Thu Aug 18 11:24:12 2005 -0700

    [PATCH] NFS: Introduce the use of inode->i_lock to protect fields in nfsi
    
    Down the road we want to eliminate the use of the global kernel lock entirely
    from the NFS client.  To do this, we need to protect the fields in the
    nfs_inode structure adequately.  Start by serializing updates to the
    "cache_validity" field.
    
    Note this change addresses an SMP hang found by njw@osdl.org, where processes
    deadlock because nfs_end_data_update and nfs_revalidate_mapping update the
    "cache_validity" field without proper serialization.
    
    Test plan:
     Millions of fsx ops on SMP clients.  Run Nick Wilson's breaknfs program on
     large SMP clients.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 412d582ec1dd59aab2353f8cb7e74f2c79cd20b9
Author: Chuck Lever <cel@citi.umich.edu>
Date:   Thu Aug 18 11:24:11 2005 -0700

    [PATCH] NFS: use atomic bitops to manipulate flags in nfsi->flags
    
    Introduce atomic bitops to manipulate the bits in the nfs_inode structure's
    "flags" field.
    
    Using bitops means we can use a generic wait_on_bit call instead of an ad hoc
    locking scheme in fs/nfs/inode.c, so we can remove the "nfs_i_wait" field from
    nfs_inode at the same time.
    
    The other new flags field will continue to use bitmask and logic AND and OR.
    This permits several flags to be set at the same time efficiently.  The
    following patch adds a spin lock to protect these flags, and this spin lock
    will later cover other fields in the nfs_inode structure, amortizing the cost
    of using this type of serialization.
    
    Test plan:
     Millions of fsx ops on SMP clients.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5529680981807b44abf3be30fb6d612ff04f68ff
Author: Chuck Lever <cel@citi.umich.edu>
Date:   Thu Aug 18 11:24:09 2005 -0700

    [PATCH] NFS: split nfsi->flags into two fields
    
    Certain bits in nfsi->flags can be manipulated with atomic bitops, and some
    are better manipulated via logical bitmask operations.
    
    This patch splits the flags field into two.  The next patch introduces atomic
    bitops for one of the fields.
    
    Test plan:
     Millions of fsx ops on SMP clients.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c7bf1eaee1255315fc7c2c4c300295e556ef768
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Thu Aug 18 11:24:07 2005 -0700

    [PATCH] Update email addresses for Zwane
    
    Some folks have been emailing me and having trouble due to these stale
    addresses;
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30d5b64b63fa69af31b2cba32e6d71d68526eec9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Aug 18 13:16:11 2005 +0200

    [PATCH] broken error path in drivers/pnp/card.c
    
    The error path in pnp_request_card_device() is broken (one variable is
    left initialized and the semaphore is not unlocked).
    
    This fixes it (and has been tested).
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 518e6540831c69422faecceee8f964bd439ac9d0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 17 17:33:11 2005 -0700

    [PATCH] Fix manual binding infinite loop
    
    Fix for manual binding of drivers to devices.  Problem is if you pass in
    a valid device id, but the driver refuses to bind.  Infinite loop as
    write() tries to resubmit the data it just sent.
    
    Thanks to Michal Ostrowski <mostrows@watson.ibm.com> for pointing the
    problem out.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 099d44e869f1886b5eb02a5145ca97b5e4142e28
Merge: 4e6a06e... 481d037...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 14:56:22 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit 4e6a06eec46067df3c30fe1fbc2e1a7cc37b9678
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Aug 17 11:36:35 2005 +0100

    [PATCH] Stop snd-powermac oopsing on non-pmac hardware.
    
    We shouldn't be assuming that ppc_md.feature_call will be present.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac9af7cba9e642961bfdee1a1fac6060405597e5
Author: Brian King <brking@us.ibm.com>
Date:   Thu Aug 18 07:32:18 2005 +1000

    [PATCH] ppc64: iommu vmerge fix
    
    This fixes a bug in the PPC64 iommu vmerge code which results in the
    potential for iommu_unmap_sg to go off unmapping more than it should.
    
    This was found on a test system which resulted in PCI bus errors due to
    PCI memory being unmapped while DMAs were still in progress.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75e8727fbb3749075b6df36be636a3045ed9d515
Merge: d3e5d29... 1f07247...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 13:09:38 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit d3e5d29136ce9bf21ce50c0c23a3a11b97a0da7b
Merge: c231c7d... c149ec0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 13:08:17 2005 -0700

    Merge head 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit c231c7db30faf93419fc22d680f74d816bea70e2
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 13:07:28 2005 -0700

    Revert unnecessary zlib_inflate/inftrees.c fix
    
    It turns out that empty distance code tables are not an error, and that
    a compressed block with only literals can validly have an empty table
    and should not be flagged as a data error.
    
    Some old versions of gzip had problems with this case, but it does not
    affect the zlib code in the kernel.
    
    Analysis and explanations thanks to Sergey Vlasov <vsu@altlinux.ru>
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7974b1cc7879141962999e78a6fc9a136dc4479e
Merge: c4f92db... 62ee914...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 13:02:22 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit c4f92dba97f4e3aa757500896f87001569f4604b
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Wed Aug 17 14:25:23 2005 -0400

    [PATCH] nfsd to unlock kernel before exiting
    
    The nfsd holds the big kernel lock upon exit, when it really shouldn't.
    Not to mention that this breaks Ingo's RT patch. This is a trivial fix
    to release the lock.
    
    Ingo, this patch also works with your kernel, and stops the problem with
    nfsd.
    
    Note, there's a "goto out;" where "out:" is right above svc_exit_thread.
    The point of the goto also holds the kernel_lock, so I don't see any
    problem here in releasing it.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd12f48d4e8774415b528d3991ae47c28f26e1ac
Author: Bhavesh P. Davda <bhavesh@avaya.com>
Date:   Wed Aug 17 12:26:33 2005 -0600

    [PATCH] NPTL signal delivery deadlock fix
    
    This bug is quite subtle and only happens in a very interesting
    situation where a real-time threaded process is in the middle of a
    coredump when someone whacks it with a SIGKILL.  However, this deadlock
    leaves the system pretty hosed and you have to reboot to recover.
    
    Not good for real-time priority-preemption applications like our
    telephony application, with 90+ real-time (SCHED_FIFO and SCHED_RR)
    processes, many of them multi-threaded, interacting with each other for
    high volume call processing.
    
    Acked-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f07247de51efd30c88ad8e3e06a8b5382fc7d35
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Wed Aug 17 12:05:27 2005 -0700

    [DECNET]: Fix RCU race condition in dn_neigh_construct().
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bfd272b1ca1164382eabaa9986aad822adb91eb2
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Aug 17 12:04:22 2005 -0700

    [IPV6]: Fix SKB leak in ip6_input_finish()
    
    Changing it to how ip_input handles should fix it.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 35d59efd105b3b7c1b5878dcc9d1749f41f9740f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Aug 17 12:03:59 2005 -0700

    [TCP]: Fix bug #5070: kernel BUG at net/ipv4/tcp_output.c:864
    
    1) We send out a normal sized packet with TSO on to start off.
    2) ICMP is received indicating a smaller MTU.
    3) We send the current sk_send_head which needs to be fragmented
    since it was created before the ICMP event.  The first fragment
    is then sent out.
    
    At this point the remaining fragment is allocated by tcp_fragment.
    However, its size is padded to fit the L1 cache-line size therefore
    creating tail-room up to 124 bytes long.
    
    This fragment will also be sitting at sk_send_head.
    
    4) tcp_sendmsg is called again and it stores data in the tail-room of
    of the fragment.
    5) tcp_push_one is called by tcp_sendmsg which then calls tso_fragment
    since the packet as a whole exceeds the MTU.
    
    At this point we have a packet that has data in the head area being
    fed to tso_fragment which bombs out.
    
    My take on this is that we shouldn't ever call tcp_fragment on a TSO
    socket for a packet that is yet to be transmitted since this creates
    a packet on sk_send_head that cannot be extended.
    
    So here is a patch to change it so that tso_fragment is always used
    in this case.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97077c4a9868fce8ac151512cde5d24fc1144f24
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Aug 17 12:03:32 2005 -0700

    [IPV6]: Fix raw socket hardware checksum failures
    
    When packets hit raw sockets the csum update isn't done yet, do it manually.
    Packets can also reach rawv6_rcv on the output path through
    ip6_call_ra_chain, in this case skb->ip_summed is CHECKSUM_NONE and this
    codepath isn't executed.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c149ec05dcd09d525e6778e339122827c7cd79b8
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Aug 17 10:24:17 2005 -0700

    [IA64] Updated tiger defconfig
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ade6648b3b11a5d81f6f28135193ab6d85d621db
Merge: 2ad5649... fad87ac...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 17 08:21:00 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 62ee914ef27fded9d1c5da41e1e05c3bd175c529
Author: Dimitry Andric <dimitry.andric@tomtom.com>
Date:   Wed Aug 17 13:01:19 2005 +0100

    [ARM] 2850/1: Remove duplicate UART I/O mapping from s3c2410_iodesc
    
    Patch from Dimitry Andric
    
    This patch removes the initial UART I/O mapping from s3c2410_iodesc,
    since the same mapping is already done in the function s3c24xx_init_io
    in the file arch/arm/mach-s3c2410/cpu.c, through the s3c_iodesc array.
    I'm not sure if duplicate mappings do any harm, but it's simply
    redundant.  Also, in s3c2440.c the UART I/O mapping is NOT done.
    Additionally, I put a comma behind the last mapping, to ease
    copy/pasting stuff around, and make the style consistent with
    s3c2440.c and other files.
    
    Signed-off-by: Dimitry Andric <dimitry.andric@tomtom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 22d8be866ee23bf3ad9fe867587eef5f4200bf84
Author: Sean Lee <beginner2arm@eyou.com>
Date:   Wed Aug 17 09:28:26 2005 +0100

    [ARM] 2852/1: Correct the mistake in arch/arm/mm/Kconfig file
    
    Patch from Sean Lee
    
    In the arch/arm/mm/Kconfig file, the CPU_DCACHE_WRITETHROUGH
    option is depend on the CPU_DISABLE_DCACHE, but the "Disable
    D-Cache" option is configured as CPU_DCACHE_DISABLE.
    The CPU_DISABLE_DCACHE should be CPU_DCACHE_DISABLE
    
    Signed-off-by: Sean Lee <beginner2arm@eyou.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2ad56496627630ebc99f06af5f81ca23e17e014e
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 17 13:01:50 2005 +1000

    [PATCH] iSeries build with newer assemblers and compilers
    
    Paulus suggested that we put xLparMap in its own .c file so that we can
    generate a .s file to be included into head.S.  This doesn't get around
    the problem of having it at a fixed address, but it makes it more
    palatable.
    
    It would be good if this could be included in 2.6.13 as it solves our
    build problems with various versions of binutils and gcc.  In
    particular, it allows us to build an iSeries kernel on Debian unstable
    using their biarch compiler.
    
    This has been built and booted on iSeries and built for pSeries and g5.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da5ca008933b3b28303ba44d0be3372fbac7748b
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Tue Aug 16 15:16:46 2005 -0700

    [PATCH] USB: usbmon: Copyrights and a typo
    
    Add copyright statements and fix a typo.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc1d97e466c2836adebe5618759bfb5b35b3bc0a
Author: Ping Cheng <pingc@wacom.com>
Date:   Tue Aug 16 15:16:32 2005 -0700

    [PATCH] USB: fix usb wacom tablet driver bug
    
    This patch fixes bug 4905 and a Cintiq 21UX bug.
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33a5c72432ef3e75dcf546bf41bcbfce697903ff
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Tue Aug 16 15:16:26 2005 -0700

    [PATCH] PCI: update documentation
    
    This removes very old functions from pci docs, which are no longer in
    the kernel.
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf4c19523b7694c88bba716d88fb659fa702411
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Tue Aug 16 15:16:10 2005 -0700

    [PATCH] PCI Hotplug: new contact info
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b47b0eefc37fe3bf6bffb4507c8b6df5b14348d
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Aug 16 15:16:05 2005 -0700

    [PATCH] PCI: fix quirk-6700-fix.patch
    
    drivers/built-in.o(.text+0x32c3): In function `quirk_pcie_pxh':
    /usr/src/25/drivers/pci/quirks.c:1312: undefined reference to `disable_msi_mode'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4602b88d9743b5f20655de8078fb42e9fd25581f
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Tue Aug 16 15:15:58 2005 -0700

    [PATCH] PCI: 6700/6702PXH quirk
    
    On the 6700/6702 PXH part, a MSI may get corrupted if an ACPI hotplug
    driver and SHPC driver in MSI mode are used together.
    
    This patch will prevent MSI from being enabled for the SHPC as part of
    an early pci quirk, as well as on any pci device which sets the no_msi
    bit.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 208f3d6175cb17772c5af202fe12373f90894ff4
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Tue Aug 16 15:15:48 2005 -0700

    [PATCH] Driver core: potentially fix use after free in class_device_attr_show
    
    This moves the code to free devt_attr from class_device_del() to
    class_dev_release() which is called after the last reference to the
    corresponding kobject() is gone.
    
    This allows us to keep the devt_attr alive while the corresponding
    sysfs file is open.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fad87acaea7b0965fe91f0351fdd688fc9761cbe
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 16 21:03:41 2005 -0700

    [IPV6]: Fix SKB leak in ip6_input_finish()
    
    Changing it to how ip_input handles should fix it.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8ac37746489f05a32a958b048f29ae45487e81e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Aug 16 20:43:40 2005 -0700

    [TCP]: Fix bug #5070: kernel BUG at net/ipv4/tcp_output.c:864
    
    1) We send out a normal sized packet with TSO on to start off.
    2) ICMP is received indicating a smaller MTU.
    3) We send the current sk_send_head which needs to be fragmented
    since it was created before the ICMP event.  The first fragment
    is then sent out.
    
    At this point the remaining fragment is allocated by tcp_fragment.
    However, its size is padded to fit the L1 cache-line size therefore
    creating tail-room up to 124 bytes long.
    
    This fragment will also be sitting at sk_send_head.
    
    4) tcp_sendmsg is called again and it stores data in the tail-room of
    of the fragment.
    5) tcp_push_one is called by tcp_sendmsg which then calls tso_fragment
    since the packet as a whole exceeds the MTU.
    
    At this point we have a packet that has data in the head area being
    fed to tso_fragment which bombs out.
    
    My take on this is that we shouldn't ever call tcp_fragment on a TSO
    socket for a packet that is yet to be transmitted since this creates
    a packet on sk_send_head that cannot be extended.
    
    So here is a patch to change it so that tso_fragment is always used
    in this case.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 793245eeb97bd28e363f2b0f2e766fdbff0c9619
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 16 20:39:38 2005 -0700

    [IPV6]: Fix raw socket hardware checksum failures
    
    When packets hit raw sockets the csum update isn't done yet, do it manually.
    Packets can also reach rawv6_rcv on the output path through
    ip6_call_ra_chain, in this case skb->ip_summed is CHECKSUM_NONE and this
    codepath isn't executed.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f09d6f935aaa91f71fe64d64013ad3bd2a9d2f4
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue Aug 16 17:27:00 2005 -0700

    [IA64] Updated zx1 defconfig
    
    Just `make oldconfig' doesn't help for the zx1 defconfig ---
    because we need the MPT Fusion drivers, which are picked up as not
    selected.
    Tested on HP ZX2000 and ZX2600.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7b1a843f4630867c1d686885e7af94eac137e888
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Tue Aug 16 13:06:00 2005 -0700

    [IA64] Refresh arch/ia64/configs/sn2_defconfig.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 71841b8fe7dd8caffd07482cbed4a99874bfbb70
Author: Keith Owens <kaos@sgi.com>
Date:   Sat Jul 30 17:52:00 2005 -0700

    [IA64] Initialize some spinlocks
    
    Some IA64 spinlocks are not being initialized, make it so.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c1ffb910f7a4e1e79d462bb359067d97ad1a8a25
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Tue Aug 2 10:08:00 2005 -0700

    [IA64]: SN fix bus->sysdata pointer and memory cleanups
    
    The main issue is that bus_fixup calls may potentially call
    functions that require a valid bus->sysdata pointer.  Since
    this is the case, we must set the bus->sysdata pointer before
    calling the bus_fixup functions.  The remaining changes are
    simple fixes to make sure memory is cleaned up in the function.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 12aaa0855b39b5464db953fedf399fa91ee365ed
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Aug 16 12:05:09 2005 -0700

    [PATCH] i386 / desc_empty macro is incorrect
    
    Chuck Ebbert noticed that the desc_empty macro is incorrect.  Fix it.
    
    Thankfully, this is not used as a security check, but it can falsely
    overwrite TLS segments with carefully chosen base / limits.  I do not
    believe this is an issue in practice, but it is a kernel bug.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    
    [ x86-64 had the same problem, and the same fix. Linus ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5153f7e6dba37390902c8fd3edc9a8cc19358ece
Merge: ca27ea4... 2d610b8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 16 12:12:30 2005 -0700

    Merge head 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit 481d0374217f3fefaf98efbd8d21d73c138dd928
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Aug 16 19:42:56 2005 +0100

    NTFS: Complete the previous fix for the unset device when mapping buffers
          for  mft record writing.  I had missed the writepage based mft record
          write code path.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit f7001e8f1fa5369ee24f58255726a04a2019e4bd
Merge: 85f265d... cf59001...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Aug 16 11:29:57 2005 -0700

    Auto-update from upstream

commit ca27ea487ea10bd22459dbc367cf263f1e8d5228
Merge: cf59001... fb80cbe...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 16 09:43:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lenb/to-linus

commit cf59001235c5a36f3e3701bd593a78cf955a4242
Merge: 65e4308... e74589a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 16 09:31:28 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit 65e4308d2500e7daf60c3dccc202c61ffb066c63
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Aug 16 11:49:44 2005 -0400

    [PATCH] NFS: Ensure we always update inode->i_mode when doing O_EXCL creates
    
    When the client performs an exclusive create and opens the file for writing,
    a Netapp filer will first create the file using the mode 01777. It does this
    since an NFSv3/v4 exclusive create cannot immediately set the mode bits.
    The 01777 mode then gets put into the inode->i_mode. After the file creation
    is successful, we then do a setattr to change the mode to the correct value
    (as per the NFS spec).
    
    The problem is that nfs_refresh_inode() no longer updates inode->i_mode, so
    the latter retains the 01777 mode. A bit later, the VFS notices this, and calls
    remove_suid(). This of course now resets the file mode to inode->i_mode & 0777.
    Hey presto, the file mode on the server is now magically changed to 0777. Duh...
    
    Fixes http://bugzilla.linux-nfs.org/show_bug.cgi?id=32
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 367ae3cd74bdc2ad32d71293427fec570b14ddcd
Author: John Hawkes <hawkes@jackhammer.engr.sgi.com>
Date:   Tue Aug 16 17:59:20 2005 +1000

    [PATCH] fix for ia64 sched-domains code
    
    Fix for ia64 sched domain building triggered by cpuset code.
    
    Acked-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58fcb8df0bf663bb6b8f46cd3010bfe8d13d97cf
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Aug 10 18:15:12 2005 -0400

    [PATCH] NFS: Ensure ACL xdr code doesn't overflow.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e74589ac250e463973361774a90fee2c9d71da02
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Aug 16 16:38:28 2005 +0100

    NTFS: Fix bug in mft record writing where we forgot to set the device in
          the buffers when mapping them after the VM had discarded them.
          Thanks to Martin MOKREJ for the bug report.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 75cd968ab251ac84dd3a5dc252af7036dc4a64f4
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 15 17:40:46 2005 -0700

    um: fix __pa/__va macro expansion problem
    
    Proper parentheses around arguments needed, especially as the macros use
    a high-precedence cast operator on the argument.

commit 85f265d887d2389376f1caa191e9682085feb76e
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Aug 9 13:38:00 2005 -0700

    [IA64] update CONFIG_PCI description
    
    The current one doesn't even make sense anymore on i386 where it
    apparently came from.
    
    Follow-up wordsmithing by Matthew Wilcox and Tony Luck.
    
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fb80cbee4c4bfeaeb2ff6611beecfb9a2443da90
Merge: b857c73... 3edea48...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 15 16:02:50 2005 -0400

    Merge ../from-linus

commit b857c730d4e960d1876ff56ce5c4bd81ea9ff5ae
Merge: 2ba8468... 30e332f...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 15 15:49:00 2005 -0400

    Merge ../to-linus-stable/

commit 30e332f3307e9f7718490a706e5ce99f0d3a7b26
Author: Luming Yu <luming.yu@intel.com>
Date:   Fri Aug 12 00:31:00 2005 -0400

    [ACPI] re-enable platform-specific hotkey drivers by default
    
    When both platform-specific and generic drivers exist,
    enable generic over-ride with "acpi_generic_hotkey".
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4953
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 54738e82755f73080e779ba0c8052e232df24d78
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Aug 15 20:42:32 2005 +0100

    [PATCH] ARM: 2851/1: Fix NWFPE extended precision exception handling
    
    Patch from Richard Purdie
    
    The exception handling code fails to compile if the extended
    precision mode is enabled. This patch fixes those compile errors and
    also stops _quiet functions from incorrectly raising exceptions.
    Reported-by: Ralph Siemsen <ralphs@netwinder.org>
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3edea4833a1efcd43e1dff082bc8001fdfe74b34
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Aug 15 21:29:11 2005 +0800

    [PATCH] intelfb/fbdev: Save info->flags in a local variable
    
    Reported by: Pavel Kysilka (Bugzilla Bug 5059)
    
    The intelfb driver does not keep resolution set with fbset after
    switching to anot console and back.
    
    Steps to reproduce:
    
      initial options: tty1,tty2 - 1024x768-60
      1) tty1 - fbset after booting (1024x768-60)
      2) tty1 - fbset 800x600-100
      tty1: 800x600-100
      3) swith to tty2, swith to tty1
      tty1: 1024x768-60 (the same resolution as default from kernel booting)
    
    This bug is caused by intelfb unintentionally destroying info->flags in
    set_par(). Therefore the flag, FBINFO_MISC_USEREVENT used to notify
    fbcon of a mode change was cleared causing the above problem. This bug
    though is not intelfb specific, as other drivers may also be affected.
    
    The fix is to save info->flags in a local variable before calling any
    of the driver hooks.  A more definitive fix (for post 2.6.13) is to
    separate info->flags into one that is set by the driver and another that
    is set by core fbdev/fbcon.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bd49341f2806168c877e12cefca77b93437bac2
Author: Sylvain Meyer <sylvain.meyer@worldonline.fr>
Date:   Mon Aug 15 21:27:13 2005 +0800

    [PATCH] intelfb: Do not ioremap entire graphics aperture
    
    Reported by: Pavel Kysilka (Bugzilla Bug 4738)
    
    modprobe of intelfb results in the following error message:
    
    	intelfb: Framebuffer driver for Intel(R) 830M/845G/852GM/855GM/865G/915G chi
    	intelfb: Version 0.9.2
    	ACPI: PCI Interrupt 0000:00:02.0[A] -> GSI 16 (level, low) -> IRQ 16
    	allocation failed: out of vmalloc space - use vmalloc=<size> to increase siz
    	intelfb: Cannot remap FB region.
    
    This will fail if the graphics aperture size is greater than 128 MB.
    
    Fix is to ioremap only from the beginning of graphics aperture to the
    end of the used framebuffer memory.
    
    Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89204c40a03346cd951e698d854105db4cfedc28
Author: John McCutchan <jmccutchan@novell.com>
Date:   Mon Aug 15 12:13:28 2005 -0400

    [PATCH] inotify: add MOVE_SELF event
    
    This adds a MOVE_SELF event to inotify.  It is sent whenever the inode
    you are watching is moved.  We need this event so that we can catch
    something like this:
    
     - app1:
    	watch /etc/mtab
    
     - app2:
    	cp /etc/mtab /tmp/mtab-work
    	mv /etc/mtab /etc/mtab~
    	mv /tmp/mtab-work /etc/mtab
    
    app1 still thinks it's watching /etc/mtab but it's actually watching
    /etc/mtab~.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bf955ce98cb3cf40e20d0cc435299eb76e8819e
Author: Robert Love <rml@novell.com>
Date:   Mon Aug 15 12:27:54 2005 -0400

    [PATCH] inotify: fix idr_get_new_above usage
    
    We are saving the wrong thing in ->last_wd.  We want the wd, not the
    return value.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d93742f5a73c3dff641732c029836170f86392d2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Aug 15 16:53:38 2005 +0100

    [ARM] Remove extraneous whitespace introduced in previous ARMv6 patch
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 498de0cc5ea3009af762dc968a46d6f5df96b67a
Author: Robert Love <rml@novell.com>
Date:   Mon Aug 15 10:57:08 2005 +0100

    [ARM] Add syscall stubs for inotify and ioprio system calls
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2ba84684e8cf6f980e4e95a2300f53a505eb794e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 14 18:21:30 2005 -0700

    Revert PCIBIOS_MIN_IO changes for 2.6.13
    
    This reverts commits
    
      71db63acff69618b3d9d3114bd061938150e146b
    	[PATCH] increase PCIBIOS_MIN_IO on x86
    
    and
    
      0b2bfb4e7ff61f286676867c3508569bea6fbf7a
        ACPI: increase PCIBIOS_MIN_IO on x86
    
    since Lukas Sandstr<lukass@etek.chalmers.se> reports that this breaks
    his on-board nvidia audio.
    
    We should re-visit this later. For now we revert the change
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4b08e581fac8e0ba9ae348bdc13246c9798c99e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 14 15:43:39 2005 -0700

    Revert "dc395x: Fix support for highmem"
    
    It introduces a repeatable oops in the driver, which is a bigger problem
    than the patch tries to solve. From the original description:
    
        Author: Jamie Lenehan <lenehan@twibble.org>
        Date:   Thu Mar 3 14:41:40 2005 +0200
    
        [PATCH] dc395x: Fix support for highmem
    
        From: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    
        Removes the page_to_virt and maps sg lists dynamically.
        This makes the driver work with highmem pages.
    
        Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
        Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
        Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27876d02b30aa34bb1ad35b81ccc40c174282f31
Author: Steve French <smfrench@austin.rr.com>
Date:   Sun Aug 14 16:55:23 2005 -0500

    [PATCH] CIFS: Fix path name conversion for long filenames
    
    Fix path name conversion for long filenames when mapchars mount option
    was specified at mount time.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d024709deb4997aced6140a62e8ee82b10666c5f
Author: Steve French <smfrench@austin.rr.com>
Date:   Sun Aug 14 16:55:23 2005 -0500

    [PATCH] CIFS: Fix missing entries in search results
    
    Fix missing entries in search results when very long file names and more
    than 50 (or so) of such long search entries in the directory.
    
    FindNext could send corrupt last byte of resume name when resume key was
    a few hundred bytes long file name or longer.
    
    Fixes Samba Bug # 2932
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b0a74d1c002320d5488333dd9c72126af1aab02
Author: Jan Kara <jack@suse.cz>
Date:   Sat Aug 13 13:15:34 2005 +0200

    [PATCH] Fix error handling in reiserfs
    
    Initialize key object ID in inode so that we don't try to remove the inode
    when we fail on some checks even before we manage to allocate something.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f73bc8cae3481adc4188a5f34a89025c10133b0a
Author: Paul Mundt <lethal@Linux-SH.ORG>
Date:   Sat Aug 13 20:28:06 2005 +0300

    [PATCH] sh: Make _syscall6() do the right thing.
    
    There was a rather silly and embarrassing typo in the sh _syscall6().
    For the syscall ABI we have the trapa value specified as 0x10 + number
    of arguments, this was being set incorrectly in the _syscall6() case
    which ended up causing some problems for users.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bb82551e165f887448f6f61055d7bcd90aefa2a
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 13 14:22:59 2005 -0700

    Fix up mmap of /dev/kmem
    
    This leaves the issue of whether we should deprecate the whole thing (or
    if we should check the whole mmap range, for that matter) open. Just do
    the minimal fix for now.

commit fc464476aa8356f7aae8787d9b8c14aa15d166eb
Merge: 6912413... 2da5bf8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Aug 12 15:13:06 2005 -0700

    Auto-update from upstream

commit 2da5bf80f754e28cc153362e5ed1edaa9740897a
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Aug 12 11:46:22 2005 -0700

    [PATCH] w1: more debug level decrease.
    
    Do not spam syslog each 10 seconds when there is nothing on the wire.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63788ea9245688772d13b979bea05bd72b239aad
Merge: 349188f... d7b9dfc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 12 09:22:34 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 349188f66da2fd88f8cb2407763051d8e136c9aa
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Thu Aug 11 22:26:25 2005 -0600

    [PATCH] x86_64: Fix apicid versus cpu# confusion.
    
    Oops.  I knew I didn't have the physical versus logical cpu identifiers right
    when I generated that patch.  It's not nearly as bad as I feared at the time
    though.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7b9dfc8ea43936e6e8eec3040dcf4f110563868
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 11 19:28:05 2005 -0700

    [NETPOLL]: remove unused variable
    
    Remove unused variable
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53fb95d3c14290fd6ee808b221e35493f096246f
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 11 19:27:43 2005 -0700

    [NETPOLL]: fix initialization/NAPI race
    
    This fixes a race during initialization with the NAPI softirq
    processing by using an RCU approach.
    
    This race was discovered when refill_skbs() was added to
    the setup code.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2652076507b662fc88ba16c27b59c7bdd9ccd956
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Aug 11 19:26:42 2005 -0700

    [NETPOLL]: pre-fill skb pool
    
    we could do one thing (see the patch below): i think it would be useful
    to fill up the netlogging skb queue straight at initialization time.
    Especially if netpoll is used for dumping alone, the system might not be
    in a situation to fill up the queue at the point of crash, so better be
    a bit more prepared and keep the pipeline filled.
    
    [ I've modified this to be called earlier - mpm ]
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0db1d6fc1ea051af49ebe03c503d23996a7c5bbb
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 11 19:25:54 2005 -0700

    [NETPOLL]: add retry timeout
    
    Add limited retry logic to netpoll_send_skb
    
    Each time we attempt to send, decrement our per-device retry counter.
    On every successful send, we reset the counter.
    
    We delay 50us between attempts with up to 20000 retries for a total of
    1 second. After we've exhausted our retries, subsequent failed
    attempts will try only once until reset by success.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f0d3459d0722782c7d9d0e35a1ed0815e75fcde5
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 11 19:25:11 2005 -0700

    [NETPOLL]: netpoll_send_skb simplify
    
    Minor netpoll_send_skb restructuring
    
    Restructure to avoid confusing goto and move some bits out of the
    retry loop.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b0b31572985c2e64f7216c798766302fb782281
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Aug 11 19:24:33 2005 -0700

    [NETPOLL]: e1000 netpoll tweak
    
    Suggested by Steven Rostedt, matches his patch included in e100.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a636e1357911afdea7c8344ee65f78d36caf3c16
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Thu Aug 11 19:23:50 2005 -0700

    [NETPOLL]: deadlock bugfix
    
    This fixes an obvious deadlock in the netpoll code.  netpoll_rx takes the
    npinfo->rx_lock.  netpoll_rx is also the only caller of arp_reply (through
    __netpoll_rx).  As such, it is not necessary to take this lock.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 11513128bb66b0b09d5d0df069b58afdb01752a2
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Thu Aug 11 19:23:04 2005 -0700

    [NETPOLL]: rx_flags bugfix
    
    Initialize npinfo->rx_flags.  The way it stands now, this will have random
    garbage, and so will incur a locking penalty even when an rx_hook isn't
    registered and we are not active in the netpoll polling code.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0d3bea3cf6c7c1b53a46432bd490b5dc784ca42
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Aug 11 16:05:50 2005 -0700

    [NET]: Make skb->protocol __be16
    
    There are many instances of
    
    	skb->protocol = htons(ETH_P_*);
    	skb->protocol = __constant_htons(ETH_P_*);
    and
    	skb->protocol = *_type_trans(...);
    
    Most of *_type_trans() are already endian-annotated, so, let's shift
    attention on other warnings.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d69fa6266770eeb6317eddd46b64456e8a515bf
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Aug 11 11:54:24 2005 +0200

    [PATCH] Fix DVB URL
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 691241315116b962f2161e6190f1678cc65bbe26
Merge: 1c53e43... 6bf11e8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Aug 11 09:43:50 2005 -0700

    pull perfmon context load into release tree

commit b5da623ae9be680ea59f268eeb339f0acb2d88c4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Aug 10 18:32:36 2005 -0700

    [TCP]: Adjust {p,f}ackets_out correctly in tcp_retransmit_skb()
    
    Well I've only found one potential cause for the assertion
    failure in tcp_mark_head_lost.  First of all, this can only
    occur if cnt > 1 since tp->packets_out is never zero here.
    If it did hit zero we'd have much bigger problems.
    
    So cnt is equal to fackets_out - reordering.  Normally
    fackets_out is less than packets_out.  The only reason
    I've found that might cause fackets_out to exceed packets_out
    is if tcp_fragment is called from tcp_retransmit_skb with a
    TSO skb and the current MSS is greater than the MSS stored
    in the TSO skb.  This might occur as the result of an expiring
    dst entry.
    
    In that case, packets_out may decrease (line 1380-1381 in
    tcp_output.c).  However, fackets_out is unchanged which means
    that it may in fact exceed packets_out.
    
    Previously tcp_retrans_try_collapse was the only place where
    packets_out can go down and it takes care of this by decrementing
    fackets_out.
    
    So we should make sure that fackets_out is reduced by an appropriate
    amount here as well.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6bf11e8c708f0e512ed733fc65a50770c5bc7b54
Author: stephane.eranian@hp.com <stephane.eranian@hp.com>
Date:   Thu Jul 28 05:18:00 2005 -0700

    [IA64] fix perfmon context load
    
    The PFM_LOAD_CONTEXT may fail silently and cause a session
    to remain reserved even though it should not. This can happen
    when the commands succeeds in reserving the session but fails
    when it actually tries to attach to the load_pid. In that case,
    the command has failed but will return 0. More importantly,
    the session will remain reserved. This patch fixes the problem.
    
    Signed-off-by: <stephane.eranian@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1c53e4357ec72d6114c58d20c26d00a904f55da3
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed Aug 10 02:49:00 2005 -0700

    [IA64] fix iosapic_remove build error for !HOTPLUG
    
    This patch removes the following stupid compile error that happens
    when CONFIG_HOTPLUG is not defined on ia64.
    
         arch/ia64/kernel/built-in.o(.text+0x712): In function `acpi_unregister_ioapic':
         : undefined reference to `iosapic_remove'
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bc68552faad0e134eb22281343d5ae5a4873fa80
Merge: 0893dd3... 001ab02...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 10 12:21:25 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 0893dd327ffacb83dcca9033d2891d57b4024d6b
Merge: 6068674... 4251743...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 10 11:56:19 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 606867443764edac5a2c542f2fa0a12ef7a7c7fd
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Aug 10 11:29:15 2005 -0700

    [PATCH] remove name length check in a workqueue
    
    We have a chek in there to make sure that the name won't overflow
    task_struct.comm[], but it's triggering for scsi with lots of HBAs, only
    scsi is using single-threaded workqueues which don't append the "/%d"
    anyway.
    
    All too hard.  Just kill the BUG_ON.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    
    [ kthread_create() uses vsnprintf() and limits the thing, so no
      actual overflow can actually happen regardless ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 001ab02a8c04f0b4dc773c474da698ad7405ae68
Author: Steven Whitehouse <steve@chygwyn.com>
Date:   Wed Aug 10 11:32:57 2005 -0700

    [DECNET]: Use sk_stream_error function rather than DECnet's own
    
    Signed-off-by: Steven Whitehouse <steve@chygwyn.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3462b925414a146d4c2252de97d20f89218d1ffb
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Mon Jul 11 14:19:35 2005 +0200

    [PATCH] wbsd version bump
    
    Even though the changes are minor for the next release an increasing
    version number simplifies my support issues.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e62b8b2bc73b2433239a2ac394c2fafd50c43d9e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Aug 10 11:12:09 2005 +0200

    [PATCH] ppc64: Fix Fan control for new PowerMac G5 2.7GHz machines
    
    The workaround for broken device-tree that prevents fan control from
    working on recent G5 models need to be "enabled" for machines with
    revision 0x37 of the bridge in addition to machines with revision 0x35.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70679ee34f244499cf1c6775647895123eb1a326
Merge: 435d444... b876386...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 10 11:05:56 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm-smp

commit 435d444a532af652ba8bdfd4db4424982bea2f69
Merge: 22d0def... 484ae6b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 10 11:05:28 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 22d0def9d09111513f5a8d38583210620f97d710
Author: Alexander Nyberg <alexn@telia.com>
Date:   Wed Aug 10 10:11:36 2005 -0700

    [PATCH] ns558 list handling fix
    
    Need to use list_for_entry_safe(), as we're removing items during the
    traversal.  list_for_each_entry() uses the first ptr also as an iterator, if
    you kfree() it slab takes it, might poison it and then you try to use it to
    iterate to the next object in list.
    
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Dmitry Torokhov <dmitry.torokhov@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0438174e8272d23fe43a5d3f23d777f5b412e87
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 10 10:03:20 2005 -0700

    [PATCH] 6pack persistence fix
    
    Fix the p-persistence CSMA algorithm which in simplex mode was starting
    with a slottime delay before doing anything else as if there was carrier
    collision resulting in bad performance on simplex links.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42517438f9c1011a03e49a542cba32ac5a80dd8e
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Aug 10 13:38:27 2005 -0400

    libata: fix EH-related lockup by properly cleaning EH command list
    
    Yet another hack due to the fact that libata is the only user of SCSI's
    ->eh_strategy_handler() hook.

commit fae009847c9ea3d668bbee21ce1d76764eca5039
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Aug 7 14:53:40 2005 +0900

    [PATCH] sata: fix sata_sx4 dma_prep to not use sg->length
    
     sata_sx4 directly references sg->length to calculate total_len in
    pdc20621_dma_prep().  This is incorrect as dma_map_sg() could have
    merged multiple sg's into one and, in such case, sg->length doesn't
    reflect true size of the entry.  This patch makes it use
    sg_dma_len(sg).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 48d28fd55e7fd349fb16a50244379b4da3a4943c
Merge: 86b3786... 5bb8345...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 10 09:36:02 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6

commit 2d610b80e954045ccfc27558f84e482709e5e5b7
Merge: 8a9cd6d... 86b3786...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Aug 10 11:15:13 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 8a9cd6d676728792aaee31f30015d284acd154a3
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Aug 10 11:14:39 2005 -0500

    JFS: Fix race in txLock
    
    TxAnchor.anon_list is protected by jfsTxnLock (TXN_LOCK), but there was
    a place in txLock() that was removing an entry from the list without holding
    the spinlock.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 484ae6bd9506488089c33784eff35b190fa80e03
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 10 16:45:14 2005 +0100

    [PATCH] ARM: 2849/1: S3C24XX - USB host update (2848/1)
    
    Patch from Ben Dooks
    
    Rename the s3c2410_report_oc() to s3c2410_usb_report_oc()
    as this is an usb specific function.
    Change port power on the usb-simtec implementation to only
    power up the output if both are set, as per the usb 1.1
    specification
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c59d071d4a32e1c45cac6d47f5b59ec36a9a997b
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 10 16:45:14 2005 +0100

    [PATCH] ARM: 2847/1: S3C24XX - Documentation for USB OHCI host
    
    Patch from Ben Dooks
    
    Documentation for the in-built OHCI host controller
    and the support for it in Linux.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8d3722667762af1490db18ba927386d3be89a32b
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Aug 10 16:45:13 2005 +0100

    [PATCH] ARM: 2846/1: proper handling of CKEN for pxafb
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6626a7076d39f0a18156cdd97d4e2cbef91ad701
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Aug 10 16:18:35 2005 +0100

    [ARM] Control v6 'global' bit via Linux PTE entries
    
    Unfortunately, we can't use the "user" bit in the page tables to
    control whether a page table entry is "global" or "asid" specific,
    since the vector page is mapped as "user" accessible but is not
    process specific.
    
    Therefore, give direct control of the ARMv6 "nG" (not global)
    bit to the mm layers.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1b9749e7f15bf2db19f5d201f88401c7517910b7
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Aug 10 16:15:32 2005 +0100

    [ARM] Use #defined constants for manipulating v6 hardware PTE bits
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b876386ee47e3ac9375a36e9107b8bd32e0599fc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Aug 10 14:52:52 2005 +0100

    [ARM SMP] Clear the exclusive monitor on ARMv6 CPUs on context switch
    
    Ensure that the exclusive monitor is cleared on context switch with
    ARMv6 CPUs.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3c4ee4e2520775896efc6ab850c4c27971fbcf2a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Aug 10 14:41:45 2005 +0100

    [ARM SMP] Only enable V6K instructions on V6 MP core CPUs
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 86b3786078d63242d3194ffc58ae8dae1d1bbef3
Author: Christoph Lameter <christoph@lameter.com>
Date:   Tue Aug 9 19:59:21 2005 -0700

    [PATCH] Fix ide-disk.c oops caused by hwif == NULL
    
    1. Move hwif_to_node to ide.h
    
    2. Use hwif_to_node in ide-disk.c
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aeb3f76350e78aba90653b563de6677b442d21d6
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Tue Aug 9 17:48:54 2005 -0700

    [PATCH] DVB: lgdt330x frontend: some bug fixes & add lgdt3303 support
    
    This patch removes the tda9887 stuff from lgdt330x.c.  It's experimental code
    which wasn't supposed to leak out and we don't want it in 2.6.13.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Acked-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e179d8b0552e2fdb45c6022c589af945f8cbecbe
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Tue Aug 9 17:48:54 2005 -0700

    [PATCH] dvb: lgdt330x frontend: trivial text cleanups
    
    Two trivial text changes in Kconfig and lgdt330x.c
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc9352a42c6de578c932313448257cf246b2b75f
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Tue Aug 9 14:30:57 2005 -0700

    [PATCH] I2O: added pci_request_regions() before using the controller
    
    Added pci_request_regions() before using the controller to avoid duplicate
    usage of the I2O controller when the dpt_i2o driver and I2O subsystem is
    loaded at the same time.
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7df26da158ad64d56cc32934aa38a07d03a6fc9
Merge: 68e681e... fb57385...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 9 16:03:19 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 68e681e87faa142bde356aeefe619c42275ac98e
Merge: 25f1305... 38c1844...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 9 16:02:15 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 25f13053651569bd0c87927ff49d07d9225feadb
Merge: db29e85... d64d387...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 9 16:00:05 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit d64d3873721cfe870d49d73c3744f06260779ce7
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Aug 9 15:29:19 2005 -0700

    [NET]: Fix memory leak in sys_{send,recv}msg() w/compat
    
    From: Dave Johnson <djohnson+linux-kernel@sw.starentnetworks.com>
    
    sendmsg()/recvmsg() syscalls from o32/n32 apps to a 64bit kernel will
    cause a kernel memory leak if iov_len > UIO_FASTIOV for each syscall!
    
    This is because both sys_sendmsg() and verify_compat_iovec() kmalloc a
    new iovec structure.  Only the one from sys_sendmsg() is free'ed.
    
    I wrote a simple test program to confirm this after identifying the
    problem:
    
    http://davej.org/programs/testsendmsg.c
    
    Note that the below fix will break solaris_sendmsg()/solaris_recvmsg() as
    it also calls verify_compat_iovec() but expects it to malloc internally.
    
    [ I fixed that. -DaveM ]
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3501466941347f0e1992b2672affb3feb92925fd
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 14:57:12 2005 -0700

    [SUNRPC]: Fix nsec --> usec conversion.
    
    We need to divide, not multiply.  While we're here,
    use NSEC_PER_USEC instead of a magic constant.
    
    Based upon a report from Josip Loncaric and a patch
    by Andrew Morton.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 38c1844b3120e04b7f5bb9c18ebbc19883d1e1d6
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 14:43:14 2005 -0700

    [SPARC]: envctrl: ERR_PTR() --> PTR_ERR()
    
    Fix thinko in Christoph's changes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4875ccdb304775e9fd830f644643a1513357e043
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Aug 9 14:39:10 2005 -0700

    [SPARC]: remove ifdef CONFIG_PCI from envctrl.c
    
    The driver already depends on CONFIG_PCI in Kconfig.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc2406684b5929cea5d40b9cc4fd872816956779
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Aug 9 13:32:25 2005 -0700

    [SPARC]: Use kthread infrastructure in bbc_envctrl
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 218b29e0c3995ee15782de55ad1dd74cce1a728d
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Aug 9 12:30:07 2005 -0700

    [SPARC]: Use kthread infrastructure in envctrl
    
    envctrl currently uses very odd ways to stop a thread, using various
    things that should be exposed to drivers at all.
    
    This patch (which is untested as I don't have sparc hardware) switches
    it to use the proper kthread infrastructure.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db29e85a7ece62de1899917c1ec0ffe55cf1d3a0
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Tue Aug 9 10:08:03 2005 -0700

    [PATCH] i2o: remove new configuration API
    
    Remove new configuration API from i2o_config
    
    The API-patch is still available from the I2O website (which is mentioned in
    the kernel config now).  It is removed because it creates a new binary
    sysfs-attribute, which doesn't have the limitiation of 4k.  Expect for the
    Adaptec controllers, which has a limitation in the hardware this attribute
    doesn't make sense anywhere else.  Until the sysfs API provides an attribute
    which doesn't buffer (like firmware) and let access to at least 64k blocks i
    provide a separate patch...
    
    (akpm: basically, this API was introduced post-2.6.12 and Markus wants to pull
    it out before 2.6.13).
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36d2f5a18205dfc2fac1e3541d324ce186f418cb
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Aug 9 10:08:02 2005 -0700

    [PATCH] cpm_uart: needs some love to compile with GCC4.0.1
    
    Fixed problems so we can build with gcc-4.0.1
    
    Signed-off-by: Peter Schaefer-Hutter <peter.schaefer-hutter@tfk-racoms.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 311c46273f0e8b140d4cc68e13128cbc22114807
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Aug 9 10:08:00 2005 -0700

    [PATCH] cpm_uart: Fix dpram allocation and non-console uarts
    
    * Makes dpram allocations work
    * Makes non-console UART work on both 8xx and 82xx
    * Fixed whitespace in files that were touched
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Pantelis Antoniou <panto@intracom.gr>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3077a260e9f316b611436b1506eec9cc5c4f8aa6
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Aug 9 10:07:59 2005 -0700

    [PATCH] cpuset release ABBA deadlock fix
    
    Fix possible cpuset_sem ABBA deadlock if 'notify_on_release' set.
    
    For a particular usage pattern, creating and destroying cpusets fairly
    frequently using notify_on_release, on a very large system, this deadlock
    can be seen every few days.  If you are not using the cpuset
    notify_on_release feature, you will never see this deadlock.
    
    The existing code, on task exit (or cpuset deletion) did:
    
      get cpuset_sem
      if cpuset marked notify_on_release and is ready to release:
        compute cpuset path relative to /dev/cpuset mount point
        call_usermodehelper() forks /sbin/cpuset_release_agent with path
      drop cpuset_sem
    
    Unfortunately, the fork in call_usermodehelper can allocate memory, and
    allocating memory can require cpuset_sem, if the mems_generation values
    changed in the interim.  This results in an ABBA deadlock, trying to obtain
    cpuset_sem when it is already held by the current task.
    
    To fix this, I put the cpuset path (which must be computed while holding
    cpuset_sem) in a temporary buffer, to be used in the call_usermodehelper
    call of /sbin/cpuset_release_agent only _after_ dropping cpuset_sem.
    
    So the new logic is:
    
      get cpuset_sem
      if cpuset marked notify_on_release and is ready to release:
        compute cpuset path relative to /dev/cpuset mount point
        stash path in kmalloc'd buffer
      drop cpuset_sem
      call_usermodehelper() forks /sbin/cpuset_release_agent with path
      free path
    
    The sharp eyed reader might notice that this patch does not contain any
    calls to kmalloc.  The existing code in the check_for_release() routine was
    already kmalloc'ing a buffer to hold the cpuset path.  In the old code, it
    just held the buffer for a few lines, over the cpuset_release_agent() call
    that in turn invoked call_usermodehelper().  In the new code, with the
    application of this patch, it returns that buffer via the new char
    **ppathbuf parameter, for later use and freeing in cpuset_release_agent(),
    which is called after cpuset_sem is dropped.  Whereas the old code has just
    one call to cpuset_release_agent(), right in the check_for_release()
    routine, the new code has three calls to cpuset_release_agent(), from the
    various places that a cpuset can be released.
    
    This patch has been build and booted on SN2, and passed a stress test that
    previously hit the deadlock within a few seconds.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a242b44da6feb604c4c659b78f63dedb69b2d4a3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Aug 9 10:07:57 2005 -0700

    [PATCH] Build fix for the Sibyte I2C driver
    
    Compile fix for the BCM1250 I2C driver.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01df0e3a79d3913df178e9a1047ade425a7c118f
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Aug 9 10:07:56 2005 -0700

    [PATCH] i8xx_tco.c: arm watchdog only when started
    
    i8xx_tco.c v0.08: only "arm" the watchdog when the watchdog has been
    started.  (Kernel Bug 4251: system reset when battery is read and i8xx_tco
    driver loaded)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bb8345db8f2aef367e0fddf99a42b7a6029b31f
Author: Salyzyn, Mark <mark_salyzyn@adaptec.com>
Date:   Tue Aug 9 12:57:58 2005 -0400

    [SCSI] dpt_i2o pci_request_regions fix
    
    Originally From: Andrew Morton <akpm@osdl.org>
    
    Altered By: "Salyzyn, Mark" <mark_salyzyn@adaptec.com>
    
    There is an additional 'build fix' patch that Andrew Morton submitted on
    the kernel list (I have changed out his dpr_i2o with dpt_i2o below
    though).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 00dd1e433967872f3997a45d5adf35056fdf2f56
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Mon Aug 8 22:13:05 2005 -0400

    [PATCH] fsnotify-cleanups
    
    This removes the now unused fsnotify_unlink & fsnotify_rmdir code.
    Compile tested.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc836b5b6fcde95f750a4790d8200fabaf563dc9
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 8 18:46:09 2005 -0700

    Revert "[PATCH] PCI: restore BAR values..."
    
    Revert commit fec59a711eef002d4ef9eb8de09dd0a26986eb77, which is
    breaking sparc64 that doesn't have a working pci_update_resource.
    
    We'll re-do this after 2.6.13 when we'll do it all properly.

commit 138b9dd1fd7b44176af4f3b672060c790b0eaf55
Author: Dave Jones <davej@redhat.com>
Date:   Mon Aug 8 16:13:15 2005 -0700

    [PATCH] icn driver fails to unload when no hardware present
    
    Fix a null dereference in module unload path.
    
    Found by a simple modprobe icn ; rmmod icn
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92e52b2e82bec10a70744d4a2b04e0ff2dfe2c98
Merge: 03c6b74... ca93345...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 8 16:06:01 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit fb573856b2d82926b36ed059899d883474a3b9eb
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Mon Aug 8 15:25:00 2005 -0700

    [IA64] fix nohalt boot option
    
    this changeset broke the "nohalt" kernel boot option.
      8df5a500a3e97f7811cdce0f553ca1917ccd4220
    
    default_idle() is looking at new variable can_do_pal_halt.  However,
    that variable did not get cleared upon "nohalt" boot option.  Result
    is that "nohalt" option is ignored until perfmon is exercised.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 03c6b749b364fe7b8e47ed8e1ce26baca167c322
Author: Olaf Hering <olh@suse.de>
Date:   Mon Aug 8 14:49:18 2005 -0700

    [PATCH] x86_64: add MODULE_ALIAS for aes
    
    modprobe aes does not work on x86_64.  i386 has a similar line, this could
    be the right fix.  Would be nice to have in 2.6.13 final.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e708484d710bcbb44893400f429579f5728cd7d
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Aug 8 14:49:17 2005 -0700

    [PATCH] ppc32: Fix MPC834x USB memory map offsets
    
    The memory mappings for MPC8349 USB MPH and DR modules were reversed.
    
    Signed-off-by: Li Yang <LeoLi@freescale.com>
    Signed-off-by: Jiang Bo <Tanya.jiang@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c44cd2afad3f7b015542187e147a820600172f1
Author: James Smart <James.Smart@Emulex.Com>
Date:   Fri Jun 10 22:24:30 2005 -0400

    [SCSI] fix target scanning oops with fc transport class
    
    We have some nasty issues with 2.6.12-rc6. Any request to scan on
    the lpfc or qla2xxx FC adapters will oops. What is happening is the
    system is defaulting to non-transport registered targets, which
    inherit the parent of the scan. On this second scan, performed by
    the attribute, the parent becomes the shost instead of the rport.
    The slave functions in the 2 FC adapters use starget_to_rport()
    routines, which incorrectly map the shost as an rport pointer.
    
    Additionally, this pointed out other weaknesses:
    - If the target structure is torn down outside of the transport,
      we have no method for it to be regenerated at the proper parent.
    - We have race conditions on the target being allocated by both
      the midlayer scan (parent=shost) and by the fc transport
      (parent=rport).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ca9334523c853e407da7b3a0bd02f54d0fa59414
Author: Heikki Orsila <heikki.orsila@iki.fi>
Date:   Mon Aug 8 14:26:52 2005 -0700

    [IPV4]: Debug cleanup
    
    Here's a small patch to cleanup NETDEBUG() use in net/ipv4/ for Linux
    kernel 2.6.13-rc5. Also weird use of indentation is changed in some
    places.
    
    Signed-off-by: Heikki Orsila <heikki.orsila@iki.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4d479e40e1748a877a24015fc6727b27b77110cd
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 8 13:48:02 2005 -0700

    [NETLINK]: Allocate and kill some netlink numbers.
    
    NETLINK_ARPD is unused, allocate it to the Open-iSCSI folks.
    
    NETLINK_ROUTE6 and NETLINK_TAPBASE are no longer used, delete
    them.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b612cacb02f0fb58f07a9002c7719a901882718c
Merge: 7a91bf7... 71abe99...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 8 12:19:24 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 7a91bf7f5c22c8407a9991cbd9ce5bb87caa6b4a
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Mon Aug 8 13:52:16 2005 -0400

    [PATCH] fsnotify_name/inoderemove
    
    The patch below unhooks fsnotify from vfs_unlink & vfs_rmdir.  It
    introduces two new fsnotify calls, that are hooked in at the dcache
    level.  This not only more closely matches how the VFS layer works, it
    also avoids the problem with locking and inode lifetimes.
    
    The two functions are
    
     - fsnotify_nameremove -- called when a directory entry is going away.
       It notifies the PARENT of the deletion.  This is called from
       d_delete().
    
     - inoderemove -- called when the files inode itself is going away.  It
       notifies the inode that is being deleted.  This is called from
       dentry_iput().
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1963c907b21e140082d081b1c8f8c2154593c7d7
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Aug 8 09:22:43 2005 -0700

    [PATCH] dvb: lgdt330x frontend: some bug fixes & add lgdt3303 support
    
    - Structural changes within lgdt330x driver, framework now supports
      both chips... tested OK on lgdt3302 and lgdt3303.
    - Add LG/TUA6034 dvb_pll_desc for ATSC with LG TDVS-H062F & DViCO FusionHDTV5.
    - Fixed LGDT330X signal strength: For now, always set it to 0.
    - Corrected LGDT330X boundary condition error in read_snr: dB calculation.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66aea23ff84ca81bfaeaf7d63e248b873f5c2616
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Mon Aug 8 09:22:36 2005 -0700

    [PATCH] s390: use klist in qeth driver
    
    From: Martin Schwidesky <schwidefsky@de.ibm.com>
    
    Convert qeth to the new klist interface and make it compiling again.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b83bc77bf77cc8459cb94e52b08e775104c4c48
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Aug 8 11:50:55 2005 +0200

    [PATCH] don't try to do any NAT on untracked connections
    
    With the introduction of 'rustynat' in 2.6.11, the old tricks of preventing
    NAT of 'untracked' connections (e.g. NOTRACK target in 'raw' table) are no
    longer sufficient.
    
    The ip_conntrack_untracked.status |= IPS_NAT_DONE_MASK effectively
    prevents iteration of the 'nat' table, but doesn't prevent nat_packet()
    to be executed.  Since nr_manips is gone in 'rustynat', nat_packet() now
    implicitly thinks that it has to do NAT on the packet.
    
    This patch fixes that problem by explicitly checking for
    ip_conntrack_untracked in ip_nat_fn().
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48de5beeb0ee821859c79ba5b9462654604d8bf3
Author: James Morris <jmorris@redhat.com>
Date:   Mon Aug 8 10:29:08 2005 -0400

    [PATCH] Update contact info for James Morris

commit 6d85f29bb54235d2e184e7155dcd4de908324fe6
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Aug 8 12:55:54 2005 +0400

    [PATCH] VIA VT8235 PCI quirk
    
    Like many other southbridges from different manufacturers, VIA VT8235
    chip has two non-standard BARs for power management and SMBus registers
    (see the datasheet at http://www.via.com.tw).
    
    This new quirk routine fixes boot problem with 2.6.13-rc2/rc6 kernels on
    Targa Visionary 811 Athlon64 laptop, as reported by Mikael Pettersson
    <mikpe@csd.uu.se>.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db6778db7eb1d974e1ae0da326530f09c13585ac
Author: Antonino Daplas <adaplas@pol.net>
Date:   Mon Aug 8 14:22:43 2005 +0800

    [PATCH] nvidiafb: Fix initial display corruption on certain laptops
    
    Reported by:Vincent Fortier (Bugzilla Bug 4768)
    
    "At boot time the screen appears moved to the mid right portion of the actual
    video pannel making the end of the line appears at the left edge...  It simply
    looks like moved half way to the right"
    
    His particular hardware has a display with an unusual dimension (1920x1200) but
    unfortunately has no EDID block. None of the entries in the global mode
    database is correct for this particular display, and it particularly has
    difficulty scaling up 640x480 (the default startup mode of nvidiafb) to
    1920x1200 which causes the above described problem.
    
    1, Add 1920x1200 to the global mode database.
    
    2. Let nvidiafb base the startup mode from the flatpanel dimensions only if the
      EDID block is absent, no boot mode parameter is specified by the user, and
      a flatpanel/LCD display is attached.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f0767c67a497173294bdf6725a3d85f7f29e397
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Aug 8 14:16:43 2005 +1000

    [PATCH] ppc64: update defconfigs
    
    Update the default/example configs for ppc64.  Pretty boring...
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c875bbda9303b359af94f671d25639840ce2a59
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Aug 8 14:12:42 2005 +1000

    [PATCH] ppc64: add default config for BPA
    
    This adds a bpa_defconfig file and make target. The config settings
    are made for the current version of the Cell Processor Based Blade,
    so there are not too many drivers enabled. A few more drivers might
    get added in the future though.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c472dd9197429a37691e91c938660a062bf20b0
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Mon Aug 8 11:51:38 2005 -0500

    [SCSI] Bug 4940 Repeatable Kernel Panic on Adaptec 2015S I20 device on bootup
    
    From: "Salyzyn, Mark" <mark_salyzyn@adaptec.com>
    
    Prevent driver from loading if another driver (i2o) has already claimed
    the resources associated with the card. Discussion associated with this
    bug can be referenced at http://bugzilla.kernel.org/show_bug.cgi?id=4940
    where it was agreed to use pci_request_regions in both the dpt_i2o and
    the i2o driver to prevent both drivers loading on the same adapter(s).
    
    Signed-off-by: Mark Salyzyn <aacraid@adaptec.com>
    
    Rejections fixed up and
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6fc32179de9e14c542e0b1760e412bc670611c53
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 7 11:18:56 2005 -0700

    Linux 2.6.13-rc6
    
    Last (?) -rc, partly brought on by the aic7xxx performance fixes (ie get
    them tested in an -rc release before the real 2.6.13).

commit cfc646fa848dfa124fe4d6e0e44ef6940f7f9e6d
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Sun Aug 7 09:42:53 2005 -0700

    [PATCH] crc32.c typo fix
    
    This patch fixes a typo in lib/crc32.c which results in incorrect debug
    output.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b0271eb9da5170ab5cadf2edf97c84712c82550
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Sun Aug 7 09:42:50 2005 -0700

    [PATCH] Move the fix to align node_end_pfns to a proper location
    
    Move the fix to align node_end_pfns to a proper location.  The earlier fix
    made the node_remap_start_vaddr to get misaligned causing remap_numa_kva to
    barf again :-/
    
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 079da354db3473b56eb938ca53a2cb0804ea9c8c
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Sun Aug 7 09:42:47 2005 -0700

    [PATCH] ppc32: 8xx commproc avoid direct pte manipulation, use dma coherent API instead
    
    Touching the pte directly causes the 8Mbyte TLB entry to be invalidated.
    
    This has been fixed in v2.4 for ages.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 204085c52aa9975a90a894cb385360a141f1e4a3
Author: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
Date:   Sun Aug 7 09:42:46 2005 -0700

    [PATCH] ppc32: 8xx kill unused variable in commproc
    
    8xx: commproc.c: kill unused variable
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff085c1cc26532294e91f69c1747994fa2283369
Author: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
Date:   Sun Aug 7 09:42:43 2005 -0700

    [PATCH] ppc32: 8xx restrict ENET_BIG_BUFFERS option
    
    8xx: restrict ENET_BIG_BUFFERS option to drivers which actually use it
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7f08aabb1cdc0d714d312e2ad2feefb498daf77
Author: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
Date:   Sun Aug 7 09:42:40 2005 -0700

    [PATCH] ppc32: 8xx fix CPM ethernet description
    
    8xx: fix CPM Ethernet description
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbccb3d7f56654dbc407f757c884f22d26264e42
Author: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
Date:   Sun Aug 7 09:42:36 2005 -0700

    [PATCH] ppc32: 8xx: fec: fix interrupt handler prototypes
    
    8xx: fec: fix interrupt handler prototypes
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@conectiva.com.br>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc007ddd609ccfce1cd392e65eed05aba8db32ce
Author: Aristeu Sergio Rozanski Filho <aris@conectiva.com.br>
Date:   Sun Aug 7 09:42:33 2005 -0700

    [PATCH] ppc32: 8xx: using dma_alloc_coherent() instead consistent_alloc()
    
    8xx: using dma_alloc_coherent() instead consistent_alloc()
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@conectiva.com.br>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b0ed2fbdbea3f0d34404f1cbfdf02c4a673ca56
Author: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
Date:   Sun Aug 7 09:42:28 2005 -0700

    [PATCH] ppc32: 8xx: convert fec driver to use work_struct
    
    8xx: convert fec driver to use work_struct
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@conectiva.com.br>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68b47139ea94ab6d05e89c654db8daa99e9a232c
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Aug 7 09:42:25 2005 -0700

    [PATCH] namespace.c: fix bind mount from foreign namespace
    
    I'm resending this patch, because I still believe it's the correct fix.
    
    Tested before/after applying the patch with a test application
    available from:
    
      http://www.inf.bme.hu/~mszeredi/nstest.c
    
    Bind mount from a foreign namespace results in an un-removable mount.
    The reason is that mnt->mnt_namespace is copied from the old mount in
    clone_mnt().  Because of this check_mnt() in sys_umount() will fail.
    
    The solution is to set mnt->mnt_namespace to current->namespace in
    clone_mnt().  clone_mnt() is either called from do_loopback() or
    copy_tree().  copy_tree() is called from do_loopback() or
    copy_namespace().
    
    When called (directly or indirectly) from do_loopback(), always
    current->namspace is being modified: check_mnt(nd->mnt).  So setting
    mnt->mnt_namespace to current->namspace is the right thing to do.
    
    When called from copy_namespace(), the setting of mnt_namespace is
    irrelevant, since mnt_namespace is reset later in that function for
    all copied mounts.
    
    Jamie said:
    
      This patch is correct.  The old code was buggy for more fundamental and
      serious reason: it broke the invariant that a tree of vfsmnts all have the
      same value of mnt_namespace (and the same for the mnt_list list).
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Jamie Lokier <jamie@shareable.org>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ae5b3c703cce89a7d8ccf25fe16955ec6f016c0
Author: Olaf Hering <olh@suse.de>
Date:   Sun Aug 7 09:42:24 2005 -0700

    [PATCH] remove linux/pagemap.h from linux/swap.h
    
    sparc can not include linux/pagemap.h because of the following circular
    dependency:
    
    asm-sparc/pgtable include linux/swap.h
    linux/swap.h include now linux/pagemap.h
    linux/pagemap.h include linux/mm.h
    linux/mm.h include asm/pgtable.h
    
    It needs to have the swp_entry_t type fully visible in pgtable.h,
    we can't work around this using macros.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46bdac99382dd36e2d8c36cfb35d879b5c136965
Author: Tom Duffy <thomas.duffy.99@alumni.brown.edu>
Date:   Sun Aug 7 09:42:23 2005 -0700

    [PATCH] visws: linkage fix
    
    This patch add stubs to allow the visws subarch to link again.
    
    Signed-off-by: Tom Duffy <thomas.duffy.99@alumni.brown.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c79d7260a8522a54374fa10dd2838eaef492cf2
Author: Tom Duffy <thomas.duffy.99@alumni.brown.edu>
Date:   Sun Aug 7 09:42:16 2005 -0700

    [PATCH] Make visws compile again
    
    In file included from linux-2.6.13-rc5/arch/i386/kernel/timers/timer_pit.c:20:
    linux-2.6.13-rc5/include/asm-i386/mach-visws/do_timer.h: In function `do_timer_overflow':
    linux-2.6.13-rc5/include/asm-i386/mach-visws/do_timer.h:32: error: `i8259A_lock' undeclared (first use in this function)
    linux-2.6.13-rc5/include/asm-i386/mach-visws/do_timer.h:32: error: (Each undeclared identifier is reported only once
    linux-2.6.13-rc5/include/asm-i386/mach-visws/do_timer.h:32: error: for each function it appears in.)
    make[3]: *** [arch/i386/kernel/timers/timer_pit.o] Error 1
    make[2]: *** [arch/i386/kernel/timers] Error 2
    make[1]: *** [arch/i386/kernel] Error 2
    make: *** [_all] Error 2
    
    Signed-off-by: Tom Duffy <thomas.duffy.99@alumni.brown.edu>
    Cc: Andrey Panin <pazke@orbita1.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e525e153c7a99fc64af68e7f50a2660babd6752b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Aug 7 09:42:12 2005 -0700

    [PATCH] __bio_clone() dead comment
    
    Remove a very wrong comment.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5172f263f76ca6d588f533c0989b22521fcbac2
Author: Andi Kleen <ak@muc.de>
Date:   Sun Aug 7 09:42:07 2005 -0700

    [PATCH] x86_64: ignore machine checks from boot time
    
    Don't log machine check events left over from boot.  Too many BIOSes leave
    bogus events in there.
    
    This unfortunately also makes it impossible to log events that caused a
    reboot.  For people with non broken BIOS there is mce=bootlog
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf7bee5a0bf270a4eace0be39329d6ac0136cc47
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Sun Aug 7 13:49:59 2005 +0400

    [PATCH] Fix restore of 64-bit PCI BAR's
    
    For 64-bit BAR[i] only pci_dev->resource[i] is valid, ->resource[i+1]
    slot is unused and contains zeroes in all fields.
    
    So when we update a PCI BAR, all we need is just to check that we're
    going to update a _valid_ resource.
    
    Also make sure to write high bits - use "x >> 16 >> 16" (rather than the
    simpler ">> 32") to avoid warnings on 32-bit architectures where we're
    not going to have any high bits.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71abe99980e6d7ff8aee8acc7da817b3ad7d8a89
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Aug 7 14:23:42 2005 +0100

    [PATCH] ARM: switch fd1772.c from sleep_on to wait_event
    
    Doesn't make the local irq disabling around it less buggy, but at
    least we replace the offender with the right kind of primitive.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc1df37e3b195cb73ecb14c30d41b7aace3f844a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Aug 7 14:20:26 2005 +0100

    [PATCH] ARM: Make sa1100fb_display_dma_period() an inline function
    
    This function produces a warning when CPU_FREQ=n.  Since it's a very
    simple calculation, make it inline instead of adding preprocessor
    directives around it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0d317fb72fe3cf0f611608cf3a3015bbe6cd2a66
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Aug 6 13:47:36 2005 -0600

    [PATCH] x86_64 bootmem: sparse_mem/kexec merge bug.
    
    When the sparse mem changes and the kexec changes
    were merged into setup.c they came in, in the wrong order.
    This patch changes the order so we don't run sparse_init
    which uses the bootmem allocator until we all of the
    reserve_bootmem calls has been made.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36cf446c2c4be6bae01517ea539dcebaf85c9fdf
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Aug 6 13:45:10 2005 -0600

    [PATCH] i386 visws: Add machine_shutdown and emergency_restart
    
    Another x86 subarchitecture bit I missed.  This adds both
    machine_emergency_restart missed in my reboot fixes and
    machine_shutdown needed for kexec support.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 094528a7fb3f75a83673e5cc3271fd466f2e278d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Aug 6 13:42:45 2005 -0600

    [PATCH] i386 voyager: Add machine_shutdown
    
    Here is one more bit of breakage my x86 sub-architecture
    confusion caused.
    
    Add machine_shutdown to voyager so it will compile with CONFIG_KEXEC.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd5098d254a28a5980bc6dec9644f99ee884a548
Merge: d8588ee... 576c7d8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 6 10:18:48 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/holtmann/bluetooth-2.6

commit d8588ee5b87226d96e07add42027246746357fe3
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 6 09:44:37 2005 -0700

    ppc: Export __handle_mm_fault for MOL
    
    When we did the handle_mm_fault cleanup and get_user_page() race fixes,
    handle_mm_fault turned into an inline function that called the real
    __handle_mm_fault() code.  The export needed for MOL on ppc wasn't
    updated to match the new world order, though.
    
    Turn it into a GPL export while at it, since this is all about internal
    interfaces and MOL is GPL'd anwyay.

commit fab5a60a29f98f17256a4183e34a414f6db67569
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 6 09:42:06 2005 -0700

    Check input buffer size in zisofs
    
    This uses the new deflateBound() thing to sanity-check the input to the
    zlib decompressor before we even bother to start reading in the blocks.
    
    Problem noted by Tim Yamin <plasmaroo@gentoo.org>

commit 243393c90f2b7cb781fd794e22786e9c8547901a
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 6 09:39:57 2005 -0700

    Add fakey 'deflateBound()' function to the in-kernel zlib routines
    
    It's not the real deflateBound() in newer zlib libraries, partly because
    the upcoming usage of it won't have the "stream" available, so we can't
    have the same interfaces anyway.

commit 021a52ac70802a94e699badb52af9d0fa728d5cd
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sat Aug 6 07:21:06 2005 -0700

    [PATCH] ppc32: ppc440 pagetable attributes (comments updates)
    
    Here's an incremental patch with comment updates and some additional
    grammar cleanups.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d3f4c97723c4ec4e5d85e6e70084b02e6be8788
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Aug 6 06:35:48 2005 -0700

    [TG3]: Save initial PCI state before registering the netdevice.
    
    Else on SMP systems it is possible for hotplug to execute,
    invoke tg3_open(), and end up loading the uninitialized
    PCI register save area into the card.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6fc0b4a7a73a81e74d0004732df358f4f9975be2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Aug 6 06:33:15 2005 -0700

    [IPSEC]: Restrict socket policy loading to CAP_NET_ADMIN.
    
    The interface needs much redesigning if we wish to allow
    normal users to do this in some way.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 576c7d858f36cab6110b29db7b53964d5132cf30
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:54 2005 +0200

    [Bluetooth] Add direction and timestamp to stack internal events
    
    This patch changes the direction to incoming and adds the timestamp
    to all stack internal events.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 66e8b6c31b9254243afaac8af4135e84e11dd38e
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:51 2005 +0200

    [Bluetooth] Remove unused functions and cleanup symbol exports
    
    This patch removes the unused bt_dump() function and it also removes
    its BT_DMP macro. It also unexports the hci_dev_get(), hci_send_cmd()
    and hci_si_event() functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit e9a3e671c09d419f29710d8620ed916d3bf7d7ab
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:47 2005 +0200

    [Bluetooth] Kill redundant NULL checks before kfree()
    
    There's no need to check for NULL before calling kfree() on a pointer.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit dcc365d8f28d6a2332fa37e64d669858a8d017e8
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:42 2005 +0200

    [Bluetooth] Revert session reference counting fix
    
    The fix for the reference counting problem of the signal DLC introduced
    a race condition which leads to an oops. The reason for it is not fully
    understood by now and so revert this fix, because the reference counting
    problem is not crashing the RFCOMM layer and its appearance it rare.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit cad0f6270c0bae5bcae6af3c7ac7bd3ae5d9b618
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:36 2005 +0200

    [Bluetooth] Send HCI_Reset for Kensington dongle
    
    The Kensington Bluetooth USB adapter is based on a Broadcom chip
    with the HID proxy support. To initialize these kind of devices
    correctly it is necessary to send HCI_Reset as the first command.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 534afb90a9cd0b9643f62d660c164e1d924f39cf
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Fri Aug 5 16:10:10 2005 -0700

    [PATCH] ppc32: fix ppc440 pagetable attributes
    
    This patch fixes a bug in the PPC440 pagetable attributes that breaks swap
    support.  It also adds some notes on the PPC440 attribute fields.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4aad724d3e52238e1ce005f166fbba5b4072a7f6
Author: Tim Yamin <plasmaroo@gentoo.org>
Date:   Mon Jul 25 23:16:13 2005 +0100

    [PATCH] Update in-kernel zlib routines
    
    These bugs have been fixed in the standard zlib for a while.
    
    See for example
    
     a) http://sources.redhat.com/ml/bug-gnu-utils/1999-06/msg00183.html
     b) http://bugs.gentoo.org/show_bug.cgi?id=94584
    
    Signed-off-by: Tim Yamin <plasmaroo@gentoo.org>
    Signed-off-by: Tavis Ormandy <taviso@gentoo.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00a5dfdb93f74e4d95fb0d83c890728e331f8810
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Aug 5 23:05:27 2005 +0200

    [PATCH] Fix semundo lock leakage
    
    semundo->lock can leak if semundo->refcount goes from 2 to 1 while
    another thread has it locked.  This causes major problems for PREEMPT
    kernels.
    
    The simplest fix for now is to undo the single-thread optimization.
    
    This bug was found via relentless testing by Dominik Karall.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba02508248e90a9d696aebd18b48a3290235b53c
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Aug 5 13:28:11 2005 -0700

    [PATCH] blk: fix tag shrinking (revive real_max_size)
    
    My patch in commit fa72b903f75e4f0f0b2c2feed093005167da4023 incorrectly
    removed blk_queue_tag->real_max_depth.
    
    The original resize implementation was incorrect in the following
    points.
    
     * actual allocation size of tag_index was shorter than real_max_size,
       but assumed to be of the same size, possibly causing memory access
       beyond the allocated area.
     * bits in tag_map between max_deptn and real_max_depth were
       initialized to 1's, making the tags permanently reserved.
    
    In an attempt to fix above two bugs, I had removed allocation optimization
    in init_tag_map and real_max_size.  Tag map/index were allocated and freed
    immediately during resize.
    
    Unfortunately, I wasn't considering that tag map/index can be resized
    dynamically with tags beyond new_depth active.  This led to accessing
    freed area after shrinking tags and led to the following bug reporting
    thread on linux-scsi.
    
       http://marc.theaimsgroup.com/?l=linux-scsi&m=112319898111885&w=2
    
    To fix the problem, I've revived real_max_depth without allocation
    optimization in init_tag_map, and Andrew Vasquez confirmed that the
    problem was fixed.  As Jens is not going to be available for a week, he
    asked me to make sure that this patch reaches you.
    
       http://marc.theaimsgroup.com/?l=linux-scsi&m=112325778530886&w=2
    
    Also, a comment was added to make sure that real_max_size is needed for
    dynamic shrinking.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7546f8f03f5a4fa612605b6be930234d6026860
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 5 11:59:35 2005 -0700

    [PATCH] Fix hugepage crash on failing mmap()
    
    This patch fixes a crash in the hugepage code.  unmap_hugepage_area() was
    assuming that (due to prefault) PTEs must exist for all the area in
    question.  However, this may not be the case, if mmap() encounters an error
    before the prefault and calls unmap_region() to clean up any partial
    mapping.
    
    Depending on the hugepage configuration, this crash can be triggered by an
    unpriveleged user.
    
    Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6cb99413da42af413c11a394538ddc8b9d201e1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 5 11:59:34 2005 -0700

    [PATCH] fix voyager compile after machine_emergency_restart breakage
    
    [PATCH] i386: Implement machine_emergency_reboot
    
    introduced this new function into arch/i386/reboot.c.  However,
    subarchitectures are entitled to implement their own copies of reboot.c
    from which this new function is now missing.
    
    It looks like visws will also need a similar fixup
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9abb020405c94edb0717315f1510086b1574a22
Author: Marcel Selhorst <selhorst@crypto.rub.de>
Date:   Fri Aug 5 11:59:33 2005 -0700

    [PATCH] tpm_infineon: Support for new TPM 1.2 and PNPACPI
    
    This patch includes support for the new Infineon Trusted Platform Module
    SLB 9635 TT 1.2 and does further include ACPI-support for both chip
    versions (SLD 9630 TT 1.1 and SLB9635 TT 1.2).  Since the ioports and
    configuration registers are not correctly set on some machines, the
    configuration is now done via PNPACPI, which reads out the correct values
    out of the DSDT-table.  Note that you have to have CONFIG_PNP,
    CONFIG_ACPI_BUS and CONFIG_PNPACPI enabled to run this driver (assuming
    that mainboards including a TPM do have the need for ACPI anyway).
    
    Signed-off-by: Marcel Selhorst <selhorst@crypto.rub.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30e835e36648b15fb80797ace0a0e2afcf97618d
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Aug 5 11:59:32 2005 -0700

    [PATCH] REPORTING-BUGS: track regressions
    
    Add a new record to the REPORTING-BUGS template: "Most recent kernel version
    which did not have the bug:".  So we can spot regressions more easily.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a866a5f4eab10080ca25785fcf53ad67cde28bed
Merge: 107207a... b7656e7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 5 07:49:30 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 107207aa8576963861e9f0c66b439d233f02a97d
Merge: 403fe5a... 3873658...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 5 07:42:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 403fe5ae57c831968c3dbbaba291ae825a1c5aaa
Author: Petr Vandrovec <vandrove@vc.cvut.cz>
Date:   Fri Aug 5 15:50:07 2005 +0200

    [PATCH] rtc: msleep() cannot be used from interrupt
    
    Since the beginning of July my Opteron box was randomly crashing and
    being rebooted by hardware watchdog.  Today it finally did it in front
    of me, and this patch will hopefully fix it.
    
    The problem is that at the end of June (the 28th, to be exact: commit
    47f176fdaf8924bc83fddcf9658f2fd3ef60d573, "[PATCH] Using msleep()
    instead of HZ") rtc_get_rtc_time was converted to use msleep() instead
    of busy waiting.  But rtc_get_rtc_time is used by hpet_rtc_interrupt,
    and scheduling is not allowed during interrupt.  So I'm reverting this
    part of original change, replacing msleep() back with busy loop.
    
    The original code was busy waiting for up to 20ms, but on my hardware in
    the worst case update-in-progress bit was asserted for at most 363
    passes through loop (on 2GHz dual Opteron), much less than even one
    jiffie, not even talking about 20ms.  So I changed code to just wait
    only as long as necessary.  Otherwise when RTC was set to generate
    8192Hz timer, it stopped doing anything for 20ms (160 pulses were
    skipped!) from time to time, and this is rather suboptimal as far as I
    can tell.
    
    Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7656e7f2944984befa3ab99a5b99f99a23b302b
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Aug 5 04:12:48 2005 -0700

    [IPV4]: Fix memory leak during fib_info hash expansion.
    
    When we grow the tables, we forget to free the olds ones
    up.
    
    Noticed by Yan Zheng.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f60f8d3573ff90fe5d75a6d11fd2add1248e7d6
Author: Simon Derr <Simon.Derr@bull.net>
Date:   Thu Aug 4 19:52:03 2005 -0700

    [PATCH] __vm_enough_memory() signedness fix
    
    We have found what seems to be a small bug in __vm_enough_memory() when
    sysctl_overcommit_memory is set to OVERCOMMIT_NEVER.
    
    When this bug occurs the systems fails to boot, with /sbin/init whining
    about fork() returning ENOMEM.
    
    We hunted down the problem to this:
    
    The deferred update mecanism used in vm_acct_memory(), on a SMP system,
    allows the vm_committed_space counter to have a negative value.
    
    This should not be a problem since this counter is known to be inaccurate.
    
    But in __vm_enough_memory() this counter is compared to the `allowed'
    variable, which is an unsigned long.  This comparison is broken since it
    will consider the negative values of vm_committed_space to be huge positive
    values, resulting in a memory allocation failure.
    
    Signed-off-by: <Jean-Marc.Saffroy@ext.bull.net>
    Signed-off-by: <Simon.Derr@bull.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b68e9f857271189bd7a59b74c99890de9195b0e1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Aug 4 19:52:02 2005 -0700

    [PATCH] tcp: fix TSO cwnd caching bug
    
    tcp_write_xmit caches the cwnd value indirectly in cwnd_quota.  When
    tcp_transmit_skb reduces the cwnd because of tcp_enter_cwr, the cached
    value becomes invalid.
    
    This patch ensures that the cwnd value is always reread after each
    tcp_transmit_skb call.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 846998ae87a80b0fd45b4cf5cf001a159d746f27
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Aug 4 19:52:01 2005 -0700

    [PATCH] tcp: fix TSO sizing bugs
    
    MSS changes can be lost since we preemptively initialize the tso_segs count
    for an SKB before we %100 commit to sending it out.
    
    So, by the time we send it out, the tso_size information can be stale due
    to PMTU events.  This mucks up all of the logic in our send engine, and can
    even result in the BUG() triggering in tcp_tso_should_defer().
    
    Another problem we have is that we're storing the tp->mss_cache, not the
    SACK block normalized MSS, as the tso_size.  That's wrong too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Cc: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c3dba1534569734ba353afdf3f11def497ff2ac
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Thu Aug 4 21:12:54 2005 -0400

    [PATCH] Clean up inotify delete race fix
    
    This avoids the whole #ifdef mess by just getting a copy of
    dentry->d_inode before d_delete is called - that makes the codepaths the
    same for the INOTIFY/DNOTIFY cases as for the regular no-notify case.
    I've been running this under a Gnome session for the last 10 minutes.
    Inotify is being used extensively.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f10eff26831159f52353e8f15c37cdb2935d5fbf
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 18:06:47 2005 -0700

    [PATCH] USB: Fix setup packet initialization in isp116x-hcd
    
    When recently addressing remarks by Alexey Dobriyan about
    the isp116x-hcd, I introduced a bug in the driver. Please
    apply the attached patch to fix it.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dedacf4270a810fadcca887ac85d267b5f1882d
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Aug 4 18:06:41 2005 -0700

    [PATCH] USB: ehci: microframe handling fix
    
    This patch has a one line oops fix, plus related cleanups.
    
     - The bugfix uses microframe scheduling data given to the hardware to
       test "is this a periodic QH", rather than testing for nonzero period.
       (Prevents an oops by providing the correct answer.)
    
     - The cleanup going along with the patch should make it clearer what's
       going on whenever those bitfields are accessed.
    
    The bug came about when, around January, two new kinds of EHCI interrupt
    scheduling operation were added, involving both the high speed (24 KBytes
    per millisec) and low/full speed (1-64 bytes per millisec) microframe
    scheduling.  A driver for the Edirol UA-1000 Audio Capture Unit ran into
    the oops; it used one of the newly supported high speed modes.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 003ba5153582427b1df2347553529299872961e5
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu Aug 4 18:06:36 2005 -0700

    [PATCH] USB: ub documentation update
    
    The patch which went in was correct, but not quite what I had in mind.
    Here is a patch to update that a little bit. Original patch is at:
     http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=4749f32da939d4e4160541b2cadc22492bb507ec
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43c34735524d5b1c9b9e5d63b49dd4c1b394bde4
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Aug 4 18:06:21 2005 -0700

    [PATCH] pci and yenta: pcibios_bus_to_resource
    
    In yenta_socket, we default to using the resource setting of the CardBus
    bridge.  However, this is a PCI-bus-centric view of resources and thus needs
    to be converted to generic resources first.  Therefore, add a call to
    pcibios_bus_to_resource() call in between.  This function is a mere wrapper on
    x86 and friends, however on some others it already exists, is added in this
    patch (alpha, arm, ppc, ppc64) or still needs to be provided (parisc -- where
    is its pcibios_resource_to_bus() ?).
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fec59a711eef002d4ef9eb8de09dd0a26986eb77
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Aug 4 18:06:10 2005 -0700

    [PATCH] PCI: restore BAR values after D3hot->D0 for devices that need it
    
    Some PCI devices (e.g. 3c905B, 3c556B) lose all configuration
    (including BARs) when transitioning from D3hot->D0.  This leaves such
    a device in an inaccessible state.  The patch below causes the BARs
    to be restored when enabling such a device, so that its driver will
    be able to access it.
    
    The patch also adds pci_restore_bars as a new global symbol, and adds a
    correpsonding EXPORT_SYMBOL_GPL for that.
    
    Some firmware (e.g. Thinkpad T21) leaves devices in D3hot after a
    (re)boot.  Most drivers call pci_enable_device very early, so devices
    left in D3hot that lose configuration during the D3hot->D0 transition
    will be inaccessible to their drivers.
    
    Drivers could be modified to account for this, but it would
    be difficult to know which drivers need modification.  This is
    especially true since often many devices are covered by the same
    driver.  It likely would be necessary to replicate code across dozens
    of drivers.
    
    The patch below should trigger only when transitioning from D3hot->D0
    (or at boot), and only for devices that have the "no soft reset" bit
    cleared in the PM control register.  I believe it is safe to include
    this patch as part of the PCI infrastructure.
    
    The cleanest implementation of pci_restore_bars was to call
    pci_update_resource.  Unfortunately, that does not currently exist
    for the sparc64 architecture.  The patch below includes a null
    implemenation of pci_update_resource for sparc64.
    
    Some have expressed interest in making general use of the the
    pci_restore_bars function, so that has been exported to GPL licensed
    modules.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c306895167c8384b88bc02945a0d226a04218fa5
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Aug 4 16:49:32 2005 -0700

    [PATCH] revert "timer exit cleanup"
    
    Revert this June 17 patch: it broke persistence of timers across execve().
    
    Cc: Roland McGrath <roland@redhat.com>
    Cc: george anzinger <george@mvista.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8ed11b9dc07df0134248542ca8e7d40751a6052
Author: Daniel Jacobowitz <drow@false.org>
Date:   Thu Aug 4 13:41:09 2005 -0700

    [PATCH] x86_64: fix 32-bit thread debugging
    
    The IA32 ptrace emulation currently returns the wrong registers for fs/gs;
    it's returning what x86_64 calls gs_base.  We need regs.gsindex in order
    for GDB to correctly locate the TLS area.  Without this patch, the 32-bit
    GDB testsuite bombs on a 64-bit kernel.  With it, results look about like
    I'd expect, although there are still a handful of kernel-related failures
    (vsyscall related?).
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c91096d85c95c6b7fe8d7065e2aa6825e0bdaca9
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Thu Aug 4 15:36:10 2005 -0700

    [PATCH] remove special HPET_EMULATE_RTC config option
    
    We had a user whose apps weren't working correctly because his "rtc" wasn't
    working fully.
    
    For the sake of simplicity, it seems sensible to always enable HPET RTC
    emulation.
    
    Remove a special config option for HPET_EMULATE_RTC and make it directly
    depend on HPET_TIMER and RTC. This will avoid the hangs when EMULATE_RTC
    is not configured and when some userlevel script depends on RTC interrupt,
    as in:
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4904
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5c96cab8f3c4ca9b2177dceb5de5a0edb31418e
Merge: 30db1ae... 1c5ad84...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Aug 4 15:56:15 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 1c5ad84516ae7ea4ec868436a910a6bd8d20215a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Aug 4 13:07:09 2005 -0700

    [PATCH] fix VmSize and VmData after mremap
    
    mremap's move_vma is applying __vm_stat_account to the old vma which may
    have already been freed: move it to just before the do_munmap.
    
    mremapping to and fro with CONFIG_DEBUG_SLAB=y showed /proc/<pid>/status
    VmSize and VmData wrapping just like in kernel bugzilla #4842, and fixed by
    this patch - worth including in 2.6.13, though not yet confirmed that it
    fixes that specific report from Frank van Maarseveen.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e234f35c54a30d040313e40833dcf623d14629b4
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Thu Aug 4 13:07:08 2005 -0700

    [PATCH] inotify delete race fix
    
    The included patch fixes a problem where a inotify client would receive a
    delete event before the file was actually deleted.  The bug affects both
    dnotify & inotify.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3de11748c1b312833e8a148ab7ec47669ecc99dc
Author: Robert Love <rml@novell.com>
Date:   Thu Aug 4 13:07:08 2005 -0700

    [PATCH] inotify: update help text
    
    The inotify help text still refers to the character device.  Update it.
    
    Fixes kernel bug #4993.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94efe72f762e2c147d8146d637d5ece5614c8d94
Author: David Howells <dhowells@redhat.com>
Date:   Thu Aug 4 13:07:07 2005 -0700

    [PATCH] Destruction of failed keyring oopses
    
    The attached patch makes sure that a keyring that failed to instantiate
    properly is destroyed without oopsing [CAN-2005-2099].
    
    The problem occurs in three stages:
    
     (1) The key allocator initialises the type-specific data to all zeroes. In
         the case of a keyring, this will become a link in the keyring name list
         when the keyring is instantiated.
    
     (2) If a user (any user) attempts to add a keyring with anything other than
         an empty payload, the keyring instantiation function will fail with an
         error and won't add the keyring to the name list.
    
     (3) The keyring's destructor then sees that the keyring has a description
         (name) and tries to remove the keyring from the name list, which oopses
         because the link pointers are both zero.
    
    This bug permits any user to take down a box trivially.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcf945d36fa0598f41ac4ad46a9dc43135460263
Author: David Howells <dhowells@redhat.com>
Date:   Thu Aug 4 13:07:06 2005 -0700

    [PATCH] Error during attempt to join key management session can leave semaphore pinned
    
    The attached patch prevents an error during the key session joining operation
    from hanging future joins in the D state [CAN-2005-2098].
    
    The problem is that the error handling path for the KEYCTL_JOIN_SESSION_KEYRING
    operation has one error path that doesn't release the session management
    semaphore. Further attempts to get the semaphore will then sleep for ever in
    the D state.
    
    This can happen in four situations, all involving an attempt to allocate a new
    session keyring:
    
     (1) ENOMEM.
    
     (2) The users key quota being reached.
    
     (3) A keyring name that is an empty string.
    
     (4) A keyring name that is too long.
    
    Any user may attempt this operation, and so any user can cause the problem to
    occur.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fb0caa42308923d9e4ed7b36ec077b97c107e24
Merge: 7cfa132... fdd0edf...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 13:08:29 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit 7cfa132cd06639c8ac5fe9ef776a7650f1d8c3e6
Merge: 6d22d85... c80f90b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 13:02:31 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 6d22d85a852b72398a81b8e476977b28b4400f7c
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Aug 4 12:53:37 2005 -0700

    [PATCH] ppc64: fix for kexec boot issue
    
    The kexec boot is not successful on some power machines since all CPUs are
    getting removed from global interrupt queue (GIQ) before kexec boot.  Some
    systems always expect at least one CPU in GIQ.  Hence, this patch will make
    sure that only secondary CPUs are removed from GIQ.
    
    Signed-off-by: Haren Myneni <hbabu@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48f1f5328267f52a34e61b8b0e6fc55a23c1348a
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Aug 4 12:53:37 2005 -0700

    [PATCH] dm-raid locking fix
    
    This code was never designed to handle more than one instance of do_work()
    running at once.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d27a4dddd96f4ee898f8d1d597d38f8f4079bbb0
Author: Jim Keniston <jkenisto@us.ibm.com>
Date:   Thu Aug 4 12:53:35 2005 -0700

    [PATCH] Add Documentation/kprobes.txt
    
    Acked-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Jim Keniston <jkenisto@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b8b3e8a8b3e62b4209eaa36697e3c9df457e196
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 4 12:53:35 2005 -0700

    [PATCH] md: make sure md bitmap updates are flushed when array is stopped.
    
    The recent change to never ignore the bitmap, revealed that the bitmap isn't
    begin flushed properly when an array is stopped.
    
    We call bitmap_daemon_work three times as there is a three-stage pipeline for
    flushing updates to the bitmap file.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3b9703e27aab3839dcdb76b00d98428b67d25b0
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 4 12:53:34 2005 -0700

    [PATCH] md: yet another attempt to get bitmap-based resync to do the right thing in all cases...
    
    Firstly, R1BIO_Degraded was being set in a number of places in the resync
    code, but is never used there, so get rid of those settings.
    
    Then: When doing a resync, we want to clear the bit in the bitmap iff the
    array will be non-degraded when the sync has completed.  However the current
    code would clear the bitmap if the array was non-degraded when the resync
    *started*, which obviously isn't right (it is for 'resync' but not for
    'recovery' - i.e.  rebuilding a failed drive).
    
    This patch calculated 'still_degraded' and uses the to tell bitmap_start_sync
    whether this sync should clear the corresponding bit.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 193f1c931517592ec4188d15bf261e4bff368207
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 4 12:53:33 2005 -0700

    [PATCH] md: always honour md bitmap being read from disk
    
    The code currently will ignore the bitmap if the array seem to be in-sync.
    This is wrong if the array is degraded, and probably wrong anyway.  If the
    bitmap says some chunks are not in in-sync, and the superblock says everything
    IS in sync, then something is clearly wrong, and it is safer to trust the
    bitmap.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa1595e9f3d0d731bcfc6c2680d5483b78f663dc
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 4 12:53:32 2005 -0700

    [PATCH] md: make 'md' and alias for 'md-mod'
    
    Until the bitmap code was added,
    
       modprobe md
    
    would load the md module.  But now the md module is called 'md-mod', so we
    really need an alias for backwards comparability.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efd8be2a4280f334be9309fa4ca1fb8f4e29475d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Aug 4 12:53:32 2005 -0700

    [PATCH] md: remove a stray debugging printk.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4dcef52400fa6b9eb2de589300ae0151a1c65b3b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Aug 4 12:53:30 2005 -0700

    [PATCH] v4l: oopsfix for BTTV on badly behaved PCI chipsets
    
    no_overlay bttv parameter implemented to fix OOPS on some PCI chipsets
    (like some VIA) with these behaviors:
    
    1) If pci_quicks does identify the chip as having troubles to
       handle PCI2PCI transfers, no_overlay defaults to 1. The user may force
       it to 0, to reenable (not recommended).
    
    2) For newer chipsets not blacklisted, no_overlay=1 is provided as a
       workaround until PCI chipset included on /drivers/pci/quirks.c
    
    Thanks to Bodo Eggert <7eggert@gmx.de>
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75eedfed3e2d05563f44d2f69efb991fad95d7f1
Author: Olof Johansson <olof@lixom.net>
Date:   Thu Aug 4 12:53:29 2005 -0700

    [PATCH] ppc64: Fix UP kernel build
    
    CONFIG_KEXEC breaks UP builds because of a misspelled smp_release_cpus().
    Also, the function isn't defined unless built with CONFIG_SMP but it is
    needed if we are to go from a UP to SMP kernel.  Enable it and document it.
    
    Thanks to Steven Winiecki for reporting this and to Milton for remembering
    how it's supposed to work and why.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 556e58febf90c8cb1da25669d0892bf5fd2ddac2
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Thu Aug 4 12:53:26 2005 -0700

    [PATCH] ide: fix kmalloc_node breakage in ide driver
    
    Patch fixes oops caused by ide interfaces not on pci.  pcibus_to_node
    causes the kernel to crash otherwise.  Patch also adds a BUG_ON to check if
    hwif is NULL.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c80f90ba15ed56ae36d1fb51f81a88f9ba0d8c8b
Author: Michael Gernoth <michael@gernoth.net>
Date:   Thu Aug 4 20:43:40 2005 +0100

    [PATCH] ARM: 2844/1: Add maintainer for Jornada 720
    
    Patch from Michael Gernoth
    
    As discussed on the handhelds.org Jornada mailinglist, I take over
    maintainership of the currently unmaintained Jornada 720-port in
    the mainline kernel.
    
    Signed-off-by: Michael Gernoth <michael@gernoth.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdd0edf2aca72e374d10e7a0957a006f18bffaf4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Aug 4 13:28:40 2005 -0500

    [SCSI] fix aic7xxx performance issues since 2.6.12-rc2
    
    Several people noticed we dropped quite a bit on benchmark figures.
    OK, it was my fault but unfortunately I discovered I ran out of brown
    paper bags a while ago and forgot to reorder them.
    
    The issue is that a construct introduced in the conversion of the
    driver to use the transport class keyed off whether the block request
    was tagged or not.  However, the aic7xxx driver doesn't properly set
    up the block layer TCQ (it uses the wrong API), so the driver now
    things all requests are untagged and we keep it to a queue depth of a
    single element.  Oops.
    
    The fix is to use the correct TCQ API.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fd6f31c31825f62eb91f491e8316129e5ce81fc6
Merge: 9d34321... 8edc81c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 10:36:25 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lenb/to-linus

commit 9d343219e33e8b49d754ea9b2e45f6c7da87f4fb
Merge: ea48e70... ff2afb9...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 09:30:50 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit ea48e705be4f886c16313c882a6623b442bab0eb
Merge: 6e34622... 0dca0f7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 09:20:23 2005 -0700

    Merge head 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit 6e346228c76506e07e297744a28464022c6806ad
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 4 08:33:38 2005 -0700

    It wasn't just x86-64 that had hardcoded VM_FAULT_xxx numbers
    
    Fix up arm26, cris, frv, m68k, parisc and sh64 too..

commit 968002166cce2ef4ead8c9441a9dd5b945c9ed1e
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu Aug 4 16:14:57 2005 +0200

    [PATCH] x86-64: use proper VM_FAULT_xxx macros
    
    x86_64 had hardcoded the VM_ numbers so it broke down when the numbers
    were changed.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1260f801b4e4ba7be200886b4a53d730de05ca19
Author: David Howells <dhowells@redhat.com>
Date:   Thu Aug 4 11:50:01 2005 +0100

    [PATCH] Keys: Fix key management syscall interface bugs
    
    This fixes five bugs in the key management syscall interface:
    
     (1) add_key() returns 0 rather than EINVAL if the key type is "".
    
         Checking the key type isn't "" should be left to lookup_user_key().
    
     (2) request_key() returns ENOKEY rather than EPERM if the key type begins
         with a ".".
    
         lookup_user_key() can't do this because internal key types begin with a
         ".".
    
     (3) Key revocation always returns 0, even if it fails.
    
     (4) Key read can return EAGAIN rather than EACCES under some circumstances.
    
         A key is permitted to by read by a process if it doesn't grant read
         access, but it does grant search access and it is in the process's
         keyrings. That search returns EAGAIN if it fails, and this needs
         translating to EACCES.
    
     (5) request_key() never adds the new key to the destination keyring if one is
         supplied.
    
         The wrong macro was being used to test for an error condition: PTR_ERR()
         will always return true, whether or not there's an error; this should've
         been IS_ERR().
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-Off-By: Linus Torvalds <torvalds@osdl.org>

commit c36f19e02a96488f550fdb678c92500afca3109b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 4 11:36:26 2005 +0200

    [PATCH] Remove suspend() calls from shutdown path
    
    This removes the calls to device_suspend() from the shutdown path that
    were added sometime during 2.6.13-rc*.  They aren't working properly on
    a number of configs (I got reports from both ppc powerbook users and x86
    users) causing the system to not shutdown anymore.
    
    I think it isn't the right approach at the moment anyway.  We have
    already a shutdown() callback for the drivers that actually care about
    shutdown and the suspend() code isn't yet in a good enough shape to be
    so much generalized.  Also, the semantics of suspend and shutdown are
    slightly different on a number of setups and the way this was patched in
    provides little way for drivers to cleanly differenciate.  It should
    have been at least a different message.
    
    For 2.6.13, I think we should revert to 2.6.12 behaviour and have a
    working suspend back.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c013622d5fe0ffeb0c74b2af4c2b1aad6164f709
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Aug 4 15:06:59 2005 +0100

    [PATCH] ARM: 2838/1: Fix arm oprofile backtrace warning
    
    Patch from Richard Purdie
    
    Fix a typo causing a warning in the arm oprofile backtrace code.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3873658be7b3896e88648664e480a44d12083ad8
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Aug 4 07:05:37 2005 -0700

    [SPARC]: Fix up sleep_on() removal in vfc driver.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff2afb9df607dfcaacdaf67ea84b773c6fb08f4c
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 4 14:17:33 2005 +0100

    [PATCH] ARM: Fix ARM fault handler for get_user_pages() fixes.
    
    The ARM fault handler is optimised to make the fast path, err, fast.
    The renumbering of the VM_FAULT_* codes broke this because numbers
    were used instead of the definitions.  Fix this.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8edc81cc0b80b3ec8645711e1110a84235c7030d
Merge: 11e981f... 62778ba...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 23:53:50 2005 -0400

    Merge ../to-linus-stable

commit 62778ba1aa2589dc78c36a32edc6f5a6ccaf50c6
Merge: 8066eff... d4ab025...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 23:53:35 2005 -0400

    /home/lenb/src/to-linus-stable branch 'acpi-2.6.12'

commit 11e981f1e02c2a36465cbb208b21cb8b6480f399
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Wed Aug 3 23:46:33 2005 -0400

    [ACPI] S3 resume: avoid kmalloc() might_sleep oops symptom
    
    ACPI now uses kmalloc(...,GPF_ATOMIC) during suspend/resume.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d4ab025b73a2d10548e17765eb76f3b7351dc611
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 23:20:58 2005 -0400

    [ACPI] delete Warning: Encountered executable code at module level, [AE_NOT_CONFIGURED]
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4923
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d95a1b4818f2fe38a3cfc9a7d5817dc9a1a69329
Merge: 194d071... 8066eff...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 3 16:50:19 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lenb/to-linus

commit 8066eff0a1a0703ad901dbe5646a47dbfc089ef2
Merge: 9a351e3... 79cda7d...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 18:15:15 2005 -0400

    /home/lenb/src/to-linus branch 'acpi-2.6.12'

commit 79cda7d0e1c8629996242c036d6fe0466038d8ba
Author: Luming Yu <luming.yu@intel.com>
Date:   Wed Aug 3 18:07:59 2005 -0400

    [ACPI] CONFIG_ACPI_HOTKEY is now "n" by default
    For 2.6.12 behaviour, this (EXPERIMENTAL) driver
    should not be built.
    
    Update the driver source with latest from Luming.
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b34a8030eeab4d59dcdd86de38f6927b9edd441f
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Wed Aug 3 17:55:21 2005 -0400

    [ACPI] restore /proc/acpi/button/ (ala 2.6.12)
    
    Signed-off-by Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by Len Brown <len.brown@intel.com>

commit 7b15f5e7bb180ac7bfb8926dbbd8835fecc07fad
Author: Luming Yu <luming.yu@intel.com>
Date:   Wed Aug 3 17:38:04 2005 -0400

    [ACPI] revert Embedded Controller to polling-mode by default (ala 2.6.12)
    Burst mode isn't ready for prime time,
    but can be enabled for test via "ec_burst=1"
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 194d0710e1a7fe92dcf860ddd31fded8c3103b7a
Merge: a68d2eb... 9bbd037...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 3 13:09:43 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 9bbd03758945858c9303f3258b418b94c4ffd735
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Aug 3 20:34:52 2005 +0100

    [PATCH] ARM: 2833/2:  Remove support for WDIOF_MAGICCLOSE from sa1100-wdt
    
    Patch from Ian Campbell
    
    On PXA255 there is no way to disable the watchdog. Turning off OIER[E3]
    as suggested in the existing comment does not work.
    
    I posted a note to the ARM mailing list a little while ago asking for
    opinions from people using SA1100. There was one reponse from Nico who
    believes that the SA1100 is the same as the PXA255 in this respect.
    
    You also asked me to involve the watchdog maintainer which I tried to
    do but didn't hear anything back. There are only a couple of other
    drivers which can't stop the watchdog and there seems to be no
    consistancy regarding printing an error etc. I decided to print
    something since that matches the case for all the other drivers when
    NOWAYOUT is turned on.
    
    Also, I changed the device .name to "watchdog" like most of the other
    watchdogs. udev uses it as the device name (by default) and spaces etc.
    get in the way.
    
    Superceded 2833/1 because 2.6.13-rc4 caused rejects.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8c741ed74d121dbc97c9fb7f9a66c768d4c547c4
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Aug 3 19:58:21 2005 +0100

    [PATCH] ARM: 2835/1: Add UPF_SKIP_TEST to IXP4xx serial ports
    
    Patch from Deepak Saxena
    
    This allows the serial driver autconf to work properly on all the IXP
    serial ports. W/o it we basically put the serial port in an unrecoverable
    state and lose console.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7b1fbf292bb4c855ddae8add8c459e94684f7543
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Aug 3 19:53:25 2005 +0100

    [PATCH] ARM: 2841/1: Fix VFP +/-0 case for doubles addition
    
    Patch from Catalin Marinas
    
    The IEEE 754 standard specifies that the result of (x - x), where x is
    a valid number, should be -0 if the rounding mode is towards minus
    infinity or +0 otherwise.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 858297509590ef4aa5690e30c2f5505077b4f369
Author: Michael Burian <dynmail1@gassner-waagen.at>
Date:   Wed Aug 3 19:49:18 2005 +0100

    [PATCH] ARM: 2840/1: Add mach-types to Documentation/dontdiff
    
    Patch from Michael Burian
    
    This file is maintained by RMK's machine registry, it should not be patched.
    
    Signed-off-by: Michael Burian <dynmail1@gassner-waagen.at>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 975ad141eecccb24fc8db1e0f4a08f5580f4a9a9
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Aug 3 19:49:17 2005 +0100

    [PATCH] ARM: 2839/1: Remove XScale cache and TLB locking code
    
    Patch from Deepak Saxena
    
    The XScale locking code is not something that has been validated
    on 2.6 and needs to be replaced with a more generic API to use
    with other ARMs that support locking features.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f148af2593ef76ac705d1cc6abe48f455c9912cc
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Aug 3 19:49:17 2005 +0100

    [PATCH] ARM: 2837/2: Re: ARM: Make NWFPE preempt safe
    
    Patch from Richard Purdie
    
    NWFPE used global variables which meant it wasn't safe for use with
    preemptive kernels. This patch removes them and communicates the
    information between functions in a preempt safe manner. Generation
    of some exceptions was broken and this has also been corrected.
    Tests with glibc's maths test suite show no change in the results
    before/after this patch.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1fcf844861eb08ee05e05dba13b5436f2f2e29ed
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 3 19:49:16 2005 +0100

    [PATCH] ARM: 2832/1: BAST - limit clock-rate for IIC bus
    
    Patch from Ben Dooks
    
    The default clock rate does not specify a maximum, so the
    default of 400KHz is used. This rate is too fast for the PMU
    on the EB2410ITX, so we now specify platform data with a rate
    of around 100KHz.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a68d2ebc1581a3aec57bd032651e013fa609f530
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 3 10:07:09 2005 -0700

    Fix up recent get_user_pages() handling
    
    The VM_FAULT_WRITE thing is an extra bit, not a valid return value, and
    has to be treated as such by get_user_pages().
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f33ea7f404e592e4563b12101b7a4d17da6558d7
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Wed Aug 3 20:24:01 2005 +1000

    [PATCH] fix get_user_pages bug
    
    Checking pte_dirty instead of pte_write in __follow_page is problematic
    for s390, and for copy_one_pte which leaves dirty when clearing write.
    
    So revert __follow_page to check pte_write as before, and make
    do_wp_page pass back a special extra VM_FAULT_WRITE bit to say it has
    done its full job: once get_user_pages receives this value, it no longer
    requires pte_write in __follow_page.
    
    But most callers of handle_mm_fault, in the various architectures, have
    switch statements which do not expect this new case.  To avoid changing
    them all in a hurry, make an inline wrapper function (using the old
    name) that masks off the new bit, and use the extended interface with
    double underscores.
    
    Yes, we do have a call to do_wp_page from do_swap_page, but no need to
    change that: in rare case it's needed, another do_wp_page will follow.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    [ Cleanups by Nick Piggin ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecc21ebe603af31f172c43b8b261df79040790ef
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Wed Aug 3 11:00:11 2005 -0400

    [ACPI] PCI interrupt link suspend/resume - revert to 2.6.12 behaviour
    
    This patch disables the PCI Interrupt Link refernece counts,
    which should not co-exist with the 2.6.12 irq_router.resume
    method or else a double acpi_pci_link_set() could result
    on resume.
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5cb4cc0d8211c490537c8568001958fc76741312
Author: Haren Myneni <haren@us.ibm.com>
Date:   Wed Aug 3 15:08:18 2005 +1000

    [PATCH] Xmon bug fix for soft-reset
    
    For soft reset during system hang, got an error "CPU did not take
    control" for some CPUs even though they responded to soft-reset (called
    SystemReset, die and called debugger - xmon).   First these CPUs entered
    into xmon by IPI callback and then got a soft-reset exception and
    re-entered into xmon again. The first CPU which re-entered into xmon got
    the output lock and made into xmon successfully without unlocking.
    Hence, the next CPU(s) which re-entered into xmon try to acquire a lock
    (get_output_lock). Therefore, we can not view state of those CPU(s).
    
    [This is a simple, very low risk, obvious fix for an obvious bug, and
    should go into 2.6.13.  -- paulus]
    
    Signed-off-by: Haren Myneni <hbabu@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d35600a9de8e2816d0e3726f64b7271af6fdda4
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 00:22:52 2005 -0400

    [ACPI] fix 64-bit build warning in processor_idle.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0b2bfb4e7ff61f286676867c3508569bea6fbf7a
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Wed Aug 3 03:09:03 2005 +0400

    [PATCH] ACPI: increase PCIBIOS_MIN_IO on x86
    
    We have increased PCIBIOS_MIN_IO to 0x4000, but still want
    motherboard resources to be allocated properly. So we need
    to state 0x1000 (according to the comment) limit explicitely.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71db63acff69618b3d9d3114bd061938150e146b
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Wed Aug 3 02:59:47 2005 +0400

    [PATCH] increase PCIBIOS_MIN_IO on x86
    
    There is a number of x86 laptops that have some non-PCI IO ports
    in the 0x1000-0x1fff range, and it's quite hard to control the correct
    order of resource allocation between PCI and other subsystems controlling
    these ports. Especially with modular kernel.
    
    So just increase PCIBIOS_MIN_IO to 0x4000 to prevent any new PCI
    resource allocations in the problematic range (this limitation must
    apply _only_ to the root bus resources - see Linus' change in
    pci_bus_alloc_resource).  As PCIBIOS_MIN_IO and PCIBIOS_MIN_CARDBUS_IO
    are the same now on i386 and x86-64, we can remove the latter.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 688d191821de7893043f5a37970472627aaffa4e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 2 14:55:40 2005 -0700

    pci: make bus resource start address override minimum IO address
    
    The reason we have PCIBIOS_MIN_IO and PCIBIOS_MIN_CARDBUS_IO is because
    we want to protect badly documented motherboard PCI resources and thus
    don't want to allocate new resources in low IO/MEM space.
    
    However, if we have already discovered a PCI bridge with a specified
    resource base, that should override that decision.
    
    This change will allow us to move the "careful" region upwards without
    resulting in problems allocating resources in low mappings.  This was
    brought on by us having allocated a bus resource at 0x1000, conflicting
    with a undocumented VAIO Sony PI resources.

commit d7ed538a02c219119adb20f1dccbf0f8015e53f3
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Aug 2 20:08:02 2005 +0200

    [PATCH] cfq-iosched: fix problem with barriers and max_depth == 1
    
    CFQ will currently stall when using write barriers and the default
    max_depth setting of 1, since we artificially need a depth of 2 when
    pre-pending the first flush. So never deny the barrier request going to
    the device.
    
    This is a regression since 2.6.12, it was found in SUSE testing.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84e66ee7ec7aaa789945403b7cbde7a0b08c15ef
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Aug 2 09:32:17 2005 -0500

    [SCSI] aic7xxx: final fixes for DT handling
    
    The aic7xxx can support Data Group transfers at periods > 12.5, so
    eliminate that restriction.  Additionally wide is a requirement for DT
    so ensure wide is set if users request DT.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f7c80c9f77b0e8a59a19506fd3caf323408a5166
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jul 19 20:04:24 2005 +0200

    [PATCH] aic byteorder fixes after recent cleanup
    
    Rebuild the aic7xxx firmware doesn't work anymore after this change
    which appeared int 2.6.13-rc1:
    
       [SCSI] aic7xxx/aic79xx: remove useless byte order macro cruft
    
    Two files did not include byteorder.h, resulting in aic dying with a panic
    
    	"Unknown opcode encountered in seq program"
    
    This fixes it for me.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7d1d23c301e0ce82c801f3b5800be6341752a1f
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Aug 2 21:51:36 2005 +1000

    [PATCH] Obvious bugfix for yenta resource allocation
    
    Recent changes (well, dating from 12 July) have broken cardbus on my
    powerbook: I get 3 messages saying "no resource of type xxx available,
    trying to continue", and if I plug in my wireless card, it complains
    that there are no resources allocated to the card.  This all worked in
    2.6.12.
    
    Looking at the code in yenta_socket.c, function yenta_allocate_res,
    it's obvious what is wrong: if we get to line 639 (i.e. there wasn't a
    usable preassigned resource), we will always flow through to line 668,
    which is the printk that I was seeing, even if a resource was
    successfully allocated.  It looks to me as though there should be a
    return statement after the two config_writel's in each of the 3
    branches of the if statements, so that the function returns after
    successfully setting up the resource.
    
    The patch below adds these return statements, and with this patch,
    cardbus works on my powerbook once again.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Acked-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2c96f46f46df072e49200a1181b3086cd2f08a6
Author: Kai Makisara <Kai.Makisara@kolumbus.fi>
Date:   Tue Aug 2 12:21:51 2005 +0300

    [SCSI] Fix SCSI tape oops at module removal
    
    Removing the SCSI tape module results in an oops in class_device_destroy if
    any devices are present. The patch at the end of this message fixes the bug
    by moving class_destroy() later in exit_st() so that the class still exists
    when devices are removed. (The bug is old but class_simple_device_remove() did
    nothing when the class did not exist.)
    
    The patch also fixes a "class leak" in init_st() error path.
    
    I would like to get this into 2.6.13 but it may be too late?
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c1a15468d58e75debc5437b2e4e12d02a89bb3a2
Author: Jack Hammer <jack_hammer@adaptec.com>
Date:   Tue Jul 26 10:20:33 2005 -0400

    [SCSI] ServeRAID V7.12.02
    
    I am resubmitting the 2.6 kernel patch for the Version 7.12.02 ips driver.
    I have eliminated a couple of inappropriate changes pointed out by Arjan.
    
    Signed-off-by: Jack Hammer <jack_hammer@adaptec.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9a351e30d72d409ec62c83f380e330e0baa584b4
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 1 21:45:48 2005 -0700

    Linux v2.6.13-rc5
    
    Ok, let's get it right this time

commit 96cd5b0856a25e2ec366702e1923070ffca53dae
Author: Mike Kravetz <kravetz@us.ibm.com>
Date:   Mon Aug 1 21:11:48 2005 -0700

    [PATCH] ppc64: POWER 4 fails to boot with NUMA
    
    If CONFIG_NUMA is set, some POWER 4 systems will fail to boot.  This is
    because of special processing needed to handle invalid node IDs (0xffff) on
    POWER 4.  My previous patch to handle memory 'holes' within nodes forgot to
    add this special case for POWER 4 in one place.
    
    In reality, I'm not sure that configuring the kernel for NUMA on POWER 4 makes
    much sense.  Are there POWER 4 based systems with NUMA characteristics that
    are presented by the firmware?  But, distros want one kernel for all systems
    so NUMA is on by default in their kernels.  The patch handles those cases.
    
    Signed-off-by: Mike Kravetz <kravetz@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 842bbaaa7394820c8f1fe0629cd15478653caf86
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Mon Aug 1 21:11:47 2005 -0700

    [PATCH] Module per-cpu alignment cannot always be met
    
    The module code assumes noone will ever ask for a per-cpu area more than
    SMP_CACHE_BYTES aligned.  However, as these cases show, gcc asks sometimes
    asks for 32-byte alignment for the per-cpu section on a module, and if
    CONFIG_X86_L1_CACHE_SHIFT is 4, we hit that BUG_ON().  This is obviously an
    unusual combination, as there have been few reports, but better to warn
    than die.
    
    See:
    	http://www.ussg.iu.edu/hypermail/linux/kernel/0409.0/0768.html
    
    And more recently:
    	http://bugs.gentoo.org/show_bug.cgi?id=97006
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 561fb765b97f287211a2c73a844c5edb12f44f1d
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Aug 1 21:11:46 2005 -0700

    [PATCH] ppc64: topology API fix
    
    Dont include asm-generic/topology.h unconditionally, we end up overriding
    all the ppc64 specific functions when NUMA is on.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ade43fbbcc3c12f0ddba112351d14d6c82ae476
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 1 21:11:45 2005 -0700

    [PATCH] shm: CONFIG_SHMEM=n build fix
    
    Fix bug found by Grant Coady <lkml@dodo.com.au>'s autobuild setup.
    
    shmem_set_policy() and shmem_get_policy() are macros if !CONFIG_SHMEM, so this
    doesn't work.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39bbb07d7c0cf3e374831d1474e2246d9cabd931
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 1 21:11:44 2005 -0700

    [PATCH] transmeta: CONFIG_PROC_FS=n build fix
    
    Fix bug found by Grant Coady <lkml@dodo.com.au>'s autobuild setup.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba17101b41977f124948e0a7797fdcbb59e19f3e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Mon Aug 1 21:11:43 2005 -0700

    [PATCH] sys_set_mempolicy() doesnt check if mode < 0
    
    A kernel BUG() is triggered by a call to set_mempolicy() with a negative
    first argument.  This is because the mode is declared as an int, and the
    validity check doesnt check < 0 values.  Alternatively, mode could be
    declared as unsigned int or unsigned long.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 690dbe1ced143876d8fa56b72310738dbe079d0a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Aug 1 21:11:42 2005 -0700

    [PATCH] x86_64: access of some bad address
    
    x86_64 has a large sparse gate area between VSYSCALL_START and
    VSYSCALL_END, not all of it presently backed by pmds.  Alexander Nyberg has
    found that in some circumstances gdb may try to ptrace here, and hit
    get_user_pages BUG_ON.  It seems odd that gdb should be accessing here, but
    it certainly shouldn't crash in this way: relax BUG_ON to -EFAULT.  Fixes
    kernel bugzilla #4801.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f9c9c258249fba3e2e78f70691528426a6c010
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Aug 1 21:11:41 2005 -0700

    [PATCH] hfs: don't reference missing page
    
    If there was a read error, the bnode might miss some pages, so skip them.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f76d28d235cf777dd2e1c1d48c16ee10c1d1587f
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Aug 1 21:11:40 2005 -0700

    [PATCH] hfs: don't dirty unchanged inode
    
    If inode size hasn't changed, don't do anything further in truncate, which
    also prevents a dirty inode, what might upset some readonly devices quite
    badly.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0072b1389c25355ccc01048114adb9652c13fd9f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Aug 1 21:11:39 2005 -0700

    [PATCH] include/linux/dcookies.h: dummy functions must be "static inline"
    
    We don't want these to be global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 001abc93bf83f95737cd455b6ec875e6412f7d53
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Mon Aug 1 21:11:38 2005 -0700

    [PATCH] v4l: bug fix to correct tea5767 autodetection
    
    This patch does correct radio chip autodetection to avoid misdetecting
    mt20xx microtune as tea5767 chip.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43f2f3d343f9d00a94a9242547a59d9dfb2338c4
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Aug 1 21:11:37 2005 -0700

    [PATCH] aacraid: Fix for controller load based timeouts
    
    Martin Drab found that he could get aacraid timeouts with high load on his
    controller / disk drive combinations.  After some experimentation Mark
    Salyzyn has come up with a patch to reduce the default max_sectors to
    something that will keep the controller from being overloaded and will
    eliminate the timeout issues.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Acked-by: Mark Salyzyn <mark_salyzyn@adaptec.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2757a71c3122c7653e3dd8077ad6ca71efb1d450
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Aug 1 21:11:35 2005 -0700

    [PATCH] m32r: Fix local-timer event handling
    
    There was a scheduling problem of the m32r SMP kernel; A process rarely
    stopped and gave no responding but the other process have been handled by
    the other CPU still lives, then if we did something in the other terminal
    or something like that, the stopped process came back to life and continued
    its operation...  (ex.  LMbench: lat_sig)
    
    In the m32r SMP kernel, a local-timer event is delivered by using an
    IPI(inter processor interrupts); LOCAL_TIMER_IPI.  And a function
    smp_send_timer() is prepared to send the LOCAL_TIMER_IPI from the current
    CPU to the other CPUs.
    
    The funtion smp_send_timer() was placed and used in do_IRQ() in
    former times (before 2.6.10-rc3-mm1 kernel), however, it was
    unintentionally removed when arch/m32r/kernel/irq.c was modified to
    employ the generic hardirq framework (CONFIG_GENERIC_HARDIRQ) in
    my previous patch.
    
      [PATCH 2.6.10-rc3-mm1] m32r: Use generic hardirq framework
      http://www.ussg.iu.edu/hypermail/linux/kernel/0412.2/0358.html
    
    The following patch fixes the above problem.
    
    Signed-off-by: Hitoshi Yamamoto <hitoshiy@isl.melco.co.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2013485a52fb7ece48e5688b443cc098f4dbbdf
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Aug 1 21:11:34 2005 -0700

    [PATCH] s390: ioprio & inotify system calls.
    
    Add system calls for io priorities and inotify.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d3f229fcd4409d3e182b204defc122eb7833535
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Aug 1 21:11:33 2005 -0700

    [PATCH] s390: kexec fixes and improvements.
    
    Disable pseudo page fault handling before starting the new kernel and try
    to use diag308 to reset the machine.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4374ae10e5ef577d8fd73fdadcdb37149d8b3953
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sun Jul 31 22:34:54 2005 -0700

    [PATCH] ppc32: add missing 4xx EMAC sysfs nodes
    
    Add missing 4xx EMAC data sysfs nodes.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61d44c777a02245a5032a2ca77a12f915416572d
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sun Jul 31 22:34:53 2005 -0700

    [PATCH] ppc32: add bamboo defconfig
    
    Add Bamboo platform defconfig
    
    Signed-off-by: Wade Farnsworth <wfarnsworth@mvista.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 497799d368b2106c3266a20d75ff221eed068cad
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sun Jul 31 22:34:53 2005 -0700

    [PATCH] ppc32: add bamboo platform
    
    Add Bamboo platform support.  This is an AMCC 440EP-based reference platform.
    
    Signed-off-by: Wade Farnsworth <wfarnsworth@mvista.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9cf73aee140baa425429902aaed2c758401343f
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sun Jul 31 22:34:52 2005 -0700

    [PATCH] ppc32: add 440ep support
    
    Add PPC440EP core support.  PPC440EP is a PPC440-based SoC with a classic PPC
    FPU and another set of peripherals.
    
    Signed-off-by: Wade Farnsworth <wfarnsworth@mvista.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8be1c8e065691c332fd8e9bae70c7096a69c31d
Author: Kumar Gala <galak@freescale.com>
Date:   Sun Jul 31 22:34:51 2005 -0700

    [PATCH] ppc32: Mark boards that don't build as BROKEN
    
    Marked APUS and GEMINI as BROKEN since they do not build at the platform
    level.  We have requested that the maintainers of these boards/platforms
    fix them by the time 2.6.15 is released or we plan on concerning them
    unmaintained and thus removing them.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01bdc0336f8f42b32b9be9ace7775329b25202a5
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Sun Jul 31 22:34:50 2005 -0700

    [PATCH] silence cs89x0
    
    cs89x0 talks a lot at boot.  Seems like debug leftover.  This patch
    downgrades printks to KERN_DEBUG.  While we're at it, make these messages a
    bit less obscure.
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1581566183f310abbd2d384a9079d4039faca05
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sun Jul 31 22:34:50 2005 -0700

    [PATCH] md: make sure raid5/raid6 resync uses correct 'max_sectors'
    
    The default resync_max_sector is set to "mddev->size << 1".  If the
    raid-personality-module updates mddev->size, it must update
    resync_max_sectors too.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57ee67af35183c60e924ebb6d6b3e1d2d9c03366
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Jul 31 22:34:49 2005 -0700

    [PATCH] ppc64: Fix CONFIG_ALTIVEC not set
    
    The code that sets the altivec capability of the CPU based on firmware
    informations can enable altivec when the kernel has CONFIG_ALTIVEC
    disabled.  This results in "interesting" crashes.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1caf1f0f187d99eb898bdc216de5a761740fe814
Author: Paul Jackson <pj@sgi.com>
Date:   Sun Jul 31 22:34:48 2005 -0700

    [PATCH] plug MAN-PAGES maintainer in Documentation/SubmittingPatches
    
    Improve the likelihood that someone submitting a patch will notify the
    MAN-PAGES maintainer.
    
    This is a follow-up to comments on the July 29 lkml email thread: "Broke nice
    range for RLIMIT NICE"
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Cc: "Michael Kerrisk" <mtk-manpages@gmx.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faf1668c954d24285d7b213cf1ff38fe93569f01
Author: Michael Kerrisk <mtk-manpages@gmx.net>
Date:   Sun Jul 31 22:34:47 2005 -0700

    [PATCH] MAINTAINERS record -- MAN-PAGES
    
    Michael maintains the kernel manpages.  He wants us to tell him when we
    change or augment the userspace API.  Add his contact details to
    MAINTAINERS.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fef07ca8574bff104d506c07f9161fe7fbaba57
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Sun Jul 31 22:34:46 2005 -0700

    [PATCH] v4l: cx88 card support and documentation finishing touches
    
    Peter Missel:
    - Add support for the SVideo input on the GDI Black Gold.
    
    Mauro Carvalho Chehab:
    - Linux/version.h removed. Replaced by linux/utsname.h
    
    Michael Krufky:
    - Added analog support for DViCO FusionHDTV5 Gold.
    
    CC: Peter Missel <peter.missel@onlinehome.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd3113e84e188781aa2935fbc4351d64ccdd171b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Sun Jul 31 22:34:43 2005 -0700

    [PATCH] V4L: Miscellaneous fixes
    
    - Fixed some bttv card numbers.
    
    - BTTV and SAA7134 version numbers incremented to reflect changes.
    
    - pci_dma_supported() is called after pci_set_dma_mask() which
      already did check that for us. This patch removes the unneeded call to
      pci_dma_supported() at bttv-driver.c
    
    - Ensure a sufficient I2C bus idle time between 2 messages for
      saa7134-i2c.c
    
    - It is important to write at first to MO_GP3_IO for cx88-tvaudio.c
    
    - Use try_to_freeze() instead of refrigerator at msp3400.c
    
    - Recognizing the MFPE05-2 Tuner at tveeprom.c
    
    - Add new parameter to help identify radio chipsets at tuner module:
      show_i2c=1 will show 16 reading bytes from detected tuners.
    
    - BTTV does generate some Unimplemented IOCTL log at tuner module:
      0x40046d11(dir=1,tp=0x6d,nr=17,sz=4) means that it is sending
      MSP3400 calls to non-msp3400 tuners. Warning eliminated.
      VIDIOSAUDIO is also called, so debug messages updated. It is still
      requiring IOCTL implementation.
    
    - Added two more tuners.
    
    - Add support for the SVideo input on the GDI Black Gold.
    
    Signed-off-by: Peter Missel <peter.missel@onlinehome.de>
    Signed-off-by: Graham Bevan <graham.bevan@ntlworld.com>
    Signed-off-by: Torsten Seeboth <Torsten.Seeboth@t-online.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t.online.de>
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdf32eaa4e601b15146e21b6470de00f149ce37f
Author: Eric Lammerts <eric@lammerts.org>
Date:   Sun Jul 31 22:34:42 2005 -0700

    [PATCH] disable addres space randomization default on transmeta CPUs
    
    We know that the randomisation slows down some workloads on Transmeta CPUs
    by quite large amounts.  We think it's because the CPU needs to recode the
    same x86 instructions when they pop up at a different virtual address after
    a fork+exec.
    
    So disable randomization by default on those CPUs.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fef3fa24d8d1bb6d82cad195f73917fa6534dac
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jul 31 22:34:40 2005 -0700

    [PATCH] skge build fix
    
    Make it compile with CONFIG_PM=n
    
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de5b31101fdefab2a7858a17601c1a35aadf237f
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jul 31 22:34:40 2005 -0700

    [PATCH] i2c-mpc.c: revert duplicate patch
    
    Seems that both Greg and I submitted the same patch and it just kept on
    applying...
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Kumar Gala <galak@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30db1ae8640d3527ca7ac8df4bcbf14ccc6ae9cd
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Aug 1 16:54:26 2005 -0500

    JFS: Check for invalid inodes in jfs_delete_inode
    
    Some error paths may iput an invalid inode with i_nlink=0.  jfs should
    not try to actually delete such an inode.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 697a2d63a3844caaa2b6565ab7f3d69086af94d4
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Aug 1 12:37:54 2005 -0700

    Revert ACPI interrupt resume changes
    
    If there are devices that use interrupts over a suspend event, ACPI must
    restore the PCI interrupt links on resume.  Anything else breaks any
    device that hasn't been converted to the new (dubious) PM rules.
    
    Drivers that need the irq free/re-aquire sequence can be done one by one
    independently of this one.

commit 4ceb5db9757aaeadcf8fbbf97d76bd42aa4df0d6
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 1 11:14:49 2005 -0700

    Fix get_user_pages() race for write access
    
    There's no real guarantee that handle_mm_fault() will always be able to
    break a COW situation - if an update from another thread ends up
    modifying the page table some way, handle_mm_fault() may end up
    requiring us to re-try the operation.
    
    That's normally fine, but get_user_pages() ended up re-trying it as a
    read, and thus a write access could in theory end up losing the dirty
    bit or be done on a page that had not been properly COW'ed.
    
    This makes get_user_pages() always retry write accesses as write
    accesses by making "follow_page()" require that a writable follow has
    the dirty bit set.  That simplifies the code and solves the race: if the
    COW break fails for some reason, we'll just loop around and try again.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d894c47975f7222c5537e450e71310b395488c7
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Aug 1 23:51:34 2005 +0800

    [PATCH] tridentfb: Fix scrolling artifacts during disk IO
    
    Reported by: Jochen Hein (Bugzilla Bug 4312)
    
    When there is disk I/O happening, the framebuffer has a little snow on
    the screen.  Once I/O has finished, no garbage remains on screen.
    
    This bug was explained by: Knut Petersen
    
    Most important is CRTC register 2f, signal quality is also improved for
    higher vclk values by changing set_vclk() according to the X drivers and
    cyblafb.c
    
    The fix is to set the performance register (0x2f) with a more stable
    value.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dad46cf38c029248d1331b6a97b2999e0751cfa
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Aug 1 23:46:44 2005 +0800

    [PATCH] tridentfb: Fix scrolling artifacts if acceleration is enabled
    
    Reported by: Jochen Hein (Bugzilla Bug 4386)
    
    booting leaves the end of long lines in the last line on screen when
    scrolling.  When X is running, scrolling puts garbage on the screen
    (looks like X data) Console switch fixes the screen.  Behaviour seems to
    be identical with noaccel and without on the video=tridentfb parameter
    in lilo.conf.
    
    This bug was explained by: Knut_Petersen
    
    Acceleration is broken for all BLADE 3D chips for all versions of kernel
    2.6 except for 32bit modes.  Most important reason is that the u32 col
    parameter of the graphics engine needs the color value replicated to all
    u8 of the u32 (8bit modes) and to both u16 of the u32.
    
    Fix color value passed to graphics engine, verified by the reporter.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cb54819d7b1867053e2dfd8c0ca3a8dc65a7eff
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Aug 1 13:39:13 2005 +0200

    [PATCH] remove sys_set_zone_reclaim()
    
    This removes sys_set_zone_reclaim() for now.  While i'm sure Martin is
    trying to solve a real problem, we must not hard-code an incomplete and
    insufficient approach into a syscall, because syscalls are pretty much
    for eternity.  I am quite strongly convinced that this syscall must not
    hit v2.6.13 in its current form.
    
    Firstly, the syscall lacks basic syscall design: e.g. it allows the
    global setting of VM policy for unprivileged users. (!) [ Imagine an
    Oracle installation and a SAP installation on the same NUMA box fighting
    over the 'optimal' setting for this flag. What will they do? Will they
    try to set the flag to their own preferred value every second or so? ]
    
    Secondly, it was added based on a single datapoint from Martin:
    
     http://marc.theaimsgroup.com/?l=linux-mm&m=111763597218177&w=2
    
    where Martin characterizes the numbers the following way:
    
     ' Run-to-run variability for "make -j" is huge, so these numbers aren't
       terribly useful except to see that with reclaim the benchmark still
       finishes in a reasonable amount of time. '
    
    in other words: the fundamental problem has likely not been solved, only
    a tendential move into the right direction has been observed, and a
    handful of numbers were picked out of a set of hugely variable results,
    without showing the variability data. How much variance is there
    run-to-run?
    
    I'd really suggest to first walk the walk and see what's needed to get
    stable & predictable kernel compilation numbers on that NUMA box, before
    adding random syscalls to tune a particular aspect of the VM ... which
    approach might not even matter once the whole picture has been analyzed
    and understood!
    
    The third, most important point is that the syscall exposes VM tuning
    internals in a completely unstructured way. What sense does it make to
    have a _GLOBAL_ per-node setting for 'should we go to another node for
    reclaim'? If then it might make sense to do this per-app, via numalib or
    so.
    
    The change is minimalistic in that it doesnt remove the syscall and the
    underlying infrastructure changes, only the user-visible changes.  We
    could perhaps add a CAP_SYS_ADMIN-only sysctl for this hack, a'ka
    /proc/sys/vm/swappiness, but even that looks quite counterproductive
    when the generic approach is that we are trying to reduce the number of
    external factors in the VM balance picture.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d546f54324e04747e82ccbb4ea85f54bdcacd6d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Aug 1 14:55:51 2005 +0200

    [PATCH] pcmcia: fix multiple insertion of multifunction cards
    
    The ordering of setting and clearing device_add_pending went wrong on some
    occasions, causing multifunction cards only to be handled correctly on the
    first insertion, not on subsequent ones.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b8d4669376332a6819e21994a78ecd5502d3ebc
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Aug 1 14:16:55 2005 +0200

    [PATCH] pcmcia: defer ide-cs initialization after other IDE drivers started up
    
    Avoid registering PCMCIA CF cards before other IDE stuff. This means the risk
    of /dev/hd* being re-ordered is lessened. The _sane_ thing to assert any
    ordering is to use udev, nameif and so on, of course.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9c55d29e9fced1eb1b4c252b2efd4b55a0c3c7f
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Mon Aug 1 11:00:45 2005 -0400

    [PATCH] inotify: fix race between the kernel and user space
    
    When you rm a watch, an IN_IGNORED event is sent down the event queue
    with the watch descriptor that you just rm'd.
    
    If you then add a watch you could get the ignored watch's wd and if you
    haven't read the entire event queue, user space will think that it's
    newly created watch was just ignored.
    
    To avoid this problem we just use idr_get_new_above instead of
    idr_get_new.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7544953685859875b5ac0260b6b1856066c092d6
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Mon Aug 1 11:00:45 2005 -0400

    [PATCH] inotify: fix file deletion by rename detection
    
    When a file is moved over an existing file that you are watching,
    inotify won't send you a DELETE_SELF event and it won't unref the inode
    until the inotify instance is closed by the application.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be2ac68f7b66e90b8d25c168fc4d033b034f5c43
Merge: e0b98c7... e064cd7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 31 16:49:07 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit e0b98c79e605f64f263ede53344f283f5e0548be
Merge: 02459ea... faa7253...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 31 16:48:39 2005 -0700

    Merge head 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 02459eaab98a6a57717bc0cacede148fc76af881
Author: James Simmons <jsimmons@infradead.org>
Date:   Sat Jul 30 23:49:54 2005 +0100

    [PATCH] Display name of fbdev device
    
    This patch displays the name of the fbdev driver in sysfs.
    Down the road this will replace the current proc handle we have.
    
    Signed-off-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e064cd7e3ac797df1e81b55ff4fed5fca5d106b5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 4 18:30:42 2005 +0100

    [PATCH] SMP fix for 6pack driver
    
    Drivers really only work well in SMP if they actually can be selected.
    This is a leftover from the time when the 6pack drive only used to be
    a bitrotten variant of the slip driver.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
     Kconfig |    2 +-
     1 files changed, 1 insertion(+), 1 deletion(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit af44f5bf775e0d36aa5879c94369216ff6f717a6
Author: Tony Lindgren <tony@atomide.com>
Date:   Thu Jun 30 06:40:18 2005 -0700

    [PATCH] Fix OMAP specific typo in smc91x.h
    
    --ReaqsoxgOBHFXBhH
    Content-Type: text/plain; charset=us-ascii
    Content-Disposition: inline
    
    Hi Jeff,
    
    Here's a little patch fixing a typo in smc91x.h.
    
    Regards,
    
    Tony
    
    --ReaqsoxgOBHFXBhH
    Content-Type: text/x-chdr; charset=us-ascii
    Content-Disposition: inline; filename="patch-fix-typo-smc91x.h"
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3f309db33e7868fe11f8fc3a0dd291703df3c662
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 15:47:25 2005 -0700

    [PATCH] sk98lin: fix workaround for yukon-lite chipset (> rev 7)
    
    Yukon-Lite chipset needs workaround for revision 7 (or later).
    Without this patch, chip gets stuck in low power mode and never
    boots. Newer SysKonnect vendor code already had same patch.
    
    Related bug in skge is http://bugs.gentoo.org/87822
    
    Chris, please add for 2.6.12.2
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 00354cfb92bd819a0d09d3ef9988e509b6675fdd
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Thu Jul 21 12:18:02 2005 -0700

    [PATCH] bonding: documentation update
    
    Contains general updates (additional configuration info, hopefully
    better examples, updated some out of date info, and a bonus pass
    through ispell to banish the "paramters.") and info specific to
    gratuitous ARP and xmit policy functionality already in 2.6.13-rc2.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit faa725332f39329288f52b7f872ffda866ba5b09
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 01:06:35 2005 -0700

    [PATCH] SCSI_SATA has to be a tristate
    
    SCSI=m must disallow static drivers.
    
    The problem is that all the SATA drivers depend on SCSI_SATA.
    
    With SCSI=m and SCSI_SATA=y this allows the static enabling of the SATA
    drivers with unwanted effects, e.g.:
    - SCSI=m, SCSI_SATA=y, SCSI_ATA_ADMA=y
      -> SCSI_ATA_ADMA is built statically but scsi/built-in.o is not linked
         into the kernel
    - SCSI=m, SCSI_SATA=y, SCSI_ATA_ADMA=y, SCSI_SATA_AHCI=m
      -> SCSI_ATA_ADMA and libata are built statically but
         scsi/built-in.o is not linked into the kernel,
         SCSI_SATA_AHCI is built modular (unresolved symbols due to missing
                                          libata)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f2e1e47d14aae1f33e98cf8d9ea93e2fe9e2f521
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:11 2005 -0700

    [PATCH] skge: version 0.8
    
    Increase driver version to 0.8
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6abebb538d317ead09cc0f3c2a0752047f9ff961
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:10 2005 -0700

    [PATCH] skge: led toggle cleanup
    
    Cleanup code that is used to toggle LED's. Since we
    get called from ethtool, can use that thread rather than
    setting up a timer.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4cde06ed0fb58402ec1d6d117122d1058983a393
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:09 2005 -0700

    [PATCH] skge: ignore phy interrupts during negotiation
    
    During autonegotiation set PHY interrupt mask to ignore
    bogus speed change interrupts.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d8a09943ebbaca9befd995d8fe10dd9885256dbf
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:08 2005 -0700

    [PATCH] skge: fifo control register access fix
    
    The code to clear fifo errors was incorrect and sending garbage
    to the external phy. Removed the no longer used inline's funcs.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2c66851460c9438823e39b76887376d1511fb67c
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:07 2005 -0700

    [PATCH] skge: whitespace fixes
    
    Minor whitespace cleanups.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 382317138b3ade02c9c319531ab0619e95dbc672
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:06 2005 -0700

    [PATCH] skge: support yukon lite rev 4
    
    The check for Yukon lite changes was restricting itself to
    rev A3. It turns out that these changes are also true on A4
    and later.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4ff6ac052b90ee4dfee92f8e2c5cb7ef8a4d8f13
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:05 2005 -0700

    [PATCH] skge: phy lock deadlock
    
    Cleanup the phy_lock deadlock because of relocking in the nway_reset path.
    Reported by Francois Romieu.
    
    Also, don't need to do irqsave/restore for blink,
    just excluding bh is good enough.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0eedf4ac5b536c7922263adf1b1d991d2e2397b9
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:04 2005 -0700

    [PATCH] skge: disable tranmitter on shutdown
    
    Here is a fix for a typo, thanks Eliot Dresselhaus.
    Since transmitter not active when device is down, it wasn't really noticed.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit acdd80d514a08800380c9f92b1bf4d4c9e818125
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:03 2005 -0700

    [PATCH] skge: remove SK-9EE support
    
    The SK-9E boards use the Marvell Yukon2 chipset which
    is not supported by the skge driver. Thanks to Ralph Roesler
    for noticing.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f6620cab9485d435aa93490533b8268d36dc4526
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 22 16:26:02 2005 -0700

    [PATCH] skge: silence mac data parity messages
    
    Using Genesis board, I get harmless error reports. Rather than console
    error, turn it into a error counter.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f0098f7863f814a5adc0b9cb271605d063cad7fa
Author: Denis Lunev <den@sw.ru>
Date:   Sat Jul 30 17:47:25 2005 -0700

    [NET] Fix too aggressive backoff in dst garbage collection
    
    The bug is evident when it is seen once. dst gc timer was backed off,
    when gc queue is not empty. But this means that timer quickly backs off,
    if at least one destination remains in use. Normally, the bug is invisible,
    because adding new dst entry to queue cancels the backoff. But it shots
    deadly with destination cache overflow when new destinations are not released
    for long time f.e. after an interface goes down.
    
    The fix is to cancel backoff when something was released.
    
    Signed-off-by: Denis Lunev <den@sw.ru>
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db44575f6fd55df6ff67ddd21f7ad5be5a741136
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Sat Jul 30 17:46:44 2005 -0700

    [NET]: fix oops after tunnel module unload
    
    Tunnel modules used to obtain module refcount each time when
    some tunnel was created, which meaned that tunnel could be unloaded
    only after all the tunnels are deleted.
    
    Since killing old MOD_*_USE_COUNT macros this protection has gone.
    It is possible to return it back as module_get/put, but it looks
    more natural and practically useful to force destruction of all
    the child tunnels on module unload.
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1f494c0e040b001cf844280910d04ba7ebdc2898
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Jul 30 17:44:07 2005 -0700

    [NETFILTER] Inherit masq_index to slave connections
    
    masq_index is used for cleanup in case the interface address changes
    (such as a dialup ppp link with dynamic addreses).  Without this patch,
    slave connections are not evicted in such a case, since they don't inherit
    masq_index.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d1b04c081e3fb0a08ac108737e4efa9f4830c916
Author: Baruch Even <baruch@ev-en.org>
Date:   Sat Jul 30 17:41:59 2005 -0700

    [NET]: Spelling mistakes threshoulds -> thresholds
    
    Just simple spelling mistake fixes.
    
    Signed-Off-By: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 889371f61fd5bb914d0331268f12432590cf7e85
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 30 13:41:56 2005 -0700

    Revert "yenta free_irq on suspend"
    
    ACPI is wrong.  Devices should not release their IRQ's on suspend and
    re-aquire them on resume.  ACPI should just re-init the IRQ controller
    instead of breaking most drivers very subtly.
    
    Breakage reported by Hugh Dickins <hugh@veritas.com>
    
    Undo: d8c4b4195c7d664baf296818bf756775149232d3
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 035a4a4f8976bdf12aab992c630d3a6cfba90ea8
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Jul 30 13:12:18 2005 -0700

    [PATCH] sk98lin: basic suspend/resume support fixes
    
    An early version of the sk98lin patch was merged via Len's tree.  But there
    were subsequent updates as a result of review from Jeff.  THis fixes things
    up.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a1caa21d66bcb9ba9892435a0a54fc32cd9eeab
Author: Natalie.Protasevich@unisys.com <Natalie.Protasevich@unisys.com>
Date:   Sat Jul 30 11:25:32 2005 -0700

    [PATCH] x86_64: avoid wasting IRQs patch update
    
    The patch adds boundary check for the MAX_GSI_NUM.  Same as the update for
    i386, the patch addresses a problem with ACPI SCI IRQ.  The patch corrects
    the code such that SCI IRQ is skipped and duplicate entry is avoided.  The
    VIA chipset uses 4-bit IRQ register for internal interrupt routing, and
    therefore cannot handle IRQ numbers assigned to its devices.  The patch
    corrects this problem by allowing PCI IRQs below 16.
    
    Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c70f5d6610c601ea2ae4ae4e49f66c80801e895f
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 30 10:22:49 2005 -0700

    [PATCH] revert bogus softirq changes
    
    This snuck in with an x86_64 change.  Thanks to Richard Purdie
    <rpurdie@rpsys.net> for spotting it.
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d1d07e41a1de478a0da3cc14b4a8054ef09931c
Merge: d7a465b... adbedd3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 30 10:15:57 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lenb/to-linus

commit d7a465b4740806e4ee34061ad455595b2fa9fad5
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Jul 29 22:59:21 2005 -0700

    [PATCH] vesafb: Document mtrr boot option usage
    
    Document mtrr boot option usage to Documentation/fb/vesafb.txt.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92ed0223aefa795d1873427e25599cb70b2148ee
Author: Dave Peterson <dsp@llnl.gov>
Date:   Fri Jul 29 22:59:20 2005 -0700

    [PATCH] x86_64: fix bug in csum_partial_copy_generic()
    
    I was observing reproducible crashes on the "movw %bx,(%rsi)" instruction
    below while a process in a recvfrom() system call was copying packet data
    to user space.  The patch below fixes the exception table and causes the
    crash to no longer reproduce.  Please apply.
    
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ce17b18e16177dd6409dabd38df5c2c9b58fc2d
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Fri Jul 29 22:59:19 2005 -0700

    [PATCH] ppc32: fix 44x early serial debug for configurations with more than 512M of RAM
    
    Fix 44x early serial debugging for big RAM configurations (more than 512M).
     We cannot use default OpenBIOS virtual mapping, because it interferes with
    pinned TLB entry.
    
    While we are at it, move early UART mapping to TLB slot 0, so it can
    survive longer during boot process (slot 1 is used by the first ioremap
    call, effectively killing UART mapping if it occupies this slot).  Also,
    change UART TLB entry size to 4K (256M is too much for a bunch of registers
    :).  Squash some warnings on the way.
    
    Tested on Ebony and Ocotea with 1G of RAM.
    
    Thanks to Scott Coulter <scott.coulter@cyclone.com> for diagnosing this
    problem.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e310fd43256b3cf4d37f6447b8f7413ca744657a
Author: Martin J. Bligh <mbligh@mbligh.org>
Date:   Fri Jul 29 22:59:18 2005 -0700

    [PATCH] Fix NUMA node sizing in nr_free_zone_pages
    
    We are iterating over all nodes in nr_free_zone_pages().  Because the
    fallback zonelists contain all nodes in the system, and we walk all the
    zonelists, we're counting memory multiple times (once for each node).  This
    caused us to make a size estimate of 32GB for an 8GB AMD64 box, which makes
    all the dirty ratio calculations, etc incorrect.
    
    There's still a further bug to fix from e820 holes causing overestimation
    as well, but this fix is separate, and good as is, and fixes one class of
    problems.  Problem found by Badari, and tested by Ram Pai - thanks!
    
    Signed-off-by:  Martin J. Bligh <mbligh@mbligh.org>
    Signed-off-by:  Matt Dobson <colpatch@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fa918b451f625870cd4275ca908b2392ee86a51
Author: Robert Love <rml@novell.com>
Date:   Fri Jul 29 22:59:17 2005 -0700

    [PATCH] ppc64: inotify syscalls
    
    inotify system call support for PPC64
    
    [ I don't think we need sys32 compatibility versions--and if we do, I
    failed in life. ]
    
    Signed-off-by: Robert Love <rml@novell.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 141d751e264c16db554f6681d84056ebde0e8078
Author: Robert Love <rml@novell.com>
Date:   Fri Jul 29 22:59:16 2005 -0700

    [PATCH] ppc32: inotify syscalls
    
    Add inotify system call stubs to PPC32.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7ff898ad3971cd36967453d331c57d97d407007
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Jul 30 10:37:55 2005 -0500

    [SCSI] aic7xxx: fix bug in DT handing
    
    Basically DT isn't reported or handled at all.  The problem is that
    lines of code like this:
    
    spi_dt(starget) = tinfo->curr.ppr_options & MSG_EXT_PPR_DT_REQ;
    
    don't do what you think they do when spi_dt is a single bit variable.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e572f7cc28a0b01b96ede3f78f448ad55c5e67ad
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 01:07:43 2005 -0700

    [SCSI] fc4 warning fix
    
    drivers/fc4/fc.c: In function `fcp_scsi_dev_reset':
    drivers/fc4/fc.c:933: warning: control reaches end of non-void function
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7cd7ae531c7896f90485ce6ebb2b1370a0a7d8c8
Author: Linda Xie <lxiep@us.ibm.com>
Date:   Fri Jul 15 17:49:27 2005 -0500

    [SCSI] scsi/ibmvscsi/srp.h: Fix a wrong type code used for SRP_LOGIN_REJ
    
    This patch fixes srp.h which uses 0x80 for SRP_LOGIN_REJ instead of
    0xc2.
    
    Signed-off-by: Linda Xie <lxie@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit adbedd34244e2b054557002817f979a9b004a405
Merge: d6ac1a7... b082548...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 30 01:55:32 2005 -0400

    merge 2.6.13-rc4 with ACPI's to-linus tree

commit d6ac1a7910d22626bc77e73db091e00b810715f4
Merge: 577a4f81... 87bec66...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 29 23:31:17 2005 -0400

    /home/lenb/src/to-linus branch 'acpi-2.6.12'

commit 87bec66b9691522414862dd8d41e430b063735ef
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Wed Jul 27 23:02:00 2005 -0400

    [ACPI] suspend/resume ACPI PCI Interrupt Links
    
    Add reference count and disable ACPI PCI Interrupt Link
    when no device still uses it.
    
    Warn when drivers have not released Link at suspend time.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 68ac767686fd72f37a25bb4895fb4ab0080ba755
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Apr 25 14:38:00 2005 -0400

    [ACPI] delete boot-time printk()s from processor_idle.c
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4401
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 90158b83204842c0108d744326868d91cc9c4dfd
Author: Rafael J. Wysocki <rjwysocki@sisk.pl>
Date:   Sun Jul 24 14:22:00 2005 -0400

    [ACPI] fix resume issues on Asus L5D
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4416
    
    Signed-off-by: Rafael J. Wysocki <rjwysocki@sisk.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4b31e77455b868b43e665edceb111c9a330c8e0f
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed May 18 13:49:00 2005 -0400

    [ACPI] Always set P-state on initialization
    
    Otherwise a platform that supports ACPI based cpufreq
    and boots up at lowest possible speed could stay there
    forever.  This because the governor may request max speed,
    but the code doesn't update if there is no change in
    speed, and it assumed the initial state of max speed.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4634
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 45bea1555f5bf0cd5871b208b4b02d188f106861
Author: Luming Yu <luming.yu@intel.com>
Date:   Sat Jul 23 04:08:00 2005 -0400

    [ACPI] Add "ec_polling" boot option
    
    EC burst mode benefits many machines, some of
    them significantly.  However, our current
    implementation fails on some machines such
    as Rafael's Asus L5D.
    
    This patch restores the alternative EC polling code,
    which can be enabled at boot time via "ec_polling"
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4665
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 335f16be5d917334f56ec9ef7ecf983476ac0563
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Wed Jun 22 18:37:00 2005 -0400

    [ACPI] address boot-freeze with updated DMI blacklist for c-states
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4763
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b0825488a642cadcf39709961dde61440cb0731c
Author: Matthew Garrett <mjg59@srcf.ucam.org>
Date:   Fri Jul 29 14:03:39 2005 -0700

    [PATCH] agp: restore APBASE after setting APSIZE
    
    When leaving S3 state, the AGP bridge may not have all PCI configuration
    registers set in the same way as they were at boot.  This should be fixed
    by pci_restore_state - however, the APBASE register cannot be set to
    conflict with the APSIZE register.  If APSIZE is larger than it was before
    suspend, pci_restore_state will not restore APBASE correctly.  The attached
    patch adds an extra item to the agp_bridge_data structure and uses it to
    store the value of APBASE.  On resume, this is then written after APSIZE
    has been set.  This patch only touches the path used for Intel chipsets
    without integrated graphics, and may need to be extended to work with the
    others.
    
    Without this patch, I get the symptoms described in bug 4921 - APBASE ends
    up overlapping various PCI devices, and as a result they fail to work after
    resume.
    
    Signed-off-by: Matthew Garrett <mjg59@srcf.ucam.org>
    Acked-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b87a1e506115e7df4c6bfd266267ee0088cba3b7
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Fri Jul 29 14:03:38 2005 -0700

    [PATCH] s390: fix inline assembly in appldata
    
    Fix inline assembly that gets miscompiled by gcc 4.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ffa92340b22a59575afe60ea155195c43213120
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Fri Jul 29 14:03:37 2005 -0700

    [PATCH] s390: device recognition
    
    Close a small window where a device may be not operational again after senseid
    finished and the "same device" check fails due to dev=0000 by checking for dnv
    after stsch() by then setting the device to not operational.  (No need to
    check for dnv in ccw_device_handle_oper() again since we don't do stsch() into
    the subchannel's schib in the meantime and will get a crw anyway if the device
    becomes not oper again).
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 350e3ade9ed0809a94c51db6ee66883a35f0d6c9
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Fri Jul 29 14:03:36 2005 -0700

    [PATCH] s390: check for interrupt before waiting
    
    The patch that introduced waiting for interrupts after resetting the reader
    can cause the boot to fail because the system is waiting for an interrupt that
    will never arrive.  Add code to check if an interrupt is supposed to arrive
    before waiting endlessly.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5712f52e8c024c6b7b82ae5c7b5b3d0f3e6f711b
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Fri Jul 29 14:03:35 2005 -0700

    [PATCH] s390: default configuration
    
    Update default configuration of s390.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a502a3593c7aa2aff99a61ed71e7cb828ee4da8b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jul 29 14:03:33 2005 -0700

    [PATCH] uml: fix vsyscall brokenness
    
    The #if/#ifdef cleanup exposed a bug in UML's ELF header processing.  With
    this bug fixed, UML recognizes the vsyscall info coming from the host.  On
    FC4, there is a vsyscall page low in the address space, which UML doesn't
    provide.  This causes an infinite page fault loop and a hang on boot.
    
    This patch works around that by making this look like a no-vsyscall system.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4c5c82024f5f292c0069cf40422b8f3bf5e684e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Jul 29 14:03:33 2005 -0700

    [PATCH] fbdev: Replace memcpy with for-loop when preparing bitmap
    
    Do not use memcpy in fb_pad_aligned_buffer.  It is suboptimal because only
    a few bytes are moved at a time.  Replace with a for-loop.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1afc3f522ed088405fc8932110d338330db82bb
Author: Natalie.Protasevich@unisys.com <Natalie.Protasevich@unisys.com>
Date:   Fri Jul 29 14:03:32 2005 -0700

    [PATCH] x86: avoid wasting IRQs patch update
    
    The patch addresses a problem with ACPI SCI interrupt entry, which gets
    re-used, and the IRQ is assigned to another unrelated device.  The patch
    corrects the code such that SCI IRQ is skipped and duplicate entry is
    avoided.  Second issue came up with VIA chipset, the problem was caused by
    original patch assigning IRQs starting 16 and up.  The VIA chipset uses
    4-bit IRQ register for internal interrupt routing, and therefore cannot
    handle IRQ numbers assigned to its devices.  The patch corrects this
    problem by allowing PCI IRQs below 16.
    
    Signed-off by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80625942094b114d85811e5ff1fbc9e06dabe0ff
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Jul 29 14:03:31 2005 -0700

    [PATCH] vesafb: Fix mtrr bugs
    
    >> vesafb: mode is 800x600x16, linelength=1600, pages=16
    >> vesafb: scrolling: redraw
    >> vesafb: Truecolor: size=0:5:6:5, shift=0:11:5:0
    >> mtrr: type mismatch for fc000000,1000000 old: write-back new: write-
    >> combining
    
    Range is already set to write-back, vesafb attempts to add a write-combining
    mtrr (default for vesafb).
    
    >> mtrr: size and base must be multiples of 4 kiB
    
    This is a bug, vesafb attempts to add a size < PAGE_SIZE triggering
    the messages below.
    
    To eliminate the warning messages, you can add the option mtrr:2 to add a
    write-back mtrr for vesafb.  Or just use nomtrr option.
    
    1. Fix algorithm for finding the best power of 2 size with mtrr_add().
    
    2. Add option to choose the mtrr type by extending the mtrr boot option:
    
       mtrr:n where n
    
            0 = no mtrr (equivalent to using the nomtrr option)
            1 = uncachable
            2 = write back
            3 = write combining (default)
            4 = write through
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 655a0a7799cddf9a469916c07ac22f1106abc2be
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Fri Jul 29 14:03:30 2005 -0700

    [PATCH] serial: add MMIO support to 8250_pnp
    
    Add support for UARTs in MMIO space and clean up a little whitespace.
    
    HP legacy-free ia64 machines need this.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d483f47579461a4715db33c68ef8752e5a97a2d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 29 14:03:29 2005 -0700

    [PATCH] Fix sync_tsc hang
    
    sync_tsc was using smp_call_function to ask the boot processor to report
    it's tsc value.  smp_call_function performs an IPI_send_allbutself which is
    a broadcast ipi.  There is a window during processor startup during which
    the target cpu has started and before it has initialized it's interrupt
    vectors so it can properly process an interrupt.  Receveing an interrupt
    during that window will triple fault the cpu and do other nasty things.
    
    Why cli does not protect us from that is beyond me.
    
    The simple fix is to match ia64 and provide a smp_call_function_single.
    Which avoids the broadcast and is more efficient.
    
    This certainly fixes the problem of getting stuck on boot which was
    very easy to trigger on my SMP Hyperthreaded Xeon, and I think
    it fixes it for the right reasons.
    
    Minor changes by AK
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94d2ac66c12397e2ca7988dbf59f24a966d275cb
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Fri Jul 29 14:03:28 2005 -0700

    [PATCH] mm: Ensure proper alignment for node_remap_start_pfn
    
    While reserving KVA for lmem_maps of node, we have to make sure that
    node_remap_start_pfn[] is aligned to a proper pmd boundary.
    (node_remap_start_pfn[] gets its value from node_end_pfn[])
    
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 590f47a1d945c611530a85057e9ad7a3bbb50578
Merge: a9b2e91... 094ce7f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 29 14:40:08 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq

commit a9b2e9170bdf1dd27ca4aa9a63048065d252d116
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Fri Jul 29 12:18:34 2005 -0700

    [PATCH] USB: hidinput_hid_event() oops fix
    
    It seems that I see a bug in hidinput_hid_event.  The check for NULL can never
    work, becaue &hidinput->input is nonzero at all times.
    
    Cc: <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 498f78e6fcf558d0dec31f5648f43426ae16433f
Author: Dan Streetman <ddstreet@ieee.org>
Date:   Fri Jul 29 12:18:28 2005 -0700

    [PATCH] USB: fix in usb_calc_bus_time
    
    This patch does the same swap, i.e. use the ISO macro if (isoc).
    Additionally, it fixes the return value - the usb_calc_bus_time function
    returns the time in nanoseconds (I didn't notice that before) while the
    HS_USECS and HS_USECS_ISO are microseconds.  This fixes the function to
    return nanoseconds always, and adjusts ehci-q.c (the only high-speed
    caller of the function) to wrap the call in NS_TO_US().
    
    Signed-off-by: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b216df87cb5f3bb7d47a33f1cd955ebc7b84dfd
Author: Conger, Chris A <CHRIS.A.CONGER@saic.com>
Date:   Fri Jul 29 12:18:23 2005 -0700

    [PATCH] USB: fix Bug in usb-skeleton.c
    
    Compare endpoint address to USB_ENDPOINT_DIR_MASK to determine endpoint
    direction...
    
    From: "Conger, Chris A." <CHRIS.A.CONGER@saic.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3eb0c5f4b539873ca88f8597db6a49e83ddfd7e2
Author: Ben Dooks <ben-linux-usb@fluff.org>
Date:   Fri Jul 29 12:18:03 2005 -0700

    [PATCH] USB: add S3C24XX USB Host driver support
    
    USB (OHCI) Host driver for S3C2410/S3C2440 based systems
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f29080976d109b6c08e42be8a1888f338785c502
Author: Mathieu <matt@minas-morgul.org>
Date:   Fri Jul 29 12:17:29 2005 -0700

    [PATCH] USB: drivers/net/usb/zd1201.c: Gigabyte GN-WLBZ201 dongle usbid
    
    Gigabyte GN-WLBZ201 wifi usb dongle works very well, using the zd1201
    driver. the only missing part is that the corresponding usbid is not
    declared. The following patch should fix this.
    
    From: "Mathieu" <matt@minas-morgul.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8753e65e34a7b02f8473e7c6ce1cf7e08db4c6e3
Author: Masahito Omote <omote@utyuuzin.net>
Date:   Fri Jul 29 12:17:25 2005 -0700

    [PATCH] USB: Patch for KYOCERA AH-K3001V support
    
    This patch enables a support of KYOCERA AH-K3001V, one of the most
    popular cell phone in Japan. This device has vendor specific ID but works
    with acm driver by adding USB ID. This device already works on
    FreeBSD and OS X by native USB ACM driver with USB ID added.
    
    This device is probed as NO_UNION_NORMAL not to hang up when probing.
    
    Signed-off-by: Masahito Omote <omote@utyuuzin.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6db592e1624bb7ec62cf56629c9556442169ac5
Author: Michael Hund <mhund@ld-didactic.de>
Date:   Fri Jul 29 12:17:20 2005 -0700

    [PATCH] USB: ldusb fixes
    
    below you will find the forgotten kmalloc check (sorry).
    
    Signed-off-by: Michael Hund <mhund@ld-didactic.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86d30741e480f40676c2173e1153368a4846da48
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jul 29 12:17:16 2005 -0700

    [PATCH] USB: Usbcore: Don't try to delete unregistered interfaces
    
    This patch handles a rarely-encountered failure mode in usbcore.  It's
    legal for device_add to fail (although now it happens even more rarely
    than before since failure to bind a driver is no longer fatal).  So when
    we destroy the interfaces in a configuration, we shouldn't try to delete
    ones which weren't successfully registered.  Also, failure to register an
    interface shouldn't be fatal either -- I think; you may disagree about
    this part of the patch.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a0d73c463765ce34b22ac3924d0661caf2a7539
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 29 12:17:11 2005 -0700

    [PATCH] USB: drivers/usb/net/: remove two unused multicast_filter_limit variables
    
    The only uses of both variables were recently removed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe0410c7f43e133e156e54e3156392e800bedc21
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jul 29 12:16:58 2005 -0700

    [PATCH] USB: usbfs: Don't leak uninitialized data
    
    This patch fixes an information leak in the usbfs snoop facility:
    uninitialized data from __get_free_page can be returned to userspace and
    written to the system log.  It also improves the snoop output by printing
    the wLength value.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 279e1545a1350b9147ae884f848ffc8b7db18967
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Jul 29 12:16:52 2005 -0700

    [PATCH] USB: ftdi_sio: fix a couple of timeouts
    
    ftdi_sio: Fix timeouts in a couple of usb_control_msg() calls due to
    change of units from jiffies to milliseconds in 2.6.12.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ede0ff59fb18787213ed979641624a2f234821
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Jul 29 12:16:41 2005 -0700

    [PATCH] USB: ftdi_sio: Update RTS and DTR simultaneously
    
    ftdi_sio: Update RTS and DTR simultaneously, using a single control URB
    instead of separate control URBs for RTS and DTR.  Reinhard Bergmann
    observed time differences of up to 680 ms with his application on a
    2.4.22 kernel when RTS and DTR were updated using separate control
    URBs, which is unacceptable.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b1513d91e195af46b8e59626f74d3d41a7565af
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Jul 29 12:16:31 2005 -0700

    [PATCH] USB: ftdi_sio: new microHAM and Evolution Robotics devices
    
    The attached patch adds the following new devices to the ftdi_sio driver:
    
    * microHAM USB-Y6 and USB-Y8 devices submitted by Justin Burket (KL1RL).
    * Evolution Robotics ER1 Control Module submitted by Shawn M.  Lavelle.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a46e812620bd7db457ce002544a1a6572c313d8a
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Jul 29 12:16:27 2005 -0700

    [PATCH] PCI: fix up errors after dma bursting patch and CONFIG_PCI=n -- bug?
    
    In the patch from:
    
    http://www.uwsg.iu.edu/hypermail/linux/kernel/0506.3/0985.html
    
    Is the the following line suppose inside the if CONFIG_PCI=n
    
      #define pci_dma_burst_advice(pdev, strat, strategy_parameter) do { } while (0)
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10f4338ca8534823bc6c843edbbe42fd4e73d258
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Fri Jul 29 12:16:22 2005 -0700

    [PATCH] PCI: remove PCI_BRIDGE_CTL_VGA handling from setup-bus.c
    
    The setup-bus code doesn't work correctly for configurations
    with more than one display adapter in the same PCI domain.
    This stuff actually is a leftover of an early 2.4 PCI setup code
    and apparently it stopped working after some "bridge_ctl" changes.
    So the best thing we can do is just to remove it and rely on the fact
    that any firmware *has* to configure VGA port forwarding for the boot
    display device properly.
    
    But then we need to ensure that the bus->bridge_ctl will always
    contain valid information collected at the probe time, therefore
    the following change in pci_scan_bridge() is needed.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 761a3ac08c63718dacde12aaf0ec6d6760e8c2b7
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Fri Jul 29 12:16:17 2005 -0700

    [PATCH] PCI: Adjust PCI rom code to handle more broken ROMs
    
    There are ROMs reporting that their size exceeds their PCI ROM
    resource window. This patch returns the minimum of the resource window
    size or the size in the ROM.  An example of this breakage is the XGI
    Volari Z7.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e96e2f148060330f6178b502574dcb81eb7318bf
Author: Daniele Gaffuri <d.gaffuri@reply.it>
Date:   Fri Jul 29 12:15:46 2005 -0700

    [PATCH] PCI: Hidden SMBus bridge on Toshiba Tecra M2
    
    Patch against 2.6.12 to unhide SMBus on Toshiba Centrino laptops using
    Intel 82855PM chipset.  Tested on Toshiba Tecra M2.
    
    Signed-off-by: Daniele Gaffuri <d.gaffuri@reply.it>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea5860d22b37b47c5023949edad2ec23e75169d1
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Jul 29 12:15:38 2005 -0700

    [PATCH] w1: kconfig/Makefile fix.
    
    This patch was sent first time very long time ago,
    but magically was disapeared, it probably exists
    in your queue, but to be sure, I resend it.
    If can not be applied cleanly after your w1 queue is flushed
    into upstrem tree, just drop it.
    Thanks.
    
    Patch from Michael Farmbauer <michl@baldrian.franken.de>.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d73adc14e239b05a9393c09c067a26a5ba86b6c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 29 12:15:33 2005 -0700

    [PATCH] I2C: 24RF08 corruption prevention (again)
    
    The 24RF08 corruption prevention in the eeprom and max6875 drivers wasn't
    complete. For one thing, the additional quick write should happen as soon
    as possible and unconditionally, while both drivers had error paths before.
    For another, when a given chip is forced, the core does not emit a quick
    write, so a second quick write would cause the corruption rather than
    prevent it.
    
    I plan to move the corruption prevention in the core in the long run, so
    that individual drivers don't have to care anymore. But I need to merge
    i2c_probe and i2c_detect before I do (work in progress).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86749e8512d2c37618dc5814ef41abbf168f291b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 29 12:15:29 2005 -0700

    [PATCH] I2C: missing new lines in i2c-core messages
    
    Two log messages lack their trailing new line in i2c-core. I'd swear I had
    fixed them already, but it seems not. Bonus: improved coding style.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cacdf298211ec9e87354cf102f20d070e76e075
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 29 12:15:12 2005 -0700

    [PATCH] I2C: use time_after in 3 chip drivers
    
    A few i2c drivers were not updated to use time_after() yet.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 368609c5a8bd75b77721e69726ddfd3c6a30f7d4
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 29 12:15:07 2005 -0700

    [PATCH] I2C: Missing space in split strings
    
    A few split string in i2c (and now hwmon) drivers lack a joining space,
    causing them to display incorrectly. This trivial patch fixes that up.
    Please apply, thanks.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d91e16943fdaf02bf3459059abca1032589c0663
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Fri Jul 29 12:15:00 2005 -0700

    [PATCH] I2C: ds1337 - fix 12/24 hour mode bug
    
    DS1339 manual, page 6, chapter Date and time operation:
      The DS1339 can be run in either 12-hour or 24-hour mode. Bit 6 of the
      hours register is defined as the 12-hour or 24-hour mode-select bit.
      When high, the 12-hour mode is selected.
    
    Patch below makes ds1337 driver work as documented in manual.
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb14c3a13cb1e78acf54a9ddc9e5f3e2f023523e
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Jul 29 12:14:40 2005 -0700

    [PATCH] I2C-MPC: Restore code removed
    
    I2C-MPC: Restore code removed
    
    A previous patch to remove support for the OCP device model was way
    to generious and moved some of the platform device model code, oops.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc185d95ecf3ca62fa9afb5214a69b39060ff537
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Jul 29 12:14:34 2005 -0700

    [PATCH] Add the rules about the -stable kernel releases to the Documentation directory
    
    This was the last agreed upon set of rules, it's probably time we actually add
    them to the kernel tree to make them "official".
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3348e05a4f25489908d9f7ed4e80ac291ead18f4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 29 12:14:28 2005 -0700

    [PATCH] DEBUG_FS must depend on SYSFS
    
    CONFIG_DEBUG_FS=y and CONFIG_SYSFS=n results in the following compile
    error:
    
    <--  snip  -->
    
    ...
      LD      vmlinux
    fs/built-in.o: In function `debugfs_init':
    inode.c:(.init.text+0x31be): undefined reference to `kernel_subsys'
    make: *** [vmlinux] Error 1
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ca1eb3282b6050c295adb296761f8d26baf4ca5
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Fri Jul 29 12:14:19 2005 -0700

    [PATCH] sysfs: fix sysfs_setattr
    
    o sysfs_dirent's s_mode field should also be updated in sysfs_setattr(), else
      there could be inconsistency in the two fields. s_mode is used while
      ->readdir so as not to bring in the inode to cache.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc062b1b5c6bef4e3a29c7fda57967251d12beb0
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Fri Jul 29 12:13:35 2005 -0700

    [PATCH] sysfs: fix sysfs_chmod_file
    
    o sysfs_chmod_file() must update the new iattr field in sysfs_dirent else
      the mode change will not be persistent in case of inode evacuation from
      cache.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30d07a22a19329c89628a2057b0120245c482c9e
Author: Daniel Walker <dwalker@mvista.com>
Date:   Fri Jul 29 12:14:07 2005 -0700

    [PATCH] stable_api_nonsense.txt fixes
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bf2755664bfe03a414e7ec02d9f16a3d5beb60d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 29 13:25:28 2005 -0600

    [PATCH] x86_64 machine_kexec: Use standard pagetable helpers
    
    Use the standard hardware page table manipulation macros.
    This is possible now that linux works with all 4 levels
    of the page tables.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b6b2f08c24a65535cb18893ca27516389c5fc0f
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Fri Jul 29 16:00:13 2005 -0400

    [ACPI] Fix memset arguments in acpi processor_idle.c
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4954
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 094ce7fde493a1196b8152f9f9e73c20e24a2b05
Author: Dave Jones <davej@redhat.com>
Date:   Fri Jul 29 12:55:40 2005 -0700

    arch/i386/kernel/cpu/cpufreq/powernow-k8.c: In function `powernow_k8_cpu_init_acpi':
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:740: warning: unused variable `vid'
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:739: warning: unused variable `fid'
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:743: warning: unused variable `vid'
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:742: warning: unused variable `fid'
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:746: `fid' undeclared (first use in this function)
    arch/i386/kernel/cpu/cpufreq/powernow-k8.c:746: `vid' undeclared (first use in this function)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 4a7164023959040e687e51663dee67cff4d2b770
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Fri Jul 29 15:51:36 2005 -0400

    [ACPI] Fix the regression with c1_default_handler on some systems
    where C-states come from FADT.
    
    Thanks to Kevin Radloff for identifying the issue and
    isolating it to exact line of code that is causing the issue.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 36c4fd23cc06f81d68ee968c4c1bf1cebb3dcea5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 29 13:02:09 2005 -0600

    [PATCH] x86_64 machine_kexec: Cleanup inline assembly.
    
    In an uncensored copy of code from i386 to x86_64 I wound up
    with inline assembly with the wrong constraints.  Use input
    constraints instead of output constraints.
    
    So I know the assembler will do the right thing specify the size
    of the operand lidtq and lgdtq instead of just lidt and lgdt.
    
    Make load_segments use an input constraint, and delete the macro fun.
    Without having to reload %cs like I do on i386 this code is noticeably
    simpler.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7b47ccaf655cbaf336745a9b65cf7b22a536fca
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 29 13:01:18 2005 -0600

    [PATCH] i386 machine_kexec: Cleanup inline assembly
    
    For some reason I was telling my inline assembly that the
    input argument was an output argument.
    
    Playing in the trampoline code I have seen a couple of
    instances where lgdt get the wrong size (because the
    trampolines run in 16bit mode) so use lgdtl and lidtl to
    be explicit.
    
    Additionally gcc-3.3 and gcc-3.4 want's an lvalue for a
    memory argument and it doesn't think an array of characters
    is an lvalue so use a packed structure instead.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1108bae41e2ac596f46bc4cd8876b93063203d2b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 29 12:50:57 2005 -0600

    [PATCH] reboot: remove device_suspend(PMSG_FREEZE) from kernel_kexec
    
    If device_suspend(PMSG_FREEZE) is not ready to be called in
    kernel_restart it is definitely not ready to be called in the even more
    fickle kernel_kexec.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bcad935a3bb149833bf249e6b159f22a90d6218
Author: Dave Jones <davej@redhat.com>
Date:   Fri Jul 29 09:56:41 2005 -0700

    Fix up powernow-k8 compile. (Missing definitions).
    
    From: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit d6d2a2ab05da6e44bd127fe375078bb7c36a0ad0
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Jul 29 11:01:22 2005 -0400

    x86: fix new find_first_bit()
    
    Some edge problems with the original C rewrite.
    
    Thanks go to Cal Peake, who pinpointed the breakage to the rewrite, and
    tested this fixed version.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33ac02aa4cef417871e128ab4a6565e751e5f3b2
Merge: e0d7ff1... 2bcad93...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 29 10:16:25 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq

commit e0d7ff168a71299919f01500b3d507aae0c67513
Merge: ca49a60... 33fdfa9...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 29 09:48:34 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dtor/input

commit ca49a601c2b4b74e5cf57fef62122204d1982372
Merge: 5a90fa7... 7ac5ae4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 29 09:47:08 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm-smp

commit 5a90fa71f6d45054c78b2bd6dbc4feba1638e1d2
Merge: dddf8f9... 7b6dbd6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 29 09:04:47 2005 -0700

    Merge head 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 7ac5ae4b122f9415948c642b945a26938aa8f347
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jul 29 16:36:48 2005 +0100

    [ARM SMP] Ensure secondary CPUs see their pen release
    
    Since the secondary CPUs will not be operating in symetric mode
    while they are held in the pen, we need to ensure that the write
    to pen_release is visible to them, by flushing the cache.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dddf8f9e4b1af852bcd735d5f737c0d0e2ce6e76
Merge: 911656f... 6192b54...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 28 22:12:57 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 911656f8a630e36b22c7e2bba3317dec9174209c
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Thu Jul 28 21:16:21 2005 -0700

    [PATCH] selinux: Fix address length checks in connect hook
    
    This patch fixes the address length checks in the selinux_socket_connect
    hook to be no more restrictive than the underlying ipv4 and ipv6 code;
    otherwise, this hook can reject valid connect calls.  This patch is in
    response to a bug report where an application was calling connect on an
    INET6 socket with an address that didn't include the optional scope id and
    failing due to these checks.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0b9d796002d9d39575cf1beabfb625f68b507fa
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Thu Jul 28 21:16:19 2005 -0700

    [PATCH] fbdev: colormap fixes fix
    
    Fix a buffer overflow vunerabilty in previous cmap patch
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1474e2d9dfb782e6c6517a180b5a8913c69dfad
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jul 28 21:16:18 2005 -0700

    [PATCH] re-disable TSC on NUMAQ
    
    Somewhere recently, the TSC got re-enabled for timekeeping on NUMAQ
    machines.  However, the hardware makes these get unsynchronized quite
    badly.  So badly, in fact, that the code to fix up the skew can just hang
    on boot.
    
    This patch re-disables them.  It's nicely confined to the numaq.c file.  It
    would be great if this could make it into 2.6.13, I think it counts as a
    bugfix.
    
    Tested on a 16-proc 4-node NUMAQ.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78fa74a23b16bdb0d944272b696915c4e0bb3ee1
Author: George Anzinger <george@mvista.com>
Date:   Thu Jul 28 21:16:16 2005 -0700

    [PATCH] posix timers: fix normalization problem
    
    (We found this (after a customer complained) and it is in the kernel.org
    kernel.  Seems that for CLOCK_MONOTONIC absolute timers and clock_nanosleep
    calls both the request time and wall_to_monotonic are subtracted prior to
    the normalize resulting in an overflow in the existing normalize test.
    This causes the result to be shifted ~4 seconds ahead instead of ~2 seconds
    back in time.)
    
    The normalize code in posix-timers.c fails when the tv_nsec member is ~1.2
    seconds negative.  This can happen on absolute timers (and
    clock_nanosleeps) requested on CLOCK_MONOTONIC (both the request time and
    wall_to_monotonic are subtracted resulting in the possibility of a number
    close to -2 seconds.)
    
    This fix uses the set_normalized_timespec() (which does not have an
    overflow problem) to fix the problem and as a side effect makes the code
    cleaner.
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2d76bd8fa29f9b6dbf3ee8f6bc7bdda21bc5ce8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 28 21:16:15 2005 -0700

    [PATCH] uml: implement hostfs syncing
    
    Actually implement the hostfs "sync" method.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30f417c65e151dc96998a8ef721149a43998bc65
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Thu Jul 28 21:16:12 2005 -0700

    [PATCH] uml: Clean up prink calls
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 201134ca168c27c1f895ecfd74f9ebf1129483d0
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu Jul 28 21:16:11 2005 -0700

    [PATCH] uml: Fix typo
    
    Fix a typo in wait_stub_done.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e1f49da6881bbf938e502d99335ad5488eb93b4
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 28 21:16:09 2005 -0700

    [PATCH] uml: Fix load average >=1
    
    update_process_times was missing its irq_enter/irq_exit wrapper.  This caused
    ksoftirqd to be scheduled on every clock tick.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9b7cc84afc7f4ebcef27691279d557e13128818
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 28 21:16:08 2005 -0700

    [PATCH] uml: Fix redundant assignment
    
    By this point, .is_user has already been set, so this assignment is useless.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9057e9deee648cb2824d83b9eb7058edb5442a21
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu Jul 28 21:16:06 2005 -0700

    [PATCH] uml: Fix skas0 stub return
    
    It's wrong to pop a fixed number of words from stack before calling sigreturn,
    as the number depends on what code is generated by the compiler for the start
    of stub_segv_handler().  What we need is esp containing the address of
    sigcontext.  So we explicitly load that pointer into esp.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f313b12335abf010802751c45249e7a0007a232
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 28 21:16:05 2005 -0700

    [PATCH] uml: vm86 compile fix
    
    We added an include of asm/vm86.h in include/asm-i386/ptrace.h.  Since UML
    includes the underlying arch's ptrace.h, it needs an asm/vm86.h in order to
    build.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8afe07ce0003d4c63b7d76b6f28264503cb80d71
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 28 21:16:03 2005 -0700

    [PATCH] uml: avoid unnecessary pcap rebuild
    
    Just a Kbuild subtlety, not listing a target file inside targets causes it
    to be rebuilt each time, and as a consequence everything depending on it is
    rebuilt.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b85e9680a33ae2df04bd493f220a76dcf183ce80
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 28 21:16:01 2005 -0700

    [PATCH] uml: fix TT mode by reverting "use fork instead of clone"
    
    With Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Revert the following patch, because of miscompilation problems in different
    environments leading to UML not working *at all* in TT mode; it was merged
    lately in 2.6 development cycle, a little after being written, and has
    caused problems to lots of people; I know it's a bit too long, but it
    shouldn't have been merged in first place, so I still apply for inclusion
    in the -stable tree.  Anyone using this feature currently is either using
    some older kernel (some reports even used 2.6.12-rc4-mm2) or using this
    patch, as included in my -bs patchset.
    
    For now there's not yet a fix for this patch, so for now the best thing is
    to drop it (which was widely reported to give a working kernel, and as such
    was even merged in -stable tree).
    
    "Convert the boot-time host ptrace testing from clone to fork.  They were
    essentially doing fork anyway.  This cleans up the code a bit, and makes
    valgrind a bit happier about grinding it."
    
    URL:
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=98fdffccea6cc3fe9dba32c0fcc310bcb5d71529
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ca3310e78912a527d7d2c62c01da7cbf7346b8d
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Jul 28 21:16:00 2005 -0700

    [PATCH] device-mapper: fix md->lock deadlocks in core
    
    This patch is an attempt to fix deadlocks discovered in the core dm.
    
    The problems boil down to md->lock having to be held in too many places, so
    I've split it into two: md->suspend_lock and md->io_lock.
    
    suspend_lock is now held throughout dm_suspended() as well as dm_resume()
    and dm_swap_table() so that these functions cannot run concurrently:
    there's no requirement for that and it added complexity.
    
    DMF_FS_LOCKED becomes redundant: DMF_SUSPENDED provides adequate
    protection.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e90188be4a56f37fbb4ffb5b58745683526dcb9
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Jul 28 21:15:59 2005 -0700

    [PATCH] device-mapper: fix deadlocks in core
    
    Avoid another bdget_disk which can deadlock.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf222b3769c3759488579441ab724ed33a2da5f4
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Jul 28 21:15:57 2005 -0700

    [PATCH] device-mapper: fix deadlocks in core (prep)
    
    Some code tidy-ups in preparation for the next patches.  Change
    dm_table_pre/postsuspend_targets to accept NULL.  Use dm_suspended()
    throughout.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c56ac3f3b12936b03d2626c7572fed5977af515
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Thu Jul 28 21:15:55 2005 -0700

    [PATCH] x86_64: fix cpu_to_node setup for sparse apic_ids
    
    While booting with SMT disabled in bios, when using acpi srat to setup
    cpu_to_node[], sparse apic_ids create problems.
    
    Without this patch, intel x86_64 boxes with hyperthreading disabled in the
    bios (and which rely on srat for numa setup) endup having incorrect values in
    cpu_to_node[] arrays, causing sched domains to be built incorrectly etc.
    
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a7b90137d9f05390cf953d756e1edda2ca88053
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:54 2005 -0700

    [PATCH] x86_64: Remove unused variable in k8-bus.c
    
    arch/x86_64/pci/k8-bus.c: In function `fill_mp_bus_to_cpumask':
    arch/x86_64/pci/k8-bus.c:32: warning: unused variable `printed'
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef6e525393dbbab7e1dc42594d35a1dfd688d1d7
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Jul 28 21:15:53 2005 -0700

    [PATCH] x86_64: Use msleep in smpboot.c
    
    Replace schedule_timeout() with msleep() to guarantee the task delays as
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d224d32c28c165f7100a670d61d64dd15d49a1e
Author: Jesse Millan <jessem@cs.pdx.edu>
Date:   Thu Jul 28 21:15:51 2005 -0700

    [PATCH] x86_64: Fix gcc 4 warning in sched_find_first_bit
    
    This patch eliminates the GCC4 warning on the x86_64 platform:
    
    kernel/sched.c:1824: warning: control may reach end of non-void function
    'sched_find_first_bit' being inlined.
    
    The change follows the lead of others, i.e.  it is guaranteed that at least
    one of b[0], b[1], or b[2] will have a bit set and evaluate to true.  That
    being said, GCC4.0.0 notices that the code flow does not return anything if
    b[0], b[1] and b[2] are not true.  Since we know better, if it's not b[0] or
    b[1], it has to be b[2].
    
    Signed-off-by: Jesse Millan <jessem@cs.pdx.edu>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07291d431ce6c6660c35dd4e5e980a406dc3629a
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:50 2005 -0700

    [PATCH] x86_64: Fix SRAT handling on non dual core systems
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed6b676ca8b50e0b538e61c283d52fd04f007abf
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:49 2005 -0700

    [PATCH] x86_64: Switch to the interrupt stack when running a softirq in local_bh_enable()
    
    This avoids some potential stack overflows with very deep softirq callchains.
    i386 does this too.
    
    TOADD CFI annotation
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3829ee6b1be03d5aa3005fe7d19f30088b539836
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:48 2005 -0700

    [PATCH] x86_64: Small assembly improvements
    
    Save a byte here and there.  Ultimatively useless, but these things always
    catch my eyes when reading the code so just fix them for now.
    
    Also I got at least one patch fixing of them already, which gives a good
    excuse.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ba80e7595f3e308e5e7135445b513779fc0ba3b
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:47 2005 -0700

    [PATCH] x86_64: Remove unnecessary include in fault.c
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2cac78935ff1705e1eb53be28da704d3482b4f5
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:46 2005 -0700

    [PATCH] x86_64: When running cpuid4 need to run on the correct CPU
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6a68a16dc15c65fe76acb7502a806ae415cd3e4
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:45 2005 -0700

    [PATCH] x86_64: Turn BUG data into valid instruction
    
    This avoids confusing the disassembler. Costs 2 bytes per BUG.
    
    Thanks to Suresh Siddha and Jan Beulich for suggesting suitable instructions.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2275cfa8bcb833cdac7dcc616d11306ca35eec58
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Thu Jul 28 21:15:44 2005 -0700

    [PATCH] x86_64: Icecream has no way of detecting assembler-level includes
    
    Icecream preprocesses c sources locally, and sends the result off to a remote
    host for compiling.  It does not recognize includes at assembler level.  The
    fix is to put the assemberincludes an a separate .s file, which will always be
    assembled locally.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8d311939f9d2b2a5e935df8dceb98b7cbe08d43
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:42 2005 -0700

    [PATCH] x86_64: Support more than 8 cores on AMD systems
    
    Use physical mode instead of logical mode to address more CPUs.  This is also
    used in the CPU hotplug case to avoid a race.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37a47e65fa58d413a31f27ee88f6cb98583b6157
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:41 2005 -0700

    [PATCH] x86_64: Remove the broadcast options that were added for cpuhotplug
    
    Will be obsolete with physflat.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f68c1388ada34998c2902c289c6a6b625a73c4e
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:41 2005 -0700

    [PATCH] x86_64: Remove IA32_* build tools in Makefile
    
    Not used anymore since quite some time. Just uses -m32 instead.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91c6d400940e97f2809c04fcf383517f7650dbd4
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:39 2005 -0700

    [PATCH] x86_64: Create per CPU machine check sysfs directories
    
    This patch will create machinecheck sysdev directories per CPU.  All of the
    cpus still share the same ctl banks.  When compiled with CONFIG_HOTPLUG_CPU,
    it will also bring up/down sysdev directories as cpus go up/down.  I have
    tested the patch along with CONFIG_HOTPLUG_CPU option on in 2.6.13-rc1 kernel.
    
    Minor changes by AK: remove useless unload function
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69cb62eb6dceb0da701e04395d3b412a0648c118
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:39 2005 -0700

    [PATCH] x86_64: Print a boot message for hotplug memory zones
    
    From: Keith Manning
    
    Print a boot message for hotplug memory zones
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b684664fd495fd640353c0f786751763db77dcfb
Author: Keith Mannthey <kmannth@us.ibm.com>
Date:   Thu Jul 28 21:15:38 2005 -0700

    [PATCH] x86_64: Fix overflow in NUMA hash function setup
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17158d17aa726142255050b407ad701a6f191aba
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:37 2005 -0700

    [PATCH] x86_64: Fix incorrectly defined MSR_K8_SYSCFG
    
    Harmless because the kernel didn't use it.  Noticed by Travis Betak
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca4e6b740206fc943cc1c90fd434d4d389da8f2b
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:36 2005 -0700

    [PATCH] x86_64: Fix some typos in system.h comments
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6391ad0aa487e7b13588b1439d2462a320b07d0d
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:35 2005 -0700

    [PATCH] x86_64: Remove obsolete eat_key prototype
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d970a5218088a856d80acd9da6c6742f55cb0a0d
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:35 2005 -0700

    [PATCH] x86_64: Fix some comments in tlbflush.h
    
    Were either outdated or misleading.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef4d7cbea773a77b36e732779cab4018ba2c037b
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:34 2005 -0700

    [PATCH] x86_64: Some updates for boot-options.txt
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a54649b801e5fe69755dc55e6589f7a65af25d79
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:32 2005 -0700

    [PATCH] x86_64: Improve CONFIG_GART_IOMMU description and make it default y
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c853cc7e7940a2d6ad66cfe666192516fc06b0e3
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:31 2005 -0700

    [PATCH] x86_64: Remove unused variable in delay.c
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a940199f206dcf51c65fae27e2ce412f2c5a2b22
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:30 2005 -0700

    [PATCH] x86_64: Some cleanup in setup64.c
    
    Minor cleanup.
    
    Move things into their include files, remove obsolete includes, fix
    indentation, remove obsolete special cases etc.
    
    I also added the per cpu section to asm-generic/sections.h and fixed
    init/main.c to use it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de04f3220b9789cc40fd6b1d151dfa0a7e3b03b9
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:29 2005 -0700

    [PATCH] x86_64: Clarify Booting processor ... message
    
    No need to print kernel addresses there and clarify what the APIC-ID is.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3019e8ebe6281843488250ee3a539106806da93a
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:28 2005 -0700

    [PATCH] x86_64: Minor clean up to CPU setup - use smp_processor_id instead of custom hack
    
    Does not change any semantics because numa_add_cpu checks for CPU 0 anyways.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61b1b2d0239da82c0bed8adaa1d070c6551d4afd
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:27 2005 -0700

    [PATCH] x86_64: Move cpu_present/possible_map parsing earlier
    
    Various code needs this information now before the actual SMP bootup.  Instead
    of computing it on the fly while booting the other CPUs set it up now while
    initial MPtable/MADT parsing.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b943fbfaf0dbdd3cd9ff2dda100f0b8c47a7d8c
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:26 2005 -0700

    [PATCH] x86_64: i386/x86_64: remove prototypes for not existing functions in smp.h
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f0629397cb435e144ff47c48f3bc39e879f196
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:25 2005 -0700

    [PATCH] x86_64: Use for_each_cpu_mask for clustered IPI flush
    
    Makes it slightly more efficient.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acc7b6f01c3d387faa34233a25949eaaf18e0753
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:23 2005 -0700

    [PATCH] x86_64: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5df3574ec0eac0eb8d758e8e9b1ad95d909a9e1f
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 28 21:15:22 2005 -0700

    [PATCH] x86_64: Always ack IPIs even on errors
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a16a3007d5b5896ff62d149bb4dca1a29fd78c4
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu Jul 28 21:15:20 2005 -0700

    [PATCH] x86_64: cpu hotplug changes kills nmi watchdog
    
    When the x86_64 cpu hotplug changes went in it added a check in
    default_do_nmi() which kills NMI delivery on any CPU but the BSP.
    
    The NMI watchdog is brought up quite some time before the online bit is set
    in num_online_cpus so this won't work very well.  The nmi watchdogs on cpus
    that are not BSP will never be reprogrammed and no NMIs.
    
    Why was this check added? How does an offlined cpu receive an NMI?
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Andrew Morton <akpm@osdl.org>
    Cc: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Cc: <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63953523341bcafe5928bf6e99bffd7db94b471e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 28 15:44:44 2005 -0700

    Linux 2.6.13-rc4

commit bafd2df5d0049bccc74947fece37963e3f68fadc
Author: Joachim Nilsson <joachim.nilsson@vmlinux.org>
Date:   Fri Jul 29 00:18:03 2005 +0200

    [PATCH] fix gconfig crash
    
    I ran glade-2 on the glade file, fixed two missing stock icons and
    cleaned up the C code that inserts the single/split/full modes. The
    rest of the patch is minor cleanups only. I refrained from using all
    the included xpm icons in images.c (like qconf.cc does) in favour of
    using the stock Gtk+ icons instead. Oh, yes there was a "back" bug
    in split mode that I also removed, oh well...
    
    It has been tested with success by several people, including
    Jesper Juhl, Randy Dunlap and myself.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dca0f7bf82face7b700890318d5550fd542cabf
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Thu Jul 28 13:17:26 2005 -0700

    [PATCH] [IPoIB] Handle sending of unicast RARP responses
    
    RARP replies are another valid case where IPoIB may need to send a
    unicast packet with no neighbour structure.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4e38d36d88ead4e56f3155573976da84d5df18b3
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Jul 28 13:16:30 2005 -0700

    [PATCH] [IB/cm]: Correct CM port redirect reject codes
    
    Reject code 24 is port and CM redirection, not just port redirection.
    Port redirection alone is code 25.
    
    Therefore we should rename code 24 to IB_CM_REJ_PORT_CM_REDIRECT and
    use IB_CM_REJ_PORT_REDIRECT for code 25.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 7b6dbd6872ca1d0c03dc0e0a7108d79c8dafa793
Author: Greg Felix <gregfelixlkml@gmail.com>
Date:   Thu Jul 28 15:54:15 2005 -0400

    libata: Check PCI sub-class code before disabling AHCI
    
    This patch adds functionality to check the PCI sub-class code of an
    AHCI capable device before disabling AHCI.  It fixes a bug where an
    ICH7 sata controller is being setup by the BIOS as sub-class 1 (ide)
    and the AHCI control registers weren't being initialized, thus causing
    an IO error in piix_disable_ahci().
    
    Signed-off-by: Gregory Felix <greg.felix@gmail.com>

commit e7ec02938dbe8ca35b750f29eaa4b12de0b52754
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jul 28 20:36:26 2005 +0100

    [ARM SMP] Fix another ARMv6 bitop problem
    
    We sometimes forgot to check whether the exclusive store succeeded.
    Ensure that we always check.  Also ensure that we always use the
    out of line versions, since the inline versions are not SMP safe.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 505d7b193181be029f4f9aea59e6bdbfdd1e9e76
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jul 28 20:32:47 2005 +0100

    [ARM SMP] Ensure secondary CPUs have a clean TLB
    
    Since ARMv6 CPUs will not flush the TLB on context switches, it is
    possible that we may end up with some global TLB entries remaining
    present, eventually upsetting userspace.  Explicitly flush the
    entire TLB on secondary CPUs as they startup, after we have switched
    to the init_mm page tables.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6192b54b845ed05cb838f86ca588cc625c703a09
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jul 28 12:12:58 2005 -0700

    [NET]: Fix busy waiting in dev_close().
    
    If the current task has signal_pending(), the loop we have
    to wait for the __LINK_STATE_RX_SCHED bit to clear becomes
    a pure busy-loop.
    
    Fixed by using msleep() instead of the hand-crafted version.
    
    Noticed by Andrew Morton.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ac6608c41f8c45371ea9dddae7f99bc2c15d5cf
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 28 10:34:47 2005 -0700

    Revert broken "statement with no effect" warning fix
    
    It may shut up gcc, but it also incorrectly changes the semantics of the
    smp_call_function() helpers.
    
    You can fix the warning other ways if you are interested (create another
    inline function that takes no arguments and returns zero), but
    preferably gcc just shouldn't complain about unused return values from
    statement expressions in the first place.

commit 7153d9612fe5cefc29f9f17d7a6b9f0dcd07b20e
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 28 09:45:10 2005 -0700

    powernow-k8.c: In function `query_current_values_with_pending_wait':
    powernow-k8.c:110: warning: `hi' may be used uninitialized in this function
    
    Signed-off-by: Brian Gerst <bgerst@didntduck.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit cc993cab0239cb07af329d2e18faac7888821075
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 28 09:43:56 2005 -0700

    Here are two possible cleanups in cpufreq.c:
    * ret has no need to be unsigned in cpufreq_driver_target()
    * ret has no need to be initialized in __cpufreq_governor()
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 841e40b380a70933e8dc1184e0f9ba1c6cac48af
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 28 09:40:04 2005 -0700

    Opteron revision F will support higher frequencies than
    can be encoded in the current driver's 4 bit frequency
    field.  This patch updates the driver to support Rev F
    including 6 bit FIDs and processor ID updates.
    
    This should apply cleanly whether or not the dual-core
    bugfix I sent out last week is applied.  I'd prefer
    that both get applied, of course.
    
    Signed-off-by: David Keck <david.keck@amd.com>
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 03938c3f1062b0f279a0ef937a471d4db83702ed
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 28 09:38:21 2005 -0700

    powernow-k8 requires that a data structure for
    each core be created in the _cpu_init function
    call.  The cpufreq infrastructure doesn't call
    _cpu_init for the second core in each processor.
    Some systems crashed when _get was called with
    an odd-numbered core because it tried to
    dereference a NULL pointer since the data
    structure had not been created.
    
    The attached patch solves the problem by
    initializing data structures for all shared
    cores in the _cpu_init function.  It should
    apply to 2.6.12-rc6 and has been tested by
    AMD and Sun.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7b70888a192eff457c2ca0a4ffa04815f5e19734
Merge: cd85c8b... 0a97af4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 28 08:41:58 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa

commit cd85c8b4457a52d3545fdb9532082b2c1ebd5f21
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Thu Jul 28 08:45:06 2005 -0400

    [PATCH] speed up on find_first_bit for i386 (let compiler do the work)
    
    Avoid using "rep scas", just let the compiler select a sequence of
    regular instructions.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79a8810221ee9ea96c4e5a5817afb88f22ea698c
Author: Richard Henderson <rth@twiddle.net>
Date:   Thu Jul 28 01:07:41 2005 -0700

    [PATCH] alpha: fix "statement with no effect" warnings
    
    Apparently gcc 4.0 complains about "({ 0; });", which leads to -Werror
    breakage in one of the alpha oprofile modules.
    
    One might could argue that this is a gcc bug, in that statement-expressions
    should be considered to be function-like rather than statement-like for the
    purposes of this warning.  But it's just as easy to use an inline function
    in the first place, side-stepping the issue.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11be00cba6be114f861123cfc6779f195a615d22
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jul 28 01:07:39 2005 -0700

    [PATCH] PCDP: if PCDP contains parity information, use it
    
    If the PCDP supplies parity, use it (only none/even/odd supported), and
    don't append parity/stop bit arguments unless baud is present.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b378def5a386c4a7f15b51ed79802badb9f5a70
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Jul 28 01:07:38 2005 -0700

    [PATCH] e1000: no need for reboot notifier
    
    sys_reboot() now calls device_suspend(), so it is no longer necessary for
    the e1000 driver to register a reboot notifier [in fact doing so results in
    e1000_suspend() getting called twice].
    
    (akpm: we need to fast-track this.  It's causing ia64 to oops on shutdown)
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>
    Cc: <cramerj@intel.com>
    Cc: <john.ronciak@intel.com>
    Cc: <ganesh.venkatesan@intel.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5c1d5b2aaf9a98f15a6dcdfbba1f494d0aaae52
Author: James Morris <jmorris@redhat.com>
Date:   Thu Jul 28 01:07:37 2005 -0700

    [PATCH] SELinux: default labeling of MLS field
    
    Implement kernel labeling of the MLS (multilevel security) field of
    security contexts for files which have no existing MLS field.  This is to
    enable upgrades of a system from non-MLS to MLS without performing a full
    filesystem relabel including all of the mountpoints, which would be quite
    painful for users.
    
    With this patch, with MLS enabled, if a file has no MLS field, the kernel
    internally adds an MLS field to the in-core inode (but not to the on-disk
    file).  This MLS field added is the default for the superblock, allowing
    per-mountpoint control over the values via fixed policy or mount options.
    
    This patch has been tested by enabling MLS without relabeling its
    filesystem, and seems to be working correctly.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1699f508ab5098de4b258268fa8913db38d9d35
Author: Ian Campbell <ijc@hellion.org.uk>
Date:   Thu Jul 28 01:07:34 2005 -0700

    [PATCH] cs89x0: collect tx_bytes statistics
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac12259f2984d96454affc147f9d63f2ac2ac1f8
Author: Giancarlo Formicuccia <giancarlo.formicuccia@gmail.com>
Date:   Thu Jul 28 01:07:33 2005 -0700

    [PATCH] Fix incorrect Asus k7m irq router detection
    
    This patch:
    http://marc.theaimsgroup.com/?l=bk-commits-head&m=111955644929114&w=2
    uncovered a k7m bios bug, where the VT82C686A router is reported as
    being "586-compatible". The two chips have different pirq mapping, so
    this leads to "irq routing conflict" on many pci devices.
    
    The suggested fix was discussed with Aleksey Gorelov, who helped me
    to identify the problem as a probable bios bug.
    
    Signed-off-by: Giancarlo Formicuccia <giancarlo.formicuccia@gmail.com>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad2b93123d2b3cb4ba9a98dd5f62acb6d6b50391
Author: Mike Miller <mike.miller@hp.com>
Date:   Thu Jul 28 01:07:31 2005 -0700

    [PATCH] cciss per disk queue
    
    This patch adds per disk queue functionality to cciss.  Sometime back I
    submitted a patch but it looks like only part of what I needed.  In the 2.6
    kernel if we have more than one logical volume the driver will Oops during
    rmmod.  It seems all of the queues actually point back to the same queue.
    So after deleting the first volume you hit a null pointer on the second
    one.
    
    This has been tested in our labs.  There is no difference in performance,
    it just fixes the Oops.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eaaf9c68e75edf0fa51c5770eb68c2a6cb5ff66b
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Jul 28 01:07:30 2005 -0700

    [PATCH] pcmcia: disable read prefetch/write burst on old O2Micro bridges
    
    Older O2Micro bridges have problems with both read prefetch and write burst
    depending on the combination of the chipset, bridge, cardbus card.  safest is
    to disable read prefetch and write burst on those old bridges.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8c4b4195c7d664baf296818bf756775149232d3
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Jul 28 01:07:28 2005 -0700

    [PATCH] yenta: free_irq() on suspend.
    
    Resume doesn't seem to work without.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1b274fbe3f00469fb8a68806469ec7746c7f648
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 28 01:07:27 2005 -0700

    [PATCH] pcmcia: fix sharing IRQs and request_irq without IRQ_HANDLE_PRESENT
    
    Debugging and description from: Noah Misch <noah@cs.caltech.edu>
    
    When a driver calls pcmcia_request_irq with IRQ_HANDLE_PRESENT unset, it looks
    for an open IRQ by request_irq()ing with a dummy handler and NULL dev_info.
    free_irq uses dev_info as a key for identifying the handler to free among
    those sharing an IRQ, so request_irq returns -EINVAL if dev_info is NULL and
    the IRQ may be shared.  That unknown error code is the -EINVAL.
    
    It looks like only pcnet_cs and axnet_cs are affected.  Most other drivers let
    pcmcia_request_irq install their interrupt handlers.  sym53c500_cs requests
    its IRQ manually, but it cannot share an IRQ.
    
    The appended patch changes pcmcia_request_irq to pass an arbitrary, unique,
    non-NULL dev_info with the dummy handler.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 661d04c6f08c16ae63fb3be05d59ee99c6f3de52
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 28 01:07:26 2005 -0700

    [PATCH] pcmcia: update documentation
    
    Update the PCMCIA documentation to reflect some more, though older, changes.
    Parts extracted from an e-mail from Randy Dunlap with his consent.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d277ad0eaa056c632707271192ec5896548f15d6
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Thu Jul 28 01:07:24 2005 -0700

    [PATCH] pcmcia: fix many device IDs
    
    If the product-id-string contains the '+' , '&' ,'_', it was not converted
    properly from the /etc/pcmcia/config(pcmcia-cs config file).
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e5a3e79091615c5eae871ad9e794ed48753ae05
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 28 01:07:23 2005 -0700

    [PATCH] pcmcia: avoid duble iounmap of one address
    
    Avoid double iounmap of one address, and disable cis_virt if set_mem_map
    failed.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc33a4a36cad02b939b9a4fb2f15ade17d61cdaf
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 28 01:07:22 2005 -0700

    [PATCH] pcmcia: update au1000 to work with recent changes
    
    Get the au1000 PCMCIA socket drivers to work.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2e0743a515c3317b0f9c93fb1c5e082c87474a2
Author: Jar <jar@pcuf.fi>
Date:   Thu Jul 28 01:07:21 2005 -0700

    [PATCH] pcmcia: remove duplicates in orinoco_cs
    
    Remove duplicates from the device id table.
    
    Signed-off-by: Jarkko Raja <jar@pcuf.fi>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba5bb6b58490693fb9b5de3ffee48c6dc9ae0d6c
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Jul 28 01:07:20 2005 -0700

    [PATCH] pcmcia: fix comment
    
    There are two problems with the message about missing callback functions: it's
    not written in correct English and it lacks newline at the end.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 698e22c4bf7dad25d63f5c2ec6ca07047579c434
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Jul 28 01:07:19 2005 -0700

    [PATCH] pcmcia: ide-cs id_table update
    
    SanDisk ConnectPlus has two functions.  Function 0 is prism2 card, currently
    only supported by HostAP (not in the kernel).  Function 1 is 128M flash,
    supported by ide-cs.  This patch adds an entry for function 1 to ide-cs.c.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5453be48e8def75a9c1b2177b82fa0e692c6e3a
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 28 01:07:18 2005 -0700

    [PATCH] bio_clone fix
    
    Fix bug introduced in 2.6.11-rc2: when we clone a BIO we need to copy over the
    current index into it as well.
    
    It corrupts data with some MD setups.
    
    See http://bugzilla.kernel.org/show_bug.cgi?id=4946
    
    Huuuuuuuuge thanks to Matthew Stapleton <matthew4196@gmail.com> for doggedly
    chasing this one down.
    
    Acked-by: Jens Axboe <axboe@suse.de>
    Cc: <linux-raid@vger.kernel.org>
    Cc: <dm-devel@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da28c12089dfcfb8695b6b555cdb8e03dda2b690
Merge: 6de7dc2... 577a4f81...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jul 28 09:03:36 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    /home/shaggy/git/linus-clean/
    /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 0a97af41b0e77f834acc0870155de616a373e899
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jul 28 15:50:42 2005 +0200

    [ALSA] version 1.0.9b

commit da8ea98b21236f29a5df723e3cc5abdc6530c07c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jul 28 15:22:55 2005 +0200

    [ALSA] wavefront - declare initialization data as static
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 69c3e5f8562c7854d9dd8d7820a89286f9440e41
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jul 27 17:30:14 2005 +0200

    [ALSA] via82xx - Fix dxs_support of twinhead laptop
    
    VIA82xx driver
    Changed the dxs_support value of twinhead laptop to DXS_SRC.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit eeacb5457cf5f0802fb29f385befa0b1d166cadb
Author: Sergey Ulanov <Sergey.Ulanov@asplinux.ru>
Date:   Wed Jul 27 17:28:58 2005 +0200

    [ALSA] Jack Sense support for AD1980 and AD1888
    
    AC97 Codec
    Attached patch adds 'Jack Sense' controls for AD1980 and AD1888 chips.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7b566054b33474cdd674289a8c7dd282c02e536e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jul 27 17:26:59 2005 +0200

    [ALSA] vx-driver - Fix the calculation of frequency parameter
    
    Digigram VX core
    Fixed the calculation of frequency parameter of vx boards.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fb92e6f05e84f6c217d786208e2ed5acf633b6ce
Author: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
Date:   Wed Jul 27 17:25:08 2005 +0200

    [ALSA] hda driver, correct bug in model 'auto'
    
    HDA Codec driver
    - Correct some index variable inversion in patch_cmedia.c
    
    Signed-off-by: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5a0f217d96656068f0f1e5cda16c35945f979b16
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Tue Jul 26 13:42:31 2005 +0200

    [ALSA] sound/core Fix the sparse warning 'implicit cast to nocast type'
    
    Memalloc module,ALSA Core,Instrument layer
    Fix the sparse warning 'implicit cast to nocast type'
    
    File/Subsystem:sound/core
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 854af9578cb84e4ca3cb1551a6be40c4e81bb455
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 25 16:19:10 2005 +0200

    [ALSA] usb-audio - change quirk type handling
    
    USB generic driver
    Make the quirk type an enum instead of a #defined integer, and use a
    table for the quirk constructor functions instead of a big switch
    statement.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f38275fe994c333b809796230f4f98090f8d919b
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 25 16:17:29 2005 +0200

    [ALSA] usb-audio - add support for Miditech USB MIDI keyboards
    
    USB generic driver
    Add support for Miditech Midistart and MidiStudio keyboards (another
    case of devices using the standard protocol but having no descriptors).
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d06e4c4001cf26147a6af0718703368944f0df32
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Jul 21 08:01:22 2005 +0200

    [ALSA] seq-midi - silently ignore non-MIDI events
    
    ALSA sequencer
    When non-MIDI sequencer events are sent to a RawMIDI port, silently
    ignore them instead of returning a confusing error code which may upset
    the sequencer and abort the current write() to /dev/snd/seq.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7858ffa062886706026cfff3ba80b8400b520501
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 11 15:37:19 2005 +0200

    [ALSA] ac97 - remove unused variable
    
    AC97 Codec
    remove a variable made obsolete by the last change
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit c9eab129fcbcef364b34fb3a70cb2531847e1edf
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 10 12:04:29 2005 +0200

    [ALSA] ac97: Fix volume control bit size detection for STAC9704.
    
    AC97 Codec
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 7c1d549aa9b22365fe5405c372f840cdbc6315f5
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 10 11:50:36 2005 +0200

    [ALSA] emu10k1: Add EMU 1212m card entry and document it as not supported yet.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit b27c187f95cd6c9f13f26a5088bea384ac557b45
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Jul 9 10:54:37 2005 +0200

    [ALSA] Fix-up sleeping in sound/usb
    
    USB generic driver,USB USX2Y
    Description: Fix-up sleeping in sound/usb. Replace big_mdelay() with
    msleep() to guarantee the task delays as expected. This also involved
    replacing/removing custom sleep functions.
    
    Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 989a0b248bbf32c89e60dc6f02219e446b320712
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Jul 9 10:53:24 2005 +0200

    [ALSA] Fix-up sleeping in sound/ppc
    
    PPC AWACS driver,PPC PMAC driver,PPC Tumbler driver
    Description: Fix-up sleeping in sound/ppc. Replace big_mdelay() with
    msleep() to guarantee the task delays as expected. This also involved
    replacing/removing custom sleep functions.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ef21ca24faf28df6d06939e77d5032a313490289
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Jul 9 10:13:22 2005 +0200

    [ALSA] sound/pci: fix-up sleeping paths
    
    ENS1370/1+ driver,ES1968 driver,Intel8x0 driver,VIA82xx driver
    VIA82xx-modem driver,AC97 Codec,ALI5451 driver,CS46xx driver
    MIXART driver,RME HDSP driver,Trident driver,YMFPCI driver
    Description: Fix-up sleeping in sound/pci. These changes fall under the
    following two categories:
    
            1) Replace schedule_timeout() with msleep() to guarantee the
            task delays as expected. This also involved replacing/removing
            custom sleep functions.
            2) Do not assume jiffies will only increment by one if you
            request a 1 jiffy sleep, i.e. use time_after/time_before in
            while loops.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 072c01194df6e4843582d09380b780987f642d6d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Sat Jul 9 10:07:55 2005 +0200

    [ALSA] ens1371 - added extra delay for ac97 codec initialization
    
    ENS1370/1+ driver
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 856def8a4695066e6cbd2919c5987f1df23dbe8a
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Fri Jul 8 13:53:42 2005 +0200

    [ALSA] typo-fix and snd_assert()-expression-split
    
    ALSA Core
    This patch corrects a typo in the kerneldocs of snd_info_get_str().
    It also splits the expressions of snd_assert() in snd_info_unregister()
    into one-expression-per-call for better debugging.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5b738babf13d51285710ed57336ee5f072ac9490
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Fri Jul 8 09:29:18 2005 +0200

    [ALSA] fix compiler warning
    
    GUS Library
    This patch fixes a compiler warning if sequencer is disabled.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ae3a72d8cb4e5b30606c5e3ac9c59b729117579a
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed Jul 6 22:36:18 2005 +0200

    [ALSA] snd-emu10k1: Fixes recognition of Audigy ES.
    
    EMU10K1/EMU10K2 driver
    Fixes ALSA bug #1237.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit e66bc8b2a7d85166935a2da651b94efb9e7a2f11
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed Jul 6 22:21:51 2005 +0200

    [ALSA] emu10k1: Add module option uint subsystem.
    
    EMU10K1/EMU10K2 driver
    It allows the user to force the snd-emu10k1 module to think the user
    has a particular sound card. Useful if their particular sound card
    is not yet recognised.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 2201987c562f7c810440d399ef7a85fe79be01e7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jul 5 10:27:09 2005 +0200

    [ALSA] via82xx - changed MSI K7T266 Pro2 - 4005:4710 in white list (SRC enable)
    
    VIA82xx driver
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e3ea4d896109edd64dc549ecaeeff8d89025fb57
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jul 4 18:12:39 2005 +0200

    [ALSA] hdsp - Add 'Sample Clock Source Locking' control
    
    RME HDSP driver
    Added 'Sample Clock Source Locking' control.  If this switch is on,
    the clock source can't be changed via PCM hw_params API (as sample rate).
    This will fix the problem of OSS-emulation, for example.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4e55096e27d745908e44c6abd2cc0c5b615854a4
Author: Matt <matt@embeddedalley.com>
Date:   Mon Jul 4 17:51:39 2005 +0200

    [ALSA] hda: add sigmatel hp detect support
    
    HDA Codec driver
    Adds support for detecting hp insertion/removal and enable/disable of
    lineouts based on unsolicited events.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41e2fce431070cb2d91391808077378582d3e6b1
Author: Matt <matt@embeddedalley.com>
Date:   Mon Jul 4 17:49:55 2005 +0200

    [ALSA] hda: enable unsolicited responses
    
    HDA Intel driver
    Patch enables unsolicited responses on the HDA controller. Without
    the UREN bit set, the controller will not place unsolicited responses
    in a RIRB.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bbd4615cdb68de943b2814e956ec14899606dc45
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 4 09:21:45 2005 +0200

    [ALSA] usb-audio - use bDeviceSubClass to detect MOTU FastLane
    
    USB generic driver
    MOTU builds other USB MIDI interfaces with the same product ID as the
    FastLane, so we have to check the bDeviceSubClass field to differentiate
    between them.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 6155aff84b98b2aa35eaa4384b539dfbab86afcc
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 4 09:20:42 2005 +0200

    [ALSA] usb-audio - rename QUIRK_MIDI_MOTU to QUIRK_MIDI_RAW
    
    USB generic driver
    Rename the protocol used by the MOTU FastLane to 'raw' because it might
    be useful with other devices, and there are other MOTU interfaces that
    do not use this protocol.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b1c6ef52e2623c81c2124801c783a903f6e5437a
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 4 09:18:46 2005 +0200

    [ALSA] usb-audio - enable high speed transfers with Audiy 2 NX
    
    USB generic driver
    This patch enables the boot commands to activate high speed mode (and
    associated sample formats like 8 channels with 24 bits at 96 kHz) on the
    SB Audigy 2 NX.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 88dc0e5dadf9b0cb529c89b12cd10f75d5b1bce4
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 3 12:54:29 2005 +0200

    [ALSA] emu10k1: Added tested status comments.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit a6f6192bb38a76c4ad44c894144b1fbf3d14606b
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 3 12:32:40 2005 +0200

    [ALSA] emu10k1: Sort by card id.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 3818152e64866b54020b5656ff5fdd0f5e085183
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Jul 2 18:03:37 2005 +0200

    [ALSA] snd-emu10k1: Tidy mixer controls.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit e0474e53985c5fac97a5bb85d66ec0d017b5faf3
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Jul 2 16:33:34 2005 +0200

    [ALSA] snd-emu10k1: Card capabilities tidy up.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 7bc71ecd6477db90221efc08fb742b3df4f49b46
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Sat Jul 2 15:20:57 2005 +0200

    [ALSA] via82xx - added MSI K7T266 Pro2 - 4005:4710 to white list (DXS enable)
    
    VIA82xx driver
    Reporter: Marko Kohtala <marko.kohtala@gmail.com>
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0ac2ac0ad7d1e8c84241d1c40b0d196b9b7c8104
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Jul 1 16:19:39 2005 +0200

    [ALSA] usb-audio: add support for an unknown Yamaha USB MIDI device
    
    USB generic driver
    Add a quirk for the Yamaha USB MIDI device with USB ID 0x103d.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 2c484df0d249323d223f7f58e0f3b992b7414be8
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 18:54:04 2005 +0200

    [ALSA] Add ARM PXA2xx AC97 driver
    
    Documentation,ARM,/arm/Makefile,ARM PXA2XX driver
    Added ARM PXA2xx AC97 driver by Nicolas Pitre
    (moved from alsa-driver tree).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1bd9debf25b8a5f5029d7619f43e4a9a775973d3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 18:26:20 2005 +0200

    [ALSA] Add DBRI driver on Sparcs
    
    Documentation,SPARC,/sparc/Makefile
    Add the DBRI driver on Sparcs by Martin Habets <mhabets@users.sourceforge.net>
    (moved from alsa-driver tree).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ab79509a95b1d22c40d4a87823b6a48bc9a12af5
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 18:13:54 2005 +0200

    [ALSA] Add help texts to Kconfig
    
    SPARC
    Added simple help texts to Kconfig of Sparc sound drivers.
    (Better texts are appreciated :)
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5ba1e7b594db4d0e1f88ace87c1cb295761ca5c9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 13:47:58 2005 +0200

    [ALSA] maestro3 - Clean up
    
    Maestro3 driver
    - Clean up maestro3 code
    - Use msleep()
    - Don't enable hw-vol irq when not defined
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 52b723888c1a55d34551f9b0b9d9296e0e3e8d3c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 13:47:06 2005 +0200

    [ALSA] Fix resume of intel8x0
    
    Intel8x0 driver,AC97 Codec
    Fix resume of intel8x0 driver.  The ac97 codec didn't restore some registers
    properly, and the restore of ICH4 SPDIF and SDIN settings was missing.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2eff7ec81eb586076974cb0918dffc5f4ad763d5
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 13:45:20 2005 +0200

    [ALSA] cmipci - Add Mic Boost capture switch
    
    CMIPCI driver
    Added 'Mic Boost Capture Switch' and 'Phone' switches.
    The existing playback switch is renamed as 'Mic Boost Playback Switch'.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 174d52204500a63c19e6613e49db3fcfe4e9d35a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 13:42:39 2005 +0200

    [ALSA] vxpocket - Remove unused code
    
    Digigram VX Pocket driver
    Removed unused files (dropped by the last change).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6d00a3127972e7853d6296ffc1e72c5b1a23d937
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 13:40:51 2005 +0200

    [ALSA] Fix and clean-up of vxpocket driver
    
    Documentation,PCMCIA Kconfig,Digigram VX Pocket driver
    - Fixed Oops with request_firmware()
    - Detect the card type in runtime (vxpoocket v2 or 440)
    - snd-vxp440 driver is merged to snd-vxpocket
    - Clean up the code
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 82fe0c5803f4c77ffeb4c1c2367defb3dcedad45
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 10:54:33 2005 +0200

    [ALSA] Use kstrdup
    
    HDA Codec driver
    Use the new kstrdup() function instead of in-house one.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0884484762f731a1d5446c0b618a74c5957dea4f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 30 09:55:31 2005 +0200

    [ALSA] Fix dependency of GUS driver
    
    ALSA sequencer
    Add the missing snd-seq-midi-emul to SND_GUS_SYNTH list.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d5750f67853350373fc1d5698c3a58ea16eddf4c
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Wed Jun 29 19:31:06 2005 +0200

    [ALSA] cleanup and typo-correction
    
    ALSA Core
    This patch changes, adds and remove some comments, which will
    make now more sense and fit on a 80-char line. It also changes
    the order of snd_power_wait() to make the file more readable.
    It removes the device.c comment in front of _snd_minor,
    cause snd_minor has nothing to do with device.c.
    The both typos in the kernel-docs were corrected too.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a3352f01ea2d38b0d5b7b63de754e94b9aba0390
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Wed Jun 29 19:30:42 2005 +0200

    [ALSA] Fix two typos and changes on snd_assert()
    
    ALSA Core
    Both typos were in the kerneldocs.
    
    I splitted the snd_assert() calls in one-expression-per-call for better
    debugging.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7a318a70a42057692f191ff49c289cd3e27e21f5
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 28 14:16:21 2005 +0200

    [ALSA] hda-codec - Add entry for Acer APFV
    
    HDA Codec driver
    Added the model entry for Acer APFV.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b6482d48e536729829025262d6529df09ae20396
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 27 15:32:43 2005 +0200

    [ALSA] hda-codec - Add 6stack model for ALC880
    
    Documentation,HDA Codec driver
    - Added a new '6stack' model for ALC880.
    - Fixed the typo in 6stack-digout model name.
    - Added description for missing models in ALSA-Configuration.txt.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 548e7823bc33b8cde4de59dfafe0fd69d951d3b5
Author: Harald Welte <laforge@gnumonks.org>
Date:   Mon Jun 27 15:10:56 2005 +0200

    [ALSA] Add new pci device id (SB400) to atiixp-modem
    
    ATIIXP-modem driver
    I didn't actually test whether the modem works, but at least the driver
    loads and initializes fine.  Please consider inclusion.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b95eed7cde4a44476fa12e776e090fc494059458
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 27 15:07:33 2005 +0200

    [ALSA] trident - Shut up compile warnings
    
    Trident driver
    Shut up compile warnings about uninitialized variables.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ff6fdc37fbe66e24ef9ad7c23a278ff757480dda
Author: Matt <matt@embeddedalley.com>
Date:   Mon Jun 27 15:06:52 2005 +0200

    [ALSA] hda-codec - SigmaTel HDA resume support
    
    HDA Codec driver
    Adds resume support to the SigmaTel HDA patch. Please apply.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c7d4b2fa3169a1206450bc445d1997a17479644f
Author: Matt <matt@embeddedalley.com>
Date:   Mon Jun 27 14:59:41 2005 +0200

    [ALSA] hda-codec - SigmaTel HDA multichannel support
    
    HDA Codec driver
    Adds 6/8 channel support to the SigmaTel HDA patch. Please apply.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b4d3f9d452ec574e0ffb292267427f69bb470631
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jun 27 08:18:27 2005 +0200

    [ALSA] usb-audio - fix capture of non-48k sample rates on Audigy 2 NX
    
    USB generic driver
    On the SB Audigy 2 NX, capturing with sample rates that are not a
    multiple of 48 kHz does not seem to work, so disable it.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 573567e07bb4470ff177f17d1adca3f3bd310221
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jun 27 08:17:30 2005 +0200

    [ALSA] usb-audio - high speed audio support
    
    USB generic driver
    Add support for endpoints with bInterval > 1, and decoding of the
    wMaxPacketSize field of high-speed endpoints.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b0af0de5cb57c96b0c3d739005172152b7de0ce8
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 21 14:49:19 2005 +0200

    [ALSA] hda-codec - Fix oops with ALC880
    
    HDA Codec driver
    - Fixed oops with ALC880 auto-config mode
    - Fixed a wrong config table entry for ALC880
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 145794dc09117b31b6730096558e52b673af7b84
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Jun 20 10:42:44 2005 +0200

    [ALSA] ak4114: removed duplicate wake_up()
    
    AK4114 receiver
    - wake_up(&runtime->sleep) is already called in snd_pcm_post_stop()
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 577a4f8102d54b504cb22eb021b89e957e8df18f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 27 22:10:59 2005 -0700

    [PATCH] More qla2xxx configuration fixes
    
    This adds the appropriate FW_LOADER pre-requisite and a separate entry
    for ISP24xx support.
    
    Thanks to Adrian Bunk and Jesper Juhl for their efforts in fixing this
    quirk.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79d81907594e1ec4d5171653dde7cb9e9cb87de2
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 20:38:56 2005 -0700

    [IB/ucm]: Clean up userspace CM
    
    Only print debug messages when debug_level is set.
    Eliminate NULL checks prior to calling kfree.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Libor Michalek <libor@topspin.com>

commit 2868bd281fef21d1e73d6b7648a41efc3d75f10c
Merge: 6d37675... 41c018b...
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Jul 27 19:12:56 2005 -0700

    Merge /scratch/Ksrc/linux-git/

commit 41c018b7ecb60b1c2c4d5dee0cd37d32a94c45af
Author: Richard Henderson <rth@twiddle.net>
Date:   Wed Jul 27 17:10:52 2005 -0700

    [PATCH] new alpha syscalls
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 340d10e47238daeb5e5eb27df25b4e7ec71f6571
Merge: e0aa8af... 48b0e54...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 17:09:10 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit e0aa8afd97536a9d94f82a07b4c4b3f05aef6f82
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 17:08:21 2005 -0700

    Fix up qla2xxx configuration bogosity
    
    If we haven't configured the qla24xx driver, then the Makefile shouldn't
    do it for us.
    
    This also means that we can avoid the unnecessary selection of FC_ATTRS.
    
    Debugged by James Bottomley

commit e4ff4d7f9d85a2bc714307eb9113617182e62845
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 10:41:23 2005 -0700

    [PATCH] Avoid device suspend on reboot
    
    My fairly ordinary x86 test box gets stuck during reboot on the
    wait_for_completion() in ide_do_drive_cmd():
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49302d0c42592b37f49ae96e0f06a3599cf5a8a0
Merge: 839c5d2... 18190cc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 16:42:22 2005 -0700

    Merge head 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit 839c5d2511fadc35cc4e8a8ffa833d76668700b2
Merge: 96fad28... 5e43db7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 16:37:59 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 96fad28a781069eb40156f78b8f50c349805b652
Merge: 3334c39... b833961...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 16:37:03 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 3334c39f1815d2911238c43f40840c3c7b378165
Merge: 71b2c86... 614d73e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 16:36:08 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm-smp

commit 71b2c86f5fd22b27feaa6c19c2c6662480ecd7d5
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Wed Jul 27 04:55:54 2005 -0300

    [PATCH] ppc32: 8xx remove BROKEN Kconfig entry
    
    8xx is not BROKEN anymore.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf85fa6c878aa3968df47d7f70a2b506c3e53b99
Author: Anton Wllert <a.woellert@gmail.com>
Date:   Wed Jul 27 04:45:17 2005 -0300

    [PATCH] ppc32: 8xx avoid icbi misbehaviour in __flush_dcache_icache_phys
    
    On 8xx, in the case where a pagefault happens for a process who's not
    the owner of the vma in question (ptrace for instance), the flush
    operation is performed via the physical address.
    
    Unfortunately, that results in a strange, unexplainable "icbi"
    instruction fault, most likely due to a CPU bug (see oops below).
    
    Avoid that by flushing the page via its kernel virtual address.
    
    Oops: kernel access of bad area, sig: 11 [#2]
    NIP: C000543C LR: C000B060 SP: C0F35DF0 REGS: c0f35d40 TRAP: 0300 Not tainted
    MSR: 00009022 EE: 1 PR: 0 FP: 0 ME: 1 IR/DR: 10
    DAR: 00000010, DSISR: C2000000
    TASK = c0ea8430[761] 'gdbserver' THREAD: c0f34000
    Last syscall: 26
    GPR00: 00009022 C0F35DF0 C0EA8430 00F59000 00000100 FFFFFFFF 00F58000
    00000001
    GPR08: C021DAEF C0270000 00009032 C0270000 22044024 10025428 01000800
    00000001
    GPR16: 007FFF3F 00000001 00000000 7FBC6AC0 00F61022 00000001 C0839300
    C01E0000
    GPR24: 00CD0889 C082F568 3000AC18 C02A7A00 C0EA15C8 00F588A9 C02ACB00
    C02ACB00
    NIP [c000543c] __flush_dcache_icache_phys+0x38/0x54
    LR [c000b060] flush_dcache_icache_page+0x20/0x30
    Call trace:
    [c000b154] update_mmu_cache+0x7c/0xa4
    [c005ae98] do_wp_page+0x460/0x5ec
    [c005c8a0] handle_mm_fault+0x7cc/0x91c
    [c005ccec] get_user_pages+0x2fc/0x65c
    [c0027104] access_process_vm+0x9c/0x1d4
    [c00076e0] sys_ptrace+0x240/0x4a4
    [c0002bd0] ret_from_syscall+0x0/0x44
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59904159c316f7bc02d00ff7b0dc3f9d3afd07fd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Wed Jul 27 11:46:10 2005 -0700

    [PATCH] Update CREDITS entry and listings in source files for Jesper Juhl
    
    a) update entry in CREDITS for Jesper Juhl
    b) remove email address from source files so it's only listed in credits.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77933d7276ee8fa0e2947641941a6f7a100a327b
Author: Jesper Juhl <juhl@dif.dk>
Date:   Wed Jul 27 11:46:09 2005 -0700

    [PATCH] clean up inline static vs static inline
    
    `gcc -W' likes to complain if the static keyword is not at the beginning of
    the declaration.  This patch fixes all remaining occurrences of "inline
    static" up with "static inline" in the entire kernel tree (140 occurrences in
    47 files).
    
    While making this change I came across a few lines with trailing whitespace
    that I also fixed up, I have also added or removed a blank line or two here
    and there, but there are no functional changes in the patch.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03e259a9cdbd0583e71468293aaa1ccadbdaeff1
Author: Michal Januszewski <spock@gentoo.org>
Date:   Wed Jul 27 11:46:08 2005 -0700

    [PATCH] fbdev: update info->cmap when setting cmap from user-/kernelspace.
    
    The fb_info struct, as defined in include/linux/fb.h, contains an element
    that is supposed to hold the current color map:
      struct fb_cmap cmap;            /* Current cmap */
    
    This cmap is currently never updated when either fb_set_cmap() or
    fb_set_user_cmap() are called.  As a result, info->cmap contains the
    default cmap that was set by a device driver/fbcon and a userspace
    application using the FBIOGETCMAP ioctl will not always get the *currently*
    used color map.
    
    The patch fixes this by making sure the cmap is copied to info->cmap after
    it is set correctly.  It moves most of the code that is responsible for
    setting the cmap to fb_set_cmap() and out of fb_set_user_cmap() to avoid
    code-duplication.
    
    Signed-off-by: Michal Januszewski <spock@gentoo.org>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbd4f12859307c20a4c65a7de4cdd5f9f518dc7a
Author: Michal Januszewski <spock@gentoo.org>
Date:   Wed Jul 27 11:46:06 2005 -0700

    [PATCH] fbcon: don't repaint the cursor when it is disabled.
    
    Currently even when the cursor is disabled (`setterm -cursor off`), it is
    still repainted as a black rectangle the size of a single char.  This can
    be seen, for example, by chvt'ing to a free tty, disabling the cursor and
    doing `dd if=3D/dev/urandom of=3D/dev/fb0`.
    
    The patch changes this behaviour by avoiding painting anything when the
    cursor is disabled.
    
    Signed-off-by: Michal Januszewski <spock@gentoo.org>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d210224732b3d32e802e3537499297d387852166
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Jul 27 11:46:05 2005 -0700

    [PATCH] fbdev: colormap fixes
    
    Color maps have up to 256 entries.  4096/256 allows for 16 characters per
    line.  The format for a cmap entry is "%02x%c%4x%4x%4x\n" %02x entry %c
    transp %4x red %4x blue %4x green
    
    You can read the color_map with cat fb0/color_map.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ca34fcbfbf8a7cbe99d54ae81c4e28fdc6f4ac6
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Jul 27 11:46:05 2005 -0700

    [PATCH] radeonfb: clean up EDID sysfs attribute
    
    radeonfb does not clean up EDID sysfs attribute
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a340cce09f5dfd89b7b7eea1a52d1a2d1c99a2e
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Jul 27 11:46:04 2005 -0700

    [PATCH] fbmem: use unregister_chrdev() on unload
    
    fbdev is missing unregister_chrdev() on unload.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a793b77f786022bd0fef1a18142c1b9be9e421d
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Jul 27 11:46:03 2005 -0700

    [PATCH] fbmon: horizontal frequency rounding fix
    
    Fix rounding error when mode frequency is very close to monitor limit
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Acked-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e4b7952cd34af4dd78e012265d4bc858db6adf3
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Wed Jul 27 11:46:01 2005 -0700

    [PATCH] cpm_uart: use DPRAM for early console
    
    m8xx_cpm_hostalloc() can't rely on using the coherent DMA allocator early
    on boot because the VM is not fully up yet.  Change it to use the on-board
    DPRAM instead.
    
    The current code relies on the "bootmem_page" allocated by
    m8xx_cpm_reset(), which must be killed.
    
    This is done in v2.4 but has never been forward ported to v2.6.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Cc: Pantelis Antoniou <panto@intracom.gr>
    Cc: Kumar Gala <kumar.gala@freescale.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ddcc9197beef7cba993c38cdcad45aefb557d33
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:46:00 2005 -0700

    [PATCH] dvb: rename lgdt3302 frontend module to lgdt330x
    
    Rename lgdt3302 to lgdt330x, to make way for the addition of lgdt3303
    support in future revisions.
    
    I am changing the name of this module now so that hopefully the name will
    be changed before the release of 2.6.13 ...  It wouldn't make sense to
    release 2.6.13 with the name lgdt3302 in it, which will only be renamed to
    lgdt330x in later versions.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d2599d98e9cb511f326b2d1b353e462bc360774
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Jul 27 11:46:00 2005 -0700

    [PATCH] v4l: fix tuning with MXB driver
    
    I noticed that some past changes to the gerneric Video4Linux tuner module
    for analog tuners broke my "Multimedia eXtension Board" driver.
    
    The tuner driver was made aware of Video4Linux2 tuning ioctls, but my
    driver was not ported and still uses the Video4Linux1 ioctls.  This does
    not work anymore as intendend, the tuning is currently broken.
    
    The attached patch fixes non-working tuning in MXB driver introduced by
    some recent generic tuner changes by replacing Video4Linux1 tuner ioctls
    with proper Video4Linux2 tuner ioctls.
    
    - fix non-working tuning in MXB driver introduced by some recent generic
      tuner changes by replacing Video4Linux1 tuner ioctls with proper
      Video4Linux2 tuner ioctls
    
    Signed-off-by: Michael Hunold <hunold@linuxtv.org>
    Cc: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29780bb7af61752924cf4814f2d8180747b38105
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:59 2005 -0700

    [PATCH] v4l: hybrid dvb: rename CFLAGS from CONFIG_DVB_xxxx back to original HAVE_xxxx
    
    The #define CONFIG_DVB_* are actually CFLAGS set by Makefile.  CONFIG_*
    namespace is reserved for Kconfig.  This renames them back to HAVE_*
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84de2eff1390a89a76507abc3073dad8de751869
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:58 2005 -0700

    [PATCH] v4l: hybrid dvb: move #defines to Makefile
    
    This patch moves #define from cx88-dvb.c and saa7134-dvb.c into Makefile as
    CFLAGS, allowing code compatability with video4linux cvs.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b1cd0c77429083d6ceb379b1d15c6bca165e90b
Author: Michael Krufky <mike@krufky.com>
Date:   Wed Jul 27 11:45:57 2005 -0700

    [PATCH] v4l: hybrid dvb: fix warnings with -Wundef
    
    This patch adds a missing #ifdef to saa7134-dvb.c (thanks to Mauro Carvalho
    Chehab) and changes #if to #ifdef in both files.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d975872c5c94615a12040009cde71c82cddeb1be
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:56 2005 -0700

    [PATCH] dvb/v4l: cx88 cleanup
    
    Remove unneeded comment.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 723d52e6a6391e8c4954dca0a7efd3645181981f
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:56 2005 -0700

    [PATCH] lgdt3302: warning fix
    
    warning: `i2c_readbytes' defined but not used
    
    This code will either be re-enabled or deleted in a future patch.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ccef6dbb08770bf21ffc82094c2117bd7977ff8
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:55 2005 -0700

    [PATCH] dvb/4vl: RF input selection fir
    
    Select the RF input connector based upon the type of demodulation selected.
     ANT RF connector is selected for 8-VSB and CABLE RF connector is selected
    for QAM64/QAM256.  This only affects the cards that use the Microtune 4042
    tuner.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6aef071bdef0cd9f69113bb3575aa45fafdbbbf
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:54 2005 -0700

    [PATCH] dvb/v4l: lgdt3302: isolate tuner
    
    Remove the dvb_pll_desc from the frontend and replace with a
    pll_set-callback to isolate the tuner programming from the frontend.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fd0f3acfa7dfc6e8aba7ce1639b8590ddb98fea
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Wed Jul 27 11:45:53 2005 -0700

    [PATCH] v4l: fix regression modprobe bttv freezes the computer
    
    Remove redundant bttv_reset_audio() which caused the computer to freeze
    with some bt8xx based DVB cards when loading the bttv driver.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b96d611f373b2cbf5ffc093d859b3a9b1009e096
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:45:52 2005 -0700

    [PATCH] VIDEO_SAA7134 must depend on SOUND
    
    VIDEO_SAA7134=y and SOUND=n results in the following compile error:
    
      LD      .tmp_vmlinux1
    drivers/built-in.o(.text+0x4fafcb): In function `saa7134_initdev':
    : undefined reference to `unregister_sound_dsp'
    drivers/built-in.o(.text+0x4fb141): In function `saa7134_initdev':
    : undefined reference to `register_sound_dsp'
    drivers/built-in.o(.text+0x4fb17c): In function `saa7134_initdev':
    : undefined reference to `register_sound_mixer'
    drivers/built-in.o(.text+0x4fb339): In function `saa7134_finidev':
    : undefined reference to `unregister_sound_mixer'
    drivers/built-in.o(.text+0x4fb341): In function `saa7134_finidev':
    : undefined reference to `unregister_sound_dsp'
    make: *** [.tmp_vmlinux1] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82ee3e6fa347dcba19e36afb23a01020bc2e77e2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:45:51 2005 -0700

    [PATCH] drivers/media/video/tveeprom.c: possible cleanups
    
    This patch contains the following possible cleanups:
    - make two needlessly global structs static
    - #if 0 the EXPORT_SYMBOL'ed but unused function tveeprom_dump
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e00e48626474854bf712372fe6656ef4621af0f
Author: Gregory B Frost <frosts1@hotkey.net.au>
Date:   Wed Jul 27 11:45:48 2005 -0700

    [PATCH] DVICO Fusion DVB-T1 Tuner (LG-Z201) fix
    
    It is a small modification to the table that defines the way that the
    LG-Z201 tuner is controlled for the DVICO Fusion DVB-T1 tuner card.
    
    I believe that a mistake was made when the dvb tuner code was reorganised
    (to use a generic table for the tuner information instead of inline code)
    and as a result, the DVICO card doesn't tune properly.
    
    The modification I have made to the table makes it behave like it did with
    the old inline tuner code that worked.  The patch is on top of the 2.6.12
    kernel.
    
    Signed-off-by: Gregory B Frost <frosts1@hotkey.net.au>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 617b586bca4eda775f93915b8efd586dddf7903c
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:47 2005 -0700

    [PATCH] IB: Add core locking documentation to Infiniband
    
    Add core locking documentation to Infiniband
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f13f9f501a6eee14e495aba56ec6f70cf2328180
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:46 2005 -0700

    [PATCH] IB: Eliminate sparse warnings in SA client
    
    Eliminate sparse warnings in SA client
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fd65b096a7ba1fff69c7991f481ebac5498673e
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:45 2005 -0700

    [PATCH] IB: Hook up userspace CM to the make system
    
    Hook up userspace CM to the make system
    
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d0d099f1950bda2f712364a3bf74f20ddb61190
Author: Tom Duffy <tduffy@sun.com>
Date:   Wed Jul 27 11:45:45 2005 -0700

    [PATCH] Add kernel portion of user CM implementation (fix)
    
    Include the patch openib-general changing class_simple to class.
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Cc: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5b74540770cb28b8ae779d0c27e228fe7500669
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:44 2005 -0700

    [PATCH] IB: Add kernel portion of user CM implementation
    
    Add kernel portion of user CM implementation
    
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8aa009191d157de53735646552421f3d1595364a
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:43 2005 -0700

    [PATCH] IB: Add the header file for user space CM
    
    Add the header file for user space CM.  This file defines the ABI used by the
    CM for kernel/user communication.
    
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb183a06b381652b7637fedfa7ef85ec0baf2a1f
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:42 2005 -0700

    [PATCH] IB: Implementation for RMPP support in user MAD
    
    Implementation for RMPP support in user MAD
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f75daddb4fc6b695faa4e12e76894389e913dcb
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:41 2005 -0700

    [PATCH] IB: User MAD ABI changes to support RMPP
    
    User MAD ABI changes to support RMPP
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a977049dacdef6a9e69fb4872b42a68e93a69956
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:40 2005 -0700

    [PATCH] IB: Add the kernel CM implementation
    
    Add the kernel CM implementation
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3e0164758fc24623020e0ad7bd278607b4693e3
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:39 2005 -0700

    [PATCH] IB: Add the header file for kernel CM (Communications Manager)
    
    Add the header file for kernel CM (Communications Manager)
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbae32c56314fa3032f92db36caab49f08ab0601
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:38 2005 -0700

    [PATCH] IB: Add Service Record support to SA client
    
    Add Service Record support to SA client
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa619a77046bef30478697aba0553991033afb8e
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:37 2005 -0700

    [PATCH] IB: Add RMPP implementation
    
    Add RMPP implementation.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2082ee516200095956bd66279be4f62f4a5843d
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:36 2005 -0700

    [PATCH] IB: Introduce RMPP APIs
    
    Introduce RMPP APIs
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 497677ab940e637a41351dca6610bc4320abc8f1
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:35 2005 -0700

    [PATCH] IB: A couple of IB core bug fixes
    
    Replace be32_to_cpup with be32_to_cpu and fix bug referencing pointer rather
    than value in ib_create_ah_from_wc().
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 513789ed995fb2ba72ba2a5bee53ea11d1170580
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:34 2005 -0700

    [PATCH] IB: Add ib_create_ah_from_wc to IB verbs
    
    Added new call: ib_create_ah_from_wc.  Call will allocate an address handle
    given work completion information, including any received GRH.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cabe3cbcbb3b09637b9e706c49eadb180fca057e
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:33 2005 -0700

    [PATCH] IB: Fix a couple of MAD code paths
    
    Fixed locking to handle error posting MAD send work requests.  Fixed handling
    canceling a MAD with an active work request.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29bb33dd87dbe8db07c2b19df3fb453d999c96de
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:32 2005 -0700

    [PATCH] IB: Optimize canceling a MAD
    
    Optimize canceling a MAD.
    - Eliminate searching timeout list in cancel case.
    - Remove duplicate calls to queue work item.
    - Eliminate resending a MAD before MAD is completed.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03b61ad2f29295f019e095d0f490f30a4d678d3f
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:32 2005 -0700

    [PATCH] IB: Add ib_modify_mad API to MAD
    
    Add new MAD layer call to modify (ib_modify_mad) the timeout of a sent MAD,
    and simplify cancel code.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c153b934dca08d58e0aafde18a182e0891aa201
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:31 2005 -0700

    [PATCH] IB: Eliminate MAD cache leak associated with local completions
    
    Eliminate MAD cache leak associated with local completions.  Also, when
    canceling MAD, empty local completion list as well.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbf9227bd3dff71c3c2f540cc3e96098d2ab41e7
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:30 2005 -0700

    [PATCH] IB: Simplify calling of list_del in MAD
    
    Simplify calling of list_del.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f75b7a5294949cd1b7bc301e3087c7bb78e22520
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:29 2005 -0700

    [PATCH] IB: Add automatic retries to MAD layer
    
    Add automatic retries to MAD layer.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df9f9ead746e9607099d7024f312133944173609
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:28 2005 -0700

    [PATCH] IB: Add ib_coalesce_recv_mad to MAD
    
    Add implementation for ib_coalesce_recv_mad.  Also, clear allocated MAD data
    buffer in ib_create_send_mad.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f68bcc2df8115b4ea45bfa4f8de22ec7232562b5
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:27 2005 -0700

    [PATCH] IB: Minor cleanup during MAD startup and shutdown
    
    Minor cleanup during startup and shutdown
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a0c435ef9e2473934442282054d0f58235d1de2
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:26 2005 -0700

    [PATCH] IB: Fix timeout/cancelled MAD handling
    
    Fixes an issue processing a sent MAD after it has timed out or been canceled.
    The race occurs when a response MAD matches with the send request.  The
    request could time out or be canceled after the response MAD matches with the
    request, but before the request completion can be processed.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d760ce8f71ec5336c4a750a1293f26c0eb938c8a
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:25 2005 -0700

    [PATCH] IB: Change ib_mad_send_wr_private struct
    
    Have ib_mad_send_wr_private reference the private agent structure directly,
    rather than the exposed agent definition.  Remove unneeded parameters to
    functions and simplify code were possible from this change.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8197a4ed1bba8c80ed6ddf4535ded80cb4152cf
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:24 2005 -0700

    [PATCH] IB: Change saving of user's send wr_id in MAD
    
    Move saving of user's send wr_id to better match layering of received response
    handling.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a0754fae8fb5162d1cf4f738d48bb1e8190c09f
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:24 2005 -0700

    [PATCH] IB: Combine some MAD routines
    
    Combine response_mad() and solicited_mad() routines into a single function and
    simplify/encapsulate its usage.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 824c8ae7d05bb4d21af707832c5bfa45d5494ec8
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:23 2005 -0700

    [PATCH] IB: Add MAD helper functions
    
    Add new helper routines for allocating MADs for sending and formatting a send
    WR.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b82cab6b331b51d82f90d2207f3bbfdf09361ac9
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:22 2005 -0700

    [PATCH] IB: Update MAD client API
    
    Automatically allocate a MR when registering a MAD agent.
    MAD clients are modified to use this updated API.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c183a4c33528d17cde0dcb093ae4248d8cb8f649
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Jul 27 11:45:20 2005 -0700

    [PATCH] IB: Update FMR functions
    
    Change some functions to return void rather than an int since they are always
    returning 0, thus making checking return values rather pointless.
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 896e5518da74f9d20db8163526014fba16b1f2b4
Author: Kurt Wall <kwall@kurtwerks.com>
Date:   Wed Jul 27 11:45:20 2005 -0700

    [PATCH] Add text for dealing with "dot releases" to README
    
    The emergence of so-called "dot releases" that are non-incremental patches
    against a base kernel requires different handling of patches (revert
    previous patches before applying the newest one).  This patch adds a
    paragrach to $TOPDIR/README explaining how to do deal with dot release
    patches.
    
    Signed-off-by: Kurt Wall <kwall@kurtwerks.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5c2d749172657ed51e20e4b5ab540447666cc50
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jul 27 11:45:19 2005 -0700

    [PATCH] serial_core whitespace fix
    
    Use tabs for formatting like anywhere else in this file.
    
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71ae18ec690953e9ba7107c7cc44589c2cc0d9f1
Author: Blaisorblade <blaisorblade@yahoo.it>
Date:   Wed Jul 27 11:45:18 2005 -0700

    [PATCH] sys_get_thread_area does not clear the returned argument
    
    sys_get_thread_area does not memset to 0 its struct user_desc info before
    copying it to user space...  since sizeof(struct user_desc) is 16 while the
    actual datas which are filled are only 12 bytes + 9 bits (across the
    bitfields), there is a (small) information leak.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44456d37b59d8e541936ed26d8b6e08d27e88ac1
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:45:17 2005 -0700

    [PATCH] turn many #if $undefined_string into #ifdef $undefined_string
    
    turn many #if $undefined_string into #ifdef $undefined_string to fix some
    warnings after -Wno-def was added to global CFLAGS
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02b775696fee75a04041d8d94db26a9462216d24
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jul 27 11:45:16 2005 -0700

    [PATCH] reiserfs doesn't use mbcache
    
    reiserfs doesn't use the mbcache, so this can go.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec0344a2c93c770fe1ef7cdccd8115a69ca100d1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:45:15 2005 -0700

    [PATCH] Documentation/Changes: document the required udev version
    
    Document that udev 058 is required.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c52ab42c11b5a7fb44bb84c954d09968e90e9e7
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jul 27 11:45:15 2005 -0700

    [PATCH] mbcache: Remove unused mb_cache_shrink parameter
    
    The cache parameter to mb_cache_shrink isn't used.  We may as well remove
    it.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dcce8e22bf9956ac2c5233539cac07c978e58c7
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 11:45:14 2005 -0700

    [PATCH] ppc64: tpm_infineon build fix
    
    ppc64 uses symbol `DAR', as does the TPM driver, causing a build failure.
    Change the TPM name.
    
    Cc: Marcel Selhorst <selhorst@crypto.rub.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebb81fdb3dd0be7514b84197c4f8388a17130f04
Author: Marcel Selhorst <selhorst@crypto.rub.de>
Date:   Wed Jul 27 11:45:12 2005 -0700

    [PATCH] tpm: Support for Infineon TPM
    
    This patch provides a new device driver for the Infineon SLD 9630 TT Trusted
    Platform Module (TPM 1.1b) [1] which is embedded on Intel- mainboards or in
    HP/ Fujitsu-Siemens / Toshiba-Notebooks.  A nearly complete list where this
    module is integrated in can be found in [2].
    
    This kernel module acts as a communication gateway between the linux kernel
    and the hardware chip and fits the TPM-specific interfaces created by IBM in
    drivers/char/tpm/tpm.h
    
    Further information about this module and a list of succesfully tested and
    therefore supported hardware can be found at our project page [3].
    
    [1]
    http://www.infineon.com/cgi/ecrm.dll/ecrm/scripts/public_download.jsp?oid=114135&parent_oid=29049
    
    [2]
    http://www.tonymcfadden.net/tpmvendors.htm
    
    [3]
    http://www.prosec.rub.de/tpm
    
    Signed-off-by: Marcel Selhorst <selhorst@crypto.rub.de>
    Acked-by: Kylene Jo Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e77e17161ccb8bd877bf83b3611cd318e451c605
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 27 11:45:11 2005 -0700

    [PATCH] kernel/crash_dump.c: add kerneldoc
    
    Add kerneldoc to kernel/crash_dump.c
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9fd8a6d443b509147280f058d4e59f0b796a323
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 27 11:45:11 2005 -0700

    [PATCH] kernel/cpuset.c: add kerneldoc, fix typos
    
    Add kerneldoc to kernel/cpuset.c
    
    Fix cpuset typos in init/Kconfig
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 207a7ba8dc000e1b13acac97f3736810dd86e8e2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 27 11:45:10 2005 -0700

    [PATCH] kernel/capability.c: add kerneldoc
    
    Add kerneldoc to kernel/capability.c
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c293621bbf678a3d85e3ed721c3921c8a670610d
Author: Peter Staubach <staubach@redhat.com>
Date:   Wed Jul 27 11:45:09 2005 -0700

    [PATCH] stale POSIX lock handling
    
    I believe that there is a problem with the handling of POSIX locks, which
    the attached patch should address.
    
    The problem appears to be a race between fcntl(2) and close(2).  A
    multithreaded application could close a file descriptor at the same time as
    it is trying to acquire a lock using the same file descriptor.  I would
    suggest that that multithreaded application is not providing the proper
    synchronization for itself, but the OS should still behave correctly.
    
    SUS3 (Single UNIX Specification Version 3, read: POSIX) indicates that when
    a file descriptor is closed, that all POSIX locks on the file, owned by the
    process which closed the file descriptor, should be released.
    
    The trick here is when those locks are released.  The current code releases
    all locks which exist when close is processing, but any locks in progress
    are handled when the last reference to the open file is released.
    
    There are three cases to consider.
    
    One is the simple case, a multithreaded (mt) process has a file open and
    races to close it and acquire a lock on it.  In this case, the close will
    release one reference to the open file and when the fcntl is done, it will
    release the other reference.  For this situation, no locks should exist on
    the file when both the close and fcntl operations are done.  The current
    system will handle this case because the last reference to the open file is
    being released.
    
    The second case is when the mt process has dup(2)'d the file descriptor.
    The close will release one reference to the file and the fcntl, when done,
    will release another, but there will still be at least one more reference
    to the open file.  One could argue that the existence of a lock on the file
    after the close has completed is okay, because it was acquired after the
    close operation and there is still a way for the application to release the
    lock on the file, using an existing file descriptor.
    
    The third case is when the mt process has forked, after opening the file
    and either before or after becoming an mt process.  In this case, each
    process would hold a reference to the open file.  For each process, this
    degenerates to first case above.  However, the lock continues to exist
    until both processes have released their references to the open file.  This
    lock could block other lock requests.
    
    The changes to release the lock when the last reference to the open file
    aren't quite right because they would allow the lock to exist as long as
    there was a reference to the open file.  This is too long.
    
    The new proposed solution is to add support in the fcntl code path to
    detect a race with close and then to release the lock which was just
    acquired when such as race is detected.  This causes locks to be released
    in a timely fashion and for the system to conform to the POSIX semantic
    specification.
    
    This was tested by instrumenting a kernel to detect the handling locks and
    then running a program which generates case #3 above.  A dangling lock
    could be reliably generated.  When the changes to detect the close/fcntl
    race were added, a dangling lock could no longer be generated.
    
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e5ea098446e19175fdee4c2c4ec9366b0217db4
Author: Christian Borntraeger <cborntra@de.ibm.com>
Date:   Wed Jul 27 11:45:06 2005 -0700

    [PATCH] s390: use __cpcmd in vmcp_write
    
    vmcp_write uses GPF_DMA for the memory allocation of the response buffer, so
    it can use the low level function __cpcmd directly, no need to call the
    wrapper.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ffa7405afe0eaf34db6254160b734f084601f68
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 27 11:45:06 2005 -0700

    [PATCH] s390: cpu timer reset in machine check handler
    
    Fix wrong move direction of timer values for cpu accounting in case of a
    machine check that indicates a broken cpu timer.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f878e4367580f37327e68ce2c6861245077f0904
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 27 11:45:05 2005 -0700

    [PATCH] s390: 31 bit memory size limit
    
    Limit reported memory size to 2GB if running in 31 bit mode.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4111796d89b8cfa36054d65d9858460b5ec0e8c7
Author: Stefan Bader <shbader@de.ibm.com>
Date:   Wed Jul 27 11:45:04 2005 -0700

    [PATCH] s390: channel tape fixes
    
    Tape driver fixes:
     - Added deferred condition handling to tape driver core.
     - Added ability to handle busy conditions.
     - Code cleanup.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bb0e01081c2ca585b5e145783fea53bb0589786
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Wed Jul 27 11:45:03 2005 -0700

    [PATCH] s390: free dasd slab cache
    
    Free dasd slab cache on module unload.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d61f6f3d8b63a2aadcf8b058fe65581ccd8dee97
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Wed Jul 27 11:45:02 2005 -0700

    [PATCH] s390: fba dasd i/o errors
    
    The FBA discipline does not use retries for failed requests.  A request fails
    after the first unsuccessful start attempt.  There are some rare conditions
    (e.g.  CIO path recovery) in which the start of an i/o on a fba device can
    fail.  A tiny amount of retries is therefore reasonable.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c63307f164a79e0ff6dd2da33436c59b3d3396cd
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Wed Jul 27 11:45:01 2005 -0700

    [PATCH] s390: resource accessibility event handling
    
    When processing resource accessibility events, continue searching for further
    affected subchannels if a link address is provided in the event information.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d3ac7aadbccd8456fdca09394ddb570b95fe7dc
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Wed Jul 27 11:45:00 2005 -0700

    [PATCH] s390: debug data for ifcc/ccc
    
    Fix debug data in case of an interface-control or channel-control check: don't
    log the not yet accumulated interrupt-response-block, but the one we just
    received.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99b2d8df1d06f1072a949fc1e01a08b94b084d5f
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 27 11:45:00 2005 -0700

    [PATCH] s390: external call performance
    
    The kernel uses the SIGP external call order code to signal other CPUs.  When
    running with dedicated CPUs external calls don't get delivered immediately but
    within a fixed polling invervall.  This can lead to delays where the system
    appears to do nothing.  Replace the SIGP external call order with the SIGP
    emergency call order since this one gets delivered immediately.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46ee058cdb3abab9313cc9cb9e9927d7672a718c
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 27 11:44:59 2005 -0700

    [PATCH] s390: atomic64 inline functions
    
    The atomic64 primitives are supposed to have 64-bit parameters instead of int.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afff7e2b3b13dbd26a2b9991d3d571df111d92e8
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Jul 27 11:44:58 2005 -0700

    [PATCH] s390: find_next_{zero}_bit fixes
    
    The find_next_{zero}_bit primitives on s390* should never return a bit number
    bigger then the bit field size.  In the case of a bitfield that doesn't end on
    a word boundary, an offset that makes the search start at the last word of the
    bit field and the last word doesn't contain any zero/one bits the search is
    continued with a call to find_first_bit with a negative size.  The search
    normally ends pretty quickly because the words following the bit field contain
    a mix of zeros and ones.  But the bit number that is returned in this case is
    too big.
    
    To fix this and additional if to check for this case is needed.  To make the
    code easier to read I removed the assembler parts from the
    find_next_{zero}_bit functions, the C-ified code is as good.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 951f22d5b1f0eaae35dafc669e3774a0c2084d10
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Jul 27 11:44:57 2005 -0700

    [PATCH] s390: spin lock retry
    
    Split spin lock and r/w lock implementation into a single try which is done
    inline and an out of line function that repeatedly tries to get the lock
    before doing the cpu_relax().  Add a system control to set the number of
    retries before a cpu is yielded.
    
    The reason for the spin lock retry is that the diagnose 0x44 that is used to
    give up the virtual cpu is quite expensive.  For spin locks that are held only
    for a short period of time the costs of the diagnoses outweights the savings
    for spin locks that are held for a longer timer.  The default retry count is
    1000.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8449d003f323ca7a00eec38905d984ba5ec83a29
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:56 2005 -0700

    [PATCH] v850: Define L1_CACHE_SHIFT and L1_CACHE_SHIFT_MAX
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b2bf06994b9cd6067e5c7620e270eec73fef70b
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:55 2005 -0700

    [PATCH] v850: Update PCI support
    
    These changes are untested (I no longer have the hardware).
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 947ac8b9265e2a22552552d011db1e161f802a4a
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:55 2005 -0700

    [PATCH] v850: Add pte_file
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21ea9f63297497df3040c70a67a207d229368a4c
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:54 2005 -0700

    [PATCH] v850: Update ioremap return type and add ioread/iowrite functions
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f307d365ea4db4848a0b43bbbdf3c96f4d2e0933
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:53 2005 -0700

    [PATCH] v850: Add defconfigs
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f9a6e101a962dd845eda69fa066184457968228
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:53 2005 -0700

    [PATCH] v850: const-qualify first parameter of find_next_zero_bit
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9c3d6b925e0fdb5e62fad6d81e4004897cfe79d
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 27 11:44:52 2005 -0700

    [PATCH] v850: Define pfn_valid
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e63b68de5c9bf68cfb4a272469147b19176d76d6
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:51 2005 -0700

    [PATCH] CRIS IDE driver
    
      * Added abstraction layer for subarchs.
      * Added v32 support.
      * Renamed driver.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Acked-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51533b615e605d86154ec1b4e585c8ca1b0b15b7
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:44 2005 -0700

    [PATCH] CRIS update: new subarchitecture v32
    
    New CRIS sub architecture named v32.
    
    From: Dave Jones <davej@redhat.com>
    
    	Fix swapped kmalloc args
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d01e6ce785884a5db5792cd2e5bb36fa82fe23c
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:43 2005 -0700

    [PATCH] CRIS update: updates for 2.6.12
    
    Patches to make CRIS work with 2.6.12.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcf1310b72149d016970c666539d4d73bb77c086
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:42 2005 -0700

    [PATCH] CRIS update: synchronous serial port driver
    
    Include file for synchronous serial port driver.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d20a541b089ecb67a88a673548161b686ed7b85
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:42 2005 -0700

    [PATCH] CRIS update: SMP
    
    Patches to support SMP.
    
    * Each CPU has its own current_pgd.
    * flush_tlb_range is implemented as flush_tlb_mm.
    * Atomic operations implemented with spinlocks.
    * Semaphores implemented with spinlocks.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21783c9746619a782c21be606f6498bbd4d4615e
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:40 2005 -0700

    [PATCH] CRIS update: profiler
    
    System-level profiler.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59c61138a556cf89692e0d5bd2c9de5df54b824f
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:40 2005 -0700

    [PATCH] CRIS update: pci
    
    Patches to make it possible to add PCI support.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f18cfbf0990bfc2e8e7706eeb9e5bef898ae923
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:39 2005 -0700

    [PATCH] CRIS update: mm
    
    Memory management patches.
    
    * SMP support.
    * Non-executable stack (on v32).
    * 4-level page tables.
    * Added simple Thread Local Storage support.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7cf32cad153d63ac4f6f2d5dd16ddd32ad72d578
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:38 2005 -0700

    [PATCH] CRIS update: misc patches
    
    * Start threads with IRQs enabled.
    * Move symbol exports to arch specific file.
    * Prepare for real command line in the future.
    * Handle csum for partition that crosses flash boundary.
    * Set utsname.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e0cea1decf7f21df0496571c218df3b3b8cce99
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:36 2005 -0700

    [PATCH] CRIS update: IRQ
    
    Use the generic IRQ framework
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63245d2cde2be64f172388c2c50862f233c05700
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:35 2005 -0700

    [PATCH] CRIS update: I/O and DMA allocator
    
    Added I/O and DMA allocators to be used by drivers.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e9204265b4ec6680fad9abc7a78b94087983916
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:34 2005 -0700

    [PATCH] CRIS update: drivers
    
    Updates to device drivers.
    
    * Use I/O and DMA allocators.
    * Use wait_event_interruptible instead of interrutiple_sleep_on.
    * Added spinlocks SMP.
    * Changed restore_flags to local_irq_restore etc.
    * Updated IDE driver include to fit 2.6.12.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 059163cabc01a15b9e2cf10e5de5b6dc06e0da1f
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:32 2005 -0700

    [PATCH] CRIS update: debug
    
    Improvements to crash debug code.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05b4c28cba8dc48505322988340307073c353b1e
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:31 2005 -0700

    [PATCH] CRIS update: console
    
    Changes to console.
    
    * Added LF->CRLF translation
    * Make use of real console framework.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e41d6522a6922a95f9d953f4171b45b82b3d6f4
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:30 2005 -0700

    [PATCH] CRIS update: configuration and build
    
    Changes to configuration and build system.
    
    * Added v32 sub architecture.
    * Use generic hard IRQ.
    * Added SMP options.
    * Added options to OOPS at NMI and reboot at OOM.
    * Made it possible to set objtree.
    * Added option to select Kernel GDB serial port.
    * Corrected Kconfig usage.
    * Added system profiler.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb09f540a1c5e6c5beb6e82f554d51a1f2c87e67
Author: Mikael Starvik <mikael.starvik@axis.com>
Date:   Wed Jul 27 11:44:27 2005 -0700

    [PATCH] CRIS update: arch split
    
    Changes necessary to make the sub-arch split complete.
    
    Signed-off-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1637f437f1a2e552e0572e02d46e2c395a4ecaf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:44:24 2005 -0700

    [PATCH] m32r: add missing Kconfig help text
    
    There's no help text for CONFIG_DEBUG_STACKOVERFLOW - add one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dab175f393cdf30fbaec5978682a49dc3c890b2f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:44:23 2005 -0700

    [PATCH] i386: add missing Kconfig help text
    
    There's no help text for CONFIG_DEBUG_STACKOVERFLOW - add one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2d5c74d778fc59a46f8e173cf986e7320e15e50
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Wed Jul 27 11:44:22 2005 -0700

    [PATCH] mips: remove obsolete GIU driver for vr41xx
    
    This patch has removed obsolete GIU driver for vr41xx.  This patch already
    has been applied to mips tree.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 488f84994c55927eef587a0827dc957c908a0bad
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Wed Jul 27 11:44:21 2005 -0700

    [PATCH] ppc64: remove another fixed address constraint
    
    Presently the LparMap, one of the structures the kernel shares with the
    legacy iSeries hypervisor has a fixed offset address in head.S.  This patch
    changes this so the LparMap is a normally initialized structure, without
    fixed address.  This allows us to use macros to compute some of the values
    in the structure, which wasn't previously possible because the assembler
    always uses signed-% which gets the wrong answers for the computations in
    question.
    
    Unfortunately, a gcc bug means that doing this requires another structure
    (hvReleaseData) to be initialized in asm instead of C, but on the whole the
    result is cleaner than before.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 533f08172e21521a74e15cdef8a13c929596d506
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Wed Jul 27 11:44:19 2005 -0700

    [PATCH] ppc64: dynamically allocate segment tables
    
    PPC64 machines before Power4 need a segment table page allocated for each
    CPU.  Currently these are allocated statically in a big array in head.S for
    all CPUs.  The segment tables need to be in the first segment (so
    do_stab_bolted doesn't take a recursive fault on the stab itself), but
    other than that there are no constraints which require the stabs for the
    secondary CPUs to be statically allocated.
    
    This patch allocates segment tables dynamically during boot, using
    lmb_alloc() to ensure they are within the first 256M segment.  This reduces
    the kernel image size by 192k...
    
    Tested on RS64 iSeries, POWER3 pSeries, and POWER5.
    
    Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fdfb382813d66757aef4d83e369f8153a40b371
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:44:18 2005 -0700

    [PATCH] make a few functions static in pmac_setup.c
    
    Making a few functions static saves a few bytes, but only on ppc32.
    
         text	   data	    bss	    dec	    hex	filename
      3752421	1605208	 345608	5703237	 570645	../O-ppc64_iSeries_defconfig/vmlinux
      3709411	2042552	 339992	6091955	 5cf4b3	../O-ppc64_maple_defconfig/vmlinux
      5397329	3054824	 679856	9132009	 8b57e9	../O-ppc64_pSeries_defconfig/vmlinux
     -3882695	 417552	 197760	4498007	 44a257	../O-ppc_common_defconfig/vmlinux
     -3414510	 574500	 241440	4230450	 408d32	../O-ppc_pmac_defconfig/vmlinux
     +3882627	 417168	 197760	4497555	 44a093	../O-ppc_common_defconfig/vmlinux
     +3414442	 575428	 241440	4231310	 40908e	../O-ppc_pmac_defconfig/vmlinux
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62b662a30963c2e7bdfc129f78c3da0559202379
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 11:44:17 2005 -0700

    [PATCH] ppc64: genrtc build fix
    
    genrtc.c won't compile on ppc64.  Seems that ppc32 does support it though?
    
    We do this wrong btw - we should be selecting GEN_RTC in each
    arch/xxx/Kconfig.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64c74de7a3a744bc546ef76872be6285307ce101
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:44:16 2005 -0700

    [PATCH] ppc64: hide CONFIG_ADB
    
    This bites me all day when I use our default config for ppc64.  We use a
    patch to fix the compile errors and provide the CONFIG_MAC_EMUMOUSEBTN
    functionality (which is behind CONFIG_INPUT_ADBHID).  But Benh doesnt like
    it.
    
    http://ozlabs.org/pipermail/linuxppc64-dev/2005-March/003423.html
    
    Just hide all the ADB parts from via-pmu on ppc64 instead.
    
    drivers/macintosh/adbhid.c: In function `adbhid_init':
    drivers/macintosh/adbhid.c:1199: error: `_MACH_chrp' undeclared (first use in this function)
    drivers/macintosh/adbhid.c:1199: error: (Each undeclared identifier is reported only once
    drivers/macintosh/adbhid.c:1199: error: for each function it appears in.)
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bc3a1ec6030f7a6a9e78172e1221be9baed68e8
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:44:15 2005 -0700

    [PATCH] ppc64: update defconfigs
    
    update defconfig, use new CONFIG_HZ and set it to 100 just for the kicks.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c64d7b4cea71b6841d9d96d390aed323c9fe1c9d
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:14 2005 -0700

    [PATCH] ppc32: Fix building of TQM8260 board
    
    Added missing include of cpm2.h in correct order to allow TQM8260 to build
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 757569295d4204b4e00dd9294790e09ed5a2ffd2
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Wed Jul 27 11:44:13 2005 -0700

    [PATCH] ppc32: fix 440SP MAL channels count
    
    Fix the MAL channels count in PPC 440SP OCP definition.  PPC 440SP has only
    1 EMAC attached to MAL.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f6a3d083729c76ced92106c259f0e6536a2eaea
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Wed Jul 27 11:44:12 2005 -0700

    [PATCH] ppc32: fix dma_map_page() to use page_to_bus()
    
    The following trivial patch changes dma_map_page() to use page_to_bus()
    instead of open-coding it (incorrectly in some cases).
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15ce2982c6bc41ccd7f2cbca63e024aa9044c000
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:11 2005 -0700

    [PATCH] ppc32: Fix building of radstone_ppc7d
    
    Updated radstone_ppc7d_defconfig to include the ds1337 driver which is used
    by the platform code.  This fixes the link error when building.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 571e63fc839e57965749acf19d58b3cbbef5d06a
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:10 2005 -0700

    [PATCH] ppc32: Fix building of prpmc750
    
    Updated prpmc750 platform code to include serial_reg.h to fix building.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 127384524b31d99bc3f9e2d2e7af4a5fad572235
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:10 2005 -0700

    [PATCH] ppc32: Fix typo in setup of 2nd PCI bus on 85xx
    
    Typo bug that was using PCI1 defines instead of PCI2 when setting up the
    second PCI bus controller on 85xx based systems.  This hasn't been a real
    issue since currently the PCI2 sizes are the same as the PCI1 sizes for
    currently supported boards.
    
    Thanks to Andrew Klossner @ Xerox for point this out.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c41b72d5bd590e6ff781d6bdfc71595f3996bacf
Author: Downing, Thomas <Thomas.Downing@ipc.com>
Date:   Wed Jul 27 11:44:09 2005 -0700

    [PATCH] ppc32: fix compilation error with CONFIG_PQ2FADS
    
    The 2.6.12.3 kernel compilation fails for ARCH=ppc when CONFIG_PQ2FADS=y.
    This patch has been tested on Freescale PQ2FADS-ZU and -VR boards.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a1ce8aa2d9611a779c308fbf332ae86217b0df6
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Wed Jul 27 11:44:08 2005 -0700

    [PATCH] ppc32: 8xx: update DataTLBMiss exception comment
    
    On PPC 8xx, the DataTLBMiss handler does not jump directly to the page
    fault handler, as was the case in v2.4.
    
    It instead loads an invalid TLB which causes a subsequent DataTLBError
    exception.
    
    The comment on top of it haven't been update to reflect the change, though.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13e886c3b435d14668aefaed449d8d7ca6dce3a8
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:07 2005 -0700

    [PATCH] ppc32: Make the UARTs on MPC824x individual platform devices
    
    The UARTs on the MPC824x are unique devices and really shouldn't be thought
    of as a DUART.  In addition, if both UARTs are in use we need to configure
    the part to enable the 2nd UART since the pins for the UARTs are
    multiplexed.  Adds support to run the 824x Sandpoint with both UARTs if
    desired.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d054b5acfe1f68460fe70aff5028ad95a7a38140
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:44:06 2005 -0700

    [PATCH] ppc32: Add proper prototype for cpm2_reset()
    
    Added a proper prototype for cpm2_reset() which gets rid of a build
    warning.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 694e50db5d75f4c29011d7d15e069a95aded8af1
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:44:04 2005 -0700

    [PATCH] ppc32: update defconfigs
    
    update pmac_defconfig
    
    enable all relevant options in common_defconfig,
    so it can serve as a compiletest for PPC_MULTIPLATFORM configuration
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b625c001a897394b969becac3358d733728d02b
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:44:03 2005 -0700

    [PATCH] ppc/ppc64: use Kconfig.hz
    
    use new Kconfig.hz on ppc/ppc64, use also Kconfig.preempt for ppc
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12b1c5f382194d3f656e78fb5c9c8f2bfbe8ed8a
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Wed Jul 27 11:44:02 2005 -0700

    [PATCH] Remove bogus warning in page_alloc.c
    
    Originally __free_pages_bulk used the relative page number within a zone to
    define its buddies.  This meant that to maintain the "maximally aligned"
    requirements (that an allocation of size N will be aligned at least to N
    physically) zones had to also be aligned to 1<<MAX_ORDER pages.  When
    __free_pages_bulk was updated to use the relative page frame numbers of the
    free'd pages to pair buddies this released the alignment constraint on the
    'left' edge of the zone.  This allows _either_ edge of the zone to contain
    partial MAX_ORDER sized buddies.  These simply never will have matching
    buddies and thus will never make it to the 'top' of the pyramid.
    
    The patch below removes a now redundant check ensuring that the mem_map was
    aligned to MAX_ORDER.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Cc: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 165cd40235732644b1856a5ed5e158c9b93f6010
Author: suzuki <suzuki@in.ibm.com>
Date:   Wed Jul 27 11:43:59 2005 -0700

    [PATCH] madvise() does not always return -EBADF on non-file mapped area
    
    The madvise() system call returns -EBADF for areas which does not map to
    files, only for *behaviour* request MADV_WILLNEED.
    
    According to man pages, madvise returns :
    
    EBADF - the map exists, but the area maps something that isn't a file.
    
    Fixes bug 2995.
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bfdf37830111321e2cd1fe0102dd776ce93194d
Author: Andrey Panin <pazke@donpac.ru>
Date:   Wed Jul 27 11:43:58 2005 -0700

    [PATCH] consolidate CONFIG_WATCHDOG_NOWAYOUT handling
    
    Attached patch removes #ifdef CONFIG_WATCHDOG_NOWAYOUT mess duplicated in
    almost every watchdog driver and replaces it with common define in
    linux/watchdog.h.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7657e20e46e26b198b24e2aefc696410bbe889c9
Author: Brian Gerst <bgerst@didntduck.org>
Date:   Wed Jul 27 11:43:57 2005 -0700

    [PATCH] Fix warning in powernow-k8.c
    
    powernow-k8.c: In function `query_current_values_with_pending_wait':
    powernow-k8.c:110: warning: `hi' may be used uninitialized in this function
    
    Signed-off-by: Brian Gerst <bgerst@didntduck.org>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbaf364103cee15c895e2086723d0ad9ef47ae99
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Wed Jul 27 11:43:56 2005 -0700

    [PATCH] drm: via: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db1de1595d03d3ddea3e0548b20decb0a32e4258
Author: David Ranson <spam.david.trap@unsolicited.net>
Date:   Wed Jul 27 11:43:55 2005 -0700

    [PATCH] serial: MRi MRI-PCIDS1 dual port serial card
    
    Add support for the MRi PCIDS1 dual port serial card.  This card is a
    little controversial since it is the subject of a PCI vendor/device ID
    clash.  (See
    http://www.ussg.iu.edu/hypermail/linux/kernel/0303.1/0516.html).  I have
    for now just used the hex ID 0x950a.  The divisor was part calculated part
    iterated, so may not be exactly correct (but works for me at all settings
    between 300 - 115300 bps).
    
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e8c9e14e8fdce0af9f5eed7ce6dd26b91fc8f4e
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 11:43:55 2005 -0700

    [PATCH] statically link halfmd4
    
    For some reason halfmd4 isn't being linked into the kernel any more and
    modular ext3 wants it.
    
    So statically link the halfmd4 code into the kernel.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1aaf18ff9de1f37bf674236fc0779c3aaa65b998
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 11:43:54 2005 -0700

    [PATCH] check_user_page_readable() deadlock fix
    
    Fix bug identifued by Richard Purdie <rpurdie@rpsys.net>.
    
    oprofile calls check_user_page_readable() from interrupt context, so we
    deadlock over various VFS locks.
    
    But check_user_page_readable() doesn't imply either a read or a write of the
    page's contents.  Change __follow_page() so that check_user_page_readable()
    can tell __follow_page() that we're not accessing the page's contents, and use
    that info to avoid the troublesome lock-takings.
    
    Also, make follow_page() inline for the single callsite in memory.c to save a
    bit of stack space.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cfc11ed45e4c00750039e5a18c0fc0d681e19db
Author: Carsten Otte <cotte@freenet.de>
Date:   Wed Jul 27 11:43:52 2005 -0700

    [PATCH] fix xip sparse file handling in ext2
    
    Oliver Paukstadt from our test department is testing the xip patches in
    Linus' git-tree.  He found a problem that shows when reading a file that
    contains sparse blocks (holes) on a -o xip mounted ext2 filesystem: the
    BUG_ON() in fs/ext2/xip.c:40 triggers where it should not.  The problem was
    introduced by a cleanup in my previous patch, this patch fixes it.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1872bcebbcd6ad7ddd99e92fb1e4f3d19e73919c
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Jul 27 11:43:51 2005 -0700

    [PATCH] ub: fix for blank CDs
    
    This patch fixes a microcode lockup in my CD-ROM adapters when a blank CD
    is inserted.  However, do not try to burn CDs yet!  I'm pretty sure that
    trying it will end in coasters.
    
     - Fix a few cases where we were unable to resynchronize with replies
       for previous commands. The main thing is to keep reading replies
       in case of a stall. This is done with the new state CLRRS.
     - Since I am forgetting the basic state machine already, document it.
     - Move counter increments in the looping path in its own function.
     - Fix a harmless buglet in case CSW read fails to submit: do not
       override state.
     - Implement the Alan Stern's idea for adaptive signature checking.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90c5029e471636f21221bf66b9a46ada2ab79a22
Author: Andi Kleen <ak@muc.de>
Date:   Wed Jul 27 11:43:50 2005 -0700

    [PATCH] Undo mempolicy shared policy rbtree microoptimization
    
    All mempolicy changes must be inside the spinlock and readding the rb_erase
    prevents a crash while doing:
    
    > echo "1" > /tmp/numatest
    > numactl --length=0x4000 --shm /tmp/numatest --localalloc
    > numactl --length=0x2000 --offset=0 --shm /tmp/numatest --membind=0
    > numactl --length=0x2000 --offset=0x2000 --shm /tmp/numatest --membind=1
    > ipcs
    > ipcrm -M "the_key_value_of_this_shm_area"
    
    Based on a patch by John Blackwood
    
    Cc: <john.blackwood@ccur.com>
    Cc: <andrea@suse.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c223695634fb360ed65e5a811161853a05e46962
Author: V. ANANDA KRISHNAN <mansarov@us.ibm.com>
Date:   Wed Jul 27 11:43:49 2005 -0700

    [PATCH] jsm: warning fixes
    
    - updates the version
    
    - fix mixing of declarations and code.  The mixing of declarations and
      code displays warnings when used against RedHat RHEL4.0 distro (compiler
      version is 3.4.3-22.1) and hence I separated them out.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9539c1d495c8d92837e7b6382a1219ac275b94b2
Author: V. ANANDA KRISHNAN <mansarov@us.ibm.com>
Date:   Wed Jul 27 11:43:48 2005 -0700

    [PATCH] jsm: use dynamic major number allocation
    
    The jsm driver uses a static number of 253.  The major number 253 is a
    reserved for "LOCAL/EXPERIMENTAL USE" by both char and block devices.  So
    take advantage of the dynamic allocation of major number by the kernel.
    
    Signed-off-by: V. Ananda Krishnan <mansarov@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49f29915856435ad8e34a4a3a907b09682a5826e
Author: Olivier Blin <oblin@mandriva.com>
Date:   Wed Jul 27 11:43:47 2005 -0700

    [PATCH] i4l: add Olitec ISDN PCI card in hisax gazel driver
    
    This patch adds support for the Olitec ISDN PCI card in the hisax gazel
    driver.  The gazel driver supports this card, but wasn't aware of its PCI
    ids.  Users used to modify the PCI ids of a supported card in
    include/linux/pci_ids.h and recompile their kernel to get this card
    running, as said in most Howtos.  This patch makes the hisax gazel driver
    recognize the PCI ids of the Olitec ISDN PCI card.
    
    Signed-off-by: Olivier Blin <oblin@mandriva.com>
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b24b1033451fcc87087a692fc47ca45daebd51ac
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Jul 27 11:43:46 2005 -0700

    [PATCH] scsi_scan: check return code from scsi_sysfs_add_sdev
    
    Adds a missing check for an error return code from scsi_sysfs_add_sdev.
    This resolves entry #4863 in the OSDL bugzilla.  Although in that bug
    report the failure occurred because of a confusion over scanning vs.
    rescanning, in general add_sdev can fail for a number of reasons (the
    simplest being insufficient memory) and the caller should cope properly.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 104e49fc1e1656142869fab0e75d7df52b72eed9
Author: Ian Kent <raven@themaw.net>
Date:   Wed Jul 27 11:43:45 2005 -0700

    [PATCH] autofs4: fix infamous "Busy inodes after umount ..." message
    
    If the automount daemon receives a signal which causes it to sumarily
    terminate the autofs4 module leaks dentries.  The same problem exists with
    detached mount requests without the warning.
    
    This patch cleans these dentries at umount.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f94c8e1256fcb786e1918e30bdaeccf669bf63c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed Jul 27 11:43:44 2005 -0700

    [PATCH] Add pcibios_bus_to_resource for parisc
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Acked-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d912d1ff218195c248c770eb677726695e07aa40
Author: George Anzinger <george@mvista.com>
Date:   Wed Jul 27 11:43:44 2005 -0700

    [PATCH] itimer fixes
    
    Fix the recent off-by-one fix in the itimer code:
    
    1. The repeating timer is figured using the requested time
    	(not +1 as we know where we are in the jiffie).
    
    2. The tests for interval too large are left to the time_val to jiffie code.
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7343f01e326374e69666ca6001bdb6a7c67e9f7
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Wed Jul 27 11:43:42 2005 -0700

    [PATCH] watchdog: add missing 0x in alim1535_wdt.c
    
    Usually the device IDs are given in hex.  This one is a bit strange: it is
    without 0x in the first place and used with it some lines later.  I suspect
    the first one to be the wrong.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bba0e4670a4e1841a96b561dcc60ebe335049891
Author: Nigel Cunningham <ncunningham@cyclades.com>
Date:   Wed Jul 27 11:43:41 2005 -0700

    [PATCH] Address BUG: using smp_processor_id() in preemptible [00000001] code
    
    This patch fixes a warning in the disable_nonboot_cpus call in
    kernel/power/smp.c.
    
    Signed-off by: Nigel Cunningham <nigel@suspend2.net>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a14d4c898285623d1f5c338b659fa82cf4480fb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 11:43:41 2005 -0700

    [PATCH] drivers/pnp/pnpbios/rsparser.c: fix compile error with PCI=n
    
    drivers/pnp/pnpbios/rsparser.c: In function 'pnpbios_parse_allocated_irqresource':
    drivers/pnp/pnpbios/rsparser.c:67: error: too many arguments to function 'pcibios_penalize_isa_irq'
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab6862e6dab813ecde9ae7da506188dc1e9f11bb
Author: Jan Kara <jack@suse.cz>
Date:   Wed Jul 27 11:43:40 2005 -0700

    [PATCH] ext3: drop quota references before releasing inode
    
    We must drop references to quota structures before releasing the inode.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7e9a52ef0089492bba457dfb8eba1a54e19f24a
Author: Jan Kara <jack@suse.cz>
Date:   Wed Jul 27 11:43:39 2005 -0700

    [PATCH] ext2: drop quota reference before releasing inode
    
    We must drop references to quota structures before releasing the inode.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3bb8afd965159f155d4f629cbea158cbcc69275
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 27 11:43:38 2005 -0700

    [PATCH] reiserfs: fix deadlock in inode creation failure path w/ default ACL
    
    reiserfs_new_inode() can call iput() with the xattr lock held.  This will
    cause a deadlock to occur when reiserfs_delete_xattrs() is called to clean
    up.
    
    The following patch releases the lock and reacquires it after the iput.
    This is safe because interaction with xattrs is complete, and the relock is
    just to balance out the release in the caller.
    
    The locking needs some reworking to be more sane, but that's more intrusive
    and I was just looking to fix this bug.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9b3ad673460fc997a652cd58aa3a345d40e5218
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Jul 27 11:43:37 2005 -0700

    [PATCH] as-iosched tunable encoding fix
    
    AS is doing internal msec<->jiffies conversions twice, so the sysfs tunables
    which represent time are coming out wrong.  The switch from HZ=1000 exposed
    this.
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef2a701d444a4ea9790146e92756b0dde5070a15
Author: Nigel Cunningham <ncunningham@cyclades.com>
Date:   Wed Jul 27 11:43:36 2005 -0700

    [PATCH] Fix missing refrigerator invocation in jffs2
    
    Here's a patch to fix a missing refrigerator call in jffs2.
    
    Signed-off-by: Nigel Cunningham <nigel@suspend2.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e50e7a99d04774506f4e1dee51afba37125cd3c
Author: Nigel Cunningham <ncunningham@cyclades.com>
Date:   Wed Jul 27 11:43:35 2005 -0700

    [PATCH] Add missing tvaudio try_to_freeze()
    
    Tvaudio lacks a refrigerator call. This patch fixes that.
    
    Signed-off-by: Nigel Cunningham <ncunningham@suspend2.net>
    Cc: <video4linux-list@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e6c1f5facffd94000832d402be1ea75f73c90e3
Author: Nigel Cunningham <ncunningham@cyclades.com>
Date:   Wed Jul 27 11:43:34 2005 -0700

    [PATCH] try_to_freeze() call fixes
    
    Here are fixes for four try_to_freeze calls that are still (incorrectly)
    using a parameter after the recent try_to_freeze() changes.
    
    Signed-off-by: Nigel Cunningham <nigel@suspend2.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54264911ce8c3f4a9e7fc193bc78a85e04df7fa0
Author: Andi Kleen <ak@muc.de>
Date:   Wed Jul 27 11:43:34 2005 -0700

    [PATCH] x86_64: fix SMP boot lockup on some machines
    
    Fixes boot up lockups on some machines where CPU apic ids don't start with
    0
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d4579ed553e8bb29d580c08bfcabcb0826a89c3
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jul 27 11:43:33 2005 -0700

    [PATCH] uml: fix misdeclared function
    
    This fixes an interface which differed from its declaration, and includes
    the relevant header so that this doesn't happen again.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20a64f1d70a1a9cc001f2fec5ba1b0a4ff3f6bd5
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Wed Jul 27 11:43:32 2005 -0700

    [PATCH] uml: update module interface
    
    This patch replaces the deprecated MODULE_PARM function by the new
    module_param function.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb66504d65e54210d7dc55a0027d309ca5f51f83
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Jul 27 11:43:31 2005 -0700

    [PATCH] uml: add skas0 command-line option
    
    This adds the "skas0" parameter to force skas0 operation on SKAS3 host and
    shows which operating mode has been selected.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6b038a24a826fe22d9823722cfbbbd3ad7a3021
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:43:30 2005 -0700

    [PATCH] uml: add dependency to arch/um/Makefile for parallel builds
    
    the header file must be build before mk_user_constants.  Adding it as a
    direct dep doesnt work for some reason.
    
    arch/um/os-Linux/util/mk_user_constants.c:2:26: error: user-offsets.h: No such file or directory
    arch/um/os-Linux/util/mk_user_constants.c: In function 'main':
    arch/um/os-Linux/util/mk_user_constants.c:17: error: '__UM_FRAME_SIZE' undeclared (first use in this function)
    arch/um/os-Linux/util/mk_user_constants.c:17: error: (Each undeclared identifier is reported only once
    arch/um/os-Linux/util/mk_user_constants.c:17: error: for each function it appears in.)
    make[1]: *** [arch/um/os-Linux/util/mk_user_constants] Error 1
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8648373af214d3c74b81e78049a64dad986c1024
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 27 11:43:29 2005 -0700

    [PATCH] uml: readd missing define to arch/um/Makefile-i386
    
    scripts/Makefile.build:13: /Makefile: No such file or directory
    scripts/Makefile.build:64: kbuild: Makefile.build is included improperly
    
    the define was removed, but its still required to build some targets.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b5c7ae83704320e2afb0912f4c42eadabc7535b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Jul 27 11:43:28 2005 -0700

    [PATCH] md: when resizing an array, we need to update resync_max_sectors as well as size
    
    Without this, and attempt to 'grow' an array will claim to have synced the
    extra part without actually having done anything.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b38817dda45bc2990a8d593f3a1b4d444b2dcf4f
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Wed Jul 27 11:43:28 2005 -0700

    [PATCH] mips: fbdev Kcofnig fix
    
    arch/mips/Kconfig is defining CONFIG_FB as bool and drivers/video/Kconfig
    was changed a while ago to define it as tristate.  Remove the MIPS
    definition.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c10b873695c6a1de0d8ebab40b525575ca576683
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Wed Jul 27 11:43:27 2005 -0700

    [PATCH] Really __nocast-annotate kmalloc_node()
    
    One chunk was lost somewhere between my and Andrew's machine.
    
    Noticed by Victor Fusco.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c86cb127b2b7614903cb2a38db3207488a0405a
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jul 27 11:43:26 2005 -0700

    [PATCH] I2C-MPC: Restore code removed
    
    A previous patch to remove support for the OCP device model was way to
    generious and moved some of the platform device model code, oops.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 388b0925f59461cb482447ea87e6942b5653ee1d
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 11:43:25 2005 -0700

    [PATCH] user_mode_vm() build fix
    
    include/asm/ptrace.h: In function `user_mode_vm':
    include/asm/ptrace.h:67: `VM_MASK' undeclared (first use in this function)
    
    Cc: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48b0e5487fcdcb3421bda67666277348b2bd2661
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jul 27 16:08:44 2005 -0700

    [SPARC64]: Fix ugly dependency on NR_CPUS being a power-of-2.
    
    The page->flags D-cache dirty state tracking depended upon
    NR_CPUS being a power-of-2 via it's "NR_CPUS - 1" masking.
    
    Fix that to use a fixed (256 - 1) mask as that is the limit
    imposed by thread_info->cpu which is a "u8".
    
    Finally, add a compile time check that NR_CPUS is not greater
    than 256.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e43db7730e7cef7d37968ea789c41392519a864
Author: Matt Mackall <mpm@selenic.com>
Date:   Wed Jul 27 15:24:42 2005 -0700

    [NET]: Move in_aton from net/ipv4/utils.c to net/core/utils.c
    
    Move in_aton to allow netpoll and pktgen to work without the rest of
    the IPv4 stack. Fix whitespace and add comment for the odd placement.
    
    Delete now-empty net/ipv4/utils.c
    
    Re-enable netpoll/netconsole without CONFIG_INET
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 614d73edae68836f7659ee8efec90878e6215fb1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 23:00:05 2005 +0100

    [ARM SMP] Fix data corruption in test_* bitops
    
    If we found that the bit was already in the desired state, we
    would skip performing the operation, and write random data back.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7cee432a22bb328ea7a4012dacc5a3471fabeb07
Author: Nick Sillik <n.sillik@temple.edu>
Date:   Wed Jul 27 14:46:03 2005 -0700

    [NETFILTER]: Fix -Wunder error in ip_conntrack_core.c
    
    Signed-off-by: Nick Sillik <n.sillik@temple.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6d376756f2cf3478d5a4fdb8d18e958948366b9d
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Jul 27 14:42:45 2005 -0700

    [IB/mthca]: Use io_remap_pfn_range for PCI space
    
    Use io_remap_pfn_range to remap IO pages (remap_pfn_range is for memory).
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2181858bb814b51de8ec25b3ddd37cd06c53b0c9
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Jul 27 14:41:32 2005 -0700

    [IB/ipoib]: Fix unsigned comparisons to handle wraparound
    
    Fix handling of tx_head/tx_tail comparisons to handle wraparound.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit abdf119b4dad015803819c3d046d20cfbd393e87
Author: Gleb Natapov <glebn@voltaire.com>
Date:   Wed Jul 27 14:40:00 2005 -0700

    [IB/uverbs]: Add O_ASYNC support
    
    Add support for O_ASYNC notifications on userspace verbs
    completion and asynchronous event file descriptors.
    
    Signed-off-by: Gleb Natapov <glebn@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 42b1806d5cfc93bf8c3d7fa6e9e79e4ec860c678
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Jul 27 14:38:49 2005 -0700

    [IB/mthca]: Fix error CQ entry handling on mem-free HCAs
    
    Fix handling of error CQ entries on mem-free HCAs: the doorbell count
    is never valid so we shouldn't look at it.  This fixes problems exposed
    by new HCA firmware.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit a77be819f94fc55627ee257f496198ad703aaad4
Author: Kyle Moffett <mrmacman_g4@mac.com>
Date:   Wed Jul 27 14:22:30 2005 -0700

    [NET]: Fix setsockopt locking bug
    
    On Sparc, SO_DONTLINGER support resulted in sock_reset_flag being
    called without lock_sock().
    
    Signed-off-by: Kyle Moffett <mrmacman_g4@mac.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b833961bd30eec201b9a94eec36aa7ac96f9c9c0
Author: Keith Owens <kaos@sgi.com>
Date:   Thu Jul 21 23:41:00 2005 -0700

    [IA64] unwind.c uses wrong unat from switch_stack
    
    unwind.c can read the wrong unat bits from switch_stack.
    sw->caller_unat is the value of ar.unat when the task was blocked.
    sw->ar_unat is the value of ar.unat after doing st8.spill for r4-7.
    IOW, ar_unat is caller_unat with 4 bits changed.
    
    unw_access_gr() uses sw->ar_unat for r4-7 (correct), but it also uses
    sw->ar_unat for other scratch registers (incorrect).  sw->ar_unat
    should only be used for r4-7, everything else should use
    sw->caller_unat, unless modified by unwind info.  Using sw->ar_unat
    risks picking up the 4 bits that were overwritten when r4-7 were saved.
    
    Also this line is wrong
    	unw.sw_off[unw.preg_index[UNW_REG_PFS]] = SW(AR_UNAT);
    and should be
    	unw.sw_off[unw.preg_index[UNW_REG_PFS]] = SW(AR_PFS);
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 40a085c41dc3d5991fdf90ed2557cc06cce0590a
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jul 27 14:14:39 2005 -0700

    [SPARC]: Add inotify syscall entries.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbcd2a4cca1a6223e4f98661ef524919d322675e
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 27 13:04:35 2005 -0700

    [NET]: Improve presentation of networking driver families.
    
    Suggestion from Sam Ravnborg <sam@ravnborg.org>
    
    It causes all driver families to be displayed aligned immediately under the
    main network drivers heading (in menuconfig/xconfig/gconfig) instead of
    not being subordinate to (i.e., not indented) the Network device support
    heading at all.
    The improved network driver families are:
      token ring, wireless, PCMCIA, WAN, ATM, and S390.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eaa1c5d05947819643b2e72cbfc51ae2ddcf1991
Author: Hans-Juergen Tappe <hjt@sysgo.com>
Date:   Wed Jul 27 13:00:04 2005 -0700

    [IPV4]: Fix Kconfig syntax error
    
    From: "Hans-Juergen Tappe" <hjt@sysgo.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6de7dc2c4c713d037c19aa1e310d240f16973414
Merge: cbc3d65... 9e566d8...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Jul 27 12:50:08 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit d108919b2b5c064946c9bd30cbd4761d491cddb0
Author: Robert Love <rml@novell.com>
Date:   Wed Jul 27 08:58:00 2005 -0700

    [IA64] inotify: ia64 syscalls.
    
    Attached patch adds the inotify syscalls to ia64.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c2834cf4746cf13501efc3489b1895bce58a4ccb
Merge: 05cb784... 9e566d8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jul 27 10:36:54 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit cbc3d65ebcb0c494183d45cf202a53352cbf3871
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Jul 27 09:17:57 2005 -0500

    JFS: Improve sync barrier processing
    
    Under heavy load, hot metadata pages are often locked by non-committed
    transactions, making them difficult to flush to disk.  This prevents
    the sync point from advancing past a transaction that had modified the
    page.
    
    There is a point during the sync barrier processing where all
    outstanding transactions have been committed to disk, but no new
    transaction have been allowed to proceed.  This is the best time
    to write the metadata.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 9e566d8bd61f939b7f5d7d969f5b178571471cf9
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 21:41:38 2005 -0700

    [PATCH] x86_64 fsnotify build fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 479d0f41e50646a618c43f69af7af31a8f748433
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 21:41:38 2005 -0700

    [PATCH] softdog build fix
    
    drivers/char/watchdog/softdog.c:94: too many arguments to function `emergency_restart'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc1d3a9a78f0f602fa1e7993dba4d16ad9781bc1
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 21:41:37 2005 -0700

    [PATCH] eurotechwdt build fix
    
    drivers/char/watchdog/eurotechwdt.c:165: too many arguments to function `emergency_restart'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae6578fe9b65208dee8eda40629984efd23740c4
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Tue Jul 26 21:57:24 2005 -0400

    [PATCH] i386: clean up user_mode macros
    
     - make the new user_mode() return 0 or 1 (same as x86_64)
    
     - remove conditional jump from user_mode_vm() it's called every timer
       tick on each CPU on SMP)
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d7de66e2cc508761f050d1d4eaca88a6e6f711e
Merge: e93adf1... a4f1bac...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 26 16:43:39 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit e93adf1e6554511a6194f4785fd29af8e41104db
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Tue Jul 26 12:49:53 2005 -0700

    [PATCH] Change PowerPC MPC8xx maintainer
    
    As Marcelo has been spending a great deal of time working on MPC8xx
    systems of late (thanks!) and has more time than I do now for it, I'm
    handing this over to him.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4f1bac62564049ea4718c4624b0fadc9f597c84
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jul 26 15:43:17 2005 -0700

    [XFRM]: Fix possible overflow of sock->sk_policy
    
    Spotted by, and original patch by, Balazs Scheidler.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d46523ea32a79fbc8cd1237f9441f45cc3f02456
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Mon Jul 25 16:28:39 2005 -0400

    [PATCH] fix MAX_USER_RT_PRIO and MAX_RT_PRIO
    
    Here's the patch again to fix the code to handle if the values between
    MAX_USER_RT_PRIO and MAX_RT_PRIO are different.
    
    Without this patch, an SMP system will crash if the values are
    different.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cadf01c2fc0cd66dfef4956ef1a6482ed01c3150
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 26 15:39:28 2005 -0700

    [NETFILTER]: Fix ip_conntrack_put() prototype.
    
    The function is not inline.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18586e721636527cb5177467fb17e2350615978a
Author: Andreas Steinmetz <ast@domdv.de>
Date:   Sat Jul 23 13:42:04 2005 +0200

    [PATCH] Fix RLIMIT_RTPRIO breakage
    
    RLIMIT_RTPRIO is supposed to grant non privileged users the right to use
    SCHED_FIFO/SCHED_RR scheduling policies with priorites bounded by the
    RLIMIT_RTPRIO value via sched_setscheduler(). This is usually used by
    audio users.
    
    Unfortunately this is broken in 2.6.13rc3 as you can see in the excerpt
    from sched_setscheduler below:
    
            /*
             * Allow unprivileged RT tasks to decrease priority:
             */
            if (!capable(CAP_SYS_NICE)) {
                    /* can't change policy */
                    if (policy != p->policy)
                            return -EPERM;
    
    After the above unconditional test which causes sched_setscheduler to
    fail with no regard to the RLIMIT_RTPRIO value the following check is made:
    
                   /* can't increase priority */
                    if (policy != SCHED_NORMAL &&
                        param->sched_priority > p->rt_priority &&
                        param->sched_priority >
                                    p->signal->rlim[RLIMIT_RTPRIO].rlim_cur)
                            return -EPERM;
    
    Thus I do believe that the RLIMIT_RTPRIO value must be taken into
    account for the policy check, especially as the RLIMIT_RTPRIO limit is
    of no use without this change.
    
    The attached patch fixes this problem.
    
    Signed-off-by: Andreas Steinmetz <ast@domdv.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc00a6274b786f6863b32c79ff6f92aa0960b789
Merge: 0983f05... a8d11e3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 26 15:13:26 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 0983f0509480f95584f8e945e5b9c5310e9038f3
Merge: db776a1... 186efd5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 26 15:12:54 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm-smp

commit db776a14f327c20d4984ac4b724a934df34bfe31
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 26 14:50:02 2005 -0700

    Fix compiler warning in qla_iocb.c
    
    Remove bogus initialization that was re-done (correctly) later.

commit a8d11e3d0282e9607f65c73383c4030fd8f0e972
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jul 26 22:39:14 2005 +0100

    [PATCH] ARM: 2831/1: S3C2440 - split s3c2440 clocks from central clock code
    
    Patch from Ben Dooks
    
    Split the s3c2440 specific clocks from the arch clock support, to
    make the code clearer.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b35c67a46b025e8dc320b59fbe5c283094e1d7f5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:17:52 2005 -0600

    [PATCH] acpi: Don't call acpi_sleep_prepare from acpi_power_off
    
    Now that all of the code paths that call acpi_power_off
    have been modified to call either call kernel_power_off
    (which calls apci_sleep_prepare by way of acpi_shutdown)
    or to call acpi_sleep_prepare directly it is redundant to call
    acpi_sleep_prepare from acpi_power_off.
    
    So simplify the code and simply don't call acpi_sleep_prepare.
    
    In addition there is a little error handling done so if we
    can't register the acpi class we don't hook pm_power_off.
    
    I think I have done the right thing with the CONFIG_PM define
    but I'm not certain.  Can this code even be compiled if
    CONFIG_PM is false?
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6660316cb7a1a2c59a73a52870490c0f782f45c1
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:16:00 2005 -0600

    [PATCH] acpi_power_off: Don't switch to the boot cpu
    
    machine_power_off on i386 and x86_64 now switch to the
    boot cpu out of paranoia and because the MP Specification indicates it
    is a good idea on reboot, so for those architectures it is a noop.
    I can't see anything in the acpi spec that requires you to be on
    the boot cpu to power off the system, so this should not be an issue
    for ia64.  In addition ia64 has the altix a massive multi-node
    system where switching to the boot cpu sounds insane as we may
    hot removed the boot cpu.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0963aba54aa26c89114dca7257acf8c938bfec8a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:14:16 2005 -0600

    [PATCH] x86_64 sync machine_power_off with i386
    
    i386 machine_power_off was disabling the local apic
    and all of it's users wanted to be on the boot cpu.
    So call machine_shutdown which places us on the boot
    cpu and disables the apics.  This keeps us in sync
    and reduces the number of cases we need to worry about in
    the power management code.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 910de55c6653d76f90380c80f0b7a395f12019e3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:10:02 2005 -0600

    [PATCH] APM: Remove redundant call to set_cpus_allowed
    
    machine_power_off now always switches to the boot cpu so there
    is no reason for APM to also do that.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fa2564a6fde9815df969ef3547744a22f66ba9d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:08:53 2005 -0600

    [PATCH] i386 machine_power_off cleanup
    
    Call machine_shutdown() to move to the boot cpu
    and disable apics.  Both acpi_power_off and
    apm_power_off want to move to the boot cpu.
    and we are already disabling the local apics
    so calling machine_shutdown simply reuses
    code.
    
    ia64 doesn't have a special path in power_off
    for efi so there is no reason i386 should.  If
    we really need to call the efi power off path
    the efi driver can set pm_power_off like everyone
    else.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8e392e7c8f019657ff3ebe70a45d234990831db
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:07:01 2005 -0600

    [PATCH] machine_shutdown: Typo fix to actually allow specifying which cpu to reboot on
    
    This appears to be a typo I introduced when cleaning
    this code up earlier. Ooops.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68acc05d0120e19c850e1f347ee96055f5aa032f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:03:08 2005 -0600

    [PATCH] pcwd.c: Call kernel_power_off not machine_power_off
    
    The call appears to come from process context so kernel_power_off
    should be safe.  And acpi_power_off won't necessarily work if you just
    call machine_power_off.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdde86ac50357b6a811e3574e47d189e81a21444
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 12:01:17 2005 -0600

    [PATCH] swpsuspend: Have suspend to disk use factors of sys_reboot
    
    The suspend to disk code was a poor copy of the code in
    sys_reboot now that we have kernel_power_off, kernel_restart
    and kernel_halt use them instead of poorly duplicating them inline.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 804ebf46d51653e736108074473d9493398f2df9
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:59:54 2005 -0600

    [PATCH] 68328serial: sysrq should use emergency_reboot
    
    The 68328serial.c driver has a weird local reimplementation of
    magic sysrq.  The code is architecture specific enough that calling
    machine_restart() is probably ok.  But there is no reason not to call
    emergency_restart() so do so.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 970d32443e3d0be57a5cdc3de3752f528424b73d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:55:59 2005 -0600

    [PATCH] In hangcheck-timer.c call emergency_restart()
    
    If we've hung a clean reboot does not sound like a real
    option.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f82567e55fcd25bb7addf2cfd8b79f36f409dc2e
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:53:19 2005 -0600

    [PATCH] Fix watchdog drivers to call emergency_reboot()
    
    If a watchdog driver has decided it is time to reboot the system
    we know something is wrong and we are in interrupt context
    so emergency_reboot() is what we want.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4de8b9b76017365572f778332d74fe050d9c8c2a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:51:06 2005 -0600

    [PATCH] Update sysrq-B to use emergency_restart()
    
    sysrq calls into the reboot path from an interrupt handler
    we can either push the code do into process context and
    call kernel_restart and get a clean reboot or we can simply
    reboot the machine, and increase our chances of actually
    rebooting.  emergency_reboot() seems like the closest match
    to what we have previously done, and what we want.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f048ea81df94f72dee0d42b3d9b941c03b8c9c5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:49:23 2005 -0600

    [PATCH] Call emergency_reboot from panic
    
    We know the system is in trouble so there is no question if this
    is an emergecy :)
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff31977782a05504f2586ec9e3e5ab4b09a4c893
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:47:32 2005 -0600

    [PATCH] Use kernel_power_off in sysrq-o
    
    We already do all of the gymnastics to run from process context
    to call the power off code so call into the power off code cleanly.
    
    This especially helps acpi as part of it's shutdown logic should
    run acpi_shutdown called from device_shutdown which was not
    being called from here.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62b3a04d75d2dc9480d5ad3b60f4258e548a6a83
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:45:31 2005 -0600

    [PATCH] x86_64: Implemenent machine_emergency_restart
    
    It is not safe to call set_cpus_allowed() in interrupt
    context and disabling the apics is complicated code.
    So unconditionally skip machine_shutdown in machine_emergency_reboot
    on x86_64.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c9a90073c75bffbb89763a0c7d44a2e44e9e628
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:44:21 2005 -0600

    [PATCH] x86_64: Fix reboot_force
    
    We only want to shutdown the apics if reboot_force
    is not specified.  Be we are doing this both
    in machine_shutdown which is called unconditionally
    and if (!reboot_force).  So simply call machine_shutdown
    if (!reboot_force).  It looks like something
    went weird with merging some of the kexec patches for
    x86_64, and caused this.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a1421f81b64e49ce932125e7222a2d7b7f87f13
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:41:26 2005 -0600

    [PATCH] i386: Implement machine_emergency_reboot
    
    set_cpus_allowed is not safe in interrupt context
    and disabling apics is complicated code so don't
    call machine_shutdown on i386 from emergency_restart().
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59586e5a262a29361c45c929ea3253d4aec830b0
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:36:01 2005 -0600

    [PATCH] Don't export machine_restart, machine_halt, or machine_power_off.
    
    machine_restart, machine_halt and machine_power_off are machine
    specific hooks deep into the reboot logic, that modules
    have no business messing with.  Usually code should be calling
    kernel_restart, kernel_halt, kernel_power_off, or
    emergency_restart. So don't export machine_restart,
    machine_halt, and machine_power_off so we can catch buggy users.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16dcb4bbda579c4e3d80048b755ac124d8fab21a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:32:34 2005 -0600

    [PATCH] Fix the arguments to machine_restart on cris
    
    It appears machine_restart has been working cris just
    by luck.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c9034735eccbf82608a4602c59aaf6053ea9416
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:29:55 2005 -0600

    [PATCH] Add emergency_restart()
    
    When the kernel is working well and we want to restart cleanly
    kernel_restart is the function to use.   But in many instances
    the kernel wants to reboot when thing are expected to be working
    very badly such as from panic or a software watchdog handler.
    
    This patch adds the function emergency_restart() so that
    callers can be clear what semantics they expect when calling
    restart.  emergency_restart() is expected to be callable
    from interrupt context and possibly reliable in even more
    trying circumstances.
    
    This is an initial generic implementation for all architectures.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abcd9e51f5b832439b119d530db1353c12fd4073
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:27:34 2005 -0600

    [PATCH] Make ctrl_alt_del call kernel_restart to get a proper reboot.
    
    It is obvious we wanted to call kernel_restart here
    but since we don't have it the code was expanded inline and hasn't
    been correct since sometime in 2.4.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a00ea1e18228e5ef99d4780671fda97226bda30
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:24:14 2005 -0600

    [PATCH] Refactor sys_reboot into reusable parts
    
    Because the factors of sys_reboot don't exist people calling
    into the reboot path duplicate the code badly, leading to
    inconsistent expectations of code in the reboot path.
    
    This patch should is just code motion.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47f61f397cc08b5a9a815bd03cb10c48dab66034
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Jul 26 11:21:38 2005 -0600

    [PATCH] Add missing device_suspsend(PMSG_FREEZE) calls.
    
    In the recent addition of device_suspend calls into
    sys_reboot two code paths were missed.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6fa657b9d5c892c6a92912632c4b5715955b4f8
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 14:11:30 2005 -0700

    [PATCH] qla2xxx: Kconfig dependency fix
    
    *** Warning: "fc_remote_port_block" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "scsi_is_fc_rport" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_remote_port_unblock" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_remote_port_rolechg" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_release_transport" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_remove_host" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_remote_port_add" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    *** Warning: "fc_attach_transport" [drivers/scsi/qla2xxx/qla2xxx.ko] undefined!
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a168bddc2f13686336a86f8235b84347edac13a
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 14:11:28 2005 -0700

    [PATCH] qla: remove anonymous union
    
    Older gcc's dont support anonymous unions, so this driver gets hundreds of
    error.
    
    Fortunately the fix is easy...
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89373de7dd010832d8b68cb37dabb33ff5a688bb
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 26 14:08:38 2005 -0700

    [PATCH] inotify: fix oops fix
    
    Cc: Robert Love <rml@novell.com>
    Cc: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 725b38ab5401c73cedc1b1d913782fadcd0f624a
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:19:29 2005 -0400

    [PATCH] inotify: add x86-64 syscall entries
    
    Add inotify syscall entries to x86-64.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d25cb934b00436e2243bf3970793b8e04ad9b873
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:19:20 2005 -0400

    [PATCH] inotify: add missing hook to sys32_open
    
    Add missing fsnotify_open() hook to sys32_open().
    
    Add fsnotify_open() hook to sys32_open() on x86-64.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5ca844a9d795e97c08bc7901c62a48c28469eb0
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:17:34 2005 -0400

    [PATCH] inotify: check retval in init
    
    Check for (unlikely) errors in the filesystem initialization stuff in
    our module_init() function.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b2ccf0cc15af717263c7cfe5d0aaf5ac057489e
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:13:43 2005 -0400

    [PATCH] inotify: change default limits
    
    Change default inotify limits: Maximum instances per user to 128 and
    maximum events per queue to 16k.  The max instances used to be 128; the
    change to 8 was a mistake.  Memory consumption is fine.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5eb22cbcdb849886c2584389faff5afb56c23876
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:12:19 2005 -0400

    [PATCH] inotify: exit path cleanups
    
    Handle error out paths better.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 783bc29bbc5d6625a4669d3eb1d989a8fb275d43
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:10:08 2005 -0400

    [PATCH] inotify: oops fix
    
    Bug fix: Ensure that the fd passed to inotify_add_watch() and
    inotify_rm_watch() belongs to inotify.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33ea2f52b8758ef62ae4a9d2f91821c47d999ee9
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:08:37 2005 -0400

    [PATCH] inotify: use fget_light
    
    As an optimization, use fget_light() and fput_light() where possible.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b680716ed28baf549f777fb125fc23ba975985c5
Author: Robert Love <rml@novell.com>
Date:   Mon Jul 25 15:07:13 2005 -0400

    [PATCH] inotify: misc. cleanup
    
    Miscellaneous invariant clean up, comment fixes, and so on.  Trivial
    stuff.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d986010ad13a00b83851238d52601d6092df40e
Merge: 6b6a93c... e10fb91...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 26 13:28:47 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit 186efd5275bbe7ffb73d939c1ce5690682668200
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jul 26 19:51:26 2005 +0100

    [PATCH] ARM SMP: Mark device mappings as "device" in ARMv6 parlance
    
    ARMv6 introduces memory types into the page tables.  Mark devices
    mappings with the "shared device" memory type.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6d9b37a3a80195d317887ff81aad6a58a66954b5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jul 26 19:44:26 2005 +0100

    [PATCH] ARM SMP: Add ARMv6 memory barriers
    
    Convert explicit gcc asm-based memory barriers into smp_mb() calls.
    These change between barrier() and the ARMv6 data memory barrier
    instruction depending on whether ARMv6 SMP is enabled.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9560782f9a68a5de3e72bc3ba71317f373844549
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jul 26 19:39:31 2005 +0100

    [PATCH] ARM SMP: Use exclusive load/store for __xchg
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 821ca478867433502fc614b4be83e0362cd7e67e
Author: Michael Gernoth <michael@gernoth.net>
Date:   Tue Jul 26 19:21:47 2005 +0100

    [PATCH] ARM: 2830/1: Fix Jornada 720 PCMCIA-support
    
    Patch from Michael Gernoth
    
    This patch lets the Jornada 720 PCMCIA-driver compile again. The
    resulting driver has been tested on a Jornada with a CF-card, which
    was mounted and accessed successfully.
    
    Signed-off-by: Michael Gernoth <michael@gernoth.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7fcc113c3021a42db90e1ad27a7bec267b6e13e3
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jul 26 19:20:27 2005 +0100

    [PATCH] ARM: 2829/1: S3C2410 - split s3c2440 irq specifics from core irq.c
    
    Patch from Ben Dooks
    
    Remove the need for the #ifdefs and place the IRQ handling code for
    the s3c2440 into a new file, which is only compiled when the
    s3c2440 cpu support is enabled.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5730b7d6529e6e894ee3c2e1c68125c0532ad394
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jul 26 19:20:26 2005 +0100

    [PATCH] ARM: 2828/1: BAST - remove static map of ASIX area
    
    Patch from Ben Dooks
    
    There is no point in mapping this staticaly, the driver is going
    to ioremap() the area as it sees fit. Also correct the dates on
    the changelog comments
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 02cdad3f932d533e5cbde1b15092418ce7af1a70
Author: Dimitry Andric <dimitry.andric@tomtom.com>
Date:   Tue Jul 26 19:20:25 2005 +0100

    [PATCH] ARM: 2819/1: Fix several S3C24x0 IIS defines
    
    Patch from Dimitry Andric
    
    - Change S3C2440_IISCON_MPLL to S3C2440_IISMOD_MPLL:
      The S3C2440 IISCON register doesn\'t control the master clock selection, this is done with the IISMOD register.
    - Correct S3C2410_IISMOD_256FS and S3C2410_IISMOD_384FS:
      This is set via bit 2 of IISMOD, not bit 1.
    - Add S3C2410_IISCON_PSCEN (prescaler enable), for completeness\' sake.
    
    Signed-off-by: Dimitry Andric <dimitry.andric@tomtom.com>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit de8fd087b280797977b012a4275ee53ff2999f3f
Merge: 18190cc... 6b6a93c...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Jul 26 09:55:10 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 18190cc08d70a6ec8ef69f0f6ede021f7cb3f9b8
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Jul 26 09:29:13 2005 -0500

    JFS: Fix i_blocks accounting when allocation fails
    
    A failure in dbAlloc caused a directory's i_blocks to be incorrectly
    incremented, causing jfs_fsck to find the inode to be corrupt.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 52fbae2a392b6e084195bedc7a280991a94c14d0
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 25 19:54:35 2005 -0700

    [ATM]: speedtch: Revert 86cf42e4e029b83110cf98692420239103363dbf
    
    It was already fixed more sufficiently by Andrew Morton's
    change 843c944fb86e5e31ee7b319172e657ea22301322.
    
    Noted by Duncan Sands.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 05cb784c81a0fd1f97732156ea464bd392ce875a
Merge: 3190186... 6b6a93c...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Jul 25 15:46:44 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit fc87670b6cd63abc6fc4e3a115741984750d1fbc
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 25 12:45:32 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 747e8f8bff56955374521fa4d488e702d4b0c04f
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:33:22 2005 -0700

    [TG3]: add 5780 fiber support
    
    Add 5780S support by adding a new tg3_setup_fiber_mii_phy() function and
    a timer function for parallel link detection. 5780S uses standard MII
    registers for 1000BaseX and runs in GMII mode as opposed to TBI mode on
    older serdes chips.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef7f5ec0deb2bcdc005f30f6f75f79c65c577cf5
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:32:25 2005 -0700

    [TG3]: disallow jumbo TSO on 5780
    
    Disallow jumbo TSO on 5780 due to hardware restrictions.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fdfec1726b14b4b2121adcfcbba98d4cc1a61751
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:31:48 2005 -0700

    [TG3]: consolidate all DMA water mark settings
    
    Consolidate all DMA watermark settings for standard and jumbo frames on
    all chips in tg3_init_bufmgr_config() and add new settings for 5780.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e72aad48c3790636bfa006f3b0027852ccad47e
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:31:17 2005 -0700

    [TG3]: add variable buffer size for standard ring
    
    Add a new rx_pkt_buf_sz to the tg3 structure to support variable buffer
    sizes on the standard ring.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f893dc6ec890058d926224c8aa254d8621e0ea3
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:30:38 2005 -0700

    [TG3]: add 5780 basic jumbo frame support
    
    Add basic jumbo frames support for 5780. This chip supports jumbo frames
    on the standard receive ring without the jumbo ring. The
    TG3_FLAG_JUMBO_ENABLE is changed to TG3_FLAG_JUMBO_RING_ENABLE to
    indicate using the jumbo ring on 5704 and older chips. A new
    TG3_FLG2_JUMBO_CAPABLE flag is added to indicate jumbo frames support
    with or without the jumbo ring.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4cf78e4fb678807e3f8265c9e9031a84f5c601f0
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 25 12:29:19 2005 -0700

    [TG3]: add 5780 basic support
    
    Add 5780 PCI IDs, chip IDs, and other basic support.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2783f3a625b2aba943ef94623e277557a91a448
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Jul 25 08:58:54 2005 -0500

    JFS: Don't set log_SYNCBARRIER when log->active == 0
    
    If a metadata page is kept active, it is possible that the sync barrier logic
    continues to trigger, even if all active transactions have been phyically
    written to the journal.  This can cause a hang, since the completion of the
    journal I/O is what unsets the sync barrier flag to allow new transactions
    to be created.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 6b6a93c6876ea1c530d5d3f68e3678093a27fab0
Merge: e892278... 7686ee1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 24 20:39:30 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit e89227889cec6b66758b44c83f78dba337e5d699
Merge: 4e8fd22... db7d9a4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 24 20:38:44 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 7686ee1ad976efeddf10583f013462c66408ae51
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Jul 24 19:44:23 2005 -0700

    [EMATCH]: Remove feature ifdefs in meta ematch.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db7d9a4eb700be766cc9f29241483dbb1e748832
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:36:26 2005 -0700

    [SPARC64]: Move syscall success and newchild state out of thread flags.
    
    These two bits were accesses non-atomically from assembler
    code.  So, in order to eliminate any potential races resulting
    from that, move these pieces of state into two bytes elsewhere
    in struct thread_info.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cdd5186f753b23ab51f86679bdc4cc698ab0b893
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:36:13 2005 -0700

    [SPARC64]: Privatize sun5_timer.
    
    It is only used by some localized code in irq.c, and also
    delete enable_prom_timer() as that is totally unused.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5019a578f18cf3a76829626e91e5469dbd4a738
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:35:56 2005 -0700

    [SPARC64]: Kill totally unused inline functions from asm/spitfire.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 620de54675e76f1369326bbe1fc75aff88917063
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:35:42 2005 -0700

    [SPARC64]: Simplify asm/rwsem.h slightly.
    
    rwsem_atomic_update and rwsem_atomic_add can be implemented
    straightly using atomic_*() routines.
    
    Also, rwsem_cmpxchgw() is totally unused, kill it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6593eaed814d50214d6056c683d52ac63153730e
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:35:28 2005 -0700

    [SPARC64]: Non-atomic bitops do not need volatile operations
    
    Noticed this while comparing sparc64's bitops.h to ppc64's.
    We can cast the volatile memory argument to be non-volatile.
    
    While we're here, __inline__ --> inline.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b502421aac89c8d4e61ecc89a70065a33305a0b
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:35:08 2005 -0700

    [SPARC]: Fix __KERNEL_SYSCALLS__ defining in envctrl.c and bbc_envctrl.c
    
    It needs to happen before any header includes because nowadays
    some things implicitly include asm/unistd.h which ends up being
    before the __KERNEL_SYSCALLS__ define gets done.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2d1aea8dd02ad35658864de52a3e0f9f033e63f4
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Jul 24 19:34:47 2005 -0700

    [SPARC]: sbus/vfc_i2c: remove sleep_on() usage
    
    Use wait-queue directly instead of the deprecated sleep_on()
    function. This required adding a local wait-queue. Also use new (added in
    separate patch to K-J) usecs to jiffies function to convert value.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cb39d263e751f9cca8055bcacfe5ec863dfe2705
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Jul 24 19:34:33 2005 -0700

    [SPARC]: sbus/envctrl: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to guarantee
    the task delays as expected. Change the units of poll_interval to
    msecs as it is only used in this delay.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70c83375bb47cadd60fdb923ad913d4f4be75aba
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Jul 24 19:34:19 2005 -0700

    [SPARC]: sbus/aurora: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of
    schedule_timeout() to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 4564203d76599973da9c5cbcd93057252414ac9e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 24 19:33:55 2005 -0700

    [SPARC]: Remvoe APM_RTC_IS_GMT from config.
    
    I can't see any effect of this option outside the i386-specific APM code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 48647feed9f7a2d839c6ada12147b341833646e8
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 24 19:30:28 2005 -0700

    [W1]: Do not use NFLOG netlink number.
    
    Use the reserved by never used NETLINK_SKIP value instead.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 227510c7f175c44b12cdff6eab316e53dbf71f92
Author: Cal Peake <cp@absolutedigital.net>
Date:   Sun Jul 24 19:30:06 2005 -0700

    [IPV6]: fix implicit declaration of function `xfrm6_tunnel_unregister'
    
    Signed-off-by: Cal Peake <cp@absolutedigital.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4e8fd22bd421d7aa279bcb76189505a1f96bb7bf
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 24 12:13:40 2005 +0100

    [PATCH] ARM SMP: Fix ARMv6 spinlock and semaphore implementations
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 33fdfa97f2b3aab698ef849ec50dcc5102017f0a
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Sun Jul 24 00:53:32 2005 -0500

    Input: synaptics - fix setting packet size on passthrough port.
    
    Synaptics driver used child->type to select either 3-byte or 4-byte
    packet size for the pass-through port; this gives wrong results for
    the newer protocols. Change the check to use child->pktsize instead.
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5ac7ba3ff599d66ffde182676f2e4fbcac61a2fe
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun Jul 24 00:50:03 2005 -0500

    Input: check keycodesize when adjusting keymaps
    
    When changing key mappings we need to make sure that the new
    keycode value can be stored in dev->keycodesize bytes.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2c2a68b84752cb1090fd2456e8b83e5bcc0e73c4
Merge: c94c0d2... 056a876...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 23 17:01:26 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit c94c0d201f1c1a62184f4f220c1615347aafbee7
Merge: 8ed693d... 53776eb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 23 16:59:55 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 53776eb4acdd3ec576d75b61b656ef8d51e430ea
Author: Lucas Correia Villa Real <lucasvr@gobolinux.org>
Date:   Sun Jul 24 00:15:46 2005 +0100

    [PATCH] ARM: 2825/1: S3C2410: turns %d into %ld on DMA printk
    
    Patch from Lucas Correia Villa Real
    
    This patch replaces the sizeof()'s %d specifier by %ld on a S3C2410 DMA
    printk.
    
    Signed-off-by: Lucas Correia Villa Real <lucasvr@gobolinux.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8ed693d29b25bbd88471ec043cc01581419d0481
Merge: 72538d8... 668d74c...
Author: Luming Yu <luming.yu@intel.com>
Date:   Sat Jul 23 00:34:41 2005 -0400

    /home/lenb/linux-2.6 branch 'acpi-2.6.12'

commit 668d74c04c16bb69de564e25e85dd94eeb0175d9
Author: Luming Yu <luming.yu@intel.com>
Date:   Sat Jul 23 00:26:33 2005 -0400

    ACPI: delete unnecessary EC console messages
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4534
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 72538d8565b0205240d88591b72db3c7f3f1881a
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Jul 22 18:29:40 2005 -0400

    Remove "noreplacement" kernel command line option.
    
    It is no longer valid to not replace instructions, since we depend on
    different behaviour depending on CPU capabilities.
    
    If you need to limit the capabilities of the replacements (because the
    boot CPU has features that non-boot CPU's do not have, for example), you
    need to explicitly disable those capabilities that are not shared across
    all CPU's.
    
    For example, if your boot CPU has FXSR, but other CPU's in your system
    do not, you need to use the "nofxsr" kernel command line, not disable
    instruction replacement per se.

commit 2847e3478c3d8119eedc3e0cb85a308b21f681dd
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Jul 22 18:19:20 2005 -0400

    x86: use alternative instructions for fnsave/fxsave too
    
    This one ends up using an inline asm format that claims to read memory
    and then clobber it (rather than just write it directly), which made it
    easier to use the existing "alternative_input()" infrastructure support.
    
    Now the fxsave code matches the fxrstor.

commit 38afd6adf6bccd7176e88c07cac104d3639aa30d
Merge: 8ed1383... 261688d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 22 16:33:00 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 261688d01ec07d3a265b8ace6ec68310fbd96a96
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 22 14:43:52 2005 -0700

    [PKT_SCHED]: em_meta: Kill TCF_META_ID_{INDEV,SECURITY,TCVERDICT}
    
    More unusable TCF_META_* match types that need to get eliminated
    before 2.6.13 goes out the door.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Thomas Graf <tgraf@suug.ch>

commit 8ed1383fb7b6685968588141d5934e0e6715e954
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Jul 22 16:06:16 2005 -0400

    x86: make restore_fpu() use alternative assembler instructions
    
    It's really just a single instruction, conditional on whether the CPU
    supports FXSR or not, so implement it as such instead of making it a
    function that queries FXSR dynamically.
    
    This means that the instruction just gets automatically rewritten to the
    correct one at boot-time.

commit d3984a6b6abac6203868f0e9095c0ed9e33ece03
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 22 12:52:47 2005 -0700

    [NETFILTER]: Fix ip6t_LOG MAC format
    
    I broke this in the patch that consolidated MAC logging.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 74bb421da7f39e70ab636ad46ef85ea1178786c5
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 22 12:51:38 2005 -0700

    [NETFILTER]: Use correct byteorder in ICMP NAT
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 21f930e4abdcb9649f26e5b959c14dddee4e600b
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 22 12:51:03 2005 -0700

    [NETFILTER]: Wait until all references to ip_conntrack_untracked are dropped on unload
    
    Fixes a crash when unloading ip_conntrack.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d04b4f8c1c9766e49fad6a141fc61cb30db69a5c
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 22 12:50:29 2005 -0700

    [NETFILTER]: Fix potential memory corruption in NAT code (aka memory NAT)
    
    The portptr pointing to the port in the conntrack tuple is declared static,
    which could result in memory corruption when two packets of the same
    protocol are NATed at the same time and one conntrack goes away.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c1217deeb148ff8ab838ba4f1875d0f52dea343
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 22 12:49:30 2005 -0700

    [NETFILTER]: Fix deadlock in ip6_queue
    
    Already fixed in ip_queue, ip6_queue was missed.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b339a18b81a1f6ca1455559594f5df872b9e59f4
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Jul 22 15:23:47 2005 -0400

    Fix up incorrect "unlikely()" on %gs reload in x86 __switch_to
    
    These days %gs is normally the TLS segment, so it's no longer zero.  As
    a result, we shouldn't just assume that %fs/%gs tend to be zero
    together, but test them independently instead.
    
    Also, fix setting of debug registers to use the "next" pointer instead
    of "current".  It so happens that the scheduler will have set the new
    current pointer before calling __switch_to(), but that's just an
    implementation detail.

commit 28e212fb360ce2568edd60b93d60683d5ad24146
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 22 11:47:25 2005 -0700

    [PKT_SCHED]: Kill TCF_META_ID_REALDEV from meta ematch.
    
    It won't exist any longer when we shrink the SKB in 2.6.14,
    and we should kill this off before anyone in userspace starts
    using it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Thomas Graf <tgraf@suug.ch>

commit c40c202493d18de42fcd0b8b5d68c22aefb70f03
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Jul 22 11:08:44 2005 -0500

    JFS: Fix typo in last patch
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 056a8763fc036639441a6dc49b61e57bc632af6e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jul 22 10:15:04 2005 +0100

    [PATCH] Serial: No need to check for priv != NULL in remove_one
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14a59e1829cd5782ad1a8979e594578f49f3e2c1
Author: Loic Le Loarer <loic.le-loarer+lk@polytechnique.org>
Date:   Thu Jul 21 14:16:54 2005 -0700

    [EQL]: Proper num_slaves decrement
    
    Signed-off-by: Loic Le Loarer <loic.le-loarer+lk@polytechnique.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4acdbdbe5089c06d5e0c7e96783fcc4414ded00a
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Thu Jul 21 13:14:46 2005 -0700

    [NETFILTER]: ip_conntrack_expect_related must not free expectation
    
    If a connection tracking helper tells us to expect a connection, and
    we're already expecting that connection, we simply free the one they
    gave us and return success.
    
    The problem is that NAT helpers (eg. FTP) have to allocate the
    expectation first (to see what port is available) then rewrite the
    packet.  If that rewrite fails, they try to remove the expectation,
    but it was freed in ip_conntrack_expect_related.
    
    This is one example of a larger problem: having registered the
    expectation, the pointer is no longer ours to use.  Reference counting
    is needed for ctnetlink anyway, so introduce it now.
    
    To have a single "put" path, we need to grab the reference to the
    connection on creation, rather than open-coding it in the caller.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab9b6339381d340779e8b5957561aed41155a270
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 20 21:32:26 2005 +0100

    [PATCH] ARM SMP: Mark mroe CPU init data with __cpuinitdata
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4aa49d130df9209707a97786a55a3f584b7345e9
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Wed Jul 20 12:01:46 2005 -0700

    [ATM]: zatm: mailbox converted to pci_alloc_consistent()
    
    mailbox converted to pci_alloc_consistent()
    
    - request_region() is not needed: zatm_init_one() issues
      pci_request_regions();
    - the warning related to kfree(zatm_dev->mbx_start) disappears;
    
    Compiled with i386 and sparc64 as target.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b72f6eccb0fc516070f2de469f73870cb6cb1149
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 19 14:13:54 2005 -0700

    [NET]: Fix tc_verd thinko in skb_clone()
    
    It was overwriting the computer n->tc_verd value over
    and over with skb->tc_verd, by mistake.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0303770deb834c15ca664a9d741d40f893c92f4e
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 19 14:03:34 2005 -0700

    [NET]: Make ipip/ip6_tunnel independant of XFRM
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c877efb207bf4629cfa97ac13412f7392a873485
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jul 19 14:01:51 2005 -0700

    [IPV4]: Fix up lots of little whitespace indentation stuff in fib_trie.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 23a534e7b1ad2650002bbc236493791ac23440ee
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 19 14:00:53 2005 -0700

    [NET]: NETCONSOLE must depend on INET
    
    NETCONSOLE=y and INET=n results in the following compile error:
    
    net/built-in.o: In function `netpoll_parse_options':
    : undefined reference to `in_aton'
    net/built-in.o: In function `netpoll_parse_options':
    : undefined reference to `in_aton'
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb3f8f5e22cdee8138e654963e371ad337830efb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 19 14:00:13 2005 -0700

    [NET]: BRIDGE_EBT_ARPREPLY must depend on INET
    
    BRIDGE_EBT_ARPREPLY=y and INET=n results in the following compile error:
    
    net/built-in.o: In function `ebt_target_reply':
    ebt_arpreply.c:(.text+0x68fb9): undefined reference to `arp_send'
    make: *** [.tmp_vmlinux1] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abaacad9bcb3f118cc802f527ab5d7c41b63f83a
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 19 13:59:17 2005 -0700

    [IPV4]: Don't select XFRM for ip_gre
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6aef4fdfeaec5f2c66415f2cafa98a3ff927501f
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 19 13:58:40 2005 -0700

    [NET]: Only build flow.o if CONFIG_XFRM=y
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 86cf42e4e029b83110cf98692420239103363dbf
Author: Duncan Sands <baldrick@free.fr>
Date:   Tue Jul 19 13:57:17 2005 -0700

    [ATM]: [speedtch] cure atm_printk() macro gcc-2.95 compile error
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88e9fa8a54cf4d66ee8fc1d855e82de827233d74
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue Jul 19 13:56:53 2005 -0700

    [ATM]: Trivial spelling fix patch for net/Kconfig
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5938a7b580bb7a738ee349048565ac76e6f3f5d7
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Tue Jul 19 13:56:29 2005 -0700

    [ATM]: [ambassador] Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9e42614585dddd544a56907ff5fd5ca55411967
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Tue Jul 19 13:56:01 2005 -0700

    [ATM]: [firestream] fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e8676d113a097e19d18492e85215f0f3cc86e43
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jul 19 13:55:38 2005 -0700

    [ATM]: [he] remove linux/version.h include
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1bd232b641a0d0ef184a5154409ef38aebb3155
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Tue Jul 19 13:55:14 2005 -0700

    [ATM]: [idt77252] use time_after() macro
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 322361b3712af97c19ab730b410f9ae5d9aad4c3
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Jul 19 13:54:44 2005 -0700

    [ATM]: allow bind() on point-to-multpoint svcs (from Martin Whitaker <martin_whitaker@ntlworld.com>)
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 43f51fce0a637e6cdf1285b0fa09b8398ff14834
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Jul 19 13:54:19 2005 -0700

    [ATM]: [zatm] eliminate kfree warning (from Tobias Hirning <sskyman@web.de>)
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 21d1ee8b375bcd180f1d6b8ccbb8d8f938596310
Merge: 3d9b1cd... f60f700...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Jul 19 13:46:53 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 3f1c81ff10187396e6d0fd01df82ab0cec256c96
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 18 17:10:55 2005 -0700

    [EMATCH]: Kill TCF_META_ID_TCCLASSID reference from meta ematch as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6876f95f201ce2d62367d85dd793c1fee351d7a6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 18 13:55:19 2005 -0700

    [IPV4]: fix IP_FIB_HASH kconfig warning
    
    This patch fixes the following kconfig warning:
      net/ipv4/Kconfig:92:warning: defaults for choice values not supported
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 54208991e15fa00e37a9d172ac0d87191a832165
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 18 13:45:12 2005 -0700

    [NET]: Kconfig: NETCONSOLE and NETPOLL together
    
    Put NETCONSOLE and NETPOLL options together since they are related.
    This cuts down on the hassle of flipping back and forth between
    the Networking menu and the Network drivers menu to change their
    config settings.
    
    Tested with menuconfig, gconfig, and xconfig.
    gconfig has a small problem with this.  I think that it's
    a bug in gconfig and I will take it up with Romain Lievin.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d1ad1ff299dd908d07c5e5f27f88bbdb235eb7a5
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Mon Jul 18 13:44:10 2005 -0700

    [SCTP]: Fix potential null pointer dereference while handling an icmp error
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ee71a29eb5e341fe977c5ad7a43782c29bd9cb9e
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Mon Jul 18 13:38:07 2005 -0700

    [SCTP]: Audit return code of create_proc_*
    
    From: Christophe Lucas <clucas@rotomalug.org>
    
    Audit return of create_proc_* functions.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e2bf521d9728bfae9b6c3d484614e5962d0b5afd
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Mon Jul 18 13:36:38 2005 -0700

    [NET]: Fix "nocast type" warnings in skbuff.h
    
    From: Victor Fusco <victor@cetuc.puc-rio.br>
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37da647d994cdac7e0bc8d2a365fbda403939a2b
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Mon Jul 18 13:35:43 2005 -0700

    [NETLINK]: Fix "nocast type" warnings
    
    From: Victor Fusco <victor@cetuc.puc-rio.br>
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 23af27eb8fa9ea8614138c4cded7a16cb4197a55
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 18 13:34:35 2005 -0700

    [PKT_SCHED]: Kill TCF_META_ID_TCCLASSID.
    
    Thomas Graf states:
    
    > I used to mark such ids as obsolete in the header but since
    > skb is on diet anyway and there has been no official
    > iproute2 release with the ematch bits included it might be
    > a better idea to remove the ids from the header completely.
    > Those that have picked up my patch on netdev shouldn't care
    > about a ABI breakage, actually I doubt that someone is using
    > it already.
    
    So here's the patch to remove it.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 452f299da3253f65020143f743c2e207b752547b
Author: Thomas Graf <tgraf@suug.ch>
Date:   Mon Jul 18 13:30:53 2005 -0700

    [PKT_SCHED]: Reduce branch mispredictions in pfifo_fast_dequeue
    
    The current call to __qdisc_dequeue_head leads to a branch
    misprediction for every loop iteration, the fact that the
    most common priority is 2 makes this even worse.  This issue
    has been brought up by Eric Dumazet <dada1@cosmosbay.com>
    but unlike his solution which was to manually unroll the loop,
    this approach preserves the possibility to increase the number
    of bands at compile time.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7c7ed4dbc66c5f4dfa5615cdfc5009af3b3b137
Author: Thomas Graf <tgraf@suug.ch>
Date:   Mon Jul 18 13:29:49 2005 -0700

    [PKT_SCHED]: Remove debugging leftover from textsearch ematch
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fbc0dc0df54be06586d712ebf6958816e3b1b2b7
Author: Andrey Panin <pazke@donpac.ru>
Date:   Mon Jul 18 11:38:09 2005 +0100

    [PATCH] Serial: Add support for SIIG Quartet serial card
    
    Add support for SIIG Quartet Serial card.  This card has Oxford
    Semiconducor 16954 quad UART which is clocked by 10x faster
    (18.432 MHz) quartz.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 65cc3370ef3fb56b9b423f282a8204f8cce66e32
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jul 18 10:24:32 2005 +0100

    [PATCH] ARM: 2818/1: BAST - Use platform device for SuperIO 16550s
    
    Patch from Ben Dooks
    
    Use platform device for the 16500 UARTs in the onboard
    SuperIO controller.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bd6f68af298cab4e059f8489b56e46ae36243fcc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 17 21:35:41 2005 +0100

    [PATCH] ARM SMP: Mark CPU init functions/data with __cpuinit/...data
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3190186362466658f01b2e354e639378ce07e1a9
Merge: 08848e4... f60f700...
Author: Tony Luck <tony.luck@intel.com>
Date:   Sun Jul 17 12:30:06 2005 -0700

    Auto merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 772a9e631ccad0423ed6d08acb3a4b1084ae2613
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Sun Jul 17 20:15:36 2005 +0100

    [PATCH] ARM: 2687/1: i.MX framebuffer: make dmacr register platform configurable
    
    Patch from Sascha Hauer
    
    The dmacr needs different settings on some boards. This patch makes the
    register configurable by the platform part.
    Also we have imxfb_disable_controller(), so lets use it.
    
    Signed-off-by: Steven Scholz
    Signed-off-by: Sascha Hauer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 246b49768bc96d942ab0e2a17aab6fc3d2e011da
Author: Alexander Schulz <alex@shark-linux.de>
Date:   Sun Jul 17 20:12:08 2005 +0100

    [PATCH] ARM: 2816/1: Shark: boot kernel images bigger than 1 MB
    
    Patch from Alexander Schulz
    
    Up to now, shark kernels were limited to one megabyte compressed
    size. As the kernels get bigger, this becomes more and more
    uncomfortable. So I added a loop to copy 3 MB instead of one
    and added some comments.
    
    Signed-off-by: Alexander Schulz <alex@shark-linux.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b66da4a4859b0be3f12575863bf1d873116d1947
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 17 10:54:50 2005 +0100

    [PATCH] ARM: Remove global nwfpe register variable
    
    Recent changes to nwfpe broke the build with some gcc versions:
    
    In file included from arch/arm/nwfpe/softfloat.c:33:
    arch/arm/nwfpe/fpa11.h:32: global register variable follows a function definition
    make[1]: *** [arch/arm/nwfpe/softfloat.o] Error 1
    
    Since we now ensure that the kernel stack is empty when returning
    to user space, we can now access the userspace registers with
    reference to the kernel stack using current_thread_info(), rather
    than remembering the stack pointer at the time nwfpe was called.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f60f700876cd51de9de69f3a3c865d95e287a24d
Merge: c6c621b... 6d283d2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 16 20:06:51 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit c6c621b3a977b20d7ceffd3debcacbe3de7c0e87
Merge: af6ea9c... b752341...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 16 20:05:41 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit af6ea9ca23504fe620412826a420dca9c43a8bf6
Merge: 1fa4aad... c514720...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 16 11:47:51 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit 1fa4aad496b9c96fcde6c8f905a43ae6733e5a79
Merge: 9fb1759... 19870da...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 16 10:24:32 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/tglx/mtd-2.6

commit b7523418f6af9093c462341c08c2233f44f7a28d
Author: Alexander Schulz <alex@shark-linux.de>
Date:   Sat Jul 16 17:17:18 2005 +0100

    [PATCH] ARM: 2815/1: Shark: new defconfig, fixes with __io and serial ports
    
    Patch from Alexander Schulz
    
    This patch brings a new default config file for the shark and
    fixes a compilation issue with io addressing and a runtime
    problem with the serial ports, where I corrected a wrong
    regshift value.
    These are all shark specific files so I hope it is ok to
    put them in one patch.
    
    Signed-off-by: Alexander Schulz <alex@shark-linux.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 878cf4e1c7be6bffde3ace888a65ac3d43c127bb
Author: Michael Burian <dynmail1@gassner-waagen.at>
Date:   Sat Jul 16 16:43:49 2005 +0100

    [PATCH] ARM: 2794/1: Add "Image" and "mach-types.h" to dontdiff list
    
    Patch from Michael Burian
    
    comment in "mach-types.h" tells that it should not be patched
    "Image" is a binary, just as zImage, uImage and friends are
    
    Signed-off-by: Michael Burian <dynmail1@gassner-waagen.at>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 109d89ca0ee76138e04b41726b7f719c7df65e88
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jul 16 16:43:33 2005 +0100

    [PATCH] ARM: Allow register_undef_hook to be called with IRQs off
    
    Preserve the interrupt status across a call to register_undef_hook.
    This allows it to be called while interrupts are disabled.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 54ea06f6afe85aaf419e51343d4e4b5599197113
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jul 16 15:21:51 2005 +0100

    [PATCH] ARM: Convert bitops to use ARMv6 ldrex/strex instructions
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6d283d271674b1127881ebf082266a2c3fe6e0e4
Author: Olaf Hering <olh@suse.de>
Date:   Sat Jul 16 09:59:00 2005 +0100

    [PATCH] Serial: Remove linux/version.h
    
    changing CONFIG_LOCALVERSION rebuilds too much, for no appearent reason.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 661f83a67c2e360d5a4d2406cc28379c909f94bf
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jul 16 09:30:53 2005 +0100

    [PATCH] Serial: Move deprecation of register_serial forward to September
    
    I think it's about time to make the build a little more vocal about the
    expiry of these functions.  Due to recent discussions with problems in
    the console initialisation vs power manglement, I'd like to move the
    date forward to September.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 19870da7ea2fc483bf73a189046a430fd9b01391
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Jul 15 14:53:51 2005 +0100

    [MTD] NAND: Fix broken bad block scan for 16 bit devices
    
    The previous change to read a single byte from oob breaks the
    bad block scan on 16 bit devices, when the byte is on an odd
    address. Read the complete oob for now.
    Remove the unused arguments from check_short_pattern()
    Move the wait for ready function so it is only executed when
    consecutive reads happen.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 2c4eec9802ae753a4973f0a0d71f8d154e86fd31
Merge: 5d15788... d6e1860...
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Sat Jul 16 09:20:01 2005 +0200

    Merge with rsync://fileserver/linux

commit 9fb1759a3102c26cd8f64254a7c3e532782c2bb8
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Fri Jul 15 19:17:44 2005 -0700

    [PATCH] x86_64: TASK_SIZE fixes for compatibility mode processes
    
    A malicious 32bit app can have an elf section at 0xffffe000.  During
    exec of this app, we will have a memory leak as insert_vm_struct() is
    not checking for return value in syscall32_setup_pages() and thus not
    freeing the vma allocated for the vsyscall page.
    
    Check the return value and free the vma incase of failure.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6e1860312cd8c33ad1f17d1af22fb6aa1f2cf83
Merge: 38d84c3... 46906c4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 15 17:52:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 08848e446bcd2130c26945be966446389d25bcc2
Merge: 46906c4... 38d84c3...
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Jul 15 16:59:00 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 38d84c3bd6dd22bdb1f797c87006931133d71aea
Author: Patrick Boettcher <patrick.boettcher@desy.de>
Date:   Fri Jul 15 12:20:26 2005 -0700

    [PATCH] dvb: cx88 output mode fix
    
    The output_mode needs to be set for the Hauppauge Nova-T DVB-T
    (cx88-dvb.c).
    
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4851d3aaa550b7b62553dd19fcadc7b586da4f17
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Fri Jul 15 10:00:41 2005 -0700

    [NET PCMCIA]: drivers/net/pcmcia/smc91c92_cs.c : Use of time_after macro
    
    From: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    
    Use of the time_after() macro, defined at linux/jiffies.h, which deal
    with wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8178345c4f12f4413e5620fc86a6b0381c41bc9
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Fri Jul 15 09:59:26 2005 -0700

    [WAN]: drivers/net/wan/: use of time_after macro
    
    From: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    
    Use of the time_after() macro, defined at linux/jiffies.h, which deal
    with wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9f04f5847c17d9933c5bd795c6c3740e96058e9
Author: Robert Love <rml@novell.com>
Date:   Fri Jul 15 12:21:07 2005 -0400

    [PATCH] inotify: MAINTAINERS
    
    Add a MAINTAINERS entry for Inotify.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a806c510de490318846b53bbfec463d02ca274b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Jul 15 03:56:35 2005 -0700

    [PATCH] md/raid1: clear bitmap when fullsync completes
    
    We need to be careful differentiating between a resync of a complete array,
    in which we can clear the bitmap, and a resync of a degraded array, in
    which we cannot.
    
    This patch cleans all that up.
    
    Cc: Paul Clements <paul.clements@SteelEye.com>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1287ba1ba810aae1f8b81e32560d5d3bf3ff9f0
Author: Michal Ostrowski <mostrows@watson.ibm.com>
Date:   Fri Jul 15 03:56:33 2005 -0700

    [PATCH] rocket.c: Fix ldisc ref count handling
    
    If bailing out because there is nothing to receive in rp_do_receive(),
    tty_ldisc_deref is not called.  Failure to do so increases the ref count
    and causes release_dev() to hang since it can't get the ref count to 0.
    
    Signed-off-by: Michal Ostrowski <mostrows@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f97933d0fd13920d7d53b6e0107bb674b3a1f0b
Author: Robert Love <rml@novell.com>
Date:   Fri Jul 15 03:56:33 2005 -0700

    [PATCH] inotify: documentation update
    
    Clean up and expand some of the inotify documentation.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35e422c967d3208f188e3096c9f603ac7333fb1b
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Jul 15 03:56:32 2005 -0700

    [PATCH] visws: reexport pm_power_off
    
    More fallout from the i386_ksyms.c cleanups.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afa597ba20e9ef55fc6283c1a564854b1c9f13c0
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Fri Jul 15 03:56:30 2005 -0700

    [PATCH] execute-in-place fixes
    
    This patch includes feedback from Andrew and Christoph. Thanks for
    taking time to review.
    
    Use of empty_zero_page was eliminated to fix compilation for architectures
    that don't have it.
    
    This patch removes setting pages up-to-date in ext2_get_xip_page and all
    bug checks to verify that the page is indeed up to date.  Setting the page
    state on mapping to userland is bogus.  None of the code patchs involved
    with these pages in mm cares about the page state.
    
    still on my ToDo list: identify a place outside second extended where
    __inode_direct_access should reside
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5287ba132ff742e595d42c28b66cbba19522c4e
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Jul 15 03:56:28 2005 -0700

    [PATCH] v4l: bug fixes for tuner, cx88 and tea5767
    
    - In CX88 code, some cards needs to have audio reprogramed after changing
      video channel;
    
    - Tuner autodetection code seems not to work on some cards.  Now,
      no_autodetect insmod option allows disabling autodetection code;
    
    - Minor fixes in tea5767 to reduce integer trunc;
    
    - There are some new Pixelview Ultra Pro cards that doesn't use TEA5767
      for radio.  As autodetection is capable of checking for tea, radio tuners
      and addresses removed.
    
    - CX88 version number incremented.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1eb29128c644581fa51f822545921394ad4f719f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Jul 15 03:56:27 2005 -0700

    [PATCH] Fix raid0's attempt to divide by 64bit numbers
    
    Apparently sector_div is only guaranteed to work with a 32bit divisor, even
    on 64bit architectures.  So allow for this in raid0.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 030babac6ae54df64ae3bba4685ecb1d8d8dd8c3
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Fri Jul 15 03:56:25 2005 -0700

    [PATCH] vt.c build fix
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d9b1cdd2455017c6aa25bc2442092b81438981f
Author: Qu Fuping <qufuping@ercist.iscas.ac.cn>
Date:   Fri Jul 15 10:36:08 2005 -0500

    JFS: fsync wrong behavior when I/O failure occurs
    
    This is half of a patch that Qu Fuping submitted in April.  The first part
    was applied to fs/mpage.c in 2.6.12-rc4.
    
    jfs_fsync should return error, but it doesn't wait for the metadata page to
    be uptodate, e.g.:
    jfs_fsync->jfs_commit_inode->txCommit->diWrite->read_metapage->
    __get_metapage->read_cache_page reads a page from disk. Because read is
    async, when read_cache_page: err = filler(data, page), filler will not
    return error, it just submits I/O request and returns. So, page is not
    uptodate.  Checking only if(IS_ERROR(mp->page)) is not enough, we should
    add "|| !PageUptodate(mp->page)"
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 56d1254917d9f301a8e24155cd3f2236e642cb7d
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Jul 15 09:43:36 2005 -0500

    JFS: Remove assert statement in dbJoin & return -EIO instead
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 9d853c3757ef74ded5ae564d68370f22208fb88b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jul 15 07:41:31 2005 -0700

    [CRYPTO]: Fix zero-extension bug on 64-bit architectures.
    
    Noticed by Ken-ichirou MATSUZAWA.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 463a4f76a79bce00ca8964e0b2ebf7f10f376965
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Jul 15 01:51:56 2005 -0500

    Input: i8042 - don't use negation to mark AUX data
    
    Currently i8042_command() negates data coming from the AUX port
    of keyboard controller; this is not a very reliable indicator.
    Change i8042_command() to fail if response to I8042_CMD_AUX_LOOP
    is not coming from AUX channel and get rid of negation.
    
    Based on patch by Vojtech Pavlik.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7b4019d04895de7407c9989895c3664c24ed01f7
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Jul 15 01:50:08 2005 -0500

    Input: psmouse - wheel mice (imps, exps) always have 3rd button
    
    There are wheel mice that respond to Logitech probes and report
    that they have only 2 buttons (such as e-Aser mouse) and this
    stops the wheel from being used as a middle button. Change the
    driver to always report BTN_MIDDLE capability if a wheel is
    present.
    
    Also, never reset BTN_RIGHT capability in logips2pp code - there
    are no Logitech mice that have only one button and if some other
    mice happen to respond to Logitech's query we could do the wrong
    thing.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5d157885f383ccc0660c011fa488ae4edb77ab16
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Fri Jul 15 08:14:44 2005 +0200

    [JFFS2] Fix node allocation leak
    
    In the rare case of failing to write the cleanmarker
    the allocated node was not freed.
    
    Pointed out by Forrest Zhao
    Initial cleanup by Joern Engel
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 00be3e7e5cc3ca80e035b387e883d5ec10d7b897
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jul 14 15:15:39 2005 -0500

    JFS: Remove bogus WARN_ON statement and some dead code
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e10fb91c4dc81a4ae47caf0828df152f600f2546
Author: James Bottomley <jejb@titanic.(none)>
Date:   Thu Jul 14 11:54:17 2005 -0500

    [SCSI] fix function prototype warning
    
    int_to_scsilun() takes a pointer to a struct scsi_lun in it's
    prototype, so add this structure to scsi_device.h to avoid declaration
    inside function prototype warnings.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 46906c4415f88cebfad530917bada0835d651824
Author: Ian Wienand <ianw@gelato.unsw.edu.au>
Date:   Wed Jul 13 21:09:00 2005 -0700

    [IA64] Fix undefined reference to can_cpei_retarget for simulator
    
    The simulator build doesn't turn on ACPI, so doesn't have a definition
    of can_cpei_retarget.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ba460e48064edeb57e3398eb8972c58de33f11ea
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Jul 14 00:33:47 2005 -0700

    [PATCH] Option Card driver update, Maintainer entry
    
    This patch updates the Option Card driver:
    - remove a deadlock
    - add sponsor notice
    - add new card
    - renamed the device to what's usually printed on it
    - removed some dead code
    - clean up a bunch of irregular whitespace (end-of-line, tabs)
    
    Also add a MAINTAINERS entry for the Option Card driver.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98848fa83bb6a4572ad55daeb312182dec9bed58
Author: Olaf Hering <olh@suse.de>
Date:   Thu Jul 14 00:33:45 2005 -0700

    [PATCH] ratelimit the ieee1394 IR legacy activated messages
    
    running coriander1 with an Apple iSight produces lots of dmesg output.
    
    Jul 13 22:14:17 ibook kernel: ieee1394: raw1394: /dev/raw1394 device initialized
    Jul 13 22:15:28 ibook kernel: ohci1394: fw-host0: IR legacy activated
    Jul 13 22:15:59 ibook last message repeated 208 times
    Jul 13 22:17:00 ibook last message repeated 762 times
    Jul 13 22:18:01 ibook last message repeated 914 times
    Jul 13 22:18:17 ibook last message repeated 238 times
    Jul 13 22:18:17 ibook kernel: ieee1394: unsolicited response packet received - no tlabel match
    Jul 13 22:18:17 ibook kernel: ohci1394: fw-host0: IR legacy activated
    
    its less noisy with the patch:
    
    Jul 14 08:03:08 ibook kernel: ieee1394: raw1394: /dev/raw1394 device initialized
    Jul 14 08:03:26 ibook kernel: ohci1394: fw-host0: IR legacy activated
    Jul 14 08:03:42 ibook last message repeated 10 times
    Jul 14 08:03:47 ibook kernel: printk: 63 messages suppressed.
    Jul 14 08:03:47 ibook kernel: ohci1394: fw-host0: IR legacy activated
    Jul 14 08:03:52 ibook kernel: printk: 74 messages suppressed.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2d2b5cb8e5d8787f009eeb3bbca52687bd42a77
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:44 2005 -0700

    [PATCH] remove EXPORT_SYMBOL for root_dev
    
    Remove ROOT_DEV after unexporting it in the previous patch, as requested time
    ago by Christoph Hellwig.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Christoph Hellwig <hch@infradead.org>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0d43df931870997467042931e8fb7657375d327
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:43 2005 -0700

    [PATCH] uml: hostfs: unuse ROOT_DEV
    
    Minimal patch removing uses of ROOT_DEV; next patch unexports it.  I've
    opposed this, but I've planned to reintroduce the functionality without using
    ROOT_DEV.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Christoph Hellwig <hch@infradead.org>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20d0021394c1b070bf04b22c5bc8fdb437edd4c5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:43 2005 -0700

    [PATCH] uml: allow building as 32-bit binary on 64bit host
    
    This patch makes the command:
    
    make ARCH=um SUBARCH=i386
    
    work on x86_64 hosts (with support for building 32-bit binaries).  This is
    especially needed since 64-bit UMLs don't support 32-bit emulation for guest
    binaries, currently.  This has been tested in all possible cases and works.
    
    Only exception is that I've built but not tested a 64-bit binary, because I
    hadn't a 64-bit filesystem available.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecc354a90af90a80dcaccc750f5f3e5e7c83112d
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:41 2005 -0700

    [PATCH] uml: reintroduce pcap support
    
    The pcap support was not working because of some linking problems (expressing
    the construct in Kbuild was a bit difficult) and because there was no user
    request.  Now that this has come back, here's the support.
    
    This has been tested and works on both 32 and 64-bit hosts, even when
    "cross-"building 32-bit binaries.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e0a21812427313f8ee8521688e81bfcc6f207a2
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:41 2005 -0700

    [PATCH] uml: fix hppfs error path
    
    Fix the error message to refer to the error code, i.e.  err, not count, plus
    add some cosmetical fixes.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c30385ae479ec4774bdc1048726aeb15cde0d21
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:38 2005 -0700

    [PATCH] uml: gcc 2.95 fix and Makefile cleanup
    
    1) Cleanup an ugly hyper-nested code in Makefile (now only the arith.
       expression is passed through the host bash).
    
    2) Fix a problem with GCC 2.95: according to a report from Raphael Bossek,
       .remap_data : { arch/um/sys-SUBARCH/unmap_fin.o (.data .bss) } is expanded
       into: .remap_data : { arch/um/sys-i386 /unmap_fin.o (.data .bss) }
    
    (because I didn't use ## to join the two tokens), thus stopping linking.  Pass
    the whole path from the Makefile as a simple and nice fix.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Raphael Bossek <raphael.bossek@gmx.de>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e5e55923e315e8198f46f24f7ca37e1fd9aa102
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:37 2005 -0700

    [PATCH] uml: consolidate modify_ldt
    
    *) Reorganize the two cases of sys_modify_ldt to share all the reasonably
       common code.
    
    *) Avoid memory allocation when unneeded (i.e.  when we are writing and the
       passed buffer size is known), thus not returning ENOMEM (which isn't
       allowed for this syscall, even if there is no strict "specification").
    
    *) Add copy_{from,to}_user to modify_ldt for TT mode.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1feb8d2d7396748fb3bd6795d09bbfbdd4c03dff
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:36 2005 -0700

    [PATCH] uml: workaround host bug in "TT mode vs. NPTL link fix"
    
    A big bug has been diagnosed on hosts running the SKAS patch and built with
    CONFIG_REGPARM, due to some missing prevent_tail_call().
    
    On these hosts, this workaround is needed to avoid triggering that bug,
    because "to" is kept by GCC only in EBX, which is corrupted at the return of
    mmap2().
    
    Since to trigger this bug int 0x80 must be used when doing the call, it rarely
    manifests itself, so I'd prefer to get this merged to workaround that host
    bug, since it should cause no functional change.  Still, you might prefer to
    drop it, I'll leave this to you.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcb01b8a67476e6f748086e626df8424cc27036d
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 14 00:33:34 2005 -0700

    [PATCH] uml: fix lvalue for gcc4
    
          Russell King <rmk+lkml@arm.linux.org.uk>
    
    This construct is refused by GCC 4, so here's the (corrected) fix.  Thanks to
    Russell for noticing a stupid mistake I did when first sending this.
    
    As he noted, the code is largely suboptimal however it currently works, and
    will be fixed shortly.  Just read the access_ok check on fp which is NULL, or
    the pointer arithmetic below which should be done with a cast to void*:
    
     	frame = (struct rt_sigframe __user *)
     		round_down(stack_top - sizeof(struct rt_sigframe), 16) - 8;
    
    The code shows clearly that has been taken from
    arch/x86_64/kernel/signal.c:setup_rt_frame(), maybe in a bit of a hurry.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3952db66efee4f22f3c6a0fd02a1e7071556a8d6
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 14 00:33:33 2005 -0700

    [PATCH] dvb: LGDT3302 QAM lock bug fix
    
    Fix QAM lock bug.  Previously, it was necessary to first scan in VSB before
    attempting to get a QAM lock.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fce2cf62e4bd9c24717009865ac00940cb664b8
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Tue Jul 12 15:57:13 2005 -0700

    [SCSI] Redundant this_count check in sd_init_command()
    
    I was going over the scsi I/O submit path, when sd_init_command
    construct the scsi command, this_count is already checked in the
    previous else if clause.  Why does it need to check it again in
    the last else block?
    
    Patch to delete the spurious check.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0f34e3f53378a11c9ecba0f8165da50e8b01d53f
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Tue Jul 12 17:06:14 2005 -0700

    [SCSI] Redundant memset in scsi_alloc_sgtable
    
    scsi_init_io calls scsi_alloc_sgtable and then calls blk_rq_map_sg
    to initialize the scatterlist structure.  blk_rq_map_sg() already
    memset the structure for every new segment.  That makes the memset
    in scsi_alloc_sgtable unnecessary.
    
    Patch to delete the extra memset in scsi_alloc_sgtable.  Tested on
    a x86_64 machine.  Looks stable to me.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2f4701d8274c8663f5c50323dc72fefa24b55091
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Jul 13 22:05:03 2005 -0400

    [SCSI] add int_to_scsilun() function
    
    One of the issues we had was reverting the midlayers lun value
    into the 8byte lun value that we wanted to send to the device.
    Historically, there's been some combination of byte swapping,
    setting high/low, etc. There's also been no common thread between
    how our driver did it and others.  I also got very confused as
    to why byteswap routines were being used.
    
    Anyway, this patch is a LLDD-callable function that reverts the
    midlayer's lun value, stored in an int, to the 8-byte quantity
    (note: this is not the real 8byte quantity, just the same amount
    that scsilun_to_int() was able to convert and store originally).
    
    This also solves the dilemma of the thread:
    http://marc.theaimsgroup.com/?l=linux-kernel&m=112116767118981&w=2
    
    A patch for the lpfc driver to use this function will be along
    in a few days (batched with other patches).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 77d74143612c1dab6c055dac21f965929ba0a7e6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jul 8 18:00:36 2005 -0700

    [SCSI] qla2xxx: Cleanup FC remote port registration.
    
    Cleanup FC remote port registration.
    
    Due to the inherent behaviour (an immediate scan) of adding
    a 'target'-role-capable rport via fc_remote_port_add(),
    split the registration into two steps -- addition as
    unknown-type role, then use fc_remote_port_rolchg() with
    appropriate role (based on PLOGI/PRLI bits).  This allows
    for a more cleaner rport->dd_data management as can be seen
    with the simplified qla2xxx_slave_alloc() function.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 88c2666351f41a7d4459e79594f687a356f5e57c
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jul 8 17:59:26 2005 -0700

    [SCSI] qla2xxx: Consolidate ISP24xx chip reset logic.
    
    Consolidate ISP24xx chip reset logic.
    
    Consolidate near-duplicate RISC reset logic from
    qla24xx_reset_chip() and qla24xx_chip_diag().  Also, after
    initiating a soft-reset, insure the firmware has completed
    all NVRAM accesses before continuing.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f0883ac6a74b403f0f2e91166ba06227cc4690e6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jul 8 17:58:43 2005 -0700

    [SCSI] qla2xxx: Add firmware version number to qla24xx_fw_version_str().
    
    Add firmware version number to qla24xx_fw_version_str().
    
    Original code was accidently trimmed during port.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 84e29308ede3edb4f03911246c33d697ff18722e
Author: Mark Haverkamp <markh@osdl.org>
Date:   Thu Jul 7 13:40:00 2005 -0700

    [SCSI] aacraid: Fix sgmap error
    
    The wrong sgmap structure is being assigned in aac_send_raw_srb.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 97cbe08ff8e78b075ed0ff64c99be8fb2d40d03f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:32:47 2005 -0700

    [SCSI] qla2xxx: Update version number to 8.01.00b5-k.
    
    Update version number to 8.01.00b5-k.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cc4731f5b4539faea237bacd170a27a230a7e724
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:32:37 2005 -0700

    [SCSI] qla2xxx: Correct maximum supported lun and target-id definitions.
    
    Correct maximum supported lun and target-id definitions.
    
    The driver uses command-IOCBs which support a maximum lun
    value of 0xffff -- correct #define to reflect the change.
    Also, remove superfluous MAX_TARGET definition.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ae91193cd5bc80b4d62b1d4f0e7f3fea48f41ccd
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:32:27 2005 -0700

    [SCSI] qla2xxx: Update copyright banner.
    
    Update copyright banner.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f04a311fdc85d580526ef25eb547628042b1e510
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:32:17 2005 -0700

    [SCSI] qla2xxx: Firmware updates.
    
    Firmware updates.
    
    Resync with latest 21xx firmware      -- 1.19.25.
    Resync with latest 22xx firmware      -- 2.02.08.
    Resync with latest 23xx/63xx firmware -- 3.03.15.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fa2a1ce53d4b869b74da9a770770c79f9af64914
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:32:07 2005 -0700

    [SCSI] qla2xxx: Code scrubbing.
    
    Code scrubbing.
    
     - Remove trailing whitespace from driver files.
     - Remove unused #defines and inlines.
     - Standardize on C comments (// -> /* */)
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ba5140b48e35aa4e4b57eb6db5cface63d7bd712
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:57 2005 -0700

    [SCSI] qla2xxx: NVRAM id-list updates.
    
    NVRAM id-list updates.
    
    Resync with latest NVRAM subsystem ID list.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fca297037127e524e8f61b3fc1c7a1886e5d757b
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:47 2005 -0700

    [SCSI] qla2xxx: Add OS initialization codes for ISP24xx recognition.
    
    Add OS initialization codes for ISP24xx recognition.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0107109ed69c9e04b6fa35ac41d870c74dcce3fc
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:37 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx initialization routines.
    
    Add ISP24xx initialization routines.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9a853f71804d80e862362f6d0743d06955305752
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:27 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx ISR routines.
    
    Add ISP24xx ISR routines.
    
    Add appropriate glue-code for ISP24xx support -- this
    included generalizing some of the core handling
    routines (qla2x00_async_event() [pull-up retrieval of
    mailbox values] and qla2x00_status_entry()].  Fixup
    2100/2300 ISRs to handle the new conventions.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2b6c0cee90cecbce35fb6d65fed94f22e5063be0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:17 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx IOCB manipulation routines.
    
    Add ISP24xx IOCB manipulation routines.
    
    Add appropriate glue-code for ISP24xx support while
    manipulting IOCB packets.  Add an ISP24xx specific
    'start_scsi' routine due to command-type-7 layout
    changes.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 459c537807bd72cce7b007fb218bb5a658a6c3c1
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:31:07 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx flash-manipulation routines.
    
    Add ISP24xx flash-manipulation routines.
    
    Add read/write flash manipulation routines for the ISP24xx.
    Update sysfs NVRAM objects to use generalized accessor
    functions.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c7c63574ff3e568ca374e9f05e30b8d7d64273e
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:57 2005 -0700

    [SCSI] qla2xxx: Add MBX command routines for ISP24xx support.
    
    Add MBX command routines for ISP24xx support.
    
    Generalize several routines [qla2x00_load_ram_ext(),
    qla2x00_execute_fw(), qla2x00_verify_checksum()] to handle
    larger addressing space.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8c958a99d6a903ce4ffaa6780f3425a8567db9e6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:47 2005 -0700

    [SCSI] qla2xxx: Generalize SNS generic-services routines.
    
    Generalize SNS generic-services routines.
    
    Consolidate completion-status checking while adding support
    for the ISP24xx.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6d9b61ed94fd9097f81adfa78d31c4613d9b3ae4
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:36 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx diagnostic routines.
    
    Add ISP24xx diagnostic routines.
    
    Add function and structure definitions for the ISP24xx
    diagnostic firmware dump routines.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3d71644cf952fd1157a13173237258422ba3c569
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:26 2005 -0700

    [SCSI] qla2xxx: Add ISP24xx definitions.
    
    Add ISP24xx definitions.
    
    Add requisite structure definitions and #define's for ISP24xx
    support.  Also drop volatile modifiers from device_reg_* register
    layouts as the members are never really accessed, only their
    offsets within the layout are used during reads and writes.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ac96202ba096f8fc1ccaf45a2f159a52639ece29
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:16 2005 -0700

    [SCSI] qla2xxx: Add pci ids for new ISP types.
    
    Add pci ids for new ISP types.
    
    Move old definitions in local qla_def.h file to pci_ids.h as
    well.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit abbd8870b9cb7754a4935826bc9f3c7b029f8b7c
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Jul 6 10:30:05 2005 -0700

    [SCSI] qla2xxx: Factor-out ISP specific functions to method-based call tables.
    
    Factor-out ISP specific functions to method-based call tables.
    
    In anticipation of ISP24xx/ISP25xx support, factor-out ISP
    specific functions into a method-based call table.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 514fd7fd01d378a7b5584c657d9807fc28f22079
Merge: 1e279dd... 99ad25a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 13 15:48:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit c514720716c7b109ff980f8b3cb93f9af872c91c
Merge: 07929dc... 1e279dd...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Jul 13 23:09:23 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git.

commit 1e279dd855d15b72364b4103f872d67d8592647e
Author: Miles Bader <miles@gnu.org>
Date:   Wed Jul 13 14:40:03 2005 +0900

    [PATCH] v850: Align ___start___param to match parameter alignment
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3720bd8b1e16b41b9ec640bf91f12e1a1b5cb961
Merge: a61caa8... 6a8b4d3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 13 12:19:30 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/tglx/mtd-2.6

commit 99ad25a313bda566a346b46a6015afa65bc0a02b
Merge: f62c4a9... 9a556e8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jul 13 12:15:43 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit f62c4a96f74d6c6dd56d1742697e94a5c2085e87
Author: David Mosberger-Tang <David.Mosberger@acm.org>
Date:   Tue Jul 12 21:51:00 2005 -0700

    [IA64] Make PCDP work again.
    
    Mark's patch added "attribute((packed))" for pcdp_uart, without
    accounting for the fact that the structure definition _relied_ on
    implicit padding by 6 bytes.  Fix is to make the padding explicit.
    
    Signed-off-by: David Mosberger-Tang <David.Mosberger@acm.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 59a0a8aa6ab6e46926e8d12694593267c0869440
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Jul 13 05:45:00 2005 -0700

    [IA64] fix call of smp_processor_id() by XPC while
    
    XPC calls smp_processor_id() twice from xpc_setup_infrastructure() with
    preemption enabled, which gets flagged if 'DEBUG_PREEMPT=y'. This patch
    replaces the two calls to smp_processor_id() by a single call to
    raw_smp_processor_id() since any CPU within the partition will do.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Acked-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a61caa8523a76e497f6b2a05350c892bc5ee402c
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Wed Jul 13 12:56:42 2005 +0200

    [PATCH] Amiga joystick: Fix typo introduced by the open/close race fixes
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f264cc28245d4d635d586be8c2148140726756dd
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Jul 13 01:11:44 2005 -0700

    [PATCH] ppc64: add 970MP PVR
    
    Add PVR value and tests for 970MP.  Also switch to a simpler (but slightly
    longer) check at init time for simplicity.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96e2844999f99878fc5b03b81ccaa60580005b81
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Wed Jul 13 01:11:42 2005 -0700

    [PATCH] ppc64: kill bitfields in ppc64 hash code
    
    This patch removes the use of bitfield types from the ppc64 hash table
    manipulation code.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f13487c66c75f5db004a0631047309d9e7c5aab7
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 13 01:11:41 2005 -0700

    [PATCH] ppc32: make -j12 all fails in uImage target
    
    make -j zImage may call if_changed twice at the same time, the result is a
    corrupted vmlinux.gz
    
    Write to a temporary file for the time being until someone with make skills
    fix the serialization properly.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ee91ec14bd4def036b4084da29869382078e44b
Author: Steve Dickson <SteveD@redhat.com>
Date:   Wed Jul 13 01:10:47 2005 -0700

    [PATCH] NFS: procfs/sysctl interfaces for lockd do not work on x86_64
    
    Allow the setting of NLM timeouts and grace periods through the proc and
    sysclt interfaces on x86_64 architectures
    
    Signed-off-by: Steve Dickson <steved@redhat.com>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 068e1b94bbd268f375349f68531829c8b7c210bc
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Jul 13 01:10:46 2005 -0700

    [PATCH] s390: fadvise hint values.
    
    Add special case for the POSIX_FADV_DONTNEED and POSIX_FADV_NOREUSE hint
    values for s390-64.  The user space values in the s390-64 glibc headers for
    these two defines have always been 6 and 7 instead of 4 and 5.  All 64 bit
    applications therefore use the "wrong" values.  To get these applications
    working without recompiling the kernel needs to accept the "wrong" values.
    Since the values for s390-31 are 4 and 5 the compat wrapper for fadvise64
    and fadvise64_64 need to rewrite the values for 31 bit system calls.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddca3b80cef36cc668f924ef5154a79acb19ebd7
Author: Guillaume Autran <gautran@mrv.com>
Date:   Wed Jul 13 01:10:45 2005 -0700

    [PATCH] ppc32: fix destroy_context() race condition
    
    Fix for a race condition when a task gets preempted by another task while
    executing the destroy_context(...) in a FEW_CONTEXTS environment.
    mm->context == NO_CONTEXT but the context_map may indicate all contexts are
    in use.
    
    The solution to this problem is to disable kernel preemption while
    destroying a MMU context.
    
    Signed-off-by: Guillaume Autran <gautran@mrv.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88bd5121d635136e01369141367f315665534b3c
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Wed Jul 13 01:10:44 2005 -0700

    [PATCH] Fix soft lockup due to NTFS: VFS part and explanation
    
    Something has changed in the core kernel such that we now get concurrent
    inode write outs, one e.g via pdflush and one via sys_sync or whatever.
    This causes a nasty deadlock in ntfs.  The only clean solution
    unfortunately requires a minor vfs api extension.
    
    First the deadlock analysis:
    
    Prerequisive knowledge: NTFS has a file $MFT (inode 0) loaded at mount
    time.  The NTFS driver uses the page cache for storing the file contents as
    usual.  More interestingly this file contains the table of on-disk inodes
    as a sequence of MFT_RECORDs.  Thus NTFS driver accesses the on-disk inodes
    by accessing the MFT_RECORDs in the page cache pages of the loaded inode
    $MFT.
    
    The situation: VFS inode X on a mounted ntfs volume is dirty.  For same
    inode X, the ntfs_inode is dirty and thus corresponding on-disk inode,
    which is as explained above in a dirty PAGE_CACHE_PAGE belonging to the
    table of inodes ($MFT, inode 0).
    
    What happens:
    
    Process 1: sys_sync()/umount()/whatever...  calls __sync_single_inode() for
    $MFT -> do_writepages() -> write_page for the dirty page containing the
    on-disk inode X, the page is now locked -> ntfs_write_mst_block() which
    clears PageUptodate() on the page to prevent anyone else getting hold of it
    whilst it does the write out (this is necessary as the on-disk inode needs
    "fixups" applied before the write to disk which are removed again after the
    write and PageUptodate is then set again).  It then analyses the page
    looking for dirty on-disk inodes and when it finds one it calls
    ntfs_may_write_mft_record() to see if it is safe to write this on-disk
    inode.  This then calls ilookup5() to check if the corresponding VFS inode
    is in icache().  This in turn calls ifind() which waits on the inode lock
    via wait_on_inode whilst holding the global inode_lock.
    
    Process 2: pdflush results in a call to __sync_single_inode for the same
    VFS inode X on the ntfs volume.  This locks the inode (I_LOCK) then calls
    write-inode -> ntfs_write_inode -> map_mft_record() -> read_cache_page() of
    the page (in page cache of table of inodes $MFT, inode 0) containing the
    on-disk inode.  This page has PageUptodate() clear because of Process 1
    (see above) so read_cache_page() blocks when tries to take the page lock
    for the page so it can call ntfs_read_page().
    
    Thus Process 1 is holding the page lock on the page containing the on-disk
    inode X and it is waiting on the inode X to be unlocked in ifind() so it
    can write the page out and then unlock the page.
    
    And Process 2 is holding the inode lock on inode X and is waiting for the
    page to be unlocked so it can call ntfs_readpage() or discover that
    Process 1 set PageUptodate() again and use the page.
    
    Thus we have a deadlock due to ifind() waiting on the inode lock.
    
    The only sensible solution: NTFS does not care whether the VFS inode is
    locked or not when it calls ilookup5() (it doesn't use the VFS inode at
    all, it just uses it to find the corresponding ntfs_inode which is of
    course attached to the VFS inode (both are one single struct); and it uses
    the ntfs_inode which is subject to its own locking so I_LOCK is irrelevant)
    hence we want a modified ilookup5_nowait() which is the same as ilookup5()
    but it does not wait on the inode lock.
    
    Without such functionality I would have to keep my own ntfs_inode cache in
    the NTFS driver just so I can find ntfs_inodes independent of their VFS
    inodes which would be slow, memory and cpu cycle wasting, and incredibly
    stupid given the icache already exists in the VFS.
    
    Below is a patch that does the ilookup5_nowait() implementation in
    fs/inode.c and exports it.
    
    ilookup5_nowait.diff:
    
    Introduce ilookup5_nowait() which is basically the same as ilookup5() but
    it does not wait on the inode's lock (i.e. it omits the wait_on_inode()
    done in ifind()).
    
    This is needed to avoid a nasty deadlock in NTFS.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a556e89081b0c1c2f83cee915363b15a68a6f2d
Author: Robert Love <rml@novell.com>
Date:   Wed Jul 13 13:49:23 2005 -0400

    [PATCH] inotify: misc cleanup
    
    Really simple, basic cleanup.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5995f16b4a464c8a57de7c9d5ddf4758dbacad41
Author: Robert Love <rml@novell.com>
Date:   Wed Jul 13 12:38:39 2005 -0400

    [PATCH] inotify: event ordering
    
    This rearranges the event ordering for "open" to be consistent with the
    ordering of the other events.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0399cb08c54708db231d616f106f64d920e0b723
Author: Robert Love <rml@novell.com>
Date:   Wed Jul 13 12:38:18 2005 -0400

    [PATCH] inotify: move sysctl
    
    This moves the inotify sysctl knobs to "/proc/sys/fs/inotify" from
    "/proc/sys/fs".  Also some related cleanup.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 153f805781d35c91ab2f54aa2b8930cc4cfc7e89
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Jul 13 09:38:05 2005 -0400

    [PATCH] fix voyager subarchitecture EXPORT_SYMBOL breakage caused by i386_ksym reduction
    
    This patch:
    
    	[PATCH] Remove i386_ksyms.c, almost
    
    made files like smp.c do their own EXPORT_SYMBOLS.  This means that all
    subarchitectures that override these symbols now have to do the exports
    themselves.  This patch adds the exports for voyager (which is the most
    affected since it has a separate smp harness).  However, someone should
    audit all the other subarchitectures to see if any others got broken.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c327ff6250fb558659ad689fe33f50524eda74e3
Merge: c0ac515... 59192ed...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 13 10:37:36 2005 -0700

    Merge head 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit c0ac515e2951dd2a999cfd21dea3fdc1055f1573
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 13 11:55:42 2005 -0400

    [PATCH] Lindent: ignore .indent.pro
    
     When I recently submitted a Lindent patch, it turned out that my .indent.pro
     options were also applied to the tree. This patch directs indent(1) to ignore
     the .indent.pro directives and only use options specified on the command
     line.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cd59f7a4119fef124677827a9b30684c2c8e674
Merge: c32511e... 73eb7d9...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 13 10:12:50 2005 -0700

    Merge /home/torvalds/linux-2.6-arm

commit 6a8b4d319c52f8a3fdca46b185d001fbf0939911
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Wed Jul 13 16:45:43 2005 +0100

    [MTD] cfi_cmdset_0002: Plugged a mem leak.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 59192ed9e7aa81b06a1803661419f7261afca1ad
Author: Ian Dall <ian@beware.dropbear.id.au>
Date:   Wed Jul 13 09:15:18 2005 -0500

    JFS: Need to be root to create files with security context
    
    It turns out this is due to some inverted logic in xattr.c
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 6211502d7ee9e515e4458d0c0ebfbb70553dc7de
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Jul 13 09:07:53 2005 -0500

    JFS: Allow security.* xattrs to be set on symlinks
    
    All of the different xattr namespaces have different rules.
    user.* and ACL's are not allowed on symlinks, and since these were the
    first xattrs implemented, I assumed there was no need to support xattrs
    on symlinks.  This one-line patch should fix it.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit f7f24758ac98a506770bc5910d33567610fa3403
Merge: b38a3ab... c32511e...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Jul 13 08:57:38 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 1b3035b7fcc72b6b36f2a3634dad832eb2453ce8
Merge: a98a5d0... c32511e...
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Wed Jul 13 10:45:00 2005 +0200

    Merge with rsync://fileserver/linux

commit c32511e2718618f0b53479eb36e07439aa363a74
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 21:46:46 2005 -0700

    Linux 2.6.13-rc3
    
    Yeah, this time hopefully I'm not confusing the version
    numbers. The last release was -rc2, _this_ is -rc3.

commit 0eeca28300df110bd6ed54b31193c83b87921443
Author: Robert Love <rml@novell.com>
Date:   Tue Jul 12 17:06:03 2005 -0400

    [PATCH] inotify
    
    inotify is intended to correct the deficiencies of dnotify, particularly
    its inability to scale and its terrible user interface:
    
            * dnotify requires the opening of one fd per each directory
              that you intend to watch. This quickly results in too many
              open files and pins removable media, preventing unmount.
            * dnotify is directory-based. You only learn about changes to
              directories. Sure, a change to a file in a directory affects
              the directory, but you are then forced to keep a cache of
              stat structures.
            * dnotify's interface to user-space is awful.  Signals?
    
    inotify provides a more usable, simple, powerful solution to file change
    notification:
    
            * inotify's interface is a system call that returns a fd, not SIGIO.
    	  You get a single fd, which is select()-able.
            * inotify has an event that says "the filesystem that the item
              you were watching is on was unmounted."
            * inotify can watch directories or files.
    
    Inotify is currently used by Beagle (a desktop search infrastructure),
    Gamin (a FAM replacement), and other projects.
    
    See Documentation/filesystems/inotify.txt.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Cc: John McCutchan <ttb@tentacle.dhs.org>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd4c625c061c2a38568d0add3478f59172455159
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 20:21:28 2005 -0700

    reiserfs: run scripts/Lindent on reiserfs code
    
    This was a pure indentation change, using:
    
    	scripts/Lindent fs/reiserfs/*.c include/linux/reiserfs_*.h
    
    to make reiserfs match the regular Linux indentation style.  As Jeff
    Mahoney <jeffm@suse.com> writes:
    
     The ReiserFS code is a mix of a number of different coding styles, sometimes
     different even from line-to-line. Since the code has been relatively stable
     for quite some time and there are few outstanding patches to be applied, it
     is time to reformat the code to conform to the Linux style standard outlined
     in Documentation/CodingStyle.
    
     This patch contains the result of running scripts/Lindent against
     fs/reiserfs/*.c and include/linux/reiserfs_*.h. There are places where the
     code can be made to look better, but I'd rather keep those patches separate
     so that there isn't a subtle by-hand hand accident in the middle of a huge
     patch. To be clear: This patch is reformatting *only*.
    
     A number of patches may follow that continue to make the code more consistent
     with the Linux coding style.
    
     Hans wasn't particularly enthusiastic about these patches, but said he
     wouldn't really oppose them either.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fa94c8868edfef8cb6a201fcc9a5078b7b961da
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Tue Jul 12 19:19:30 2005 -0400

    [PATCH] reiserfs: fix up case where indent misreads the code
    
     indent(1) doesn't know how to handle the "do not compile" error. It results
     in the item_ops array declaration being indented a tab stop in when it should
     not be. This patch replaces it with a #error that describes why it's failing.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5e404c10a98fc2979643476851e9cbdb1944812
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:05 2005 -0700

    [PATCH] device-mapper snapshots: Handle origin extension
    
    Handle writes to a snapshot-origin device that has been extended since the
    snapshot was taken.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93c534aefb906824d71ea779ed0c7f1573843f4e
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:05 2005 -0700

    [PATCH] device-mapper: Fix dm_swap_table error cases
    
    Fix dm_swap_table() __bind error cases: a missing unlock, and EINVAL
    preferable to EPERM.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3cd4f6b275da0f594797b73f721a4185335478f
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:04 2005 -0700

    [PATCH] device-mapper multipath: Fix pg initialisation races
    
    Prevent more than one priority group initialisation function from being
    outstanding at once.  Otherwise the completion functions interfere with each
    other.  Also, reloading the table could reference a freed pointer.
    
    Only reset queue_io in pg_init_complete if another pg_init isn't required.
    Skip process_queued_ios if the queue is empty so that we only trigger a
    pg_init if there's I/O.
    
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 436d41087d047b61f8ab0604dc74fff3240a8933
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:03 2005 -0700

    [PATCH] device-mapper multipath: Avoid possible suspension deadlock
    
    To avoid deadlock when suspending a multipath device after all its paths have
    failed, stop queueing any I/O that is about to fail *before* calling
    freeze_bdev instead of after.
    
    Instead of setting a multipath 'suspended' flag which would have to be reset
    if an error occurs during the process, save the previous queueing state and
    leave userspace to restore if it wishes.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a044d016896d2717694003f00d31a98194077511
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:02 2005 -0700

    [PATCH] device-mapper multipath: Flush workqueue when destroying
    
    The multipath destructor must flush its workqueue.  Otherwise items that
    reference the destroyed object could remain.
    
    From: "goggin, edward" <egoggin@emc.com>
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6a80ea8ed44de0b19c42d41928be37a186a3f41
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Jul 12 15:53:01 2005 -0700

    [PATCH] device-mapper multipath: Barriers not supported
    
    dm multipath will report barriers as not supported with this patch.
    
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c2a6c62c013a4ea57243536fc7f3987e4ba04bc
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Jul 12 16:03:00 2005 -0700

    [IA64] Altix pcibus_to_node implementation
    
    The Altix subarch does not provide node information via ACPI. Instead hooks
    are used to fixup pci structures. This patch determines the nodes for Altix
    PCI busses.
    
    Remote Bridges:
    ---------------
    Altix supports remote I/O nodes without memory or processors but with bridges.
    The TIOCA type of bridge is an AGP bridge and the PROM provides information
    about the closest node. That information will be returned by pcibus_to_node.
    
    The TIOCP remote bridge type is a PCI bridge but the PROM does not provide a
    closest node id. pcibus_to_node will return -1 for devices on those bridges
    meaning that device control structures may be allocated on any node.
    
    Safeguard:
    ----------
    Should the fixups result in invalid node information for a pci controller then
    a warning will be printed and pcibus_to_node will return -1.
    
    
    This patch also fixes the "FIXME" in sn_dma_alloc_coherent. This means that
    dma_alloc_coherent will now use alloc_pages_node to allocate memory local to
    the node that the PCI device is connected to.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3f603ed319d5120e883e64ac5967b2fc848fc43b
Merge: 55ee3b8... 5028770...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 16:04:50 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lenb/linux-2.6

commit 55ee3b8365fd5d301b9076eea739146f2b91e82c
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Tue Jul 12 13:59:08 2005 -0700

    [PATCH] v4l: broken hybrid dvb inclusion
    
    Always include dvb frontend code for hybrid cx88 and saa7134 boards.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 833e9a1abe8cdfc037964d3240d57bb8ff94bff0
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:59:07 2005 -0700

    [PATCH] v4l: TV EEPROM
    
    - Eliminated unused code.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af9eeed2d78cb9c672bdc750133506670713fdf8
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:59:06 2005 -0700

    [PATCH] v4l: tuner-3026 - replace obsolete ioctl value
    
    - obsolete TUNER_SET_TVFREQ changed to VIDIOCSFREQ.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 330a115ae46e7d7b5fe2d4e506ba8ae2e0027143
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:59:01 2005 -0700

    [PATCH] v4l: SAA7134 Update
    
    - Corrected all cards marked as 7135 cards to 7133.
    - Add new card support for Compro VideoMate TV Gold+II.
    - Add new card support for Kworld Xpert TV PVR7134
    - Add new card support for Typhoon DVB-T Cardbus.
    - Changes to comply with CodingStyle: // comments converted to /* */
    - Remove irq2_mask field from saa7134_dev structure.
    - Collect all the bits needed in saa7134_hwinit2() instead.
    - Distinguish the different variants of the Medion MD7134 modules via eeprom
    - moved Philips FMD1216 radio specific setup to saa7134-core.c
    - Fix kernel compile error with CONFIG_MODULES=n
    - Cleanup tuner private calls.
    - Some Indent fixes.
    
    Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Hannibal <hannibal@megapolis.pl>
    Signed-off-by: Elshin Roman <roxmail@list.ru>
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Juergen Orschiedt <jorschiedt@web.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85369df350b138f26eac779da33de0960635ca4d
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:59 2005 -0700

    [PATCH] v4l: MXB fix to correct tuner ioctl
    
    - driver command adapted to use new control (TUNER_SET_TYPE_ADDR,
      instead of TUNER_SET_TYPE)
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1455050f04084161c8a9425008e3b9b5f5c4c2a3
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:57 2005 -0700

    [PATCH] v4l: drivers/media/video/Kconfig
    
    - Removed obsolete option. Current code needs multi tuner.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7ce3cc67052de63a29bad90110640b687d12058
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:55 2005 -0700

    [PATCH] v4l: I2C Tuner
    
    - Fixed a trouble on tuner-core that generates erros on computers with more
      than one TV card.
    - Rename tuner structures fields.
    - Tail spaces removed.
    - I2C cleanups and converged to a basic reference structure.
    - Removed unused structures.
    - Fix setting frequency on tda8290.
    - Added code for TEA5767 autodetection.
    - Standby mode support implemented. It is used to disable
      a non used tuner. Currenlty implemented on tea5767.
    - New macro: set_type disables other tuner when changing mode.
    - Some cleanups.
    - Use 50 kHz step when tunning radio for most tuners to improve precision.
    
    Signed-off-by: Fabien Perrot <perrot1983@yahoo.fr>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-By: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebe4c6fa535b0410e58e9c8352320896d07e2efb
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:53 2005 -0700

    [PATCH] v4l: I2C Miscelaneous
    
    - Removed unused structures.
    - CodingStyle rules applied to comments.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60acbc99e82753b0baa64834435caf81eabc2501
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:52 2005 -0700

    [PATCH] v4l: I2C Infrared Remote Control
    
    - Removed unused structures.
    - CodingStyle rules applied to comments.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f8434a620383eec1115e73fdb18c53e049b26b9
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:51 2005 -0700

    [PATCH] v4l: I2C BT832
    
    - Removed unused structures.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db036a07ac42fbc410b14ae69f0c5440a8a417cb
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:49 2005 -0700

    [PATCH] v4l: Documentation
    
    - Card definitions updated.
    - Tail spaces removed.
    - Mark all 7135 cards as 7133.
    - Correct info about sync byte for MPEG-2 transport stream packets.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: hermann pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86ddd96fcd479ec4b718abaa661e5884f9dc9a33
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:47 2005 -0700

    [PATCH] v4l: SAA7134 hybrid DVB
    
    - Add new Typhoon DVB-T Cardbus.
    - DVB-T support for MD7134 cardbus and the PCI variants
    - initial DVB-T support for Lifeview Flydvb-t duo
    - DVB-T support for Philips TOUGH reference design
    - Don't turn off the xtal output of tda8274/75 in sleep mode
    - Let Kconfig decide whether to include frontend-specific code in saa7134-dvb.
    - Removed unused structures.
    
    Signed-off-by: Juergen Orschiedt <jorschiedt@web.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41ef7c1ed48cb273c7b7a9ffd48a262a22f84483
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:44 2005 -0700

    [PATCH] v4l: CX88 Update
    
    - Removed unused structures.
    - Removed BTTV version check.
    - Some debug structs moved to their own .c file and converted to static
    - Comment changed to express better when attach_inform is running
    - set_freq removed from set_mode at tuner-core.c.
    - I2C cleanups and converged to a basic reference structure.
    - Rename tuner structures fields.
    - It calls VIDIOC_G_FREQUENCY to get tuner freq from tuner.
    - added missing contrast offset value, set to 0.
    - Let Kconfig decide whether to include frontend-specific code.
    
    Signed-Off-By: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa9846a8c5965636fbade8655ae0ce1f9a655bd4
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:42 2005 -0700

    [PATCH] v4l: BTTV update
    
    - use DMA_32BIT_MASK.
    - Rename tuner structures fields.
    - Tail spaces removed.
    - I2C cleanups and converged to a basic reference structure.
    - Removed unused structures.
    - Removed BTTV version check.
    
    Signed-off-by: <domen@coderock.org>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-Off-By: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de9c634270df3e27675a3c0e95545d2b3f754e3f
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:41 2005 -0700

    [PATCH] v4l: BTTV input
    
    Changes to comply with CodingStyle: // comments converted to /* */
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6dfa37888298e8369f197883ae5f058fbd98a70
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Tue Jul 12 13:58:40 2005 -0700

    [PATCH] dvb: dst: printk -> dprintk
    
    - stop log spamming when running femon (printk -> dprintk)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27b05fd22f8a1f9afd0377817b1811cfc95f8b7b
Author: Julian Scheel <julian@jusst.de>
Date:   Tue Jul 12 13:58:39 2005 -0700

    [PATCH] dvb: fix kobject names (no slashes)
    
    The / in the driver name (budget dvb /w video in) is not a valid character for
    device names - removed it, now it works!
    
    Same for ttusb-budget.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Julian Scheel <julian@jusst.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8df3d46077e63ab87f954eb6e827689cdfe97155
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Tue Jul 12 13:58:38 2005 -0700

    [PATCH] dvb: usb: fix some typos
    
    corrected some typos.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58ba006be9b5a8f14f32c530d19fcd4e633aadf8
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Tue Jul 12 13:58:37 2005 -0700

    [PATCH] dvb: LGDT3302 QAM256 initialization fix
    
    - Initialize all non mutually exclusive variables
      without regard to the mode selected.
    - Do a software reset each time the parameters are
      set, regardless of whether anything changes.
      This may allow an application to recover from a
      hung condition.
    - Improved error reporting.
    - Removed $Id:$
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67bc4eb0b1140a4bf364f2dcca152be659ed9057
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jul 12 13:58:36 2005 -0700

    [PATCH] hardirq uses preempt
    
    hardirq.h uses preempt_count() from preempt.h
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2ac953d7c5c8ddbd01dfa0428b92497a69ad6ef
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jul 12 13:58:35 2005 -0700

    [PATCH] MAINTAINERS: irda-users@lists.sourceforge.net is subscribers only
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc75a24582f60a70e2b95fda94ff66f577b7a0db
Author: Albert Herranz <albert_herranz@yahoo.es>
Date:   Tue Jul 12 13:58:34 2005 -0700

    [PATCH] kexec-ppc: fix for ksysfs crash_notes
    
    The following patch prevents the crash dump helper code found within kexec
    from breaking ppc which still lacks crash dump functionality.
    
    ksysfs crash_notes attribute handling was left under CONFIG_KEXEC for
    simplicity although it is not strictly kexec related.
    
    We provide here a dummy definition for crash_notes on ppc.
    
    Signed-off-by: Albert Herranz <albert_herranz@yahoo.es>
    Cc: Eric Biederman <ebiederm@xmission.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41e2e8bec2da8d680a03aa4bee9a09fac499c05f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 12 13:58:33 2005 -0700

    [PATCH] Documentation/kernel-parameters.txt: fix a typo
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e498c1080ae794a8dc788152002fb39994ae78b
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Tue Jul 12 13:58:32 2005 -0700

    [PATCH] TB0219: add PCI IRQ initialization
    
    This patch adds PCI IRQ initialization to TB0219 driver.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01e77d31d11a767c9da665f46e075756aef4fc4f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 12 13:58:32 2005 -0700

    [PATCH] IBM_ASM Kconfig corrections
    
    This patch contains the following fixes:
    - IBM_ASM must depend on PCI
    - remove useless "default n"
    - correct the URL to further information
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 542d1c88bd7f73e2e59d41b12e4a9041deea89e4
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 12 13:58:31 2005 -0700

    [PATCH] tlb.h warning fix
    
    free_pages_and_swap_cache() and free_page_and_swap_cache() use release_pages()
    and page_cache_release() respectively, so make sure that we have the
    declarations in scope.
    
    Cc: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7da6844cf7bc44dcda548a0a0aebf85f3a1c1485
Author: Brian King <brking@us.ibm.com>
Date:   Tue Jul 12 13:58:30 2005 -0700

    [PATCH] cdev: cdev_put oops
    
    While fixing an oops in the st driver in a dirty release path, I
    encountered an oops in cdev_put for cdevs allocated using cdev_alloc.  If
    cdev_del is called when the cdev kobject still has an open user, when the
    last cdev_put is called, the cdev_put will call kobject_put, which will end
    up ultimately releasing the cdev in cdev_dynamic_release.  Patch fixes the
    oops by preventing cdev_put from accessing freed memory.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50a5223428bbe77bc0f312100c950b6f4520ba34
Author: Jan Kara <jack@suse.cz>
Date:   Tue Jul 12 13:58:29 2005 -0700

    [PATCH] ext2: fix mount options parting
    
    Restore old set of ext2 mount options when remounting of a filesystem
    fails.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08c6a96fd77836856c090ebb39beadc81cb8484d
Author: Jan Kara <jack@suse.cz>
Date:   Tue Jul 12 13:58:28 2005 -0700

    [PATCH] ext3: fix options parsing
    
    Fix a problem with ext3 mount option parsing.  When remount of a filesystem
    fails, old options are now restored.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5323125031799a7fd8602ce150c3902aedfdcba6
Author: Roland McGrath <roland@redhat.com>
Date:   Tue Jul 12 13:58:27 2005 -0700

    [PATCH] reset real_timer target on exec leader change
    
    When a noninitial thread does exec, it becomes the new group leader.  If
    there is a ITIMER_REAL timer running, it points at the old group leader and
    when it fires it can follow a stale pointer.  The timer data needs to be
    reset to point at the exec'ing thread that is becoming the group leader.
    This has to synchronize with any concurrent firing of the timer to make
    sure that it_real_fn can never run when the data points to a thread that
    might have been reaped already.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c888d531823f8ce2853fb717ebefbcca9acdcd0
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Tue Jul 12 13:58:26 2005 -0700

    [PATCH] xtensa: use ssleep() instead of schedule_timeout()
    
    Replace schedule_timeout() with ssleep() to guarantee the task delays as
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 813e6783647489a8481d256944b7fd75ff79e035
Author: Chris Zankel <czankel@tensilica.com>
Date:   Tue Jul 12 13:58:25 2005 -0700

    [PATCH] xtensa: remove old syscalls
    
    This patch fixes some minor bugs introduced by the previous patch (remove
    old syscalls).  Both patches remove the obsolete syscalls.  The changes in
    this patch were suggested by Arnd Bergmann.  The vmlinux.lds.S changes are
    required for the latest gcc/binutils.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c40504e87e28c52258458a53fefcd63f58e11a42
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Tue Jul 12 13:58:22 2005 -0700

    [PATCH] uml: tlb flushing fix
    
    This patch fixes a fairly serious tlb flushing bug that makes aio use under
    uml very unreliable -- SEGVs, Oops and panic()s occur as a result of stale
    tlb entires being used by uml when aio switches mms due to the fact that
    uml does not implement the activate_mm() hook.  This patch introduces a
    simple but correct approach (read: hammer) for implementing activate_mm()
    in uml by doing a force_flush_all() if the new mm is different from old.
    With this patch in place, uml is able to succeed at the aio test case that
    was randomly faulting for me before.
    
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b8a9da525c592f129ace454c4d82a80b122827a
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Jul 12 13:58:20 2005 -0700

    [PATCH] uml:remove user_constants.h on clean
    
    make clean ARCH=um does not remove the generated file
    arch/um/include/user_constants.h, fix this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 138d402793b84dc47bf13b0a6636d26c880d746e
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 12 13:58:19 2005 -0700

    [PATCH] alpha: pgprot_uncached() comment
    
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 082ff0a9991dcea958785115fbba6dddd0dc280a
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Tue Jul 12 13:58:18 2005 -0700

    [PATCH] mm/filemap_xip.c compilation fix
    
    mm/filemap_xip.c: In function `__xip_unmap':
    mm/filemap_xip.c:194: request for member `pte' in something not a structure or union
    
    Apparently pte_pfn() takes a pte_t, not a pointer to a pte_t.  From looking
    at asm/page.h, it seems to be the same on ia32 or ppc (iff
    STRICT_MM_TYPECHECKS is enabled, which is disabled by default on ppc).
    
    Acked-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb0a90b4970d667e9ae9df538710f12b8e78e442
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Jul 12 13:58:17 2005 -0700

    [PATCH] yenta: allocate resource fixes
    
    The current CardBus window allocation code in yenta_socket is unable to handle
    the transparent PCI-bridge handling update in 2.6.13.  We need to check _all_
    resources of a given type to find the best one suitable for CardBus windows,
    not just the first one.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 278798357d4a8658067dc9ac399d8ffba8389f03
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Jul 12 13:58:16 2005 -0700

    [PATCH] yenta: same resources in same structs
    
    drivers/pci/setup-bus.c enumerates the CardBus windows (bus->resources[])
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6fd718808df873b5d216d5827ac57ec39820238
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Jul 12 13:58:15 2005 -0700

    [PATCH] pcmcia: Documentation update
    
    Update PCMCIA driver changes for patches merged in 2.6.13
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 862104e56329babf0b9571281e9516fe6259dd17
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Jul 12 13:58:15 2005 -0700

    [PATCH] yenta: fix parent resource determination
    
    If the CardBus windows were pre-configured and the CardBus bridge is behind a
    transparent PCI-PCI bridge, pci_find_parent_resource() might return a
    different resource than the real parent if it is called before the window is
    determined.  Therefore, move that call around.
    
    Also fix return of value in void function.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e2f3b70e60172f5ed7c0933b8d8a35654c1c031
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Jul 12 13:58:14 2005 -0700

    [PATCH] pcmcia: fix pcmcia-cs compilation
    
    Fix pcmcia-cs compilation with recent pcmcia kernel changes.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d312ceda567ab91acd756cde95ac5fbc6b40ed40
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 12 13:58:13 2005 -0700

    [PATCH] x86_64: section alignment fix
    
    This is the second time this has happened: inserting a new section requires
    that we adjust the arithmetic which is used to calculate the vsyscall page's
    offset.
    
    Cc: Christoph Lameter <christoph@lameter.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4120db47198d21d8cd3b2cdbbe1ea6118a50bcd4
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Tue Jul 12 13:58:12 2005 -0700

    [PATCH] bugfix: two read_inode() calls without clear_inode() call between
    
    Bug symptoms
    ~~~~~~~~~~~~
    For the same inode VFS calls read_inode() twice and doesn't call
    clear_inode() between the two read_inode() invocations.
    
    Bug description
    ~~~~~~~~~~~~~~~
    Suppose we have an inode which has zero reference count but is still in
    the inode cache. Suppose kswapd invokes shrink_icache_memory() to free
    some RAM. In prune_icache() inodes are removed from i_hash. prune_icache
    () is then going to call clear_inode(), but drops the inode_lock
    spinlock before this. If in this moment another task calls iget() for an
    inode which was just removed from i_hash by prune_icache(), then iget()
    invokes read_inode() for this inode, because it is *already removed*
    from i_hash.
    
    The end result is: we call iget(#N) then iput(#N); inode #N has zero
    i_count now and is in the inode cache; kswapd starts. kswapd removes the
    inode #N from i_hash ans is preempted; we call iget(#N) again;
    read_inode() is invoked as the result; but we expect clear_inode()
    before.
    
    Fix
    ~~~~~~~
    To fix the bug I remove inodes from i_hash later, when clear_inode() is
    actually called. I remove them from i_hash under spinlock protection.
    Since the i_state is set to I_FREEING, it is safe to do this. The others
    will sleep waiting for the inode state change.
    
    I also postpone removing inodes from i_sb_list. It is not compulsory to
    do so but I do it for readability reasons. Inodes are added/removed to
    the lists together everywhere in the code and there is no point to
    change this rule. This is harmless because the only user of i_sb_list
    which somehow may interfere with me (invalidate_list()) is excluded by
    the iprune_sem mutex.
    
    The same race is possible in invalidate_list() so I do the same for it.
    
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 168a9fd6a1bf91041adf9909f6c72cf747f0ca8c
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Jul 12 13:58:10 2005 -0700

    [PATCH] __wait_on_freeing_inode fix
    
    This patch fixes queer behavior in __wait_on_freeing_inode().
    
    If I_LOCK was not set it called yield(), effectively busy waiting for the
    removal of the inode from the hash.  This change was introduced within
    "[PATCH] eliminate inode waitqueue hashtable" Changeset 1.1938.166.16 last
    october by wli.
    
    The solution is to restore the old behavior, of unconditionally waiting on
    the waitqueue.  It doesn't matter if I_LOCK is not set initally, the task
    will go to sleep, and wake up when wake_up_inode() is called from
    generic_delete_inode() after removing the inode from the hash chain.
    
    Comment is also updated to better reflect current behavior.
    
    This condition is very hard to trigger normally (simultaneous clear_inode()
    with iget()) so probably only heavy stress testing can reveal any change of
    behavior.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b6bfcdb116f2cc2cab921fcac6d39d4022952d2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jul 12 13:58:09 2005 -0700

    [PATCH] lower VM_DONTCOPY total_vm
    
    dup_mmap of a VM_DONTCOPY vma forgot to lower the child's total_vm.  (But
    no way does this account for the recent report of total_vm seen too low.)
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70d1d47c47c4643af357cb44d0d891c1b765f2ab
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Jul 12 13:58:09 2005 -0700

    [PATCH] quiet ide-cd warning
    
    This shuts up a potential uninitialized variable warning.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4645df1035b34be2d431d6a10b08e1c06bcd3361
Author: Dave Jones <davej@redhat.com>
Date:   Tue Jul 12 13:58:08 2005 -0700

    [PATCH] aacraid: swapped kmalloc args.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d53d9f16ea95a91ad4aa114809dcde486ca4000d
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 12 13:58:07 2005 -0700

    [PATCH] name_to_dev_t warning fix
    
    kernel/power/disk.c needs a declaration of name_to_dev_t() in scope.  mount.h
    seems like an appropriate choice.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a98a5d04f400ad112e59cadd739dbabf89417e60
Merge: 751382d... 7ac3db5...
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Tue Jul 12 03:34:39 2005 +0100

    Merge with rsync://fileserver/linux

commit 22a4427972af371fddb49c0184a93851ad51070d
Merge: 9f02d6b... ede7fbd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 15:54:36 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit 08357f82d4decc48bbfd39ae30d5fe0754f7f576
Author: Zoltan Menyhart <Zoltan.Menyhart@bull.net>
Date:   Fri Jun 3 05:36:00 2005 -0700

    [IA64] improve flush_icache_range()
    
    Check with PAL to see what the i-cache line size is for
    each level of the cache, and so use the correct stride
    when flushing the cache.
    
    Acked-by: David Mosberger
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 751382dd5cb2702368d281a50b55c2d6c4e8fbfc
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Tue Jul 12 03:34:39 2005 +0100

    [JFFS2] Avoid compiler warnings when JFFS2_FS_WRITEBUFFER=n
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b62205986a73a40e4fc174d2ef668e3895e925bc
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Tue Jul 12 17:37:12 2005 +0100

    [JFFS2] Init locks early during mount
    
    In case of a mount error locks might be uninitialized but
    accessed by the resulting call to jffs2_kill_sb().
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit e4fef6618992bea48b7856ebbd236796b744964f
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sun Jul 10 16:15:36 2005 +0100

    [JFFS2] Rename function and update comments
    
    We recently changed the method of collecting and sorting of
    tmp_dnode objects to use a temporary RB-tree instead of a
    temporary list. Rename function and update comments.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 86ffc0d5f5f0c8a6fe70eccade3f7ae8e9630edf
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sun Jul 10 14:13:58 2005 +0100

    [JFFS2] Remove needless variable initialization
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 336d2ff7115bd4391108a16f476c739cb4a505b0
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Thu Jul 7 16:45:32 2005 +0100

    [JFFS2] Avoid alloc/dealloc for zero sized nodes
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 5028770a42e7bc4d15791a44c28f0ad539323807
Merge: 9f02d6b... d8683a0...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Jul 12 17:21:56 2005 -0400

    [ACPI] merge acpi-2.6.12 branch into latest Linux 2.6.13-rc...
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 60a762b6a6dec17cc4339b60154902fd04c2f9f2
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Tue Jun 28 11:13:00 2005 -0700

    [IA64] remove CONFIG_IA64_SGI_SN_SIM
    
    This patch removes the CONFIG_IA64_SGI_SN_SIM option entirely, allowing
    any kernel bootable on sn2 to also be booted in the simulator.
    
    Boot tested on Altix and HP rx2600.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9f02d6b7b43d46a74dd385f06090104ecd0fb807
Merge: 9ffc7a0... c12a828...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 13:17:42 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 9ffc7a0ebfcace0ed3eb77fb77e159f6f9443ec5
Merge: 2824bd2... f4637b5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 12 13:16:40 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit f4637b55ba960d9987a836617271659e9b7b0de8
Author: Tommy Christensen <tommy.christensen@tpack.net>
Date:   Tue Jul 12 12:13:49 2005 -0700

    [VLAN]: Fix early vlan adding leads to not functional device
    
    OK, I can see what's happening here. eth0 doesn't detect link-up until
    after a few seconds, so when the vlan interface is opened immediately
    after eth0 has been opened, it inherits the link-down state. Subsequently
    the vlan interface is never properly activated and are thus unable to
    transmit any packets.
    
    dev->state bits are not supposed to be manipulated directly. Something
    similar is probably needed for the netif_device_present() bit, although
    I don't know how this is meant to work for a virtual device.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c12a828982ee27e0d9f742177016896d6c3a5acb
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jul 12 12:09:43 2005 -0700

    [SPARC64]: Fix SMP build failure.
    
    arch/sparc64/kernel/smp.c:48: error: parse error before "__attribute__"
    arch/sparc64/kernel/smp.c:49: error: parse error before "__attribute__"
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab611487d8ada506e511d2b8f22fb8e7be9939b9
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jul 12 12:08:43 2005 -0700

    [NET]: __be'ify *_type_trans()
    
    tr_type_trans(), hippi_type_trans() left as-is.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84531c24f27b02daa8e54e2bb6dc74a730fdf0a5
Author: Phil Oester <kernel@linuxace.com>
Date:   Tue Jul 12 11:57:52 2005 -0700

    [NETFILTER]: Revert nf_reset change
    
    Revert the nf_reset change that caused so much trouble, drop conntrack
    references manually before packets are queued to packet sockets.
    
    Signed-off-by: Phil Oester <kernel@linuxace.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2824bd250f0be1551747cc3ed5ae07facc285b57
Author: Michael Hund <mhund@ld-didactic.de>
Date:   Mon Jun 27 22:44:22 2005 +0200

    [PATCH] USB: add ldusb driver
    
    The following driver provides complete interrupt-in and interrupt-out
    reports (raw data) to a user program. Until now it uses the
    HIDIOCGDEVINFO ioctl call, because I don't know better :-(. Perhaps, it
    will be ok for you - and I will be happy, if you assign 8 minor numbers.
    
    I have tested it in several environments and it works very well for me.
    However, it has a problem with two or more devices at the same hub, if
    the two or more devices need 1 ms interrupt-in transfers. Unfortunately
    more than one interrupt-in transfer every ms isn't possible (ehci
    driver?). This is why the min_interrupt_in_interval and
    min_interrupt_out_interval are increased to 2 ms (see the corresponding
    module parameters). This way, I can use two devices simultaneously at
    the same hub.
    
    Signed-off-by: Michael Hund <mhund@ld-didactic.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 83ef344a7539aa55a787790bc036f0bf3466e191
Author: brian@murphy.dk <brian@murphy.dk>
Date:   Wed Jun 29 16:53:29 2005 -0700

    [PATCH] USB: fix usb reference count bug in cdc-acm driver
    
    This increases the reference count on the usb cdc acm control interface
    which is referred to by the tty interface provided by the driver. This
    allows the deferred removal of the tty after the physical device is
    disconnected if the tty is held open at the time of disconnection.
    
    Signed-off-by: brian@murphy.dk
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a3fdf4ebe016ba756de3ca29a2a6117e9acd721c
Author: brian@murphy.dk <brian@murphy.dk>
Date:   Wed Jun 29 16:53:29 2005 -0700

    [PATCH] USB: export usb_get_intf() and usb_put_intf()
    
    Export usb_get_intf and usb_put_intf so that modules can increase
    usb interface reference counts.
    
    Signed-off-by: brian@murphy.dk
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 00ab997dd24fff82900665449f859e23a78ad5f4
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 07:04:14 2005 -0700

    [PATCH] USB: another cdc descriptor
    
    This adds another CDC descriptor type to <linux/usb_cdc.h>; the main claim
    to fame for this is that some Motorola phones include it.  It's not currently
    needed by any driver code; included for completeness.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit edfd6aee1f073ae645bd3e60ef96090fc9f0957b
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 07:03:10 2005 -0700

    [PATCH] USB: fix ohci merge glitch
    
    A patch re-organizing some parts of root hub initialization deleted the
    code initializing the bus-neutral reboot/shutdown notifier for OHCI.
    This patch just restores that deleted code.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b404a5b02abf84812e5333bda201af464925d7a6
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 06:59:14 2005 -0700

    [PATCH] USB: ohci-omap pm updates
    
    The recent "pm_message_t" changes removed functionality from the Linux
    PM framework.  This patch removes it from the OMAP OHCI too, removing
    the distinction between (previous) PM_SUSPEND_MEM and PM_SUSPEND_DISK
    state transitions ... now the only suspend semantics supportable are
    what was previously PM_SUSPEND_DISK (4) and is now "PMSG_SUSPEND" (3).
    
    From: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d7beee3d4b4ae7faa881ef05ff5d94a125ed8a6
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 07:00:56 2005 -0700

    [PATCH] USB: omap_udc tweaks
    
    Minor OMAP updates that somehow got dropped from previous patches.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e828264ee797d40b1df99fe88c6acfc0f36df639
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Jun 29 10:20:29 2005 +0100

    [PATCH] USB: gadget/ether build fixes.
    
    I also needed the following on 2.6.13-rc1 without CONFIG_USB_ETH_RNDIS,
    symbol fs_status_desc isn't available in that case on PXA255.
    
    This builds both with and without ETH_RNDIS, but I haven't actually
    tested either.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 05f33400307cfe9d89dbeca659731b9055fefbf8
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Jun 29 10:15:32 2005 +0100

    [PATCH] USB: gadget/ether fixes
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9df978f1974fea373741367b5d79a2ed3b7dcf9
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Sat Jun 25 16:30:24 2005 +0200

    [PATCH] USB: SN9C10x driver updates
    
    SN9C10x driver updates.
    
    Changes: + new, - removed, * cleanup, @ bugfix
    
    @ Remove bad get_ctrl()'s
    * Documentation updates
    + Add 0x0c45/0x602d to the list of SN9C10x based devices
    + Add support for OV7630 image sensors
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8fd6db47b90c7ecac32e3211f771849e148bdb07
Author: Michael Hund <mhund@ld-didactic.de>
Date:   Mon Jun 27 22:44:22 2005 +0200

    [PATCH] USB: add LD devices to hid blacklist
    
    below you will find one patch to hid-core.c, which lets usbhid ignore
    our HID devices. It would be nice, if you can apply it.
    
    Signed-off-by: Michael Hund <mhund@ld-didactic.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b2134bcd2e1bf989e0566dd1b0e59a792722b671
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Fri Jun 24 22:20:35 2005 -0700

    [PATCH] USB: coverity: (desc->bitmap)[] overrun fix
    
    The length of the array desc->bitmap is 3, and not 4:
    
    Definitions involved:
    
    In drivers/usb/core/hcd.h
    
    464  	#define bitmap 	DeviceRemovable
    
    In drivers/usb/host/ohci-hub.c
    
    395  		struct usb_hub_descriptor	*desc
    
    In drivers/usb/core/hub.h
    
    130  	struct usb_hub_descriptor {
    131  		__u8  bDescLength;
    132  		__u8  bDescriptorType;
    133  		__u8  bNbrPorts;
    134  		__u16 wHubCharacteristics;
    135  		__u8  bPwrOn2PwrGood;
    136  		__u8  bHubContrCurrent;
    137  		    	/* add 1 bit for hub status change; round to bytes */
    138  		__u8  DeviceRemovable[(USB_MAXCHILDREN + 1 + 7) / 8];
    139  		__u8  PortPwrCtrlMask[(USB_MAXCHILDREN + 1 + 7) / 8];
    140  	} __attribute__ ((packed));
    
    In include/linux/usb.h
    
    306  	#define USB_MAXCHILDREN		(16)
    
    This defect was found automatically by Coverity Prevent, a static analysis
    tool.
    
    (akpm: this code should be shot.  Field `bitmap' doesn't exist in struct
    usb_hub_descriptor.  And this .c file is #included in
    drivers/usb/host/ohci-hcd.c, and someone somewhere #defines `bitmap' to
    `DeviceRemovable'.
    
    >From a maintainability POV it would be better to memset the whole array
    beforehand - I changed the patch to do that)
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: <linux-usb-devel@lists.sourceforge.net?
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 99f83c9c9ac994c844ecf3e64e848c2f8dd7dfe0
Author: Michael Downey <downey@zymeta.com>
Date:   Mon Jun 27 11:48:26 2005 -0600

    [PATCH] USB: add driver for Keyspan Digital Remote
    
    This driver is a basic keypress input driver for the Keyspan Digital
    Remote with part number UIA-11.  Currently there is an older remote with
    part number UIA-10 which isn't supported by this driver.  Support for
    the older UIA-10 could be added but a binary file is required to be
    download to the device, and I don't have that file.  I also don't have a
    UIA-10 device so I wouldn't be able to test any of the changes.
    
    Signed-off-by: Michael Downey <downey@zymeta.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30e695986679ac2d2354fc1634e8cb931bb47785
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 26 17:18:46 2005 -0700

    [PATCH] USB: net2280 warning fix
    
    drivers/usb/gadget/net2280.c: In function 'show_registers':
    drivers/usb/gadget/net2280.c:1501: warning: assignment discards qualifiers from pointer target type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5db539e49fc7471e23bf3c94ca304f008cb7b7f3
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Jun 23 20:25:36 2005 +0300

    [PATCH] USB: Fix kmalloc's flags type in USB
    
    Greg,
    
    This patch fixes the kmalloc() flags argument type in USB
    subsystem; hopefully all of its occurences. The patch was
    made against patch-2.6.12-git2 from Jun 20.
    
    Cleanup of flags for kmalloc() in USB subsystem.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 17f8bb7312fa9b00f80c3c0f8d5a5d698eb97bbd
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Jun 23 20:12:24 2005 +0300

    [PATCH] USB: isp116x-hcd cleanup
    
    Sorry that it took so long. Here comes a cleanup patch that
    addresses the remarks by Alexey Dobriyan about
    gregkh-usb-usb-isp116x-hcd-add.patch EXCEPT the remark about
    the typecasting of mem_flags argument for kcalloc; this will
    be addressed in a later patch.
    
    OlavCleanup of isp116x-hcd.
    
    Signed off by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ae0d6cceb20eec57e7196c22999c62c465ffd5bf
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Jun 25 14:32:59 2005 -0700

    [PATCH] USB: Patch to make usbmon to print control setup packets
    
    Make usbmon to print Setup packets of Control transfers. This is useful
    when debugging enumeration issues.
    
    This is a change to the trace format which is not fully compatible.
    A parser has to look at the data length word now. If that word is
    a character like 's', read setup packet before proceeding with data.
    I decided not to bump the API tag for this because not many such
    parsers exist at this point.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ead99eb00190a274e3b3666ecd431be12c2b7888
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Fri Jun 24 18:44:20 2005 +0200

    [PATCH] USB: SiS USB Makefile fixes
    
    although 2.6.12 now contains the sisusb driver, it failes to build this
    driver due to a missing patch of the Makefile.
    
    From: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a7aad15ff93be104c8e0851a43b94f8ccd92225
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Thu Jun 23 09:37:56 2005 +0200

    [PATCH] USB ATM: fix line resync logic
    
    We map states 0x00 and 0x10 to the ATM_PHY_SIG_LOST flag.  The current logic fails to
    resync the line if we get state 0x10 followed by 0x00, since we only resync the line
    when the state is 0x00 and the flag changed.  Doubly fixed by (1) always resyncing the
    line when the state is 0x00 even if the state didn't change, and (2) keeping track of
    the last state, not just the flag.  We do (2) as well as (1) in order to get better log
    messages.
    
    This is a tweaked version of the original patch by Aurelio Arroyo.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cd5c08fb7b0d960b7cd48bc977feee7b3bd8b046
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Thu Jun 23 09:23:10 2005 +0200

    [PATCH] USB ATM: robustify poll throttling
    
    No functional change, but less likely to break in the future.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 322a95bc8eba889d2f9d7222936d682c9aad8294
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Thu Jun 23 09:20:50 2005 +0200

    [PATCH] USB ATM: line speed measured in Kb not Kib
    
    Spotted by David Woodhouse.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 16966f2ab7db7366855d1267071a3138ae127ff6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 29 16:53:29 2005 -0700

    [PATCH] USB: fix ftdi_sio compiler warnings
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e33ae67815372a93e8e77624fd47e39a986415d
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Mon Jun 20 17:10:19 2005 +0100

    [PATCH] USB ftdi_sio: remove redundant TIOCMBIS and TIOCMBIC code
    
    ftdi_sio: Remove redundant handling of TIOCMBIS and TIOCMBIC ioctls
    as they are handled in the tty layer and never reach this driver.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8f977e4201fcc0bd512eb01e775894e0a9c34a39
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Mon Jun 20 16:45:42 2005 +0100

    [PATCH] USB ftdi_sio: reduce device id table clutter
    
    ftdi_sio: Use a single usb_device_id table and detect the type of chip
    programatically.  The table also flags devices requiring special
    initialization.  The patch makes the driver about 10K smaller and makes
    it easier to add new device IDs.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c8d61783e5bb5e29744b6481a1c67c6e4e8e135
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 14:29:58 2005 -0700

    [PATCH] USB: khubd: use kthread API
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e8116e84b56f8fa4f091b967a045f47c55095c68
Author: Phil Dibowitz <phil@ipom.com>
Date:   Wed Jun 22 22:47:13 2005 -0700

    [PATCH] USB Storage: Remove unneeded SC/P
    
    This patch removes an unneeded subclass and protocol from the
    07af/0005/100 entry in unsual_devs.h as reported by Alfred Ganz
    <alfred-ganz@agci.com>.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf5910bbae81b95bdf120e01fd365ad7b939b143
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 29 16:53:29 2005 -0700

    [PATCH] USB: add bMaxPacketSize0 attribute to sysfs
    
    For some reason this was not there...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 514604c6d1779c55d3e97dc4e9a71c117c1ccbcd
Author: Christoph Lameter <clameter@sgi.com>
Date:   Thu Jul 7 16:59:00 2005 -0700

    [IA64] pcibus_to_node implementation for IA64
    
    pcibus_to_node provides a way for the Linux kernel to identify to which
    node a certain pcibus connects to. Allocations of control structures
    for devices can then be made on the node where the pci bus is located
    to allow local access during interrupt and other device manipulation.
    
    This patch provides a new "node" field in the the pci_controller
    structure. The node field will be set based on ACPI information (thanks
    to Alex Williamson  <alex.williamson@hp.com for that piece).
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1ca70351af02b1f0eb9cd2e7eb7a547f8ad5d893
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Tue Jul 12 17:51:06 2005 +0200

    [MTD] Make XIP support depend on CONFIG_ARM
    
    ARM is the only known user of this at the moment.
    Prevent allyes builds for other archs from failing
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit d8683a0cb5d09cb7f19feefa708424a84577e68f
Author: Len Brown <len.brown@intel.com>
Date:   Sun Jul 3 16:42:23 2005 -0400

    [ACPI] increase MAX_IO_APICS to 64 on i386
    
    x86_64 was already 128
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3754
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 02df8b9385c21fdba165bd380f60eca1d3b0578b
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Fri Apr 15 15:07:10 2005 -0400

    [ACPI] enable C2 and C3 idle power states on SMP
    http://bugzilla.kernel.org/show_bug.cgi?id=4401
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6a2e9b738cb5c929df73b6acabdd8f9a4e9a0416
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Mon Jul 11 21:13:56 2005 -0700

    [NET]: move config options out to individual protocols
    
    Move the protocol specific config options out to the specific protocols.
    With this change net/Kconfig now starts to become readable and serve as a
    good basis for further re-structuring.
    
    The menu structure is left almost intact, except that indention is
    fixed in most cases. Most visible are the INET changes where several
    "depends on INET" are replaced with a single ifdef INET / endif pair.
    
    Several new files were created to accomplish this change - they are
    small but serve the purpose that config options are now distributed
    out where they belongs.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 17e9c78a75ce9eacd61200f9e1f1924012e28846
Author: Luming Yu <luming.yu@intel.com>
Date:   Fri Apr 22 23:07:10 2005 -0400

    [ACPI] EC GPE-disabled issue
    http://bugzilla.kernel.org/show_bug.cgi?id=3851
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a27ac38efd6dc6dccebfc9bcc475ab4aa5fc4a56
Author: Len Brown <len.brown@intel.com>
Date:   Fri Apr 5 00:07:45 2005 -0500

    [ACPI] fix merge error that broke CONFIG_ACPI_DEBUG=y build
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 590275ce72c48fdbddea057bc9ee379c1fd851ef
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Mon Apr 18 23:52:17 2005 -0400

    [ACPI] cleanup: delete !IA64_SGI_SN from acpi/Kconfig
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6c4fa56033c11ad5c5929bf3edd1505d3d8a8c0b
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Apr 18 23:06:47 2005 -0400

    [ACPI] fix C1 patch for IA64
    http://bugzilla.kernel.org/show_bug.cgi?id=4233
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ef7b06cd905424aea7c31f27fef622e84e75e650
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Mon Apr 18 22:59:23 2005 -0400

    [ACPI] quiet dmesg related to ACPI PM of PCI devices
    
    DBG("No ACPI bus support for %s\n", dev->bus_id);
    http://bugzilla.kernel.org/show_bug.cgi?id=4277
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 44f6c01242da4e162f28d8e1216a8c7a91174605
Author: Robert Moore <robert.moore@intel.com>
Date:   Mon Apr 18 22:49:35 2005 -0400

    ACPICA 20050408 from Bob Moore
    
    Fixed three cases in the interpreter where an "index"
    argument to an ASL function was still (internally) 32
    bits instead of the required 64 bits.  This was the Index
    argument to the Index, Mid, and Match operators.
    
    The "strupr" function is now permanently local
    (acpi_ut_strupr), since this is not a POSIX-defined
    function and not present in most kernel-level C
    libraries. References to the C library strupr function
    have been removed from the headers.
    
    Completed the deployment of static
    functions/prototypes. All prototypes with the static
    attribute have been moved from the headers to the owning
    C file.
    
    ACPICA 20050329 from Bob Moore
    
    An error is now generated if an attempt is made to create
    a Buffer Field of length zero (A CreateField with a length
    operand of zero.)
    
    The interpreter now issues a warning whenever executable
    code at the module level is detected during ACPI table
    load. This will give some idea of the prevalence of this
    type of code.
    
    Implemented support for references to named objects (other
    than control methods) within package objects.
    
    Enhanced package object output for the debug
    object. Package objects are now completely dumped, showing
    all elements.
    
    Enhanced miscellaneous object output for the debug
    object. Any object can now be written to the debug object
    (for example, a device object can be written, and the type
    of the object will be displayed.)
    
    The "static" qualifier has been added to all local
    functions across the core subsystem.
    
    The number of "long" lines (> 80 chars) within the source
    has been significantly reduced, by about 1/3.
    
    Cleaned up all header files to ensure that all CA/iASL
    functions are prototyped (even static functions) and the
    formatting is consistent.
    
    Two new header files have been added, acopcode.h and
    acnames.h.
    
    Removed several obsolete functions that were no longer
    used.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ebb6e1a6122fd6b7c96470cfd4ce0f04150e5084
Author: Len Brown <len.brown@intel.com>
Date:   Thu Apr 14 23:12:56 2005 -0400

    [ACPI] Deprecate /proc/acpi/sleep in favor of /sys/power/state
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9d9437759eb6fdb68f7b82cbee20b0fb711d9f0d
Author: Nickolai Zeldovich <kolya@MIT.EDU>
Date:   Fri Apr 8 23:37:34 2005 -0400

    [ACPI] S3 resume -- use lgdtl, not lgdt
    
    From: Nickolai Zeldovich <kolya@MIT.EDU>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d5950b4355049092739bea97d1bdc14433126cc5
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Mon Jul 11 21:03:49 2005 -0700

    [NET]: add a top-level Networking menu to *config
    
    Create a new top-level menu named "Networking" thus moving
    net related options and protocol selection way from the drivers
    menu and up on the top-level where they belong.
    
    To implement this all architectures has to source "net/Kconfig" before
    drivers/*/Kconfig in their Kconfig file. This change has been
    implemented for all architectures.
    
    Device drivers for ordinary NIC's are still to be found
    in the Device Drivers section, but Bluetooth, IrDA and ax25
    are located with their corresponding menu entries under the new
    networking menu item.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9c3e457de24cca2ca688fa397d93a241f472048
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Apr 1 00:07:31 2005 -0500

    [ACPI] PNPACPI vs sound IRQ
    
    http://bugme.osdl.org/show_bug.cgi?id=4016
    
    Written-by: David Shaohua Li <shaohua.li@intel.com>
    Acked-by: Adam Belay <abelay@novell.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit acf05f4b7f558051ea0028e8e617144123650272
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Thu Mar 31 23:23:15 2005 -0500

    [ACPI] update /proc/acpi/processor/*/power even if only C1 support
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0b7f22aab4e960c75e82ad696ef852f9b0015e7d
Author: Olaf Kirch <okir@suse.de>
Date:   Mon Jul 11 21:01:42 2005 -0700

    [IPV4]: Prevent oops when printing martian source
    
    In some cases, we may be generating packets with a source address that
    qualifies as martian. This can happen when we're in the middle of setting
    up the network, and netfilter decides to reject a packet with an RST.
    The IPv4 routing code would try to print a warning and oops, because
    locally generated packets do not have a valid skb->mac.raw pointer
    at this point.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 55e59c511cea3c6c721971467c707e9955922bc2
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Thu Mar 31 22:51:10 2005 -0500

    [ACPI] Evaluate CPEI Processor Override flag
    
    ACPI 3.0 added a Correctable Platform Error Interrupt (CPEI)
    Processor Overide flag to MADT.Platform_Interrupt_Source.
    Record the processor that was provided as hint from ACPI.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6940fabaa35b893163b7043d0d1dc5d715f9e1ca
Author: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
Date:   Wed Mar 30 23:15:47 2005 -0500

    [ACPI] hotplug Processor consideration in acpi_bus_add()
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit af9debd461d10fe582c9c0e80eafa69f698331ed
Author: Julian Anastasov <ja@ssi.bg>
Date:   Mon Jul 11 20:59:57 2005 -0700

    [IPVS]: Add and reorder bh locks after moving to keventd.
    
    An addition to the last ipvs changes that move
    update_defense_level/si_meminfo to keventd:
    
    - ip_vs_random_dropentry now runs in process context and should use _bh
      locks to protect from softirqs
    
    - update_defense_level still needs _bh locks after si_meminfo is called,
      for the same purpose
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8de7a63b69a263b7549599be882d7aa15397f8b3
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 30 22:53:30 2005 -0500

    [ACPI] fix debug-mode build warning in acpi/hotkey.c
    
    drivers/acpi/hotkey.c: In function `create_polling_proc':
    drivers/acpi/hotkey.c:334: warning: ISO C90 forbids mixed declarations and code
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f5b8adb4f5767415b7b00e32e4766a052e2ed4cc
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Jul 11 20:59:03 2005 -0700

    [NET]: Trivial spelling fix patch for net/Kconfig
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d1dd0c23916bd781de27bc5ec1c295064e9ce9cc
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Wed Mar 30 22:39:49 2005 -0500

    [ACPI] fix kmalloc size bug in acpi/video.c
    
    acpi_video_device_find_cap() used &p instead of *p
    when calculating storage size, thus allocating
    only 4 or 8 bytes instead of 12...
    
    Also, kfree(NULL) is legal, so remove some unneeded checks.
    
    From: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7334571f724df7a19f48cc974e991e00afde1e2f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 30 22:31:35 2005 -0500

    [ACPI] fix potential NULL dereference in acpi/video.c
    
    Found-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3182cd84f0e132558bbe106c070405ae49f1f0e3
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jul 11 20:57:47 2005 -0700

    [SCTP]: __nocast annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4224153098c1103db592b28f304beeb9c02481b
Author: Panagiotis Issaris <takis@gna.org>
Date:   Wed Mar 30 22:15:36 2005 -0500

    [ACPI] check for kmalloc failure in toshiba_acpi.c
    
    Signed-off-by: Panagiotis Issaris <takis@gna.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 83ea7445221651dc43cf8d22f81089e0cbccf22b
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 30 22:12:13 2005 -0500

    [ACPI] fix build warning
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f165b10f4a9aac7fee9b11a125de20a1712be128
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 30 21:23:19 2005 -0500

    cleanup: remove unnecessary initializer on static pointers
    
    Suggested-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b008b8d7092053fc1f036cfc54dc11740cc424ed
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Fri Mar 25 12:03:15 2005 -0500

    [ACPI] PNPACPI parse error
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3912
    
    Written-by: matthieu castet <castet.matthieu@free.fr>
    Acked-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a406d9e63e1d7088aad22565449de2e109300e5c
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 23 16:16:03 2005 -0500

    [ACPI] gut acpi_pci_choose_state() to avoid conflict
    with pending pm_message_t re-definition.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fa9cd547e097df4966b8bd5c94aeed953e32b14d
Author: Luming Yu <luming.yu@intel.com>
Date:   Sat Mar 19 01:54:47 2005 -0500

    [ACPI] fix EC access width
    http://bugzilla.kernel.org/show_bug.cgi?id=4346
    
    Written-by: David Shaohua Li and Luming Yu
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 451566f45a2e6cd10ba56e7220a9dd84ba3ef550
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Sat Mar 19 01:10:05 2005 -0500

    [ACPI] Enable EC Burst Mode
    
    Fixes several Embedded Controller issues, including
    button failure and battery status AE_TIME failure.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3851
    
    Based on patch by: Andi Kleen <ak@suse.de>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b913100d7304ea9596d8d85ab5f3ae04bd2b0ddb
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Sat Mar 19 00:16:18 2005 -0500

    [ACPI] pci_set_power_state() now calls
    	platform_pci_set_power_state()
    		and ACPI can answer
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4277
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0f64474b8f7f1f7f3af5b24ef997baa35f923509
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Sat Mar 19 00:15:48 2005 -0500

    [ACPI] PCI can now get suspend state from firmware
    
    pci_choose_state() can now call
    	platform_pci_choose_state()
    		and ACPI can answer
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4277
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 84df749f364209c9623304b7a94ddb954dc343bb
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Mar 18 18:53:36 2005 -0500

    [ACPI] Bind ACPI and PCI devices
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4277
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4e10d12a3d88c88fba3258809aa42d14fd8cf1d1
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Mar 18 18:45:35 2005 -0500

    [ACPI] Bind PCI devices with ACPI devices
    
    Implement the framework for binding physical devices
    with ACPI devices. A physical bus like PCI bus
    should create a 'acpi_bus_type', with:
    
    .find_device:
            For device which has parent such as normal PCI devices.
    
    .find_bridge:
            It's for special devices, such as PCI root bridge
    	or IDE controller.  Such devices generally haven't a
    	parent or ->bus. We use the special method
    	to get an ACPI handle.
    
    Uses new field in struct device: firmware_data
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4277
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fb9802fa59b196d7f90bb3c2e33c555c6bdc4c54
Author: Luming Yu <luming.yu@intel.com>
Date:   Fri Mar 18 18:03:45 2005 -0500

    [ACPI] generic Hot Key support
    
    See Documentation/acpi-hotkey.txt
    
    Use cmdline "acpi_specific_hotkey" to enable
    legacy platform specific drivers.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3887
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d58da590451cf6ae75379a2ebf96d3afb8d810d8
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Mar 18 16:43:54 2005 -0500

    [ACPI] S3 Suspend to RAM: fix driver suspend/resume methods
    
    Drivers should do this:
    
    .suspend()
    	pci_disable_device()
    
    .resume()
    	pci_enable_device()
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 362b06bb70b5a5779b2e852e0f2bdb437061106e
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Mar 18 16:30:29 2005 -0500

    [ACPI] S3 Suspend to RAM: interrupt resume fix
    
    Delete PCI Interrupt Link Device .resume method --
    it is the device driver's job to request interrupts,
    not the Link's job to remember what the devices want.
    
    This addresses the issue of attempting to run
    the ACPI interpreter too early in resume, when
    interrupts are still disabled.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5ae947ecc9c1c23834201e5321684a5cb68bdd3f
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Fri Mar 18 16:27:13 2005 -0500

    [ACPI] Suspend to RAM fix
    
    Free some RAM before entering S3 so that upon
    resume we can be sure early allocations will succeed.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e2a5b420f716cd1a46674b1a90389612eced916f
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Mar 18 16:20:46 2005 -0500

    [ACPI] ACPI poweroff fix
    
    Register an "acpi" system device to be notified of shutdown preparation.
    This depends on CONFIG_PM
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4041
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit be91492ca871e58f61b517cfba541095bb60001c
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 18 16:00:29 2005 -0500

    [ACPI] CONFIG_ACPI now depends on CONFIG_PM
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit bd4698dad3023ae137b366c736e29ca6eaf3b9f7
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Mar 18 15:35:22 2005 -0500

    [ACPI] Allow simultaneous Fixed Feature and Control Method buttons
    delete /proc/acpi/button
    
    http://bugzilla.kernel.org/show_bug.cgi?id=1920
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 45b1b196677b8009ab6cdc4b656265f1d7015c1b
Author: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
Date:   Wed Mar 2 00:00:00 2005 -0500

    [ACPI] update CONFIG_ACPI_CONTAINER Kconfig help
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7ac3db59fd4410405ce55e2a25c397aec440d8da
Merge: 1604d9c... 328f314...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 11 16:32:40 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit eb1dd68bc897d4e5a5133bfffbd4777a0fe16c4c
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Jul 2 12:22:01 2005 -0400

    [SCSI] SPI transport class, don't negotiate options not supported
    
    At the moment, the transport class blindly tries to set things like
    QAS and IU, even if the drive won't support them.  It's best not to
    annoy the devices like this and instead only set what the drive says
    is actually supported.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ede7fbdf526c314850c9f32dd8da1753bf8d0ad5
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 2 18:52:48 2005 +0200

    [PATCH] I2C: Move hwmon drivers (3/3)
    
    Part 3: Move the drivers documentation, plus two general documentation
    files.
    
    Note that the patch "adds trailing whitespace", because it does move the
    files as-is, and some files happen to have trailing whitespace.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8d5d45fb14680326f833295f2316a4ec5e357220
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 2 18:20:26 2005 +0200

    [PATCH] I2C: Move hwmon drivers (2/3)
    
    Part 2: Move the driver files themselves.
    
    Note that the patch "adds trailing whitespace", because it does move the
    files as-is, and some files happen to have trailing whitespace.
    
    From: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 63522f7fdb624adef20cb9d90c7effcd5b6301b2
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 11 14:29:11 2005 -0700

    [NETLINK]: Reserve NETLINK_NETFILTER.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ad2f931dcb41bcfae38cc77d78b7821dfef83cf2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 2 18:15:49 2005 +0200

    [PATCH] I2C: Move hwmon drivers (1/3)
    
    Part 1: Configuration files and Makefiles.
    
    From: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e65f82814e9828d3ff54988de9e7c0b36794daa
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Jun 30 22:52:38 2005 +0400

    [PATCH] w1: fix CRC calculation on bigendian platforms.
    
    In the 2.6.13-rc1 code the "rn" structure is in the wrong-endianness
    when passed to w1_attach_slave_device(). This causes problems like the
    family and crc being swapped around.
    
    Signed-off-by: Roger Blofeld <blofeldus@yahoo.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80efa8c72006a1c04004f8fb07b22073348e4bf2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 1 00:17:27 2005 +0200

    [PATCH] I2C: SENSORS_ATXP1 must select I2C_SENSOR
    
    On Thu, Jun 30, 2005 at 11:47:09PM +0200, Sebastian Pigulak wrote:
    > I've tried patching linux-2.6.13-RC1 with patch-2.6.13-rc1-git2 and
    > building atxp1(it allows Vcore voltage changing) into the kernel.
    > Unfortunately, the kernel compilation stops with:
    >
    > LD      init/built-in.o
    > LD      vmlinux
    > drivers/built-in.o(.text+0x92298): In function `atxp1_detect':
    > : undefined reference to `i2c_which_vrm'
    > drivers/built-in.o(.text+0x921ae): In function `atxp1_attach_adapter':
    > : undefined reference to `i2c_detect'
    > make: *** [vmlinux] B??d 1
    > ==> ERROR: Build Failed.  Aborting...
    >
    > Could someone have a look at the module and possibly fix it up?
    
    SENSORS_ATXP1 must select I2C_SENSOR.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d772e2587da3c8b0fb8610fcc1c91fd82f87e52
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jun 25 11:37:40 2005 +0200

    [PATCH] I2C: Clarify the usage of i2c-dev.h
    
    Upon suggestion by Nils Roeder, here is an update to the i2c
    documentation to clarify which header files user-space applications
    relying on the i2c-dev interface should include.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a68e2f4895070f3a449bfe5ae1174b73cc900642
Author: Jan Veldeman <jan@mind.be>
Date:   Fri Jul 1 16:20:24 2005 +0200

    [PATCH] I2C: Documentation fix
    
    Fix documentation to match code in include/linux/i2c-dev.h
    
    Signed-off-by: Jan Veldeman <jan@mind.be>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 61f5809d3ebce9d5433b8696048e91405b681023
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 07:14:06 2005 -0700

    [PATCH] I2C: minor I2C doc cleanups
    
    The I2C stack has long had "id" fields, of rather dubious utility, in
    many data structures.  This removes mention of one of them from the
    documentation about how to write an I2C driver, so that only drivers
    that really need to use them (probably old/legacy code) will have any
    reason to use this field.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2db32767874fe53faff4f80de878ca19927efc1f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 23 23:43:00 2005 +0200

    [PATCH] I2C: drop bogus eeprom comment
    
    This simple patch drops an out-of-date comment in the eeprom i2c chip
    driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0920e10438e9fe8b22aba607083347c84458ed8
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Tue Jun 28 00:21:30 2005 -0400

    [PATCH] i2c: make better use of IDR in i2c-core
    
    This patch uses the already existing IDR mechanism to simplify and
    improve the i2c_get_adapter function in i2c-core.
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5da69ba42aa42a479c0f5d8cb8351ebb6b51c12e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 1 14:28:15 2005 +0200

    [PATCH] I2C: m41t00: fix incorrect kfree
    
    Here is a simple path fixing an incorrect kfree in the m41t00 i2c chip
    driver. The current code happens to work by accident, but the freed
    pointer isn't the one which was allocated in the first place, which
    could cause problems later.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2146fec20c38d926f0d88413977f941f42a14588
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 23 23:41:39 2005 +0200

    [PATCH] I2C: max6875 Kconfig update
    
    Here is a proposed Kconfig update for the new max6875 i2c chip driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 089bd86632769051f15cd7387eebe126d18f151f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 23 23:37:53 2005 +0200

    [PATCH] I2C: max6875 documentation update
    
    Here is a proposed documentation update for the new max6875 i2c chip
    driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9ab1ee2ab7d65979c0f14a60ee1f29f8988f5811
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jun 24 21:14:16 2005 +0200

    [PATCH] I2C: New max6875 driver may corrupt EEPROMs
    
    After a careful code analysis on the new max6875 driver
    (drivers/i2c/chips/max6875.c), I have come to the conclusion that this
    driver may cause EEPROM corruptions if used on random systems.
    
    The EEPROM part of the MAX6875 chip is accessed using rather uncommon
    I2C sequences. What is seen by the MAX6875 as reads can be seen by a
    standard EEPROM (24C02) as writes. If you check the detection method
    used by the driver, you'll find that the first SMBus command it will
    send on the bus is i2c_smbus_write_byte_data(client, 0x80, 0x40). For
    the MAX6875 it makes an internal pointer point to a specific offset of
    the EEPROM waiting for a subsequent read command, so it's not an actual
    data write operation, but for a standard EEPROM, this instead means
    writing value 0x40 to offset 0x80. Blame Philips and Intel for the
    obscure protocol.
    
    Since the MAX6875 and the standard, common 24C02 EEPROMs share two I2C
    addresses (0x50 and 0x52), loading the max6875 driver on a system with
    standard EEPROMs at either address will trigger a write on these
    EEPROMs, which will lead to their corruption if they happen not to be
    write protected. This kind of EEPROMs can be found on memory modules
    (SPD), ethernet adapters (MAC address), laptops (proprietary data) and
    displays (EDID/DDC). Most of these are hopefully write-protected, but
    not all of them.
    
    For this reason, I would recommend that the max6875 driver be
    neutralized, in a way that nobody can corrupt his/her EEPROMs by just
    loading the driver. This means either deleting the driver completely, or
    not listing any default address for it. I'd like this to be done before
    2.6.13-rc1 is released.
    
    Additionally, the max6875 driver lacks the 24RF08 corruption preventer
    present in the eeprom driver, which means that loading this driver in a
    system with such a chip would corrupt it as well.
    
    Here is a proposed quick patch addressing the issue, although I wouldn't
    mind a complete removal if it makes everyone feel safer. I think Ben
    has plans to replace this driver by a much simplified one anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 541e6a02768404efb06bd1ea5f33d614732f41fc
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 23 22:18:08 2005 +0200

    [PATCH] I2C: Strip trailing whitespace from strings
    
    Here is a simple patch originally from Denis Vlasenko, which strips a
    useless trailing whitespace from 8 strings in 4 i2c drivers. Please
    apply, thanks.
    
    From: Denis Vlasenko <vda@ilport.com.ua>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 65fc50e50ff9f8b82c3756eccd7e7db6a267ffe9
Author: david-b@pacbell.net <david-b@pacbell.net>
Date:   Wed Jun 29 07:13:00 2005 -0700

    [PATCH] I2C: minor TPS6501x cleanups
    
    This includes various small cleanups and fixes to the TPS 6501x driver that
    came mostly from review feedback by Jean Delvare; thanks Jean!  Also some
    goofy whitespace gets fixed.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6328c0e163abfce679b1beffb166f72900bf0a22
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Wed Jun 22 10:25:13 2005 +0300

    [PATCH] I2C: Coding style cleanups to via686a
    
    On Wednesday 22 June 2005 08:17, Greg Kroah-Hartman wrote:
    > [PATCH] I2C: Coding style cleanups to via686a
    >
    > The via686a hardware monitoring driver has infamous coding style at the
    > moment. I'd like to clean up the mess before I start working on other
    > changes to this driver. Is the following patch acceptable? No code
    > change, only coding style (indentation, alignments, trailing white
    > space, a few parentheses and a typo).
    >
    > Signed-off-by: Jean Delvare <khali@linux-fr.org>
    > Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Nice.
    
    You missed some. This one is on top of your patch:
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1604d9c8f8dffafe3a077dc5ae7c935d2318bcf6
Merge: a840098... 3b5cc09...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 11 14:08:08 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 328f314a89fd24e50fdf22c81efb2a468fdf25b5
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 11 13:44:56 2005 -0700

    [SPARC64]: Add missing asm-sparc64/seccomp.h file.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73eb7d9e8cfd16813eec94d0ec8fa2a5262a85cc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 11 19:42:58 2005 +0100

    [PATCH] ARM SMP: Initialise cpu_present_map
    
    Rather than relying on the fixup code in init/main.c, explicitly
    initialise cpu_present_map.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e11b2236eace94ad9a2e421904742e83976405ed
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 11 19:26:31 2005 +0100

    [PATCH] ARM SMP: We list IRQs for present CPUs, not online CPUs
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a40342e0e72a2ba89aaa9e6c9a9eceb04741b24
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jun 28 16:50:40 2005 +0200

    [SCSI] aic7xxx: remove ahc_tailq
    
    now that we do normal PCI probing there's no need to keep a list of
    all HBAs.
    
    Rejections fixed up and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dfd287f6ee9be1e3ae8fe1160c185aac6ca83c6a
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jun 28 16:49:44 2005 +0200

    [SCSI] aic7xxx: sane pci probing
    
    always probe in bus order, avoid any reordering
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7f602c53939fdb1bca12151a28f9b90cde046fb1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat May 21 10:24:37 2005 -0500

    [SCSI] add TYPE_RBC to our type table
    
    Here's a tiny update that means we print the correct ASCII type
    information
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3b5cc09033f49d004006acf44e5b05036bd46a85
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Sun Jul 10 21:49:00 2005 -0700

    [IA64] assign_irq_vector() should not panic
    
    Current assign_irq_vector() will panic if interrupt vectors is running
    out. But I think how to handle the case of lack of interrupt vectors
    should be handled by the caller of this function. For example, some
    PCI devices can raise the interrupt signal via both MSI and I/O
    APIC. So even if the driver for these device fails to allocate a
    vector for MSI, the driver still has a chance to use I/O APIC based
    interrupt. But currently there is no chance for these driver to use
    I/O APIC based interrupt because kernel will panic when
    assign_irq_vector() fails to allocate interrupt vector.
    
    The following patch changes assign_irq_vector() for ia64 to return
    -ENOSPC on error instead of panic (as i386 and x86_64 versions do).
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 699139279d29e36e39d353b0536b510dab2e5ffa
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Fri Jul 8 17:10:00 2005 -0700

    [IA64] use msleep_interruptible() instead of schedule_timeout
    
    Description: Replace schedule_timeout() with msleep_interruptible() to
    guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Acked-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a8400986fb0bff251ac4dd9e2188cf0b59443d3f
Author: Miles Bader <miles@gnu.org>
Date:   Mon Jul 11 18:24:50 2005 +0900

    [PATCH] v850: Update mmu.h header to match implementation changes
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 623cdf4a04a9856f93e32e7716ed8196f6d5ee3b
Author: Miles Bader <miles@gnu.org>
Date:   Mon Jul 11 18:24:50 2005 +0900

    [PATCH] v850: Update checksum.h to match changed function signatures
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 200d481f28be4522464bb849dd0eb5f8cb6be781
Merge: f43a64c... 97f927a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 11 10:18:18 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/tglx/mtd-2.6

commit f43a64c5e1a65d12b9b53a35ed2d5db441fcb64c
Merge: 5c23804... f7ceba3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 11 10:09:59 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit d0feafbf14ebe860136b8ad84cce42b34defb323
Author: Olaf Hering <olh@suse.de>
Date:   Sun Jul 10 12:35:00 2005 -0700

    [IA64] remove linux/version.h include from arch/ia64
    
    changing CONFIG_LOCALVERSION rebuilds too much, for no appearent reason.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e7578c08a4dee36fe01fb38805f325689e642eb0
Merge: 763b391... 5c23804...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Jul 11 09:43:11 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit d12734d14e5602816f0b16b17a8cef5ea70afb5a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 11 17:38:36 2005 +0100

    [PATCH] ARM SMP: Rename cpu_present_mask to cpu_possible_map
    
    The kernel's terminology for this is cpu_possible_map not
    cpu_present_mask.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a5990120252539bccdaf70a66ac021966e80e3f7
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 9 01:30:02 2005 -0700

    [SCSI] dpt_i2o warning fix
    
    drivers/scsi/dpt_i2o.c: In function `adpt_queue':
    drivers/scsi/dpt_i2o.c:385: warning: unused variable `timeout'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cc33895abbba85668de11df2cd04d6faf0be43e1
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 9 01:30:03 2005 -0700

    [SCSI] aic79xx: ahd_linux_dev_reset() cleanup
    
    Use the macros consistently in ahd_linux_dev_reset().
    
    If ahd_linux_dev_reset() really can be called with local interrupts disabled
    then yuk.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7343c9ba8ed9d504cd2daf960da58971c6631601
Author: Olaf Hering <olh@suse.de>
Date:   Mon Jul 11 10:17:06 2005 +0100

    [PATCH] ARM: remove linux/version.h include from arch/arm
    
    Changing CONFIG_LOCALVERSION rebuilds too much, for no appearent reason.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bc5d04822bd9f34ea93a681f05f5e5683935d574
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Mon Jul 11 01:09:32 2005 -0500

    Input: HID - only report events coming from interrupts to hiddev
    
    Currently hid-core follows the same code path for input reports
    regardless of whether they are a result of interrupt transfers or
    control transfers. That leads to interrupt events erroneously being
    reported to hiddev for regular control transfers.
    
    Prior to 2.6.12 the problem was mitigated by the fact that
    reporting to hiddev is supressed if the field value has not changed,
    which is often the case. Said filtering was removed in 2.6.12-rc1 which
    means any input reports fetched via control transfers result in hiddev
    interrupt events. This behavior can quickly lead to a feedback loop
    where a userspace app, in response to interrupt events, issues control
    transfers which in turn create more interrupt events.
    
    This patch prevents input reports that arrive via control transfers from
    being reported to hiddev as interrupt events.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 153ab429cad3b585ddf1a5521cfaadb57402cd31
Author: Michael Prokop <mika@grml.org>
Date:   Mon Jul 11 01:09:10 2005 -0500

    Input: elo - fix help in Kconfig (wrong module name)
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6f5eacfc1e9a12ffca10b4abe8e9fddf1997da6f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jul 11 01:08:56 2005 -0500

    Input: joydev - remove custom conversion from jiffies to msecs
    
    Replace the MSECS() macro with the jiffies_to_msecs() function provided
    in jiffies.h
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6345fdfd190659a2316d18065871245e3a1e0f84
Author: Luca T <luca@lt-software.com>
Date:   Mon Jul 11 01:08:40 2005 -0500

    Input: HID - add a quirk for Aashima Trust (06d6:0025) gamepad
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 963f626d46d5caeeb3cff29998d8a64df5b25591
Author: Peter Osterlund <petero2@telia.com>
Date:   Mon Jul 11 01:08:04 2005 -0500

    Input: ALPS - unconditionally enable tapping mode
    
    The condition in alps_init() was also inverted and the driver
    was enabling tapping mode only if it was already enabled.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b30dc120a7471a961272aeca24ede1c0530e6455
Author: David Moore <dcm@MIT.EDU>
Date:   Mon Jul 11 01:07:48 2005 -0500

    Input: ALPS - fix resume (for DualPoints)
    
    The driver would not reset pass-through mode when performing
    resume of a DualPoint touchpad causing it to stop working
    until next reboot.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 9ba5eaafa1bff1d2dc7f6b9fb4cc6e313dcd6105
Author: Simon Horman <horms@valinux.co.jp>
Date:   Mon Jul 11 01:07:20 2005 -0500

    Input: synaptics - limit rate to 40pps on Toshiba Dynabooks
    
    Toshiba Dynabooks require the same workaround as Satellites -
    Synaptics report rate should be lowered to 40pps (from 80),
    otherwise KBC starts losing keypresses.
    
    Signed-off-by: Simon Horman <horms@valinux.co.jp>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 20f07944af80a2916b2f6ac1559c0a680c309c0e
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jul 11 01:06:28 2005 -0500

    Input: i8042 - add Fujitsu T3010 to NOMUX blacklist.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 865190cdbba995936700346c2daabbed97ac30ba
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jul 11 01:06:06 2005 -0500

    Input: i8042 - add Alienware Sentia to NOMUX blacklist.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit bef5a66fd7fd8d606da5c9f210e2673f4e636f57
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon Jul 11 01:05:47 2005 -0500

    Input: serio_raw - fix Kconfig help
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit dc1e97b5eaed1921f421cf56fd233f064464b300
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jul 11 01:02:16 2005 -0500

    Input: serio_raw - link serio_raw misc device to corresponding
           serio port in sysfs.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e0d21d9cca25f424f3129649be48a63c128ed42d
Merge: beffbdc... 5c23804...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jul 11 00:58:04 2005 -0500

    Merge rsync://www.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit f7ceba360cce9af3fbc4e5a5b1bd40b570b7021c
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 19:29:45 2005 -0700

    [SPARC64]: Add syscall auditing support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8d8a64796fdee4e20355c6c12c9cc630a2e7494d
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 16:55:48 2005 -0700

    [SPARC64]: Pass regs and entry/exit boolean to syscall_trace()
    
    Also fix a bug in 32-bit syscall tracing.  We forgot to update
    this code when we moved over to the convention that all 32-bit
    syscall arguments are zero extended by default.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb49bcda15f1bc1a52c7f887db278447f332eaa7
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 16:49:28 2005 -0700

    [SPARC64]: Add SECCOMP support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af166d15c3ad4d501a0c4fb5b4547bb2ba205918
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 15:56:40 2005 -0700

    [SPARC64]: Kill ancient and unused SYSCALL_TRACING debugging code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d369ddd2fc00fc3f46e9052d1017cbf407e3cdf7
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 15:45:11 2005 -0700

    [SPARC64]: Add __read_mostly support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9126dfde9e5efd76f9d4246819bdc7ea66de3af0
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 10 15:11:45 2005 -0700

    [SPARC]: Add ioprio system call support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c23804a0941a111752fdacefe0bea2db1b4d93f
Merge: 58c853c... ec6bced...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 10 12:57:49 2005 -0700

    Merge master.kernel.org:~rmk/linux-2.6-arm.git

commit 58c853c6eabe93ab5e5daf7150fbb4e562acbb79
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun Jul 10 23:12:01 2005 +1000

    [PATCH] remove asm-xtensa/ipc.h
    
    Now that sys_ipc has been removed from xtensa, asm/ipc.h is no longer
    needed for that architecture.  Not tested, but obviously correct.  This
    file is included only from arch code and this patch also removes the only
    inclusion.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1934b8b6561ee7804b0a671b48cf642fcd936b2c
Author: Ben Collins <bcollins@debian.org>
Date:   Sat Jul 9 20:01:23 2005 -0400

    [PATCH] Sync up ieee-1394
    
    Lots of this patch is trivial code cleanups (static vars were being
    intialized to 0, etc).
    
    There's also some fixes for ISO transmits (max buffer handling).
    Aswell, we have a few fixes to disable IRM capabilites correctly.  We've
    also disabled, by default some generally unused EXPORT symbols for the
    sake of cleanliness in the kernel.  However, instead of removing them
    completely, we felt it necessary to have a config option that allowed
    them to be enabled for the many projects outside of the main kernel tree
    that use our API for driver development.
    
    The primary reason for this patch is to revert a MODE6->MODE10 RBC
    conversion patch from the SCSI maintainers.  The new conversions handled
    directly in the scsi layer do not seem to work for SBP2.  This patch
    reverts to our old working code so that users can enjoy using Firewire
    disks and dvd drives again.
    
    We are working with the SCSI maintainers to resolve this issue outside
    of the main kernel tree.  We'll merge the patch once the SCSI layer's
    handling of the MODE10 conversion is working for us.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec6bced6c7b92904f5ead39c9c1b8dc734e6eff0
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:20 2005 +0100

    [PATCH] ARM: 2803/1: OMAP update 11/11: Add cpufreq support
    
    Patch from Tony Lindgren
    
    This patch adds minimal cpufreq support for OMAP
    taking advantage of the clock framework.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d3b83419117c8f7fd762b488b67393b94fa94762
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:19 2005 +0100

    [PATCH] ARM: 2805/1: OMAP update 10/11: Update H2 defconfig
    
    Patch from Tony Lindgren
    
    This patch updates H2 defconfig.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bb13b5fdba16d5b30fe97f3d167bb138b978b71c
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:18 2005 +0100

    [PATCH] ARM: 2804/1: OMAP update 9/11: Update OMAP arch files
    
    Patch from Tony Lindgren
    
    This patch by various OMAP developers syncs the OMAP
    specific arch files with the linux-omap tree.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d48af15ea7227d633ddd5002223c2b122b1032e1
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:17 2005 +0100

    [PATCH] ARM: 2802/1: OMAP update 8/11: Update OMAP arch files
    
    Patch from Tony Lindgren
    
    This patch by various OMAP developers syncs the OMAP
    specific arch files with the linux-omap tree.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5e1c5ff4783e0ddd241580c9996390508722190e
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:15 2005 +0100

    [PATCH] ARM: 2812/1: OMAP update 7c/11: Move arch-omap to plat-omap
    
    Patch from Tony Lindgren
    
    This patch move common OMAP code from arch-omap to plat-omap
    directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b91585560b59fd3ef4e20ca6f7d35aefda193774
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:14 2005 +0100

    [PATCH] ARM: 2809/1: OMAP update 7b/11: Move arch-omap to plat-omap
    
    Patch from Tony Lindgren
    
    This patch move common OMAP code from arch-omap to plat-omap
    directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 60906a8a4e07eb179a2ed90dda23fa36972c6336
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:13 2005 +0100

    [PATCH] ARM: 2807/1: OMAP update 7a/11: Move arch-omap to plat-omap
    
    Patch from Tony Lindgren
    
    This patch move common OMAP code from arch-omap to plat-omap
    directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f577ffd75c02b6087d5bf5ca89f806b10f2a0246
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:12 2005 +0100

    [PATCH] ARM: 2801/1: OMAP update 6/11: Split OMAP1 common code into id, io and serial
    
    Patch from Tony Lindgren
    
    This patch by Juha Yrjl and other OMAP developers splits
    OMAP1 specific common code into OMAP1 id, io, and serial
    code in mach-omap1 directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dbdf9cedfcc81202360763530412d746d798b7b6
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:11 2005 +0100

    [PATCH] ARM: 2806/1: OMAP update 5/11: Move board files into mach-omap1 directory
    
    Patch from Tony Lindgren
    
    This patch by Paul Mundt and other OMAP developers
    moves OMAP1 board files into mach-omap1 directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6f3e14163e066a6f43a54098a12185f25400fd68
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:10 2005 +0100

    [PATCH] ARM: 2799/1: OMAP update 4/11: Move OMAP1 LED code into mach-omap1 directory
    
    Patch from Tony Lindgren
    
    This patch by Paul Mundt and other OMAP developers
    moves OMAP1 specific LED code into mach-omap1 directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3b59b6beb423267e8fe2ef3596d98aba0b910341
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:09 2005 +0100

    [PATCH] ARM: 2800/1: OMAP update 3/11: Move OMAP1 core code into mach-omap1 directory
    
    Patch from Tony Lindgren
    
    This patch by Paul Mundt and other OMAP developers
    moves OMAP1 specific IRQ, time, and FPGA code into
    mach-omap1 directory.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b288f75ffa6f26f720d0c69fcd09b4ee7122e17b
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:08 2005 +0100

    [PATCH] ARM: 2798/1: OMAP update 2/11: Change ARM Kconfig to support omap1 and omap2
    
    Patch from Tony Lindgren
    
    This patch by Paul Mundt and other OMAP developers modifies
    ARM specific Kconfig to allow sharing code between OMAP1 and
    OMAP2 architectures.
    In order to share code between OMAP1 and OMAP2, all OMAP1
    specific code is moved into mach-omap1 directory in the
    following patch. A new mach-omap2 directory will be added
    later on.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit af973d2aff6008bc7500277eb5a523db579731c6
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jul 10 19:58:06 2005 +0100

    [PATCH] ARM: 2797/1: OMAP update 1/11: Update include files
    
    Patch from Tony Lindgren
    
    This patch by various OMAP developers syncs the OMAP
    specific include files with the linux-omap tree.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8107338bf9d0367d0b3f42730906b83532b6786f
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Sun Jul 10 19:44:55 2005 +0100

    [PATCH] ARM: 2796/1: Fix ARMv5[TEJ] check in MMU initalization
    
    Patch from Deepak Saxena
    
    The code in mm-armv.c checks for the condition (cpu_architecture()<= ARMv5)
    in a few places but should be checking for ARMv5TEJ as the MMU is shared
    across all v5 variations.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4bebdab7eb11ee533ff843f4f1fec9975666e64e
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jul 10 19:44:54 2005 +0100

    [PATCH] ARM: 2795/1: update ixp2000 defconfigs
    
    Patch from Lennert Buytenhek
    
    Update the ixp2000 defconfigs from 2.6.12-git6 to 2.6.13-rc2.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 28187f2ce39eb2158c35a46696af03cdfd14310a
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jul 10 19:44:53 2005 +0100

    [PATCH] ARM: 2793/1: platform serial support for ixp2000
    
    Patch from Lennert Buytenhek
    
    This patch converts the ixp2000 serial port over to a platform
    serial device.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f179bc77d09b9087bfc559d0368bba350342ac76
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 12:46:19 2005 +1000

    drm: fix stupid missing semicolon.
    
    I fixed this in one git tree but that wasn't the one I pushed...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0109fd37046de64e8459f8c4f4706df9ac7cc82c
Merge: cc14cf4... 850eb83...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 9 09:59:23 2005 -0700

    Merge head 'drm-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6

commit cc14cf46da215a9df1c0a4388763a68769ef9e53
Merge: 4cda1fd... 8ca7c1d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 9 09:58:47 2005 -0700

    Merge head 'drm-3264' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6

commit 4cda1fd78781c31e2a3d9dd87ee05d39cb76b3f9
Merge: bb6b823... 717cb90...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 9 09:58:01 2005 -0700

    Merge head 'drm-via' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6

commit bb6b82381063f54613842decdf948cbfa631842e
Merge: 79af02c... a652481...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 9 09:29:09 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 79af02c2538d54ff0dcd3f43646f506207f2ee62
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 8 21:47:49 2005 -0700

    [SCTP]: Use struct list_head for chunk lists, not sk_buff_head.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c05989bb2264f0fa4fc95f81d2c4e6aa2eaa24d
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 8 21:44:39 2005 -0700

    [IPV6]: Fix warning in ip6_mc_msfilter.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84b42baef775b0e3415ccece17cf694f50326d01
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Fri Jul 8 17:48:38 2005 -0700

    [IPV4]: fix IPv4 leave-group group matching
    
            This patch fixes the multicast group matching for
    IP_DROP_MEMBERSHIP, similar to the IP_ADD_MEMBERSHIP fix in a prior
    patch. Groups are identifiedby <group address,interface> and including
    the interface address in the match will fail if a leave-group is done
    by address when the join was done by index, or if different addresses
    on the same interface are used in the join and leave.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9951f036fe8a4e6b21962559c64ff13b290ff01a
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Fri Jul 8 17:47:28 2005 -0700

    [IPV4]: (INCLUDE,empty)/leave-group equivalence for full-state MSF APIs & errno fix
    
    1) Adds (INCLUDE, empty)/leave-group equivalence to the full-state
       multicast source filter APIs (IPv4 and IPv6)
    
    2) Fixes an incorrect errno in the IPv6 leave-group (ENOENT should be
       EADDRNOTAVAIL)
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 917f2f105ea4bbba8604e3ed55233eebda7afe6a
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Fri Jul 8 17:45:16 2005 -0700

    [IPV4]: multicast API "join" issues
    
    1) In the full-state API when imsf_numsrc == 0
       errno should be "0", but returns EADDRNOTAVAIL
    
    2) An illegal filter mode change
       errno should be EINVAL, but returns EADDRNOTAVAIL
    
    3) Trying to do an any-source option without IP_ADD_MEMBERSHIP
       errno should be EINVAL, but returns EADDRNOTAVAIL
    
    4) Adds comments for the less obvious error return values
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cdaaa15da58806ac3c75d96c40aef9e31445a25
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Fri Jul 8 17:39:23 2005 -0700

    [IPV4]: multicast API "join" issues
    
    1) Changes IP_ADD_SOURCE_MEMBERSHIP and MCAST_JOIN_SOURCE_GROUP to ignore
       EADDRINUSE errors on a "courtesy join" -- prior membership or not
       is ok for these.
    
    2) Adds "leave group" equivalence of (INCLUDE, empty) filters in the
       delta-based API. Without this, mixing delta-based API calls that
       end in an (INCLUDE, empty) filter would not allow a subsequent
       regular IP_ADD_MEMBERSHIP. It also frees socket buffer memory that
       isn't needed for both the multicast group record and source filter.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca9b907d140a5f249250d19f956129dbbbf84f73
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Fri Jul 8 17:38:07 2005 -0700

    [IPV4]: multicast API "join" issues
    
            This patch corrects a few problems with the IP_ADD_MEMBERSHIP
    socket option:
    
    1) The existing code makes an attempt at reference counting joins when
       using the ip_mreqn/imr_ifindex interface. Joining the same group
       on the same socket is an error, whatever the API. This leads to
       unexpected results when mixing ip_mreqn by index with ip_mreqn by
       address, ip_mreq, or other API's. For example, ip_mreq followed by
       ip_mreqn of the same group will "work" while the same two reversed
       will not.
               Fixed to always return EADDRINUSE on a duplicate join and
       removed the (now unused) reference count in ip_mc_socklist.
    
    2) The group-search list in ip_mc_join_group() is comparing a full
       ip_mreqn structure and all of it must match for it to find the
       group. This doesn't correctly match a group that was joined with
       ip_mreq or ip_mreqn with an address (with or without an index). It
       also doesn't match groups that are joined by different addresses on
       the same interface. All of these are the same multicast group,
       which is identified by group address and interface index.
               Fixed the check to correctly match groups so we don't get
       duplicate group entries on the ip_mc_socklist.
    
    3) The old code allocates a multicast address before searching for
       duplicates requiring it to free in various error cases. This
       patch moves the allocate until after the search and
       igmp_max_memberships check, so never a need to allocate, then free
       an entry.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c866aa798bc6de0a1d45495229e9f13c35b55c2
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Fri Jul 8 17:34:46 2005 -0700

    [IPV4]: Apply sysctl_icmp_echo_ignore_broadcasts to ICMP_TIMESTAMP as well.
    
    This was the full intention of the original code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a6524813e032fb33bd1de807a98f8453414335e4
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 8 15:21:51 2005 -0700

    [SPARC64]: Support CONFIG_HZ
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 86a76caf8705e3524e15f343f3c4806939a06dc8
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Fri Jul 8 14:57:47 2005 -0700

    [NET]: Fix sparse warnings
    
    From: Victor Fusco <victor@cetuc.puc-rio.br>
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b03efcfb2180289718991bb984044ce6c5b7d1b0
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 8 14:57:23 2005 -0700

    [NET]: Transform skb_queue_len() binary tests into skb_queue_empty()
    
    This is part of the grand scheme to eliminate the qlen
    member of skb_queue_head, and subsequently remove the
    'list' member of sk_buff.
    
    Most users of skb_queue_len() want to know if the queue is
    empty or not, and that's trivially done with skb_queue_empty()
    which doesn't use the skb_queue_head->qlen member and instead
    uses the queue list emptyness as the test.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dcc83a028552ac34538db52d82446d1da6ea8c22
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 8 13:33:10 2005 -0700

    [SPARC64]: Typo in dtlb_backend.S, _PAGE_SZ4M --> _PAGE_SZ4MB
    
    Noticed by Eddie C. Dost
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 763b3917e779c9c25d56fc71a796774185cd6ce2
Author: H. J. Lu <hjl@lucon.org>
Date:   Fri Jul 8 12:25:00 2005 -0700

    [IA64] Fix a typo in arch/ia64/kernel/entry.S
    
    Both 2.4 and 2.6 kernels need this patch for the next binutils.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 88c3cdfdde3cf87e1831265ea4246430bef34fc9
Merge: 2b2c375... a92b7b8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Jul 8 08:52:42 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit a92b7b80579fe68fe229892815c750f6652eb6a9
Author: Chris Wright <chrisw@osdl.org>
Date:   Thu Jul 7 18:12:23 2005 -0700

    [PATCH] Add MAINTAINERS entry for audit subsystem
    
    I've been asked about this a couple times, and there's no info in
    MAINTAINERS file.  Add MAINTAINERS entry for audit subsystem.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d88854f08961d26f3a63cfae7972188d26a128e4
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Jul 7 17:59:34 2005 -0700

    [PATCH] device-mapper: dm-raid1: Limit bios to size of mirror region
    
    Set the target's split_io field when building a dm-mirror device so
    incoming bios won't span the mirror's internal regions.  Without this,
    regions can be accessed while not holding correct locks and data corruption
    is possible.
    
    Reported-By: "Zhao Qian" <zhaoqian@aaastor.com>
    From: Kevin Corry <kevcorry@us.ibm.com>
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 374a6cf281771b23e263efd31fdc896924394dba
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Jul 7 17:59:33 2005 -0700

    [PATCH] video doc: one more system where video works with S3
    
    One more system where video works with S3.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 316240f66a64c95e373d52dc401d882d77a594ee
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Thu Jul 7 17:59:32 2005 -0700

    [PATCH] m32r: framebuffer device support
    
    This patch is for supporting Epson s1d13xxx framebuffer device for m32r.  #
    Sorry, a little bigger.
    
    The Epson s1d13806 is already supported by 2.6.12 kernel, and its driver is
    placed as drivers/video/s1d13xxxfb.c.
    
    For the m32r, a header file include/asm-m32r/s1d13806.h was prepared for
    several m32r target platforms.  It was originally generated by an Epson
    tool S1D13806CFG.EXE, and modified manually for the m32r platforms.
    
    Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e34ac862ee6644378bfe6ea65c2e0dda4545513d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:30 2005 -0700

    [PATCH] nfsd4: fix fh_expire_type
    
    After discussion at the recent NFSv4 bake-a-thon, I realized that my
    assumption that NFS4_FH_PERSISTENT required filehandles to persist was a
    misreading of the spec.  This also fixes an interoperability problem with the
    Solaris client.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c4cd222ee329025840bc2f8cebf71d36c62440c
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:27 2005 -0700

    [PATCH] nfsd4: check lock type against openmode.
    
    We shouldn't be allowing, e.g., write locks on files not open for read.  To
    enforce this, we add a pointer from the lock stateid back to the open stateid
    it came from, so that the check will continue to be correct even after the
    open is upgraded or downgraded.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a4f98bbf481cb9f755005ac569ceb5303e1b69f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:26 2005 -0700

    [PATCH] nfsd4: clean up nfs4_preprocess_seqid_op
    
    As long as we're here, do some miscellaneous cleanup.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8816512fcfde986326a2eb0f5a58e463d9904d8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:25 2005 -0700

    [PATCH] nfsd4: clarify close_lru handling
    
    The handling of close_lru in preprocess_stateid_op was a source of some
    confusion here recently.  Try to make the logic a little clearer, by renaming
    find_openstateowner_id to make its purpose clearer and untangling some
    unnecessarily complicated goto's.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52fd004e296ac07cde820af9e3139d47dda03cf8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:24 2005 -0700

    [PATCH] nfsd4: renew lease on seqid modifying operations
    
    nfs4_preprocess_seqid_op is called by NFSv4 operations that imply an implicit
    renewal of the client lease.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b700949b781480819e53bdc38a53f053226dd75e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:23 2005 -0700

    [PATCH] nfsd4: return better error on io incompatible with open mode
    
    from RFC 3530:
    "Share reservations are established by OPEN operations and by their
    nature are mandatory in that when the OPEN denies READ or WRITE
    operations, that denial results in such operations being rejected
    with error NFS4ERR_LOCKED."
    
    (Note that share_denied is really only a legal error for OPEN.)
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 444c2c07c2d7a6936d1381d381ab80e3f5541427
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:22 2005 -0700

    [PATCH] nfsd4: always update stateid on open
    
    An OPEN from the same client/open stateowner requires a stateid update because
    of the share/deny access update.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e66770cd7b0c36f28a2f6eb0957c0575ac8b3787
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:21 2005 -0700

    [PATCH] nfsd4: relax new lock seqid check
    
    We're insisting that the lock sequence id field passed in the
    open_to_lockowner struct always be zero.  This is probably thanks to the
    sentence in rfc3530: "The first request issued for any given lock_owner is
    issued with a sequence number of zero."
    
    But there doesn't seem to be any problem with allowing initial sequence
    numbers other than zero.  And currently this is causing lock reclaims from the
    Linux client to fail.
    
    In the spirit of "be liberal in what you accept, conservative in what you
    send", we'll relax the check (and patch the Linux client as well).
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fb64cee34f5dc743f697041717cafda8a94b5ac
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:20 2005 -0700

    [PATCH] nfsd4: seqid comments
    
    Add some comments on the use of so_seqid, in an attempt to avoid some of the
    confusion outlined in the previous patch....
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd9aac523b812d58e644fde5e59f5697fb9e3822
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:19 2005 -0700

    [PATCH] nfsd4: fix open_reclaim seqid
    
    The sequence number we store in the sequence id is the last one we received
    from the client.  So on the next operation we'll check that the client gives
    us the next higher number.
    
    We increment sequence id's at the last moment, in encode, so that we're sure
    of knowing the right error return.  (The decision to increment the sequence id
    depends on the exact error returned.)
    
    However on the *first* use of a sequence number, if we set the sequence number
    to the one received from the client and then let the increment happen on
    encode, we'll be left with a sequence number one to high.
    
    For that reason, ENCODE_SEQID_OP_TAIL only increments the sequence id on
    *confirmed* stateowners.
    
    This creates a problem for open reclaims, which are confirmed on first use.
    Therefore the open reclaim code, as a special exception, *decrements* the
    sequence id, cancelling out the undesired increment on encode.  But this
    prevents the sequence id from ever being incremented in the case where
    multiple reclaims are sent with the same openowner.  Yuch!
    
    We could add another exception to the open reclaim code, decrementing the
    sequence id only if this is the first use of the open owner.
    
    But it's simpler by far to modify the meaning of the op_seqid field: instead
    of representing the previous value sent by the client, we take op_seqid, after
    encoding, to represent the *next* sequence id that we expect from the client.
    This eliminates the need for special-case handling of the first use of a
    stateowner.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 893f87701c9e5bd5610dfbb3f8bf1135f86d85cb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:17 2005 -0700

    [PATCH] nfsd4: comment indentation
    
    Yeah, it's trivial, but this drives me up the wall....
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 375151773125f56b7f6d798d914ea469256b330b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:16 2005 -0700

    [PATCH] nfsd4: stop overusing RECLAIM_BAD
    
    A misreading of the spec lead us to convert all errors on open and lock
    reclaims to RECLAIM_BAD.  This causes problems--for example, a reboot within
    the grace period could lead to reclaims with stale stateid's, and we'd like to
    return STALE errors in those cases.
    
    What rfc3530 actually says about RECLAIM_BAD: "The reclaim provided by the
    client does not match any of the server's state consistency checks and is
    bad." I'm assuming that "state consistency checks" refers to checks for
    consistency with the state recorded to stable storage, and that the error
    should be reserved for that case.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dd395dc76071a06eea39839cc946c1241af3650
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:15 2005 -0700

    [PATCH] nfsd4: ERR_GRACE should bump seqid on lock
    
    A GRACE or NOGRACE response to a lock request should also bump the sequence
    id.  So we delay the handling of grace period errors till after we've found
    the relevant owner.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b648330a1d741d5df8a5076b2a0a2519c69c8f41
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:15 2005 -0700

    [PATCH] nfsd4: ERR_GRACE should bump seqid on open
    
    The GRACE and NOGRACE errors should bump the sequence id on open.  So we delay
    the handling of these errors until nfsd4_process_open2, at which point we've
    set the open owner, so the encode routine will be able to bump the sequence
    id.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fa822e452084032b8495ca0d8e0199329847815
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:14 2005 -0700

    [PATCH] nfsd4: fix release_lockowner
    
    We oops in list_for_each_entry(), because release_stateowner frees something
    on the list we're traversing.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67be431350941765e211eeed237c12def3aaba70
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:13 2005 -0700

    [PATCH] nfsd4: prevent multiple unlinks of recovery directories
    
    Make sure we don't try to delete client recovery directories multiple times;
    fixes some spurious error messages.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdc5524e8a257b1c91dd8e4cdfbab979f4e17a60
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:12 2005 -0700

    [PATCH] nfsd4: lookup_one_len takes i_sem
    
    Oops, this lookup_one_len needs the i_sem.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6ccbbb8865101d83c2e716f08feae1da1c48584
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:11 2005 -0700

    [PATCH] nfsd4: fix sync'ing of recovery directory
    
    We need to fsync the recovery directory after writing to it, but we weren't
    doing this correctly.  (For example, we weren't taking the i_sem when calling
    ->fsync().)
    
    Just reuse the existing nfsd fsync code instead.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 463090294e1e460cf97f5ade376d4b1e62bc5263
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jul 7 17:59:10 2005 -0700

    [PATCH] nfsd4: reboot recovery fix
    
    We need to remove the recovery directory here too.  (This chunk just got lost
    somehow in the process of commuting the reboot recovery patches past the other
    patches.)
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89b39f5d8d701ddd93546b3d8edbefa5d568529d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:09 2005 -0700

    [PATCH] yenta: don't depend on CardBus
    
    As a follow-up, we can allow the yenta-driver to be limited to PCMCIA
    operation.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bc6b68a103a6f4055890b5127ddca3a322751b0
Author: Russell King <rmk+pcmcia@arm.linux.org.uk>
Date:   Thu Jul 7 17:59:07 2005 -0700

    [PATCH] yenta: no CardBus if IRQ fails
    
    If probing for the correct interrupt fails on yenta bridges, the driver falls
    back to polling for interrupt actions.  However, CardBus cards cannot be used
    then.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4230dfc9c3f708f4765736b862aa313aa97e3c2e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:06 2005 -0700

    [PATCH] pcmcia: update MAINTAINERS entry
    
    PCMCIA/CardBus is handled by a team of developers at the specified mailing
    list.  Additional developers wanting to help are most welcome.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44670d2b50efd2443c3810239d6ea3fd02f8ef64
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:05 2005 -0700

    [PATCH] pcmcia: remove references to pcmcia/version.h
    
    As a follow-up, remove the inclusion of pcmcia/version.h in many files.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ffe6e280f792790c39f241e7e3c5d2ef8da1b94
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Jul 7 17:59:04 2005 -0700

    [PATCH] pcmcia: remove client services version (fix)
    
    One correction is needed.  Changes are not needed for
    drivers/scsi/pcmcia/nsp_cs.c because it uses versioning in the
    compatibility part, which is never used in 2.6 kernels.  The only right
    thing we could to that compatibility code would be to remove it throughout
    the file, but that would be a separate patch.
    
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a00db1ba7c33619cbd7c3153e4746d15881c0383
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Jul 7 17:59:03 2005 -0700

    [PATCH] pcmcia: remove client services version
    
    The Linux PCMCIA code has some data that was apparently used (or meant to be
    used) to ensure that only proper client drivers are loaded.  This is now
    ensured (to a certain degree) by the fact that the most client drivers are
    part of the kernel.  Also, the version information has not been updated
    despite major changes in PCMCIA API.  This has made it meaningless.
    
    This patch removes servinfo_t and pcmcia_get_card_services_info.  They are not
    used in any userspace utilities such as pcmcia-cs and pcmciautils.
    drivers/pcmcia/pcmcia_ioctl.c is adjusted accordingly.
    
    CS_RELEASE and CS_RELEASE_CODE are removed.  include/pcmcia/version.h is empty
    now.  It will be removed later, but for now it's left in the tree to avoid
    touching all PCMCIA clients.
    
    The only driver that needs to be changed is drivers/scsi/pcmcia/nsp_cs.c,
    which uses CS_RELEASE_CODE.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bc5a9bdc56fac6f7cbf95b89443e3809141c247
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:02 2005 -0700

    [PATCH] pcmcia: reduce client_handle_t usage
    
    Reduce the occurences of "client_handle_t" which is nothing else than a
    pointer to struct pcmcia_device by now.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e12a9a93a8417c4f2aa46ce8346c2d27e656b9a2
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:01 2005 -0700

    [PATCH] pcmcia: remove client_t usage
    
    Reduce the occurences of "client_handle_t" which is nothing else than a
    pointer to struct pcmcia_device by now.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e212f3645a6b355de8c43a23376bc0e2ac49a63
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:59:00 2005 -0700

    [PATCH] pcmcia: move event handler
    
    Move the "event handler" to struct pcmcia_driver -- the unified event handler
    will disappear really soon, but switching it to struct pcmcia_driver in the
    meantime allows for better "step-by-step" patches.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf45d9b0ac108b11245203ebb082d30f5059846b
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jul 7 17:58:58 2005 -0700

    [PATCH] pcmcia: deprecate ioctl
    
    Schedule removal of the PCMCIA ioctl (and thus kernel support for the
    pcmcia-cs userspace package) for November 2005.
    
    A big "thank you" to Dave Hinds for his great work on supporting PCMCIA in
    Linux.  Things are just done differently by now, so the ongoing work to make
    PCMCIA behave like any other hotpluggable bus should continue.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69a4d56bae492b1a5e74459d9d771d9bc7f9320f
Author: Ian Campbell <icampbell@arcom.com>
Date:   Thu Jul 7 17:58:52 2005 -0700

    [PATCH] pcmcia: fix i82365 request_region double usage
    
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=f354942cb301fed273f423fb5c4f57bde3efc5b2
    converted the check_region() calls in drivers/pcmcia/i82365.c into
    request_regions.  Unfortunately this seems to have broken things.
    
    isa_probe() used to call check_region() and then call add_pcic() which would
    request_region().
    
    Now isa_probe() calls request_region() and then calls add_pcic() which calls
    request_region() again, this fails and add_pcic() returns immediately without
    doing all the setup etc.
    
    On the face of it the patch below fixes the problem, by not doing the second
    request region in add_pcic().  I think this is preferable to remove the call
    in isa_probe() since identify() touches the I/O regions and is called before
    add_pcic().
    
    However I haven't fully grokked the meaning of the code which follows the
    request_region() in isa_probe(), so I'm not sure that the handling WRT
    multiple sockets and multiple bridge chips is correct.  In particular I'm not
    convinced that the regions for subsequent sockets and/or bridges will be
    requested at all.  I suspect a more thorough reworking by someone who
    understands what is going on there might be in order.
    
    I should mention that I'm actually messing about with this on an ARM platform
    with wacky memory and i/o mapping offsets etc, it doesn't quite work yet for
    other reasons which preclude full testing etc, but I think the problem above
    is still present for more normal x86 stuff.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08d805258f69bff5ba8268a969f140ef1f105c71
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 7 17:58:43 2005 -0700

    [PATCH] v4l: LGDT3302 read status fix
    
    - Fix bug in lgdt3302_read_status to return correct
      FE_HAS_SIGNAL and FS_HAS_CARRIER status.
    - Removed #if LINUX_VERSION_CODE > KERNEL_VERSION(2,6,10).
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d723c09f03e0b2cb4405c361c927efac373fe0c
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 7 17:58:42 2005 -0700

    [PATCH] v4l: add DVB support for DViCO FusionHDTV3 Gold-T
    
    - Correct sync byte for MPEG-2 transport stream packets.
    - Add lgdt3302 as dependency of cx88-dvb in Kconfig.
    - Add dvb support in v4l for DViCO FusionHDTV3 Gold-T using lgdt3302 frontend.
      This adds support for a different board from the previous (Gold-Q) patch.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e057ee11efb84e559c55e98d33acb341fe68fda1
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 7 17:58:40 2005 -0700

    [PATCH] v4l: add TerraTec Cinergy 1400 DVB-T
    
    Add support for TerraTec Cinergy 1400 DVB-T.
    
    Signed-off-by: Uli Luckas <luckas@musoft.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1798495592c1bcd7871abdc1ef2985d65c34224
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 7 17:58:39 2005 -0700

    [PATCH] v4l: add DVB support for DViCO FusionHDTV3 Gold-Q
    
    Add dvb support in v4l for DViCO FusionHDTV3 Gold-Q using lgdt3302 frontend.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ac4c158b0090462bc356b934024cf0c5d7c8526
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jul 7 17:58:38 2005 -0700

    [PATCH] v4l: cx88 hue offset fix
    
    Changed hue offset to 128 to correct behavior in cx88 cards.  Previously,
    setting 0% or 100% hue was required to avoid blue/green people on screen.
    Now, 50% Hue means no offset, just like bt878 stuff.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a82decf64d34e79a0cc622997866c754350f18f8
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jul 7 17:58:36 2005 -0700

    [PATCH] v4l: cx88 update
    
    - Add support for ADS Tech Instant TV DVB-T PCI.
    - Remove obsoleted config options.
    - Fix DViCO Board names
    - Remove CABLE type setting from DViCO FusionHDTV3 Gold-T.
    - Fix compilation with gcc4.0.
    - V4L2_TUNER_CAP_LOW implemented according with V4L2 API for Radio.
    - radio range is now defined on tuner-core.c. Cleaning up.
    - Fix a bug on frequency report for cx88 based cards.
    - Added support for changing radio mode stereo/mono.
    - Add remove for MSI TV@nywhere.
    
    Signed-off-by: Jorik Jonker <jorik@dnd.utwente.nl>
    Signed-off-by: Didier Caillaud <mailing.cld@free.fr>
    Signed-off-by: Benoit Laniel <benoit.laniel@gmail.com>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f552f5edc13e18b75f11fb1b08bbcad67fd362
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Thu Jul 7 17:58:35 2005 -0700

    [PATCH] fix for Documentation/dvb/bt8xx.txt?=
    
    *   /usr/src/linux-2.6.12/Documentation/dvb/bt8xx.txt
    
      almost completely remade the text file with the following focuses:
      useful infos for beginners: how to load modules manually and
      automatically developers infos are reduced to a minimum as module loading
      works automatic in kernel >= 2.6.12 by loading modules bttv and dvb-bt8xx
      I completely erased the out of date TwinHan part dealing with additional
      parameters, debug parameters, and overriding autodetection Further up to
      date information about TwinHan + clones can be found in
      /Documentation/dvb/ci.txt
    
    Signed-off-by: Uwe Bugla <uwe.bugla@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3352e432d5705aaa9b58d8d97b1ccc81eb4bc0fd
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:34 2005 -0700

    [PATCH] dvb: usb: README update
    
    Updated the readme file to point to the DVB USB wikipage to find out which
    firmware necessary, + minor updates.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d590f9c20e15620ba708e5bd71d345bf1b7b0d73
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:33 2005 -0700

    [PATCH] dvb: usb: add supprt for WideView WT-220U
    
    Add support and rewrote some parts with the help of vendor information
    (Thanks to Steve Chang from WideView, Inc.):
    
    o added support for the WT-220U (Pensize DVB-T receiver)
    o corrected byte order for unc,ber and the pid filter
    o corrected number of pids that can be fetched at the same time.
    o added some comments in Kconfig-file
    o added USB IDs for the WT-220U
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b2bd30eb79c292a83b1dfd3cca6d435c02fd5c0
Author: Steffen Motzer <motzersn@tlink.de>
Date:   Thu Jul 7 17:58:31 2005 -0700

    [PATCH] dvb: dst: fix tuning problem
    
    Fix tuning failure for 200103A, 200103A failed to tune to low band due to
    wrong tone setting on the 200103A.
    
    Signed-off-by: Steffen Motzer <motzersn@tlink.de>
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63b5c1c47fd6c5ae26d279756e8a050c721ea379
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:30 2005 -0700

    [PATCH] dvb: usb/pci: correct syntax of driver name fields
    
    Change the name-field of the pci_driver and usb_driver structs to the name of
    the module after compilation.  It seems that this field is used in some places
    where special characters are not allowed.  Thanks to Alan Halverson for
    finding this problem.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8667cbbe440aacb246832afc217a6a44664115c
Author: Mac Michaels <wmichaels1@earthlink.net>
Date:   Thu Jul 7 17:58:29 2005 -0700

    [PATCH] dvb: frontend: add driver for LGDT3302
    
    Add support for LGDT3302 (ATSC VSB/QAM) used in DViCO FusionHDTV3 Gold.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25de192660627e1e8dc8ee6a120ff8b54d108593
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Thu Jul 7 17:58:28 2005 -0700

    [PATCH] dvb: ttpci: fix timeout handling to be save with PREEMPT
    
    Timeout handling fixed, especially for preemtible kernels and/or high system
    load.
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e161f817bebecc1c1cc461dc83cce2eafbed9ee9
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:27 2005 -0700

    [PATCH] dvb: usb: dont use HZ for timeouts
    
    Don't use HZ for usb-transfer-timeouts.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58769a5486bec8ed44b3b51029f8df8f13cddd5a
Author: Andrew Hodgson <a.s.hodgson@gmail.com>
Date:   Thu Jul 7 17:58:26 2005 -0700

    [PATCH] dvb: usb: A800 rc and timeout fixes
    
    o add some remote control codes
    o not using HZ for control_msg-timeout
    
    Signed-off-by: Andrew Hodgson <a.s.hodgson@gmail.com>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1df896aa239caf72483655290c40b21da536d85e
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:24 2005 -0700

    [PATCH] dvb: usb: IR input fixes
    
    o fixed usage of the correct number of events in keymapping-array
    o better place for return
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04f3e5ea51248ff974a13ef2dd0145125c76204c
Author: Michael Paxton <packo@tpg.com.au>
Date:   Thu Jul 7 17:58:24 2005 -0700

    [PATCH] dvb: usb: vp7045 IR map fix
    
    Correct two keys of the vp7045 remote control key mapping.
    
    Signed-off-by: Michael Paxton <packo@tpg.com.au>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb41f5a725d052d7542e0e966e5799b95c2648c8
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:23 2005 -0700

    [PATCH] dvb: usb: fix WideView USB ids
    
    o Steve Chang reported the real name behind 0x14aa: WideView,
      changed USB IDs accordingly.
    o fixed an assignment
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d188c68a04d89d9351c3130226d0e8af9439dda
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:21 2005 -0700

    [PATCH] dvb: usb: add vp7045 IR keymap
    
    Add keymap for Twinhan vp7045 remote control.
    
    Signed-off-by: Michael Paxton <packo@tpg.com.au>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d72fa1c91d721bf4c68a18f2d8fed820a8f1611e
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:20 2005 -0700

    [PATCH] dvb: usb Kconfig help text update
    
    o corrected some typos
    o added the Wikilink pointing to the USB device list
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82ff896c969a099888e4a131b829f1c8d6aecbba
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:17 2005 -0700

    [PATCH] dvb: usb doc update
    
    o removed device listing (they are all in the linuxtv wiki now)
    o misc updates
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97432808ee367e15485e55c734ba04ca290a306d
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:17 2005 -0700

    [PATCH] dvb: usb: digitv memcpy fix
    
    Fix memcpy copying into the wrong destination.  Thanks to Allan Third for
    reporting.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f7f96b95991bcbe52dee5aa50a19130873738bf
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:16 2005 -0700

    [PATCH] dvb: usb: add VideoWalker DVB-T USB ids
    
    Add another USB ID pair for the VideoWalker USB DVB-T.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8257e8a444a2b81952de9f8bfeb3a4726c0f7d5b
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:15 2005 -0700

    [PATCH] dvb: usb: cxusb DVB-T fixes
    
    cxusb DVB-T fixes.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c251ef6167c46152e247fc41628a4ac2d0aca33e
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:14 2005 -0700

    [PATCH] dvb: usb: dvb_usb_properties init fix
    
    There was no pid-filter-count set for some devices - led to an error.  Thanks
    to Gerolf Wendland.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78c6e73f5a27f01e45e86a4e3d13863c9cce6374
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:13 2005 -0700

    [PATCH] dvb: usb: digitv-usb fixes
    
    Some more work on the digitv-usb driver:
    o MT352 initialization and PLL-programming
    o I2c-transfer fixed.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0589b8e4fd24885a00d8954aef57c3319d161fee
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:12 2005 -0700

    [PATCH] dvb: frontend: add ALPS TDED4 PLL
    
    Add dvb_pll_desc for ALPS TDED4 used in Nebula USB boxes.  Changed the
    name-field of the FMD1216.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9b06fa47e1c1ff8704461c7fd6a99e3621ba0e6
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:11 2005 -0700

    [PATCH] dvb: usb: add module parm to disable remote control polling
    
    Add module parameter to deactive remote control polling.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22c6d93a73105fddd58796d7cb10f5f90ee2a338
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:10 2005 -0700

    [PATCH] dvb: usb: support Medion hybrid USB2.0 DVB-T/analogue box
    
    Add preliminary support for the Medion Hybrid USB2.0 DVB-T/Analogue box.
    Analogue part is not working yet (cx25842 --> ivtv?).
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49dc82fdac3866e6ce9c978df80cedfb735d740c
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:09 2005 -0700

    [PATCH] dvb: frontend: add FMD1216ME PLL
    
    o change dvb-pll desc to take the frequency as parameter for setbw-callback
      into consideration
    o added dvb-pll desc for Philips FMD1216ME (needed for cxusb)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f5fee57812c99c95edf6794a50413c75e99fd4d
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:08 2005 -0700

    [PATCH] dvb: usb: add isochronous streaming method
    
    Added isochronous-streaming method.  Changed memory (de)allocation behaviour
    accordingly.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8945c8c3d207c7a69024c02d164f5ae790c5b7ba
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:58:07 2005 -0700

    [PATCH] dvb: usb: fix ADSTech Instant TV DVB-T USB2.0 support
    
    Fixed support for the ADSTech Instant TV DVB-T USB (2.0 version).  Thanks to
    Gerolf Wendland for his support.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68293ddbabb26a58ddb0a84aa5058a7acd7127e7
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:58:06 2005 -0700

    [PATCH] dvb: dvb-usb: support Artect T1 with broken USB ids
    
    Add #define for device with broken USB ids.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53936391741dee735304e997e2289500adf970c7
Author: Gavin Hamill <gdh@acentral.co.uk>
Date:   Thu Jul 7 17:58:04 2005 -0700

    [PATCH] dvb: ttpci: add support for Hauppauge/TT DVB-C budget
    
    Add support for Hauppauge/TT DVB-C budget.
    
    Signed-off-by: Gavin Hamill <gdh@acentral.co.uk>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80887a59c255f4a6c348dfc679501b3679d1070f
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Thu Jul 7 17:58:03 2005 -0700

    [PATCH] dvb: ttpci: kj printk fix
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34612157b48d38e85ff72d65291b9eecb44dd0a6
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Thu Jul 7 17:58:02 2005 -0700

    [PATCH] dvb: ttpci: make av7110_fe_lock_fix() retryable
    
    av7110_fe_lock_fix() modified in a way that it can be retried after
    -ERESTARTSYS
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a2fa90fa8084846937aa194f8a40abfa99c692f
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:58:01 2005 -0700

    [PATCH] dvb: ttpci: cleanup indentation + whitespace
    
    Fix indentation and add some whitepsace between operators.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12ba05049f9060e21ed1f95e876d8d063d2575b2
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:58:00 2005 -0700

    [PATCH] dvb: ttpci: error handling fix
    
    Change error handling in av7110_stop_feed() to stop as many filters as
    possible in case of errors.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce18a223607b0e8cc9a8375abc64281a13ac423c
Author: Wolfgang Rohdewald <wolfgang@rohdewald.de>
Date:   Thu Jul 7 17:57:59 2005 -0700

    [PATCH] dvb: ttpci: more error handling for firmware communication
    
    o propagate more errors back to caller or log them, mainly in
      av7110.c and av7110_av.c
    o fix error message in StartHWFilter
    o do not StopHWFilter for handle 0xffff
    
    Signed-off-by: Wolfgang Rohdewald <wolfgang@rohdewald.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eef5764d6806e29a768a632abce113c15264c5d6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:57:58 2005 -0700

    [PATCH] dvb: ttpci: budget-av / tu1216 fix for QAM128
    
    Fix for QAM128 in VHF band suggested by Timo Helki.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3d7b5aeb32668732ffc1968d12b804a98ef4fdd
Author: Dr. Werner Fink <werner@suse.de>
Date:   Thu Jul 7 17:57:57 2005 -0700

    [PATCH] dvb: ttpci: fix AUDUIO_CONTINUE ioctl
    
    Fixed typo in AUDUIO_CONTINUE ioctl:  AUDIO_CMD_MUTE -> AUDIO_CMD_UNMUTE
    
    Signed-off-by: "Dr. Werner Fink" <werner@suse.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d87bc39b98e0bf927acd14611976f710bd9a783
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:57:56 2005 -0700

    [PATCH] dvb: ttpci: fix bug in timeout handling
    
    Fix bug in timeout handling.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9090ebb247999354f80d45d45b3d5a804a94f7f
Author: Wolfgang Rohdewald <wolfgang@rohdewald.de>
Date:   Thu Jul 7 17:57:55 2005 -0700

    [PATCH] dvb: ttpci: fix error handling for firmware communication
    
    o make sure ERESTARTSYS will be propagated
    o ReleaseBitmap: starting with Firmware 261e, also release when
      BMP_LOADING
    o removes unused #define BMP_LOADINGS
    o in many cases changed the return value from -1 to something more
      meaningful like ETIMEDOUT, EINVAL
    o changed syslog message timeout waiting for COMMAND such that it
      indicates what command did not complete
    o reduce # of arguments for LoadBitmap and BlitBitmap
    o av7110_osd_cmd: remove the out: label
    
    Signed-off-by: Wolfgang Rohdewald <wolfgang@rohdewald.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd2bbb179326d23577ff8201c4f20e0db3e87f7b
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jul 7 17:57:54 2005 -0700

    [PATCH] dvb: ttpci: support for new TT DVB-T-CI
    
    Support for new TT DVB-T-CI, thanks to Andre Weidemann
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96bf2f2b549aab918f4225841df54c3d58896822
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jul 7 17:57:53 2005 -0700

    [PATCH] dvb: ttpci: add support for Technotrend/Hauppauge DVB-S SE
    
    Add support for s5h1420 frontend (new Technotrend/Hauppauge DVB-S SE).
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 771e71570ce4da549fe89978de0a29e3299d7fb7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jul 7 17:57:52 2005 -0700

    [PATCH] dvb: ttusb-dec: kfree cleanup
    
    The Coverity checker discovered that these two kfree's can never be executed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dff919425dd79954447e6ab39807b4c27ba3089
Author: Allan Stirling <Dibblahdvb0042@pendor.org>
Date:   Thu Jul 7 17:57:51 2005 -0700

    [PATCH] dvb: Twinhan DST: frontend polarization fix
    
    Fix a bug that caused the polarization (V/H) to be interchanged.
    
    Signed-off-by: Allan Stirling <Dibblahdvb0042@pendor.org>
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d53421c6adce47d067b834c605daeafe1ff9356
Author: Manu Abraham <manu@kromtek.com>
Date:   Thu Jul 7 17:57:50 2005 -0700

    [PATCH] dvb: Twinhan DST: frontend fixes
    
    o Make the inversion setting specific, ie, only for the 200103A DVB-S
      This should not be flagged on other cards.
    o Make the frequency setting card specific
    o Make the bandwidth setting generic such that it supports more DVB-T cards
    o Set QAM size for DVB-C cards that do not autodetect QAM size
    o Fix a bug that caused the polarization not to be set.
      Set polarization for cards that do not autodetect polarization
    o Fix a bogus frontend signal lock, that caused a tuning delay as well.
    o Make the Symbolrate setting card specific
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64221be7b9006338e4a45228f013e467ee4bf045
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:57:49 2005 -0700

    [PATCH] dvb: flexcop: woraround irq stop problem
    
    The flexcop chip often stops generating interrupts after some hours of
    operation.  Apparently this can be fixed by resetting register block 0x300 at
    each channel change (this is not detailed in the flexcop data books).
    
    This patch also restructures DMA handling and adds a bit of debug code for the
    irq problem in case it still happens for someone.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2819639b5630cd26d399ee0481be9a752280cf4d
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:57:48 2005 -0700

    [PATCH] dvb: flexcop: add big endian register definitions
    
    Add big-endian register definitions for running on a PowerPC.
    (Thanks to Paavo Hartikainen for testing.)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 178c6efcd8435644028bf3f079c1e82107e72dfd
Author: Christophe Lucas <c.lucas@ifrance.com>
Date:   Thu Jul 7 17:57:47 2005 -0700

    [PATCH] dvb: saa7146: kj pci_module_init cleanup
    
    http://kerneljanitors.org/TODO
    - convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7cadb3a02b5803c2f251b5cd84fbdc8fbec05e9
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Thu Jul 7 17:57:46 2005 -0700

    [PATCH] dvb: add Pluto2 driver
    
    Add driver for the Satelco Easywatch Mobile DVB-T card (based on Pluto2 chip).
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48e4cc2d210e817e808ac9db598ce3fb5d09c205
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:57:45 2005 -0700

    [PATCH] dvb: DVB update
    
    Increase some timeouts by a factor of 10 as suggested by Mikko Hamalainen and
    Timo Ketolainen, to improve tuning for QAM128 / weak signal.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80064b803de140a65ca82bba5f0c40309b5a9f5e
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:57:45 2005 -0700

    [PATCH] dvb: frontend: l64781: improve tuning
    
    Disable zig-zag and set min_delay_ms = 4000 as suggested by Allan Guild to
    improve tuning with weak signal.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f46dbb050b5c7585c34b9ef717d81d6fee883f9b
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Thu Jul 7 17:57:44 2005 -0700

    [PATCH] dvb: frontend: cx22702: support for cxusb
    
    Add .get_tune_settings callback (min_delay_ms = 1sec) and output_mode-field
    (parallel/serial) to support cxusb; minor cleanups.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f03cbea36ab9412dcea58e953be4933b36c9b7be
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Thu Jul 7 17:57:43 2005 -0700

    [PATCH] dvb: frontend: tda1004x: support tda827x tuners
    
    o added preliminary support for tda827x tuners
    o set parameters for drift compensation to 0
      makes no sense for DVB-T but can prevent lock
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c744b010078bd65724477e75261e51712d290a0
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Thu Jul 7 17:57:42 2005 -0700

    [PATCH] dvb: add missing release_firmware() calls
    
    Add missing release_firmware() calls to fix memory leaks.
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3faadbb0fde3c53e1c4f13eabb478c0c7cb1e4dd
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Thu Jul 7 17:57:42 2005 -0700

    [PATCH] dvb: frontend: bcm3510: fix firmware version check
    
    Fix limit for firmware version check was too low for tda10045.
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecb60deb9d5bbcbab6c87ee5fde6f8368197fcac
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Thu Jul 7 17:57:40 2005 -0700

    [PATCH] dvb: frontend: tda1004x update
    
    o added config options for IF frequency and AGC
    o support DSP boot from on board eeprom
    o added pll sleep call
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbf24cec93b5966bdbd4f25be7a8a2d8716570db
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jul 7 17:57:40 2005 -0700

    [PATCH] dvb: frontend: remove unused I2C ids
    
    Remove I2C_DRIVERID_DVBFE_ cruft.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ec4a30771ed9a0ce6f05e637ea83b3781cc61d7
Author: Peter Beutner <p.beutner@gmx.net>
Date:   Thu Jul 7 17:57:39 2005 -0700

    [PATCH] dvb: core: dmxdev cleanups
    
    - remove void casts
    - not necessary to set filter state twice to STATE_FREE during
      dvb_dmxdev_init()
    
    Signed-off-by: Peter Beutner <p.beutner@gmx.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 761979248adf83f5bece22e058ec445511984012
Author: Peter Beutner <p.beutner@gmx.net>
Date:   Thu Jul 7 17:57:38 2005 -0700

    [PATCH] dvb: core: demux error handling fix
    
    In dvb_dmxdev_filter_start if we go out because of an error, release
    previously allocated demux_feed.
    
    Signed-off-by: Peter Beutner <p.beutner@gmx.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4992775c8287145e86b94fe8d19bbb5f20148cc0
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jul 7 17:57:37 2005 -0700

    [PATCH] dvb: core: add workaround for tuning problem
    
    Add workaround for signal lock loss issue, where the frontend loses the signal
    after some hours without any visible reason.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6757ccc57d2cc4ab4e63d8aee97f2e6b9f998990
Author: Peter Beutner <p.beutner@gmx.net>
Date:   Thu Jul 7 17:57:36 2005 -0700

    [PATCH] dvb: core: fix race condition in FE_READ_STATUS ioctl
    
    Fix a race condition where an application which issued a FE_READ_STATUS ioctl
    directly after FE_SET_FRONTEND would see an old status, i.e.  FE_READ_STATUS
    would be executed before the frontend thread has even seen the tungin request
    from FE_SET_FRONTEND.
    
    Signed-off-by: Peter Beutner <p.beutner@gmx.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25a26ec3b60b29300a652d7d81a69b6bc08b35b5
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jul 7 17:57:35 2005 -0700

    [PATCH] dvb: remove obsolete skystar2 driver
    
    Remove the skystar2 driver which has been obsoleted by the generalized
    flexcop-pci driver.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38b32d6237588e6dca9b9a84256b507a29207f68
Author: Martin Loschwitz <madkiss@madkiss.org>
Date:   Thu Jul 7 17:57:31 2005 -0700

    [PATCH] dvb: cinergyT2: endianness fix for raw remote-control keys
    
    Fixed litte/big-endian conversion for raw remote-control keys.
    
    Signed-off-by: Martin Loschwitz <madkiss@madkiss.org>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 751c404b8f63e8199d5f2f8f2bcfd69b41d11caa
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:30 2005 -0700

    [PATCH] namespace: rename _mntput to mntput_no_expire
    
    This patch renames _mntput() to something a little more descriptive:
    mntput_no_expire().
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55e700b924f9e0ba24e3a071d1097d050b05abe6
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:30 2005 -0700

    [PATCH] namespace: rename mnt_fslink to mnt_expire
    
    This patch renames vfsmount->mnt_fslink to something a little more
    descriptive: vfsmount->mnt_expire.
    
    Signed-off-by: Mike Waychison <michael.waychison@sun.com>
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 732dbef606f22a23cb3e1029d613977ec645e8ae
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:29 2005 -0700

    [PATCH] dcookies.c: use proper refcounting functions
    
    Dcookies shouldn't play with the internals of dentry and vfsmnt
    refcounting.  It defeats grepping, and is prone to break if implementation
    details change.
    
    In addition the function doesn't even seem to be performance critical: it
    calls kmem_cache_alloc().
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 484e389c63472a7f8cfb491cf11b047364e59365
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:28 2005 -0700

    [PATCH] set mnt_namespace in the correct place
    
    This patch sets ->mnt_namespace where it's actually added to the
    namespace.
    
    Previously mnt_namespace was set in do_kern_mount() even if the filesystem
    was never added to any process's namespace (most kernel-internal
    filesystems).
    
    This discrepancy doesn't actually cause any problems, but it's cleaner if
    mnt_namespace is NULL for these non exported filesystems.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac0811538b40bb92d339d22364026ed91dfdd147
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:27 2005 -0700

    [PATCH] namespace.c: fix mnt_namespace zeroing for expired mounts
    
    This patch clears mnt_namespace in an expired mount.
    
    If mnt_namespace is not cleared, it's possible to attach a new mount to the
    already detached mount, because check_mnt() can return true.
    
    The effect is a resource leak, since the resulting tree will never be
    freed.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed42c879b7b1463aa7a15fdbbeb2b1914d60be8a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:26 2005 -0700

    [PATCH] namespace.c: fix expiring of detached mount
    
    This patch fixes a bug noticed by Al Viro:
    
       However, we still have a problem here - just what would
       happen if vfsmount is detached while we were grabbing namespace
       semaphore?  Refcount alone is not useful here - we might be held by
       whoever had detached the vfsmount.  IOW, we should check that it's
       still attached (i.e. that mnt->mnt_parent != mnt).  If it's not -
       just leave it alone, do mntput() and let whoever holds it deal with
       the sucker.  No need to put it back on lists.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24ca2af1e7cff55e71e9f86c61ddc56e894b8b40
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:25 2005 -0700

    [PATCH] namespace.c: split mark_mounts_for_expiry()
    
    This patch splits the mark_mounts_for_expiry() function.  It's too complex and
    too deeply nested, even without the bugfix in the following patch.
    
    Otherwise code is completely the same.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4d70278610e6bebe44a7b59a469fe7391387da6
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:24 2005 -0700

    [PATCH] namespace.c: cleanup in mark_mounts_for_expiry()
    
    This patch simplifies mark_mounts_for_expiry() by using detach_mnt() instead
    of duplicating everything it does.
    
    It should be an equivalent transformation except for righting the dput/mntput
    order.
    
    Al Viro said: "Looks sane".
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ce88cf466f7b6078b14d67d186a3d7c19dd5609
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:24 2005 -0700

    [PATCH] namespace.c: fix race in mark_mounts_for_expiry()
    
    This patch fixes a race found by Ram in mark_mounts_for_expiry() in
    fs/namespace.c.
    
    The bug can only be triggered with simultaneous exiting of a process having
    a private namespace, and expiry of a mount from within that namespace.
    It's practically impossible to trigger, and I haven't even tried.  But
    still, a bug is a bug.
    
    The race happens when put_namespace() is called by another task, while
    mark_mounts_for_expiry() is between atomic_read() and get_namespace().  In
    that case get_namespace() will be called on an already dead namespace with
    unforeseeable results.
    
    The solution was suggested by Al Viro, with his own words:
    
          Instead of screwing with atomic_read() in there, why don't we
          simply do the following:
          	a) atomic_dec_and_lock() in put_namespace()
          	b) __put_namespace() called without dropping lock
          	c) the first thing done by __put_namespace would be
          struct vfsmount *root = namespace->root;
          namespace->root = NULL;
          spin_unlock(...);
          ....
          umount_tree(root);
          ...
          	d) check in mark_... would be simply namespace && namespace->root.
    
          And we are all set; no screwing around with atomic_read(), no magic
          at all.  Dying namespace gets NULL ->root.
          All changes of ->root happen under spinlock.
          If under a spinlock we see non-NULL ->mnt_namespace, it won't be
          freed until we drop the lock (we will set ->mnt_namespace to NULL
          under that lock before we get to freeing namespace).
          If under a spinlock we see non-NULL ->mnt_namespace and
          ->mnt_namespace->root, we can grab a reference to namespace and be
          sure that it won't go away.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202322e6f7cd12e82b5ff0fa92bbdf517fcf0947
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jul 7 17:57:22 2005 -0700

    [PATCH] namespace.c: fix mnt_namespace clearing
    
    This patch clears mnt_namespace on unmount.
    
    Not clearing mnt_namespace has two effects:
    
       1) It is possible to attach a new mount to a detached mount,
          because check_mnt() returns true.
    
          This means, that when no other references to the detached mount
          remain, it still can't be freed.  This causes a resource leak,
          and possibly un-removable modules.
    
       2) If mnt_namespace is dereferenced (only in mark_mounts_for_expiry())
          after the namspace has been freed, it can cause an Oops, memory
          corruption, etc.
    
    1) has been tested before and after the patch, 2) is only speculation.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f50142e4b092a469920a0008fc23121c3d99f2f
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:21 2005 -0700

    [PATCH] IB uverbs: add documentation file
    
    Add documentation for InfiniBand userspace verbs.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80c8ec2c04e539aac4e9810a46bc04c1b424b4dd
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:20 2005 -0700

    [PATCH] IB uverbs: add mthca user QP support
    
    Add support for userspace queue pairs (QPs) to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74c2174e7be52f9d2d210511bf3b490f4b41574c
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:19 2005 -0700

    [PATCH] IB uverbs: add mthca user CQ support
    
    Add support for userspace completion queues (CQs) to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24d4281be0598d2d4ab9a2ffb1b78f5af0ffaddf
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:19 2005 -0700

    [PATCH] IB uverbs: add mthca user MR support
    
    Add support for userspace memory regions (MRs) to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99264c1ee2ce908f95c075cce97698758a793b58
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:18 2005 -0700

    [PATCH] IB uverbs: add mthca user PD support
    
    Add support for userspace protection domains (PDs) to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53b8b3ffd5e0b10f3c683096a663d0cc22179c43
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:17 2005 -0700

    [PATCH] IB uverbs: add mthca mmap support
    
    Add support for mmap() method to mthca, so that userspace can get access to
    doorbell registers.  This allows userspace to get direct access to the HCA for
    data path operations.
    
    Each userspace context gets its own copy of the doorbell registers and is only
    allowed to use resources that the kernel has given it access to.  In other
    words, this is safe.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e0b537c7d94efe3fea0fee8e2533c3231a8af75
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:16 2005 -0700

    [PATCH] IB uverbs: add mthca user context support
    
    Add support for managing userspace contexts to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56483ec1b70221f8c9838ccc9a89b43d9de66993
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:16 2005 -0700

    [PATCH] IB uverbs: add mthca user doorbell record support
    
    Add support for userspace doorbell records to mthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e95975e8b87de47c08e032e7762fc7df7dfc2060
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:15 2005 -0700

    [PATCH] IB uverbs: add mthca ABI header
    
    Add the mthca_user.h header file, which defines the device-specific ABI used
    by the mthca low-level driver for kernel/user communication.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d927d696c088ceb22c776e1e89937dc289d4078
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:14 2005 -0700

    [PATCH] IB uverbs: hook up Kconfig/Makefile
    
    Hook up InfiniBand userspace verbs to Kconfig and the make system.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb8ffbfed50e7945c024a80e3688d5beffa3b641
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:14 2005 -0700

    [PATCH] IB uverbs: memory pinning implementation
    
    Add support for pinning userspace memory regions and returning a list of pages
    in the region.  This includes tracking pinned memory against vm_locked and
    preventing unprivileged users from exceeding RLIMIT_MEMLOCK.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc38a6abdd5a50e007d0fcd9b9b6280132b79e62
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:13 2005 -0700

    [PATCH] IB uverbs: core implementation
    
    Add the core of the InfiniBand userspace verbs implementation, including
    creating character device nodes, dispatching requests from userspace, and
    passing event notifications back up to userspace.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a96b3f9af2d0351285665b532f9359d6cd73f42
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:12 2005 -0700

    [PATCH] IB uverbs: add user verbs ABI header
    
    Add the ib_user_verbs.h header file, which defines the ABI used by InfiniBand
    userspace verbs for kernel/user communication.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cf296b66afeec2edc39cc7bbedbf3d0afd2a373
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:11 2005 -0700

    [PATCH] IB uverbs: update mthca for new API
    
    Update mthca to compile against the updated API for low-level drivers.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5e81bf5e7084796d93167f438ec073e59aca9ed
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:11 2005 -0700

    [PATCH] IB uverbs: update kernel midlayer for new API
    
    Update kernel InfiniBand midlayer to compile against the updated API for
    low-level drivers.  This just amounts to passing NULL for all
    userspace-related parameters, and setting userspace-related structure members
    to NULL.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2773c062e41f710d8ef1e8a790c7e558aff663d
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jul 7 17:57:10 2005 -0700

    [PATCH] IB uverbs: core API extensions
    
    First of a series of patches which add support for direct userspace access to
    InfiniBand hardware -- so-called "userspace verbs." I believe these patches
    are ready to merge, but a final review would be useful.
    
    These patches should incorporate all of the feedback from the discussion when
    I posted an earlier version back in April (see
    http://lkml.org/lkml/2005/4/4/267 for the start of the thread).  In
    particular, memory pinned for use by userspace is accounted for in
    current->mm->vm_locked and requests to pin memory are checked against
    RLIMIT_MEMLOCK.
    
    This patch:
    
    Modify the ib_verbs.h header file with changes required for InfiniBand
    userspace verbs support.  We add a few structures to keep track of userspace
    context, and extend the driver API so that low-level drivers know when they're
    creating resources that will be used from userspace.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 404865516ce6b6d7ee37c4eb4ee77d78b38e669a
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 7 17:57:09 2005 -0700

    [PATCH] alpha(): pgprot_noncached
    
    The infiniband code expects that the arch implements pgprot_noncached().
    
    We're mapping PCI areas anyway, so this probabyl wasn't needed and we should
    make infiniband stop doing that..
    
    Cc: Roland Dreier <rolandd@cisco.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e8d7e3c9e38dab8d28a8667faa4941842f64213
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Thu Jul 7 17:57:07 2005 -0700

    [PATCH] coverity: sunrpc/xprt task null check
    
    In __xprt_lock_write() we check to see if `task' is NULL, but in other places
    we just go and dereference it.
    
    `task' shouldn't be NULL anyway, so remove this test.
    
    This defect was found automatically by Coverity Prevent, a static analysis
    tool.
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7eaae2828dadae3abde7f77734c874d4b74b313a
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Thu Jul 7 17:57:06 2005 -0700

    [PATCH] coverity: fs/locks.c flp null check
    
    We're dereferencing `flp' and then we're testing it for NULLness.
    
    Either the compiler accidentally saved us or the existing null-pointer checdk
    is redundant.
    
    This defect was found automatically by Coverity Prevent, a static analysis tool.
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f96c95680bfe66ff00c91859d4c73edf539b854
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Thu Jul 7 17:57:05 2005 -0700

    [PATCH] coverity: fix fbsysfs null pointer check
    
    Correctly test for a null pointer before going and dereferencing it.
    
    This defect was found automatically by Coverity Prevent, a static analysis
    tool.
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bbcfd9000887c0da7d57cc7b3ac869fc0dd5aa9
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jul 7 17:57:04 2005 -0700

    [PATCH] cond_resched(): fix bogus might_sleep() warning
    
    The BKS might be reacquired before we have dropped PREEMPT_ACTIVE, which
    could trigger a second could trigger a second cond_resched() call.  Bug
    found by Hirofumi Ogawa.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4014d8f61a6a136d22422cf8aa978e6495dbad9
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jul 7 17:57:03 2005 -0700

    [PATCH] Keys: Base keyring size on key pointer not key struct
    
    The attached patch makes the keyring functions calculate the new size of a
    keyring's payload based on the size of pointer to the key struct, not the size
    of the key struct itself.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 682d4fc93105ebf0bdfbb04a4b85047999b17844
Author: Ian Kent <raven@themaw.net>
Date:   Thu Jul 7 17:57:02 2005 -0700

    [PATCH] autofs4: mistake in debug print
    
    Fix debugging printk.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 214a627cb401284f87cca7e1510a0f4284f1a17c
Author: Jesse Millan <jessem@cs.pdx.edu>
Date:   Thu Jul 7 17:57:01 2005 -0700

    [PATCH] put_compat_shminfo() warning fix
    
    GCC 4 complains because the function put_compat_shminfo() can't get to its
    return statement if there is no error...  If the function does not return
    -EFAULT, it doesn't return anything at all.  Looks like a typo.
    
    Signed-off-by: Jesse Millan <jessem@cs.pdx.edu>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff87b37da912d6aeab6c20c58f51b34d3e37f111
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Thu Jul 7 17:57:00 2005 -0700

    [PATCH] ext3 xattr: Don't write to the in-inode xattr space of reserved inodes
    
    We are not using the in-inode space for xattrs in reserved inodes because
    mkfs.ext3 doesn't initialize it properly.  For those inodes, we set
    i_extra_isize to 0.  Make sure that we also don't overwrite the
    i_extra_isize field when writing out the inode in that case.  This is for
    cleanliness only, and doesn't fix an actual bug.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c036527a630720063b67d9a65455e8caca2c8fa
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jul 7 17:56:59 2005 -0700

    [PATCH] mostly_read data section
    
    Add a new section called ".data.read_mostly" for data items that are read
    frequently and rarely written to like cpumaps etc.
    
    If these maps are placed in the .data section then these frequenly read
    items may end up in cachelines with data is is frequently updated.  In that
    case all processors in an SMP system must needlessly reload the cachelines
    again and again containing elements of those frequently used variables.
    
    The ability to share these cachelines will allow each cpu in an SMP system
    to keep local copies of those shared cachelines thereby optimizing
    performance.
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Shobhit Dayal <shobhit@calsoftinc.com>
    Signed-off-by: Christoph Lameter <christoph@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0db925af1db5f3dfe1691c35b39496e2baaff9c9
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jul 7 17:56:58 2005 -0700

    [PATCH] propagate __nocast annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b84c21572de8a732062eff5592e3c4b3b1793bb8
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Thu Jul 7 17:56:57 2005 -0700

    [PATCH] acl kconfig cleanup
    
    Original patch from Matt Mackall <mpm@selenic.com>
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a39722034ae37f80a1803bf781fe3fe1b03e20bc
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu Jul 7 17:56:56 2005 -0700

    [PATCH] page_uptodate locking scalability
    
    Use a bit spin lock in the first buffer of the page to synchronise asynch
    IO buffer completions, instead of the global page_uptodate_lock, which is
    showing some scalabilty problems.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6afe27bfff30fbec2cca6ad5626c22f4094d770
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jul 7 17:56:55 2005 -0700

    [PATCH] tty output lossage fix
    
    The patch fixes a few corner cases around tty line editing with
    very long input lines:
    
    - n_tty_receive_char(): don't simply drop eol characters,
      otherwise canon_data isn't increased and the reader isn't woken
      up.
    
    - n_tty_receive_room(): If there is no newline pending and the
      edit buffer is full, allow only a single character to be written
      (until eol is found and the line is flushed), so characters from
      the next line aren't dropped.
    
    - write_chan(): if an incomplete line was written, continue
      writing until write() returns 0, otherwise it might not write
      the eol character to flush the line and the writer goes to sleep
      without ever being woken up.
    
    BTW the core problem is that part of this should be handled in the
    receive_buf path, but for this it has to return the number of
    written characters, as the amount of written characters may not be
    the same as the amount of characters going into the write buffer,
    so the receive_room() usage in pty_write() is not really reliable.
    
    Alan said:
    
    The problem looks valid. The behaviour of 'traditional unix' appears to
    be the following
    
    	If you exceed the line limit then beep and drop the character
    	Always allow EOL to complete a canonical line input
    	Always do signal/control processing if enabled
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8759145114f72857bcaeed338db21620a6619b26
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jul 7 17:56:53 2005 -0700

    [PATCH] xtensa: remove old syscalls
    
    xtensa is now in -rc1, with the obsolete syscalls still in there, so I
    guess this about the last chance to correct the ABI.  Applying the patch
    obviously breaks all sorts of user space binaries and probably also
    requires the appropriate changes to be made to libc.
    
    On the other hand, if a decision is made to keep the broken interface, it
    should at least be a conscious one instead of an oversight.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 605a69ac81249cca531cdc6b3e695f15dda63102
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 7 17:56:52 2005 -0700

    [PATCH] uml: remove winch sem
    
    Replace a semaphore (winch_handler_sem) used in atomic code with a
    spinlock, and reduces as needed the amount of protected code to the bare
    minimum (for instance no kmalloc calls are needed).
    
    This fixes the last problems with spinlocking (in UP mode with DEBUG
    options); the semaphore, taken inside spinlocks, caused a "spin_lock was
    already locked" warning, without this patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f580470baa3afc423e38fdc6e19667446b5aac0
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 7 17:56:51 2005 -0700

    [PATCH] uml: restore hppfs support
    
    Some time ago a trivial patch broke HPPFS (one var became a pointer, not
    all uses were updated).  It wasn't fixed at that time because not very
    used, now it's been requested so I've fixed this, and it has been tested
    positively (at least partially).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9786a8f3cbc61f990266e23ffdb338ee3118b03d
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu Jul 7 17:56:50 2005 -0700

    [PATCH] uml: Proper clone support for skas0
    
    This patch implements the clone-stub mechanism, which allows skas0 to run
    with proc_mm==0, even if the clib in UML uses modify_ldt.
    
    Note: There is a bug in skas3.v7 host patch, that avoids UML-skas from
    running properly on a SMP-box.  In full skas3, I never really saw problems,
    but in skas0 they showed up.
    
    More commentary by jdike - What this patch does is makes sure that the host
    parent of each new host process matches the UML parent of the corresponding
    UML process.  This ensures that any changed LDTs are inherited.  This is
    done by having clone actually called by the UML process from its stub,
    rather than by the kernel.  We have special syscall stubs that are loaded
    onto the stub code page because that code must be completely
    self-contained.  These stubs are given C interfaces, and used like normal C
    functions, but there are subtleties.  Principally, we have to be careful
    about stack variables in stub_clone_handler after the clone.  The code is
    written so that there aren't any - everything boils down to a fixed
    address.  If there were any locals, references to them after the clone
    would be wrong because the stack just changed.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d67b569f5f620c0fb95d5212642746b7ba9d29e4
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 7 17:56:49 2005 -0700

    [PATCH] uml: skas0 - separate kernel address space on stock hosts
    
    UML has had two modes of operation - an insecure, slow mode (tt mode) in
    which the kernel is mapped into every process address space which requires
    no host kernel modifications, and a secure, faster mode (skas mode) in
    which the UML kernel is in a separate host address space, which requires a
    patch to the host kernel.
    
    This patch implements something very close to skas mode for hosts which
    don't support skas - I'm calling this skas0.  It provides the security of
    the skas host patch, and some of the performance gains.
    
    The two main things that are provided by the skas patch, /proc/mm and
    PTRACE_FAULTINFO, are implemented in a way that require no host patch.
    
    For the remote address space changing stuff (mmap, munmap, and mprotect),
    we set aside two pages in the process above its stack, one of which
    contains a little bit of code which can call mmap et al.
    
    To update the address space, the system call information (system call
    number and arguments) are written to the stub page above the code.  The
    %esp is set to the beginning of the data, the %eip is set the the start of
    the stub, and it repeatedly pops the information into its registers and
    makes the system call until it sees a system call number of zero.  This is
    to amortize the cost of the context switch across multiple address space
    updates.
    
    When the updates are done, it SIGSTOPs itself, and the kernel process
    continues what it was doing.
    
    For a PTRACE_FAULTINFO replacement, we set up a SIGSEGV handler in the
    child, and let it handle segfaults rather than nullifying them.  The
    handler is in the same page as the mmap stub.  The second page is used as
    the stack.  The handler reads cr2 and err from the sigcontext, sticks them
    at the base of the stack in a faultinfo struct, and SIGSTOPs itself.  The
    kernel then reads the faultinfo and handles the fault.
    
    A complication on x86_64 is that this involves resetting the registers to
    the segfault values when the process is inside the kill system call.  This
    breaks on x86_64 because %rcx will contain %rip because you tell SYSRET
    where to return to by putting the value in %rcx.  So, this corrupts $rcx on
    return from the segfault.  To work around this, I added an
    arch_finish_segv, which on x86 does nothing, but which on x86_64 ptraces
    the child back through the sigreturn.  This causes %rcx to be restored by
    sigreturn and avoids the corruption.  Ultimately, I think I will replace
    this with the trick of having it send itself a blocked signal which will be
    unblocked by the sigreturn.  This will allow it to be stopped just after
    the sigreturn, and PTRACE_SYSCALLed without all the back-and-forth of
    PTRACE_SYSCALLing it through sigreturn.
    
    This runs on a stock host, so theoretically (and hopefully), tt mode isn't
    needed any more.  We need to make sure that this is better in every way
    than tt mode, though.  I'm concerned about the speed of address space
    updates and page fault handling, since they involve extra round-trips to
    the child.  We can amortize the round-trip cost for large address space
    updates by writing all of the operations to the data page and having the
    child execute them all at the same time.  This will help fork and exec, but
    not page faults, since they involve only one page.
    
    I can't think of any way to help page faults, except to add something like
    PTRACE_FAULTINFO to the host.  There is PTRACE_SIGINFO, but UML doesn't use
    siginfo for SIGSEGV (or anything else) because there isn't enough
    information in the siginfo struct to handle page faults (the faulting
    operation type is missing).  Adding that would make PTRACE_SIGINFO a usable
    equivalent to PTRACE_FAULTINFO.
    
    As for the code itself:
    
    - The system call stub is in arch/um/kernel/sys-$(SUBARCH)/stub.S.  It is
      put in its own section of the binary along with stub_segv_handler in
      arch/um/kernel/skas/process.c.  This is manipulated with run_syscall_stub
      in arch/um/kernel/skas/mem_user.c.  syscall_stub will execute any system
      call at all, but it's only used for mmap, munmap, and mprotect.
    
    - The x86_64 stub calls sigreturn by hand rather than allowing the normal
      sigreturn to happen, because the normal sigreturn is a SA_RESTORER in
      UML's address space provided by libc.  Needless to say, this is not
      available in the child's address space.  Also, it does a couple of odd
      pops before that which restore the stack to the state it was in at the
      time the signal handler was called.
    
    - There is a new field in the arch mmu_context, which is now a union.
      This is the pid to be manipulated rather than the /proc/mm file
      descriptor.  Code which deals with this now checks proc_mm to see whether
      it should use the usual skas code or the new code.
    
    - userspace_tramp is now used to create a new host process for every UML
      process, rather than one per UML processor.  It checks proc_mm and
      ptrace_faultinfo to decide whether to map in the pages above its stack.
    
    - start_userspace now makes CLONE_VM conditional on proc_mm since we need
      separate address spaces now.
    
    - switch_mm_skas now just sets userspace_pid[0] to the new pid rather
      than PTRACE_SWITCH_MM.  There is an addition to userspace which updates
      its idea of the pid being manipulated each time around the loop.  This is
      important on exec, when the pid will change underneath userspace().
    
    - The stub page has a pte, but it can't be mapped in using tlb_flush
      because it is part of tlb_flush.  This is why it's required for it to be
      mapped in by userspace_tramp.
    
    Other random things:
    
    - The stub section in uml.lds.S is page aligned.  This page is written
      out to the backing vm file in setup_physmem because it is mapped from
      there into user processes.
    
    - There's some confusion with TASK_SIZE now that there are a couple of
      extra pages that the process can't use.  TASK_SIZE is considered by the
      elf code to be the usable process memory, which is reasonable, so it is
      decreased by two pages.  This confuses the definition of
      USER_PGDS_IN_LAST_PML4, making it too small because of the rounding down
      of the uneven division.  So we round it to the nearest PGDIR_SIZE rather
      than the lower one.
    
    - I added a missing PT_SYSCALL_ARG6_OFFSET macro.
    
    - um_mmu.h was made into a userspace-usable file.
    
    - proc_mm and ptrace_faultinfo are globals which say whether the host
      supports these features.
    
    - There is a bad interaction between the mm.nr_ptes check at the end of
      exit_mmap, stack randomization, and skas0.  exit_mmap will stop freeing
      pages at the PGDIR_SIZE boundary after the last vma.  If the stack isn't
      on the last page table page, the last pte page won't be freed, as it
      should be since the stub ptes are there, and exit_mmap will BUG because
      there is an unfreed page.  To get around this, TASK_SIZE is set to the
      next lowest PGDIR_SIZE boundary and mm->nr_ptes is decremented after the
      calls to init_stub_pte.  This ensures that we know the process stack (and
      all other process mappings) will be below the top page table page, and
      thus we know that mm->nr_ptes will be one too many, and can be
      decremented.
    
    Things that need fixing:
    
    - We may need better assurrences that the stub code is PIC.
    
    - The stub pte is set up in init_new_context_skas.
    
    - alloc_pgdir is probably the right place.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1322ad41513f8f9196801f53cc0851df056f3478
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Jul 7 17:56:45 2005 -0700

    [PATCH] pm: clean up process.c
    
    freezeable() already tests for TRACED/STOPPED processes, no need to do it
    twice.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47b724f3fe372a3d9acf0bb560fb5c93c9867880
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Jul 7 17:56:44 2005 -0700

    [PATCH] swsusp: fix error handling
    
    Fix error handling and whitespace in swsusp.c.  swsusp_free() was called when
    there was nothing allocating, leading to oops.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3efa147ad7608196639882ba4075b376f306fe16
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Jul 7 17:56:43 2005 -0700

    [PATCH] pm: Fix resume from initrd
    
    Move device name resolution code around so that it is not called from
    resume-from-initrd.  name_to_dev_t may be unavailable at that point.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e00d9967e3addea86dded46deefc5daec5d52e5a
Author: Bernard Blackham <bernard@blackham.com.au>
Date:   Thu Jul 7 17:56:42 2005 -0700

    [PATCH] pm: fix u32 vs. pm_message_t confusion in cpufreq
    
    Fix u32 vs pm_message_t confusion in cpufreq.
    
    Signed-off-by: Bernard Blackham <bernard@blackham.com.au>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a569579be87b5ba61f9b6c54fd5f9f307c53962
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Jul 7 17:56:40 2005 -0700

    [PATCH] pm: more u32 vs. pm_message_t fixes
    
    Few more u32 vs. pm_message_t fixes.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8af300c3bd87b2310f1e7a642f37e0fe49a754b
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 7 17:56:39 2005 -0700

    [PATCH] Fix up non-NUMA breakage in mmzone.h
    
    If CONFIG_NUMA isn't set, we use the define in <linux/mmzone.h> for
    early_pfn_to_nid (which defines it to 0).
    
    Because of this, the prototype needs to move inside the CONFIG_NUMA too, or
    anal gcc's get really confused.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ff8b27bb8ebfd863b49653da1b7bbd8609fcd7e
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 7 17:56:39 2005 -0700

    [PATCH] Clean up numa defines in mmzone.h
    
    The recent cleanups to asm-i386/mmzone.h were suboptimal nesting an ifdef of
    the same symbol.  This patch removes some of the ifdef'ery to make things more
    readable again.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b520b238e018ef0e9d11c9115d5e7d9419c4ef9
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Thu Jul 7 17:56:38 2005 -0700

    [PATCH] MTRR suspend/resume cleanup
    
    There has been some discuss about solving the SMP MTRR suspend/resume
    breakage, but I didn't find a patch for it.  This is an intent for it.  The
    basic idea is moving mtrr initializing into cpu_identify for all APs (so it
    works for cpu hotplug).  For BP, restore_processor_state is responsible for
    restoring MTRR.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01d299367fe868851a632cfbdb606845f57682aa
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jul 7 17:56:36 2005 -0700

    [PATCH] FRV: Add defconfig
    
    This patch by Yoshihiro MATSUYAMA (already ACK'ed by David Howells) adds a
    defconfig for the frv arch.
    
    Signed-Off-By: Yoshihiro MATSUYAMA <y.matsu@jp.fujitsu.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 059e277e5ba6486b5ef66deb336d4ef887f163ac
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:36 2005 -0700

    [PATCH] ppc64: silence perfmon exception warnings
    
    We dont need to use the PERFMON exception on POWER5, in fact the firmware
    returns an error.  Due to this just remove the warning.
    
    Also now that we have proper runlatch support we can remove the bootup
    hack.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6bff397ea9c36d410212f785ee644103146102a
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:35 2005 -0700

    [PATCH] ppc64: Be consistent about printing which idle loop we're using
    
    Not sure if we really need this, but it was handy to know which iSeries loop I
    was testing.
    
    Be consistent about printing which idle loop we're using, with this patch we
    cover all cases.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ca1e1ed58d6428924b5a44539334c341a6f485
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:34 2005 -0700

    [PATCH] ppc64: fix compile warning
    
    Fix a compile warning introduced by the previous patches.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45e75dfb609df4391636c2218bec5ea04536601d
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:33 2005 -0700

    [PATCH] ppc64: idle fixups
    
    - remove some unnecessary includes
    - add runlatch support
    - no need to use raw_smp_processor_id any more, current preempt debug
      logic checks for processes that are bound to one cpu.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 050a09389e045f37e5bf08718cf36909766e20d1
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:33 2005 -0700

    [PATCH] ppc64: pSeries idle fixups
    
    - separate out sleep logic in dedicated_idle, it was so far indented
      that it got squashed against the right side of the screen.
    - add runlatch support, looping on runlatch disable.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c57bb9f454e8fc7b3d815b991b0dec43c766641
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:32 2005 -0700

    [PATCH] ppc64: iSeries idle fixups
    
    - remove min/max yield time, we dont use the values anywhere
    - separate shared and dedicated idle loops
    - check need_resched again with irqs off to avoid sleeping with pending work
    - continually set runlatch off in idle loop, this means we dont need to
      turn the runlatch off on exception exit and suffer that associated
      cost for all exceptions. (A future patch will turn the runlatch on at
      exception entry)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08d5e3eb4b2141e1031835c89a62ee3ddf896641
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:31 2005 -0700

    [PATCH] ppc64: Remove obsolete idle_setup()
    
    Now that the idle loop is configured by each platform we don't need
    idle_setup() anymore.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62d60e9f0f890c31e5a83a7d8ecdfd1c7975fdb9
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:30 2005 -0700

    [PATCH] ppc64: Fixup platforms for new ppc_md.idle
    
    This patch fixes up iSeries, pSeries, pmac and maple to set the correct idle
    function for each platform.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c66d5dd6b5b62e1435b95c0fb42f6bcddeb395ea
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:29 2005 -0700

    [PATCH] ppc64: Move pSeries idle functions into pSeries_setup.c
    
    dedicated_idle() and shared_idle() are only used by pSeries, so move them into
    pSeries_setup.c
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d200903e11f6867b91dffa81b2038e55be599f49
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:29 2005 -0700

    [PATCH] ppc64: Move iSeries_idle() into iSeries_setup.c
    
    Move iSeries_idle() into iSeries_setup.c, no one else needs to know about it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd899c0cc725387992ccfc83fb6f70505c36cbeb
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jul 7 17:56:28 2005 -0700

    [PATCH] ppc64: Make idle_loop a ppc_md function
    
    This patch adds an idle member to the ppc_md structure and calls it from
    cpu_idle().  If a platform leaves ppc_md.idle as null it will get the default
    idle loop default_idle().
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88de0be0c7335650326a1236bf6ca1ed265c0a1c
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:27 2005 -0700

    [PATCH] hvc_console: Use hvc_get_chars in hvsi code
    
    Now that hvc_get_chars doesn't strip NULs, hvsi doesn't have to duplicate it.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70b234a40107596a713e9981c643f2717e31463f
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:26 2005 -0700

    [PATCH] hvc_console: Separate the NUL character filtering from get_hvc_chars
    
    Separate the NUL character filtering from get_hvc_chars.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 030ffad23fb28fc29608a3bc21f0c3b88bf28592
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:25 2005 -0700

    [PATCH] hvc_console: Register ops when setting up hvc_console
    
    When registering the hvc console port, register a list of ops (read and write)
    to go with it, instead of calling fixed function names.
    
    This allows different ports to encode the data differently.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acad9559f1054487292eb10d7bb81f256e9d8f2d
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:24 2005 -0700

    [PATCH] hvc_console: Separate hvc_console and vio code 2
    
    Remove all the vio device driver code from hvc_console.c
    
    This will allow us to separate hvsi, hvc, and allow hvc_console to be used
    without the ppc64 vio layer.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5ee257c3342185ba8ab642d125d192eb99ea8f2
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:24 2005 -0700

    [PATCH] hvc_console: Separate hvc_console and vio code
    
    Separate the console setup routines of the hvc_console and the vio layer.
    
    Remove the call to find_init_vty from hvc_console.c.
    
    Fail the setup routine if the console doesn't exist, but register the console
    again when the specified channel is instantiated.  This scheme maintains the
    print buffer semantics while eliminating callout and call back for the console
    code.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7805b1b29ffdd252dfef36aa28d7bda70cd586d3
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:23 2005 -0700

    [PATCH] hvc_console: Add some sanity checks
    
    Check if a vterm was registered before accepting it as a console.
    Check that a slot hasn't been probed with a tty in hvc_instantiate().
    Check that a slot hasn't been free'ed when handing out console device.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64e4da57964c03da9a03087a398cade81b7bb496
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:22 2005 -0700

    [PATCH] hvc_console: Statically initialize the vtermnos array
    
    Statically initialize the vtermnos array.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f6d9c072df162a8601a09e6c63fd0e4f5aecd06
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:21 2005 -0700

    [PATCH] hvc_console: remove num_vterms and some dead code
    
    num_vterms hasn't been used since the hotplug support went in.  Also, remove a
    dead code line from a list_for_each_entry conversion.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e51d8c90a5ead16810302b2dc5127724c9045e77
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:21 2005 -0700

    [PATCH] hvc_console: Add missing include
    
    hvc_console checks MAGIC_SYSRQ and XMON config vars.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 320da0d23ed1f82a896e0cfc1549a896d267777a
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:20 2005 -0700

    [PATCH] hvc_console: Unregister the console in the exit routine.
    
    Be thorough in our exit routine, since it says it is there to be so.
    Unregistering without registering is safe (checked in 2.6.10).
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b9e0bac9419404a2d210ccaffaec442fe63338e
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:19 2005 -0700

    [PATCH] hvc_console: MAGIC_SYSRQ should only be on console channel
    
    Guard the MAGIC_SYSRQ ^O to be just on the console channel.  Make the other
    channels more transparent.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b67f8c177a642b35b7a05f530c12ef2834ef182
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:18 2005 -0700

    [PATCH] hvc_console: Dont always kick the poll thread in interrupt
    
    Have the hvc console code try to pull characters immediately when receiving an
    interrupt, and kick the poll thread only if the immediate poll indicates it
    needed a call back to do more work.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f24808eeb54eed5994128a863cd25c40f36cfac
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:17 2005 -0700

    [PATCH] hvc_console: Match vio and console devices using vterm numbers
    
    Use the vterm numbers to match the vio devices being probed with the indices
    already allocated via the console initcall function hvc_find_vtys.
    
    The old code required hvc_find_vtys to "guess" the matching devices the vio
    subsystem would find and its probe order.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 837dcfaf46d147f1d2c64cbbecb832dd9075c39d
Author: Milton Miller <miltonm@bga.com>
Date:   Thu Jul 7 17:56:16 2005 -0700

    [PATCH] hvc_console: Rearrange code
    
    Milton Miller has done a lot of work to clean up our hvc_console code.
    
    One of the important things the following patch series does is separate the
    VIO layer from the hvc_console code.  With the VIO specific code removed any
    ppc64 platform, or even any architecture, can use hvc_console as a generic
    polling console.  You simply have to supply a get_chars and put_chars method
    and hvc_console does the rest of the work.  You can even use it for an
    interrupt driven console.
    
    This patch:
    
    Rearrange the code in drivers/char/hvc_console.c to make future patches
    smaller.  No actual code changes, just ordering of the functions in the file.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cee73fa04758f52b7404b93a02edf74649370ab
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:15 2005 -0700

    [PATCH] ppc64: remove duplicate syscall reservation
    
    We already have a prototype for sys_remap_file_pages (239) so there is no need
    to reserve it twice.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79c2cc7b6d2cc31cff6a3d8e966a890f0a0d5f7a
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:15 2005 -0700

    [PATCH] ppc64: add ioprio syscalls
    
    - Clean up sys32_getpriority comment.
    - Add ioprio syscalls, and sign extend 32bit versions.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4416f3968a23e25a257d679227a89710447760ab
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:14 2005 -0700

    [PATCH] ppc64: sys_ppc32.c cleanups
    
    Remove some unnecessary includes, an out of date comment and a prototype for
    sys_timer_create (which is now in syscalls.h)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf36680887d6d942d2119c1ff1dfb2428b0f21f4
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:13 2005 -0700

    [PATCH] move ioprio syscalls into syscalls.h
    
    - Make ioprio syscalls return long, like set/getpriority syscalls.
    - Move function prototypes into syscalls.h so we can pick them up in the
      32/64bit compat code.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dc4fd87f229414fc38648508aad7def2275fe81
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:12 2005 -0700

    [PATCH] ppc64: Turn runlatch on in exception entry
    
    Enable the runlatch at the start of each exception.  Unfortunately we are out
    of space in the 0x300 handler, so I added it a bit later.
    
    The SPR write is fairly expensive, perhaps we should cache the runlatch state
    in the paca and avoid the write when possible.
    
    We don't need to turn the runlatch off, we do that in the idle loop.  Better
    to take the hit in the idle loop than for each exception exit.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f7a9ce2a5c3d21cc0eb37a03da603b44ba4b09
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:11 2005 -0700

    [PATCH] ppc64: Fix runlatch code to work on pseries machines
    
    Not all ppc64 CPUs have the CTRL SPR, so we need a cputable feature for it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 315a699851722a6bc31e35f91562f31f55d4c4a2
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:11 2005 -0700

    [PATCH] ppc64: use c99 initialisers in cputable code
    
    Use c99 initialisers in the cputable code.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2098eec22882e8a50a21eb214df4742b34927dae
Author: Olaf Hering <olh@suse.de>
Date:   Thu Jul 7 17:56:09 2005 -0700

    [PATCH] ppc64: vdso32: fix link errors after recent toolchain changes
    
    Patch from <amodra@bigpond.net.au>,
    http://sources.redhat.com/bugzilla/show_bug.cgi?id=1042
    
    /usr/bin/ld: arch/ppc64/kernel/vdso32/vdso32.so: The first section in the
    PT_DYNAMIC segment is not the .dynamic section
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c326fe9cb7ae022f7589a6f5781e49ceab82e64
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jul 7 17:56:09 2005 -0700

    [PATCH] ppc64: Add new PHY to sungem
    
    This patch adds support for some new PHY models to sungem as used on some
    recent Apple iMac G5 models.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 155ad605b3c9c5874ff068f23c6ea8537190e0a8
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Thu Jul 7 17:56:08 2005 -0700

    [PATCH] kbuild: build a single module using 'make dir/module.ko'
    
    Using the syntax:
    make dir/module.ko
    
    kbuild now allows one to build a module including the final link stage.
    This is usefull when one only wants to compile a single module and thus do
    not have to wait until a full kernel has finished compiling.  Tested by:
    Randy Dunlap <rdunlap@xenotime.net>
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f182ae626189d8a346aae142e7b8b182663dac44
Author: George Anzinger <george@mvista.com>
Date:   Thu Jul 7 17:56:06 2005 -0700

    [PATCH] kbuild: build TAGS problem with O=
    
      make O=/dir TAGS
    
      fails with:
    
        MAKE   TAGS
      find: security/selinux/include: No such file or directory
      find: include: No such file or directory
      find: include/asm-i386: No such file or directory
      find: include/asm-generic: No such file or directory
    
      The problem is in this line:
      ifeq ($(KBUILD_OUTPUT),)
    
    KBUILD_OUTPUT is not defined (ever) after make reruns itself.  This line is
    used in the TAGS, tags, and cscope makes.
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42639269f9ce4aac2e6c20bcbca30b5da8b9a899
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jul 7 17:56:06 2005 -0700

    [PATCH] mm: quieten OOM killer noise
    
    We now print statistics when invoking the OOM killer, however this
    information is not rate limited and you can get into situations where the
    console is continually spammed.
    
    For example, when a task is exiting the OOM killer will simply return
    (waiting for that task to exit and clear up memory).  If the VM continually
    calls back into the OOM killer we get thousands of copies of show_mem() on
    the console.
    
    Use printk_ratelimit() to quieten it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37b173a4d03d1681e6c9529bc43d7a3308132db6
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Thu Jul 7 17:56:05 2005 -0700

    [PATCH] remove completly bogus comment inside __alloc_pages() try_to_free_pages handling
    
    Remove completly bogus comment from did_some_progress != 0 handling (that
    same comment is a few lines below on did_some_progress = 0 case, where it
    belongs).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79b9ce311e192e9a31fd9f3cf1ee4a4edf9e2650
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Thu Jul 7 17:56:04 2005 -0700

    [PATCH] print order information when OOM killing
    
    Dump the current allocation order when OOM killing.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb2c0233755429037462e16ea0d5497a0092738c
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Jul 7 17:56:03 2005 -0700

    [PATCH] export generic_drop_inode() to modules
    
    OCFS2 wants to mark an inode which has been orphaned by another node so
    that during final iput it takes the correct path through the VFS and can
    pass through the OCFS2 delete_inode callback.  Since i_nlink can get out of
    date with other nodes, the best way I see to accomplish this is by clearing
    i_nlink on those inodes at drop_inode time.  Other than this small amount
    of work, nothing different needs to happen, so I think it would be cleanest
    to be able to just call generic_drop_inode at the end of the OCFS2
    drop_inode callback.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca3f5a95b7d04eef0f88464f8d3299c1c01e8e13
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 7 17:56:02 2005 -0700

    [PATCH] i2o: config-osm build fix
    
    Various stuff missing on alpha:
    
    drivers/message/i2o/config-osm.c:35: error: field `fops' has incomplete type
    drivers/message/i2o/config-osm.c: In function `sysfs_create_fops_file':
    drivers/message/i2o/config-osm.c:71: error: storage size of `tmp' isn't known
    drivers/message/i2o/config-osm.c:78: error: dereferencing pointer to incomplete type
    drivers/message/i2o/config-osm.c:81: error: dereferencing pointer to incomplete type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c23a4e9649f80a9379d7df4a33bc63b365d5e7fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 7 17:56:02 2005 -0700

    [PATCH] iounmap debugging
    
    We get sporadic reports of `__iounmap: bad address' coming out.  Add a
    dump_stack() to find the culprit.
    
    Try to identify which subsystem is having iounmap() problems.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eda80228860641b7b0e963e6bd219b960c500af9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jul 7 17:56:00 2005 -0700

    [PATCH] uml: kill some useless vmalloc tlb flushing
    
    There is absolutely no reason to flush the kernel's VM area during a
    tlb_flush_mm.
    
    This results in a noticable performance increase in the kernel build
    benchmark.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b2c3750330325ae5071582b5c4dbdf1c8bc1e51
Author: Bob Picco <bob.picco@hp.com>
Date:   Wed Jun 29 18:00:00 2005 -0700

    [PATCH] Documentation
    
    This is a small documentation patch for a boot time parameter.
    
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 043d051615aa5da09a7e44f1edbb69798458e067
Merge: c101f31... 21517a5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 7 10:24:51 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 21517a57e838a1fbb7a54a8a77501024e77f83e0
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Jul 7 09:14:00 2005 -0700

    [IA64] - Disable tiocx driver on non-SN systems
    
    Disable the tiocx driver on non-SN systems.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 97f927a4d7dbccde0a854a62c3ea54d90bae8679
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Thu Jul 7 16:50:16 2005 +0200

    [MTD] XIP cleanup
    
    Move the architecture dependend code into include/asm/mtd-xip.h
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b9c86d595d2a11009c58c84a9a8792aeb4a8f278
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Jul 7 11:26:24 2005 +0100

    [MTD] Remove MODULE_DEVICE_TABLE() for ICHx flash driver
    
    This prevents it from automatically getting loaded by hotplug because
    we happen to notice you have this chipset. Let's stick with having to
    load the drivers which let you overwrite your BIOS _manually_
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8ca7c1df08210fd35fccf1559837c92baaa4da8f
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 21:51:26 2005 +1000

    drm: add 32/64 support for MGA/R128/i915
    
    This adds compatiblity ioctls for mga/r128 and i915 DRM drivers.
    
    From: Paul Mackerras, David Airlie, Alan Hourihane, Egbert Eich.
    Signed-off-by: David Airlie <airlied@linux.ie>

commit 850eb83a6a21b086624b227653ce90ad927ba423
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 21:09:14 2005 +1000

    drm: wrap config.h include in a ifdef KERNEL
    
    This file can be included from userspace so wrap the config.h include.
    
    Signed-off-by: David Airlie <airlied@linux.ie>

commit c94f70298529d99ac6e1ee7709f61eab00adeb39
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 21:03:38 2005 +1000

    drm: misc cleanup
    
    This patch contains the following cleanups:
    - make needlessly global functions static
    - remove the following unused global functions:
     - drm_fops.c: drm_read
     - i915_dma.c: i915_do_cleanup_pageflip
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit b9523249de59c49e7c2cc83dfa73fb011a489a45
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 20:33:26 2005 +1000

    drm: use kcalloc now that it is available..
    
    Make the DRM drm_calloc call kcalloc now.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit f650130803c4c0b5e5d76eff24faae722e3a69e2
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 20:17:42 2005 +1000

    drm: ctx release can happen before dev->ctxlist is allocated
    
    From: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0c7b525c344bc29a760c37053f8d5c80292ee1be
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 20:16:08 2005 +1000

    drm: fix minor issues caused by core conversion
    
    The conversion to core/driver got this check in-correct.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 717cb906bd43a9ac00631d600adda5c6546843a6
Merge: 22f579c... c101f31...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jul 7 20:08:27 2005 +1000

    Merge ../linux-2.6/

commit c101f3136cc98a003d0d16be6fab7d0d950581a6
Merge: 359ea2f... e3e01d6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 6 22:15:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 8d7e35174d02ce76e910365acaaefc281a0b72a0
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jul 6 18:18:10 2005 -0700

    [IA64] fix generic/up builds
    
    Jesse Barnes provided the original version of this patch months ago, but
    other changes kept conflicting with it, so it got deferred.  Greg Edwards
    dug it out of obscurity just over a week ago, and almost immediately
    another conflicting patch appeared (Bob Picco's memory-less nodes).
    
    I've resolved the conflicts and got it running again.  CONFIG_SGI_TIOCX
    is set to "y" in defconfig, which causes a Tiger to not boot (oops in
    tiocx_init).  But that can be resolved later ... get this in now before it
    gets stale again.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 359ea2f1352a77177540a213283bc7489f546ced
Merge: 960b846... e1d5dea...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 6 17:04:06 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 960b8466548c9bc6f718b5f470c1a58000fab09d
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Thu Jul 7 03:07:56 2005 +0400

    [PATCH] yet another fix for setup-bus.c/x86 merge
    
    There is a slight disagreement between setup-bus.c code and traditional
    x86 PCI setup wrt which recourses are invalid vs resources that are free
    for further allocations.
    
    In particular, in the setup-bus.c, if we failed to allocate some resource,
    we nullify "start" and "flags" fields, but *not* the "end" one.
    
    But x86 pcibios_enable_resources() does the following check:
    
    	if (!r->start && r->end) {
    		printk(KERN_ERR "PCI: Device %s not available because of resource collisions\n", pci_name(dev));
    		return -EINVAL;
    
    which means that the device owning the offending resource cannot be
    enabled.
    
    In particular, this breaks cardbus behind the normal decode p2p bridge -
    the cardbus code from setup-bus.c requests rather large IO and MEM
    windows, and if it fails, the socket is completely unavailable.  Which
    is wrong, as the yenta code is capable to allocate smaller windows.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 564601a5d12f93fdde04c6bc5b097b95e7752a46
Author: bob.picco <bob.picco@hp.com>
Date:   Thu Jun 30 09:52:00 2005 -0700

    [IA64] memory-less-nodes repost
    
    I reworked how nodes with only CPUs are treated.  The patch below seems
    simpler to me and has eliminated the complicated routine
    reassign_cpu_only_nodes.  There isn't any longer the requirement
    to modify ACPI NUMA information which was in large part the
    complexity introduced in reassign_cpu_only_nodes.
    
    This patch will produce a different number of nodes. For example,
    reassign_cpu_only_nodes would reduce two CPUonly nodes and one memory node
    configuration to one memory+CPUs node configuration.  This patch
    doesn't change the number of nodes which means the user will see three.  Two
    nodes without memory and one node with all the memory.
    
    While doing this patch, I noticed that early_nr_phys_cpus_node isn't serving
    any useful purpose.  It is called once in find_pernode_space but the value
    isn't used to computer pernode space.
    
    Signed-off-by: bob.picco <bob.picco@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit af25e94d4dcfb9608846242fabdd4e6014e5c9f0
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Jul 1 23:27:00 2005 -0700

    [IA64] Make ia64 die() preempt safe
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e3e01d6005ab4b0877f1fb3efef7f5b745e743be
Author: Eddie C. Dost <ecd@brainaid.de>
Date:   Wed Jul 6 15:41:54 2005 -0700

    [SPARC64]: Fix enable_dma() in asm-sparc64/parport.h
    
    Call ebus_dma_enable() before calling ebus_dma_request(), otherwise
    ebus_dma_request() returns -EINVAL and enable_dma() calls BUG()...
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d7495330be2fd88ab939fa5080d3ca9f64368c2
Author: Eddie C. Dost <ecd@brainaid.de>
Date:   Wed Jul 6 15:41:17 2005 -0700

    [DVB]: Do not include <linux/irq.h> from drivers.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 12cf649f417c68b6bdd2a3b4ed97113159c6029e
Author: Eddie C. Dost <ecd@brainaid.de>
Date:   Wed Jul 6 15:40:21 2005 -0700

    [SPARC64]: Fix set_intr_affinity()
    
    Do not cat bucket->irq_info to struct irqaction * directly,
    but go through struct irq_desc *.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 107177410b754b597028e430725bc3b316936b6b
Merge: 07bbeaf... 450008b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 6 15:39:15 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 90cdba648c5edf0ccabdadfc6e61f40c04e8bb00
Author: Eddie C. Dost <ecd@brainaid.de>
Date:   Wed Jul 6 15:37:58 2005 -0700

    [SPARC]: Fix "Eddie C. Dost" e-mail address
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 67d340f440f389e9d56201fb7c7aaa92f262feb1
Merge: 2ba3e3e... 159f597...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jul 6 15:35:18 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 2ba3e3e65cf182436757ba13ea8d564e2950fb56
Author: Keith Owens <kaos@sgi.com>
Date:   Thu Jun 30 22:53:00 2005 -0700

    [IA64] restore_sigcontext is not preempt safe
    
    restore_sigcontext calls ia64_set_local_fpu_owner() which requires that
    preempt be disabled.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7fe4c1b16854f0440939c62b8102cbf5c75e7cdc
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 15:30:25 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver - PREEMPT/pcibus_info fix
    
    This patch fixes an issue with the PROM and a kernel running with
    CONFIG_PREEMPT enabled.  When CONFIG_PREEMPT is enabled, the size of a
    spinlock_t changes -- resulting in the PROM writing to an incorrect location.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6f354b014b51716166f13f68b29212d3c44ed2c4
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 15:29:53 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver - SN Hotplug Driver code
    
    This patch is the SGI hotplug driver and additional changes required for
    the driver.  These modifications include changes to the SN io_init.c code
    for memory management, the inclusion of new SAL calls to enable and disable
    PCI slots, and a hotplug-style driver.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 283c7f6ac6adb57e7dd13cdbc8d60b6ea4de6faf
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 15:29:13 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver - new SN PROM version code
    
    This patch is a rewrite of the code to check the PROM version.  The current
    code has some deficiences in the way PROM comparisons were made.  The minimum
    value of PROM that will boot has also been changed to 4.04.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e07d01e0aeba905aeca6e0ae612943417d396a0f
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 15:28:40 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver - pci_find_next_bus export
    
    The pci_find_next_bus function is listed as being exported to drivers.  It is
    not EXPORT_SYMBOL'd.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c13cf3714fc84ad2fd65771aa08e47c95a9f26ef
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 15:26:51 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver: moving of header files
    
    This patch moves header files out of the arch/ia64/sn directories and into
    include/asm-ia64/sn.  These files were being included by other subsystems
    and should be under include/asm-ia64/sn.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 450008b5a62bb09445ae05c4d01d510386c9435d
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Jul 6 23:06:05 2005 +0100

    [PATCH] ARM: 2792/1: IXP4xx iomap API implementation
    
    Patch from Deepak Saxena
    
    This patch implements the iomap API for Intel IXP4xx NPU systems.
    We need to implement our own version of the API functions b/c of the
    PCI hostbridge does not provide the capability to map PCI I/O space
    into the CPU's physical memory space. In addition, if a system has
    more than 64M of PCI memory mapped BARs, PCI memory must also be
    accessed indirectly.  This patch changes the assignment of PCI I/O
    resources to fall into to 0x0000:0xffff range so that we can trap
    I/O areas in our ioread/iowrite macros.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7bc7fc50ce272d9a68f8e11707cfc2cc94f4e8f5
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Wed Jul 6 23:06:05 2005 +0100

    [PATCH] ARM: 2791/1: Add CRCs for aliased ARM symbols
    
    Patch from Todd Poynor
    
    Fix module versioning for 3 ARM symbols that do not have CRCs added,
    avoid "disagrees about version of symbol struct_module" errors at module
    load time.  From David Singleton.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bcaafbe4a14e3c9b5275b3986c7599f7c6c278e4
Author: Stefan Sorensen <ssoe@kirktelecom.com>
Date:   Wed Jul 6 23:06:04 2005 +0100

    [PATCH] ARM: 2790/1: Properly terminate plat_serial8250_port arrays on ixdp425 and
    	coyote
    
    Patch from Stefan Sorensen
    
    On the ixdp425 and coyote platforms, the plat_serial8250_port arrays are
    missing the terminating entry required by serial8250_probe.
    
    Signed-off-by: Stefan Sorensen <ssoe@kirktelecom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d1d890edace65721e9a7582545c943f67f500709
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Jul 6 23:06:03 2005 +0100

    [PATCH] ARM: 2789/1: Enable access to both CP10 and CP11 on ARMv6
    
    Patch from Catalin Marinas
    
    The VFP instructions trigger undefined exceptions because the access to
    CP11 is disabled (only CP10 is currently enabled by the kernel). The patch
    fixes this problem.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb4cb2cb9b0b14bdf2fc7125e099ed7e818cea42
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Wed Jul 6 14:59:44 2005 -0700

    [IA64] hotplug/ia64: SN Hotplug Driver: SN IRQ Fixes
    
    This patch  fixes the SN IRQ code such that cpu affinity and
    Hotplug can modify IRQ values.  The sn_irq_info structures are now locked
    using a RCU lock mechanism to avoid lock contention in the lost interrupt
    WAR code.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e1d5dea1dfbfe484358c40db7f233ed6b5605646
Author: Dag Arne Osvik <da@osvik.no>
Date:   Wed Jul 6 13:55:44 2005 -0700

    [CRYPTO] Add faster DES code from Dag Arne Osvik
    
    I've made a new implementation of DES to replace the old one in the kernel.
    It provides faster encryption on all tested processors apart from the original
    Pentium, and key setup is many times faster.
    
                                    Speed relative to old kernel implementation
    Processor       des_setkey      des_encrypt     des3_ede_setkey des3_ede_encrypt
    Pentium
    120Mhz          6.8             0.82            7.2             0.86
    Pentium III
    1.266Ghz        5.6             1.19            5.8             1.34
    Pentium M
    1.3Ghz          5.7             1.15            6.0             1.31
    Pentium 4
    2.266Ghz        5.8             1.24            6.0             1.40
    Pentium 4E
    3Ghz            5.4             1.27            5.5             1.48
    StrongARM 1110
    206Mhz          4.3             1.03            4.4             1.14
    Athlon XP
    2Ghz            7.8             1.44            8.1             1.61
    Athlon 64
    2Ghz            7.8             1.34            8.3             1.49
    
    Signed-off-by: Dag Arne Osvik <da@osvik.no>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a9df3597fec5472d0840fbfdc2a3fac5268f7d08
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:55:21 2005 -0700

    [CRYPTO] Remove unused iv field from context structure
    
    The iv field in des_ctx/des3_ede_ctx/serpent_ctx has never been used.
    This was noticed by Dag Arne Osvik.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2a892a236d03a6e985471a7e57d1c863de144c8
Author: Andreas Steinmetz <ast@domdv.de>
Date:   Wed Jul 6 13:55:00 2005 -0700

    [CRYPTO] Add x86_64 asm AES
    
    Implementation:
    ===============
    The encrypt/decrypt code is based on an x86 implementation I did a while
    ago which I never published. This unpublished implementation does
    include an assembler based key schedule and precomputed tables. For
    simplicity and best acceptance, however, I took Gladman's in-kernel code
    for table generation and key schedule for the kernel port of my
    assembler code and modified this code to produce the key schedule as
    required by my assembler implementation. File locations and Kconfig are
    kept similar to the i586 AES assembler implementation.
    It may seem a little bit strange to use 32 bit I/O and registers in the
    assembler implementation but this gives the best code size. My
    implementation takes one instruction more per round compared to
    Gladman's x86 assembler but it doesn't require any stack for local
    variables or saved registers and it is less serialized than Gladman's
    code.
    Note that all comparisons to Gladman's code were done after my code was
    implemented. I did only use FIPS PUB 197 for the implementation so my
    implementation is independent work.
    If anybody has a better assembler solution for x86_64 I'll be pleased to
    have my code replaced with the better solution.
    
    Testing:
    ========
    The implementation passes the in-kernel crypto testing module and I'm
    running it without any problems on my laptop where it is mainly used for
    dm-crypt.
    
    Microbenchmark:
    ===============
    The microbenchmark was done in userspace with similar compile flags as
    used during kernel compile.
    Encrypt/decrypt is about 35% faster than the generic C implementation.
    As the generic C as well as my assembler implementation are both table
    I don't really expect that there is much room for further
    improvements though I'll be glad to be corrected here.
    The key schedule is about 5% slower than the generic C implementation.
    This is due to the fact that some more work has to be done in the key
    schedule routine to fit the schedule to the assembler implementation.
    
    Code Size:
    ==========
    Encrypt and decrypt are together about 2.1 Kbytes smaller than the
    generic C implementation which is important with regard to L1 cache
    usage. The key schedule routine is about 100 bytes larger than the
    generic C implementation.
    
    Data Size:
    ==========
    There's no difference in data size requirements between the assembler
    implementation and the generic C implementation.
    
    License:
    ========
    Gladmans's code is dual BSD/GPL whereas my assembler code is GPLv2 only
    (I'm  not going to change the license for my code). So I had to change
    the module license for the x86_64 aes module from 'Dual BSD/GPL' to
    'GPL' to reflect the most restrictive license within the module.
    
    Signed-off-by: Andreas Steinmetz <ast@domdv.de>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a61cc44812ff94793987bf43b70a3d9bc64a6820
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Wed Jul 6 13:54:31 2005 -0700

    [CRYPTO] Add null short circuit to crypto_free_tfm
    
    As far as I'm aware there's a general concensus that functions that are
    responsible for freeing resources should be able to cope with being passed
    a NULL pointer. This makes sense as it removes the need for all callers to
    check for NULL, thus elliminating the bugs that happen when some forget
    (safer to just check centrally in the freeing function) and it also makes
    for smaller code all over due to the lack of all those NULL checks.
    This patch makes it safe to pass the crypto_free_tfm() function a NULL
    pointer. Once this patch is applied we can start removing the NULL checks
    from the callers.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 476df259cd577e20379b02a7f7ffd086ea925a83
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:54:09 2005 -0700

    [CRYPTO] Update IV correctly for Padlock CBC encryption
    
    When the Padlock does CBC encryption, the memory pointed to by EAX is
    not updated at all.  Instead, it updates the value of EAX by pointing
    it to the last block in the output.  Therefore to maintain the correct
    semantics we need to copy the IV.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 915e8561d559abba1b81934e31e54a3f850fa7bf
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:53:47 2005 -0700

    [CRYPTO] Handle unaligned iv from encrypt_iv/decrypt_iv
    
    Even though cit_iv is now always aligned, the user can still supply an
    unaligned iv through crypto_cipher_encrypt_iv/crypto_cipher_decrypt_iv.
    This patch will check the alignment of the user-supplied iv and copy
    it if necessary.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fbdae9f3e7fb57c07cb0d973f113eb25da2e8ff2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:53:29 2005 -0700

    [CRYPTO] Ensure cit_iv is aligned correctly
    
    This patch ensures that cit_iv is aligned according to cra_alignmask
    by allocating it as part of the tfm structure.  As a side effect the
    crypto layer will also guarantee that the tfm ctx area has enough space
    to be aligned by cra_alignmask.  This allows us to remove the extra
    space reservation from the Padlock driver.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 176c3652c544b6f8d4bb1984c58c10080f45dbf0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 6 13:53:09 2005 -0700

    [CRYPTO] Make crypto_alg_lookup static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 28e8c3ad9464de54a632f00ab3df88fa5f4652d1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:52:43 2005 -0700

    [PADLOCK] Implement multi-block operations
    
    By operating on multiple blocks at once, we expect to extract more
    performance out of the VIA Padlock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6789b2dc455b90efc9c88886c9366adc9abb7347
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:52:27 2005 -0700

    [PADLOCK] Move fast path work into aes_set_key and upper layer
    
    Most of the work done aes_padlock can be done in aes_set_key.  This
    means that we only have to do it once when the key changes rather
    than every time we perform an encryption or decryption.
    
    This patch also sets cra_alignmask to let the upper layer ensure
    that the buffers fed to us are aligned correctly.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95477377995aefa2ec1654a9a3777bd57ea99146
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:52:09 2005 -0700

    [CRYPTO] Add alignmask for low-level cipher implementations
    
    The VIA Padlock device requires the input and output buffers to
    be aligned on 16-byte boundaries.  This patch adds the alignmask
    attribute for low-level cipher implementations to indicate their
    alignment requirements.
    
    The mid-level crypt() function will copy the input/output buffers
    if they are not aligned correctly before they are passed to the
    low-level implementation.
    
    Strictly speaking, some of the software implementations require
    the buffers to be aligned on 4-byte boundaries as they do 32-bit
    loads.  However, it is not clear whether it is better to copy
    the buffers or pay the penalty for unaligned loads/stores.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 40725181b74be6b0e3bdc8c05bd1e0b9873ec5cc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:51:52 2005 -0700

    [CRYPTO] Add support for low-level multi-block operations
    
    This patch adds hooks for cipher algorithms to implement multi-block
    ECB/CBC operations directly.  This is expected to provide significant
    performance boots to the VIA Padlock.
    
    It could also be used for improving software implementations such as
    AES where operating on multiple blocks at a time may enable certain
    optimisations.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c774e93e2152d0be2612739418689e6e6400f4eb
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 6 13:51:31 2005 -0700

    [CRYPTO] Add plumbing for multi-block operations
    
    The VIA Padlock device is able to perform much better when multiple
    blocks are fed to it at once.  As this device offers an exceptional
    throughput rate it is worthwhile to optimise the infrastructure
    specifically for it.
    
    We shift the existing page-sized fast path down to the CBC/ECB functions.
    We can then replace the CBC/ECB functions with functions provided by the
    underlying algorithm that performs the multi-block operations.
    
    As a side-effect this improves the performance of large cipher operations
    for all existing algorithm implementations.  I've measured the gain to be
    around 5% for 3DES and 15% for AES.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8279dd748f9704b811e528b31304e2fab026abc5
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Wed Jul 6 13:51:00 2005 -0700

    [CRYPTO] Don't check for NULL before kfree()
    
    Checking a pointer for NULL before calling kfree() on it is redundant.
    This patch removes such checks from crypto/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb8d82a865b1ff601fad8293cd6a2a1b1908545b
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Wed Jul 6 21:05:10 2005 +0100

    [MTD] NAND s3c2410: Add missing NULL pointer check
    
    Fix OOPs if there was no platform set information passed
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 07bbeaf12310263d808b1958f8413b95f98786ea
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 6 13:05:50 2005 -0700

    ieee1394: fix broken signed char assumption.
    
    "ack_code" is assigned (and tested against) negative numbers, but was
    declared as "char".  Which only works if "char" is signed - which it
    necessarily isn't.
    
    So make that signedness assumption specific.

commit 184f6eb8c46afc2a4aa6cb7c51ebc423c36d9c9d
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 6 15:45:09 2005 -0400

    [PATCH] openfirmware: implement hotplug for macio devices
    
    This adds the hotplug routine for generating hotplug events when devices
    are seen on the macio bus.  It uses the attributed created by the sysfs
    nodes to generate the hotplug environment vars for userspace.
    
    Since the characters allowed inside the 'compatible' field are NUL
    terminated, they are exported as individual OF_COMPATIBLE_# variables,
    with OF_COMPATIBLE_N maintaining a count of how many there are.
    
    In order for hotplug to work with macio devices, patches to
    module-init-tools and hotplug must be applied.  Those patches are
    available at:
    
    ftp://ftp.suse.com/pub/people/jeffm/linux/macio-hotplug/
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5bf5b6786ccfc9e0c8801291f463d92c8e0b423
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 6 15:26:27 2005 -0400

    [PATCH] openfirmware: add sysfs nodes for open firmware devices
    
    This adds sysfs nodes that the hotplug userspace can use to load the
    appropriate modules.
    
    In order for hotplug to work with macio devices, patches to
    module-init-tools and hotplug must be applied.  Those patches are
    available at:
    
     ftp://ftp.suse.com/pub/people/jeffm/linux/macio-hotplug/
    
    Changes: The previous versions were built on 2.6.12. 2.6.13-rcX introduced
             a device_attribute parameter to the show functions. Since that
             parameter was treated as the output buffer, memory corruption would
             result, causing Oopsen very quickly.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e6557722e69840506eb8bc5a1edcdb4e447a917
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 6 15:44:41 2005 -0400

    [PATCH] openfirmware: generate device table for userspace
    
    This converts the usage of struct of_match to struct of_device_id,
    similar to pci_device_id.  This allows a device table to be generated,
    which can be parsed by depmod(8) to generate a map file for module
    loading.
    
    In order for hotplug to work with macio devices, patches to
    module-init-tools and hotplug must be applied.  Those patches are
    available at:
    
     ftp://ftp.suse.com/pub/people/jeffm/linux/macio-hotplug/
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 159f597a8bd0f1d7650d5e580c93a2666c9c26d1
Author: Dave Jones <davej@redhat.com>
Date:   Wed Jul 6 15:29:09 2005 -0400

    [PATCH] Fix bt87x.c build problem for real
    
    Just the declaration fix wasn't enough to fix things in bt78x.c
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83b78bd2d31f12d7d9317d9802a1996a7bd8a6f2
Author: Christoph Lameter <christoph@lameter.com>
Date:   Wed Jul 6 10:47:07 2005 -0700

    [PATCH] Fix broken kmalloc_node in rc1/rc2
    
    This patch used to be in Andrew's tree before the NUMA slab allocator went
    in. Either this patch or the NUMA slab allocator is needed in order for
    kmalloc_node to work correctly.
    
    pcibus_to_node may be used to generate the node information passed to
    kmalloc_node. pcibus_to_node returns -1 if it was not able to determine
    on which node a pcibus is located. For that case kmalloc_node must
    work like kmalloc.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3539219c9ea20ebf6a5ea3cc534f423a3607c41
Merge: 6430a8d... a18bcb7...
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed Jul 6 15:43:18 2005 +0100

    Merge with rsync://fileserver/linux
    
    Update to 2.6.12-rc3

commit b4634484815e1879512a23e4f59eef648135c30a
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jul 6 08:51:03 2005 -0700

    [PATCH] Fix bt87x.c build problem
    
    Missing forward declaration
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6430a8def12edebc1c9c7c2621d33ca0e8653c33
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed Jul 6 15:43:18 2005 +0100

    [JFFS2] Simplify the tree insert code.
    
    It isn't _normal_ that we allow key collision in rbtrees,
    but it does not matter as long as the two nodes with the same
    version are together.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3d3c2ae1101c1f2dff7e2f9d514769779dbd2737
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jul 6 09:09:38 2005 -0700

    [PATCH] PCI: fix !CONFIG_HOTPLUG pci build problem
    
    Here's a patch to fix the build issue when CONFIG_HOTPLUG is not enabled
    in 2.6.13-rc2.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 265489f01d8c05f7aae174651a98854af090efc0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Jul 6 13:13:13 2005 +0100

    [JFFS2] Remove compatibilty cruft for ancient kernels
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9dee7503ce3fc38911b9873216619190cf688128
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Jul 5 22:03:10 2005 +0100

    [JFFS2] Optimise jffs2_add_tn_to_list
    
    Use an rbtree instead of a simple linked list. We were wasting
    an amazing amount of time in jffs2_add_tn_to_list().
    Thanks to Artem Bityuckiy and Jarkko Jlavinen  for noticing.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 10c96f2ec37f5369a785cf8c5a065a15e323c743
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Sat Jul 2 02:53:28 2005 +0100

    [MTD] NOR flash map driver for TI OMAP boards.
    
    From: David Brownell, Jian Zhang <jzhang@ti.com>, Tony Lindgren
    <tony@atomide.com> and others.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit cbec19aeb3a3bfafe1d38f6efbea6a7023d31cb9
Author: Nico Pitre <nico@cam.org>
Date:   Fri Jul 1 23:55:24 2005 +0100

    [MTD] Add mapping driver for Intel PXA27x Mainstone board flash.
    
    From: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ba9fb37ba07219fa251edbab1a50fdc7b33da5fa
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Wed Jul 6 11:40:12 2005 +0200

    [MTD] NAND: Remove unmaintained tx49xx board drivers
    
    The drivers are unmaintained since long and reference include files
    which are not available in the kernel. Original author is not longer
    responsible and no new maintainer showed up within 3 month.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0c80336e5e81846fcb028d5a677794f08201fa1c
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Wed Jul 6 11:28:27 2005 +0200

    [MTD] NAND: sharpsl.c set correct file permissions
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a18bcb7450840f07a772a45229de4811d930f461
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 5 20:46:33 2005 -0700

    Linux v2.6.13-rc3

commit fe0c9f58779988e769da544d54b660c76506e78f
Merge: 6772926... fef43da...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 5 20:37:09 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit fef43da4e4341697a682f5aae1d5d428e840bc61
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 19:45:24 2005 -0700

    [SPARC64]: Fix UltraSPARC-III fallout from membar changes.
    
    The membar changes made the size of __cheetah_flush_tlb_pending
    grow by one instruction, but the boot-time code patching was
    not updated to match.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6772926bef3c9f0ec761b39e5702535471fff70b
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Tue Jul 5 18:54:50 2005 -0700

    [PATCH] kprobes: fix namespace problem and sparc64 build
    
    The following renames arch_init, a kprobes function for performing any
    architecture specific initialization, to arch_init_kprobes in order to
    cleanup the namespace.
    
    Also, this patch adds arch_init_kprobes to sparc64 to fix the sparc64 kprobes
    build from the last return probe patch.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b1294f928d9396e45f62b1c306ac8bf9fae036b
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Tue Jul 5 18:54:45 2005 -0700

    [PATCH] ppc32: explicitly disable 440GP IRQ compatibility mode in 440GX setup
    
    Add explicit disabling of 440GP IRQ compatibility mode when configuring
    440GX interrupt controller.  This helps when board firmware for some reason
    uses this compatibility mode and leaves it enabled.  It breaks 440GX
    interrupt code because it assumes native 440GX IRQ mode.  People seems to
    be continuously bitten by this.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f326d22b8cc5bfebfa5b3f6a4066dc737def2234
Author: john stultz <johnstul@us.ibm.com>
Date:   Tue Jul 5 18:54:44 2005 -0700

    [PATCH] ppc32: stop misusing NTP's time_offset value
    
    As part of my timeofday rework, I've been looking at the NTP code and I
    noticed that the PPC architecture is apparently misusing the NTP's
    time_offset (it is a terrible name!) value as some form of timezone offset.
    
    This could cause problems when time_offset changed by the NTP code.  This
    patch changes the PPC code so it uses a more clear local variable:
    timezone_offset.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6b6239f8e8e5bd9ba0192a854652abf14e28ce4
Author: Andrei Konovalov <akonovalov@ru.mvista.com>
Date:   Tue Jul 5 18:54:43 2005 -0700

    [PATCH] ppc32: add Freescale MPC885ADS board support
    
    This patch adds the Freescale MPC86xADS board support.  The supported
    devices are SMC UART and 10Mbit ethernet on SCC1.
    
    The manual for the board says that it "is compatible with the MPC8xxFADS
    for software point of view".  That's why this patch extends FADS instead of
    introducing a new platform.
    
    FEC is not supported as the "combined FCC/FEC ethernet driver" driver by
    Pantelis Antoniou should replace the current FEC driver.
    
    Signed-off-by: Gennadiy Kurtsman <gkurtsman@ru.mvista.com>
    Signed-off-by: Andrei Konovalov <akonovalov@ru.mvista.com>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5432ebb5f67f0be3264feb646f6f8f6c326899c9
Merge: d06e7a5... b2f5710...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 5 18:41:58 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit b2f571026594884e7a2a3f8bc6ad5c92e0703330
Author: Robert Olsson <Robert.Olsson@data.slu.se>
Date:   Tue Jul 5 16:38:26 2005 -0700

    [IPV4]: Add LC-Trie implementation notes
    
    Signed-off-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 908a75c17a9e5a888347c2c1d3572203d1b1c7db
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:43:58 2005 -0700

    [TCP]: Never TSO defer under periods of congestion.
    
    Congestion window recover after loss depends upon the fact
    that if we have a full MSS sized frame at the head of the
    send queue, we will send it.  TSO deferral can defeat the
    ACK clocking necessary to exit cleanly from recovery.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 63d886c96b2a580b1bf764de238ba3c63515b5ee
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 15:29:16 2005 -0700

    [PKT_SCHED]: Blackhole queueing discipline
    
    Useful in combination with classful qdiscs to drop or
    temporary disable certain flows, e.g. one could block
    specific ds flows with dsmark.
    
    Unlike the noop qdisc it can be controlled by the user and
    statistic accounting is done.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c1b4a7e69576d65efc31a8cea0714173c2841244
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:24:38 2005 -0700

    [TCP]: Move to new TSO segmenting scheme.
    
    Make TSO segment transmit size decisions at send time not earlier.
    
    The basic scheme is that we try to build as large a TSO frame as
    possible when pulling in the user data, but the size of the TSO frame
    output to the card is determined at transmit time.
    
    This is guided by tp->xmit_size_goal.  It is always set to a multiple
    of MSS and tells sendmsg/sendpage how large an SKB to try and build.
    
    Later, tcp_write_xmit() and tcp_push_one() chop up the packet if
    necessary and conditions warrant.  These routines can also decide to
    "defer" in order to wait for more ACKs to arrive and thus allow larger
    TSO frames to be emitted.
    
    A general observation is that TSO elongates the pipe, thus requiring a
    larger congestion window and larger buffering especially at the sender
    side.  Therefore, it is important that applications 1) get a large
    enough socket send buffer (this is accomplished by our dynamic send
    buffer expansion code) 2) do large enough writes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d9901df62fe4820aee86b49f1a074cdb5c6928e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:21:10 2005 -0700

    [TCP]: Break out send buffer expansion test.
    
    This makes it easier to understand, and allows easier
    tweaking of the heuristic later on.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cb83199a29dc0408423d6df432f28cc67fcadaf4
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:20:55 2005 -0700

    [TCP]: Do not call tcp_tso_acked() if no work to do.
    
    In tcp_clean_rtx_queue(), if the TSO packet is not even partially
    acked, do not waste time calling tcp_tso_acked().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a56476962e92a6c389a1a561274d4a27607b7b5f
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:20:41 2005 -0700

    [TCP]: Kill bogus comment above tcp_tso_acked().
    
    Everything stated there is out of data.  tcp_trim_skb()
    does adjust the available socket send buffer space and
    skb->truesize now.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b4e26f5ea0dbdd1e813c5571fb467022d8eb948a
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:20:27 2005 -0700

    [TCP]: Fix send-side cpu utiliziation regression.
    
    Only put user data purely to pages when doing TSO.
    
    The extra page allocations cause two problems:
    
    1) Add the overhead of the page allocations themselves.
    2) Make us do small user copies when we get to the end
       of the TCP socket cache page.
    
    It is still beneficial to purely use pages for TSO,
    so we will do it for that case.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa93466bdfd901b926e033801f0b82b3eaa67be2
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:20:09 2005 -0700

    [TCP]: Eliminate redundant computations in tcp_write_xmit().
    
    tcp_snd_test() is run for every packet output by a single
    call to tcp_write_xmit(), but this is not necessary.
    
    For one, the congestion window space needs to only be
    calculated one time, then used throughout the duration
    of the loop.
    
    This cleanup also makes experimenting with different TSO
    packetization schemes much easier.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f4dd0a9438c73cbb1c240ece31390cf2c57294e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:19:54 2005 -0700

    [TCP]: Break out tcp_snd_test() into it's constituent parts.
    
    tcp_snd_test() does several different things, use inline
    functions to express this more clearly.
    
    1) It initializes the TSO count of SKB, if necessary.
    2) It performs the Nagle test.
    3) It makes sure the congestion window is adhered to.
    4) It makes sure SKB fits into the send window.
    
    This cleanup also sets things up so that things like the
    available packets in the congestion window does not need
    to be calculated multiple times by packet sending loops
    such as tcp_write_xmit().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 55c97f3e990c1ff63957c64f6cb10711a09fd70e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:19:38 2005 -0700

    [TCP]: Fix __tcp_push_pending_frames() 'nonagle' handling.
    
    'nonagle' should be passed to the tcp_snd_test() function
    as 'TCP_NAGLE_PUSH' if we are checking an SKB not at the
    tail of the write_queue.  This is because Nagle does not
    apply to such frames since we cannot possibly tack more
    data onto them.
    
    However, while doing this __tcp_push_pending_frames() makes
    all of the packets in the write_queue use this modified
    'nonagle' value.
    
    Fix the bug and simplify this function by just calling
    tcp_write_xmit() directly if sk_send_head is non-NULL.
    
    As a result, we can now make tcp_data_snd_check() just call
    tcp_push_pending_frames() instead of the specialized
    __tcp_data_snd_check().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2e2a59c93cc8ba39caa9011c2573f429e40ccd9
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:19:23 2005 -0700

    [TCP]: Fix redundant calculations of tcp_current_mss()
    
    tcp_write_xmit() uses tcp_current_mss(), but some of it's callers,
    namely __tcp_push_pending_frames(), already has this value available
    already.
    
    While we're here, fix the "cur_mss" argument to be "unsigned int"
    instead of plain "unsigned".
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92df7b518dcb113de8bc2494e3cd275ad887f12b
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:19:06 2005 -0700

    [TCP]: tcp_write_xmit() tabbing cleanup
    
    Put the main basic block of work at the top-level of
    tabbing, and mark the TCP_CLOSE test with unlikely().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a762a9800752f05fa8768bb0ac35d0e7f1bcfe7f
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:18:51 2005 -0700

    [TCP]: Kill extra cwnd validate in __tcp_push_pending_frames().
    
    The tcp_cwnd_validate() function should only be invoked
    if we actually send some frames, yet __tcp_push_pending_frames()
    will always invoke it.  tcp_write_xmit() does the call for us,
    so the call here can simply be removed.
    
    Also, tcp_write_xmit() can be marked static.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f44b527177d57ed382bfd93e1b55232465f6d058
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:18:34 2005 -0700

    [TCP]: Add missing skb_header_release() call to tcp_fragment().
    
    When we add any new packet to the TCP socket write queue,
    we must call skb_header_release() on it in order for the
    TSO sharing checks in the drivers to work.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84d3e7b9573291a1ea845bdd51b74bb484597661
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:18:18 2005 -0700

    [TCP]: Move __tcp_data_snd_check into tcp_output.c
    
    It reimplements portions of tcp_snd_check(), so it
    we move it to tcp_output.c we can consolidate it's
    logic much easier in a later change.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6302d1d78f77c2d4c8bd32b0afc2df7fdf5f281
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:18:03 2005 -0700

    [TCP]: Move send test logic out of net/tcp.h
    
    This just moves the code into tcp_output.c, no code logic changes are
    made by this patch.
    
    Using this as a baseline, we can begin to untangle the mess of
    comparisons for the Nagle test et al.  We will also be able to reduce
    all of the redundant computation that occurs when outputting data
    packets.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fc6415bcb0f58f03adb910e56d7e1df6368794e0
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:17:45 2005 -0700

    [TCP]: Fix quick-ack decrementing with TSO.
    
    On each packet output, we call tcp_dec_quickack_mode()
    if the ACK flag is set.  It drops tp->ack.quick until
    it hits zero, at which time we deflate the ATO value.
    
    When doing TSO, we are emitting multiple packets with
    ACK set, so we should decrement tp->ack.quick that many
    segments.
    
    Note that, unlike this case, tcp_enter_cwr() should not
    take the tcp_skb_pcount(skb) into consideration.  That
    function, one time, readjusts tp->snd_cwnd and moves
    into TCP_CA_CWR state.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c65f7f00c587828e3d50737805a78f74804972de
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 15:17:25 2005 -0700

    [TCP]: Simplify SKB data portion allocation with NETIF_F_SG.
    
    The ideal and most optimal layout for an SKB when doing
    scatter-gather is to put all the headers at skb->data, and
    all the user data in the page array.
    
    This makes SKB splitting and combining extremely simple,
    especially before a packet goes onto the wire the first
    time.
    
    So, when sk_stream_alloc_pskb() is given a zero size, make
    sure there is no skb_tailroom().  This is achieved by applying
    SKB_DATA_ALIGN() to the header length used here.
    
    Next, make select_size() in TCP output segmentation use a
    length of zero when NETIF_F_SG is true on the outgoing
    interface.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b8259d9ad1d0f8d0c5ea0e37bb15080b0bd395b5
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jul 5 15:12:04 2005 -0700

    [NET]: Remove __ARGS from include/net/slhc_vj.h
    
    I suspect "#define __ARGS(x) ()" was deprecated before I was born.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52609c0b56d7c8dfb6e16ec0a715adf8fcbdae36
Author: David Chau <ddcc@mit.edu>
Date:   Tue Jul 5 15:11:06 2005 -0700

    [NET]: improve readability of dev_set_promiscuity() in net/core/dev.c
    
    A trivial patch to improve the readability of dev_set_promiscuity()
    in net/core/dev.c. New code does exactly the same thing as original
    code.
    
    Signed-off-by: David Chau <ddcc@mit.edu>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc971dee6ece1fd0d431948924becd9c50e7b778
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jul 5 15:03:46 2005 -0700

    [SHAPER]: Switch to spinlocks.
    
    Dave, you were right and the sleeping locks in shaper were
    broken. Markus Kanet noticed this and also tested the patch below that
    switches locking to spinlocks.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f36895aa774cf4d1c3d68921e0209e796b66600
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Tue Jul 5 15:02:40 2005 -0700

    [IPV4]: More broken memory allocation fixes for fib_trie
    
    Below a patch to preallocate memory when doing resize of trie (inflate halve)
    If preallocations fails it just skips the resize of this tnode for this time.
    
    The oops we got when killing bgpd (with full routing) is now gone.
    Patrick memory patch is also used.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db1322b8012e1a8ad711c04813817328cff46718
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 15:01:25 2005 -0700

    [DECNET]: Fix memset overflow on 64bit archs while dumping decnet routing rules
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb1d23b02657f494dff295f6cdd1f29df30fa61e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Jul 5 15:00:32 2005 -0700

    [IPV4]: Bug fix in rt_check_expire()
    
    - rt_check_expire() fixes (an overflow occured if size of the hash
      was >= 65536)
    
    reminder of the bugfix:
    
    The rt_check_expire() has a serious problem on machines with large
    route caches, and a standard HZ value of 1000.
    
    With default values, ie ip_rt_gc_interval = 60*HZ = 60000 ;
    
    the loop count :
    
         for (t = ip_rt_gc_interval << rt_hash_log; t >= 0;
    
    
    overflows (t is a 31 bit value) as soon rt_hash_log is >= 16  (65536
    slots in route cache hash table).
    
    In this case, rt_check_expire() does nothing at all
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 424c4b70cc4ff3930ee36a2ef7b204e4d704fd26
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Jul 5 14:58:19 2005 -0700

    [IPV4]: Use the fancy alloc_large_system_hash() function for route hash table
    
    - rt hash table allocated using alloc_large_system_hash() function.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 22c047ccbc68fa8f3fa57f0e8f906479a062c426
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Jul 5 14:55:24 2005 -0700

    [NET]: Hashed spinlocks in net/ipv4/route.c
    
    - Locking abstraction
    - Spinlocks moved out of rt hash table : Less memory (50%) used by rt
      hash table. it's a win even on UP.
    - Sizing of spinlocks table depends on NR_CPUS
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f0e36f8cee8101604378085171c980d9cc71d779
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 5 14:44:55 2005 -0700

    [IPV4]: Handle large allocations in fib_trie
    
    Inflating a node a couple of times makes it exceed the 128k kmalloc limit.
    Use __get_free_pages for allocations > PAGE_SIZE, as in fib_hash.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93e266f600f4048fe7a2e8803abb9f8baff84aa7
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 14:43:19 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d244c892c8e23d6baba88af88f78f7201a224d39
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jul 5 14:42:33 2005 -0700

    [TG3]: support for ethtool -C
    
    Add support for ethtool -C with verification of user parameters.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e2ed4052aa662e7cfb22a1793b9d8158603be6d7
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jul 5 14:41:20 2005 -0700

    [IPV6]: Makes IPv6 rcv registration happen last during initialisation.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 30e224d76f34e041c30df66a4dcbeeb53556ea3f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jul 5 14:40:10 2005 -0700

    [IPV4]: Fix crash in ip_rcv while booting related to netconsole
    
    Makes IPv4 ip_rcv registration happen last in af_inet.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a31488ca4b8476a8dd301b21388631df52d05c5a
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jul 5 14:24:35 2005 -0700

    [SKGE]: Fix build on big-endian
    
    Missing PCI_REV_DESC define.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d06e7a56d91328267a96b1a4df4ede7529f829e8
Merge: 346fced... 864ae18...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 5 14:17:40 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 023e09a767a89bf1b8646307410852d93fd72f00
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 14:15:53 2005 -0700

    [PKT_SCHED]: Report rate estimator configuration errors during qdisc allocation
    
    Current behaviour is to not report an error if a rate
    estimator is created together with a qdisc and the
    configuration of the rate estimator is bogus. This leads
    to unexpected behaviour because the user is not notified.
    
    New behaviour is to report the error and let the whole
    qdisc creation operation fail so the user is able to fix
    his mistake.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d54b82fdf0ca79608f61448fb8ab92676487645
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 14:15:09 2005 -0700

    [PKT_SCHED]: Cleanup qdisc creation and alignment macros
    
    Adds qdisc_alloc() to share code between qdisc_create()
    and qdisc_create_dflt(). Hides the qdisc alignment behind
    macros and makes use of them.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e41a33e6ec20a0a6ac762629149e36cab5d4213f
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 14:14:30 2005 -0700

    [PKT_SCHED]: Move sch_generic.c prototypes to correct header file
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1cbb3380ef683f742876f48e3739b3df4ea9e168
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 14:13:41 2005 -0700

    [NET]: Reduce size of sk_buff by 4 bytes
    
    Reduce local_df to a bit field and ip_summed to a 2 bits
    field thus saving 13 bits. Move bit fields, packet type,
    and protocol into the spare area between the priority
    and the destructor. Saves 4 bytes on both, 32bit and
    64bit architectures.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e176fe8954a5239c24afe79b1001ba3c29511963
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Jul 5 14:12:44 2005 -0700

    [NET]: Remove unused security member in sk_buff
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3154e540e374bbfd62693d95bc8ed51da95efe75
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 5 14:10:40 2005 -0700

    [NET]: net/core/filter.c: make len cover the entire packet
    
    As suggested by Herbert Xu:
    
    Since we don't require anything to be in the linear packet range
    anymore make len cover the entire packet.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b05b2a49e430220876f8faa7e4778dc7497033c
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 5 14:10:21 2005 -0700

    [NET]: Consolidate common code in net/core/filter.c
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6935d46c2da64aa032a557374c95336e265cd7ef
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 5 14:08:57 2005 -0700

    [NET]: Remove redundant code in net/core/filter.c
    
    skb_header_pointer handles linear and non-linear data, no need to handle
    linear data again.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 55820ee2f8c767a2833b21bd365e5753f50bd8ce
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jul 5 14:08:10 2005 -0700

    [NET]: Fix signedness issues in net/core/filter.c
    
    This is the code to load packet data into a register:
    
                            k = fentry->k;
                            if (k < 0) {
    ...
                            } else {
                                    u32 _tmp, *p;
                                    p = skb_header_pointer(skb, k, 4, &_tmp);
                                    if (p != NULL) {
                                            A = ntohl(*p);
                                            continue;
                                    }
                            }
    
    skb_header_pointer checks if the requested data is within the
    linear area:
    
            int hlen = skb_headlen(skb);
    
            if (offset + len <= hlen)
                    return skb->data + offset;
    
    When offset is within [INT_MAX-len+1..INT_MAX] the addition will
    result in a negative number which is <= hlen.
    
    I couldn't trigger a crash on my AMD64 with 2GB of memory, but a
    coworker tried on his x86 machine and it crashed immediately.
    
    This patch fixes the check in skb_header_pointer to handle large
    positive offsets similar to skb_copy_bits. Invalid data can still
    be accessed using negative offsets (also similar to skb_copy_bits),
    anyone using negative offsets needs to verify them himself.
    
    Thanks to Thomas Vgtle <thomas.voegtle@coreworks.de> for verifying the
    problem by crashing his machine and providing me with an Oops.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 346fced899c7390e555cf90cd07d1e56b460d21b
Merge: 17af691... 43a6b76...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 5 11:35:58 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit f8eb321bee957b7464ae08839861a04cb0b51bbe
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Tue Jul 5 01:03:06 2005 +0200

    [MTD] cfi_cmdset_0002: Remove bogus include
    
    Including asm/hardware.h has to be done in linux/mtd/xip.h. Otherwise
    it breaks allyes compiles.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 864ae180074931f3a28c84ea85aa8cfeca18bc4f
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 4 15:58:19 2005 -0700

    [SPARC64]: Fix IRQ retry interval timer value on sparc64 PCI controllers.
    
    Use '5' instead of 'infinity'.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9fba62a59cf1407cd5495f6c61d22d169ca1553f
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 4 14:53:33 2005 -0700

    [SPARC64]: Small Schizo PCI controller programming tweaks.
    
    Use macro instead of magic value for Tomatillo discard-
    timeout interrupt enable register bit.
    
    Leave OBP programming PTO value unless Tomatillo and
    version >= 0x2.
    
    If no-bus-parking property is present, explicitly clear
    PCICTRL_PARK bit.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb6743f4f0aed5c1f09fa77cd8d3973c31792f4f
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 4 13:26:04 2005 -0700

    [SPARC64]: Do proper DMA IRQ syncing on Tomatillo
    
    This was the main impetus behind adding the PCI IRQ shim.
    
    In order to properly order DMA writes wrt. interrupts, you have to
    write to a PCI controller register, then poll for that bit clearing.
    There is one bit for each interrupt source, and setting this register
    bit tells Tomatillo to drain all pending DMA from that device.
    
    Furthermore, Tomatillo's with revision less than 4 require us to do a
    block store due to some memory transaction ordering issues it has on
    JBUS.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 088dd1f81b3577c17c4c4381696bf2105ea0e43a
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 4 13:24:38 2005 -0700

    [SPARC64]: Add support for IRQ pre-handlers.
    
    This allows a PCI controller to shim into IRQ delivery
    so that DMA queues can be drained, if necessary.
    
    If some bus specific code needs to run before an IRQ
    handler is invoked, the bus driver simply needs to setup
    the function pointer in bucket->irq_info->pre_handler and
    the two args bucket->irq_info->pre_handler_arg[12].
    
    The Schizo PCI driver is converted over to use a pre-handler
    for the DMA write-sync processing it needs when a device
    is behind a PCI->PCI bus deeper than the top-level APB
    bridges.
    
    While we're here, clean up all of the action allocation
    and handling.  Now, we allocate the irqaction as part of
    the bucket->irq_info area.  There is an array of 4 irqaction
    (for PCI irq sharing) and a bitmask saying which entries
    are active.
    
    The bucket->irq_info is allocated at build_irq() time, not
    at request_irq() time.  This simplifies request_irq() and
    free_irq() tremendously.
    
    The SMP dynamic IRQ retargetting code got removed in this
    change too.  It was disabled for a few months now, and we
    can resurrect it in the future if we want.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 06326e40b7c66477d4a460bfc23c951f7b39f191
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 4 13:24:14 2005 -0700

    [SPARC]: bpp: remove sleep_on usage
    
    Use schedule_timeout() instead of sleep_on + timer.  Totally untested
    due to lack of hardware, but the changes are rather trivial.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e7270dec080002d8aa18256c756af6c32331ef48
Author: Raphael Assenat <raph@raphnet.net>
Date:   Mon Jul 4 13:23:45 2005 -0700

    [SPARC64/COMPAT]: Add some compat ioctl for ppdev
    
    The following patch adds some ioctls to include/linux/compat_ioctl.h
    to allow using ppdev from the 32 bit user space on sparc64.
    
    This patch also adds the PPDEV option in the sparc64 menu, near Parallel
    printer support in the 'General machine setup' submenu.
    
    All those ioctls seem to be compatible, since (correct me if I'm wrong)
    they dont use the 'long' type. See include/linux/ppdev.h.
    
    The application I used to test the new ioctls only used the following:
    PPEXCL
    PPCLAIM
    PPNEGOT
    PPGETMODES
    PPRCONTROL
    PPWCONTROL
    PPDATADIR
    PPWDATA
    PPRDATA
    
    But I beleive that the other ioctls will work fine.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a7a882420d378b59542a048075e40428c771a12
Author: Coywolf Qi Hunt <coywolf@sosdg.org>
Date:   Mon Jul 4 12:15:28 2005 -0500

    [MTD] mtdchar: Return the real error code when create_class() failed
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@sosdg.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 07929dcb963786512c760dd3ecd148d89295e7e5
Merge: c2d9b83... 19f7241...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Jul 4 14:14:42 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git.

commit 17af691cd19765b782d891fc50c1568d0f1276b3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 4 13:02:46 2005 +0100

    [PATCH] ARM: Fix new-ABI layout of struct stat64
    
    Add __attribute__((packed)) to ensure that the stat64 structure is
    correctly laid out no matter which ABI the kernel is compiled for.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 68070bdeeca7b7af6a42c0b3e5b1247e83c22ff9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 4 10:44:34 2005 +0100

    [PATCH] ARM: Fix non-standard PXA io_pg_offst initialisers
    
    These didn't match my sed expression correctly, fix them up manually.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f9bd6ea446946b97208f9e1528eb5f9ef8f931cb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 4 10:43:36 2005 +0100

    [PATCH] ARM: Change 'param_offset' to 'boot_params'
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 19f7241a3b087bbf4dd107c979608fdb56c83a09
Merge: 08ab8c2... 0d670b4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 3 14:39:33 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 08ab8c20316d6189a16b8101544a3e32b4c75e49
Merge: 10e047b... 976ecd1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 3 14:37:09 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 976ecd12b8144d066a23fe97c6fbfc1ac8470af7
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 3 21:05:45 2005 +0100

    [PATCH] Serial: Fix console port spinlock initialisation
    
    Initialise the spinlock for port being used by the console early, but
    don't re-initialise it again later.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0d670b413f042eccdffc45bafb9840244752707f
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Sun Jul 3 17:53:25 2005 +0100

    [PATCH] ARM: 2784/1: Fix the block cache flush operation range
    
    Patch from Catalin Marinas
    
    The range for the ARMv6 block cache operations is inclusive but the
    kernel doesn't re-calculate the end address, causing a page fault when
    used (this only happens with support for cache aliasing, otherwise the
    blk_flush_kern_dcache_page() is not called). This patch subtracts
    L1_CACHE_BYTES from the end address.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 75f631dc45c7327df26b82b9aea69376a306409c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jul 3 17:44:40 2005 +0100

    [PATCH] ARM: 2785/1: S3C24XX - serial calls request_irq() with IRQs disabled
    
    Patch from Ben Dooks
    
    The request_irq() function is called by s3c24xx uart driver with
    the local IRQs disabled. The request_irq() function can allocate
    memory via kmalloc(), and this may sleep causing a warning about
    sleeping in an invalid context.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e9dea0c65d2de6981356c055781fb99d7191b14e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 3 17:38:58 2005 +0100

    [PATCH] ARM: Remove machine description macros
    
    Remove the pointless machine description macros, favouring C99
    initialisers instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ace4e7185d565cab057139e8927659bd072bf25a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Jul 2 14:46:14 2005 -0500

    [SCSI] aic7xxx: fix boot hang with Fujitsu drives
    
    Apparently these are the only drives that try to negotiate IU and QAS
    at u160 speeds.  The aic7xxx driver can't cope with this.  The fix is
    to eliminate the IU and QAS setting routines.  I've #if 0'd them out,
    just in case we ever get the sequencer documentation out of Adaptec,
    since we'd then be able to fix the driver.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 10e047b40aafefef1fdc8ea4ea7837b9557a9400
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 3 17:44:10 2005 +0200

    [PATCH] drivers/ide/Makefile: kill dead CONFIG_BLK_DEV_IDE_TCQ entry
    
    This patch kills the dead CONFIG_BLK_DEV_IDE_TCQ entry.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 21e2c01dc3e38d466eda5871645878d2c3a33261
Author: Rob Punkunus <rpunkunus@nvidia.com>
Date:   Sun Jul 3 17:37:18 2005 +0200

    [PATCH] amd74xx: support MCP55 device IDs
    
    From: Rob Punkunus <rpunkunus@nvidia.com>
    
    Rob Punkunus recently submitted a patch to enable support for MCP51/MCP55 in
    the amd74xx driver. This patch was whitespace-corrupted and didn't apply to
    2.6.12 since MCP51 support was merged in the 2.6.12-rc series.
    
    Gentoo would like to support this hardware for our upcoming release media, so
    I fixed the patch, and here it is :)
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 13bbbf28fb914da6707aad44a073651f5c9d13a5
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Sun Jul 3 17:09:13 2005 +0200

    [PATCH] ide: fix line break in ide messages
    
    From: Denis Vlasenko <vda@ilport.com.ua>
    
    * printk("\n") is misplaced, resulting in stray empty line in kernel log
    * cleanups nerby: some back-to-back printks are combined, etc
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit f3718d3e135117f80de0ff219be91544baa75599
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:42:18 2005 +0200

    [PATCH] ide: hotplug mark __devinit via82cxxx.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit d6904ab66f74cb99793e3919fc589dd0163a7740
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:40:31 2005 +0200

    [PATCH] ide: hotplug mark __devinit triflex.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 97319630b21c2022a55d51a6cfbf53cbb84a2f42
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:38:51 2005 +0200

    [PATCH] ide: hotplug mark __devinit slc90e66.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 34a6224691e638dd36b393aa439d021a19578fcc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:36:56 2005 +0200

    [PATCH] ide: hotplug mark __devinit sl82c105.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 6a6e1b1cf41b0bf35fffbf18787e8d8f865b66d6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:35:07 2005 +0200

    [PATCH] ide: hotplug mark __devinit sc1200.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 9307145700e869dd410d565477f98377e93e9160
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:33:16 2005 +0200

    [PATCH] ide: hotplug mark __devinit opti621.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit c20530ed26e5b9e3b188b4088d0a5ab1d773a529
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:31:04 2005 +0200

    [PATCH] ide: hotplug mark __devinit ns87415.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit a380a8849f90ba81a5ff0c325fd5d8125c70b3bb
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:28:44 2005 +0200

    [PATCH] ide: hotplug mark __devinit it8172.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit ddbc9fb47252f9b6966bfe9b0aa27bfeaa585cca
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:25:46 2005 +0200

    [PATCH] ide: hotplug mark __devinit cy82c693.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 88de8e996f16b958721368ed9b4fd4e29cdb923e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:23:08 2005 +0200

    [PATCH] ide: hotplug mark __devinit cs5530.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit e895f926cd8b6d50a42cc985d470bdc9a70caeed
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:15:41 2005 +0200

    [PATCH] ide: hotplug mark __devinit amd74xx.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit c2f12589bfc4119f2c331ecea8cca4945ed48497
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 3 16:06:13 2005 +0200

    [PATCH] ide: hotplug mark __devinit alim15x3.c
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    mark the __init section __devinit.
    Splitted up from the Debian kernel patch.
    
    see the thread about the pci hotplug crash on a stratus box.
    http://marc.theaimsgroup.com/?l=linux-kernel&m=111930108613386&w=2
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit b4687ca42cb82a7821f682dde0310b16ce284770
Author: Linda Xie <lxiep@us.ibm.com>
Date:   Mon Jun 27 17:01:48 2005 -0500

    [SCSI] IBM VSCSI Client: sending client info to server
    
    Fix the problem in IBM VSCSI Client where the client doesn't send the
    information which is expected by the server.
    
    Signed-off-by: Linda Xie <lxie@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fc2b035d38c06a884cb521bb4a1e1183f5eaccf1
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jun 27 22:43:06 2005 +0200

    [SCSI] ifdef out broken fc4 EH code
    
    This code pokes deep into EH internals and duplicates scsi_error.c code
    wrongly.  It doesn't compile anymore in scsi-misc, so let's #if 0 out
    the code - the driver hasn't worked for more than five years anyway.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit eda912e34a0cc40ddd502b3f984e37ebb2b13a71
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:42 2005 -0400

    [SCSI] lpfc: Change version to 8.0.29.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c44ce1737438d20ac58e808897e3f8eb015c66d3
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:39 2005 -0400

    [SCSI] lpfc: Update copyright notices
    
    Update copyright notice text and include year 2005.
    
    Add Copyright notice for Christoph Hellwig to several files: lpfc.h
    lpfc_attr.c lpfc_els.c lpfc_hbadisc.c lpfc_init.c lpfc_mbox.c
    lpfc_mem.c lpfc_nportdisc.c lpfc_scsi.c lpfc_sli.c
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5542134f61157d0bbd4e392919cae811a88a3e81
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:36 2005 -0400

    [SCSI] lpfc: Remove $Id$ keyword strings.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2501322eee84763a07fd4a3eed81b63c1837e204
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:33 2005 -0400

    [SCSI] lpfc: Fix ADISC completion incorrectly putting initiators on mapped list
    
    Symptom - An unmapped node (initiator) that goes away in a situation
    such as cable pull, comes back as a mapped node.  Fix - On ADISC
    completion, put a list on the mapped list only if it is a FCP_TARGET.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5eb95af086f5d2e554bb119f3cb71f7ca38bfe85
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:30 2005 -0400

    [SCSI] lpfc: Add completion handler to the abort iocbs
    
    Add completion handler to the abort iocbs to close a hole where we
    could reuse an iotag.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1f679cafd2d02b7076e9045d9c4fb77ef8d059f2
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:27 2005 -0400

    [SCSI] lpfc: Fix LS_RJT never sent by lpfc_els_unsol_event()
    
    lpfc_els_unsol_event() checks rjt_err to determine is LS_RJT should be
    sent.  However, rjt_err was set to LSEXP_NOTHING_ELSE (which is 0) in
    cases where an LS_RJT should be sent, so rjt_err was never true.
    Change lpfc_els_unsol_event() to set rjt_err to 1 when LS_RJT should
    be sent.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 06325e7459b54fc924d00fe363068f6cbf284571
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:22 2005 -0400

    [SCSI] lpfc: Add LP6000 PCI ID
    
    Fix driver not seeing LP6000.  Fix: add PCI id to the pci_device_id
    table and a short description for the HBA in get_hba_model_desc().
    Also add a default clause to the switch statement that parses the
    various PCI ID's.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 564b2960833f8802ae2b7b7ad840f154647549c7
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:17 2005 -0400

    [SCSI] lpfc: Set max_sectors in host template
    
    Add max_sectors to the driver host template and initialize it with
    0xFFFF since the driver has no limitations on the size a transfer
    contained by a scsi command and that fits within the sg_tablesize
    provisioned by the driver.  This fixes a performance issue seen in
    some configurations.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 87f6eaffd732bc20b5a02e9f36b86f67310d8129
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:13 2005 -0400

    [SCSI] lpfc: Fix error loading on sparc
    
    Bug reported via SourceForge - lpfc does not load on sparc.  The lpfc
    driver must byteswap all FCP IOCBs to recover the data into cpu native
    format.
    
    Also correct issue of "iotag not found" messages
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit db468d108abc0bb348bcfc54b8e06145922fb6b1
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:08 2005 -0400

    [SCSI] lpfc: Fixes in mbox_timeout_handler
    
    Analysis:
    
    Timeout of READ_SPARM64 causes call to lpfc_mbox_timeout_handler which
    reads psli->mbox_active to determine the timeout mbox.  Timeout
    handler then NULL's psli->mbox_active and calls
    lpfc_mbx_cmpl_read_sparam(), which on timeout condition, calls
    link_down().  link_down() now calls disc_done() which calls
    mbox_timeout_hander() again since WORKER_MBOX_TMO is still set, which
    goes back to read psli->mbox_active which is already NULL'ed.
    
    Remove redundant if statement in lpfc_mbox_timeout_handler.  pmbox is
    assigned psli->mbox_active so there is no need to check if it actually
    equals psli->mbox_active.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6e8215e48865bda2e07c1c0633952e35fa3b170c
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:04 2005 -0400

    [SCSI] Fix issue where all hosts log nodev message for other initiators
    
    Fix issue where all hosts connected to SAN get spammed with nodev
    message when other initiators go away.  Display nodev message only
    when FC targets go away.  However this behavior will be overridden if
    LOG_DISCOVERY is set.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4cc2da1d84eeddb9e9259e61efd58691399434b2
Author: James Smart <James.Smart@Emulex.Com>
Date:   Sat Jun 25 10:34:00 2005 -0400

    [SCSI] lpfc: hgp/pgp cleanups
    
    From: Christoph Hellwig <hch@lst.de>:
    
     - rename PGP/HPH to lpfc_pgp/lpfc_hgp
     - use __le32 types for the members to start fixing sparse -Wbitwise
       issues
     - remove lpfc_sli.MBhostaddr, we can always use the pointer from
       SLI2_DESC directly
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1d6bebf2ecf92924492c491d9c3a72edba95f907
Merge: 86166f9... 3eee0d0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 2 10:39:09 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc

commit 86166f9846590fa46f8e24e9346d002e938a8b81
Merge: 44f8e1a... db57955...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 2 10:37:50 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 44f8e1a20cf3afe10a3744bd9317808a39a242bb
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 2 10:35:33 2005 -0700

    If ACPI doesn't find an irq listed, don't accept 0 as a valid PCI irq.
    
    That zero just means that nothing else found any irq information either.

commit beffbdc2211826b174c68307b1b48c93c05d7ded
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jul 1 23:54:30 2005 -0500

    Input: cannot refer to __exit from within __init.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 43a6b76050aa137c51d00eec91d67ac43ac3846e
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Mon Jun 20 14:29:25 2005 -0700

    [PATCH] gregkh-pci-pci-assign-unassigned-resources fix
    
    It seems that X86 architectures in general need the setup-bus.o
    not just those with HOTPLUG.  This avoids the following error on
    X86_NUMAQ and x86_64:
    
        arch/i386/pci/built-in.o(.init.text+0x15a6): In function `pcibios_init':
        : undefined reference to `pci_assign_unassigned_resources'
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5848f23d811acc1cb6c19a12e1341e0640a85d0e
Author: John W. Linville <linville@tuxdriver.com>
Date:   Fri Jul 1 14:07:28 2005 -0400

    [PATCH] pci: cleanup argument comments for pci_{save,restore}_state
    
    The buffer arguments have been removed from pci_{save,restore}_state.
    The comment blocks for those functions should reflect that.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c6e21e1683c2508a2b23588e1fc2e7bf6fc2549e
Author: Hannes Reinecke <hare@suse.de>
Date:   Tue Jun 28 14:57:10 2005 +0200

    [PATCH] PCI: Remove newline from pci MODALIAS variable
    
    the pci core sends out a hotplug event variable MODALIAS with a trailing
    newline. This is inconsistent with all other event variables and breaks
    some hotplug tools. This patch removes the said newline.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5823d100ae260d022b4dd5ec9cc0b85f0bf0d646
Author: long <tlnguyen@snoqualmie.dp.intel.com>
Date:   Wed Jun 22 09:09:54 2005 -0700

    [PATCH] PCI: acpi tg3 ethernet not coming back properly after S3 suspendon DellM70
    
    This patch, is based on kernel 2.6.12, provides a fix for PCIe
    port bus driver suspend/resume.
    
    Signed-off-by: T. Long Nguyen <tom.l.nguyen@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a00db371624e2e3718e5ab7d73bf364681098106
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jun 29 17:04:06 2005 +0200

    [PATCH] PCI: Add PCI quirk for SMBus on the Asus P4B-LX
    
    One more Asus motherboard requiring the SMBus quirk (P4B-LX). Original
    patch from Salah Coronya.
    
    Signed-off-by: Salah Coronya <salahx@yahoo.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 75865858971add95809c5c9cd35dc4cfba08e33b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 30 02:18:12 2005 -0700

    [PATCH] PCI: clean up dynamic pci id logic
    
    The dynamic pci id logic has been bothering me for a while, and now that
    I started to look into how to move some of this to the driver core, I
    thought it was time to clean it all up.
    
    It ends up making the code smaller, and easier to follow, and fixes a
    few bugs at the same time (dynamic ids were not being matched
    everywhere, and so could be missed on some call paths for new devices,
    semaphore not needed to be grabbed when adding a new id and calling the
    driver core, etc.)
    
    I also renamed the function pci_match_device() to pci_match_id() as
    that's what it really does.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 299de0343c7d18448a69c635378342e9214b14af
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Wed Jun 15 18:59:27 2005 +0400

    [PATCH] PCI: pci_assign_unassigned_resources() on x86
    
    - Add sanity check for io[port,mem]_resource in setup-bus.c. These
      resources look like "free" as they have no parents, but obviously
      we must not touch them.
    - In i386.c:pci_allocate_bus_resources(), if a bridge resource cannot be
      allocated for some reason, then clear its flags. This prevents any child
      allocations in this range, so the setup-bus code will work with a clean
      resource sub-tree.
    - i386.c:pcibios_enable_resources() doesn't enable bridges, as it checks
      only resources 0-5, which looks like a clear bug to me. I suspect it
      might break hotplug as well in some cases.
    
    From: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 90b54929b626c80056262d9d99b3f48522e404d0
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Tue Jun 7 04:07:02 2005 +0400

    [PATCH] PCI: handle subtractive decode pci-pci bridge better
    
    With the number of PCI bus resources increased to 8, we can
    handle the subtractive decode PCI-PCI bridge like a normal
    bridge, taking into account standard PCI-PCI bridge windows
    (resources 0-2). This helps to avoid problems with peer-to-peer DMA
    behind such bridges, poor performance for MMIO ranges outside bridge
    windows and prefetchable vs. non-prefetchable memory issues.
    
    To reflect the fact that such bridges do forward all addresses to
    the secondary bus (transparency), remaining bus resources 3-7 are
    linked to resources 0-4 of the primary bus. These resources will be
    used as fallback by resource management code if allocation from
    standard bridge windows fails for some reason.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Acked-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a03fa955576af50df80bec9127b46ef57e0877c0
Author: rajesh.shah@intel.com <rajesh.shah@intel.com>
Date:   Thu Jun 2 15:41:48 2005 -0700

    [PATCH] PCI: Increase the number of PCI bus resources
    
    This patch increases the number of resource pointers in the
    pci_bus structure. This is needed to store >4 resource ranges
    for host bridges and transparent PCI bridges. With this change,
    all PCI buses will have more resource pointers, but most PCI
    buses will only use the first 3 or 4, the remaining being NULL.
    The PCI core already deals with this correctly.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 26f674ae0e37190bf61c988e52911e4372fdb5f5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 2 15:41:48 2005 -0700

    [PATCH] PCI: Fix up PCI routing in parent bridge
    
    When the cardbus bridge is behind another bridge change the routing
    in the parent bridge for new cards.  This fixes Cardbus on various AMD64
    laptops.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a89a04f1ee21a7c1f4413f1ad7dcfac50ff9b63
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Fri Jul 1 16:46:26 2005 +0400

    [PATCH] alpha smp fix (part #2)
    
    This fixes the bug that caused BUG_ON(!irqs_disabled()) to trigger in
    run_posix_cpu_timers() on alpha/smp.  We didn't disable interrupts
    properly before calling smp_percpu_timer_interrupt().
    
    We *do* disable interrupts everywhere except this unfortunate
    smp_percpu_timer_interrupt().  Fixed thus.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e3815ba3a6d392fa9cfbf08208f64c06d9558c4
Author: Moore, Eric Dean <Eric.Moore@lsil.com>
Date:   Fri Jun 24 12:18:57 2005 -0600

    [SCSI] - mptfusion - convert to new change_queue_depth API
    
    Convert driver to use new change_queue_depth API.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    
    Fixed up rejections and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3eee0d03e33b0294eb3165c96f213a8c8ee461a8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 1 13:07:37 2005 +0100

    [PATCH] MMC: wbsd cleanups
    
    This patch contains the following possible cleanups:
    - make some needlessly global code static
    - remove the unneeded global function DBG_REG
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6e6293dd3d4372c114674266158053d049366a0d
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jul 1 12:13:55 2005 +0100

    [PATCH] MMC: wbsd delayed insertion
    
    Wait 0.5 seconds before scanning for cards after an insertion interrupt.
    The electrical connection needs this time to stabilise for some cards.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit db5795547694cf68388aaf8f59723e850f7466f6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Fri Jul 1 12:11:51 2005 +0100

    [PATCH] ARM: replace schedule_timeout() with msleep()
    
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected. Neither signals nor wait-queue events are
    important at this point in the code, I believe.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7b09cdac5af1e13ab4b30421ae5c4b7953c26841
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jul 1 12:02:59 2005 +0100

    [PATCH] MMC: Fix divdi3 reference in mmci.c
    
    Use do_div() instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c77b042700ae1fc4d661d7d62787899e755160d5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jul 1 11:56:55 2005 +0100

    [PATCH] ARM: Make the magic values in head.S more obvious
    
    Make the magic address values in head.S more obvious as to where
    they came from.  Wrap all debug code in CONFIG_DEBUG_LL.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e695f60454f665604fe1b6e473f25b098203965a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Jul 1 11:27:06 2005 +0100

    [PATCH] ARM: 2783/1: Remove omnimeter_defconfig as there is no kernel support
    
    Patch from Ben Dooks
    
    The omnimeter_defconfig does not define any machines and
    seems to have no other support in the current kernel.
    This patch removes the config file, as this is the only
    thing currently mentioning the ominmeter.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3e18a45abc5b20db2e34f02b87226ac2713bbb13
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Fri Jul 1 11:27:06 2005 +0100

    [PATCH] ARM: 2782/1: PXA27x MDREFR K0DB4 define
    
    Patch from Todd Poynor
    
    Add definition of K0DB4 SDCLK<0,3> divide-by-4 control/status bit in the
    MDREFR register for Intel XScale PXA27x.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 26705ca46bdf81113cc6729eb12b9eee2263bbfc
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Fri Jul 1 11:27:05 2005 +0100

    [PATCH] ARM: 2781/2: PXA27x Standby mode take 2
    
    Patch from Todd Poynor
    
    Add support for PXA27x Standby mode, a low-power mode that retains CPU
    and some peripheral state (the existing "sleep" mode is a power-power
    mode that retains less state). Activated via:
    echo -n standby > /sys/power/state
    From: David Burrage and Todd Poynor
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9bc7b38731dd1cc1635ab12f8de48866f603b06e
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Thu Jun 30 01:23:27 2005 +0100

    [MTD] mtdchar.c: Replace DEVFS by udev
    
    Switch from DEVFS to udev for dynamic creation of device nodes for mtd
    char devices.
    
    Creates a new LDM class "mtd" with writeable and read-only devices
    registered for each mtdchar device.
    
    From: Paolo Galtieri <pgaltieri@mvista.com>
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ef6689eff4b58273fed9e54293a3da983b321e9a
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 30 22:13:14 2005 -0700

    [PATCH] fatfs sectioning fix
    
    Fixup for the recent slab leak fix
    
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eaf05be039cf5adfba5b1846452ce89646110fdb
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Thu Jun 30 20:02:18 2005 +0400

    [PATCH] alpha smp fix
    
    As usual, the reason of this breakage is quite silly: in do_entIF, we
    are checking for PS == 0 to see whether it was a kernel BUG() or
    userspace trap.
    
    It works, unless BUG() happens in interrupt - PS is not 0 in kernel mode
    due to non-zero IPL, and the things get messed up horribly then.  In
    this particular case it was BUG_ON(!irqs_disabled()) triggered in
    run_posix_cpu_timers(), so we ended up shooting "current" with the
    bursts of one SIGTRAP and three SIGILLs on every timer tick.  ;-)

commit 62351cc38d3eaf3de0327054dd6ebc039f4da80d
Merge: d471cd4... 747aead...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 30 17:07:37 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit d471cd4787351c05d6be749475418ccea2720ef4
Merge: bd53d12... 44454bc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 30 17:04:54 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 747aead34de65c25765da79825ce2c08d8257b10
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Thu Jun 30 23:01:09 2005 +0100

    [PATCH] ARM: 2780/1: AFS partition length calculation fix
    
    Patch from Catalin Marinas
    
    This patch calculates the AFS partition length by expanding the image
    length information to the nearest erase block boundary. This
    eliminates the problems with JFFS2 erasing the footer.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44454bcdb90532b372c74e3546043d8a3a468939
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 30 22:41:22 2005 +0100

    [PATCH] Serial: Fix small CONFIG_SERIAL_8250_NR_UARTS
    
    If CONFIG_SERIAL_8250_NR_UARTS is smaller than the array size in
    asm/serial.h, we trampled on memory which wasn't ours.  Take our
    big boots away by limiting the number of ports initialised to the
    smaller of ...NR_UARTS and the array size.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bd53d1270f51c6cfb53b06c8f93fd42327871d6b
Merge: 12829dc... bf164c7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 30 09:04:36 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit abaf48a05a8f097654e746af2a5afb2ab95861a1
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Thu Jun 30 17:04:14 2005 +0100

    [PATCH] ARM: 2779/1: Fix the V bit setting for the ARM1020x CPUs
    
    Patch from Catalin Marinas
    
    This patch fixes the V bit setting for the ARM1020x processors. At
    reset, this bit is automatically set to the value of the HIVECSINIT
    input signal which just happened to be 1 but it is not mandatory.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c28a814f25d48f193565003223df0ae617796892
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Thu Jun 30 17:04:14 2005 +0100

    [PATCH] ARM: 2778/1: Add -mno-thumb-interwork to CFLAGS_ABI
    
    Patch from Catalin Marinas
    
    The new EABI gcc adds -mthumb-interwork by default, even if
    -mabi=apcs-gnu is passed. This causes a warning for every compiled C
    file when -march=armv4 is used. The patch adds -mno-thumb-interwork
    if the option is supported. This is also useful since we don't need
    any ARM/Thumb interworking in the kernel
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c19cb1df809dcf343dd1eb6fe60d53639dafcb8c
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Thu Jun 30 17:04:13 2005 +0100

    [PATCH] ARM: 2777/1: Fix broken comment arch/arm/mm/proc-arm1020.S
    
    Patch from Catalin Marinas
    
    This patch fixes a broken comment in the proc-arm1020.S file which
    prevents the file compilation
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 12829dcb10efc576c3739131a5d57fe7213632d9
Merge: c60e81e... 719d1cd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 30 08:48:56 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit c60e81ee1cac32dae1f9bf623dcb6b3b2bde8eab
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 30 02:59:06 2005 -0700

    [PATCH] reiserfs: handle_attrs() fix
    
    Fix a use-uninitialised bug.
    
    Cc: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cb681b9c7fff5cb35b5c05ba4f1b7e285e258fb
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Jun 30 02:59:05 2005 -0700

    [PATCH] freevxfs: minor cleanups
    
    This patch addresses the following minor issues:
    
      - Typo in printk
      - Redundant casts
      - Use C99 struct initializers instead of memset
      - Parenthesis around return value
      - Use inline instead of __inline__
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d2cc3b87b1694df72ab75cee8e12f8b369577ce
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Jun 30 02:59:05 2005 -0700

    [PATCH] freevxfs: remove 2.4 compatability
    
    This patch removes 2.4 compatability header from freevxfs.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba03bda81e160b2724451074cdcb597d14f7d7e0
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Jun 30 02:59:04 2005 -0700

    [PATCH] freevxfs: fix buffer_head leak
    
    - fix a buffer_head leak in vxfs_getfsh()
    
    - s/SLAB_KERNEL/GFP_KERNEL/
    
    - check sb_bread() return value
    
    - drop pointless buffer-mapped() test.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f220ab2a5162c35cca6993ea473937cfc962fce4
Author: Jay Lan <jlan@engr.sgi.com>
Date:   Thu Jun 30 02:59:03 2005 -0700

    [PATCH] Improper initrd failure message at boot time
    
    On system boot up, there was an failure reported to boot.msg:
    
         <5>Trying to move old root to /initrd ... failed
    
    According to initrd(4) man page, step #7 of BOOT-UP OPERATION
    is described as below:
              7. If the normal root file has directory /initrd, device
              /dev/ram0 is moved from  /  to  /initrd.   Otherwise  if
              directory  /initrd  does  not  exist device /dev/ram0 is
              unmounted.
    
    We got service calls from customers concerning about this failure message
    at boot time.  Many systems do not have /initrd and thus the message can be
    changed in the case of non-existing /initrd so that it does not sound like
    a failure of the system.
    
    Signed-off-by: Jay Lan <jlan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c71e22e4e4b4e7261f147635518d5634136c226
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 30 02:59:02 2005 -0700

    [PATCH] udf_find_entry() cleanup
    
    udf_find_entry can never be called with a NULL argument, so we shouldn't
    check for it.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 532a39a3754a3b8ce507414863023f8db21f9a7c
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Thu Jun 30 02:59:01 2005 -0700

    [PATCH] fat: fix slab cache leak
    
    This patch plugs a slab cache leak in fat module initialization.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Acked-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ec55a9bd365dfc78945bb8e6bf5d0fdf1d75ad0
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 30 02:59:00 2005 -0700

    [PATCH] xtensa: Fix asm macro
    
    Removed dead code in arch/xtensa/kernel/pci.c and use the pci_name() macro.
     Fixed an error in the delay asm macro: '1' is an invalid immediate value.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7d163f7666560c90b163907b9d96ec6207e0f6f
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 30 02:58:59 2005 -0700

    [PATCH] xtensa: Removed local copy of zlib and fixed O= support
    
    Removed an unnecessary local copy of zlib (sorry for the add'l traffic).
    Fixed 'O=' support (thanks to Jan Dittmer for pointing it out).  Some minor
    clean-ups in the make files.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82300bf479d7cdf87214b81ca5dc003bbc4f7e8f
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 30 02:58:58 2005 -0700

    [PATCH] xtensa: Added mm/Kconfig to get a flat memory layout
    
    Added 'mm/Kconfig' to the xtensa Kconfig file to get a flat memory layout.
    Fixed a typo in one of the help texts (thanks Geert for pointing it out)
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b0de927d9c9a72e42a4b581a897710f9ae5a6d1
Author: Chris Zankel <chris@zankel.net>
Date:   Thu Jun 30 02:58:57 2005 -0700

    [PATCH] xtensa: cleanups for errno and ipc.
    
    I noticed this because I was doing some more ipc cleanups and I did the
    original errno and ipc cleanups for other architectures, so it stuck out.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ee23b50f1541aacc3b975edae170a1b995b84f5
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 30 02:58:56 2005 -0700

    [PATCH] xtensa: use valid_signal()
    
    xtensa should use valid_signal() instead of testing _NSIG directly like
    everyone else.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 306e440daf5f40b195afd83d05dee89fa63189e7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 30 02:58:55 2005 -0700

    [PATCH] x86: i8253/i8259A lock cleanup
    
    Introduce proper declarations for i8253_lock and i8259A_lock.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcbda35ca7470bf0123a7ae685899776f67814b2
Author: Kumar Gala <galak@freescale.com>
Date:   Thu Jun 30 02:58:55 2005 -0700

    [PATCH] ppc32: Fix pointer check for MPC8540 ADS device
    
    Editor snafu in which the call to ppc_sys_get_pdata got inside the if check
    instead of before it.  Oops.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6931dfc9f3f81d148b7ed0ab3fd796f8b986a995
Author: Eric Paris <eparis@parisplace.org>
Date:   Thu Jun 30 02:58:51 2005 -0700

    [PATCH] selinux_sb_copy_data() should not require a whole page
    
    Currently selinux_sb_copy_data requires an entire page be allocated to
    *orig when the function is called.  This "requirement" is based on the fact
    that we call copy_page(in_save, nosec_save) and in_save = orig when the
    data is not FS_BINARY_MOUNTDATA.  This means that if a caller were to call
    do_kern_mount with only about 10 bytes of options, they would get passed
    here and then we would corrupt PAGE_SIZE - 10 bytes of memory (with all
    zeros.)
    
    Currently it appears all in kernel FS's use one page of data so this has
    not been a problem.  An out of kernel FS did just what is described above
    and it would almost always panic shortly after they tried to mount.  From
    looking else where in the kernel it is obvious that this string of data
    must always be null terminated.  (See example in do_mount where it always
    zeros the last byte.) Thus I suggest we use strcpy in place of copy_page.
    In this way we make sure the amount we copy is always less than or equal to
    the amount we received and since do_mount is zeroing the last byte this
    should be safe for all.
    
    Signed-off-by: Eric Paris <eparis@parisplace.org>
    Cc: Stephen Smalley <sds@epoch.ncsc.mil>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a936eb928c1a253c2e5d66b947688bdc55094a6
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Thu Jun 30 02:58:50 2005 -0700

    [PATCH] tpm: fix bug introduced by the /proc/misc
    
    In fixing the /proc/misc problem that was reported last week where the tpm
    module name was being obfuscated in /proc/misc I introduced a bug in the
    module unloading code.  This patch fixes the problem.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee93b43a05506667d771c4fb0c384301edd7d036
Author: Olaf Hering <olh@suse.de>
Date:   Thu Jun 30 02:58:49 2005 -0700

    [PATCH] ppc32: use correct register names in arch/ppc/kernel/relocate_kernel.S
    
    CONFIG_KEXEC=y doesnt work:
    
    arch/ppc/kernel/relocate_kernel.S:37: Error: unsupported relocation against SRR1
    arch/ppc/kernel/relocate_kernel.S:39: Error: unsupported relocation against SRR0
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ee24d9594ffb070261b70461f71c42913c663bb
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 30 02:58:48 2005 -0700

    [PATCH] s390: fix finish_arch_switch
    
    Commit 4866cde064afbb6c2a488c265e696879de616daa requires finish_arch_switch
    to have only one parameter instead of two.
    
    Also fix another compile error (double declaration of account_system_vtime)
    if CONFIG_VIRT_CPU_ACCOUNTING is not defined.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb05bfe4fbf031f95e392204efaa4da71c75b2e2
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jun 30 02:58:47 2005 -0700

    [PATCH] pcmcia: update Documentation
    
    As the information is now exported via sysfs, there's no need for an userspace
    tool any longer.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3704511b2ee8b01475ca7c171d62c682342fa38e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu Jun 30 02:58:47 2005 -0700

    [PATCH] pcmcia: fix modalias attribute in sysfs
    
    Fix up PCMCIA modalias file in sysfs
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41359dca9442b0c664336e3fcf3aaf70b6507b1d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 30 16:30:07 2005 +0100

    [PATCH] ARM: Acornfb: Don't claim IRQ fbcon for cursor
    
    The generic fbcon code tries to register and use the vsync IRQ for
    ARM platforms with acornfb, but forgets to disable its own cursor
    timer.  The result is a flickering flashing cursor.
    
    Remove the code from the fbcon core to register this platform
    private interrupt.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cfb0810eab39d1162f45b73fc96f45ab1cbcbe8b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 30 11:06:49 2005 +0100

    [PATCH] ARM: Don't try to send a signal to pid0
    
    If we receive an unrecognised abort during boot, don't try to
    send a signal to pid0, but instead report the current state.
    This leads to less confusing debug reports.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c2d9b8387bce8b4a0fd402fab7dc1319d11a418d
Merge: 2a322e4... 9b4311e...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Jun 30 09:52:20 2005 +0100

    Automerge with /usr/src/ntfs-2.6.git.

commit bf164c790deb79b18faf304b0763e44a02c79f90
Merge: d62c0f9... 9b4311e...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 29 22:54:31 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 5b6271bda42be8edb77fbd588621cc09199fa7fb
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:50:38 2005 -0500

    Input: make name, phys and uniq be 'const char *' because once
           set noone should attempt to change them.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f96b434d3bf70845a7541ab217f525918267281e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:50:29 2005 -0500

    Input: rearrange procfs code to reduce number of #ifdefs
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit fb2ce3c005ede30b65b891c58ff56398df6089f8
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:50:10 2005 -0500

    Sonypi: make sure that input_work is not running when unloading
            the module; submit/retrieve key release data into/from
            input_fifo in one shot.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 16a334c0de5a94b1d10a1ac9a33f4dedac89a075
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:49:08 2005 -0500

    Input: introduce usb_to_input_id() to uniformly produce
           struct input_id for USB input devices.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c27a748225fe5c7e485ea471178c26e43f9f7fbe
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:48:51 2005 -0500

    Input: acecad - drop unneeded cast and couple unneeded spaces.
           Noticed by Joe Perches.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Acked-by: Stephane VOLTZ <svoltz@numericable.fr>

commit ae87dff7ca2723a2428fb55dd57da1315878eb08
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:48:34 2005 -0500

    Input: serio - add modalias attribute and environment variable to
           simplify hotplug scripts.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0048e6030d41453c2f5ce0e9aead910d46cfd448
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:48:14 2005 -0500

    Input: uinput - use completions instead of events and manual
           wakeups in force feedback code.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d62c0f9fd2d3943a3eca85b490d86e1605000ccb
Author: Patrick Mochel <mochel@digitalimplant.org>
Date:   Fri Jun 24 08:39:33 2005 -0700

    [PATCH] Driver core: Use klist_del() instead of klist_remove().
    
    Use klist_del() instead of klist_remove() when unregistering devices.
    This will prevent a deadlock when executing a recursive unregister using
    device_for_each_child().
    
    Signed-off-by Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 23d3d602cb96addd3c1158424fb01a49ea5e81b1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 22 16:09:05 2005 -0700

    [PATCH] driver core: change bus_rescan_devices to return void
    
    No one was looking at the return value of bus_rescan_devices, and it
    really wasn't anything that anyone in the kernel would ever care about.
    So change it which enabled some counting code to be removed also.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit afdce75f1eaebcf358b7594ba7969aade105c3b0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 22 16:09:05 2005 -0700

    [PATCH] driver core: Add the ability to bind drivers to devices from userspace
    
    This adds a single file, "bind", to the sysfs directory of every driver
    registered with the driver core.  To bind a device to a driver, write
    the bus id of the device you wish to bind to that specific driver to the
    "bind" file (remember to not add a trailing \n).  If that bus id matches
    a device on that bus, and it does not currently have a driver bound to
    it, the probe sequence will be initiated with that driver and device.
    
    Note, this requires that the driver itself be willing and able to accept
    that device (usually through a device id type table).  This patch does
    not make it possible to override the driver's id table.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 151ef38f7c0ec1b0420f04438b0316e3a30bf2e4
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 22 16:09:05 2005 -0700

    [PATCH] driver core: Add the ability to unbind drivers to devices from userspace
    
    This adds a single file, "unbind", to the sysfs directory of every
    device that is currently bound to a driver.  To unbind the driver from
    the device, write anything to this file and they will be disconnected
    from each other.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0edb586049e57c56e625536476931117a57671e9
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Wed Jun 22 16:59:51 2005 +0200

    [PATCH] driver core: add bus_find_device & driver_find_device functions
    
    Add bus_find_device() and driver_find_device() which allow searching for a
    device in the bus's resp. the driver's klist and obtain a reference on it.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 152c12f568d4fc6e9a7dfd42f2d51347fb41d9b7
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Jun 30 00:47:50 2005 -0500

    Input: clean up uinput driver (formatting, extra braces)
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 719d1cd86780c156f954fc34f34481adac197aec
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:17:02 2005 +1000

    [PATCH] ppc64: Replace custom locking code with a spinlock
    
    The hvlpevent_queue (formally ItLpQueue) has a member called xInUseWord
    which is used for serialising access to the queue. Because it's a word
    (ie. 32 bit) there's a custom 32-bit version of test_and_set_bit() or
    thereabouts in ItLpQueue.c.
    
    The xInUseWord is not shared with they hypervisor, so we can replace it
    with a spinlock and remove the custom code.
    
    There is also another locking mechanism (ItLpQueueInProcess). This is
    redundant because it's only manipulated while the lock's held. Remove it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ffe1b7e14e6b606bd84cab564aa2f481dbd4e418
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:16:48 2005 +1000

    [PATCH] ppc64: Formatting cleanups in arch/ppc64/kernel/ItLpQueue.c
    
    Just formatting cleanups:
     * rename some "nextLpEvent" variables to just "event"
     * make code fit in 80 columns
     * use brackets around if/else
     * use a temporary to make hvlpevent_clear_valid clearer
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 38fcdcfe38fc3f8972c906db64cd7d540b7760e8
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:16:28 2005 +1000

    [PATCH] ppc64: Cleanup whitespace in arch/ppc64/kernel/ItLpQueue.c
    
    Just cleanup white space.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9b0470200a2441766599ad84f92ab9daca8ed86d
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:16:18 2005 +1000

    [PATCH] ppc64: Cleanup proc printing of event types
    
    The code that prints event counts by type uses a hand-coded number of tabs
    to get the alignment right. Instead use a printf alignment which will allow
    allow us to use the event_type strings elsewhere in the future.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ed094150bdeb6eca691f1b7a05bd34d4d1a95488
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:16:09 2005 +1000

    [PATCH] ppc64: Simplify counting of lpevents, remove lpevent_count from paca
    
    Currently there's a per-cpu count of lpevents processed, a per-queue (ie.
    global) total count, and a count by event type.
    
    Replace all that with a count by event for each cpu. We only need to add
    it up int the proc code.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 74889802a1585af4e1652f0cb853ac22a65816a4
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:15:53 2005 +1000

    [PATCH] ppc64: Don't count number of events processed for caller
    
    Currently we count the number of lpevents processed in 3 seperate places.
    
    One of these counters is never read, so just remove it. This means
    hvlpevent_queue_process() no longer needs to return the number of events
    processed.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 937b31b114b5540f456ce1566aae67e02db41f2c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:15:42 2005 +1000

    [PATCH] ppc64: Rename ItLpQueue_* functions to hvlpevent_queue_*
    
    Now that we've renamed the xItLpQueue structure, rename the functions that
    operate on it also.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a61874648d14450f4d397489527998e3dd1119de
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:15:32 2005 +1000

    [PATCH] ppc64: Rename xItLpQueue to hvlpevent_queue
    
    The xItLpQueue is a queue of HvLpEvents that we're given by the Hypervisor.
    Rename xItLpQueue to hvlpevent_queue and make the type struct hvlpevent_queue.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ab354b637924beb33dcc23eedc9482f2c692188f
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:12:21 2005 +1000

    [PATCH] ppc64: Move definition of xItLpQueue
    
    The xItLpQueue is declared in LparData.c, move it into ItLpQueue.c.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0f6014b37e25e50724867c0a4127615427ec2a75
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:08:56 2005 +1000

    [PATCH] ppc64: Make two ItLpQueue related functions static
    
    External parties don't need to use ItLpQueue_getNextLpEvent() or
    ItLpQueue_clearValid(), they're internal to ItLpQueue.c
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7b01328d455b50ff040d3a06b342ca370b1d8b0a
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:08:44 2005 +1000

    [PATCH] ppc64: Move xItLpQueue proc code into ItLpQueue.c
    
    Move the code that displays xItLpQueue values in /proc into
    ItLpQueue.c.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 512d31d6a824a961f39b418f11480f678320e4f3
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:08:27 2005 +1000

    [PATCH] ppc64: Move initialisation of xItLpQueue into ItLpQueue.c
    
    The xItLpQueue is initalised manually in iSeries_setup_arch().  Move
    this code into ItLpQueue.c for a cleaner separation.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1b19bc721416ae5bc813521d9e010a89f4816120
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:07:57 2005 +1000

    [PATCH] ppc64: Don't pass the pointers to xItLpQueue around
    
    Because there's only one ItLpQueue and we know where it is, ie. xItLpQueue,
    there's no point passing pointers to it it around all over the place.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ee48444b85f498d99592835f61125385d8e9c975
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:07:48 2005 +1000

    [PATCH] ppc64: Reorganise the paca initialisation macros
    
    This patch updates the macros that initialise the paca to remove the lpq
    parameter. It also rearranges them a bit with the hope of making them a
    bit clearer.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0c885c175c06bdfe13e88d974d56a5e93ad2f544
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:07:33 2005 +1000

    [PATCH] ppc64: Move set_spread_lpevents() into ItLpQueue.c
    
    The only code outside ItLpQueue.c that refers to spread_lpevents is in
    set_apread_lpevents(), so move it inside ItLpQueue.c and make spread_lpevents
    static.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fc07695386067a4abbd5ac8c7974059eae0b0a79
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:07:21 2005 +1000

    [PATCH] ppc64: Spread lpevents by default on iSeries
    
    With the previous patch in place, spreading lpevents by default becomes
    a one liner.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bea248fb30c3122ece8c34798527fac431c1d7b0
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 30 15:07:09 2005 +1000

    [PATCH] ppc64: Remove lpqueue pointer from the paca on iSeries
    
    The iSeries code keeps a pointer to the ItLpQueue in its paca struct. But
    all these pointers end up pointing to the one place, ie. xItLpQueue.
    
    So remove the pointer from the paca struct and just refer to xItLpQueue
    directly where needed.
    
    The only complication is that the spread_lpevents logic was implemented by
    having a NULL lpqueue pointer in the paca on CPUs that weren't supposed to
    process events. Instead we just compare the spread_lpevents value to the
    processor id to get the same behaviour.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9b4311eedb17fa88f02e4876cd6aa9a08e383cd6
Merge: 2949ccf... 0647d8c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 29 21:03:03 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 2949ccf9379678df66ecf2ca70ed4656159eacdd
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jun 29 18:53:06 2005 -0400

    [PATCH] reiserfs: enable attrs by default if saf
    
    The following patch enables attrs by default if the reiserfs_attrs_cleared
    bit is set in the superblock.  This allows chattr-type attrs to be used
    without any further action by the user.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 869eb76e7b60ebd8f87a358b72e97fa0aef1d1f5
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jun 29 18:52:28 2005 -0400

    [PATCH] reiserfs: Check if attrs are enabled for attr ioctls
    
    ReiserFS currently will allow the user to set/get attrs for files
    regardless if they are enabled.  The patch checks to see if they are
    enabled, and returns -NOTTY if they are not.
    
    ext[23] doesn't need this check because attrs are always enabled.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b35ff23b2633eb996d666e5a49a5d49b8a6a2d3
Merge: 92dd7ca... 026d02a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 29 21:00:38 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 92dd7ca0af8f769569bde98a83b4a8f4daec6ac5
Merge: 164cad9... da41119...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 29 20:59:55 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 0647d8cfd40f7974335884d73deef83feeffc2a0
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 29 16:01:40 2005 -0700

    [IA64] Update zx1_defconfig
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 06697eea4ce18870fbce82dffbb375e216145f47
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 29 15:45:41 2005 -0700

    [IA64] Update tiger_defconfig
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d18bfacff20f08aecf01bb971b110ca108eef3c7
Merge: a68db76... fd782a4...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 29 15:21:41 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit da41119af78864d27ccbf505949df788d5e8aaf5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 23:02:02 2005 +0100

    [PATCH] ARM: Don't force SIGFPE
    
    We were forcing SIGFPE on to a user program for no good reason.
    Use send_sig_info() instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 438a76167959061e371025f727fabec2ad9e70a7
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 23:01:02 2005 +0100

    [PATCH] ARM: Fix VFP to use do_div()
    
    VFP used __divdi3 64-bit division needlessly.  Convert it to use
    our 64-bit by 32-bit division instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b3402cf50efead37dd9553b90fbf1486e09fb78e
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Jun 29 19:59:48 2005 +0100

    [PATCH] ARM: 2771/1: Dynamic Tick support for OMAP, take 4
    
    Patch from Tony Lindgren
    
    This patch adds support for Dynamic Tick Timer for OMAP.
    This patch is an updated version of ARM patch 2642/1 to
    make it work with the already integrated generic ARM
    dyntick support.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 026d02a236f429eb61a1277166bd425f8514c431
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 18:45:19 2005 +0100

    [PATCH] Serial: Split 8250 port table (part 2)
    
    Remove legacy ISA serial ports for Accent, Boca, Fourport, Hub6 and MCA
    from the architecture specific serial.h include.
    
    The only ports which remain in asm-*/serial.h are the platform specific
    entries.  These should really be converted by platform maintainers to
    use a platform device, such as can be found in
    arch/arm/mach-footbridge/isa.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e763b90c41563a0f8258d379fe71a9a1f1fa5445
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 18:41:51 2005 +0100

    [PATCH] Serial: Disable OX950 transmitter for flow control
    
    Disable the transmitter whenever we want to prevent characters
    being transmitted by flow control.  However, if we run out of
    characters to send and want to only disable the TX interrupt,
    allow that scenario.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0dd7a1aed7c34a39917c4faf75b4230c169e809b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 18:40:53 2005 +0100

    [PATCH] Serial: Check status of CTS when using flow control
    
    Fix bugme #4712: read the CTS status and set hw_stopped if CTS
    is not active when opening the port and/or enabling CRTSCTS
    
    Thanks to Stefan Wolff for spotting this problem.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 20f720ccce8864583365d844d48d3fe8d0d171ad
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 18:26:19 2005 +0100

    [PATCH] ARM: Remove nmi_tick from integrator platforms
    
    The nmi watchdog code hasn't been merged for this platform yet.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c7e788766610bdc764d7150e69ace2e0c4196cf0
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Jun 29 18:10:54 2005 +0100

    [PATCH] ARM: 2723/2: remove __udivdi3 and __umoddi3 from the kernel
    
    Patch from Nicolas Pitre
    
    Those are big, slow and generally not recommended for kernel code.
    They are even not present on i386.  So it should be concluded that
    one could as well get away with do_div() alone.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 164cad9bacc2cf190493d2ee4918dc2869ba6f53
Author: Prakash Punnoor <prakash@punnoor.de>
Date:   Wed Jun 29 14:13:54 2005 +0200

    [PATCH] Don't fill up log with atxp1 vcore messages change message
    
    I am using the atxp1 module to change vcore on my NForce2 via userspace
    daemon (see punnoor.de).
    
    Currently the atxp1 module will write to the log on every vcore change,
    thus filling up my log - which I don't want.  I am no kernel coder, but
    I guess, this one-liner will change this behaviour in a wanted way, ie
    output will be made for debug purposes only.
    
    Signed-off-by: Prakash Punnoor <prakash@punnoor.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd782a4a99d2d3e818b9465c427b10f7f027d7da
Author: Hugh Dickins <hugh@veritas.com>
Date:   Wed Jun 29 15:15:40 2005 +0100

    [PATCH] Fix get_request nastiness
    
    get_request is now expected to be holding on to queue_lock, with interrupts
    disabled, when it returns NULL; but one path forgot that, causing all kinds
    of nastiness under swap load - badness backtraces, strange failures, BUGs.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 541cecac534ea0df95fbc76b0a3091e91b101895
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 29 08:43:49 2005 -0700

    Remove duplicate mention of "edd" in Documentation/kernel-parameters.txt

commit aaaa3f9e51245be3215ff67bb3c7aaf5abb82f00
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Jun 29 15:34:39 2005 +0100

    [PATCH] ARM: 2769/1: cpu_init() stack setup fix
    
    Patch from Catalin Marinas
    
    The compiler allocates r14 for the stk variable in the __asm__ directive.
    This is a shadowed register and gets changed when the mode is changed,
    causing random values in the SP register. The patch adds a clobber for
    the r14 register.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9ec3c75cdeb57fa3c12a813c63706ece7fb63648
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Jun 29 15:17:49 2005 +0100

    [PATCH] ARM: 2768/1: PXA: Add a required header file for LL_DEBUG
    
    Patch from Richard Purdie
    
    With DEBUG enabled, head.S includes arch/debug-macro.S. On the PXA, this
    contains references to the macro io_p2v() so hardware.h needs to be
    included.
    
    Signed-off-by: Richard Purdie <rpurdie@openedhand.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b720f73296916e87c744193c57bc8687d35888fe
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 15:15:54 2005 +0100

    [PATCH] ARM: Convert ARM timer implementations to use readl/writel
    
    Convert ARMs timer implementations to use readl/writel instead of accessing
    the registers via a struct.
    
    People have recently asked if accessing timers via a structure is the
    "right way" and its not the Linux way.  So fix this code to conform to
    "The Linux Way"(tm).
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Acked-by: Catalin Marinas <catalin.marinas@arm.com>

commit bd7bcf52dabba9c391142fd515221fcb87b7c712
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 23 10:38:54 2005 +0100

    [MTD] NAND: Add ST chip IDs.
    
    From: Domenico DI TULLIO <domenico.di-tullio@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit af2c80e926ad5335d00a8d507928aff4e8ff1877
Author: Maciej W. Rozycki <macro@infradead.org>
Date:   Mon Jun 20 13:22:55 2005 +0100

    [MTD] ms02-nv: Fix 64bit operation
    
    Replace KSEG1ADDR() with CKSEG1ADDR() as the former does not work for
    64-bit configurations anymore.
    
    Signed-off-by: Maciej W. Rozycki <macro@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a4f957f16d41b9ff944dddd84c4892496a129f68
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Jun 20 12:48:25 2005 +0100

    [MTD] NAND: s3c24xx updates
    
    Fix error in timing generation, Tacls is only in the range 0..3
    
    Add proper support for the s3c2440 NAND controller, which has now
    been tested on several s3c2440 implementations.
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit d7e78d4f2173298c34e88f496c3acea247feec61
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Jun 17 16:02:09 2005 +0100

    [MTD] NAND: Change exports to _GPL
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c9e0536523f5191395d62f6c84d007e6ffd38d33
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 14 16:39:57 2005 +0100

    [MTD] NAND: Fix broken bad block table scan
    
    Make the bad block table search functional again
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit bfabb98688e7089381baa0974f7ff6786ce2a2d0
Author: Sean Young <sean@mess.org>
Date:   Mon Jun 13 14:08:48 2005 +0100

    [MTD] Use correct major number for INFTL
    
    inftl was assigned new major number 96, 94 is in use by dasd. See:
    http://www.ussg.iu.edu/hypermail/linux/kernel/0409.2/1220.html
    
    Signed-off-by: Sean Young <sean@mess.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit be76c5fb406fad93ab93ba39e7858e03d58c5d30
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Tue Jun 7 16:04:29 2005 +0100

    [MTD] Fix commandline parser alignement
    
    Add alignment to cmdline.
    
    From: "Timofei V. Bondarenko" <tim@ipi.ac.ru>
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 02b15e343aeefb49f8cac949be599d78250a568f
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Tue Jun 7 00:04:39 2005 +0100

    [MTD] XIP for AMD CFI flash.
    
    Author: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0dfc62465ef92c7ddcb1ba223bf062453566fd0f
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue May 31 20:39:20 2005 +0100

    [MTD] NAND: Reorganize chip locking
    
    The code was wrong in several aspects. The locking order was
    inconsistent, the device aquire code did not reset a variable
    after a wakeup and the wakeup handling was not working for
    applications where multiple chips are sharing a single
    hardware controller.
    When a hardware controller is available the locking is now
    reduced to the hardware controller lock and the waitqueue is
    moved to the hardware controller structure in order to avoid
    a wake_up_all().
    
    The problem was pointed out by Ben Dooks, who also found the
    missing variable reset as main cause for his deadlock problem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6904b2465cf30265a67711025815784aa345bfad
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jun 29 11:09:15 2005 +0100

    [PATCH] ARM: 2765/1: S3C24XX - small cleanups in arch/arm/mach-s3c2410
    
    Patch from Ben Dooks
    
    Re-tab the devs.c file, and change the initialiser for the
    mach-vr1000.c to use `.xxx = yyy` form.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f705b1aed7002495a504086705ff9725ed9412dc
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jun 29 11:09:15 2005 +0100

    [PATCH] ARM: 2764/1: S3C24XX - Common PM functions for Simtec boards
    
    Patch from Ben Dooks
    
    All current S3C24XX implementations from Simtec share the same
    requirements for suspend/resume information.
    This patch moves the save code out of the mach-bast.c file,
    and into it's own so it can be shared by all the current
    Simtec S3C24XX implementations.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c5f4644e6c8ba21666128603e4e92544d3cd740d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 09:42:38 2005 +0100

    [PATCH] Serial: Adjust serial locking
    
    This patch changes the way serial ports are locked when getting modem
    status.  This change is necessary because we will need to atomically
    read the modem status and take action depending on the CTS status.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 99a0616bcdabec9005159e50af91a36cc3f8bda8
Merge: a839688... 053a7b5...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 29 09:40:28 2005 +0100

    Merge with ../linux-2.6-smp

commit 4c91aedb75d1b87deccf16d58f67fb46402d7d44
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 28 22:57:29 2005 -0700

    Linux v2.6.13-rc1
    
    Ok, a lot of things were pending after the 2.6.12 release, let's try to
    start calming things down again.

commit b9a05d1d51e27681e8a1162d8f11c1820915e921
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Jun 29 01:17:55 2005 -0400

    [PATCH] ieee80211.h build fix
    
    This crept in with the resync-to-mainline.  Nothing uses 802.11-crypt in
    mainline, so we can safely comment it out for now.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a839688362e32f01608838516036697e30618b39
Merge: 2fa938b... 12dc2fd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 28 21:24:32 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 2fa938b8a3964c21b23d9d095091e7abc88249c5
Author: Dave Jones <davej@redhat.com>
Date:   Tue Jun 28 20:08:29 2005 -0400

    [PATCH] sis 760 support.
    
    This patch adds the SiS 760 ID to the amd64-agp driver, so that agpgart can be
    used on Athlon64 boards based on this chip.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2668fb91cbfbd5e6799017a3579f20309aac758b
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Tue Jun 28 20:45:31 2005 -0700

    [PATCH] sparc32: Kconfig fixups
    
    Something reverted most of the arch/sparc/Kconfig changes, leaving
    arch/sparc/ unconfigurable.  This patch re-removes the parts made redundant
    by drivers/Kconfig in addition to a mysterious, spurious second instance of
    source "mm/Kconfig".  cvs strikes again?
    
    Signed-off-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84da7c0844f8ab7668559c61e4f0af416fc58cf6
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 28 20:45:30 2005 -0700

    [PATCH] Doc/Submitting: corrections, additions
    
    Corrections to Documentation/Submitting{Drivers,Patches}
    - update LANANA info.
    - fix some typos
    - update 2.2 kernel maintainer info.
    - update 'dontdiff' info.
    - update URLs for patch scripts
    - add Trivial Patch Monkey URL
    - add more references for submitting patches
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6623e6205e36c310367009f3b01f5cbe7cc0005d
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jun 28 20:45:28 2005 -0700

    [PATCH] V4L: documentation changes - mostly new cards included
    
    New cards included.
    V4L1 api renamed. Message included informing it is obsoleted by V4L2 API.
    V4L2 api included.
    Mark all 7135 cards as 7133.
    
    Signed-off-by: Luc Saillard <luc@saillard.org>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 115d6f3fd25991f2a7de1ff4d758086209b1ed12
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jun 28 20:45:27 2005 -0700

    [PATCH] V4L: API new webcam formats included
    
    Add Philips Webcam format.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Luc Saillard <luc@saillard.org>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 060d3027f26aab9adeac8ff6d1184bca67c7d174
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jun 28 20:45:25 2005 -0700

    [PATCH] v4l: bttv new insmod parameters
    
    * bttv-driver.c, bttvp.h:
    
    - New bttv module params:
    
    - uv_ratio : allow a ratio of saturation between u and v. If you
            have a ratio of 40 and a saturation of 100, usat will be 80 and
            vstat 120. Useful to correct a bad color balance.
    - full_luma_range : provide a better contrast in using the full
            range 0-253 of values instead of 16-253.
    - coring : to have a better black level.
    - radio range is now defined on tuner-core.c. Cleaning up.
    
    * bttvp.h:
    
    - Fix gcc 4.0 compilation
    
    Signed-off-by: Jorik Jonker <jorik@dnd.utwente.nl>
    Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 586b0cab2516640fec4dffc3049c4d8bca188f89
Author: Mauro Carvalho Chehab <maurochehab@gmail.com>
Date:   Tue Jun 28 20:45:21 2005 -0700

    [PATCH] v4l: tuner improvements
    
    *tuner-core.c:
    - some tuner_info msgs will be generated only if insmod opt
            tuner_debug enabled.
    - Implemented tuner-core support for VIDIO_S_TUNER to allow
            changing mono/stereo mode
    - Remove unneeded config options.
    - I2C_CLIENT_MULTI option removed.
    - support for Philips FMD12ME hybrid tuner
    - allow to initialize with another tuner
    - Move PHILIPS_FMD initialization code to set_type function,
    
    * tda8290:
    
    - Fix dumb error in tda8290 tunning.
    - Radio tuner uses high-precision step instead of 62.5 KHz.
    
    *tea5767.c:
    - tuner_info msgs will be generated only if insmod tuner option
            tuner_debug enabled.
    - some cleanups for better reading.
    - Radio tuner uses high-precision step instead of 62.5 KHz.
    - Changing radio mode stereo/mono for tea5767 working.
    
    *tuner-simple.c:
    - TNF9533-D/IF UHF fixup.
    - Radio tuners now uses high-precision step instead of 62.5 KHz.
    
    *mt20xx.c:
            - Radio tuner uses high-precision step instead of 62.5 KHz.
    
    *tda9887.c:
            - tab and blank spaces corrections.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96b6aba08762f09e5dfa616854cb80ce054a7bf8
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jun 28 20:45:20 2005 -0700

    [PATCH] V4L maintainer patch
    
    This patch updates maintainer info for BTTV and V4L.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 200803dfe4ff772740d63db725ab2f1b185ccf92
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue Jun 28 20:45:18 2005 -0700

    [PATCH] irqpoll
    
    Anyone reporting a stuck IRQ should try these options.  Its effectiveness
    varies we've found in the Fedora case.  Quite a few systems with misdescribed
    IRQ routing just work when you use irqpoll.  It also fixes up the VIA systems
    although thats now fixed with the VIA quirk (which we could just make default
    as its what Redmond OS does but Linus didn't like it historically).
    
    A small number of systems have jammed IRQ sources or misdescribes that cause
    an IRQ that we have no handler registered anywhere for.  In those cases it
    doesn't help.
    
    Signed-off-by: Alan Cox <number6@the-village.bc.nu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21fe3471c3aaa5c489c5d3a4d705291eb7511248
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Tue Jun 28 20:45:16 2005 -0700

    [PATCH] ext3: reduce allocate-with-reservation lock latencies
    
    Currently in ext3 block reservation code, the global filesystem reservation
    tree lock (rsv_block) is hold during the process of searching for a space
    to make a new reservation window, including while scaning the block bitmap
    to verify if the avalible window has a free block.  Holding the lock during
    bitmap scan is unnecessary and could possibly cause scalability issue and
    latency issues.
    
    This patch tries to address this by dropping the lock before scan the
    bitmap.  Before that we need to reserve the open window in case someone
    else is targetting at the same window.  Question was should we reserve the
    whole free reservable space or just the window size we need.  Reserve the
    whole free reservable space will possibly force other threads which
    intended to do block allocation nearby move to another block group(cause
    bad layout).  In this patch, we just reserve the desired size before drop
    the lock and scan the block bitmap.  This patch fixed a ext3 reservation
    latency issue seen on a cvs check out test.  Patch is tested with many fsx,
    tiobench, dbench and untar a kernel test.
    
    Signed-Off-By: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb3cc4320e1fd87143683b540e459a2e20fdc9bb
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue Jun 28 20:45:15 2005 -0700

    [PATCH] blk: light iocontext ops
    
    get_io_context needlessly turned off interrupts and checked for racing io
    context creations.  Both of which aren't needed, because the io context can
    only be created while in process context of the current process.
    
    Also, split the function in 2.  A light version, current_io_context does not
    elevate the reference count specifically, but can be used when in process
    context, because the process holds a reference itself.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6344532a26a318c128102507f6328aaafe02d4d
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue Jun 28 20:45:14 2005 -0700

    [PATCH] blk: reduce locking
    
    Change around locking a bit for a result of 1-2 less spin lock unlock pairs in
    request submission paths.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 450991bc1026135ee30482a4a806d069915ab2f6
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue Jun 28 20:45:13 2005 -0700

    [PATCH] blk: __make_request efficiency
    
    In the case where the request is not able to be merged by the elevator, don't
    retake the lock and retry the merge mechanism after allocating a new request.
    
    Instead assume that the chance of a merge remains slim, and now that we've
    done most of the work allocating a request we may as well just go with it.
    
    Also be rid of the GFP_ATOMIC allocation: we've got working mempools for the
    block layer now, so let's save atomic memory for things like networking.
    
    Lastly, in get_request_wait, do an initial get_request call before going into
    the waitqueue.  This is reported to help efficiency.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69f63c5c34d0b34ee2cbf10c5ff7fcff0404879e
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:12 2005 -0700

    [PATCH] coverity: tty_ldisc_ref return null check
    
    We add a check of the return value of tty_ldisc_ref(), which
    is checked 7 out of 8 times, e.g.:
    
    149  		ld = tty_ldisc_ref(tty);
    150  		if (ld != NULL) {
    151  			if (ld->set_termios)
    152  				(ld->set_termios)(tty, &old_termios);
    153  			tty_ldisc_deref(ld);
    154  		}
    
    This defect was found automatically by Coverity Prevent, a static analysis
    tool.
    
    (akpm: presumably `ld' is never NULL.  Oh well)
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7f1721ef284c6e8257c7471a02148db76105036
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:11 2005 -0700

    [PATCH] coverity: fs/ext3/super.c: match_int return check
    
    The return value of  "match_int" is  checked  27 out of 28 times
    
    In lib/parser.c
    142  	/**
    143  	 * match_int: - scan a decimal representation of an integer from a substring_t
    144  	 * @s: substring_t to be scanned
    145  	 * @result: resulting integer on success
    146  	 *
    147  	 * Description: Attempts to parse the &substring_t @s as a decimal integer. On
    148  	 * success, sets @result to the integer represented by the string and returns 0.
    149  	 * Returns either -ENOMEM or -EINVAL on failure.
    150  	 */
    151  	int match_int(substring_t *s, int *result)
    152  	{
    153  		return match_number(s, result, 0);
    154  	}
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec471dc484b8ca5352903ee28796b8b248313547
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:10 2005 -0700

    [PATCH] coverity: fs/udf/namei.c null check
    
    "dir" was dereferenced before null check
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c101fd439dab60d6eba76afb35fd2696f42c63d
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:08 2005 -0700

    [PATCH] coverity: ipmi_msghandler() channels array overrun fix
    
    We fix the check in 1084, which was
    
    1084 			if (addr->channel > IPMI_NUM_CHANNELS) {
    1085 				spin_lock_irqsave(&intf->counter_lock, flags);
    1086 				intf->sent_invalid_commands++;
    1087 				spin_unlock_irqrestore(&intf->counter_lock, flags);
    1088 				rv = -EINVAL;
    1089 				goto out_err;
    1090 			}
    
    addr->channel is used in
    
    1092 			if (intf->channels[addr->channel].medium
    
    Definitions involved:
    
    221  		struct ipmi_channel channels[IPMI_MAX_CHANNELS];
    
    134  	#define IPMI_MAX_CHANNELS       8
    
    In /linux-2.6.12-rc6/include/linux/ipmi.h
    148  	#define IPMI_NUM_CHANNELS 0x10
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a77e3362a224212d9d3b9e6fdec44df2eef6cf92
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:06 2005 -0700

    [PATCH] coverity: i386: scsi_lib buffer overrun fix
    
    The check in
    
    627  		BUG_ON(index > SG_MEMPOOL_NR);
    
    with SG_MEMPOOL_NR defined in
    
    32   	#define SG_MEMPOOL_NR		(sizeof(scsi_sg_pools)/sizeof(struct scsi_host_sg_pool))
    
    was not sufficient.
    
    sgp, set in
    
    629  		sgp = scsi_sg_pools + index;
    
    is dereferenced in
    
    630  		mempool_free(sgl, sgp->pool);
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: <linux-scsi@vger.kernel.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8f5034540195307362d071a8b387226b410469f
Author: KAMBAROV, ZAUR <kambarov@berkeley.edu>
Date:   Tue Jun 28 20:45:06 2005 -0700

    [PATCH] coverity: i386: build.c: negative return to unsigned fix
    
    Variable "c" was declared as an unsigned int, but used in:
    
    125  		for (i=0 ; (c=read(fd, buf, sizeof(buf)))>0 ; i+=c )
    126  			if (write(1, buf, c) != c)
    127  				die("Write call failed");
    
    (akpm: read() can return -1.  If it does, we fill the disk up with garbage).
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4cceb4d13abaedbd52e54053367c793ed4aedb6b
Author: GOTO Masanori <gotom@debian.or.jp>
Date:   Tue Jun 28 20:45:05 2005 -0700

    [PATCH] headers: include linux/types.h for usb_ch9.h
    
    This patch for usb_ch9.h includes linux/types.h instead of asm/types.h so that
    __le16 and so on is explicitly defined.  It also cleans up non standard //
    comment.
    
    Signed-off-by: GOTO Masanori <gotom@debian.or.jp>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3607d1dfc80dcfbd3a6f236c70aa0d8eb7292278
Author: GOTO Masanori <gotom@debian.or.jp>
Date:   Tue Jun 28 20:45:04 2005 -0700

    [PATCH] headers: include linux/compiler.h for __user
    
    This patch lets i2c-dev.h include linux/compiler.h so that __user is defined.
    
    Signed-off-by: GOTO Masanori <gotom@debian.or.jp>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12822bc272e857544476cef9175462711899008b
Author: GOTO Masanori <gotom@debian.or.jp>
Date:   Tue Jun 28 20:45:03 2005 -0700

    [PATCH] headers: enable ppc64 ___arch__swab16 and ___arch__swab32
    
    This patch cleans up asm-ppc64/byteorder.h to enable ___arch__swab16 and
    ___arch__swab32 which are marked TODO currently.  It removes ___arch__swab64
    because ppc64 does not have short instruction combinations for swab64, the
    recent gcc generates enough smart code that is equivalent to hand assembled
    code under my tests.
    
    Signed-off-by: GOTO Masanori <gotom@debian.or.jp>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c016e2257acd00a7ffd87fa1eec896138563d1aa
Author: Sbastien Dugu <sebastien.dugue@bull.net>
Date:   Tue Jun 28 20:44:59 2005 -0700

    [PATCH] aio-retry-fix: fix aio retry work queueing
    
    In the case of buffered AIO, in the aio retry path (aio_run_iocb), when the
    retry method returns EIOCBRETRY the kicked iocb is added to the context run
    list but is never queued onto the work queue.  The request therefore is
    never completed.
    
    This patch fixes that by adding the appropriate call to aio_queue_work in
    aio_run_aiocb so that subsequent retries will be handled by the aio worker
    thread.
    
    Signed-off-by: Sbastien Dugu <sebastien.dugue@bull.net>
    Acked-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 334a13ec3d01a1a4b4f2249735b793105cb4a519
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jun 28 20:44:58 2005 -0700

    [PATCH] really remove xattr_acl.h
    
    Looks like it sneaked back with the NFS ACL merge..
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aade0e82739f4b24c5b952de68c8d794459ad531
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jun 28 20:44:56 2005 -0700

    [PATCH] drivers/isdn/: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Armin Schindler <armin@melware.de>
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 687a21cee17000177b1935896b9b475acf136678
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Tue Jun 28 20:44:55 2005 -0700

    [PATCH] rename wakeup_bdflush to wakeup_pdflush
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05133fc498e788e1c1ca4e906f9e05d9779fd63b
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 28 20:44:54 2005 -0700

    [PATCH] swabb.h warning fixes
    
    In file included from drivers/media/dvb/ttpci/av7110_hw.c:38:
    include/linux/byteorder/swabb.h:96: warning: type qualifiers ignored on function return type
    include/linux/byteorder/swabb.h:110: warning: type qualifiers ignored on function return type
    In file included from drivers/media/dvb/ttpci/av7110_v4l.c:36:
    include/linux/byteorder/swabb.h:96: warning: type qualifiers ignored on function return type
    include/linux/byteorder/swabb.h:110: warning: type qualifiers ignored on function return type
    In file included from drivers/media/dvb/ttpci/av7110_av.c:37:
    include/linux/byteorder/swabb.h:96: warning: type qualifiers ignored on function return type
    include/linux/byteorder/swabb.h:110: warning: type qualifiers ignored on function return type
    drivers/isdn/icn/icn.c:719:4: warning: #warning TODO test headroom or use skb->nb to flag ACK
    In file included from drivers/media/dvb/ttpci/av7110_ca.c:39:
    include/linux/byteorder/swabb.h:96: warning: type qualifiers ignored on function return type
    include/linux/byteorder/swabb.h:110: warning: type qualifiers ignored on function return type
    In file included from drivers/media/dvb/ttpci/av7110.c:41:
    include/linux/byteorder/swabb.h:96: warning: type qualifiers ignored on function return type
    include/linux/byteorder/swabb.h:110: warning: type qualifiers ignored on function return type
    
    Does declaring a function to return a const value actually mean something to
    gcc?
    
    Dunno.  Kill it and replace sone `__inline__'s with `inline' too.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b79646e3dd51b389b2a570b454f8e2fb7a613e37
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 28 20:44:53 2005 -0700

    [PATCH] hisax warning fixes
    
    drivers/isdn/hisax/hfc4s8s_l1.c:317: warning: type qualifiers ignored on function return type
    drivers/isdn/hisax/hfc4s8s_l1.c:329: warning: type qualifiers ignored on function return type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b92eac01c3c6ad5dab5c74d3bc32ac8e9bf4dae7
Author: Stanislaw W. Gruszka <stf_xl@wp.pl>
Date:   Tue Jun 28 20:44:51 2005 -0700

    [PATCH] request_firmware(): avoid race conditions
    
    Avoid race occurs when some process have open file descriptor for class
    device attributes and already firmware allocated memory are freed.  Don't
    allow negative loading timeout.
    
    Signed-off-by: Stanislaw W. Gruszka <stf_xl@wp.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcc8ca09920755520ba8a1e2d9f72fe8ff892643
Author: Emmanuel Colbus <emmanuel.colbus@rd.francetelecom.com>
Date:   Tue Jun 28 20:44:49 2005 -0700

    [PATCH] Adapt drivers/char/vt_ioctl.c to non-x86
    
    This code uses the x86 (non-AMD-ELAN) value of CLOCK_TICK_RATE instead of
    CLOCK_TICK_RATE itself, which is wrong for other archs.
    
    Signed-off-by: Emmanuel Colbus <emmanuel.colbus@ensimag.imag.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f01b1b0baa454825ed95c28d2a6a71bbf4510836
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Jun 28 20:44:47 2005 -0700

    [PATCH] ITIMER_REAL: fix possible deadlock and race
    
    As Steven Rostedt pointed out, there are 2 problems with ITIMER_REAL
    timers.
    
    1. do_setitimer() does not call del_timer_sync() in case
       when the timer is not pending (it_real_value() returns 0).
       This is wrong, the timer may still be running, and it can
       rearm itself.
    
    2. It calls del_timer_sync() with tsk->sighand->siglock held.
       This is deadlockable, because timer's handler needs this
       lock too.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b36bbb6c3d5244eaf52241ec69f79494137f2db0
Author: Lennert Buytenhek <buytenh+lkml@wantstofly.org>
Date:   Tue Jun 28 20:44:46 2005 -0700

    [PATCH] ixp4xx/ixp2000 watchdog driver typo
    
    Fix the same typo in the ixp4xx and ixp2000 watchdog drivers.
    
    Signed-off-by: Lennert Buytenhek <buytenh+lkml@wantstofly.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45ae36cbce9c7f55615e2b5f8faf23c7a06d0bd2
Author: Luc Van Oostenryck <lkml@looxix.net>
Date:   Tue Jun 28 20:44:44 2005 -0700

    [PATCH] drivers/char/tipar.c: off by one array access
    
    In the setup function, the delay variable is initialized with ints[2],
    but ints is declared as:
    	int ints[2];
    
    Since the module parameter should correspond to:
    	tipar=timeout,delay
    
    I suppose that the following patch fix the problem.
    
    Signed-off-by: Luc Van Oostenryck <luc.vanoostenryck@looxix.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47f176fdaf8924bc83fddcf9658f2fd3ef60d573
Author: Luca Falavigna <dktrkranz@gmail.com>
Date:   Tue Jun 28 20:44:42 2005 -0700

    [PATCH] Using msleep() instead of HZ
    
    Use msleep() in a few places.
    
    Signed-off-by: Luca Falavigna <dktrkranz@gmail.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d451687ca57371d303c5554b377d7f5c2ac6ae0
Author: Wen-chien Jesse Sung <jesse@cola.voip.idv.tw>
Date:   Tue Jun 28 20:44:41 2005 -0700

    [PATCH] fix semaphore handling in __unregister_chrdev_region
    
    This up() should be down() instead.
    
    Signed-off-by: Wen-chien Jesse Sung <jesse@cola.voip.idv.tw>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12dc2fdd3e6067f5137e4a6d8af0b1a994952f52
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 28 16:27:32 2005 -0700

    [NET]: drivers/net/slip.c needs linux/delay.h
    
    For msleep_interruptible().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9666dae51013b064e7d77fc36b5cee98dd167ed5
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 28 16:04:44 2005 -0700

    [NETFILTER]: Fix connection tracking bug in 2.6.12
    
    In 2.6.12 we started dropping the conntrack reference when a packet
    leaves the IP layer. This broke connection tracking on a bridge,
    because bridge-netfilter defers calling some NF_IP_* hooks to the bridge
    layer for locally generated packets going out a bridge, where the
    conntrack reference is no longer available. This patch keeps the
    reference in this case as a temporary solution, long term we will
    remove the defered hook calling. No attempt is made to drop the
    reference in the bridge-code when it is no longer needed, tc actions
    could already have sent the packet anywhere.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bcd61272db5e643b6d9c01c9d5085b914d9f19df
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Jun 28 15:58:50 2005 -0700

    [NET]: Add missing include to linux/netdevice.h
    
    linux/etherdevice.h can't be included standalone at the moment, which
    is required in order to sort the header files in the recommended
    alphabetic order. This patch fixes that and is needed to build spider_net.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff593c592a5d674822dce31143635b025f6415b2
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Tue Jun 28 15:49:06 2005 -0700

    [NET]: Micro optimization in eth_header()
    
    Signed-off-by: Denis Vlasenko <vda@ilport.com.ua>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7fe40f73d7591b38f129fe6a9c0fa46e0b192d09
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Jun 28 15:46:24 2005 -0700

    [IPV6]: remove more unused IPV6_AUTHHDR things.
    
    Remove two more unused IPV6_AUTHHDR option things,
    which I failed to remove them last time,
    plus, mark IPV6_AUTHHDR obsolete.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb3d89498d268c8dedc1ab5b15fa64f536564577
Author: Neil Horman <nhorman@redhat.com>
Date:   Tue Jun 28 15:40:02 2005 -0700

    [IPVS]: Close race conditions on ip_vs_conn_tab list modification
    
    In an smp system, it is possible for an connection timer to expire, calling
    ip_vs_conn_expire while the connection table is being flushed, before
    ct_write_lock_bh is acquired.
    
    Since the list iterator loop in ip_vs_con_flush releases and re-acquires the
    spinlock (even though it doesn't re-enable softirqs), it is possible for the
    expiration function to modify the connection list, while it is being traversed
    in ip_vs_conn_flush.
    
    The result is that the next pointer gets set to NULL, and subsequently
    dereferenced, resulting in an oops.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Acked-by: JulianAnastasov
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 689be43945e9ca7dd704522e55af1b8a73a994d3
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 28 15:25:31 2005 -0700

    [NET]: Remove gratuitous use of skb->tail in network drivers.
    
    Many drivers use skb->tail unnecessarily.
    
    In these situations, the code roughly looks like:
    
    	dev = dev_alloc_skb(...);
    
    	[optional] skb_reserve(skb, ...);
    
    	... skb->tail ...
    
    But even if the skb_reserve() happens, skb->data equals
    skb->tail.  So it doesn't make any sense to use anything
    other than skb->data in these cases.
    
    Another case was the s2io.c driver directly mucking with
    the skb->data and skb->tail pointers.  It really just wanted
    to do an skb_reserve(), so that's what the code was changed
    to do instead.
    
    Another reason I'm making this change as it allows some SKB
    cleanups I have planned simpler to merge.  In those cleanups,
    skb->head, skb->tail, and skb->end pointers are removed, and
    replaced with skb->head_room and skb->tail_room integers.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>

commit f835e471b557c45d2e5701ea5215f6e739b4eb39
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Tue Jun 28 15:00:39 2005 -0700

    [IPV4]: Broken memory allocation in fib_trie
    
    This should help up the insertion... but the resize is more crucial.
    and complex and needs some thinking.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e568e62e9d4674d487cdc11f369e49e56ce6703
Merge: adb2705... 5027397...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 28 15:00:08 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit adb2705a89e8b41abcf29c0ed86f4ce93ab36734
Merge: f340c0d... 8644d2a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 28 14:59:07 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit f340c0d1a3f40fdcba69cd291530a4debc58748f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 28 16:40:42 2005 +0200

    [PATCH] Tweak idle thread setup semantics
    
    This patch tweaks idle thread setup semantics a bit: instead of setting
    NEED_RESCHED in init_idle(), we do an explicit schedule() before calling
    into cpu_idle().
    
    This patch, while having no negative side-effects, enables wider use of
    cond_resched()s.  (which might happen in the stock kernel too, but it's
    particulary important for voluntary-preempt)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 082cf69eb82681f4eacb3a5653834c7970714bef
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 28 16:35:11 2005 +0200

    [PATCH] ll_rw_blk: prevent huge request allocations
    
    Currently we cap request allocations at q->nr_requests, but we allow a
    batching io context to allocate up to 32 more (default setting).  This
    can flood the queue with request allocations, with only a few batching
    processes.  The real fix would be to limit the number of batchers, but
    as that isn't currently tracked, I suggest we just cap the maximum
    number of allocated requests to eg 50% over the limit.
    
    This was observed in real life, users typically see this as vmstat bo
    numbers going off the wall with seconds of no queueing afterwards.
    Behaviour this bursty is not beneficial.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8b58edf3acf0dcc186b8330939000ecf709368a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon Jun 27 22:29:34 2005 -0700

    [PATCH] md: bio leak fix
    
    insert a missing bio_put when writting the md superblock.
    
    Without this we have a steady growth in the "bio" slab.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 314b6a4d80a7a5217c86ffdca926b6f406da0e0e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 27 22:29:33 2005 -0700

    [PATCH] kexec: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97afa0a25afb43a82954662773a9d48d61b2996a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 27 22:29:31 2005 -0700

    [PATCH] cciss_ioctl() warning fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50273978975ee62938b7ca612e281927cd789c13
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 28 22:42:06 2005 +0100

    [PATCH] ARM: 2763/1: S3C24XX - mark IRQ_LCD as valid
    
    Patch from Ben Dooks
    
    Fix the IRQ_LCD so that it is marked as valid
    since we no longer de-mux this in the main IRQ
    handler.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2f85a42964dd43fed3a339701db046bee5a8b903
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Tue Jun 28 13:24:23 2005 -0700

    [SCTP] Make init & delayed sack timeouts configurable by user.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7a1af5d7bb94af16b980a53330436b9fadc12435
Author: Maxime Bizon <mbizon@freebox.fr>
Date:   Tue Jun 28 13:21:12 2005 -0700

    [IPV4]: ipconfig.c: fix dhcp timeout behaviour
    
    I think there is a small bug in ipconfig.c in case IPCONFIG_DHCP is set
    and dhcp is used.
    
    When a DHCPOFFER is received, ip address is kept until we get DHCPACK.
    If no ack is received, ic_dynamic() returns negatively, but leaves the
    offered ip address in ic_myaddr.
    
    This makes the main loop in ip_auto_config() break and uses the maybe
    incomplete configuration.
    
    Not sure if it's the best way to do, but the following trivial patch
    correct this.
    
    Signed-off-by: Maxime Bizon <mbizon@freebox.fr>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c2910a401f1ce2ac9136171e7522e731e1a2a8c
Author: Dietmar Eggemann <dietmar.eggemann@gmx.de>
Date:   Tue Jun 28 13:06:23 2005 -0700

    [IPV4]: Snmpv2 Mib IP counter ipInAddrErrors support
    
    I followed Thomas' proposal to see every martian destination as a case
    where the ipInAddrErrors counter has to be incremented. There are
    two advantages by doing so: (1) The relation between the ipInReceive
    counter and all the other ipInXXX counters is more accurate in the
    case the RTN_UNICAST code check fails and (2) it makes the code in
    ip_route_input_slow easier.
    
    Signed-off-by: Dietmar Eggemann <dietmar.eggemann@gmx.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f2be64b3b15f52ceb83ff26abc10705a31ae5352
Author: Tony Lindgren <tony@atomide.com>
Date:   Tue Jun 28 21:01:16 2005 +0100

    [PATCH] ARM: 2760/1: Add a warning on dynamic tick timekeeping on some platforms
    
    Patch from Tony Lindgren
    
    This patch was suggested by RMK, and adds a warning on the accuracy
    of timekeeping when using dynamic tick on some platforms. Depending
    on the timer implementation, dynamic tick may affect the accuracy of
    timekeeping.
    Currently at least OMAP is known to have accurate timekeeping with
    dynamic tick.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 072cd703b6a2a3adc14fbc2d969424c7022a7892
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 28 21:01:03 2005 +0100

    [PATCH] ARM: 2762/1: S3C24XX Audio platform data
    
    Patch from Ben Dooks
    
    This provides the s3c24xx audio platform data which can be
    supplied from any of the board specific drivers.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fa0ebff62a8a25952a082641db0ed6b1cfc6c38c
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Jun 28 21:01:03 2005 +0100

    [PATCH] ARM: 2761/1: OProfile: Add call graphing support for arm
    
    Patch from Richard Purdie
    
    Add functions to generate backtraces of both kernel and user processes
    which allows oprofile's call graphing functionality to be used on arm.
    This requires unstripped binaries/libs which use a frame pointer.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae9cda5d65f3d8a495241cbdcc2d56f721c83cc3
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Jun 28 13:00:30 2005 -0700

    [IPV6]: Don't dump temporary addresses twice
    
    Each IPv6 Temporary Address (w/ CONFIG_IPV6_PRIVACY) is dumped twice
    to netlink.
    
    Because temporary addresses are listed in idev->addr_list,
    there's no need to dump idev->tempaddr separately.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a47077a0b5aa2649751c46e7a27884e6686ccbf
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 28 12:56:45 2005 -0700

    [NETLINK]: Missing padding fields in dumped structures
    
    Plug holes with padding fields and initialized them to zero.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ef1d4c7c7aca1cd436612b6ca785b726ffb8ed8
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 28 12:55:30 2005 -0700

    [NETLINK]: Missing initializations in dumped data
    
    Mostly missing initialization of padding fields of 1 or 2 bytes length,
    two instances of uninitialized nlmsgerr->msg of 16 bytes length.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3563c4fbff906991a1b4ef4609f99cca2a0de6a
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 28 12:54:43 2005 -0700

    [NETLINK]: Clear padding in netlink messages
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4095ebf1e641b0f37ee1cd04c903bb85cf4ed25b
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Jun 28 12:49:30 2005 -0700

    [NETFILTER]: ipt_CLUSTERIP: fix ARP mangling
    
    This patch adds mangling of ARP requests (in addition to replies),
    since ARP caches are made from snooping both requests and replies.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85c1937b2693a0d4e39bb2644d720ed3703b9830
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 28 12:39:40 2005 -0700

    [EBTABLES]: Fix thinkos in ebt_log.c
    
    When converting over the skb_header_pointer(), I converted parts of
    this module incorrectly.  Kill the 'u' union in ebt_log() and all the
    bogus references to it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 053a7b5b7617a72d7c61b6f84196d1c0f79b9849
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 28 19:22:25 2005 +0100

    [PATCH] ARM SMP: __xchg support
    
    This enables the existing __xchg implementation to be used on SMP.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 61998bcb4bf0efa0276e88c7853091e482a826f4
Merge: c36ad39... 0a139e7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 28 10:20:11 2005 -0700

    Merge head 'upstream-20050628-1' of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit a68db763af9b676590c3fe9ec3f17bf18015eb2f
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Thu Jun 23 21:14:00 2005 -0700

    [IA64] Fix another IA64 preemption problem
    
    There's another problem shown up by Ingo's recent patch to make
    smp_processor_id() complain if it's called with preemption enabled.
    local_finish_flush_tlb_mm() calls activate_context() in a situation
    where it could be rescheduled to another processor.  This patch
    disables preemption around the call.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 819c67e69c4e0062787e27dd989f5f9d00d4834e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Thu Jun 9 22:40:00 2005 -0700

    [IA64] Replace stale KDB-code with useful MAGIC_SYSRQ code in simserial.c
    
    Patch makes it possible to use the "F4" function key to do
    magic sysrq in the HP Ski simulator.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c1ffb6a8aaed45ba2dc0a8f09241b0a96f9955ba
Author: Bruce Losure <blosure@sgi.com>
Date:   Tue May 24 08:30:00 2005 -0700

    [IA64-SGI] Altix patch to tiocx, add subsys_initcall
    
    This patch fixes an ordering issue between the init code for the
    tiocx bus driver and tiocx-related device drivers.   Also adds
    a new brick to the list of known FPGA bricks.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 92a582ed2757456ca9599f8b4ea2064f2154eb02
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Tue May 10 12:40:00 2005 -0700

    [IA64] sparse cleanup of TIOCA files
    
    This patch is a sparse compile cleanup of tioca_provider.c, sn_hwperf.h, and
    tioca_provider.h.  Each of these files had sparse warnings when
    compiled.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 71030994a77e7689a7a792128b131ef7a10b9f74
Author: Colin Ngam <cngam@sgi.com>
Date:   Tue May 10 09:12:00 2005 -0700

    [IA64-SGI] Fix TIO IOSPACE MMR Addres
    
    This patches provides support on Shub2 for the separate TIO IOSPACE MMR.  This
    patch is SN specific.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 71a5d027c90dd7e14ddaaf22358ff5138ba89ec9
Author: Jack Steiner <steiner@sgi.com>
Date:   Tue May 10 08:01:00 2005 -0700

    [IA64-SGI] - new macros for SGI SN simulator
    
    This patch changes some macros that are used when running kernel on the
    SGI simulator.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8e4641b3ee8073a46995cf97e0875df25b88d776
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Mon May 9 05:07:00 2005 -0700

    [IA64] sparse cleanup of shub_mmr.h
    
    This patch is a sparse compile cleanup of shub_mmr.h using both the defconfig
    and the sn2_defconfig config files.
    
    The issue with this file was the missing usage of __IA64_UL_CONST wrapper.
    This wrapper is defined in include/asm-ia64/types.h and wraps a long
    constant definition with UL or with nothing depending on its usage in the
    kernel.  The missing wrapper caused many sparse compile errors like
    
            warning: constant 0x0x0000000010000380 so big it is long
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 458f935527372499b714bf4f8e646a68bb0f52e3
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed May 4 13:25:00 2005 -0700

    [IA64] Speed up lfetch.fault [NULL]
    
    This patch greatly speeds up the handling of lfetch.fault instructions
    which result in NaT consumption. Due to the NaT-page mapped at address
    0, this is guaranteed to happen when lfetch.fault'ing a NULL pointer.
    With this patch in place, we can even define prefetch()/prefetchw() as
    lfetch.fault without significant performance degradation.  More
    importantly, it allows compilers to be more aggressive with using
    lfetch.fault on pointers that might be NULL.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e15da40176f16050c8d92b36387a49370317e276
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue May 3 12:07:00 2005 -0700

    [IA64] Recognize HP sx2000 chipset
    
    No functional change, just identify the device nicely:
    
      -IOC: Unknown (103c:12ec) 0.1 HPA 0xf8020002000 IOVA space 1024Mb at 0x40000000
      +IOC: sx2000 0.1 HPA 0xf8020002000 IOVA space 1024Mb at 0x40000000
    
    We used to create fake PCI devices for these chips, but we no longer do that.
    So I don't think there's any reason to touch pci_ids.h now.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a9f9de7378e3a81f7266f542f2290399a298ef52
Author: Mark Maule <maule@sgi.com>
Date:   Tue Apr 26 08:01:00 2005 -0700

    [IA64-SGI] altix: enable vgacon support
    
    Altix patch to enable use of vgacon driver on that platform.  Depends on the
    PCDP generalization patch discussed at:
    
    	http://marc.theaimsgroup.com/?l=linux-ia64&m=111446235101939&w=2
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 66b7f8a30437b8639e798f7db8e9be1da5711efa
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 13:51:00 2005 -0700

    [IA64-SGI] pcdp: add PCDP pci interface support
    
    Resend 2 with changes per Bjorn Helgaas comments.  Changes from original:
    
    + Change globals to vga_console_iobase/vga_console_membase and make them
      unconditional.
    + Address style-related comments.
    
    Patch to extend the PCDP vga setup code to support PCI io/mem translations
    for the legacy vga ioport and ram spaces on architectures (e.g. altix) which
    need them.
    
    Summary of the changes:
    
    drivers/firmware/pcdp.c
    drivers/firmware/pcdp.h
    -----------------------
    + add declaration for the spec-defined PCI interface struct (pcdp_if_pci)
      as well as support macros.
    
    + extend setup_vga_console() to know about pcdp_if_pci and add a couple of
      globals to hold the io and mem translation offsets if present.
    
    arch/ia64/kernel/setup.c
    ------------------------
    + tweek early_console_setup() to allow multiple early console setup routines
      to be called.
    
    include/asm-ia64/vga.h
    ----------------------
    + make VGA_MAP_MEM vga_console_membase aware
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 54522b6613a03807f057fd567794a31267ef85cb
Merge: 99f95e5... f2cbb4f...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 28 08:24:49 2005 -0700

    Auto merge with /home/aegl/GIT/ia64-test

commit 4b0ef3b1127776d4a2787d7530ac0c4da82c2331
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 28 13:49:16 2005 +0100

    [PATCH] ARM SMP: Add IPI support code for SMP TLB flushing
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 22f579c621e2f264e6d093b07d75f99bc97d5df2
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Tue Jun 28 22:48:56 2005 +1000

    drm: Add via unichrome support
    
    Add DRM device driver for VIA Unichrome chipsets
    
    From: Unichrome Project http://unichrome.sf.net, Erdi Chen, Thomas Hellstrom    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 564c90aa07cd43dc434d46cef8a15773a23d49a2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 28 13:46:09 2005 +0100

    [PATCH] ARM SMP: Use local_flush_tlb* where we really want to be local
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 603fff54420a0ccc4c3b48bfef43896fb4e33161
Merge: 99f95e5... 8b22c24...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 28 13:40:39 2005 +0100

    [PATCH] ARM SMP: TLB implementations only affect local CPU
    
    The existing TLB flush implementations only have an effect on
    the local CPU.  Prefix them with local_.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b1bdfbd0a29d6da4dbe42736faac02c43a9afe76
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 28 21:01:46 2005 +1000

    [PATCH] remove duplicate printf in arch/ppc64/boot/main.c
    
    initrd size is printed as hex, add a missing 0x
    remove a duplicate printf when initrd is used.
    remove use of kernel type to access the first bytes of the initrd memarea.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e6019db5a7f110839c62cefc073b6dc1143d6403
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 28 21:01:35 2005 +1000

    [PATCH] remove printk usage in arch/ppc64/boot/prom.c
    
    remove the printk usage in the zImage. we are not there, yet.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a58dfbbb2a350808253a8b5037f5ec5b9a68516d
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 28 21:01:28 2005 +1000

    [PATCH] remove unused arch/ppc64/boot/mknote.c
    
    mknote is not called in arch/ppc64/boot/Makefile
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 45891f7660c02fdd7b044a04d71b965c795e9df5
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 28 21:01:21 2005 +1000

    [PATCH] remove unused arch/ppc64/boot/piggyback.c
    
    piggyback is not called in arch/ppc64/boot/Makefile
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f5f1cc5437961a4bd93d615099f26780819e72d3
Author: Nathan Lynch <ntl@pobox.com>
Date:   Tue Jun 28 20:55:25 2005 +1000

    [PATCH] ppc64: don't create spurious symlinks under node0 sysdev
    
    On partitioned systems we can wind up creating spurious symlinks in
    /sys/devices/system/node/node0 to non-present cpus.  The symlinks are
    not broken; the problem is that we're potentially misinforming
    userspace that there is a relationship between node0 and cpus which
    are to be added later.  There's no guarantee at all that a cpu which
    is added later will belong to node 0.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a341ad97245d01c923995cfe7deacd0c8aee6e16
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Jun 28 20:33:49 2005 +1000

    [PATCH] ppc64: simplify nvram partition scanning code
    
    Convert nvram_create_os_partition to use list_for_each_entry
    instead of list_for_each, as this reduces the code size by
    two lines.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8644d2a42bdba2d513f71c07eaf1b6f9b718b8eb
Merge: 1cde8a1... 99f95e5...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 27 22:07:56 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 1cde8a16815bd85c8137d1ea556398983c597c11
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 23 17:35:56 2005 -0700

    [PATCH] PCI: use the MCFG table to properly access pci devices (x86-64)
    
    Now that we have access to the whole MCFG table, let's properly use it
    for all pci device accesses (as that's what it is there for, some boxes
    don't put all the busses into one entry.)
    
    If, for some reason, the table is incorrect, we fallback to the "old
    style" of mmconfig accesses, namely, we just assume the first entry in
    the table is the one for us, and blindly use it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d57e26ceb7dbf44cd08128cb6146116d4281b58b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 23 17:35:56 2005 -0700

    [PATCH] PCI: use the MCFG table to properly access pci devices (i386)
    
    Now that we have access to the whole MCFG table, let's properly use it
    for all pci device accesses (as that's what it is there for, some boxes
    don't put all the busses into one entry.)
    
    If, for some reason, the table is incorrect, we fallback to the "old
    style" of mmconfig accesses, namely, we just assume the first entry in
    the table is the one for us, and blindly use it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 545493917dc90298e1c38f018ad893f5518928e7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 23 17:35:56 2005 -0700

    [PATCH] PCI: add proper MCFG table parsing to ACPI core.
    
    This patch is the first step in properly handling the MCFG PCI table.
    It defines the structures properly, and saves off the table so that the
    pci mmconfig code can access it.  It moves the parsing of the table a
    little later in the boot process, but still before the information is
    needed.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d18c3db58bc544fce6662ca7edba616ca9788a70
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 23 17:35:56 2005 -0700

    [PATCH] PCI: make drivers use the pci shutdown callback instead of the driver core callback.
    
    Now we can change the pci core to always set this pointer, as pci drivers
    should use it, not the driver core callback.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4002307d2b563a6ab317ca4d7eb1d201a6673d37
Author: Keith Moore <keithmo@exmsft.com>
Date:   Thu Jun 2 12:42:37 2005 +0200

    [PATCH] cpqphp: fix oops during unload without probe
    
    drivers/pci/hotplug/cpqphp_core.c calls cpqphp_event_start_thread()
    in one_time_init(), which is called whenever the hardware is probed.
    Unfortunately, cpqphp_event_stop_thread() is *always* called when
    the module is unloaded. If the hardware is never probed, then
    cpqphp_event_stop_thread() tries to manipulate a couple of
    uninitialized mutexes.
    
    Signed-off-by: Keith Moore <keithmo@exmsft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 70549ad9cf074e12f12cdc931b29b2616dfb873a
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 6 23:07:46 2005 -0700

    [PATCH] PCI: clean up the MSI code a bit.
    
    Mostly just cleans up the irq handling logic to be smaller and a bit more
    descriptive as to what it really does.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bb4a61b6eaee01707f24deeefc5d7136f25f75c5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 6 23:07:46 2005 -0700

    [PATCH] PCI: fix up errors after dma bursting patch and CONFIG_PCI=n
    
    With CONFIG_PCI=n:
    
    In file included from include/linux/pci.h:917,
                     from lib/iomap.c:6:
    include/asm/pci.h:104: warning: `enum pci_dma_burst_strategy' declared inside parameter list
    include/asm/pci.h:104: warning: its scope is only this definition or declaration, which is probably not what you want.
    include/asm/pci.h: In function `pci_dma_burst_advice':
    include/asm/pci.h:106: dereferencing pointer to incomplete type
    include/asm/pci.h:106: `PCI_DMA_BURST_INFINITY' undeclared (first use in this function)
    include/asm/pci.h:106: (Each undeclared identifier is reported only once
    include/asm/pci.h:106: for each function it appears in.)
    make[1]: *** [lib/iomap.o] Error 1
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e24c2d963a604d9eaa560c90371fa387d3eec8f1
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 2 12:55:50 2005 -0700

    [PATCH] PCI: DMA bursting advice
    
    After seeing, at best, "guesses" as to the following kind
    of information in several drivers, I decided that we really
    need a way for platforms to specifically give advice in this
    area for what works best with their PCI controller implementation.
    
    Basically, this new interface gives DMA bursting advice on
    PCI.  There are three forms of the advice:
    
    1) Burst as much as possible, it is not necessary to end bursts
       on some particular boundary for best performance.
    
    2) Burst on some byte count multiple.  A DMA burst to some multiple of
       number of bytes may be done, but it is important to end the burst
       on an exact multiple for best performance.
    
       The best example of this I am aware of are the PPC64 PCI
       controllers, where if you end a burst mid-cacheline then
       chip has to refetch the data and the IOMMU translations
       which hurts performance a lot.
    
    3) Burst on a single byte count multiple.  Bursts shall end
       exactly on the next multiple boundary for best performance.
    
       Sparc64 and Alpha's PCI controllers operate this way.  They
       disconnect any device which tries to burst across a cacheline
       boundary.
    
       Actually, newer sparc64 PCI controllers do not have this behavior.
       That is why the "pdev" is passed into the interface, so I can
       add code later to check which PCI controller the system is using
       and give advice accordingly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2311b1f2bbd36fa5f366a7448c718b2556e0f02c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri May 13 17:44:10 2005 +1000

    [PATCH] PCI: fix-pci-mmap-on-ppc-and-ppc64.patch
    
    This is an updated version of Ben's fix-pci-mmap-on-ppc-and-ppc64.patch
    which is in 2.6.12-rc4-mm1.
    
    It fixes the patch to work on PPC iSeries, removes some debug printks
    at Ben's request, and incorporates your
    fix-pci-mmap-on-ppc-and-ppc64-fix.patch also.
    
    Originally from Benjamin Herrenschmidt <benh@kernel.crashing.org>
    
    This patch was discussed at length on linux-pci and so far, the last
    iteration of it didn't raise any comment.  It's effect is a nop on
    architecture that don't define the new pci_resource_to_user() callback
    anyway.  It allows architecture like ppc who put weird things inside of
    PCI resource structures to convert to some different value for user
    visible ones.  It also fixes mmap'ing of IO space on those archs.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0d399a808916d22c1c222c6b5ca4e8edd6d91a9
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Apr 28 00:25:59 2005 -0700

    [PATCH] ACPI based I/O APIC hot-plug: acpiphp support
    
    This patch adds PCI based I/O xAPIC hot-add support to ACPIPHP
    driver. When PCI root bridge is hot-added, all PCI based I/O xAPICs
    under the root bridge are hot-added by this patch. Hot-remove support
    is TBD.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e888adc41ffc02b700ade715c182a17e766af84
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Apr 28 00:25:58 2005 -0700

    [PATCH] ACPI based I/O APIC hot-plug: ia64 support
    
    This is an ia64 implementation of acpi_register_ioapic() and
    acpi_unregister_ioapic() interfaces.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b1bb248a5d2230a3d8ef42199c742194a8580b15
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Apr 28 00:25:58 2005 -0700

    [PATCH] ACPI based I/O APIC hot-plug: add interfaces
    
    This patch adds the following new interfaces for I/O xAPIC
    hotplug. The implementation of these interfaces depends on each
    architecture.
    
        o int acpi_register_ioapic(acpi_handle handle, u64 phys_addr,
    			       u32 gsi_base);
    
            This new interface is to add a new I/O xAPIC specified by
            phys_addr and gsi_base pair. phys_addr is the physical address
            to which the I/O xAPIC is mapped and gsi_base is global system
            interrupt base of the I/O xAPIC. acpi_register_ioapic returns
            0 on success, or negative value on error.
    
        o int acpi_unregister_ioapic(acpi_handle handle, u32 gsi_base);
    
            This new interface is to remove a I/O xAPIC specified by
            gsi_base. acpi_unregister_ioapic returns 0 on success, or
            negative value on error.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8d50e332c8bd4f4e8cc76e8ed7326aa6f18182aa
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:57 2005 -0700

    [PATCH] acpi hotplug: decouple slot power state changes from physical hotplug
    
    Current acpiphp code does not distinguish between the physical presence and
    power state of a device/slot.  That is, if a device has to be disabled, it
    also tries to physically ejects the device.  This patch decouples power state
    from physical presence.  You can now echo to the corresponding sysfs power
    control file to repeatedly enable and disable a device without having to
    physically re-insert it.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8e7561cfbdf00fb1cee694cef0e825d0548aedbc
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:56 2005 -0700

    [PATCH] acpi hotplug: aCPI based root bridge hot-add
    
    acpiphp changes to support acpi based root bridge hot-add.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f523b15901f654a9448bbd47ebe1e783ec3195b
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:55 2005 -0700

    [PATCH] acpi hotplug: fix slot power-down problem with acpiphp
    
    Earlier I reported that Matthew's acpiphp rewrite had problem in powering down
    slot on my i386 system.  The following patch is needed to get the acpiphp
    rewrite properly powering down the slot.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 364d5094a43ff2ceff3d19e40c4199771cb6cb8f
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:54 2005 -0700

    [PATCH] acpi hotplug: clean up notify handlers on acpiphp unload
    
    A root bridge may not have directly attached hotpluggable slots under it.
    Instead, it may have p2p bridges with slots under it.  In this case, we need
    to clean up the p2p bridges and slots properly too.  Patch below applies on
    top of the original patch, and fixes this problem.  Without this, acpiphp
    leaves behind notify handlers on module unload, and subsequent module load
    attempts don't work properly too.  Patch was tested on an ia64 Tiger4 box.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 42f49a6ae5dca90cd0594475502bf1c43ff1dc07
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:53 2005 -0700

    [PATCH] acpi hotplug: convert acpiphp to use generic resource code
    
    This patch converts acpiphp to use the generic PCI resource assignment code.
    It's quite large, but most of it is deleting the acpiphp_pci and acpiphp_res
    files.  It's tested on an hp Integrity rx8620 (which won't work without this
    patch).  Testers with other hardware welcomed.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ce448e5fae62689b06027b46f470b944e5c2193
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:53 2005 -0700

    [PATCH] acpi bridge hotadd: Export the interface to get PCI id for an ACPI handle
    
    Export an acpi interface to get PCI domain/bus/devfn information from the
    corresponding namespace handle.  Used by acpiphp code to transpate the device
    handle of the hot-plugged root bridge to the corresponding pci location
    information.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3fb02738b0fd36f47710a2bf207129efd2f5daa2
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:52 2005 -0700

    [PATCH] acpi bridge hotadd: Allow ACPI .add and .start operations to be done independently
    
    Create new interfaces to recursively add an acpi namespace object to the acpi
    device list, and recursively start the namespace object.  This is needed for
    ACPI based hotplug of a root bridge hierarchy where the add operation must be
    performed first and the start operation must be performed separately after the
    hot-plugged devices have been properly configured.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7d473d919627262816459f8dba70d72812be074
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:51 2005 -0700

    [PATCH] acpi bridge hotadd: Read bridge resources when fixing up the bus
    
    Read bridge io/mem/pfmem ranges when fixing up the bus so that bus resources
    are tracked.  This is required to properly support pci end device and bridge
    hotplug.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 542df5de56a23bf2d94b75e2b304ab0e5a5508a8
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:50 2005 -0700

    [PATCH] acpi bridge hotadd: Remove hot-plugged devices that could not be allocated resources
    
    When hot-plugging an I/O hierarchy that contains many bridges and leaf
    devices, it's possible that there are not enough resources to start all the
    device present.  If we fail to assign a resource, clear the corresponding
    value in the pci_dev structure, so other code can take corrective action.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 091ca9f06382e46d77213c35a97f7d0be9e350d2
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:49 2005 -0700

    [PATCH] acpi bridge hotadd: Make the PCI remove routines safe for failed hot-plug
    
    When a root bridge hierarchy is hot-plugged, resource requirements for the new
    devices may be greater than what the root bridge is decoding.  In this case,
    we want to remove devices that did not get needed resources.  These devices
    have been scanned into bus specific lists but not yet added to the global
    device list.  Make sure the pci remove functions can handle this case.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6ef6f0e33c4645fc8d23201ad5a6a289b4303cbb
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:49 2005 -0700

    [PATCH] acpi bridge hotadd: Link newly created pci child bus to its parent on creation
    
    When a pci child bus is created, add it to the parent's children list
    immediately rather than waiting till pci_bus_add_devices().  For hot-plug
    bridges/devices, pci_bus_add_devices() may be called much later, after they
    have been properly configured.  In the meantime, this allows us to use the
    normal pci bus search functions for the hot-plug bridges/buses.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e4ea9bb7e9f177e03a917b1f1213de0315f819ee
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:48 2005 -0700

    [PATCH] acpi bridge hotadd: Take the PCI lock when modifying pci bus or device lists
    
    With root bridge and pci bridge hot-plug, new buses and devices can be added
    or removed at run time.  Protect the pci bus and device lists with the pci
    lock when doing so.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc57450f5c044270d2cf1dd437c1850422262109
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:47 2005 -0700

    [PATCH] acpi bridge hotadd: Prevent duplicate bus numbers when scanning PCI bridge
    
    When hot-plugging a root bridge, as we try to assign bus numbers we may find
    that the hotplugged hieratchy has more PCI to PCI bridges (i.e.  bus
    requirements) than available.  Make sure we don't step over an existing bus
    when that happens.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 71c3511c22e8e0648094672abec898b3bf84c18b
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:46 2005 -0700

    [PATCH] acpi bridge hotadd: Make pcibios_fixup_bus() hot-plug safe
    
    PCI scan code calls the arch specific pcibios_fixup_bus() each time it scans a
    new bridge.  For root bridge hot-plug, the bridge and it's attached devices
    may not have been configured properly yet, so it's not safe to claim those
    resources at this time.
    
    This code goes away when we clean up the way pci resources are claimed (in
    pci_enable_device()), so this is only a stopgap fix.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fab3fb0ac8c83072465b28ca859c420da6c6511c
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:45 2005 -0700

    [PATCH] acpi bridge hotadd: Fix pci_enable_device() for p2p bridges
    
    When checking if a PCI to PCI bridge should be enabled to decode memory and/or
    IO resources, we need to look at all device resources not just the first 6.
    This is needed to allow PCI bridges to pass down memory and IO accesses to
    child devices even when the bridge itself does not consume resources in its
    PCI BARs.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c431ada45d65b305a6aab4557067e564b23ce5a5
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Thu Apr 28 00:25:45 2005 -0700

    [PATCH] acpi bridge hotadd: ACPI based root bridge hot-add
    
    When you hot-plug a (root) bridge hierarchy, it may have p2p bridges and
    devices attached to it that have not been configured by firmware.  In this
    case, we need to configure the devices before starting them.  This patch
    separates device start from device scan so that we can introduce the
    configuration step in the middle.
    
    I kept the existing semantics for pci_scan_bus() since there are a huge number
    of callers to that function.
    
    Also, I have no way of testing the changes I made to the parisc files, so this
    needs review by those folks.  Sorry for the massive cross-post, this touches
    files in many different places.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit efe1ec27837d6639eae82e1f5876910ba6433c3f
Author: Amit Gud <gud@eth.net>
Date:   Tue Apr 12 19:04:27 2005 +0530

    [PATCH] pci: remove deprecates
    
    Replace pci_find_device() with more safer pci_get_device().
    
    Signed-off-by: Amit Gud <gud@eth.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 881a8c120acf7ec09c90289e2996b7c70f51e996
Author: Amit Gud <gud@eth.net>
Date:   Tue Apr 12 19:03:33 2005 +0530

    [PATCH] pci: remove deprecates
    
    Replace pci_find_device() with more safer pci_get_device().
    
    Signed-off-by: Amit Gud <gud@eth.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 120bb4246a99cc6e9cc976573fcbcd0ee9d544ef
Author: jayalk@intworks.biz <jayalk@intworks.biz>
Date:   Mon Mar 21 20:20:42 2005 -0800

    [PATCH] PCI Allow OutOfRange PIRQ table address
    
    I updated this to remove unnecessary variable initialization, make
    check_routing be inline only and not __init, switch to strtoul, and
    formatting fixes as per Randy Dunlap's recommendations.
    
    I updated this to change pirq_table_addr to a long, and to add a warning
    msg if the PIRQ table wasn't found at the specified address, as per thread
    with Matthew Wilcox.
    
    In our hardware situation, the BIOS is unable to store or generate it's PIRQ
    table in the F0000h-100000h standard range. This patch adds a pci kernel
    parameter, pirqaddr to allow the bootloader (or BIOS based loader) to inform
    the kernel where the PIRQ table got stored. A beneficial side-effect is that,
    if one's BIOS uses a static address each time for it's PIRQ table, then
    pirqaddr can be used to avoid the $pirq search through that address block each
    time at boot for normal PIRQ BIOSes.
    
    Signed-off-by: Jaya Kumar <jayalk@intworks.biz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c36ad397a30fcf9369d82584324cc24189eb6b1c
Merge: c903e41... 99f95e5...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jun 28 00:46:22 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 0a139e79976b9eb60517edec63406236a789f812
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Jun 26 23:52:50 2005 +0900

    [PATCH] libata: ahci: remove ata_port_start/stop() calls
    
    This patch removes unnecessary ata_port_start/stop() calls from
    ahci_port_start/stop().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 62ba2841f2a51848f7cb0499edae3f6803764f2c
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Jun 26 23:27:19 2005 +0900

    [PATCH] libata: lengthen COMMRESET delay
    
    This patch lengthens the delay between DET setting and clearing for
    COMMRESET from 400us to 1ms.  I couldn't find any requiremen regarding
    the duration of COMMRESET in SATA I/II specs but AHCI-1.1 10.4.2
    states that it should be at least 1ms.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e922256ae4bb6ef954bd7e0740d9753460e0ab72
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jun 28 00:03:37 2005 -0400

    libata: update DMA blacklist
    
    Contributions from Alan Cox and maximilian attems.

commit 99f95e5286df2f69edab8a04c7080d986ee4233b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 27 20:14:05 2005 -0700

    [PATCH] cfq build fix
    
    drivers/block/cfq-iosched.c: In function 'cfq_put_queue':
    drivers/block/cfq-iosched.c:303: sorry, unimplemented: inlining failed in call to 'cfq_pending_requests': function body not available
    drivers/block/cfq-iosched.c:1080: sorry, unimplemented: called from here
    drivers/block/cfq-iosched.c: In function '__cfq_may_queue':
    drivers/block/cfq-iosched.c:1955: warning: the address of 'cfq_cfqq_must_alloc_slice', will always evaluate as 'true'
    make[1]: *** [drivers/block/cfq-iosched.o] Error 1
    make: *** [drivers/block/cfq-iosched.o] Error 2
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c903e41e67046e7f52bbc404bd5aa654d12540cc
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Mon Jun 27 23:23:05 2005 -0400

    drivers/net/at1700: remove incorrect comment
    
    "Allied Telesis RE1000 Plus" is not supported at all
    by kernel 2.6.12.
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>

commit 8b2af8f0ca807eb13b59dc5961d2e99fc2b1bd87
Author: Edward Falk <efalk@google.com>
Date:   Wed Jun 15 14:26:39 2005 -0700

    [PATCH] Minor libata documentation patch
    
    I fleshed out libata.tmpl a bit while I was taking notes.

commit 6e5a32754c67f0d156c2f196d604b2e9129a1fd5
Merge: b6d00f0... 63b6145...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 20:10:18 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit cac8c81a59bd3b6815871b3172e8ccf15a3431e0
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon May 16 19:15:11 2005 +0200

    [PATCH] Use pci_set_dma_mask() instead of direct assignment of DMA mask
    
    The amd8111e driver directly assigns the DMA mask to the dma_mask
    member of the struct pci_dev instead of using pci_set_dma_mask(). This
    makes the call to pci_dma_supported() redundant as pci_set_dma_mask()
    does this check.
    
    I do not own this device so I only compile-tested this patch.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>

commit 5f13e7ec5c1d98f4a63a3a79e66b2b121051f5ac
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 16 08:53:52 2005 -0700

    [PATCH] smc91x needs settable IRQ trigger type
    
    For boards that invert the SMC91x IRQ line (maybe an FPGA inverts it),
    the set_irq_type() call can't assume IRQT_RISING.  These particular
    boards currently use OMAP-specific calls to change the trigger type,
    but the boards break when set_irq_type() stops being a NOP.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>

commit a5fe736eaf9bae1b45317313de04b564441b94f2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jun 27 22:47:18 2005 -0400

    Update is_multicast_ether_addr() definition; net/ieee80211.h cleanups.

commit 1bad3f4050b2a641bbfeaddb2717b28247311e9c
Merge: 747802a... c7b645f...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Mon Jun 27 22:05:03 2005 -0400

    Merge /spare/repo/linux-2.6/

commit b6d00f0de9e932e2884b3b7af8e43c0a61a271ee
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:29:02 2005 -0700

    [PATCH] ACPI-based PCI resources: PCMCIA bugfix, but resources missing in trees
    
    Don't auto-configure yenta sockets for PCMCIA devices if it is connected to
    the root PCI bus on the x86 or x86_64 architectures.  Previously, this was
    handled by the "ioport_resource"/"iomem_resource" check a few lines below,
    but with the new ACPI-based resource handling this doesn't catch all cases
    any longer.
    
    pci-yenta-cardbus-fix.patch and this patch should solve the initialization
    time trouble.  However, the ACPI-based PCI resource handling is badly
    broken, IMHO:
    
    - many resources of devices don't show up in the resource trees (
      /proc/iomem and /proc/ioports) any longer. This means that PCMCIA, but
      also possibly other subsystems (ISA, PnP, ...) do not know which resources
      it cannot use.
    
    - verify_root_windows() should fail if there are no iomem _or_ ioport
      resources, not only if there are no iomem _and_ ioport resources.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3248ff43f86493368b321376d447d84fa9a2737d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:29:01 2005 -0700

    [PATCH] pcmcia: export modalias in sysfs
    
    Provide a "modalias" entry in sysfs for PCMCIA devices.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57b6281cea59639cce995745f1dc42fe9da2c533
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:29:01 2005 -0700

    [PATCH] pcmcia: 8 and 16 bit access for static_map
    
    The PCMCIA card services layer is never setting the i/o map attributes when
    SS_CAP_STATIC_MAP is specified.  Net result, sockets' set_io_map() calls
    always see requests with most flags clear, meaning 8 bit access.
    
    For hardware that always autosizes, that won't matter; and all current
    STATIC_MAP drivers ignore those attributes.  A new driver (for at91rm9200)
    suffers badly from this, since this forces everything into 8 bit mode and
    that breaks both (a) cards requiring 16 bit access, and (b) ide-cs; but of
    course 8-bit cards work OK (as does accessing card attributes).
    
    So this patch arranges to pass the attributes down, matching the behavior
    for non-static mappings (using the first/only I/O window).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a8ceafce5f1e68c28c7ba52fd7e72ab0008eb46
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:29:00 2005 -0700

    [PATCH] pcmcia: properly handle all errors of register_chrdev
    
    register_chrdev() can return errors (negative) other then -EBUSY, so check
    for any negative error code.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9a55243d4a5f41b0035d36457b87463aa232807
Author: Jar <jar@pcuf.fi>
Date:   Mon Jun 27 16:28:58 2005 -0700

    [PATCH] pcmcia: documentation fix
    
    Fix example hash generator in Documentation.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ad0a0a793cbd87a87488d59abc744374669498f
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:58 2005 -0700

    [PATCH] pcmcia: resource handling fixes
    
    - properly bail out in set_cis_map if call to socket driver's set_mem_map
      failed
    - don't abort do_mem_probe cycle if one entry failed (!CONFIG_PCMCIA_PROBE)
    - don't do iomem probing in chunks larger than 0x800000 (1 << 23) as
      yenta_socket and vrc4173_cardu.c fail to set_mem_map for windows equal to
      or larger than (1 << 24).
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f861bd23076efc4c86063721b9021d82481fd6b2
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:57 2005 -0700

    [PATCH] pcmcia: select crc32 in Kconfig for PCMCIA
    
    PCMCIA needs CRC32.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aecab27aeabaa897d69fc082686df314329830de
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:56 2005 -0700

    [PATCH] pcmcia: mod_devicetable.h fix for different sizes in kernel- and userspace
    
    The size of pointers may differ between (userspace) modpost and (kernelspace)
    modules -- so fix mod_devicetable.h to reflect this possibility.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c7ab67602e65b3ba7aaa81f023b034cd7458ec6
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:56 2005 -0700

    [PATCH] pcmcia: synclink_cs IRQ_INFO2_INFO is gone
    
    Remove the IRQ_INFO2_VALID flag in synclink_cs -- I overlooked it when
    removing all other users in PCMCIA drivers for 2.6.11.  Thanks to Marcelo
    Tosatti for noticing it.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f354942cb301fed273f423fb5c4f57bde3efc5b2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 27 16:28:55 2005 -0700

    [PATCH] pcmcia: use request_region in i82365
    
          Randy Dunlap <rdunlap@xenotime.net>
    
    Convert deprecated check_region() calls to request/release region.
    Add return value check on one request_region().
    
    I suspect that it may do an extra release_region(), which should
    generate a warning message from the kernel.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 378a33a686d457fa5a38d6ad134f5385a9cc7860
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:54 2005 -0700

    [PATCH] pcmcia: release_class
    
    Properly wait for the class refcount to reach zero.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3448139b41b9e3b8799eed7d427cd50789dadc3e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:54 2005 -0700

    [PATCH] pcmcia: ds.c cleanup
    
    Clean up ds.c
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33519ddd43f4adc221ee7b2801dedd19ac97540b
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:53 2005 -0700

    [PATCH] pcmcia: cs.c cleanup
    
    Clean up cs.c
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a8d46631e166a3c79fe1466ce8cfc4721fdf780
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:53 2005 -0700

    [PATCH] pcmcia: move pcmcia resource handling out of cs.c
    
    Move the 16-bit PCMICA resource handling from pcmcia_core.o to pcmcia.o.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ea0b9ec5131ac360581d6924fed536758bd024
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:52 2005 -0700

    [PATCH] pcmcia: rename some functions
    
    Rename some functions in drivers/pcmcia/ to show they belong to the PCMCIA
    subsystem.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b659fb862db02c77ea7e6db7e70b6e888681579
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:51 2005 -0700

    [PATCH] pcmcia: remove unneeded includes in ds.c
    
    Remove unnecessary includes in ds.c and pcmcia_ioctl.c
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc109497bd5799770fedfc6503119808497b3677
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:50 2005 -0700

    [PATCH] pcmcia: merge struct pcmcia_bus_socket into struct pcmcia_socket
    
    Merge struct pcmcia_bus_socket into struct pcmcia_socket.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5e43913cfe95a18ad8929585a0bb58e46cf3390
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:50 2005 -0700

    [PATCH] pcmcia: make PCMCIA status a bitfield
    
    make pcmcia_bus_socket->state a bitfield, and rename it pcmcia_state to
    prepare for struct pcmcia_bus_socket integration into struct pcmcia_socket.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90c6cdd1fa8dd4d69af792541a37b38576aa9b5a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:49 2005 -0700

    [PATCH] pcmcia: clean up cs ds callback
    
    struct pcmcia_callback isn't needed for each socket, one is enough for all
    sockets.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7a480d229461e54a0b3b0439b2bf0e652545e3d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:47 2005 -0700

    [PATCH] pcmcia: move PCMCIA ioctl to a separate file
    
    Move all PCMCIA_IOCTL-related code to a different file.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    
    From: Richard Purdie <rpurdie@rpsys.net>
    
    The pcmcia-move-pcmcia-ioctl-to-a-separate-file patch was corrupted in -mm2
    causing this problem.
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a5555b81fde402119a6b4f2b38d3373d272ff69
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:47 2005 -0700

    [PATCH] pcmcia: add a config option for the PCMICA ioctl
    
    Add a new config option to control the building of the PCMCIA IOCTL. Currently,
    it is not yet made public, though the help text is there already.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowksi.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c29976a6469b81a7858812dc2d4b8430d74004a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:46 2005 -0700

    [PATCH] pcmcia: mark parent bridge windows as resources available for PCMCIA devices
    
    Automatically mark the parent PCI-PCI bridge windows as resources available
    for PCMCIA usage.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22916638b124e859b595099bd0c86a1e09e767fb
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:46 2005 -0700

    [PATCH] pcmcia: update resource database adjust routines to use unsigned long values
    
    Make adjust_io and adjust_memory independent of adjust_t to allow for IO
    resources > x86's IO_SPACE_LIMIT.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5085cb26503a662a5cfdf53ce96fd606c1fbe9ba
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:45 2005 -0700

    [PATCH] pcmcia: add some Documentation
    
    Add some information useful for PCMCIA device driver authors to
    Documentation/pcmcia/, and reference it in dmesg in case of hash mismatches.
    
    Also add a reference to pcmciautils to Documentation/Changes.  With recent
    changes, you don't need to concern yourself with pcmcia-cs even if you have
    PCMCIA hardware, so the example above the list needed to be adapted as well.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowksi.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4d7510d3d3b4501c94b4b00cf42fd58d49aeddd
Author: Jun Komuro <komurojun-mbn@nifty.com>
Date:   Mon Jun 27 16:28:44 2005 -0700

    [PATCH] pcmcia: more IDs for TDK multifunction cards
    
    Add new pcmcia id_table for fmvj18x_cs and serial_cs.
    (TDK multi-function card (NetPartner9610 and MobileNetworker3200))
    
    Signed-off-by: Jun Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22f3a8f5fc94be4dd31c4c5ec1d1dc2b9c83a8ac
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 27 16:28:43 2005 -0700

    [PATCH] pcmcia id_table for sl811.cs
    
    Catch up with some PCMCIA API changes:
    
     - Docs say that as of 2.6.11 the PCMCIA IRQInfo2 field is ignored,
       but it's not yet removed from the API; stop using it anyway.
    
     - As of 2.6.13 PCMCIA finally hotplugs and does driver binding
       without "cardmgr"; add a MODULE_DEVICE_TABLE to support this.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4af48c8c16dfc37400f63633373dd180b5540ead
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:42 2005 -0700

    [PATCH] pcmcia: id_table for synclink_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4ed3598987845e8d45672899084df1f8448718c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:42 2005 -0700

    [PATCH] pcmcia: id_table for pdaudiocf.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77b73f9b00e3bea43ab4d30ae70fb85660dd07f1
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:41 2005 -0700

    [PATCH] pcmcia: id_table for wl3501_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 707997343a1e5193fff74798af572a4d03740476
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:41 2005 -0700

    [PATCH] pcmcia: id_table for sedlbauer_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aba14100055325c5af432fe3fd1aa5521cec3e0c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:40 2005 -0700

    [PATCH] pcmcia: id_table for nsp_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 070812734facccf2d891eec0da2497ec3824e616
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:40 2005 -0700

    [PATCH] pcmcia: id_table for ixj_pcmcia.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02ae38cfc5a49dde1ce979e710eec1d02279cb53
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:39 2005 -0700

    [PATCH] pcmcia: id_table for elsa_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88eca2e526d087797a529aad478e5e6b42188415
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:39 2005 -0700

    [PATCH] pcmcia: id_table for dtl1_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fb22bb4d044f11a675c6947eac4923b84e0289e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:38 2005 -0700

    [PATCH] pcmcia: id_table for com20020_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 279c936153199e105b96429dec11233ae153667c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:38 2005 -0700

    [PATCH] pcmcia: id_table for btuart_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a01c3ed48e3319f9a4eb4e43b8c6abe00f1a1389
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:37 2005 -0700

    [PATCH] pcmcia: id_table for bt3c_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f70cb6d9f8b0fd97215250cff797ff8c3b24f1d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:35 2005 -0700

    [PATCH] pcmcia: id_table for bluecard_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a13bcf0d5abaf21a1eb7a988915ab97152f57f78
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:35 2005 -0700

    [PATCH] pcmcia: id_table for avm_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c594c12cefa7c49f99d82cd2ccbcbf8baeb773ed
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:34 2005 -0700

    [PATCH] pcmcia: id_table for avma1_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a17a119381a5467144b18eaa954ba324e8a140b
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:34 2005 -0700

    [PATCH] pcmcia: id_table for atmel_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9a07afd9e7507ac02349b2ff59c579686dcd0fd
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:33 2005 -0700

    [PATCH] pcmcia: id_table for vxpocket.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11d28a30219671607a235a518f395659599a748e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:32 2005 -0700

    [PATCH] pcmcia: id_table for pcmciamtd.c
    
    Add pcmcia_device_id table to pcmciamtd.  The binding of anonymus cards (i.e.
    those who do neither report MANFID, CARDID, FUNCID nor product strings) is
    protected by a new config option.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c7046cd06c66bd81b285d15e422faeecdc9ca82
Author: Jun Komuro <komurojun-mbn@nifty.com>
Date:   Mon Jun 27 16:28:30 2005 -0700

    [PATCH] pcmcia: add a few more IDs for pcnet_cs
    
    Add new pcmcia id_table for pcnet_cs.  (Allied, Laneed, NextCom and Telecom
    Device)
    
    Signed-off-by: Jun Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce8a0037e110c1f4ec2fac7a3d791043e4e38cfc
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:30 2005 -0700

    [PATCH] pcmcia: id_table for pcnet_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 476835afd7fefa353e932e160c14effc67e2ba6e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:29 2005 -0700

    [PATCH] pcmcia: id_table for parport_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8f7cc03bcb52e3f4894635aa1e7b9fca2f9ec67
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:29 2005 -0700

    [PATCH] pcmcia: more IDs for ide_cs
    
    Add another ID for ide-cs
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f70b7d40d85a50c1f6d35350942501c4b0558335
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:28 2005 -0700

    [PATCH] pcmcia: id_table for ide_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff07bb19d0f605d08a9649a3f94acf3e4a79819c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:28 2005 -0700

    [PATCH] pcmcia: id_table for xirc2ps_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7422c56da9d985234e0b62307cbbd0dcf9b97593
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:27 2005 -0700

    [PATCH] pcmcia: id_table for orinoco_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c672220694345ee5c3f2cf0becd3bd27dd663ad
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:27 2005 -0700

    [PATCH] pcmcia: id_table for smc91c92_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a5a6eeb6de79ab36ef1fceae8cc3c334b43fddc
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:26 2005 -0700

    [PATCH] pcmcia: id_table for qlogic_stub.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a355d07f2196d1d17aeebaa29a743f90e53dbd7
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:25 2005 -0700

    [PATCH] pcmcia: id_table for sym53c500_cs.c
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b942123bcd6430afbb4d4c541bd6df996f02a68f
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:25 2005 -0700

    [PATCH] pcmcia: id_table for wavelan_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f57ea2a23245ba6db68f6a84ae903b3901965ade
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:24 2005 -0700

    [PATCH] pcmcia: id_table for ray_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a10d73dad86a023f343f80cc9cb71ea4e140192
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:24 2005 -0700

    [PATCH] pcmcia: id_table for teles_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a58e26cb1163353d8a9b9cfd0d3f35df34f63141
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:23 2005 -0700

    [PATCH] pcmcia: id_table for nmclan_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d402e95ebf8cc2fbf0e59e8424d65fe7847ad34
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:23 2005 -0700

    [PATCH] pcmcia: id_table for netwave_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 469bf2b9389c9265ac0920da5b1a5c71fe496213
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:22 2005 -0700

    [PATCH] pcmcia: id_table for ibmtr_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cda4de8e1e51d55f02c64210ddbaca73997f890d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:22 2005 -0700

    [PATCH] pcmcia: id_table for fmvj18x_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d1fb37621f40863929b60950406ec84d52bba16
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:21 2005 -0700

    [PATCH] pcmcia: id_table for fdomain_stub
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c414f7550fedc0860a6cc65491006be49ac80edd
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:20 2005 -0700

    [PATCH] pcmcia: id_table for axnet_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7018d06d2371d67bdc995160fe2d38c6421b7c74
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:20 2005 -0700

    [PATCH] pcmcia: id_table for airo_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dc27daa58ac579bff7d60043a23abd5e237cdda
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:19 2005 -0700

    [PATCH] pcmcia: id_table for aha152x
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ffec58c1e35c1e8f716c64e4860dbb00be4b221
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:19 2005 -0700

    [PATCH] pcmcia: id_table for 3c589_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 270b6e94181d838194f621e773b9ab534371e618
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:18 2005 -0700

    [PATCH] pcmcia: id_table for 3c574_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 325aa29fe50eabe487efe360426c01eb42825e60
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:18 2005 -0700

    [PATCH] pcmcia: id_table for serial_cs
    
    Add pcmcia_device_id table.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2f0b5344161dabfab102ac0a54f330f61477972
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:17 2005 -0700

    [PATCH] pcmcia: rescan bus always upon echoing into setup_done
    
    Always rescan the devices upon echo'ing something to
    available_resources_setup_done.  This is needed for proper "coldplug" support.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e94e15f70559962f60915a09d44658b73a453fe2
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:15 2005 -0700

    [PATCH] pcmcia: cleanups
    
    From: Adrian Bunk <bunk@stusta.de>
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove the following unneeded EXPORT_SYMBOL's:
      - ds.c: pcmcia_report_error
      - ds.c: pcmcia_bus_type
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daa9517d9eccc3598b2b0cdfa0b016ae4a4fcdce
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:14 2005 -0700

    [PATCH] pcmcia: request CIS via firmware interface
    
    Use the firmware method to load replacement CIS tables.  It is recommended
    that the /lib/firmware/cis/ points to /etc/pcmcia/cis or the other way round
    so that both old-style cardmgr and new-style hotplug/firmware can access these
    "overwrite" files
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90829cfe1df2466c98a831f6c44f71026665cec1
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:12 2005 -0700

    [PATCH] pcmcia: file2alias
    
    Create PCMCIA entries in modules.alias
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5b5577898d9330a78dea1c9e75da1540c36bf72
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:10 2005 -0700

    [PATCH] pcmcia: allow function-ID based match
    
    The "func_id"-based matching is very fuzzy and can lead to false positives.
    Therefore, it should be tried to avoid relying on these matches.  Until
    most/all existing func_id-based matches are replaced by
    manf_id/card_id/prod_id matches (a patch which will ask to send the
    appropriate card information to the PCMCIA mailing list will be added once
    other, more pressing issues are adressed), we need to emulate cardmgr
    behaviour by allowing func_id matches if no manf_id/card_id/prod_id match
    occurs.  This can only be done in userspace because of modules possibly loaded
    with long delays.  So, add a per-device sysfs file for this purpose.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Brice Goglin <Brice.Goglin@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f602ff7eb4e44e7245bfeeba4d078144703fcd76
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:09 2005 -0700

    [PATCH] pcmcia: match "anonymous" cards
    
    If a card doesn't provide _any_ information about itself, assume it is a
    so-called "anonymous" card.  pcmciamtd will bind to it if it is configured to
    do so.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff1fa9ef3c9fb23a6baa06b63f4bdf3de089b29a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:09 2005 -0700

    [PATCH] pcmcia: CIS overrid via sysfs
    
    The one thing which surprises me in this patch that cis->Length needs to be
    set to count+1.  Without it, it doesn't work, but with it, it doesn't make
    sense to me.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f299bccb422d707be3b074f9a669b34cb207a14
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:08 2005 -0700

    [PATCH] pcmcia: export CIS in sysfs
    
    Export the CIS to userspace using a sysfs binary file in
    /sys/class/pcmcia_socket/pcmcia_scoket%n/
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea7b38825bba66a81745a706da70a1c81adc95bd
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:07 2005 -0700

    [PATCH] pcmcia: match for fake CIS
    
    Add another match flag for devices needing a CIS override.  The driver will
    only probe/attach if the CIS has been replaced before.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23a83bfe6ab51c745d109d979c78a96fe3e93f5c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:07 2005 -0700

    [PATCH] pcmcia: check for invalid crc32 hashes in id_tables
    
    Check for invalid crc32 hashes in drivers' id_tables if CONFIG_PCMCIA_DEBUG is
    set.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ad275e3e7d253d44f03868e85977c908e334fed
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:06 2005 -0700

    [PATCH] pcmcia: device and driver matching
    
    The actual matching of pcmcia drivers and pcmcia devices.  The original
    version of this was written by David Woodhouse.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ee13937525f6044d769b1a84d5db5669ac1959e
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:05 2005 -0700

    [PATCH] pcmcia: hotplug event for PCMCIA socket devices
    
    Generate hotplug event for PCMCIA sockets being registered.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 840c2ac5d3c1d50e8a181e3f661da814e89c8cf8
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Jun 27 16:28:04 2005 -0700

    [PATCH] pcmcia: hotplug event for PCMCIA devices
    
    Export information to /sbin/hotplug for PCMCIA devices: card_id, manf_id,
    func_id, bus_id (like pcmcia1.0) and crc32-hashes of the prod_id strings.
    
    Why not the prod_id strings themselves?
    
    a) They may contain all sorts of strange and difficult to handle characters,
       like " ".
    
    b) It's impossible to pass multiple strings to userspace.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7925407aa02653ba462b1d8b0b1229b99aee5411
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Jun 27 16:28:02 2005 -0700

    [PATCH] pci: yenta cardbus fix
    
    On Mon, Jun 20, 2005 at 07:15:34PM +1000, Grant Coady wrote:
    > Yenta: CardBus bridge found at 0000:00:0b.0 [1179:0001]
    > yenta 0000:00:0b.0: Preassigned resource 0 busy, reconfiguring...
    
    In -mm1 the cardbus resources might be assigned in
    pci_assign_unassigned_resources() pass. From your dmesg:
    PCI: Bus 2, cardbus bridge: 0000:00:0b.0
      IO window: 00002000-00002fff
      IO window: 00003000-00003fff
      PREFETCH window: 12000000-13ffffff
      MEM window: 14000000-15ffffff
    
    Then yenta_allocate_res() tries to assign these resources again and,
    naturally, fails.
    
    This adds check for already assigned cardbus resources.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c803e8e2f15d02c5ad0a3888eea2bbd31dc59c5
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 17:49:45 2005 -0700

    Commit the manual part of the input layer merge.
    
    git did actually warn me about the fact that I hadn't actually done an
    "update-cache" on these two files, but the warning was at the bottom of
    a list of all the files that _did_ change in the merge, so I never
    noticed.  My bad.

commit c47abbbffd17a7e774ec1ef952a1c3621a9cb13b
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:31 2005 -0700

    [PATCH] ide: sensible probing for PCI systems
    
    Old ISA/VESA systems sometimes put tertiary IDE controllers at addresses
    0x1e8, 0x168, 0x1e0 or 0x160.  Linux thus probes these addresses on x86
    systems.  Unfortunately some PCI systems now use these addresses for other
    purposes which leads to users seeing minute plus hangs during boot or even
    crashes.
    
    The following patch (again has been in Fedora for a while) only probes the
    obscure legacy ISA ports on machinea that are pre-PCI.  This seems to keep
    everyone happy and if there is someone with that utterly weird corner case
    the ide= command line still provides a get out of jail card.
    Unsurprisingly we've not found anyone so affected.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da9091ee3b5f9808c64abb925cefe7b100018614
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:30 2005 -0700

    [PATCH] ide: it8212 backport for Bartlomiej IDE
    
    This lets you throw out the iteraid stuff that has ended up back in due
    to stupid goings on in the IDE world. Its the same heavily tested code
    shipped in Fedora/Red Hat products but without the other dependancies on
    the Bartlomiej IDE layer.
    
    Pre-requisite: the ide-disk patch I sent to handle pure LBA devices.
    
    Obviously you lose things like hot unplug with the Bartlomiej IDE layer
    at the moment but that won't matter to most users.
    
    The patch does the following
    - Add IT8211/12 to pci_ids.h
    - Add Makefile/Kconfig entry
    - Add it8212 driver
    
    No core IDE code is touched by this diff
    
    Embedded system testing and the ability to force raid mode off by David
    Howells
    
    Made possible by the ite reference code, documentation and also several
    clarifications and pieces of assistance provided by ITE themselves
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb732d7b3699afe8859f27e93000860bb4103cca
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:29 2005 -0700

    [PATCH] ide: fix crashes with hotplug serverworks
    
    You can't install the base kernel on a Stratus box because of the overuse of
    __init.  Affects both IDE layers identically.  It isn't the only misuser of
    __init so more review of other drivers (or fixing ide_register code to know
    about hotplug v non-hotplug chipsets) would be good.
    
    Original issue found by Stratus and their patch was the inspiration for this
    trivial one.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b39b01ffb75e14ed76510e4229ffb575007df0fb
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:27 2005 -0700

    [PATCH] ide: fix the HPT366 driver layer
    
    The highpoint driver is unreadable, buggy and crashes on some chipsets.  The
    -ac one is more readable (but not ideal) and doesn't crash all over the place.
     Been in Fedora for some time.
    
    Backported from the Fedora one to the old Bartlomiej IDE core.  No other
    dependencies.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b189346cd10e28fa080347591066f0688405faee
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:26 2005 -0700

    [PATCH] ide: ide-generic, allow for capture of other unsupported devices
    
    The ide-generic driver gives you DMA at bios tuned speed so can actually run a
    lot of unsupported devices quite well.  It has a pci table so that it doesn't
    grab disks owned by other drivers but no way to override this.  The patch adds
    an option ide-generic-all which makes the driver grab everything going that is
    IDE class.
    
    The diff is messy because I put the special case as case 0 to make the if
    conditional and long term maintenance easier.
    
    This has been in Fedora for some time.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68ad9910b0525d0194f9c316c7cb14adbf8e0c0c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:25 2005 -0700

    [PATCH] ide: IDE timing violation on reset
    
    Pretty much theoretical for non MMIO thankfully.  We _must_ use OUTBSYNC for
    commands or they may be posted and thus ruin the 400nS required delay.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58ecd15652979f2001dc296dcfd303cc1bd33ce7
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:24 2005 -0700

    [PATCH] ide: samsung SN-124 works perfectly well with DMA
    
    Been in Red Hat products for ages
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6efd936046b123303ace4330fd2f26195ad7b1c4
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 27 15:24:22 2005 -0700

    [PATCH] ide: fix ide-disk inability to handle LBA only devices.
    
    Years old bug, has to be fixed for it8212 to work
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63b614522cba5a015923c0e8f284be6e01c13f1a
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 27 17:04:45 2005 -0700

    [SPARC64]: Get rid of fast IRQ feature.
    
    The only real user was the assembler floppy interrupt
    handler, which does not need to be in assembly.
    
    This makes it so that there are less pieces of code which
    know about the internal layout of ivector_table[] and
    friends.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b445e26cbf784cdba10f2b6c3e2cd3ee7bab360a
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 27 15:42:04 2005 -0700

    [SPARC64]: Avoid membar instructions in delay slots.
    
    In particular, avoid membar instructions in the delay
    slot of a jmpl instruction.
    
    UltraSPARC-I, II, IIi, and IIe have a bug, documented in
    the UltraSPARC-IIi User's Manual, Appendix K, Erratum 51
    
    The long and short of it is that if the IMU unit misses
    on a branch or jmpl, and there is a store buffer synchronizing
    membar in the delay slot, the chip can stop fetching instructions.
    
    If interrupts are enabled or some other trap is enabled, the
    chip will unwedge itself, but performance will suffer.
    
    We already had a workaround for this bug in a few spots, but
    it's better to have the entire tree sanitized for this rule.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7b645f934e52a54af58142d91fb51f881f8ce26
Author: Keshavamurthy Anil S <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 27 15:17:16 2005 -0700

    [PATCH] kprobes/ia64: refuse kprobe on ivt code
    
    Not safe to insert kprobes on IVT code.
    
    This patch checks to see if the address on which Kprobes is being inserted is
    in ivt code and if it is in ivt code then refuse to register kprobe.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Acked-by: David Mosberger <davidm@napali.hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a528e21c235862cc1ae50e7809eb9116dc40ea0c
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:15 2005 -0700

    [PATCH] kprobes/ia64: refuse inserting kprobe on slot 1
    
    Without the ability to atomically write 16 bytes, we can not update the
    middle slot of a bundle, slot 1, unless we stop the machine first.  This
    patch will ensure the ability to robustly insert and remove a kprobe by
    refusing to insert a kprobe on slot 1 until a mechanism is in place to
    safely handle this case.
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97f7943d70ff0e1e92ea627c44cfacfdae65dbc4
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:15 2005 -0700

    [PATCH] Return probe redesign: ppc64 specific implementation
    
    The following is a patch provided by Ananth Mavinakayanahalli that implements
    the new PPC64 specific parts of the new function return probe design.
    
    NOTE: Since getting Ananth's patch, I changed trampoline_probe_handler()
          to consume each of the outstanding return probem instances (feedback
          on my original RFC after Ananth cut a patch), and also added the
          arch_init() function (adding arch specific initialization.) I have
          cross compiled but have not testing this on a PPC64 machine.
    
    Changes include:
     * Addition of kretprobe_trampoline to act as a dummy function for instrumented
       functions to return to, and for the return probe infrastructure to place
       a kprobe on on, gaining control so that the return probe handler
       can be called, and so that the instruction pointer can be moved back
       to the original return address.
     * Addition of arch_init(), allowing a kprobe to be registered on
       kretprobe_trampoline
     * Addition of trampoline_probe_handler() which is used as the pre_handler
       for the kprobe inserted on kretprobe_implementation.  This is the function
       that handles the details for calling the return probe handler function
       and returning control back at the original return address
     * Addition of arch_prepare_kretprobe() which is setup as the pre_handler
       for a kprobe registered at the beginning of the target function by
       kernel/kprobes.c so that a return probe instance can be setup when
       a caller enters the target function.  (A return probe instance contains
       all the needed information for trampoline_probe_handler to do it's job.)
     * Hooks added to the exit path of a task so that we can cleanup any left-over
       return probe instances (i.e. if a task dies while inside a targeted function
       then the return probe instance was reserved at the beginning of the function
       but the function never returns so we need to mark the instance as unused.)
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9508dbfe39112813612085c00d55bacd398eddc6
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:12 2005 -0700

    [PATCH] Return probe redesign: ia64 specific implementation
    
    The following patch implements function return probes for ia64 using
    the revised design.  With this new design we no longer need to do some
    of the odd hacks previous required on the last ia64 return probe port
    that I sent out for comments.
    
    Note that this new implementation still does not resolve the problem noted
    by Keith Owens where backtrace data is lost after a return probe is hit.
    
    Changes include:
     * Addition of kretprobe_trampoline to act as a dummy function for instrumented
       functions to return to, and for the return probe infrastructure to place
       a kprobe on on, gaining control so that the return probe handler
       can be called, and so that the instruction pointer can be moved back
       to the original return address.
     * Addition of arch_init(), allowing a kprobe to be registered on
       kretprobe_trampoline
     * Addition of trampoline_probe_handler() which is used as the pre_handler
       for the kprobe inserted on kretprobe_implementation.  This is the function
       that handles the details for calling the return probe handler function
       and returning control back at the original return address
     * Addition of arch_prepare_kretprobe() which is setup as the pre_handler
       for a kprobe registered at the beginning of the target function by
       kernel/kprobes.c so that a return probe instance can be setup when
       a caller enters the target function.  (A return probe instance contains
       all the needed information for trampoline_probe_handler to do it's job.)
     * Hooks added to the exit path of a task so that we can cleanup any left-over
       return probe instances (i.e. if a task dies while inside a targeted function
       then the return probe instance was reserved at the beginning of the function
       but the function never returns so we need to mark the instance as unused.)
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba8af12f432c4f00ddb0bc1068b57b20aac93ecf
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:10 2005 -0700

    [PATCH] Return probe redesign: x86_64 specific changes
    
    The following patch contains the x86_64 specific changes for the new
    return probe design.  Changes include:
     * Removing the architecture specific functions for querying a return probe
       instance off a stack address
     * Complete rework onf arch_prepare_kretprobe() and trampoline_probe_handler()
     * Removing trampoline_post_handler()
     * Adding arch_init() so that now we handle registering the return probe
       trampoline instead of kernel/kprobes.c doing it
    
    NOTE:
    Note that with this new design, the dependency on calculating a pointer to
    the task off the stack pointer no longer exist (resolving the problem of
    interruption stacks as pointed out in the original feedback to this port.)
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bdbd37f6d01abc4c002bb8de90ea2c3bc7abe7e
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:09 2005 -0700

    [PATCH] Return probe redesign: i386 specific changes
    
    The following patch contains the i386 specific changes for the new
    return probe design.  Changes include:
    
     * Removing the architecture specific functions for querying a return probe
       instance off a stack address
     * Complete rework onf arch_prepare_kretprobe() and trampoline_probe_handler()
     * Removing trampoline_post_handler()
     * Adding arch_init() so that now we handle registering the return probe
       trampoline instead of kernel/kprobes.c doing it
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 802eae7c800fb7f583e6c06afa363585af2bef00
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Mon Jun 27 15:17:08 2005 -0700

    [PATCH] Return probe redesign: architecture independent changes
    
    The following is the second version of the function return probe patches
    I sent out earlier this week.  Changes since my last submission include:
    
    * Fix in ppc64 code removing an unneeded call to re-enable preemption
    * Fix a build problem in ia64 when kprobes was turned off
    * Added another BUG_ON check to each of the architecture trampoline
      handlers
    
    My initial patch description ==>
    
     From my experiences with adding return probes to x86_64 and ia64, and the
    feedback on LKML to those patches, I think we can simplify the design
    for return probes.
    
    The following patch tweaks the original design such that:
    
    * Instead of storing the stack address in the return probe instance, the
      task pointer is stored.  This gives us all we need in order to:
        - find the correct return probe instance when we enter the trampoline
          (even if we are recursing)
        - find all left-over return probe instances when the task is going away
    
      This has the side effect of simplifying the implementation since more
      work can be done in kernel/kprobes.c since architecture specific knowledge
      of the stack layout is no longer required.  Specifically, we no longer have:
    	- arch_get_kprobe_task()
    	- arch_kprobe_flush_task()
    	- get_rp_inst_tsk()
    	- get_rp_inst()
    	- trampoline_post_handler() <see next bullet>
    
    * Instead of splitting the return probe handling and cleanup logic across
      the pre and post trampoline handlers, all the work is pushed into the
      pre function (trampoline_probe_handler), and then we skip single stepping
      the original function.  In this case the original instruction to be single
      stepped was just a NOP, and we can do without the extra interruption.
    
    The new flow of events to having a return probe handler execute when a target
    function exits is:
    
    * At system initialization time, a kprobe is inserted at the beginning of
      kretprobe_trampoline.  kernel/kprobes.c use to handle this on it's own,
      but ia64 needed to do this a little differently (i.e. a function pointer
      is really a pointer to a structure containing the instruction pointer and
      a global pointer), so I added the notion of arch_init(), so that
      kernel/kprobes.c:init_kprobes() now allows architecture specific
      initialization by calling arch_init() before exiting.  Each architecture
      now registers a kprobe on it's own trampoline function.
    
    * register_kretprobe() will insert a kprobe at the beginning of the targeted
      function with the kprobe pre_handler set to arch_prepare_kretprobe
      (still no change)
    
    * When the target function is entered, the kprobe is fired, calling
      arch_prepare_kretprobe (still no change)
    
    * In arch_prepare_kretprobe() we try to get a free instance and if one is
      available then we fill out the instance with a pointer to the return probe,
      the original return address, and a pointer to the task structure (instead
      of the stack address.)  Just like before we change the return address
      to the trampoline function and mark the instance as used.
    
      If multiple return probes are registered for a given target function,
      then arch_prepare_kretprobe() will get called multiple times for the same
      task (since our kprobe implementation is able to handle multiple kprobes
      at the same address.)  Past the first call to arch_prepare_kretprobe,
      we end up with the original address stored in the return probe instance
      pointing to our trampoline function. (This is a significant difference
      from the original arch_prepare_kretprobe design.)
    
    * Target function executes like normal and then returns to kretprobe_trampoline.
    
    * kprobe inserted on the first instruction of kretprobe_trampoline is fired
      and calls trampoline_probe_handler() (no change here)
    
    * trampoline_probe_handler() consumes each of the instances associated with
      the current task by calling the registered handler function and marking
      the instance as unused until an instance is found that has a return address
      different then the trampoline function.
    
      (change similar to my previous ia64 RFC)
    
    * If the task is killed with some left-over return probe instances (meaning
      that a target function was entered, but never returned), then we just
      free any instances associated with the task.  (Not much different other
      then we can handle this without calling architecture specific functions.)
    
      There is a known problem that this patch does not yet solve where
      registering a return probe flush_old_exec or flush_thread will put us
      in a bad state.  Most likely the best way to handle this is to not allow
      registering return probes on these two functions.
    
      (Significant change)
    
    This patch series applies to the 2.6.12-rc6-mm1 kernel, and provides:
      * kernel/kprobes.c changes
      * i386 patch of existing return probes implementation
      * x86_64 patch of existing return probe implementation
      * ia64 implementation
      * ppc64 implementation (provided by Ananth)
    
    This patch implements the architecture independant changes for a reworking
    of the kprobes based function return probes design. Changes include:
    
      * Removing functions for querying a return probe instance off a stack address
      * Removing the stack_addr field from the kretprobe_instance definition,
        and adding a task pointer
      * Adding architecture specific initialization via arch_init()
      * Removing extern definitions for the architecture trampoline functions
        (this isn't needed anymore since the architecture handles the
         initialization of the kprobe in the return probe trampoline function.)
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ec4b1f356b3bad928ae8e2aa9caebfa737d52df
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Mon Jun 27 15:17:01 2005 -0700

    [PATCH] kprobes: fix single-step out of line - take2
    
    Now that PPC64 has no-execute support, here is a second try to fix the
    single step out of line during kprobe execution.  Kprobes on x86_64 already
    solved this problem by allocating an executable page and using it as the
    scratch area for stepping out of line.  Reuse that.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3b8a1a8496c83bc4a3cc76505c29255af15572c
Merge: 60564a3... 0ed0c0c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 15:13:26 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit 60564a313a5738960064d6c555ec066d9332f278
Author: Mike Miller <mike.miller@hp.com>
Date:   Mon Jun 27 14:36:50 2005 -0700

    [PATCH] cciss: remove partition info from CCISS_GETLUNINFO
    
    This patch fulfills a promise I made to Christoph sometime back.  I am
    removing the partition info from the CCISS_GETLUNINFO ioctl as I was informed
    my "driver had no damn business reading that structure." ;)
    
    The application folks are to use /proc or /sys for partition info from now on.
     I am only aware of a few apps that use this ioctl and I'm not sure they ever
    used the partition info.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd6fb584cf7f18ec6b221192b57d712ecc8c1859
Author: Mike Miller <mike.miller@hp.com>
Date:   Mon Jun 27 14:36:49 2005 -0700

    [PATCH] cciss: pci domain info pass 2
    
    This is pass 2 of my patch to add pci domain info to an existing ioctl.  This
    time I insert the domain between dev_fn and board_id as Willy suggested and
    change the var to unsigned short to ease Christoph's concerns.  Although I
    thought unsigned int was the correct var type for this.  I also thought it
    didn't matter where I inserted it in the structure.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3de0a70bd926ff974adb27a38d4fd1049f05e54e
Author: Mike Miller <mike.miller@hp.com>
Date:   Mon Jun 27 14:36:48 2005 -0700

    [PATCH] cciss: pci id fix
    
    This patch fixes a PCI ID I got wrong before.  It also adds support for
    another new SAS controller due out this summer.  I didn't have a marketing
    name prior to my last submission.  Also modifies the copyright date range.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21c121ccd5559a07089d1aef9ca6c04c6d8b6758
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Jun 27 14:36:47 2005 -0700

    [PATCH] MAINTAINERS: Update Roland Dreier's email
    
    Cisco bought Topspin, so I'm now a shiny happy Cisco employee.  Update my
    entry in MAINTAINERS.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48442962ebccec92d8a65f465420423cd2ce0bc8
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Jun 27 14:36:47 2005 -0700

    [PATCH] IB: Fix pack/unpack when size_bits == 64
    
    Fix handling of fields with size_bits == 64.  Pointed out by Hal Rosenstock.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dae4c1d2362292ccd3318ff67d18aa5c22ee820c
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Jun 27 14:36:46 2005 -0700

    [PATCH] IB: Fix race in sa_query
    
    Use a copy of the id we'll return to the consumer so that we don't
    dereference query->sa_query after calling send_mad().  A completion may
    occur very quickly and end up freeing the query before we get to do
    anything after send_mad().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cae54bdf6f8b643e0e7a36ed531951f19e14fe56
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:46 2005 -0700

    [PATCH] IB/mthca: Bump version
    
    It's about time for a version bump.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed878458eeff9754d66f1b0325df6ebbfcdce668
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:45 2005 -0700

    [PATCH] IB/mthca: Align FW command mailboxes to 4K
    
    Future versions of Mellanox HCA firmware will require command mailboxes to be
    aligned to 4K.  Support this by using a pci_pool to allocate all mailboxes.
    This has the added benefit of shrinking the source and text of mthca.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80fd8238734c852a8ed1ea39f8444a2df33bd161
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:45 2005 -0700

    [PATCH] IB/mthca: Encapsulate command interface init
    
    Encapsulate mthca command interface initialization/cleanup.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 761f9eb8c31f72692aad118e51e2a59a80467088
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:44 2005 -0700

    [PATCH] IB/mthca: Fix memory leak on error path
    
    Free page_list buffer on error path of mthca_reg_phys_mr().
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d56d6f9502a15ef64395cb3a6fc7bfdc365b1e3d
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:43 2005 -0700

    [PATCH] IB/mthca: Split off MTT allocation
    
    Split allocation of MTT range from creation of MR.  This will be useful for
    implementing shared memory regions and userspace verbs.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a03a5a67b243e9a24805ee18272ad25e5b2ca92c
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:43 2005 -0700

    [PATCH] IB/mthca: Move mthca_is_memfree checks
    
    Make mthca_table_put() and mthca_table_put_range() NOPs if the device is not
    mem-free, so that we don't have to have "if (mthca_is_memfree())" tests in the
    callers of these functions.  This makes our code more readable and
    maintainable, and saves a couple dozen bytes of text in ib_mthca.ko as well.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a852092e8cb305595ff630dfc3e9b25966a98276
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:42 2005 -0700

    [PATCH] IB/mthca: Fix memset size
    
    Fix memset to use sizeof *props instead of just sizeof props.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e6970b5e96c3281e26b7d2e4e1839f356d5f5ff
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:42 2005 -0700

    [PATCH] IB/mthca: Enable unreliable connected transport
    
    Add support for unreliable connected (UC) transport to mthca driver:
     - Add attributes for UC to modify QP table.
     - Add support for posting UC work requests.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34a4a753d15f905158d77fb81adc9c19a02a4639
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:41 2005 -0700

    [PATCH] IB/mthca: Set RDMA/atomic capabilities correctly
    
    mthca apparently had the meanings of the max_rd_atomic and max_dest_rd_atomic
    QP attributes backwards.  max_rd_atomic limits the maximum number of
    outstanding RDMA/atomic requests as an initiator (on a send queue), and
    max_dest_rd_atomic specifies the resources allocated to handle RMDA/atomic
    requests from the remote end of the connection.  We were programming our QP
    context with these values swapped.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd123d7fcfde319bd723d14d975d60319a1b2ad8
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:40 2005 -0700

    [PATCH] IB/mthca: Set QP static rate correctly
    
    Fix offset of static_rate in QP context.  Pointed out by Dror Goldenberg.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64dc81fca7f6d5c51e50ffa850640ad8358acd1f
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:40 2005 -0700

    [PATCH] IB/mthca: Use dma_alloc_coherent instead of pci_alloc_consistent
    
    Switch all allocations of coherent memory from pci_alloc_consistent() to
    dma_alloc_coherent(), so that we can pass GFP_KERNEL.  This should help when
    the system is low on memory.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb2af78bcdbb8801791de33f1775c98b9178daab
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Jun 27 14:36:39 2005 -0700

    [PATCH] IB/mthca: Clean up CQ debug
    
    Clean up CQ debugging code: make dump_cqe print on one line, and only dump
    error CQ entries for local operation errors.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 177214af2946e86ce89324f379720ec0dc8d4a9e
Author: Bernhard Fischer <berny.f@aon.at>
Date:   Mon Jun 27 14:36:39 2005 -0700

    [PATCH] IB/mthca: Clean up error messages
    
    - Fix incorrect cut-n-paste in error messages.
    - Add missing newlines in error messages.
    - Use DRV_NAME instead of "ib_mthca" in a couple of places.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd4e8fb49d2326364971a56f5a4b664a976f3712
Author: Tom Duffy <tduffy@sun.com>
Date:   Mon Jun 27 14:36:37 2005 -0700

    [PATCH] IB/mthca: Add Sun copyright notice
    
    Add Sun copyright to files modified by Tom Duffy.
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffaa8bd6c904d1ab79b677905067349a5ff51d84
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Mon Jun 27 14:36:36 2005 -0700

    [PATCH] seccomp: tsc disable
    
    I believe at least for seccomp it's worth to turn off the tsc, not just for
    HT but for the L2 cache too.  So it's up to you, either you turn it off
    completely (which isn't very nice IMHO) or I recommend to apply this below
    patch.
    
    This has been tested successfully on x86-64 against current cogito
    repository (i686 compiles so I didn't bother testing ;).  People selling
    the cpu through cpushare may appreciate this bit for a peace of mind.
    
    There's no way to get any timing info anymore with this applied
    (gettimeofday is forbidden of course).  The seccomp environment is
    completely deterministic so it can't be allowed to get timing info, it has
    to be deterministic so in the future I can enable a computing mode that
    does a parallel computing for each task with server side transparent
    checkpointing and verification that the output is the same from all the 2/3
    seller computers for each task, without the buyer even noticing (for now
    the verification is left to the buyer client side and there's no
    checkpointing, since that would require more kernel changes to track the
    dirty bits but it'll be easy to extend once the basic mode is finished).
    
    Eliminating a cold-cache read of the cr4 global variable will save one
    cacheline during the tlb flush while making the code per-cpu-safe at the
    same time.  Thanks to Mikael Pettersson for noticing the tlb flush wasn't
    per-cpu-safe.
    
    The global tlb flush can run from irq (IPI calling do_flush_tlb_all) but
    it'll be transparent to the switch_to code since the IPI won't make any
    change to the cr4 contents from the point of view of the interrupted code
    and since it's now all per-cpu stuff, it will not race.  So no need to
    disable irqs in switch_to slow path.
    
    Signed-off-by: Andrea Arcangeli <andrea@cpushare.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ae3db110e62b0846aae1b5c6e661484ee3a5ed1
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jun 27 14:36:35 2005 -0700

    [PATCH] ppc64: Add missing exports
    
    This patch adds a couple of missing symbol exports.  flush_dcache_page is
    used by the AGP driver and rtc_lock by the RTC driver.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c8709334cec803368a432a33e0f2e116d48fe07
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jun 27 14:36:34 2005 -0700

    [PATCH] ppc32: Remove CONFIG_PMAC_PBOOK
    
    This patch removes CONFIG_PMAC_PBOOK (PowerBook support).  This is now
    split into CONFIG_PMAC_MEDIABAY for the actual hotswap bay that some
    powerbooks have, CONFIG_PM for power management related code, and just left
    out of any CONFIG_* option for some generally useful stuff that can be used
    on non-laptops as well.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcd16cc084f2b98ab64d27721abdb941f3d9c4cb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jun 27 14:36:33 2005 -0700

    [PATCH] ppc32: remove obsolete macserial driver
    
    The macserial driver has been obsoleted by the new pmac_zilog driver for a
    while now and probably doesn't even work anymore on recent kernels.  This
    patch removes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4ee69c8c1e7ff9790fbce29c7be50db57323a6f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jun 27 14:36:32 2005 -0700

    [PATCH] ppc32: Bump PMU interrupt priority
    
    The Power Management Unit on PowerMacs is very sensitive to timeouts during
    async message exchanges.  It uses rather crude protocol based on a shift
    register with an interrupt and is almost continuously exchanging messages with
    the host CPU on laptops.
    
    This patch adds a routine to the open_pic driver to be able to select a PMU
    driver so that it bumps it's interrupt priority to above the normal level.
    
    This will allow PMU interrupts to occur while another interrupt is pending,
    and thus reduce the risk of machine beeing abruptly shutdown by the PMU due to
    a timeout in PMU communication caused by excessive interrupt latency.  The
    problem is very rare, and usually just doesn't happen, but it is still useful
    to make things even more robust.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb1657468152c5e5232c7bf35cf0e9c41b5d9910
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Mon Jun 27 13:09:00 2005 -0300

    [PATCH] 8xx: avoid "dcbst" misbehaviour with unpopulated TLB
    
    The proposed _tlbie call at update_mmu_cache() is safe because:
    
    Addresses for which update_mmu_cache() gets invocated are never inside the
    static kernel virtual mapping, meaning that there is no risk for the
    _tlbie() here to be thrashing the pinned entry, as Dan suspected.
    
    The intermediate TLB state in which this bug can be triggered is not
    visible by userspace or any other contexts, except the page fault handling
    path.  So there is no need to worry about userspace dcbxxx users.
    
    The other solution to this is to avoid dcbst misbehaviour in the first
    place, which involves changing in-kernel "dcbst" callers to use 8xx
    specific SPR's.
    
    Summary:
    
    On 8xx, cache control instructions (particularly "dcbst" from
    flush_dcache_icache) fault as write operation if there is an unpopulated
    TLB entry for the address in question.  To workaround that, we invalidate
    the TLB here, thus avoiding dcbst misbehaviour.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4b3a80e399c989028acd5185c792fab82eda035
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Jun 27 14:36:30 2005 -0700

    [PATCH] mips: fixed try_to_freeze build error
    
    arch/mips/kernel/signal.c: In function 'do_signal':
    arch/mips/kernel/signal.c:460: error: too many arguments to function 'try_to_freeze'
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3212c6be251219c0f4c2df0c93e122ff5be0d9dc
Author: Bob Picco <bob.picco@hp.com>
Date:   Mon Jun 27 14:36:28 2005 -0700

    [PATCH] fix WANT_PAGE_VIRTUAL in memmap_init
    
    I spotted this issue while in memmap_init last week.  I can't say the
    change has any test coverage by me.  start_pfn was formerly used in main
    "for" loop.  The fix is replace start_pfn with pfn.
    
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c4142a133f7efee08238722b157656c3da7ca97
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Jun 27 14:36:16 2005 -0700

    [PATCH] ppc32: Fix compiling of sandpoint platform
    
    Lost a curly brace in translation.  Everything is better now.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 747802ab478399f13ff57751c2ebd22577be4eeb
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:16 2005 -0700

    [PATCH] skge: version and copyright.
    
    Bump version and copyright year.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 19a33d4e6be2b627487676a69638e189e833675f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:15 2005 -0700

    [PATCH] skge: Rx buffer optimization
    
    Optimize the receive buffer management code to replenish the
    buffers immediately (like tg3).
    
    Signed-off-by: Stephen Hemmminger <shemminger@osdl.org>

commit d25f5a6774c3c567b11f8637a787603a62d102b1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:14 2005 -0700

    [PATCH] skge: handle Tx/Rx arbiter timeout
    
    Need to handle receive and transmit packet arbiter timeouts.
    Transmit arbiter timeouts happens when Gigabit sends to 100Mbit port
    on same switch and pause occurs.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 7e676d9136d89d0cdf661de4b9a5f8955af94e03
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:13 2005 -0700

    [PATCH] skge: add PHY related debug messages
    
    Cleanup messages (for debug) about PHY interrrupts, because when
    user can't get driver working that is often the problem.
    Use a consistent way of enabling interrupts by port.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 45bada65c2a0bcc00729646071e66042ced64998
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:12 2005 -0700

    [PATCH] skge: make Genesis/Broadcom code work
    
    Rewrite the code for handling the Broadcom PHY to something that
    works. Remove link polling because Broadcom and Yukon don't need it.
    When I wrote initial code, didn't have a genesis chipset based
    board to test, so it was a non-working guess.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 31b619c5abaa5512e7b41f190f9b7903b902f29a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:11 2005 -0700

    [PATCH] skge: cleanup ethtool mode support
    
    Unify mapping of supported modes based on hardware.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 89bf5f231f776443a9d65da0f774aa3632534749
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:10 2005 -0700

    [PATCH] skge: remove XM phy (untested code)
    
    Remove support for the non-Broadcom genesis based boards. The code
    is untested, and probably won't work as is. The newer boards are all
    Yukon based, and only old Genesis board I can find uses Broadcom.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit c506a5090272752932be6ac0c29ffcbca38f2404
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:09 2005 -0700

    [PATCH] skge: remove Yukon2 related special cases
    
    Remove the bits and pieces added relating to Yukon II chipset.
    The Yukon 2 will be in a separate driver.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit b18f2091bc9f93548ea63752278fceaeacedab20
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:08 2005 -0700

    [PATCH] skge: remove unused declarations
    
    Get rid of definitions for chip versions and PHY chips that
    this driver does not support.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 4707953454677f985289b4e4bcbea41f0cc651c2
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:07 2005 -0700

    [PATCH] skge: eliminate Yukon2 hooks
    
    The Yukon chips don't support TSO, and Yukon2 will be a separate driver.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 981d0377d94f4d611f1c73429c0c32b35b56855f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:06 2005 -0700

    [PATCH] skge: replace chip_rev() accessor
    
    Replace inline accessor functions for chip revision and number of ports
    with simple structure members.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 467b3417f9985b9a83ccebef2d4e07e3e8a9495e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:05 2005 -0700

    [PATCH] skge: use pci_read_config_word
    
    Rather than accessing PCI config space through MMIO space, use the
    standard PCI functions.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 6b0c1480491a9e2d9d34368e09e6acddbb173515
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:04 2005 -0700

    [PATCH] skge: function amd macro name change
    
    The inlines and macro's needed some cleanup's and fixes:
     * change name of macro SKGEMAC_REG to SK_REG to better reflect usage
       and fix comments
     * ditto for SK_GEXM_REG -> SK_XMAC_REG and SKGEGMA_REG -> SK_GMA_REG
    
     * change skge_gm_ to just gm_ since it is just a local function and long
       names look ugly.
     * change skge_xm_ to just xm_
     * fix xm_write32 to write as two u16's with correct byte order
     * fix xm_outaddr to correctly use offset
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 275834d1095dcd52d0fefd0d3f7d0320552fe277
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:03 2005 -0700

    [PATCH] skge: PCI_DEVICE() macro
    
    Use PCI_DEVICE() macro.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 955660652af35524974cf4623c02bc99a3785949
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 27 11:33:02 2005 -0700

    [PATCH] skge: whietspace cleanup
    
    Cleanup whitespace around if() and switch() and end of lines
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit d498a2c76568d3bb5add06390f077b1a423b0794
Merge: 8b789b7... ec9f47c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 15:04:08 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 8b789b7d7e9b12b086d6d2f0759073a11447c7e7
Merge: 61cca8c... b46ffae...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 15:00:10 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 61cca8c72eb284e80876bafdea057055f6e793e4
Merge: e494f63... e254e9b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 14:55:50 2005 -0700

    Merge 'upstream' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit e494f6333bef20fd9d8689062260c5d0136a3ea0
Merge: 3bd1907... 0c144d0...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 14:54:50 2005 -0700

    Merge 'upstream' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 3bd19078c215d15e20b4447d9c4aa0065813b207
Merge: 3e0777b... 3e90928...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 14:53:48 2005 -0700

    Merge 'upstream' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/misc-2.6

commit 3e0777b8fa96f7073ed5d13d3bc1d573b766bef9
Merge: a94130e... e511988...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 27 14:47:31 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/dtor/input.git manually
    
    Some manual fixups required due to clashes with the PF_FREEZE cleanups.

commit 0ed0c0c48c508578c30aa58f755ca0d692636906
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Jun 15 15:49:48 2005 -0400

    [PATCH] USB: usbcore: inverted test for resuming interfaces
    
    This one-liner fixes a test for interfaces that are already resumed.
    
    It would be nice if this could get into 2.6.12, but it's not critical
    since it only affects people doing selective (runtime) suspend/resume.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 822e14ac222d1dad3f5393b75603f0455aebbefc
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 13 06:55:03 2005 -0700

    [PATCH] USB: resolve ethernet gadget build glitch on pxa
    
    This fixes a build error on pxa25x processes with pxa2xx_udc and
    
            CONFIG_USB_ETH=m
            # CONFIG_USB_ETH_RNDIS is not set
    
    The error is because on that CPU there's no status transfer support
    except with RNDIS.  Workaround, enable the RNDIS support too.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e3bc8b4e00d0ce219165d469409f2770698574f6
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Jun 15 08:04:30 2005 -0700

    [PATCH] USB: usbnet debug message fix
    
    One debug message won't print the right value; OSDL bugid 4545.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86dbde9cbdfe8bc2c2dfe5d33027d3acc55e0470
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Jun 6 17:22:42 2005 -0700

    [PATCH] USB Storage: retry hard errors
    
    This patch started life as as527, and was rediffed by me.
    
    Since the IDE interface doesn't convey much information about types of
    errors, many USB-IDE adapters report all low-level errors with SK = 0x04,
    which is supposed to be used only for non-recoverable errors.  As a result
    the SCSI midlayer doesn't retry the command.  But quite often a retry
    would succeed, whereas an unnecessary retry doesn't really hurt anything.
    
    This patch uses a recently-implemented flag to tell the SCSI midlayer that
    such hardware errors should be retried.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4d07ef762fc8d6d35ecc1511a3b953a733a61a5f
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Jun 6 17:21:41 2005 -0700

    [PATCH] USB Storage: port reset on transport error
    
    This patch causes a port reset whenever there's a transport error or abort.
    If that fails it reverts back to doing a mass-storage device reset.  It
    started life as as497 and was rediffed by me.
    
    This makes error recovery a lot quicker and more reliable.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5203ad441310a4c2abd4fb79015a6bdadc2a5a4f
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Jun 6 17:19:29 2005 -0700

    [PATCH] USB Storage: endpoint toggles and reset delays
    
    This patch does two things to help reset recovery.  It started life as
    as496 and was rediffed by me.
    
    First, the patch checks the result of a CLEAR_HALT request and doesn't reset the
    endpoint's data toggle unless the request succeeded.
    
    Second, it reduces the timeout for a device reset from 20 seconds to 5
    seconds.
    
    If all goes well, then I've finally figured quilt out and this patch should
    apply cleanly.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 01205a0e60bb5a66d768b881fb8355981b912510
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Jun 5 14:46:16 2005 +0200

    [PATCH] USB: usblp: 2x up() in usblp_read
    
    up(&usblp->sem) was called twice in a row in this code path.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c11372da33c9d38cb35867915f15c74778e1a3a4
Author: Vincent Vanackere <vincent.vanackere@gmail.com>
Date:   Sun Jun 5 12:21:43 2005 +0200

    [PATCH] USB: fix atiremote input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    
    > On Sun, Apr 10, 2005 at 07:21:28PM +0600, Viktor A. Danilov wrote:
    > >
    > > PROBLEM: aiptek input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    > > REASON: `dev` - field not filled...
    > > SOLUTION: in linux/drivers/usb/input/aiptek.c write
    > >       aiptek->inputdev.dev = &intf->dev;
    > > before calling
    > >       input_register_device(&aiptek->inputdev);
    
    The following (tested) patch fixes the exact same issue with the ATI
    Remote input driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 16367877949a91b11bcc6f37b94d0033388b4256
Author: Kiril Jovchev <jovchev@gmail.com>
Date:   Sun Jun 5 01:52:33 2005 +0300

    [PATCH] USB: add support for Creative WebCam mini to stv680 driver
    
    Added support for Creative WebCam Go Mini.
    Camera has STV680 chip and just different Product ID(0x4007) and Vendor ID (0x041e).
    
    Signed-off-by: Kiril Jovchev <jovchev@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2c45b6feb394337b4b468229632b8737375caf1d
Author: C. Adam Oldham <oldhamca@gmail.com>
Date:   Thu Jun 2 17:16:34 2005 -0400

    [PATCH] USB: Fix race condition in usblp_write
    
    Initialize status fields in the read and write urbs to prevent a race
    condition with open/read/close - open/write/close sequences.
    
    Fixes bug #4432 at bugzilla.kernel.org
    
    Signed-off-by: Adam Oldham <oldhamca@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5da0106f0b9b13afa4a902c01d4c98b002df55ff
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 31 10:21:11 2005 -0700

    [PATCH] USB: wireless usb <linux/usb_ch9.h> declarations
    
    This provides declarations for new requests, descriptors, and bitfields as
    defined in the Wireless USB 1.0 spec.  Device support will involve a new
    "Wire Adapter" device class, connecting a USB Host to a cluster of wireless
    USB devices.  There will be two adapter types:
    
      * Host Wireless Adapter (HWA):  the downstream link is wireless, which
        connects a wireless USB host to wireless USB devices (not unlike like
        a hub) including to the second type of adapter.
    
      * Device Wireless Adapter (DWA): the upstream link is wireless, for
        connecting existing USB devices through wired links into the cluser.
    
    All wireless USB devices will need persistent (and secure!) key storage, and
    it's probable that Linux -- or device firmware -- will need to be involved
    with that to bootstrap the initial secure key exchange.
    
    Some user interface is required in that initial key exchange, and since the
    most "hands-off" one is a wired USB link, I suspect wireless operation will
    usually not be the only mode for wireless USB devices.  (Plus, devices can
    recharge batteries using wired USB...)  All other key exchange protocols need
    error prone user interactions, like copying and/or verifying keys.
    
    It'll likely be a while before we have commercial Wireless USB hardware,
    much less Linux implementations that know how to use it.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 77078570abe0848c3076b4f7d42f79b1407f3e8f
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 28 10:46:18 2005 -0700

    [PATCH] USB: ehci-hcd - fix page pointer allocation in itd_patch()
    
    The itd_patch() function is responsible for allocating entries in the
    buffer page pointer list of the iTD.  Particularly, a new page pointer
    is needed every time when buffer data crosses a page boundary.
    
    However, there is a bug in the allocation logic: the function does not
    allocate a new entry when the current transaction is the first
    transaction in the iTD (as indicated by first!=0).
    
    The consequence is that, when the data of the first transaction begins
    somewhere at the end of a page so that it actually does cross the page
    boundary, no new page pointer is allocated.  This means that the data
    at the end of the first transaction (beyond the page boundary) will be
    accessed by the HC using the second page pointer, which is zero.
    Furthermore, the first page pointer will be later overwritten by the
    page pointers of the other transactions, which will garble it because
    the value is or-ed into the iTD field.
    
    All this particular check (for !first) does is cause incorrect
    behaviour, so it should be entirely removed (and with it the variable
    first that is not used for anything else).
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e07fefa6b212f43c40fdbc1a62de690d91a4b617
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 31 16:33:21 2005 -0400

    [PATCH] USB UHCI: Detect invalid ports
    
    This patch changes the way uhci-hcd detects valid ports.  The
    specification doesn't mention any way to find out how many ports a
    controller has, so the driver has to use some heuristics, reading the port
    status and control register and deciding whether the value makes sense.
    With this patch the driver will recognize a typical failure mode (all bits
    set to one) for nonexistent ports and won't assume there are always at
    least 2 ports -- such an assumption seems silly if the heuristics have
    already shown that the ports don't exist.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 486e2df6ce213d0c776befdf3fe5ffc61dd61688
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 24 17:51:52 2005 -0700

    [PATCH] USB gadget: drain rndis response queue on disconnect
    
    Drain the rndis response queue on disconnect.  This fixes a problem
    in which an rndis response left in the queue from a previous session
    could cause a subsequent session to fail.
    
    Signed-off-by: Andy Lowe <alowe@mvista.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 45e45ab45c266642276d01e56d9fb5dccbfad960
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 16 08:26:38 2005 -0700

    [PATCH] USB: fix drivers/usb/gadget/ether.c compile error
    
    This fixes a compile glitch with CONFIG_USB_ETH_RNDIS disabled, and
    replaces some inline #ifdeffery (and other code) with inline functions
    which can evaluate to constants.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 391eca9d8892a940ff8dbfee2ca78942e05c2d37
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 10 15:34:16 2005 -0400

    [PATCH] USB: dummy_hcd: add suspend/resume support
    
    This patch adds support to dummy_hcd for suspending and resuming the root
    hub and the emulated platform devices.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc095b0b5b653dca3e106710a72ba28b5bb7456b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 10 15:28:38 2005 -0400

    [PATCH] USB: dummy_hcd: sparse cleanups
    
    This patch fixes the byte-ordering issue for setup packets in the
    dummy_hcd driver and cleans up a few things that sparse -Wbitwise
    dislikes.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f0706930091902641929f2229bfb106144782c94
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Sat May 28 22:06:20 2005 +0200

    [PATCH] USB: usbatm kcalloc cleanup
    
    you seem to have applied the original, not the new improved one with
    whiter teeth that uses kcalloc instead of kmalloc + memset.  Here's a
    patch that goes on top of the one you applied.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 843c944fb86e5e31ee7b319172e657ea22301322
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 30 01:09:06 2005 -0700

    [PATCH] USB: fix usbatm gcc-2.95.x bug
    
    Work around the gcc-2.95.x macro expansion bug.
    
    Cc: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 65412e48e21ff4fdaf2aea1565ef4fb3ef5262ce
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Fri May 27 10:00:08 2005 +0200

    [PATCH] USB ATM: avoid oops on bind failure; plug memory leak
    
    Zero the entire instance, not just the struct usbatm_data head.
    Make sure the just allocated urb is freed if we fail to allocate
    a buffer.  Based on a patch by Stanislaw W. Gruszka.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Acked-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e20d6645f794b51835e6f740a5b6f95c7e3fd843
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Thu May 26 14:32:51 2005 +0200

    [PATCH] USB ATM: reduce log spamming
    
    Reduce the number of "unknown vpi/vci" debug messages to (usually) at most
    one per-urb, rather than one per-cell.  This is only an issue when (a) many
    packets come in but no connection is open; and (b) CONFIG_USB_DEBUG is set.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86699e35923366ccb5c3451d24e94deb9dd0af29
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Wed May 11 20:15:37 2005 +0200

    [PATCH] USB ATM: bits and bobs
    
    Makefile and Kconfig entries for the new drivers.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0bb3cf37df1b59a1fed079e7f8f140ef9ec73130
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Wed May 11 20:17:09 2005 +0200

    [PATCH] USB ATM: generic DSL modem driver xusbatm
    
    Doesn't do any firmware loading etc, just transmission and reception.
    The user needs to take care of modem initialization, and load the
    module with parameters giving the endpoints to use and so forth.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1b0e614652344a2d39eb336f3dc07651782883bf
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Wed May 11 20:19:29 2005 +0200

    [PATCH] USB ATM: driver for the Conexant AccessRunner chipset cxacru
    
    Driver for modems based on the Conexant AccessRunner chipset.
    Original patch by Josep Comas, much reworked by Roman Kagan.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48da7267ff1631b0bff1eab15db86adace11ea91
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Wed May 11 20:20:40 2005 +0200

    [PATCH] USB ATM: port speedtch to new usbatm core
    
    Port the speedtch driver to the new usbatm core.  The code is much
    the same as before, just reorganized, though I threw in some minor
    improvements (a new module parameter for choosing the altsetting,
    more robust urb failure handling, ...) while I was there.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9574507c98087951866ef30c8bf876e23ca4b99e
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed May 11 20:24:03 2005 +0200

    [PATCH] USB: fix speedtch.c merge with next patch.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c59bba75fa500f13ef14215d599ee0d7faa1b954
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Wed May 11 20:24:03 2005 +0200

    [PATCH] USB ATM: new usbatm core
    
    Rework the core usbatm code: minidrivers (i.e. drivers for particular
    modems) now register themselves with the usbatm core, supplying methods
    for binding/unbinding etc.  The design was inspired by usb-serial and
    usbnet.  At the same time, more common code from the speedtch and
    cxacru (patch 3/5) drivers was generalized and moved into the core.  The
    transmission and reception parts have been unified and simplified.  Since
    this is a major change and I don't like underscores in file names,
    usb_atm.[ch] has been renamed usbatm.[ch].
    
    Many thanks to Roman Kagan, who did a lot of the coding.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d49d431744007cec0ee1a3ade96f9e0f100c7907
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 7 13:21:50 2005 -0700

    [PATCH] USB: misc ehci updates
    
    Various minor EHCI updates
    
       * Dump some more info in the debug dumps, notably the product
         description (e.g. chip vendor), BIOS handhake flags, and
         debug port status (when it's not managed by the HCD).
    
       * Minor updates to the BIOS handoff code:  always flag the HCD
         as owned by Linux (in case BIOS doesn't grab it "early"),
         and on the buggy-BIOS path always match the "early handoff"
         code and forcibly disable SMI IRQs.
    
       * For the disabled 64bit DMA support, there's now a constant
         to use for the mask; use it.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9198769363d4dc1d63d49ecb2e2b189aceb42d94
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 7 13:20:19 2005 -0700

    [PATCH] USB: pxa2xx_udc updates
    
    This has several small updates to the px2xx UDC driver:
    
      * small fixes from Eugeny S. Mints <emints@ru.mvista.com>
         - local_irq_save() around potential endpoint disable race
         - fix handling of enqueue to OUT endpoints (potential oops)
      * add shutdown() method to disable any D+ pullup
      * rename methods accessing raw signals, referencing the signals
      * describes itself as for "pxa25x", since pxa27x is different
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 988199fe34411b413d5a388fc751c91eb4686f36
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 7 13:05:52 2005 -0700

    [PATCH] USB: goku_udc updates (sparse, SETUP api change)
    
    Sparse updates; and the API change for SETUP packets being in USB byteorder.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 320f34595c3cf37d180a087a935c050e4ac0e4d5
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 7 13:05:18 2005 -0700

    [PATCH] USB: net2280 updates (sparse, SETUP api change)
    
    This is mostly "sparse" related updates, one of which was a missing
    le32_to_cpu() should have affected big-endian hardware.
    
    Notable is the API change:  setup packets are now provided in USB
    byte order.  This affects only big-endian hardware, and the gadget
    drivers have been updated in a separate patch.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1bbc169621cbe502b9143a27eb12802a0f1d43a0
Author: David Brownell <david-b@pacbell.net>
Date:   Sat May 7 13:05:13 2005 -0700

    [PATCH] USB: gadget driver updates (SETUP api change)
    
    This updates most of the gadget framework to expect SETUP packets use
    USB byteorder (matching the annotation in <linux/usb_ch9.h> and usage
    in the host side stack):
    
      - definition in <linux/usb_gadget.h>
      - gadget drivers:  Ethernet/RNDIS, serial/ACM, file_storage, gadgetfs.
      - dummy_hcd
    
    It also includes some other similar changes as suggested by "sparse",
    which was used to detect byteorder bugs.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 028b271b687714f9fc7a1e89bb79f1fbeef154ee
Author: David Brownell <david-b@pacbell.net>
Date:   Fri May 6 07:02:01 2005 -0700

    [PATCH] USB: Kconfig fixes for usb/gadget
    
    This prevents gadget drivers from being selected when no controller has
    been selected, by adding an additional boolean and depending on it.
    It's mostly to help "allmodconfig".
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4244f72436ab77c3c29a6447af81734ab3925d85
Author: Florian Echtler <echtler@fs.tum.de>
Date:   Fri May 6 19:05:39 2005 +0200

    [PATCH] USB: upgrade of the idmouse driver
    
    Signed-off-by: Florian Echtler  <echtler@fs.tum.de>
    Signed-off-by: Andreas Deresch <aderesch@fs.tum.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 685eb93f086eb15d9fb1e82c7400fd750f564640
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 3 16:27:26 2005 -0400

    [PATCH] USB dummy_hcd: Use root-hub interrupts instead of polling
    
    This patch makes the dummy_hcd driver use emulated root-hub interrupts
    instead of polling.  It's in the spirit of similar changes being made to
    the other HCDs.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1c39fad7d1bbea31744138cd3a532ff346cd4ab
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 3 16:24:04 2005 -0400

    [PATCH] USB dummy_hcd: Centralize link state computations
    
    This patch adds to the dummy_hcd driver a new routine for keeping track of
    all changes in the state of the emulated USB link.  The logic is now kept
    in one spot instead of spread around, and it's easier to verify and
    update the code.  The behavior of the port features has been corrected in
    a few respects as well (for instance, if the POWER feature is clear then
    none of the other features can be set).
    
    Also added is support for the (relatively new) _connect() and
    _disconnect() calls of the Gadget API.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9b762510c186584a6be0d3ece03e8a4b2ac13a8
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 3 16:15:43 2005 -0400

    [PATCH] USB dummy_hcd: Use separate pdevs for HC and UDC
    
    This patch makes the dummy_hcd driver create separate platform devices for
    the emulated host controller and emulated device controller.  This gives a
    more accurate simulation and will permit testing of situations where only
    one of the two devices is suspended.
    
    This also changes the name of the host controller platform device to match
    the name of the driver.  That way the normal platform bus probe mechanism
    will handle binding the driver to the device.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c2db8b5e5692a6f35913a829607ee6efde3c7cbd
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Apr 29 16:30:48 2005 -0400

    [PATCH] USB: dummy_hcd: USB_PORT_FEAT changed to USB_PORT_STAT
    
    This patch makes some cosmetic changes to dummy_hcd:
    
    	Minor alterations of comments and whitespace.
    
    	Replace USB_PORT_FEAT_xxx with USB_PORT_STAT_xxx.  This is
    	appropriate as the values are stored in a status variable
    	and they aren't feature indices.  Also it allows the
    	elimination of a bunch of awkward bit shift operations.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5742b0c95026c817d9c266174ca39a909e8d38ca
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon May 2 11:25:17 2005 -0400

    [PATCH] USB dummy_hcd: Partial OTG emulation
    
    Partial OTG support for dummy_hcd, mostly as a framework for further work.
    It emulates the new OTG flags in the host and peripheral frameworks, if
    that option is configured.  But it's incomplete:
    
      - Resetting the peripheral needs to clear the OTG state bits;
        a second enumeration won't work correctly.
    
      - This stops modeling HNP right when roles should switch the first time.
        It should probably disconnect, then set the usb_bus.is_b_host and
        usb_gadget.is_a_peripheral flags; then it'd enumerate almost normally,
        except for the role reversal.  Roles could then switch a second time,
        back to "normal" (with those flags cleared).
    
      - SRP should be modeled as "resume from port-unpowered", which is
        a state that usbcore doesn't yet use.
    
    HNP can be triggered by enabling the OTG whitelist and configuring a
    gadget driver that's not in that list; or by configuring Gadget Zero
    to identify itself as the HNP test device.
    
    Sent-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 65111084c63d7674dc37833e8eb59cfdaa4d0bda
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Apr 28 13:52:31 2005 -0700

    [PATCH] USB: more omap_udc updates (dma and omap1710)
    
    More omap_udc updates:
    
      * OMAP 1710 updates
          - new UDC bit for clearing endpoint toggle, affecting CLEAR_HALT
          - new OTG bits affecting wakeup
      * Fix the bug Vladimir noted, that IN-DMA transfer code path kicks in
        for under 1024 bytes (not "up to 1024 bytes")
      * Handle transceiver setup more intelligently
          - use transceiver whenever one's available; this can be handy
            for GPIO based, loopback, or transceiverless configs
          - cleanup correctly after the "unrecognized HMC" case
      * DMA performance tweaks
          - allow burst/pack for memory access
          - use 16 bit DMA access most of the time on TIPB
      * Add workarounds for some DMA errata (not observed "in the wild"):
          - DMA CSAC/CDAC reads returning zero
          - RX/TX DMA config registers bit 12 always reads as zero (TI patch)
      * More "sparse" warnings removed, notably "changing" the SETUP packet
        to return data in USB byteorder (an API change, null effect on OMAP
        except for these warnings).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 907cba35f7f24587f0eff60073e1f4e1e01c976d
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Apr 28 13:48:09 2005 -0700

    [PATCH] USB: ethernet gadget updates (mostly cleanup)
    
    Some cleanup for the the Ethernet part of the Ethernet/RNDIS gadget driver:
    
      - Remove remnants of ancient endpoint init logic; this is simpler, clearer
    
      - Save a smidgeon of space in the object file
    
      - Get rid of some #ifdeffery, mostly by using some newish inlines
    
      - Reset more driver state as part of USB reset
    
      - Remove a needless wrapper around an RNDIS call
    
      - Improve and comment the status interrupt handling:
          * RNDIS sometimes needs to queue these transfers (rarely in normal
            cases, but reproducibly while Windows was deadlocking its USB stack)
          * Mark requests as busy/not
    
      - Enable the SET_NETDEV_DEV() call; sysfs seems to behave sanely now
    
    This is a net shrink of source code.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 340600ab4cf0cc41efd01a65af97ebb7d35a7f85
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Apr 28 13:45:25 2005 -0700

    [PATCH] USB: rndis updates (mostly cleanup)
    
    Some bugfixes and lots of cleanup (net code shrink):
    
      - On reset, force the RNDIS state machine its initial state
    
      - Hook up the RNDIS (outgoing) filters to the CDC mechanism
    
      - Lots of cleanup:
         * Eliminate duplicate copy of OID table;
         * Unify handlying of the OID "query" response data pointer;
         * Reduce code duplication for calculating query response lengths;
         * Remove some checks for "can't happen" errors;
         * Get rid of debugging #ifdefs by making the debug flag an integer level
    
    Most of the patch, by volume, relates to those query response cleanups.
    It incidentally shaves off a few hundred bytes of object code.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 247f3105636caa9d1d8a4c3dfb755de42633bc80
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 25 11:28:04 2005 -0400

    [PATCH] USB HCDs: no longer need to register root hub
    
    This patch changes the host controller drivers; they no longer need to
    register their root hubs because usbcore will take care of it for them.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8ec8d20b21f00a36343ca0ebd6c6be9421724a1e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 25 11:25:17 2005 -0400

    [PATCH] usbcore: register root hub in usb_add_hcd
    
    This patch makes usbcore automatically allocate and register the root hub
    device for a new host controller when the controller is registered.  This
    way the HCDs don't all have to include the same boilerplate code.  As a
    pleasant side benefit, the register_root_hub routine can now be made
    static and not EXPORTed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc96c0ad1ed0c938fefc0423aa99f086c5a2a1ea
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 25 11:21:31 2005 -0400

    [PATCH] ohci-omap, sl811, dummy: remove hub_set_power_budget
    
    This patch changes the HCDs that used the old hub_set_power_budget call,
    making them use the new hcd->power_budget field instead.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2532178a68b5ce4e421d50ea1b1dcc0a1359f19d
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 25 11:14:31 2005 -0400

    [PATCH] UHCI: Don't store device pointer in QH or TD
    
    This patch simplifies the uhci-hcd driver by removing the device pointer
    currently stored in the QH and TD structures.  Those pointers weren't
    being used for anything other than to increment the device's reference
    count, which is unnecessary since the device is used only when an URB
    completes, and outstanding URBs take their own reference to the device.
    As a useful side effect, this change means that uhci-hcd no longer needs
    to have the root-hub device available in the start routine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7d35b9298539d2818c51fe9070b08cf9876016f4
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 25 11:18:32 2005 -0400

    [PATCH] usbcore: Remove hub_set_power_budget
    
    This patch removes the hub_set_power_budget routine, which was used by a
    couple of HCDs to indicate that the root hub was running on battery power.
    In its place is a new field added to struct usb_hcd, which HCDs can set
    before the root hub is registered.  Special-case code in the hub driver
    knows to look at this field when configuring a root hub.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f58f97fa9d258e4110ee1257a63cd1af51787f69
Author: Colin Leroy <colin@colino.net>
Date:   Sun May 1 11:29:10 2005 +0200

    [PATCH] USB: check for device in zd1201_resume
    
    My patch adding PM support for zd1201 didn't check for the device on
    resume, which can oops if the device has been removed.
    
    This patch fixes it.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a3c900bb8cbacfecf0be51313e43f330663266a1
Author: Colin Leroy <colin@colino.net>
Date:   Sun Apr 24 16:37:15 2005 -0700

    [PATCH] USB: PM support for zd1201
    
    This patch enables power management (suspend, resume) support for zd1201.
    It fixes problems after wakeup for me, but these problems did not appear
    everytime without this patch.  it's a bit empirical, based on what the
    usbnet does, so maybe not correct...  Maybe someone can give it a look
    before it's applied.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 507ca9bc0476662f3463888d583864834eab1e11
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Apr 23 12:49:16 2005 -0700

    [PATCH] USB: add ability for usb-serial drivers to determine if their write urb is currently being used.
    
    This removes a lot of racy and buggy code by trying to check the status of the urb.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4df0e334a9fc731689e8ba4f42a0d72a7491348
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Apr 23 12:49:16 2005 -0700

    [PATCH] USB: add reboot notifier to ohci
    
    Adds a reboot notifier to OHCI, mostly to benefit kexec; plus
    minor #include tweaks.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ff7c79e4f37821235b51fb8e19088c08938cc8fc
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Apr 22 13:17:00 2005 -0700

    [PATCH] USB: usbtest updates
    
    Updates to "usbtest" driver:
    
      * Improve some diagnostics.  One path that never generated diagnostics
        before should now generate two ... unless you hit a GCC bug that
        all my compilers seem to have, go figure.
    
      * Add suspend/resume support, so this behaves when the Linux host
        being used for testing suspends.
    
      * Don't test the "zero byte ep0 read" case unless real-world relevance
        for the testing is is irrelevant.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 884b600f63dc7c646f415a5d8f356df1f66ff6f2
Author: Oliver Neukum <oliver@neukum.org>
Date:   Thu Apr 21 21:28:02 2005 +0200

    [PATCH] USB: fix acm trouble with terminals
    
    This patch fixes lost LF when ACM device is used with getty/login/bash,
    in case of a modem which takes calls.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d5926ae7a827bdd06b588ffbc56fd4525cd9214a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Apr 21 15:56:37 2005 -0400

    [PATCH] usbcore support for root-hub IRQ instead of polling
    
    This is a revised version of an earlier patch to add support to usbcore
    for driving root hubs by interrupts rather than polling.
    
    There's a temporary flag added to struct usb_hcd, marking devices whose
    drivers are aware of the new mechanism.  By default that flag doesn't get
    set so drivers will continue to see the same polling behavior as before.
    This way we can convert the HCDs one by one to use interrupt-based event
    reporting, and the temporary flag can be removed when they're all done.
    
    Also included is a small change to the hcd_disable_endpoint routine.
    Although endpoints normally shouldn't be disabled while a controller is
    suspended, it's legal to do so when the controller's driver is being
    rmmod'ed.
    
    Lastly the patch adds a new callback, .hub_irq_enable, for use by HCDs
    where the root hub's port-change interrupts are level-triggered rather
    than edge-triggered.  The callback is invoked each time khubd has finished
    processing a root hub, to let the HCD know that the interrupt can safely
    be re-enabled.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02597d2deec2a3de0e2b52c1f83904b65626a0d5
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Apr 28 14:51:27 2005 -0400

    [PATCH] USB UHCI: Add shutdown method
    
    After all the discussion you might not be interested in this still, but
    nevertheless here it is.  This patch adds a shutdown method to the
    uhci-hcd driver.  Its prerequisite is the patch you wrote adding shutdown
    support for PCI.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c074b416b94c0aa4a371f24bf6cc13d8cf1fab59
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Apr 22 14:39:12 2005 -0400

    [PATCH] USB UHCI: improved reset handling
    
    This patch improves the strategy uhci-hcd uses for performing controller
    resets and checking whether they are needed.
    
    	The HCRESET command doesn't affect the Suspend, Resume,
    	or Reset bits in the port status & control registers, so
    	the driver must clear them by itself.  This means the
    	code to figure out how many ports there are has to be moved
    	to an earlier spot in the driver.
    
    	The R/WC bits in the USBLEGSUP register can be set by the
    	hardware even in the absence of BIOS meddling with legacy
    	support features.  Hence it's not a good idea to check them
    	while trying to determine whether the BIOS has altered the
    	controller's state.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6c1b445c226dd82d0961725dec8051b95003723a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Apr 21 16:04:58 2005 -0400

    [PATCH] USB UHCI: Use root-hub IRQs while suspended
    
    This patch, which has as478b as a prerequisite, enables the uhci-hcd
    driver to take advantage of root-hub IRQs rather than polling during the
    time it is suspended.  (Unfortunately the hardware doesn't support
    port-change interrupts while the controller is running.)  It also turns
    off the driver's private timer while the controller is suspended, as it
    isn't needed then.  The combined elimination of polling interrupts and
    timer interrupts ought to be enough to allow some systems to save a
    noticeable amount of power while they are otherwise idle.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4daaa87c8f19c5f1978470e9e91b74d9e0fb0f8e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sat Apr 9 17:30:08 2005 -0400

    [PATCH] USB UHCI: Fix up loose ends
    
    This patch tidies up a few loose ends left by the preceding patches.
    It indicates the controller supports remote wakeup whenever the PM
    capability is present -- which shouldn't cause any harm if the
    assumption turns out to be wrong.  It refuses to suspend the
    controller if the root hub is still active, and it refuses to resume
    the root hub if the controller is suspended.  It adds checks for a
    dead controller in several spots, and it adds memory barriers as
    needed to insure that I/O operations are completed before moving on.
    
    Actually I'm not certain the last part is being done correctly.  With
    code like this:
    
    	outw(..., ...);
    	mb();
    	udelay(5);
    
    do we know for certain that the outw() will complete _before_ the
    delay begins?  If not, how should this be written?
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8bed8b6be75bc5a46aa599ab360d5f1db291c8f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sat Apr 9 17:29:00 2005 -0400

    [PATCH] USB UHCI: Add root-hub suspend/resume support
    
    This patch implements (finally!) separate suspend and resume routines
    for the root hub and the controller in the UHCI driver.  It also
    changes the sequence used to reset the controller during initial
    probing, so as to preserve the existing state during a Resume-From-Disk.
    (This new sequence is what should be used in the PCI Quirks code for
    early USB handoffs, incidentally.)  Lastly it adds a notion of the
    controller being "inaccessible" while in a PCI low-power state, when
    normal I/O operations shouldn't be allowed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8f4fe4358c5e0a79b4bd47b814d19f1d1d06f21
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sat Apr 9 17:27:32 2005 -0400

    [PATCH] USB UHCI: Add root hub states
    
    This patch starts making some serious changes to the UHCI driver.
    There's a set of private states for the root hub, and the internal
    routines for suspending and resuming work completely differently, with
    transitions based on the new states.  Now the driver distinguishes
    between a privately auto-stopped state and a publicly suspended state,
    and it will properly suspend controllers with broken resume-detect
    interrupts instead of resetting them.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f5946f8220a866dcdb8edc6abe23c1443e252425
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sat Apr 9 17:26:00 2005 -0400

    [PATCH] USB UHCI: Minor improvements
    
    This patch makes a few small improvements in the UHCI driver.  Some
    code is moved between different source files and a more useful pointer
    is passed to a callback routine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 014e73c99aa408f3766afe8d11a1caa3a708b736
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sat Apr 9 17:24:42 2005 -0400

    [PATCH] USB UHCI: subroutine reordering
    
    This patch moves a few subroutines around in the uhci-hcd source file.
    Nothing else is changed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 72ebddb59a644732ff0240cdf5d216952a2b0c6b
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 11 18:34:17 2005 -0700

    [PATCH] USB: turn a user mode driver error into a hard error
    
    This patch turns a user mode driver error into a hard error, and updates
    the relevant diagnostic slightly to help troubleshooting.  gphoto was
    known to have this problem, hopefully it is now fixed (they have had
    plenty of warning...)
    
    This had been left as a soft error to give various user mode drivers a
    change to be properly fixed, with the statement that starting in about
    2.6.10 it would be changed.  It had been mostly safe as a soft error ...
    but that can not be guaranteed.  Now that a year has passed, it's time to
    really insist that the user mode drivers finally fix their relevant bugs.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 589a0083a3c9e9610e54984998a46c07a2584b55
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Apr 21 17:12:59 2005 +0300

    [PATCH] USB: Fix oops at rmmod after failed probe in isp116x-hcd
    
    This patch fixes an oops triggered at rmmod of isp116x-hcd
    after the probe() has failed.
    
    Also, it extends the error message printed, if the driver
    cannot detect "Chip's Clock Ready" after a software reset.
    As Ian Campbell recently reported, this happens if the
    chip's H_WAKEUP pin is not pulled low during software reset.
    Several people have already had this issue, hence the update
    to the error message.
    
    Also, extend the error message about the failed clock
    detection after the software reset.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>

commit 4808a1c0261176f9c7e28e7f108d41a381a7d0fc
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Sat Apr 9 22:57:39 2005 +0300

    [PATCH] USB: Add isp116x-hcd USB host controller driver
    
    This patch provides an "isp116x-hcd" driver for Philips'
    ISP1160/ISP1161 USB host controllers.
    
    The driver:
     - is relatively small, meant for use on embedded platforms.
     - runs usbtests 1-14 without problems for days.
     - has been in use by 6-7 different people on ARM and PPC platforms,
       running a range of devices including USB hubs.
     - supports suspend/resume of both the platform device and the root hub;
       supports remote wakeup of the root hub (but NOT the platform device)
       by USB devices.
     - does NOT support ISO transfers (nobody has asked for them).
     - is PIO-only.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 313980c92724cf42877a7bdafdef439ee9d68ccb
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 11 15:38:25 2005 -0700

    [PATCH] USB: omap_udc updates (mostly cleanups)
    
    Various USB patches, mostly for portability:
    
      - Fifo mode 1 didn't work previously (oopsed), so now it's fixed and
        (why not) defines even more endpoints for composite devices.
    
      - OMAP 1710 doesn't have an internal transceiver.
    
      - Small PM update:  if the USB link is suspended, don't disconnect on
        entry to deep sleep.
    
      - Be more correct about handling zero length control reads.  OMAP
        seems to mis-handle that protocol peculiarity though; best avoided.
    
      - Platform device resources (for UDC and OTG controllers) now use
        physical addresses, so /proc/iomem is more consistent.
    
      - Minor cleanups, notably (by volume) for "sparse" NULL warnings.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>

commit d794ac7ae3613c2abfb678617ac7d74c8ff0099c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 18 12:43:25 2005 -0400

    [PATCH] USB: g_file_storage: export "stall" parameter
    
    This patch changes the g_file_storage driver to make the "stall" module
    parameter generally available; currently it is available only if the
    testing version of the module has been configured.  It also fixes a typo
    in a comment -- thanks, Pat!
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 76f4af8efc72b6091d230cbe718cedca06d2d79e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Apr 5 11:56:54 2005 -0400

    [PATCH] USB: g_file_storage: Consolidate min()s
    
    This patch simplifies the g_file_storage driver by consolidating a bunch
    of min() calculations at a single spot.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a94130e00038ebeb2f66901a4a4a9e05a03051c1
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jun 27 01:39:28 2005 -0400

    [PATCH] fix silly config option.
    
    CONFIG_CONFIG_TUNER_MULTI_I2C probably isn't what the
    author meant to create.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96c51ce94e8415d2dfb08358bbd50e1589111f33
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 27 14:49:39 2005 +0200

    [PATCH] CFQ io scheduler: scheduler switch oops
    
    If cfq is managing a queue and a new scheduler is later selected, it is
    possible for the cfqd unplug_work work to be queued after the kblockd
    work struct has been flushed.  The problem is the ordering of
    cfq_shutdown_timer_wq() and blk_put_queue() in cfq_put_cfqd().  The
    latter may rearm the work, leaving cfq_kick_queue() with dead data.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52a5e15f665385ac99607d6b9e0c3dbdf17c5cfa
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 27 10:56:58 2005 +0200

    [PATCH] CFQ io scheduler, add ioprio documentation
    
    Add ioprio documentation
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b18152c327707ae6a2eeba4cfb66457143753bc
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 27 10:56:24 2005 +0200

    [PATCH] CFQ io scheduler updates
    
    - Adjust slice values
    
    - Instead of one async queue, one is defined per priority level. This
      prevents kernel threads (such as reiserfs/x and others) that run at
      higher io priority from conflicting with others. Previously, it was a
      coin toss what io prio the async queue got, it was defined by who
      first set up the queue.
    
    - Let a time slice only begin, when the previous slice is completely
      done. Previously we could be somewhat unfair to a new sync slice, if
      the previous slice was async and had several ios queued. This might
      need a little tweaking if throughput suffers a little due to this,
      allowing perhaps an overlap of a single request or so.
    
    - Optimize the calling of kblockd_schedule_work() by doing it only when
      it is strictly necessary (no requests in driver and work left to do).
    
    - Correct sync vs async logic. A 'normal' process can be purely async as
      well, and a flusher can be purely sync as well. Sync or async is now a
      property of the class defined and requests pending. Previously writers
      could be considered sync, when they were really async.
    
    - Get rid of the bit fields in cfqq and crq, use flags instead.
    
    - Various other cleanups and fixes
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d25f3566bb606720a67caef77b16190df10dd98
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 27 10:55:49 2005 +0200

    [PATCH] Fix cfq_find_next_crq()
    
    In cfq_find_next_crq(), cfq tries to find the next request by choosing
    one of two requests before and after the current one.  Currently, when
    choosing the next request, if there's no next request, the next
    candidate is NULL, resulting in selection of the previous request.  This
    results in weird scheduling.  Once we reach the end, we always seek
    backward.
    
    The correct behavior is using the first request as the next candidate.
    cfq_choose_req() already has logics for handling wrapped requests.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22e2c507c301c3dbbcf91b4948b88f78842ee6c9
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 27 10:55:12 2005 +0200

    [PATCH] Update cfq io scheduler to time sliced design
    
    This updates the CFQ io scheduler to the new time sliced design (cfq
    v3).  It provides full process fairness, while giving excellent
    aggregate system throughput even for many competing processes.  It
    supports io priorities, either inherited from the cpu nice value or set
    directly with the ioprio_get/set syscalls.  The latter closely mimic
    set/getpriority.
    
    This import is based on my latest from -mm.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b46ffaefe3c251897de23e5a534dd922c969d67b
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Jun 27 21:48:48 2005 +0100

    [PATCH] ARM: 2759/1: Fix IXP4xx debug code (again)
    
    Patch from Deepak Saxena
    
    Accidently swapped the order of movne and orrne. Bad.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b38a3ab3d1bb0dc3288f73903d4dc4672b5cd2d0
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Jun 27 15:35:37 2005 -0500

    JFS: Code cleanup - getting rid of never-used debug code
    
    I'm finally getting around to cleaning out debug code that I've never used.
    There has always been code ifdef'ed out by _JFS_DEBUG_DMAP, _JFS_DEBUG_IMAP,
    _JFS_DEBUG_DTREE, and _JFS_DEBUG_XTREE, which I have personally never used,
    and I doubt that anyone has since the design stage back in OS/2.  There is
    also a function, xtGather, that has never been used, and I don't know why it
    was ever there.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit eb4e10d091b369027ec205163e06f7eec335996f
Author: Michael Burian <dynmail1@gassner-waagen.at>
Date:   Mon Jun 27 15:58:39 2005 +0100

    [PATCH] ARM: 2758/1: Fix comment in file header to read "ARM" instead i386
    
    Patch from Michael Burian
    
    This does not look like an include file for "i386", so use "ARM" instead.
    
    Signed-off-by: Michael Burian <dynmail1@gassner-waagen.at>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f3bb742640338eca0d8c3fa8071df89168efbf0a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 14:49:10 2005 +0100

    [PATCH] ARM: Update mach-types
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c79ebfa8d2c126815e67cbf0dc2cb185dcae59f9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 14:23:38 2005 +0100

    [PATCH] ARM: Fix speeling eroor in io.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a013053d4965d9a45300938e713a4b512e0257d8
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 14:16:47 2005 +0100

    [PATCH] ARM: Move memmap freeing into init.c
    
    It doesn't make sense for this to be in mm-armv.c now that 26-bit
    ARM support is no longer integrated into arch/arm.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a343e6075a396e07eeff52c0da5629c8fd396be2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 14:08:56 2005 +0100

    [PATCH] ARM: Move PGD kernel page table initialisation
    
    It doesn't make sense to have the PGD kernel pointers initialisation
    separate from the PGD user pointers, especially when we clean the
    data cache over the whole range.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2ea83398b75309d8fdc999c4bb252e72d7e4fd9d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 14:04:05 2005 +0100

    [PATCH] ARM: Add VST idle loop call
    
    This call allows the dynamic tick support to reprogram the timer
    immediately before the CPU idles.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 99bcc0590806c4f7a4ecf1a11add335b56cde963
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 13:59:43 2005 +0100

    [PATCH] ARM: Add missed AAEC2000 file
    
    My scripts missed committing this file.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ec9f47cd6a14ca069bb7552a984c0a338fc7262b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 11:12:54 2005 +0100

    [PATCH] Serial: Split 8250 port table
    
    Add separate files for the different 8250 ISA-based serial boards.
    
    Looking across all the various architectures, it seems reasonable that
    we can key the availability of the configuration options for these
    beasts to the bus-related symbols (iow, CONFIG_ISA).  We also standardise
    the base baud/uart clock rate for these boards - I'm sure that isn't
    architecture specific, but is solely dependent on the crystal fitted
    on the board (which should be the same no matter what type of machine
    its fitted into.)
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit addcc4a10f10ffde88b2ee6dc3af46fab6dff1e2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 27 10:29:26 2005 +0100

    [PATCH] Serial: Remove {un,}register_serial from 68328serial.c
    
    68328serial.c does not make use of register_serial/unregister_serial,
    which is traditionally used to register 8250-compatible UARTs with
    the 8250-compatible serial driver.
    
    Acked-by: David McCullough
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3e90928d81449ee10a06bc306916503d5c284a25
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sun May 29 01:17:29 2005 +0200

    [PATCH] sound/oss/via82cxxx_audio: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h
    when calling pci_set_dma_mask() or pci_set_consistent_dma_mask()
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 0c144d0d0303917000cc918e63567b5ded22d5e2
Author: Philip Pokorny <ppokorny@penguincomputing.com>
Date:   Sat May 28 01:24:47 2005 -0700

    [PATCH] libata fix read capacity handling for more than 2TB
    
    This is a multi-part message in MIME format.

commit e254e9bff5283aad1af6d74d2a312ee011b84d61
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed Jun 8 15:11:57 2005 -0400

    [PATCH] b44: check link state during open
    
    Check the link state during b44_open.  This closes a 1 HZ window
    that existed after b44_open ran but before the b44_timer handler ran,
    during which ethtool would report "Link detected: yes" no matter what
    the link state actually was.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 1fe2cb32763457a829d33b38ec117ffe5c98e045
Author: Adam Belay <ambx1@neo.rr.com>
Date:   Mon Jun 20 14:28:41 2005 -0700

    [PATCH] fix tulip suspend/resume #2
    
    This patch allows the tulip driver to suspend and resume properly.  It was
    originally written by Karsten Keil and then modified by Adam Belay.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Adam Belay <abelay@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 05ab195c9803946931390faa6cfb714bd1c1e3dc
Author: Olaf Hering <olh@suse.de>
Date:   Thu May 26 01:16:51 2005 +0200

    [PATCH] uninitialized variable in prism54 isl38xx_trigger_device
    
    drivers/net/wireless/prism54/isl_38xx.c:131: warning: 'current_time.tv_sec' is used uninitialized in this function
    drivers/net/wireless/prism54/isl_38xx.c:131: warning: 'current_time.tv_usec' is used uninitialized in this function
    
    Signed-off-by: Olaf Hering <olh@suse.de>

commit ae0a97bfda598088b6f97db9d9f65cd6c4f439c6
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed May 25 16:07:04 2005 +0900

    [PATCH] NETDEV: fix receiving multicast frames.
    
    Some USB ethernet drivers did not accept multicast frames appropriately.
    IPv6 did not work with those drivers without this patch.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit e8d997952bbea4f408f56a55f18667f2817dbb44
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed May 25 16:06:59 2005 +0900

    [PATCH] NETDEV: Elecom (Laneed) LD-USBL/TX support.
    
    Elecom (Laneed) LD-USBL/TX support.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 7b24017e9b4506d2f83e768bf2766cc1c4a3ee54
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 13 12:31:53 2005 -0700

    [PATCH] 3c523: needs a license
    
    Module needs a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    
    diffstat:=
     drivers/net/3c523.c |    1 +
     1 files changed, 1 insertion(+)

commit 0bbaf069f053957e8d733784e18a2992afd1dd3c
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Jun 20 10:54:21 2005 -0500

    [PATCH] gianfar: Add support enhanced TSEC features on the MPC 8548
    
    Jeff,
    
    Just incase this got lost in the recent netdev mailing list transition
    here is a nicer version of Andy's patch for gianfar.
    
    - kumar
    
    * TCP/IP/UDP checksumming and verification
    * VLAN tag insertion/extraction
    * Larger multicast hash-table
    * Padding to align IP headers
    
    Also added:
    * msg lvl support
    * Some whitespace cleanup
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>

commit be83668a253149d99085ca4afe6cd8dc8a43fcd0
Author: Nicolas Pitre <nico@cam.org>
Date:   Sun Jun 19 23:56:21 2005 -0400

    [PATCH] smc91x: plug race between TX tasklet and driver reset
    
    The race causes a kernel oops when smc_hardware_send_pkt() tries to
    dereference pending_tx_skb which would have been freed from one of the
    driver reset paths just after the tx_task tasklet has been scheduled.
    This race is possible on SMP but was uncovered by the kernel RT work.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>

commit ed4030d114efff53e2605ea4d07d39835b68b605
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Fri Jun 17 08:23:17 2005 +0300

    [PATCH] via-rhine trivial whitespace patch
    
    --Boundary-00=_F5lsC5eH1wGW5o9
    Content-Type: text/plain;
      charset="koi8-r"
    Content-Transfer-Encoding: 7bit
    Content-Disposition: inline
    
    Hi Jeff,
    
    In some messages in via-rhine.c there is a leading space
    for no apparent reason. This patch removes it.
    --
    vda
    
    --Boundary-00=_F5lsC5eH1wGW5o9
    Content-Type: text/x-diff;
      charset="koi8-r";
      name="via-rhine.c.diff"
    Content-Transfer-Encoding: 7bit
    Content-Disposition: attachment;
    	filename="via-rhine.c.diff"

commit 2b02893ed13ec6a5799099844b5a84d8cd631dbd
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:46:06 2005 -0700

    [PATCH] e1000: Driver version, white space, comments & other
    
    Driver version, white space, comments & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 3893d54731b599fed2e6cdd477580c0fadea415a
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:44:49 2005 -0700

    [PATCH] e1000: Included proposals to false late collisions due to H/W latencies
    
    Included proposals to false late collisions due to H/W latencies
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 6921368f64c59b2a1d4659a958c69458c94d8b75
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:44:20 2005 -0700

    [PATCH] e1000: Ethtool set speed/duplex validates parameters for consistency
    
    Ethtool set speed/duplex validates parameters for consistency
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit d439d4b7ac24b341a40a98995f6a6d3ef586eaf7
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:43:56 2005 -0700

    [PATCH] e1000: Enable ethtool phys_id feature for 82573 controllers
    
    Enable ethtool phys_id feature for 82573 controllers
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 683a38f374d65128c8dd392a724513f9b8818bf7
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:43:25 2005 -0700

    [PATCH] e1000: Fixed VLAN tag processing error for big-endian architectures
    
    Fixed VLAN tag processing error for big-endian architectures
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 012609a877bbb7508e273d642b245d7633bc45a4
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:43:06 2005 -0700

    [PATCH] e1000: Ethtool cleanup patch from Stephen Hemminger
    
    Ethtool cleanup patch from Stephen Hemminger
       * use ADVERTISED_xxx fields when setting advertised fields
       * don't hardcode constant for advertised field
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 4564327b46a8c6400cd10d6dd041f6b984539f88
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:42:42 2005 -0700

    [PATCH] e1000: Fixed the loopback test failure for 82573 based adapters
    
    Fixed the loopback test failure for 82573 based adapters
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit b01f66910b8b36b2fe9e8051222ea418ad040cea
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:42:29 2005 -0700

    [PATCH] e1000: Fixed register and loopback test failures with 82573 controllers
    
    Fixed register and loopback test failures with 82573 controllers
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit c6963ef571eb59b29629714c6ba3070dcca0468d
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:42:07 2005 -0700

    [PATCH] e1000: Cleanup debug message printed when Tx Unit hang is detected
    
    Cleanup debug message printed when Tx Unit hang is detected
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 60490fe030f3969a8706d94c7cf8469be6330678
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:41:45 2005 -0700

    [PATCH] e1000: Use netdev_priv() to get to netdev->priv
    
    Use netdev_priv() to get to netdev->priv - from shemminger@osdl.org
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 70cf362ba988b4e6c9027cd7acff158e46a95b15
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:40:41 2005 -0700

    [PATCH] e1000: Use correct WOL settings for 82544 adapters
    
    Use correct WOL settings for 82544 adapters
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 97876fc66fc2405f1a2ec09eb6a0206e5168d2d9
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:40:19 2005 -0700

    [PATCH] e1000: Synchronize phy access between stats update and MII_IOCTL
    
    Synchronize phy access between stats update and MII_IOCTL
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 0685c31b58a69e41393e974f6e6b8e0a4eadcf0b
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:31:44 2005 -0700

    [PATCH] e100: NAPI performance enhancements
    
    NAPI performance enhancements - Fixed issues with shared interrupts and NAPI resulting in bad performance.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit f92d872876617cddbb0532291034f88941e855fd
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:30:22 2005 -0700

    [PATCH] e100: e100_eeprom_load was called after e100_phy_init
    
    e100_eeprom_load was called after e100_phy_init causing phy_init
    not to use values set in EEPROM - from emann@mrv.com
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 648951451e6d2d532d4ace2f8e9c5cdf1d563e83
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Fri Jun 17 17:27:41 2005 -0700

    [PATCH] e100: fixed e100 MDI/MDI-X issues
    
    Added patch from Eran Mann to fix following e100 MDI/MDI-X issues
     * MDI/MDI-X autodetection should never be enabled for 82551ER/QM chips
     * enabling this feature based on eeprom settings
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 9758d0f028b4c73a5222168a5ffc340606ecbea1
Merge: 0dd3c78... 1a9fe63...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Mon Jun 27 00:27:47 2005 -0400

    Merge /spare/repo/netdev-2.6/ branch 'orinoco'

commit 1a9fe638ebdcb28bded8ec2f71d0a339ebf438ea
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Mon Jun 27 00:27:07 2005 -0400

    wireless/orinoco: remove changelog, bump version

commit 98c4cae1dafcf1abbfebc0189ff27df586a838b0
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:28:06 2005 +0200

    [PATCH] orinoco: monitor mode support
    
    Patch from Pavel Roskin

commit 8f2abf4430ef2a131926a537ee6325dc43b0ec28
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:28:02 2005 +0200

    [PATCH] orinoco: always use 802.11 header for rx processing
    
    If the frame has ToDS flag set, mark it by setting skb->pkt_type to
    PACKET_OTHERHOST, so that applications unaware of promiscous mode won't get
    uplink (STA->AP) packets for STA->STA transmissions relayed by the AP.
    Thanks to John Denker and David Gibson for finding the problem and the
    solution.
    
    Patch from Pavel Roskin

commit 95dd91fbd8d3c788ef93bc94b4b600889e04dba1
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:56 2005 +0200

    [PATCH] orinoco: scanning support
    
    Patch from Pavel Roskin

commit 16739b065f4b0965d975f5c756204c7aa911cd61
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:51 2005 +0200

    [PATCH] orinoco: manual roaming for Symbol and Intersilfirmware
    
    Patch from Pavel Roskin

commit 1fab2e8b7a9dd0226e42ad5d3688edd5065bd231
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:40 2005 +0200

    [PATCH] orinoco: basic ethtool support
    
    I completely reimplemented this based on ethtool_ops, CVS has an
    ioctl-based version.

commit 620554e406e3cc01434c658a1e597162d7e56fd6
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:33 2005 +0200

    [PATCH] orinoco: wireless API 15 support
    
    (patch from Moustafa Youssef, updated by Jim Carter and Pavel Roskin).

commit 5d558b7f36cc577d31b770d8987681ec6e6545e7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:28 2005 +0200

    [PATCH] orinoco: include <net/ieee80211.h>
    
    We need constants from this header in the next patches.

commit 279385949ebb41ad166fd37505fe552cdb74ed59
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 01:27:20 2005 +0200

    [PATCH] bring over ieee80211.h from mainline
    
    the prototypes and inlines aren't actually needed, but let's not diverge
    from -mm too far.

commit 0dd3c7814750adc58ed3e7b79e1943a14a790db6
Author: dmitry pervushin <dpervushin@ru.mvista.com>
Date:   Mon Jun 20 15:32:54 2005 -0700

    [PATCH] cs89x0.c: support for Philips' pnx0105 network adapter
    
    This patch is to provide support for cs89x0-based network device on
    Philips' pnx0105 board.
    
    Signed-off-by: dmitry pervushin <dpervushin@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 7aa55fcec236daed20dd362c99229184691d0e7f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jun 21 01:47:06 2005 -0700

    [PATCH] drivers/net/skfp/: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove the completely unused smtparse.c
    - remove the following unused global functions:
      - drvfbi.c: init_dma
      - drvfbi.c: dis_dma
      - drvfbi.c: get_rom_byte
      - drvfbi.c: mac_drv_vpd_read
      - drvfbi.c: mac_drv_pci_fix
      - fplustm.c: mac_set_func_addr
      - fplustm.c: mac_del_multicast
      - hwmtm.c: mac_drv_rx_frag
      - pcmplc.c: pcm_set_lct_short
      - smt.c: smt_please_reconnect
      - smt.c: smt_change_t_neg
      - smtdef.c: smt_set_defaults
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 9b25978ef8ebe010f582489117f8a7a43a6b44a3
Author: Hideki Yamane <henrich@iijmio-mail.jp>
Date:   Mon Jun 27 00:18:32 2005 -0400

    [netdrvr] tulip: add pci id

commit f49d16ef2d6f008119d4ee2c895781fb229bad68
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jun 26 11:36:52 2005 +0200

    [PATCH] forcedeth: Add support for new device id
    
    This is a multi-part message in MIME format.

commit 8f767fc83cf4e4f1241b5a0b949b54088d075411
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sat Jun 18 16:27:19 2005 +0200

    [PATCH] forcedeth: Poll for link changes
    
    This is a multi-part message in MIME format.

commit 9992d4aa6b3b169a7903e029fc2c3eaa4b4055a1
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jun 5 17:36:11 2005 +0200

    [PATCH] forcedeth: add two new pci ids
    
    This is a multi-part message in MIME format.

commit a3948663ed89c2f17e37cd0936d964341edb193e
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jun 20 23:49:08 2005 +0200

    [PATCH] drivers/block/sx8.c: Use the DMA_{64, 32}BIT_MASK constants
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    These patches include dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 4f2ad81104a18946c64215adffce50c2a659fddd
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 20 23:53:40 2005 +0200

    [PATCH] net/lanstreamer: replace schedule_timeout() with ssleep()/msleep_interruptible()
    
    Use ssleep() / msleep_interruptible() [as appropriate]
    instead of schedule_timeout() to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit f17697a37ccd2128f37250d2e7715c59931dc458
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 20 23:54:12 2005 +0200

    [PATCH] net/pcnet32: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to
    guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 0da8b1454815862e03dae1a199936832a6e67868
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 20 23:54:25 2005 +0200

    [PATCH] net/farsync: add set_current_state() before schedule_timeout()
    
    Insert set_current_state() before schedule_timeout() so the
    function delays as expected. Without the addition, schedule_timeout()
    will return immediately.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit a26c074c1cf130df95e9c297ef98fdd98348acf0
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 20 23:54:27 2005 +0200

    [PATCH] net/sb1000: replace nicedelay() with ssleep()
    
    Use ssleep() instead of nicedelay()
    to guarantee the task delays as expected. Remove the prototype and
    definition of nicedelay(). This is a very weird function, because it is
    called to sleep in terms of usecs, but always sleeps for 1 second,
    completely ignoring the parameter. I have gone ahead and followed suit,
    just sleeping for a second in all cases, but maybe someone with the
    hardware could tell me if perhaps the paramter *should* matter. Additionally,
    nicedelay() is called in TASK_INTERRUPTIBLE state, but doesn't deal with signals
    in case these longer delays do not complete, so I believe ssleep() is more
    appropriate.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 62595eb9066ea09f7f8a789a38bec16d70ee0321
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Jun 20 23:54:37 2005 +0200

    [PATCH] wireless: char* -> char[] conversion in airo.c
    
    This conversion makes code from line 7101 right:
    	if (copy_to_user(com.data, swversion, sizeof(swversion)))
    
    size output (before, after):
      55416    2228     160   57804    e1cc drivers/net/wireless/airo.o
      55412    2228     160   57800    e1c8 drivers/net/wireless/airo.o
    
    more outputs from Alexey Dobriyan:
    2.95.3:
               text    data     bss     dec     hex filename
    before    51118    2156     160   53434    d0ba drivers/net/wireless/airo.o
    after     51118    2156     160   53434    d0ba drivers/net/wireless/airo.o
    
    3.3.5-20050130:
    before    46999    2156     160   49315    c0a3 drivers/net/wireless/airo.o
    after     46994    2156     160   49310    c09e drivers/net/wireless/airo.o
    
    4.1.0-20050522:
    before    45555    2220     160   47935    bb3f drivers/net/wireless/airo.o
    after     45550    2220     160   47930    bb3a drivers/net/wireless/airo.o
    
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 020f46a39eb7b99a575b9f4d105fce2b142acdf1
Merge: 41b6c37... 4da62fc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 26 19:16:33 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 41b6c37326cb24efc86fba94bcaa37f2cc23f1cd
Merge: 5f6b551... 26799e6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 26 17:28:24 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 4da62fc70d7cbcf8fa606a8c806d9dc8faa0ceae
Author: pageexec <pageexec@freemail.hu>
Date:   Sun Jun 26 16:00:19 2005 -0700

    [IPVS]: Fix for overflows
    
    From: <pageexec@freemail.hu>
    
    $subject was fixed in 2.4 already, 2.6 needs it as well.
    
    The impact of the bugs is a kernel stack overflow and privilege escalation
    from CAP_NET_ADMIN via the IP_VS_SO_SET_STARTDAEMON/IP_VS_SO_GET_DAEMON
    ioctls.  People running with 'root=all caps' (i.e., most users) are not
    really affected (there's nothing to escalate), but SELinux and similar
    users should take it seriously if they grant CAP_NET_ADMIN to other users.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f6b5517bfcae217d52a7607b1bebc3a257f45d1
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Mon Jun 20 15:32:51 2005 -0700

    [PATCH] DM9000 network driver bugfix
    
    This patch fixes two bugs in the dm9000 network driver:
    
    - Don't read one byte too much in 8bit mode.
    - release correct resource
    
    Signed-off-by: Jochen Karrer <j.karrer@lightmaze.com>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 1db1a8740abc90f4715a48cd970506686e6da5b1
Author: Ismail Donmez <ismail@kde.org.tr>
Date:   Mon Jun 20 15:32:52 2005 -0700

    [PATCH] Documentation/networking/dmfe.txt: Make documentation nicer
    
    Patch indents dmfe.txt to look like other docs.  It adds a tip about CNET
    cards using Davicom chipsets.  Also it removes parts where it refers to how
    to build driver out-of-kernel which seems to be cruft from times where the
    driver was out of the kernel.
    
    Signed-off-by: Ismail Donmez <ismail@kde.org.tr>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 400de2c0c4f4a2cc2e0270353e7eb512c1899a0c
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Mon Jun 20 15:33:04 2005 -0700

    [PATCH] fealnx.c calls dev_kfree_skb from atomic context
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 1cc68ae0cf9e3384d9eef6985b312bf2bf1161b3
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jun 20 15:33:04 2005 -0700

    [PATCH] fix int vs. pm_message_t confusion in airo
    
    Fix int vs. pm_message_t confusion in airo. Should change no code.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit feea1db26e5babbedf1f4f36223e21b2f2d6f499
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Jun 20 15:33:03 2005 -0700

    [PATCH] defxx: Use irqreturn_t for the interrupt handler
    
    This is a fix for the interrupt handler in the defxx driver to use
    irqreturn_t.  Beside the obvious fix of returning a proper status at all,
    it actually checks board registers as appropriate for determining if an
    interrupt has been recorded in the bus-specific interface logic.
    
    The patch also includes an obvious one-line fix for SET_NETDEV_DEV needed
    for the EISA variation, for which I've decided there is no point in sending
    separately.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 16b110c3fd760620b4a787db6ed512fe531ab1b5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 15:32:59 2005 -0700

    [PATCH] dmfe warning fix
    
    drivers/net/tulip/dmfe.c: In function `dmfe_parse_srom':
    drivers/net/tulip/dmfe.c:1805: warning: passing arg 1 of `__le16_to_cpup' from incompatible pointer type
    drivers/net/tulip/dmfe.c:1817: warning: passing arg 1 of `__le32_to_cpup' from incompatible pointer type
    drivers/net/tulip/dmfe.c:1817: warning: passing arg 1 of `__le32_to_cpup' from incompatible pointer type
    
    This is basically a guess:
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit f04e3f092a855ce798f274b38712b90d51b73bca
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 16 21:13:03 2005 +0200

    [PATCH] document that 8139TOO supports 8129/8130
    
    The 8129/8130 support is a sub-option that is not visible if the user
    hasn't enabled the 8139 support.
    
    Let's make it a bit easier for users to find the driver for their nic.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit d470e3b483dcf79c16463bc740738dca76a035a9
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 26 15:31:51 2005 -0700

    [NETLINK]: Fix two socket hashing bugs.
    
    1) netlink_release() should only decrement the hash entry
       count if the socket was actually hashed.
    
       This was causing hash->entries to underflow, which
       resulting in all kinds of troubles.
    
       On 64-bit systems, this would cause the following
       conditional to erroneously trigger:
    
    	err = -ENOMEM;
    	if (BITS_PER_LONG > 32 && unlikely(hash->entries >= UINT_MAX))
    		goto err;
    
    2) netlink_autobind() needs to propagate the error return from
       netlink_insert().  Otherwise, callers will not see the error
       as they should and thus try to operate on a socket with a zero pid,
       which is very bad.
    
       However, it should not propagate -EBUSY.  If two threads race
       to autobind the socket, that is fine.  This is consistent with the
       autobind behavior in other protocols.
    
       So bug #1 above, combined with this one, resulted in hangs
       on netlink_sendmsg() calls to the rtnetlink socket.  We'd try
       to do the user sendmsg() with the socket's pid set to zero,
       later we do a socket lookup using that pid (via the value we
       stashed away in NETLINK_CB(skb).pid), but that won't give us the
       user socket, it will give us the rtnetlink socket.  So when we
       try to wake up the receive queue, we dive back into rtnetlink_rcv()
       which tries to recursively take the rtnetlink semaphore.
    
    Thanks to Jakub Jelink for providing backtraces.  Also, thanks to
    Herbert Xu for supplying debugging patches to help track this down,
    and also finding a mistake in an earlier version of this fix.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a9fc25108995f1f59ee30026818d7ec2bb016fbe
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun May 1 23:34:57 2005 -0700

    [PATCH] net/slip: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to guarantee
    the task delays as expected.

commit 6835d09ad286db5df472dc91aae0a69128e7258b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 2 03:47:00 2005 +0200

    [PATCH] drivers/net/ewrk3.c: remove dead code
    
    This patch removes some obviously dead code found by the Coverity
    checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 854608d824dc2c8e14c373e0c46cefda5386ed8a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 2 03:46:52 2005 +0200

    [PATCH] drivers/net/skfp/: fix LITTLE_ENDIAN
    
    This patch fixes the LITTLE_ENDIAN #define and a function prototype.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit de70b4c87b8f1d484cf533536c0c6ce2e05101cf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 2 03:46:43 2005 +0200

    [PATCH] drivers/net/tokenring/: cleanups
    
    This patch contains the follwing cleanups:
    - make needlessly global code static
    - remove obsolete Emacs settings
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 32e9e25ef20789c24ffa1f41489a13932cf82c77
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 26 15:28:10 2005 -0700

    [ATALK]: Include asm/byteorder.h in linux/atalk.h
    
    We're using __be16 in userland visible types, so we
    have to include asm/byteorder.h so that works.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64053beeb5a5f9cd79903a8c3dd35d1ef0a4685f
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Sun Jun 26 15:27:10 2005 -0700

    [PKTGEN]: Fix random packet sizes causing panic
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93ad4fb04f5dd82fe8ace1db7617c9dcb954cf60
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Mon Apr 11 16:47:43 2005 -0700

    [PATCH] pcnet_cs.c: IRQ handler optimization
    
    During some performance diagnostics I stumbled on this slightly wasteful
    code in pcnet_cs.c which I made the patch included at the bottom for (two
    minor comment fixes included).
    
    Improvement:
    instead of *always* calculating
    lea    0x2c0(%edx),%ebx
    and then additionally doing the
    mov    %edx,0xc0(%ebx)
    addition *if we need it*,
    
    we now do the *whole* calculation of
    mov    %edx,0x380(%ebx)
    *only* if we need it.
    This even manages to save us a whole 16-byte alignment buffer loss
    in this compilation case.
    
    Result: slightly improves IRQ handler performance in both shared and
    non-shared IRQ case, which should make my rusty P3/700 a slight bit happier.
    
    Thank you for your support,
    
    Andreas Mohr
    
    old asm result (using gcc 3.3.5):
    
    000015a0 <ei_irq_wrapper>:
        15a0:       55                      push   %ebp
        15a1:       89 e5                   mov    %esp,%ebp
        15a3:       53                      push   %ebx
        15a4:       8d 9a c0 02 00 00       lea    0x2c0(%edx),%ebx
        15aa:       e8 fc ff ff ff          call   15ab <ei_irq_wrapper+0xb>
        15af:       83 f8 01                cmp    $0x1,%eax
        15b2:       74 03                   je     15b7 <ei_irq_wrapper+0x17>
        15b4:       5b                      pop    %ebx
        15b5:       5d                      pop    %ebp
        15b6:       c3                      ret
        15b7:       31 d2                   xor    %edx,%edx
        15b9:       89 93 c0 00 00 00       mov    %edx,0xc0(%ebx)
        15bf:       eb f3                   jmp    15b4 <ei_irq_wrapper+0x14>
        15c1:       eb 0d                   jmp    15d0 <ei_watchdog>
        15c3:       90                      nop
        15c4:       90                      nop
        15c5:       90                      nop
        15c6:       90                      nop
        15c7:       90                      nop
        15c8:       90                      nop
        15c9:       90                      nop
        15ca:       90                      nop
        15cb:       90                      nop
        15cc:       90                      nop
        15cd:       90                      nop
        15ce:       90                      nop
        15cf:       90                      nop
    
    000015d0 <ei_watchdog>:
    
    new asm result:
    
    000015a0 <ei_irq_wrapper>:
        15a0:       55                      push   %ebp
        15a1:       89 e5                   mov    %esp,%ebp
        15a3:       53                      push   %ebx
        15a4:       89 d3                   mov    %edx,%ebx
        15a6:       e8 fc ff ff ff          call   15a7 <ei_irq_wrapper+0x7>
        15ab:       83 f8 01                cmp    $0x1,%eax
        15ae:       74 03                   je     15b3 <ei_irq_wrapper+0x13>
        15b0:       5b                      pop    %ebx
        15b1:       5d                      pop    %ebp
        15b2:       c3                      ret
        15b3:       31 d2                   xor    %edx,%edx
        15b5:       89 93 80 03 00 00       mov    %edx,0x380(%ebx)
        15bb:       eb f3                   jmp    15b0 <ei_irq_wrapper+0x10>
        15bd:       8d 76 00                lea    0x0(%esi),%esi
    
    000015c0 <ei_watchdog>:
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 1e7f0bd8c8f2d0496ad338be5e69ff4395d77da4
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Jun 26 18:22:14 2005 -0400

    drivers/net/: Use the DMA_{64,32}BIT_MASK constants
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 60fe7403209179fccd6629172c4b36acc69c5db6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 26 15:21:15 2005 -0700

    [TCP]: Let TCP_CONG_ADVANCED default to n
    
    It doesn't seem to make much sense to let an "If unsure, say N." option
    default to y.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c3607676c12d77d70cc712310f52fbc6af5895d
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 26 15:20:20 2005 -0700

    [IPV4]: Fix thinko in TCP_CONG_BIC default.
    
    Since it is tristate when we offer it as a choice, we should
    definte it also as tristate when forcing it as the default.
    Otherwise kconfig warns.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5ccabb9b45aff50e41d27a5f384ae2d2dd7640de
Author: Magnus Damm <damm@opensource.se>
Date:   Tue Apr 5 20:05:50 2005 +0200

    [PATCH] arlan: module parameter fixes
    
    Make sure the code compiles with and without ARLAN_ENTRY_EXIT_DEBUGGING.
    Only provide parameter descriptions when parameters are defined.
    Remove "arlan_"-prefix to shape up built-in parameter names:
    
    arlan.arlan_debug -> arlan.debug
    arlan.arlan_EEPROM_bad -> arlan.EEPROM_bad
    arlan.arlan_entry_and_exit_debug -> arlan.entry_and_exit_debug
    arlan.arlan_entry_debug -> arlan.entry_debug
    arlan.arlan_exit_debug -> arlan.exit_debug
    
    Signed-off-by: Magnus Damm <damm@opensource.se>

commit 12b279f9c0cb70695865dc336161512fa6e75d50
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Apr 4 18:10:18 2005 +0200

    [PATCH] net/sis900: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() instead of custom
    macros.
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>

commit e8c0eee96801f3c3f577b377b89ab01ab36ba7b6
Merge: 97f568d... aef7b83...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 26 18:09:43 2005 -0400

    Merge /spare/repo/netdev-2.6/ branch 'register-netdev'

commit aef7b83c92dd0b7e994805440655d1d64147287b
Merge: b1fc550... 8678887...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 26 18:06:06 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 97f568d8e3dc031b092e6086c0534d5411fb2cf5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jun 26 18:02:44 2005 -0400

    8139cp: safer spin loop for get_statistics
    
    The spin loop in 8139cp is limited to 100 iterations when pulling hardware
    stats. There is no allowance for processor speed so on a fast machine, the
    stats may not be available that fast. Also, if the board doesn't return
    soon enough make sure turn the address back off to prevent later updates
    when memory has gone away.

commit 223d47278a77091b62e7d063e95860f63ca55e20
Author: Kumar Gala <kumar.gala@freescale.com>
Date:   Sun Jun 26 17:58:51 2005 -0400

    gianfar: Update Marvell PHY name
    
    This patch updates the name identifier to list both of the Marvell PHYs
    that are supported.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>

commit 169a3e66637c667b43dab7c319ffd5c99804cad8
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Sun Jun 26 17:54:11 2005 -0400

    bonding: xor/802.3ad improved slave hash
    
    Add support for alternate slave selection algorithms to bonding
    balance-xor and 802.3ad modes.  Default mode (what we have now: xor of
    MAC addresses) is "layer2", new choice is "layer3+4", using IP and port
    information for hashing to select peer.
    
    Originally submitted by Jason Gabler for balance-xor mode;
    modified by Jay Vosburgh to additionally support 802.3ad mode.  Jason's
    original comment is as follows:
    
    The attached patch to the Linux Etherchannel Bonding driver modifies the
    driver's "balance-xor" mode as follows:
    
          - alternate hashing policy support for mode 2
            * Added kernel parameter "xmit_policy" to allow the specification
              of different hashing policies for mode 2.  The original mode 2
              policy is the default, now found in xmit_hash_policy_layer2().
            * Added xmit_hash_policy_layer34()
    
    This patch was inspired by hashing policies implemented by Cisco,
    Foundry and IBM, which are explained in
    Foundry documentation found at:
    http://www.foundrynet.com/services/documentation/sribcg/Trunking.html#112750
    
    Signed-off-by: Jason Gabler <jygabler@lbl.gov>
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>

commit c3ade5cad07f4d67f2e16a28f3c73d9483a55e0e
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Sun Jun 26 17:52:20 2005 -0400

    bonding: gratuitous ARP
    
    Add support for generating gratuitous ARPs in bonding
    active-backup mode when failovers occur.  Includes support for VLAN
    tagging the ARPs as needed.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>

commit 12755c16a9e4fa2fd5b0ca1963e83d671a6251da
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 26 17:45:52 2005 -0400

    Tulip fixes for Cobalt Qube/RaQ

commit 26799e675e47c5aa3104628e2081a7299ea46557
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jun 26 22:24:19 2005 +0100

    [PATCH] ARM: 2757/1: remove ixdp2400_init_irq from ixdp2800 code
    
    Patch from Lennert Buytenhek
    
    Compiling one kernel that supports both ixdp2400 and ixdp2800 gives
    an error, as a copy of the ixdp2400 irq init routing accidentally
    ended up in ixdp2800.c somehow.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit baaf7ed1797de1defce3e3a03f3c9c49cdf3b534
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jun 26 22:24:17 2005 +0100

    [PATCH] ARM: 2756/1: add ixp2000 msf mapping
    
    Patch from Lennert Buytenhek
    
    Add a mapping for the ixp2400 and ixp2800 msf unit.  The msf is the
    ixp2000's 'media and switch fabric' unit, which handles the networking
    part of the chip.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 67603be482a0361a13c2238b79172849ee2e307c
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jun 26 22:24:16 2005 +0100

    [PATCH] ARM: 2755/1: describe ixp2000 virtual memory map layout
    
    Patch from Lennert Buytenhek
    
    Add a comment to asm/arch-ixp2000/ixp2000-regs.h describing the
    ixp2000 virtual memory map layout.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 15aca90363719f11f200f510a13d18bda9dea789
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jun 26 22:24:14 2005 +0100

    [PATCH] ARM: 2754/1: move ixp2000 VMALLOC_END up
    
    Patch from Lennert Buytenhek
    
    As the ixdp cpld mappings now live at 0xfe000000, we can push
    VMALLOC_END upwards to 0xfb000000, where the first iotable mapping
    begins.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 91f6a589fb6bb4ce6b6b196e910d3b907e1d0a40
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Jun 26 22:24:13 2005 +0100

    [PATCH] ARM: 2753/1: move ixdp* cpld mappings
    
    Patch from Lennert Buytenhek
    
    All ixdp platforms currently have a cpld mapped in at 0xfafff000.
    Since this address is not 1M-aligned, a regular page mapping will be
    used instead of a section mapping, which opens up the possibility of
    triggering ixp2400 erratum #66 as we only do the XCB=101 workaround
    thing for section mappings.
    There is still a lot of space higher up in the virtual memory map
    for 1M mappings, so move the cpld mapping to 0xfe000000 and make it
    1M big so that a section mapping will be used for it.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7ca6448dbfb398bba36eda3c01bc14b86c3675be
Merge: f1f67a9... 7d681b2...
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Sun Jun 26 23:20:36 2005 +0200

    Merge with rsync://fileserver/linux
    Update to Linus latest

commit 2a322e4c08be4e7cb0c04b427ddaaa679fd88863
Merge: ba6d237... 8678887...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sun Jun 26 22:19:40 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git.

commit ba6d2377c85c9b8a793f455d8c9b6cf31985d70f
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sun Jun 26 22:12:02 2005 +0100

    NTFS: Fix a nasty deadlock that appeared in recent kernels.
          The situation: VFS inode X on a mounted ntfs volume is dirty.  For
          same inode X, the ntfs_inode is dirty and thus corresponding on-disk
          inode, i.e. mft record, which is in a dirty PAGE_CACHE_PAGE belonging
          to the table of inodes, i.e. $MFT, inode 0.
          What happens:
          Process 1: sys_sync()/umount()/whatever...  calls
          __sync_single_inode() for $MFT -> do_writepages() -> write_page for
          the dirty page containing the on-disk inode X, the page is now locked
          -> ntfs_write_mst_block() which clears PageUptodate() on the page to
          prevent anyone else getting hold of it whilst it does the write out.
          This is necessary as the on-disk inode needs "fixups" applied before
          the write to disk which are removed again after the write and
          PageUptodate is then set again.  It then analyses the page looking
          for dirty on-disk inodes and when it finds one it calls
          ntfs_may_write_mft_record() to see if it is safe to write this
          on-disk inode.  This then calls ilookup5() to check if the
          corresponding VFS inode is in icache().  This in turn calls ifind()
          which waits on the inode lock via wait_on_inode whilst holding the
          global inode_lock.
          Process 2: pdflush results in a call to __sync_single_inode for the
          same VFS inode X on the ntfs volume.  This locks the inode (I_LOCK)
          then calls write-inode -> ntfs_write_inode -> map_mft_record() ->
          read_cache_page() for the page (in page cache of table of inodes
          $MFT, inode 0) containing the on-disk inode.  This page has
          PageUptodate() clear because of Process 1 (see above) so
          read_cache_page() blocks when it tries to take the page lock for the
          page so it can call ntfs_read_page().
          Thus Process 1 is holding the page lock on the page containing the
          on-disk inode X and it is waiting on the inode X to be unlocked in
          ifind() so it can write the page out and then unlock the page.
          And Process 2 is holding the inode lock on inode X and is waiting for
          the page to be unlocked so it can call ntfs_readpage() or discover
          that Process 1 set PageUptodate() again and use the page.
          Thus we have a deadlock due to ifind() waiting on the inode lock.
          The solution: The fix is to use the newly introduced
          ilookup5_nowait() which does not wait on the inode's lock and hence
          avoids the deadlock.  This is safe as we do not care about the VFS
          inode and only use the fact that it is in the VFS inode cache and the
          fact that the vfs and ntfs inodes are one struct in memory to find
          the ntfs inode in memory if present.  Also, the ntfs inode has its
          own locking so it does not matter if the vfs inode is locked.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8b0ee07e108b2eefdab5bb73f33223f18926c3b2
Merge: 4638aef... 8678887...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 26 17:11:03 2005 -0400

    Merge upstream (approx. 2.6.12-git8) into 'janitor' branch of netdev-2.6.

commit c0df28cfe012652160a530f9aa74b0a49c77eac5
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Jun 25 16:23:44 2005 -0500

    [SCSI] aic7xxx: correct target valid check in aic7xxx_proc.c
    
    From: 	Andy Whitcroft <apw@shadowen.org>
    
    Updated to remove the bogus translated target check.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 937abeaadf1b00252690f9de35b9df13feb0afd7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:43:56 2005 +0200

    [SCSI] use list_for_each_entry_safe in scsi_error.c
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3111b0d1646b3e1891dc08112d087aed2146fafe
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:43:26 2005 +0200

    [SCSI] remove scsi_eh_eflags_ macros
    
    Just opencoded access to eh_eflags, it's much more readable anyway.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d115f845a0bd59cd263e791f739964f42b7b0e8
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:42:05 2005 +0200

    [SCSI] remove scsi_cmnd->state
    
    We never look at it except for the old megaraid driver that abuses it
    for sending internal commands.  That usage can be fixed easily because
    those internal commands are single-threaded by a mutex and we can easily
    use a completion there.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b4edcbcafdecc80ef5356ff6452768b1b926ea76
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:40:52 2005 +0200

    [SCSI] remove scsi_cmnd->owner
    
    never checked anywhere
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f5ad56145d43cdb68760bba3e14655ff6ae726aa
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:40:08 2005 +0200

    [SCSI] remove scsi_cmnd->abort_reason
    
    Never used for anything but printing it out in debug routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a4c8f6285165a7089edb2010dbd894148ca95d57
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 13:39:23 2005 +0200

    [SCSI] remove scsi_cmnd.eh_state
    
    it's never set to anything, and just three broken drivers are looking
    at it and doing odd things.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8678887e7fb43cd6c9be6c9807b05e77848e0920
Merge: bf82322... 9a18664...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 26 09:55:39 2005 -0700

    Merge 'drm-3264' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6

commit bf82322ec5d5faa8bfd8f163909244d8c6b562d5
Merge: 7d681b2... 6921e33...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 26 09:53:42 2005 -0700

    Merge 'drm-fixes' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6

commit 09b8b5f843afc21daf710cc610e5ca890ee94696
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 26 17:06:36 2005 +0100

    [PATCH] ARM: Add SA_TIMER flag to timer interrupts
    
    VST needs to know which timer handler is for the timer interrupt.
    Mark all timer interrupts with the SA_TIMER flag.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7d681b23d6cc14a8c026ea6756242cb522cbbcae
Author: Kumar Gala <galak@freescale.com>
Date:   Sun Jun 26 09:14:01 2005 -0500

    [PATCH] ppc32: Fix MPC83xx IPIC external interrupt pending register offset
    
    The pending registers for IRQ1-IRQ7 were pointing to the interrupt pending
    register instead of the external one.
    
    Signed-off-by: Tony Li <Tony.Li@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 340ea3972ffc6c9f90b3ac38b70eade1c8efbf5b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 26 03:27:22 2005 -0700

    [PATCH] remove redundant info from SubmittingPatches
    
    Since the Trivial Patch Monkey is mentioned both in steps 4.  and 5., I
    removed it from step4 (Select e-mail destination), since it should go under
    'Select your CC list'.
    
    Signed-off-by: Cosmin Nicolaescu <cos@camelot.homelinux.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdb94f3a78366d46bc73c8c8d8fe0dfb9522ff36
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 26 03:27:21 2005 -0700

    [PATCH] arm: swsusp build fix
    
    Another swsusp fixup.
    
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34f18a9887afaeb6e50168df512e1118f7d73542
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 26 03:27:20 2005 -0700

    [PATCH] jffs2 build fix
    
    Missed conversion in the swsusp cleanup.
    
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa4c49669f0408557bc52cd7054c920a8790dec6
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Jun 26 08:45:39 2005 -0500

    [SCSI] 	megaraid: fix compilation after eh locking changes
    
    From: Christoph Hellwig <hch@lst.de>
    
    Patch fixed up and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 849717383abc795b8f5efe7b9e0792b2e1f8916a
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Jun 20 11:55:24 2005 -0700

    [SCSI] aacraid: New products patch
    
    This patch add the following products to the driver:
            IBM ServeRAID 8i
            ICP 9014R0
            ICP 9024R0
            ICP 9047MA
            ICP 9087MA
            ICP 9085LI
            ICP 5085AU
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 12413197eef2a29e0b9fb0fa541f5cbaeb1d3f3f
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 01:05:01 2005 +0200

    [SCSI] remove scsi_set_device
    
    scsi_add_host is the proper place to set the device, but people copy
    the scsi_set_device usage from older drivers again and again.
    
    note that this leaves some legacy drivers like qlogicisp/qlogicfc
    without pci association in sysfs, but they're scheduled to go away soon
    anyway.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 117e4b27ebb1133072b1453145e60e576569e8af
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 20 23:55:07 2005 +0200

    [SCSI] scsi/qla1280: replace schedule_timeout() with ssleep()
    
    Use ssleep() instead of schedule_timeout to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6921e3310486a6e5ac3f36efcc7351347503c71a
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jun 26 21:05:59 2005 +1000

    drm: fix radeon irq properly
    
    After the previous fix in 2.6.12, this patch should properly fix the
    radeon IRQ handling code.
    
    From: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 6f0dcb72d6a053fff9288b742d3bcc9b23f0f6db
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 25 20:09:12 2005 -0700

    Fix up try_to_freeze() usage in arch/i386/kernel/signal.c
    
    The parentheses were missing. Noted by Pavel Machek.

commit 2031d0f586839bc68f35bcf8580b18947f8491d4
Merge: 98e7f29... 3e1d1d2...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 25 17:16:53 2005 -0700

    Merge Christoph's freeze cleanup patch

commit 3e1d1d28d99dabe63c64f7f40f1ca1d646de1f73
Author: Christoph Lameter <christoph@lameter.com>
Date:   Fri Jun 24 23:13:50 2005 -0700

    [PATCH] Cleanup patch for process freezing
    
    1. Establish a simple API for process freezing defined in linux/include/sched.h:
    
       frozen(process)		Check for frozen process
       freezing(process)		Check if a process is being frozen
       freeze(process)		Tell a process to freeze (go to refrigerator)
       thaw_process(process)	Restart process
       frozen_process(process)	Process is frozen now
    
    2. Remove all references to PF_FREEZE and PF_FROZEN from all
       kernel sources except sched.h
    
    3. Fix numerous locations where try_to_freeze is manually done by a driver
    
    4. Remove the argument that is no longer necessary from two function calls.
    
    5. Some whitespace cleanup
    
    6. Clear potential race in refrigerator (provides an open window of PF_FREEZE
       cleared before setting PF_FROZEN, recalc_sigpending does not check
       PF_FROZEN).
    
    This patch does not address the problem of freeze_processes() violating the rule
    that a task may only modify its own flags by setting PF_FREEZE. This is not clean
    in an SMP environment. freeze(process) is therefore not SMP safe!
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98e7f29418a4931f97e6b78d1ef3a47103fe6cd5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:37 2005 -0700

    [PATCH] schedule the obsolete raw driver for removal
    
    Since kernel 2.6.3 the Kconfig text explicitely stated this driver was
    obsolete.
    
    (trolling for IBMers)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33ed271263f5fb6ca5ab888b98a55ae5d138c0b
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:59:36 2005 -0700

    [PATCH] list_for_each_entry: fs-dquot.c
    
    Make code more readable with list_for_each_entry_safe.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97998d8fdb5530edd466b006423a422ea790cf23
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:35 2005 -0700

    [PATCH] drivers/char/rio/: kill rio_udelay
    
    There's no need for a function that only calls udelay.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d660a7403a801018dc65208dbcba4463c3038b1f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:35 2005 -0700

    [PATCH] MAINTAINERS: document that uclinux-dev@uclinux.org is subscribers-only
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fd5559c1f916f284b5b0866148e076866de6f99
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Jun 25 14:59:34 2005 -0700

    [PATCH] DCO: use IANA-reserved second level domain name
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a72c7ba2e6df945484d7a85d7a82237270957fd
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Jun 25 14:59:33 2005 -0700

    [PATCH] serial/68328serial: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() in send_break() to
    guarantee the task delays as expected.  Change @duration's units to
    milliseconds, and modify arguments in callers appropriately.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d582b4ef6df853ca2da46135855cd6536c0205b
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Jun 25 14:59:32 2005 -0700

    [PATCH] serial/68360serial: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() in send_break() to
    guarantee the task delays as expected.  Change @duration's units to
    milliseconds, and modify arguments in callers appropriately.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f353488ce48e7a0311fe764284096481b455fbe9
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:30 2005 -0700

    [PATCH] Remove duplicate file in Documentation/networking
    
    The files wanpipe.txt and wan-router.txt in Documentation/networking contain
    the exact same information (diff between the two shows no document is "Linux
    WAN Router Utilities Package" and therefor the name wan-router.txt is more
    appropriate.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 301a716446a8b24898808d0430c2ed0dce55890e
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:29 2005 -0700

    [PATCH] Remove duplicate file in Documentation/networking (00-INDEX)
    
    wanpipe.txt and wan-router.txt in Documentation/networking contain the exact
    same information (diff between the two shows no
    Documentation/networking/00-INDEX as pointed out by Randy Dunlap.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9ff7d6644827a7cc1b2ecf636112c4703f32633
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:28 2005 -0700

    [PATCH] Remove duplicate file in Documentation/networking (drivers_net_wan_Kconfig)
    
    wanpipe.txt and wan-router.txt in Documentation/networking contain the exact
    same information (diff between the two shows no drivers/net/wan/Kconfig.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f11842ebbb3b98a88c38ef6c18345ccc792a54b
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:27 2005 -0700

    [PATCH] sound/oss/cmpci: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 738c7b4f7f36ce2c547d0a2c2aa397aae904510f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:27 2005 -0700

    [PATCH] sound/oss/es1370: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ee538a2e867c7fbdb2a5940b610682d5d08e8be
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:26 2005 -0700

    [PATCH] sound/oss/es1371: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit caac3a444ce3b5a8d76069abfbb699d2a65b3f09
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Jun 25 14:59:25 2005 -0700

    [PATCH] sound/oss/esssolo1: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f90e7185ee00c1faa9d07b2f669d124772fdba17
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Sat Jun 25 14:59:24 2005 -0700

    [PATCH] printk: arch/i386/mm/pgtable.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee48dd579977c35f35760bc893115e649b026306
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Sat Jun 25 14:59:24 2005 -0700

    [PATCH] printk: arch/i386/mm/ioremap.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48b9d03c5f20a0585bb6f7d8c4abad3661df5d75
Author: J.A. Magallon <jamagallon@able.es>
Date:   Sat Jun 25 14:59:22 2005 -0700

    [PATCH] Kill signed chars
    
    scripts/ is full of mismatches between char* params an signed char* arguments,
    and viceversa.  gcc4 now complaints loud about this.  Patch below deletes all
    those 'signed'.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f14c6fd0fc9fbaf242254c84ba2632decb25e91a
Author: Olaf Hering <olh@suse.de>
Date:   Sat Jun 25 14:59:21 2005 -0700

    [PATCH] update comment about gzip scratch size
    
    fix a comment about the array size.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfa1a55335a0e822b36607d25c980c4e2a8e5e87
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sat Jun 25 14:59:20 2005 -0700

    [PATCH] ll_merge_requests_fn() cleanup
    
    ll_merge_requests_fn() assigns total_{phys,hw}_segments twice.  Fix this
    and a typo.
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 672c3fd9069e5a138f9d4afc9aeb5aa34aacce32
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:18 2005 -0700

    [PATCH] drivers/isdn/hisax/: possible cleanups
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - remove the compiled but unused st5481_hdlc.{c,h}
    - kill enternow.h
    - enternow_pci.c: kill InByte/OutByte/BYTE
    - isdnl2.c: kill FreeSkb
    - remove or #if 0 the following unused functions:
      - config.c: IsdnCardState
      - ipacx.c: ipacx_new_ph
      - ipacx.c: dch_bh
      - ipacx.c: setup_ipacx
      - isdnl2.c: IsRR
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Kai Germaschewski <kai@germaschewski.name>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b3d4a2a3ef9488d4477e8823106abfd6039eb66
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:17 2005 -0700

    [PATCH] drivers/cdrom/cm206.c: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global functions static
    - remove the following unused global function:
      - cm206_delay
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 995c6ed2b1bb309eb45c3006779dc90fb3f4150d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:16 2005 -0700

    [PATCH] drivers/char/ip2*: cleanups
    
    This patch contains the following cleanups:
    - i2cmd.c: #if 0 the unused function i2cmdUnixFlags
    - i2cmd.c: make the needlessly global funciton i2cmdBaudDef static
    - ip2main.c: remove dead code that wasn't reachable due to an #ifdef
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0933ad9c233b09ee5fd636525ed07c149c879980
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:59:15 2005 -0700

    [PATCH] kfree cleanups for drivers/firmware/
    
    Here's a patch with kfree() cleanups for drivers/firmware/efivars.c Patch
    removes redundant NULL checks before kfree and also makes a small
    whitespace cleanup - moves two statements on same line to separate lines.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Acked-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0159f76d9f5839c3c92bc3a91c865e94d5e489a8
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:59:14 2005 -0700

    [PATCH] kfree cleanups in ixj.c
    
    This patch removes redundant checks for NULL pointer before kfree() in
    drivers/telephony/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89e0b1134e46195c64bbad21010799ba567bf7f2
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:59:14 2005 -0700

    [PATCH] remove pointless NULL check before kfree in sony535.c
    
    There's no need to check for NULL, kfree() can cope.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07d46de415fba309a5648f078fdda118d489646b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:13 2005 -0700

    [PATCH] update Computone MAINTAINERS entry
    
    This patch states that Michael still maintains this driver and removes a no
    longer mailing list.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e84d1c36a505765c12e90289c9dbd575332840b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:12 2005 -0700

    [PATCH] i386: cleanup boot_cpu_logical_apicid variables
    
    There are currently two different boot_cpu_logical_apicid variables:
    - a global one in mpparse.c
    - a static one in smpboot.c
    
    Of these two, only the one in smpboot.c might be used (through
    boot_cpu_apicid).
    
    This patch therefore removes the one in mpparse.c .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6260cd354ec2b3ec026d6c899dc01e442b5e6cc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:11 2005 -0700

    [PATCH] change the SOUND_PRIME handling
    
    SOUND_PRIME (for OSS) is a tristate.
    
    This doesn't make much sense if most users are checking for
    SOUND_PRIME!=0.
    
    This patch changes the semantics of SOUND_PRIME to being a limit for all
    OSS modules, IOW: SOUND_PRIME=m does now say that all OSS drivers can
    only be modular.
    
    As a side effect, since SOUND_PRIME already depends on SOUND, there's no
    longer a reason for drivers depending on SOUND_PRIME to additionally
    depend on SOUND.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93d17d3d84b7147e8f07aeeb15ec01aa92c6b564
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:10 2005 -0700

    [PATCH] drivers/block/ll_rw_blk.c: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove the following unused global functions:
      - blkdev_scsi_issue_flush_fn
      - __blk_attempt_remerge
    - remove the following unused EXPORT_SYMBOL's:
      - blk_phys_contig_segment
      - blk_hw_contig_segment
      - blkdev_scsi_issue_flush_fn
      - __blk_attempt_remerge
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8e1c7292ee9b64c35b3f6d7f905ca5e854aea95
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:09 2005 -0700

    [PATCH] drivers/char/mwave/tp3780i.c: remove dead code
    
    This patch removes some dead code found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67da54cf5d577c9dda835d0cf42379657d15d6c9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:08 2005 -0700

    [PATCH] drivers/video/matrox/matroxfb_misc.c: remove dead code
    
    This patch removes some obviously dead code found by the Coverity
    checker.
    
    This patch was already ACK'ed by Petr Vandrovec.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db407163773a8447dd869ee98348e05c81b4c337
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:07 2005 -0700

    [PATCH] fs/ncpfs/: remove unused #ifdef USE_OLD_SLOW_DIRECTORY_LISTING code
    
    This patch removes some unused #ifdef USE_OLD_SLOW_DIRECTORY_LISTING
    code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94c9eca223048ae15df1989fae50eefda9daae7e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:06 2005 -0700

    [PATCH] fs/jffs/: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global functions static
    - provide some debugging helper functions only for appropriate
      values of CONFIG_JFFS_FS_VERBOSE
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f15313bf42337ade55376303932d8b6a62e6be43
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:05 2005 -0700

    [PATCH] drivers/char/rocket.c: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove the TRUE/FALSE macros
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 681ea4b930768444e9d88651c1362b0bf6d2a42b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:04 2005 -0700

    [PATCH] drivers/char/nvram.c: possible cleanups
    
    This patch contains the following possible cleanups:
    - make the needlessly global function __nvram_set_checksum static
    - #if 0 the unused global function nvram_set_checksum
    - remove the EXPORT_SYMBOL's for both functions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b01b47cf95682d02676efa5d0b48e759db405b3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:03 2005 -0700

    [PATCH] drivers/char/mwave/3780i.c: cleanups
    
    This patch contains the following cleanups:
    - make a needlessly global function static
    - #if 0 the unused global function dsp3780I_ReadGenCfg
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbc6b5f55908d7351380bca69393f5839508ad3f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:03 2005 -0700

    [PATCH] drivers/char/istallion.c: remove an unneeded variable
    
    This patch removes an unneeded global variable.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f25ad2d3b886e61d7ec03a3bdefc22871c14e9da
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:02 2005 -0700

    [PATCH] sound/oss/sscape.c: remove dead code
    
    The Coverity checker found that sscape_sb_enable never get's assigned any
    value different from 0, and therefore some code paths are impossible.
    
    This patch removes this variable and the dead code paths.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4cd16e2e8f0924d8e3a2391edc51556cad26d99
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:59:01 2005 -0700

    [PATCH] drivers/scsi/dpt*: remove version.h dependencies
    
    This patch removes version.h dependencies.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1ae13a4dd1ad732f6fb55a55dec93524feca8bc
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:59:01 2005 -0700

    [PATCH] cosmetic fixes for example programs in Documentation/cdrom/sbpcd
    
    This patch makes a few minor changes to the example programs in
    Documentation/cdrom/sbpcd to kill off some warnings and build failures.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c0e33c133021ee241e9d51255b9fb18eb34ef0e
Author: Nick Wilson <njw@osdl.org>
Date:   Sat Jun 25 14:59:00 2005 -0700

    [PATCH] Use ALIGN to remove duplicate code
    
    This patch makes use of ALIGN() to remove duplicate round-up code.
    
    Signed-off-by: Nick Wilson <njw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f45494480f31342125870c1a184999d7c5a59471
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:59 2005 -0700

    [PATCH] x86_64: coding style and whitespace fixups
    
    Remove some of the unnecessary differences between arch/i386 and
    arch/x86_64.  This patch fixes more whitespace issues, some miscellaneous
    typos, a wrong URL and a factually incorrect statement about the current
    boot sector code.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23712b2fbf6b845289c1d41d929be0931fab2759
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:58 2005 -0700

    [PATCH] lib/sha1.c: fix sparse warning
    
    lib/sha1.c:44:10: warning: cast to restricted type
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae49fe8655010616fa422273b34a1bfeaee57c1c
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:57 2005 -0700

    [PATCH] printk: drivers/char/ftape/compressor/zftape-compress.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56003191c466b8ef4b174da60f25ae58e92493f8
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:56 2005 -0700

    [PATCH] printk: drivers/char/applicom.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4bfde5abd4a0f5498a268dba17ffc91d91964d6
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:55 2005 -0700

    [PATCH] serial/icom: Remove custom msescs_to_jiffies() macro
    
    Remove the MSECS_TO_JIFFIES() macro because msescs_to_jiffies() from
    jiffies.h should be used.  The macro isn't referenced anywhere anyway.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c97f97b374fe07bc300dea629cba14612442c26d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:55 2005 -0700

    [PATCH] drivers/char/mwave/tp3780i.c: remove kernel 2.2 #if's
    
    This patch removes #if's for kernel 2.2 .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f040ffab7488c02c0806ec8808fa619d463560f9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:54 2005 -0700

    [PATCH] sound/oss/rme96xx.c: remove kernel 2.2 #if's
    
    This patch removes #if's for kernel 2.2 .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f00945a8e35e46b98f3ec4adae747397393e3ee
Author: Dave Jones <davej@redhat.com>
Date:   Sat Jun 25 14:58:53 2005 -0700

    [PATCH] nm256 oss build failure
    
    static declaration follows non static
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 155542c271ba76fec37146b26aea1001019eb60d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:53 2005 -0700

    [PATCH] sound/oss/: cleanups
    
    This patch contains cleanups including the following:
    - make needlessly global code static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b8497276a96928bcb5947cc44e61f8b69fe66ac
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:52 2005 -0700

    [PATCH] drivers/char/isicom.c: section fixes
    
    This patch fixes the following bugs:
    - __exit unregister_ioregion and unregister_drivers were called by
      __init isicom_init
    - __init isicom_init was called by __devinit isicom_setup
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a5f04bf798254390f89445ecf0b6f4c70ddc1f8
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:58:51 2005 -0700

    [PATCH] selinux: kfree cleanup
    
    kfree(NULL) is legal.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2ba192c96d12447472e105890a9cd1b97952747
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:50 2005 -0700

    [PATCH] drivers/scsi/initio.c: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove or #if 0 the following unused functions:
      - tul_pop_pend_scb
      - tul_device_reset
      - tul_reset_scsi_bus
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09417379be9b126e10ae7dcd7afc20b666146266
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:58:49 2005 -0700

    [PATCH] remove redundant NULL checks before kfree() in sound/ and avoid casting pointers about to be kfree()'ed
    
    Checking a pointer for NULL before calling kfree() on it is redundant,
    kfree() deals with NULL pointers just fine.
    This patch removes such checks from sound/
    
    This patch also makes another, but closely related, change.
    It avoids casting pointers about to be kfree()'ed.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ae6673e029d609da7ef4311440d6de501d6967a
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:58:48 2005 -0700

    [PATCH] get rid of redundant NULL checks before kfree() in arch/i386/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a6b454f8024bac68495b6cd51615feb0b54baa9
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:58:48 2005 -0700

    [PATCH] remove redundant NULL check before before kfree() in kernel/sysctl.c
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 486fd404fbc840e28a959d2f2842b6c46ed6b250
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:47 2005 -0700

    [PATCH] small partitions/msdos cleanups
    
    This patch makes the following changes to the msdos partition code:
    - remove CONFIG_NEC98_PARTITION leftovers
    - make parse_bsd static
    
    This patch was already ACK'ed by Andries Brouwer.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40086ea17e8cf12112438b3a855f44b26f7cb385
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:46 2005 -0700

    [PATCH] arch/i386/crypto/aes.c: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7c5844526f55b93fc9a44170cb7568c9bc95c4a
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:46 2005 -0700

    [PATCH] arch/i386/mm/fault.c: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77617bd8068470556049ebcdd0625acc7ab71a2b
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:45 2005 -0700

    [PATCH] arch/i386/kernel/apm.c: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f3ae3471f4c5921274c3869eef21b5611e85b50
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:44 2005 -0700

    [PATCH] arch/i386/kernel/traps.c: fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29a1d2d1bc5a473eb88489251033b3c5651d2011
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:43 2005 -0700

    [PATCH] init/do_mounts_initrd.c: fix sparse warning
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96ec3efdcbaea4f403f2a5f1204edbf903a01961
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:43 2005 -0700

    [PATCH] kernel/timer: fix msleep_interruptible() comment
    
    The comment for msleep_interruptible() is wrong, as it will ignore
    wait-queue events, but will wake up early for signals.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20f3ae5f0efe1812d2a1278e2127a335884d445
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:42 2005 -0700

    [PATCH] char/tty_io: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() in send_break() to
    guarantee the task delays as expected.  Change @duration's units to
    milliseconds, and modify arguments in callers appropriately.  Patch is
    compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8eddb620499dc638aeb4d5d3751974ca697ab39
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Jun 25 14:58:41 2005 -0700

    [PATCH] char/ds1620: use msleep() instead of schedule_timeout()
    
    Not sure why any driver needs to sleep for *two* ticks, so let's fix it.
    
    Use msleep() instead of schedule_timeout() to guarantee the task delays as
    expected.  Signals are never checked for by the callers or in the function
    itself, so use TASK_UNINTERRUPTIBLE instead of TASK_INTERRUPTIBLE.  The
    delay is presumed to have been written when HZ==100, and thus has been
    multiplied by 10 to pass to msleep().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2a457cf26020fb7aa992915388001eb983d0aa8
Author: M.Baris Demiray <baris@labristeknoloji.com>
Date:   Sat Jun 25 14:58:40 2005 -0700

    [PATCH] riotty.c cleanups and warning fix
    
    Fix a bunch of whitespace oddities and use `unsigned long' for a
    jiffies-holding variable.
    
    Signed-off-by: M.Baris Demiray <baris@labristeknoloji.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b1ee233f52c247d3a074ce660ece08bf097a47b
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 25 14:58:39 2005 -0700

    [PATCH] au1100fb: convert to C99 inits.
    
    au1100: use C99 struct init.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09dbb4768c962ac00f9ff416328a7e6bfbd92b21
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 25 14:58:39 2005 -0700

    [PATCH] x86-64: add memcpy/memset prototypes
    
    Put function prototypes for memset() and memcpy() ahead of where
    there are used, to kill sparse warnings:
    
    arch/x86_64/boot/compressed/../../../../lib/inflate.c:317:3: warning: undefined identifier 'memset'
    arch/x86_64/boot/compressed/../../../../lib/inflate.c:601:11: warning: undefined identifier 'memcpy'
    arch/x86_64/boot/compressed/misc.c:151:2: warning: undefined identifier 'memcpy'
    arch/x86_64/boot/compressed/../../../../lib/inflate.c:317:3: warning: call with no type!
    arch/x86_64/boot/compressed/../../../../lib/inflate.c:601:17: warning: call with no type!
    arch/x86_64/boot/compressed/misc.c:151:9: warning: call with no type!
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23b34f46fb762796e5c9c37e50d5a6cb56fd71fe
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:38 2005 -0700

    [PATCH] drivers/isdn/act2000/capi.c: #if 0 an unused function
    
    This patch #if 0's an unused function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08e51533a0a26c236879ad33b2798c16328051d9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:37 2005 -0700

    [PATCH] drivers/isdn/hardware/avm/: misc cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global functions static
    - b1dma.c __init/__exit the functions b1dma_{init,exit}
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35a26f150927300042e2d71aa80375b6c5295fbd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:36 2005 -0700

    [PATCH] unexport mca_find_device_by_slot
    
    I didn't find any possible modular usage of mca_find_device_by_slot in
    the kernel, and this patch therefore removes the EXPORT_SYMBOL.
    
    This patch should be safe since mca-legacy is nothing drivers should
    move to.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e206b0a66fcaf39dbef92640ce6a63d51fc5c53
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:35 2005 -0700

    [PATCH] drivers/isdn/i4l/: possible cleanups
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - remove the following unused global function:
      - isdn_audio.c: isdn_audio_2adpcm_flush
    - remove the following unused struct:
      - isdn_net.c: isdn_concap_demand_dial_dops
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 886cca3a0fda659e17c730c20929134014ebe1f2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:35 2005 -0700

    [PATCH] drivers/isdn/pcbit/: possible cleanups
    
    This patch contains the following possible cleanups:
    - make some needlessly global functions static
    - remove the following unused global functions:
      - callbacks.c: cb_out_3
      - capi.c: capi_decode_disc_conf
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3ca5e762c2aca373f1762cbc622ebe20fd20869
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 25 14:58:34 2005 -0700

    [PATCH] drivers/isdn/sc/: possible cleanups
    
    This patch contains the following possible cleanips:
    - make some needlessly global code static
    - remove the compiled but completely unused debug.c
    - remove or #if 0 the following unused global functions:
      - command.c: loopback
      - command.c: loadproc
      - init.c: irq_supported
      - packet.c: print_skb
      - shmem.c: memset_shmem
      - timer.c: trace_timer
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 594dd2c98101a5dc279153ec806d554e6b8a1e35
Author: Nico Golde <nico@ngolde.de>
Date:   Sat Jun 25 14:58:33 2005 -0700

    [PATCH] cpufreq: governors documentation fixes
    
    I corrected a small error and enhanced the govenor.txt file with the
    ondemand daemon because the kernel configs link to the documentation but
    ondemand wasn't documentated.  Feel free to include the patch in the
    attachment.
    
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70c1a0a49b75854fbc78713bf753b5b4c6f0a421
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Sat Jun 25 14:58:32 2005 -0700

    [PATCH] fbdev: remove unneeded fbsysfs printk
    
    Remove unneeded fbsysfs printk.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ed5dc6cb40b163aa19e14eda0957dcc09167b80
Author: Jurriaan on adsl-gate <thunder7@xs4all.nl>
Date:   Sat Jun 25 14:58:31 2005 -0700

    [PATCH] font selection Kconfig fixes
    
    We're accidentally selecting the new fonts by default.  Don't.
    
    Signed-off-by: Jurriaan Kalkman <thunder7@xs4all.nl>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7496cb75ec75b1e74283a481fb02f5d7ce7bdeb
Author: Dave Jones <davej@redhat.com>
Date:   Sat Jun 25 14:58:30 2005 -0700

    [PATCH] Fix vesafb/mtrr scaling problem.
    
    vesafb will do really silly things like..
    
    mtrr: type mismatch for e0000000,8000000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,4000000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,2000000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,1000000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,800000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,400000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,200000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,100000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,80000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,40000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,20000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,10000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,8000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,4000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,2000 old: write-back new: write-combining
    mtrr: type mismatch for e0000000,1000 old: write-back new: write-combining
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x800  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x400  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x200  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x100  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x80  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x40  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x20  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x10  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x8  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x4  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x2  base: 0xe0000000
    mtrr: size and base must be multiples of 4 kiB
    mtrr: size: 0x1  base: 0xe0000000
    
    Stop scaling down at PAGE_SIZE.
    Also fix up some broken indentation.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72414d3f1d22fc3e311b162fca95c430048d38ce
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Sat Jun 25 14:58:28 2005 -0700

    [PATCH] kexec code cleanup
    
    o Following patch provides purely cosmetic changes and corrects CodingStyle
      guide lines related certain issues like below in kexec related files
    
      o braces for one line "if" statements, "for" loops,
      o more than 80 column wide lines,
      o No space after "while", "for" and "switch" key words
    
    o Changes:
      o take-2: Removed the extra tab before "case" key words.
      o take-3: Put operator at the end of line and space before "*/"
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f339ecb30c759f94a29992d4635d9194132b6cf
Author: Alexander Nyberg <alexn@telia.com>
Date:   Sat Jun 25 14:58:27 2005 -0700

    [PATCH] kdump: Save trap information for later analysis
    
    If we are faulting in kernel it is quite possible this will lead to a
    panic.  Save trap number, cr2 (in case of page fault) and error_code in the
    current thread (these fields already exist for signal delivery but are not
    used here).
    
    This helps later kdump crash analyzing from user-space (a script has been
    submitted to dig this info out in gdb).
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: <fastboot@lists.osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e274d144302068a00794ec22e73520c0615cb6f
Author: Alexander Nyberg <alexn@telia.com>
Date:   Sat Jun 25 14:58:26 2005 -0700

    [PATCH] kdump: Use real pt_regs from exception
    
    Makes kexec_crashdump() take a pt_regs * as an argument.  This allows to
    get exact register state at the point of the crash.  If we come from direct
    panic assertion NULL will be passed and the current registers saved before
    crashdump.
    
    This hooks into two places:
    die(): check the conditions under which we will panic when calling
    do_exit and go there directly with the pt_regs that caused the fatal
    fault.
    
    die_nmi(): If we receive an NMI lockup while in the kernel use the
    pt_regs and go directly to crash_kexec(). We're probably nested up badly
    at this point so this might be the only chance to escape with proper
    information.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86b1ae38c0a62409dc862a28e3f08920f55f944b
Author: Hariprasad Nellitheertha <hari@in.ibm.com>
Date:   Sat Jun 25 14:58:25 2005 -0700

    [PATCH] kdump: sysrq trigger mechanism for kexec based crashdumps
    
    Add a sysrq-trigger mechanism for kexec based crashdumps.  Alt-Sysrq-c
    triggers a kexec based crashdump.
    
    Signed-off-by: Hariprasad Nellitheertha <hari@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 315c215c0a7324894541d43b0e720f20cafca92e
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:24 2005 -0700

    [PATCH] kdump: cleanups for dump file access in linear raw format
    
    Removed the dependency on backup region.  Now all the information is encoded
    in ELF format.  /dev/oldmem is a dummy interface.  User space tool need to be
    intelligent enough to parse the elf headers and read the relevant memory areas
    with the help of /dev/oldmem.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50b1fdbd81edcc8bd343ca44aca2b87a29e2f15c
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:23 2005 -0700

    [PATCH] kdump: Accessing dump file in linear raw format (/dev/oldmem)
    
          Hariprasad Nellitheertha <hari@in.ibm.com>
    
    This patch contains the code that enables us to access the previous kernel's
    memory as /dev/oldmem.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72658e9d5004fc0dd807bea9eda49e6a52e40103
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:22 2005 -0700

    [PATCH] kdump: Parse elf32 headers and export through /proc/vmcore
    
    o Adds support for parsing core ELF32 headers.
    o I am expecting ELF32 support to go away down the line. This patch has been
      introduced for testing purposes as gdb can not parse ELF64 headers for
      i386. When a decent user space solution is available, ELF32 support
      can go away.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 666bfddbe8b8fd4fd44617d6c55193d5ac7edb29
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:21 2005 -0700

    [PATCH] kdump: Access dump file in elf format (/proc/vmcore)
    
    From: "Vivek Goyal" <vgoyal@in.ibm.com>
    
    o Support for /proc/vmcore interface. This interface exports elf core image
      either in ELF32 or ELF64 format, depending on the format in which elf headers
      have been stored by crashed kernel.
    o Added support for CONFIG_VMCORE config option.
    o Removed the dependency on /proc/kcore.
    
    From: "Eric W. Biederman" <ebiederm@xmission.com>
    
    This patch has been refactored to more closely match the prevailing style in
    the affected files.  And to clearly indicate the dependency between
    /proc/kcore and proc/vmcore.c
    
    From: Hariprasad Nellitheertha <hari@in.ibm.com>
    
    This patch contains the code that provides an ELF format interface to the
    previous kernel's memory post kexec reboot.
    
    Signed off by Hariprasad Nellitheertha <hari@in.ibm.com>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2030eae52b416a9a9f0ffda74c982b7f1e19496d
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:20 2005 -0700

    [PATCH] Retrieve elfcorehdr address from command line
    
    This patch adds support for retrieving the address of elf core header if one
    is passed in command line.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60e64d46a58236e3c718074372cab6a5b56a3b15
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:19 2005 -0700

    [PATCH] kdump: Routines for copying dump pages
    
    This patch provides the interfaces necessary to read the dump contents,
    treating it as a high memory device.
    
    Signed off by Hariprasad Nellitheertha <hari@in.ibm.com>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f016456c96868c27df248a54d1cc919e7b70a23
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:19 2005 -0700

    [PATCH] kdump: Kconfig
    
    - config option CONFIG_CRASH_DUMP
    
    - Made it dependent on HIGHMEM.  This is required as capture kernel treats
      the previous kernel's memory as high memmory and stitches a PTE for
      accessing it.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92aa63a5a1bf2e7b0c79e6716d24b76dbbdcf951
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:18 2005 -0700

    [PATCH] kdump: Retrieve saved max pfn
    
    This patch retrieves the max_pfn being used by previous kernel and stores it
    in a safe location (saved_max_pfn) before it is overwritten due to user
    defined memory map.  This pfn is used to make sure that user does not try to
    read the physical memory beyond saved_max_pfn.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d58831e4163699de204dea199be2e903bf5d6eff
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:17 2005 -0700

    [PATCH] kdump documentation update to introduce use of irqpoll
    
    o Specify "irqpoll" command line option which loading second kernel. This
      helps in reducing driver initialization failures in second kernel due
      to shared interrupts.
    o Enabled LAPIC/IOAPIC support for UP kernels in second kernel. This reduces
      the chances of devices sharing the irq and hence reduces the chances of
      driver initialization failures in second kernel.
    o Build a UP capture kernel and disabled SMP support.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b089f4a68eccd9782c89262c0d7cae146d5a8a40
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:15 2005 -0700

    [PATCH] kdump: Documentation for Kdump
    
    This patch contains the documentation for the kexec based crash dump tool.
    
    Quick kdump-howto
    ================================================================
    
    1) Download and build kexec-tools.
    
    2) Download and build the latest kexec/kdump (-mm) kernel patchset.
       Two kernels need to be built in order to get this feature working.
    
      A) First kernel:
       a) Enable "kexec system call" feature:
    	CONFIG_KEXEC=y
       b) Physical load address (use default):
    	CONFIG_PHYSICAL_START=0x100000
       c) Enable "sysfs file system support":
    	CONFIG_SYSFS=y
       d) Boot into first kernel with the command line parameter "crashkernel=Y@X":
          For example: "crashkernel=64M@16M".
    
      B) Second kernel:
       a) Enable "kernel crash dumps" feature:
    	CONFIG_CRASH_DUMP=y
       b) Physical load addreess, use same load address as X in "crashkernel"
          kernel parameter in d) above, e.g., 16 MB or 0x1000000.
    	CONFIG_PHYSICAL_START=0x1000000
       c) Enable "/proc/vmcore support" (Optional, in Pseudo filesystems).
    	CONFIG_PROC_VMCORE=y
    
    3) Boot into the first kernel.
    
    4) Load the second kernel to be booted using:
    
       kexec -p <second-kernel> --crash-dump --args-linux --append="root=<root-dev>
       maxcpus=1 init 1"
    
    5) System reboots into the second kernel when a panic occurs. A module can be
       written to force the panic, for testing purposes.
    
    6) See Documentation/kdump.txt for how to read the first kernel's
       memory image and how to analyze it.
    
    Signed-off-by: Hariprasad Nellitheertha <hari@in.ibm.com>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3ea8ac8468f5c7fc65684331dfba3260d5b2d93
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:14 2005 -0700

    [PATCH] Kexec: Kexec on panic fix with nmi watchdog enabled
    
    o Problem: Kexec on panic hangs if first kernel is booted with nmi_watchdog
      command line parameter. This problem occurs because kexec crash shutdown
      code replaces the NMI callback handler. This handler saves the cpu register
      states and halts the cpu. If system is booted with nmi_watchdog parameter,
      then crashing cpu also runs this nmi handler and halts itself.
    
    o This patch fixes the problem by keeping a track of crashing cpu and not
      executing the new nmi handler on crashing cpu.
    
    o There is a dependence on smp_processor_id() function which might return
      insane value for cpu, if cpu field of thread_info is corrupted.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d55476c3f889e0f30d88e22da4682b5f10394ff
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:13 2005 -0700

    [PATCH] kdump: NMI handler segment selector, stack pointer fix
    
    CPU does not save ss and esp on stack if execution was already in kernel mode
    at the time of NMI occurrence.  This leads to saving of erractic values for ss
    and esp.  This patch fixes the issue.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 625f1c8219d95300ed32e4c67eb62a50ded095ba
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:58:12 2005 -0700

    [PATCH] Kdump: Export crash notes section address through sysfs
    
    o Following patch exports kexec global variable "crash_notes" to user space
      through sysfs as kernel attribute in /sys/kernel.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf13f0eaffa31bf6a145c53c589654b11c72ddc7
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Jun 25 14:58:11 2005 -0700

    [PATCH] kexec: s390 support
    
    Add kexec support for s390 architecture.
    
    From: Milton Miller <miltonm@bga.com>
    
    - Fix passing of first argument to relocate_kernel assembly.
    - Fix Kconfig description.
    - Remove wrong comment and comments that describe obvious things.
    - Allow only KEXEC_TYPE_DEFAULT as image type -> dump not supported.
    
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fce0d5740322b98b863f9e609f5a9bd4c06703af
Author: R Sharada <sharada@in.ibm.com>
Date:   Sat Jun 25 14:58:10 2005 -0700

    [PATCH] ppc64: kexec support for ppc64
    
    This patch implements the kexec support for ppc64 platforms.
    
    A couple of notes:
    
    1)  We copy the pages in virtual mode, using the full base kernel
        and a statically allocated stack.   At kexec_prepare time we
        scan the pages and if any overlap our (0, _end[]) range we
        return -ETXTBSY.
    
        On PowerPC 64 systems running in LPAR (logical partitioning)
        mode, only a small region of memory, referred to as the RMO,
        can be accessed in real mode.  Since Linux runs with only one
        zone of memory in the memory allocator, and it can be orders of
        magnitude more memory than the RMO, looping until we allocate
        pages in the source region is not feasible.  Copying in virtual
        means we don't have to write a hash table generation and call
        hypervisor to insert translations, instead we rely on the pinned
        kernel linear mapping.  The kernel already has move to linked
        location built in, so there is no requirement to load it at 0.
    
        If we want to load something other than a kernel, then a stub
        can be written to copy a linear chunk in real mode.
    
    2)  The start entry point gets passed parameters from the kernel.
        Slaves are started at a fixed address after copying code from
        the entry point.
    
        All CPUs get passed their firmware assigned physical id in r3
        (most calling conventions use this register for the first
        argument).
    
        This is used to distinguish each CPU from all other CPUs.
        Since firmware is not around, there is no other way to obtain
        this information other than to pass it somewhere.
    
        A single CPU, referred to here as the master and the one executing
        the kexec call, branches to start with the address of start in r4.
        While this can be calculated, we have to load it through a gpr to
        branch to this point so defining the register this is contained
        in is free.  A stack of unspecified size is available at r1
        (also common calling convention).
    
        All remaining running CPUs are sent to start at absolute address
        0x60 after copying the first 0x100 bytes from start to address 0.
        This convention was chosen because it matches what the kernel
        has been doing itself.  (only gpr3 is defined).
    
        Note: This is not quite the convention of the kexec bootblock v2
        in the kernel.  A stub has been written to convert between them,
        and we may adjust the kernel in the future to allow this directly
        without any stub.
    
    3)  Destination pages can be placed anywhere, even where they
        would not be accessible in real mode.  This will allow us to
        place ram disks above the RMO if we choose.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: R Sharada <sharada@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4c82d5132b0592f5d6befc5b652cbd4b08f12ff
Author: R Sharada <sharada@in.ibm.com>
Date:   Sat Jun 25 14:58:08 2005 -0700

    [PATCH] ppc64 kexec: native hash clear
    
    Add code to clear the hash table and invalidate the tlb for native (SMP,
    non-LPAR) mode.  Supports 16M and 4k pages.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: R Sharada <sharada@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70765aa4bdb8862a49fcf5b28f3deaf561cf5ae7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:07 2005 -0700

    [PATCH] kexec: kexec ppc support
    
    I have tweaked this patch slightly to handle an empty list
    of pages to relocate passed to relocate_new_kernel.  And
    I have added ppc_md.machine_crash_shutdown.  To keep up with
    the changes in the generic kexec infrastructure.
    
    From: Albert Herranz <albert_herranz@yahoo.es>
    
    The following patch adds support for kexec on the ppc32 platform.
    
    Non-OpenFirmware based platforms are likely to work directly without
    additional changes on the kernel side.  The kexec-tools userland package
    may need to be slightly updated, though.
    
    For OpenFirmware based machines, additional work is still needed on the
    kernel side before kexec support is ready.  Benjamin Herrenschmidt is
    kindly working on that part.
    
    In order for a ppc platform to use the kexec kernel services it must
    implement some ppc_md hooks.  Otherwise, kexec will be explicitly disabled,
    as suggested by benh.
    
    There are 3+1 new ppc_md hooks that a platform supporting kexec may
    implement.  Two of them are mandatory for kexec to work.  See
    include/asm-ppc/machdep.h for details.
    
    - machine_kexec_prepare(image)
    
      This function is called to make any arrangements to the image before it
      is loaded.
    
      This hook _MUST_ be provided by a platform in order to activate kexec
      support for that platform.  Otherwise, the platform is considered to not
      support kexec and the kexec_load system call will fail (that makes all
      existing platforms by default non-kexec'able).
    
    - machine_kexec_cleanup(image)
    
      This function is called to make any cleanups on image after the loaded
      image data it is freed.  This hook is optional.  A platform may or may
      not provide this hook.
    
    - machine_kexec(image)
    
      This function is called to perform the _actual_ kexec.  This hook
      _MUST_ be provided by a platform in order to activate kexec support for
      that platform.
    
      If a platform provides machine_kexec_prepare but forgets to provide
      machine_kexec, a kexec will fall back to a reboot.
    
      A ready-to-use machine_kexec_simple() generic function is provided to,
      hopefully, simplify kexec adoption for embedded platforms.  A platform
      may call this function from its specific machine_kexec hook, like this:
    
    void myplatform_kexec(struct kimage *image)
    {
            machine_kexec_simple(image);
    }
    
    - machine_shutdown()
    
      This function is called to perform any machine specific shutdowns, not
      already done by drivers.  This hook is optional.  A platform may or may
      not provide this hook.
    
    An example (trimmed) platform specific module for a platform supporting
    kexec through the existing machine_kexec_simple follows:
    
    /* ... */
    
    #ifdef CONFIG_KEXEC
    int myplatform_kexec_prepare(struct kimage *image)
    {
            /* here, we can place additional preparations
    */
            return 0; /* yes, we support kexec */
    }
    
    void myplatform_kexec(struct kimage *image)
    {
            machine_kexec_simple(image);
    }
    #endif /* CONFIG_KEXEC */
    
    /* ... */
    
    void __init
    platform_init(unsigned long r3, unsigned long r4,
    unsigned long r5,
                  unsigned long r6, unsigned long r7)
    {
    
    /* ... */
    
    #ifdef CONFIG_KEXEC
            ppc_md.machine_kexec_prepare =
    myplatform_kexec_prepare;
            ppc_md.machine_kexec         =
    myplatform_kexec;
    #endif /* CONFIG_KEXEC */
    
    /* ... */
    
    }
    
    The kexec ppc kernel support has been heavily tested on the GameCube Linux
    port, and, as reported in the fastboot mailing list, it has been tested too
    on a Moto 82xx ppc by Rick Richardson.
    
    Signed-off-by: Albert Herranz <albert_herranz@yahoo.es>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f5609df0c943b005847d3b2765d6dd47b624011
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:04 2005 -0700

    [PATCH] crashdump: x86_64: crashkernel option
    
    This is the x86_64 implementation of the crashkernel option.  It reserves
    a window of memory very early in the bootup process, so we never use
    it for anything but the kernel to switch to when the running
    kernel panics.
    
    In addition to reserving this memory a resource structure is registered
    so looking at /proc/iomem it is clear what happened to that memory.
    
    ISSUES:
    Is it possible to implement this in a architecture generic way?
    What should be done with architectures that always use an iommu and
    thus don't report their RAM memory resources in /proc/iomem?
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5234f5eb04abbbfa306ccfbc2ccbb6e73f515b15
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:02 2005 -0700

    [PATCH] kexec: x86_64 kexec implementation
    
    This is the x86_64 implementation of machine kexec.  32bit compatibility
    support has been implemented, and machine_kexec has been enhanced to not care
    about the changing internal kernel paget table structures.
    
    From: Alexander Nyberg <alexn@dsv.su.se>
    
          build fix
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d89559589a588d1a654329d8cd9a3ad33aaad9be
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:02 2005 -0700

    [PATCH] kexec: x86_64: factor out apic shutdown code
    
    Factor out the apic and smp shutdown code from machine_restart so it can be
    called by in the kexec reboot path as well.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bc3b91aeed71a904e431d12ca90e9b6bcb42c91
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:01 2005 -0700

    [PATCH] crashdump: x86 crashkernel option
    
    This is the x86 implementation of the crashkernel option.  It reserves a
    window of memory very early in the bootup process, so we never use it for
    anything but the kernel to switch to when the running kernel panics.
    
    In addition to reserving this memory a resource structure is registered so
    looking at /proc/iomem it is clear what happened to that memory.
    
    ISSUES:
    Is it possible to implement this in a architecture generic way?
    What should be done with architectures that always use an iommu and
    thus don't report their RAM memory resources in /proc/iomem?
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63d30298efc387c72557d11e2a7b467554c05a64
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:58:00 2005 -0700

    [PATCH] kexec: x86 shutdown APICs during crash_shutdown
    
    In the case of a crash/panic an architecture specific function
    machine_crash_shutdown is called.  This patch adds to the x86 machine_crash
    function the standard kernel code for shutting down apics.
    
    Every line of code added to that function increases the risk that we will call
    code after a kernel panic that is not safe.
    
    This patch should not make it to the stable kernel without a being reviewed a
    lot more.  It is unclear how much a hardned kernel can take when it comes to
    misconfigured apics.  So since a normal kernel has problems this patch does a
    clean shutdown.
    
    It is my expectation this patch will be dropped from future generations of the
    kexec work.  But for the moment it is a crutch to keep from breaking
    everything.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c818b45a202b8f632b4031edcba8599efda42b7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:59 2005 -0700

    [PATCH] kexec: x86: snapshot registers during crash shutdown
    
    After the kernel panics if we wish to generate an entire machine core file it
    is very nice to know the register state at the time the machine crashed.
    
    After long discussion it was realized that if you are going to be saving the
    information anyway it is reasonable to store the information in a format that
    it will be used and recognized in so the register state is stored in the
    standard ELF note format.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4ac4263a019c791e906f284bb03891d3c25a845
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:58 2005 -0700

    [PATCH] crashdump: x86: add NMI handler to capture other CPUs
    
    One of the dangers when switching from one kernel to another is what happens
    to all of the other cpus that were running in the crashed kernel.  In an
    attempt to avoid that problem this patch adds a nmi handler and attempts to
    shoot down the other cpus by sending them non maskable interrupts.
    
    The code then waits for 1 second or until all known cpus have stopped running
    and then jumps from the running kernel that has crashed to the kernel in
    reserved memory.
    
    The kernel spin loop is used for the delay as that should behave continue to
    be safe even in after a crash.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5033cba087f6ac773002123aafbea1aad4267682
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:56 2005 -0700

    [PATCH] kexec: x86 kexec core
    
    This is the i386 implementation of kexec.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd2a13054ffc25783a74afb5e4a0f2115e45f9cd
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:55 2005 -0700

    [PATCH] kexec: x86: factor out apic shutdown code
    
    Factor out the apic and smp shutdown code from machine_restart so it can be
    called by in the kexec reboot path as well.
    
    By switching to the bootstrap cpu by default on reboot I can delete/simplify
    some motherboard fixups well.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50cccc699ed849d31c9e3f7643db33edade20e4e
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:57:55 2005 -0700

    [PATCH] Kexec on panic vmlinux initrd fix
    
    This is a minor bug fix in kexec to resolve the problem of loading panic
    kernel with initrd.
    
    o Problem: Loading a capture kenrel fails if initrd is also being loaded.
      This has been observed for vmlinux image for kexec on panic case.
    
    o This patch fixes the problem. In segment location and size verification
      logic, minor correction has been done. Segment memory end (mend) should be
      mstart + memsz - 1. This one byte offset was source of failure for initrd
      loading which was being loaded at hole boundary.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc009d92435f99498cbc579ce76bf28e837e2c14
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:52 2005 -0700

    [PATCH] kexec: add kexec syscalls
    
    This patch introduces the architecture independent implementation the
    sys_kexec_load, the compat_sys_kexec_load system calls.
    
    Kexec on panic support has been integrated into the core patch and is
    relatively clean.
    
    In addition the hopefully architecture independent option
    crashkernel=size@location has been docuemented.  It's purpose is to reserve
    space for the panic kernel to live, and where no DMA transfer will ever be
    setup to access.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0537508a9921efced238b20967e50e519ac34af
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:52 2005 -0700

    [PATCH] kexec: x86_64: add CONFIG_PHYSICAL_START
    
    For one kernel to report a crash another kernel has created we need
    to have 2 kernels loaded simultaneously in memory.  To accomplish this
    the two kernels need to built to run at different physical addresses.
    
    This patch adds the CONFIG_PHYSICAL_START option to the x86_64 kernel
    so we can do just that.  You need to know what you are doing and
    the ramifications are before changing this value, and most users
    won't care so I have made it depend on CONFIG_EMBEDDED
    
    bzImage kernels will work and run at a different address when compiled
    with this option but they will still load at 1MB.  If you need a kernel
    loaded at a different address as well you need to boot a vmlinux.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a9190853c34289d9181acd9c620c76143bf88ca
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Jun 25 14:57:51 2005 -0700

    [PATCH] kexec: reserve Bootmem fix for booting nondefault location kernel
    
    This patch fixes a problem with reserving memory during boot up of a kernel
    built for non-default location.  Currently boot memory allocator reserves
    the memory required by kernel image, boot allocaotor bitmap etc.  It
    assumes that kernel is loaded at 1MB (HIGH_MEMORY hard coded to 1024*1024).
     But kernel can be built for non-default locatoin, hence existing
    hardcoding will lead to reserving unnecessary memory.  This patch fixes it.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d345e3fc9e9177deb7c82e5c79e32d77eb63cce
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:49 2005 -0700

    [PATCH] kexec: x86: add CONFIG_PYSICAL_START
    
    For one kernel to report a crash another kernel has created we need
    to have 2 kernels loaded simultaneously in memory.  To accomplish this
    the two kernels need to built to run at different physical addresses.
    
    This patch adds the CONFIG_PHYSICAL_START option to the x86 kernel
    so we can do just that.  You need to know what you are doing and
    the ramifications are before changing this value, and most users
    won't care so I have made it depend on CONFIG_EMBEDDED
    
    bzImage kernels will work and run at a different address when compiled
    with this option but they will still load at 1MB.  If you need a kernel
    loaded at a different address as well you need to boot a vmlinux.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ded01e83ec3b60191b03b9f88f53acd4e6112f5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:48 2005 -0700

    [PATCH] kexec: x86_64: vmlinux: fix physical addresses
    
    The vmlinux on x86_64 does not report the correct physical address of
    the kernel.  Instead in the physical address field it currently
    reports the virtual address of the kernel.
    
    This is patch is a bug fix that corrects vmlinux to report the
    proper physical addresses.
    
    This is potentially a help for crash dump analysis tools.
    
    This definitiely allows bootloaders that load vmlinux as a standard
    ELF executable.  Bootloaders directly loading vmlinux become of
    practical importance when we consider the kexec on panic case.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad0d75ebacdbf1004d004803df0ba371c6bdbe2a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:47 2005 -0700

    [PATCH] kexec: x86: vmlinux: fix physical addresses
    
    The vmlinux on i386 does not report the correct physical address of
    the kernel.  Instead in the physical address field it currently
    reports the virtual address of the kernel.
    
    This is patch is a bug fix that corrects vmlinux to report the
    proper physical addresses.
    
    This is potentially a help for crash dump analysis tools.
    
    This definitiely allows bootloaders that load vmlinux as a standard
    ELF executable.  Bootloaders directly loading vmlinux become of
    practical importance when we consider the kexec on panic case.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60bad7fadf59313a6359f8828bb0087884ad001a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:46 2005 -0700

    [PATCH] kexec: vmlinux: fix physical addresses
    
    In vmlinux.lds.h the code is carefull to define every section so vmlinux
    properly reports the correct physical load address of code, as well as
    it's virtual address.
    
    The new SECURITY_INIT definition fails to follow that convention and
    and causes incorrect physical address to appear in the vmlinux if
    there are any security initcalls.
    
    This patch updates the SECURITY_INIT to follow the convention in the rest of
    the file.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 208fb93162d51faa69b9774fa7809858d84fd9dc
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:45 2005 -0700

    [PATCH] kexec: x86_64: restore apic virtual wire mode on shutdown
    
    When coming out of apic mode attempt to set the appropriate
    apic back into virtual wire mode.  This improves on previous versions
    of this patch by by never setting bot the local apic and the ioapic
    into veritual wire mode.
    
    This code looks at data from the mptable to see if an ioapic has
    an ExtInt input to make this decision.  A future improvement
    is to figure out which apic or ioapic was in virtual wire mode
    at boot time and to remember it.  That is potentially a more accurate
    method, of selecting which apic to place in virutal wire mode.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 650927ef8ab1e9b05b77a3f32ca7adcedaae9306
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:44 2005 -0700

    [PATCH] kexec: x86: resture apic virtual wire mode on shutdown
    
    When coming out of apic mode attempt to set the appropriate
    apic back into virtual wire mode.  This improves on previous versions
    of this patch by by never setting bot the local apic and the ioapic
    into veritual wire mode.
    
    This code looks at data from the mptable to see if an ioapic has
    an ExtInt input to make this decision.  A future improvement
    is to figure out which apic or ioapic was in virtual wire mode
    at boot time and to remember it.  That is potentially a more accurate
    method, of selecting which apic to place in virutal wire mode.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 719e711050482be667dafd39ec787859d353931c
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:43 2005 -0700

    [PATCH] kexec: x86_64: add i8259 shutdown method
    
    From: Eric W. Biederman <ebiederm@xmission.com>
    
    The following patch simply adds a shutdown method to the x86_64 i8259 code.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cee5dab4856f51c5cad3aecc630ad0a4d2217a85
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:43 2005 -0700

    [PATCH] kexec: x86: i8259 shutdown: disable interrupts
    
    From: Eric W. Biederman <ebiederm@xmission.com>
    
    This patch disables interrupt generation from the legacy pic on reboot.  Now
    that there is a sys_device class it should not be called while drivers are
    still using interrupts.
    
    There is a report about this breaking ACPI power off on some systems.
    http://bugme.osdl.org/show_bug.cgi?id=4041
    However the final comment seems to exonerate this code.  So until
    I get more information I believe that was a false positive.
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70adada4282b52130ef31c7722d3fd8d94dacbc2
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:42 2005 -0700

    [PATCH] kexec: x86_64: e820 64bit fix
    
    From: Eric W. Biederman <ebiederm@xmission.com>
    
    It is ok to reserve resources > 4G on x86_64 struct resource is 64bit now :)
    
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9635b47d910223745258768418003580ef7dba17
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:41 2005 -0700

    [PATCH] kexec: x86: local apic fix
    
    From: "Maciej W. Rozycki" <macro@linux-mips.org>
    
    Fix a kexec problem whcih causes local APIC detection failure.
    
    The problem is detect_init_APIC() is called early, before the command line
    have been processed.  Therefore "lapic" (and "nolapic") have not been seen,
    yet.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f43d03fe2c4962c11d8227ac9505e590bad758b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Jun 25 14:57:40 2005 -0700

    [PATCH] kexec: x86: rename APIC_MODE_EXINT
    
    From: "Maciej W. Rozycki" <macro@linux-mips.org>
    
    Rename APIC_MODE_EXINT to APIC_MODE_EXTINT - I think it should be named
    after what the mode is called in documentation.
    
    From: "Eric W. Biederman" <ebiederm@lnxi.com>
    
    I have reduced this patch to just the name change in the header.  And
    integrated the changes into the patches that add those
    lines. Otherwise I ran into some ugly dependencies.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Eric Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8cbd99bd3a023db8d6356d19a5f6f539d367327
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jun 25 14:57:39 2005 -0700

    [PATCH] sched: voluntary kernel preemption
    
    This patch adds a new preemption model: 'Voluntary Kernel Preemption'.  The
    3 models can be selected from a new menu:
    
                (X) No Forced Preemption (Server)
                ( ) Voluntary Kernel Preemption (Desktop)
                ( ) Preemptible Kernel (Low-Latency Desktop)
    
    we still default to the stock (Server) preemption model.
    
    Voluntary preemption works by adding a cond_resched()
    (reschedule-if-needed) call to every might_sleep() check.  It is lighter
    than CONFIG_PREEMPT - at the cost of not having as tight latencies.  It
    represents a different latency/complexity/overhead tradeoff.
    
    It has no runtime impact at all if disabled.  Here are size stats that show
    how the various preemption models impact the kernel's size:
    
        text    data     bss     dec     hex filename
     3618774  547184  179896 4345854  424ffe vmlinux.stock
     3626406  547184  179896 4353486  426dce vmlinux.voluntary   +0.2%
     3748414  548640  179896 4476950  445016 vmlinux.preempt     +3.5%
    
    voluntary-preempt is +0.2% of .text, preempt is +3.5%.
    
    This feature has been tested for many months by lots of people (and it's
    also included in the RHEL4 distribution and earlier variants were in Fedora
    as well), and it's intended for users and distributions who dont want to
    use full-blown CONFIG_PREEMPT for one reason or another.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f704f56af95bec3c1ca719d64d0becef74d40899
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jun 25 14:57:38 2005 -0700

    [PATCH] enable PREEMPT_BKL on !PREEMPT+SMP too
    
    The only sane way to clean up the current 3 lock_kernel() variants seems to
    be to remove the spinlock-based BKL implementations altogether, and to keep
    the semaphore-based one only.  If we dont want to do that for whatever
    reason then i'm afraid we have to live with the current complexity.  (but
    i'm open for other cleanup suggestions as well.)
    
    To explore this possibility we'll (at a minimum) have to know whether the
    semaphore-based BKL works fine on plain SMP too.  The patch below enables
    this.
    
    The patch may make sense in isolation as well, as it might bring
    performance benefits: code that would formerly spin on the BKL spinlock
    will now schedule away and give up the CPU.  It might introduce performance
    regressions as well, if any performance-critical code uses the BKL heavily
    and gets overscheduled due to the semaphore.  I very much hope there is no
    such performance-critical codepath left though.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc19ca86a023fcd552c78e77a7be6ce271f92a28
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jun 25 14:57:36 2005 -0700

    [PATCH] consolidate PREEMPT options into kernel/Kconfig.preempt
    
    This patch consolidates the CONFIG_PREEMPT and CONFIG_PREEMPT_BKL
    preemption options into kernel/Kconfig.preempt.  This, besides reducing
    source-code, also enables more centralized tweaking of preemption related
    options.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f1867a5b3dc3034cbea403b229d65eed4a7f62e
Author: Dinakar Guniguntala <dino@in.ibm.com>
Date:   Sat Jun 25 14:57:36 2005 -0700

    [PATCH] Dynamic sched domains: ia64 changes
    
    ia64 changes similar to kernel/sched.c.
    
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Acked-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85d7b94981e2e919697bc235aad7367b33c3864b
Author: Dinakar Guniguntala <dino@in.ibm.com>
Date:   Sat Jun 25 14:57:34 2005 -0700

    [PATCH] Dynamic sched domains: cpuset changes
    
    Adds the core update_cpu_domains code and updated cpusets documentation
    
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Acked-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a20ff27ef75d866730ee796acd811a925af762f
Author: Dinakar Guniguntala <dino@in.ibm.com>
Date:   Sat Jun 25 14:57:33 2005 -0700

    [PATCH] Dynamic sched domains: sched changes
    
    The following patches add dynamic sched domains functionality that was
    extensively discussed on lkml and lse-tech.  I would like to see this added to
    -mm
    
    o The main advantage with this feature is that it ensures that the scheduler
      load balacing code only balances against the cpus that are in the sched
      domain as defined by an exclusive cpuset and not all of the cpus in the
      system. This removes any overhead due to load balancing code trying to
      pull tasks outside of the cpu exclusive cpuset only to be prevented by
      the tasks' cpus_allowed mask.
    o cpu exclusive cpusets are useful for servers running orthogonal
      workloads such as RT applications requiring low latency and HPC
      applications that are throughput sensitive
    
    o It provides a new API partition_sched_domains in sched.c
      that makes dynamic sched domains possible.
    o cpu_exclusive cpusets sets are now associated with a sched domain.
      Which means that the users can dynamically modify the sched domains
      through the cpuset file system interface
    o ia64 sched domain code has been updated to support this feature as well
    o Currently, this does not support hotplug. (However some of my tests
      indicate hotplug+preempt is currently broken)
    o I have tested it extensively on x86.
    o This should have very minimal impact on performance as none of
      the fast paths are affected
    
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Acked-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Matthew Dobson <colpatch@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37e4ab3f0cba13adf3535d373fd98e5ee47b5410
Author: Olivier Croquette <ocroquette@free.fr>
Date:   Sat Jun 25 14:57:32 2005 -0700

    [PATCH] Changing RT priority without CAP_SYS_NICE
    
    Presently, a process without the capability CAP_SYS_NICE can not change
    its own policy, which is OK.
    
    But it can also not decrease its RT priority (if scheduled with policy
    SCHED_RR or SCHED_FIFO), which is what this patch changes.
    
    The rationale is the same as for the nice value: a process should be
    able to require less priority for itself. Increasing the priority is
    still not allowed.
    
    This is for example useful if you give a multithreaded user process a RT
    priority, and the process would like to organize its internal threads
    using priorities also. Then you can give the process the highest
    priority needed N, and the process starts its threads with lower
    priorities: N-1, N-2...
    
    The POSIX norm says that the permissions are implementation specific, so
    I think we can do that.
    
    In a sense, it makes the permissions consistent whatever the policy is:
    with this patch, process scheduled by SCHED_FIFO, SCHED_RR and
    SCHED_OTHER can all decrease their priority.
    
    From: Ingo Molnar <mingo@elte.hu>
    
    cleaned up and merged to -mm.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3464a102a69a4e00efb0a763e274ce290995b4b
Author: Chen Shang <shangcs@gmail.com>
Date:   Sat Jun 25 14:57:31 2005 -0700

    [PATCH] sched: micro-optimize task requeueing in schedule()
    
    micro-optimize task requeueing in schedule() & clean up recalc_task_prio().
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77391d71681d05d2f4502f91ad62618522abf624
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:30 2005 -0700

    [PATCH] sched: relax pinned balancing
    
    The maximum rebalance interval allowed by the multiprocessor balancing
    backoff is often not large enough to handle corner cases where there are
    lots of tasks pinned on a CPU.  Suresh reported:
    
    	I see system livelock's if for example I have 7000 processes
    	pinned onto one cpu (this is on the fastest 8-way system I
    	have access to).
    
    After this patch, the machine is reported to go well above this number.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 476d139c218e44e045e4bc6d4cc02b010b343939
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:29 2005 -0700

    [PATCH] sched: consolidate sbe sbf
    
    Consolidate balance-on-exec with balance-on-fork.  This is made easy by the
    sched-domains RCU patches.
    
    As well as the general goodness of code reduction, this allows the runqueues
    to be unlocked during balance-on-fork.
    
    schedstats is a problem.  Maybe just have balance-on-event instead of
    distinguishing fork and exec?
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 674311d5b411e9042df4fdf7aef0b3c8217b6240
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:27 2005 -0700

    [PATCH] sched: RCU domains
    
    One of the problems with the multilevel balance-on-fork/exec is that it needs
    to jump through hoops to satisfy sched-domain's locking semantics (that is,
    you may traverse your own domain when not preemptable, and you may traverse
    others' domains when holding their runqueue lock).
    
    balance-on-exec had to potentially migrate between more than one CPU before
    finding a final CPU to migrate to, and balance-on-fork needed to potentially
    take multiple runqueue locks.
    
    So bite the bullet and make sched-domains go completely RCU.  This actually
    simplifies the code quite a bit.
    
    From: Ingo Molnar <mingo@elte.hu>
    
    schedstats RCU fix, and a nice comment on for_each_domain, from Ingo.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dbd5342074a1e570ec84edf859deb9be588006d
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:26 2005 -0700

    [PATCH] sched: multilevel sbe sbf
    
    The fundamental problem that Suresh has with balance on exec and fork is that
    it only tries to balance the top level domain with the flag set.
    
    This was worked around by removing degenerate domains, but is still a problem
    if people want to start using more complex sched-domains, especially
    multilevel NUMA that ia64 is already using.
    
    This patch makes balance on fork and exec try balancing over not just the top
    most domain with the flag set, but all the way down the domain tree.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 245af2c7870bd5940f7bfad19a0a03b32751fbc5
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sat Jun 25 14:57:25 2005 -0700

    [PATCH] sched: remove degenerate domains
    
    Remove degenerate scheduler domains during the sched-domain init.
    
    For example on x86_64, we always have NUMA configured in.  On Intel EM64T
    systems, top most sched domain will be of NUMA and with only one sched_group
    in it.
    
    With fork/exec balances(recent Nick's fixes in -mm tree), we always endup
    taking wrong decisions because of this topmost domain (as it contains only one
    group and find_idlest_group always returns NULL).  We will endup loading HT
    package completely first, letting active load balance kickin and correct it.
    
    In general, this patch also makes sense with out recent Nick's fixes in -mm.
    
    From: Nick Piggin <nickpiggin@yahoo.com.au>
    
    Modified to account for more than just sched_groups when scanning for
    degenerate domains by Nick Piggin.  And allow a runqueue's sd to go NULL
    rather than keep a single degenerate domain around (this happens when you run
    with maxcpus=1).
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41c7ce9ad9a859871dffbe7dbc8b1f9571724e3c
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:24 2005 -0700

    [PATCH] sched: null domains
    
    Fix the last 2 places that directly access a runqueue's sched-domain and
    assume it cannot be NULL.
    
    That allows the use of NULL for domain, instead of a dummy domain, to signify
    no balancing is to happen.  No functional changes.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4866cde064afbb6c2a488c265e696879de616daa
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:23 2005 -0700

    [PATCH] sched: cleanup context switch locking
    
    Instead of requiring architecture code to interact with the scheduler's
    locking implementation, provide a couple of defines that can be used by the
    architecture to request runqueue unlocked context switches, and ask for
    interrupts to be enabled over the context switch.
    
    Also replaces the "switch_lock" used by these architectures with an oncpu
    flag (note, not a potentially slow bitflag).  This eliminates one bus
    locked memory operation when context switching, and simplifies the
    task_running function.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48c08d3f8ff94fa118187e4d8d4a5707bb85e59d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jun 25 14:57:22 2005 -0700

    [PATCH] sched: uninline task_timeslice
    
          "Chen, Kenneth W" <kenneth.w.chen@intel.com>
    
    uninline task_timeslice() - reduces code footprint noticeably, and it's
    slowpath code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 687f1661d302bc70ce906594a6d3f615ef075a50
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:21 2005 -0700

    [PATCH] sched: sched tuning
    
    Do some basic initial tuning.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68767a0ae428801649d510d9a65bb71feed44dd1
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:20 2005 -0700

    [PATCH] sched: schedstats update for balance on fork
    
    Add SCHEDSTAT statistics for sched-balance-fork.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 147cbb4bbe991452698f0772d8292f22825710ba
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:19 2005 -0700

    [PATCH] sched: balance on fork
    
    Reimplement the balance on exec balancing to be sched-domains aware.  Use this
    to also do balance on fork balancing.  Make x86_64 do balance on fork over the
    NUMA domain.
    
    The problem that the non sched domains aware blancing became apparent on dual
    core, multi socket opterons.  What we want is for the new tasks to be sent to
    a different socket, but more often than not, we would first load up our
    sibling core, or fill two cores of a single remote socket before selecting a
    new one.
    
    This gives large improvements to STREAM on such systems.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cafb20c1f9976a70d633bb1e1c8c24eab00e4e80
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:17 2005 -0700

    [PATCH] sched: no aggressive idle balancing
    
    Remove the very aggressive idle stuff that has recently gone into 2.6 - it is
    going against the direction we are trying to go.  Hopefully we can regain
    performance through other methods.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3f21bce1fefdf92a4d1705e888d390b10f3ac6f
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:15 2005 -0700

    [PATCH] sched: tweak affine wakeups
    
    Do less affine wakeups.  We're trying to reduce dbt2-pgsql idle time
    regressions here...  make sure we don't don't move tasks the wrong way in an
    imbalance condition.  Also, remove the cache coldness requirement from the
    calculation - this seems to induce sharp cutoff points where behaviour will
    suddenly change on some workloads if the load creeps slightly over or under
    some point.  It is good for periodic balancing because in that case have
    otherwise have no other context to determine what task to move.
    
    But also make a minor tweak to "wake balancing" - the imbalance tolerance is
    now set at half the domain's imbalance, so we get the opportunity to do wake
    balancing before the more random periodic rebalancing gets preformed.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7897986bad8f6cd50d6149345aca7f6480f49464
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:13 2005 -0700

    [PATCH] sched: balance timers
    
    Do CPU load averaging over a number of different intervals.  Allow each
    interval to be chosen by sending a parameter to source_load and target_load.
    0 is instantaneous, idx > 0 returns a decaying average with the most recent
    sample weighted at 2^(idx-1).  To a maximum of 3 (could be easily increased).
    
    So generally a higher number will result in more conservative balancing.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99b61ccf0bf0e9a85823d39a5db6a1519caeb13d
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:12 2005 -0700

    [PATCH] sched: less aggressive idle balancing
    
    Remove the special casing for idle CPU balancing.  Things like this are
    hurting for example on SMT, where are single sibling being idle doesn't really
    warrant a really aggressive pull over the NUMA domain, for example.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db935dbd43c4290d710304662cc908f733afea06
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:11 2005 -0700

    [PATCH] sched: add debugging
    
    These conditions should now be impossible, and we need to fix them if they
    happen.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3950745131e23472fb5ace2ee4a2093e7590ec69
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:09 2005 -0700

    [PATCH] sched: fix SMT scheduling problems
    
    SMT balancing has a couple of problems.  Firstly, active_load_balance is too
    complex - basically it should be a dumb helper for when the periodic balancer
    has determined there is an imbalance, but gets stuck because the task is
    running.
    
    So rip out all its "smarts", and just make it move one task to the target CPU.
    
    Second, the busy CPU's sched-domain tree was being used for active balancing.
    This means that it may not see that nr_balance_failed has reached a critical
    level.  So use the target CPU's sched-domain tree for this.  We can do this
    because we hold its runqueue lock.
    
    Lastly, reset nr_balance_failed to a point where we allow cache hot migration.
    This will help ensure active load balancing is successful.
    
    Thanks to Suresh Siddha for pointing out these issues.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16cfb1c04c3cbe3759f339d3333e7e1e7d59712a
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:08 2005 -0700

    [PATCH] sched: reduce active load balancing
    
    Fix up active load balancing a bit so it doesn't get called when it shouldn't.
    Reset the nr_balance_failed counter at more points where we have found
    conditions to be balanced.  This reduces too aggressive active balancing seen
    on some workloads.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8102679447da7fcbcb5226ee0207c3a034bc6d5f
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:07 2005 -0700

    [PATCH] sched: improve load balancing pinned tasks
    
    John Hawkes explained the problem best:
    
    	A large number of processes that are pinned to a single CPU results
    	in every other CPU's load_balance() seeing this overloaded CPU as
    	"busiest", yet move_tasks() never finds a task to pull-migrate.  This
    	condition occurs during module unload, but can also occur as a
    	denial-of-service using sys_sched_setaffinity().  Several hundred
    	CPUs performing this fruitless load_balance() will livelock on the
    	busiest CPU's runqueue lock.  A smaller number of CPUs will livelock
    	if the pinned task count gets high.
    
    Expanding slightly on John's patch, this one attempts to work out whether the
    balancing failure has been due to too many tasks pinned on the runqueue.  This
    allows it to be basically invisible to the regular blancing paths (ie.  when
    there are no pinned tasks).  We can use this extra knowledge to shut down the
    balancing faster, and ensure the migration threads don't start running which
    is another problem observed in the wild.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f364f4069f76a3613a797c388832822d179076
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Jun 25 14:57:06 2005 -0700

    [PATCH] sched: cleanup wake_idle
    
    New sched-domains code means we don't get spans with offline CPUs in
    them.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44f410a7ce593e7e75667b93494223998069f3f1
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Sat Jun 25 14:57:05 2005 -0700

    [PATCH] hpet: do_div fix
    
    We don't need to use do_div() on a 32-bit quantity.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6283d58e7464f82b1c1c33943f0bd51c1e83899a
Author: Qu Fuping <fs@ercist.iscas.ac.cn>
Date:   Sat Jun 25 14:55:44 2005 -0700

    [PATCH] reiserfs: do not ignore i/io error on readpage
    
    Reiserfs's readpage does not notice i/o errors.  This patch makes
    reiserfs_readpage to return -EIO when i/o error appears.
    
    This patch makes reiserfs to not ignore I/O error on readpage.
    
    Signed-off-by: Qu Fuping <fs@ercist.iscas.ac.cn>
    Signed-off-by: Vladimir V. Saveliev <vs@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 442ff702233287df3f50ec3a7fd0a73d7367cf5a
Author: Jean-Christophe Dubois <jdubois@mc.com>
Date:   Sat Jun 25 14:55:43 2005 -0700

    [PATCH] mconf.c needs locale.h
    
    This is failing on my cross-compilation environment (From a solaris system)
    using gcc-3.4.1 (as the compiler can't find a prototype for the setlocale()
    function).
    
    Signed-off-by: Jean-Christophe Dubois <jdubois@mc.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0cfbd995d091b10841eeb948976f5d1fbf13cdd
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Sat Jun 25 14:55:42 2005 -0700

    [PATCH] fix for generic_file_write iov problem
    
    Here is the fix for the problem described in
    
    	http://bugzilla.kernel.org/show_bug.cgi?id=4721
    
    Basically, problem is generic_file_buffered_write() is accessing beyond end
    of the iov[] vector after handling the last vector.  If we happen to cross
    page boundary, we get a fault.
    
    I think this simple patch is good enough.  If we really don't want to
    depend on the "count", then we need pass nr_segs to
    filemap_set_next_iovec() and decrement it and check it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ae0b77811d97552b3b3c745e97de18849583bf7
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Jun 25 14:55:41 2005 -0700

    [PATCH] fix fsync(dir) return value for ram-based filesystems
    
    Any filesystem which is using simple_dir_operations will retunr -EINVAL for
    fsync() on a directory.  Make it return zero instead.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f9beccb95a47a15e446f64fbb7041dc6edce4d9
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Sat Jun 25 14:55:41 2005 -0700

    [PATCH] tpm: fix misc name memory problem
    
    I was using invalid memory for the miscdevice.name.  This patch fixes the
    problem which was manifested by an ugly entry in /proc/misc.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dda8abe6feb906306a627b170654ddd8addcdac
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Sat Jun 25 14:55:40 2005 -0700

    [PATCH] tpm: Fix pubek parsing
    
    Fix parsing of the PUBEK for display which was leading to showing the wrong
    modulus length and modulus.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daacdfa6e7d6e57c5d1b8e72b1c863feb53d8a82
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Sat Jun 25 14:55:39 2005 -0700

    [PATCH] tpm: Support new National TPMs
    
    This patch is work to support new National TPMs that problems were reported
    with on Thinkpad T43 and Thinkcentre S51.  Thanks to Jens and Gang for
    their debugging work on these issues.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2b18660066997420b716c1881a6be8b82700d97
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sat Jun 25 14:55:38 2005 -0700

    [PATCH] RCU: clean up a few remaining synchronize_kernel() calls
    
    2.6.12-rc6-mm1 has a few remaining synchronize_kernel()s, some (but not
    all) in comments.  This patch changes these synchronize_kernel() calls (and
    comments) to synchronize_rcu() or synchronize_sched() as follows:
    
    - arch/x86_64/kernel/mce.c mce_read(): change to synchronize_sched() to
      handle races with machine-check exceptions (synchronize_rcu() would not cut
      it given RCU implementations intended for hardcore realtime use.
    
    - drivers/input/serio/i8042.c i8042_stop(): change to synchronize_sched() to
      handle races with i8042_interrupt() interrupt handler.  Again,
      synchronize_rcu() would not cut it given RCU implementations intended for
      hardcore realtime use.
    
    - include/*/kdebug.h comments: change to synchronize_sched() to handle races
      with NMIs.  As before, synchronize_rcu() would not cut it...
    
    - include/linux/list.h comment: change to synchronize_rcu(), since this
      comment is for list_del_rcu().
    
    - security/keys/key.c unregister_key_type(): change to synchronize_rcu(),
      since this is interacting with RCU read side.
    
    - security/keys/process_keys.c install_session_keyring(): change to
      synchronize_rcu(), since this is interacting with RCU read side.
    
    Signed-off-by: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae67cd643e9e64217fd92457324625c67fec6e35
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Jun 25 14:55:36 2005 -0700

    [PATCH] Makefile: s/gcc-option/cc-option/
    
    Fixes http://bugme.osdl.org/show_bug.cgi?id=4726
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d0145a7deab4027a0f0a7de74c2d103b8f029cf
Author: Lee Nicks <allinux@gmail.com>
Date:   Sat Jun 25 14:55:36 2005 -0700

    [PATCH] compilation errors in drivers/serial/mpsc.c
    
    The following patch fix gcc 4 compilation errors in drivers/serial/mpsc.c
    
    Signed-off-by: Lee Nicks <allinux@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66a464dbc8e0345b6f972b92bf1118e043d7c987
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Sat Jun 25 14:55:33 2005 -0700

    [PATCH] s390: debug feature changes
    
    This patch changes the memory allocation method for the s390 debug feature.
    Trace buffers had been allocated using the get_free_pages() function before.
    Therefore it was not possible to get big memory areas in a running system due
    to memory fragmentation.  Now the trace buffers are subdivided into several
    subbuffers with pagesize.  Therefore it is now possible to allocate more
    memory for the trace buffers and more trace records can be written.
    
    In addition to that, dynamic specification of the size of the trace buffers is
    implemented.  It is now possible to change the size of a trace buffer using a
    new debugfs file instance.  When writing a number into this file, the trace
    buffer size is changed to 'number * pagesize'.
    
    In the past all the traces could be obtained from userspace by accessing files
    in the "proc" filesystem.  Now with debugfs we have a new filesystem which
    should be used for debugging purposes.  This patch moves the debug feature
    from procfs to debugfs.
    
    Since the interface of debug_register() changed, all device drivers, which use
    the debug feature had to be adjusted.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b979de395c7e1b7e59f74a870e1d1911853eccb
Author: Christian Borntraeger <cborntra@de.ibm.com>
Date:   Sat Jun 25 14:55:32 2005 -0700

    [PATCH] s390: add vmcp interface
    
    Add interface to issue VM control program commands.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77fa22450de00d535de2cc8be653983560828000
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Jun 25 14:55:30 2005 -0700

    [PATCH] s390: improved machine check handling
    
    Improved machine check handling.  Kernel is now able to receive machine checks
    while in kernel mode (system call, interrupt and program check handling).
    Also register validation is now performed.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f901e5d1e06b3326c100c5d0df43656311befb81
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sat Jun 25 14:55:29 2005 -0700

    [PATCH] s/390: compile fix for dcssblk
    
    Fix compile breakage in the dcss block driver introduced by the attribute
    changes.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c551288e34cff0a78b3103ce2e12099dffa41071
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sat Jun 25 14:55:28 2005 -0700

    [PATCH] s/390: use klist in dasd driver
    
    Convert the dasd driver to use the new klist interface.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0744bd2925a4a24865963322534107d2ad553f9
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sat Jun 25 14:55:27 2005 -0700

    [PATCH] s/390: Use klist in cio
    
    Convert the common I/O layer to use the klist interfaces.
    
    This patch has been adapted from the previous version to the changed interface
    semantics.  Also, gcc 4.0 compile warnings have been removed.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84dd8d7e9c080b4db66b00b8bc36ccf09a90f824
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Jun 25 14:55:26 2005 -0700

    [PATCH] uml: add profile_pc for i386
    
    Cope with a conditional i386 definition, which is wrong for UML.  Before we
    just used that one, but it wasn't defined for CONFIG_SMP, so in that case
    we got link errors.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29d56cfe3ca599ddc3ae9156e7e469c044d97b96
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Jun 25 14:55:25 2005 -0700

    [PATCH] uml: hot-unplug code cleanup
    
    Clean up the hot-unplugging code.  There is now an id procedure which is
    called to figure out what device we're talking to.  The error messages from
    that are now done from mconsole_remove instead of the driver.  remove is now
    called with the device number, after it has been checked, so doesn't need to
    do sanity checking on it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc47a0d18a1994b4a18d2235fcde1b75dfa72552
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Jun 25 14:55:24 2005 -0700

    [PATCH] uml: time initialization tidying
    
    user_time_init_skas and user_time_init_tt were essentially the same.  So, this
    merges them, deleting the mode-specific functions and declarations.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 026549d28469f7d4ca7e5a4707f0d2dc4f2c164c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Jun 25 14:55:23 2005 -0700

    [PATCH] uml: always disable kmalloc during shutdown
    
    kmalloc wasn't being disabled during panic.  This patch ensures that, no
    matter how UML is exiting, it is disabled.  This matters because part of the
    cleanup is to remove the umid file, which involves readdir, which calls
    malloc.  This must map to libc malloc, rather than kmalloc or vmalloc.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6f4e3cf75538a75ee4fab620e3c8466f2154458
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Jun 25 14:55:22 2005 -0700

    [PATCH] uml: fix timer initialization
    
    In skas mode, the call to uml_idle_timer permanently shut off the virtual
    timer, resulting in no timer ticks to anything but the idle thread.  This is
    likely the cause of the soft lockups that are seen sporadically in recent
    UMLs.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0877f07e85a46e4fde32bd84f08551d360839fe
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Jun 25 14:55:21 2005 -0700

    [PATCH] uml: fork cleanup
    
    Fix the do_fork calling convention: normal arch pass the regs and the new sp
    value to do_fork instead of NULL.
    
    Currently the arch-independent code ignores these values, while the UML code
    (actually it's copy_thread) gets the right values by itself.
    
    With this patch, things are fixed up.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41f2148a67f28803d64bf5ff538591af90a5ab57
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 25 14:55:20 2005 -0700

    [PATCH] uml: kfree cleanup
    
    Here's a small patch to remove a few unnessesary NULL pointer checks before
    kfree() in arch/um/drivers/daemon_user.c
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 350d5bd84ecda038bb482ab5f2596bdca68109d9
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jun 25 14:55:19 2005 -0700

    [PATCH] uml: fix sizeof usage
    
    Size of pointer doesn't seem right, but maybe my solution isn't either
    (sig_size maybe?).
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a96206559a8c3a18478a6288ac426d716bbd99c
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:18 2005 -0700

    [PATCH] Update video-after-suspend documentation
    
    Update video-after-suspend documentation; few more machines are added.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19c324397a55edf122822f829779b46b9cb385dd
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:17 2005 -0700

    [PATCH] swsusp: only allow it when it makes sense
    
    Show swsuspend only on .config where it can compile.  I got this on PPC32 &&
    SMP:
    
    kernel/power/smp.c:24: error: storage size of `ctxt' isn't known
    
    Also mark swsusp as no longer experimental.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21d6b7e18f70c847c867aafb3109405b48424388
Author: pavel@ucw.cz <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:16 2005 -0700

    [PATCH] suspend: PCI power managment reference implementation
    
    Added reference implementation of suspend and resume routines.
    
    From: Shaohua Li <shaohua.li@intel.com>
    
      build fix
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac25575203c11145066ea5cb583354cb5f0a8ade
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Sat Jun 25 14:55:15 2005 -0700

    [PATCH] CPU hotplug printk fix
    
    In the cpu hotplug case, per-cpu data possibly isn't initialized even the
    system state is 'running'.  As the comments say in the original code, some
    console drivers assume per-cpu resources have been allocated.  radeon fb is
    one such driver, which uses kmalloc.  After a CPU is down, the per-cpu data
    of slab is freed, so the system crashed when printing some info.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d783b3e02002bce8cf9d4e4a82922ee7e59b1e5
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:14 2005 -0700

    [PATCH] swsusp: clean assembly parts
    
    This patch fixes register saving so that each register is only saved once,
    and adds missing saving of %cr8 on x86-64.  Some reordering so that
    save/restore is more logical/safer (segment registers should be restored
    after gdt).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c61978b30322c83a94d7e4857fa5b9996b7d7931
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:14 2005 -0700

    [PATCH] swsusp: fix nr_copy_pages
    
    The following patch moves the recalculation of nr_copy_pages so that the right
    number is used in the calculation of the size of memory and swap needed.
    
    It prevents swsusp from attempting to suspend if there is not enough memory
    and/or swap (which is unlikely anyway).
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e4d5822dc71f01bf515b8f6f4e41ae12ee785b8
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:12 2005 -0700

    [PATCH] swsusp: cleanup whitespace
    
    The following patch cleans up whitespace in swsusp.c (a bit):
    
    - removes any trailing whitespace
    
    - adds spaces after if, for, for_each_pbe, for_each_zone etc., wherever
      necessary.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f9bdf15c059c5d84db9c395705bf79b30762420
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:12 2005 -0700

    [PATCH] swsusp: kill unneccessary does_collide_order
    
    The following patch removes the unnecessary function does_collide_order().
    
    This function is no longer necessary, as currently there are only 0-order
    allocations in swsusp, and the use of it is confusing.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 620b03276488c3cf103caf1e326bd21f00d3df84
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:11 2005 -0700

    [PATCH] properly stop devices before poweroff
    
    Without this patch, Linux provokes emergency disk shutdowns and
    similar nastiness. It was in SuSE kernels for some time, IIRC.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ce47e59c9688d8480ae41100117d8188c191401
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:10 2005 -0700

    [PATCH] acpi: fix video docs
    
    This fixes typos/formatting in video_extension.txt.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 343c3f642898cb2cb5c3e4f948e3e0a1bbc0351b
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:09 2005 -0700

    [PATCH] s-t-RAM: load gdt the right way
    
    Sleep code uses wrong version of lgdt, that does the wrong thing when
    gdt is beyond 16MB or so.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 648be3188135add682349e86d46d07cc11c8eb57
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:09 2005 -0700

    [PATCH] swsusp: kill config_pm_disk
    
    CONFIG_PM_DISK is long gone, but it still managed to survived at few
    places.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc5fb2c609c6acef15a8b062063e9135fb08b4d2
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Jun 25 14:55:07 2005 -0700

    [PATCH] swsusp: documentation updates
    
    This updates documentation and fixes pointers in MAINTAINERS file.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a72e04df5470df0ec646029d31e5528167ab1a7
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:55:06 2005 -0700

    [PATCH] suspend/resume SMP support
    
    Using CPU hotplug to support suspend/resume SMP.  Both S3 and S4 use
    disable/enable_nonboot_cpus API.  The S4 part is based on Pavel's original S4
    SMP patch.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb69c3907ead36b9e9f41ea6f0d0e0ae10a38a47
Author: Nathan Lynch <ntl@pobox.com>
Date:   Sat Jun 25 14:55:05 2005 -0700

    [PATCH] generate hotplug events for cpu online
    
    We already do kobject_hotplug for cpu offline; this adds a kobject_hotplug
    call for the online case.  This is being requested by developers of an
    application which wants to be notified about both kinds of events.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9fa06c26f7b7914c8cdf4d309b74df3151cc227
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:55:05 2005 -0700

    [PATCH] set cpu_state for CPU hotplug (ia64)
    
    Dead CPU notifies online CPU that it's dead using cpu_state variable.
    After switching to physical cpu hotplug, we forgot setting the variable.
    This patch fixes it.  Currently only __cpu_die uses it.  We changed other
    locations for consistency in case others use it.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Acked-by: Ashok Raj <ashok.raj@intel.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a02c4cb67e4ccd5ce7a13c7f04c2fedb06c35431
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:55:03 2005 -0700

    [PATCH] x86_64: Provide ability to choose using shortcuts for IPI in flat mode.
    
    This patch provides an option to switch broadcast or use mask version for
    sending IPI's.  If CONFIG_HOTPLUG_CPU is defined, we choose not to use
    broadcast shortcuts by default, otherwise we choose broadcast mode as default.
    
    both cases, one can change this via startup cmd line option, to choose
    no-broadcast mode.
    
    	no_ipi_broadcast=1
    
    This is provided on request from Andi Kleen, since he doesnt agree with
    replacing IPI shortcuts as a solution for CPU hotplug.  Without removing
    broadcast IPI's, it would mean lots of new code for __cpu_up() path, which
    would acheive the same results.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 884d9e40b4089014f40c49e86ac6505842db2b53
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:55:02 2005 -0700

    [PATCH] x86_64: Dont use broadcast shortcut to make it cpu hotplug safe.
    
    Broadcast IPI's provide un-expected behaviour for cpu hotplug.  CPU's in
    offline state also end up receiving the IPI.  Once the cpus become online they
    receive these stale IPI's which are bad and introduce unexpected behaviour.
    
    This is easily avoided by not sending a broadcast and addressing just the
    CPU's in online map.  Doing prelim cycle counts it appears there is no big
    overhead and numbers seem around 0x3000-0x3900 on an average on x86 and x86_64
    systems with CPUS running 3G, both for broadcast and mask version of the
    API's.
    
    The shortcuts are useful only for flat mode (where the perf shows no
    degradation), and in cluster mode, its unicast anyway.  Its simpler to just
    not use broadcast anymore.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb0cd8d49a9b81aff7a02e2ed826b5cfdfe9a172
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:55:01 2005 -0700

    [PATCH] x86_64: CPU hotplug sibling map cleanup
    
    This patch is a minor cleanup to the cpu sibling/core map.  It is required
    that this setup happens on a per-cpu bringup time.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76e4f660d9f4c6d1bb473f72be2988c35eaca948
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:55:00 2005 -0700

    [PATCH] x86_64: CPU hotplug support
    
      Experimental CPU hotplug patch for x86_64
      -----------------------------------------
    This supports logical CPU online and offline.
    - Test with maxcpus=1, and then kick other cpu's off to test if init code
      is all cleaned up. CONFIG_SCHED_SMT works as well.
    - idle threads are forked on demand from keventd threads for clean startup
    
    TBD:
    1. Not tested on a real NUMA machine (tested with numa=fake=2)
    2. Handle ACPI pieces for physical hotplug support.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6982c671c560da4a0bc5c908cbcbec12bd5991d
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:54:58 2005 -0700

    [PATCH] x86_64: Change init sections for CPU hotplug support
    
    This patch adds __cpuinit and __cpuinitdata sections that need to exist past
    boot to support cpu hotplug.
    
    Caveat: This is done *only* for EM64T CPU Hotplug support, on request from
    Andi Kleen.  Much of the generic hotplug code in kernel, and none of the other
    archs that support CPU hotplug today, i386, ia64, ppc64, s390 and parisc dont
    mark sections with __cpuinit, but only mark them as __devinit, and
    __devinitdata.
    
    If someone is motivated to change generic code, we need to make sure all
    existing hotplug code does not break, on other arch's that dont use __cpuinit,
    and __cpudevinit.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Acked-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52a119feaad92d44a0e97d01b22afbcbaf3fc079
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:54:57 2005 -0700

    [PATCH] make smp_prepare_cpu to a weak function
    
    I really wish smp_prepare_cpu() would disappear eventually.  In the interim
    this is ideally a weak function, so we dont end up changing several places
    to define this dummy in headers.
    
    Today since the dummy declaration is done only in drivers/base/cpu.c but
    the function is called in kernel/power/smp.c i get undefined reference in
    my cpu hotplug code for x86_64 under development.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1367daf3eed5cd619ee88c9907e1e6ddaa58406
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:56 2005 -0700

    [PATCH] cpu state clean after hot remove
    
    Clean CPU states in order to reuse smp boot code for CPU hotplug.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bb3184df537002a742bafddf3f4fb482b7fe610
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:55 2005 -0700

    [PATCH] init call cleanup
    
    Trival patch for CPU hotplug.  In CPU identify part, only did cleaup for intel
    CPUs.  Need do for other CPUs if they support S3 SMP.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d720803a9365d360b3e5ea02033f0c11b5b1226a
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:54 2005 -0700

    [PATCH] sibling map initializing rework
    
    Make sibling map init per-cpu.  Hotplug CPU may change the map at runtime.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fe940d6c300886de4ff1454d8ffd363172af433
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:53 2005 -0700

    [PATCH] sep initializing rework
    
    Make SEP init per-cpu, so it is hotplug safe.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67664c8f7e74def5adf66298a1245d82af72db2c
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Sat Jun 25 14:54:52 2005 -0700

    [PATCH] i386: Dont use IPI broadcast when using cpu hotplug.
    
    This patch introduces a startup parameter no_broadcast.  When we enable
    CONFIG_HOTPLUG_CPU, we dont want to use broadcast shortcut as it has ill
    effects on a offline cpu.  If we issue broadcast, the IPI is also delivered
    to offline cpus, or partially up cpu causing stale IPI's to be handled,
    which is a problem and can cause undesirable effects.
    
    Introduces a new startup cmdline option no_ipi_broadcast, that can be
    switched at cmdline if necessary.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f370513640492641b4046bfd9a6e4714f6ae530d
Author: Zwane Mwaikambo <zwane@linuxpower.ca>
Date:   Sat Jun 25 14:54:50 2005 -0700

    [PATCH] i386 CPU hotplug
    
    (The i386 CPU hotplug patch provides infrastructure for some work which Pavel
    is doing as well as for ACPI S3 (suspend-to-RAM) work which Li Shaohua
    <shaohua.li@intel.com> is doing)
    
    The following provides i386 architecture support for safely unregistering and
    registering processors during runtime, updated for the current -mm tree.  In
    order to avoid dumping cpu hotplug code into kernel/irq/* i dropped the
    cpu_online check in do_IRQ() by modifying fixup_irqs().  The difference being
    that on cpu offline, fixup_irqs() is called before we clear the cpu from
    cpu_online_map and a long delay in order to ensure that we never have any
    queued external interrupts on the APICs.  There are additional changes to s390
    and ppc64 to account for this change.
    
    1) Add CONFIG_HOTPLUG_CPU
    2) disable local APIC timer on dead cpus.
    3) Disable preempt around irq balancing to prevent CPUs going down.
    4) Print irq stats for all possible cpus.
    5) Debugging check for interrupts on offline cpus.
    6) Hacky fixup_irqs() to redirect irqs when cpus go off/online.
    7) play_dead() for offline cpus to spin inside.
    8) Handle offline cpus set in flush_tlb_others().
    9) Grab lock earlier in smp_call_function() to prevent CPUs going down.
    10) Implement __cpu_disable() and __cpu_die().
    11) Enable local interrupts in cpu_enable() after fixup_irqs()
    12) Don't fiddle with NMI on dead cpu, but leave intact on other cpus.
    13) Program IRQ affinity whilst cpu is still in cpu_online_map on offline.
    
    Signed-off-by: Zwane Mwaikambo <zwane@linuxpower.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d92de65cab5980c16d4a1c326c1ef9a591892883
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:49 2005 -0700

    [PATCH] variable overflow after hundreds round of hotplug CPU
    
    I'm doing the cpu hotplug stress test and found a variable ('ready') is
    overflow after several hundreds rounds of cpu hotplug.  Here is a fix.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a13db56624c2a9d6c0dae0a693b25b0e58de9ea3
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Sat Jun 25 14:54:48 2005 -0700

    [PATCH] CPU hotplug: fix hpet sectioning
    
    With hpet enabled, cpu hotplug uses some routines marked with __init.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1249c5138f573890eae0c01f13d627094edcd55c
Author: Andrey Panin <pazke@donpac.ru>
Date:   Sat Jun 25 14:54:47 2005 -0700

    [PATCH] dmi: spring cleanup
    
    Whitespace and CodingStyle cleanup. No functionality changes.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b625883f24d018c989173aeb727f6de954fb154d
Author: Andrey Panin <pazke@donpac.ru>
Date:   Sat Jun 25 14:54:46 2005 -0700

    [PATCH] dmi: remove central blacklist
    
    Since last dmi quirk looks useless (it just prints 404 compliant url) we can
    finally remove central dmi blacklist.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f8133a8db81ff824a4abbe5bb0f15bf034d31c3
Author: Andrey Panin <pazke@donpac.ru>
Date:   Sat Jun 25 14:54:45 2005 -0700

    [PATCH] dmi: move ACPI sleep quirk
    
    This patch moves ACPI sleep quirk out of dmi_scan.c
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aea00143a8db8c0b31dca85bff3c325444d93f0f
Author: Andrey Panin <pazke@donpac.ru>
Date:   Sat Jun 25 14:54:42 2005 -0700

    [PATCH] dmi: move ACPI boot quirk
    
    This patch moves ACPI boot quirks out of dmi_scan.c
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 856509d5da74aefeabe92a8df039cc472f4f7c5f
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Sat Jun 25 14:54:42 2005 -0700

    [PATCH] ppc64: Fix compile warnings in arch/ppc64/kernel/lparcfg.c
    
    Stephen's patch to remove LparData.h missed an include in lparcfg.c This
    fixes a few compile warnings.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ec19faf617e61d56fb8da78ccb3ef895c00fae7
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Jun 25 14:54:41 2005 -0700

    [PATCH] ppc32: remove some unnecessary includes of bootmem.h
    
    Continue the Good Fight:  Limit bootmem.h include creep.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 912eaa7198827df3cae7d0c9768fd08e84a09675
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Jun 25 14:54:39 2005 -0700

    [PATCH] I2C-MPC: Remove OCP device model support
    
    All consumers of the driver MPC10x, MPC52xx, MPC824x, MPC83xx, and MPC85xx are
    all using platform devices.  We can get ride of the dead code to support using
    this driver with the old OCP based model
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d9077afea4927e488282da7189de9159db20c17
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Jun 25 14:54:39 2005 -0700

    [PATCH] ppc32: Remove FSL OCP support
    
    Support for the OCP device model on Freescale (FSL) PPC's is no longer used.
    All FSL PPC's that were using OCP have be converted to using the platform
    device model.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33d9e9b56d5ccd7776fdfe3ecce4a2793dee6fd3
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Jun 25 14:54:37 2005 -0700

    [PATCH] ppc32: Add support for Freescale e200 (Book-E) core
    
    The e200 core is a Book-E core (similar to e500) that has a unified L1 cache
    and is not cache coherent on the bus.  The e200 core also adds a separate
    exception level for debug exceptions.  Part of this patch helps to cleanup a
    few cases that are true for all Freescale Book-E parts, not just e500.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62aa751d16399637325852bc0a1fcf13c2476dd7
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Jun 25 14:54:36 2005 -0700

    [PATCH] ppc32: Check return of ppc_sys_get_pdata before accessing pointer
    
    Ensure that the returned pointer from ppc_sys_get_pdata is not NULL before we
    start using it.  This handles any cases where we have variants of processors
    on the same board with different functionality.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09ffd94fb15d85fbf9eebb8180f50264b264d6fe
Author: Lorenzo Hernndez Garca-Hierro <lorenzo@gnu.org>
Date:   Sat Jun 25 14:54:35 2005 -0700

    [PATCH] selinux: add executable heap check
    
    This patch,based on sample code by Roland McGrath, adds an execheap
    permission check that controls the ability to make the heap executable so
    that this can be prevented in almost all cases (the X server is presently
    an exception, but this will hopefully be resolved in the future) so that
    even programs with execmem permission will need to have the anonymous
    memory mapped in order to make it executable.
    
    The only reason that we use a permission check for such restriction (vs.
    making it unconditional) is that the X module loader presently needs it; it
    could possibly be made unconditional in the future when X is changed.
    
    The policy patch for the execheap permission is available at:
    http://pearls.tuxedo-es.org/patches/selinux/policy-execheap.patch
    
    Signed-off-by: Lorenzo Hernandez Garcia-Hierro <lorenzo@gnu.org>
    Acked-by: James Morris <jmorris@redhat.com>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b9921976f0861e04828b3aff66696c1f3fd900d
Author: Lorenzo Hernandez Garca-Hierro <lorenzo@gnu.org>
Date:   Sat Jun 25 14:54:34 2005 -0700

    [PATCH] selinux: add executable stack check
    
    This patch adds an execstack permission check that controls the ability to
    make the main process stack executable so that attempts to make the stack
    executable can still be prevented even if the process is allowed the
    existing execmem permission in order to e.g.  perform runtime code
    generation.  Note that this does not yet address thread stacks.  Note also
    that unlike the execmem check, the execstack check is only applied on
    mprotect calls, not mmap calls, as the current security_file_mmap hook is
    not passed the necessary information presently.
    
    The original author of the code that makes the distinction of the stack
    region, is Ingo Molnar, who wrote it within his patch for
    /proc/<pid>/maps markers.
    (http://marc.theaimsgroup.com/?l=linux-kernel&m=110719881508591&w=2)
    
    The patches also can be found at:
    http://pearls.tuxedo-es.org/patches/selinux/policy-execstack.patch
    http://pearls.tuxedo-es.org/patches/selinux/kernel-execstack.patch
    
    policy-execstack.patch is the patch that needs to be applied to the policy in
    order to support the execstack permission and exclude it
    from general_domain_access within macros/core_macros.te.
    
    kernel-execstack.patch adds such permission to the SELinux code within
    the kernel and adds the proper permission check to the selinux_file_mprotect() hook.
    
    Signed-off-by: Lorenzo Hernandez Garcia-Hierro <lorenzo@gnu.org>
    Acked-by: James Morris <jmorris@redhat.com>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d15cab85b85a56cc886037cab43cc292923ff22
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Jun 25 14:54:33 2005 -0700

    [PATCH] mm: fix remap_pte_range BUG
    
    Out-of-tree user of remap_pfn_range hit kernel BUG at mm/memory.c:1112!  It
    passes an unrounded size to remap_pfn_range, which was okay before 2.6.12,
    but misses remap_pte_range's new end condition.  An audit of all the other
    ptwalks confirms that this is the only one so exposed.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e8a81c5a37907bc082025d3468718116dca1eeb
Author: Hifumi Hisashi <hifumi.hisashi@lab.ntt.co.jp>
Date:   Sat Jun 25 14:54:32 2005 -0700

    [PATCH] Fix the error handling in direct I/O
    
    Fix a bug on error handling in the direct I/O function.
    
    Currently, if a file is opened with the O_DIRECT|O_SYNC flag, the write()
    syscall cannot receive the EIO error after an I/O error (SCSI cable is
    disconnected etc.).
    
    Return values of other points that call generic_osync_inode() are treated
    appropriately.
    
    Signed-off-by: Hisashi Hifumi  <hifumi.hisashi@lab.ntt.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4819b593740a6d11db07b52e0fe35975b29a185
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Jun 25 14:54:31 2005 -0700

    [PATCH] mips: add MIPS-specific support for flatmem/discontigmem
    
    2.6.12-git6 doesn't boot on some MIPS machines.  They need the support of flat
    memory and discontig memory.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7919a693bd735ed0aa93fc359ae09a588cfeb3bc
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat Jun 25 14:54:30 2005 -0700

    [PATCH] Serial: remove unnecessary register_serial/unregister_serial
    
    A couple of drivers declare register_serial/unregister_serial prototypes
    but don't use them.  FRV contains a commented out call to register_serial.
    Since these are deprecated, remove these unnecessary references.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 821fe94727e72d63e1abd1bc0b044c72dfad9fb6
Author: Dave Jones <davej@redhat.com>
Date:   Sat Jun 25 14:54:29 2005 -0700

    [PATCH] gcc4 compile fix for recent ia64 xpc changes
    
    Gcc4 doesn't like volatile casts as lvalues.  Make the structure members
    volatile instead.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e0fa31dbf5968ce1e94f73c04a9402170432ecf
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:28 2005 -0700

    [PATCH] I8K: add new BIOS signatures
    
    I8K: add BIOS signatures of a newer Dell laptops, also there can be
         more than one temperature sensor reported by BIOS. Lifted from
         driver 1.25 on Massimo Dal Zotto's site.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8378b92405dd606c6f3a0b1e303b67c8f8c9f743
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:27 2005 -0700

    [PATCH] I8K: initialization code cleanup; formatting
    
    I8K: use module_{init|exit} instead of old style #ifdef MODULE
         code, some formatting changes.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 352f8f8bfbfb401c8af4c685beaafeb95c27fdd1
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:26 2005 -0700

    [PATCH] I8K: convert to seqfile
    
    I8K: Change proc code to use seq_file.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e70c9d5e61c6cb2272c866fc1303e62975006752
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:25 2005 -0700

    [PATCH] I8K: use standard DMI interface
    
    I8K: Change to use stock dmi infrastructure instead of homegrown
         parsing code. The driver now requires box's DMI data to match
         list of supported models so driver can be safely compiled-in
         by default without fear of it poking into random SMM BIOS
         code. DMI checks can be ignored with i8k.ignore_dmi option.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dec63ec32ea486ab915138e8790084c22a3f7bf6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:23 2005 -0700

    [PATCH] I8K: pass through lindent
    
    I8K: pass through Lindent to change 4 spaces identation to TABs
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f5f7e2eeb539da95157d7fa8c94fb2f3284b9cc
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Jun 25 14:54:22 2005 -0700

    [PATCH] Toshiba driver cleanup
    
    Toshiba legacy driver cleanup:
     - use module_init/module_exit for initialization instead of using
       #ifdef MODULE and calling tosh_init manually from drivers/char/misc.c
     - do not explicitly initialize static variables
     - some whitespace and formatting cleanups
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cdb7b48d0d5963e40bb6621bfa7b2d5fddc4562
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Sat Jun 25 14:54:22 2005 -0700

    [PATCH] cx88 build fix
    
    static declaration of cx88_pci_irqs follows non-static.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b659980014a7f45bfd6a1da9039a0498a28b7a63
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Sat Jun 25 14:54:21 2005 -0700

    [PATCH] dvb-bt8xx.txt fixes
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4208ff04a2dea2f55111a6cdc7e21f6ec3aef29f
Merge: 43df5ea... 8749af6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 25 16:03:08 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit af859a42d798f047fbfe198ed315a942662c39d2
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 21:07:27 2005 +0100

    NTFS: Prepare for 2.1.23 release: Update documentation and bump version.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8749af68216e1ebf6460992fce548f400ecf63a4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 25 19:39:45 2005 +0100

    [PATCH] ARM: Generic Dynamic Tick Timer support for ARM, take 4
    
    This patch adds support for Dynamic Tick Timer for ARM. Dynamic Tick is
    also known as VST (Variable Scheduling Timeouts).
    
    Dynamic Tick has been in use in the OMAP tree since last October.  The
    patch is not intrusive, and does not do anything unless CONFIG_NO_IDLE_HZ
    is defined.  This patch has the following fixed based on comments from
    RMK:
    - Time is updated before calling interrupt handlers.
    - Added new interrupt flag SA_TIMER to avoid duplicate timer interrupts
    - Moved struct dyn_tick_timer to time.h until we at some point probably
      have an arch independent dyn-tick.h
    - Cleaned up testing for DYN_TICK_ENABLED in irq.c
    
     I've cleaned up this patch to fix some remaining issues:
     - Call the timer tick handler with irqs disabled, as it would be from
       a normal interrupt
     - if we have a dyn_tick, we better implement all methods.
     - generic timer_dyn_reprogram() call, to be called before sleeping
     - added command line option - "dyntick=" to allow boot-time control
       of this feature
        -- rmk
    
    Signed-off-by: Tony Lindgren
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 321ab6a5fab812658626aee6bce2617f8cfb3a55
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 25 19:30:04 2005 +0100

    [PATCH] ARM: 2752/1: disable ixp2000 PCI I/O software workaround on chips that don't need it
    
    Patch from Lennert Buytenhek
    
    The later ixp2000 models don't need the PCI I/O workaround that we
    currently perform.  Add a config option to disable the workaround,
    and panic on boot if a kernel without the workaround is booted on a
    buggy chip.  As only pre-production ixp2000s need the workaround,
    the default is for it not to be configured in.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3cd9e19ebc91593c9f076410d6f979be188f01a0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 25 19:29:34 2005 +0100

    [PATCH] ARM: Fix discontigmem
    
    The merge of sparsemem broke ARM discontigmem.  Fix it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 43df5eac00734436e2bc5a5c11488b1a7accecc7
Merge: 7be426c... e55c57e...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 25 10:25:13 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 7be426c6e3a8ad7dcc8791589cea8af7aaafdf6f
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 25 10:01:36 2005 -0700

    ACPI: Make sure we call acpi_register_gsi() even for default PCI interrupt assignment
    
    That's the part that keeps track of the ELCR register, and we want to
    make sure that the PCI interrupts are properly marked level/low.

commit 4757d7dff65b56f2115038ad1615725f31806787
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 17:24:08 2005 +0100

    NTFS: Change ntfs_map_runlist_nolock() to only decompress the mapping pairs
          if the requested vcn is inside it.  Otherwise we get into problems
          when we try to map an out of bounds vcn because we then try to map
          the already mapped runlist fragment which causes
          ntfs_mapping_pairs_decompress() to fail and return error.  Update
          ntfs_attr_find_vcn_nolock() accordingly.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit fa3be92317c4ae34edcf5274e8bbeff181e20b7a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 17:15:36 2005 +0100

    NTFS: Add an extra parameter @last_vcn to ntfs_get_size_for_mapping_pairs()
          and ntfs_mapping_pairs_build() to allow the runlist encoding to be
          partial which is desirable when filling holes in sparse attributes.
          Update all callers.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 1d58b27b8d77ecb816cfa8f846b78c845675eb89
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 17:04:55 2005 +0100

    NTFS: Change the runlist terminator of the newly allocated cluster(s) to
          LCN_ENOENT in ntfs_attr_make_non_resident().  Otherwise the runlist
          code gets confused.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8144f56bd1e49015f94b8da99b24c4d04643b66d
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 25 16:58:22 2005 +0100

    [PATCH] ARM: 2751/1: ixp2000 gpio cleanup broke ixdp2800 build
    
    Patch from Lennert Buytenhek
    
    The ixp2000 gpio cleanup broke the ixdp2800 build as it moved some
    gpio-related functions from arch/platform.h to arch/gpio.h and the
    ixdp2x00 support code used those functions but didn't include the
    latter header file.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ea23d1ac7e380aefc00d691c7c9a3e747bc2531f
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 25 16:58:21 2005 +0100

    [PATCH] ARM: 2750/1: add i2c platform device for enp2611 on-board i2c bus
    
    Patch from Lennert Buytenhek
    
    On the enp2611, GPIO 7 and 6 are connected to an on-board i2c bus that
    attaches to the SODIMM module slot (for SPD) and an LM84 temperature
    sensor.  Add a platform device for this i2c bus.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 456b6b863a6a1a80e369e42568817747a427b072
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 25 16:58:21 2005 +0100

    [PATCH] ARM: 2749/1: update ixp2000 defconfigs to 2.6.12-git6
    
    Patch from Lennert Buytenhek
    
    Update the defconfigs for the ixp2000 platforms to 2.6.12-git6.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3bd1f4a173a3445f9919c21e775de2d8b9deacf8
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 16:51:58 2005 +0100

    NTFS: Fix several occurences of a bug where we would perform 'var & ~const'
          with a 64-bit variable and a int, i.e. 32-bit, constant.  This causes
          the higher order 32-bits of the 64-bit variable to be zeroed.  To fix
          this cast the 'const' to the same 64-bit type as 'var'.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit ca8fd7a0c6aa835e8014830b290cb965e85ac88e
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 16:31:27 2005 +0100

    NTFS: Detect the case when Windows has been suspended to disk on the volume
          to be mounted and if this is the case do not allow (re)mounting
          read-write.  This is done by parsing hiberfil.sys if present.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 9f993fe4634b39ca4404ba278053b03f360ec08a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 16:15:36 2005 +0100

    NTFS: Fix a bug in address space operations error recovery code paths where
          if the runlist was not mapped at all and a mapping error occured we
          would leave the runlist locked on exit to the function so that the
          next access to the same file would try to take the lock and deadlock.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 3f2faef00c6af17542ea8672ed7d09367222b2d0
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 15:28:56 2005 +0100

    NTFS: Stamp the transaction log ($UsnJrnl), aka user space journal, if it
          is active on the volume and we are mounting read-write or remounting
          from read-only to read-write.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 38b22b6e9f46ab8f73ef5734f0e0a000766a9258
Merge: 3357d4c... b3e112b...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat Jun 25 14:27:27 2005 +0100

    Automerge with /usr/src/ntfs-2.6.git.

commit 5f70eaa0d5768775a7492f3e3841fcca94bb0d13
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 20:21:01 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bbe832c09233738c100145fd535b6b8fc97640f6
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri Jun 24 20:20:04 2005 -0700

    [TG3]: Refinements to new locking strategy.
    
    1. Move tp->irq_sync = 0 to before the interrupt mailbox IO in
       tg3_enable_ints() so that the interrupt handler will always see
       irq_sync == 0 when interrupts are enabled.
    
    2. Remove the tg3_enable_ints() call in tg3_reset_hw(). Interrupts are
       always enabled explicitly or through tg3_netif_start(). This is to
       prevent interrupts being enabled while poll is disabled.
    
    3. Update trans_start with jiffies in tg3_netif_stop() to prevent false
       NETDEV WATCHDOG.
    
    4. Pass in the proper irq_sync parameter to tg3_full_lock() depending on
       netif_running() in some of the ethtool set calls.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f47c11eeccc8820010992eb32dbe7370a08f8bd3
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 20:18:35 2005 -0700

    [TG3]: Eliminate all hw IRQ handler spinlocks.
    
    Move all driver spinlocks to be taken at sw IRQ
    context only.
    
    This fixes the skb_copy() we were doing with hw
    IRQs disabled (which is illegal and triggers a
    BUG() with HIGHMEM enabled).  It also simplifies
    the locking all over the driver tremendously.
    
    We accomplish this feat by creating a special
    sequence to synchronize with the hw IRQ handler
    using a binary state and synchronize_irq().
    This idea is from Herbert Xu.
    
    Thanks to Michael Chan for helping to track down
    all of the race conditions in initial versions
    of this code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cd024c8baf9756759c57f0a19be639da8d3d4f8c
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 20:17:10 2005 -0700

    [TG3]: Fix missing memory barriers and SD_STATUS_UPDATED bit clearing.
    
    There must be a rmb() between reading the status block tag
    and calling tg3_has_work().  This was missing in tg3_mis()
    and tg3_interrupt_tagged().  tg3_poll() got it right.
    
    Also, SD_STATUS_UPDATED must be cleared in the status block
    right before we call tg3_has_work().  Only tg3_poll() got this
    wrong.
    
    Based upon patches and commentary from Grant Grundler and
    Michael Chan.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e55c57e0b51c68d78845549505057169c6c3cba6
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 20:11:03 2005 -0700

    [SPARC64]: Report any user access faults in termios accessors.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37616578539a47d9ace5e907ae73ea93a8cde740
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Fri Jun 24 20:06:18 2005 -0700

    [SPARC]: sunzilog warning fixes
    
    From: William Lee Irwin III <wli@holomorphy.com>
    
    This small patch silences some iomem-related warnings in sunzilog.c by
    declaring mapped_addr as void __iomem * and inserting a cast in one case.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c54d7e03c3a21b38c587f671704c5a12aa3987fc
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 19:57:07 2005 -0700

    [SUNRPC]: Fix {s,}size_t printf format strings in xprt.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a6484045fdd4154f8c8ee8c1dda4e32854c047e0
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 18:07:51 2005 -0700

    [TCP]: Do not present confusing congestion control options by default.
    
    Create TCP_CONG_ADVANCED option, akin to IP_ADVANCED_ROUTER, which
    when disabled will bypass all of the congestion control Kconfig
    options and leave the user with a safe default.
    
    That safe default is currently BIC-TCP with new Reno as a fallback.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb298ca3ce92574d57c4e49b329421425ea7d279
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 17:50:53 2005 -0700

    [IPV4]: Move FIB lookup algorithm choice under IP_ADVANCED_ROUTING
    
    Most users need not be concerned with a complex choice of what
    FIB lookup algorithm to use.  So give them the safe default of
    IP_FIB_HASH if IP_ADVANCED_ROUTING is disabled.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7704347a74fceaf79c89f8b8dbdd0111013e4d6
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 24 17:39:03 2005 -0700

    [PKT_SCHED]: Make TEXTSEARCH* options only selected.
    
    Do not present these confusing new options to the user
    unless he picked some facility that makes use of it,
    such as NET_EMATCH_TEXT.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3e112bcc19abd8e9657dca34a87316786e096f3
Merge: f647a27... 0a8b80c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 24 15:33:30 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit f647a27417d2adc43d8c96d3d6f837422fbc076e
Merge: 75043cb... 2966207...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 24 15:32:01 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 2966207c7e5945947c4db3a48aa4fa819807c5be
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Jun 24 23:11:31 2005 +0100

    [PATCH] ARM: 2748/1: ixp2000 implementation of the iomap api
    
    Patch from Lennert Buytenhek
    
    A number of ixp2000 models have a bug where the byte lanes for PCI I/O
    transactions are swapped.  We already work around this in our versions
    of {in,out}{b,w,l}, but we also need to perform these workarounds in a
    custom implementation of the new iomap API, provided in this patch.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7533fca8e866ee7355ca53f1216e3fa4c718f991
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Jun 24 23:11:31 2005 +0100

    [PATCH] ARM: 2747/1: allow platforms to provide their own iomap implementation
    
    Patch from Lennert Buytenhek
    
    This patch conditionalises the io{read,write}{8,16,32} defines and the
    prototypes for ioport_map/ioport_unmap in asm-arm/io.h on ioread8 not
    already having been defined.  This is done so that platforms can provide
    their own implementation of the iomap API, ixp2000 for example needs
    this.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 75043cb5b386e5a01fd03b88f647dd992de02f97
Author: Alexey Dobriyan <adobriyan@mail.ru>
Date:   Fri Jun 24 20:52:52 2005 +0000

    [PATCH] fs/qnx4/*: fix sparse warnings
    
    This patch fixes sparse warnings in the qnx4fs (and might even make
    qnx4fs work on big-endian boxes)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Anders Larsen <al@alarsen.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79042f087b5ac7bba819de03dc3e7462bab8aad9
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Fri Jun 24 21:27:39 2005 +0100

    [PATCH] ARM: 2698/1: Enable kernel r/w access to user pages on ARMv6
    
    Patch from Catalin Marinas
    
    cpu_v6_set_pte() sets the kernel access rights to r/o for user
    pages (L_PTE_USER) when neither L_PTE_WRITE nor L_PTE_DIRTY are
    set. This causes a kernel data abort when writing the TLS value
    in the 0xffff0000 page. This patch enables the kernel r/w access.
    
    Signed-off-by: Catalin Marinas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5932ae3f5d610fd8d047ef4693bab9f084e5c56d
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Jun 24 20:54:35 2005 +0100

    [PATCH] ARM: 2745/1: Fix IXP4xx debug macros
    
    Patch from Deepak Saxena
    
    Current IXP4xx debug macros do not work in the small window between
    the MMU being enabled and the call to map_io() b/c the standard
    peripheral mapping is not properly setup for use with the low-level
    debug code. This patch creates a new section-aligned mapping for the
    UART specifically for use with the debug macros.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c4982887cacf2122bc256e901598b58caf4a34be
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Jun 24 20:54:35 2005 +0100

    [PATCH] ARM: 2744/1: ixp2000 gpio irq support
    
    Patch from Lennert Buytenhek
    
    This patch cleans up the ixp2000 gpio irq code and implements the
    set_irq_type method for gpio irqs so that users can select for which
    events (falling edge/rising edge/level low/level high) on the gpio
    pin they want the corresponding gpio irq to be triggered.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c6b56949de86694d837750a0a89c766b9871e81c
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Jun 24 20:54:34 2005 +0100

    [PATCH] ARM: 2740/1: ixp2000 align{b,w} need to parenthesize their arguments
    
    Patch from Lennert Buytenhek
    
    Two macros that are used on the ixp2000 to fixup byte lane enables
    for I/O space accesses, align{b,w}, use their arguments without
    parenthesizing them.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0a8b80c52f44a6e84206618a8a450ba13a5809dc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jun 24 19:48:22 2005 +0100

    [PATCH] Serial: Eliminate magic numbers
    
    Use the existing macros instead.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 793ae77469121227cd910c4b99f24be1de34bcca
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 24 10:39:17 2005 -0700

    Add "memory" clobbers to the x86 inline asm of strncmp and friends
    
    They don't actually clobber memory, but gcc doesn't even know they
    _read_ memory, so can apparently re-order memory accesses around them.
    
    Which obviously does the wrong thing if the memory access happens to
    change the memory that the compare function is accessing..
    
    Verified to fix a strange boot problem by Jens Axboe.

commit 59a49e38711a146dc0bef4837c825b5422335460
Merge: 52c1da3... f2d368f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 24 00:31:46 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 52c1da39534fb382c061de58b65f678ad74b59f5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 23 22:05:33 2005 -0700

    [PATCH] make various thing static
    
    Another rollup of patches which give various symbols static scope
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d763b7a4736e219528f77bf6bc75dd78b1d75c03
Author: Carsten Otte <cotte@freenet.de>
Date:   Thu Jun 23 22:05:31 2005 -0700

    [PATCH] xip: description
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe77ba6f4f97690baa4c756611a07f3cc033f6ae
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Jun 23 22:05:29 2005 -0700

    [PATCH] xip: madvice/fadvice: execute in place
    
    Make sys_madvice/fadvice return sane with xip.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb6fe0c388e43b02e261f0fdee60e42f6298d7f7
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Jun 23 22:05:28 2005 -0700

    [PATCH] xip: reduce code duplication
    
    This patch reworks filemap_xip.c with the goal to reduce code duplication
    from mm/filemap.c.  It applies agains 2.6.12-rc6-mm1.  Instead of
    implementing the aio functions, this one implements the synchronous
    read/write functions only.  For readv and writev, the generic fallback is
    used.  For aio, we rely on the application doing the fallback.  Since our
    "synchronous" function does memcpy immediately anyway, there is no
    performance difference between using the fallbacks or implementing each
    operation.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d79125bba55ee82701f1c7d4ebbc1aa20ecbe4e
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Jun 23 22:05:26 2005 -0700

    [PATCH] xip: ext2: execute in place
    
    These are the ext2 related parts.  Ext2 now uses the xip_* file operations
    along with the get_xip_page aop when mounted with -o xip.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ceffc078528befc008c6f2c2c4decda79eabd534
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Jun 23 22:05:25 2005 -0700

    [PATCH] xip: fs/mm: execute in place
    
    - generic_file* file operations do no longer have a xip/non-xip split
    - filemap_xip.c implements a new set of fops that require get_xip_page
      aop to work proper. all new fops are exported GPL-only (don't like to
      see whatever code use those except GPL modules)
    - __xip_unmap now uses page_check_address, which is no longer static
      in rmap.c, and defined in linux/rmap.h
    - mm/filemap.h is now much more clean, plainly having just Linus'
      inline funcs moved here from filemap.c
    - fix includes in filemap_xip to make it build cleanly on i386
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 420edbcc09008342c7b2665453f6b370739aadb0
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Jun 23 22:05:23 2005 -0700

    [PATCH] xip: bdev: execute in place
    
    This is the block device related part.  The block device operation
    direct_access now has a struct block_device as first parameter.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d41088fa327782b14b5659dbcfff62ec704c23c
Author: Martin Waitz <tali@admingilde.org>
Date:   Thu Jun 23 22:05:21 2005 -0700

    [PATCH] DocBook: update comments
    
    This patch updates some comments to match code changes.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 363412b4f70a2ba19c76a01da7580472399312d4
Author: Martin Waitz <tali@admingilde.org>
Date:   Thu Jun 23 22:05:20 2005 -0700

    [PATCH] DocBook: only use tabular style for long synopsis
    
    There was a complaint that function declarations are shown tabular in the
    documentation since switching to xmlto.  This patch disables tabular mode
    when the function fits in one line.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 597f6eea75ff3d089e6a627c07e1bf28923b8e7e
Author: Jiri Slaby <xslaby@fi.muni.cz>
Date:   Thu Jun 23 22:05:18 2005 -0700

    [PATCH] docbook build fix
    
    Fix documentation build with `make O='
    
    Cc: Martin Waitz <tali@admingilde.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c988d2b2845495373f666a381d354a7f80981d62
Author: Matt Domsch <Matt_Domsch@dell.com>
Date:   Thu Jun 23 22:05:15 2005 -0700

    [PATCH] modules: add version and srcversion to sysfs
    
    This patch adds version and srcversion files to
    /sys/module/${modulename} containing the version and srcversion fields
    of the module's modinfo section (if present).
    
    /sys/module/e1000
    |-- srcversion
    `-- version
    
    This patch differs slightly from the version posted in January, as it
    now uses the new kstrdup() call in -mm.
    
    Why put this in sysfs?
    
    a) Tools like DKMS, which deal with changing out individual kernel
       modules without replacing the whole kernel, can behave smarter if they
       can tell the version of a given module.  The autoinstaller feature, for
       example, which determines if your system has a "good" version of a
       driver (i.e.  if the one provided by DKMS has a newer verson than that
       provided by the kernel package installed), and to automatically compile
       and install a newer version if DKMS has it but your kernel doesn't yet
       have that version.
    
    b) Because sysadmins manually, or with tools like DKMS, can switch out
       modules on the file system, you can't count on 'modinfo foo.ko', which
       looks at /lib/modules/${kernelver}/...  actually matching what is loaded
       into the kernel already.  Hence asking sysfs for this.
    
    c) as the unbind-driver-from-device work takes shape, it will be
       possible to rebind a driver that's built-in (no .ko to modinfo for the
       version) to a newly loaded module.  sysfs will have the
       currently-built-in version info, for comparison.
    
    d) tech support scripts can then easily grab the version info for what's
       running presently - a question I get often.
    
    There has been renewed interest in this patch on linux-scsi by driver
    authors.
    
    As the idea originated from GregKH, I leave his Signed-off-by: intact,
    though the implementation is nearly completely new.  Compiled and run on
    x86 and x86_64.
    
    From: Matthew Dobson <colpatch@us.ibm.com>
    
          build fix
    
    From: Thierry Vignaud <tvignaud@mandriva.com>
    
          build fix
    
    From: Matthew Dobson <colpatch@us.ibm.com>
    
          warning fix
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5bec39639d386e1893dc440dd536761136ab36b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:05:13 2005 -0700

    [PATCH] v4l: fix I2C detect after normal_i2c_range()
    
    This patch is necessary to correct I2C detect after normal_i2c_range
    removal in gregkh-i2c-i2c-address_range_removal.patch.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac19ecc6fa57b0ea320f01831175ff163f47d6a2
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:05:09 2005 -0700

    [PATCH] v4l: update for SAA7134 cards
    
    This patch adds support for various SAA7134 cards and brings some fixes.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Fabrice Aeschbacher <fabrice.aeschbacher@laposte.net>
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56fc08ca375491b965cb76fad65bfb98973e80d8
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:05:07 2005 -0700

    [PATCH] v4l: update for tuner cards and some V4L chips
    
    Tuner improvements and additions.  TEA5767 FM tuner added.  Several small
    fixes.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b45009b0288a96a3458f4f8e93cb776678d41875
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:05:03 2005 -0700

    [PATCH] v4l: CX88 cards update
    
    This patch adds support for various CX88 cards and allows specifying
    card addresses.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: cybercide@f2s.com <cybercide@f2s.com>
    Signed-off-by: Catalin Climov <catalin@climov.com>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d03e289ea4b13d78ce55f1ea0b0d45b8f1b34c3
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:04:58 2005 -0700

    [PATCH] bttv update
    
    This patch synchronizes current bttv support on V4L with linux kernel and
    adds support to Adlink RTV24 card.
    
    It is asked that *every* patch to V4L stuff to be first submitted to
    video4linux-list@redhat.com.
    
    From: "J.A. Magallon" <jamagallon@able.es>
    
    	struct bttv defined after usage.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Peter Skipworth <pskipworth@clarityvi.com>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c1d0185db6a44b6304c404f4da1a1a98746ca46
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jun 23 22:04:56 2005 -0700

    [PATCH] v4l: support tuner for Thomson DDT 7611 (ATSC/NTSC)
    
    Add support for tuner#60: Thomson DDT 7611 (ATSC/NTSC) Change tuner in
    card#28 (DViCO FusionHDTV3 Gold-T) from tuner=52 (Tuner Thomson DDT 7610)
    to tuner=60 (Tuner Thomson DDT 7611)
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80d34362f391840dcb10c0ec261f765871a586f7
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jun 23 22:04:55 2005 -0700

    [PATCH] DViCO FusionHDTV3 Gold-T documentation fix
    
    Even though it says DViCO FusionHDTV3 Gold-Q on the box, Gold-T is printed
    on the card.  This fix corrects the error in all places, and corrects the
    tuner name Thomson DDT 7611 (ATSC/NTSC) in the documentation.
    
    This applies against 2.6.12-rc5-mm2 after applying Manueal Capinha's
    patch "Add support for PixelView Ultra Pro in v4l" (because of the
    change from card=27 to card=28)
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 239df2e2b0e1f4f69fdf76fb67e865824029e8ab
Author: Manuel Capinha <mcapinha@gmail.com>
Date:   Thu Jun 23 22:04:53 2005 -0700

    [PATCH] v4l: add support for PixelView Ultra Pro
    
    The following patch adds support for the PixelView Ultra Pro video capture
    card in v4l.
    
    - It removes the remote control key definitions from ir-kbd-gpio.c and
      moves them to ir-common.c so that they can be shared between bt878 and
      cx88 based cards.
    
    - The patch also moves the FUSIONHDTV_3_GOLD_Q card from number 27 to 28
      to regain compatibility with the V4L cvs.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d81ef559daf2a8afa9292035d58b00e7cb23dd1a
Author: Mauro Carvalho Chehab <maurochehab@gmail.com>
Date:   Thu Jun 23 22:04:51 2005 -0700

    [PATCH] Video for Linux Documentation
    
    This patch synchronizes documentation from V4L CVS with current kernel
    release.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59dcd9480d93aebdf41e29c46e6a8b4ceeaca75d
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:04:50 2005 -0700

    [PATCH] v4l: PAL-M support fix for CX88 chipsets
    
    This patch fixes PAL-M chroma subcarrier frequency (FSC) to its correct
    value of 3.5756115 MHz and adjusts horizontal total samples for PAL-M,
    according with formula Line Draw Time / (4*FSC).
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Cc: <video4linux-list@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f246a8172a9e403b78c34568f766990f1506a0ab
Author: Michael Schimek <mschimek@nusurf.at>
Date:   Thu Jun 23 22:04:47 2005 -0700

    [PATCH] v4l: saa7134 ntsc vbi fix
    
    This patch fixes NTSC VBI capturing in the saa7134 driver.
    
    Signed-off-by: Michael H. Schimek <mschimek@gmx.at>
    Cc: <video4linux-list@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93b43f13b5bfeac09ef5743edf39eeeee3f4eeae
Author: Peter Skipworth <pete@peterskipworth.com>
Date:   Thu Jun 23 22:04:45 2005 -0700

    [PATCH] BTTV support for Adlink RTV24 capture card
    
    The bttv module currently lacks support for the Adlink RTV24 capture card.
    The following patch adds support for the Adlink RTV24 video capture card to
    the bttv module.
    
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 097b750e6c0209b4b951996826ca0bd6707e357a
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jun 23 22:04:43 2005 -0700

    [PATCH] Fix for cx88-cards.c for DVICO-FusionHDTV 3 GOLD Q
    
    This patch allows full analog functionality for the DViCO FusionHDTV3
    Gold-Q, 18ac:d820 which has a Conexant cx23882, Thompson7611, and LG 3202.
    It does NOT yet support digital decoding or digital audio without the
    internal analog audio jack connected to the sound board, but it works
    perfectly in analog mode.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6988588e13616587aa879c2e0bd7cd811705e5d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 23 22:04:41 2005 -0700

    [PATCH] VIDEO_CX88_DVB must select DVB_CX22702
    
    VIDEO_CX88_DVB must select DVB_CX22702 (due to its cx22702_attach usage).
    
    This patch fixes kernel Bugzilla #4594
    (http://bugzilla.kernel.org/show_bug.cgi?id=4594).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9c12b790e1dad2e6c2a9b2e62e97297aa8dd93a
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jun 23 22:04:37 2005 -0700

    [PATCH] saa7134: mark little endian ptr
    
    > -			*ptr = sg_dma_address(list) - list->offset;
    > +			*ptr = cpu_to_le32(sg_dma_address(list) - list->offset);
    
    Clearly mark pointers to little-endian things.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a20758fa3238134ec9ac0a7e02446d9861dfe943
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Thu Jun 23 22:04:34 2005 -0700

    [PATCH] v4l: saa7134 byteorder fix
    
    Fix byteorder bug in the saa7134 driver.  With that ObviouslyCorrect[tm]
    patch applied the driver reportly works on powerpc.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0964a3d3f1aa96468091924f6b0c391a46dc6d0b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:32 2005 -0700

    [PATCH] knfsd: nfsd4 reboot dirname fix
    
    Set the recovery directory via /proc/fs/nfsd/nfs4recoverydir.
    
    It may be changed any time, but is used only on startup.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7b9a45927e74c81d6562153f7fde9d32da00159
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:30 2005 -0700

    [PATCH] knfsd: nfsd4: reboot recovery
    
    This patch adds the code to create and remove client subdirectories from the
    recovery directory, as described in the previous patch comment.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 190e4fbf96037e5e526ba3210f2bcc2a3b6fe964
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:25 2005 -0700

    [PATCH] knfsd: nfsd4: initialize recovery directory
    
    NFSv4 clients are required to know what state they have on the server so that
    they can reclaim it on server reboot.  However, it is possible for
    pathalogical combinations of server reboots and network partitions to leave a
    client in a state where it cannot know whether it has lost its state on the
    server.
    
    For this reason, rfc3530 requires that we store some information about clients
    to stable storage.
    
    So we maintain a directory /var/lib/nfs/v4recovery with a subdirectory for
    each client with active state.  We leave open the possibility of including
    files underneath each such subdirectory with information about the client, but
    for now the subdirectories are empty.
    
    We create a client subdirectory whenever a client makes its first non-reclaim
    open_confirm.
    
    We remove a client subdirectory whenever either
            a) its lease expires, or
    	b) the grace period ends without it reclaiming anything.
    When handling reclaims, we allow the reclaim if and only if the client doing
    the reclaim has a subdirectory.
    
    This patch adds just the code to scan the recovery directory on nfsd startup.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb36d6345752fa24827044c68e15f6708a40d9f6
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:23 2005 -0700

    [PATCH] knfsd: nfsd4: remove cb_parsed
    
    The cb_parsed field is only used by probe_callback, to determine whether the
    callback information has been filled in by setclientid.  But there is no way
    that probe_callback() can be called without that having already happened, so
    that check is superfluous, as is cb_parsed.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e9e3dbe0fe36c824ce2c5d7b05997c87a64bbdc
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:20 2005 -0700

    [PATCH] knfsd: nfsd4: allow multiple lockowners
    
    >From the language of rfc3530 section 8.1.3 (e.g., the suggestion that a
    "process id" might be a reasonable lockowner value) it's conceivable that a
    client might want to use the same lockowner string on multiple files, so we may
    as well allow that.  We expect each use of open_to_lockowner to create a
    distinct seqid stream, though.
    
    For now we're also allowing multiple uses of open_to_lockowner with the same
    open, though it seems unlikely clients would actually do that.
    
    Also add a comment reminding myself of some very non-scalable data structures.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea1da636e956ad1591a74904f23d98bbc26a644b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:17 2005 -0700

    [PATCH] knfsd: nfsd4: rename state list fields
    
    Trivial renaming patch:
    
    I can never remember, while looking at various lists relating the nfsd4 state
    structures, which are the "heads" and which are items on other lists, or which
    structures are actually on the various lists.  The following convention helps
    me: given structures foo and bar, with foo containing the head of a list of
    bars, use "bars" for the name of the head of the list contained in the struct
    foo, and use "per_foo" for the entries in the struct bars.
    
    Already done for struct nfs4_file; go ahead and do it for the other nfsd4
    state structures.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21ab45a480ec7705d177e959ebf452d62340c004
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:14 2005 -0700

    [PATCH] knfsd: nfsd4: miscellaneous setclientid_confirm cleanup
    
    Minor cleanup, remove some unnecessary printk's.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c79f7377cd4f2a50d51475f4c7966a3e60596a7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:13 2005 -0700

    [PATCH] knfsd: nfsd4: setclientid_confirm comments
    
    Trivial whitespace and comment fixes.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08e8987c37cd04d2df211c1e019d8f165d44266e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:11 2005 -0700

    [PATCH] knfsd: nfsd4: setclientid_confirm gotoectomy
    
    Change from "goto" to "else if" format in setclientid_confirm.
    
    From: Fred Isaman
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22de4d837439071a0bec897485d3911383b6ffad
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:09 2005 -0700

    [PATCH] knfsd: nfsd4: fix setclientid_confirm error return
    
    NFS4_INVAL is not a valid error for setclientid_confirm, and INUSE is the more
    logical error here anyway.
    
    From: Fred Isaman
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a69c179a28a9bb9f4d086927b192d5cffe88e50
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:08 2005 -0700

    [PATCH] knfsd: nfsd4: fix setclientid_confirm cases
    
    Setclientid_confirm code confused states 1 and 3 (numbering from the
    IMPLEMENTATION section of rfc3530, section 14.2.33).  Fix this.
    
    State 1 allows the client to change the callback channel on the fly.  We don't
    implement this currently, so just turn off the callback channel in this case.
    
    From: Fred Isaman
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31f4a6c127f619886bf97f643e546f7788248f3f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:06 2005 -0700

    [PATCH] knfsd: nfsd4: fix uncomfirmed list
    
    Setclientid code assumes there is only one match in unconfirmed list.
    Make sure that assumption holds.
    
    From: Fred Isaman
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd39ca9a808c6026989bc2188868a0574eb37108
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:03 2005 -0700

    [PATCH] knfsd: nfsd4: make needlessly global code static
    
    This patch contains the following possible cleanups:
    
    - make needlessly global code static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a76b4319ca85b5e3a8098470c623a272d40271cd
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:04:01 2005 -0700

    [PATCH] knfsd: nfsd4: grace period end
    
    For the purposes of reboot recovery, we want to do some work during the
    transition period at the end of the grace period.  Some of that work must be
    guaranteed to have a certain relationship with the end of the grace period, so
    we want to control the transition there.
    
    Our approach is to modify the in_grace() checks to consult a global variable
    instead of checking the time directly, to schedule the first run of the
    laundromat thread at the end of the grace period, and to set the global
    end-of-grace-period there.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28ce6054f1de89834e5e9522f9e451cd88a35f85
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:56 2005 -0700

    [PATCH] knfsd: nfsd4: add find_{un}conf_by_str functions to simplify setclientid
    
    Minor setclientid cleanup
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a55370a3c0106106a975c5a09cee800611d0cf50
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:52 2005 -0700

    [PATCH] knfsd: nfsd4: reboot hash
    
    For the purposes of reboot recovery we keep a directory with subdirectories
    each having a name that is the ascii hex representation of the md5 sum of a
    client identifier for an active client.
    
    This adds the code to calculate that name.  We also use it for the purposes of
    comparing clients, so if someone ever manages to find two client names that
    are md5 collisions, then we'll return clid_inuse to the second.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dea9d280c96f90382ec5d5709433e66a0993ec9
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:42 2005 -0700

    [PATCH] knfsd: nfsd4: setclientid simplification
    
    We can be a little more concise here.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd0b1e954e3ba3e5d2cab941458cf98206471bd2
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:35 2005 -0700

    [PATCH] knfsd: nfsd4: idmap initialization
    
    Adopt standard kernel style by defining a no-op function instead of putting
    ifdef's in the code where the function is called.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 707d4ab7b3aa6d1f7a7d2cd123fb83ba9a528205
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:32 2005 -0700

    [PATCH] knfsd: nfsd4: remove nfs4_reclaim_init
    
    nfs4_reclaim_init is no longer performing any useful function.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac4d8ff2a57179de3ef7834c6ab3fac430b0a05d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:30 2005 -0700

    [PATCH] knfsd: nfsd4: clean up state initialization
    
    Separate out stuff that needs initialization on startup from stuff that only
    needs initialization on module init from static data.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76a3550ec50ed86885a10a767ebaebb7c9104721
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:26 2005 -0700

    [PATCH] knfsd: nfsd4: rename nfs4_state_init
    
    Somewhat gratuitous rename to simplify following patch.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b190fecfa33d72bcf74c9473134c2ad14ae9545
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:23 2005 -0700

    [PATCH] knfsd: nfsd4: delegation recovery
    
    Allow recovery of delegations after reboot.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d99a05adf8490cc171b7709554936b8f3ac9e362
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:21 2005 -0700

    [PATCH] knfsd: nfsd4: simplify lease changing
    
    The only way the protocol gives to change the lease time on the fly is to
    simulate a reboot.  We don't have that completely right in the current code;
    among other things, we should probably put lockd in grace too while we do
    this.
    
    For now, let's just keep this simple, and wait till the next time nfsd starts
    to register any changes in lease time.  If the administrator really wants to
    change the lease time *now*, they can go ahead and bring nfsd down and then
    back up again after changing the lease time.
    
    Also remove the "if (reclaim_str_hashtbl_size == 0)" case, a shortcut which
    skips the grace period if we know of no clients in need of recovery.  This
    isn't going to work well with nlm.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58da282b733cff4caef805c6555c7a3b90772946
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:19 2005 -0700

    [PATCH] knfsd: nfsd4: create separate laundromat workqueue
    
    We're running the laundromat work on the default kevent worker thread.  But
    the laundromat takes the nfsv4 state semaphore, which is used for way too much
    stuff, and the potential for deadlocks is high.  Better to have this on a
    separate workqueue.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfc8356570b6fcb4035c7d916ade5bbbe6c3b50a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:16 2005 -0700

    [PATCH] knfsd: nfsd4: nfs4_check_open_reclaim cleanup
    
    Minor cleanup.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ba266d6323e957588712f6a7d31252cd6b797bb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:15 2005 -0700

    [PATCH] knfsd: nfsd4: fix probe_callback
    
    rpc_create_client was modified recently to do its own (synchronous) NULL ping
    of the server.  We'd rather do that on our own, asynchronously, so that we
    don't have to block the nfsd thread doing the probe, and so that setclientid
    handling (hence, client mounts) can proceed normally whether the callback is
    succesful or not.  (We can still function fine without the callback
    channel--we just won't be able to give out delegations till it's verified to
    work.)
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e06b7f9e9537cb826f3cff95816fc4384b67806
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:13 2005 -0700

    [PATCH] knfsd: nfs4: hold filp while reading or writing
    
    We're trying to read and write from a struct file that we may not hold a
    reference to any more (since a close could be processed as soon as we drop the
    state lock).
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46be925fa6f4796e732e16a020fa0ef9d48ea7c8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:11 2005 -0700

    [PATCH] knfsd: lockd: flush signals on shutdown
    
    Silence another annoying "failed to contact portmap (errno -512)" on shutdown.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13cd21845d6a9729ca95e36ae6e8c669623fbfd4
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:10 2005 -0700

    [PATCH] nfsd4: reference count struct nfs4_file
    
    Add a struct kref to each nfs4_file and take a reference to it from each
    stateid and delegation that refers to it.  The atomicity guarantees are
    overkill given that all this stuff is done under the single nfsd4 state lock,
    but a) we'd like finer-grained locking some day, and b) this simplifies the
    cleanup of the structures a bit, something that has previously been a bit
    complicated and bug-prone.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8beefa249371f55432394ac96864c83b0b309c28
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:08 2005 -0700

    [PATCH] nfsd4: rename nfs4_file fields
    
    Trivial renaming patch:
    
    I can never remember, while looking at various lists relating the nfsd4 state
    structures, which are the "heads" and which are items on other lists, or which
    structures are actually on the various lists.  The following convention helps
    me: given structures foo and bar, with foo containing the head of a list of
    bars, use "bars" for the name of the head of the list contained in the struct
    foo, and use "per_foo" for the entries in the struct bars.
    
    Go ahead and do this for struct nfs4_file.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fa305ded4cc859deb4727ad9b25df0bbc064e99
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:06 2005 -0700

    [PATCH] nfsd4: remove debugging counters
    
    These remaining debugging counters haven't proved that useful.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b2d21c1965859acc881dd862b6ebbfae67cdc14
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:04 2005 -0700

    [PATCH] nfsd4: slabify delegations
    
    Allocate delegations from a slab cache.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ac049ac66416bbe84923f7c2384f23f6ee4aa88
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:03 2005 -0700

    [PATCH] nfsd4: slabify stateids
    
    Allocate stateid's from a slab cache.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e60d4398a7c20fbe9c4a6cc39d7188ef9f65d2f1
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:01 2005 -0700

    [PATCH] nfsd4: slabify nfs4_files
    
    The structures the server uses to keep track of various pieces of nfsv4 state
    (open files, outstanding delegations, etc.) are likely to be allocated and
    deallocated frequently and seem reasonable candidates for slab caches.
    
    While we're at it, the slab code keeps statistics that help catch leaks and
    such, so we may as well take this chance to eliminate some debugging counters
    that we've been keeping ourselves.
    
    Start with the struct nfs4_file.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c815afc73eeef089922449857ca4ed4d2e8950cb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:03:00 2005 -0700

    [PATCH] nfsd4: block metadata ops during grace period
    
    We currently return err_grace if a user attempts a non-reclaim open during the
    grace period.  But we also need to prevent renames and removes, at least, to
    ensure clients have the chance to recover state on files before they are moved
    or deleted.
    
    Of course, local users could also do renames and removes during the lease
    period, and there's not much we can do about that.  This at least will help
    with remote users.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 496400014f22c4dbdbc1e89249a2feba46939708
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:58 2005 -0700

    [PATCH] nfsd4: fix fh_expire_type
    
    We're returning NFS4_FH_NOEXPIRE_WITH_OPEN | NFS4_FH_VOL_RENAME for the
    fh_expire_type attribute.  This is incorrect:
    	1. The spec actually only allows NOEXPIRE_WITH_OPEN when
    	   VOLATILE_ANY is also set.
    	2. Filehandles for open files can expire, if the file is removed
    	   and there is a reboot.
    	3. Filehandles are only volatile on rename in the nosubtree check
    	   case.
    
    Unfortunately, there's no way to indicate that we only expire on remove.  So
    our only choice is FH4_VOLATILE_ANY.  Although it's redundant, we also set
    FH4_VOL_RENAME in the subtree check case, since subtreecheck does actually
    cause problems in practice and it seems possibly useful to give clients some
    way to distinguish that case.
    
    Fix a mispelled #define while we're at it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dd3c19212961453817f219cd6200981c38564bc
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:56 2005 -0700

    [PATCH] nfsd4: support CLAIM_DELEGATE_CUR
    
    Add OPEN claim type NFS4_OPEN_CLAIM_DELEGATE_CUR to nfsd4_open().
    
    A delegation stateid and a name are provided.  OPEN with O_CREAT is not legal
    with this claim type; otherwise, use the NFS4_OPEN_CLAIM_NULL code path to
    lookup the filename to be opened.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c44c5eeb2c022ddac98a8543c08dc8ff820561dc
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:54 2005 -0700

    [PATCH] nfsd4: add open state code for CLAIM_DELEGATE_CUR
    
    State logic for OPEN with claim type CLAIM_DELEGATE_CUR, which the NFSv4
    client uses to report local OPENs on a delegated file back to the NFSv4
    server.
    
    nfs4_check_deleg() performs input delegation stateid lookup and sanity check.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 567d98292e81033182e3da4c33b41ada9c113447
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:53 2005 -0700

    [PATCH] nfsd4: don't reopen for delegated client
    
    We don't really need to be doing a separate open for every stateid.  And in
    the case of an open from a client that already has a delegation on a file, it
    unnecessarily results in a delegation recall.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a6e43e6d4e43723699879f421d321e39eab5e41
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:50 2005 -0700

    [PATCH] nfsd4: nfs4_check_delegmode
    
    Additional minor code reshuffling to prepare for claim_deleg_cur support.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52f4fb43063c182f3ef7e257ab336a8be8066bb0
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Thu Jun 23 22:02:49 2005 -0700

    [PATCH] nfsd4: find_delegation_file()
    
    Factor out a bit of common code that will be useful elsewhere.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c0a400d1debb172c596b24ab82efab4975990a9
Author: John Levon <levon@movementarian.org>
Date:   Thu Jun 23 22:02:47 2005 -0700

    [PATCH] oprofile: report anonymous region samples
    
    The below patch passes samples from anonymous regions to userspace instead
    of just dropping them.  This provides the support needed for reporting
    anonymous-region code samples (today: basic accumulated results; later:
    Java and other dynamically compiled code).
    
    As this changes the format, an upgrade to the just-released 0.9 release of
    the userspace tools is required.
    
    This patch is based upon an earlier one by Will Cohen <wcohen@redhat.com>
    
    Signed-off-by: John Levon <levon@movementarian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 391cd727eac2e10be7685efd739a3ea9de87393c
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:02:43 2005 -0700

    [PATCH] tuner-core.c improvments and Ymec Tvision TVF8533MF support
    
    tuner-core.c, tuner.h:
    
    - tuner-core changed to support multiple I2C devices used on some
      adapters;
    
    - Kconfig now has an option (CONFIG_TUNER_MULTI_I2C) to enable this new
      behavor;
    
    - By default, even enabling CONFIG_TUNER_MULTI_I2C, tuner-core emulates
      the old behavor, using first I2C device for both FM and TV;
    
    - There is a new i2c command (TUNER_SET_ADDR) to allow tuner clients to
      select I2C address for FM or TV tuner;
    
    - Tuner I2C dettach now generates a warning on syslog if failed.
    
    tuner-simple.c:
    
    - TVision TVF-8531MF and TVF-5533 MF tuner included.  It uses, by
      default, I2C on 0xC2 address for TV and on 0xC0 for Radio.  Both TV and
      FM Radio mode are working.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55f51efdb696ff6e9d2056377d05268a97f3d4e4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jun 23 22:02:41 2005 -0700

    [PATCH] dvb: flexcop: add BCM3510 ATSC frontend support for Air2PC card
    
    Added support for the Broadcom BCM3510 ATSC (8VSB/16VSB & ITU J83 AnnexB FEC
    QAM64/256) demodulator used in the first generation of Air2PC ATSC
    PCI-cards/USB-boxes made by B2C2.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc89c229d9d7ec63cd33e960c20e75b77bc987d0
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jun 23 22:02:39 2005 -0700

    [PATCH] dvb: dvb_frontend: use time_after()
    
    Use time_after() macro.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f756ead1366092b73467fe3b1fb23f61034e94f9
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jun 23 22:02:38 2005 -0700

    [PATCH] dvb-usb: fix init error checking
    
    Fix error checking during initialization.  Thanks to Gerolf Wendland for
    discovering.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 776338e121b9db3156bfb4e21622a0219bbab9d4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jun 23 22:02:35 2005 -0700

    [PATCH] dvb: Add generalized dvb-usb driver
    
    Add generalized dvb-usb driver which supports a wide variety of devices.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6a235b1186dda0800c8bedc2526830a4a36b44e
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Thu Jun 23 22:02:29 2005 -0700

    [PATCH] dvb: drop obsolete dibusb driver
    
    Remove the dibusb driver which has been obsoleted by the generalized dvb-usb
    driver.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e05d2b8d3dd34b0237f489e991ed081cb0bf007
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Thu Jun 23 22:02:28 2005 -0700

    [PATCH] tpm: device attribute fixes
    
    This patch updates all the device attribute callbacks that weren't
    updated with the new parameter, I guess because they weren't in Greg's
    tree (including drivers/pcmcia/ds.c). Without the patch these
    callbacks are probably broken (and generate a warning along the lines
    of "assignment from incompatible pointer type").
    
    Please see http://lkml.org/lkml/2005/5/19/40 for the scripts I used to
    update the attributes automatically.
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f52bdbe9fcf2453d402376e22de1eca6dfc96890
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 22:02:26 2005 -0700

    [PATCH] i2o build fix
    
     LD      .tmp_vmlinux1
     drivers/built-in.o: In function `i2o_cfg_parms':
     config-osm.c:(.text+0x12764a): undefined reference to `i2o_parm_issue'
    
    Cc: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 718c31831aa134a97f6fef215c208cea80a8b480
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:24 2005 -0700

    [PATCH] I2O: Limit max sector workaround for Promise controllers
    
    Set max sectors to 256 for Promise controllers.
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f33213ecf49c98da4e85121b592c3bea8057c2e6
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:23 2005 -0700

    [PATCH] I2O: Lindent run and replacement of printk through osm printing functions
    
    Lindent run and replaced printk() through the corresponding osm_*() function
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e87545f06930c1d294423a8091d1077e7444a47
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:21 2005 -0700

    [PATCH] I2O: second code cleanup of sparse warnings and unneeded syncronization
    
    Changes:
     - Added header "core.h" for i2o_core.ko internal definitions
     - More sparse fixes
     - Changed display of TID's in sysfs attributes from XXX to 0xXXX
     - Use the right functions for accessing I/O and normal memory
     - Removed error handling of SCSI device errors and let the SCSI layer
       take care of it
     - Added new device / removed device handling to SCSI-OSM
     - Make status access volatile
     - Cleaned up activation of I2O controller
     - Removed unnecessary wmb() and rmb() calls
     - Use own struct i2o_io for I/O memory instead of struct i2o_dma
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2aaee33fbb354a2f08121aa1c1be55841102761
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:19 2005 -0700

    [PATCH] I2O: Adaptec specific SG_IO access, firmware access through sysfs and 2400A workaround
    
    Changes:
     - Provide SG_IO access to BLOCK and EXECUTIVE class on Adaptec
       controllers
     - Use PRIVATE messages in SCSI-OSM because on some controllers normal
       SCSI class commands like READ or READ CAPACITY cause errors
     - Use new DMA and SG list creation function
     - Added workaround to limit sectors per request for Adaptec 2400A
       controllers
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f10378fff658f61307496e0ae00095041725cf07
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:16 2005 -0700

    [PATCH] I2O: new sysfs attributes and Adaptec specific block device access and 64-bit DMA support
    
    Changes:
     - Added Bus-OSM which could be used by user space programs to reset a
       channel on the controller
     - Make ioctl's in Config-OSM obsolete in prefer for sysfs attributes and
       move those to its own file
     - Added sysfs attribute for firmware read and write access for I2O
       controllers
     - Added special handling of firmware read and write access for Adaptec
       controllers
     - Added vendor id and product id as sysfs-attribute to Executive classes
     - Added automatic notification of LCT change handling to Exec-OSM
     - Added flushing function to Block-OSM for later barrier implementation
     - Use PRIVATE messages for Block access on Adaptec controllers, which are
       faster then BLOCK class access
     - Cleaned up support for Promise controller
     - New messages are now detected using the IRQ status register as
       suggested by the I2O spec
     - Added i2o_dma_high() and i2o_dma_low() functions
     - Added facility for SG tablesize calculation when using 32-bit and
       64-bit DMA addresses
     - Added i2o_dma_map_single() and i2o_dma_map_sg() which could build the
       SG list for 32-bit as well as 64-bit DMA addresses
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f88e119c4b824a5017456fa094950d0f4092d96c
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:14 2005 -0700

    [PATCH] I2O: first code cleanup of spare warnings and unused functions
    
    Changes:
    
     - Removed unnecessary checking of NULL before calling kfree()
     - Make some functions static
     - Changed pr_debug() into osm_debug()
     - Use i2o_msg_in_to_virt() for getting a pointer to the message frame
     - Cleaned up some comments
     - Changed some le32_to_cpu() into readl() where necessary
     - Make error messages of OSM's look the same
     - Cleaned up error handling in i2o_block_end_request()
     - Removed unused error handling of failed messages in Block-OSM, which
       are not allowed by the I2O spec
     - Corrected the blocksize detection in i2o_block
     - Added hrt and lct sysfs-attribute to controller
     - Call done() function in SCSI-OSM after freeing DMA buffers
     - Removed unneeded variable for message size calculation in
       i2o_scsi_queuecommand()
     - Make some changes to remove sparse warnings
     - Reordered some functions
     - Cleaned up controller initialization
     - Replaced some magic numbers by defines
     - Removed unnecessary dma_sync_single_for_cpu() call on coherent DMA
     - Removed some unused fields in i2o_controller and removed some unused
       functions
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61fbfa8129c1771061a0e9f47747854293081c5b
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Thu Jun 23 22:02:11 2005 -0700

    [PATCH] I2O: bugfixes and compability enhancements
    
    Changes:
    
     - Fixed sysfs bug where user and parent links where added to the I2O
       device itself
     - Fixed bug when calculating TID for the event handler and cleaned up the
       workflow of i2o_driver_dispatch()
     - Fixed oops when no I2O device could be found for an event delivered to
       Exec-OSM
     - Fixed initialization of spinlock in Exec-OSM
     - Fixed memory leak in i2o_cfg_passthru() and i2o_cfg_passthru()
     - Removed MTRR support
     - Added PCI ID of Promise SX6000 with firmware >= 1.20.x.x
     - Turn of caching for ioremapped memory of in_queue
     - Added initialization sequence for Promise controllers
     - Moved definition of u8 / u16 / u32 for raidutils before first use
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34d6e07570ef74b965131452a862b13dfa779188
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:10 2005 -0700

    [PATCH] tpm: improve output in sysfs files when the TPM fails
    
    Since after reconsideration this is more debug output than an error (the
    TPM is operating correctly given the current state) I have changed the
    statements to dbg rather than err.
    
    Also this patch corrects a memory leak if the error path is taken in the
    tpm_show_pubek function.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e234bc970451edc4021637fe2979b887da873f9a
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:08 2005 -0700

    [PATCH] tpm: add debugging output
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1a23c6671f2bfd6e5e112848f01334ca39ea2b1
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:06 2005 -0700

    [PATCH] tpm: replace odd LPC init function
    
    Realized the tpm_lpc_init function isn't really necessary.  Replaced it
    with vendor specific logic to find out the address the BIOS mapped the TPM
    to.  This patch removes the tpm_lpc_init function, enums associated with it
    and calls to it.  The patch also implements the replacement functionality.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6df7da8f7ee99e6fd1995fad852bacb978a6447
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:04 2005 -0700

    [PATCH] tpm: TPMs on additional LPC bus
    
    Add support for TPMs on additional LPC buses.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e976d5557d3dd1e835b8be52e6201556dcfa052
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:03 2005 -0700

    [PATCH] tpm: locking fixes
    
    Add a missing lock in the register hardware and fix a misplaced lock release
    release.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9e5b6bf9cf19e6e9f2825228136ea17bc9a051a
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:02 2005 -0700

    [PATCH] tpm: add cancel function
    
    This patch provides the logic to check if an operation has been canceled while
    waiting for the response to arrive.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6659ca2ab6730c3bbb9fa495f2327b95b955decd
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:02:00 2005 -0700

    [PATCH] tpm: sysfs owernship changes
    
    In the current driver all sysfs files end up owned by the base driver module
    rather than the module that actually owns the device this is a problem if the
    module is unloaded and the file is open.  This patch fixes all that and lumps
    the files into an attribute_group.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81179bb6a54c2c626b4cbcc084ca974bb2d7f2a3
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:59 2005 -0700

    [PATCH] tpm: remove unnecessary __force
    
    Remove the unnecessary use of __force.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2fe90666a84e6a11c541424dfa9eec20cfe5fc1
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:57 2005 -0700

    [PATCH] tpm: use to_pci_dev
    
    Changes the container_of calls to 'to_pci_dev' as suggested previously.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe3fd48384af79e7619d3c6b0a020f801ef63c3b
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:56 2005 -0700

    [PATCH] tpm: fix timer initialization
    
    Fix the timer to be inited and modified properly.  This work depends on the
    fixing of the msleep stuff which in patch 1 of this set.
    
    Signed-of-by: Kylene Hall <kjhall@us.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2df7111fc6b0e050b06123379821ece2f8dd5bbc
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:54 2005 -0700

    [PATCH] tpm: large stack objects
    
    Remove some large objects be declared on the the stack.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b44bd58063f7839f42a4047843e93e1fbf73cda
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:53 2005 -0700

    [PATCH] tpm: read return code issue
    
    Replace an erroneous return code for the read function when no data is
    available.
    
    Signed-of-by: Kylene Hall <kjhall@us.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f87ea32ae2a986acc5258ad736ab0b55937c9489
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:51 2005 -0700

    [PATCH] tpm: remove unnecessary module stuff
    
    Description: Remove unnecessary (empty) module definitions.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dff37e4b0ad7bca3616f829c84bcf4ddd385d2c4
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:50 2005 -0700

    [PATCH] tpm: address missing const defs
    
    Add "const" to several static arrays that were missing it in their
    definitions.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3122a88a242454efe72930e56a3e4d56ee534f3c
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Thu Jun 23 22:01:48 2005 -0700

    [PATCH] tpm: Fix concerns with TPM driver -- use enums
    
    Convert #defines to named enums where that preference has been indicated by
    other kernel developers.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 700d8bdcd0fa815b08638b1e4d43b66d60cc6a8d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Jun 23 22:01:47 2005 -0700

    [PATCH] char/tpm: use msleep(), clean-up timers,
    
    The TPM driver unnecessarily uses timers when it simply needs to maintain a
    maximum delay via time_before().  msleep() is used instead of
    schedule_timeout() to guarantee the task delays as expected.  While
    compile-testing, I found a typo in the driver, using tpm_chp instead of
    tpm_chip.  Remove the now unused timer callback function and change
    TPM_TIMEOUT's units to milliseconds.  Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Acked-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a94f9209762a6eb286f668e1346ad87985cc765
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 22:01:45 2005 -0700

    [PATCH] ipmi: add 32-bit ioctl translations for 64-bit platforms
    
    )
    
    From: Corey Minyard <minyard@acm.org>
    
    This contains the patch for supporting 32-bit compatible ioctls on x86_64
    systems.  The current x86_64 driver will not work with 32-bit applications.
    
    Signed-off-by: Jordan Hargave <jordan_hargrave@dell.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77cf3973f22c7e7158f5e2c3c3d6809125b77e4b
Author: Corey Minyard <minyard@acm.org>
Date:   Thu Jun 23 22:01:44 2005 -0700

    [PATCH] ipmi: use completions, not semaphores, in powerdown code
    
    Don't use semaphores for IPC in the poweroff code, use completions instead.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b6259432dee81f928c22c48c080d5f6325ed92e
Author: Corey Minyard <minyard@acm.org>
Date:   Thu Jun 23 22:01:42 2005 -0700

    [PATCH] ipmi: add power cycle capability
    
    This patch to adds "power cycle" functionality to the IPMI power off module
    ipmi_poweroff.  It also contains changes to support procfs control of the
    feature.
    
    The power cycle action is considered an optional chassis control in the IPMI
    specification.  However, it is definitely useful when the hardware supports
    it.  A power cycle is usually required in order to reset a firmware in a bad
    state.  This action is critical to allow remote management of servers.
    
    The implementation adds power cycle as optional to the ipmi_poweroff module.
    It can be modified dynamically through the proc entry mentioned above.  During
    a power down and enabled, the power cycle command is sent to the BMC firmware.
     If it fails either due to non-support or some error, it will retry to send
    the command as power off.
    
    Signed-off-by: Christopher A. Poblete <Chris_Poblete@dell.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f43f84f13a49fe5f0f7d1595082b6d7ec6daa85
Author: Corey Minyard <minyard@acm.org>
Date:   Thu Jun 23 22:01:40 2005 -0700

    [PATCH] ipmi: timer shutdown cleanup
    
    Clean up the timer shutdown handling in the IPMI driver.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 845e78a15726f238fe1398b8c07754726cd726a7
Author: Corey Minyard <minyard@acm.org>
Date:   Thu Jun 23 22:01:39 2005 -0700

    [PATCH] ipmi: doc updates
    
    This cleans up the IPMI documentation to fix some problems and make it more
    accurate for the current drivers.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdd5b29c6bc835dab71148afd5952f9cd278eef1
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 23 22:01:37 2005 -0700

    [PATCH] Make reiserfs BUG on too big transaction
    
    Make reiserfs BUG() when somebody tries to start a larger transaction than
    it's allowed (currently the code just silently deadlocks).
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Acked-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7282bee78798294bb1f0211a842cdb9f4872db3d
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:33 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 8
    
    The attached patches provides part 8 of an architecture implementation
    for the Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e344b63eeec7850b5e900e10c8a6c61d083fd3a4
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:30 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 7
    
    The attached patches provides part 7 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a8fd5589902153a134111ed7a40f9cca1f83254
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:26 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 6
    
    The attached patches provides part 6 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f65ce4d141e435e54c20ed2379d983d362a2cb5
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:24 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 5
    
    The attached patches provides part 5 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 249ac17e96811acc3c6402317dd5d5c89d2cbf68
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:20 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 4
    
    The attached patches provides part 4 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a0015d62668e64c8b6e02e360fbbea121bfd5e6
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:16 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 3
    
    The attached patches provides part 3 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bedea94545165364618d403d03b61d797acba0b
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:12 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 2
    
    The attached patches provides part 2 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e1a6dd2fddcc73c9e933758361e3d9c076c688a
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:10 2005 -0700

    [PATCH] xtensa: Architecture support for Tensilica Xtensa Part 1
    
    The attached patches provides part 1 of an architecture implementation for the
    Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48b415ca13bac91f83db3b9d362fd5ae0ce275cb
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Jun 23 22:01:07 2005 -0700

    [PATCH] xtensa: Tensilica Xtensa CPU arch maintainer record
    
    Start of a patch series which adds support for the xtensa architecture to
    Linux.
    
    The Xtensa architecture is highly configurable and usually buried inside an
    SOC device.  So, if you buy a new printer, digital camera, or cell phone,
    there is a chance that there is an Xtensa inside even though you don't know it
    (sometimes as a small audio-engine or as a control CPU).  Linux hasn't been
    adopted widely with Xtensa yet, but with Linux growing in the embedded space,
    I am sure it will become much more important.
    
    The attached patch supplies the maintainer record for an architecture
    implementation for the Tensilica Xtensa CPU series.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 556a2a45bce1740f035befaa7201e4ad836c7257
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 23 22:01:06 2005 -0700

    [PATCH] quota: reiserfs: improve quota credit estimates
    
    Use improved credits estimates for quota operations.  Also reserve space
    for a quota operation in a transaction only if filesystem was mounted with
    some quota option.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f54587bea84a35125c95e19b98c2f464c50871b
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 23 22:01:04 2005 -0700

    [PATCH] quota: ext3: Improve quota credit estimates
    
    Use improved credits estimates for quota operations.  Also reserve a space
    for a quota operation in a transaction only if filesystem was mounted with
    some quota options.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e5117ba0af4582b6ec9164874f719d7f3f1eb2b
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 23 22:01:03 2005 -0700

    [PATCH] quota: improve credits estimates
    
    Improve estimates on the number of needed credits for quota transaction.
    Now we distinguish blocks that might need to be allocated and blocks that
    only need to be rewritten.  Also we distinguish deleting of a quota
    structure and creating of a new one.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd6a1f16fffdfe010fdc2979fd01f12357816762
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 23 22:01:01 2005 -0700

    [PATCH] reiserfs: add checking of journal_begin() return value
    
    Check return values of journal_begin() and journal_end() in the quota code
    for reiserfs.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92198f7eaa5df3479341dd8fa20c2c81aa3b1e25
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 22:00:59 2005 -0700

    [PATCH] pass iocb to dio_iodone_t
    
    XFS will have to look at iocb->private to fix aio+dio.  No other filesystem
    is using the blockdev_direct_IO* end_io callback.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16c29b67fb3bbacfc2a71f9e5f7d85728ef45efa
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Thu Jun 23 22:00:58 2005 -0700

    [PATCH] eCryptfs: export user key type
    
    Export this symbol to GPL modules for eCryptfs: an out-of-tree GPL'ed
    filesystem.
    
    Signed off by: Michael Halcrow <mhalcrow@us.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e30148c3d524a9c1c63ca28261bc24c457eb07a
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 23 22:00:56 2005 -0700

    [PATCH] Keys: Make request-key create an authorisation key
    
    The attached patch makes the following changes:
    
     (1) There's a new special key type called ".request_key_auth".
    
         This is an authorisation key for when one process requests a key and
         another process is started to construct it. This type of key cannot be
         created by the user; nor can it be requested by kernel services.
    
         Authorisation keys hold two references:
    
         (a) Each refers to a key being constructed. When the key being
         	 constructed is instantiated the authorisation key is revoked,
         	 rendering it of no further use.
    
         (b) The "authorising process". This is either:
    
         	 (i) the process that called request_key(), or:
    
         	 (ii) if the process that called request_key() itself had an
         	      authorisation key in its session keyring, then the authorising
         	      process referred to by that authorisation key will also be
         	      referred to by the new authorisation key.
    
    	 This means that the process that initiated a chain of key requests
    	 will authorise the lot of them, and will, by default, wind up with
    	 the keys obtained from them in its keyrings.
    
     (2) request_key() creates an authorisation key which is then passed to
         /sbin/request-key in as part of a new session keyring.
    
     (3) When request_key() is searching for a key to hand back to the caller, if
         it comes across an authorisation key in the session keyring of the
         calling process, it will also search the keyrings of the process
         specified therein and it will use the specified process's credentials
         (fsuid, fsgid, groups) to do that rather than the calling process's
         credentials.
    
         This allows a process started by /sbin/request-key to find keys belonging
         to the authorising process.
    
     (4) A key can be read, even if the process executing KEYCTL_READ doesn't have
         direct read or search permission if that key is contained within the
         keyrings of a process specified by an authorisation key found within the
         calling process's session keyring, and is searchable using the
         credentials of the authorising process.
    
         This allows a process started by /sbin/request-key to read keys belonging
         to the authorising process.
    
     (5) The magic KEY_SPEC_*_KEYRING key IDs when passed to KEYCTL_INSTANTIATE or
         KEYCTL_NEGATE will specify a keyring of the authorising process, rather
         than the process doing the instantiation.
    
     (6) One of the process keyrings can be nominated as the default to which
         request_key() should attach new keys if not otherwise specified. This is
         done with KEYCTL_SET_REQKEY_KEYRING and one of the KEY_REQKEY_DEFL_*
         constants. The current setting can also be read using this call.
    
     (7) request_key() is partially interruptible. If it is waiting for another
         process to finish constructing a key, it can be interrupted. This permits
         a request-key cycle to be broken without recourse to rebooting.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8589b4e00e352f983259140f25a262d973be6bc5
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 23 22:00:53 2005 -0700

    [PATCH] Keys: Use RCU to manage session keyring pointer
    
    The attached patch uses RCU to manage the session keyring pointer in struct
    signal_struct.  This means that searching need not disable interrupts and get
    a the sighand spinlock to access this pointer.  Furthermore, by judicious use
    of rcu_read_(un)lock(), this patch also avoids the need to take and put
    refcounts on the session keyring itself, thus saving on even more atomic ops.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7888e7ff4ee579442128d7d12a9c9dbf2cf7de6a
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 23 22:00:51 2005 -0700

    [PATCH] Keys: Pass session keyring to call_usermodehelper()
    
    The attached patch makes it possible to pass a session keyring through to the
    process spawned by call_usermodehelper().  This allows patch 3/3 to pass an
    authorisation key through to /sbin/request-key, thus permitting better access
    controls when doing just-in-time key creation.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76d8aeabfeb1c42641a81c44280177b9a08670d8
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 23 22:00:49 2005 -0700

    [PATCH] keys: Discard key spinlock and use RCU for key payload
    
    The attached patch changes the key implementation in a number of ways:
    
     (1) It removes the spinlock from the key structure.
    
     (2) The key flags are now accessed using atomic bitops instead of
         write-locking the key spinlock and using C bitwise operators.
    
         The three instantiation flags are dealt with with the construction
         semaphore held during the request_key/instantiate/negate sequence, thus
         rendering the spinlock superfluous.
    
         The key flags are also now bit numbers not bit masks.
    
     (3) The key payload is now accessed using RCU. This permits the recursive
         keyring search algorithm to be simplified greatly since no locks need be
         taken other than the usual RCU preemption disablement. Searching now does
         not require any locks or semaphores to be held; merely that the starting
         keyring be pinned.
    
     (4) The keyring payload now includes an RCU head so that it can be disposed
         of by call_rcu(). This requires that the payload be copied on unlink to
         prevent introducing races in copy-down vs search-up.
    
     (5) The user key payload is now a structure with the data following it. It
         includes an RCU head like the keyring payload and for the same reason. It
         also contains a data length because the data length in the key may be
         changed on another CPU whilst an RCU protected read is in progress on the
         payload. This would then see the supposed RCU payload and the on-key data
         length getting out of sync.
    
         I'm tempted to drop the key's datalen entirely, except that it's used in
         conjunction with quota management and so is a little tricky to get rid
         of.
    
     (6) Update the keys documentation.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7286aa9b9ab35f20b1ff16d867f4535701df99b5
Author: Andrea Arcangeli <andrea@cpushare.com>
Date:   Thu Jun 23 22:00:45 2005 -0700

    [PATCH] ppc64: fix seccomp with 32-bit userland
    
    The seccomp check has to happen when entering the syscall and not when
    exiting it or regs->gpr[0] contains garabge during signal handling in
    ppc64_rt_sigreturn (this actually might be a bug too, but an orthogonal
    one, since we really have to run the check before invoking the syscall and
    not after it).
    
    Signed-off-by: Andrea Arcangeli <andrea@cpushare.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2d368fa3ef90f2159d9e542303901ebf68144dd
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 23 23:55:41 2005 -0700

    [PKT_SCHED]: Make NET_EMATCH_TEXT select TEXTSEARCh
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65df877ab2e2328a4704af218efaed0a45176c86
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 23 23:49:52 2005 -0700

    [LIB]: textsearch.o needs to be obj-y not lib-y.
    
    It exports symbols.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8acfbac75c2ffdd66fb5dfcdb7ab5aaced94fd8
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 23 23:45:02 2005 -0700

    [TCP]: Need to declare 'tcp_reno' in net/tcp.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9b200b02a6c9cddca5132d64aa41156bbcddcbaa
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 23 21:06:56 2005 -0700

    [SLIP]: Simplify sl_free_bufs()
    
    We can avoid assignments to the local variable 'tmp' and
    actually get rid of tmp alltogether in sl_free_bufs(). This patch does
    that.  This is safe since both kfree() and slhc_free() handles NULL
    pointers gracefully.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d675c989ed2d4ba23dff615330b04371aea83534
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 21:00:58 2005 -0700

    [PKT_SCHED]: Packet classification based on textsearch (ematch)
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3fc7e8a6d842f72d16d2623b1022814a635ab961
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 21:00:17 2005 -0700

    [NET]: skb_find_text() - Find a text pattern in skb data
    
    Finds a pattern in the skb data according to the specified
    textsearch configuration. Use textsearch_next() to retrieve
    subsequent occurrences of the pattern. Returns the offset
    to the first occurrence or UINT_MAX if no match was found.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 677e90eda3bd8cfde0b748daaa46476162a03950
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 20:59:51 2005 -0700

    [NET]: Zerocopy sequential reading of skb data
    
    Implements sequential reading for both linear and non-linear
    skb data at zerocopy cost. The data is returned in chunks of
    arbitary length, therefore random access is not possible.
    
    Usage:
    	from	 := 0
    	to	 := 128
    	state	 := undef
    	data	 := undef
    	len	 := undef
    	consumed := 0
    
    	skb_prepare_seq_read(skb, from, to, &state)
    	while (len = skb_seq_read(consumed, &data, &state)) != 0 do
    		/* do something with 'data' of length 'len' */
    		if abort then
    			/* abort read if we don't wait for
    			 * skb_seq_read() to return 0 */
    			skb_abort_seq_read(&state)
    			return
    		endif
    		/* not necessary to consume all of 'len' */
    		consumed += len
    	done
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6408f79cce401e1bfecf923e7156f84f96e021e3
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 20:59:16 2005 -0700

    [LIB]: Naive finite state machine based textsearch
    
    A finite state machine consists of n states (struct ts_fsm_token)
    representing the pattern as a finite automation. The data is read
    sequentially on a octet basis. Every state token specifies the number
    of recurrences and the type of value accepted which can be either a
    specific character or ctype based set of characters. The available
    type of recurrences include 1, (0|1), [0 n], and [1 n].
    
    The algorithm differs between strict/non-strict mode specyfing
    whether the pattern has to start at the first octect. Strict mode
    is enabled by default and can be disabled by inserting
    TS_FSM_HEAD_IGNORE as the first token in the chain.
    
    The runtime performance of the algorithm should be around O(n),
    however while in strict mode the average runtime can be better.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit df3fb93ad9ec0b20c785c0ad82d42d159a1af272
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 20:58:37 2005 -0700

    [LIB]: Knuth-Morris-Pratt textsearch algorithm
    
    Implements a linear-time string-matching algorithm due to Knuth,
    Morris, and Pratt [1]. Their algorithm avoids the explicit
    computation of the transition function DELTA altogether. Its
    matching time is O(n), for n being length(text), using just an
    auxiliary function PI[1..m], for m being length(pattern),
    precomputed from the pattern in time O(m). The array PI allows
    the transition function DELTA to be computed efficiently
    "on the fly" as needed. Roughly speaking, for any state
    "q" = 0,1,...,m and any character "a" in SIGMA, the value
    PI["q"] contains the information that is independent of "a" and
    is needed to compute DELTA("q", "a") [2]. Since the array PI
    has only m entries, whereas DELTA has O(m|SIGMA|) entries, we
    save a factor of |SIGMA| in the preprocessing time by computing
    PI rather than DELTA.
    
    [1] Cormen, Leiserson, Rivest, Stein
        Introdcution to Algorithms, 2nd Edition, MIT Press
    [2] See finite automation theory
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2de4ff7bd658c97fb357efa3095a509674dacb5a
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Jun 23 20:49:30 2005 -0700

    [LIB]: Textsearch infrastructure.
    
    The textsearch infrastructure provides text searching
    facitilies for both linear and non-linear data.
    Individual search algorithms are implemented in modules
    and chosen by the user.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f8ef48d240963093451bcf83df89f1a1364f51d
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 20:37:36 2005 -0700

    [TCP]: Allow choosing TCP congestion control via sockopt.
    
    Allow using setsockopt to set TCP congestion control to use on a per
    socket basis.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 51b0bdedb8e784d0d969a6b77151911130812400
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 20:14:40 2005 -0700

    [NET]: Separate two usages of netdev_max_backlog.
    
    Separate out the two uses of netdev_max_backlog. One controls the
    upper bound on packets processed per softirq, the new name for this is
    netdev_budget; the other controls the limit on packets queued via
    netif_rx.
    
    Increase the max_backlog default to account for faster processors.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31aa02c53c84658f6694f319f09e232ede27be5a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 20:12:48 2005 -0700

    [NET]: Eliminate netif_rx massive packet drops.
    
    Eliminate the throttling behaviour when the netif receive queue fills
    because it behaves badly when using high speed networks under load.
    The throttling cause multiple packet drops that cause TCP to go into
    slow start mode. The same effective patch has been part of BIC TCP and
    H-TCP as well as part of Web100.
    
    The existing code drops 100's of packets when the queue fills;
    this changes it to individual packet drop-tail.
    
    Signed-off-by: Stephen Hemmminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 34008d8c631d067caffa136313260525f3ae48a2
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 20:10:00 2005 -0700

    [NET]: Remove obsolete netif_rx congestion sensing mechanism.
    
    Remove the congestion sensing mechanism from netif_rx, and always
    return either full or empty.  Almost no driver checks the return value
    from netif_rx, and those that do only use it for debug messages.
    
    The original design of netif_rx was to do flow control based on the
    receive queue, but NAPI has supplanted this and no driver uses the
    feedback.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c1ebcdb8c422cd73f54bcd2b9953e443a47667e5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 20:08:59 2005 -0700

    [NET]: Remove obsolete fastroute stats.
    
    Remove last vestiages of fastroute code that is no longer used.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 16822e62053e73fa7def9decc38a7e287d27d980
Merge: a39451c... e608a80...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 17:27:24 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit a39451c17f53bbae053555670c7b678d46bcebba
Merge: adb7ee3... 0e57976...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 17:26:31 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit adb7ee3746b579a7fa7af7c4ec2c8164bc910ed4
Merge: f46f6b2... 691027b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 17:19:56 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit f46f6b20cb01508f5020142ff91021f8fb39550b
Merge: a8ad86f... 67f7654...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 16:58:55 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit f5f287738bddf38ec9ca79344f00dab675e1bbf5
Author: Sonny Rao <sonny@burdell.org>
Date:   Thu Jun 23 16:57:56 2005 -0500

    JFS: performance patch
    
    Basically, we saw a large amount of time spent in the
    jfs_strfromUCS_le() function, mispredicting the branch inside the
    loop, so I just added some unlikely modifiers to the if statements to
    re-ordered the code.  Again, these simple changes provided > 2 % on
    spec-sfs, so please consider it for inclusion.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e608a8072b10258aa18c2e33324def225199ba1d
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Jun 22 22:24:00 2005 -0700

    [IA64] Fix pfn_to_nid() so the kernel compiles again for !CONFIG_DISCONTIGMEM.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 67f7654ea1f11fac1cf4a33bf9a5d9079d122e70
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 23 22:26:43 2005 +0100

    [PATCH] Serial: Bugs are not capabilities
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 691027b91be99413dc60fab0902b366434555015
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 23 21:56:48 2005 +0100

    [PATCH] ARM: 2730/1: S3C2410 default configuration update
    
    Patch from Ben Dooks
    
    Add support for the DM9000 and bring default configuration
    up-to-date with the latest 2.6.12 kernel release
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d97a666f36cf051e1b1c60505be3d6e9b51f785f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 23 21:56:47 2005 +0100

    [PATCH] ARM: 2729/1: DM9000 platform support for S3C2410 machines (BAST, VR1000)
    
    Patch from Ben Dooks
    
    Add platform_device information for DM9000 chip(s) on the
    Simtec BAST and the VR1000 board.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d9dc58049d3ed5c63c1a6ac82c217558b4ec623a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 23 21:56:46 2005 +0100

    [PATCH] ARM: 2728/1: S3C2410 - fix constant warning on serial device name
    
    Patch from Ben Dooks
    
    Remove warning of casting `const char *` to a `char *` type.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c1241c4c3a1507d76c7b987130f2f02f53ecc09f
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Jun 23 21:56:46 2005 +0100

    [PATCH] ARM: 2722/1: remove reliance on udivdi3 for nwfpe
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bf1b8ab6f21e1adbab1abd1b4e71c35fe65dc5fe
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Jun 23 21:56:45 2005 +0100

    [PATCH] ARM: 2721/1: remove reliance on udivdi3 for pxafb driver
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0e57976b6376f7fda6bef8b7dee2a3c8819ec9e9
Author: John Heffner <jheffner@psc.edu>
Date:   Thu Jun 23 12:29:07 2005 -0700

    [TCP]: Add Scalable TCP congestion control module.
    
    This patch implements Tom Kelly's Scalable TCP congestion control algorithm
    for the modular framework.
    
    The algorithm has some nice scaling properties, and has been used a fair bit
    in research, though is known to have significant fairness issues, so it's not
    really suitable for general purpose use.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a7868ea68d29eb2c037952aeb3b549cf05749a18
Author: Baruch Even <baruch@ev-en.org>
Date:   Thu Jun 23 12:28:11 2005 -0700

    [TCP]: Add H-TCP congestion control module.
    
    H-TCP is a congestion control algorithm developed at the Hamilton Institute, by
    Douglas Leith and Robert Shorten. It is extending the standard Reno algorithm
    with mode switching is thus a relatively simple modification.
    
    H-TCP is defined in a layered manner as it is still a research platform. The
    basic form includes the modification of beta according to the ratio of maxRTT
    to min RTT and the alpha=2*factor*(1-beta) relation, where factor is dependant
    on the time since last congestion.
    
    The other layers improve convergence by adding appropriate factors to alpha.
    
    The following patch implements the H-TCP algorithm in it's basic form.
    
    Signed-Off-By: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b87d8561d8667d221b728ccdcb18eb95b16a687b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:27:19 2005 -0700

    [TCP]: Add TCP Vegas congestion control module.
    
    TCP Vegas code modified for the new TCP infrastructure.
    Vegas now uses microsecond resolution timestamps for
    better estimation of performance over higher speed links.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 835b3f0c0d7e1f716c45ec576662eac7a68b8548
Author: Daniele Lacamera <root@danielinux.net>
Date:   Thu Jun 23 12:26:34 2005 -0700

    [TCP]: Add TCP Hybla congestion control module.
    
    TCP Hybla congestion avoidance.
    
    - "In heterogeneous networks, TCP connections that incorporate a
    terrestrial or satellite radio link are greatly disadvantaged with
    respect to entirely wired connections, because of their longer round
    trip times (RTTs). To cope with this problem, a new TCP proposal, the
    TCP Hybla, is presented and discussed in the paper[1]. It stems from an
    analytical evaluation of the congestion window dynamics in the TCP
    standard versions (Tahoe, Reno, NewReno), which suggests the necessary
    modifications to remove the performance dependence on RTT.[...]"[1]
    
    [1]: Carlo Caini, Rosario Firrincieli, "TCP Hybla: a TCP enhancement for
    heterogeneous networks",
    International Journal of Satellite Communications and Networking
    Volume 22, Issue 5 , Pages 547 - 566. September 2004.
    
    Signed-off-by: Daniele Lacamera <root@danielinux.net>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a628d29b56d3f420bf3ff1d7543a9caf3ce3b994
Author: John Heffner <jheffner@psc.edu>
Date:   Thu Jun 23 12:24:58 2005 -0700

    [TCP]: Add High Speed TCP congestion control module.
    
    Sally Floyd's high speed TCP congestion control.
    This is useful for comparison and research.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8727076289ec55298a05cabddf02b374d13c1624
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:24:09 2005 -0700

    [TCP]: Add TCP Westwood congestion control module.
    
    This is the existing 2.6.12 Westwood code moved from tcp_input
    to the new congestion framework. A lot of the inline functions
    have been eliminated to try and make it clearer.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83803034f4233d810c4adc52008921da060c55d1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:23:25 2005 -0700

    [TCP]: Add TCP BIC congestion control module.
    
    TCP BIC congestion control reworked to use the new congestion control
    infrastructure. This version is more up to date than the BIC
    code in 2.6.12; it incorporates enhancements from BICTCP 1.1,
    to handle low latency links.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d7bcfc6b8586ee5a52043f061e0411965e71b88
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:22:36 2005 -0700

    [TCP]: Update sysctl and congestion control documentation.
    
    Update the documentation to remove the old sysctl values and
    include the new congestion control infrastructure. Includes
    changes to tcp.txt by Ian McDonald.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 056ede6cface66b400cd3b8e60ed077cc5b85c18
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:21:28 2005 -0700

    [TCP]: Report congestion control algorithm in tcp_diag.
    
    Enhancement to the tcp_diag interface used by the iproute2 ss command
    to report the tcp congestion control being used by a socket.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c99c909fa69a183c1b80bd64fb9f0d11459aff3
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:20:36 2005 -0700

    [TCP]: Change tcp_diag to use the existing __RTA_PUT() macro.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 317a76f9a44b437d6301718f4e5d08bd93f98da7
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Jun 23 12:19:55 2005 -0700

    [TCP]: Add pluggable congestion control algorithm infrastructure.
    
    Allow TCP to have multiple pluggable congestion control algorithms.
    Algorithms are defined by a set of operations and can be built in
    or modules.  The legacy "new RENO" algorithm is used as a starting
    point and fallback.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8ad86f2dc46356f87be1327dabc18bdbda32f50
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Thu Jun 23 14:23:35 2005 +0100

    [PATCH] Add removal schedule of register_serial/unregister_serial to appropriate file

commit 4749f32da939d4e4160541b2cadc22492bb507ec
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 23 11:36:56 2005 +0200

    [PATCH] better USB_MON dependencies
    
    This makes the USB_MON less confusing.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24665cd00dd06c741ef6268515ca9e6d3cda5c57
Merge: fed2fc1... d7152fe...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 09:49:55 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit fed2fc18a4567d613cd35115322257c6c6c710e9
Author: Telemaque Ndizihiwe <telendiz@eircom.net>
Date:   Thu Jun 23 00:10:33 2005 -0700

    [PATCH] sys_open() cleanup
    
    Clean up tortured logic in sys_open().
    
    Signed-off-by: Telemaque Ndizihiwe <telendiz@eircom.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64ccd715d3cf498318b14b646ce5f97e7ab15bb5
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jun 23 00:10:33 2005 -0700

    [PATCH] Convert users to tty_unregister_ldisc()
    
    tty_register_ldisc(N_FOO, NULL) => tty_unregister_ldisc(N_FOO)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfb07599da289881d3bcbb601a110e997fc7444b
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jun 23 00:10:32 2005 -0700

    [PATCH] Introduce tty_unregister_ldisc()
    
    It's a bit strange to see tty_register_ldisc call in modules' exit
    functions.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 790a19cd5711133f40daad7c55bf148de2b1d12c
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 00:10:31 2005 -0700

    [PATCH] pwc-uncompress warning fix
    
    drivers/usb/media/pwc/pwc-uncompress.c: In function `pwc_decompress':
    drivers/usb/media/pwc/pwc-uncompress.c:140: warning: unreachable code at beginning of switch statement
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9235e68be8bf8974b65a9bf733c9d12a52307839
Author: Eric Piel <Eric.Piel@tremplin-utc.net>
Date:   Thu Jun 23 00:10:29 2005 -0700

    [PATCH] IDE CD reports current speed
    
    The current ide-cd driver reports the CDROM speed (as found in
    /proc/sys/dev/cdrom/info) as the current speed when loading the driver.
    Changing the speed of the cdrom drive (by "eject -x" for instance) doesn't
    update the speed reported by the kernel.  Updating the info could be
    valuable for the user as it's the only way to know if the drive accepted
    the request or discarded it.  It could even be used to list all the
    available speeds of the drive.
    
    The attached patch modifies the ide-cd driver so that after every speed
    change request the new speed is updated.  Please note that the actual
    modification is very little but I had to touch quite a few lines in order
    to avoid to pre-declare the sub-functions.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 451512f3aed64573e912e68c94f240fec0e44438
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 23 00:10:28 2005 -0700

    [PATCH] add note about verify_area removal to feature-removal-schedule.txt
    
    Add note about the soon-to-come removal of verify_area() to
    Documentation/feature-removal-schedule.txt.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c43dc2fd885b5658cfd7cedb7bcca20910c517a4
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Thu Jun 23 00:10:27 2005 -0700

    [PATCH] aio: make wait_queue ->task ->private
    
    In the upcoming aio_down patch, it is useful to store a private data
    pointer in the kiocb's wait_queue.  Since we provide our own wake up
    function and do not require the task_struct pointer, it makes sense to
    convert the task pointer into a generic private pointer.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63e6880918e75dcb92d60aff218a76e063a471ef
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Thu Jun 23 00:10:27 2005 -0700

    [PATCH] aio: fix do_sync_(read|write) to properly handle aio retries
    
    When do_sync_(read|write) encounters an aio method that makes use of the
    retry mechanism, they fail to correctly retry the operation.  This fixes
    that by adding the appropriate sleep and retry mechanism.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4452ea509e29df2f019bed2f7a1e0f5eea092b26
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 00:10:26 2005 -0700

    [PATCH] dpt_i2o: fix waitqueue abuse
    
    The driver plays with waitqueue internals and fails to compile after Ben's
    "aio: make wait_queue ->task ->private" patch.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 152becd26e0563aefdbc4fd1fe491928efe92d1f
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Thu Jun 23 00:10:21 2005 -0700

    [PATCH] Bug in error recovery in fs/buffer.c::__block_prepare_write()
    
    fs/buffer.c::__block_prepare_write() has broken error recovery.  It calls
    the get_block() callback with "create = 1" and if that succeeds it
    immediately clears buffer_new on the just allocated buffer (which has
    buffer_new set).
    
    The bug is that if an error occurs and get_block() returns != 0, we break
    from this loop and go into recovery code.  This code has this comment:
    
    /* Error case: */
    /*
     * Zero out any newly allocated blocks to avoid exposing stale
     * data.  If BH_New is set, we know that the block was newly
     * allocated in the above loop.
     */
    
    So the intent is obviously good in that it wants to clear just allocated
    and hence not zeroed buffers.  However the code recognises allocated
    buffers by checking for buffer_new being set.
    
    Unfortunately __block_prepare_write() as discussed above already cleared
    buffer_new on all allocated buffers thus no buffers will be cleared during
    error recovery and old data will be leaked.
    
    The simplest way I can see to fix this is to make the current recovery code
    work by _not_ clearing buffer_new after calling get_block() in
    __block_prepare_write().
    
    We cannot safely allow buffer_new buffers to "leak out" of
    __block_prepare_write(), thus we simply do a quick loop over the buffers
    clearing buffer_new on each of them if it is set just before returning
    "success" from __block_prepare_write().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a59f452abe11f569e13ec16c51e6d61c54b9838
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:10:19 2005 -0700

    [PATCH] remove <linux/xattr_acl.h>
    
    This file duplicates <linux/posix_acl_xattr.h>, using slightly different
    names.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9fd27a253d5e0b23531d12ce7ad15b6535d4486
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:10:19 2005 -0700

    [PATCH] acl endianess annotations
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30aaa80885df5d1518d498a450e73282cea8d8b1
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Thu Jun 23 00:10:18 2005 -0700

    [PATCH] use drivers/Kconfig for sparc32
    
    Kconfig is spitting out massive numbers of errors and so on.  This patch
    switches arch/sparc/Kconfig to use drivers/Kconfig so those stop.
    
    Signed-off-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45778ca819accab1a4a3378b3566cab0f189164f
Author: Christoph Lameter <christoph@graphe.net>
Date:   Thu Jun 23 00:10:17 2005 -0700

    [PATCH] Remove f_error field from struct file
    
    The following patch removes the f_error field and all checks of f_error.
    
    Trond said:
    
      f_error was introduced for NFS, and made sense when we were guaranteed
      always to have a file pointer around when write errors occurred.  Since
      then, we have (for various reasons) had to introduce the nfs_open_context in
      order to track the file read/write state, and it made sense to move our
      f_error tracking there too.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 280dedb8d64ccfe1166ae03d3b254fc3b65de6a5
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jun 23 00:10:16 2005 -0700

    [PATCH] PCDP: handle tables that don't supply baud rate
    
    The HCDP specs (i.e., PCDP revision < 3) allow zero as a default value for
    baud rate and data bits.  So if firmware doesn't supply them, let
    early_serial_console_init() probe for them rather than telling it the baud
    rate is zero.
    
    Also, update the URL for the PCDP spec.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb93e3a52f8db7210258a1a2134cced0b78a46e1
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 00:10:15 2005 -0700

    [PATCH] block: add unlocked_ioctl support for block devices
    
    This patch allows block device drivers to convert their ioctl functions to
    unlocked_ioctl() like character devices and other subsystems.  All
    functions that were called with the BKL held before are still used that
    way, but I would not be surprised if it could be removed from the ioctl
    functions in drivers/block/ioctl.c themselves.
    
    As a side note, I found that compat_blkdev_ioctl() acquires the BKL as
    well, which looks like a bug.  I have checked that every user of
    disk->fops->compat_ioctl() in the current git tree gets the BKL itself, so
    it could easily be removed from compat_blkdev_ioctl().
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d77e5a2c23da734f5a7925f64afa1c2ed92e0f9
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Jun 23 00:10:14 2005 -0700

    [PATCH] compat: introduce compat_time_t
    
    This patch is based on work by Carlos O'Donell and Matthew Wilcox.  It
    introduces/updates the compat_time_t type and uses it for compat siginfo
    structures.  I have built this on ppc64 and x86_64.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa912bcb06d5dc9525d8912a145db2bf4b7668c5
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Jun 23 00:10:12 2005 -0700

    [PATCH] yenta TI: turn off interrupts during card power-on #2
    
    - make boot-up card recognition more reliable (ie.  redo interrogation
      always if there is no valid 'card inserted' state) (and yes, i saw it
      happening on an o2micro controller that both CB_CBARD and CB_16BITCARD
      bits were set at the same time)
    
    - also redo interrogation before probing the ISA interrupts.  it's safer
      to do the probing with the socket in a clean state.
    
    - make card insert detect more reliable.  yenta_get_status() now returns
      SS_PENDING as long as the card is not completley inserted and one of the
      voltage bits is set.  also !CB_CBARD doesn't mean CB_16BITCARD.  there is
      CB_NOTACARD as well, so make an explicit check for CB_16BITCARD.
    
    - for TI bridges: disable IRQs during power-on.  in all-serial and tied
      interrupt mode the interrupts are always disabled for single-slot
      controllers.  for two-slot contollers the disabling is only done when the
      other slot is empty.  to force disabling there is a new module parameter
      now: pwr_irqs_off=Y (which is a regression for working setups.  that's
      why it's an option, only use when required)
    
    - modparm to disable ISA interrupt probing (isa_probe, defaults to on)
    
    - remove unneeded code/cleanups (ie.  merge yenta_events() into
      yenta_interrupts())
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7007cab53176dc906e67b4efa62f20ff1432805a
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Thu Jun 23 00:10:09 2005 -0700

    [PATCH] Add offset.h to dontdiff
    
    include/asm/offset.h is a generated file on x86_64 and mips.  Let's add it
    to Documentation/dontdiff.
    
    Signed-off-by: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9ad7ef1979d65a4200847ec91be5b9ad961eba8
Author: TINNES Julien <julien.tinnes@francetelecom.com>
Date:   Thu Jun 23 00:10:08 2005 -0700

    [PATCH] Potential null pointer dereference in amiga serial driver
    
    A pointer is dereferenced before it is null-checked.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17abee3d50685b8ef4e38d37abacf8b650a3a387
Author: Thierry Vignaud <tvignaud@mandriva.com>
Date:   Thu Jun 23 00:10:07 2005 -0700

    [PATCH] gconfig: only show scrollbars if needed
    
    gconfig: only show scrollbars if needed (which is more user friendly):
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b78755abcdf1d7667c51580a3783e16e981ed926
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Thu Jun 23 00:10:06 2005 -0700

    [PATCH] ipcsem: remove superflous decrease variable from sys_semtimedop
    
    Patrick noticed that the initial scan of the semaphore operations logs
    decrease and increase operations seperately, but then both cases are or'ed
    together and decrease is never used.  The attached patch removes the
    decrease parameter - it shrinks sys_semtimedop() by 56 bytes.
    
    Signed-Of-By: Manfred Spraul <manfred@colorfullife.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0030cbf06c669b65e124414af51b5010fc53b760
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Jun 23 00:10:05 2005 -0700

    [PATCH] Turn off sibling call optimization w/ frame pointers
    
    Frame pointers are supposed to enable debuggers to reliably tell where a
    call comes from.  That is defeated by GCC's sibling call optimization (aka
    tail recursion elimination).
    
    This patch turns this optimization off when compiling with frame pointers.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71a2224d7d1cefc23a1ac80bba421cc069cc3257
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jun 23 00:10:05 2005 -0700

    [PATCH] Optimize sys_times for a single thread process
    
    Avoid taking the tasklist_lock in sys_times if the process is single
    threaded.  In a NUMA system taking the tasklist_lock may cause a bouncing
    cacheline if multiple independent processes continually call sys_times to
    measure their performance.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b030a4dd609e167da7f73c2d1fa5af864a0aea17
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Jun 23 00:10:03 2005 -0700

    [PATCH] Remove eventpoll macro obfuscation
    
    This patch gets rid of some macro obfuscation from fs/eventpoll.c by
    removing slab allocator wrappers and converting macros to static inline
    functions.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Acked-by: Davide Libenzi <davidel@xmailserver.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46c271bedd2c8444b1d05bc44928beec0c07debc
Author: Peter Osterlund <petero2@telia.com>
Date:   Thu Jun 23 00:10:02 2005 -0700

    [PATCH] Improve CD/DVD packet driver write performance
    
    This patch improves write performance for the CD/DVD packet writing driver.
     The logic for switching between reading and writing has been changed so
    that streaming writes are no longer interrupted by read requests.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfb388bf8a328f206bba33933dd97230f412238b
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Thu Jun 23 00:10:02 2005 -0700

    [PATCH] factor out common code in sys_fsync/sys_fdatasync
    
    This patch consolidates sys_fsync and sys_fdatasync.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01890a4c120f68366441bf5e193d1b9dd543d4d0
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Thu Jun 23 00:10:01 2005 -0700

    [PATCH] mempool - only init waitqueue in slow path
    
    Here's a small patch to improve the performance of mempool_alloc by only
    initializing the wait queue when we're about to wait.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8476994af7bd9352ecdf61ba760f7397f54e30a1
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:10:00 2005 -0700

    [PATCH] apply quotation handling to Makefile.build
    
    Adding quotation handling to rule_cc_o_c in scripts/Makefile.build as used
    elsewhere.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11c80c8367db0a9d342529ed74464670cd86a1f6
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:09:59 2005 -0700

    [PATCH] adjust per_cpu definition in non-SMP case
    
    Fix (in the architectures I'm actually building for) the UP definition of
    per_cpu so that the cpu specified may be any expression, not just an
    identifier or a suffix expression.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7ea4b31fd962b4baadb42c0b8d7c6851c584102
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:09:59 2005 -0700

    [PATCH] ide-floppy adjustments
    
    Fix a build problem when IDEFLOPPY_DEBUG_BUGS is turned off, and eliminate an
    access to memory that is no longer allocated (causing systems to fail booting
    when CONFIG_DEBUG_PAGEALLOC is turned on).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef3daeda7b58f046f94b26637d500354038d39f4
Author: Yoav Zach <yoav_zach@yahoo.com>
Date:   Thu Jun 23 00:09:58 2005 -0700

    [PATCH] Don't force O_LARGEFILE for 32 bit processes on ia64
    
    In ia64 kernel, the O_LARGEFILE flag is forced when opening a file.  This
    is problematic for execution of 32 bit processes, which are not largefile
    aware, either by SW emulation or by HW execution.
    
    For such processes, the problem is two-fold:
    
    1) When trying to open a file that is larger than 4G
       the operation should fail, but it's not
    2) Writing to offset larger than 4G should fail, but
       it's not
    
    The proposed patch takes advantage of the way 32 bit processes are
    identified in ia64 systems.  Such processes have PER_LINUX32 for their
    personality.  With the patch, the ia64 kernel will not enforce the
    O_LARGEFILE flag if the current process has PER_LINUX32 set.  The behavior
    for all other architectures remains unchanged.
    
    Signed-off-by: Yoav Zach <yoav.zach@intel.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44e58a6a0bd604f46be9d808408a1cd880cc9b19
Author: Martin Schitter <ms@gewi.kfunigraz.ac.at>
Date:   Thu Jun 23 00:09:55 2005 -0700

    [PATCH] parport: NetMos nm9855 fix
    
    kernel 2.6.12-rc2 adopted some code by Bjorn Helgaas supporting NetMos combo
    controller cards. this implementation doesn't work for nm9855 based cards!
    
    there are two reasons:
    
    a) the module 'parport_pc' doesn't want to give the resonsibility for
       the netmos_9855 to 'parport_serial' and can not handle the serial lines
       -- trivial to fix...
    
       http://lists.infradead.org/pipermail/linux-parport/2005-February/000250.html
       http://lkml.org/lkml/2005/3/24/199 b) the support for the nm9855 in
    
       'parport_serial' still doesn't work because of wrong assumptions about
       the relevant BARs port address layout for this chip:
    
    	 0000:00:09.0 Communication controller:
             	      NetMos Technology PCI 9855
             	      Multi-I/O Controller (rev 01)
    	 	      (= 9710:9855)
             Subsystem: LSI Logic / Symbios Logic 1P4S (= 1000:0014)
      	 Flags: medium devsel, IRQ 177
    	 I/O ports at a800 [size=8]  (= parport)
    	 I/O ports at a400 [size=8]
    	 I/O ports at a000 [size=8]  (= serial)
    	 I/O ports at 9800 [size=8]  (= serial)
    	 I/O ports at 9400 [size=8]  (= serial)
    	 I/O ports at 9000 [size=16] (= serial)
    
    the following patch will fix the problem.
    
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 328007b70c8e99c62eef5bc310d8a21d0e937342
Author: Pat Gefre <pfg@sgi.com>
Date:   Thu Jun 23 00:09:54 2005 -0700

    [PATCH] Altix: shut off xmit intr if done xmitting
    
    Small mod to shut off the xmit interrupt if we have nothing to transmit.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 618f06362ae3f60f95d7b0e666de25ee6ae35679
Author: Kirill Korotaev <dev@sw.ru>
Date:   Thu Jun 23 00:09:54 2005 -0700

    [PATCH] O(1) sb list traversing on syncs
    
    This patch removes O(n^2) super block loops in sync_inodes(),
    sync_filesystems() etc.  in favour of using __put_super_and_need_restart()
    which I introduced earlier.  We faced a noticably long freezes on sb
    syncing when there are thousands of super blocks in the system.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fea2838aa00b9e59efde974dcdb455608192811
Author: Kirill Korotaev <dev@sw.ru>
Date:   Thu Jun 23 00:09:51 2005 -0700

    [PATCH] Software suspend and recalc sigpending bug fix
    
    This patch fixes recalc_sigpending() to work correctly with tasks which are
    being freezed.
    
    The problem is that freeze_processes() sets PF_FREEZE and TIF_SIGPENDING
    flags on tasks, but recalc_sigpending() called from e.g.
    sys_rt_sigtimedwait or any other kernel place will clear TIF_SIGPENDING due
    to no pending signals queued and the tasks won't be freezed until it
    recieves a real signal or freezed_processes() fail due to timeout.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af4d2ecbf007b7df3db7a41eedccdc05b8006d0b
Author: Kirill Korotaev <dev@sw.ru>
Date:   Thu Jun 23 00:09:50 2005 -0700

    [PATCH] Fix of bogus file max limit messages
    
    This patch fixes incorrect and bogus kernel messages that file-max limit
    reached when the allocation fails
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Denis Lunev <den@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c663e5d80ebec426916ad2aa5400c7ec99aa572e
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:09:49 2005 -0700

    [PATCH] add some comments to lookup_create()
    
    In a duplicate of lookup_create in the af_unix code Al commented what's
    going on nicely, so let's bring that over to lookup_create before the copy
    is going away (I'll send a patch soon)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70f09f1fdf38cd7fca39913978d18cf998ab2c80
Author: Alexey Dobriyan <adobriyan@mail.ru>
Date:   Thu Jun 23 00:09:47 2005 -0700

    [PATCH] Document the fact that linux-arm-kernel is subscribers-only.
    
    "Non-members are not allowed to post messages to this list.  Blame the
    original poster for cross-posting to subscriber-only mailing lists.  "
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acfa1823d33859b0db77701726c9ca5ccc6e6f25
Author: Andreas Dilger <adilger@clusterfs.com>
Date:   Thu Jun 23 00:09:45 2005 -0700

    [PATCH] Support for dx directories in ext3_get_parent (NFSD)
    
    Henrik Grubbstrom noted:
    
    The 2.6.10 ext3_get_parent attempts to use ext3_find_entry to look up the
    entry "..", which fails for dx directories since ".." is not present in the
    directory hash table.  The patch below solves this by looking up the dotdot
    entry in the dx_root block.
    
    Typical symptoms of the above bug are intermittent claims by nfsd that
    files or directories are missing on exported ext3 filesystems.
    
    cf https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=3D150759 and
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=3D144556
    
    ext3_get_parent() is IMHO the wrong place to fix this bug as it introduces
    a lot of internals from htree into that function.  Instead, I think this
    should be fixed in ext3_find_entry() as in the below patch.  This has the
    added advantage that it works for any callers of ext3_find_entry() and not
    just ext3_lookup_parent().
    
    Signed-off-by: Andreas Dilger <adilger@clusterfs.com>
    Signed-off-by: Henrik Grubbstrom <grubba@grubba.org>
    Cc: <ext2-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6e711448137ca3301512cec41a2c2ce852b3d0a
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Jun 23 00:09:43 2005 -0700

    [PATCH] setuid core dump
    
    Add a new `suid_dumpable' sysctl:
    
    This value can be used to query and set the core dump mode for setuid
    or otherwise protected/tainted binaries. The modes are
    
    0 - (default) - traditional behaviour.  Any process which has changed
        privilege levels or is execute only will not be dumped
    
    1 - (debug) - all processes dump core when possible.  The core dump is
        owned by the current user and no security is applied.  This is intended
        for system debugging situations only.  Ptrace is unchecked.
    
    2 - (suidsafe) - any binary which normally would not be dumped is dumped
        readable by root only.  This allows the end user to remove such a dump but
        not access it directly.  For security reasons core dumps in this mode will
        not overwrite one another or other files.  This mode is appropriate when
        adminstrators are attempting to debug problems in a normal environment.
    
    (akpm:
    
    > > +EXPORT_SYMBOL(suid_dumpable);
    >
    > EXPORT_SYMBOL_GPL?
    
    No problem to me.
    
    > >  	if (current->euid == current->uid && current->egid == current->gid)
    > >  		current->mm->dumpable = 1;
    >
    > Should this be SUID_DUMP_USER?
    
    Actually the feedback I had from last time was that the SUID_ defines
    should go because its clearer to follow the numbers. They can go
    everywhere (and there are lots of places where dumpable is tested/used
    as a bool in untouched code)
    
    > Maybe this should be renamed to `dump_policy' or something.  Doing that
    > would help us catch any code which isn't using the #defines, too.
    
    Fair comment. The patch was designed to be easy to maintain for Red Hat
    rather than for merging. Changing that field would create a gigantic
    diff because it is used all over the place.
    
    )
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b0914ea7475615c7c8965c1ac8fe4069270f25c
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:41 2005 -0700

    [PATCH] jprobes: allow a jprobe to coexist with muliple kprobes
    
    Presently either multiple kprobes or only one jprobe could be inserted.
    This patch removes the above limitation and allows one jprobe and multiple
    kprobes to coexist at the same address.  However multiple jprobes cannot
    coexist with multiple kprobes.  Currently I am working on the prototype to
    allow multiple jprobes coexist with multiple kprobes.
    
    Signed-off-by: Ananth N Mavinakayanhalli <amavin@redhat.com>
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 852caccc89d3883522e87a91bfa89fd9c9cfe15a
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:40 2005 -0700

    [PATCH] Kprobes/ia64: temporary disarming of reentrant probe
    
    This patch includes IA64 architecture specific changes(ported form i386) to
    support temporary disarming on reentrancy of probes.
    
    In case of reentrancy we single step without calling user handler.
    
    Signed-of-by: Anil S Keshavamurth <anil.s.keshavamurthy@intel.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e539c2331414e73a5a1b79fb57369d79447c1cf8
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:39 2005 -0700

    [PATCH] kprobes: Temporary disarming of reentrant probe for sparc64
    
    This patch includes sparc64 architecture specific changes to support temporary
    disarming on reentrancy of probes.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42cc20600a3450efcf1f724fa3891ffbff4fcb2b
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:38 2005 -0700

    [PATCH] kprobes: Temporary disarming of reentrant probe for ppc64
    
    This patch includes ppc64 architecture specific changes to support temporary
    disarming on reentrancy of probes.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa3d7e3d782bbcf567b1da6101d8fbff7cf7e7a6
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:37 2005 -0700

    [PATCH] kprobes: Temporary disarming of reentrant probe for x86_64
    
    This patch includes x86_64 architecture specific changes to support temporary
    disarming on reentrancy of probes.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 417c8da6511b54843e6b557d94d8112d80e32156
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:37 2005 -0700

    [PATCH] kprobes: Temporary disarming of reentrant probe for i386
    
    This patch includes i386 architecture specific changes to support temporary
    disarming on reentrancy of probes.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea32c65cc2d2294c04e9f81d0578a6f51febfdbf
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Jun 23 00:09:36 2005 -0700

    [PATCH] kprobes: Temporary disarming of reentrant probe
    
    In situations where a kprobes handler calls a routine which has a probe on it,
    then kprobes_handler() disarms the new probe forever.  This patch removes the
    above limitation by temporarily disarming the new probe.  When the another
    probe hits while handling the old probe, the kprobes_handler() saves previous
    kprobes state and handles the new probe without calling the new kprobes
    registered handlers.  kprobe_post_handler() restores back the previous kprobes
    state and the normal execution continues.
    
    However on x86_64 architecture, re-rentrancy is provided only through
    pre_handler().  If a routine having probe is referenced through
    post_handler(), then the probes on that routine are disarmed forever, since
    the exception stack is gets changed after the processor single steps the
    instruction of the new probe.
    
    This patch includes generic changes to support temporary disarming on
    reentrancy of probes.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89cb14c0dd0e4a7d0315d19f449389c4d49237ee
Author: Keshavamurthy Anil S <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:35 2005 -0700

    [PATCH] Kprobes/IA64: check jprobe break before handling
    
    Once the jprobe instrumented function returns, it executes a jprobe_break
    which is a break instruction with __IA64_JPROBE_BREAK value.  The current
    patch checks for this break value, before assuming that jprobe instrumented
    function just completed.
    
    The previous code was not checking for this value and that was a bug.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 708de8f11c2901cc49fd7725baf4a0fbd7264e73
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:34 2005 -0700

    [PATCH] Kprobes IA64: safe register kprobe
    
    The current kprobes does not yet handle register kprobes on some of the
    following kind of instruction which needs to be emulated in a special way.
    
    1) mov r1=ip
    2) chk -- Speculation check instruction
    
    This patch attempts to fail register_kprobes() when user tries to insert
    kprobes on the above kind of instruction.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1674eafcbd3e3c68556cf19fbf4a2c30f7add729
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:33 2005 -0700

    [PATCH] Kprobes IA64: cmp ctype unc support
    
    The current Kprobes when patching the original instruction with the break
    instruction tries to retain the original qualifying predicate(qp), however
    for cmp.crel.ctype where ctype == unc, which is a special instruction
    always needs to be executed irrespective of qp.  Hence, if the instruction
    we are patching is of this type, then we should not copy the original qp to
    the break instruction, this is because we always want the break fault to
    happen so that we can emulate the instruction.
    
    This patch is based on the feedback given by David Mosberger
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5403183d84d419651672f1aee5ff2273d185efa
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:32 2005 -0700

    [PATCH] Kprobes IA64: arch_prepare_kprobes() cleanup
    
    arch_prepare_kprobes() was doing lots of functionality
    in just one single function. This patch
    attempts to clean up arch_prepare_kprobes() by moving
    specific sub task to the following (new)functions
    1)valid_kprobe_addr() -->> validate the given kprobe address
    2)get_kprobe_inst(slot..)->> Retrives the instruction for a given slot from the bundle
    3)prepare_break_inst() -->> Prepares break instruction within the bundle
    	3a)update_kprobe_inst_flag()-->>Updates the internal flags, required
    			for proper emulation of the instruction at later
    			point in time.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13608d6433eb34840224ef632cc444f3eb59bc13
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Thu Jun 23 00:09:31 2005 -0700

    [PATCH] Kprobes ia64 qp fix
    
    Fix a bug where a kprobe still fires when the instruction is predicated
    off.  So given the p6=0, and we have an instruction like:
    
    (p6) move loc1=0
    
    we should not be triggering the kprobe.  This is handled by carrying over
    the qp section of the original instruction into the break instruction.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Rusty Lynch <Rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bc76772ad653bcaad1b0af72aafb6072ef0fa87
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Thu Jun 23 00:09:30 2005 -0700

    [PATCH] Kprobes ia64 cleanup
    
    A cleanup of the ia64 kprobes implementation such that all of the bundle
    manipulation logic is concentrated in arch_prepare_kprobe().
    
    With the current design for kprobes, the arch specific code only has a
    chance to return failure inside the arch_prepare_kprobe() function.
    
    This patch moves all of the work that was happening in arch_copy_kprobe()
    and most of the work that was happening in arch_arm_kprobe() into
    arch_prepare_kprobe().  By doing this we can add further robustness checks
    in arch_arm_kprobe() and refuse to insert kprobes that will cause problems.
    
    Signed-off-by: Rusty Lynch <Rusty.lynch@intel.com>
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd2675bf65455a45b54228b7acc0c6a26a164cb6
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:29 2005 -0700

    [PATCH] Kprobes/IA64: support kprobe on branch/call instructions
    
    This patch is required to support kprobe on branch/call instructions.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2761dc262b428475890fffd979687051beb12ba
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:28 2005 -0700

    [PATCH] Kprobes/IA64: architecture specific JProbes support
    
    This patch adds IA64 architecture specific JProbes support on top of Kprobes
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Rusty Lynch <Rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd7b231ff98578308d8f5fb76a25a369ce1074ae
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:28 2005 -0700

    [PATCH] Kprobes/IA64: arch specific handling
    
    This is an IA64 arch specific handling of Kprobes
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Rusty Lynch <Rusty.lynch@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7213b2521889eb087eed8abaa48d1a692575da3e
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Thu Jun 23 00:09:27 2005 -0700

    [PATCH] Kprobes/IA64: kdebug die notification mechanism
    
    As many of you know that kprobes exist in the main line kernel for various
    architecture including i386, x86_64, ppc64 and sparc64.  Attached patches
    following this mail are a port of Kprobes and Jprobes for IA64.
    
    I have tesed this patches for kprobes and Jprobes and this seems to work fine.
     I have tested this patch by inserting kprobes on various slots and various
    templates including various types of branch instructions.
    
    I have also tested this patch using the tool
    http://marc.theaimsgroup.com/?l=linux-kernel&m=111657358022586&w=2 and the
    kprobes for IA64 works great.
    
    Here is list of TODO things and pathes for the same will appear soon.
    
    1) Support kprobes on "mov r1=ip" type of instruction
    2) Support Kprobes and Jprobes to exist on the same address
    3) Support Return probes
    3) Architecture independent cleanup of kprobes
    
    This patch adds the kdebug die notification mechanism needed by Kprobes.
    
    For break instruction on Branch type slot, imm21 is ignored and value
    zero is placed in IIM register, hence we need to handle kprobes
    for switch case zero.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Rusty Lynch <Rusty.lynch@intel.com>
    
    From: Rusty Lynch <rusty.lynch@intel.com>
    
    At the point in traps.c where we recieve a break with a zero value, we can
    not say if the break was a result of a kprobe or some other debug facility.
    
    This simple patch changes the informational string to a more correct "break
    0" value, and applies to the 2.6.12-rc2-mm2 tree with all the kprobes
    patches that were just recently included for the next mm cut.
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0aa55e4d7db822059fe8132fe9f2b7773c48216c
Author: Hien Nguyen <hien@us.ibm.com>
Date:   Thu Jun 23 00:09:26 2005 -0700

    [PATCH] kprobes: moves lock-unlock to non-arch kprobe_flush_task
    
    This patch moves the lock/unlock of the arch specific kprobe_flush_task()
    to the non-arch specific kprobe_flusk_task().
    
    Signed-off-by: Hien Nguyen <hien@us.ibm.com>
    Acked-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e1048b11c5afe79aac46a42e3ccec86b8365c6d
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Thu Jun 23 00:09:25 2005 -0700

    [PATCH] Move kprobe [dis]arming into arch specific code
    
    The architecture independent code of the current kprobes implementation is
    arming and disarming kprobes at registration time.  The problem is that the
    code is assuming that arming and disarming is a just done by a simple write
    of some magic value to an address.  This is problematic for ia64 where our
    instructions look more like structures, and we can not insert break points
    by just doing something like:
    
    *p->addr = BREAKPOINT_INSTRUCTION;
    
    The following patch to 2.6.12-rc4-mm2 adds two new architecture dependent
    functions:
    
         * void arch_arm_kprobe(struct kprobe *p)
         * void arch_disarm_kprobe(struct kprobe *p)
    
    and then adds the new functions for each of the architectures that already
    implement kprobes (spar64/ppc64/i386/x86_64).
    
    I thought arch_[dis]arm_kprobe was the most descriptive of what was really
    happening, but each of the architectures already had a disarm_kprobe()
    function that was really a "disarm and do some other clean-up items as
    needed when you stumble across a recursive kprobe." So...  I took the
    liberty of changing the code that was calling disarm_kprobe() to call
    arch_disarm_kprobe(), and then do the cleanup in the block of code dealing
    with the recursive kprobe case.
    
    So far this patch as been tested on i386, x86_64, and ppc64, but still
    needs to be tested in sparc64.
    
    Signed-off-by: Rusty Lynch <rusty.lynch@intel.com>
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73649dab0fd524cb8545a8cb83c6eaf77b107105
Author: Rusty Lynch <rusty.lynch@intel.com>
Date:   Thu Jun 23 00:09:23 2005 -0700

    [PATCH] x86_64 specific function return probes
    
    The following patch adds the x86_64 architecture specific implementation
    for function return probes.
    
    Function return probes is a mechanism built on top of kprobes that allows
    a caller to register a handler to be called when a given function exits.
    For example, to instrument the return path of sys_mkdir:
    
    static int sys_mkdir_exit(struct kretprobe_instance *i, struct pt_regs *regs)
    {
    	printk("sys_mkdir exited\n");
    	return 0;
    }
    static struct kretprobe return_probe = {
    	.handler = sys_mkdir_exit,
    };
    
    <inside setup function>
    
    return_probe.kp.addr = (kprobe_opcode_t *) kallsyms_lookup_name("sys_mkdir");
    if (register_kretprobe(&return_probe)) {
    	printk(KERN_DEBUG "Unable to register return probe!\n");
    	/* do error path */
    }
    
    <inside cleanup function>
    unregister_kretprobe(&return_probe);
    
    The way this works is that:
    
    * At system initialization time, kernel/kprobes.c installs a kprobe
      on a function called kretprobe_trampoline() that is implemented in
      the arch/x86_64/kernel/kprobes.c  (More on this later)
    
    * When a return probe is registered using register_kretprobe(),
      kernel/kprobes.c will install a kprobe on the first instruction of the
      targeted function with the pre handler set to arch_prepare_kretprobe()
      which is implemented in arch/x86_64/kernel/kprobes.c.
    
    * arch_prepare_kretprobe() will prepare a kretprobe instance that stores:
      - nodes for hanging this instance in an empty or free list
      - a pointer to the return probe
      - the original return address
      - a pointer to the stack address
    
      With all this stowed away, arch_prepare_kretprobe() then sets the return
      address for the targeted function to a special trampoline function called
      kretprobe_trampoline() implemented in arch/x86_64/kernel/kprobes.c
    
    * The kprobe completes as normal, with control passing back to the target
      function that executes as normal, and eventually returns to our trampoline
      function.
    
    * Since a kprobe was installed on kretprobe_trampoline() during system
      initialization, control passes back to kprobes via the architecture
      specific function trampoline_probe_handler() which will lookup the
      instance in an hlist maintained by kernel/kprobes.c, and then call
      the handler function.
    
    * When trampoline_probe_handler() is done, the kprobes infrastructure
      single steps the original instruction (in this case just a top), and
      then calls trampoline_post_handler().  trampoline_post_handler() then
      looks up the instance again, puts the instance back on the free list,
      and then makes a long jump back to the original return instruction.
    
    So to recap, to instrument the exit path of a function this implementation
    will cause four interruptions:
    
      - A breakpoint at the very beginning of the function allowing us to
        switch out the return address
      - A single step interruption to execute the original instruction that
        we replaced with the break instruction (normal kprobe flow)
      - A breakpoint in the trampoline function where our instrumented function
        returned to
      - A single step interruption to execute the original instruction that
        we replaced with the break instruction (normal kprobe flow)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b94cce926b2b902b79380ccba370d6f9f2980de0
Author: Hien Nguyen <hien@us.ibm.com>
Date:   Thu Jun 23 00:09:19 2005 -0700

    [PATCH] kprobes: function-return probes
    
    This patch adds function-return probes to kprobes for the i386
    architecture.  This enables you to establish a handler to be run when a
    function returns.
    
    1. API
    
    Two new functions are added to kprobes:
    
    	int register_kretprobe(struct kretprobe *rp);
    	void unregister_kretprobe(struct kretprobe *rp);
    
    2. Registration and unregistration
    
    2.1 Register
    
      To register a function-return probe, the user populates the following
      fields in a kretprobe object and calls register_kretprobe() with the
      kretprobe address as an argument:
    
      kp.addr - the function's address
    
      handler - this function is run after the ret instruction executes, but
      before control returns to the return address in the caller.
    
      maxactive - The maximum number of instances of the probed function that
      can be active concurrently.  For example, if the function is non-
      recursive and is called with a spinlock or mutex held, maxactive = 1
      should be enough.  If the function is non-recursive and can never
      relinquish the CPU (e.g., via a semaphore or preemption), NR_CPUS should
      be enough.  maxactive is used to determine how many kretprobe_instance
      objects to allocate for this particular probed function.  If maxactive <=
      0, it is set to a default value (if CONFIG_PREEMPT maxactive=max(10, 2 *
      NR_CPUS) else maxactive=NR_CPUS)
    
      For example:
    
        struct kretprobe rp;
        rp.kp.addr = /* entrypoint address */
        rp.handler = /*return probe handler */
        rp.maxactive = /* e.g., 1 or NR_CPUS or 0, see the above explanation */
        register_kretprobe(&rp);
    
      The following field may also be of interest:
    
      nmissed - Initialized to zero when the function-return probe is
      registered, and incremented every time the probed function is entered but
      there is no kretprobe_instance object available for establishing the
      function-return probe (i.e., because maxactive was set too low).
    
    2.2 Unregister
    
      To unregiter a function-return probe, the user calls
      unregister_kretprobe() with the same kretprobe object as registered
      previously.  If a probed function is running when the return probe is
      unregistered, the function will return as expected, but the handler won't
      be run.
    
    3. Limitations
    
    3.1 This patch supports only the i386 architecture, but patches for
        x86_64 and ppc64 are anticipated soon.
    
    3.2 Return probes operates by replacing the return address in the stack
        (or in a known register, such as the lr register for ppc).  This may
        cause __builtin_return_address(0), when invoked from the return-probed
        function, to return the address of the return-probes trampoline.
    
    3.3 This implementation uses the "Multiprobes at an address" feature in
        2.6.12-rc3-mm3.
    
    3.4 Due to a limitation in multi-probes, you cannot currently establish
        a return probe and a jprobe on the same function.  A patch to remove
        this limitation is being tested.
    
    This feature is required by SystemTap (http://sourceware.org/systemtap),
    and reflects ideas contributed by several SystemTap developers, including
    Will Cohen and Ananth Mavinakayanahalli.
    
    Signed-off-by: Hien Nguyen <hien@us.ibm.com>
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@laposte.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fa389c5eb8c97d621653184d2adf5fdbd4a3167
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:09:16 2005 -0700

    [PATCH] quota: sanitize dentry handling in vfs_quota_on_mount
    
    Use lookup_one_len instead of opencoding a simplified lookup using
    lookup_hash with a fake hash.
    
    Also there's no need anymore for the d_invalidate as we have a completely
    valid dentry now.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84de856ed30c568c2bb7b9ac0679772bd2737d9b
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:09:16 2005 -0700

    [PATCH] quota: consolidate code surrounding vfs_quota_on_mount
    
    Move some code duplicated in both callers into vfs_quota_on_mount
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df164db5fd16888ddbe2a63a47b2f6dda9a428b5
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Thu Jun 23 00:09:13 2005 -0700

    [PATCH] avoid resursive oopses
    
    Prevent recursive faults in do_exit() by leaving the task alone and wait
    for reboot.  This may allow a more graceful shutdown and possibly save the
    original oops.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f45f1a78fbac3cc859ec10c5366e97d20d40fa2
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 23 00:09:12 2005 -0700

    [PATCH] remove duplicate get_dentry functions in various places
    
    Various filesystem drivers have grown a get_dentry() function that's a
    duplicate of lookup_one_len, except that it doesn't take a maximum length
    argument and doesn't check for \0 or / in the passed in filename.
    
    Switch all these places to use lookup_one_len.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac20427ef6aa63da663bdc88b71d16f7394f5e23
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Jun 23 00:09:11 2005 -0700

    [PATCH] add check to /proc/devices read routines
    
    Patch to add check to get_chrdev_list and get_blkdev_list to prevent reads
    of /proc/devices from spilling over the provided page if more than 4096
    bytes of string data are generated from all the registered character and
    block devices in a system
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bc1ee3e8f1c05c0f64a479c6d56eb34a6190599
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Jun 23 00:09:09 2005 -0700

    [PATCH] remove redundant vm_flags clearing from madvise.c
    
    This patch removes redundant VM_ClearReadHint from mm/madvice.c which was
    left there by Prasanna's patch.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be5b4fbd017d12e0d09ea0528a5839ce2ed2c8c8
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 23 00:09:09 2005 -0700

    [PATCH] preempt_count is int - remove cast and don't assign to unsigned type
    
    In kernel/sched.c the return value from preempt_count() is cast to an int.
    That made sense when preempt_count was defined as different types on is not
    needed and should go away.  The patch removes the cast.
    
    In kernel/timer.c the return value from preempt_count() is assigned to a
    variable of type u32 and then that unsigned value is later compared to
    preempt_count().  Since preempt_count() returns an int, an int is what
    should be used to store its return value.  Storing the result in an
    unsigned 32bit integer made a tiny bit of sense back when preempt_count was
    different types on different archs, but no more - let's not play signed vs
    unsigned comparison games when we don't have to.  The patch modifies the
    code to use an int to hold the value.  While I was around that bit of code
    I also made two changes to a nearby (related) printk() - I modified it to
    specify the loglevel explicitly and also broke the line into a few pieces
    to avoid it being longer than 80 chars and clarified the text a bit.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcd497f99a1ef29a7c5e76142965be77e9dacabd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 23 00:09:07 2005 -0700

    [PATCH] streamline preempt_count type across archs
    
    The preempt_count member of struct thread_info is currently either defined
    as int, unsigned int or __s32 depending on arch.  This patch makes the type
    of preempt_count an int on all archs.
    
    Having preempt_count be an unsigned type prevents the catching of
    preempt_count < 0 bugs, and using int on some archs and __s32 on others is
    not exactely "neat" - much nicer when it's just int all over.
    
    A previous version of this patch was already ACK'ed by Robert Love, and the
    only change in this version of the patch compared to the one he ACK'ed is
    that this one also makes sure the preempt_count member is consistently
    commented.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35a82d1a53e1a9ad54efafcc940f9335beaed5c3
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu Jun 23 00:09:06 2005 -0700

    [PATCH] optimise loop driver a bit
    
    Looks like locking can be optimised quite a lot.  Increase lock widths
    slightly so lo_lock is taken fewer times per request.  Also it was quite
    trivial to cover lo_pending with that lock, and remove the atomic
    requirement.  This also makes memory ordering explicitly correct, which is
    nice (not that I particularly saw any mem ordering bugs).
    
    Test was reading 4 250MB files in parallel on ext2-on-tmpfs filesystem (1K
    block size, 4K page size).  System is 2 socket Xeon with HT (4 thread).
    
    intel:/home/npiggin# umount /dev/loop0 ; mount /dev/loop0 /mnt/loop ; /usr/bin/time ./mtloop.sh
    
    Before:
    0.24user 5.51system 0:02.84elapsed 202%CPU (0avgtext+0avgdata 0maxresident)k
    0.19user 5.52system 0:02.88elapsed 198%CPU (0avgtext+0avgdata 0maxresident)k
    0.19user 5.57system 0:02.89elapsed 198%CPU (0avgtext+0avgdata 0maxresident)k
    0.22user 5.51system 0:02.90elapsed 197%CPU (0avgtext+0avgdata 0maxresident)k
    0.19user 5.44system 0:02.91elapsed 193%CPU (0avgtext+0avgdata 0maxresident)k
    
    After:
    0.07user 2.34system 0:01.68elapsed 143%CPU (0avgtext+0avgdata 0maxresident)k
    0.06user 2.37system 0:01.68elapsed 144%CPU (0avgtext+0avgdata 0maxresident)k
    0.06user 2.39system 0:01.68elapsed 145%CPU (0avgtext+0avgdata 0maxresident)k
    0.06user 2.36system 0:01.68elapsed 144%CPU (0avgtext+0avgdata 0maxresident)k
    0.06user 2.42system 0:01.68elapsed 147%CPU (0avgtext+0avgdata 0maxresident)k
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab4af03a4054bd78bcabfb2214c9597201beae35
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Thu Jun 23 00:09:05 2005 -0700

    [PATCH] CON_CONSDEV bit not set correctly on last console
    
    According to include/linux/console.h, CON_CONSDEV flag should be set on
    the last console specified on the boot command line:
    
         86 #define CON_PRINTBUFFER (1)
         87 #define CON_CONSDEV     (2) /* Last on the command line */
         88 #define CON_ENABLED     (4)
         89 #define CON_BOOT        (8)
    
    This does not currently happen if there is more than one console specified
    on the boot commandline.  Instead, it gets set on the first console on the
    command line.  This can cause problems for things like kdb that look for
    the CON_CONSDEV flag to see if the console is valid.
    
    Additionaly, it doesn't look like CON_CONSDEV is reassigned to the next
    preferred console at unregister time if the console being unregistered
    currently has that bit set.
    
    Example (from sn2 ia64):
    
    elilo vmlinuz root=<dev> console=ttyS0 console=ttySG0
    
    in this case, the flags on ttySG console struct will be 0x4 (should be
    0x6).
    
    Attached patch against bk fixes both issues for the cases I looked at.  It
    uses selected_console (which gets incremented for each console specified on
    the command line) as the indicator of which console to set CON_CONSDEV on.
    When adding the console to the list, if the previous one had CON_CONSDEV
    set, it masks it out.  Tested on ia64 and x86.
    
    The problem with the current behavior is it breaks overriding the default from
    the boot line.  In the ia64 case, there may be a global append line defining
    console=a in elilo.conf.  Then you want to boot your kernel, and want to
    override the default by passing console=b on the boot line.  elilo constructs
    the kernel cmdline by starting with the value of the global append line, then
    tacks on whatever else you specify, which puts console=b last.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfe52244e004f5103478966cd88351feb5c50d79
Author: Robert Love <rml@novell.com>
Date:   Thu Jun 23 00:09:04 2005 -0700

    [PATCH] kstrdup: convert a few existing implementations
    
    Convert a bunch of strdup() implementations and their callers to the new
    kstrdup().  A few remain, for example see sound/core, and there are tons of
    open coded strdup()'s around.  Sigh.  But this is a start.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 543537bd922692bc978e2e356fcd8bfc9c2ee7d5
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Thu Jun 23 00:09:02 2005 -0700

    [PATCH] create a kstrdup library function
    
    This patch creates a new kstrdup library function and changes the "local"
    implementations in several places to use this function.
    
    Most of the changes come from the sound and net subsystems.  The sound part
    had already been acknowledged by Takashi Iwai and the net part by David S.
    Miller.
    
    I left UML alone for now because I would need more time to read the code
    carefully before making changes there.
    
    Signed-off-by: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 991114c6fa6a21d1fa4d544abe78592352860c82
Author: Al Viro <aviro@redhat.com>
Date:   Thu Jun 23 00:09:01 2005 -0700

    [PATCH] fix for prune_icache()/forced final iput() races
    
    Based on analysis and a patch from Russ Weight <rweight@us.ibm.com>
    
    There is a race condition that can occur if an inode is allocated and then
    released (using iput) during the ->fill_super functions.  The race
    condition is between kswapd and mount.
    
    For most filesystems this can only happen in an error path when kswapd is
    running concurrently.  For isofs, however, the error can occur in a more
    common code path (which is how the bug was found).
    
    The logic here is "we want final iput() to free inode *now* instead of
    letting it sit in cache if fs is going down or had not quite come up".  The
    problem is with kswapd seeing such inodes in the middle of being killed and
    happily taking over.
    
    The clean solution would be to tell kswapd to leave those inodes alone and
    let our final iput deal with them.  I.e.  add a new flag
    (I_FORCED_FREEING), set it before write_inode_now() there and make
    prune_icache() leave those alone.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f972be33ce6a08b5f096ba013c7459a3a82f5f39
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Thu Jun 23 00:09:00 2005 -0700

    [PATCH] posix-timers: use try_to_del_timer_sync()
    
    sys_timer_settime/sys_timer_delete needs to delete k_itimer->real.timer
    synchronously while holding ->it_lock, which is also locked in
    posix_timer_fn.
    
    This patch removes timer_active/set_timer_inactive which plays with
    timer_list's internals in favour of using try_to_del_timer_sync(), which
    was introduced in the previous patch.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd450b7318b75343fd76b3d95416853e34e72c95
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Thu Jun 23 00:08:59 2005 -0700

    [PATCH] timers: introduce try_to_del_timer_sync()
    
    This patch splits del_timer_sync() into 2 functions.  The new one,
    try_to_del_timer_sync(), returns -1 when it hits executing timer.
    
    It can be used in interrupt context, or when the caller hold locks which
    can prevent completion of the timer's handler.
    
    NOTE.  Currently it can't be used in interrupt context in UP case, because
    ->running_timer is used only with CONFIG_SMP.
    
    Should the need arise, it is possible to kill #ifdef CONFIG_SMP in
    set_running_timer(), it is cheap.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55c888d6d09a0df236adfaf8ccf06ff5d0646775
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Thu Jun 23 00:08:56 2005 -0700

    [PATCH] timers fixes/improvements
    
    This patch tries to solve following problems:
    
    1. del_timer_sync() is racy. The timer can be fired again after
       del_timer_sync have checked all cpus and before it will recheck
       timer_pending().
    
    2. It has scalability problems. All cpus are scanned to determine
       if the timer is running on that cpu.
    
       With this patch del_timer_sync is O(1) and no slower than plain
       del_timer(pending_timer), unless it has to actually wait for
       completion of the currently running timer.
    
       The only restriction is that the recurring timer should not use
       add_timer_on().
    
    3. The timers are not serialized wrt to itself.
    
       If CPU_0 does mod_timer(jiffies+1) while the timer is currently
       running on CPU 1, it is quite possible that local interrupt on
       CPU_0 will start that timer before it finished on CPU_1.
    
    4. The timers locking is suboptimal. __mod_timer() takes 3 locks
       at once and still requires wmb() in del_timer/run_timers.
    
       The new implementation takes 2 locks sequentially and does not
       need memory barriers.
    
    Currently ->base != NULL means that the timer is pending. In that case
    ->base.lock is used to lock the timer. __mod_timer also takes timer->lock
    because ->base can be == NULL.
    
    This patch uses timer->entry.next != NULL as indication that the timer is
    pending. So it does __list_del(), entry->next = NULL instead of list_del()
    when the timer is deleted.
    
    The ->base field is used for hashed locking only, it is initialized
    in init_timer() which sets ->base = per_cpu(tvec_bases). When the
    tvec_bases.lock is locked, it means that all timers which are tied
    to this base via timer->base are locked, and the base itself is locked
    too.
    
    So __run_timers/migrate_timers can safely modify all timers which could
    be found on ->tvX lists (pending timers).
    
    When the timer's base is locked, and the timer removed from ->entry list
    (which means that _run_timers/migrate_timers can't see this timer), it is
    possible to set timer->base = NULL and drop the lock: the timer remains
    locked.
    
    This patch adds lock_timer_base() helper, which waits for ->base != NULL,
    locks the ->base, and checks it is still the same.
    
    __mod_timer() schedules the timer on the local CPU and changes it's base.
    However, it does not lock both old and new bases at once. It locks the
    timer via lock_timer_base(), deletes the timer, sets ->base = NULL, and
    unlocks old base. Then __mod_timer() locks new_base, sets ->base = new_base,
    and adds this timer. This simplifies the code, because AB-BA deadlock is not
    possible. __mod_timer() also ensures that the timer's base is not changed
    while the timer's handler is running on the old base.
    
    __run_timers(), del_timer() do not change ->base anymore, they only clear
    pending flag.
    
    So del_timer_sync() can test timer->base->running_timer == timer to detect
    whether it is running or not.
    
    We don't need timer_list->lock anymore, this patch kills it.
    
    We also don't need barriers. del_timer() and __run_timers() used smp_wmb()
    before clearing timer's pending flag. It was needed because __mod_timer()
    did not lock old_base if the timer is not pending, so __mod_timer()->list_add()
    could race with del_timer()->list_del(). With this patch these functions are
    serialized through base->lock.
    
    One problem. TIMER_INITIALIZER can't use per_cpu(tvec_bases). So this patch
    adds global
    
            struct timer_base_s {
                    spinlock_t lock;
                    struct timer_list *running_timer;
            } __init_timer_base;
    
    which is used by TIMER_INITIALIZER. The corresponding fields in tvec_t_base_s
    struct are replaced by struct timer_base_s t_base.
    
    It is indeed ugly. But this can't have scalability problems. The global
    __init_timer_base.lock is used only when __mod_timer() is called for the first
    time AND the timer was compile time initialized. After that the timer migrates
    to the local CPU.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Renaud Lienhart <renaud.lienhart@free.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdd646a44672115c986593956aa4ef105485a184
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu Jun 23 00:08:54 2005 -0700

    [PATCH] blk: unplug later
    
    get_request_wait needn't unplug the device immediately.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fde6ad22480cdc2eaa102b805a3ed3ee1d36a376
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu Jun 23 00:08:53 2005 -0700

    [PATCH] blk: branch hints
    
    Sprinkle around a few branch hints in the block layer.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 250dccc00805e755a6d80a73557034253da0831f
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu Jun 23 00:08:52 2005 -0700

    [PATCH] blk: no memory barrier
    
    This memory barrier is not needed because the waitqueue will only get waiters
    on it in the following situations:
    
    rq->count has exceeded the threshold - however all manipulations of ->count
    are performed under the runqueue lock, and so we will correctly pick up any
    waiter.
    
    Memory allocation for the request fails.  In this case, there is no additional
    help provided by the memory barrier.  We are guaranteed to eventually wake up
    waiters because the request allocation mempool guarantees that if the mem
    allocation for a request fails, there must be some requests in flight.  They
    will wake up waiters when they are retired.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 040c928c47b591d1cd9977cd6431cae213528b45
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 23 00:08:51 2005 -0700

    [PATCH] blk: cleanup generic tag support error messages
    
    Add KERN_ERR and __FUNCTION__ to generic tag error messages, and add a comment
    in blk_queue_end_tag() which explains the silent failure path.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7d37d028dfba90b1b747f8ac685bf0959aeda8b
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 23 00:08:50 2005 -0700

    [PATCH] blk: remove BLK_TAGS_{PER_LONG|MASK}
    
    Replace BLK_TAGS_PER_LONG with BITS_PER_LONG and remove unused BLK_TAGS_MASK.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa72b903f75e4f0f0b2c2feed093005167da4023
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 23 00:08:49 2005 -0700

    [PATCH] blk: remove blk_queue_tag->real_max_depth optimization
    
    blk_queue_tag->real_max_depth was used to optimize out unnecessary
    allocations/frees on tag resize.  However, the whole thing was very broken -
    tag_map was never allocated to real_max_depth resulting in access beyond the
    end of the map, bits in [max_depth..real_max_depth] were set when initializing
    a map and copied when resizing resulting in pre-occupied tags.
    
    As the gain of the optimization is very small, well, almost nill, remove the
    whole thing.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bf0fdad51c6710bf15d0bf4b9b30b8498fe4ddd
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 23 00:08:48 2005 -0700

    [PATCH] blk: use find_first_zero_bit() in blk_queue_start_tag()
    
    blk_queue_start_tag() hand-coded searching for the first zero bit in the tag
    map.  Replace it with find_first_zero_bit().  With this patch,
    blk_queue_star_tag() doesn't need to fill remains of tag map with 1, thus
    allowing it to work properly with the next remove_real_max_depth patch.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15d20bfd606c4b4454aeaa05fc86f77994e48c92
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Jun 23 00:08:47 2005 -0700

    [PATCH] ptrace_h8300: condition bugfix
    
    Assignment doesn't make much sense here as condition would always be true.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76381fee7e8feb4c22be636aa5d4765dbe4fbf9e
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:46 2005 -0700

    [PATCH] xen: x86_64: use more usermode macro
    
    Make use of the user_mode macro where it's possible.  This is useful for Xen
    because it will need only to redefine only the macro to a hypervisor call.
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9129e56e9ec50c0689eb4cf7a3ca132f1e776db
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:46 2005 -0700

    [PATCH] xen: x86_64: Add macro for debugreg
    
    Add 2 macros to set and get debugreg on x86_64.  This is useful for Xen
    because it will need only to redefine each macro to a hypervisor call.
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 717b594a415bfaf2dbd5e8266636488f2564c689
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:45 2005 -0700

    [PATCH] xen: x86: Use more usermode macro
    
    Use the user_mode macro where it's possible.
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa1e1bdf78d405f9905b8290ee9211e7a7bbc99b
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:44 2005 -0700

    [PATCH] xen: x86: Rename usermode macro
    
    Rename user_mode to user_mode_vm and add a user_mode macro similar to the
    x86-64 one.
    
    This is useful for Xen because the linux xen kernel does not runs on the same
    priviledge that a vanilla linux kernel, and with this we just need to redefine
    user_mode().
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cc6f12e03ebc064b74161c684f987284ce9d0cc
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:43 2005 -0700

    [PATCH] xen: x86: Use new macro for debugreg
    
    Make use of the 2 new macro set_debugreg and get_debugreg.
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5012310e35bd62fd39fce338ee44422c975ff3c
Author: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
Date:   Thu Jun 23 00:08:42 2005 -0700

    [PATCH] xen: x86: add macro for debugreg
    
    Add 2 macros to set and get debugreg on x86.  This is useful for Xen because
    it will need only to redefine each macro to a hypervisor call.
    
    Signed-off-by: Vincent Hanquez <vincent.hanquez@cl.cam.ac.uk>
    Cc: Ian Pratt <m+Ian.Pratt@cl.cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 701067c4661ebcdc155cc8f696acb24c016c058b
Author: Natalie Protasevich <Natalie.Protasevich@unisys.com>
Date:   Thu Jun 23 00:08:41 2005 -0700

    [PATCH] x86_64: avoid wasting IRQs
    
    I suggest to change the way IRQs are handed out to PCI devices.
    
    Currently, each I/O APIC pin gets associated with an IRQ, no matter if the
    pin is used or not.  It is expected that each pin can potentually be
    engaged by a device inserted into the corresponding PCI slot.  However,
    this imposes severe limitation on systems that have designs that employ
    many I/O APICs, only utilizing couple lines of each, such as P64H2 chipset.
    
    It is used in ES7000, and currently, there is no way to boot the system
    with more that 9 I/O APICs.
    
    The simple change below allows to boot a system with say 64 (or more) I/O
    APICs, each providing 1 slot, which otherwise impossible because of the IRQ
    gaps created for unused lines on each I/O APIC.  It does not resolve the
    problem with number of devices that exceeds number of possible IRQs, but
    eases up a tension for IRQs on any large system with potentually large
    number of devices.
    
    I only implemented this for the ACPI boot, since if the system is this big
    and using newer chipsets it is probably (better be!) an ACPI based system
    :).  The change is completely "mechanical" and does not alter any internal
    structures or interrupt model/implementation.  The patch works for both
    i386 and x86_64 archs.  It works with MSIs just fine, and should not
    intervene with implementations like shared vectors, when they get worked
    out and incorporated.
    
    To illustrate, below is the interrupt distribution for 2-cell ES7000 with
    20 I/O APICs, and an Ethernet card in the last slot, which should be eth1
    and which was not configured because its IRQ exceeded allowable number (it
    actially turned out huge - 480!):
    
    zorro-tb2:~ # cat /proc/interrupts
               CPU0       CPU1       CPU2       CPU3       CPU4       CPU5       CPU6       CPU7
      0:      65716      30012      30007      30002      30009      30010      30010      30010    IO-APIC-edge  timer
      4:        373          0        725        280          0          0          0          0    IO-APIC-edge  serial
      8:          0          0          0          0          0          0          0          0    IO-APIC-edge  rtc
      9:          0          0          0          0          0          0          0          0   IO-APIC-level  acpi
     14:         39          3          0          0          0          0          0          0    IO-APIC-edge  ide0
     16:        108         13          0          0          0          0          0          0   IO-APIC-level  uhci_hcd:usb1
     18:          0          0          0          0          0          0          0          0   IO-APIC-level  uhci_hcd:usb3
     19:         15          0          0          0          0          0          0          0   IO-APIC-level  uhci_hcd:usb2
     23:          3          0          0          0          0          0          0          0   IO-APIC-level  ehci_hcd:usb4
     96:       4240        397         18          0          0          0          0          0   IO-APIC-level  aic7xxx
     97:         15          0          0          0          0          0          0          0   IO-APIC-level  aic7xxx
    192:        847          0          0          0          0          0          0          0   IO-APIC-level  eth0
    NMI:          0          0          0          0          0          0          0          0
    LOC:     273423     274528     272829     274228     274092     273761     273827     273694
    ERR:          7
    MIS:          0
    
    Even though the system doesn't have that many devices, some don't get
    enabled only because of IRQ numbering model.
    
    This is the IRQ picture after the patch was applied:
    
    zorro-tb2:~ # cat /proc/interrupts
               CPU0       CPU1       CPU2       CPU3       CPU4       CPU5       CPU6       CPU7
      0:      44169      10004      10004      10001      10004      10003      10004       6135    IO-APIC-edge  timer
      4:        345          0          0          0          0        244          0          0    IO-APIC-edge  serial
      8:          0          0          0          0          0          0          0          0    IO-APIC-edge  rtc
      9:          0          0          0          0          0          0          0          0   IO-APIC-level  acpi
     14:         39          0          3          0          0          0          0          0    IO-APIC-edge  ide0
     17:       4425          0          9          0          0          0          0          0   IO-APIC-level  aic7xxx
     18:         15          0          0          0          0          0          0          0   IO-APIC-level  aic7xxx, uhci_hcd:usb3
     21:        231          0          0          0          0          0          0          0   IO-APIC-level  uhci_hcd:usb1
     22:         26          0          0          0          0          0          0          0   IO-APIC-level  uhci_hcd:usb2
     23:          3          0          0          0          0          0          0          0   IO-APIC-level  ehci_hcd:usb4
     24:        348          0          0          0          0          0          0          0   IO-APIC-level  eth0
     25:          6        192          0          0          0          0          0          0   IO-APIC-level  eth1
    NMI:          0          0          0          0          0          0          0          0
    LOC:     107981     107636     108899     108698     108489     108326     108331     108254
    ERR:          7
    MIS:          0
    
    Not only we see the card in the last I/O APIC, but we are not even close to
    using up available IRQs, since we didn't waste any.
    
    Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32ecd42b6f94d3ee320a22827b46bd19ccf924e5
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:08:38 2005 -0700

    [PATCH] eliminate duplicate rdpmc definition
    
    Eliminate duplicate definition of rdpmc in x86-64's mtrr.h.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0928d6ef7f204979749fb241a90a04a35dae133a
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Jun 23 00:08:37 2005 -0700

    [PATCH] x86_64: never block forced SIGSEGV
    
    This is the x86_64 version of the signal fix I just posted for i386.
    
    This problem was first noticed on PPC and has already been fixed there.
    But the exact same issue applies to other platforms in the same way.  The
    signal blocking for sa_mask and the handled signal takes place after the
    handler setup.  When the stack is bogus, the handler setup forces a
    SIGSEGV.  But then this will be blocked, and returning to user mode will
    fault again and iterate.  This patch fixes the problem by checking whether
    signal handler setup failed, and not doing the signal-blocking if so.  This
    copies what was done in the ppc code.  I think all architectures' signal
    handler setup code follows this pattern and needs the change.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3a00751ad8970c13d0563c2e92ee68c655a8e6b
Author: john stultz <johnstul@us.ibm.com>
Date:   Thu Jun 23 00:08:36 2005 -0700

    [PATCH] x86_64: fix hpet for systems that don't support legacy replacement
    
    Currently the x86-64 HPET code assumes the entire HPET implementation from
    the spec is present.  This breaks on boxes that do not implement the
    optional legacy timer replacement functionality portion of the spec.
    
    This patch fixes this issue, allowing x86-64 systems that cannot use the
    HPET for the timer interrupt and RTC to still use the HPET as a time
    source.  I've tested this patch on a system systems without HPET, with HPET
    but without legacy timer replacement, as well as HPET with legacy timer
    replacement.
    
    This version adds a minor check to cap the HPET counter value in
    gettimeoffset_hpet to avoid possible time inconsistencies.  Please ignore
    the A2 version I sent to you earlier.
    
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0a88c987878e533fc21fbf684198021a3b2c279
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu Jun 23 00:08:35 2005 -0700

    [PATCH] x86_64: i8259.c iso99 structure initialization
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c92c6ffdb16990872acf4ce8b24f82f98fcbbb68
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 00:08:35 2005 -0700

    [PATCH] mtrr size-and-base debugging
    
    Consolidate the mtrr sanity checking, add a dump_stack().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3a255e744dfa672e741dc24306491139d0de2d8
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 23 00:08:34 2005 -0700

    [PATCH] x86: cpu_khz type fix
    
    x86_64's cpu_khz is unsigned int and there is no reason why x86 needs to use
    unsigned long.
    
    So make cpu_khz unsigned int on x86 as well.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 129f69465b411592247c408f93d7106939223be1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jun 23 00:08:33 2005 -0700

    [PATCH] Remove i386_ksyms.c, almost.
    
    * EXPORT_SYMBOL's moved to other files
    * #include <linux/config.h>, <linux/module.h> where needed
    * #include's in i386_ksyms.c cleaned up
    * After copy-paste, redundant due to Makefiles rules preprocessor directives
      removed:
    
    	#ifdef CONFIG_FOO
    	EXPORT_SYMBOL(foo);
    	#endif
    
    	obj-$(CONFIG_FOO) += foo.o
    
    * Tiny reformat to fit in 80 columns
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9ed8817966dd723754a990f1003264a21b5747e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Jun 23 00:08:32 2005 -0700

    [PATCH] x86: #include asm/uaccess.h in asm/checksum.h
    
    csum_and_copy_to_user is static inline and uses VERIFY_WRITE.  Patch allows
    to remove asm/uaccess.h from i386_ksyms.c without dependency surprises.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80bb82afea9eeb94ae3bfed418d079930da5d3b3
Author: Aleksey Gorelov <Aleksey_Gorelov@Phoenix.com>
Date:   Thu Jun 23 00:08:29 2005 -0700

    [PATCH] VIA 82C586B IRQ routing fix
    
    According to the VIA 82C586B datasheet (still available from
    http://gkernel.sourceforge.net/specs/via/586b.pdf.bz2) this chip need a
    special PIRQ mapping.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Aleksey Gorelov <aleksey_gorelov@phoenix.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c434b7a6aedfe428ad17cd61b21b125a7b7a29ce
Author: Natalie Protasevich <Natalie.Protasevich@unisys.com>
Date:   Thu Jun 23 00:08:29 2005 -0700

    [PATCH] x86: avoid wasting IRQs for PCI devices
    
    I have submitted the patch for x86_64, this is submission for i386.
    
    The patch changes the way IRQs are handed out to PCI devices.  Currently,
    each I/O APIC pin gets associated with an IRQ, no matter if the pin is used
    or not.  This imposes severe limitation on systems that have designs that
    employ many I/O APICs, only utilizing couple lines of each, such as P64H2
    chipset.  It is used in ES7000, and currently, there is no way to boot the
    system with more that 9 I/O APICs.
    
    The simple change below allows to boot a system with say 64 (or more) I/O
    APICs, each providing 1 slot, which otherwise impossible because of the IRQ
    gaps created for unused lines on each I/O APIC.  It does not resolve the
    problem with number of devices that exceeds number of possible IRQs, but
    eases up a tension for IRQs on any large system with potentually large
    number of devices.
    
    Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5d23e5b8c7ecd97d32f6ad7680d9909977580a7
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Thu Jun 23 00:08:27 2005 -0700

    [PATCH] ia64: Selectable Timer Interrupt Frequency
    
    It allows a selectable timer interrupt frequency of 100, 250 and 1000 HZ.
    Reducing the timer frequency may have important performance benefits on
    large systems.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59121003721a8fad11ee72e646fd9d3076b5679c
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jun 23 00:08:25 2005 -0700

    [PATCH] i386: Selectable Frequency of the Timer Interrupt
    
    Make the timer frequency selectable. The timer interrupt may cause bus
    and memory contention in large NUMA systems since the interrupt occurs
    on each processor HZ times per second.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 799d19f6ec5ca2102c61122f5219a17f1c4e961a
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:08:24 2005 -0700

    [PATCH] allow early printk to use more than 25 lines
    
    Allow early printk code to take advantage of the full size of the screen, not
    just the first 25 lines.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbb4f6e6873593a2defb8f66512f55d08d88106
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Jun 23 00:08:23 2005 -0700

    [PATCH] adjust i386 watchdog tick calculation
    
    Get the i386 watchdog tick calculation into a state where it can also be used
    on CPUs with frequencies beyond 4GHz, and it consolidates the calculation into
    a single place (for potential furture adjustments).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca05fea6db5259c6d62e517c41d448a4249175f4
Author: Natalie Protasevich <Natalie.Protasevich@unisys.com>
Date:   Thu Jun 23 00:08:22 2005 -0700

    [PATCH] Do not enforce unique IO_APIC_ID check for xAPIC systems (i386)
    
    This patch is per Andi's request to remove NO_IOAPIC_CHECK from genapic and
    use heuristics to prevent unique I/O APIC ID check for systems that don't
    need it.  The patch disables unique I/O APIC ID check for Xeon-based and
    other platforms that don't use serial APIC bus for interrupt delivery.
    Andi stated that AMD systems don't need unique IO_APIC_IDs either.
    
    Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c1def1652c6c1a95eafca2991baace34afaed0f
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Jun 23 00:08:21 2005 -0700

    [PATCH] i386: never block forced SIGSEGV
    
    This problem was first noticed on PPC and has already been fixed there.
    But the exact same issue applies to other platforms in the same way.  The
    signal blocking for sa_mask and the handled signal takes place after the
    handler setup.  When the stack is bogus, the handler setup forces a
    SIGSEGV.  But then this will be blocked, and returning to user mode will
    fault again and iterate.  This patch fixes the problem by checking whether
    signal handler setup failed, and not doing the signal-blocking if so.  This
    copies what was done in the ppc code.  I think all architectures' signal
    handler setup code follows this pattern and needs the change.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1946089a109251655c5438d92c539bd2930e71ea
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jun 23 00:08:19 2005 -0700

    [PATCH] NUMA aware block device control structure allocation
    
    Patch to allocate the control structures for for ide devices on the node of
    the device itself (for NUMA systems).  The patch depends on the Slab API
    change patch by Manfred and me (in mm) and the pcidev_to_node patch that I
    posted today.
    
    Does some realignment too.
    
    Signed-off-by: Justin M. Forbes <jmforbes@linuxtx.org>
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Pravin Shelar <pravin@calsoftinc.com>
    Signed-off-by: Shobhit Dayal <shobhit@calsoftinc.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c5a09082f4e61a176382e96a831a0636b918602
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jun 23 00:08:18 2005 -0700

    [PATCH] x86/x86_64: pcibus_to_node
    
    Define pcibus_to_node to be able to figure out which NUMA node contains a
    given PCI device.  This defines pcibus_to_node(bus) in
    include/linux/topology.h and adjusts the macros for i386 and x86_64 that
    already provided a way to determine the cpumask of a pci device.
    
    x86_64 was changed to not build an array of cpumasks anymore.  Instead an
    array of nodes is build which can be used to generate the cpumask via
    node_to_cpumask.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e164f5573bef0e6caf53519719cf0228c9c15ce3
Author: Christoph Lameter <christoph@lameter.com>
Date:   Thu Jun 23 00:08:17 2005 -0700

    [PATCH] ppc64: pcibus_to_node fix
    
    asm-generic/topology.h must also be included if CONFIG_NUMA is set in order to
    provide the fall back pcibus_to_node function.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a35293667f8691b45fdb72770f087c086fb9702
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Thu Jun 23 00:08:14 2005 -0700

    [PATCH] m32r: build fix for asm-m32r/topology.h
    
    Use asm-generic/topology.h to fix yet another pcibus_to_node() build error.
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a9e1b0f564615bd92ba50162623e25c2904e564
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Thu Jun 23 00:08:13 2005 -0700

    [PATCH] Platform SMIs and their interferance with tsc based delay calibration
    
    Issue:
    Current tsc based delay_calibration can result in significant errors in
    loops_per_jiffy count when the platform events like SMIs
    (System Management Interrupts that are non-maskable) are present. This could
    lead to potential kernel panic(). This issue is becoming more visible with 2.6
    kernel (as default HZ is 1000) and on platforms with higher SMI handling
    latencies. During the boot time, SMIs are mostly used by BIOS (for things
    like legacy keyboard emulation).
    
    Description:
    The psuedocode for current delay calibration with tsc based delay looks like
    (0) Estimate a value for loops_per_jiffy
    (1) While (loops_per_jiffy estimate is accurate enough)
    (2)   wait for jiffy transition (jiffy1)
    (3)   Note down current tsc (tsc1)
    (4)   loop until tsc becomes tsc1 + loops_per_jiffy
    (5)   check whether jiffy changed since jiffy1 or not and refine
    loops_per_jiffy estimate
    
    Consider the following cases
    Case 1:
    If SMIs happen between (2) and (3) above, we can end up with a
    loops_per_jiffy value that is too low. This results in shorted delays and
    kernel can panic () during boot (Mostly at IOAPIC timer initialization
    timer_irq_works() as we don't have enough timer interrupts in a specified
    interval).
    
    Case 2:
    If SMIs happen between (3) and (4) above, then we can end up with a
    loops_per_jiffy value that is too high. And with current i386 code, too
    high lpj value (greater than 17M) can result in a overflow in
    delay.c:__const_udelay() again resulting in shorter delay and panic().
    
    Solution:
    The patch below makes the calibration routine aware of asynchronous events
    like SMIs. We increase the delay calibration time and also identify any
    significant errors (greater than 12.5%) in the calibration and notify it to
    user.
    
    Patch below changes both i386 and x86-64 architectures to use this
    new and improved calibrate_delay_direct() routine.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f8e2d62fa04441cd12c08ce521e84e5bd3f8a46
Author: Ian Campbell <icampbell@arcom.com>
Date:   Thu Jun 23 00:08:10 2005 -0700

    [PATCH] use ${CROSS_COMPILE}installkernel in arch/*/boot/install.sh
    
    The attached patch causes the various arch specific install.sh scripts to
    look for ${CROSS_COMPILE}installkernel rather than just installkernel (in
    both /sbin/ and ~/bin/ where the script already did this).  This allows you
    to have e.g.  arm-linux-installkernel as a handy way to install on your
    cross target.  It also prevents the script picking up on the host
    /sbin/installkernel which causes the script to fall through and do the
    install itself (which is what I actually use myself, with $INSTALL_PATH
    set).
    
    I don't believe it causes back-compatibility problems since calling the
    host installkernel was never likely to work or be what you wanted when
    cross compiling anyway.  If $CROSS_COMPILE isn't set then nothing changes.
    
    I only use ARM and i386 myself but I figured it couldn't hurt to do the
    whole lot.  I've cc'd those who I hope are the arch maintainers for files
    that I've touched.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0e7feb03d5ac48069c2fd57bbba61522e0ca493
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Thu Jun 23 00:08:09 2005 -0700

    [PATCH] biarch compiler support for i386
    
    This allows the i386 architecture to be built on a system with a biarch
    compiler that defaults to x86-64, merely by specifying ARCH=i386.
    
    As previously discussed, this uses the equivalent logic to the ppc port.
    
    Signed-Off-By: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f4e1e5061c44a93337338af4bf9bed10ee9f32e
Author: Martin J. Bligh <mbligh@mbligh.org>
Date:   Thu Jun 23 00:08:08 2005 -0700

    [PATCH] add page_state info to show_mem
    
    This helps a lot when debugging out of memory stuff - useful especially to
    see if all the memory is sucked into slab, etc.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbfceef47fb9467424113a004070bf37a806a97c
Author: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
Date:   Thu Jun 23 00:08:07 2005 -0700

    [PATCH] add x86-64 specific support for sparsemem
    
    This patch adds in the necessary support for sparsemem such that x86-64
    kernels may use sparsemem as an alternative to discontigmem for NUMA
    kernels.  Note that this does no preclude one from continuing to build NUMA
    kernels using discontigmem, but merely allows the option to build NUMA
    kernels with sparsemem.
    
    Interestingly, the use of sparsemem in lieu of discontigmem in NUMA kernels
    results in reduced text size for otherwise equivalent kernels as shown in
    the example builds below:
    
       text	   data	    bss	    dec	    hex	filename
    2371036	 765884	1237108	4374028	 42be0c	vmlinux.discontig
    2366549	 776484	1302772	4445805	 43d66d	vmlinux.sparse
    
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b97690f4cd960779fb351b7cd9974390afabb36
Author: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
Date:   Thu Jun 23 00:08:06 2005 -0700

    [PATCH] reorganize x86-64 NUMA and DISCONTIGMEM config options
    
    In order to use the alternative sparsemem implmentation for NUMA kernels,
    we need to reorganize the config options.  This patch effectively abstracts
    out the CONFIG_DISCONTIGMEM options to CONFIG_NUMA in most cases.  Thus,
    the discontigmem implementation may be employed as always, but the
    sparsemem implementation may be used alternatively.
    
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1035faf1b19efb83d5626985240f52cd149dd39b
Author: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
Date:   Thu Jun 23 00:08:05 2005 -0700

    [PATCH] add x86-64 Kconfig options for sparsemem
    
    Add the requisite arch specific Kconfig options to enable the use of the
    sparsemem implementation for NUMA kernels on x86-64.
    
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 073326634bec2f36e165583d21fb0a9fad47ac0a
Author: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
Date:   Thu Jun 23 00:08:03 2005 -0700

    [PATCH] remove direct ref to contig_page_data for x86-64
    
    This patch pulls out all remaining direct references to contig_page_data
    from arch/x86-64, thus saving an ifdef in one case.
    
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 145e664231648121026d470094c200851a446a73
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:08:03 2005 -0700

    [PATCH] ppc64: sparsemem memory model
    
    Provide the architecture specific implementation for SPARSEMEM for PPC64
    systems.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Mike Kravetz <kravetz@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74b30be2e183bd9a12d0350698996e3d1969f290
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:08:02 2005 -0700

    [PATCH] ppc64: add memory present
    
    Provide hooks for PPC64 to allow memory models to be informed of installed
    memory areas.  This allows SPARSEMEM to instantiate mem_map for the populated
    areas.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 510f8fa7ba18320d408dd3093663e58f5664f2f0
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:08:01 2005 -0700

    [PATCH] ppc64: add early_pfn_to_nid
    
    Provide an implementation of early_pfn_to_nid for PPC64.  This is used by
    memory models to determine the node from which to take allocations before the
    memory allocators are fully initialised.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29751f6991e845f7d002a6ae520bf996b38c8dcd
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:08:00 2005 -0700

    [PATCH] sparsemem hotplug base
    
    Make sparse's initalization be accessible at runtime.  This allows sparse
    mappings to be created after boot in a hotplug situation.
    
    This patch is separated from the previous one just to give an indication how
    much of the sparse infrastructure is *just* for hotplug memory.
    
    The section_mem_map doesn't really store a pointer.  It stores something that
    is convenient to do some math against to get a pointer.  It isn't valid to
    just do *section_mem_map, so I don't think it should be stored as a pointer.
    
    There are a couple of things I'd like to store about a section.  First of all,
    the fact that it is !NULL does not mean that it is present.  There could be
    such a combination where section_mem_map *is* NULL, but the math gets you
    properly to a real mem_map.  So, I don't think that check is safe.
    
    Since we're storing 32-bit-aligned structures, we have a few bits in the
    bottom of the pointer to play with.  Use one bit to encode whether there's
    really a mem_map there, and the other one to tell whether there's a valid
    section there.  We need to distinguish between the two because sometimes
    there's a gap between when a section is discovered to be present and when we
    can get the mem_map for it.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 641c767389b19859a45e6de46d8e18cd935bdb60
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:07:59 2005 -0700

    [PATCH] sparsemem swiss cheese numa layouts
    
    The part of the sparsemem patch which modifies memmap_init_zone() has recently
    become a problem.  It changes behavior so that there is a call to
    pfn_to_page() for each individual page inside of a node's range:
    node_start_pfn through node_end_pfn.  It used to simply do this once, at the
    beginning of the node, but having sparsemem's non-contiguous mem_map[]s inside
    of a node made it necessary to change.
    
    Mike Kravetz recently wrote a patch which made the NUMA code accept some new
    kinds of layouts.  The system's memory was laid out like this, with node 0's
    memory in two pieces: one before and one after node 1's memory:
    
    	Node 0: +++++     +++++
    	Node 1:      +++++
    
    Previous behavior before Mike's patch was to assign nodes like this:
    
    	Node 0: 00000     XXXXX
    	Node 1:      11111
    
    Where the 'X' areas were simply thrown away.  The new behavior was to make the
    pg_data_t span node 0 across all of its areas, including areas that are really
    node 1's: Node 0: 000000000000000 Node 1: 11111
    
    This wastes a little bit of mem_map space, but ends up being OK, and more
    fully utilizes the system's memory.  memmap_init_zone() initializes all of the
    "struct page"s for node 0, even for the "hole", but those never get used,
    because there is no pfn_to_page() that resolves to those pages.  However, only
    calling pfn_to_page() once, memmap_init_zone() always uses the pages that were
    allocated for node0->node_mem_map because:
    
    	struct page *start = pfn_to_page(start_pfn);
    	// effectively start = &node->node_mem_map[0]
    	for (page = start; page < (start + size); page++) {
    		init_page_here();...
    		page++;
    	}
    
    Slow, and wasteful, but generally harmless.
    
    But, modify that to call pfn_to_page() for each loop iteration (like sparsemem
    does):
    
    	for (pfn = start_pfn; pfn < < (start_pfn + size); pfn++++) {
    		page = pfn_to_page(pfn);
    	}
    
    And you end up trying to initialize node 1's pages too early, along with bogus
    data from node 0.  This patch checks for those weird layouts and declines to
    touch the pages, making the more frequent pfn_to_page() calls OK to do.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05b79bdcb48c18cd9b580c39e3efb9a1ab078151
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:07:57 2005 -0700

    [PATCH] sparsemem memory model for i386
    
    Provide the architecture specific implementation for SPARSEMEM for i386 SMP
    and NUMA systems.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d41dee369bff3b9dcb6328d4d822926c28cc2594
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:07:54 2005 -0700

    [PATCH] sparsemem memory model
    
    Sparsemem abstracts the use of discontiguous mem_maps[].  This kind of
    mem_map[] is needed by discontiguous memory machines (like in the old
    CONFIG_DISCONTIGMEM case) as well as memory hotplug systems.  Sparsemem
    replaces DISCONTIGMEM when enabled, and it is hoped that it can eventually
    become a complete replacement.
    
    A significant advantage over DISCONTIGMEM is that it's completely separated
    from CONFIG_NUMA.  When producing this patch, it became apparent in that NUMA
    and DISCONTIG are often confused.
    
    Another advantage is that sparse doesn't require each NUMA node's ranges to be
    contiguous.  It can handle overlapping ranges between nodes with no problems,
    where DISCONTIGMEM currently throws away that memory.
    
    Sparsemem uses an array to provide different pfn_to_page() translations for
    each SECTION_SIZE area of physical memory.  This is what allows the mem_map[]
    to be chopped up.
    
    In order to do quick pfn_to_page() operations, the section number of the page
    is encoded in page->flags.  Part of the sparsemem infrastructure enables
    sharing of these bits more dynamically (at compile-time) between the
    page_zone() and sparsemem operations.  However, on 32-bit architectures, the
    number of bits is quite limited, and may require growing the size of the
    page->flags type in certain conditions.  Several things might force this to
    occur: a decrease in the SECTION_SIZE (if you want to hotplug smaller areas of
    memory), an increase in the physical address space, or an increase in the
    number of used page->flags.
    
    One thing to note is that, once sparsemem is present, the NUMA node
    information no longer needs to be stored in the page->flags.  It might provide
    speed increases on certain platforms and will be stored there if there is
    room.  But, if out of room, an alternate (theoretically slower) mechanism is
    used.
    
    This patch introduces CONFIG_FLATMEM.  It is used in almost all cases where
    there used to be an #ifndef DISCONTIG, because SPARSEMEM and DISCONTIGMEM
    often have to compile out the same areas of code.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af705362ab6018071310c5fcd436a6b457517d5f
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:07:53 2005 -0700

    [PATCH] generify memory present
    
    Allow architectures to indicate that they will be providing hooks to indice
    installed memory areas, memory_present().  Provide prototypes for the i386
    implementation.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b159d43fbf7eaaac6ecc647f51cf4257332db47b
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Thu Jun 23 00:07:52 2005 -0700

    [PATCH] generify early_pfn_to_nid
    
    Provide a default implementation for early_pfn_to_nid returning node 0.  Allow
    architectures to override this with their own implementation out of
    asm/mmzone.h.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 368a0a3afad08069b2679ecaff80fc18c10a6e2a
Author: Mike Kravetz <kravetz@us.ibm.com>
Date:   Thu Jun 23 00:07:51 2005 -0700

    [PATCH] ppc64: Kconfig memory models
    
    This patch changes some of the default behavior in the ppc64 Kconfig file
    that was recently changed/added to 2.6.12-rc2-mm1 by Dave Hansen in
    preparation for SPARSEMEM.  Patch allows the display of both FLAT and
    DISCONTIG models on pseries.  As before, default is DISCONTIG for SMP and
    PSERIES and FLAT for others.
    
    Signed-off-by: Mike Kravetz <kravetz@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 785dcd44b60ec8ede76fed0af54333ab5f3e848c
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:50 2005 -0700

    [PATCH] mm/Kconfig: give DISCONTIG more help text
    
    This gives DISCONTIGMEM a bit more help text to explain what it does, not just
    when to choose it.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1785e85b9c81c67b581b511ee4efac6c81e9edb
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:49 2005 -0700

    [PATCH] mm/Kconfig: hide "Memory Model" selection menu
    
    I got some feedback from users who think that the new "Memory Model" menu is a
    little invasive.  This patch will hide that menu, except when
    CONFIG_EXPERIMENTAL is enabled *or* when an individual architecture wants it.
    
    An individual arch may want to enable it because they've removed their
    arch-specific DISCONTIG prompt in favor of the mm/Kconfig one.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 074ccf8016b61f4b40066f8d737ab31e17a6afd1
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:48 2005 -0700

    [PATCH] mm/Kconfig: kill unused ARCH_FLATMEM_DISABLE
    
    This used to be used to disable FLATMEM selection, but I decided to change it
    to be done generically when DISCONTIG is enabled.  The option is unused, so
    this kills it.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44d0f805c77902a22dda244fd092b4567066b2b9
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:47 2005 -0700

    [PATCH] sparsemem: fix minor "defaults" issue in mm/Kconfig
    
    The following patch applies on top of 2.6.12-rc2-mm1.  It fixes a minor
    user interaction issue, and an early reference to SPARSEMEM.
    
    This "choice" menu would always default to FLATMEM, as it was listed first.
     Move it to the end so that the other defaults have a chance first.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93b7504e3e6c1d98586854806e51bea329ea3aa9
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:47 2005 -0700

    [PATCH] Introduce new Kconfig option for NUMA or DISCONTIG
    
    There is some confusion that arose when working on SPARSEMEM patch between
    what is needed for DISCONTIG vs. NUMA.
    
    Multiple pg_data_t's are needed for DISCONTIGMEM or NUMA, independently.
    All of the current NUMA implementations require an implementation of
    DISCONTIG.  Because of this, quite a lot of code which is really needed for
    NUMA is actually under DISCONTIG #ifdefs.  For SPARSEMEM, we changed some
    of these #ifdefs to CONFIG_NUMA, but that broke the DISCONTIG=y and NUMA=n
    case.
    
    Introducing this new NEED_MULTIPLE_NODES config option allows code that is
    needed for both NUMA or DISCONTIG to be separated out from code that is
    specific to DISCONTIG.
    
    One great advantage of this approach is that it doesn't require every
    architecture to be converted over.  All of the current implementations
    should "just work", only the ones implementing SPARSEMEM will have to be
    fixed up.
    
    The change to free_area_init() makes it work inside, or out of the new
    config option.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e19243e9a19ef8e5994852671bd06bb51630811
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:45 2005 -0700

    [PATCH] update all defconfigs for ARCH_DISCONTIGMEM_ENABLE
    
    This will at least suppress one prompt that users would have received the
    first time they compile with the new DISCONTIG arch option.  They'll still
    get the "Memory Model" prompt, but 99% of them will have the default work
    there.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f22ab276b931b72ea04b184c155b34d0362bfc3
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:43 2005 -0700

    [PATCH] make each arch use mm/Kconfig
    
    For all architectures, this just means that you'll see a "Memory Model"
    choice in your architecture menu.  For those that implement DISCONTIGMEM,
    you may eventually want to make your ARCH_DISCONTIGMEM_ENABLE a "def_bool
    y" and make your users select DISCONTIGMEM right out of the new choice
    menu.  The only disadvantage might be if you have some specific things that
    you need in your help option to explain something about DISCONTIGMEM.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a9da7655d2d5b7f790a370328cf093440c80496
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:42 2005 -0700

    [PATCH] create mm/Kconfig for arch-independent memory options
    
    With sparsemem being introduced, we need a central place for new
    memory-related .config options: mm/Kconfig.  This allows us to remove many
    of the duplicated arch-specific options.
    
    The new option, CONFIG_FLATMEM, is there to enable us to detangle NUMA and
    DISCONTIGMEM.  This is a requirement for sparsemem because sparsemem uses
    the NUMA code without the presence of DISCONTIGMEM.  The sparsemem patches
    use CONFIG_FLATMEM in generic code, so this patch is a requirement before
    applying them.
    
    Almost all places that used to do '#ifndef CONFIG_DISCONTIGMEM' should use
    '#ifdef CONFIG_FLATMEM' instead.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b505b90b2d54e526cc8d123bdef3b98c9f0bbc6
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:41 2005 -0700

    [PATCH] sparsemem base: teach discontig about sparse ranges
    
    discontig.c has some assumptions that mem_map[]s inside of a node are
    contiguous.  Teach it to make sure that each region that it's bringing online
    is actually made up of valid ranges of ram.
    
    Written-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 348f8b6c4837a07304d2f72b11ce8d96588065e0
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:40 2005 -0700

    [PATCH] sparsemem base: reorganize page->flags bit operations
    
    Generify the value fields in the page_flags.  The aim is to allow the location
    and size of these fields to be varied.  Additionally we want to move away from
    fixed allocations per field whilst still enforcing the overall bit utilisation
    limits.  We rely on the compiler to spot and optimise the accessor functions.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f167ec721108c9282d54424516a12c805e3c306
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:39 2005 -0700

    [PATCH] sparsemem base: simple NUMA remap space allocator
    
    Introduce a simple allocator for the NUMA remap space.  This space is very
    scarce, used for structures which are best allocated node local.
    
    This mechanism is also used on non-NUMA ia64 systems with a vmem_map to keep
    the pgdat->node_mem_map initialized in a consistent place for all
    architectures.
    
    Issues:
    o alloc_remap takes a node_id where we might expect a pgdat which was intended
      to allow us to allocate the pgdat's using this mechanism; which we do not yet
      do.  Could have alloc_remap_node() and alloc_remap_nid() for this purpose.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2ebaa425e6630adcbf757b004d257dd4204925b
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:38 2005 -0700

    [PATCH] sparsemem base: early_pfn_to_nid() (works before sparse is initialized)
    
    The following four patches provide the last needed changes before the
    introduction of sparsemem.  For a more complete description of what this
    will do, please see this patch:
    
    http://www.sr71.net/patches/2.6.11/2.6.11-bk7-mhp1/broken-out/B-sparse-150-sparsemem.patch
    
    or previous posts on the subject:
    http://marc.theaimsgroup.com/?t=110868540700001&r=1&w=2
    http://marc.theaimsgroup.com/?l=linux-mm&m=109897373315016&w=2
    
    Three of these are i386-only, but one of them reorganizes the macros
    used to manage the space in page->flags, and will affect all platforms.
    There are analogous patches to the i386 ones for ppc64, ia64, and
    x86_64, but those will be submitted by the normal arch maintainers.
    
    The combination of the four patches has been test-booted on a variety of
    i386 hardware, and compiled for ppc64, i386, and x86-64 with about 17
    different .configs.  It's also been runtime-tested on ia64 configs (with
    more patches on top).
    
    This patch:
    
    We _know_ which node pages in general belong to, at least at a very gross
    level in node_{start,end}_pfn[].  Use those to target the allocations of
    pages.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 408fde81c1bff15c875a3618481e93a01dcc79ea
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Thu Jun 23 00:07:37 2005 -0700

    [PATCH] remove non-DISCONTIG use of pgdat->node_mem_map
    
    This patch effectively eliminates direct use of pgdat->node_mem_map outside
    of the DISCONTIG code.  On a flat memory system, these fields aren't
    currently used, neither are they on a sparsemem system.
    
    There was also a node_mem_map(nid) macro on many architectures.  Its use
    along with the use of ->node_mem_map itself was not consistent.  It has
    been removed in favor of two new, more explicit, arch-independent macros:
    
    	pgdat_page_nr(pgdat, pagenr)
    	nid_page_nr(nid, pagenr)
    
    I called them "pgdat" and "nid" because we overload the term "node" to mean
    "NUMA node", "DISCONTIG node" or "pg_data_t" in very confusing ways.  I
    believe the newer names are much clearer.
    
    These macros can be overridden in the sparsemem case with a theoretically
    slower operation using node_start_pfn and pfn_to_page(), instead.  We could
    make this the only behavior if people want, but I don't want to change too
    much at once.  One thing at a time.
    
    This patch removes more code than it adds.
    
    Compile tested on alpha, alpha discontig, arm, arm-discontig, i386, i386
    generic, NUMAQ, Summit, ppc64, ppc64 discontig, and x86_64.  Full list
    here: http://sr71.net/patches/2.6.12/2.6.12-rc1-mhp2/configs/
    
    Boot tested on NUMAQ, x86 SMP and ppc64 power4/5 LPARs.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Martin J. Bligh <mbligh@aracnet.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29c31a3bf257e0723423f1f0f9afd1b840434c75
Merge: ee98689... b2b3d82...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 23 09:25:04 2005 -0700

    Merge 'misc-fixes' branch of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 55d3b282b90620e02e825304a9433732a84c58a5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 23 15:05:41 2005 +0100

    [PATCH] Serial: Mobility's 16550A ports need a helping hand
    
    The Mobility 16550A serial ports don't behave the same as standard
    16550A ports, and need a helping hand to get them going once the
    transmitter has drained and been disabled.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bc54fd1ad3c5972be339a08528ab631326ed2b38
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jun 23 22:46:46 2005 +1000

    Add missing license texts from Tungsten Graphics.
    
    From: Alan Hourihane
    Signed-off-by: David Airlie <airlied@linux.ie>

commit cfd9e15f78fc6efe88ea8cb0722a731b331cfd80
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jun 23 22:43:00 2005 +1000

    Currently DRM depends on PCI this will need to change for ffb on Sparc to
    be fixed but at the moment it is true.
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9a18664506dbce5e23f3c5de7b1c5a042dd26520
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Jun 23 21:29:18 2005 +1000

    drm: 32/64-bit DRM ioctl compatibility patch
    
    The patch is against a 2.6.11 kernel tree.  I am running this with a
    32-bit X server (compiled up from X.org CVS as of a couple of weeks
    ago) and 32-bit DRI libraries and clients.  All the userland stuff is
    identical to what I am using under a 32-bit kernel on my G4 powerbook
    (which is a 32-bit machine of course).  I haven't tried compiling up a
    64-bit X server or clients yet.
    
    In the compatibility routines I have assumed that the kernel can
    safely access user addresses after set_fs(KERNEL_DS).  That is, where
    an ioctl argument structure contains pointers to other structures, and
    those other structures are already compatible between the 32-bit and
    64-bit ABIs (i.e. they only contain things like chars, shorts or
    ints), I just check the address with access_ok() and then pass it
    through to the 64-bit ioctl code.  I believe this approach may not
    work on sparc64, but it does work on ppc64 and x86_64 at least.
    
    One tricky area which may need to be revisited is the question of how
    to handle the handles which we pass back to userspace to identify
    mappings.  These handles are generated in the ADDMAP ioctl and then
    passed in as the offset value to mmap.  However, offset values for
    mmap seem to be generated in other ways as well, particularly for AGP
    mappings.
    
    The approach I have ended up with is to generate a fake 32-bit handle
    only for _DRM_SHM mappings.  The handles for other mappings (AGP, REG,
    FB) are physical addresses which are already limited to 32 bits, and
    generating fake handles for them created all sorts of problems in the
    mmap/nopage code.
    
    This patch has been updated to use the new compatibility ioctls.
    
    From: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 3357d4c75f1fb67e7304998c4ad4e9a9fed66fa4
Merge: 364f6c7... ee98689...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Jun 23 11:26:22 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git.

commit 4ba5e35daa90871fcb9b01f5ad1e5723343cc0a9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 23 10:43:04 2005 +0100

    [PATCH] Serial: Convert 8250 revision-based bug fixes to bug bitmask
    
    For some 8250 port types, we used to check the type of the port, and
    then determine whether the chip revision means the device is buggy.
    Instead, introduce a bit array, and set the appropriate bit(s) when
    we discover a buggy device.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2b3d8247951f298897b395599849957ee271c55
Author: Mitch Williams <mitch.a.williams@intel.com>
Date:   Thu Jun 23 03:41:00 2005 -0400

    e1000: fix spinlock bug
    
    This patch fixes an obvious and nasty bug where we could exit the transmit
    routine while holding tx_lock.
    
    Signed-off-by:  Mitch Williams <mitch.a.williams@intel.com>

commit d7152fe14cad075d6dd4ee4194acd131aed0244e
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Thu Jun 23 17:14:39 2005 +1000

    [PATCH] Maple powerdown patch
    
    Currently reset and powerdown are not implemented on the Maple board,
    and attempting to do so will (incorrectly return).  This implements
    the proper communication with the service processor, allowing correct
    reset and powerdown on the Maple board, by communicating with the
    service processor.  If somehow it's unable to communicate with the
    service processor it will loop forever instead.
    
    Note that powerdown on the Maple will power down the CPUs, but not the
    fans or other board components due to hardware and firmware
    limitations.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Frank Rowand <frowand@mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dad32bbf43b496bcd32a83f73a1e7fd0a02cfd3e
Author: John Rose <johnrose@austin.ibm.com>
Date:   Thu Jun 23 17:09:54 2005 +1000

    [PATCH] pSeries - read irqs dynamically
    
    For I/O DLPAR to work properly, the kernel needs to allow for dynamic
    assignment of the irq field of the pci_dev structure upon dynamic bus
    addition.  This patch moves the assignment of that field from
    pSeries_final_fixup() to pcibios_fixup_bus(), which enables dynamic
    assignment for the children of a newly added bus.
    
    Currently, pci_devs receive their irq numbers in one of two ways.  The
    irq line is either read at boot for all pci_devs, or read by the rpaphp
    module at slot enable time.  The latter is no longer sufficient for
    DLPAR addition of slots that don't qualify as PCI-hotplug capable.
    This solution handles the cases of boot and dynamic add.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ee98689be1b054897ff17655008c3048fe88be94
Merge: 060de20... d377e85...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 23:18:10 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit 060de20e82195d404f7dc6a914685730376fdc80
Merge: b7c84c6... 2c4ee8f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 23:11:50 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 8f586b2243198194240626fd9695da5564ffa7ee
Author: Mike Strosaker <strosake@austin.ibm.com>
Date:   Thu Jun 23 16:09:41 2005 +1000

    [PATCH] correct printing to operator panel
    
    This patch corrects the printing of progress indicators to the op
    panel on p/iSeries ppc64 systems.  Each discrete reference code should
    begin with a form feed char to clear the op panel, and the first and
    second lines should be separated with a CR/LF sequence.  Padding with
    spaces is not necessary.
    
    Also, capitalize the hex value printed on the first line, to be
    consistent with the values printed by firmware, service processor,
    etc.
    
    It turns out that there's an ibm,form-feed property; this patch uses
    it in the pSeries-specific progress routine.  This patch also checks
    the number of rows and the specific width of each row (the second row
    on power5 systems can actually hold 80 characters).  If the displayed
    text is too wide for the physical display, it can be viewed in the ASM
    menus, or by selecting option 14 on the op panel.
    
    Signed-off-by: Mike Strosaker <strosake@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d377e85b537a5e166272f937da6ba84350676b6e
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 22 16:09:05 2005 -0700

    [PATCH] driver core: Fix up the device_attach() error handling in bus_add_device()
    
    Don't error out if something "bad" happens when trying to bind a driver to a
    device.  We want the sysfs attributes to be present for later when we try to
    tear down the device.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 479f6ea85e513551510ad52f37e69e1c596ad356
Author: Stelian Pop <stelian@popies.net>
Date:   Wed Jun 22 17:53:28 2005 +0200

    [PATCH] USB: fix hid core to return proper error code from probe
    
    Drivers need to return -ENODEV when they can't bind to a device.
    Anything else stops the "bind a device to a driver" search.
    
    From: Stelian Pop <stelian@popies.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2c4ee8f907fc4a3c69273a958f853bf4b358eb49
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Wed Jun 22 22:19:52 2005 -0700

    [LTPC]: Replace schedule_timeout() with ssleep()/msleep()
    
    Use ssleep() / msleep() [as appropriate]
    instead of schedule_timeout() to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Acked-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebc3f64b864fc16a594c2e63bf55a55c7d42084b
Author: Shaun Pereira <spereira@tusc.com.au>
Date:   Wed Jun 22 22:16:17 2005 -0700

    [X25]: Fast select with no restriction on response
    
    This patch is a follow up to patch 1 regarding "Selective Sub Address
    matching with call user data".  It allows use of the Fast-Select-Acceptance
    optional user facility for X.25.
    
    This patch just implements fast select with no restriction on response
    (NRR).  What this means (according to ITU-T Recomendation 10/96 section
    6.16) is that if in an incoming call packet, the relevant facility bits are
    set for fast-select-NRR, then the called DTE can issue a direct response to
    the incoming packet using a call-accepted packet that contains
    call-user-data.  This patch allows such a response.
    
    The called DTE can also respond with a clear-request packet that contains
    call-user-data.  However, this feature is currently not implemented by the
    patch.
    
    How is Fast Select Acceptance used?
    By default, the system does not allow fast select acceptance (as before).
    To enable a response to fast select acceptance,
    After a listen socket in created and bound as follows
    	socket(AF_X25, SOCK_SEQPACKET, 0);
    	bind(call_soc, (struct sockaddr *)&locl_addr, sizeof(locl_addr));
    but before a listen system call is made, the following ioctl should be used.
    	ioctl(call_soc,SIOCX25CALLACCPTAPPRV);
    Now the listen system call can be made
    	listen(call_soc, 4);
    After this, an incoming-call packet will be accepted, but no call-accepted
    packet will be sent back until the following system call is made on the socket
    that accepts the call
    	ioctl(vc_soc,SIOCX25SENDCALLACCPT);
    The network (or cisco xot router used for testing here) will allow the
    application server's call-user-data in the call-accepted packet,
    provided the call-request was made with Fast-select NRR.
    
    Signed-off-by: Shaun Pereira <spereira@tusc.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cb65d506c34c86df5bcef939ce5a8666a451bd8b
Author: Shaun Pereira <spereira@tusc.com.au>
Date:   Wed Jun 22 22:15:01 2005 -0700

    [X25]: Selective sub-address matching with call user data.
    
    From: Shaun Pereira <spereira@tusc.com.au>
    
    This is the first (independent of the second) patch of two that I am
    working on with x25 on linux (tested with xot on a cisco router).  Details
    are as follows.
    
    Current state of module:
    
    A server using the current implementation (2.6.11.7) of the x25 module will
    accept a call request/ incoming call packet at the listening x.25 address,
    from all callers to that address, as long as NO call user data is present
    in the packet header.
    
    If the server needs to choose to accept a particular call request/ incoming
    call packet arriving at its listening x25 address, then the kernel has to
    allow a match of call user data present in the call request packet with its
    own.  This is required when multiple servers listen at the same x25 address
    and device interface.  The kernel currently matches ALL call user data, if
    present.
    
    Current Changes:
    
    This patch is a follow up to the patch submitted previously by Andrew
    Hendry, and allows the user to selectively control the number of octets of
    call user data in the call request packet, that the kernel will match.  By
    default no call user data is matched, even if call user data is present.
    To allow call user data matching, a cudmatchlength > 0 has to be passed
    into the kernel after which the passed number of octets will be matched.
    Otherwise the kernel behavior is exactly as the original implementation.
    
    This patch also ensures that as is normally the case, no call user data
    will be present in the Call accepted / call connected packet sent back to
    the caller
    
    Future Changes on next patch:
    
    There are cases however when call user data may be present in the call
    accepted packet.  According to the X.25 recommendation (ITU-T 10/96)
    section 5.2.3.2 call user data may be present in the call accepted packet
    provided the fast select facility is used.  My next patch will include this
    fast select utility and the ability to send up to 128 octets call user data
    in the call accepted packet provided the fast select facility is used.  I
    am currently testing this, again with xot on linux and cisco.
    
    Signed-off-by: Shaun Pereira <spereira@tusc.com.au>
    
    (With a fix from Alexey Dobriyan <adobriyan@gmail.com>)
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 68d318720052154bc6b2513b0f15d0d947cc53c9
Author: James Lamanna <jlamanna@gmail.com>
Date:   Wed Jun 22 22:12:57 2005 -0700

    [EBTABLES]: vfree() checking cleanups
    
    From: James Lamanna <jlamanna@gmail.com>
    
    ebtables.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 285b3afefacff14bc98e5754b8b48a0a2b42f0df
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Wed Jun 22 22:11:44 2005 -0700

    [ATALK] aarp: replace schedule_timeout() with msleep()
    
    From: Nishanth Aravamudan <nacc@us.ibm.com>
    
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected. The current code is not wrong, but it does not account for
    early return due to signals, so I think msleep() should be appropriate.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7abaa27c1c54208bd76fa8bae55839c034aebfb2
Author: Chuck Short <zulcss@gmail.com>
Date:   Wed Jun 22 22:10:23 2005 -0700

    [IPV4]: Fix route.c gcc4 warnings
    
    Signed-off by: Chuck Short <zulcss@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fbeec2e1552949002065435c9829dc244ad85407
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Wed Jun 22 22:05:59 2005 -0700

    [NETPOLL]: allow multiple netpoll_clients to register against one interface
    
    This patch provides support for registering multiple netpoll clients to the
    same network device.  Only one of these clients may register an rx_hook,
    however.  In practice, this restriction has not been problematic.  It is
    worth mentioning, though, that the current design can be easily extended to
    allow for the registration of multiple rx_hooks.
    
    The basic idea of the patch is that the rx_np pointer in the netpoll_info
    structure points to the struct netpoll that has rx_hook filled in.  Aside
    from this one case, there is no need for a pointer from the struct
    net_device to an individual struct netpoll.
    
    A lock is introduced to protect the setting and clearing of the np_rx
    pointer.  The pointer will only be cleared upon netpoll client module
    removal, and the lock should be uncontested.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 115c1d6e61b70851d9a363328c3b8d4c2559a1d3
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Wed Jun 22 22:05:31 2005 -0700

    [NETPOLL]: Introduce a netpoll_info struct
    
    This patch introduces a netpoll_info structure, which the struct net_device
    will now point to instead of pointing to a struct netpoll.  The reason for
    this is two-fold: 1) fields such as the rx_flags, poll_owner, and poll_lock
    should be maintained per net_device, not per netpoll;  and 2) this is a first
    step in providing support for multiple netpoll clients to register against the
    same net_device.
    
    The struct netpoll is now pointed to by the netpoll_info structure.  As
    such, the previous behaviour of the code is preserved.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ca4f65e6b390d09e1de7280cf9fd4f5d8e4b48b
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Wed Jun 22 22:04:55 2005 -0700

    [NETPOLL]: Set poll_owner to -1 before unlocking in netpoll_poll_unlock()
    
    This trivial patch moves the assignment of poll_owner to -1 inside of
    the lock.  This fixes a potential SMP race in the code.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b7c84c6ada2be942eca6722edb2cfaad412cd5de
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Wed Jun 22 20:26:07 2005 -0700

    [PATCH] boot_pageset must not be freed.
    
    The boot_pageset needs to be preserved for hotplugging and for off line
    processors and nodes. Otherwise pointers will point into memory that has
    now a different use. /proc/zoneinfo is currently showing strange results
    if processors / nodes are not present.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae209cf10086b97e92e39af7cec0f84b21b6fca3
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:54 2005 +1000

    [PATCH] ppc64: Add driver for BPA iommu
    
    Implementation of software load support for the BE iommu. This is very
    different from other iommu code on ppc64, since we only do a static mapping.
    The mapping is currently hardcoded but should really be read from the
    firmware, but they don't set up the device nodes yet. There is a single
    512MB DMA window for PCI, USB and ethernet at 0x20000000 for our RAM.
    
    The Cell processor can put the I/O page table either in memory like
    the hashed page table (hardware load) or have the operating system
    write the entries into memory mapped CPU registers (software load).
    
    I use the software load mechanism because I know that all I/O page
    table entries for the amount of installed physical memory fit into
    the IO TLB cache. At the point when we get machines with more than
    4GB of installed memory, we can either use hardware I/O page table
    access like the other platforms do or dynamically update the I/O
    TLB entries when a page fault occurs in the I/O subsystem.
    
    The software load can then use the macros that I have implemented
    for the static mapping in order to do the TLB cache updates.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cebf589c822b5de87098b57644024d16f8dbc1bb
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:43 2005 +1000

    [PATCH] ppc64: Add driver for BPA interrupt controllers
    
    Add support for the integrated interrupt controller on BPA
    CPUs. There is one of those for each SMT thread.
    
    The mapping of interrupt numbers to HW interrupt sources
    is described in arch/ppc64/kernel/bpa_iic.h.
    
    This version hardcodes the 'Spider' chip as the secondary
    interrupt controller. That is not really generic for the
    architecture, but at the moment it is the only secondary
    PIC that exists.
    
    A little more work will be needed on this as soon as
    we have boards with multiple external interrupt controllers.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fef1c772fa154c16e0a54577e9ecb5480f7b937e
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:37 2005 +1000

    [PATCH] ppc64: add BPA platform type
    
    This adds the basic support for running on BPA machines.
    So far, this is only the IBM workstation, and it will
    not run on others without a little more generalization.
    
    It should be possible to configure a kernel for any
    combination of CONFIG_PPC_BPA with any of the other
    multiplatform targets.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 031f7edecf46d731673a5dd19ecb0de38f1a2219
Author: Utz Bacher <utz.bacher@de.ibm.com>
Date:   Thu Jun 23 09:43:34 2005 +1000

    [PATCH] ppc64: add a watchdog driver for rtas
    
    Add a watchdog using the RTAS OS surveillance service. This is
    provided as a simpler alternative to rtasd. The added value
    is that it works with standard watchdog client programs and
    can therefore also do user space monitoring.
    
    On BPA, rtasd is not really useful because the hardware does
    not have much to report with event-scan.
    
    The driver should also work on other platforms that support
    the OS surveillance rtas calls.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5f5b4e669a59be1cf8fc9d6d04ff1ccad8ab6de0
Author: Utz Bacher <utz.bacher@de.ibm.com>
Date:   Thu Jun 23 09:43:31 2005 +1000

    [PATCH] ppc64: add a minimal nvram driver
    
    The firmware provides the location and size of the nvram
    in the device tree, so it does not really contain any
    hardware specific bits and could be used on other
    machines as well.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6566c6f1f18d42affe73ccdd403e290b64d10473
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:28 2005 +1000

    [PATCH] ppc64: pSeries_progress -> rtas_progress
    
    The pSeries_progress function is called from some places in the rtas code,
    which may also be used by non-pSeries platforms.
    Though pSeries is currently the only platform type that implements
    display-character, the code is actually generic enough to be part of
    the rtas subsystem.
    
    I hit a bug here because the generic rtas code tried calling ppc_md.progress,
    which points to an __init function on most platforms.
    
    We could also clear the ppc_md.progress pointer when freeing the init memory
    to make it more explicit that ppc_md.progress must not be called after
    bootup.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c5a3c2e52af1bcb118022ffac9a0fd1d42d43bd3
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:23 2005 +1000

    [PATCH] ppc64: Split out generic rtas code from pSeries_pci.c.
    
    BPA is using rtas for PCI but should not be confused by
    pSeries code. This also avoids some #ifdefs. Other
    platforms that want to use rtas_pci.c could create
    their own platform_pci.c with platform specific fixups.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 773bf9c469c01f01280c9bd45ec2462dd94d08a0
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:18 2005 +1000

    [PATCH] ppc64: rename pSeries rtc functions into rtas_*
    
    The rtc rtas functions are not pSeries specific but can
    also be used by BPA and other SLOF based platforms
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 10f7e7c15e6ce41799c5dba6925ae4bf8048c870
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Jun 23 09:43:07 2005 +1000

    [PATCH] ppc64: consolidate calibrate_decr implementations
    
    pSeries and maple have almost the same code for calibrate_decr,
    and BPA would need yet another copy. Instead, I'm moving the
    code to arch/ppc64/kernel/time.c.
    
    Some of the related declarations were missing from header
    files, so I'm moving those as well.
    
    It makes sense to merge this with the pmac function of the
    same name, so we end up having just one implemetation for
    iSeries and one for Open Firmware based machines.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a4936044001694f033fe4ea94d6034d51a6b465c
Merge: 9092131... 92a8cbe...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 14:51:06 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit f31f5f051269746179b01017fc5e3dcf6b37c67e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Wed Jun 22 14:32:51 2005 -0700

    [NET]: dont use strlen() but the result from a prior sprintf()
    
    Small patch to save an unecessary call to strlen() : sprintf() gave us
    the length, just trust it.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9092131f7ea2f9e92a510ae13ac4d20165aa921c
Merge: f1b0477... eadf459...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 14:32:15 2005 -0700

    Merge rsync://client.linux-nfs.org/pub/linux/nfs-2.6

commit 92a8cbed29eb9bf6e8eec16ca29d54015bc0e8a2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 21:47:25 2005 +0100

    [PATCH] ARM: Remove explicit page-alignments in memory init
    
    Since meminfo.bank[] array contains page-aligned start/size, we
    no longer need to explicitly round up/down the addresses when
    converting to PFNs.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3a66941106855215127f8bf1afd06099b72dc75b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 21:43:10 2005 +0100

    [PATCH] ARM: Ensure memory information is page aligned
    
    Ensure that meminfo.bank[] array contains page-aligned start/size
    information.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6a17944ca12229036a6d8d48be1b5eb51204fcf8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jun 22 13:29:03 2005 -0700

    [CRYPTO]: Use CPU cycle counters in tcrypt
    
    After using this facility for a while to test my changes to the
    cipher crypt() layer, I realised that I should've listend to Dave
    and made this thing use CPU cycle counters :) As it is it's too
    jittery for me to feel safe about relying on the results.
    
    So here is a patch to make it use CPU cycles by default but fall
    back to jiffies if the user specifies a non-zero sec value.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dce907c00ff246a1fbb2b619964753ebc046591d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jun 22 13:27:51 2005 -0700

    [CRYPTO]: Use template keys for speed tests if possible
    
    The existing keys used in the speed tests do not pass the 3DES quality check.
    This patch makes it use the template keys instead.
    
    Other algorithms can supply template keys through the same interface if needed.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebfd9bcf16e4aaddcfe2d1b76b50e3dd6d3242e2
Author: Harald Welte <laforge@gnumonks.org>
Date:   Wed Jun 22 13:27:23 2005 -0700

    [CRYPTO]: Add cipher speed tests
    
    From: Reyk Floeter <reyk@vantronix.net>
    
    I recently had the requirement to do some benchmarking on cryptoapi, and
    I found reyk's very useful performance test patch [1].
    
    However, I could not find any discussion on why that extension (or
    something providing a similar feature but different implementation) was
    not merged into mainline.  If there was such a discussion, can someone
    please point me to the archive[s]?
    
    I've now merged the old patch into 2.6.12-rc1, the result can be found
    attached to this email.
    
    [1] http://lists.logix.cz/pipermail/padlock/2004/000010.html
    
    Signed-off-by: Harald Welte <laforge@gnumonks.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3cc3816f93e3f94f88503da8e6090302fa986bd6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jun 22 13:26:36 2005 -0700

    [CRYPTO]: Kill unnecessary strncpy from tcrypt
    
    It seems that bad code tends to get copied (see test_cipher_speed).  So let's
    kill this idiom before it spreads any further.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef2736fc741316913a457abd3731053071c86241
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jun 22 13:26:03 2005 -0700

    [CRYPTO]: White space and coding style clean up in tcrypt
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b46a58fd4e3cdd107ffccedaa5e233deeb94c5c0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 21:25:58 2005 +0100

    [PATCH] ARM: Use list_for_each_entry() for dmabounce
    
    Convert dmabounce.c to use list_for_each_entry() instead of
    list_for_each() + list_entry().
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f1b04770b0d073a9d70e5b3b873d274c1c19e1f6
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jun 22 15:10:02 2005 -0500

    [PATCH] ppc32: Fix building MPC8555 CDS
    
    Adding support for MPC8548 w/o PCI support, broke building MPC8555 CDS
    by trying to remove a loop variable that was used when PCI is enabled.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eadf4598e7ec37a234e70e965bd335860e58bda4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:39 2005 +0000

    [PATCH] NFS: Add debugging code to NFSv4 readdir
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6ebf3656fd18430d90fbb3199b31d08178c37134
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Wed Jun 22 17:16:39 2005 +0000

    [PATCH] NFSv4: Map a couple of NFSv4 errors to EINVAL.
    
     This shows up on running tar over NFSv4.
    
     Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 97d312d037e63e7c8ac004ffe3072f82a6d45495
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Wed Jun 22 17:16:39 2005 +0000

    [PATCH] NFSv4: add support for rdattr_error in NFSv4 readdir requests.
    
     Request RDATTR_ERROR as an attribute in readdir to distinguish between a
     directory being within an absent filesystem or one (or more) of its entries.
    
     Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8d0a8a9d0ec790086c64d210af413ac351d89e35
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:32 2005 +0000

    [PATCH] NFSv4: Clean up nfs4 lock state accounting
    
     Ensure that lock owner structures are not released prematurely.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ecdbf769b2cb8903e07cd482334c714d89fd1146
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:31 2005 +0000

    [PATCH] NLM: fix a client-side race on blocking locks.
    
     If the lock blocks, the server may send us a GRANTED message that
     races with the reply to our LOCK request. Make sure that we catch
     the GRANTED by queueing up our request on the nlm_blocked list
     before we send off the first LOCK rpc call.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4f15e2b1f4f3a56e46201714b39436c32218d547
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:31 2005 +0000

    [PATCH] NLM: cleanup for blocked locks.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 80fec4c62e2cf544ac26e53f3e0d2f73df6820b9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:31 2005 +0000

    [PATCH] VFS: Ensure that all the on-stack struct file_lock call fl_release_private
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 3da28eb1c6545fe73263a24eba0996217490e1eb
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:31 2005 +0000

    [PATCH] NFS: Replace nfs_page insertion sort with a radix sort
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c6a556b88adfacd2af90be84357c8165d716c27d
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:30 2005 +0000

    [PATCH] NFS: Make searching and waiting on busy writeback requests more efficient.
    
     Basically copies the VFS's method for tracking writebacks and applies
     it to the struct nfs_page.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ab0a3dbedc51037f3d2e22ef67717a987b3d15e2
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:30 2005 +0000

    [PATCH] NFS: Write optimization for short files and small O_SYNC writes.
    
     Use stable writes if we can see that we are only going to put a single
     write on the wire.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit fe51beecc55d0b0dce289e4758e7c529a642f63e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:30 2005 +0000

    [PATCH] NFS: Ensure that fstat() always returns the correct mtime
    
     Even if the file is open for writes.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7d52e86274e09fce8ac8f963e3605a84d0a305a7
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:30 2005 +0000

    [PATCH] NFS: Cleanup of caching code, and slight optimization of writes.
    
     Unless we're doing O_APPEND writes, we really don't care about revalidating
     the file length. Just make sure that we catch any page cache invalidations.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 951a143b3fcf15cfa9d38250b7462f821db241db
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:30 2005 +0000

    [PATCH] NFS: Fix the file size revalidation
    
     Instead of looking at whether or not the file is open for writes before
     we accept to update the length using the server value, we should rather
     be looking at whether or not we are currently caching any writes.
    
     Failure to do so means in particular that we're not updating the file
     length correctly after obtaining a POSIX or BSD lock.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 08e9eac42edab63bce14b5c8419771f3c92aa3f4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:29 2005 +0000

    [PATCH] NFSv4: Fix up races in nfs4_proc_setattr()
    
     If we do not hold a valid stateid that is open for writes, there is little
     point in doing an extra open of the file, as the RFC does not appear to
     mandate this...
    
     Make setattr use the correct stateid if we're holding mandatory byte
     range locks.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 202b50dc127cf4714ffdcc6a64f1648373f9414f
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:29 2005 +0000

    [PATCH] NFSv4: Ensure that propagate NFSv4 state errors to the reclaim code
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f0dd2136da6d2070e12bfa6d199b136318e666c7
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:29 2005 +0000

    [PATCH] NFS: Clean up readdir changes.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 00a926422765064cb28e218d4837411c88bf6a3e
Author: Olivier Galibert <galibert@pobox.com>
Date:   Wed Jun 22 17:16:29 2005 +0000

    [PATCH] NFS: Hide NFS server-generated readdir cookies from userland
    
     NFSv3 currently returns the unsigned 64-bit cookie directly to
     userspace. The following patch causes the kernel to generate
     loff_t offsets for the benefit of userland.
     The current server-generated READDIR cookie is cached in the
     nfs_open_context instead of in filp->f_pos, so we still end up work
     correctly under directory insertions/deletion.
    
     Signed-off-by: Olivier Galibert <galibert@pobox.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ae3884621bf5b4caff7785b9a417f262202965b2
Author: Chuck Lever <cel@netapp.com>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] RPC: kick off socket connect operations faster
    
     Make the socket transport kick the event queue to start socket connects
     immediately.  This should improve responsiveness of applications that are
     sensitive to slow mount operations (like automounters).
    
     We are now also careful to cancel the connect worker before destroying
     the xprt.  This eliminates a race where xprt_destroy can finish before
     the connect worker is even allowed to run.
    
     Test-plan:
     Destructive testing (unplugging the network temporarily).  Connectathon
     with UDP and TCP.  Hard-code impossibly small connect timeout.
    
     Version: Fri, 29 Apr 2005 15:32:01 -0400
    
     Signed-off-by: Chuck Lever <cel@netapp.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 20e5ac828dfd23b9080159c62a34f32d2dcd92fc
Author: Chuck Lever <cel@netapp.com>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] RPC: TCP reconnects are too slow
    
     When the network layer reports a connection close, the RPC task
     waiting to reconnect should be notified so it can retry immediately
     instead of waiting for the normal connection establishment timeout.
    
     This reverts a change made in 2.6.6 as part of adding client support
     for RPC over TCP socket idle timeouts.
    
     Test-plan:
     Destructive testing with NFS over TCP mounts.
    
     Version: Fri, 29 Apr 2005 15:31:46 -0400
    
     Signed-off-by: Chuck Lever <cel@netapp.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 0f9dc2b16884bb5957d010ed8e9114e771a05916
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] RPC: Clean up socket autodisconnect
    
     Cancel autodisconnect requests inside xprt_transmit() in order to avoid
     races.
     Use more efficient del_singleshot_timer_sync()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 14b218a8e4f110206c46e586a3da372f665631e7
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] RPC: Ensure rpc calls respects the RPC_NOINTR flag
    
     For internal purposes, the rpc_clnt_sigmask() call is replaced by
     a call to rpc_task_sigmask(), which ensures that the current task
     sigmask respects both the client cl_intr flag and the per-task NOINTR flag.
    
     Problem noted by Jiaying Zhang.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 455a396710b71a743b28da2ed2185e5a9b38e26f
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] NFSv4: Fix an Oops in the callback code.
    
     The changeset "trond.myklebust@fys.uio.no|ChangeSet|20050322152404|16979"
     (RPC: Ensure XDR iovec length is initialized correctly in call_header)
     causes the NFSv4 callback code to BUG() due to an incorrectly initialized
     scratch buffer.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c56c2750229154f6a1cfee533e0a911da3923b5a
Author: Reuben Farrelly <reuben-lkml@reub.net>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] NFSv4: Fix build warning
    
     From: Reuben Farrelly <reuben-lkml@reub.net>
    
     With gcc-4.0:
    
     fs/nfs/nfs4proc.c:2976: error: static declaration of
     'nfs4_file_inode_operations' follows non-static declaration
     fs/nfs/nfs4_fs.h:179: error: previous declaration of
     'nfs4_file_inode_operations' was here
    
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 3e9d41543b16e6117267edc0ca058c40f888d81a
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] NFSv4: empty array fix
    
     Older gcc's don't like this.
    
     fs/nfs/nfs4proc.c:2194: field `data' has incomplete type
    
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b7ef19560f496fd3942e41e728950e5b5c9a461b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] NFSv4: fs/nfs/nfs4proc.c: small simplification
    
     The Coverity checker noticed that such a simplification was possible.
    
     Signed-off-by: Adrian Bunk <bunk@stusta.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 213484254c65e3c39c59df454132748b1367f816
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:28 2005 +0000

    [PATCH] fix nfsacl pointer arithmetic and pg_class initialization bugs
    
    * Pointer arithmetic bug: p is in word units. This fixes a memory
      corruption with big acls.
    * Initialize pg_class to prevent a NULL pointer access.
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 458818ed76d3f495f9f32373c936456c9427f759
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:27 2005 +0000

    [PATCH] NFS: Fix up v3 ACL caching code
    
     Initialize the inode cache values correctly.
     Clean up __nfs3_forget_cached_acls()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5c6a9f7d92291c832d47e792ed1fafa44acb066e
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:27 2005 +0000

    [PATCH] NFS: Cache the NFSv3 acls.
    
     Attach acls to inodes in the icache to avoid unnecessary GETACL RPC
     round-trips.  As long as the client doesn't retrieve any acls itself, only the
     default acls of exiting directories and the default and access acls of new
     directories will end up in the cache, which preserves some memory compared to
     always caching the access and default acl of all files.
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 055ffbea0596942579b0dae71d5dab78de8135f6
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:27 2005 +0000

    [PATCH] NFS: Fix handling of the umask when an NFSv3 default acl is present.
    
     NFSv3 has no concept of a umask on the server side: The client applies
     the umask locally, and sends the effective permissions to the server.
     This behavior is wrong when files are created in a directory that has a
     default ACL.  In this case, the umask is supposed to be ignored, and
     only the default ACL determines the file's effective permissions.
    
     Usually its the server's task to conditionally apply the umask.  But
     since the server knows nothing about the umask, we have to do it on the
     client side.  This patch tries to fetch the parent directory's default
     ACL before creating a new file, computes the appropriate create mode to
     send to the server, and finally sets the new file's access and default
     acl appropriately.
    
     Many thanks to Buck Huppmann <buchk@pobox.com> for sending the initial
     version of this patch, as well as for arguing why we need this change.
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b7fa0554cf1ba6d6895cd0a5b02989a26e0bc704
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:27 2005 +0000

    [PATCH] NFS: Add support for NFSv3 ACLs
    
     This adds acl support fo nfs clients via the NFSACL protocol extension, by
     implementing the getxattr, listxattr, setxattr, and removexattr iops for the
     system.posix_acl_access and system.posix_acl_default attributes.  This patch
     implements a dumb version that uses no caching (and thus adds some overhead).
     (Another patch in this patchset adds caching as well.)
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a257cdd0e2179630d3201c32ba14d7fcb3c3a055
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:26 2005 +0000

    [PATCH] NFSD: Add server support for NFSv3 ACLs.
    
     This adds functions for encoding and decoding POSIX ACLs for the NFSACL
     protocol extension, and the GETACL and SETACL RPCs.  The implementation is
     compatible with NFSACL in Solaris.
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9ba02638e4be28dd4ff724202a640264427c62d1
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:24 2005 +0000

    [PATCH] RPC: Allow the sunrpc server to multiplex serveral programs on a single port
    
     The NFS and NFSACL programs run on the same RPC transport.  This patch adds
     support for this by converting svc_program into a chained list of programs
     (server-side).
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Signed-off-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a838cc49d9a7d5652262a6d1b628628cadffa877
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:24 2005 +0000

    [PATCH] NFSD: Add NFS3ERR_NOTSUPP to the nfsd error mapping table
    
     Add the missing NFS3ERR_NOTSUPP error code (defined in NFSv3) to the
     system-to-protocol-error table in nfsd.  The nfsacl extension uses this error
     code.
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Signed-off-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andrew Morton <akpm@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bd8100e7eda87507649c6ba4cb32173b34e49986
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:24 2005 +0000

    [PATCH] RPC: Encode and decode arbitrary XDR arrays
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7e06b53d796a3740307b54aa2799077f8a0c84e7
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:24 2005 +0000

    [PATCH] RPC: fix accounting bug in the case of a truncated RPC message
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit e053d1ab62c8ef0eff3dd4c95448cad3c6d2fbf4
Author: Olaf Kirch <okir@suse.de>
Date:   Wed Jun 22 17:16:24 2005 +0000

    [PATCH] RPC: Lazy RPC receive buffer allocation
    
     Signed-off-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 007e251f2b2760f738c92adc8c80cbae0bed3ce5
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] RPC: Allow multiple RPC client programs to share the same transport
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Acked-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit cdf477068e6db0c3e19df96f46abb85202de138c
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] RPC: Return -EPFNOSUPPORT for RPC programs that are unavailable
    
     Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
     Signed-off-by: Olaf Kirch <okir@suse.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6a19275ada9137435da58990c8f8d3f58e170bf1
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] RPC: [PATCH] improve rpcauthauth_create error returns
    
     Currently we return -ENOMEM for every single failure to create a new auth.
     This is actually accurate for auth_null and auth_unix, but for auth_gss it's a
     bit confusing.
    
     Allow rpcauth_create (and the ->create methods) to return errors.  With this
     patch, the user may sometimes see an EINVAL instead.  Whee.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 438b6fdebf2a2e8573e7290bc176feb4d4475f43
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] RPC: Don't fall back from krb5p to krb5i
    
     We shouldn't be silently falling back from krb5p to krb5i.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit e50a1c2e1f816c81eed6a589019052cb44189267
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] NFSv4: client-side caching NFSv4 ACLs
    
     Add nfs4_acl field to the nfs_inode, and use it to cache acls.  Only cache
     acls of size up to a page.  Also prepare for up to a page of acl data even
     when the user doesn't pass in a buffer, as when they want to get the acl
     length to decide what size buffer to allocate.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4b580ee3dc00f9828a9a7aad2724f448fdc94075
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:23 2005 +0000

    [PATCH] NFSv4: ACL support for the NFSv4 client: write
    
     Client-side write support for NFSv4 ACLs.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 23ec6965c20db96bc8ea7af0ec178f074dd31c40
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFSv4: Client-side xdr for writing NFSv4 acls
    
     Client-side support for NFSv4 acls: xdr encoding and decoding routines for
     writing acls
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit aa1870af92d8f6d6db0883696516a83ff2b695a6
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFSv4: ACL support for the NFSv4 client: read
    
     Client-side support for NFSv4 ACLs.  Exports the raw xdr code via the
     system.nfs4_acl extended attribute.  It is up to userspace to decode the acl
     (and to provide correctly xdr'd acls on setxattr), and to convert to/from
     POSIX ACLs if desired.
    
     This patch provides only the read support.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 029d105e66e5a90850d5a09dad76815d0bcfcaa3
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFSv4: Client-side xdr for reading NFSv4 acls
    
     Client-side support for NFSv4 acls: xdr encoding and decoding routines for
     reading acls
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 96928206961be05f22c3839f0097b610cc485b5d
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFSv4: fix fattr size calculations
    
     Make nfs4 fattr size calculations more explicit, revising them downward a
     bit in the process.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6b3b5496d7b261d6c9202008dc528e52dbd11e57
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFSv4: Add {get,set,list}xattr methods for nfs4
    
     Add {get,set,list}xattr methods for nfs4.  The new methods are no-ops, to be
     used by subsequent ACL patch.
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ada70d9425bcc5e376fef8591e4e76e204c0834c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFS: Add hooks to allow common NFS attribute code to clear cached acls
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 92cfc62cb8412c9563860b1bf70cd4701f03092e
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Jun 22 17:16:22 2005 +0000

    [PATCH] NFS: Allow NFS versions to support different sets of inode operations.
    
     ACL support will require supporting additional inode operations in v4
     (getxattr, setxattr, listxattr).  This patch allows different protocol versions
     to support different inode operations by adding a file_inode_ops to the
     nfs_rpc_ops (to match the existing dir_inode_ops).
    
     Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 464a98bd70bae8c559cfc82af799faf44824ce64
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:21 2005 +0000

    [PATCH] NFS: cleanup: shrink struct nfs_open_context
    
     Remove the wait queue, and replace the functions that depended on it
     with wait_on_bit().
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 96651ab341cde0fee940ec837f323d711cbfa7d5
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:21 2005 +0000

    [PATCH] RPC: Shrink struct rpc_task by switching to wait_on_bit()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a656db998785324a818005bcf71bae6dcbbb3cf5
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:21 2005 +0000

    [PATCH] NFS: Remove unused NFS inode field readdir_timestamp.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4ce79717ce32a9f88c1ddce4b9658556cb59d37a
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:21 2005 +0000

    [PATCH] NFS: Header file cleanup...
    
     - Move NFSv4 state definitions into a private header file.
     - Clean up gunk in nfs_fs.h
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9085bbcb76421a90bea28f4d3d03fa9977319c49
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:20 2005 +0000

    [PATCH] NFS: Kill annoying mount version mismatch printks
    
     Ensure that we fix up the missing fields in the nfs_mount_data with
     sane defaults for older versions of mount, and return errors in the
     cases where we cannot.
    
     Convert a bunch of annoying warnings into dprintks()
    
     Return -EPROTONOSUPPORT rather than EIO if mount() tries to set NFSv3
     without it actually being compiled in.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5ee0ed7d3ab620a764740fb018f469d45f561931
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:20 2005 +0000

    [PATCH] RPC: Make rpc_create_client() probe server for RPC program+version support
    
     Ensure that we don't create an RPC client without checking that the server
     does indeed support the RPC program + version that we are trying to set up.
    
     This enables us to immediately return an error to "mount" if it turns out
     that the server is only supporting NFSv2, when we requested NFSv3 or NFSv4.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5b616f5d596c0b056129f8aeafbc08409b3cd050
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:20 2005 +0000

    [PATCH] RPC: Make rpc_create_client() destroy the transport on failure.
    
     This saves us a couple of lines of cleanup code for each call.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 334ccfd545bba9690515f2c5c167d5adb161989b
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:19 2005 +0000

    [PATCH] RPC: Ensure XDR iovec length is initialized correctly in call_header
    
     Fix up call_header() so that it calls xdr_adjust_iovec().
     Fix calculation of the scratch buffer length in xdr_init_encode().
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d05fdb0cec75415b2d9eb95748386e67414e49c3
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 22 17:16:19 2005 +0000

    [PATCH] RPC: Fix a race with rpc_restart_call()
    
     If the task->tk_exit() wants to restart the RPC call after delaying
     then the current RPC code will clobber the timer by calling
     rpc_delete_timer() immediately after re-entering the loop in
     __rpc_execute().
    
     Problem noticed by Oleg Nesterov <oleg@tv-sign.ru>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bdf042486a01aefaf29d74be1b4526daa70a5f0f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 20:58:29 2005 +0100

    [PATCH] ARM: Factor out common pmd_populate functionality
    
    Both pmd_populate variants set two pmd entries before
    ensuring that they are flushed from the cache.  Separate
    this functionality into __pmd_populate().
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dd7f0b80926befc8c70a873b5b0c0c7b5fd1e7b9
Author: Harald Welte <laforge@netfilter.org>
Date:   Wed Jun 22 12:38:33 2005 -0700

    [NETFILTER]: Fix "iptables -D" rule deletion with ipt_CLUSTERIP target.
    
    The patch just changes the order of structure members.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5d927eb0101eb791fb2d4f72b49a2da5faf01941
Author: Harald Welte <laforge@netfilter.org>
Date:   Wed Jun 22 12:37:50 2005 -0700

    [NETFILTER]: Fix handling of ICMP packets (RELATED) in ipt_CLUSTERIP target.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e00d349e7781a92cf35b242259c9e5341a9661bb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 20:26:05 2005 +0100

    [PATCH] ARM: Move signal return code into vector page
    
    Move the signal return code into the vector page instead of placing
    it on the user mode stack, which will allow us to avoid flushing
    the instruction cache on signals, as well as eventually allowing
    non-exec stack.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fb7a0e36532bc231bea8adfb1dddc3961eb38940
Merge: 4e93d3e... 29516d7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 12:22:12 2005 -0700

    Merge kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git
    
    Do arch/ia64/defconfig by hand.

commit 4e93d3e8859c834ee18dfd33051d24df8669d0c0
Merge: a0cd30f... 0087e5e...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 10:42:54 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit a0cd30fd26a398c0c6e50c6760610d4529f17a84
Merge: 94eb7f4... e5c515b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 22 10:41:59 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/w1-2.6

commit 94eb7f4cefaf3ed8e97504ce4f3946bdb908e501
Author: James Morris <jmorris@redhat.com>
Date:   Wed Jun 22 12:55:42 2005 -0400

    [PATCH] Update my credits entry

commit b53542073927878b18d642f6bf794adef6d45a18
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Jun 22 09:58:03 2005 -0500

    [PATCH] Fix extra double quote in IPV4 Kconfig
    
    Kconfig option had an extra double quote at the end of the line
    which was causing in warning when building.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b6b22f3815b2937f272d3666bd18665d3f7f5a8
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Jun 18 13:50:22 2005 +0200

    [ALSA] emu10k1: Add more card identification entries.
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit b3e28ce98a22a4ecc8101128fe18665ab29d3236
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 17 11:54:50 2005 +0200

    [ALSA] Add dxs_support for Soltek SL-K8Tpro-939
    
    VIA82xx driver
    Added dxs_support entry for  Soltek SL-K8Tpro-939.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit dabbed6f729d806092851150ca3dd9efe2b64b58
Author: Matt <matt@embeddedalley.com>
Date:   Tue Jun 14 10:19:34 2005 +0200

    [ALSA] SigmaTel HDA SPDIF and input mux updates
    
    HDA Codec driver
    Adds SPDIF in/out support to the SigmaTel HDA codecs. Now builds
    the input mux control element names from the defcfg regs.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ee3b4c60f452f8e24fe30ae73cb97da1beda0ca2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 14 10:18:20 2005 +0200

    [ALSA] via82xx - Fix info text about dxs_support option
    
    VIA82xx driver
    Fixed the info text about dxs_support option (suggest dxs_support=5).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e9edcee061a80181f0d6e7cada07e1898c14718e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 13 14:16:38 2005 +0200

    [ALSA] hda-codec - More fix of ALC880 codec support
    
    Documentation,HDA Codec driver,HDA generic driver,HDA Intel driver
    - Fix some invalid configurations, typos in the last patch
    - Make init_verbs chainable, so that different configs can share the same
      init_verbs
    - Reorder and clean up the source codes in patch_realtek.c
    - Add the pin default configuration parser, used commonly in cmedia
      and realtek patch codes.
    - Add 'auto' model to ALC880 for auto-configuration from BIOS
      Use this model as default, and 3-stack as fallback
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b636a71d9b9525ee51ca872d461817a5bd5c39fd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 13 14:13:09 2005 +0200

    [ALSA] Add const prefix
    
    Control Midlevel
    Add const prefix to snd_kcontrol_new_t pointer for better protection.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 16ded525389c31256bcc9fd44352ab799b60b7fc
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 10 19:58:24 2005 +0200

    [ALSA] hda-codec - Add support of more models with ALC codecs
    
    HDA Codec driver,HDA Intel driver
    Merged the work of pshou <pshou@realtek.com.tw> for the support of
    more models with ALC codecs: ALC880 ASUS, Uniwill, FSC1734, generic 6-stack,
    and ALC260 HP.  Tests with the real hardwares are appreciated.
    
    The codec patch is cleaned up:  The preset configuration of codecs are
    stored in the table and copied to the spec instance.
    
    Added/fixed comments.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5ecd7022f52872db32eddf85a527064ed7b522a3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 10 19:54:23 2005 +0200

    [ALSA] hda-codec - Allow sub_device=0 in board config check
    
    HDA Codec driver
    Allow sub_device=0 in board config check.  This means that every device
    with the given sub vendor ID will match.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 05acb863a27e7f82d81c422b977415fa80b99f96
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 10 19:50:25 2005 +0200

    [ALSA] hda-codec - Clean up and fix ALC-codec support code
    
    HDA Codec driver
    Clean up and fix ALC-codec support code.
    
    The last addition of bound volume is fixed now to handle correctly
    the bound 'mute switches'.  The analog loopback should work better.
    The init verbs are fixed together with this change.
    
    The numbers are replaced with macros for better readability.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4b3acaf5b56f53ef259a6ddf8e17dcb529631d9b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 10 19:48:10 2005 +0200

    [ALSA] hda-codec - Feed front signals to all surrounds
    
    HDA Codec driver
    Feed front signals to all surround channels if no data is given
    for surround channels.
    
    It seems that CLFE works as expected (only center outputs) even if
    connected from the front line - at least on my test system.
    If this change causes problems on other system (e.g. only the left
    channel is transferred to the center channel), please let me know...
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3e289f16ec2e08bbb37ce57a31386ed135887da4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 10 19:45:09 2005 +0200

    [ALSA] hda-codec - Print all AMP IN values
    
    HDA generic driver
    Print all AMP IN values when multiple nodes are connected.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1ccc67d692c52dcc02e70206338ff36ac145a939
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 8 14:49:31 2005 +0200

    [ALSA] Disable MPU401 on SIS7018
    
    Trident driver
    Disable MPU401 support on SIS7018 since it results in kernel freeze.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41e41f1f3495c6a7443977d2842d6911e3dcf31c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 8 14:48:49 2005 +0200

    [ALSA] Fix the analog loopback volumes of ALC codecs
    
    HDA Codec driver
    Fix the analog loopback volumes of ALC codecs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ead9b7c39984f509dc42d81200109c01a0b689c2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 8 14:48:19 2005 +0200

    [ALSA] Fix the PCM mixer switch for AD1986A
    
    HDA Codec driver
    Fix the PCM mixer switch for AD1986a (it was a typo).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4a19faee6332fad8f81eaa98cf0e3be15a2366c4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 8 14:43:58 2005 +0200

    [ALSA] Fix the handling of amp cache in hda-codec
    
    HDA Codec driver
    Fixed the handling of amp cache in hda-codec driver.
    The confliction of cache values with different indices should be fixed now.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 96d078154bca743512102e370a03fb71d56478f5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jun 7 08:56:24 2005 +0200

    [ALSA] via82xx - fixed entry for Umax AB 595T (VIA K8N800A - VT8237)
    
    VIA82xx driver
    As the original reporter noted, the NO_VRA must be used for loud volumes.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c82bf829c01079e77286481884eacb229310b4f0
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Jun 4 15:03:06 2005 +0200

    [ALSA] ca0106: Fix 96000 Hz audio playback.
    
    CA0106 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 5470440a2a1f5e8afe7df306fdbf26e6b1143975
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 3 11:27:00 2005 +0200

    [ALSA] Add documentation for HDSP MADI
    
    Documentation
    Added documentation for HDSP MADI driver by Winfried Ritsch.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 763f356cd8de9e158836d236b3fd9dd149d696f9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 3 11:25:34 2005 +0200

    [ALSA] Add HDSP MADI driver
    
    HDSPM driver,PCI drivers,RME9652 driver
    Added RME Hammerfall DSP MADI driver by Winfried Ritsch.
    (Moved from alsa-driver tree to mainline.)
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 375389288ae55754bd7d009a30f2bb0453a5b369
Author: Christoph Schulz <develop@kristov.de>
Date:   Fri Jun 3 08:28:31 2005 +0200

    [ALSA] cs4236-irq-handling-fix.patch
    
    CS4236+ driver
    Background: The card/chipset supports an external MIDI interrupt.  By
    default, this interrupt isn't used (because the isapnp mechanism chooses a
    configuration without an assigned interrupt).  If the user wishes to
    explicitly select an interrupt via the mpu_irq parameter for such a
    configured device, it doesn't work: The driver always shows:
    
    isapnp MPU: port=0x330, irq=-1
    
    (note the 'irq=-1')
    
    Problem: The driver only allows to set the irq if pnp_irq_valid returns
    true for this particular pnp device.  This, however, is only true if an
    interrupt has already been assigned (pnp_valid_irq returns true if the flag
    IORESOURCE_IRQ is set and IORESOURCE_UNSET is not set).  If no interrupt
    has been assigned so far, IORESOURCE_UNSET is set and pnp_irq_valid returns
    false, thereby inhibiting the selection of a valid irq.
    
    Solution: Don't check for a valid (= already assigned) irq at the point of
    calling pnp_resource_change.
    
    Tested successfully on Linux 2.6.11.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5ac0fab95c09497bed24640eb3f09893127d6d65
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue May 31 16:59:39 2005 +0200

    [ALSA] OSS PCM emulation - The 2nd final fix for SNDCTL_DSP_GETOPTR problem
    
    ALSA<-OSS emulation
    The problem was negative/wrong result (info.bytes) in a specific condition at
    playback startup.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 98c7f2121d4263867710df3b5124980e25261188
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 31 16:52:58 2005 +0200

    [ALSA] Add FSC T3010 quirk
    
    Intel8x0 driver
    Added ac97_quirk for FSC T3010.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fb4bd0adc4b5b6538933b098a67851d8f99b5ca3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue May 31 15:44:23 2005 +0200

    [ALSA] OSS PCM emulation - The final fix for SNDCTL_DSP_GETOPTR problem
    
    ALSA<-OSS emulation
    The problem was negative result (info.bytes) in a specific condition at
    playback startup.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 21cb2a2ec5818cbba01bcb7f24388670322c77f9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 31 14:35:31 2005 +0200

    [ALSA] Fix races between PCM drain and other ops
    
    PCM Midlevel
    Fix semaphore races between PCM drain and other ops.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ce43fbaececc82196d321671159483b3287de128
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 30 20:33:44 2005 +0200

    [ALSA] hda-intel - Fix Oops in the error path
    
    HDA Intel driver
    Fixed Oops in the error path from probe function of snd-hda-intel driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b6a969155b04416185f368bd4e2f1d49b17c1ee1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 30 18:27:03 2005 +0200

    [ALSA] Add write support to snd-page-alloc proc file
    
    Documentation,Memalloc module,RME HDSP driver,RME9652 driver
    Add the write support to snd-page-alloc proc file for buffer pre-allocation.
    Removed the pre-allocation codes via module options.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4d572776d4dfa2d5385a2ec3acec3cc059149e13
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon May 30 17:30:32 2005 +0200

    [ALSA] Remove redundant NULL checks before kfree
    
    Timer Midlevel,ALSA sequencer,ALSA<-OSS sequencer,Digigram VX core
    I2C tea6330t,GUS Library,VIA82xx driver,VIA82xx-modem driver
    CA0106 driver,CS46xx driver,EMU10K1/EMU10K2 driver,YMFPCI driver
    Digigram VX Pocket driver,Common EMU synth,USB generic driver,USB USX2Y
    Checking a pointer for NULL before calling kfree() on it is redundant,
    kfree() deals with NULL pointers just fine.
    This patch removes such checks from sound/
    
    This patch also makes another, but closely related, change.
    It avoids casting pointers about to be kfree()'ed.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6fd8b87f0e1e5de436ba020bd5806fe9ad738269
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Mon May 30 17:20:19 2005 +0200

    [ALSA] AC97 - renamed vendor/device to subvendor/subdevice where appropriate
    
    Intel8x0 driver
    To avoid confusion, the structure members vendor/device were renamed
    to subvendor/subdevice, because we compare them with PCI subsystem vendor
    and subsystem device.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 69ad07cf98d0ef65cac67bac2ea4381bb499bea8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon May 30 14:48:16 2005 +0200

    [ALSA] AC97 - renamed vendor/device to subvendor/subdevice where appropriate
    
    AC97 Codec,ATIIXP driver,VIA82xx driver
    To avoid confusion, the structure members vendor/device were renamed
    to subvendor/subdevice, because we compare them with PCI subsystem vendor
    and subsystem device.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 745cac56ba6b0222d97a4bf0e347149f20518bf1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon May 30 11:49:05 2005 +0200

    [ALSA] via82xx - added 0x1071/0x8399 to while list
    
    VIA82xx driver
    - 0x1071, 0x8399 == VIA_DXS_ENABLE
    - Umax AB 595T (VIA K8N800A - VT8237)
    - reporter: Honza Machacek <Hloupy.Honza@centrum.cz>
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5cbff89cbc1087870c32ecb0b7f1965f93ec5401
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Mon May 30 08:09:56 2005 +0200

    [ALSA] Modem support for ALI5451
    
    ALI5451 driver
    This patch adds modem support for ali5451. Since it is same pci device
    all is done in ali5451.c.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 299676b1d792ca643f37ff4f3275694a841739b7
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sun May 29 15:21:02 2005 +0200

    [ALSA] sound/pci/ca0106: Use the DMA_32BIT_MASK constant
    
    CA0106 driver
    Use the DMA_32BIT_MASK constant from dma-mapping.h
    when calling pci_set_dma_mask() or pci_set_consistent_dma_mask()
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 83a5b72ad7c7cbd0d155d922733b2429f46801bf
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Sun May 29 15:10:07 2005 +0200

    [ALSA] PCI modem drivers update
    
    ATIIXP-modem driver,Intel8x0-modem driver,VIA82xx-modem driver
    Modem drivers (atiixp-modem, intel8x0m, via82xx-modem) migration
    for using MC97 generic modem mixer for off-hook operation.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 87d61c290b5de63cc18ed5ec8103e30fe297373e
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Sun May 29 15:08:23 2005 +0200

    [ALSA] MC97 modem mixer in sound/pci/ac97
    
    AC97 Codec
    Simple MC97 modem mixer with two common controls: Off-hook and CID,
    and Si3056 MC specific control: Modem Speaker.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8fabab15dc64d4aaed0e9dddf3482c128a0347a2
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 28 16:35:49 2005 +0200

    [ALSA] Be more specific with which I2C channel to use.
    
    CA0106 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 883130b476e7f8baa608dabe52c455ac351f7c39
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 28 13:28:21 2005 +0200

    [ALSA] Implement S32_LE(24bit) and 96000 capture rates etc.
    
    CA0106 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit ed144f3cdcf8f9b9280e04ca1a831c85a8fbb488
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Fri May 27 23:28:27 2005 +0200

    [ALSA] Add Mic capture support.
    
    CA0106 driver
    Notes: This adds a new mixer item to switch between Mic and Line-in.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 7199acdc74dc16d2e75f83b8c65301ad19c40ef3
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Fri May 27 22:07:23 2005 +0200

    [ALSA] Implement support for Line-in capture on SB Live 24bit.
    
    CA0106 driver
    Notes: MIC capture not tested yet.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit da04b128cf0d74dd4cab270c53d9264e70f9203e
Merge: fae6ec6... 2a5a68b...
Author: Jaroslav Kysela <perex@petra>
Date:   Wed Jun 22 12:19:24 2005 +0200

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 052162198b89e64d37c20238412674152d614997
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 09:56:57 2005 +0100

    [PATCH] ARM: Allow clps7500 to build without parsing "acorn" tag
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ebe2a9ffa148746bae62d0f7188590a85f29f9ed
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 09:55:04 2005 +0100

    [PATCH] ARM: Allow riscpc to parse "acorn" boot info tag
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 522c37b9d3bc2554264c2d7cbba439571a2043fb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 22 09:52:26 2005 +0100

    [PATCH] ARM: Fix sa1111.c build error caused by klist changes
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0087e5ef577d0d6e664be7ab4be513b6a482e7ec
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 14:25:45 2005 -0700

    [PATCH] I2C: fix ds1374 build
    
    Not all architectures implement asm/rtc.h
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c7a530463ced6011789937b24dc2bfba43c706b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 16 19:24:14 2005 +0200

    [PATCH] I2C: w83781d: remove non-i2c sensor chips
    
    This patch removes the support for the W83697HF and W83627THF chips from
    the w83781d driver. These chips have no I2C/SMBus interface and are
    better supported by the Super-I/O-based w83627hf driver. Documentation
    was updated to reflect the support drop.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a45cfe2cd7450e56b4f44802b34faaf2a78a6cdb
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 9 17:39:09 2005 +0200

    [PATCH] I2C: fix up ds1374.c driver so it will build.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bdca3f0aedde85552099aa95ab1449bf81e4f6f5
Author: Randy Vinson <rvinson@mvista.com>
Date:   Fri Jun 3 14:43:56 2005 -0700

    [PATCH] I2C: Add support for Maxim/Dallas DS1374 Real-Time Clock Chip (2/2)
    
    This change provides support for the DS1374 Real-Time Clock chip present
    on the MPC8349ADS board. It depends on a previous patch which adds I2C
    support for the DS1374.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c124a78d8c7475ecc43f385f34112b638c4228d9
Author: Randy Vinson <rvinson@mvista.com>
Date:   Fri Jun 3 14:36:06 2005 -0700

    [PATCH] I2C: Add support for Maxim/Dallas DS1374 Real-Time Clock Chip (1/2)
    
    Add support for Maxim/Dallas DS1374 Real-Time Clock Chip
    
    This change adds support for the Maxim/Dallas DS1374 RTC chip. This chip
    is an I2C-based RTC that maintains a simple 32-bit binary seconds count
    with battery backup support.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 69dd204b6b45987dbf9ce7058cd238d355865281
Author: bgardner@wabtec.com <bgardner@wabtec.com>
Date:   Tue Jun 7 08:55:38 2005 -0500

    [PATCH] I2C: add new pca9539 driver
    
    This is an i2c driver for the Philips PCA9539 (16 bit I/O port).
    It uses the new i2c-sysfs interfaces.
    The patch includes documentation.
    It depends on the patch that renames "i2c-sysfs.h" to "hwmon-sysfs.h"
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10c08f8100ee2c4d27b862635574cdf4ef439e67
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 6 19:34:45 2005 +0200

    [PATCH] I2C: rename i2c-sysfs.h to hwmon-sysfs.h
    
    This patch renames the new linux/i2c-sysfs.h header file to
    linux/hwmon-sysfs.h. This names seems to be more appropriate since this
    file defines macros and structures not related to i2c but to hardware
    monitoring drivers. The patch also updates the five hardware monitoring
    driver which include that header file already.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c3bc4caedd84ad03360cb9ec04b6c44ab314588b
Author: BGardner@Wabtec.com <BGardner@Wabtec.com>
Date:   Fri Jun 3 13:03:27 2005 -0400

    [PATCH] max6875: new i2c device driver
    
    This patch adds support for the MAX6875/MAX6874 chips.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20ad93d4e5cf5f0616198b5919ee9f304119dd4b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 5 11:53:25 2005 +0200

    [PATCH] I2C: drivers/i2c/chips/it87.c: use dynamic sysfs callbacks
    
    This patch modifies the it87 hardware monitoring driver to take benefit
    of the new sysfs callback features introduced by Yani Ioannou, making
    the code much clearer and the resulting driver significantly smaller.
    
    From: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc51ae1159c0c9a34d2400a8449e1fca3ee965b4
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 5 20:32:27 2005 +0200

    [PATCH] I2C: lm63 uses new sysfs callbacks
    
    I updated the lm63 hardware monitoring driver to take benefit of Yani
    Ioannou's new sysfs callback capabilities.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a86c05121a3f56b4b928ed43f9f8ffc1376d802
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 5 21:16:39 2005 +0200

    [PATCH] I2C: lm83 uses new sysfs callbacks
    
    I updated the lm83 hardware monitoring driver to take benefit of Yani
    Ioannou's new sysfs callback capabilities.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30d7394b1a3df0e7cc145a543846109babd4d53b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 5 21:27:28 2005 +0200

    [PATCH] I2C: lm90 uses new sysfs callbacks
    
    I updated the lm90 hardware monitoring driver to take benefit of Yani
    Ioannou's new sysfs callback capabilities.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0ef14837a2298a4748e2a3e8e206f086dd3b21a
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Fri Jun 3 10:05:19 2005 +1000

    [PATCH] I2C: add adm9240 driver documentation
    
    This patch adds adm9240 driver doc, with thanks to Rudolf Marek
    for review.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Acked-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eb071cbbc38efa4b1d707f540de2ec6283ab0894
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jun 4 13:17:43 2005 +0200

    [PATCH] I2C: pcf8574 driver cleanup
    
    I found a possible cleanup in the pcf8574 driver. We don't need to store
    the read value in our private data structure, as we then never use it
    again. I asked Aurelien and he is fine with the change. Please apply,
    thanks.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5d740fe9fefda41292b5cabe70f4f8eff9f8aad0
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Sat May 28 11:26:24 2005 +0000

    [PATCH] I2C: KConfig update - some EXPERIMENTAL removal
    
    Following patch removes EXPERIMENTAL flag from some of I2C bus and chip
    drivers. It is removed when the driver is in kernel at least from
    2.6.3 and I generally think there is no problem with it.
    
    Also this patch adds SiS 745 to help option of sis96x and it
    also fixes nForce2 driver entry to reflect current state.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 828621dda6381093ceafbe9381b6118cae3f9b13
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Thu May 26 12:42:29 2005 +0000

    [PATCH] I2C: documentation update 3/3
    
    This patch adds information about available userspace utillities
    for system health monitoring drivers.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f15b66468b7003d5241e352a007e73be5519b20
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Thu May 26 12:42:19 2005 +0000

    [PATCH] I2C: documentation update 2/3
    
    This patch adds missing documentation for system health monitoring chips.
    I would like to thank all people, who helped me with this project.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2bf34a1ca9d570dd4fab4d95c4de82d873ecf718
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Thu May 26 12:42:11 2005 +0000

    [PATCH] I2C: documentation update 1/3
    
    This patch just changes the extension of Documentation/i2c/chips/smsc47b397.txt
    to none - to conform with naming in i2c subsystem directory.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 72cd799544f2b36c2f07ceaeed6d984cb130d4f3
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 24 17:34:51 2005 -0700

    [PATCH] I2C: add i2c driver for TPS6501x
    
    This adds an I2C driver for the TPS6501x series of power management chips.
    It's used on many OMAP based boards, and this driver has been widely used
    in the Linux-OMAP trees over the last year or so.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc0b07ed479fd92806aef7d6dbc58b6dc6da3796
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun May 22 09:39:11 2005 +0200

    [PATCH] I2C: Sensors mailing list has moved
    
    The following patch updates all references to the sensors mailing list,
    so as to reflect the fact that the list recently moved to a new home and
    changed addresses. I'll work out a similar patch for Linux 2.4 soon.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f02d56e54f2a8afaa01974df650ace9dc15d0cd
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Wed May 18 19:39:57 2005 +0200

    [PATCH] i2c: Race fix for i2c-mpc.c
    
    i2c: Race fix for i2c-mpc.c
    
    The problem was that the clock speed and driver data is
    initialized after the i2c adapter was added. This caused
    the i2c bus to start working at a wrong speed. (Mostly
    noticable on the second bus on mpc5200)
    
    With this patch we've tried to keep the i2c adapter
    working perfectly all the time it is included in the system.
    Initialize before added, Remove garbage after deleleted.
    
    Submitted-by: Asier Llano Palacios
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d68a861d857c11a017a8f755fa250afaf8b1bcdb
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 19 21:41:47 2005 +0200

    [PATCH] I2C: Spelling fixes for drivers/i2c/i2c-dev.c
    
    This patch fixes a misspelling in a comment section.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a551acc2cb1f13a9bd728b8cf86f9adafefdcfb2
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 19 21:40:38 2005 +0200

    [PATCH] I2C: Spelling fixes for drivers/i2c/i2c-core.c
    
    This patch fixes a misspelling in a comment section.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 614e24be139c0ae70378349e6c6f0e21751e56bf
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 19 21:39:06 2005 +0200

    [PATCH] I2C: Spelling fixes for drivers/i2c/busses/i2c-parport.c
    
    This patch fixes a double "the" in a comment section.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46b615f453202dbcf66452b500ab69c0e2148593
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 19 22:27:23 2005 +0200

    [PATCH] I2C: Spelling fixes for drivers/i2c/algos/i2c-algo-pca.c
    
    This patch fixes the some misspellings and a trailing whitespace in
    the comments.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f637a6494a1872c613fe68f64ea4831c3e5b037
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 21 21:01:59 2005 -0700

    [PATCH] I2C: fix up some sysfs device attribute file parameters
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 563db2fe9e0843da9d1d85d824f022be0ada4a3c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue May 17 22:38:57 2005 +0200

    [PATCH] I2C: Kill another macro abuse in via686a
    
    This patch kills another macro abuse in the via686a hardware monitoring
    driver. Using a macro just to alias an array is quite useless, isn't it?
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 057923f0f5ba346fc128ae0a1c3842d8c12bd7f0
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue May 17 18:09:36 2005 +0200

    [PATCH] I2C: chips/Kconfig corrections
    
    Here are some corrections for drivers/i2c/chips/Kconfig.
    
    Signed-off-by: Alexey Fisher <fishor@gmx.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6afe15595031bb9801af6207feed0bafc25b6e6b
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Tue May 17 17:16:02 2005 +1000

    [PATCH] I2C: driver adm1021: remove die_code
    
    This patch removes die_code from adm1021 as nothing within the
    driver uses it.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be8992c249e42398ee905450688c135ab761674c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon May 16 19:00:52 2005 +0200

    [PATCH] I2C: Coding style cleanups to via686a
    
    The via686a hardware monitoring driver has infamous coding style at the
    moment. I'd like to clean up the mess before I start working on other
    changes to this driver. Is the following patch acceptable? No code
    change, only coding style (indentation, alignments, trailing white
    space, a few parentheses and a typo).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68188ba7de2db9999ff08a4544a78b2f10eb08bd
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon May 16 18:52:38 2005 +0200

    [PATCH] I2C: Kill common macro abuse in chip drivers
    
    This patch kills a common macro abuse in i2c chip drivers: defining
    ALARMS_FROM_REG returning its argument unchanged. Dropping the macro
    makes the code somewhat more readable IMHO.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ff3240946d6a3d9f2ecf273f7330e09eec5484eb
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Mon May 16 18:12:18 2005 +0200

    [PATCH] I2C: include of jiffies.h for some i2c drivers
    
    This patch includes jiffies.h in two i2c drivers.
    (jiffies.h is needed for the time_after function.)
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8e8f9289cc5b781d583d5aed935abf060207bbd3
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Fri May 13 20:26:10 2005 +1000

    [PATCH] I2C: adm9240 driver cleanup
    
    This patch adds an info print of detected VRM stolen from Sebastian
    Witt's atxp1 sriver.  ADM9240 already has vrm accessor removed.
    
    Write no-op and whitespace fixes removed :)
    
    Couple of comments changed, tested on 2.6.11.9.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 937df8df907ce63b0f7e19adf6e3cdef1687fac3
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Thu May 12 11:59:29 2005 +1000

    [PATCH] I2C: sysfs names: rename to cpu0_vid, take 3
    
    This small patch changes two drivers, adm1025 and adm1026, to
    report vid as cpu0_vid sysfs name as used by the other drivers.
    
    Added duplicated names and six month warning for old names to
    be removed as requested.  Compile tested.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit abc01922477104e8d72b494902aff37135c409e7
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Thu May 12 13:41:51 2005 +1000

    [PATCH] I2C: Setting w83627hf fan divisor 128 fails.
    
    Jarkko Lavinen provided patch to fix: "couldn't set the divisor 128
    through fan1_div sysfs entry even though the chip supports it and
    setting divisors 1..64 worked. This was due to POWER_TO_REG() only
    checking 2's powers 0 till 5 but not 6."
    
    This patch applies that fix to w83627hf and w83781d drivers.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9826b3ee8faa468a26782e3bf37716a73d96730
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Fri May 6 17:40:51 2005 +1000

    [PATCH] I2C: remove <linux/delay.h> from via686a
    
    In my cross-reference checking of sysfs names, the via686a needs
    special case treatment as it the only driver expands S_IWUSR to
    00200 with gcc -E.  (00200 is the correct value for S_IWUSR).
    
    This is caused by the driver including <linux/delay.h>, it compiles
    fine without that header but I am unable to test drive the change.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 815f55f280fb2781ba1c2a350516b73e55119c60
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat May 7 22:58:46 2005 +0200

    [PATCH] I2C: Remove redundancy from i2c-core.c
    
    Call i2c_transfer() from i2c_master_send() and i2c_master_recv() to
    avoid the redundant code that was in all three functions.  It also
    removes unnecessary debug statements as suggested by Jean Delvare.
    
    This is important for the non-blocking interfaces because they will
    have to handle a non-blocking interface in this area.  Having it in
    one place greatly simplifies the changes.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30aedcb33970367e50b5edf373e9cd1a5cebcbe1
Author: Kumar Gala <galak@freescale.com>
Date:   Tue May 3 18:50:38 2005 -0500

    [PATCH] I2C: Allow for sharing of the interrupt line for i2c-mpc.c
    
    I2C-MPC: Allow for sharing of the interrupt line
    
    On the MPC8548 devices we have multiple I2C-MPC buses however they are on the
    same interrupt line.  Made request_irq pass SA_SHIRQ now so the second bus can
    register for the same IRQ.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 44bbe87e9017efa050bb1b506c6822f1f3bb94d7
Author: Steven Cole <elenstev@mesatop.com>
Date:   Tue May 3 18:21:25 2005 -0600

    [PATCH] Spelling fixes for drivers/i2c.
    
     Here are some spelling corrections for drivers/i2c.
    
     occured -> occurred
     intialization -> initialization
     Everytime -> Every time
     transfering -> transferring
     relevent -> relevant
     continous -> continuous
     neccessary -> necessary
     explicitely -> explicitly
     Celcius -> Celsius
     differenciate -> differentiate
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ec5ce552d946a55c1e504054627c9068fb7afb8a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 26 22:09:43 2005 +0200

    [PATCH] I2C: Add support for the LPC47M15x and LPC47M192 chips to smsc47m1
    
    This simple patch adds support for the SMSC LPC47M15x and LPC47M192
    chips to the smsc47m1 hardware monitoring driver. These chips are
    compatible with the other ones already supported by the driver, so I see
    no reason not to support them, especially when the Linux 2.4 version of
    the driver does already.
    
    I also modified the info printks to name the chips by their real name.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9110b1c893f45ec66ae39e359decdfad84525be
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon May 2 23:08:22 2005 +0200

    [PATCH] I2C: Fix bugs in the new w83627ehf driver
    
    These are the fixes for the bug you spotted in my new w83627ehf driver:
    	- Explicit division by 0.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 08e7e2789e0da49eadeb17121e24af22efeee84b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 25 22:43:25 2005 +0200

    [PATCH] I2C: New hardware monitoring driver: w83627ehf
    
    This is a new hardware monitoring driver, w83627ehf, which supports the
    Winbond W83627EHF Super-I/O chip. The driver is not complete, but
    already usable. It only implements fan speed and temperature monitoring,
    while the chip also supports voltage inputs with VID, PWM output and
    temperature sensor selection. I have no more time to work on this, but
    anyone with supported hardware could add the missing functionalities
    later.
    
    This driver is largely derived from the w83627hf driver.
    
    Thanks to Leon Moonen and Steve Cliffe for tesing the preliminary
    versions of my driver and reporting the problems they encountered.
    
    Thanks to Grant Coady for noticing and fixing various corner cases in
    the fan management. This third version of the driver hopefully addresses
    all the issues the original version had.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 40b5cda28aafe3744d8808c21f7959e472a9ecb1
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Sat Apr 30 21:41:29 2005 +1000

    [PATCH] I2C: add new hardware monitor driver: adm9240
    
    Completion of Michiel Rook's port of adm9240 to 2.6 with addition
    of auto fan clock divider based on Jean Delvare's algorithm, and
    replaces scaling macros with static inlines.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a551ef79d9413727f76d22dc47b5b15d1d03073b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Apr 16 18:49:22 2005 +0200

    [PATCH] I2C: #include <linux/config.h> cleanup
    
    Hi Alexey,
    
    > Files that don't use CONFIG_* stuff shouldn't include config.h
    > Files that use CONFIG_* stuff should include config.h
    >
    > It's that simple. ;-)
    
    I agree. This won't change anything though, as all drivers include
    either device.h or module.h, which in turn include config.h. But you are
    still correct, so I approve your patch.
    
    For completeness, I would propose the following on top of your own
    patch:
    
    i2c bus drivers do not need to define DEBUG themselves, as the Kconfig
    system takes care of it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f0bb60e7b1a0a26c25d8cbf81dda7afbc8bd2982
Author: Alexey Dobriyan <adobriyan@mail.ru>
Date:   Sat Apr 16 18:10:02 2005 +0000

    [PATCH] I2C: drivers/i2c/*: #include <linux/config.h> cleanup
    
    Files that don't use CONFIG_* stuff shouldn't include config.h
    Files that use CONFIG_* stuff should include config.h
    
    It's that simple. ;-)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit da17838c5e7256976c34c5d051dc8fb3c6f364b7
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Wed May 11 10:32:54 2005 +0200

    [PATCH] ds1337: export ds1337_do_command
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 912b9c0c52b95696165e84d67fdab2af81a2213e
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Tue May 10 14:08:04 2005 +0200

    [PATCH] ds1337 driver works also with ds1339 chip
    
    On Wed, May 04, 2005 at 12:07:11PM +0200, Jean Delvare wrote:
    > Additionally, I would welcome an additional patch documenting the fact
    > that the ds1337 driver will work fine with the Dallas DS1339 real-time
    > clock chip.
    
    Document the fact that ds1337 driver works also with DS1339 real-time
    clock chip.
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86919833dbeac668762ae7056ead2d35d070f622
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Wed May 4 08:14:38 2005 +0200

    [PATCH] I2C: ds1337: search by bus number
    
    Chip is searched by bus number rather than its own proprietary id.
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 00588243053bb40d0406c7843833f8fae81294ab
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Wed May 4 08:13:54 2005 +0200

    [PATCH] I2C: ds1337: i2c_transfer() checking
    
    i2c_transfer returns number of sucessfully transfered messages. Change
    error checking to accordingly. (ds1337_set_datetime never returned
    sucess)
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0b46e334d77b2d3b8b3aa665c81c4afbe9f1f458
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Wed May 4 08:13:13 2005 +0200

    [PATCH] I2C: ds1337: Make time format consistent with other RTC drivers
    
    Make time format consistent with other RTC drivers.
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d01b79d0613ebb6810bb48baf6e53e9319701fea
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Fri Apr 8 15:06:39 2005 +0200

    [PATCH] I2C: ds1337 3/4
    
    dev_{dbg,err} functions should print client's device name. data->id can
    be dropped from message, because device is determined by bus it hangs on
    (it has fixed address).
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6069ffde15472da9d041a58df490d388bb175d51
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Fri Apr 8 15:02:16 2005 +0200

    [PATCH] I2C: ds1337 2/4
    
    Use correct macros to convert between bdc and bin. See linux/bcd.h
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3e9d0ba1305cd7c6efd2ab3a003e58a27da1796b
Author: Ladislav Michl <ladis@linux-mips.org>
Date:   Fri Apr 8 15:00:21 2005 +0200

    [PATCH] I2C: ds1337 1/4
    
    Use i2c_transfer to send message, so we get proper bus locking.
    
    Signed-off-by: Ladislav Michl <ladis@linux-mips.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 69113efac29e5f1b7a03dd4fdca5ede6901f4eb8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Apr 5 18:00:47 2005 +0200

    [PATCH] I2C: mark all functions static in atxp1 driver
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9cb7d18433ea6db04b3999e8d0b8f52fba551c2d
Author: Sebastian Witt <se.witt@gmx.net>
Date:   Wed Apr 13 22:27:53 2005 +0200

    [PATCH] I2C: add new atxp1 driver
    
    Adds support for the Attansic ATXP1 I2C device, found on some x86
    plattforms to change CPU and other voltages.  Depends on the previous
    i2c-vid.h patch.
    
    Signed-off-by: Sebastian Witt <se.witt@gmx.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3886246a257e828248ce1e72ced00408a3557f0d
Author: Sebastian Witt <se.witt@gmx.net>
Date:   Wed Apr 13 22:25:39 2005 +0200

    [PATCH] I2C: i2c-vid.h: Support for VID to reg conversion
    
    Adds conversion from VID (mV) to register value. Used by the atxp1 I2C module.
    Removed uneeded switch case.
    
    Signed-off-by: Sebastian Witt <se.witt@gmx.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 792f156d61d327671f58829dc04ad5609152e393
Author: Clemens Koller <clemens.koller@anagramm.de>
Date:   Mon Apr 11 11:49:14 2005 +0200

    [PATCH] I2C: rtc8564.c remove duplicate include
    
    [PATCH] I2C rtc8564.c remove duplicate include
    
    Trivial fix: removes duplicate include line.
    
    Signed-off-by: Clemens Koller <clemens.koller@anagramm.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68cc9d0b714d7d533c0cfc257a62f7f7f4f22a11
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Apr 2 20:04:41 2005 +0200

    [PATCH] I2C: Merge unused address lists in some video drivers
    
    On top of my previous patch which removes the use of address ranges in
    video i2c drivers, this one can save an additional few bytes of memory.
    Most of these drivers which do not use I2C_CLIENT_INSMOD initialize the
    unused address lists in a less than optimal way. This patch simply
    optimizes this, by using a single one-element list instead of 3
    different lists with two elements each.
    
    This saves an average 63 bytes on these drivers.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -ruN linux-2.6.12-rc1-bk5.orig/drivers/media/video/adv7170.c linux-2.6.12-rc1-bk5/drivers/media/video/adv7170.c

commit b3d5496ea5915fa4848fe307af9f7097f312e932
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Apr 2 20:31:02 2005 +0200

    [PATCH] I2C: Kill address ranges in non-sensors i2c chip drivers
    
    Some months ago, you killed the address ranges mechanism from all
    sensors i2c chip drivers (both the module parameters and the in-code
    address lists). I think it was a very good move, as the ranges can
    easily be replaced by individual addresses, and this allowed for
    significant cleanups in the i2c core (let alone the impressive size
    shrink for all these drivers).
    
    Unfortunately you did not do the same for non-sensors i2c chip drivers.
    These need the address ranges even less, so we could get rid of the
    ranges here as well for another significant i2c core cleanup. Here comes
    a patch which does just that. Since the process is exactly the same as
    what you did for the other drivers set already, I did not split this one
    in parts.
    
    A documentation update is included.
    
    The change saves 308 bytes in the i2c core, and an average 1382 bytes
    for chip drivers which use I2C_CLIENT_INSMOD, 126 bytes for those which
    do not.
    
    This change is required if we want to merge the sensors and non-sensors
    i2c code (and we want to do this).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/Documentation/i2c/writing-clients
    ===================================================================

commit e5c515b4532f4aac2b1136612d8c3ecd1891f431
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Jun 10 14:53:22 2005 +0400

    [PATCH] w1: fix compiler warnings
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>

commit 6adf87bd7b7832105b9c6bc08adf6a4d229f1e79
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:29:25 2005 +0400

    [PATCH] w1: reconnect feature.
    
    I've created reconnect feature - if on start there are no registered families
    all new devices will have defailt family, later when driver for appropriate
    family is loaded, slaves, which were faound earlier, will still have defult
    family instead of right one. Reconnect feature will force control thread to run
    through all master devices and all slaves found and search for slaves with
    default family id and try to reconnect them.
    
    It does not store newly registered family and does not check only those slaves
    which have reg_num.family the same as being registered one - all slaves with
    default family are reconnected.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4754639d88e922af451b399af09ac1bb442c35e5
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:31:47 2005 +0400

    [PATCH] w1: Updates the w1 documentation (w1.generic)
    
    Updates the w1 documentation (w1.generic)
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 99c5bfe993af1af37ddd615e72207dc7220dc526
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:31:26 2005 +0400

    [PATCH] w1: Adds a default family so that new slave families will show up in sysfs.
    
    Adds a default family so that new slave families will show up in sysfs.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2a9d0c178158da4a9bcf22311a414c26a8102d13
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:31:02 2005 +0400

    [PATCH] w1: Adds a sysfs entry (w1_master_search) that allows you to disable/enable periodic searches.
    
    Adds a sysfs entry (w1_master_search) that allows you to disable/enable
    periodic searches.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6b729861831177b270a2932a13e79cb41d673146
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:30:43 2005 +0400

    [PATCH] w1: Added the triplet w1 master method and changes w1_search() to use it.
    
    Adds the triplet w1 master method and changes w1_search() to use it.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be57ce267fd558c52d2389530c15618681b7cfa7
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sat Jun 4 01:21:46 2005 +0400

    [PATCH] w1: Cleans up usage of touch_bit/w1_read_bit/w1_write_bit.
    
    Cleans up usage of touch_bit/w1_read_bit/w1_write_bit.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4e470aa9642d49230bcdfbb393cf5a81da333aba
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri May 20 22:50:33 2005 +0400

    [PATCH] w1_therm: removed duplicated family id.
    
    We can access family id through w1_family structure.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>

commit c7b2b2a723174d22a743180d5367f0028226031b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 21 21:01:59 2005 -0700

    [PATCH] w1: fix build issues
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca775c629a366ded01aae69da8410f70aaf85de1
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri May 20 22:49:08 2005 +0400

    [PATCH] w1: new family structure.
    
    Removed some fields which are not required.
    First step for writing operations.
    Now only read and read name remain.
    Patch depends on w1 cleanups patch.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7785925dd8e0d2f389d4a9168f1683c6b249a552
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri May 20 22:33:25 2005 +0400

    [PATCH] w1: cleanups.
    
     - white space changes.
     - list_for_each_entry/list_for_each_entry_safe and reverse changes.
     - small coding style changes.
     - removed redundant NULL checks.
     - use attribute group and macros instead of direct device attributes.
    Patch is havily based on work from Adrian Bunk and Dmitry Torokhov,
    thanks guys.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 85e941cc9f10316080a16b121d24d329e5c2a65d
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon May 2 14:26:42 2005 +0400

    [PATCH] w1_smem: support for new simple rom family [0x81 id].
    
    Support for new simple rom family [0x81 id].
    It is the same as existing 0x01 family,
    which is used in ds9490* w1 adapters.
    Patch is on top of new-thermal-sensor-families patch.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 718a538f945a84244a460df434c3f6f04701957b
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sun Apr 17 22:58:14 2005 +0400

    [PATCH] w1_therm: support for ds18b20, ds1822 thermal sensors.
    
    Support for ds18b20, ds1822 thermal sensors.
    Based on code from Tiziano M_ller <tm@dev-zero.ch>
    Patch is against 2.6.12-rc2 and should be applied
    without problems on top of any later kernels since
    w1_therm driver was not changed.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2a5a68b840cbab31baab2d9b2e1e6de3b289ae1e
Merge: 990a8ba... e1a40fa...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 21 19:51:18 2005 -0700

    Merge rsync://oss.sgi.com/git/xfs-2.6

commit 990a8baf568ca1d0ae65e59783ff821794118d07
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue Jun 21 17:17:30 2005 -0700

    [PATCH] md: remove unneeded NULL checks before kfree
    
    This patch removes some unneeded checks of pointers being NULL before
    calling kfree() on them.  kfree() handles NULL pointers just fine, checking
    first is pointless.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a5e9cf1d6626586ff08e49f400a006a9f0c3275
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:29 2005 -0700

    [PATCH] md: make sure md/bitmap doesn't try to write a page with active writeback
    
    Due to the use of write-behind, it is possible for md to write a page to
    the bitmap file that is still completing writeback.  This is not allowed.
    
    With this patch, we detect those cases and either force a sync write, or
    back off and try later, as appropriate.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39730960d94306d7be414e8d54f4e5c071af1278
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:28 2005 -0700

    [PATCH] Two small fixes for md verion-1 superblocks.
    
    1/ Must typecast int to (sector_t) before inverting or we
     might not invert enough bits.
    
    2/ When "bitmap_offset" was added to mdp_superblock_1, we didn't increase
       the count of words-used (96 to 100).
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bfa19f2748000d646dbdf8f48258cfe1d257b52
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:28 2005 -0700

    [PATCH] md: allow md to update multiple superblocks in parallel.
    
    currently, md updates all superblocks (one on each device) in series.  It
    waits for one write to complete before starting the next.  This isn't a big
    problem as superblock updates don't happen that often.
    
    However it is neater to do it in parallel, and if the drives in the array have
    gone to "sleep" after a period of idleness, then waking them is parallel is
    faster (and someone else should be worrying about power drain).
    
    Futher, we will need parallel superblock updates for a future patch which
    keeps the intent-logging bitmap near the superblock.
    
    Also remove the silly code that retired superblock updates 100 times.  This
    simply never made sense.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a654b9d8f851f4ca02649d5825cbe6c608adb10c
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:27 2005 -0700

    [PATCH] md: allow md intent bitmap to be stored near the superblock.
    
    This provides an alternate to storing the bitmap in a separate file.  The
    bitmap can be stored at a given offset from the superblock.  Obviously the
    creator of the array must make sure this doesn't intersect with data....
    After is good for version-0.90 superblocks.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d310eb7b3df1252e8595d059d982b0a9825a137
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:26 2005 -0700

    [PATCH] md: fix deadlock due to md thread processing delayed requests.
    
    Before completing a 'write' the md superblock might need to be updated.
    This is best done by the md_thread.
    
    The current code schedules this up and queues the write request for later
    handling by the md_thread.
    
    However some personalities (Raid5/raid6) will deadlock if the md_thread
    tries to submit requests to its own array.
    
    So this patch changes things so the processes submitting the request waits
    for the superblock to be written and then submits the request itself.
    
    This fixes a recently-created deadlock in raid5/raid6
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41158c7eb22312cfaa256744e1553bb4042ff085
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:25 2005 -0700

    [PATCH] md: optimise reconstruction when re-adding a recently failed drive.
    
    When an array is degraded, bit in the intent-bitmap are never cleared.  So if
    a recently failed drive is re-added, we only need to reconstruct the block
    that are still reflected in the bitmap.
    
    This patch adds support for this re-adding.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 289e99e8ed8f36e386bf7de49947311c17ae1482
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:24 2005 -0700

    [PATCH] md: initialise sync_blocks in raid1 resync
    
    Otherwise it could have a random value and might BUG.  This fixes a BUG
    during resync problem in raid1 introduced by the bitmap-based-intent-loggin
    patches.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab7a30c7051ee32d0d72415fe0a16d60eba38a0d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:23 2005 -0700

    [PATCH] md: fix bug when raid1 attempts a partial reconstruct.
    
    The logic here is wrong.  if fullsync is 0, it WILL BUG.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 191ea9b2c7cc3ebbe0678834ab710d7d95ad3f9a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:23 2005 -0700

    [PATCH] md: raid1 support for bitmap intent logging
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa3163f81654fa057039258e32a6811147bf0c14
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:22 2005 -0700

    [PATCH] md: don't skip bitmap pages due to lack of bit that we just cleared.
    
    When looking for pages that need cleaning we skip pages that don't have
    BITMAP_PAGE_CLEAN set.  But if it is the 'current' page we will have cleared
    that bit ourselves, so skipping it is wrong.  So: move the 'skip this page'
    inside 'if page != lastpage'.
    
    Also fold call of file_page_offset into the one place where the value (bit) is
    used.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77ad4bc706fe6c52ab953f31c287a6af712d080c
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:21 2005 -0700

    [PATCH] md: enable the bitmap write-back daemon and wait for it.
    
    Currently we don't wait for updates to the bitmap to be flushed to disk
    properly.  The infrastructure all there, but it isn't being used....
    
    A separate kernel thread (bitmap_writeback_daemon) is needed to wait for each
    page as we cannot get callbacks when a page write completes.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfb39fba4e8cdda091f9ebee29fbb8331c4bb605
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:20 2005 -0700

    [PATCH] md: check return value of write_page, rather than ignore it
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2cff26ad18a8794722fb0d3c019d93e14fce3f1
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:20 2005 -0700

    [PATCH] md: improve debug-printing of bitmap superblock.
    
    - report sync_size properly  - need /2 to convert sectors to KB
    - move everything over 2 spaces to allow proper spelling of
      "events cleared".
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc7ca163a448dfb23f44c9a47ebc8cbe52cf49df
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:17:19 2005 -0700

    [PATCH] md printk fix
    
    A u64 is not an unsigned long long.  On power4 it is `long', and printk warns.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdbb4cc2e5c30895709163d8544057db21ee23e0
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:18 2005 -0700

    [PATCH] md: make sure md bitmap is cleared on a clean start.
    
    As the array-wide clean bit (in the superblock) is set more agressively than
    the bits in the bitmap are cleared, it is possible to have an array which is
    clean despite there being bits set in the bitmap.
    
    These bits will currently never get cleared, as they can only be cleared by a
    resync pass, which never happens.
    
    No, when reading bits from disk, be aware of whether the whole array is known
    to be in sync, and act accordingly.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc7f77de2cd81718dd789a2cfe68a7cf1b48f016
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:17 2005 -0700

    [PATCH] md: minor code rearrangement in bitmap_init_from_disk
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d80a138c013f81c1b9383c83983934e34e380a2d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:17 2005 -0700

    [PATCH] md: print correct pid for newly created bitmap-writeback-daemon.
    
    The debugging message printed the wrong pid, which didn't help remove bugs....
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f40402d96cb21df912e5bbb3fffa5e1afc81e98
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:16 2005 -0700

    [PATCH] md: call bitmap_daemon_work regularly
    
    bitmap_daemon_work clears bits in the bitmap for blocks that haven't been
    written to for a while.  It needs to be called regularly to make sure the
    bitmap doesn't endup full of ones ....  but it wasn't.
    
    So call it from the increasingly-inaptly-named md_check_recovery
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78d742d876bdf7263d0d966fbe9593559fd904a7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:15 2005 -0700

    [PATCH] md: a couple of tidyups relating to the bitmap file.
    
    1/ When init from disk, it is a BUG if there is nowhere
       to init from,
    2/ use seq_path to print path in /proc/mdstat
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32a7627cf3a35396a8e834faf34e38ae9f3b1309
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:14 2005 -0700

    [PATCH] md: optimised resync using Bitmap based intent logging
    
    With this patch, the intent to write to some block in the array can be logged
    to a bitmap file.  Each bit represents some number of sectors and is set
    before any update happens, and only cleared when all writes relating to all
    sectors are complete.
    
    After an unclean shutdown, information in this bitmap can be used to optimise
    resync - only sectors which could be out-of-sync need to be updated.
    
    Also if a drive is removed and then added back into an array, the recovery can
    make use of the bitmap to optimise reconstruction.  This is not implemented in
    this patch.
    
    Currently the bitmap is stored in a file which must (obviously) be stored on a
    separate device.
    
    The patch only provided infrastructure.  It does not update any personalities
    to bitmap intent logging.
    
    Md arrays can still be used with no bitmap file.  This patch has minimal
    impact on such arrays.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57afd89f98a990747445f01c458ecae64263b2f8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:13 2005 -0700

    [PATCH] md: improve the interface to sync_request
    
    1/ change the return value (which is number-of-sectors synced)
     from 'int' to 'sector_t'.
     The number of sectors is usually easily small enough to fit
     in an int, but if resync needs to abort, it may want to return
     the total number of remaining sectors, which could be large.
     Also errors cannot be returned as negative numbers now, so use
     0 instead
    2/ Add a 'skipped' return parameter to allow the array to report
     that it skipped the sectors.  This allows md to take this into account
     in the speed calculations.
     Currently there is no important skipping, but the bitmap-based-resync
     that is coming will use this.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06d91a5fe0b50c9060e70bdf7786f8a3c66249db
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:12 2005 -0700

    [PATCH] md: improve locking on 'safemode' and move superblock writes
    
    When md marks the superblock dirty before a write, it calls
    generic_make_request (to write the superblock) from within
    generic_make_request (to write the first dirty block), which could cause
    problems later.
    
    With this patch, the superblock write is always done by the helper thread, and
    write request are delayed until that write completes.
    
    Also, the locking around marking the array dirty and writing the superblock is
    improved to avoid possible races.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fca4d848f0e6fafdc2b25f8a0cf1e76935f13ac2
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:11 2005 -0700

    [PATCH] md: merge md_enter_safemode into md_check_recovery
    
    md_enter_safemode checks if it is time to mark the md superblock as 'clean'.
    i.e.  if all writes have completed and a suitable delay has passed.
    
    This is currently called from md_handle_safemode which in-turn is called
    (almost) every time md_check_recovery is called, and from the end of
    md_do_sync which causes the mddev->thread to run, which will always call
    md_check_recovery as well.
    
    So it doesn't need to be a separate function and fits quite well into
    md_check_recovery.
    
    The "almost" is because multipathd calls md_check_recovery but not
    md_handle_safemode.  This is OK because the code from md_enter_safemode is a
    no-op if mddev->safemode == 0, which it always is for a multipathd (providing
    we don't allow it to be set to 2 on a signal...)
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c361777fb9347a4d16b82272f7d3b234e94bef2d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:10 2005 -0700

    [PATCH] md: make sure recovery happens when add_new_disk is used for hot_add
    
    Currently if add_new_disk is used to hot-add a drive to a degraded array,
    recovery doesn't start ...  because we didn't tell it to.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ea9c07c6c6d1c14d9757dd8470dc4c85bbe9f28
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Tue Jun 21 17:17:09 2005 -0700

    [PATCH] md: cause md/raid1 to "repack" working devices when number of drives is changed
    
    i.e.  missing or failed drives are moved to the end of the list.  The means
    a 3 drive md array with the first drive missing can be shrunk to a two
    drive array.  Currently that isn't possible.
    
    Also, the "last_used" device number might be out-of-range after the number
    of devices is reduced, so we set it to 0.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58a606431a704b5c240c1429a5526fac81c9800a
Author: James Simmons <jsimmons@pentafluge.infradead.org>
Date:   Tue Jun 21 17:17:08 2005 -0700

    [PATCH] fbdev: fill in the access_align field.
    
    Several drivers miss filling in the access_align field.  So this patch has
    them fill it in.
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1ab5dac251bb4514607918b0019a3b3f5f5fb48
Author: James Simmons <jsimmons@pentafluge.infradead.org>
Date:   Tue Jun 21 17:17:07 2005 -0700

    [PATCH] fbdev: stack reduction
    
    Shrink the stack when calling the drawing alignment functions.
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 303b86d9913eca0cbfc3c5cb41e7006f6e13b755
Author: Jurriaan <thunder7@xs4all.nl>
Date:   Tue Jun 21 17:17:06 2005 -0700

    [PATCH] New framebuffer fonts + updated 12x22 font available
    
    Improve the fonts for use with the framebuffer.
    
    I've added all the characters marked 'FIXME' in the sun12x22 font and
    created a 10x18 font (based on the sun12x22 font) and a 7x14 font (based
    on the vga8x16 font).
    
    This patch is non-intrusive, no options are enabled by default so most
    users won't notice a thing.
    
    I am placing my changes under the GPL, however, I've not seen any copyright
    notices on the sun12x22 font and the vga8x16 font which I derived my new
    fonts from so I don't know what the copyright status is.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5881eb4883ef7dd28a4dcea237714817c4b2f8e
Author: James Simmons <jsimmons@www.infradead.org>
Date:   Tue Jun 21 17:17:05 2005 -0700

    [PATCH] fbdev: new pci id for chipsfb
    
    Patch adds pci ID for CT 69000 chipset.
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1154ea7dcd8eed758fb5ec47393a79d5a1f0bc43
Author: Jaya Kumar <jayalk@intworks.biz>
Date:   Tue Jun 21 17:17:04 2005 -0700

    [PATCH] Framebuffer driver for Arc LCD board
    
    Add support for the Arc monochrome LCD board.
    
    The board uses KS108 controllers to drive individual 64x64 LCD matrices.
    The board can be paneled in a variety of setups such as 2x1=128x64,
    4x4=256x256 and so on.  The board/host interface is through GPIO.
    
    Signed-off-by: Jaya Kumar <jayalk@intworks.biz>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ff45f515144d232c83bf55c53f54deecb750296
Author: Sylvain Meyer <sylvain.meyer@worldonline.fr>
Date:   Tue Jun 21 17:17:03 2005 -0700

    [PATCH] intelfb documentation
    
    Add a small documentation of the driver parameters.
    
    Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df529338d9c5d9329e503955795c89472e1ba6e6
Author: Sylvain Meyer <sylvain.meyer@worldonline.fr>
Date:   Tue Jun 21 17:17:02 2005 -0700

    [PATCH] intelfb: fix accel detection when changing video modes
    
    Changed the tests in intelfb_set_par to check also the parameter
    var.accel_flags.  If null, do nothing about ring buffers.
    
    Now, the DirectFB i830 driver could nicely work even if intelfb is hw
    accelerated.  Just change the /etc/fb.modes file to disable console hw
    acceleration when starting a DirectFB app.
    
    Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27aef2d49f9d82c58e65d72abcd636168ec19ac9
Author: Sylvain Meyer <sylvain.meyer@worldonline.fr>
Date:   Tue Jun 21 17:17:01 2005 -0700

    [PATCH] intelfb: Add voffset option to avoid conficts with Xorg i810 driver
    
    - Add voffset option to avoid conficts with Xorg i810 driver
    
    Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f18cd8f7053a1e6755d1c1396884b2bfa1577e54
Author: James Simmons <jsimmons@pentafluge.infradead.org>
Date:   Tue Jun 21 17:17:00 2005 -0700

    [PATCH] VGA to fbcon fix.
    
    Currently when going from vgacon to fbcon the VT screenbuffer are often
    different sizes.  In the case when they are different sizes a new VT
    screenbuffer is allocated and the contents are copied into the new buffer.
    
    Currently the amount copied from VGA text memory to the new screenbuf is
    the size of the framebuffer console.  If the framebuffer console new VT
    screen buffer is greater than the VGA text memory size then we get some of
    the VGA BIOS contents as well.
    
    This patch will only allow you to copy up to the size of VGA text memory
    now.  The rest is filled with erase characters.
    
    Initial patch by Jordan Crouse <jordan.crouse@amd.com>
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d7f085342ddf20194b6e00c42b80968f15104db
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 21 17:16:59 2005 -0700

    [PATCH] pm3fb typo fix
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5a9951c94e7a285a3d00648e3d790a7f016bd11
Author: James Simmons <jsimmons@pentafluge.infradead.org>
Date:   Tue Jun 21 17:16:58 2005 -0700

    [PATCH] fbdev: iomove removal
    
    Since no one is using the inbuf, outbuf of struct fb_pixmap I removed their
    use in the framebuffer console.  The idea is instead move the pixmap
    functionality below the accelerated functions intead of on top as the way
    it is now.  If there is no objection please apply.  This is against Linus
    latestr GIT tree.  Thank you.
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a3b5899f190a365eed806302f4b58a493233f96
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:57 2005 -0700

    [PATCH] intelfbdrv naming fix
    
    Can't use this fancy name, because it's used to generate a sysfs filename:
    
    kobject_register failed for Intel(R) 830M/845G/852GM/855GM/865G/915G
     Framebuffer Driver (-13)
      [<c01bf8e3>] kobject_register+0x43/0x70
      [<c022dfe2>] bus_add_driver+0x52/0xa0
      [<c01c8c10>] pci_device_shutdown+0x0/0x20
      [<c01c8d71>] pci_register_driver+0x61/0x80
      [<c0387099>] intelfb_init+0x59/0x70
      [<c03787cc>] do_initcalls+0x2c/0xc0
      [<c0159025>] kern_mount+0x15/0x17
      [<c01002a0>] init+0x0/0x100
      [<c01002ca>] init+0x2a/0x100
      [<c0100f58>] kernel_thread_helper+0x0/0x18
      [<c0100f5d>] kernel_thread_helper+0x5/0x18
    
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78c03717c415d81879e4dac2e452d1a0d3738a80
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Tue Jun 21 17:16:56 2005 -0700

    [PATCH] some vesafb fixes
    
    Fix the size passed to release_mem_region in an error path.
    
    Also adjust the message printed when vesafb cannot load; the comment there
    already says this must not be fatal, so the message should also not mention
    the word 'abort' otherwise indicating a problem to worry about in the log.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Gerd Knorr <kraxel@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27f931dac93057bbae691f66a49b11ff2f483bee
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:55 2005 -0700

    [PATCH] s1d13xxxfb linkage fix
    
    s1d13xxxfb_remove() is referenced from s1d13xxxfb_probe(), which is marked
    __devinit().  So s1d13xxxfb_remove() cannot be marked __devexit.
    
    Does this all make sense?  Clearly the __devexit section will still be in
    core when the __devinit code is run, if the driver was loaded as a module.
    
    But I suppose that if the driver is statically linked, the __devexit section
    might be dropped early in boot.  Still, we wouldn't drop __devexit prior to
    initcall completion, at which point the __devinit code has all been run
    anyway.
    
    verdict: this code was legal and made sense.  Is this a generic problem, or an
    arm-specific problem?
    
      UPD     include/linux/compile.h
      CC      init/version.o
      LD      init/built-in.o
      LD      .tmp_vmlinux1
    `.exit.text' referenced in section `.init.text' of drivers/built-in.o: defined in discarded section `.exit.text' of drivers/built-in.o
    
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6afbe59710f65d92d00de1f3adb5514ef634110
Author: Keenan Pepper <keenanpepper@gmail.com>
Date:   Tue Jun 21 17:16:54 2005 -0700

    [PATCH] Bring back Tux on Chips 65550 framebuffer
    
    I don't see any reason why the framebuffer should need to be cleared,
    and it makes Tux vanish.
    
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9769f4eb3fad2dd53a5d24c81ee5f7f05450742b
Author: Jeremy White <jwhite@codeweavers.com>
Date:   Tue Jun 21 17:16:53 2005 -0700

    [PATCH] isofs: show hidden files, add granularity for assoc/hidden files flags
    
    The current isofs treatment of hidden files is flawed in two ways.  First,
    it does not provide sufficient granularity; it hides both 'hidden' files
    and 'associated' files (resource fork for Mac files).  Second, the default
    behavior to completely strip hidden files, while an admirable
    implementation of the spec, is a poor choice given the real world use of
    hidden files as a poor mans copy protection scheme for MSDOS and Windows
    based systems.  A longer description of this is available here:
    
       http://www.uwsg.iu.edu/hypermail/linux/kernel/0205.3/0267.html
    
    This patch was originally built after a few private conversations with Alan
    Cox; I shamefully failed to persist in seeing it go forward, I hope to make
    amends now.
    
    This patch introduces granularity by allowing explicit control for both
    hidden and associated files.  It also reverses the default so that by
    default, hidden files are treated as regular files on the iso9660 file
    system.
    
    This allow Wine to process Windows CDs, including those that are hybrid
    Mac/Windows CDs properly and completely, without our having to go muck up
    peoples fstabs as we do now.  (I have tested this with such a hybrid +
    hidden CD and have verified that this patch works as claimed).
    
    Signed-off-by: Jeremy White <jwhite@codeweavers.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2966632a134e865db3c819346a1dc7d96e05309
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:51 2005 -0700

    [PATCH] rock: handle directory overflows
    
    Handle the case where the variable-sized part of a rock-ridge directory entry
    overhangs the end of the buffer which we allocated for it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 642217c17b9a56c7e4cf48f6a13dfd5e4a4c2e10
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:51 2005 -0700

    [PATCH] rock: rename union members
    
    The silly thing does:
    
    	struct foo { ... };
    	...
    	#define foo 42
    
    so you can no longer refer to `struct foo' in C code.
    
    Rename the structures.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e595447e177b39aa6c96baaa57b30cde2d8b9df7
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:50 2005 -0700

    [PATCH] rock.c: handle corrupted directories
    
    The bug in rock.c is that it's totally trusting of the contents of the
    directories.  If the directory says there's a continuation 10000 bytes into
    this 4k block then we cheerily poke around in memory we don't own and oops.
    
    So change rock_continue() to apply various sanity checks, at least ensuring
    that the offset+length remain within the bounds for the header part of a
    struct rock_ridge directory entry.
    
    Note that the kernel can still overindex the buffer due to the variable size
    of the rock-ridge directory entries.  We cannot check that in rock_continue()
    unless we go parse the directory entry's signature and work out its size.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9eb7f2c67c41d2cd730aedcd23e5baca09211d03
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:49 2005 -0700

    [PATCH] isofs: remove debug stuff
    
    isofs/inode.c:
    
    - Remove some crufty leak detection code
    
    - coding style cleanups
    
    - kfree(NULL) is permitted.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a089221c5e8a5ae8d74a919c8c7a4d2f68bd59e5
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:48 2005 -0700

    [PATCH] rock: lindent rock.h
    
    So we have a couple of rock-ridge bugs.  First up, rotoroot the poor thing
    into something which it is possible to work on.
    
    Feed rock.h through Lindent, tidy a couple of things by hand.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7373909de403d229979842081c63917452e39402
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:47 2005 -0700

    [PATCH] rock: comment tidies
    
    Be a bit more standard in comment layout.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba40aaf04314ec5efd090e69518033fc55f450fa
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:46 2005 -0700

    [PATCH] rock: remove MAYBE_CONTINUE
    
    - remove the MAYBE_CONTINUE macro
    
    - kfree(NULL) is OK.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76ab07ebc3ca69e2f14ccbed0de3a9dda9adc6da
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:46 2005 -0700

    [PATCH] rock: remove SETUP_ROCK_RIDGE
    
    - Remove the SETUP_ROCK_RIDGE macro.
    
    - In rock_ridge_symlink_readpage(), rename raw_inode to raw_de.  It points
      at a directory entry, not an inode.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04f7aa9c7dc615c690cede9a80c83625ad2efef7
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:45 2005 -0700

    [PATCH] rock: remove CHECK_CE
    
    Remove the CHECK_CE macro
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a40ea8f22e59c038ffdf219251a67311b9f6e362
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:44 2005 -0700

    [PATCH] rock: remove CONTINUE_DECLS
    
    Remove the CONTINUE_DECLS macro.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12121714fbf36023d5892034d0c97df54a451543
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:44 2005 -0700

    [PATCH] rock: remove CHECK_SP
    
    Remove the CHECK_SP macro.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fa393a1d3d9485e428a3c74b5599190c14b13db
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:43 2005 -0700

    [PATCH] rock: manual tidies
    
    Fix stuff which Lindent got wrong, rework a few deeply-nested blocks.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d372116383f79e42a3eb010c7d6ec3dd28767b3
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:16:42 2005 -0700

    [PATCH] rock: lindent it
    
    Trying to turn rock.c into something which humans can read so we can fix some
    bugs.
    
    Start out by feeding it through scripts/Lindent.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a96619145840c6eb50d85759f72d9337db411f7
Author: Ian Kent <raven@themaw.net>
Date:   Tue Jun 21 17:16:41 2005 -0700

    [PATCH] autofs4: subversion bump to identify these changes
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1684b2bba6972749bc9acee57585acd6c78050b2
Author: Ian Kent <raven@themaw.net>
Date:   Tue Jun 21 17:16:41 2005 -0700

    [PATCH] autofs4: bad lookup fix
    
    For browsable autofs maps, a mount request that arrives at the same time an
    expire is happening can fail to perform the needed mount.
    
    This happens becuase the directory exists and so the revalidate succeeds when
    we need it to fail so that lookup is called on the same dentry to do the
    mount.  Instead lookup is called on the next path component which should be
    whithin the mount, but the parent isn't mounted.
    
    The solution is to allow the revalidate to continue and perform the mount as
    no directory creation (at mount time) is needed for browsable mount entries.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc9acc885819696c0ed00f4f0f0cda0c7583f116
Author: Ian Kent <raven@themaw.net>
Date:   Tue Jun 21 17:16:39 2005 -0700

    [PATCH] autofs4: post expire race fix
    
    At the tail end of an expire it's possible for a process to enter
    autofs4_wait, with a waitq type of NFY_NONE but find that the expire is
    finished.  In this cause autofs4_wait will try to create a new wait but not
    notify the daemon leading to a hang.  As the wait type is meant to delay mount
    requests from revalidate or lookup during an expire and the expire is done all
    we need to do is check if the dentry is a mountpoint.  If it's not then we're
    done.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b1e3afd6d56937ced3914971621d0f053ea9178
Author: Ian Kent <raven@themaw.net>
Date:   Tue Jun 21 17:16:38 2005 -0700

    [PATCH] autofs4: avoid panic on bind mount of autofs owned directory
    
    While this is not a solution to bind and move mounts on autofs owned
    directories it is necessary to fix the trady error handling.
    
    At least it avoids the kernel panic I observed checking out bug #4589.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8818760512424f60ad9fafb7a087b007a9274eb3
Author: Max Asbock <masbock@us.ibm.com>
Date:   Tue Jun 21 17:16:36 2005 -0700

    [PATCH] ibmasm driver: fix race in command refcount logic
    
    This patch fixes a race in the command reference counting logic by putting
    spinlocks around kobject_put() in the command_put function.
    
    - Also added debug messages.
    
    - Changed a memcpy to memcpy_fromio since we are reading from io space.
    
    Signed-off-by: Max Asbock <masbock@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 278d72ae8803ffcd16070c95fe1d53f4466dc741
Author: Max Asbock <masbock@us.ibm.com>
Date:   Tue Jun 21 17:16:34 2005 -0700

    [PATCH] ibmasm driver: redesign handling of remote control events
    
    This patch rewrites the handling of remote control events.  Rather than making
    them available from a special file in the ibmasmfs, now the events from the
    RSA card get translated into kernel input events and injected into the input
    subsystem.  The driver now will generate two /dev/input/eventX nodes -- one
    for the keyboard and one for the mouse.  The mouse node generates absolute
    events more like a touch pad than a mouse.
    
    Signed-off-by: Vernon Mauery <vernux@us.ibm.com>
    Signed-off-by: Max Asbock <masbock@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8acb808468a88a188d7c5aba3681c583a5785f9
Author: Max Asbock <masbock@us.ibm.com>
Date:   Tue Jun 21 17:16:33 2005 -0700

    [PATCH] ibmasm driver: correctly wake up sleeping threads
    
    Due to my incomplete understanding of the wait_event_interruptible() function
    threads waiting for service processor events were not woken up.  This patch
    fixes that problem.
    
    Signed-off-by: Max Asbock <masbock@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5ccc842318efcd7c05dee3203dfdbbafae47bd6
Author: Max Asbock <masbock@us.ibm.com>
Date:   Tue Jun 21 17:16:32 2005 -0700

    [PATCH] ibmasm driver: fix command buffer size
    
    First of a series of patches for the ibmasm driver.  (that is the driver for
    the IBM xSeries RSA service processor)
    
    To summarize what they do:
    
    [1] change a #define for the buffer size for commands
    
    [2] Fix a bug where threads in the event handling code calling
        wait_event_interruptible() weren't woken up as expected.
    
    [3] Redesigned how remote mouse and keyboard events received by the driver
        are handled.
    
    [4] Fixed a race in the command reference counting logic.
    
    This patch:
    
    - change a #define for the buffer size for commands
    
    Signed-off-by: Max Asbock <masbock@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b071886170df456e230c38a3e504da4a11fff79
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jun 21 17:16:31 2005 -0700

    [PATCH] s390: pending interrupt after ipl from reader
    
    Wait for interrupt and clear status pending after resetting the reader.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9b9a04796eade5241452a913ec6f3433437b4f5
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jun 21 17:16:30 2005 -0700

    [PATCH] s390: memory detection > 32GB
    
    The kernel takes a very long time to boot if the memory size is bigger then
    32767 MB.  The memory size is contained in a structure created by an sclp
    call.  The kernel accesses the field with a LH instrution which performs a
    sign extension of a 16 bit word.  In the case of a memory size with bit 2^15
    set this results in a very large value and the memory detection just loops for
    a long time.  In addition if more then 64 GB are used on a 64 bit system the
    memory size is read from an incorrect storage location.
    
    Use zero-extention to read the 16 bit memory size and the correct offset to
    read the 4 byte memory size on 64 bit.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 447570cfde680d5bf09c47b9c8d1dcf5bcb18f10
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jun 21 17:16:29 2005 -0700

    [PATCH] s390: cmm sender parameter visibility
    
    Make cmm module parameter "sender" visible in sysfs.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77eb65cbc18d86a9c334964ed4c3d178f5560918
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jun 21 17:16:28 2005 -0700

    [PATCH] s390: kernel stack overflow panic
    
    die() doesn't return, therefore print registers and then panic instead.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14651c798a2a4d15ccc53d064df28bfd0283bad6
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Tue Jun 21 17:16:28 2005 -0700

    [PATCH] s390: #ifdefs in compat_ioctls
    
    Remove superflous #if .. #endif pairs from compat_ioctl.c.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fd6e4a44ff9ff406bcff69050b508f186507df1
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Tue Jun 21 17:16:27 2005 -0700

    [PATCH] s390: cio documentation
    
    Some clarifications in the cio documentation.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bdfcfcc0780f58b927a164dfd54d1e1b6767347
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Tue Jun 21 17:16:26 2005 -0700

    [PATCH] s390: cio max channels checks
    
    Fix max channel check in cio_ignore display function.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60b2737de1b1ddfdb90f3ba622634eb49d6f3603
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Jun 21 17:16:25 2005 -0700

    [PATCH] uml: fix linkage of tt mode against NPTL
    
    With Al Viro <viro@www.linux.org.uk>
    
    To make sure switcheroo() can execute when we remap all the executable
    image, we used a trick to make it use a local copy of errno...  this trick
    does not work with NPTL glibc, only with LinuxThreads, so use another
    (simpler) one to make it work anyway.
    
    Hopefully, a lot improved thanks to merging with the version of Al Viro
    (which had his part of problems, though, i.e.  removing a fix to another
    bug and not fixing the problem on i386).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b77d6adc922b8bbf8b16b67f567958c42962cf88
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Jun 21 17:16:24 2005 -0700

    [PATCH] uml: make hw_controller_type->release exist only for archs needing it
    
    With Chris Wedgwood <cw@f00f.org>
    
    As suggested by Chris, we can make the "just added" method ->release
    conditional to UML only (better: to archs requesting it, i.e.  only UML
    currently), so that other archs don't get this unneeded crud, and if UML
    won't need it any more we can kill this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Ingo Molnar <mingo@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faec1e99ba9ca7371d9aee1656938373133c4b21
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Jun 21 17:16:21 2005 -0700

    [PATCH] uml: complete hw_controller_type->release conversion
    
    This occurrence of free_irq_by_irq_and_dev() was missed when converting UML
    to the use of hw_controller_type->release.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbce706e2550253c5ab6043f4f5dfde0cd02470f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Jun 21 17:16:19 2005 -0700

    [PATCH] uml: add and use generic hw_controller_type->release
    
    With Chris Wedgwood <cw@f00f.org>
    
    Currently UML must explicitly call the UML-specific
    free_irq_by_irq_and_dev() for each free_irq call it's done.
    
    This is needed because ->shutdown and/or ->disable are only called when the
    last "action" for that irq is removed.
    
    Instead, for UML shared IRQs (UML IRQs are very often, if not always,
    shared), for each dev_id some setup is done, which must be cleared on the
    release of that fd.  For instance, for each open console a new instance
    (i.e.  new dev_id) of the same IRQ is requested().
    
    Exactly, a fd is stored in an array (pollfds), which is after read by a
    host thread and passed to poll().  Each event registered by poll() triggers
    an interrupt.  So, for each free_irq() we must remove the corresponding
    host fd from the table, which we do via this -release() method.
    
    In this patch we add an appropriate hook for this, and remove all uses of
    it by pointing the hook to the said procedure; this is safe to do since the
    said procedure.
    
    Also some cosmetic improvements are included.
    
    This is heavily based on some work by Chris Wedgwood, which however didn't
    get the patch merged for something I'd call a "misunderstanding" (the need
    for this patch wasn't cleanly explained, thus adding the generic hook was
    felt as undesirable).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Ingo Molnar <mingo@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5757b284a300e0e5d2173750906625b6470bd9f0
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:17 2005 -0700

    [PATCH] m32r: Use asm-generic/div64.h
    
    The current include/asm-m32r/div64.h of 2.6.12-rc5 looks buggy.  Here is a
    patch for updating it to use asm-generic/div64.h for m32r like other
    architectures.
    
    Signed-off-by: Hitoshi Yamamoto <hitoshiy@isl.melco.co.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 960c2a89a051333d2e6793a416d9a33c4b116b41
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:16 2005 -0700

    [PATCH] m32r: Update defconfig files
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0adbb44a146d6dff3f74ea7a9d3826f8942ed709
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:16 2005 -0700

    [PATCH] m32r: Remove include/asm-m32r/m32102peri.h
    
    This patch removes an obsolete header file include/asm-m32r/m32102peri.h.
    In this header, there are some undesirable single character types, like V.
    And the header is almost no longer used.
    
    Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cc1265e9a8579be0029cd675ec22a6151893e04
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:15 2005 -0700

    [PATCH] m32r: Cleanup arch/m32r/mm/extable.c
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 934bb7f88eb398f62314fa63ba72ac6dcd21192a
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:14 2005 -0700

    [PATCH] m32r: Update m32r_cfc.[ch] to support Mappi-III platform
    
    This patch is for the M32R CF/PCMCIA drivers to support a new platform,
    Mappi-III evaluation board.
    
    Signed-off-by: Mamoru Sakugawa <sakugawa@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f973b001a9b511900fb73d816adf77d8755838c
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:13 2005 -0700

    [PATCH] m32r: Update setup_xxxxx.c
    
    Change coding styles of hw_interrupt_type struct's initialization portions.
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2368086344c3d67b0f4aecac39d620fb9b8795c3
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Jun 21 17:16:10 2005 -0700

    [PATCH] m32r: Support M3A-2170(Mappi-III) platform
    
    This patchset is for supporting a new m32r platform, M3A-2170(Mappi-III)
    evaluation board.  An M32R chip multiprocessor is equipped on the board.
    http://http://www.linux-m32r.org/eng/platform/platform.html
    
    	* arch/m32r/Kconfig: Support Mappi-III platform.
    	* arch/m32r/kernel/Makefile: ditto.
    	* arch/m32r/kernel/io_mappi3.c: ditto.
    	* arch/m32r/kernel/setup.c: ditto.
    	* arch/m32r/kernel/setup_mappi3.c: ditto.
    	* include/asm-m32r/m32102.h: ditto.
    	* include/asm-m32r/m32r.h: ditto.
    	* include/asm-m32r/mappi3/mappi3_pld.h: ditto.
    
    	* include/asm-m32r/ide.h: CF support for Mappi-III.
    	* arch/m32r/kernel/setup_mappi3.c: ditto.
    
    	* arch/m32r/mappi3/defconfig.smp: A default config file for Mappi-III.
    	* arch/m32r/mappi3/dot.gdbinit: A default .gdbinit file for Mappi-III.
    
    	* arch/m32r/boot/compressed/m32r_sio.c: Modified for Mappi-III
    	  - At boot time, m32r-g00ff bootloader makes MMU off for Mappi-III,
    	    on the contrary it makes MMU on for Mappi-II.
    
    	* arch/m32r/kernel/io_mappi2.c: Update comments.
    	* arch/m32r/kernel/setup_mappi2.c: ditto.
    
    Signed-off-by: Mamoru Sakugawa <sakugawa@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4c477ca5448f19afaaf6c0cfd655009ea9e614d
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Tue Jun 21 17:16:01 2005 -0700

    [PATCH] ioc4: PCI bus speed detection
    
    Several hardware features of SGI's IOC4 I/O controller chip require
    timing-related driver calculations dependent upon the PCI bus speed.  This
    patch enables the core IOC4 driver code to detect the actual bus speed and
    store a value that can later be used by the IOC4 subdrivers as needed.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Acked-by: Pat Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5d310b349b2cbcc0dab31139c92201f332695bb
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Tue Jun 21 17:16:01 2005 -0700

    [PATCH] ioc4: CONFIG split
    
    The SGI IOC4 I/O controller chip drivers are currently all configured by
    CONFIG_BLK_DEV_SGIIOC4.  This is undesirable as not all IOC4 hardware features
    are needed by all systems.
    
    This patch adds two configuration variables, CONFIG_SGI_IOC4 for core IOC4
    driver support (see patch 1/3 in this series for further explanation) and
    CONFIG_SERIAL_SGI_IOC4 to independently enable serial port support.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Acked-by: Pat Gefre <pfg@sgi.com>
    Acked-by: Jeremy Higdon <jeremy@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22329b511a97557b293583194037d1f4c71e1504
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Tue Jun 21 17:15:59 2005 -0700

    [PATCH] ioc4: Core driver rewrite
    
    This series of patches reworks the configuration and internal structure
    of the SGI IOC4 I/O controller device drivers.
    
    These changes are motivated by several factors:
    
    - The IOC4 chip PCI resources are of mixed use between functions (i.e.
      multiple functions are handled in the same address range, sometimes
      within the same register), muddling resource ownership and initialization
      issues.  Centralizing this ownership in a core driver is desirable.
    
    - The IOC4 chip implements multiple functions (serial, IDE, others not
      yet implemented in the mainline kernel) but is not a multifunction
      PCI device.  In order to properly handle device addition and removal
      as well as module insertion and deletion, an intermediary IOC4-specific
      driver layer is needed to handle these operations cleanly.
    
    - All IOC4 drivers are currently enabled by a single CONFIG value.  As
      not all systems need all IOC4 functions, it is desireable to enable
      these drivers independently.
    
    - The current IOC4 core driver will trigger loading of all function-level
      drivers, as it makes direct calls to them.  This situation should be
      reversed (i.e. function-level drivers cause loading of core driver)
      in order to maintain a clear and least-surprise driver loading model.
    
    - IOC4 hardware design necessitates some driver-level dependency on
      the PCI bus clock speed.  Current code assumes a 66MHz bus, but the
      speed should be autodetected and appropriate compensation taken.
    
    This patch series effects the above changes by a newly and better designed
    IOC4 core driver with which the function-level drivers can register and
    deregister themselves upon module insertion/removal.  By tracking these
    modules, device addition/removal is also handled properly.  PCI resource
    management and ownership issues are centralized in this core driver, and
    IOC4-wide configuration actions such as bus speed detection are also
    handled in this core driver.
    
    This patch:
    
    The SGI IOC4 I/O controller chip implements multiple functions, though it is
    not a multi-function PCI device.  Additionally, various PCI resources of the
    IOC4 are shared by multiple hardware functions, and thus resource ownership by
    driver is not clearly delineated.  Due to the current driver design, all core
    and subordinate drivers must be loaded, or none, which is undesirable if not
    all IOC4 hardware features are being used.
    
    This patch reorganizes the IOC4 drivers so that the core driver provides a
    subdriver registration service.  Through appropriate callbacks the subdrivers
    can now handle device addition and removal, as well as module insertion and
    deletion (though the IOC4 IDE driver requires further work before module
    deletion will work).  The core driver now takes care of allocating PCI
    resources and data which must be shared between subdrivers, to clearly
    delineate module ownership of these items.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Acked-by: Pat Gefre <pfg@sgi.com>
    Acked-by: Jeremy Higdon <jeremy@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e400bae98499583767da58fb0a1b9ad3e24fcb86
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Tue Jun 21 17:15:56 2005 -0700

    [PATCH] mips: add vr41xx gpio support
    
    Add vr41xx gpio support.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b843cda193c56f5e12fedeaf95e0126b706d57b
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Jun 21 17:15:55 2005 -0700

    [PATCH] ppc64: set/clear SMT capable bit at boot
    
    Allow the SMT bit to be set/reset at boot, like the ALTIVEC bit.  This
    means we will enable SMT on unknown cpus that support it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 515bae9cdc6a78eda0879e1f158056d73ec808b7
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Jun 21 17:15:55 2005 -0700

    [PATCH] ppc64: Mark kernel hptes dirty
    
    We dont use the hardware referenced and changed bits and setting them early
    avoids a store to memory.  We already do this for userspace hptes but not
    kernel ones.  Do it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac5b33c9bcf1c05ae949b026a51d7f8f9573591c
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:54 2005 -0700

    [PATCH] ppc64: tidy up vio devices fake parent
    
    Currently we dynamically allocate the fake parent device for all devices on
    the vio bus.  This patch statically allocates it.  This also allows us to
    reuse it for the iSeries "generic" vio device (that is used for passing to
    dma routines when communicating with the hypervisor without a device
    involved).  Also unexport vio_bus_type as it is never used in modules.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 145d01e4287b8cbf50f87c3283e33bf5c84e8468
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:52 2005 -0700

    [PATCH] ppc64 iSeries: allow build with no PCI
    
    This patch allows iSeries to build with CONFIG_PCI=n.  This is useful for
    partitions that have only virtual I/O.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f74e79fe749da035cc150446f02aec29938a5c8
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:51 2005 -0700

    [PATCH] ppc64 iSeries: tidy up irq code after merge
    
    This patch just removes some dead code, fixes messages that referred to the
    file this code used to be in and inserts XmPciLpEvent_init into its caller.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89ef68f0be53df6c4f1552fc329fe5abb1d5ed33
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:50 2005 -0700

    [PATCH] ppc64 iSeries: remove XmPciLpEvent.c
    
    This patch just merges XmPciLpEvent.c into iSeries_irq.c (the only caller of
    its only external function).  XmPciLpEvent.c just contained the lowlevel
    iSeries irq code.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c3b4f1a8e06584d8a1051a74ed79cf8b41f703e
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:49 2005 -0700

    [PATCH] ppc64 iSeries: irq simple cleanups
    
    This patch is just simple cleanups to the iSeries irq code.
    	- whitespace and comments
    	- rearrange some functions to avoid forward declarations
    	- remove XmPciLpEvent.h as its functions were declared elsewhere
    	- remove decaration of function that no longer exists
    No semantic changes.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 061c063efce96b33f9e26d5f83a8eb0643fa493c
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:48 2005 -0700

    [PATCH] ppc64 iSeries: remove some more members of iSeries_Device_Node
    
    The AgentId, PhbId, FrameId, CardLocation and Location members of
    iSeries_Device_Node are stored early in the boot process just so that a
    message about the device can be printed later in the boot process.  Remove
    them and construct the message by doing the VPD parsing at the time the
    message is printed.
    
    Also remove a few unused defines in iSeries_VpdInfo.c.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2ebaf250fabc5c5644b707dbee44c9e0ec442e9
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:47 2005 -0700

    [PATCH] ppc64 iSeries: remove IoRetry from iSeries_Device_Node
    
    The IoRetry member of iSeries_Devide_Node is really only used locally, so
    remove it and replace it with a local variable.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aab41dea80b1b00e66533af096f797320be05f13
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:46 2005 -0700

    [PATCH] ppc64 iSeries: iSeries_pci.h cleanups
    
    Remove no longer used things from iSeries_pci.h.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57ca86d4f0e44f81be10bc77a5d0e26760e4844f
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:45 2005 -0700

    [PATCH] ppc64 iSeries: iSeries_VpdInfo.c cleanups
    
    Clean up iSeries_VpdInfo.c:
    	- white space and comment fixes
    	- make a function static
    	- the functions here are only called from iSeries_pci.c, so
    	  CONFIG_PCI will be set (so remove check)
    	- only build when CONFIG_PCI is set
    	- remove unneeded includes and cast
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7eb22d201936fb3450fa5d1d30cbf2de2fb918b
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:44 2005 -0700

    [PATCH] ppc64 iSeries: iommu.h cleanups
    
    The iommu_table_cb structure is iSeries specific, so move it to the header
    file that declares the function we pass it to.  vio_tce_table and
    iommu_setup_iSeries no longer exist, so remove their declarations.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea7190d0afebbd922eeb13ee6a8148b17964b1b2
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:42 2005 -0700

    [PATCH] ppc64 iSeries: remove iSeries_pci_reset.c
    
    The file arch/ppc64/kernel/iSeries_pci_reset contains only one function that
    is not use anywhere (any more).  Remove it.  This function is the only user of
    the ReturnCode member of iSeries_Device_Node, so remove that as well.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c670b1acd0ed0d9f7a27154759a9825cb5012ae4
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:41 2005 -0700

    [PATCH] ppc64 iSeries: misc header cleanups
    
    Last of this round of the iSeries header cleanups
    	- don't have two defines for the same thing (HvMaxArchitectedLps
    	  and HvMaxArchitectedVirtualLans)
    	- HvCallSc.h only needs linux/types.h
    	- remove unused struct definition
    	- add "extern" to some more function declarations
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a5304f5ba04eff979cd108309eae7a00f3fff77
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:40 2005 -0700

    [PATCH] ppc64 iSeries: tidy up some includes and HvCall.h
    
    This patch removes some unused bits from HvCall.h and some unneeded #includes
    from other files.  Also includes ItLpQueue.h in paca.h in preference to a stub
    declaration of struct ItLpQueue.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c92877e0a079fe5a488cb244c7afb05137702b49
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:39 2005 -0700

    [PATCH] ppc64 iSeries: cleanup ItLpQueue.h
    
    Just white space cleaups and move process_iSeries_events into its only caller.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2310c977a9b7a4d08fbaa74e694b49b38d49f5ae
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:38 2005 -0700

    [PATCH] ppc64 iSeries: remove HvCallCfg.h
    
    Now that the only users of things in HvCallCfg.h are in HvLpConfig.h, merge in
    the bit we need and remove HvCallCfg.h.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd61ce922770b299081c3e729ea65758ed676034
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:37 2005 -0700

    [PATCH] ppc64 iSeries: eliminate some unused inline functions
    
    This patch removes from the iSeries header files a large number of inline
    functions that are not used.  It also changes the only caller of a HvCallCfg
    function that is outside HvLpConfig.h to its equivalent HvLpConfig function
    and no longer includes HvCallCfg.h where it is not needed.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bc0ffd5f0854b9143606684fb925f4290ae13e7
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:36 2005 -0700

    [PATCH] ppc64 iSeries: remove LparData.h
    
    include/asm-ppc64/iSeries/LparData.h just included a whole lot of other files
    to declare variables that would be better declared in those other files.  So,
    remove it.  This will reduce that number of things needed to be included in
    most cases to access the relevant variables.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b7feecb2f8fcab184a38916d10349bd6648e0bc
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:35 2005 -0700

    [PATCH] ppc64 iSeries: obvious code simplifications
    
    This patch does some obvious code cleanups in the iSeries headers files.
    	- simplifies the bodies of lots of inline functions
    	- parenthesises a macros result
    	- removes C++ wrapping
    	- adds "extern" to some function declarations
    There are no semantic changes.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcee38952609fccb2bdfe166b3b96bd75a292aa6
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:34 2005 -0700

    [PATCH] ppc64 iSeries: more header file white space cleanups
    
    This patch just contains white space and comment cleanups in the iSeries
    headers files.  There are no semantic changes.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45dc76aaf63fc336527da80337d3e3684f50f387
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:33 2005 -0700

    [PATCH] ppc64 iSeries: header file white space cleanups
    
    This patch just contains white space and comment cleanups in the iSeries
    headers files.  There are no semantic changes.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e3e4a1c4dade7872fdb04a5e735ae26d8e2fbfb
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jun 21 17:15:33 2005 -0700

    [PATCH] ppc64 iSeries: remove iSeries_proc.h
    
    include/asm-ppc64/iSeries/iSeries_proc.h just contains a declaration of a
    function that no longer exists.  Remove it.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 723e2b35e43dcbcfd737c40453caa7d198092d23
Author: Sven Luther <sven.luther@wanadoo.fr>
Date:   Tue Jun 21 17:15:32 2005 -0700

    [PATCH] ppc64: override command line AS/LD/CC variables when adding -m64 and co for biarch compilers
    
    The following kind of calls currently fails :
    
      make ARCH=ppc64 CC="gcc-3.4"
    
    Since the code for detecting a biarch compiler and adding the needed 64bit
    magic argument fails if the AS/LD/CC commands are overriden in the command
    line.
    
    The attached patch fixes this by using the make override and += directive,
    but i am not 100% sure this will work without gmake, as i am no Makefile
    expert.
    
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Anton Blanchard <anton@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20cee16ced631f70a62c97bdebae08a1c9470448
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Jun 21 17:15:31 2005 -0700

    [PATCH] ppc64: Abolish ioremap_mm
    
    Currently ppc64 has two mm_structs for the kernel, init_mm and also
    ioremap_mm.  The latter really isn't necessary: this patch abolishes it,
    instead restricting vmallocs to the lower 1TB of the init_mm's range and
    placing io mappings in the upper 1TB.  This simplifies the code in a number
    of places and eliminates an unecessary set of pagetables.  It also tweaks
    the unmap/free path a little, allowing us to remove the unmap_im_area() set
    of page table walkers, replacing them with unmap_vm_area().
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6879dc137ea4efad65cab8bf8a7c0b742bcf92cc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jun 21 17:15:30 2005 -0700

    [PATCH] ppc32: Kill embedded system.map, use kallsyms
    
    This patch kills the whole embedded System.map mecanism and the
    bootloader-passed System.map that was used to provide symbol resolution in
    xmon.  Instead, xmon now uses kallsyms like ppc64 does.
    
    No hurry getting that in Linus tree, let it be tested in -mm for a while
    first and make sure it doesn't break various embedded configs.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a70d439345875d476ede258094356e2acd09b1a1
Author: Jakub Bogusz <qboosh@pld-linux.org>
Date:   Tue Jun 21 17:15:29 2005 -0700

    [PATCH] ppc32: don't recursively crash in die() on CHRP/PReP machines
    
    This patch avoids recursive crash (leading to kernel stack overflow) in
    die() on CHRP/PReP machines when CONFIG_PMAC_BACKLIGHT=y.  set_backlight_*
    functions are placed in pmac section, which is discarded when _machine !=
    _MACH_Pmac.
    
    Signed-off-by: Jakub Bogusz <qboosh@pld-linux.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba8c6d534a0144375f910e764ec965d5e8059f7a
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:28 2005 -0700

    [PATCH] ppc32: remove some unnecessary includes of prom.h
    
    Fight the Good Fight: Limit prom.h header creep.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1492ec8069ea6f82bc32df27cabbec72e554e2b8
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:27 2005 -0700

    [PATCH] ppc32: Factor out common exception code into macro's for 4xx/Book-E
    
    4xx and Book-E PPC's have several exception levels.  The code to handle
    each level is fairly regular.  Turning the code into macro's will ease the
    handling of future exception levels (debug) in forth coming chips.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5be061eee931db2718feecaf10df17610386202b
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:26 2005 -0700

    [PATCH] ppc32: Clean up NUM_TLBCAMS usage for Freescale Book-E PPC's
    
    Made the number of TLB CAM entries private and converted the board
    consumers to use num_tlbcam_entries which is setup at boot time from
    configuration registers.  This way the only consumers of the #define
    NUM_TLBCAMS are the arrays used to manage the TLB.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65145e060b1c933ebc4215c3b493f586e08a1d5c
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:25 2005 -0700

    [PATCH] ppc32: Added support for all MPC8548 internal interrupts
    
    The MPC8548 has 48 internal interrupts and 12 external interrupts.  The
    previous generation PowerQUICC III devices only had 32 internal and 12
    external interrupts on the primary interrupt controller.
    
    Expanded the number of internal interrupts to 48 for all PowerQUICC III
    processors and moved the interrupt numbers for the external after the 48
    internal interrupt lines, rather than putting the 12 new internal
    interrupts at the end and ifdef'ng the whole mess.  As parted of this
    created a macro which represents the internal interrupt senses since they
    are the same on all PQ3 processors.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eee4146ab908188e556641f1cd7a10e894d10edb
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Tue Jun 21 17:15:24 2005 -0700

    [PATCH] ppc32: remove orphaned ppc4xx_kgdb.c
    
    Removes ppc4xx_kgdb.c which is no longer being used.  Pointed out by Andrei
    Konovalov.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 682afbbd1456e9e7b64f482eb05676b933173cdf
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:23 2005 -0700

    [PATCH] ppc32: Add support for MPC8245 8250 serial ports on Sandpoint
    
    Added platform device initialization for the two 8250 style UARTs that
    exist on the MPC8245.  Additionally, updated the Sandpoint code to enable
    one of these UARTs if an MPC8245 is connected to it.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e5aa8c86571deea5d8e8462fedcf610e21af717
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Tue Jun 21 17:15:22 2005 -0700

    [PATCH] ppc32: fix CONFIG_TASK_SIZE handling on 40x
    
    This patch is virtually identical to my previous 44x one.  It removes
    0x8000'0000 TASK_SIZE hardcoded assumption from head_4xx.S.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1604f9121ee97b27d5ce308ddd4b70c3a220279
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Tue Jun 21 17:15:22 2005 -0700

    [PATCH] cpm_uart: Route SCC2 pins for the STx GP3 board
    
    Adds SCC2 pin routing specific to the GP3 board.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b264c3527930ca4812fefc505fde9ad99d8a0117
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:21 2005 -0700

    [PATCH] ppc32: Converted MPC10X bridge to use platform devices instead of OCP
    
    Converted the MPC10x bridge support (used by MPC10x and 8240/1/5) to used
    the standard platform device model.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c93fcff6952068d484f2f7dae187037f46235647
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:20 2005 -0700

    [PATCH] ppc32: Removed dependency on CONFIG_CPM2 for building mpc85xx_device.c
    
    Previously we needed CONFIG_CPM2 enabled to get the proper IRQ ifdef's for
    CPM interrupts.  Recent changes have caused that to be no longer necessary.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c91999bba3ae8b21d4a965f19bf127bac3e5f7f2
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:19 2005 -0700

    [PATCH] ppc32: Added preliminary support for the MPC8548 CDS board
    
    Adds support for using the MPC8548 processor on the CDS reference board.
    Currently all the major busses (PCI, PCI-X, PCI-Express, sRIO) and eTSEC3
    and eTSEC4 are not supported.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b37b700f7c491a9320f4e29472bbaf23dded8fd
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Jun 21 17:15:18 2005 -0700

    [PATCH] ppc32: Added support for new MPC8548 family of PowerQUICC III processors
    
    Added descriptions of the new MPC8548 family processors, e500 core and
    peripherals.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da3caa204ca40c32dcb751ebead2a6835b83e8d1
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Tue Jun 21 17:15:18 2005 -0700

    [PATCH] SELinux: memory leak in selinux_sb_copy_data()
    
    There is a memory leak during mount when SELinux is active and mount
    options are specified.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Acked-by:  Stephen Smalley <sds@epoch.ncsc.mil>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8680e22f296e75e5497edb660c59c6b4dcfbbd32
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Tue Jun 21 17:15:16 2005 -0700

    [PATCH] VFS: memory leak in do_kern_mount()
    
    There is a memory leak during mount when CONFIG_SECURITY is enabled and
    mount options are specified.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2894801db1cea527885f7a8679e5a88fb7377d9c
Author: Coywolf Qi Hunt <coywolf@lovecn.org>
Date:   Tue Jun 21 17:15:15 2005 -0700

    [PATCH] kbuild: display compile version
    
    I am always trying to make sure I've booted the right kernel after a new
    install.  Too paranoid maybe.  But I guess there're other people like me.
    So let's make kbuild display the compile version number at the end to give
    us a hint.  I know we may be booting vmlinux someday, but don't care about
    it for now.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f667ff5c0282f686b4f739e46353779b3cfa2f6
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Jun 21 17:15:14 2005 -0700

    [PATCH] 3c59x: remove superfluous vortex_debug test from boomerang_start_xmit()
    
    Remove the superfluous test of "if (vortex_debug > 3)" inside the "if
    (vortex_debug > 6)" clause early in boomerang_start_xmit.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0d62219a48bd91ec40fb254c930914dccc77ff1
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Tue Jun 21 17:15:14 2005 -0700

    [PATCH] Kill stray newline
    
    OOM killer prints a stray newline.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4955ce3dd0818b56da532a16c9a4a3804a558ee
Author: Abhijit Karmarkar <abhijitk@veritas.com>
Date:   Tue Jun 21 17:15:13 2005 -0700

    [PATCH] msync: check pte dirty earlier
    
    It's common practice to msync a large address range regularly, in which
    often only a few ptes have actually been dirtied since the previous pass.
    
    sync_pte_range then goes much faster if it tests whether pte is dirty
    before locating and accessing each struct page cacheline; and it is hardly
    slowed by ptep_clear_flush_dirty repeating that test in the opposite case,
    when every pte actually is dirty.
    
    But beware, s390's pte_dirty always says false, since its dirty bit is kept
    in the storage key, located via the struct page address.  So skip this
    optimization in its case: use a pte_maybe_dirty macro which just says true
    if page_test_and_clear_dirty is implemented.
    
    Signed-off-by: Abhijit Karmarkar <abhijitk@veritas.com>
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c475a8ab625d567eacf5e30ec35d6d8704558062
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:12 2005 -0700

    [PATCH] can_share_swap_page: use page_mapcount
    
    Remember that ironic get_user_pages race?  when the raised page_count on a
    page swapped out led do_wp_page to decide that it had to copy on write, so
    substituted a different page into userspace.  2.6.7 onwards have Andrea's
    solution, where try_to_unmap_one backs out if it finds page_count raised.
    
    Which works, but is unsatisfying (rmap.c has no other page_count heuristics),
    and was found a few months ago to hang an intensive page migration test.  A
    year ago I was hesitant to engage page_mapcount, now it seems the right fix.
    
    So remove the page_count hack from try_to_unmap_one; and use activate_page in
    unuse_mm when dropping lock, to replace its secondary effect of helping
    swapoff to make progress in that case.
    
    Simplify can_share_swap_page (now called only on anonymous pages) to check
    page_mapcount + page_swapcount == 1: still needs the page lock to stabilize
    their (pessimistic) sum, but does not need swapper_space.tree_lock for that.
    
    In do_swap_page, move swap_free and unlock_page below page_add_anon_rmap, to
    keep sum on the high side, and correct when can_share_swap_page called.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d296e9cd02c92e576ecce5344026a4df4353cdb2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:11 2005 -0700

    [PATCH] do_wp_page: cannot share file page
    
    A small optimization to do_wp_page's check for whether to avoid copy by
    reusing the page already mapped.  It can never share a cached file page,
    nor can it share a reserved page (often the empty zero page), so it's a
    waste of time to lock and unlock in those cases.  Which nowadays can both
    be neatly excluded by a preliminary PageAnon test.
    
    Christoph has reported that a preliminary page_count test proved valuable
    for scalability here, but PageAnon covers more common cases all at once.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08ef472937e918875a82fd350d3de138aac50414
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:10 2005 -0700

    [PATCH] get_user_pages: kill get_page_map
    
    Since its birth, get_user_pages has been calling a misguided get_page_map
    function.  follow_page has already returned NULL if the pfn is invalid, we
    cannot reach an invalid pfn from a validated struct page.
    
    Remove get_page_map, and the messy rewind in get_user_pages to cope with
    its failure.  Oh, and could we please call that "struct page *page" like
    everywhere else, instead of "struct page *map"?
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c2f3fda5666c280bcd00ac3b86963270b23e796
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:09 2005 -0700

    [PATCH] rme96xx: fix PageReserved range
    
    rme96xx busmaster_malloc miscalculates and fails to set PageReserved on any
    page of char *buf; but busmaster_free does it right, so do the same (I
    don't have the card, just noticed this while sifting for rmap BUGs).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 334795eca421287c41c257992027d29659dc0f97
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:08 2005 -0700

    [PATCH] bad_page: clear reclaim and slab
    
    Since free_pages_check complains if PG_reclaim or PG_slab is set, bad_page
    ought to clear them to avoid repetitive reports (Nikita noticed this too).
    Let prep_new_page check page_count and PG_slab as free_pages_check does.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45918e1a8bfcabc1cb4570b8df276655020eac45
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:08 2005 -0700

    [PATCH] dup_mmap: update comment on new vma
    
    Remove part of comment on linking new vma in dup_mmap: since anon_vma rmap
    came in, try_to_unmap_one knows the vma without needing find_vma.  But add
    a comment to note that here vma is inserted without mmap_sem.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91612e0df20a52f61db3cac280c153311b36df7a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:07 2005 -0700

    [PATCH] mbind: check_range use standard ptwalk
    
    Strict mbind's check for currently mapped pages being on node has been
    using a slow loop which re-evaluates pgd, pud, pmd, pte for each entry:
    replace that by a standard four-level page table walk like others in mm.
    Since mmap_sem is held for writing, page_table_lock can be taken at the
    inner level to limit latency.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 941150a326be88af245034ef4b3e9fa00229aa2d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:06 2005 -0700

    [PATCH] mbind: fix verify_pages pte_page
    
    Strict mbind's check that pages already mapped are on right node has been
    using pte_page without checking if pfn_valid, and without page_table_lock
    to prevent spurious failures when try_to_unmap_one intervenes between the
    pte_present and the pte_page.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 400e65146c428d2ef677a927786fda2cec545a76
Author: Bob Picco <bob.picco@hp.com>
Date:   Tue Jun 21 17:15:05 2005 -0700

    [PATCH] ia64: pfn_to_nid() implementation
    
    pfn_to_nid is undefined.  We haven't had this interface on ia64.  The
    sys_mbind patches need it.
    
    Oh, the paddr_to_nid call could fail when DISCONTIG+NUMA is configured
    because there isn't any ACPI SRAT NUMA information.
    
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0edd73b33426df61b1d8a0a50d1f2ec097500abb
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Jun 21 17:15:04 2005 -0700

    [PATCH] shmem: restore superblock info
    
    To improve shmem scalability, we allowed tmpfs instances which don't need
    their blocks or inodes limited not to count them, and not to allocate any
    sbinfo.  Which was okay when the only use for the sbinfo was accounting
    blocks and inodes; but since then a couple of unrelated projects extending
    tmpfs want to store other data in the sbinfo.  Whether either extension
    reaches mainline is beside the point: I'm guilty of a bad design decision,
    and should restore sbinfo to make any such future extensions easier.
    
    So, once again allocate a shmem_sb_info for every shmem/tmpfs instance, and
    now let max_blocks 0 indicate unlimited blocks, and max_inodes 0 unlimited
    inodes.  Brent Casavant verified (many months ago) that this does not
    perceptibly impact the scalability (since the unlimited sbinfo cacheline is
    repeatedly accessed but only once dirtied).
    
    And merge shmem_set_size into its sole caller shmem_remount_fs.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65ed0b337bd2b47097cf6c772f024772513b7b0d
Author: Jes Sorensen <jes@trained-monkey.org>
Date:   Tue Jun 21 17:15:03 2005 -0700

    [PATCH] SN2 XPC build patches
    
    This patch contains the bits to make the XPC code use the uncached
    allocator rather than calling into the mspec driver.  It also includes the
    mspec.h header which is required to build the XPC modules.
    
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f14f75b81187cdbe10cc53a521bf9fdf97b59f8c
Author: Jes Sorensen <jes@wildopensource.com>
Date:   Tue Jun 21 17:15:02 2005 -0700

    [PATCH] ia64 uncached alloc
    
    This patch contains the ia64 uncached page allocator and the generic
    allocator (genalloc).  The uncached allocator was formerly part of the SN2
    mspec driver but there are several other users of it so it has been split
    off from the driver.
    
    The generic allocator can be used by device driver to manage special memory
    etc.  The generic allocator is based on the allocator from the sym53c8xx_2
    driver.
    
    Various users on ia64 needs uncached memory.  The SGI SN architecture requires
    it for inter-partition communication between partitions within a large NUMA
    cluster.  The specific user for this is the XPC code.  Another application is
    large MPI style applications which use it for synchronization, on SN this can
    be done using special 'fetchop' operations but it also benefits non SN
    hardware which may use regular uncached memory for this purpose.  Performance
    of doing this through uncached vs cached memory is pretty substantial.  This
    is handled by the mspec driver which I will push out in a seperate patch.
    
    Rather than creating a specific allocator for just uncached memory I came up
    with genalloc which is a generic purpose allocator that can be used by device
    drivers and other subsystems as they please.  For instance to handle onboard
    device memory.  It was derived from the sym53c7xx_2 driver's allocator which
    is also an example of a potential user (I am refraining from modifying sym2
    right now as it seems to have been under fairly heavy development recently).
    
    On ia64 memory has various properties within a granule, ie.  it isn't safe to
    access memory as uncached within the same granule as currently has memory
    accessed in cached mode.  The regular system therefore doesn't utilize memory
    in the lower granules which is mixed in with device PAL code etc.  The
    uncached driver walks the EFI memmap and pulls out the spill uncached pages
    and sticks them into the uncached pool.  Only after these chunks have been
    utilized, will it start converting regular cached memory into uncached memory.
    Hence the reason for the EFI related code additions.
    
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2caaad41e4aa8f5dd999695b4ddeaa0e7f3912a4
Author: Christoph Lameter <christoph@graphe.net>
Date:   Tue Jun 21 17:15:00 2005 -0700

    [PATCH] Reduce size of huge boot per_cpu_pageset
    
    Reduce size of the huge per_cpu_pageset structure in __initdata introduced
    into mm1 with the pageset localization patchset.  Use one specially
    configured pageset per cpu for all zones and nodes during bootup.
    
    - Avoid duplication of pageset initialization code.
    - do the adding to the pageset list before potential free_pages_bulk
      in free_hot_cold_page (otherwise we would have to hold a page
      in a pageset during the period that the boot pagesets are in use).
    - remove mistaken __cpuinitdata attribute and revert back to __initdata
      for the boot pageset. A boot pageset is not necessary for cpu hotplug.
    
    Tested for UP SMP NUMA on x86_64 (2.6.12-rc6-mm1): UP SMP NUMA Tested on
    IA64 (2.6.12-rc5-mm2): NUMA (2.6.12-rc6-mm1 broken for IA64 because of
    sparsemem patches)
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ae7c03943fca73f23bc0cdb938070f41b98101f
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Tue Jun 21 17:14:57 2005 -0700

    [PATCH] Periodically drain non local pagesets
    
    The pageset array can potentially acquire a huge amount of memory on large
    NUMA systems.  F.e.  on a system with 512 processors and 256 nodes there
    will be 256*512 pagesets.  If each pageset only holds 5 pages then we are
    talking about 655360 pages.With a 16K page size on IA64 this results in
    potentially 10 Gigabytes of memory being trapped in pagesets.  The typical
    cases are much less for smaller systems but there is still the potential of
    memory being trapped in off node pagesets.  Off node memory may be rarely
    used if local memory is available and so we may potentially have memory in
    seldom used pagesets without this patch.
    
    The slab allocator flushes its per cpu caches every 2 seconds.  The
    following patch flushes the off node pageset caches in the same way by
    tying into the slab flush.
    
    The patch also changes /proc/zoneinfo to include the number of pages
    currently in each pageset.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 578c2fd6a7f378434655e5c480e23152a3994404
Author: Janet Morgan <janetmor@us.ibm.com>
Date:   Tue Jun 21 17:14:56 2005 -0700

    [PATCH] add OOM debug
    
    This patch provides more debug info when the system is OOM.  It displays
    memory stats (basically sysrq-m info) from __alloc_pages() when page
    allocation fails and during OOM kill.
    
    Thanks to Dave Jones for coming up with the idea.
    
    Signed-off-by: Janet Morgan <janetmor@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2f29ea111e3344ed48257c2a142c3db514e1529
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Tue Jun 21 17:14:55 2005 -0700

    [PATCH] __read_page_state(): pass unsigned long instead of unsigned
    
    By making the offset argument of __read_page_state an unsigned long instead of
    unsigned, we can avoid forcing the compiler to sign extend a usually constant
    argument.  This saves 1 instruction on x86-64.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83e5d8f7253cb7b14472385a6d57df1e9f848e8e
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Tue Jun 21 17:14:54 2005 -0700

    [PATCH] __mod_page_state(): pass unsigned long instead of unsigned
    
    By making the offset argument of __mod_page_state an unsigned long instead
    of unsigned, we can avoid forcing the compiler to sign extend a usually
    constant argument.  This saves 1 instruction on x86-64.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ad539b2bd89bf2e129123eb24d5bcc4484a35de
Author: Darren Hart <dvhltc@us.ibm.com>
Date:   Tue Jun 21 17:14:53 2005 -0700

    [PATCH] vm: try_to_free_pages unused argument
    
    try_to_free_pages accepts a third argument, order, but hasn't used it since
    before 2.6.0.  The following patch removes the argument and updates all the
    calls to try_to_free_pages.
    
    Signed-off-by: Darren Hart <dvhltc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbe37d093707762fc0abb280781e6a82a9d8d568
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Tue Jun 21 17:14:52 2005 -0700

    [PATCH] mm: remove PG_highmem
    
    Remove PG_highmem, to save a page flag.  Use is_highmem() instead.  It'll
    generate a little more code, but we don't use PageHigheMem() in many places.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73219d178051691a56d57184d8c7f6d0cbe3c5c1
Author: Chris Wright <chrisw@osdl.org>
Date:   Tue Jun 21 17:14:52 2005 -0700

    [PATCH] mmap topdown fix for large stack limit, large allocation
    
    The topdown changes in 2.6.12-rc1 can cause large allocations with large
    stack limit to fail, despite there being space available.  The
    mmap_base-len is only valid when len >= mmap_base.  However, nothing in
    topdown allocator checks this.  It's only (now) caught at higher level,
    which will cause allocation to simply fail.  The following change restores
    the fallback to bottom-up path, which will allow large allocations with
    large stack limit to potentially still succeed.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1363c3cd8603a913a27e2995dccbd70d5312d8e6
Author: Wolfgang Wander <wwc@rentec.com>
Date:   Tue Jun 21 17:14:49 2005 -0700

    [PATCH] Avoiding mmap fragmentation
    
    Ingo recently introduced a great speedup for allocating new mmaps using the
    free_area_cache pointer which boosts the specweb SSL benchmark by 4-5% and
    causes huge performance increases in thread creation.
    
    The downside of this patch is that it does lead to fragmentation in the
    mmap-ed areas (visible via /proc/self/maps), such that some applications
    that work fine under 2.4 kernels quickly run out of memory on any 2.6
    kernel.
    
    The problem is twofold:
    
      1) the free_area_cache is used to continue a search for memory where
         the last search ended.  Before the change new areas were always
         searched from the base address on.
    
         So now new small areas are cluttering holes of all sizes
         throughout the whole mmap-able region whereas before small holes
         tended to close holes near the base leaving holes far from the base
         large and available for larger requests.
    
      2) the free_area_cache also is set to the location of the last
         munmap-ed area so in scenarios where we allocate e.g.  five regions of
         1K each, then free regions 4 2 3 in this order the next request for 1K
         will be placed in the position of the old region 3, whereas before we
         appended it to the still active region 1, placing it at the location
         of the old region 2.  Before we had 1 free region of 2K, now we only
         get two free regions of 1K -> fragmentation.
    
    The patch addresses thes issues by introducing yet another cache descriptor
    cached_hole_size that contains the largest known hole size below the
    current free_area_cache.  If a new request comes in the size is compared
    against the cached_hole_size and if the request can be filled with a hole
    below free_area_cache the search is started from the base instead.
    
    The results look promising: Whereas 2.6.12-rc4 fragments quickly and my
    (earlier posted) leakme.c test program terminates after 50000+ iterations
    with 96 distinct and fragmented maps in /proc/self/maps it performs nicely
    (as expected) with thread creation, Ingo's test_str02 with 20000 threads
    requires 0.7s system time.
    
    Taking out Ingo's patch (un-patch available per request) by basically
    deleting all mentions of free_area_cache from the kernel and starting the
    search for new memory always at the respective bases we observe: leakme
    terminates successfully with 11 distinctive hardly fragmented areas in
    /proc/self/maps but thread creating is gringdingly slow: 30+s(!) system
    time for Ingo's test_str02 with 20000 threads.
    
    Now - drumroll ;-) the appended patch works fine with leakme: it ends with
    only 7 distinct areas in /proc/self/maps and also thread creation seems
    sufficiently fast with 0.71s for 20000 threads.
    
    Signed-off-by: Wolfgang Wander <wwc@rentec.com>
    Credit-to: "Richard Purdie" <rpurdie@rpsys.net>
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7c8d5c9955a4d2e88e36b640563f5d6d5aba48a
Author: Christoph Lameter <christoph@lameter.com>
Date:   Tue Jun 21 17:14:47 2005 -0700

    [PATCH] node local per-cpu-pages
    
    This patch modifies the way pagesets in struct zone are managed.
    
    Each zone has a per-cpu array of pagesets.  So any particular CPU has some
    memory in each zone structure which belongs to itself.  Even if that CPU is
    not local to that zone.
    
    So the patch relocates the pagesets for each cpu to the node that is nearest
    to the cpu instead of allocating the pagesets in the (possibly remote) target
    zone.  This means that the operations to manage pages on remote zone can be
    done with information available locally.
    
    We play a macro trick so that non-NUMA pmachines avoid the additional
    pointer chase on the page allocator fastpath.
    
    AIM7 benchmark on a 32 CPU SGI Altix
    
    w/o patches:
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.68  100       484.6769     12.01      1.97   Fri Mar 25 11:01:42 2005
      100    27140.46   89       271.4046     21.44    148.71   Fri Mar 25 11:02:04 2005
      200    30792.02   82       153.9601     37.80    296.72   Fri Mar 25 11:02:42 2005
      300    32209.27   81       107.3642     54.21    451.34   Fri Mar 25 11:03:37 2005
      400    34962.83   78        87.4071     66.59    588.97   Fri Mar 25 11:04:44 2005
      500    31676.92   75        63.3538     91.87    742.71   Fri Mar 25 11:06:16 2005
      600    36032.69   73        60.0545     96.91    885.44   Fri Mar 25 11:07:54 2005
      700    35540.43   77        50.7720    114.63   1024.28   Fri Mar 25 11:09:49 2005
      800    33906.70   74        42.3834    137.32   1181.65   Fri Mar 25 11:12:06 2005
      900    34120.67   73        37.9119    153.51   1325.26   Fri Mar 25 11:14:41 2005
     1000    34802.37   74        34.8024    167.23   1465.26   Fri Mar 25 11:17:28 2005
    
    with slab API changes and pageset patch:
    
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      485.00  100       485.0000     12.00      1.96   Fri Mar 25 11:46:18 2005
      100    28000.96   89       280.0096     20.79    150.45   Fri Mar 25 11:46:39 2005
      200    32285.80   79       161.4290     36.05    293.37   Fri Mar 25 11:47:16 2005
      300    40424.15   84       134.7472     43.19    438.42   Fri Mar 25 11:47:59 2005
      400    39155.01   79        97.8875     59.46    590.05   Fri Mar 25 11:48:59 2005
      500    37881.25   82        75.7625     76.82    730.19   Fri Mar 25 11:50:16 2005
      600    39083.14   78        65.1386     89.35    872.79   Fri Mar 25 11:51:46 2005
      700    38627.83   77        55.1826    105.47   1022.46   Fri Mar 25 11:53:32 2005
      800    39631.94   78        49.5399    117.48   1169.94   Fri Mar 25 11:55:30 2005
      900    36903.70   79        41.0041    141.94   1310.78   Fri Mar 25 11:57:53 2005
     1000    36201.23   77        36.2012    160.77   1458.31   Fri Mar 25 12:00:34 2005
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Shobhit Dayal <shobhit@calsoftinc.com>
    Signed-off-by: Shai Fultheim <Shai@Scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63551ae0feaaa23807ebea60de1901564bbef32e
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Jun 21 17:14:44 2005 -0700

    [PATCH] Hugepage consolidation
    
    A lot of the code in arch/*/mm/hugetlbpage.c is quite similar.  This patch
    attempts to consolidate a lot of the code across the arch's, putting the
    combined version in mm/hugetlb.c.  There are a couple of uglyish hacks in
    order to covert all the hugepage archs, but the result is a very large
    reduction in the total amount of code.  It also means things like hugepage
    lazy allocation could be implemented in one place, instead of six.
    
    Tested, at least a little, on ppc64, i386 and x86_64.
    
    Notes:
    	- this patch changes the meaning of set_huge_pte() to be more
    	  analagous to set_pte()
    	- does SH4 need s special huge_ptep_get_and_clear()??
    
    Acked-by: William Lee Irwin <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e7e5a9048b30c57ba1ddaa6cdf59b21b65cde99
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Jun 21 17:14:43 2005 -0700

    [PATCH] VM: rate limit early reclaim
    
    When early zone reclaim is turned on the LRU is scanned more frequently when a
    zone is low on memory.  This limits when the zone reclaim can be called by
    skipping the scan if another thread (either via kswapd or sync reclaim) is
    already reclaiming from the zone.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c35bbadc59f5ed105c34471143eceb4c0dd9c95
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Jun 21 17:14:42 2005 -0700

    [PATCH] VM: add __GFP_NORECLAIM
    
    When using the early zone reclaim, it was noticed that allocating new pages
    that should be spread across the whole system caused eviction of local pages.
    
    This adds a new GFP flag to prevent early reclaim from happening during
    certain allocation attempts.  The example that is implemented here is for page
    cache pages.  We want page cache pages to be spread across the whole system,
    and we don't want page cache pages to evict other pages to get local memory.
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 753ee728964e5afb80c17659cc6c3a6fd0a42fe0
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Jun 21 17:14:41 2005 -0700

    [PATCH] VM: early zone reclaim
    
    This is the core of the (much simplified) early reclaim.  The goal of this
    patch is to reclaim some easily-freed pages from a zone before falling back
    onto another zone.
    
    One of the major uses of this is NUMA machines.  With the default allocator
    behavior the allocator would look for memory in another zone, which might be
    off-node, before trying to reclaim from the current zone.
    
    This adds a zone tuneable to enable early zone reclaim.  It is selected on a
    per-zone basis and is turned on/off via syscall.
    
    Adding some extra throttling on the reclaim was also required (patch
    4/4).  Without the machine would grind to a crawl when doing a "make -j"
    kernel build.  Even with this patch the System Time is higher on
    average, but it seems tolerable.  Here are some numbers for kernbench
    runs on a 2-node, 4cpu, 8Gig RAM Altix in the "make -j" run:
    
    			wall  user   sys   %cpu  ctx sw.  sleeps
    			----  ----   ---   ----   ------  ------
    No patch		1009  1384   847   258   298170   504402
    w/patch, no reclaim     880   1376   667   288   254064   396745
    w/patch & reclaim       1079  1385   926   252   291625   548873
    
    These numbers are the average of 2 runs of 3 "make -j" runs done right
    after system boot.  Run-to-run variability for "make -j" is huge, so
    these numbers aren't terribly useful except to seee that with reclaim
    the benchmark still finishes in a reasonable amount of time.
    
    I also looked at the NUMA hit/miss stats for the "make -j" runs and the
    reclaim doesn't make any difference when the machine is thrashing away.
    
    Doing a "make -j8" on a single node that is filled with page cache pages
    takes 700 seconds with reclaim turned on and 735 seconds without reclaim
    (due to remote memory accesses).
    
    The simple zone_reclaim syscall program is at
    http://www.bork.org/~mort/sgi/zone_reclaim.c
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfbb38fb808ac23ef44472d05d9bb36edfb49ed0
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Jun 21 17:14:40 2005 -0700

    [PATCH] VM: add may_swap flag to scan_control
    
    Here's the next round of these patches.  These are totally different in
    an attempt to meet the "simpler" request after the last patches.  For
    reference the earlier threads are:
    
    http://marc.theaimsgroup.com/?l=linux-kernel&m=110839604924587&w=2
    http://marc.theaimsgroup.com/?l=linux-mm&m=111461480721249&w=2
    
    This set of patches replaces my other vm- patches that are currently in
    -mm.  So they're against 2.6.12-rc5-mm1 about half way through the -mm
    patchset.
    
    As I said already this patch is a lot simpler.  The reclaim is turned on
    or off on a per-zone basis using a syscall.  I haven't tested the x86
    syscall, so it might be wrong.  It uses the existing reclaim/pageout
    code with the small addition of a may_swap flag to scan_control
    (patch 1/4).
    
    I also added __GFP_NORECLAIM (patch 3/4) so that certain allocation
    types can be flagged to never cause reclaim.  This was a deficiency
    that was in all of my earlier patch sets.  Previously, doing a big
    buffered read would fill one zone with page cache and then start to
    reclaim from that same zone, leaving the other zones untouched.
    
    Adding some extra throttling on the reclaim was also required (patch
    4/4).  Without the machine would grind to a crawl when doing a "make -j"
    kernel build.  Even with this patch the System Time is higher on
    average, but it seems tolerable.  Here are some numbers for kernbench
    runs on a 2-node, 4cpu, 8Gig RAM Altix in the "make -j" run:
    
    			wall  user   sys   %cpu  ctx sw.  sleeps
    			----  ----   ---   ----   ------  ------
    No patch		1009  1384   847   258   298170   504402
    w/patch, no reclaim     880   1376   667   288   254064   396745
    w/patch & reclaim       1079  1385   926   252   291625   548873
    
    These numbers are the average of 2 runs of 3 "make -j" runs done right
    after system boot.  Run-to-run variability for "make -j" is huge, so
    these numbers aren't terribly useful except to seee that with reclaim
    the benchmark still finishes in a reasonable amount of time.
    
    I also looked at the NUMA hit/miss stats for the "make -j" runs and the
    reclaim doesn't make any difference when the machine is thrashing away.
    
    Doing a "make -j8" on a single node that is filled with page cache pages
    takes 700 seconds with reclaim turned on and 735 seconds without reclaim
    (due to remote memory accesses).
    
    The simple zone_reclaim syscall program is at
    http://www.bork.org/~mort/sgi/zone_reclaim.c
    
    This patch:
    
    This adds an extra switch to the scan_control struct.  It simply lets the
    reclaim code know if its allowed to swap pages out.
    
    This was required for a simple per-zone reclaimer.  Without this addition
    pages would be swapped out as soon as a zone ran out of memory and the early
    reclaim kicked in.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 295ab93497ec703f7d6eaf0787dd9768b83035fe
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Tue Jun 21 17:14:38 2005 -0700

    [PATCH] mm: add /proc/zoneinfo
    
    Add /proc/zoneinfo file to display information about memory zones.  Useful
    to analyze VM behaviour.
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05b7438475ddbac47e75506913d44550f0e75938
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Tue Jun 21 17:14:37 2005 -0700

    [PATCH] madvise: merge the maps
    
    This attempts to merge back the split maps.  This code is mostly copied
    from Chrisw's mlock merging from post 2.6.11 trees.  The only difference is
    in munmapped_error handling.  Also passed prev to willneed/dontneed,
    eventhogh they do not handle it now, since I felt it will be cleaner,
    instead of handling prev in madvise_vma in some cases and in subfunction in
    some cases.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e798c6e87b64d9fdbd5e9f757b1c033223763d9f
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Tue Jun 21 17:14:36 2005 -0700

    [PATCH] madvise: do not split the maps
    
    This attempts to avoid splittings when it is not needed, that is when
    vm_flags are same as new flags.  The idea is from the <2.6.11 mlock_fixup
    and others.  This will provide base for the next madvise merging patch.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b15e0905f2b9964fc7426fecab57445e96021b61
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:14:35 2005 -0700

    [PATCH] vmscan: notice slab shrinking
    
    Fix a problem identified by Andrea Arcangeli <andrea@suse.de>
    
    kswapd will set a zone into all_unreclaimable state if it sees that we're not
    successfully reclaiming LRU pages.  But that fails to notice that we're
    successfully reclaiming slab obects, so we can set all_unreclaimable too soon.
    
    So change shrink_slab() to return a success indication if it actually
    reclaimed some objects, and don't assume that the zone is all_unreclaimable if
    that is true.  This means that we won't enter all_unreclaimable state if we
    are successfully freeing slab objects but we're not yet actually freeing slab
    pages, due to internal fragmentation.
    
    (hm, this has a shortcoming.  We could be successfully freeing ZONE_NORMAL
    slab objects while being really oom on ZONE_DMA.  If that happens then kswapd
    might burn a lot of CPU.  But given that there might be some slab objects in
    ZONE_DMA, perhaps that is appropriate.)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39c715b71740c4a78ba4769fb54826929bac03cb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 21 17:14:34 2005 -0700

    [PATCH] smp_processor_id() cleanup
    
    This patch implements a number of smp_processor_id() cleanup ideas that
    Arjan van de Ven and I came up with.
    
    The previous __smp_processor_id/_smp_processor_id/smp_processor_id API
    spaghetti was hard to follow both on the implementational and on the
    usage side.
    
    Some of the complexity arose from picking wrong names, some of the
    complexity comes from the fact that not all architectures defined
    __smp_processor_id.
    
    In the new code, there are two externally visible symbols:
    
     - smp_processor_id(): debug variant.
    
     - raw_smp_processor_id(): nondebug variant. Replaces all existing
       uses of _smp_processor_id() and __smp_processor_id(). Defined
       by every SMP architecture in include/asm-*/smp.h.
    
    There is one new internal symbol, dependent on DEBUG_PREEMPT:
    
     - debug_smp_processor_id(): internal debug variant, mapped to
                                 smp_processor_id().
    
    Also, i moved debug_smp_processor_id() from lib/kernel_lock.c into a new
    lib/smp_processor_id.c file.  All related comments got updated and/or
    clarified.
    
    I have build/boot tested the following 8 .config combinations on x86:
    
     {SMP,UP} x {PREEMPT,!PREEMPT} x {DEBUG_PREEMPT,!DEBUG_PREEMPT}
    
    I have also build/boot tested x64 on UP/PREEMPT/DEBUG_PREEMPT.  (Other
    architectures are untested, but should work just fine.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84929801e14d968caeb84795bfbb88f04283fbd9
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Tue Jun 21 17:14:32 2005 -0700

    [PATCH] x86_64: TASK_SIZE fixes for compatibility mode processes
    
    Appended patch will setup compatibility mode TASK_SIZE properly.  This will
    fix atleast three known bugs that can be encountered while running
    compatibility mode apps.
    
    a) A malicious 32bit app can have an elf section at 0xffffe000.  During
       exec of this app, we will have a memory leak as insert_vm_struct() is
       not checking for return value in syscall32_setup_pages() and thus not
       freeing the vma allocated for the vsyscall page.  And instead of exec
       failing (as it has addresses > TASK_SIZE), we were allowing it to
       succeed previously.
    
    b) With a 32bit app, hugetlb_get_unmapped_area/arch_get_unmapped_area
       may return addresses beyond 32bits, ultimately causing corruption
       because of wrap-around and resulting in SEGFAULT, instead of returning
       ENOMEM.
    
    c) 32bit app doing this below mmap will now fail.
    
      mmap((void *)(0xFFFFE000UL), 0x10000UL, PROT_READ|PROT_WRITE,
    	MAP_FIXED|MAP_PRIVATE|MAP_ANON, 0, 0);
    
    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 589777eab7360894b7ca1c4ba9d252e03b51225b
Author: Zaur Kambarov <kambarov@berkeley.edu>
Date:   Tue Jun 21 17:14:31 2005 -0700

    [PATCH] coverity: idr_get_new_above_int() overrun fix
    
    This patch fixes overrun of array pa:
    92   		struct idr_layer *pa[MAX_LEVEL];
    
    in
    
    98   		l = idp->layers;
    99   		pa[l--] = NULL;
    
    by passing idp->layers, set in
    202  		idp->layers = layers;
    to function  sub_alloc in
    203  		v = sub_alloc(idp, ptr, &id);
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a845099b20e81fb678521f034bbdcd69208da4e
Author: Zaur Kambarov <kambarov@berkeley.edu>
Date:   Tue Jun 21 17:14:30 2005 -0700

    [PATCH] coverity: ipmi: avoid overrun of ipmi_interfaces[]
    
    Fix overrun of static array "ipmi_interfaces" of size 4 at position 4 with
    index variable "if_num".
    
    Definitions involved:
    297  	#define MAX_IPMI_INTERFACES 4
    298  	static ipmi_smi_t ipmi_interfaces[MAX_IPMI_INTERFACES];
    
    Signed-off-by: Zaur Kambarov <zkambarov@coverity.com>
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f20b6a4792c1b5033583c23b5594887dd3867b9
Author: bobl <bobl@turbolinux.com>
Date:   Tue Jun 21 17:14:29 2005 -0700

    [PATCH] megaraid build fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a558cb4ec43ccbe82e2cf899ced37f29ac017df
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 21 17:14:28 2005 -0700

    [PATCH] arm: irqs_disabled() type fix
    
    kernel/sched.c: In function `__might_sleep':
    kernel/sched.c:5461: warning: int format, long unsigned int arg (arg 3)
    
    We expect irqs_disabled() to return an int (poor man's bool).
    
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9723d95d1076e9ef394ff26162fb0b47531089b0
Merge: 4a4f8fd... 7049e68...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 21 18:19:10 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit e1a40fa907498030b6e432c0dbcb06d7a9f14ee3
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Wed Jun 22 10:20:44 2005 +1000

    [XFS] Handle inode semaphores properly for dmapi queues
    
    SGI-PV: 931572
    SGI-Modid: xfs-linux-melb:xfs-kern:189560a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 29516d75a0b09e0a0328dd55c98a342515c9615a
Merge: 4ea7872... 4a4f8fd...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 21 16:21:20 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 7049e6800f40046c384c522a990669024d5f5836
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 21 16:20:28 2005 -0700

    [SPARC64]: Add prefetch support.
    
    The implementation is optimal for UltraSPARC-III and later.
    It will work, however suboptimally, on UltraSPARC-II and
    be treated as a NOP on UltraSPARC-I.
    
    It is not worth code patching this thing as the highest cost
    is the code space, and code patching cannot eliminate that.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4ea78729b8dbfc400fe165a57b90a394a7275a54
Author: Matthew Chapman <matthewc@hp.com>
Date:   Tue Jun 21 16:19:20 2005 -0700

    [IA64] ptrace and restore_sigcontext() allow ar.rsc.pl==0
    
    This patch fixes handling of accesses to ar.rsc via ptrace & restore_sigcontext
    [With Thanks to Chris Wright for noticing the restore_sigcontext path]
    
    Signed-off-by: Matthew Chapman <matthewc@hp.com>
    Acked-by: David Mosberger <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4a4f8fdba6f5a34ca90f426021e17491a30202da
Merge: 2c6e5a8... 90f6691...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 21 15:45:19 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 2c6e5a839f92591a4bc6cac4a575d42151645af3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 21 15:24:19 2005 -0700

    [PATCH] devfs: remove devfs from Kconfig preventing it from being built
    
    Here's a much smaller patch to simply disable devfs from the build.  If
    this goes well, and there are no complaints for a few weeks, I'll resend
    my big "devfs-die-die-die" series of patches that rip the whole thing
    out of the kernel tree.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8005aba69a6440a535a4cc2aed99ffca580847e0
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 21 15:39:22 2005 -0700

    [SPARC64]: Fix cmsg length checks in Solaris emulation layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b404b3459db1326bbdc7085edb1f58b98da5826
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Jun 13 11:27:00 2005 -0700

    [IA64] remove "pci=routeirq" option
    
    Remove "pci=routeirq" option for ia64.  This was a workaround
    after ACPI IRQ routing was changed from "all at boot for everything
    in _PRT" to "do it when the device is enabled" in case there were
    drivers that didn't use pci_enable_device().
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9527cc77e25b3a3787569edcbb8e74080b8df54a
Merge: 1d345da... d039ba2...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 21 14:49:35 2005 -0700

    Merge 'for-linus' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit 90f66914c89b0be63548d4387d1211280aa7bc8e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 21 14:43:28 2005 -0700

    [IPV4]: Fix fib_trie.c's args to fib_dump_info().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0393eed5c3220c9c3823a09a2d02329b8ff08b45
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Tue Jun 21 14:40:31 2005 -0700

    [IA64] fix nested_dtlb_miss handler for hugetlb address
    
    The nested_dtlb_miss handler currently does not handle fault from
    hugetlb address correctly.  It walks the page table assuming PAGE_SIZE.
    Thus when taking a fault triggered from hugetlb address, it would not
    calculate the pgd/pmd/pte address correctly and thus result an incorrect
    invocation of ia64_do_page_fault().  In there, kernel will signal SIGBUS
    and application dies (The faulting address is perfectly legal and we
    have a valid pte for the corresponding user hugetlb address as well).
    This patch fix the described kernel bug.  Since nested_dtlb_miss is a
    rare event and a slow path anyway, I'm making the change without #ifdef
    CONFIG_HUGETLB_PAGE for code readability.  Tony, please apply.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 52a0de2cd2d3da8f90d88e2eccb63d0cadd6ae26
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Mon Jun 20 14:50:00 2005 -0700

    [IA64] printk needs KERN_INFO arch/ia64/kernel/smp.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a35f1e03b868a3179fa12344ec0d46a44fbf7574
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Tue Jun 21 11:30:00 2005 -0700

    [IA64] enable SGI simulator for generic kernels
    
    Allow the SGI simulator (medusa) to work on generic kernels.  There is
    no inherent dependency on an sn2-specific kernel.
    
    Boot tested on Altix, medusa and HP rx2600.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bd91c4bb134a3c5b04969f5ab960a3fd48778bcc
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 21 14:16:00 2005 -0700

    [IA64] Refresh tiger_defconfig
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 047601bf7c803724bbab9a4fdbad9481cecc12e0
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:07:13 2005 -0700

    [NETFILTER]: Fix ip6t_LOG sit tunnel logging
    
    Sit tunnel logging is currently broken:
    
    MAC=01:23:45:67:89:ab->01:23:45:47:89:ac TUNNEL=123.123.  0.123-> 12.123.  6.123
    
    Apart from the broken IP address, MAC addresses are printed differently
    for sit tunnels than for everything else.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2715bcf9efc34063e05009f188eb896c462ae925
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:06:24 2005 -0700

    [NETFILTER]: Drop conntrack reference in ip_call_ra_chain()/ip_mr_input()
    
    Drop reference before handing the packets to raw_rcv()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6150bacfec95c7042678667561664efcf10d4508
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:03:46 2005 -0700

    [NETFILTER]: Check TCP checksum in ipt_REJECT
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e3be8ba79294df5de96692411e122506b40c5aa4
Author: Keir Fraser <Keir.Fraser@xl.cam.ac.uk>
Date:   Tue Jun 21 14:03:23 2005 -0700

    [NETFILTER]: Avoid unncessary checksum validation in UDP connection tracking
    
    Signed-off-by: Keir Fraser <Keir.Fraser@xl.cam.ac.uk>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97216c799a6496163be8c81c9ceed297d92956c5
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:03:01 2005 -0700

    [NETFILTER]: Missing owner-field initialization in ip6table_raw
    
    I missed this one when fixing up iptable_raw.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d3cdb41f52e299f70b66cbb569bff5216f3643a
Author: Phil Oester <kernel@linuxace.com>
Date:   Tue Jun 21 14:02:42 2005 -0700

    [NETFILTER]: expectation timeouts are compulsory
    
    Since expectation timeouts were made compulsory [1], there is no need to
    check for them in ip_conntrack_expect_insert.
    
    [1] https://lists.netfilter.org/pipermail/netfilter-devel/2005-January/018143.html
    
    Signed-off-by: Phil Oester <kernel@linuxace.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e98231858bbfd2aca42f93d55133c2fca6df00f9
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:02:15 2005 -0700

    [NETFILTER]: Restore netfilter assumptions in IPv6 multicast
    
    Netfilter assumes that skb->data == skb->nh.ipv6h
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18b8afc771102b1b6af97962808291a7d27f52af
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:01:57 2005 -0700

    [NETFILTER]: Kill nf_debug
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e45b1be8bcb3643808975a426fa3e201a2588e87
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 21 14:01:30 2005 -0700

    [NETFILTER]: Kill lockhelp.h
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95dccdfe29a76c513e29f88f366612d7570adab3
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Tue Jun 21 10:43:00 2005 -0700

    [IA64] refresh arch/ia64/defconfig
    
    Refresh arch/ia64/defconfig, as it was getting a bit stale.  The only
    manual changes I made were:
    
    CONFIG_SCSI_SATA=y		needed for some Altix base I/O cards
    CONFIG_SCSI_SATA_VITESSE=y
    
    CONFIG_DM_MULTIPATH=m		the rest are already modules
    
    CONFIG_FUSION_SPI=y		new driver breakout
    CONFIG_FUSION_FC=m
    
    CONFIG_SGI_TIOCX=y		enable some other SGI drivers
    CONFIG_SGI_MBCS=m
    CONFIG_AGP_SGI_TIOCA=m
    
    Boot tested on Altix, HP rx2600 and Intel Tiger
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c9e3e8b6958e02230079e6817862ea2968509866
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Tue Jun 21 13:58:25 2005 -0700

    [IPV6]: multicast join and misc
    
    Here is a simplified version of the patch to fix a bug in IPv6
    multicasting. It:
    
    1) adds existence check & EADDRINUSE error for regular joins
    2) adds an exception for EADDRINUSE in the source-specific multicast
            join (where a prior join is ok)
    3) adds a missing/needed read_lock on sock_mc_list; would've raced
            with destroying the socket on interface down without
    4) adds a "leave group" in the (INCLUDE, empty) source filter case.
            This frees unneeded socket buffer memory, but also prevents
            an inappropriate interaction among the 8 socket options that
            mess with this. Some would fail as if in the group when you
            aren't really.
    
    Item #4 had a locking bug in the last version of this patch; rather than
    removing the idev->lock read lock only, I've simplified it to remove
    all lock state in the path and treat it as a direct "leave group" call for
    the (INCLUDE,empty) case it covers. Tested on an MP machine. :-)
    
    Much thanks to HoerdtMickael <hoerdt@clarinet.u-strasbg.fr> who
    reported the original bug.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d51aa80a9b1db43920c0770c3bb842dd823c005
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Tue Jun 21 13:51:04 2005 -0700

    [IPV6]: V6 route events reported with wrong netlink PID and seq number
    
    Essentially netlink at the moment always reports a pid and sequence of 0
    always for v6 route activities.
    To understand the repurcassions of this look at:
    http://lists.quagga.net/pipermail/quagga-dev/2005-June/003507.html
    
    While fixing this, i took the liberty to resolve the outstanding issue
    of IPV6 routes inserted via ioctls to have the correct pids as well.
    
    This patch tries to behave as close as possible to the v4 routes i.e
    maintains whatever PID the socket issuing the command owns as opposed to
    the process. That made the patch a little bulky.
    
    I have tested against both netlink derived utility to add/del routes as
    well as ioctl derived one. The Quagga folks have tested against quagga.
    This fixes the problem and so far hasnt been detected to introduce any
    new issues.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 19baf839ff4a8daa1f2a7400897094fc18e4f5e9
Author: Robert Olsson <Robert.Olsson@data.slu.se>
Date:   Tue Jun 21 12:43:18 2005 -0700

    [IPV4]: Add LC-Trie FIB lookup algorithm.
    
    Signed-off-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18b504e25fd617bee8830d2cdcaff7fb7b5931bb
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Tue Jun 21 12:38:48 2005 -0700

    [NETLINK]: netlink_callback structure needs 5 args not 4
    
    net/ipv4/tcp_diag.c uses up to ->args[4]
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fae6ec69c84d71b1d5bda9ede1a262c1681684aa
Merge: bbc0274... 1d345da...
Author: Jaroslav Kysela <perex@hera.kernel.org>
Date:   Tue Jun 21 07:39:41 2005 -0700

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit ad89d0212e32c5cf27dfcbad67b91a32b9878529
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:57:57 2005 +1000

    [XFS] Remove some debugging code from quota syscalls.
    
    SGI-PV: 932952
    SGI-Modid: xfs-linux-melb:xfs-kern:22929a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 754002b4fb1b553bd8f978bb6f5aca7af46fde67
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:49:06 2005 +1000

    [XFS] Merge a few minor fixes to the quota warning code.
    
    SGI-PV: 938145
    SGI-Modid: xfs-linux:xfs-kern:22901a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 06d10dd9ca70ff1318ff2b871ff5f61a94223d9f
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:48:47 2005 +1000

    [XFS] Merge fixes into realtime quota code, since one/two reported, still
    not enabled though.
    
    SGI-PV: 938145
    SGI-Modid: xfs-linux:xfs-kern:22900a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 77bc5beb5977a166e41b87c9d55d8e9cf2b3a04f
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:48:04 2005 +1000

    [XFS] Makes more sense to use the fsxattr interface instead of adding new
    ioctls for project IDs.
    
    SGI-PV: 938145
    SGI-Modid: xfs-linux:xfs-kern:22899a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit bd5a876ac4c130e8e1986dcdbb21839ae4cd91c0
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:47:39 2005 +1000

    [XFS] (mostly) remove xfs_inval_cached_pages  Since the last round of
    direct I/O locking changes it is just a wrapper around
    VOP_FLUSHINVAL_PAGES, so it's not nessecary anymore.  Keep a simplified
    version for kernels < 2.4.22, as these don't have the changed direct I/O
    locking.
    
    SGI-PV: 938064
    SGI-Modid: xfs-linux:xfs-kern:194420a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d130c14c0310edac5ea0c6327bef7e3715f9a083
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:43:22 2005 +1000

    [XFS] simplify ASSERT
    
    SGI-PV: 938063
    SGI-Modid: xfs-linux:xfs-kern:194416a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 7d795ca3442c7a562c45aeb7a7a808c79992a589
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:41:19 2005 +1000

    [XFS] consolidate extent item freeing
    
    SGI-PV: 938062
    SGI-Modid: xfs-linux:xfs-kern:194415a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f898d6c09caa40d82203acd72e9fda3cd5aeae74
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:40:48 2005 +1000

    [XFS] quiesce the filesystem proper when freezing
    
    SGI-PV: 936977
    SGI-Modid: xfs-linux:xfs-kern:193840a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 48fab6bf5f8baf0d16b20a35e537719d14b66275
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:40:20 2005 +1000

    [XFS] add XFS_INOBT_IS_FREE_DISK
    
    SGI-PV: 928382
    SGI-Modid: xfs-linux:xfs-kern:193778a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6add2c4288801bd7fd0a4cc3277de7688f1f6714
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Tue Jun 21 15:39:44 2005 +1000

    [XFS] Fix up some warning fallout from functions made static
    
    SGI-PV: 936255
    SGI-Modid: xfs-linux:xfs-kern:193691a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 365ca83d509f77f2095976edb8d10ca6e9d86d58
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:39:12 2005 +1000

    [XFS] Add support for project quota inheritance, a merge of Glens changes.
    
    SGI-PV: 932952
    SGI-Modid: xfs-linux:xfs-kern:22806a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit c8ad20ffeb592d66ea869c57f8c525a9d727c67b
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 15:38:48 2005 +1000

    [XFS] Add support for project quota, based on Dan Knappes earlier work.
    
    SGI-PV: 932952
    SGI-Modid: xfs-linux:xfs-kern:22805a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 8401e9631c26dca9ebbc6997ac445fd49b06c79e
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:38:03 2005 +1000

    [XFS] remove xfs_incore_relse
    
    SGI-PV: 936977
    SGI-Modid: xfs-linux:xfs-kern:193409a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 66f58d236fd9c2676545678374d58d48206bdbfa
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:37:43 2005 +1000

    [XFS] simplify XFS_PURGE_INODE
    
    SGI-PV: 936891
    SGI-Modid: xfs-linux:xfs-kern:193408a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit efa8027804b2bd8eb7d4b41a1f5b738c36e44e8c
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:37:17 2005 +1000

    [XFS] rewrite xfs_iflush_all
    
    SGI-PV: 936890
    SGI-Modid: xfs-linux:xfs-kern:193349a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ba0f32d46049e2b625dabd33c7964f8ca2cd7651
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:36:52 2005 +1000

    [XFS] mark various symbols static  Patch from Adrian Bunk
    
    SGI-PV: 936255
    SGI-Modid: xfs-linux:xfs-kern:192760a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 4372d6e10349d4e8b012588f86f15c740c73a7c4
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:36:00 2005 +1000

    [XFS] Remove dead code.  Patch from Adrian Bunk
    
    SGI-PV: 936255
    SGI-Modid: xfs-linux:xfs-kern:192759a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit cf9937c6c6c7edb6650411d1cf3cb57f072b1277
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:35:24 2005 +1000

    [XFS] Fix pagebuf slab initialization
    
    SGI-PV: 908809
    SGI-Modid: xfs-linux:xfs-kern:192756a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 02de1f0abfc60aa4fead65eee4118d05667c93c3
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:33:48 2005 +1000

    [XFS] fix some more compiler warnings in the vnode tracing code
    
    SGI-PV: 934679
    SGI-Modid: xfs-linux:xfs-kern:192570a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 23ea4032c875fc75c2363a9bcaba87cfb134ff68
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Jun 21 15:14:01 2005 +1000

    [XFS] rename various pagebuf symbols to xfsbuf
    
    SGI-PV: 908809
    SGI-Modid: xfs-linux:xfs-kern:192348a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 9ba91bd365a7f137c40b3644b57bc25853cd2d8d
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Jun 21 15:12:20 2005 +1000

    [XFS] send dmapi events from nopage for mmapped files
    
    SGI-PV: 935317
    SGI-Modid: xfs-linux:xfs-kern:192007a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit eaffe886b5b345eaf6586be78eef762b6fd3e2bd
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Jun 21 14:47:46 2005 +1000

    [XFS] Undo xfs-linux:xfs-kern:190622a
    
    SGI-PV: 933551
    SGI-Modid: xfs-linux:xfs-kern:192006a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 2b7f4bd02699daef40388d84b08106550b0e10a3
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Jun 21 14:24:27 2005 +1000

    [XFS] upate copyrights
    
    SGI-PV: 933765
    SGI-Modid: xfs-linux:xfs-kern:190760a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6fac0cb46bc4c50d6cbc5998ad206435f39fb00f
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Jun 21 14:07:45 2005 +1000

    [XFS] coordinate mmap calls with xfs_dm_punch_hole
    
    SGI-PV: 933551
    SGI-Modid: xfs-linux:xfs-kern:190622a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b74e2159c9849fb97659c6dc47ad706f702b22b9
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 21 13:21:49 2005 +1000

    [XFS] Add a get/set interface for XFS project identifiers.
    
    SGI-PV: 932952
    SGI-Modid: xfs-linux:xfs-kern:21938a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1d345dac1f30af1cd9f3a1faa12f9f18f17f236e
Merge: fb39588... 87c8a44...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 20 16:00:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit fb395884576684ebb54b19b1054f4caed589d5f0
Merge: 91b9047... 246955f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 20 15:58:58 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 87c8a4433b608261a9becdb0ce2d2f2ed4b71d05
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Jun 19 12:21:43 2005 +0200

    [PATCH] PCI: fix show_modalias() function due to attribute change
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4893e9d1cfeb614b5155c43eefbb338b4f02cb34
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Jun 19 12:21:43 2005 +0200

    [PATCH] USB: fix show_modalias() function due to attribute change
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9d9d27fb651a7c95a46f276bacb4329db47470a6
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Tue Jun 14 09:54:54 2005 -0400

    [PATCH] SYSFS: fix PAGE_SIZE check
    
    Without this change I can't set an attribute exactly PAGE_SIZE in
    length. There is no need for zero termination because the interface
    uses lengths.
    
    From: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 42b16c051c3f462095fb8c9bad1bc05b34518cb9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue May 31 17:08:49 2005 +1000

    [PATCH] Driver core: Don't "lose" devices on suspend on failure
    
    I think we need this patch or we might "lose" devices to the dpm_irq_off
    list if a failure occurs during the suspend process.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8215534ce7d073423bfa9c17405c43ab7636ca03
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Tue May 31 10:39:52 2005 +0530

    [PATCH] sysfs-iattr: set inode attributes
    
    o Following patch sets the attributes for newly allocated inodes for sysfs
      objects. If the object has non-default attributes, inode attributes are
      set as saved in sysfs_dirent->s_iattr, pointer to struct iattr.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 988d186de5b6966a71a8cc52e6cb4895fd2f7799
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Tue May 31 10:39:14 2005 +0530

    [PATCH] sysfs-iattr: add sysfs_setattr
    
    o This adds ->i_op->setattr VFS method for sysfs inodes. The changed
      attribues are saved in the persistent sysfs_dirent structure as a pointer
      to struct iattr. The struct iattr is allocated only for those sysfs_dirent's
      for which default attributes are getting changed. Thanks to Jon Smirl for
      this suggestion.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6fa5c828c7fb6beef7035864bd2b18e7386fbdd5
Author: Maneesh Soni <maneesh@in.ibm.com>
Date:   Tue May 31 10:38:12 2005 +0530

    [PATCH] sysfs-iattr: attach sysfs_dirent before new inode
    
    o The following patch makes sure to attach sysfs_dirent to the dentry before
      allocation a new inode through sysfs_create(). This change is done as
      preparatory work for implementing ->i_op->setattr() functionality for
      sysfs objects.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 050480f12aeab62d39a1a07546606a47217ebefa
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Sun Jun 5 10:51:46 2005 +0200

    [PATCH] I2C: drivers/i2c/chips/adm1026.c: use dynamic sysfs callbacks
    
    Finally (phew!) this patch demonstrates how to adapt the adm1026 to
    take advantage of the new callbacks, and the i2c-sysfs.h defined
    structure/macros. Most of the other sensor/hwmon drivers could be
    updated in the same way. The odd few exceptions (bmcsensors for
    example) however might be better off with their own custom attribute
    structure.
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0a3e7eeabc9f76b7496488aad2d11626ff6a2a4f
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 22:59:05 2005 -0400

    [PATCH] I2C: add i2c sensor_device_attribute and macros
    
    This patch creates a new header with a potential standard i2c sensor
    attribute type (which simply includes an int representing the sensor
    number/index) and the associated macros, SENSOR_DEVICE_ATTR to define
    a static attribute and to_sensor_dev_attr to get a
    sensor_device_attribute reference from an embedded device_attribute
    reference.
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>

commit f2d03e1b3f00f1c5971463ab0101bef0c521ad3b
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:44:59 2005 -0400

    [PATCH] Driver Core: include: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 060b8845e6bea938d65ad6f89e83507e5ff4fec4
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:44:04 2005 -0400

    [PATCH] Driver Core: drivers/usb/input/aiptek.c - drivers/zorro/zorro-sysfs.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10523b3b82456e416cbaffcc24ea2246980aa746
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:43:37 2005 -0400

    [PATCH] Driver Core: drivers/s390/net/qeth_sys.c - drivers/usb/gadget/pxa2xx_udc.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3fd3c0a5f53a0f9d8987b90acbd84f7dd8ef606e
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:43:27 2005 -0400

    [PATCH] Driver Core: drivers/char/raw3270.c - drivers/net/netiucv.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e404e274f62665f3333d6a539d0d3701f678a598
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:42:58 2005 -0400

    [PATCH] Driver Core: drivers/i2c/chips/w83781d.c - drivers/s390/block/dcssblk.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a5099cfc2e82240b0a3e72ad79a5969d5af1a7dc
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:42:25 2005 -0400

    [PATCH] Driver Core: drivers/i2c/chips/pc87360.c - w83627hf.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8627f9ba531269d8850919c62af1b017438e2e79
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:42:03 2005 -0400

    [PATCH] Driver Core: drivers/i2c/chips/lm77.c - max1619.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30f74292e50d6c4ae438dbee5cb45d77bf774351
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:41:35 2005 -0400

    [PATCH] Driver Core: drivers/i2c/chips/adm1031.c - lm75.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 74880c063b06efd103c924abfe19d9d8fa4864c4
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:41:12 2005 -0400

    [PATCH] Driver Core: drivers/base - drivers/i2c/chips/adm1026.c: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ff381d2223a30ee70752791fd9c3588d8f1cab77
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:40:51 2005 -0400

    [PATCH] Driver Core: arch: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3eb8c7836eb074b61d63597be3e4f085814ac4c0
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:40:28 2005 -0400

    [PATCH] Driver core: Documentation: update device attribute callbacks
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 54b6f35c99974e99e64c05c2895718355123c55f
Author: Yani Ioannou <yani.ioannou@gmail.com>
Date:   Tue May 17 06:39:34 2005 -0400

    [PATCH] Driver core: change device_attribute callbacks
    
    This patch adds the device_attribute paramerter to the
    device_attribute store and show sysfs callback functions, and passes a
    reference to the attribute when the callbacks are called.
    
    Signed-off-by: Yani Ioannou <yani.ioannou@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca2b94ba12f3c36fd3d6ed9d38b3798d4dad0d8b
Author: Hannes Reinecke <hare@suse.de>
Date:   Wed May 18 10:42:23 2005 +0200

    [PATCH] driver core: fix error handling in bus_add_device
    
    The error handling in bus_add_device() and device_attach() is simply
    non-existing. This patch propagates any error from device_attach to
    the upper layers to allow for a proper recovery.
    
    From: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit acaefc25d21f850e47ecc5098d1e0bc442c526be
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Wed May 18 14:40:59 2005 +0200

    [PATCH] libfs: add simple attribute files
    
    Based on the discussion about spufs attributes, this is my suggestion
    for a more generic attribute file support that can be used by both
    debugfs and spufs.
    
    Simple attribute files behave similarly to sequential files from
    a kernel programmers perspective in that a standard set of file
    operations is provided and only an open operation needs to
    be written that registers file specific get() and set() functions.
    
    These operations are defined as
    
    void foo_set(void *data, u64 val); and
    u64 foo_get(void *data);
    
    where data is the inode->u.generic_ip pointer of the file and the
    operations just need to make send of that pointer. The infrastructure
    makes sure this works correctly with concurrent access and partial
    read calls.
    
    A macro named DEFINE_SIMPLE_ATTRIBUTE is provided to further simplify
    using the attributes.
    
    This patch already contains the changes for debugfs to use attributes
    for its internal file operations.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4109aca06cb7b042ea791d0f9d3c9615bc3bf5cd
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 16 17:19:55 2005 -0700

    [PATCH] Driver Core: driver model doc update
    
    This updates some driver data documentation:
    
     - removes references to some fields that haven't been there for a
       long time now, e.g. pre-kobject or even older;
    
     - giving more information about the probe() method;
    
     - adding an example of how platform_data is used
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4b45099b75832434c5113b9aed1499f8a69d13d5
Author: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
Date:   Sun May 8 21:28:53 2005 +0900

    [PATCH] Driver core: unregister_node() for hotplug use
    
    This adds a generic function 'unregister_node()'.
    It is used to remove objects of a node going away
    for hotplug.  All the devices on the node must be
    unregistered before calling this function.
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN drivers/base/node.c~numa_hp_base drivers/base/node.c

commit f409661877a25d11c2495bcd879807f17c286684
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 6 15:41:08 2005 -0400

    [PATCH] usbcore: Don't call device_release_driver recursively
    
    This patch fixes usb_driver_release_interface() to make it avoid calling
    device_release_driver() recursively, i.e., when invoked from within the
    disconnect routine for the same device.  The patch applies to your
    "driver" tree.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c95a6b057b108c2b7add35cba1354f9af921349e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 6 15:38:33 2005 -0400

    [PATCH] driver core: Fix races in driver_detach()
    
    This patch is intended for your "driver" tree.  It fixes several subtle
    races in driver_detach() and device_release_driver() in the driver-model
    core.
    
    The major change is to use klist_remove() rather than klist_del() when
    taking a device off its driver's list.  There's no other way to guarantee
    that the list pointers will be updated before some other driver binds to
    the device.  For this to work driver_detach() can't use a klist iterator,
    so the loop over the devices must be written out in full.  In addition the
    patch protects against the possibility that, when a driver and a device
    are unregistered at the same time, one may be unloaded from memory before
    the other is finished using it.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6623415687eaffef49429292ab062bb046ee3311
Author: Patrick Mochel <mochel@digitalimplant.org>
Date:   Thu Apr 28 17:11:52 2005 -0700

    [PATCH] sn: fixes due to driver core changes
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 273971bade8a6d37c1b162146de1a53965cdc245
Author: Patrick Mochel <mochel@digitalimplant.org>
Date:   Mon Jun 20 15:15:28 2005 -0700

    [PATCH] usb: klist_node_attached() fix
    
    The original code looks like this:
    
            /* if interface was already added, bind now; else let
             * the future device_add() bind it, bypassing probe()
             */
            if (!list_empty (&dev->bus_list))
                    device_bind_driver(dev);
    
    IOW, it's checking to see if the device is attached to the bus or not
    and binding the driver if it is. It's checking the device's bus list,
    which will only appear empty when the device has been initialized, but
    not added. It depends way too much on the driver model internals, but it
    seems to be the only way to do the weird crap they want to do with
    interfaces.
    
    When I converted it to use klists, I accidentally inverted the logic,
    which led to bad things happening. This patch returns the check to its
    orginal value.
    
    From: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/core/usb.c
    ===================================================================

commit 12eac738e5889a10da5b391c02eeb61229c796dc
Author: Jason Uhlenkott <jasonuhl@sgi.com>
Date:   Wed Mar 30 13:19:54 2005 -0800

    [PATCH] Fix typo in scdrv_init()
    
    Fix a typo in scdrv_init() which was breaking the build for SGI sn2.
    
    Signed-off-by: Jason Uhlenkott <jasonuhl@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0d3e5a2e39b6ba2974e9e7c2a429018c45de8e76
Author: Patrick Mochel <mochel@digitalimplant.org>
Date:   Tue Apr 5 23:46:33 2005 -0700

    [PATCH] Driver Core: fix bk-driver-core kills ppc64
    
    There's no check to see if the device is already bound to a driver, which
    could do bad things.  The first thing to go wrong is that it will try to match
    a driver with a device already bound to one.  In some cases (it appears with
    USB with drivers/usb/core/usb.c::usb_match_id()), some drivers will match a
    device based on the class type, so it would be common (especially for HID
    devices) to match a device that is already bound.
    
    The fun comes when ->probe() is called, it fails, then
    driver_probe_device() does this:
    
    	dev->driver = NULL;
    
    Later on, that pointer could be be dereferenced without checking and cause
    hell to break loose.
    
    This problem could be nasty. It's very hardware dependent, since some
    devices could have a different set of matching qualifiers than others.
    
    Now, I don't quite see exactly where/how you were getting that crash.
    You're dereferencing bad memory, but I'm not sure which pointer was bad
    and where it came from, but it could have come from a couple of different
    places.
    
    The patch below will hopefully fix it all up for you. It's against
    2.6.12-rc2-mm1, and does the following:
    
    - Move logic to driver_probe_device() and comments uncommon returns:
      1 - If device is bound
      0 - If device not bound, and no error
      error - If there was an error.
    
    - Move locking to caller of that function, since we want to lock a
      device for the entire time we're trying to bind it to a driver (to
      prevent against a driver being loaded at the same time).
    
    - Update __device_attach() and __driver_attach() to do that locking.
    
    - Check if device is already bound in __driver_attach()
    
    - Update the converse device_release_driver() so it locks the device
      around all of the operations.
    
    - Mark driver_probe_device() as static and remove export. It's an
      internal function, it should stay that way, and there are no other
      callers. If there is ever a need to export it, we can audit it as
      necessary.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit b86c1df1f98d16c999423a3907eb40a9423f481e
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Mar 31 12:53:00 2005 -0800

    [PATCH] Driver core: Fix up the driver and device iterators to be quieter
    
    Also stops looping over the lists when a match is found.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0e2b4a0a9dd3eed71b56c47268bf4e40cff6d0f
Author: long <tlnguyen@snoqualmie.dp.intel.com>
Date:   Tue Mar 29 13:36:43 2005 -0800

    [PATCH] use device_for_each_child() to properly access child devices.
    
    On Friday, March 25, 2005 8:47 PM Greg Kroah-Hartman wrote:
    >Here's a fix for pci express.  For some reason I don't think they are
    >using the driver model properly here, but I could be wrong...
    
    Thanks for making the changes. However, changes in functions:
    void pcie_port_device_remove(struct pci_dev *dev) and
    static int remove_iter(struct device *dev, void *data)
    are not correct. Please use the patch, which is based on kernel
    2.6.12-rc1, below for a fix for these.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 64360322ab3330d4881166380ad43a1eec2f123d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 25 11:45:31 2005 -0800

    [PATCH] Use device_for_each_child() to unregister devices in nodemgr_remove_host_dev()
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/drivers/ieee1394/nodemgr.c b/drivers/ieee1394/nodemgr.c

commit ff710710eae73990dd484ea8e37dba636452502b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Mar 24 00:44:28 2005 -0800

    [PATCH] USB: fix build warning in usb core as pointed out by Andrew.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/core/usb.c
    ===================================================================

commit 126eddfbf8cae8a20c22708192bffcbd77c8a889
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 22 12:17:13 2005 -0800

    [PATCH] driver core: change export symbol for driver_for_each_device()
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: linux-2.6.12-rc2/drivers/base/driver.c
    ===================================================================

commit 4d12d2d953ca5e299de6a653f1d0478f670d7bc6
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 20:08:04 2005 -0800

    [PATCH] Fix up bogus comment.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/drivers/base/driver.c b/drivers/base/driver.c

commit 36239577cfb6b9a7c111209536b54200b0252ebf
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 19:08:30 2005 -0800

    [PATCH] Use a klist for device child lists.
    
    - Use klist iterator in device_for_each_child(), making it safe to use for
      removing devices.
    - Remove unused list_to_dev() function.
    - Kills all usage of devices_subsys.rwsem.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a881f166f473373589ce6f3fdc47b44a1450e2d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 25 15:52:00 2005 -0800

    [PATCH] use device_for_each_child() to properly access child devices.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20b1e674230b642be662c5975923a0160ab9cbdc
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 19:03:59 2005 -0800

    [PATCH] Use device_for_each_child() to unregister devices in scsi_remove_target().
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/scsi/scsi_sysfs.c
    ===================================================================

commit 0293a509405dccecc30783a5d729d615b68d6a77
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 18:59:59 2005 -0800

    [PATCH] Don't reference NULL klist pointer in klist_remove().
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/lib/klist.c b/lib/klist.c

commit 0956af53afea290c5676c75249fc2c180d831375
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 18:58:45 2005 -0800

    [PATCH] Call klist_del() instead of klist_remove().
    
    - Can't wait on removing the current item in the list (the positive refcount *because*
      we are using it causes it to deadlock).
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 63c4f204ffc8219696bda88eb20c9873d007a2fc
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 13:08:05 2005 -0800

    [PATCH] Remove struct device::driver_list.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7dc35cdf69149a7f2b5216ada9bafe359746ac1c
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 13:03:35 2005 -0800

    [PATCH] Remove struct device::bus_list.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6eded061b1263847aedac7469339e99579aec5e5
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 13:02:28 2005 -0800

    [PATCH] Fix up bus code and remove use of rwsem.
    
    - Don't add devices to bus's embedded kset, since it's not used by anyone anymore.
    - Don't need to take the bus rwsem when calling {device,driver}_attach(), since
      those functions use the klists and the klists' spinlocks.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d4a7537122fa47a6ce41c5fdab53d844c78d7023
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 13:00:16 2005 -0800

    [PATCH] Fix up USB to use klist_node_attached() instead of list_empty() on lists that will go away.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/core/usb.c
    ===================================================================

commit 8b0c250be489dcbf1a3a33bb4ec4c7f33735a365
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 12:58:57 2005 -0800

    [PATCH] add klist_node_attached() to determine if a node is on a list or not.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/include/linux/klist.h b/include/linux/klist.h

commit 2287c322b61fced7e0c326a1a9606aa73147e3df
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 10:50:24 2005 -0800

    [PATCH] Use bus_for_each_{dev,drv} for driver binding.
    
    - Now possible, since the lists are locked using the klist lock and not the
      global rwsem.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cb85b6f1cc811ecb9ed4b950206d8941ba710e68
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Thu Mar 24 10:48:35 2005 -0800

    [PATCH] Remove the unused device_find().
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94e7b1c5ff2055571703e38b059afffe17658432
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 12:25:36 2005 -0800

    [PATCH] Add a klist to struct device_driver for the devices bound to it.
    
    - Use it in driver_for_each_device() instead of the regular list_head and stop using
      the bus's rwsem for protection.
    - Use driver_for_each_device() in driver_detach() so we don't deadlock on the
      bus's rwsem.
    - Remove ->devices.
    - Move klist access and sysfs link access out from under device's semaphore, since
      they're synchronized through other means.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 38fdac3cdce276554b4484a41f8ec2daf81cb2ff
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 12:00:18 2005 -0800

    [PATCH] Add a klist to struct bus_type for its drivers.
    
    - Use it in bus_for_each_drv().
    - Use the klist spinlock instead of the bus rwsem.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 465c7a3a3a5aabcedd2e43612cac5a12f23da19a
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 11:49:14 2005 -0800

    [PATCH] Add a klist to struct bus_type for its devices.
    
    - Use it for bus_for_each_dev().
    - Use the klist spinlock instead of the bus rwsem.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a19fea43616066561e221359596ce532e631395
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 11:45:16 2005 -0800

    [PATCH] Add initial implementation of klist helpers.
    
    This klist interface provides a couple of structures that wrap around
    struct list_head to provide explicit list "head" (struct klist) and
    list "node" (struct klist_node) objects. For struct klist, a spinlock
    is included that protects access to the actual list itself. struct
    klist_node provides a pointer to the klist that owns it and a kref
    reference count that indicates the number of current users of that node
    in the list.
    
    The entire point is to provide an interface for iterating over a list
    that is safe and allows for modification of the list during the
    iteration (e.g. insertion and removal), including modification of the
    current node on the list.
    
    It works using a 3rd object type - struct klist_iter - that is declared
    and initialized before an iteration. klist_next() is used to acquire the
    next element in the list. It returns NULL if there are no more items.
    This klist interface provides a couple of structures that wrap around
    struct list_head to provide explicit list "head" (struct klist) and
    list "node" (struct klist_node) objects. For struct klist, a spinlock
    is included that protects access to the actual list itself. struct
    klist_node provides a pointer to the klist that owns it and a kref
    reference count that indicates the number of current users of that node
    in the list.
    
    The entire point is to provide an interface for iterating over a list
    that is safe and allows for modification of the list during the
    iteration (e.g. insertion and removal), including modification of the
    current node on the list.
    
    It works using a 3rd object type - struct klist_iter - that is declared
    and initialized before an iteration. klist_next() is used to acquire the
    next element in the list. It returns NULL if there are no more items.
    Internally, that routine takes the klist's lock, decrements the reference
    count of the previous klist_node and increments the count of the next
    klist_node. It then drops the lock and returns.
    
    There are primitives for adding and removing nodes to/from a klist.
    When deleting, klist_del() will simply decrement the reference count.
    Only when the count goes to 0 is the node removed from the list.
    klist_remove() will try to delete the node from the list and block
    until it is actually removed. This is useful for objects (like devices)
    that have been removed from the system and must be freed (but must wait
    until all accessors have finished).
    
    Internally, that routine takes the klist's lock, decrements the reference
    count of the previous klist_node and increments the count of the next
    klist_node. It then drops the lock and returns.
    
    There are primitives for adding and removing nodes to/from a klist.
    When deleting, klist_del() will simply decrement the reference count.
    Only when the count goes to 0 is the node removed from the list.
    klist_remove() will try to delete the node from the list and block
    until it is actually removed. This is useful for objects (like devices)
    that have been removed from the system and must be freed (but must wait
    until all accessors have finished).
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/include/linux/klist.h b/include/linux/klist.h

commit 6034a080f98b0bbc0a058e2ac65a538f75cffeee
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 11:09:40 2005 -0800

    [PATCH] Use driver_for_each_device() instead of manually walking list.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/core/usb.c
    ===================================================================

commit 8d618afdd61ccaacbab4976a556c0ddcf36e2d8a
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 11:07:54 2005 -0800

    [PATCH] Use driver_for_each_device() in drivers/pnp/driver.c instead of manually walking list.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Nru a/drivers/pnp/driver.c b/drivers/pnp/driver.c

commit fae3cd00255e3e51ffd59fedb1bdb91ec96be395
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 10:59:56 2005 -0800

    [PATCH] Add driver_for_each_device().
    
    Now there's an iterator for accessing each device bound to a driver.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: linux-2.6.12-rc2/drivers/base/driver.c
    ===================================================================

commit 07e4a3e27fe414980ddc85a358e5a56abc48b363
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 10:52:54 2005 -0800

    [PATCH] Move device/driver code to drivers/base/dd.c
    
    This relocates the driver binding/unbinding code to drivers/base/dd.c. This is done
    for two reasons: One, it's not code related to the bus_type itself; it uses some from
    that, some from devices, and some from drivers. And Two, it will make it easier to do
    some of the upcoming lock removal on that code..
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af70316af182f4716cc5eec7e0d27fc731d164bd
Author: mochel@digitalimplant.org <mochel@digitalimplant.org>
Date:   Mon Mar 21 10:41:04 2005 -0800

    [PATCH] Add a semaphore to struct device to synchronize calls to its driver.
    
    This adds a per-device semaphore that is taken before every call from the core to a
    driver method. This prevents e.g. simultaneous calls to the ->suspend() or ->resume()
    and ->probe() or ->release(), potentially saving a whole lot of headaches.
    
    It also moves us a step closer to removing the bus rwsem, since it protects the fields
    in struct device that are modified by the core.
    
    Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eb51b65005737b777e0709683b061d5f82aefd97
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 15:06:38 2005 -0700

    [PATCH] fix up ipmi code after class_simple.c removal
    
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 733a366c34aea88def75dee478f92233410ab3c4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 15:06:38 2005 -0700

    [PATCH] fix "make mandocs" after class_simple.c removal
    
    Due to the removal of class_simple.c, "make mandocs" no longer works.
    
    This patch fixes this issue.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cd987d38cc59053e0bab8150ffaca33b109067f3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 11:12:38 2005 -0800

    [PATCH] class: remove class_simple code, as no one in the tree is using it anymore.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2fc68447df5c76cf254037047b4b02551bd5d760
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 10:02:56 2005 -0800

    [PATCH] class: add kerneldoc for the new class functions.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1db560afe629b682c45a7f4ba7edf98b4ee28518
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 10:02:26 2005 -0800

    [PATCH] class: convert the remaining class_simple users in the kernel to usee the new class api
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5cebfb759cc75208c04590ad7f4485cdd822cf46
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Mon May 2 23:35:45 2005 -0400

    [PATCH] USB: trivial error path fix
    
    Trivial fix to USB class-creation error path; please apply.
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56b2293595b2eb52cc2aa2baf92c6cfa8265f9d5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 10:01:41 2005 -0800

    [PATCH] class: convert drivers/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8874b414ffe037c39e73bb262ddf69653a13c0a4
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:56:34 2005 -0800

    [PATCH] class: convert arch/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d253878b3d9ae523c76118f5336a662780ad3757
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:55:22 2005 -0800

    [PATCH] class: convert drivers/scsi/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e25ab9155aef04e83da69545742cf65c9b801ce
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:53:36 2005 -0800

    [PATCH] class: convert drivers/ieee1394/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca8eca6884861c1ce294b05aacfdf9045bba9aff
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:53:09 2005 -0800

    [PATCH] class: convert drivers/char/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit deb3697037a7d362d13468a73643e09cbc1615a8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:52:10 2005 -0800

    [PATCH] class: convert drivers/block/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 619e666b7e9d2b0545ab60a9c824ae5f77c20c3b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 09:51:41 2005 -0800

    [PATCH] class: convert sound/* to use the new class api instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8561b10f6e7ef0a085709ffc844f74130a067abe
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 15 15:10:13 2005 -0800

    [PATCH] USB: move the usb hcd code to use the new class code.
    
    This moves a kref into the main hcd structure, which detaches it from
    the class device structure.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1235686f6e67cf30c460eb77d90a6cb4be57b92f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 15 14:26:30 2005 -0800

    [PATCH] INPUT: move to use the new class code, instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7fe845d11ad1b4aac098d40c55275569e143c483
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 15 14:23:15 2005 -0800

    [PATCH] tty: move to use the new class code, instead of class_simple
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e9ba6365fd4f0d9e7d022c883bd044fbaa48257f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 15 11:54:21 2005 -0800

    [PATCH] CLASS: move a "simple" class logic into the class core.
    
    One step on improving the class api so that it can not be used incorrectly.
    This also fixes the module owner issue with the dev files that happened when
    the devt logic moved to the class core.
    
    Based on a patch originally written by Kay Sievers <kay.sievers@vrfy.org>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 70f2817a43c89b784dc2ec3d06ba5bf3064f8235
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 01:27:34 2005 -0500

    [PATCH] sysfs: (rest) if show/store is missing return -EIO
    
    sysfs: fix the rest of the kernel so if an attribute doesn't
           implement show or store method read/write will return
           -EIO instead of 0 or -EINVAL or -EPERM.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6c1852a08e444a2e66367352a99c0e93c8bf3e97
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 01:26:06 2005 -0500

    [PATCH] sysfs: (driver/block) if show/store is missing return -EIO
    
    sysfs: fix drivers/block so if an attribute doesn't implement
           show or store method read/write will return -EIO
           instead of 0 or -EINVAL.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fc7e4828995d8c9e4c9597f8a19179e4ab53f73e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 01:26:27 2005 -0500

    [PATCH] sysfs: (driver/pci) if show/store is missing return -EIO
    
    sysfs: fix drivers/pci so if an attribute does not implement
           show or store method read/write will return -EIO
           instead of 0.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a0c20bf8c0fe2116f8fd7d3da6122bf8a01f026
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 01:23:47 2005 -0500

    [PATCH] sysfs: (driver/base) if show/store is missing return -EIO
    
    sysfs: fix drivers/base so if an attribute doesn't implement
           show or store method read/write will return -EIO
           instead of 0.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c76d0abd07a9c9cf72bbb5b641e1e97f92ea8f3e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 01:22:00 2005 -0500

    [PATCH] sysfs: if show/store is missing return -EIO
    
    sysfs: if attribute does not implement show or store method
           read/write should return -EIO instead of 0 or -EINVAL.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d48593bf208e0d046c35fb0707ae5b23fef8c4ff
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Apr 29 00:58:46 2005 -0500

    [PATCH] Make attributes names const char *
    
    sysfs: make attributes and attribute_group's names const char *
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8d790d74085833ba2a3e84b5bcd683be4981c29a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Apr 26 02:34:05 2005 -0500

    [PATCH] make driver's name be const char *
    
    Driver core:
      change driver's, bus's, class's and platform device's names
      to be const char * so one can use
                const char *drv_name = "asdfg";
      when initializing structures.
      Also kill couple of whitespaces.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 419cab3fc69588ebe35b845cc3a584ae172463de
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Apr 26 02:32:54 2005 -0500

    [PATCH] kset_hotplug_ops->name shoudl return const char *
    
    kobject: change name() method in kset_hotplug_ops return const char *
    	 since users shoudl not try to modify returned data.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f3b4f3c6dec04c6c8261fe22645f07b39976595a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Apr 26 02:32:00 2005 -0500

    [PATCH] Make kobject's name be const char *
    
    kobject: make kobject's name const char * since users should not
    	 attempt to change it (except by calling kobject_rename).
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e3a15db2415579d5136b9ba9b52fe27c66da8780
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Apr 26 02:31:08 2005 -0500

    [PATCH] sysfs_{create|remove}_link should take const char *
    
    sysfs: make sysfs_{create|remove}_link to take const char * name.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eb11d8ffceead1eb3d84366f1687daf2217e883e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Apr 26 02:29:58 2005 -0500

    [PATCH] kobject_hotplug() should use kobject_name()
    
    kobject: kobject_hotplug should use kobject_name() instead of
             accessing kobj->name directly since for objects with
             long names it can contain garbage.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 246955fe4c38bd706ae30e37c64892c94213775d
Author: Robert Olsson <Robert.Olsson@data.slu.se>
Date:   Mon Jun 20 13:36:39 2005 -0700

    [NETLINK]: fib_lookup() via netlink
    
    Below is a more generic patch to do fib_lookup via netlink. For others
    we should say that we discussed this as a way to verify route selection.
    It's also possible there are others uses for this.
    
    In short the fist half of struct fib_result_nl is filled in by caller
    and netlink call fills in the other half and returns it.
    
    In case anyone is interested there is a corresponding user app to compare
    the full routing table this was used to test implementation of the LC-trie.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6e276ee67c0ac9efafd24bc6f7a84aa359656df
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 20 13:32:05 2005 -0700

    [ATALK]: endian annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f852640e74f71e6dd38146e1149ec1fe6da2fb07
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 20 13:31:11 2005 -0700

    [AX25]: endian-annotate ax25_type_trans()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd87147eed934eaff92869f3d158697c7239d1d2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jun 20 13:21:43 2005 -0700

    [IPSEC]: Add XFRM_STATE_NOPMTUDISC flag
    
    This patch adds the flag XFRM_STATE_NOPMTUDISC for xfrm states.  It is
    similar to the nopmtudisc on IPIP/GRE tunnels.  It only has an effect
    on IPv4 tunnel mode states.  For these states, it will ensure that the
    DF flag is always cleared.
    
    This is primarily useful to work around ICMP blackholes.
    
    In future this flag could also allow a larger MTU to be set within the
    tunnel just like IPIP/GRE tunnels.  This could be useful for short haul
    tunnels where temporary fragmentation outside the tunnel is desired over
    smaller fragments inside the tunnel.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d094cd83c06e06e01d8edb540555f3f64e4081c2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jun 20 13:19:41 2005 -0700

    [IPSEC]: Add xfrm_state_afinfo->init_flags
    
    This patch adds the xfrm_state_afinfo->init_flags hook which allows
    each address family to perform any common initialisation that does
    not require a corresponding destructor call.
    
    It will be used subsequently to set the XFRM_STATE_NOPMTUDISC flag
    in IPv4.
    
    It also fixes up the error codes returned by xfrm_init_state.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 72cb6962a91f2af9eef69a06198e1949c10259ae
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jun 20 13:18:08 2005 -0700

    [IPSEC]: Add xfrm_init_state
    
    This patch adds xfrm_init_state which is simply a wrapper that calls
    xfrm_get_type and subsequently x->type->init_state.  It also gets rid
    of the unused args argument.
    
    Abstracting it out allows us to add common initialisation code, e.g.,
    to set family-specific flags.
    
    The add_time setting in xfrm_user.c was deleted because it's already
    set by xfrm_state_alloc.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3f7a87d2fa9b42f7aade43914f060df68cc89cc7
Author: Frank Filz <ffilzlnx@us.ibm.com>
Date:   Mon Jun 20 13:14:57 2005 -0700

    [SCTP] sctp_connectx() API support
    
    Implements sctp_connectx() as defined in the SCTP sockets API draft by
    tunneling the request through a setsockopt().
    
    Signed-off-by: Frank Filz <ffilzlnx@us.ibm.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91b90475e793e84a57d956af8c52645e292badcb
Merge: bcc408b... f0ffedd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 20 11:37:49 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit f0ffeddc897a5cc5d5c6cc1b99a8799a8b34b28f
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jun 20 18:51:08 2005 +0100

    [PATCH] ARM: 2719/1: enable module support in ixp2000 defconfigs by default
    
    Patch from Lennert Buytenhek
    
    The ixp2000 defconfigs are among the few that do not enable module
    support by default.  I keep enabling module support by hand for every
    new kernel version, so let's just make this change upstream.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d67947a1bd6530791ad3663b93d91b44de89c2ca
Author: Richard Purdie <rpurdie@net.rmk.(none)>
Date:   Mon Jun 20 18:51:07 2005 +0100

    [PATCH] ARM: 2716/1: SharpSL Param: Fix typo
    
    Patch from Richard Purdie
    
    Fix typo in sharpsl_param.c so it works correctly on collie.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e4fe19819ef32950541503042f32e71b67edffc7
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jun 20 18:51:07 2005 +0100

    [PATCH] ARM: 2701/1: free up ixp2000 timer 4 for the watchdog
    
    Patch from Lennert Buytenhek
    
    The IXP2000 has four timers, but if we're on an A-step IXP2800, timer
    2 and 3 don't work.  We need two timers for timekeeping (one for the
    timer interrupt and one for tracking missed jiffies), so on early
    IXP2800s we have no other choice but to use timer 1 and 4 for that,
    but on all other IXP2000s we'd rather leave timer 4 free since that's
    the only timer we can use for the watchdog.
    So, on buggy IXP2000s (i.e. the A-step IXP2800) we use timer 4 for
    tracking missed jiffies, and on all all non-buggy IXP2000s (i.e.
    everything but the A-step IXP2800) we use timer 2.
    On a pre-production IXP2800, this patch should print these messages
    on boot:
    	Enabling IXP2800 erratum #25 workaround
    	Unable to use IXP2000 watchdog due to IXP2800 erratum #25
    On any non-buggy IXP2800 (as well as on IXP2400s) you shouldn't see
    anything at all, and the watchdog should be usable again.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c0da085ad2e6b1419b8a7439538f7f15eb5c4777
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Mon Jun 20 18:51:06 2005 +0100

    [PATCH] ARM: 2693/1: Add PCI support for Versatile/PB
    
    Patch from Catalin Marinas
    
    This patch adds PCI support for the Versatile PB926 platform.
    
    Signed-off-by: Colin King
    Signed-off-by: Catalin Marinas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 038c5b602524b33447008492e932cdd0a1e806c9
Author: Bellido Nicolas <nb-ml@be.rmk.(none)>
Date:   Mon Jun 20 18:51:05 2005 +0100

    [PATCH] ARM: 2686/2: AAEC-2000 Core support
    
    Patch from Bellido Nicolas
    
    Core support for AAEC-2000 based platforms.
    This is an updated version of the previous patch, and takes
    into account Russell's comments.
    AAED-2000 default configuration will follow as soon
    as some problems with the bootloader are sorted out...
    
    Signed-off-by: Nicolas Bellido
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 09f0551d20ddf6d22c333adcc59f2b1148734273
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 18:44:37 2005 +0100

    [PATCH] ARM: Add iomap support for ARM
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8ba08378b479f472b37b83542c31bdad465033cf
Merge: 34b727c... 8b22c24...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Jun 20 09:35:34 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 34b727c135ff651f153be5757056d25678b6d018
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Thu Jun 9 22:36:00 2005 -0700

    [IA64] Drop spurious paren in entry.h
    
    The latest assembler catches this typo.  (reported by Jim Wilson).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a507ef3ac68f0671fdd3f824885cd7f1ea1040b1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 16:57:17 2005 +0100

    [PATCH] ARM: Remove nmi_tick() from Integrator.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14eb75b6f83e3213d752dfe821df2fa57efbe519
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 16:56:08 2005 +0100

    [PATCH] ARM: Add missed include for dmabounce.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3ade2fe0fd0238d68938b8f5f73ebd0561d2d2e5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 16:45:32 2005 +0100

    [PATCH] ARM: Lindent GCC helper functions
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bcc408b75b707f46da1f81058ffa3c9df6f0170f
Merge: 6f85fb8... d3588ba...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 20 08:17:59 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit f29481c0e7e55efc25598c1a6c503015cfe45245
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 15:49:59 2005 +0100

    [PATCH] ARM: Remove gcc type-isms from GCC helper functions
    
    Convert ugly GCC types to Linux types:
    
    	UQImode -> u8
    	SImode -> s32
    	USImode -> u32
    	DImode -> s64
    	UDImode -> u64
    	word_type -> int
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d039ba24f135147f60a13bcaa768189a5b773b6e
Merge: 72e3148... 8b22c24...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Jun 20 08:44:00 2005 -0500

    Merge with /home/shaggy/git/linus-clean/

commit 34c8eacab670e578a2aaafdf1061efd214b2f639
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 12:56:40 2005 +0100

    [PATCH] ARM: Remove obsolete arch/arm/kernel/arch.c
    
    This is not used anymore - RiscPC now contains the necessary
    supporting code.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d3588ba9bbade7f1fde59726c9af43eeeb08e092
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jun 20 21:43:48 2005 +1000

    [PATCH] initialize TCE tables
    
    A fairly recent platform requirement states that the OS must clear the
    whole TCE table at setup time, in case firmware left any active
    mappings in it.  Without this initialization, dynamic bus removes can
    fail.  Firmware rejects these requests if active mappings still exist
    for a slot that has been deallocated by the OS.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0231c290d817513d448963520a97eadd51a370b7
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Jun 20 21:43:15 2005 +1000

    [PATCH] ppc64: use cpu_has_feature macro
    
    Use the new cpu_has_feature macros instead of open coding it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ad21798e0ecc3b54720a2420b341f51dfb254706
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Jun 20 21:43:07 2005 +1000

    [PATCH] ppc64: quieten RTAS printks
    
    Some rtasd printks were too loud. They would appear on a quiet boot
    even though they were only informational.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5abc100e882a979f8f5be8184938305b3fb2df2b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 12:31:14 2005 +0100

    [PATCH] ARM: Ensure DMA-bounced buffers are properly written to RAM
    
    When DMA bounce buffers were unmapped and the data was memcpy'd to
    the original buffer, we were not ensuring that the data was written
    to RAM.  This means that there was the potential for page cache
    pages to have different cache states depending whether they've been
    bounced or not.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b8a9b66fbee09d0cc71c272b5c1d1f3320afbbf0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 11:31:09 2005 +0100

    [PATCH] ARM: Add common CACHE_COLOUR macro
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8830f04a092b47f3d246271b24685cd9eab82027
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 20 09:51:03 2005 +0100

    [PATCH] ARM: Fix delayed dcache flush for ARMv6 non-aliasing caches
    
    flush_dcache_page() did nothing for these caches, but since they
    suffer from I/D cache coherency issues, we need to ensure that data
    is written back to RAM.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6f85fb8154057352df2080a7ff1c55bc5c583985
Merge: d411b84... e632ba1...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 19 20:58:13 2005 -0700

    Merge 'scsi-fixes' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/misc-2.6

commit e632ba11b8ea34cc877689dba1e02f8657ddbc0b
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 19 21:50:12 2005 -0400

    aic7xxx/aic79xx_osm: revert completely bogus ahd_linux_queue() patch

commit 98f72a1c51cbf65f3eee54b5324863b3a70a4e61
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 19 21:47:56 2005 -0400

    fc4/fc: fix warnings and errors related to recent SCSI EH updates

commit d411b845dcc8e1d97e8b02a345e765af5134700f
Merge: 8b22c24... 0908db2...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 19 21:50:20 2005 +0100

    Merge with ../linux-2.6-smp

commit 8b22c249e7de453961e4d253b19fc2a0bdd65d53
Merge: 7df5512... ea4423c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Jun 19 11:53:06 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 0908db22b189b28664cba3965ebb7e0df59c749a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 19 19:48:16 2005 +0100

    [PATCH] ARM SMP: Messages about CPUs should be prefixed by CPU%u
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ea4423c3b6c1dbd116c91be876b3ad07067c77c8
Merge: 36c5ed2... fe6ef2d...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 19 19:26:54 2005 +0100

    Merge with ../linux-2.6-smp

commit 36c5ed23b9f535d1c79986efb45f9c1f115e0997
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 19 18:39:33 2005 +0100

    [PATCH] ARM SMP: Fix PXA/SA11x0 suspend resume crash
    
    We need to re-initialise the stack pointers for undefined, IRQ
    and abort mode handlers whenever we resume.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fe6ef2daa29df8fef1a95446faccd18ab163993e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 19 09:52:07 2005 +0100

    [PATCH] ARM SMP: Add missed files from Integrator/CP platform
    
    Add missed new files from basic SMP support for the Integrator/CP platform.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7df551254add79a445d2e47e8f849cef8fee6e38
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Jun 18 23:01:10 2005 -0700

    [TCP]: Fix sysctl_tcp_low_latency
    
    When enabled, this should disable UCOPY prequeue'ing altogether,
    but it does not due to a missing test.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7d7fc0322c1770fe7ee836ca2732c2f88e2e1a4
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 18 23:00:34 2005 -0700

    [IPV4]: [4/4] signed vs unsigned cleanup in net/ipv4/raw.c
    
    This patch changes the type of the third parameter 'length' of the
    raw_send_hdrinc() function from 'int' to 'size_t'.
    This makes sense since this function is only ever called from one
    location, and the value passed as the third parameter in that location is
    itself of type size_t, so this makes the recieving functions parameter
    type match. Also, inside raw_send_hdrinc() the 'length' variable is
    used in comparisons with unsigned values and passed as parameter to
    functions expecting unsigned values (it's used in a single comparison with
    a signed value, but that one can never actually be negative so the patch
    also casts that one to size_t to stop gcc worrying, and it is passed in a
    single instance to memcpy_fromiovecend() which expects a signed int, but
    as far as I can see that's not a problem since the value of 'length'
    shouldn't ever exceed the value of a signed int).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93765d8a435fa021c4b7cd0521b7959239d7158a
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 18 23:00:15 2005 -0700

    [IPV4]: [3/4] signed vs unsigned cleanup in net/ipv4/raw.c
    
    This patch changes the type of the local variable 'i' in
    raw_probe_proto_opt() from 'int' to 'unsigned int'. The only use of 'i' in
    this function is as a counter in a for() loop and subsequent index into
    the msg->msg_iov[] array.
    Since 'i' is compared in a loop to the unsigned variable msg->msg_iovlen
    gcc -W generates this warning :
    
    net/ipv4/raw.c:340: warning: comparison between signed and unsigned
    
    Changing 'i' to unsigned silences this warning and is safe since the array
    index can never be negative anyway, so unsigned int is the logical type to
    use for 'i' and also enables a larger msg_iov[] array (but I don't know if
    that will ever matter).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 926d4b8122fb324de294a09a7d96d8af7cfc6861
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 18 23:00:00 2005 -0700

    [IPV4]: [2/4] signed vs unsigned cleanup in net/ipv4/raw.c
    
    This patch gets rid of the following gcc -W warning in net/ipv4/raw.c :
    
    net/ipv4/raw.c:387: warning: comparison of unsigned expression < 0 is always false
    
    Since 'len' is of type size_t it is unsigned and can thus never be <0, and
    since this is obvious from the function declaration just a few lines above
    I think it's ok to remove the pointless check for len<0.
    
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5418c6926fcb0e5a324cd5bc1106fc0941db7aae
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sat Jun 18 22:59:45 2005 -0700

    [IPV4]: [1/4] signed vs unsigned cleanup in net/ipv4/raw.c
    
    This patch silences these two gcc -W warnings in net/ipv4/raw.c :
    
    net/ipv4/raw.c:517: warning: signed and unsigned type in conditional expression
    net/ipv4/raw.c:613: warning: signed and unsigned type in conditional expression
    
    It doesn't change the behaviour of the code, simply writes the conditional
    expression with plain 'if()' syntax instead of '? :' , but since this
    breaks it into sepperate statements gcc no longer complains about having
    both a signed and unsigned value in the same conditional expression.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 94df109a8c802263837baccc1a3eeab9ab9e88db
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:59:08 2005 -0700

    [PKT_SCHED]: noop/noqueue qdisc style cleanups
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f87a9c3ddf08c10d8427bcedf3f53098113136d0
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:58:53 2005 -0700

    [PKT_SCHED]: Cleanup pfifo_fast qdisc and remove unnecessary code
    
    Removes the skb trimming code which is not needed since we never
    touch the skb upon failure. Removes unnecessary initializers,
    and simplifies the code a bit.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 321090e7a468ab33917a0af839a3ae923b1c1bc5
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:58:35 2005 -0700

    [PKT_SCHED]: Add and use prio2list() in the pfifo_fast qdisc
    
    prio2list() returns the relevant sk_buff_head for the
    band specified by the priority for a given skb.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 821d24ae741f83ef0754a98b4b8aef7231856543
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:58:15 2005 -0700

    [PKT_SCHED]: Transform pfifo_fast to use generic queue management interface
    
    Gives pfifo_fast a byte based backlog.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6fc8e84f4cf8d623f98aebfd6996dc3848bcf964
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:58:00 2005 -0700

    [PKT_SCHED]: Cleanup fifo qdisc and remove unnecessary code
    
    Removes the skb trimming code which is not needed since we never
    touch the skb upon failure. Removes unnecessary includes,
    initializers, and simplifies the code a bit.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aaae3013d186d71a01e1059c9633c4ec8729d891
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:57:42 2005 -0700

    [PKT_SCHED]: Transform fifo qdisc to use generic queue management interface
    
    The simplicity of the fifo qdisc allows several qdisc operations to be
    redirected to the relevant queue management function directly. Saves
    a lot of code lines and gives the pfifo a byte based backlog.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9972b25d0c6e7f8f893eb3444dea37b42b1201de
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:57:26 2005 -0700

    [PKT_SCHED]: Generic queue management interface for qdiscs using internal skb queues
    
    Implements an interface to be used by leaf qdiscs maintaining an internal
    skb queue. The interface maintains a backlog in bytes additionaly
    to the skb_queue_len() maintained by the queue itself. Relevant statistics
    get incremented automatically. Every function comes in two variants, one
    assuming Qdisc->q is used as queue and the second taking a sk_buff_head
    as argument. Be aware that, if you use multiple queues, you still have to
    maintain the Qdisc->q.qlen counter yourself.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e061ab2e5aa50a84d68ca654773632f9c425bb6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:56:42 2005 -0700

    [SCTP]: Replace spin_lock_irqsave with spin_lock_bh
    
    This patch replaces the spin_lock_irqsave call on the receive queue
    lock in SCTP with spin_lock_bh.  Despite the proliferation of
    spin_lock_irqsave calls in this stack, it is only entered from the
    IPv4/IPv6 stack and user space.  That is, it is never entered from
    hardirq context.
    
    The call in question is only called from recvmsg which means that
    IRQs aren't disabled.  Therefore it is safe to replace it with
    spin_lock_bh.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e0f9f8586a0b21fb3c7a4ead3804008d57dfdef7
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:56:18 2005 -0700

    [IPV4/IPV6]: Replace spin_lock_irq with spin_lock_bh
    
    In light of my recent patch to net/ipv4/udp.c that replaced the
    spin_lock_irq calls on the receive queue lock with spin_lock_bh,
    here is a similar patch for all other occurences of spin_lock_irq
    on receive/error queue locks in IPv4 and IPv6.
    
    In these stacks, we know that they can only be entered from user
    or softirq context.  Therefore it's safe to disable BH only.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ed19f339e12e731986de84134ac293cd15910a7
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sat Jun 18 22:55:51 2005 -0700

    [NETLINK]: Set correct pid for ioctl originating netlink events
    
    This patch ensures that netlink events created as a result of programns
    using ioctls (such as ifconfig, route etc) contains the correct PID of
    those events.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e431b8c004af6be03783dddea31b6e514118051d
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sat Jun 18 22:55:31 2005 -0700

    [NETLINK]: Explicit typing
    
    This patch converts "unsigned flags" to use more explict types like u16
    instead and incrementally introduces NLMSG_NEW().
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 58b82150da90681a4179db1bc94d412938e81b31
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:55:02 2005 -0700

    [DECNET]: Remove unnecessary initilization of unused variable entries
    
    This patch was supposed to be part of the neighbour tables related
    patchset but apparently got lost.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0603eac0d6b77acac5924a2734228cbaf072f993
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:54:36 2005 -0700

    [IPSEC]: Add XFRMA_SA/XFRMA_POLICY for delete notification
    
    This patch changes the format of the XFRM_MSG_DELSA and
    XFRM_MSG_DELPOLICY notification so that the main message
    sent is of the same format as that received by the kernel
    if the original message was via netlink.  This also means
    that we won't lose the byid information carried in km_event.
    
    Since this user interface is introduced by Jamal's patch
    we can still afford to change it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6544c0b4cf2bd96195f3cdb7cebfb35090fc557
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sat Jun 18 22:54:12 2005 -0700

    [NETLINK]: Correctly set NLM_F_MULTI without checking the pid
    
    This patch rectifies some rtnetlink message builders that derive the
    flags from the pid. It is now explicit like the other cases
    which get it right. Also fixes half a dozen dumpers which did not
    set NLM_F_MULTI at all.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1797754ea7ee5e0d859b0a32506ff999f8d5fb71
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:53:48 2005 -0700

    [NETLINK]: Introduce NLMSG_NEW macro to better handle netlink flags
    
    Introduces a new macro NLMSG_NEW which extends NLMSG_PUT but takes
    a flags argument. NLMSG_PUT stays there for compatibility but now
    calls NLMSG_NEW with flags == 0. NLMSG_PUT_ANSWER is renamed to
    NLMSG_NEW_ANSWER which now also takes a flags argument.
    
    Also converts the users of NLMSG_PUT_ANSWER to use NLMSG_NEW_ANSWER
    and fixes the two direct users of __nlmsg_put to either provide
    the flags or use NLMSG_NEW(_ANSWER).
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af0d114176720c2100dfa624ab433796d333d730
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:53:29 2005 -0700

    [PKT_SCHED]: Logic simplifications and codingstyle/whitespace cleanups
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 02f23f095f1d9534873ecb5d94bbdb0ab67f1d8e
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:53:12 2005 -0700

    [PKT_SCHED]: Make dsmark use the new dumping macros
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 758cc43c6d7326c62751fb516485e8e188854637
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:52:54 2005 -0700

    [PKT_SCHED]: Fix dsmark to apply changes consistent
    
    Fixes dsmark to do all configuration sanity checks first and
    only apply the changes if all of them can be applied without
    any errors. Also fixes the weak sanity checks for DSMARK_VALUE
    and DSMASK_MASK.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f48bcd4ef11a69add178fc3111a77e7ee95bacd
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:52:36 2005 -0700

    [RTNETLINK]: Add RTA_(PUT|GET) shortcuts for u8, u16, and flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e386c6eb431ca2e435d0202ad6997f3d2ccab2ce
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:52:09 2005 -0700

    [NEIGH]: Fix use of uninitialized variable when trimming in neightbl_fill_parms
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b6ea82dd18c97598c3caaa8d0b1feec87857e70
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:51:43 2005 -0700

    [NETLINK]: Kill bogus NLMSG_SET_MULTIPART uses.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c52a3f89f882b84fc422000655c023fe73e701cf
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:51:26 2005 -0700

    [NETLINK]: Fix RTA_NEST_CANCEL().
    
    Only skb_trim() if 'start' is non-NULL.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88121aea7bdb5fdc527388e262381829c4e1db16
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:51:12 2005 -0700

    [NEIGHBOUR]: Remove unused fields in struct neigh_parms and neigh_table
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7fb64db001f83ece669c76a02d8ec2fdb1dd307
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:50:55 2005 -0700

    [NETLINK]: Neighbour table configuration and statistics via rtnetlink
    
    To retrieve the neighbour tables send RTM_GETNEIGHTBL with the
    NLM_F_DUMP flag set. Every neighbour table configuration is
    spread over multiple messages to avoid running into message
    size limits on systems with many interfaces. The first message
    in the sequence transports all not device specific data such as
    statistics, configuration, and the default parameter set.
    This message is followed by 0..n messages carrying device
    specific parameter sets.
    
    Although the ordering should be sufficient, NDTA_NAME can be
    used to identify sequences. The initial message can be identified
    by checking for NDTA_CONFIG. The device specific messages do
    not contain this TLV but have NDTPA_IFINDEX set to the
    corresponding interface index.
    
    To change neighbour table attributes, send RTM_SETNEIGHTBL
    with NDTA_NAME set. Changeable attribute include NDTA_THRESH[1-3],
    NDTA_GC_INTERVAL, and all TLVs in NDTA_PARMS unless marked
    otherwise. Device specific parameter sets can be changed by
    setting NDTPA_IFINDEX to the interface index of the corresponding
    device.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00768244923f66801958a8d2d103f7b65608c9b6
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:50:38 2005 -0700

    [NETLINK] Routing attribute related shortcuts
    
     RTA_GET_U(32|64)(tlv)
       Assumes TLV is a u32/u64 field and returns its value.
    
     RTA_GET_[M]SECS(tlv)
       Assumes TLV is a u64 and transports jiffies converted
       to seconds or milliseconds and returns its value.
    
     RTA_PUT_U(32|64)(skb, type, value)
       Appends %value as fixed u32/u64 to %skb as TLV %type.
    
     RTA_PUT_[M]SECS(skb, type, jiffies)
       Converts %jiffies to secs/msecs and appends it as u64
       to %skb as TLV %type.
    
     RTA_PUT_STRING(skb, type, string)
       Appends %NUL terminated %string to %skb as TLV %type.
    
     RTA_NEST(skb, type)
       Starts a nested TLV %type and returns the nesting handle.
    
     RTA_NEST_END(skb, nesting_handle)
       Finishes the nested TLV %nesting_handle, must be called
       symmetric to RTA_NEST(). Returns skb->len
    
     RTA_NEST_CANCEL(skb, nesting_handle)
       Cancel the nested TLV %nesting_handle and trim nested TLV
       from skb again, returns -1.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f88a10d65620d97b6d0a7e352a3493c1b7e7409b
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:50:12 2005 -0700

    [NETLINK]: New message building macros
    
     NLMSG_PUT_ANSWER(skb, nlcb, type, length)
       Start a new netlink message as answer to a request,
       returns the message header.
    
     NLMSG_END(skb, nlh)
       End a netlink message, fixes total message length,
       returns skb->len.
    
     NLMSG_CANCEL(skb, nlh)
       Cancel the building process and trim whole message
       from skb again, returns -1.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e52c1f17e4ea8e61bd26eb25f1a184202693c2b9
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Jun 18 22:49:40 2005 -0700

    [NET]: Move sysctl_max_syn_backlog into request_sock.c
    
    This fixes the CONFIG_INET=n build failure noticed
    by Andrew Morton.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ad69c55a282315e6119cf7fd744f26a925bdfd2
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sat Jun 18 22:48:55 2005 -0700

    [NET] rename struct tcp_listen_opt to struct listen_sock
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0e87506fcc734647c7b2497eee4eb81e785c857a
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sat Jun 18 22:47:59 2005 -0700

    [NET] Generalise tcp_listen_opt
    
    This chunks out the accept_queue and tcp_listen_opt code and moves
    them to net/core/request_sock.c and include/net/request_sock.h, to
    make it useful for other transport protocols, DCCP being the first one
    to use it.
    
    Next patches will rename tcp_listen_opt to accept_sock and remove the
    inline tcp functions that just call a reqsk_queue_ function.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 60236fdd08b2169045a3bbfc5ffe1576e6c3c17b
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sat Jun 18 22:47:21 2005 -0700

    [NET] Rename open_request to request_sock
    
    Ok, this one just renames some stuff to have a better namespace and to
    dissassociate it from TCP:
    
    struct open_request  -> struct request_sock
    tcp_openreq_alloc    -> reqsk_alloc
    tcp_openreq_free     -> reqsk_free
    tcp_openreq_fastfree -> __reqsk_free
    
    With this most of the infrastructure closely resembles a struct
    sock methods subset.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2e6599cb899ba4b133f42cbf9d2b1883d2dc583a
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sat Jun 18 22:46:52 2005 -0700

    [NET] Generalise TCP's struct open_request minisock infrastructure
    
    Kept this first changeset minimal, without changing existing names to
    ease peer review.
    
    Basicaly tcp_openreq_alloc now receives the or_calltable, that in turn
    has two new members:
    
    ->slab, that replaces tcp_openreq_cachep
    ->obj_size, to inform the size of the openreq descendant for
      a specific protocol
    
    The protocol specific fields in struct open_request were moved to a
    class hierarchy, with the things that are common to all connection
    oriented PF_INET protocols in struct inet_request_sock, the TCP ones
    in tcp_request_sock, that is an inet_request_sock, that is an
    open_request.
    
    I.e. this uses the same approach used for the struct sock class
    hierarchy, with sk_prot indicating if the protocol wants to use the
    open_request infrastructure by filling in sk_prot->rsk_prot with an
    or_calltable.
    
    Results? Performance is improved and TCP v4 now uses only 64 bytes per
    open request minisock, down from 96 without this patch :-)
    
    Next changeset will rename some of the structs, fields and functions
    mentioned above, struct or_calltable is way unclear, better name it
    struct request_sock_ops, s/struct open_request/struct request_sock/g,
    etc.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1944972d3bb651474a5021c9da8d0166ae19f1eb
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sat Jun 18 22:46:19 2005 -0700

    [SLAB] Introduce kmem_cache_name
    
    This is for use with slab users that pass a dynamically allocated slab name in
    kmem_cache_create, so that before destroying the slab one can retrieve the name
    and free its memory.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ee57eef99b9e19194677f552ebc0690ec35d62db
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sat Jun 18 22:45:56 2005 -0700

    [IPSEC] Use NLMSG_LENGTH in xfrm_exp_state_notify
    
    Small fixup to use netlink macros instead of hardcoding.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d6dfe1f5bc4c56e0c31173014a099ec3fa35907
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Jun 18 22:45:31 2005 -0700

    [IPSEC] Fix xfrm_state leaks in error path
    
    Herbert Xu wrote:
    > @@ -1254,6 +1326,7 @@ static int pfkey_add(struct sock *sk, st
    >       if (IS_ERR(x))
    >               return PTR_ERR(x);
    >
    > +     xfrm_state_hold(x);
    
    This introduces a leak when xfrm_state_add()/xfrm_state_update()
    fail. We hold two references (one from xfrm_state_alloc(), one
    from xfrm_state_hold()), but only drop one. We need to take the
    reference because the reference from xfrm_state_alloc() can
    be dropped by __xfrm_state_delete(), so the fix is to drop both
    references on error. Same problem in xfrm_user.c.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f60f6b8f70c756fc786d68f02ec17a1e84db645f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:44:37 2005 -0700

    [IPSEC] Use XFRM_MSG_* instead of XFRM_SAP_*
    
    This patch removes XFRM_SAP_* and converts them over to XFRM_MSG_*.
    The netlink interface is meant to map directly onto the underlying
    xfrm subsystem.  Therefore rather than using a new independent
    representation for the events we can simply use the existing ones
    from xfrm_user.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e7443892f656d760ec1b9d92567178c87e100f4a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:44:18 2005 -0700

    [IPSEC] Set byid for km_event in xfrm_get_policy
    
    This patch fixes policy deletion in xfrm_user so that it sets
    km_event.data.byid.  This puts xfrm_user on par with what af_key
    does in this case.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit bf08867f91a43aa3ba2e4598c06c4769a6cdddf6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:44:00 2005 -0700

    [IPSEC] Turn km_event.data into a union
    
    This patch turns km_event.data into a union.  This makes code that
    uses it clearer.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 4f09f0bbc1cb3c74e8f2047ad4be201a059829ee
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:43:43 2005 -0700

    [IPSEC] Fix xfrm to pfkey SA state conversion
    
    This patch adjusts the SA state conversion in af_key such that
    XFRM_STATE_ERROR/XFRM_STATE_DEAD will be converted to SADB_STATE_DEAD
    instead of SADB_STATE_DYING.
    
    According to RFC 2367, SADB_STATE_DYING SAs can be turned into
    mature ones through updating their lifetime settings.  Since SAs
    which are in the states XFRM_STATE_ERROR/XFRM_STATE_DEAD cannot
    be resurrected, this value is unsuitable.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 4666faab095230ec8aa62da6c33391287f281154
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 18 22:43:22 2005 -0700

    [IPSEC] Kill spurious hard expire messages
    
    This patch ensures that the hard state/policy expire notifications are
    only sent when the state/policy is successfully removed from their
    respective tables.
    
    As it is, it's possible for a state/policy to both expire through
    reaching a hard limit, as well as being deleted by the user.
    
    Note that this behaviour isn't actually forbidden by RFC 2367.
    However, it is a quality of implementation issue.
    
    As an added bonus, the restructuring in this patch will help
    eventually in moving the expire notifications from softirq
    context into process context, thus improving their reliability.
    
    One important side-effect from this change is that SAs reaching
    their hard byte/packet limits are now deleted immediately, just
    like SAs that have reached their hard time limits.
    
    Previously they were announced immediately but only deleted after
    30 seconds.
    
    This is bad because it prevents the system from issuing an ACQUIRE
    command until the existing state was deleted by the user or expires
    after the time is up.
    
    In the scenario where the expire notification was lost this introduces
    a 30 second delay into the system for no good reason.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 26b15dad9f1c19d6d4f7b999b07eaa6d98e4b375
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sat Jun 18 22:42:13 2005 -0700

    [IPSEC] Add complete xfrm event notification
    
    Heres the final patch.
    What this patch provides
    
    - netlink xfrm events
    - ability to have events generated by netlink propagated to pfkey
      and vice versa.
    - fixes the acquire lets-be-happy-with-one-success issue
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 3aa3dfb372576f30835a94409556e3c8681b5756
Merge: 19fa95e... 5ab6091...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 18 16:06:50 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 19fa95e9e999ee2b0d7adfbd1a687b136afcd6f1
Merge: ba483d5... 0107b3c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 18 13:54:12 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dwmw2/audit-2.6

commit ba483d574b43b05fa4c78550b874c7e24424ff2a
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Jun 17 13:20:59 2005 -0700

    [PATCH] DocBook: MAINTAINER entry
    
    Martin can maintain the DocBook system for us.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc63b1e12b378c44e074571d5688c23be823b04c
Author: Jan Beulich <JBeulich@novell.com>
Date:   Fri Jun 17 13:20:58 2005 -0700

    [PATCH] console blanking oops fix
    
    When significant delays happen during boot (e.g.  with a kernel debugger,
    but the problem has also seen in other cases) the timeout for blanking the
    console may trigger, but the work scheduler may not have been initialized,
    yet.  schedule_work() will oops over the null keventd_wq.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43fde784a698aff26de0fc1dbd84aa075b8cfb5f
Merge: c2a0f59... f9d1fe9...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 18 13:08:39 2005 -0700

    Merge 'upstream-2.6.13' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit c2a0f5943d8935766a42b2d0870aa4c645e3423d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 18 13:06:22 2005 -0700

    Clean up subthread exec
    
    Make sure we re-parent itimers, and use BUG_ON() instead of an explicit
    conditional BUG().

commit c83d9945c05570ba6b8ec5460c99d1ab7c6e6671
Author: Mika Kukkonen <mikukkon@miku.homelinux.net>
Date:   Sat Jun 18 22:49:56 2005 +0300

    [PATCH] Fix typo in drivers/pci/pci-driver.c
    
    The git commit 794f5bfa77955c4455f6d72d8b0e2bee25f1ff0c
    accidentally suffers from a previous typo in that file
    (',' instead of ';' in end of line). Patch included.
    
    Signed-off-by: Mika Kukkonen <mikukkon@iki.fi>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e396ee43e445cb7c215a98da4e76d0ce354d9d7
Merge: b8112df... 2089a0d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 18 11:42:35 2005 -0700

    Manual merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6.git
    
    This is a fixed-up version of the broken "upstream-2.6.13" branch, where
    I re-did the manual merge of drivers/net/r8169.c by hand, and made sure
    the history is all good.

commit f9d1fe9630b94007902987c39d19f04dc6256eac
Merge: 54258a8... 9ee1c93...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 18 13:21:24 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 20cf33ea16253b9eed387cba022cb014563db40e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 18 10:15:46 2005 +0100

    [PATCH] ARM SMP: Add basic support Integrator/CP platform
    
    Add basic SMP support for the Integrator/CP platform.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e65f38ed0bb7af367ff919c573cf29643fc5f9e8
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 18 09:33:31 2005 +0100

    [PATCH] ARM SMP: Add support for startup of secondary processors
    
    Create a temporary page table to startup secondary processors.  This
    page table must have a 1:1 virtual/physical mapping for the kernel
    in addition to the standard mappings to ensure that the secondary
    CPU can enable its MMU safely.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5ab6091db0b644f59c2f16c5e41028496b709160
Merge: 9ee1c93... ccea7a1...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 18 09:06:59 2005 +0100

    Merge with ../linux-2.6-smp

commit 0107b3cf3225aed6ddde4fa8dbcd4ed643b34f4d
Merge: 1c3f45a... 9ee1c93...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Jun 18 08:36:46 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit b8112df71cae7d6a86158caeb19d215f56c4f9ab
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Wed Jun 15 14:19:03 2005 -0400

    [SCSI] Add DMA mask constants other than 32 and 64 bit
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5d497cecdeae75351567d20b86d8a3a05e7f48ed
Author: Mark Haverkamp <markh@osdl.org>
Date:   Fri Jun 17 13:38:04 2005 -0700

    [SCSI] aacraid: regression fix
    
    The fixes for sparse warnings mixed in with the fixups for
    the raw_srb handler resulted in a bug that showed up in the 32 bit
    environments when trying to issue calls directly to the physical devices
    that are part of the arrays (ioctl scsi passthrough).
    
    Received from Mark Salyzyn at adaptec.
    Applied comment from Christoph to remove cpu_to_le32(0)
    Applied Mark S fix of missing memcpy.
    It applies to the scsi-misc-2.6 git tree.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3afa294c40013be5d8180005002e3f648d04d942
Merge: a1541d5... 3237ee7...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Fri Jun 17 19:04:18 2005 -0500

    merge by hand (qla_os.c mismerge)

commit 3237ee78fc00f786d5f5aec6f9310b0e39069f15
Merge: 9ee1c93... df0ae24...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Fri Jun 17 18:42:23 2005 -0500

    merge by hand (fix up qla_os.c merge error)

commit df0ae2497ddefd72a87f3a3b34ff32455d7d4ae0
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:57:14 2005 -0400

    [SCSI] allow sleeping in ->eh_host_reset_handler()
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 68b3aa7c9805aee9005a8ca53c5e99177961fbb9
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:56:31 2005 -0400

    [SCSI] allow sleeping in ->eh_bus_reset_handler()
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 94d0e7b805961c44e4dc486ffc21075084bb7175
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:55:48 2005 -0400

    [SCSI] allow sleeping in ->eh_device_reset_handler()
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8fa728a26886f56a9ee10a44fea0ddda301d21c3
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:54:40 2005 -0400

    [SCSI] allow sleeping in ->eh_abort_handler()
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3471c288036bf0835a82d0b1bbce2002f6e68390
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:52:51 2005 -0400

    [SCSI] Remove no-op implementations of SCSI EH hooks
    
    Drivers need not implement a hook that returns FAILED, and does nothing
    else, since the SCSI midlayer code will do that for us.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e3df715501be3329986e5d9dfa9a477f49e7996b
Author: Jeff Garzik  <jgarzik@pobox.com>
Date:   Sat May 28 07:47:39 2005 -0400

    [SCSI] Remove unnecessary locking around completion function calls
    
    The SCSI ->done() hook should not be called from inside a spinlock.
    
    Drivers that do this are mostly cut-n-paste from 2.2.x-era.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 986a80d5c154808cc78170584670324a22fd8219
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 16 15:14:00 2005 -0700

    [PATCH] avoid signed vs unsigned comparison in efi_range_is_wc()
    
    warning when building with gcc -W :
    
     include/linux/efi.h: In function `efi_range_is_wc':
     include/linux/efi.h:320: warning: comparison between signed and unsigned
    
    It looks to me like a significantly large 'len' passed in could cause the
    loop to never end. Isn't it safer to make 'i' an unsigned long as well?
    Like this little patch below (which of course also kills the warning) :
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f2cbb4f01936a3e4225692e03b084b78c56d386d
Merge: 325a479... 1016888...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 15 14:06:48 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 12021fff2bae7fab01c4bf283f3cd9bc6997d8c4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Jun 13 20:58:56 2005 -0500

    [SCSI] aic7xxx: fix the BIOS limits setting routines
    
    Following the go around over the SONY DVD that needs artificial limits,
    this should be the correct code for all cases (minus the debugging
    prints).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d736a27b7efbc835c7b83db5c1bbd41edbadf32e
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:23:57 2005 +0200

    [SCSI] zfcp: fix handling of port boxed and lun boxed fsf states
    
    From: Maxim Shchetynin <maxim@de.ibm.com>
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cd8a383ebc93f8ded9cefee53a337542c3aacad7
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:22:25 2005 +0200

    [SCSI] zfcp: fix module parameter parsing
    
    From: Heiko Carstens <heiko.carstens@de.ibm.com>
    
    Fixes module parameter parsing for "device" parameter.  The original
    module parameter was changed while parsing it.  This corrupted the
    output in sysfs (/sys/module/zfcp/parameters/device).
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1db2c9c0931a53fe013db55fd2ff58859db31e8d
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:20:35 2005 +0200

    [SCSI] zfcp: fix bug during adapter shutdown
    
    Fixes a race between zfcp_fsf_req_dismiss_all and
    zfcp_qdio_reqid_check. During adapter shutdown it occurred that a
    request was cleaned up twice. First during its normal
    completion. Second when dismiss_all was called.  The fix is to
    serialize access to fsf request list between zfcp_fsf_req_dismiss_all
    and zfcp_qdio_reqid_check and delete a fsf request from the list if
    its completion is triggered.  (Additionally a rwlock was replaced by a
    spinlock and fsf_req_cleanup was eliminated.)
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 64b29a130901d5b8578e9f602cf2dae56aaff224
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:18:56 2005 +0200

    [SCSI] zfcp: fix: problem in send_els_handler when D_ID assignment changes
    
    From: Maxim Shchetynin <maxim@de.ibm.com>
    
    Fixes a bug in zfcp_send_els_handler.  If D_ID assignments for ports
    are changing between initiation of one ELS request and its completion
    the wrong port might be accessed in the completion for that ELS
    request. Thus a pointer to the port has to be passed for ELS requests
    to identify the port structure if required.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 516a4201bacfd61ea957039d6f47276ee9c32a0d
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:17:44 2005 +0200

    [SCSI] zfcp: fix: mark fsf request failed when receiving unknown status qualifier
    
    From: Maxim Shchetynin <maxim@de.ibm.com>
    
    Correct a bug in zfcp_fsf_send_fcp_command_handler.  An fsf request
    was not marked as failed if an unknown status qualifier was returned.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 65a8d4e1a3754f0bfaa62949ebe919930e3127a1
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:16:27 2005 +0200

    [SCSI] zfcp: fix: reopen port only if link-test fails
    
    From: Maxim Shchetynin <maxim@de.ibm.com>
    
    Reopen a remote port only if the link-test fails. This avoids that a
    port is unnecessarily reopened.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 22753fa514aad02342e647ad13048caa282d9238
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:15:15 2005 +0200

    [SCSI] zfcp: fix: allow more time for adapter initialization
    
    From: Maxim Shchetynin <maxim@de.ibm.com>
    
    Extend the time for adapter initialization: In case of protocol
    status HOST_CONNECTION_INITIALIZING for the exchange config data
    command do a first retry in 1 second, then double the sleep time for
    each following retry until recovery exceeds 2 minutes. The old
    behaviour of allowing 6 retries with .5 seconds delay between retries
    was insufficient and qdio queues were shut down too erarly.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 66c8684abf80a9999392d639627afea80ac62e06
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Jun 13 13:13:45 2005 +0200

    [SCSI] zfcp: fix wrong handling of failed requests for GID_PN command
    
    Fixes the handling of failed requests for GID_PN nameserver command:
    Set ZFCP_STATUS_PORT_INVALID_WWPN only if indicated by response
    payload for GID_PN nameserver command and not if fsf request fails.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d6cbbad7296538b6a38c0fe36e6ecf67f1e600a7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 00:17:03 2005 +0200

    [SCSI] aic7xxx: clean up eisa support
    
     - the eisa layer only probes when it's actually safe, no need for
       a driver option
     - store the id table directly in linux format instead of convering
       at runtime
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8eb379425765bfc9a44f06f210224b10066fc46f
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 00:13:30 2005 +0200

    [SCSI] aic7xxx: remove some dead wood
    
    especially the now dead scsi_cmnd overlay
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3d65692aed727c7fb4105f03795781ace437a84e
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 00:14:30 2005 +0200

    [SCSI] aic7xxx: remove ahc_find_softc
    
    there's absolutely no reason not to trust the driver private data
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6bc9dace767f1fffdf975b3398b3c4e37cd5ae18
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Fri Jun 10 10:16:33 2005 +0200

    [SCSI] zfcp: remove flags_dump feature
    
    Removes the rarely used "flags_dump" mechanism of zfcp.
    
    Equivalent debug information will be provided with a reworking of
    zfcp's s390dbf-facilities which is in preparation.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit eb0df9962d97f7156a0870aced9018bf5c8f54c1
Author: mike.miller@hp.com <mike.miller@hp.com>
Date:   Fri Jun 10 14:51:04 2005 -0500

    [SCSI] cciss 2.6 DMA mapping
    
    Patch removes our homegrown DMA masks and uses the ones defined in the kernel.
    This patch replaces the broken one I sent in earlier. It has been tested and works. Please discard the first submission.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e431223eca7e0785a5402999b43b16622409017f
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 00:15:31 2005 +0200

    [SCSI] aic7xxx: do not check for duplicate pci ids
    
    pci layer handles this just fine for us
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 765c4d45b8cae32faff358aa760a33cde38ea1a7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 11 00:26:00 2005 +0200

    [SCSI] aic7xxx/aic79xx: remove useless byte order macro cruft
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a1541d5af66d02426655b1498f814c52347dd7d3
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Thu Jun 9 17:21:28 2005 -0700

    [SCSI] qla2xxx: Pull-down scsi-host-addition to follow board initialization.
    
    Return to previous held-logic of calling scsi_add_host() only
    after the board has been completely initialized.  Also return
    pci_*() error-codes during probe failure paths.
    
    This also corrects an issue where only lun 0 is being scanned for
    a given port.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 54258a8a2e81b11e486068f1cfab9fe4746b8420
Author: Narendra Sankar <nsankar@broadcom.com>
Date:   Tue Jun 7 11:55:14 2005 -0700

    [PATCH] sata_svw: bump version number
    
    Bump sata_svw.c version number to indicate support for BCM5785(HT1000)
    Southbridge SATA controller.
    
    Signed-off-by: Narendra Sankar <nsankar@broadcom.com>
    
    diff -uNr linux-2.6.12-rc5/drivers/scsi/sata_svw.c linux-2.6.12-rc5.brcm/drivers/scsi/sata_svw.c

commit 364f6c717deef4a3ac4982e670fa9846b43cd060
Merge: 4ff4258... 1d6757f...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Jun 8 15:45:45 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git

commit e5119885f00874453e837e3407014b73de2f4741
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 6 02:28:29 2005 -0500

    Input: wacom - fix formatting in accordance to CodingStyle
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b2f86369e3e999a70f98e2a812aa5ec1b3c7bd0b
Author: Ping Cheng <pingc@wacom.com>
Date:   Mon Jun 6 02:25:50 2005 -0500

    Input: Wacom driver update
           - add support for Cintiq 21UX
           - fix a Graphire bug
           - merge wacom_intuos3_irq into wacom_intuos_irq
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 53880546979605dae20ee0404a0e998e188fe7ad
Author: Stephane VOLTZ <svoltz@numericable.fr>
Date:   Mon Jun 6 02:22:37 2005 -0500

    Input: add driver for Acecad Flair USB tablets
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 3c241f8337542655ee013a661b7f1770f561d3ef
Merge: dbf4ccd... eae936e...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 6 02:21:03 2005 -0500

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 2089a0d38bc9c2cdd084207ebf7082b18cf4bf58
Merge: 03d661d... 0b2d7fe...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:54:39 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch skge

commit 03d661d3d7dd2c20330d775c13157419049f1617
Merge: 1a95059... fdecea6...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:19:42 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch starfire

commit 1a9505996dd0c12a2e56d2c6af00846e75a3850d
Merge: bdb7a34... ea93756...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:15:04 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch smc91x

commit bdb7a3427be1e31327df0543cc397bf3c994b039
Merge: 140fedb... 5aa83a4...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:12:32 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch remove-drivers

commit 140fedb5f2efd1f23b26afb2d812004556ba9515
Merge: 91bcc01... 7d17c1d...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:11:28 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch iff-running

commit 91bcc018f9fc5547875e9ec5a3dc09cbc70d4f8e
Merge: 105adfc... 1f15d69...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:08:24 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch we18

commit 105adfc63f921a9976c5abc4ff079e9fec197ed7
Merge: 7f6a57a... 9941776...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:07:40 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch viro

commit 7f6a57a907c8655e78a654ab62da86e61ef7f2c9
Merge: 4d8e11d... befc9e1...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:06:57 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch r8169

commit 4d8e11dcc29f4983bec67506d77728a04082e92d
Merge: 21035ff... 84d8a2f...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:05:05 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch orinoco-hch

commit 21035ffeb7fa5abf6f178befc8b34752a629e1bf
Merge: 14d8ce7... 516cd15...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:03:55 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch ppp

commit 14d8ce70d5c2634982ca564039466bce70f4ff18
Merge: 7912183... b3dd65f...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:03:09 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch hdlc

commit 79121839aad7153907b92462759675266f1f2ac4
Merge: b00b2f7... a136527...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:02:29 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch dm9000

commit b00b2f70ddde86b0a4674b8518c78d3ad5dc68b7
Merge: df77cc4... 22f714b...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:01:45 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch 8139too-iomap

commit df77cc44dcc938d53c89f1cc2b79410f69236335
Merge: 8be3de3... a78d892...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 17:01:33 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch 8139cp

commit a0ea7328e3f4971bbc2287c344650b08c2cec375
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Jun 4 01:13:15 2005 -0400

    [libata] ahci: finish ATAPI support (hopefully)

commit 70c85233814949184070ee35f8929dde64402dc9
Merge: 31c94a6... 7356169...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 01:02:00 2005 -0400

    Merge of /spare/repo/libata-dev branch bridge-detect

commit 31c94a6e987af162ac5ede83cddf49870cd1f2ed
Merge: 1700c80... 60bf09a...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 00:59:09 2005 -0400

    Automatic merge of /spare/repo/libata-dev branch svw

commit 1700c80d8778cf0d024bf6cbdd1c9e9014764530
Merge: d3c39d1... ae20ea8...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 00:58:52 2005 -0400

    Merge of /spare/repo/libata-dev branch pdc20619

commit d3c39d14d1369c520916ff7a77b2b063e7a75557
Merge: 8be3de3... 4b0060f...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 00:52:59 2005 -0400

    Automatic merge of /spare/repo/libata-dev branch ahci-msi

commit 4b0060f4bdec7484e8d1ad68f7b28b3f1c2e6bf8
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Jun 4 00:50:22 2005 -0400

    [libata] ahci: minor PCI MSI cleanup
    
    Replace 'have_msi' variable with a bit in the existing 'flags' variable,.
    AHCI_FLAG_MSI.

commit ae20ea8525a80a863f70d332cf47b71bd9f54c1f
Merge: f497ba7... 8be3de3...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 00:40:40 2005 -0400

    Automatic merge of /spare/repo/linux-2.6/.git branch HEAD

commit 73561695b2e77473e353a5ae63bab81ed5098d8e
Merge: 6f2f381... 8be3de3...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri Jun 3 23:54:56 2005 -0400

    Automatic merge of /spare/repo/linux-2.6/.git branch HEAD

commit 72e3148a6e987974e3e949c5668e5ca812d7c818
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Jun 3 14:09:54 2005 -0500

    JFS: Fix compiler warning in jfs_logmgr.c
    
    fs/jfs/jfs_logmgr.c: In function `jfs_flush_journal':
    fs/jfs/jfs_logmgr.c:1632: warning: unused variable `mp'
    
    Some debug code in jfs_flush_journal does nothing when CONFIG_JFS_DEBUG
    is not defined.  Place the whole code segment within an ifdef to avoid
    unnecessary code to be compiled and the warning to be issued.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 0bb14afe10dddbc05c3244bd224b6858de0ee319
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Jun 1 10:24:38 2005 -0700

    [SCSI] 2.6 aacraid: updated sysfs files
    
    This patch adds some files into the /sys/class/scsi_host/hostN
    directories for aacraid adapters:
    
    model
    vendor
    hba_kernel_version
    hba_monitor_version
    hba_bios_version
    serial_number
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9a8bc9b84b783fd92315e56ce4d4ee78a2c6819c
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue May 31 18:35:39 2005 -0500

    [SCSI] update spi transport class so that u320 Domain Validation works
    
    There are several extra things that have to be considered when running
    Domain Validation on a u320 target (notably how you fall back).
    
    Hopefully this should help us when someone adds this transport class to
    aic79xx.
    
    I've tested this on the lsi1030, so I know it works correctly up to
    u320.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 597487b9ba875785f3ee9bd541073e9edd2e700a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Jun 3 09:49:01 2005 -0500

    [SCSI] fix aic7xxx coupled parameter problem
    
    For setting coupled parameters, we need to be comparing against the goal
    settings, not the current ones.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 521314c122ea0cd58e5184443b8cc28f82ee2136
Author: Brian King <brking@us.ibm.com>
Date:   Tue May 24 09:49:59 2005 -0500

    [SCSI] sg: Command completion after remove oops
    
    A problem exists todayin the sg driver that if an SG_IO request is
    outstanding to a device when it is removed from the system. The
    system may oops if that command completes later in time.
    
    1. sg_remove gets called
    2. sg_remove calls sg_finish_req_req on all pending requests
       This removes the Sg_request's from the headrp list in the Sg_fd
    3. The sleeping SG_IO ioctl is woken. It does nothing and returns.
    4. The caller closes the fd, which invokes sg_release
    5. sg_release calls sg_remove_sfp. It finds no outstanding commands
       since the headrp list is empty, so it calls __sg_remove_sfp,
       which frees the sfp.
    6. Now when sg_cmd_done gets called, sg uses upper_private_data in
       the Scsi_Request, which should point to the srp, which has been
       freed, so it points to freed memory.
    7. sg then dereferences the srp pointer to get the sfp, and we oops.
    
    The fix is to NULL out the upper_private_data field in this path,
    which sg_cmd_done already checks for, which will prevent the oops
    from occurring.
    
    cpu 0x1: Vector: 300 (Data Access) at [c00000000fff7aa0]
        pc: d0000000002bbea8: .sg_cmd_done+0x70/0x394 [sg]
        lr: d000000000073304: .scsi_finish_command+0x10c/0x130 [scsi_mod]
        sp: c00000000fff7d20
       msr: 8000000000009032
       dar: 2f70726f63202f78
     dsisr: 40000000
      current = 0xc0000000024589b0
      paca    = 0xc0000000003da800
        pid   = 7, comm = events/1
    [c00000000fff7dc0] d000000000073304 .scsi_finish_command+0x10c/0x130 [scsi_mod]
    [c00000000fff7e50] d00000000007317c .scsi_softirq+0x140/0x168 [scsi_mod]
    [c00000000fff7ef0] c0000000000634dc .__do_softirq+0xa0/0x17c
    [c00000000fff7f90] c000000000018430 .call_do_softirq+0x14/0x24
    [c00000000ed472e0] c0000000000142e0 .do_softirq+0x74/0x9c
    [c00000000ed47370] c000000000013c9c .do_IRQ+0xe8/0x100
    [c00000000ed473f0] c00000000000ae34 HardwareInterrupt_entry+0x8/0x54
    
    c00000000003df28 .smp_call_function+0
    x100/0x1d0
    [c00000000ed47780] c0000000000ba99c .invalidate_bh_lrus+0x30/0x70
    [c00000000ed47810] c0000000000b91a0 .invalidate_bdev+0x18/0x3c
    [c00000000ed478a0] c0000000000da7b8 .__invalidate_device+0x70/0x94
    [c00000000ed47930] c0000000001d40bc .invalidate_partition+0x4c/0x7c
    [c00000000ed479c0] c00000000010a944 .del_gendisk+0x48/0x15c
    [c00000000ed47a50] d00000000003d55c .sd_remove+0x34/0xe4 [sd_mod]
    [c00000000ed47ae0] c0000000001c5d30 .device_release_driver+0x90/0xb4
    [c00000000ed47b70] c0000000001c6130 .bus_remove_device+0xb0/0x12c
    [c00000000ed47c00] c0000000001c4378 .device_del+0x120/0x198
    [c00000000ed47ca0] d00000000007dcdc .scsi_remove_device+0xb4/0x194 [scsi_mod]
    [c00000000ed47d30] d0000000000a5864 .ipr_worker_thread+0x1d4/0x27c [ipr]
    [c00000000ed47dd0] c0000000000734c4 .worker_thread+0x238/0x2f4
    [c00000000ed47ee0] c0000000000796c0 .kthread+0xcc/0x11c
    [c00000000ed47f90] c000000000018ad0 .kernel_thread+0x4c/0x6c
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c2731509cfb538b9b38feaf657fab2334ea45253
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jun 2 12:18:20 2005 -0500

    JFS: kernel BUG at fs/jfs/jfs_txnmgr.c:859
    
    add_missing_indices() must set tlck->type to tlckBTROOT when modifying
    a root btree root to avoid a trap in txRelease()
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 7078253c085c037c070ca4e8bc9e9e7f18aa1e84
Merge: 259692b... 1e86d1c...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jun 2 12:12:57 2005 -0500

    Merge with /home/shaggy/git/linus-clean/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 1c3f45ab2f7f879ea482501c83899505c31f7539
Merge: 4bcff1b... e0d6d71...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu Jun 2 16:39:11 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4bcff1b37e7c3aed914d1ce5b45994adc7dbf455
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu Jun 2 12:13:21 2005 +0100

    AUDIT: Fix user pointer deref thinko in sys_socketcall().
    
    I cunningly put the audit call immediately after the
    copy_from_user().... but used the _userspace_ copy of the args still.
    Let's not do that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dbf4ccd6043e58ed32fbf253fb3f0a9991e4c13a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:40:01 2005 -0500

    Input: psmouse - export protocol as a sysfs per-device attribute
           to allow easy switching at run-time.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 905ab9d13694d0f75d1cb8c076ff2027538312ce
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:53 2005 -0500

    Input: cleanup ps2_command() timeout handling in libps2.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c611763d048990de5cdf848d97af6392f8fa7430
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:51 2005 -0500

    Input: add ps2_drain() to libps2 to allow reading and discarding
           given number of bytes from device. Change ps2_command to
           allow using 0 as command ID and actually pass it to the
           device instead of working as a drain.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 04df1925fcda9a35c716423ad2b73abd70eb0913
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:44 2005 -0500

    Input: pmouse - introduce proper locking so state-changing
           operations do not iterfere with each other.
           Also make sure that serio core takes serio->drv_sem
           not only for connect/disconnect but for reconnect
           too.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8121152c1770ef1cd029030d51802c65c489950d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:36 2005 -0500

    Input: mousedev - do not wake up readers when receiving 0-motion
           event.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e334016fc1735e491385e14157a0360cd85c321b
Author: Luke Kosewski <lkosewsk@nit.ca>
Date:   Wed Jun 1 02:39:28 2005 -0500

    Input: do not corrupt system-wide procfs fops.
    
    entry->proc_fops is a pointer to struct file_operations. When we
    call create_proc_entry(...), it pointis to proc_file_operations,
    deep in fs/proc/generic.c. By adding a 'poll' member to this struct
    we effectively force the 'poll' member on every file in /proc,
    which is wrong (they all fail select(...) calls).
    
    This patch changes a copy of entry->proc_fops and reassigns it rather
    than changing the original member.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b6cbf3ef4f270c0dfe84b26649e4fc0c25bb0844
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Jun 1 02:39:25 2005 -0500

    Input: return correct value when setting up absolute device via uinipt.
    
    uinput_alloc_device() is supposed to return the number of bytes read,
    the value is returned to uinput_write() and from there to userspace. If
    EV_ABS is set then it returns the value from uinput_validate_absbits()
    instead, which is zero when everything is ok instead of the count.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Acked-by: Aristeu Rozanski <aris@cathedrallabs.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c30b4c10d9cfe5506fd421304935d8836773c7e5
Author: Ivan Casado Ruiz <casadoi@yahoo.co.uk>
Date:   Wed Jun 1 02:39:18 2005 -0500

    Input: ALPS - fix forward/back buttons on Ahtec laptop.
    
    I have an Ahtec laptop with a ALPS GlidePoint device, with 4 buttons.
    With Linux hernel 2.6.12rc4 and rc5 I'm unable to use the vertical
    scroll buttons (BACK and FORWARD).
    
    BACK gets detected as BTN_MIDDLE and FORWARD is undetected.
    
    I've modified the drivers/input/mouse/alps.c from 2.6.12rc5 and now it
    works fine!
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit cc2d7eeacaff6ccdf407a3555cc3373890f79e01
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jun 1 02:39:11 2005 -0500

    Input: kill empty comment in gameport support section of
           cs4281 ALSA driver.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5d503e5cf42de82fc091ef641fd0b0fe027fc180
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:04 2005 -0500

    Input: ES1371 (OSS) - do not carry around gameport code if gameport
           core support is disabled.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c624e92160e0d503594aff05a1e53fd0aafe41ad
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:39:00 2005 -0500

    Input: ES1370 (OSS) - do not carry around gameport code if gameport
           core support is disabled.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f0f05a42268a8f3dc9dafbcec8ee67f9f8e5cec4
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:53 2005 -0500

    Input: make sure that joystick support in CMPCI driver can only be
           selected if either gameport is built-in or _both_ gameport
           and cmpci are built as modules.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e608460dee4c2de3a01f67c1bac21adb61d617e3
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:46 2005 -0500

    Input: mad16 (OSS) - do not carry around gameport code if gameport core
           support is disabled.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit ba7376e9348eceda21884cda87e714093260aed2
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:43 2005 -0500

    Input: sonicvibes (OSS) - do not carry around gameport code if gameport
           core support is disabled.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 263aba711eabd4b63b70dfe8f78e3a8a7ce65fa9
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:37 2005 -0500

    Input: trident (OSS) - do not carry around gameport code if gameport
           core support is disabled, some formatting changes.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 04b6389a5e236a0d214503e922f1e87ccb97f79d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:33 2005 -0500

    Input: ESS Solo (OSS) - do not carry around gameport code if gameport
           core support is disabled.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 3f9f17d443226f2efd4ff45d333f21dd028afe50
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:16 2005 -0500

    Input: switch gameport core to using kthread API instead of
           using daemonize() and signals. This way kgameportd will
           never be accidentially killed.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a9180ab2e21b0c0ffcec7461c3a52ab7608d023a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:38:12 2005 -0500

    Input: switch serio core to using kthread API instead of using
           daemonize() and signals. This way kseriod will never be
           accidentially killed.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 9d5432979951c8761c2b4517007039b9bcc1c110
Merge: a913829... 21e3024...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 1 02:37:23 2005 -0500

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit ccea7a19e54349d4f40778304e1bb88da83d39e7
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 31 22:22:32 2005 +0100

    [PATCH] ARM SMP: Fix vector entry
    
    The current vector entry system does not allow for SMP.  In
    order to work around this, we need to eliminate our reliance
    on the fixed save areas, which breaks the way we enable
    alignment traps.  This patch changes the way we handle the
    save areas such that we can have one per CPU.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 49f680ea7bac5c679fb6374a326a164a3fba07cc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 31 18:02:00 2005 +0100

    [PATCH] ARM SMP: convert alignment enable
    
    The current vector entry system does not allow for SMP.  In
    order to work around this, we need to eliminate our reliance
    on the fixed save areas, which breaks the way we enable
    alignment traps.  This patch makes the alignment trap enable
    code independent of the way we handle the save areas.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit ead5de996fc35f97fa120b414bfc098f1bca29d2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue May 31 11:53:57 2005 -0400

    [libata] ahci: Update for recent ->host_stop() API change

commit edb3e182b6f33c91ba8778e2198220c12712d3ad
Merge: 8973a58... 5e485b7...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Tue May 31 11:50:32 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit 4ff4258a3e558814a3d48c50a59cd22f56bbea2f
Merge: 442d207... 5e485b7...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon May 30 21:34:37 2005 +0100

    Automatic merge with /usr/src/ntfs-2.6.git.

commit bbc0274e9bb2e3f1d724d445a2bd32566b9b66f7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Sun May 29 10:32:48 2005 +0200

    [ALSA] version 1.0.9

commit 7028b09eecf01549ccaee9c884f48e5e00ec3d65
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri May 27 12:42:26 2005 +0200

    [ALSA] select ISAPNP for SND_INTERWAVE_STB target
    
    ISA
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cdc5c53fde266055debf7f5c9c043d5acf47c5ff
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 12:40:52 2005 +0200

    [ALSA] Fix compilation on 32bit arch
    
    ALSA<-OSS emulation
    Fix the division with int64 for 32bit architectures.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a6c17ec89d33a714b3e94a252c127f2ff63363c8
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri May 27 12:31:34 2005 +0200

    [ALSA] emu10k1: add details for the audigy player box version
    
    EMU10K1/EMU10K2 driver
    Add details for the audigy player box version.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8cfbbac6ad024c3dc749ff20d7c308794da6e370
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 12:10:40 2005 +0200

    [ALSA] ice1724 - Add support of Chaintech AV-710
    
    Documentation,ICE1724 driver
    Add the support of Chaintech AV-710 to ice1724 driver.
    The patch includes the WM-codec initialization fix by
    Jaanus Kivistik <jaanus@no.spam.ee>.
    
    Since both AV-710 and AMP Audio2000 have the same SSID, initialize
    WM codecs as default for both devices.  In case it breaks Audio2000,
    you can pass 'model=amp2000' option to avoid WM codec initialization.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 11ca9afcfee3e6667a498b702642b09ac7312a8a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 11:34:34 2005 +0200

    [ALSA] als4000 - Fix kernel panic with MPU401
    
    ALS4000 driver
    Fix kernel panic with als4000 when MPU401 is accessed.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit af0816139fcf926b6b5c3f866c509507b411d547
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri May 27 11:15:20 2005 +0200

    [ALSA] alsa-oss - 2nd - improved readability
    
    ALSA<-OSS emulation
    Use 'long' for byte counters in snd_pcm_oss_bytes() snd_pcm_alsa_bytes().
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bfc5bddb8efb7e3d10e2f2e07dc2d68e808a9c68
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri May 27 11:12:35 2005 +0200

    [ALSA] alsa-oss - improve readability of snd_pcm_oss_bytes() function
    
    ALSA<-OSS emulation
    Added bytes variable and do not use the frames argument as a temporaly
    storage for the byte counter.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cdc27f3a3fad42f797d4112719d8455fda78c2df
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 11:11:02 2005 +0200

    [ALSA] [doc] Fix a comment about dxs_support for via82xx driver
    
    Documentation
    Fixed/improved a comment about dxs_support option for via82xx driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 685c0dccadfe19233d414afd9f00b8d480a85953
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 11:10:18 2005 +0200

    [ALSA] Add dxs_support for a Twinhead mobo
    
    VIA82xx driver
    Added dxs_support=4 for a Twinhead mobo.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fc232c6e8d618daae212f643587f33d202961861
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 27 10:42:45 2005 +0200

    [ALSA] Fix a wrong bit set in AC1985 code
    
    AC97 Codec
    Fixed a wrong bit set in AD1985 surround jack controls.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8e72ab349e54da49cf3e11480581a3e6704d9553
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri May 27 10:07:06 2005 +0200

    [ALSA] Reverted last patch for SNDCTL_DSP_GETOPTR fix & possible overflow fix
    
    ALSA<-OSS emulation
    This reverts the last patch which wrongly mixes bytes and frames.
    The real culprit might be the 32-bit overflow, so the return expression uses
    64-bit values now in snd_pcm_oss_bytes().
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c3a9cfac750d78241b5dde7d004522f687703b90
Author: Roger Mach <bigmach@us.ibm.com>
Date:   Thu May 26 17:58:01 2005 +0200

    [ALSA] pcm_oss - fix SNDCTL_DSP_GETOPTR not working correctly
    
    ALSA<-OSS emulation
    This patch changes snd_pcm_oss_bytes() by adding a local variable
    for the frames -> bytes conversion, which means that the frame count
    is no longer corrupted by this conversion.
    
    Signed-off-by: Roger Mach <bigmach@us.ibm.com>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 71fe7b82db923e0f71b05deeb54fce75d5a4d08d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 25 18:11:40 2005 +0200

    [ALSA] Fix ALC880 capture problems
    
    HDA Codec driver
    Fixed the capture on some ALC880 devices.
    The node 0x07 is sometimes invalid as an ADC.  Also, the intialization
    of ADC nodes are fixed on some models.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 033a1f10923bdc3646750eef471a618f9d4c074b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 25 16:41:43 2005 +0200

    [ALSA] hda-code: Fix the array size of codec list
    
    HDA Codec driver
    Fixed the wrong array size of the codec pointer list.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9baf6507ff4d0dcab22460e8785582d4eaadebeb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 17:27:00 2005 +0200

    [ALSA] Use standard form for URL
    
    Sound Core
    Use the standard form with <> for URL in Kconfig help texts.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 62144100471e940468d7a0f2d989df193afe870c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 17:24:59 2005 +0200

    [ALSA] Make docproc happy
    
    PCM Midlevel
    Make docproc happy by moving '#if 0' before comments.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 23854c30021fb6da1a76a0e6901b35be03419d5f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 15:22:40 2005 +0200

    [ALSA] Add comments for
    
    Sound Core
    Added (minimal) comments for  in Kconfig, so that
    configurators can choose this entry explicitly.
    
    A more descriptive comment by someone else is appreciated...
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c9bce91f902737395c72d037d70effb5fcbc53b4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 13:41:03 2005 +0200

    [ALSA] Update documentation for ice1712 and ice1724
    
    Documentation,ICE1712 driver
    Updated the documentation for ice1712 and ice1724 drivers.
    Added the device description for shuttle SN25P missing in the last patch.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b9cce37411edd668ae5dbc16aa9653800c8e0744
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 13:16:56 2005 +0200

    [ALSA] Add Shuttle SN25P support
    
    ICE1712 driver
    Added the support for Shuttle SN25P.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d6e33796b5857adf418b07f8f7ce65f46163b2f1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 24 10:40:49 2005 +0200

    [ALSA] cmipci: Fix obsolete description
    
    Documentation
    Fixed obsolete description about CMIPCI driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e6e514fa825be7362a955ba43d6fd18896d375c2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 23 10:33:08 2005 +0200

    [ALSA] Add the vendor 0x1558 to PM whitelist of es1968
    
    ES1968 driver
    Added the vendor id 0x1558 to the power management whitelist of es1968 driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 209ac85d76e4edf05779b4bd5c2a92b059e9ab4d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 23 10:29:53 2005 +0200

    [ALSA] sound/isa/: cleanups
    
    GUS Library
    This patch contains the following possible cleanups:
    - make needlesly global code static
    - #if 0 the following unused global functions:
      - gus/gus_volume.c: snd_gf1_gvol_to_lvol_raw
      - gus/gus_volume.c: snd_gf1_calc_ramp_rate
      - gus/gus_volume.c: snd_gf1_compute_vibrato
      - gus/gus_volume.c: snd_gf1_compute_pitchbend
      - gus/gus_volume.c: snd_gf1_compute_freq
      - gus/gus_io.c: snd_gf1_i_adlib_write
      - gus/gus_io.c: snd_gf1_i_write_addr
      - gus/gus_io.c: snd_gf1_pokew
      - gus/gus_io.c: snd_gf1_peekw
      - gus/gus_io.c: snd_gf1_dram_setmem
      - gus/gus_io.c: snd_gf1_print_global_registers
      - gus/gus_io.c: snd_gf1_print_setup_registers
      - gus/gus_io.c: snd_gf1_peek_print_block
      - gus/gus_io.c: snd_gf1_print_setup_registers
      - gus/gus_io.c: snd_gf1_peek_print_block
    - #if 0 the following unused global variable:
      - gus/gus_tables.h: snd_gf1_scale_table
    - remove the following unneeded EXPORT_SYMBOL's:
      - gus/gus_main.c: snd_gf1_i_write16
      - gus/gus_main.c: snd_gf1_start
      - gus/gus_main.c: snd_gf1_stop
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1baa705b75124df7cfe3d5d2706f794a14d26ad0
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 21 22:35:58 2005 +0200

    [ALSA] Tidy up card recognition.
    
    CA0106 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 8f55fbb0fdb821023ff0a816ebf5056188891ff0
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 21 16:45:58 2005 +0200

    [ALSA] When the alsamixer says 'SPDIF Out [Off]', SPDIF output should be off and Analog output should be on.
    
    CA0106 driver
             This fixes a bug whereby when the snd-ca0106 module first loads,
             alsamixer says 'SPDIF Out [Off]' but no analog sound comes from the speakers.
    
             This covers any bug reports that said things like
             'mixer fails to remember analog output on, when the system is rebooted.'
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 1f82941e82422fcb15d63431e163bf4f0b9389d9
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 21 16:23:37 2005 +0200

    [ALSA] Implement surround71 outputs on SB Live 24bit.
    
    CA0106 driver
    Notes: Requires updated alsa-lib.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 82f008c2b651eefbf293546440fd226580b0c111
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Fri May 20 18:40:38 2005 +0200

    [ALSA] maestro3: Add hardware volume control quirk list
    
    Maestro3 driver
    Add a hardware volume quirk list to the maestro3 driver. Details were
    taken from the Windows driver. Hardware volume control is enabled only for
    the systems in the list.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 58c1f8acdeec4989e5dce1a3aec16926342d7f4b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 20 16:13:00 2005 +0200

    [ALSA] Fix resume of via82xx-modem
    
    VIA82xx-modem driver
    Fix the resume of via82xx-modem, removing invalid __devinit.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 123992f728785e05f385d23893bd5ec69871aeb4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed May 18 18:02:04 2005 +0200

    [ALSA] sound/core/: possible cleanups
    
    PCM Midlevel,ALSA Core,Timer Midlevel,ALSA sequencer,Virtual Midi
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - #if 0 the following unused global functions
    - remove the following unneeded EXPORT_SYMBOL's
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5218064c885af5c49e380d09d54f3cc86891a580
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed May 18 16:31:51 2005 +0200

    [ALSA] ppc32: Fix Alsa PowerMac driver on old machines
    
    PPC PMAC driver
    The g5 support code broke some earlier models unfortunately as those
    bail out early from the detect function, before the point where I added
    the code to locate the PCI device for use with DMA allocations.
    
    This patch fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9502dcad6c1138a3ce2bae23ccd4be44c718d2a9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 18 16:25:46 2005 +0200

    [ALSA] Export missing snd_pcm_format_*()
    
    PCM Midlevel
    Export snd_pcm_format_size().  This function is used by some out-of-kernel
    drivers.
    
    Make snd_pcm_format_cpu_endian() macro for optimization.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e5b3f45f5d442b57dd07dd4f914f7e6cf4d183f1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 17 17:17:57 2005 +0200

    [ALSA] Fix Mic/CLFE sharing on AD1985
    
    AC97 Codec
    Fixed Mic/CLFE jack sharing on AD1985 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 604cf499256af85703bd4858da56e777ec71714d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 17 09:15:27 2005 +0200

    [ALSA] usb-audio - fix synchronization packet interval with Audigy 2 NX
    
    USB generic driver
    When a device does not provide the bRefresh field in its audio endpoint
    descriptors, use the bInterval field instead.
    
    Furthermore, increase the number of sync URBs for better queueing.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d3ff42fd2b4fddb5d779e9e03a2ea44147aa8048
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 17 09:14:27 2005 +0200

    [ALSA] usb-audio - claim all interfaces for Roland USB MIDI devices
    
    USB generic driver
    Many Roland USB MIDI devices have two interfaces that are currently not
    used by the driver; claim them anyway.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d138b44589cc180418f5a20cb0ecfe338123d86c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon May 16 13:51:39 2005 +0200

    [ALSA] fixed PAUSE ioctl for user space interface
    
    Timer Midlevel
    - fixed traditional cut-n-paste error
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8c50b37c04a026ab6641ecb7eaf0fd479798e8b8
Author: Takashi Iwai <tiwai@suse.de>
Date:   Sun May 15 15:43:54 2005 +0200

    [ALSA] Change some timer ioctls due to confliction
    
    Timer Midlevel,ALSA Core
    Change values of some timer ioctls to avoid confliction with FIO* ioctls.
    The protocol version is increased to indicate this change.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 15790a6be14852850ee7cbd791225fa51750d8af
Author: Takashi Iwai <tiwai@suse.de>
Date:   Sun May 15 15:04:14 2005 +0200

    [ALSA] Add missing PAUSE ioctl
    
    Timer Midlevel
    Added the missing implemenation of TIMER PAUSE ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 92bb010cd874e53e4c2e2a73510966e45cfa4525
Author: Takashi Iwai <tiwai@suse.de>
Date:   Sun May 15 14:41:20 2005 +0200

    [ALSA] Add PnP ID ADS7180
    
    AD1816A driver
    Added PnP ID 'ADS7180' (AD1816?).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6d85be612d8b6a6730d19e742329e5ffa60eafdd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Sun May 15 14:32:50 2005 +0200

    [ALSA] Suppress debug message
    
    Control Midlevel
    Suppress 'unknown ioctl' debug message (replaced with snd_printdd).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 54b903ec6e5a3194d86d8bb2f419c918efa4897f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Sun May 15 14:30:10 2005 +0200

    [ALSA] Add Analog Devices vendor name
    
    HDA Codec driver
    Added the missing vendor name entry for Analog Devices.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fd2c326de8cd35a36514a887541426b1ef7c5516
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 13 17:18:42 2005 +0200

    [ALSA] Allow more than 2 channel modes
    
    HDA Codec driver
    Allow 'Channel Mode' control to have more than 2 modes.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9bc533f58e8515cf346932fc84a58dd706342635
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 13 16:44:27 2005 +0200

    [ALSA] Fix a typo in position_fix module option type
    
    HDA Intel driver
    Fixed a typo in the type of position_fix module option.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 680ff0ac6d0c84f14a2e540f64521a9fa80d8661
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 13 16:06:14 2005 +0200

    [ALSA] Suppress error message
    
    HDA Codec driver
    Suppressing the error message regarding no AFG.
    This is often harmless (e.g. probing a modem codec).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 89c87bf8c12e27fbbed971380e21895cace3a065
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri May 13 15:28:08 2005 +0200

    [ALSA] make code static
    
    CA0106 driver,HDA Codec driver
    This patch makes needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 10268b0c38333ede95bb59a7fa561519e6eb8251
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 13 11:01:13 2005 +0200

    [ALSA] Remove obsolete mixer control
    
    AC97 Codec
    Removed the obsolete mixer control for AD1985.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 29b16931f936fdbcd78995e66d0f5626f3afbda8
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri May 13 07:50:28 2005 +0200

    [ALSA] usb-audio - avoid unnecessary double buffering
    
    USB generic driver
    When a USB packet boundary falls exactly on a buffer boundary, hwptr
    remains at the end of the buffer which causes an overflow in the next
    iteration and triggers double buffering although the next packet would
    actually be contiguous.
    
    This patch ensures that hwptr is always smaller than buffer_size.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 50cdbf1519a891bec4ce306c7bae397a0d8e7246
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri May 13 07:44:13 2005 +0200

    [ALSA] usb-audio - sanity-check sync feedback frequency values
    
    USB generic driver
    Check that the synchronization feedback frequency values returned by the
    device are more or less near the nominal frequency.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7291548df69ab4e3a87ff6952449d1f05c3a5443
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 12 16:49:45 2005 +0200

    [ALSA] Rename pci_vendor/pci_device to pci_subvendor/pci_subdevice
    
    HDA Codec driver,HDA generic driver
    Renamed pci_vendor/pci_device fields to pci_subvendor/pci_subdevice.
    They are really PCI subsystem IDs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fc20a562ca1a3c22dc257b2e2d849cb1a9ab6420
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 12 15:00:41 2005 +0200

    [ALSA] Add support of VIA VT8251/VT8237A HD-Audio controllers
    
    Documentation,HDA Intel driver
    Added the support of VIA VT8251/VT8237A HD-Audio controllers.
    They are (almost) compatible with Intel ICH6/7.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f5d40b30ed4daf09f1d43f9b2da1263b17a53c28
Author: Frederick Li <fli@ati.com>
Date:   Thu May 12 14:55:20 2005 +0200

    [ALSA] Adding support for ATI IXP450 HD Audio device support
    
    Documentation,HDA Intel driver
    This patch changes the Intel HD Audio device driver to include
    the support of HD Audio device embedded in ATI south bridge
    IXP450. Because the design of ATI chipset follows intel HD Audio
    specification 1.0, the programming method is the same as that
    of intel HD Audio device exception one minor change which requires
    to enable snoop for DMA transport. There are 3 changes that have been
    made to hda_intel.c file.
      1. Added device ID for ATI HD Audio device;
      2. Increase maximum CODEC supported to 4;
      3. Enable snoop during the driver initialization.
    
    Signed-off-by: Frederick Li <fli@ati.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2fa522bed875cf0bde9e9fdb8fdd852c9d74d67d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 12 14:51:12 2005 +0200

    [ALSA] Add test model for debugging ALC880 devices
    
    HDA Codec driver
    Added 'test' model for testing/debugging the devices with ALC880 codec.
    This model is built only when CONFIG_SND_DEBUG is set.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit dfc0ff62a1d24e987205b41fbf322a4377626481
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 12 14:31:49 2005 +0200

    [ALSA] Add ASUS Z71V support
    
    Documentation,HDA Codec driver
    Added the ASUS Z71V (or similar) laptop support.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c74db86bcf0897cdd4dc1f85ae0d76ef59aaeb20
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 12 14:26:27 2005 +0200

    [ALSA] Add position_fix module option
    
    Documentation,HDA Intel driver
    Added position_fix module option to HDA-intel driver for fixing up
    the DMA position (possibly hardware-) bugs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 091bf4dcab10b083f944d4eafbe0c734786485fe
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Thu May 12 14:20:57 2005 +0200

    [ALSA] maestro3: HP OmniBook HW volume button magic
    
    Maestro3 driver
    Some HP OmniBook laptops (500 and 6000 at least) require some GPIO magic
    before the HW volume buttons work. This patch makes them work mostly.
    Something is still missing to make them work perfectly. However I have been
    unable to figure out what exactly.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit db68d15da00f64bef2c8c822baab42aff39ae774
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Thu May 12 14:19:32 2005 +0200

    [ALSA] maestro3: Add HW volume button support
    
    Maestro3 driver
    Add support for hardware volume buttons.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 88491386be67f659e6b2c76c7463c997ce4c4ebb
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Thu May 12 14:14:28 2005 +0200

    [ALSA] maestro3: Fix interrupt ack and disable
    
    Maestro3 driver
    Due to a typo interrupts were never actually acked or disabled.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cb5a6ffc5c09bc354af69407dae710dcddcced37
Author: Russell King <rmk@arm.linux.org.uk>
Date:   Thu May 12 14:04:59 2005 +0200

    [ALSA] ARM AACI primecell driver
    
    ARM,/arm/Makefile,ARM AACI PL041 driver
    Add support for the ARM AACI Primecell, which provides an AC'97
    based interface.  This driver only provides playback support.
    
    This has been extensively tested with an LM4549 AC'97 codec.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9b9a5afffd8636a82c6b32970342aef9d1f3d17d
Author: Russell King <rmk@arm.linux.org.uk>
Date:   Thu May 12 10:25:58 2005 +0200

    [ALSA] ARM DMA subsystem
    
    ARM DMA routines
    The patch below adds a convenient re-usable shim around the extended
    ARM DMA API, and is used by several ARM ALSA drivers.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f7de9cfd25b6867a2854d98d734e03e1a9fc65fb
Author: Mikael Magnusson <mikaelmagnusson@glocalnet.net>
Date:   Wed May 11 11:13:26 2005 +0200

    [ALSA] emu10k1 - add SB0060 to emu_chip_details
    
    EMU10K1/EMU10K2 driver
    The following patch adds SB0060 to emu_chip_details.
    
    Signed-off-by: Mikael Magnusson <mikaelmagnusson@glocalnet.net>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1dcd3ec4728f9568ee204ceb46b0851be324a7f9
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 10 14:51:40 2005 +0200

    [ALSA] usb-audio - bind to control interface instead of usb_device
    
    USB generic driver
    Bind the device files to the (first) audio control interface instead of
    the entire USB device.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 462c4173509c5d1ebdc6cfd58f7236c2ac467e30
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 10 14:50:31 2005 +0200

    [ALSA] ac97 - enable multichannel output on AD198x codecs
    
    AC97 Codec
    The code for AD1980/AD1985/AD1986 codecs forgot to enable the code to
    switch the jack sharing bits on AD1888-compatible codecs.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 3296480674e127601f453db6301bfbcbacb0d123
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 10 14:48:37 2005 +0200

    [ALSA] ac97 - fix Mic jack sharing on AD1888 codecs
    
    AC97 Codec
    The code for modifying the center/LFE disable bit on AD1888 codecs
    accidentally toggled the mute split bit instead.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit aafad5629a949d0ad41180f8a746b6cd7654e317
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 10 14:47:38 2005 +0200

    [ALSA] usb-audio - add a proc file for Audigy 2 NX jack status
    
    USB generic driver
    This patch adds a proc file for the SB Audigy 2 NX which shows the
    connection status of the various jacks.  Unfortunately, no SPDIF input
    frequency (yet).
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f55a655bf9eeb1431633bd313f47c8e4dadcf47c
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 9 09:21:28 2005 +0200

    [ALSA] usb-audio - remove superfluous LIRC ioctls
    
    USB generic driver
    The ioctls for LIRC compatibility can be removed because the
    infrastructure and detection stuff is better done in user space.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 3a2f08560d61e267aacddc63c26bf997d0d85e91
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 9 09:20:31 2005 +0200

    [ALSA] usb-audio - enable high speed (not) on Audigy 2 NX
    
    USB generic driver
    The SB Audigy 2 NX needs a special boot-up command before it works in
    high speed mode.
    
    However, we don't actually enable it yet because high speed
    synchronization doesn't seem to work with this device.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 3714b5344e2da58d18f0b885663226826c22a1b3
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun May 8 22:22:27 2005 +0200

    [ALSA] Fix snd-usb-audio dependency on snd-hwdep.
    
    USB
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit a488e033861363f64ed90d01622e0c30b382b753
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Sat May 7 18:51:51 2005 +0200

    [ALSA] cs4281 - fix DLLRDY not seen problem
    
    CS4281 driver
    Reset the FPDN bit of the EPPMC register if needed.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 22bc30c84b4dc092deb2b14deb0603b257818e63
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 7 16:13:40 2005 +0200

    [ALSA] Increase capture buffer sizes.
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit f927c8fc648420ad8edd7e4699b4ba510c2e9c6b
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat May 7 15:34:13 2005 +0200

    [ALSA] Implement different capture sources.
    
    EMU10K1/EMU10K2 driver
    e.g. When HD Capture source is set to SPDIF,
         setting HD Capture channel to 0 captures from CDROM digital input.
         setting HD Capture channel to 1 captures from SPDIF in.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit c702563703b5680a7143f8ac66613d082a190ca2
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed May 4 17:26:28 2005 +0200

    [ALSA] Support multiple capture rates on p16v.
    
    EMU10K1/EMU10K2 driver
    The capture rate does in fact vary, but it only captures anything if
    the HD Capture source is set to I2S or AC97. I have not tested if the sound
    is actually captured from an physical input of some type or not.
    TODO: Get SPDIF capture working.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 14c7e472aa979eecc15255eec5cec2763649c599
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed May 4 16:53:53 2005 +0200

    [ALSA] Update A_SAMPLE_RATE register details.
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit c3f9329716df9965cbaf74ce313a12fe889c1a62
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed May 4 14:56:04 2005 +0200

    [ALSA] usb-audio - set sample rate attribute on Audigy 2 NX endpoints
    
    USB generic driver
    The SB Audigy 2 NX does not advertise the sample rate attribute in its
    endpoint descriptors although it supports it.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 93446edcd05589201f20cf8843e8c4f990c18ae4
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 3 08:02:40 2005 +0200

    [ALSA] usb-audio - Audigy 2 NX blinkenlights
    
    USB generic driver
    Adds mixer controls for the CMSS/Dolby Digital/Power LEDs
    on the SB Audigy 2 NX.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 434b7f56872fc5783c77f362e895da8e22168325
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 2 08:58:31 2005 +0200

    [ALSA] usb-audio - make SB remote control device LIRC compatible
    
    USB generic driver
    Add ioctls to the Sound Blaster remote control hwdep device so that it
    can be used with LIRC.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit ca81090a00e3e7152fe1f3d7398f11d57919428e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 2 08:55:54 2005 +0200

    [ALSA] usb-audio - use only one packet in synchronization feedback URBs
    
    USB generic driver
    Do not use more than one packet in synchronization feedback URBs because
    it would be pointless to send or receive more than one value at the same
    time.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 1149a64fe4916fe6fdc8938043a0dc9a6551ab63
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 2 08:53:46 2005 +0200

    [ALSA] usb-audio - use proper interval between synchronization packets
    
    USB generic driver
    Add sanity checks when reading the bRefresh value, and actually use it
    for the synchronization packets instead of polling at 1000 Hz.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 4dc40a3cc4778ebcb6212bdb71b48690a153be07
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 2 08:52:32 2005 +0200

    [ALSA] usb-audio - allow type 0 extension units
    
    USB generic driver
    Extension units can have type 0, so do not ignore them when constructing
    mixer controls.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 27d10f5664c7650af3b2ffadfefaf19b36dc7bd8
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon May 2 08:51:26 2005 +0200

    [ALSA] usb-audio - cache vendor/product IDs
    
    USB generic driver
    Cache the decoded values of idVendor/idProduct to get rid of most of
    those ugly le16_to_cpu() calls.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b259b10c420a59a2fdbcf5a3498253ebcbdffa1e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 29 16:29:28 2005 +0200

    [ALSA] usb-audio - add Extigy/Audigy 2 NX remote control support
    
    ALSA Core,USB generic driver
    Add an hwdep interface that supports reading remote control data from
    Sound Blaster Extigy and Audigy 2 NX devices.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 6639b6c2367f884ca172b78d69f7da17bfab2e5e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 29 16:26:14 2005 +0200

    [ALSA] usb-audio - add mixer control notifications
    
    USB generic driver
    Add support for the optional status interrupt endpoint in audio control
    interfaces, and translate USB status notifications into ALSA mixer
    control notifications.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 84957a8ab086377a025e0448fa716ed5983f3c3a
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 29 16:23:13 2005 +0200

    [ALSA] usb-audio - move mixer data into separate struct
    
    USB generic driver
    Move all data related to audio control interfaces into a separate struct
    local to usbmixer.c.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 707e60732fc25fe3760f916d083b262a86a666c0
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 29 09:56:17 2005 +0200

    [ALSA] usb-audio - reduce size of unitbitmap array
    
    USB generic driver
    Unit/terminal IDs are 8-bit integers, so the unitbitmap
    variable does not need to be bigger than 256 bits.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 8c1872dcf29e2a194197e1d5a9c366a265986b84
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Apr 28 09:31:53 2005 +0200

    [ALSA] usb-audio - restrict Audigy 2 NX frequencies to 48/96 kHz
    
    USB generic driver
    On the SB Audigy 2 NX, frequency feedback doesn't quite work
    when playing at 44.1 kHz, so temporarily disable this frequency.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit ade2916109dc53350298f1ccfb8ab03432c590b4
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Apr 27 16:09:21 2005 +0200

    ALSA CVS update
    ALSA Version
    1.0.9rc3
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7679a03099992d8e6c878d459e22b639ed8c10fa
Author: Thomas Charbonnel <thomas@undata.org>
Date:   Mon Apr 25 11:35:29 2005 +0200

    [ALSA] hdsp - solved big endian problem
    
    RME HDSP driver
    ppc firmware upload fix
    
    Signed-off-by: Thomas Charbonnel <thomas@undata.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 67e1b51e293cec9bbe8c9ad81680bceec1e3b7f9
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Apr 25 11:34:33 2005 +0200

    [ALSA] ac97 - add the 'Mic Front Input Switch' control (ALC850)
    
    AC97 Codec
    Add the 'Mic Front Input Switch' control to the mixer for ALC850.
    Enabling this input is required for using the front panel microphone
    connector with ASUS A8V motherboard.
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b16760bbb9e3c63b6beef7e2c8f8db64ab5efe70
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Apr 25 11:22:20 2005 +0200

    [ALSA] fix behaviour of ac97_enum_mixer elements
    
    AC97 Codec
    ac97_enum mixer elements (e.g., 'Capture Source') did not work because
    of wrong bitmask calculation in snd_ac97_get_enum_double() and
    snd_ac97_put_enum_double().
    
    https://bugtrack.alsa-project.org/alsa-bug/view.php?id=1072
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ee7333970bee3e7565feeb3edfef4db81cbe72e5
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Apr 25 10:34:13 2005 +0200

    [ALSA] usb-audio - remove superfluous parameter
    
    USB generic driver,USB USX2Y
    This patch removes the superfluous driver parameter from the
    disconnect functions.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 8e062ec7108f8a91149e6bccddc3b7341e406274
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 22 15:49:52 2005 +0200

    [ALSA] usb-audio - add selector unit names override for Audigy 2 NX
    
    USB generic driver
    Add a mechanism to specify source names of selector units,
    and add such names for the SB Audigy 2 NX.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 08fe15899df9696a6d34abf96230ae0691f5de66
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 22 15:33:01 2005 +0200

    [ALSA] usb-audio - show exact synchronous frequency in proc file
    
    USB generic driver
    In the streamX proc file, show the exact number of samples per
    USB frame as 16.16 hexadecimal floating point value.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 863ad944b9a32dc43baa76143275411824d5928e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 22 08:52:03 2005 +0200

    [ALSA] usb-audio: add Audigy 2 NX control names
    
    USB generic driver
    Add a mixer control map for the SB Audigy 2 NX so
    that we get meaningful mixer control names.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 930fed517441310a80e269a193ee52f99dd58082
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 20 20:54:43 2005 +0200

    [ALSA] Add dxs_support entry for MSI K8T Neo-FIS2R
    
    VIA82xx driver
    Report by Ronny V. Vindenes <s864@ii.uib.no>
    Add dxs_support=5 for MSI K8T Neo-FIS2R.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d21b37ea134921f807ebdbd19ae3cd00bb8bf2fc
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 20 13:45:55 2005 +0200

    [ALSA] Fix and cleanup of CM9880 auto-configuration
    
    HDA Codec driver
    Fix and cleanup of CM9880 automatic PIN configuration.
    snd_hda_codec_setup_stream() doesn't do anything when NID is 0.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b0c95f514a4057720958c9ea0113229468c94b2b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 20 13:44:08 2005 +0200

    [ALSA] Show PIN jack type
    
    HDA generic driver
    Show the jack type of each PIN default configuration entry.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c31329257522bf66df56e279e20df6fc7abd1ea7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 20 13:43:00 2005 +0200

    [ALSA] Fix a typo in comments
    
    HDA generic driver
    Fix a typo in comments.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 230cd5e24853ed4dd960461989b8ed0986d37a99
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Wed Apr 20 10:12:35 2005 +0200

    [ALSA] prevent oops & dead keyboard on usb unplugging while the device is being used
    
    USB generic driver,USB USX2Y
    Without this patch, some usb kobjects, which are parents to
    the usx2y's kobjects can be freed before the usx2y's.
    This led to an oops in get_kobj_path_length() and a dead
    keyboard, when the usx2y's kobjects were freed.
    The patch ensures the correct sequence.
    Tested ok on kernel 2.6.12-rc2.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fe5ac9dcfe3b219209cf8e08347cce47658267d0
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Wed Apr 20 10:03:31 2005 +0200

    [ALSA] trivial warning fix for emu10k1
    
    EMU10K1/EMU10K2 driver
    When building with gcc -W sound/pci/emu10k1/emupcm.c produces this little
    warning in 2.6.12-rc2-mm3 :
      sound/pci/emu10k1/emupcm.c:265: warning: 'inline' is not at beginning of
    declaration
    No big deal, but trivial to fix.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7358036cc6cb139d70d2b1898d29ecedc087fceb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 15 13:51:48 2005 +0200

    [ALSA] Add dxs_support=5 for Insight P4-ITX
    
    VIA82xx driver
    Added dxs_support=5 entry for Insight P4-ITX.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 07cf374169699d78721668b4e4bd02097c971f75
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 14 16:21:03 2005 +0200

    [ALSA] Increase timer protocol number
    
    ALSA Core
    Increase the timer protocl number (to distinguish the fix for TREAD ioctls).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 98f759a61639b40686e607ecc6fefacb4c249c82
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 14 13:37:13 2005 +0200

    [ALSA] Misc clean up
    
    HDA Codec driver
    Misc clean up: move the definitions of constants for pinctl to a single place.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 01f66d2ccf83ee3ddc8276346f4e1113b9de50d9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 14 13:36:24 2005 +0200

    [ALSA] Remove dead code
    
    HDA Codec driver
    Removed the dead (duplicated) code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4a3fdf3dba80f332e6233e72bdbccdc6031fc92e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 14 13:35:51 2005 +0200

    [ALSA] Add AD1981HD and AD1983 support
    
    HDA Codec driver
    Added the support of AD1981HD and AD1983 codecs.
    Including the fix for AD1986A.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2f2f4251c9b123b2ab04da9e78ab6158535c2e38
Author: Matt <matt@embeddedalley.com>
Date:   Wed Apr 13 14:45:30 2005 +0200

    [ALSA] add sigmatel codec support
    
    HDA generic driver,HDA Codec driver
    Add initial SigmaTel codec support for 9200 and 922x. Note that
    this hda patch relies on the configuration default registers to
    be set correctly (normally by BIOS/firmware) in order for it to
    set up pin widgets properly. There's a test switch in the patch
    so it will work with the SigmaTel reference boards that are usually
    plugged into a system that doesn't set the configuration default
    registers. It supports 2 channel analog out and line/mic in. I
    plan to add >2 channel support and spdif support shortly.
    Please apply.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1a12de1edf234b54ce94971d5604f85809c391b9
Author: Matt <matt@embeddedalley.com>
Date:   Wed Apr 13 14:37:50 2005 +0200

    [ALSA] hda: fix vref cap and ctl values
    
    HDA Codec driver,HDA generic driver
    Fix some vref defines so they are valid for the different bits in
    the pin cap and pin control registers. Please apply.
    
    Signed-off-by: Matt <matt@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit eb8caf30f4c059ddfdfa32b6034549622953db6f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 13 14:32:57 2005 +0200

    [ALSA] Improve the shared-jack handling on ac97
    
    AC97 Codec
    The handling of shared surround/clfe output jacks with line/mic-in
    on some AC97 codecs is improved.
    
    Instead of 'Line-In As Surround' or 'Mic As Center/LFE' switch, two
    new enum controls are introduced: 'Channel Mode' and 'Surround Jack Mode'.
    The formar changes the current output mode among 2, 4 and 6-channels.
    The latter controls whether the jacks are shared or independent.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 267cdf4036ed9e8565a7d909fdf854b9c7e1c5ff
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Apr 13 13:25:30 2005 +0200

    [ALSA] replace SNDRV_PCM_HW_PARAMS_RUNTIME -> SNDRV_PCM_HW_PARAMS_NORESAMPLE
    
    ALSA Core
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 004e65389714721ce0f52a8f0fc22999d3908a2a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Apr 12 17:33:59 2005 +0200

    [ALSA] Fix capture on OSS emulation
    
    ALSA<-OSS emulation
    Fix the noisy capture on some hardwares over OSS emulation.
    Change back to avail_min = period_size for capture direction.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bd7bf042e89941d4e693a0ec68c5093a2bb2adb3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Apr 12 16:27:28 2005 +0200

    [ALSA] Fix permissions in some /proc files
    
    PCM Midlevel,CA0106 driver,EMU10K1/EMU10K2 driver
    Fix by Guillaume Chazarain <guichaz@yahoo.fr>:
    
    Some tunables in /proc have a write() function, but as their
    permission does not reflect it, it can be confusing to the user.
    
    So here is a patch that corrects the mode of those files. Note that I
    have only tested the 'xrun_debug' entry.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0af68e5ed45e985b676edfbe4b8851dd46316502
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Apr 11 17:03:03 2005 +0200

    [ALSA] Fix compile warning
    
    EMU10K1/EMU10K2 driver
    Fix compile warnings regarding the unused variables/functions.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 01d25d460a3b28aab537fab9a0038d1b5832ce28
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Apr 11 16:58:24 2005 +0200

    [ALSA] Replace pci_module_init() with pci_register_driver()
    
    Documentation,ALS4000 driver,ATIIXP driver,ATIIXP-modem driver
    AZT3328 driver,BT87x driver,CMIPCI driver,CS4281 driver
    ENS1370/1+ driver,ES1938 driver,ES1968 driver,FM801 driver
    Intel8x0 driver,Intel8x0-modem driver,Maestro3 driver,RME32 driver
    RME96 driver,SonicVibes driver,VIA82xx driver,VIA82xx-modem driver
    ALI5451 driver,au88x0 driver,CA0106 driver,CS46xx driver
    EMU10K1/EMU10K2 driver,HDA Intel driver,ICE1712 driver,ICE1724 driver
    KORG1212 driver,MIXART driver,NM256 driver,RME HDSP driver
    RME9652 driver,Trident driver,Digigram VX222 driver,YMFPCI driver
    Replace the obsolete pci_module_init() with pci_register_driver().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 01ef355f0c34d6fbb451512e70e4cf336776b7fd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Apr 11 15:08:32 2005 +0200

    [ALSA] Fix SPDIF rate with dxs_support=4
    
    VIA82xx driver
    Fix SPDIF rate setting with dxs_support=4.  It should be 48k fixed.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2d7eb7cb2bab1fbe8cfb610277b19ad40a9f7c75
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Apr 11 15:04:33 2005 +0200

    [ALSA] Support all sample rate conversion capabilities of DXS channels
    
    Documentation,VIA82xx driver
    Add support for full sample rate conversion capabilities of DXS
    channels present in VIA VT8233/5/7 controllers:
    
    - any sample rate in the 8000 ... 48000 Hz range is supported even if
      the AC'97 codec supports only 48000 Hz output;
    
    - different DXS channels can use different sample rates at the same
      time (the controller performs required sample rate conversion and
      mixing in hardware).
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 26be865923ce9edefe8ddc007ddb1c098c29c449
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Apr 11 14:17:19 2005 +0200

    [ALSA] Add PCI ID for Gallant Odyssey Sound 4
    
    FM801 driver
    The Gallant Odyssey Sound 4 card is based on the ForteMedia FM801
    chip, but has a different PCI ID.
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 467a8c2f41ab4b96a7c604619eb7465db403dda8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Apr 11 14:11:00 2005 +0200

    [ALSA] remove dead code
    
    YMFPCI driver
    This patch removes some dead code found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit aed058e8713f76be9258011238670064ea3e69a8
Author: Simone Zinanni <simone@develer.com>
Date:   Mon Apr 11 14:08:40 2005 +0200

    [ALSA] Provides preliminary support for the Terratec Phase 28 card
    
    ICE1712 driver
    Provides preliminary support for the Terratec Phase 28 card.
    Not extensively tested and probably buggy, but it seems to work.
    
    Signed-off-by: Simone Zinanni <simone@develer.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fd9a98ec0a7c8ce15928e3454d73533146d9d57c
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 10 15:43:35 2005 +0200

    [ALSA] Fix typo in speaker routing. Now sound comes from the correct speakers
    
    EMU10K1/EMU10K2 driver
    when using the p16v HD device.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 310bacd29230abf5f2a230159e48e983171e0f26
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 10 00:00:24 2005 +0200

    [ALSA] Improve playback startup. Increase buffer size, and reduce xruns.
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 001f758990d685e7023008763795f1970ef56614
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Apr 9 23:38:25 2005 +0200

    [ALSA] Improve SPDIF playback via the P16V/CA0151 chip.
    
    EMU10K1/EMU10K2 driver
    Although we can set 44100 as the output rate, the SPDIF can do it, but the Analog output cannot.
    The SPDIF has the bug, whereby the Left channel arrives one sample late, so although we don't do any resampling,
    it is not good for AC3 non-audio output.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit df34140a9c15d4be8833f7977dca277a03ab87b0
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Apr 9 16:57:09 2005 +0200

    [ALSA] Display SPDIF in status in proc fs 'spdif-in' file.
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit f953eff29c1ea4c744afe3d50ff5ca33b44efcd2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 8 15:05:13 2005 +0200

    [ALSA] choose multi-channel jacks automatically
    
    HDA Codec driver
    Patch by C.L. Tien <cltien@cmedia.com.tw>:
    
    The patch makes cm9880 to choose multi-channel jacks automatically.
    
    1. I found the current code has basic_init, which already includes
       necessary controls for 6-stack initialization, so I don't need
       another model.
    
    2. I add a new model 'auto' to let the driver find a. if there are
       option real panel/front panel, b. the jacks to be used for multichannel.
    
    Because the jack color are based on MS's channel sequence, so the 'auto'
    model will pick the same jacks for multichannel MS uses. I did this to
    hope to minimize users questions. These code can also be applied to other
    codecs but I don't have any to test.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 22e0732e59b3482bb2f068bfe911c532767e5974
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Apr 8 08:25:23 2005 +0200

    [ALSA] virmidi - fix ioctl parameter passing when setting client name
    
    ALSA sequencer
    The last change to reduce stack usage did not adjust the parameter to
    SNDRV_SEQ_IOCTL_SET_CLIENT_IOCTL which resulted in passing the address
    of the pointer instead of the structure.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 23fea4dad67a665e8d359dbb39180422385f1dcc
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Thu Apr 7 20:23:58 2005 +0200

    [ALSA] MC97 registers reset
    
    AC97 Codec
    Separated ac97 registers reset for audio and modem (or both) as recommended
    in AC97 spec.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8e8311b0ac4dc8a2cf317e122a6f7dc4467e3254
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Thu Apr 7 20:22:58 2005 +0200

    [ALSA] Fix MC97 codec initialization
    
    AC97 Codec
    This (especially 12000 -> 8000 sample rate replace) fix popular
    'MC97 converters.. not ready' error with modem codecs initializations.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2c56c47f678b0388290686d5a0988d8806ffe5cc
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Thu Apr 7 20:21:21 2005 +0200

    [ALSA] Fix 'semaphore is not ready' problem with snd-intel8x0m
    
    Intel8x0-modem driver
    With some intel based ac97 modems codec access semaphore is not cleared
    after 0x54 AC97 register (GPIO_STATUS) reads. This may causes problems
    with newly applied modem mixer (Off-hook switch) and in other cases.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5f0dccf8500b0cc2ff247f626bc249bc184fd184
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 7 15:53:20 2005 +0200

    [ALSA] Add CM9780 support, fix CM9761 SPDIF
    
    AC97 Codec
    - Added CM9780 patch
    - Fix the SPDIF support on CM9761/CM9780
    - Allow the generic enum callback to pass any number (not power of 2)
      as the value mask
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 55911694bf5edf15328dc6558fa3f432d52015ee
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 7 15:50:13 2005 +0200

    [ALSA] Remove unused variables
    
    AC97 Codec
    Removed unused variables (the old control definitions).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bdaed50292bea3e2b20c68c2ffe9dbde7c0d6910
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Apr 7 15:48:42 2005 +0200

    [ALSA] Check revision for the proper detection of audigy 2
    
    EMU10K1/EMU10K2 driver
    Check ther revision to detect non-listed audigy 2 boards.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5af4c83375cba113fb7e1ed57024a5442ca5060e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Apr 6 09:47:02 2005 +0200

    [ALSA] usb-audio - BOSS GS-10 PCM support
    
    USB generic driver
    This patch adds quirks to support 24-bit PCM I/O in the 'Advanced
    Driver' mode of the BOSS GS-10.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 0aa0d387877e8e6408d316aaee1ea84f8e1fb447
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Apr 6 09:43:59 2005 +0200

    [ALSA] virmidi - fix ioctl parameter passing when creating seq port
    
    ALSA sequencer
    The last change to reduce stack usage did not adjust the parameter to
    SNDRV_SEQ_IOCTL_CREATE_PORT which resulted in passing the address of
    the pointer instead of the structure.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit c1935b4d6edf1c4d78bf660992d00b2d8fcb9b59
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Apr 4 16:44:58 2005 +0200

    [ALSA] timer - added tread semaphore
    
    Timer Midlevel
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a913829e90e2af7a6e98f5aadcc9fec4dcf1ef64
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:30:37 2005 -0500

    Input: apparently Lifebook touchscreens have double resolution
           compared to "classic" PS/2 mice, provide appropriate
           resolution setting handler.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a15d60f867408a4d8ce46359d9eb677818349e5b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:30:32 2005 -0500

    Input: lifebook - adjust initialization routines to be in line with
           the rest of protocols in preparation to dynamic protocol
           switching.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 14e94143964d5af6d0a2ae8401cd9e9e091967b9
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:30:28 2005 -0500

    Input: lifebook - various cleanups:
           - do not try to set rate and resolution in init method, let
             psmouse core do it for us. This also removes special quirks
             from the core;
           - do not disable mouse before doing full reset - meaningless;
           - some formatting and whitespace cleanups.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 02d7f5895005bd559c6c12d0f1b4e3dd5d91b927
Author: Kenan Esau <kenan.esau@conan.de>
Date:   Sun May 29 02:30:22 2005 -0500

    Input: Add Fujitsu Lifebook B-series touchscreen driver.
    
    From: Kenan Esau <kenan.esau@conan.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 41e979f822b34e789560ae2752f26f4a018f5d7e
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:30:15 2005 -0500

    Input: Make EVIOSCSABS work in evdev.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit bef3768d8fdee7e1f1488e7017937eb4bf5797a2
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Sun May 29 02:30:08 2005 -0500

    Input: HID items of width 32 (bits) or greater are incorrectly extracted
           due to a masking bug in hid-core.c:extract(). This patch fixes it
           up by forcing the mask to be 64 bits wide.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 18098a6c750d90e7bdf299fbd2144d05434a8d5a
Author: Marian-Nicolae V. Ion <marian_ion@noos.fr>
Date:   Sun May 29 02:30:01 2005 -0500

    Input: Add a new I-Force device to the iforce driver.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8b1a198bf14d59b67e47dc7b133ec5ea443fb40d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:52 2005 -0500

    Input: fix open/close races in joystick drivers - add a semaphore
           to the ones that register more than one input device.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit af246041277674854383cf91b8f0b01217b521e8
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:45 2005 -0500

    Input: remove user counters from drivers/input/touchscreen since
           input core takes care of calling open and close methods
           only when needed.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 65cde54b8b0299d7e46b8705338b01d1e44a5eb0
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:38 2005 -0500

    Input: remove user counters from drivers/usb/input since input
           core takes care of calling open and close methods only
           when needed.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 3108d42de4da0823feb37a55db62acdc01554625
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:30 2005 -0500

    Input: remove user counters from drivers/input/mouse since input
           core takes care of calling open and close methods only
           when needed.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0fbf87caf70acec0c435233fbc39c7bd0aca3ca6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:25 2005 -0500

    Input: add semaphore and user count to input_dev structure;
           serialize open and close calls and ensure that device's
           open and close methods are only called when first user
           opens it or last user closes it.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 58a007765bb5f16020e6000ecbdc5bcc6e54a147
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:19 2005 -0500

    Input: maple_keyb - remove useless dc_kbd_open and dc_kbd_close
           functions as they are not doing anything.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8baf9ed400a0ff7ee21ccd8b2e086aa61c00add5
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:08 2005 -0500

    Input: mtouchusb was indented with spaces instead of tabs, pass
           through Lindent and adjust results.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 05f091ab4c8c1f12f8dd38ee789489904fea327d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:29:01 2005 -0500

    Input: whitespace fixes in drivers/usb/input
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit ab0c3443ad2de03383f2549195badf64779d08a1
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:28:55 2005 -0500

    Input: whitespace fixes in driver/input/joystick
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit de1b963a416232bf429550ee475d6b9a34b66309
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:28:50 2005 -0500

    Input: whitespace fixes in drivers/input/touchscreen
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d083e90660657bf6bde508ba6c3eaa75eb4cf1f6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:28:42 2005 -0500

    Input: whitespace fixes in drivers/input/keyboard
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 968ac842c4946abcd6ae623414783548672177f5
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun May 29 02:28:29 2005 -0500

    Input: whitespace fixes in drivers/input/mouse
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 71387bd77f662a83b18ff8de676e9d9531c58894
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:28:14 2005 -0500

    Input: Fix a warning in hid-core.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 854561b019285acf6e98ca9288fef0d034476fec
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:28:00 2005 -0500

    Input: Make hid-core issue a SET_IDLE request before GET_REPORT, like
           Windows does. This should make life easier for devices that were
           tested with Windows only.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8608471262ddf4b8ed4120d7211251e8b8dcbda9
Author: Hans-Christian Egtvedt <hc@mivu.no>
Date:   Sun May 29 02:27:45 2005 -0500

    Input: Add driver for ITM Touch USB touchscreens.
    
    From: Hans-Christian Egtvedt <hc@mivu.no>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6af2cf59c22fbf5a5466928f29a9545b65fe0e96
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sun May 29 02:27:06 2005 -0500

    Input: Corgi keyboard driver - correct two keys which are much more useful
           as function keys instead of special keys.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b0f71c996849539ac68ebab5edbd208bb9c0646c
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:26:50 2005 -0500

    Input: Fix a warning in evdev's 32-bit emulation code.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 52658bb685df77f71e97f1b503dee97d27a88b0f
Author: Juergen Kreileder <jk@blackdown.de>
Date:   Sun May 29 02:26:43 2005 -0500

    Input: Add support for 32-bit emulation on 64-bit platforms for evdev.
    
    Signed-off-by: Juergen Kreileder <jk@blackdown.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 024ac44c701d43f5e2d34bd6a35b2813a36e6010
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Sun May 29 02:26:31 2005 -0500

    Input: This patch implements compat_ioctl for joydev.
    
           I've tested it with a Logitech WingMan Rumblepad on an x86-64
           machine, and on an ia32 machine to make sure I didn't break
           anything.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f23488b2ab1b447ea4ea3d00cdb0d322a73e7f7f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:25:43 2005 -0500

    Input: Kill Aureal Vortex 1/2 gameport driver. ALSA Aureal driver
           offers the gameport part already.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e8eef5773325f1594acd377b5aa8fe5fb4e45163
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:25:33 2005 -0500

    Input: Crystal SoundFusion (cs461x) gameport support isn't needed
           either, since ALSA handles it nicely.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f6397cecadc52779902bdd8f8cd3ea5af3a19ad1
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 02:25:01 2005 -0500

    Input: Probe PnP gameports first, ISA after that.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 54ab87e6f53099b9a480b56149fa621c3132c076
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 1 13:14:14 2005 +0200

    [ALSA] Add mixer map for Sound Blaster MP3+
    
    USB generic driver
    Added the mixer mapping for Sound Blaster MP3+
    by Pavel Mihaylov <bin@bash.info>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2668907a825702ba9c0e603f160a993b034572f5
Author: Peter Zubaj <pzad@pobox.sk>
Date:   Fri Apr 1 11:15:07 2005 +0200

    [ALSA] Audigy SB0090 identification
    
    EMU10K1/EMU10K2 driver
    This add identification of Audigy 1 model SB0090 and fixes
    problems with ac97 codec (mic not working).
    
    Signed-off-by: Peter Zubaj <pzad@pobox.sk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c1ab5d59a0ff0981828a169886b10045dfdf64c6
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Mar 30 16:22:01 2005 +0200

    [ALSA] usb-audio - allow USB MIDI quirks to specify endpoints explicitly
    
    USB generic driver
    This patch reintroduces the check for endpoint numbers that are
    specified explicitly in the quirk structure.
    This check was accidentally dropped in the last rewrite of
    snd_usbmidi_detect_endpoints().
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 85a655d66b4d1672c7c6fee31297837556585f6b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Mar 30 14:40:25 2005 +0200

    [ALSA] Fix the default id of multiple cards
    
    EMU10K1/EMU10K2 driver
    Fixed the default id string in case identical multiple cards exist.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit aec72e0a4be407fb69fbee812cf0028d62e75152
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Mar 30 14:22:25 2005 +0200

    [ALSA] Use old default id strings for compatibility
    
    EMU10K1/EMU10K2 driver
    Use expliciitly the old default id strings for backward compatibility.
    This will make 'alsactl restore' working again.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9c220a31fd2f609ba55250a75d85ca795051a482
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Wed Mar 30 14:04:34 2005 +0200

    [ALSA] some docs for the new emu10k1 multichannel functionality
    
    Documentation
    Not complete, or even spell checked, but in case I don't get a chance to
    work on it again before 1.0.9, here is what i have so far.  It should go
    in alsa-kernel/Documentation/emu10k1-jack.txt.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2b637da5a1bb3c128ecdadea6aee693f6ff3b786
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Wed Mar 30 13:51:18 2005 +0200

    [ALSA] clean up card features
    
    EMU10K1/EMU10K2 driver
    This patch converts the emu10k1 driver to use the card capabilities
    structure for some more things.
    
    Not extensively tested but seems to work.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 51f633dada113ef724a145bb5b33ec77d1b092f6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Mar 30 13:49:06 2005 +0200

    [ALSA] Fix memory leak
    
    ALSA sequencer
    Fixed memory leak by the last change of stack reduction.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a2142674b958d89e0806228a5f6cd22ec379d61d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Mar 29 16:33:28 2005 +0200

    [ALSA] Fix the detection of resolution of ac97 controls
    
    AC97 Codec
    Fixed the detection of bit resolution of ac97 mixer controls.
    This will fix the problem with TI ac97 codecs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 56f5ceed002db594500c1d2c2afc875be3d31fb5
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Mar 27 15:00:54 2005 +0200

    [ALSA] Added identification for the Audigy ES.
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 65f37647711bf6b0d09b499b9205a33b35ad4ad6
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Mar 26 22:10:36 2005 +0100

    [ALSA] Add's identification of the SB Live! Platinum [CT4760P]
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 6e4abc40fc125b1dcc2792eacac17606a4d86043
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Mar 26 19:35:29 2005 +0100

    [ALSA] Adds Capture to P16V chip.
    
    EMU10K1/EMU10K2 driver
    One can select which capture source, but one cannot yet set volumes.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit d05b2817d859a2a2f2c3d5c056b688559fdbcc2b
Author: ChenLi Tien <cltien@cmedia.com.tw>
Date:   Thu Mar 24 20:47:35 2005 +0100

    [ALSA] fix multi-channel for model==full
    
    HDA Codec driver
    The patch_cm9880.c can't play side/C/B channels from front panel jacks.
    I fixed it by adding select pin.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 36c4dc42249e96f0b0ddc90ca400bcb3981dbc62
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Mar 24 17:48:30 2005 +0100

    [ALSA] Skip ac97 SPDIF controls
    
    CA0106 driver
    Skip building ac97 SPDIF controls via AC97_SCAP_NO_SPDIF.
    Clean up the code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c301098233bdbaae369bfdd98207db916df8cef2
Author: ChenLi Tien <cltien@cmedia.com.tw>
Date:   Thu Mar 24 12:02:54 2005 +0100

    [ALSA] Show currectly selected widget in proc_read for hda driver
    
    HDA generic driver
    During debugging for cm9880 multi-channel playback, I added the * after
    the currently selected widget, mixer widget doesn't need this but other
    3 widget types need it.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 94f19c9a6da1fd3a5958f1a0b44aa340f2596a5b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 24 12:01:15 2005 +0100

    [ALSA] kill dead code
    
    ALSA<-OSS emulation
    The Coverity checker found this obviously dead code.
    
    I'm not sure which of the if (plugin == NULL) is correct - this patch
    removes the one that couldn't be true.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ea9375607f8b312cf4389d68909330ed32a622ef
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Apr 12 16:26:40 2005 -0400

    [PATCH] smc91x: more tweaks to help with RX overruns
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    
    Index: linux-2.6/drivers/net/smc91x.c
    ===================================================================

commit 8de901150f3c58b019b2a3ce497d23ab662dbb8b
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Apr 12 16:21:11 2005 -0400

    [PATCH] smc91x: improve diagnostic info
    
    ... and remove duplicate status defines.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    
    Index: linux-2.6/drivers/net/smc91x.c
    ===================================================================

commit 1f15d694522af9cd7492695f11dd2dc77b6cf098
Merge: fff9cfd... 254feb8...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 22:07:02 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch master

commit befc9e10d64f93472aff0b0280968f447f5402df
Merge: 07b08a1... 4dcb7d3...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 20:12:17 2005 -0400

    Automatic merge of rsync://www.fr.zoreil.com/linux-2.6.git branch HEAD

commit 07b08a16186bd083ba06c37c621ea91fc580eb97
Merge: 462cee2... 254feb8...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 20:09:40 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit 4dcb7d33770541ae3e65a57351f3875df64e8af6
Author: Richard Dawe <rich@phekda.gotadsl.co.uk>
Date:   Fri May 27 21:12:00 2005 +0200

    [PATCH] r8169: minor cleanup
    
    - more consistent prototypes;
    - rtl8169_rx_interrupt()
      o the error condition should be rare;
      o goto removal.
    
    Signed-off-by: Richard Dawe <rich@phekda.gotadsl.co.uk>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit d4a3a0fc9c2d012093cf75a8d95034966c17e71e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri May 27 21:11:56 2005 +0200

    [PATCH] r8169: add ethtool support for dumping the chip statistics
    
    There aren't lots of statistics available, but this is what is available
    according to the RealTek documentation.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit b57b7e5a11c4e45565cf34d786d74ad35483fe83
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri May 27 21:11:52 2005 +0200

    [PATCH] r8169: ethtool message level control support
    
    Also:
    - ratelimit the too much work at interrupt message, so if under massive
      packet load the console doesn't get flooded;
    - removal of a few PFX used in contexts where dev->name is available;
    - s/->slot_name/pci_name/;
    - printed_version is redundant with the debug option. Remove it and let
      the user decide.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit df0a1bf63403c2decec2c11cdd1b304363174e90
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri May 27 21:11:49 2005 +0200

    [PATCH] r8169: add module parameter (media)
    
    Add module parameter description for the media option.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 1b7efd58bb2c89f408118888b659b51ff66c47b9
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri May 27 21:11:45 2005 +0200

    [PATCH] r8169: add module parameter (copybreak)
    
    Add module parameter description for copybreak.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit f7ccf420e5d5553d2cb25d21f8bb77e7747f1c35
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri May 27 21:11:41 2005 +0200

    [PATCH] r8169: identify the napi version
    
    To tell if driver is configured for NAPI or not, put -NAPI on driver
    version. Remove the NAPI printk since the complete version information
    is displayed once in the pci probe routine or returned via ethtool.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 53456f607a7ec02905823dc92a94c7e36d4ded1a
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri May 27 21:11:37 2005 +0200

    [PATCH] r8169: de-obfuscate supported PCI ID
    
    De-obfuscate supported PCI ID
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit a7b6459de19c85432f791728317089459316da32
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri May 27 21:11:33 2005 +0200

    [PATCH] r8169: new PCI id
    
    The USR 997902 is based on the 8169 chipset.
    
    The value has been extracted from the sources of the driver which
    comes with the manufacturer's cdrom. Heads-up and test by TommyDrum
    <mycooc@yahoo.it>.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 442d207eb0b4e7047c4fedccd900c425e689d502
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri May 27 16:42:56 2005 +0100

    NTFS: Use C99 style structure initialization after memory allocation where
          possible (fs/ntfs/{attrib.c,index.c,super.c}).  Thanks to Al Viro and
          Pekka Enberg.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 2fb21db2548fc8b196eb8d8425f05ee1965d5344
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Wed May 25 21:15:34 2005 +0300

    NTFS: Remove spurious void pointer casts from fs/ntfs/.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 5eac51462f340b7c4a03b9220cf157c40b4990a5
Merge: c1c58ad... 4ec5240...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri May 27 15:36:21 2005 +0100

    Merge with /usr/src/ntfs-2.6.git.

commit 8f37d47c9bf74cb48692691086b482e315d07f40
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri May 27 12:17:28 2005 +0100

    AUDIT: Record working directory when syscall arguments are pathnames
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f1f67a9874f1a4bba1adff6d694aa52e5f52ff1a
Author: Nicolas S. Dade <daden@symbol.com>
Date:   Tue May 24 01:46:34 2005 -0700

    [MTD] NAND: Add Hynix to manufacturer list
    
    Signed-off-by: Nicolas S. Dade <daden@symbol.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b1abb4d67f2a706f52a95064001e0c55d9be2d26
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue May 24 17:15:43 2005 -0500

    [SCSI] aic7xxx: remove separate target and device allocations
    
    Since the aic driver is now taught to speak in terms of the generic
    linux devices, we can now also dispense with the transport class get
    routines (since we update the parameters when the driver sees they
    change) and also plumb it into the spi transport transfer agreement
    reporting infrastructure.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 153b1e1fd957861e2c185473dd3c3d93561066e4
Merge: cdbbde1... c3e9dda...
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu May 26 14:14:55 2005 -0400

    Automatic merge of ../scsi-misc-2.6-old/

commit 8973a585aec125beb2a3de50bb491004299f53d5
Merge: 907f467... bef9c55...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Thu May 26 13:03:24 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit c3e9dda4f5702ee5b346f4770de53f79e8ad1d8d
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue May 24 16:57:31 2005 -0500

    [SCSI] allow the HBA to reserve target and device private areas
    
    This patch basically allows any HBA attached to the SPI transport class
    to declare an extra area which the mid-layer will allocate as part of
    its device and target allocations.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 644e02ea147f8bea18800107f443ea5fa7f17f4f
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 24 02:05:24 2005 -0700

    [SCSI] git-scsi-misc-sbp2-warning-fix
    
    drivers/ieee1394/sbp2.c: In function `sbp2_check_sbp2_response':
    drivers/ieee1394/sbp2.c:2154: warning: unused variable `device_type'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a283bd37d00e92e8874ca6325ae071691d4db388
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue May 24 12:06:38 2005 -0500

    [SCSI] Add target alloc/destroy callbacks to the host template
    
    This gives the HBA driver notice when a target is created and
    destroyed to allow it to manage its own target based allocations
    accordingly.
    
    This is a much reduced verson of the original patch sent in by
    James.Smart@Emulex.com
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 631e8a1398ce4cfef8b30678d51daf0c64313a09
Author: Al Viro  <viro@www.linux.org.uk>
Date:   Mon May 16 01:59:55 2005 +0100

    [SCSI] TYPE_RBC cache fixes (sbp2.c affected)
    
    	a) TYPE_SDAD renamed to TYPE_RBC and taken to scsi.h
    	b) in sbp2.c remapping of TYPE_RPB to TYPE_DISK turned off
    	c) relevant places in midlayer and sd.c taught to accept TYPE_RBC
    	d) sd.c::sd_read_cache_type() looks into page 6 when dealing with
    TYPE_RBC - these guys have writeback cache flag there and are not guaranteed
    to have page 8 at all.
    	e) sd_read_cache_type() got an extra sanity check - it checks that
    it got the page it asked for before using its contents.  And screams if
    mismatch had happened.  Rationale: there are broken devices out there that
    are "helpful" enough to go for "I don't have a page you've asked for, here,
    have another one".  For example, PL3507 had been caught doing just that...
    	f) sbp2 sets sdev->use_10_for_rw and sdev->use_10_for_ms instead
    of bothering to remap READ6/WRITE6/MOD_SENSE, so most of the conversions
    in there are gone now.
    
    	Incidentally, I wonder if USB storage devices that have no
    mode page 8 are simply RBC ones.  I haven't touched that, but it might
    be interesting to check...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 53222b906903fd861dc24ebccfa07ee125941313
Author: Matthew Wilcox  <matthew@wil.cx>
Date:   Fri May 20 19:15:43 2005 +0100

    [SCSI] sym2 version 2.2.1
    
    sym2 version 2.2.1:
     - Fix MMIO BAR detection (Thanks to Bob Picco)
     - Fix odd-sized transfers with a wide bus (Thanks to Larry Stephens)
     - Write posting fixes (Thanks to Thibaut Varene)
     - Change one of the GFP_KERNEL allocations back into a GFP_ATOMIC
     - Make CCB_BA() return a script-endian address
     - Move range checks and disabling of devices from the queuecommand path
       to slave_alloc()
     - Remove a warning in sym_setup_cdb()
     - Keep a pointer to the scsi_target instead of the scsi_dev in the tcb
     - Remove a check for the upper layers passing an oversized cmd
     - Replace CAM_REQ_ constants with the Linux DID_ constants
     - Replace CAM_DIR_ constants with the Linux DMA_ constants
     - Inline sym_read_parisc_pdc() on non-parisc systems
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7551ced334ce6eb2a7a765309871e619f645add1
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 26 12:04:57 2005 +0100

    AUDIT: Defer freeing aux items until audit_free_context()
    
    While they were all just simple blobs it made sense to just free them
    as we walked through and logged them. Now that there are pointers to
    other objects which need refcounting, we might as well revert to
    _only_ logging them in audit_log_exit(), and put the code to free them
    properly in only one place -- in audit_free_aux().
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    ----------------------------------------------------------

commit 60bf09a366c873aab36e3b3110ee9f5bd89a1a6d
Author: Narendra Sankar <nsankar@broadcom.com>
Date:   Wed May 25 16:51:00 2005 -0700

    [PATCH] sata_svw: Add support for new device IDs
    
    BCM5785 (HT1000) is a new southbridge from Serverworks/Broadcom that
    incorporates 4 SATA ports in a single PCIX function. Functionally these
    ports are similar to that in older devices like the Apple K2 and the
    Frodo4/8. This patch adds support for the new PCI device ID along with a
    blurb on what the various device IDs mean. Additionally in all devices
    based on this SATA controller, the SATA ports appear as a single PCI
    function. This is true for older Frodo8 devices as well. Hence the init
    function should init all the ports present in the detected controller
    (which could be 4 or 8).
    
    Signed-off-by: Narendra Sankar <nsankar@broadcom.com>

commit a8aff8ab981cc8ef170e89d85094da722644a7fd
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Wed May 25 12:32:37 2005 +0200

    [MTD] Fix it really
    
    tglx declares him self to be the idiot of the day.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b0435695cb3b3e0542c9a3f921f40b216ec37580
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Wed May 25 12:20:29 2005 +0200

    [MTD] map.h Use the correct macro and fix the resulting compiler warning
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c1c58ada91cfe86f19d430282132434e620a1067
Merge: 67394f8... 2a24ab6...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed May 25 09:38:26 2005 +0100

    Merge with /usr/src/ntfs-2.6.git

commit 37ca5389b863e5ffba6fb7c22331bf57dbf7764a
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Tue May 24 21:28:28 2005 +0100

    AUDIT: Fix remaining cases of direct logging of untrusted strings by avc_audit
    
    Per Steve Grubb's observation that there are some remaining cases where
    avc_audit() directly logs untrusted strings without escaping them, here
    is a patch that changes avc_audit() to use audit_log_untrustedstring()
    or audit_log_hex() as appropriate.  Note that d_name.name is nul-
    terminated by d_alloc(), and that sun_path is nul-terminated by
    unix_mkname(), so it is not necessary for the AVC to create nul-
    terminated copies or to alter audit_log_untrustedstring to take a length
    argument.  In the case of an abstract name, we use audit_log_hex() with
    an explicit length.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3a3ab48c68de656736f091c6ed768fa8c110a7ab
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Tue May 24 20:50:18 2005 +0200

    [MTD] Make map_word_ff ware of the flash buswidth
    
    map_word_ff() was setting the mapword to ~0UL regardless of the
    buswidth of the mapped flash chip. The read_map functions are
    buswidth aware and therefor the map_word_equal function failed.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 22fd9a8750bcad4999768aafc8fbd8a4bd6f5aa1
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Tue May 24 15:33:49 2005 +0200

    [MTD] cfi_cmdset_0002: Fix broken status check
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 99e45eeac867d51ff3395dcf3d7aedf5ac2812c8
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon May 23 21:57:41 2005 +0100

    AUDIT: Escape comm when logging task info
    
    It comes from the user; it needs to be escaped.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit bccf6ae083318ea08094d6ab185fdf7c49906b3a
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon May 23 21:35:28 2005 +0100

    AUDIT: Unify auid reporting, put arch before syscall number
    
    These changes make processing of audit logs easier. Based on a patch
    from Steve Grubb <sgrubb@redhat.com>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f08276136bdc8607c1da493279569beb9859b133
Merge: 7d27c81... 1263cc6...
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Mon May 23 15:11:45 2005 +0200

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 7d27c8143c8234e1cae8285fd2d43c19dad69bde
Author: Thomas Gleixner <tglx@tglx.tec.linutronix.de>
Date:   Sun May 22 21:47:19 2005 +0200

    [JFFS2] Whitespace cleanup. Fix missing debug message
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c84441c47d21d9291e780cdb5686e927dcd6f227
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri May 20 20:30:09 2005 +0100

    [JFFS2] Fix crosscompile
    
    Include sched.h instead of asm/semaphore.h to make it compile everywhere.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit e2d48b1a98bb5da8d6998ca4db0b20fa46938a11
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri May 20 22:37:15 2005 +0100

    [JFFS2] Fix cleanup in case of GC-Task not started
    
    Do not call wait_for_completion, when the gc task is not there.
    Prevent an oops when the gc thread was not started.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit fb4a90bfcd6d86e8531073c42fae7fde40974f5d
Author: Eric W. Biederman <ebiederman@lnxi.com>
Date:   Fri May 20 04:28:26 2005 +0100

    [MTD] CFI-0002 - Improve error checking
    
    Check for errors besides infinite loops when writing and erasing.
    
    Signed-off-by: Eric W. Biederman <ebiederman@lnxi.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6da70124a1cc05bdbd7c847901964edc6f634a91
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu May 19 18:05:47 2005 +0100

    [MTD] CFI flash locking reorg for XIP
    
    This reworks the XIP locking to make sure no lock primitive is ever
    called from XIP disabled paths even if in theory they should not
    cause any reschedule.  Relying on the current spinlock implementation
    is rather fragile and not especially clean from an abstraction pov.
    The recent RT work makes it even more obvious.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit fff7afd791f6a685b3ddedb8cfb152aed85f3cf8
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu May 19 17:18:11 2005 +0100

    [JFFS2] Convert thread start semaphore to completion
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 90e260c84f563a4ac6b47886e8188af06f4a4a46
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu May 19 17:10:26 2005 +0100

    [MTD] NAND: Honour autoplacement schemes supplied by the caller
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a69dde91e8940b49bdc9920dd65ec02c6a51f85c
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed May 18 12:37:28 2005 +0100

    [JFFS2] Kill GC thread before cleanup
    
    First kill GC thread, then start clearing the internal structures
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 4132ace8d6f1b57839048548a17a0265f889aa3e
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Fri May 6 10:30:30 2005 +0100

    [JFFS2] Suppress annoying debug messages
    
    Embrace uneeded messages in D1().
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8cd79216676d9122fa714615e6b49553761aca8a
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Tue May 3 16:19:02 2005 +0100

    [JFFS2] Fix NOR only compile
    
    Fix the bug that caouses problems when compiling for NOR.
    We read  a newly erased block so we don't need to check ECC.
    
    Define jffs2_is_writebuffered as zero if there is no wbuf.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c25bb1f59ca6ebbee2649d82533537d4bf123609
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Wed Apr 27 21:01:52 2005 +0100

    [MTD] CFI DEBUG_LOCK_BITS fixes for Intel NOR flash:
    
    adjust chip-relative offsets to
    block address, write to block address + 2 per recent datasheets.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c13cbf3b5086d4ed51360b86b6b0ef8b82b179dc
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Thu Apr 21 04:42:15 2005 +0100

    [MTD] mtdram: Quick cleanup of the driver:
    
    - Lindent
    - Removal of slram/phram functionality
    - Removal of most #ifdefs
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7d200960d4f3d1b50c3b9e9688408d9f81c66ff4
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Apr 13 14:22:38 2005 +0100

    [JFFS2] Fix inode allocation race
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0a18cde60f384d1f7aa012aba004766fb633a31d
Author: Jarkko Lavinen <jarkko.lavinen@nokia.com>
Date:   Mon Apr 11 15:16:11 2005 +0100

    [MTD] NAND: Fix the broken dynamic array allocations
    
    Reverting the change from 1.136 to 1.137 (back to static allocation of ecc
    arrays) due to stack corruption and ecc errors.
    
    Signed-off-by: Jarkko Lavinen <jarkko.lavinen@nokia.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 65c6e0a657012d104fe42be5f01a7b9b451b687c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Apr 11 11:19:05 2005 +0100

    [MTD] Fix broken user ABI
    
    Move kernel data where it belongs. Previous change broke user abi.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8557fd51c22e4c2109f062decd19de439061ceae
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sat Apr 9 11:47:03 2005 +0100

    [JFFS2] Fix race in garbage collector
    
    Fix the race problem described here:
    http://lists.infradead.org/pipermail/linux-mtd/2005-April/012361.html
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit abc37e6771ec92bb4c531d218ad572afbef6aa21
Author: Dan Brown <dan_brown@ieee.org>
Date:   Thu Apr 7 15:22:58 2005 +0100

    [MTD] DiskOnChip: Add some comments
    
    Add helpful comment about oobfree so I can't claim two years from
    now that I don't remember what I was thinking.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7e4a1d3e6abec5464169a29a3d34473a59e2e8b7
Author: Dan Brown <dan_brown@ieee.org>
Date:   Thu Apr 7 14:39:17 2005 +0100

    [MTD] DiskOnChip: Fix compile w/o CONFIG_MTD_PARTITIONS.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit dff59421983b235d5b8f713d01213fcc7f57c970
Author: Dan Brown <dan_brown@ieee.org>
Date:   Wed Apr 6 21:14:22 2005 +0100

    [MTD] DiskOnChip: Prevent problems with existing filesystems
    
    Try not to break existing jffs2 installs, instead break oobfree into
    two out-of-order pieces.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 82e1d19fc3e6bd20b65937352a015a412b751d47
Author: Dan Brown <dan_brown@ieee.org>
Date:   Wed Apr 6 21:13:09 2005 +0100

    [MTD] NAND: Fix reading of autoplaced OOB when there are multiple free sections.
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit e5a3e8ca948e8ac0dad751dbd75e4dc96b4277e9
Author: Dan Brown <dan_brown@ieee.org>
Date:   Wed Apr 6 19:10:24 2005 +0100

    [MTD] DiskOnChip: Fix (?) free OOB array info.
    
    I really hope this doesn't break something.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6f401a40b5e46144e1ea361a5e2be428fb18a344
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed Apr 6 17:02:55 2005 +0100

    [JFFS2] Add KERN_DEBUG level to printks
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 894214d1a75745a283d5f1921125b3ad36d7ba26
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Tue Apr 5 13:51:58 2005 +0100

    [JFFS2] Fix race problems with wbuf.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 22c60f5fb7b8184a2d00a607f965b54c586fb40e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Apr 4 19:56:32 2005 +0100

    [MTD] NAND: Move the NULL check into the calling function
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit bb75ba4c442c6aa73797c35651a697b0a8006bd6
Author: Dan Brown <dan_brown@ieee.org>
Date:   Mon Apr 4 19:02:26 2005 +0100

    [MTD] NAND: Fix missing NULL pointer check
    
    Version 1.137 broke nand_read_ecc clients who pass NULL oobsel.  Fixed.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit dce2b4da69a83635150a6535ebc23f680e200a8d
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Apr 1 17:36:29 2005 +0100

    [MTD] Fix OTP for top-parameter devices
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 81dba488792b29cc8cb2b3d49407be05303dde16
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Apr 1 16:36:15 2005 +0100

    [MTD] Reset file position when switching OTP mode
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 998cf6403cdaac74211c619772bea027274ffc42
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Apr 1 08:21:48 2005 +0100

    [MTD] NAND: Fix oob available calculation
    
    Use oobfree to calculate the number of oob bytes available for fs usage
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 963a6fb0a0d336d0513083b7e4b5c3ff9d6d2061
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Apr 1 02:59:56 2005 +0100

    [MTD] Add reboot notifier to Intel NOR flash driver
    
    to make sure the flash is in array mode whenever we're about to
    reboot. This is especially useful to allow "soft" reboot to work
    which consists of branching back into the bootloader.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8048d2fc38c9559ce37b46c21fa734c5cb9bcdb2
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Thu Mar 31 00:57:33 2005 +0100

    [MTD] Avoid compile warnings for Intel CFI flash without OTP support.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9a6e73ec4906bdf44ccfaaf8db56693b146595c0
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Tue Mar 29 23:06:40 2005 +0100

    [MTD] cfi_cmdset_0001: Skip delay if Instant Block Locking is set
    
    Skip jiffy delay after each block lock/unlock for Intel CFI flash
    with the "Instant Individual Block Locking" feature bit set.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 1a78ff6b4114cfb0f734b7df217759315d692683
Author: Dan Brown <dan_brown@ieee.org>
Date:   Tue Mar 29 21:57:48 2005 +0100

    [MTD] DiskOnChip: Scan the entire device for Media Headers.
    
    Add a new module param, show_firmware_partition.
    
    Signed-off-by: Dan Brown <dan_brown@ieee.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 15fc108606a499df44549274a95d1e3455823347
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Thu Mar 24 14:33:26 2005 +0000

    [MTD] NAND: Use arrays of needed size instead of constant-sized.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8f5a4486c05275a5f3d53c80c86a44adb7fb8823
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Mar 21 08:42:14 2005 +0000

    [MTD] sharpsl-flash: Correct error paths
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ba38069875a365a33b9b56e42dfdb71b5ce7a3a4
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Mar 21 00:10:24 2005 +0000

    [MTD] Add support for more SharpSL machines and fix missing mapping init
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3cceb9f6cf433545b607451e5de7af2cd6cec0b5
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sun Mar 20 21:43:26 2005 +0000

    [JFFS2] Prevent deadlock when flushing write buffer
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 437316d9b5ea142ca7ab9ef131c28506c407d1d6
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sun Mar 20 17:46:23 2005 +0000

    [JFFS2] Forbid to free inode_cache objects if its nlink isn't zero.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a42163d7c331c2532551f675d6616a00e1e87fe9
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sun Mar 20 17:45:29 2005 +0000

    [JFFS2] Improve garbage collector block selection
    
    Make sure the erase_pending_wbuf_list's blocks are taken into account
    when picking the block to GC.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a921e28b4bd35b091754a1814ff015fe268b9295
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Mar 19 22:41:30 2005 +0000

    [MTD] plat-ram: Make it usable on non ARM platforms
    
    Use memset instead of ARM only memzero function
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit cc71229ff345a32d1b3de370a257dac62986b187
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Mar 19 22:40:47 2005 +0000

    [MTD] block2mtd: Fix incompatible pointer type
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 50da7f60960a2e39aa8784983c580a3ddfd9bd8d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Mar 19 22:39:52 2005 +0000

    [MTD] cfi_cmdset_0001: Fix compiler warnings
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 515022870f0f648b9c506a285b1c7e92901dd37f
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sat Mar 19 15:33:59 2005 +0000

    [MTD] NAND nandsim: Use NAND_SKIP_BBT option
    
    Use the new NAND_SKIP_BBT option instead of defining a fake scan_bbt
    handler.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 167e1770e526c6c6cdff5014e32f5a3363c017f3
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Mar 18 14:07:49 2005 +0000

    [MTD] ixp2000: Remove port setting code
    
    Setting the slowport to 8-bit mode is something that ought to be
    done in the IXP2000 generic code, not in the MTD map driver.  See
    the description for ARM patch 2493/1 for an explanation.
    
    http://www.arm.linux.org.uk/developer/patches/viewpatch.php?id=2493/1
    
    Now that 2493/1 has been accepted and will be upstream soon, this
    doesn't need to be done in the map driver anymore.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ff3bc4eb94ec3d2ce6e8f615d38c94151ccb6553
Author: Domen Puncer <dome@coderock.org>
Date:   Fri Mar 18 14:04:38 2005 +0000

    [MTD] Kernel Janitor fixes.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 4d9527096e2e5da7bec4b6a276fdb05086b6c395
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Fri Mar 18 09:58:09 2005 +0000

    [JFFS2] Use function to manipulate superblock dirty flag
    
    Use the corresponding function to mark Superblock dirty instead
    of doing it directly.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3c45e00afcaa22c65cfb7f77649591db9e0bec03
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 18 02:07:24 2005 +0000

    [MTD] Fix typo in Kconfig
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3e4ef3bb77f7b87c631ba188d4a4b4eb30b2f16f
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Thu Mar 17 11:31:30 2005 +0000

    [MTD] NAND s3c2410: Simplify command handling
    
    Updated with tglx's suggestion to simply the command invocation by
    simply changing the address of the IO write area
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 09c7933547e383ab89ee1b08ec86899bef3035cf
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Mar 16 22:41:09 2005 +0000

    [MTD] cfi_cmdset_0001: Fix state after sync
    
    oldstate has to be reset to FL_READY after sync completion.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3a70025047f90de2133744a8918e90fcf5a93366
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 15 19:07:21 2005 +0000

    [MTD] cfi_cmdset_0001: Fix the buggy status check.
    
    The change makes the code endianess aware and replaces the bogus
    nested loop to or the status flags together.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c927cd3a226bed5cf063cdf04de13cef51144cef
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 15 19:03:16 2005 +0000

    [MTD] Add the reverse operation of cfi_build_cmd()
    
    This is necessary to fix the broken status check in cfi_cmdset_0001
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit fb6bb52ddde0429b654ab6d4cb20fa016a1d5b0d
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Mar 14 20:33:22 2005 +0000

    [MTD] plat-ram: removed extraneous debugging code
    
    removed define of DEBUG
    removed extraneous debugging code
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3b946e3f3dc0de473a88b4106f01731a5c016689
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Mar 14 18:30:48 2005 +0000

    [MTD] NAND: Fixed unused loop variable
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0514cd938009de1d6b3239d98c3cf2a67b620103
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Mar 14 18:27:18 2005 +0000

    [MTD] Fixed signed 1bit bitfield
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 663259a44f440249cab1b0f3f4b82cfab8e4758d
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Mon Mar 7 21:43:42 2005 +0000

    [MTD] phram: Allow short reads.
    
    Jffs2 apparently needs this.
    Accept newline at the end of input.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 711c11b78d00c0652d38893c558a2bcca55d96d4
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Mon Mar 7 20:29:09 2005 +0000

    [MTD] block2mtd: Remove copyright. Fix offset calculation
    
    - Remove Gareth from the Copyrights (at his own request)
    - Fix the "fscking embarrassment"
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b4eab4b8d633ff1d65dac5cfb07949489f68ae26
Author: David Vrabel <dvrabel@arcom.com>
Date:   Wed Mar 2 14:51:08 2005 +0000

    [MTD] Remove Elan-104NC
    
    Remove support for the Arcom Elan-104NC since it's no longer being maintained.
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 32f1a95d505b99b1f01b6aeea36ec3f97245b357
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Tue Mar 1 10:50:52 2005 +0000

    [JFFS2] Add symlink caching support.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 20a6c211903dce92a0db7f19c221cfa3f2cb4c32
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 1 09:32:48 2005 +0000

    [MTD] NAND: Use cond_resched instead of msleep
    
    Replace msleep by cond_resched. On machines with HZ=100 (e.g. ARM)
    msleep slows down the operation by factor 10
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 31fbdf7aa5aac8a2a34f180a25deb157297a10c9
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Mon Feb 28 08:21:09 2005 +0000

    [JFFS2] Fix NOR specific scan BUG
    
    Fix fairly sad NOR-specific bug - during FS building ic->scan_dents
    isn't zero, but jffs2_mark_node_obsolete() migt be called it tries to
    finde the ic corresponding to ref - this requires ic->scan_dents = 0.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 67e345d17ff8c2085a54c293001ae548f7be7b21
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Feb 27 23:01:36 2005 +0000

    [JFFS2] Prevent ino cache removal for inodes in use
    
    Don't remove inocache for inodes which are in read_inode() or
    clear_inode() until they're done.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 002fa30170f9500ac31fa22931c689029af7f27b
Author: Pete Popov <ppopov@pacbell.net>
Date:   Sun Feb 27 21:50:25 2005 +0000

    [MTD] Replace all the Au1x mapping drivers with a simplified single driver
    
    This driver does not have as many options but it's easier to maintain.
    And, it turns out AMD never shipped boards with different flash densities.
    
    Signed-off-by: Pete Popov <ppopov@pacbell.net>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit d30f11d22549c54e9b05d153e37d166f88a2aa43
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Wed Feb 23 19:37:11 2005 +0000

    [MTD] Use after free, found by the Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3b88775c7504dfdedd5f267cb8f02999e380222a
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Feb 22 21:56:49 2005 +0000

    [MTD] NAND: Check command timeout
    
    Check timeout while we wait for the command to finish. No worry about a
    false result. This prevents deadlocking when detecting an unknown number
    of chips and is useful for removable media too.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit dfd61294403cce7ca2263674f420c3417093cb56
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Feb 22 21:48:25 2005 +0000

    [MTD] DiskOnChip: Wait for the command to finish.
    
    Do not use the ready function here, as it might hang for ever.
    The result will show, whether the chip is there or not
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit fdf2fd52746bbffeffa19e24cb0608abc5429bc2
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Fri Feb 18 14:46:15 2005 +0000

    [MTD] Sparse fixes
    
    Fix sparse errors due to lack of address-space markers
    Updated header comments
    Small re-format of initialiser
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 49450795844daba7867cc215f17532cac2c2b284
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Fri Feb 18 14:34:54 2005 +0000

    [MTD] Fix unregister_mtd_user() public function documentation.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7685359656774e0348835f72a68e201fe0285fa9
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Fri Feb 18 11:03:48 2005 +0000

    [MTD] Update BAST driver configuration
    
    update the BAST driver config (which already supports the vr1000) to
    be selected only if the vr1000 has been configured
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 332d71f7682d860b4439e197bc0ae85867458e1b
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Feb 17 20:35:04 2005 +0000

    [MTD] Make OTP actually work.
    
    The OTP code is rather broken without this.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b81226c5d55b16a23f044d37b45e9b6909d8fbce
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Thu Feb 17 17:51:17 2005 +0000

    [JFFS2] Fix node lookup
    
    Look the ref->next_phys field instead of ->next_in_ino to determine
    if the block has more then one node.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 171650af9cd847964cf69b6bab9009631283293f
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed Feb 16 17:09:39 2005 +0000

    [MTD] NAND: Fix bad block table scan for small page devices
    
    Scan 1st and 2nd pages of SP devices for BB marker by default.
    Fix more then one page scanning in create_bbt.c.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f16407d73effc59e1e9f88e45a3dc53cacbb8264
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Feb 16 15:55:03 2005 +0000

    [MTD] Quiet unused variable warning
    
    Signed-off-by: Nioclas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0ea4a7558f3c5b894e46da4b2be120edf002a86d
Author: Kyungmin Park <kyungmin.aprk@samsung.com>
Date:   Wed Feb 16 09:39:39 2005 +0000

    [MTD] NAND: Early Manufacturer ID lookup
    
    Move manufacturer ID search to display correct ID in case of buswidth
    mismatch.
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 88ec7c50bfeb5447d96fba55021bec2a274ea021
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Feb 14 16:30:35 2005 +0000

    [MTD] Add SST 39VF1601 (MPF+) ID
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 011b2a36278cca110c70506ad85b042c2faabac2
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Feb 14 16:27:38 2005 +0000

    [MTD] Fixup probing logic for single 16bit devices
    
    The change to the generic probe to look for the
    smallest width of chip first is causing some problems
    on boards with a single 16bit device.
    
    The problem seems to be the jedec_match() is truncating
    the device-id read from the table to match against the
    one read from the hardware, causing a match against the
    partial id of some chips with 16bit IDs (such as the
    SST39LF160)
    
    This fixes things for my own board, but something may
    need to be done if the same problem is exhibited for
    chips with an 8bit ID
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit eeada24da8bd23fcf6acd2729be054ea99b301bb
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Fri Feb 11 10:14:15 2005 +0000

    [MTD] NAND: Read only OOB bytes during bad block scan
    
    When scanning NAND for bad blocks, don't read the whole page, read
    only needed OOB bytes instead. Also check the return code of the
    nand_read_raw() function. Correctly free the this->bbt array in
    case of failure. Tested with Large page NAND.
    
    Fix debugging message.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 41ce921440bd14d9b69b19fbf47d9278582739fe
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Wed Feb 9 14:50:00 2005 +0000

    [MTD] NAND: Allow operation without bad block table
    
    Small bugfix. Sometimes it may be handy not to have bbt.
    So, this->bbt might be NULL.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0040bf382c77414739c933e4d2ee35ff817d0b99
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Feb 9 12:20:00 2005 +0000

    [MTD] NAND: Skip bad block table scan on request
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 2f82ce1eb637c06dfc60f095cd1891ae0ba4894c
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Feb 9 09:24:26 2005 +0000

    [JFFS2] Use a single config option for write buffer support
    
    This patch replaces the current CONFIG_JFFS2_FS_NAND, CONFIG_JFFS2_FS_NOR_ECC
    and CONFIG_JFFS2_FS_DATAFLASH with a single configuration option -
    CONFIG_JFFS2_FS_WRITEBUFFER.
    
    The only functional change of this patch is that the slower div/mod
    calculations for SECTOR_ADDR(), PAGE_DIV() and PAGE_MOD() are now always
    used when CONFIG_JFFS2_FS_WRITEBUFFER is enabled.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8f15fd55f9bf266139b10850947e19c4e3f4e9b7
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Feb 9 09:17:45 2005 +0000

    [JFFS2] Add support for JFFS2-on-Dataflash devices.
    
    For Dataflash, can_mark_obsolete = false and the NAND write buffering
    code (wbuf.c) is used.
    
    Since the DataFlash chip will automatically erase pages when writing,
    the cleanmarkers are not needed - so cleanmarker_oob = false and
    cleanmarker_size = 0
    
    DataFlash page-sizes are not a power of two (they're multiples of 528
    bytes).  The SECTOR_ADDR macro (added in the previous core patch) is
    replaced with a (slower) div/mod version if CONFIG_JFFS2_FS_DATAFLASH is
    selected.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3be36675d41a30ed3b192f92684f1417aa0f8bfe
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Feb 9 09:09:05 2005 +0000

    [JFFS2] Core changes required to support JFFS2-on-Dataflash devices.
    
    DataFlash page-sizes are not a power of two (they're multiples of 528
    bytes).  There are a few places in JFFS2 code where sector_size is used
    as a bitmask.  A new macro (SECTOR_ADDR) was defined to calculate these
    sector addresses. For non-DataFlash devices, the original (faster)
    bitmask operation is still used.
    
    In scan.c, the EMPTY_SCAN_SIZE was a constant of 1024.
    Since this could be larger than the sector size of the DataFlash, this
    is now basically set to MIN(sector_size, 1024).
    
    Addition of a jffs2_is_writebuffered() macro.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 045e9a5d51ced27bfcbdb78071534ce6fd36b33d
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Feb 8 19:12:53 2005 +0000

    [MTD] Unabuse file-f_mode for OTP purpose
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 31f4233baeaaeb7c563d2766781c6592ad259b6a
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Feb 8 17:45:55 2005 +0000

    [MTD] User interface to Protection Registers
    
    This is implemented using a ioctl to switch the MTD char device into
    one of the different OTP "modes", at which point read/write/seek can
    operate on the selected OTP area.  Also some extra ioctls to query
    for size and lock protection segments or groups.  Some example user
    space utilities are provided.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f77814dd5728edaf1239d19755d2aa0d8c33d861
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Feb 8 17:11:19 2005 +0000

    [MTD] Support for protection register support on Intel FLASH chips
    
    This enables support for reading, writing and locking so called
    "Protection Registers" present on some flash chips.
    A subset of them are pre-programmed at the factory with a
    unique set of values. The rest is user-programmable.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 67d9e95c393d23c229836e28b262dc73d71da784
Author: Estelle Hammache <estelle.hammache@st.com>
Date:   Sat Feb 5 18:23:40 2005 +0000

    [JFFS2] Prevent deadlock during write buffer recovery
    
    Prevent deadlock when checking erased block for
    space allocation during wbuf recovery.
    
    Signed-off-by: Estelle Hammache <estelle.hammache@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 72b56a2d7dccd9ea90f34f6ddb653086a3f3bd2e
Author: Nicolas Pitre <nico@cam.org>
Date:   Sat Feb 5 02:06:19 2005 +0000

    [MTD] Add OTP basisc
    
    add structure definition for OTP region info
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 322b12eb57db8cc598ccedfb85fcf2faded08473
Author: Jonas Holmberg <jonas.holmberg@axis.com>
Date:   Fri Feb 4 07:43:13 2005 +0000

    [MTD] amd_flash: Fix chip ID clash
    
    * Removed table entry for AM29BDS643D, since device ID clashes with AM29DL640G
    and both chips support CFI.
    
    Signed-off-by: Jonas Holmberg <jonas.holmberg@axis.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8aee6ac1446d6e2cb69908facbaccc0dfb4f1145
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Feb 2 22:12:08 2005 +0000

    [JFFS2] Remove NAND dependencies for NOR FLASH
    
    make NAND code work on NOR flash again
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f29a4b86f554a496beba8d339917399b9c44fbc9
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jan 31 22:22:24 2005 +0000

    [MTD] DiskOnChip: big endian fix for NFTL devices
    
    Make NFTL devices work on big endian machines.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 39605398cd45941b4ed2026c666a1a9f39c40490
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jan 31 22:21:18 2005 +0000

    [MTD] DiskOnChip code cleanup
    
    Remove commented ugliness
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 651078ba3a9225ab3fbef146359390ac498ff9fe
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jan 31 20:36:46 2005 +0000

    [MTD] DiskOnChip use CONFIG_ options instead of random symbols
    
    Using the CONFIG_ options from KConfig seems to work better :8
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9b88f47390efb72540b050628ebc04202d91c6ec
Author: Estelle Hammache <estelle.hammache@st.com>
Date:   Fri Jan 28 18:53:05 2005 +0000

    [JFFS2] Code cleanup
    
    Code beautification and block filing correction for optimization.
    
    Signed-off-by: Estelle Hammache <estelle.hammache@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6170b43401a3230756ff76287ee07db0d75eddde
Author: Russell King <linux@arm.linux.org.uk>
Date:   Mon Jan 24 23:49:54 2005 +0000

    [MTD] Fix MTD device probing
    
    Try larger numbers of chips before smaller
    numbers of chips across the bus width.
    
    This means we'll avoid misdetecting a 2 x16 array as 1 x32 if the
    high 16-bits happen to read as zeros in the QRY area.
    
    Signed-off-by: Russell King <linux@arm.linux.org.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 3118db3dfe7c16284d1d578e628fd87639b00731
Author: Estelle Hammache <estelle.hammache@st.com>
Date:   Mon Jan 24 21:30:25 2005 +0000

    [JFFS2] Fix refile of blocks due to write failure.
    
    avoid segfault when nextblock was refiled because of a write failure
    - avoid filing blocks on the clean list when they have wasted
    space
    
    Signed-off-by: Estelle Hammache <estelle.hammache@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7f716cf3f9cc9dd420b9c75071559017812df6d2
Author: Estelle Hammache <estelle.hammache@st.com>
Date:   Mon Jan 24 21:24:18 2005 +0000

    [JFFS2] Fix block refiling
    
    - block refiling when writing directly to flash a buffer
    which is bigger than wbuf
    - retry cases for flushing wbuf
    
    Signed-off-by: Estelle Hammache <estelle.hammache@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit e4803c30d64391d84635061eaebfc7d66de9d6ab
Author: Estelle Hammache <estelle.hammache@st.com>
Date:   Mon Jan 24 21:13:42 2005 +0000

    [JFFS2] Fix write buffer retry case
    
    Correction of retry case to avoid silent failure of rmdir
    when jffs2_wbuf_recover GCs the previous entry (+ corresponding
    dnode case).
    
    Signed-off-by: Estelle Hammache <estelle.hammache@st.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ed3786a599f5639c99dfcceaef1b064ab5e2e9f9
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Mon Jan 24 20:40:15 2005 +0000

    [MTD] rtc_from4 error status check, disable virtual erase blocks
    
    Added routine to perform extra error status checks on erase and write
    failures to determine if errors are correctable.
    Added option to prevent JFFS2 from using virtual erase blocks.
    Performed minor cleanup on whitespace and comments.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 068e3c0a002c79a5e3cc7c42cb749c4bb126288c
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Mon Jan 24 03:07:46 2005 +0000

    [MTD] NAND Add optional ECC status check callback
    
    Add optional hardware specific callback routine to perform extra error
    status checks on erase and write failures for devices with hardware ECC.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 99f2a8aea18c9779c141050c6f95a8f1da63bbe4
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Mon Jan 24 00:37:04 2005 +0000

    [MTD] Platform RAM Driver
    
    Driver for generic RAM blocks which are exported by an platform_device
    from the device driver system.
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a4ab4c5d32b66a440fb2e00f975f919f559f001d
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Sun Jan 23 18:30:53 2005 +0000

    [MTD] NAND use symbols instead of literals
    
    Replace some literals with defined symbols.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7ba48c4583f7da5b05cf9859337195323df67b6d
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sun Jan 23 11:09:22 2005 +0000

    [MTD] NAND SharpSL fix default partition size
    
    Correct Poodle default partition size
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8fabed4a0f78623236c035de0984beeacb8096d8
Author: Todd Poynor <tpoynor@mvista.com>
Date:   Wed Jan 19 19:22:04 2005 +0000

    [JFFS2] Avoid warning for empty filesystems
    
    Avoid "Eep. No valid nodes for ino #1" message for just-created filesystem.
    
    Signed-off-by: Todd Poynor <tpoynor@mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 15266bb74d0156556f9541c9817b778286ffe5d6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jan 18 16:15:00 2005 +0000

    [MTD] NAND replace yield
    
    Replace yield by msleep. M.Wilcox stared at it and frowned
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6fc93d8ca7a093feb403aca4ee3cb5bda338392c
Author: Ben Dooks <ben@simtec.co.uk>
Date:   Tue Jan 18 11:13:50 2005 +0000

    [MTD] bast-flash partitions fixup
    
    Ensure the whole device is added if there are no partitions found on the
    device, so that at least the flash can be read/written.
    
    Replace some of the constants with their SZ_xxx counterparts
    
    Signed-off-by: Ben Dooks <ben@simtec.co.uk>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 97f1a087dc83cac54d740bf24888e565962b8f4d
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Mon Jan 17 19:44:39 2005 +0000

    [MTD] Renesas AG-AND device recovery
    
    Add routine to perform device recovery (deplete) procedure.
    Clean up some compiler warnings.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 30f464b74b51127b9b9a170157b75c7e8e80d2c4
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Mon Jan 17 18:35:25 2005 +0000

    [MTD] NAND workaround for AG-AND disturb issue. AG-AND recovery
    
    Added workaround for Renesas AG-AND chips "disturb" issue
    for Bad Block Table.
    Added support for the device recovery command sequence
    for Renesas AG-AND chips.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 28a48de72b876af794853593cc1412119ada9efc
Author: David A. Marlin <dmarlin@redhat.com>
Date:   Mon Jan 17 18:29:21 2005 +0000

    [MTD] NAND extended commands, badb block table autorefresh
    
    Added extended commands for AG-AND device and added
    option for BBT_AUTO_REFRESH.
    
    Signed-off-by: David A. Marlin <dmarlin@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8ea2e06fc8d2f03b49cef7732ae8e290e2f0b183
Author: Herbert Valerio Riedel <hvr@inso.tuwien.ac.at>
Date:   Mon Jan 17 13:47:24 2005 +0000

    [MTD] FTL Fix missing pointer assignment
    
    For the case that mtd partitions are enabled it would cause a 0-pointer
    dereferencing in mtdpart.c:mtd_erase_callback()
    
    Signed-off-by: Herbert Valerio Riedel <hvr@inso.tuwien.ac.at>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 14f8351a313f364afbc565f1ddcd43f8cfdccf52
Author: Josh Boyer <jdub@us.ibm.com>
Date:   Thu Jan 6 21:16:45 2005 +0000

    [MTD] slram driver cleanup
    
    Add error checks to read/write functions and add an eraseblock size.
    Makes slram a suitable device for JFFS2.
    
    Signed-off-by: Josh Boyer <jdub@us.ibm.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 67394f8f069c2fdf90f3b6d851824c07815442af
Merge: 450cbfb... 9636273...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Sat May 21 22:00:02 2005 +0100

    Merge with /usr/src/ntfs-2.6.git

commit bfb4496e7239c9132d732a65cdcf3d6a7431ad1a
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat May 21 21:08:09 2005 +0100

    AUDIT: Assign serial number to non-syscall messages
    
    Move audit_serial() into audit.c and use it to generate serial numbers
    on messages even when there is no audit context from syscall auditing.
    This allows us to disambiguate audit records when more than one is
    generated in the same millisecond.
    
    Based on a patch by Steve Grubb after he observed the problem.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 791be9b976ba621b21745c30a7fca225fada9110
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat May 21 18:16:44 2005 +0100

    [PATCH] ARM SMP: add IPI support
    
    Add support for inter-processor interrupts to the main IRQ
    handling code.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 706fdd9faaad5bd52c774190a54c0fd1dfc0f418
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat May 21 18:15:45 2005 +0100

    [PATCH] ARM SMP: reallocate main IRQ handler code registers
    
    By changing r9 -> r8 and r8 to 'tsk' (r9) we are able to remove
    one instruction from the preempt path.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 187a51ad11351b009abab688fb7f6d6f3210a45f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat May 21 18:14:44 2005 +0100

    [PATCH] ARM SMP: consolidate main IRQ handler code
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 7b5d781ce1f19fb7382d3d3fb7af48e429bed12d
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat May 21 16:52:57 2005 +0100

    Fix oops due to thinko in avc_audit()
    
    When I added the logging of pid= and comm= back to avc_audit() I
    screwed it up. Put it back how it should be.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 326e9c8ba6a149f47e020719b23b24a14ba740d6
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Sat May 21 00:22:31 2005 +0100

    AUDIT: Fix inconsistent use of loginuid vs. auid, signed vs. unsigned
    
    The attached patch changes all occurrences of loginuid to auid. It also
    changes everything to %u that is an unsigned type.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 05474106a41f44d16d649bc8c7687fc24ce4370a
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Sat May 21 00:18:37 2005 +0100

    AUDIT: Fix AVC_USER message passing.
    
    The original AVC_USER message wasn't consolidated with the new range of
    user messages. The attached patch fixes the kernel so the old messages
    work again.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 011161051bbc25f7f8b7df059dbd934c534443f0
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sat May 21 00:15:52 2005 +0100

    AUDIT: Avoid sleeping function in SElinux AVC audit.
    
    This patch changes the SELinux AVC to defer logging of paths to the audit
    framework upon syscall exit, by saving a reference to the (dentry,vfsmount)
    pair in an auxiliary audit item on the current audit context for processing
    by audit_log_exit.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7c00ffa314bf0fb0e23858bbebad33b48b6abbb9
Author: Mark Haverkamp  <markh@osdl.org>
Date:   Mon May 16 18:28:42 2005 -0700

    [SCSI] 2.6 aacraid: Variable FIB size (updated patch)
    
    New code from the Adaptec driver.  Performance enhancement for newer
    adapters.  I hope that this isn't too big for a single patch.  I believe
    that other than the few small cleanups mentioned, that the changes are
    all related.
    
    - Added Variable FIB size negotiation for new adapters.
    - Added support to maximize scatter gather tables and thus permit
      requests larger than 64KB/each.
    - Limit Scatter Gather to 34 elements for ROMB platforms.
    - aac_printf is only enabled with AAC_QUIRK_34SG
    - Large FIB ioctl support
    - some minor cleanup
    
    Passes sparse check.
    I have tested it on x86 and ppc64 machines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 672b2d38da4fff4c4452685a25fb88b65243d1a6
Author: Ju, Seokmann  <sju@lsil.com>
Date:   Mon May 16 18:32:17 2005 -0400

    [SCSI] megaraid version 2.20.4.6
    
    Signed-off by: Seokmann Ju <sju@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7e8a226147eec1a874ed371832bc0b0e11fdfd19
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Wed May 11 17:37:43 2005 -0600

    [SCSI] fusion - bump driver version to 3.03.02
    
    Bump driver version to 3.03.02
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c1a71d1c0440c47e006845f8accc1f212ca86852
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Wed May 11 17:37:38 2005 -0600

    [SCSI] fusion - mpi headers version 1.5.9
    
    This patch contains update for mpi headers 1.5.9.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 51bbc9c3e85598ffe72caf99f88db767952f2a57
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Wed May 11 17:37:29 2005 -0600

    [SCSI] fusion-kconfig-cleanup
    
    * This patch clarifies help section in FUSION_MAX_SGE entry.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d485eb830576eef911727b1347402e9a708998a2
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Wed May 11 17:37:26 2005 -0600

    [SCSI] fusion-kfree-cleanup
    
    This patch is originally From: Jesper Juhl <juhl-lkml@dif.dk>
    
    This patch gets rid of redundant NULL checks prior to calling kfree() in
    drivers/message/* There are also a few small whitespace changes in there.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3fadc59d603caf70e7a5295158e4f6eb06dffb8f
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Wed May 11 17:46:52 2005 -0600

    [SCSI] fusion - Adding pci recog support for Fibre 949X and 939X chips
    
    * adding pci id support for new Fibre chips, 949X and 939X
    * adding errata workaround - disabling PIO access except during fwdlb.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 793698ce28e20f4736250a9766270368beae5668
Author: Patrick Mansfield  <patmans@us.ibm.com>
Date:   Mon May 16 17:42:15 2005 -0700

    [SCSI] saved and restore result for timed out commands
    
    Save and restore the scmd->result, so that timed out commands do not
    return the result of the TEST UNIT READY or the start/stop commands. Code
    is already in place to save and restore the result for the request sense
    case.
    
    The previous version of this patch erroneously removed the "if" check,
    instead add a comment as to why the "if" is needed.
    
    Signed-off-by: Patrick Mansfield <patmans@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ad34ea2cc3845ef4dcd7d12fb0fa8484734bd672
Merge: 90356ac... 88d7bd8...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Fri May 20 15:27:44 2005 -0500

    merge by hand - fix up rejections in Documentation/DocBook/Makefile

commit 90356ac3194bf91a441a5f9c3067af386ef62462
Author: Christoph Hellwig  <hch@lst.de>
Date:   Sun May 15 17:20:56 2005 +0200

    [SCSI] remove Documentation/DocBook/scsidrivers.tmpl
    
    This document is rather rudimentary and totally outdated.  Fortunately
    Documentation/scsi/scsi_mid_low_api.txt replaces it quite nicely.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d8c37e7b9a619855e05d5d4e56c68f799b1f539c
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sat May 14 00:46:08 2005 +0900

    [SCSI] remove a timer race in scsi_queue_insert()
    
    scsi_queue_insert() has four callers.  Three callers call with
    timer disabled and one (the second invocation in
    scsi_dispatch_cmd()) calls with timer activated.
    scsi_queue_insert() used to always call scsi_delete_timer()
    and ignore the return value.  This results in race with timer
    expiration.  Remove scsi_delete_timer() call from
    scsi_queue_insert() and make the caller delete timer and check
    the return value.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5b8ef8425898e957243053c26ac2b68bd4bc42ec
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sat May 14 00:46:18 2005 +0900

    [SCSI] remove spurious if tests from scsi_eh_{times_out|done}
    
    'if' tests which check if eh_action isn't NULL in both
    functions are always true.  Remove the redundant if's as it
    can give wrong impressions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0155a37ea5459f5bf1113c6fa519f943ef77d730
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sat May 14 00:46:13 2005 +0900

    [SCSI] remove unnecessary scsi_delete_timer() call in scsi_reset_provider()
    
    scsi_reset_provider() calls scsi_delete_timer() on exit which
    isn't necessary.  Remove it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 21feb5ccd5d054b8a17fe86b1b5df1e16809df64
Author: Gerd Knorr  <kraxel@bytesex.org>
Date:   Thu May 12 10:25:26 2005 +0200

    [SCSI] convert scsi changer driver from class simple
    
    Here is a incremental patch which switches the driver over to
    the new non-simple functions.  Compile-tested.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit daa6eda65a53e5addf86c6bc829129ff51b08bda
Author: Gerd Knorr  <kraxel@bytesex.org>
Date:   Tue May 10 10:59:13 2005 +0200

    [SCSI] add scsi changer driver
    
    This patch adds a device driver for scsi media changer devices.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5cbf5eaef7e4430f60844748fd33e22a5fb15167
Author: Brian King <brking@us.ibm.com>
Date:   Mon May 2 19:50:47 2005 -0500

    [SCSI] ipr: Fix ipr PCI hotplug hang with CDROM attach
    
    Currently, during PCI hotplug remove, if the upper layer
    drivers of the attached devices send commands down as part
    of the remove action, like a CDROM, the hotplug action
    will hang forever due to the ipr driver returning
    SCSI_MLQUEUE_HOST_BUSY. Patch fixes this.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 380c3877ae5de888cfb7a59990b9aee5a415295f
Author: Adrian Bunk  <bunk@stusta.de>
Date:   Mon May 2 01:47:10 2005 +0200

    [SCSI] drivers/scsi/sym53c416.c: fix a wrong check
    
    The Coverity checker found that this for loop was wrong.
    
    This patch changes it to what seems to be intended.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 16c4b3e2071ad73e5cd2aa82961eed0414df6a7d
Author: Kai Makisara  <Kai.Makisara@kolumbus.fi>
Date:   Sun May 1 18:11:55 2005 +0300

    [SCSI] SCSI tape: fix permissions for SG_IO, etc.
    
    This patch is against 2.6.12-rc3 + linus-patch from April 30. The patch
    contains the following fixes:
    
    - CAP_SYS_RAWIO is used instead of CAP_SYS_ADMIN; fix from Alan Cox
    - only direct sending of SCSI commands requires this permission
    - the st status is modified is successful unload is performed using
      SCSI_IOCTL_STOP_UNIT
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f80ed139343c37c897ae89c70f7736a6937172f5
Author: Brian King <brking@us.ibm.com>
Date:   Mon May 2 19:51:06 2005 -0500

    [SCSI] ipr: Driver version 2.0.14
    
    Bump driver version
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1b69f645f224d9bab7fd5988aca818c9445f11d0
Author: Brian King <brking@us.ibm.com>
Date:   Mon May 2 19:50:59 2005 -0500

    [SCSI] ipr: Array error logging fix
    
    Bugme 4547. The following patch fixes a bug in ipr's error logging.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7d0e11fb20b08790c71f5336b493662f952641c9
Author: Jeremy Higdon  <jeremy@sgi.com>
Date:   Sun May 1 05:18:48 2005 -0700

    [SCSI] qla1280.c - fix result for device Busy and Queue Full
    
    I discovered that the qla1280 driver does not send the correct status
    to the midlayer when it gets Queue Full or Busy from a device.
    
    Signed-off-by: Jeremy Higdon <jeremy@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d335cc38c75e28407455463444b912b09c92daec
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Sat Apr 30 17:09:38 2005 -0500

    [SCSI] mptfusion: fix panic loading driver statically compiled
    
    
    Adjust link ordering in the Makefile.  Also, the ioc->DoneCtx handles
    for mptspi/mptfc in the message frame.  And I'm now not seeing the
    panic.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4e33bd874bce8b3df2ab52538db59730196383c3
Author: James Bottomley  <jejb@mulgrave.(none)>
Date:   Sat Apr 30 17:05:20 2005 -0500

    [SCSI] ultrastor: fix compile failure
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 93fc4294fc112ce4e518a3f62dea8681dc39d9cf
Author: Al Viro  <viro@www.linux.org.uk>
Date:   Wed Apr 27 06:05:56 2005 -0700

    [SCSI] qla trivial iomem annotation
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 56b5871223f66d4a34e6e1069f241077e9f0a154
Author: Mark Haverkamp  <markh@osdl.org>
Date:   Wed Apr 27 06:05:51 2005 -0700

    [SCSI] aacraid: remove sparse warnings
    
    This patch addresses the sparse -Wbitwise warnings that Christoph wanted
    me to eliminate.  This mostly consisted of making data structure
    elements of hardware associated structures the __le* equivalent.
    Although there were a couple places where there was mixing of cpu and le
    variable math.  These changes have been tested on both an x86 and ppc
    machine running bonnie++.  The usage of the LE32_ALL_ONES macro has been
    eliminated.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c2fb3f38e250dd3b88612435869acf92b4f51e2
Author: Benoit Boissinot  <benoit.boissinot@ens-lyon.org>
Date:   Mon Apr 25 19:46:48 2005 -0700

    [SCSI] drivers/scsi/dpt_i2o.c: fix compile warnings
    
    This patch fixes the following warnings:
    
    drivers/scsi/dpt_i2o.c: In function adpt_isr:
    drivers/scsi/dpt_i2o.c:2030: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2031: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2042: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2043: warning: passing argument 2 of writel makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2046: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2048: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2055: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2062: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2069: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c: In function adpt_i2o_to_scsi: drivers/scsi/dpt_i2o.c:2239: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2243: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2248: warning: passing argument 1 of readl makes pointer from integer without a cast
    drivers/scsi/dpt_i2o.c:2259: warning: passing argument 1 of readl makes pointer from integer without a cast
    
    It define variables which are only used with a type of 'void __iomem *'
    with this type instead of the incorrect 'unsigned long' type.
    It also remove pointless casts.
    
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 23a2bc2289ad3bbc41093c2b50a9c17b37b4d73d
Author: Benoit Boissinot  <benoit.boissinot@ens-lyon.org>
Date:   Mon Apr 25 19:46:30 2005 -0700

    [SCSI] drivers/scsi/dpt_i2o.c: cleanup useless code
    
    This patch removes the array 'hbas' as it seems to be useless
    and redundant with the linked list hbas_chain.
    
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4833869e6e6c2315e301c256e393dfb949c10076
Author: Adrian Bunk  <bunk@stusta.de>
Date:   Mon Apr 25 19:45:58 2005 -0700

    [SCSI] drivers/scsi/aacraid/: make some functions static
    
    This patch makes some needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 47b5d69c4aa753fcfc9b2b8d28c0660a1e25c129
Author: James Bottomley  <jejb@mulgrave.(none)>
Date:   Sun Apr 24 02:38:05 2005 -0500

    [SCSI] drivers/scsi/FlashPoint.c: cleanups
    
    From: Adrian Bunk <bunk@stusta.de>
    
    This patch contains cleanups including the following:
    - remove #ifdef'ed code for other OS's
    - remove other unused code
    - make needlessly global code static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7dfaa5f40da87e85b3883b102bbf1bf3f3b42534
Author: Adrian Bunk  <bunk@stusta.de>
Date:   Sun Apr 24 02:34:29 2005 -0500

    [SCSI] drivers/scsi/NCR53C9x.c: make a struct static
    
    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 420b4a73de8e36f0da486056189da66b0a164398
Author: Adrian Bunk  <bunk@stusta.de>
Date:   Sun Apr 24 02:34:17 2005 -0500

    [SCSI] drivers/scsi/atp870u.c: make a function static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a1bf9d1d9272708922e83e465104106131f6415f
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sun Apr 24 02:08:52 2005 -0500

    [SCSI] make scsi_queue_insert() use blk_requeue_request()
    
    scsi_queue_insert() used to use blk_insert_request() for requeueing
    requests.  This depends on the unobvious behavior of
    blk_insert_request() setting REQ_SPECIAL and REQ_SOFTBARRIER when
    requeueing.  This patch makes scsi_queue_insert() use
    blk_requeue_request().  As REQ_SPECIAL means special requests and
    REQ_SOFTBARRIER is automatically handled by blk layer now, no flag
    needs to be set.
    
    Note that scsi_queue_insert() now calls scsi_run_queue() itself, and
    the prototype of the function is added right above
    scsi_queue_insert().  This is temporary, as later requeue path
    consolidation patchset removes scsi_queue_insert().  By adding
    temporary prototype, we can do away with unnecessarily moving
    functions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 283369ccc26705bd9585a0e533c92bd7364c28d1
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sun Apr 24 02:06:36 2005 -0500

    [SCSI] make scsi_requeue_request() use blk_requeue_request()
    
    scsi_requeue_request() used to use blk_insert_request() for requeueing
    requests.  This depends on the unobvious behavior of
    blk_insert_request() setting REQ_SPECIAL and REQ_SOFTBARRIER when
    requeueing.  This patch makes scsi_queue_insert() use
    blk_requeue_request().  As REQ_SPECIAL means special requests and
    REQ_SOFTBARRIER is automatically handled by blk layer now, no flag
    needs to be set.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 867d1191fca388a79e4bb500dd85a9e871c96b99
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sun Apr 24 02:06:05 2005 -0500

    [SCSI] remove requeue feature from blk_insert_request()
    
    blk_insert_request() has a unobivous feature of requeuing a
    request setting REQ_SPECIAL|REQ_SOFTBARRIER.  SCSI midlayer
    was the only user and as previous patches removed the usage,
    remove the feature from blk_insert_request().  Only special
    requests should be queued with blk_insert_request().  All
    requeueing should go through blk_requeue_request().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit beb6617d994161a6b12c5f69afc6fb154f085447
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sun Apr 24 02:04:53 2005 -0500

    [SCSI] remove REQ_SPECIAL in scsi_init_io()
    
    scsi_init_io() used to set REQ_SPECIAL when it fails sg
    allocation before requeueing the request by returning
    BLKPREP_DEFER.  REQ_SPECIAL is being updated to mean special
    requests.  So, remove REQ_SPECIAL setting.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2e759cd4fa60c6df4cb117848274f444c2c0a12d
Author: Tejun Heo  <htejun@gmail.com>
Date:   Sun Apr 24 02:04:21 2005 -0500

    [SCSI] make blk layer set REQ_SOFTBARRIER on defer and requeue
    
    This is the reworked version of the patch.  It sets REQ_SOFTBARRIER
    in two places - in elv_next_request() on BLKPREP_DEFER and in
    blk_requeue_request().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 354d6b2196c8e53e55e8f169804256ab9c72731d
Author: Andrew Vasquez  <andrew.vasquez@qlogic.com>
Date:   Sat Apr 23 02:47:27 2005 -0400

    [SCSI] remove some dead code in qla2xxx
    
    Original from: Christoph Hellwig <hch@lst.de>
    
    Modified and
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b86fff7368b139171edab66972ea1309092f519e
Author: James Bottomley  <jejb@mulgrave.(none)>
Date:   Sat Apr 23 02:45:48 2005 -0400

    [SCSI] mptfusion: correct Kconfig problem
    
    The fusion Kconfig forgets to set CONFIG_FUSION, which is required to
    get the upper makefile to descend into the fusion directory.  Add this
    back as a variable and make the two upper level modules select it.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2496af3945bdcc5fe774b8220a415086a47f40a0
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:02:41 2005 -0400

    [SCSI] mptfusion: mptfc Adding Stub Driver - Fiber Channel
    
    (1) mptfc.c: This driver is having module_init, module_exit, and probe.
    (2) mptfc.c: Registering for Fibre Channel pci ids are done from this
    module.
    (3) mptfc.c: Convert MODULE_PARM to module_param
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 243eabcf6b9ab86ec1bc44c2bbb1ee9766481d16
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:02:25 2005 -0400

    [SCSI] mptfusion: mptspi Adding Stub Driver - SCSI Parallel
    
    (1) mptspi.c: This driver is having module_init, module_exit, and probe.
    (2) mptspi.c: Registering for SCSI pci ids are done from this module.
    (3) mptspi.c: Convert MODULE_PARM to module_param
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0d0c79747e362ff54adc6418d2990d49cad9395d
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:02:09 2005 -0400

    [SCSI] mptfusion: mptscsih Split driver support
    
    (1) mptscsih.c: Remove credits, -sralston references , update copyright
    (2) mptscsih.c: split driver support
    (3) mptscsih.c: module_init, module_exit, and probe routines moved to new
    stub drivers, mptfc and mptspi
    (4) mptscsih.c: some global parameters are moved to MPT_SCSI_HOST
    (5) mptscsih.c: removed scsi_device_online check.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 748b77b1908efac1328d1125563b2fc0184df8a7
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:01:52 2005 -0400

    [SCSI] mptfusion: mptlan Remove credits and update copyright
    
    (1) mptlan.c: Remove credits and update copyright
    (2) mptlan.c: Remove -sralston references
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b6fe4ddcf787026e5ae9105ce63e0f35f489a768
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:01:34 2005 -0400

    [SCSI] mptfusion: mptctl Remove credits and update copyright
    
    (1) mptctl.c: Remove credits and update copyright
    (2) mptctl.c: cleanup in get_iocinfo
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7fadc87e5c3dd96a36cd9b9500d2ccff39048dd4
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:01:16 2005 -0400

    [SCSI] mptfusion: mptbase cleanup, split driver support, DMA 32_BIT_MASK
    
    (1) mptbase.c: Move registering pci ids to scsi lld drivers
    (2) mptbase.c: Use the DMA_32BIT_MASK constant
    (3) mptbase.c: Fix for multiple pci domains
    (4) mptbase.c: Remove le32 conversion from BlockSize, which was u8 size
    (5) mptbase.c: Remove credits, -sralston references , update copyright
    (6) mptbase.c: split driver support
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5f5affddad836978f057d316ba8083a5d553773c
Author: Moore, Eric Dean  <Eric.Moore@lsil.com>
Date:   Fri Apr 22 18:00:52 2005 -0400

    [SCSI] mptfusion: Kconfig Adding new bus type drivers for fusion drivers.
    
    (1) Kconfig - added new mptspi and mptfc scsi lld drivers
    (2) Kconfig - increased MAX_SGE from 40 to 128
    (2) Makefile - compilation support for split drivers
    (3) Makefile - cleaned up debug defines; e.g. removed obsolete, added others
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 099175c94a221fa2723b7273883c98cd32efe900
Author: James Bottomley  <jejb@mulgrave.(none)>
Date:   Thu Apr 21 22:50:33 2005 -0400

    [SCSI] remove PCI2000 and PCI2220i drivers
    
    From: Christoph Hellwig <hch@lst.de>
    
    Both drivers are marked broken and haven't compiled since very early
    2.5.x.  And they're for IDE hardware so they shouldn't have been
    written to the SCSI layer at all.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 608648cb40f01c337be69f965cf7740f8189c31c
Author: James Bottomley  <jejb@mulgrave.(none)>
Date:   Thu Apr 21 21:46:50 2005 -0400

    [SCSI] qla1280: update firmware
    
    Update SCSI firmware images:
    
            ql1040_fw.h:
                    - *     Firmware Version 7.65.00 (14:17 Jul 20, 1999)
                    + *     Firmware Version 7.65.06 (14:38 Jan 07, 2002)
    
            ql1280_fw.h:
                    - *     Firmware Version 8.15.00 (14:35 Aug 22, 2000)
                    + *     Firmware Version 8.15.11 (10:20 Jan 02, 2002)
    
            ql12160_fw.h:
                    - *     Firmware Version 10.04.32 (12:03 May 09, 2001)
                    + *     Firmware Version 10.04.42 (15:44 Apr 18, 2003)
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fb19b4c6aa024837a0071f07baa07dbf49d07151
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 19 14:55:56 2005 +0100

    AUDIT: Honour audit_backlog_limit again.
    
    The limit on the number of outstanding audit messages was inadvertently
    removed with the switch to queuing skbs directly for sending by a kernel
    thread. Put it back again.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7063e6c717f6108c4b3fc3135a516c86ef944870
Merge: 7ca0026... 05d3794...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 19 11:54:00 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 7ca0026495dbb644b4e32ede76be44072cb2bc7a
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 19 11:23:13 2005 +0100

    AUDIT: Quis Custodiet Ipsos Custodes?
    
    Nobody does. Really, it gets very silly if auditd is recording its
    own actions.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cd77b8212d5473b800ac865364981d334ff564ea
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 19 11:18:24 2005 +0100

    Restore logging of pid= and comm= in AVC audit messages
    
    We turned this all off because the 'exe=' was causing deadlocks on
    dcache_lock. There's no need to leave the pid and comm out though.
    They'll all be logged correctly if full auditing is enabled, but we
    should still print them in case auditing _isn't_ enabled.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b7d1125817c9a46cc46f57db89d9c195e7af22f8
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 19 10:56:58 2005 +0100

    AUDIT: Send netlink messages from a separate kernel thread
    
    netlink_unicast() will attempt to reallocate and will free messages if
    the socket's rcvbuf limit is reached unless we give it an infinite
    timeout. So do that, from a kernel thread which is dedicated to spewing
    stuff up the netlink socket.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 168b7173959f80d20720dd1f7ec909a88ef2689d
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Thu May 19 10:24:22 2005 +0100

    AUDIT: Clean up logging of untrusted strings
    
    * If vsnprintf returns -1, it will mess up the sk buffer space accounting.
    This is fixed by not calling skb_put with bogus len values.
    
    * audit_log_hex was a loop that called audit_log_vformat with %02X for each
    character. This is very inefficient since conversion from unsigned character
    to Ascii representation is essentially masking, shifting, and byte lookups.
    Also, the length of the converted string is well known - it's twice the
    original. Fixed by rewriting the function.
    
    * audit_log_untrustedstring had no comments. This makes it hard for
    someone to understand what the string format will be.
    
    * audit_log_d_path was never fixed to use untrustedstring. This could mess
    up user space parsers. This was fixed to make a temp buffer, call d_path,
    and log temp buffer using untrustedstring.
    
    From: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 209aba03243ee42a22f8df8d08aa9963f62aec64
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed May 18 10:21:07 2005 +0100

    AUDIT: Treat all user messages identically.
    
    It's silly to have to add explicit entries for new userspace messages
    as we invent them. Just treat all messages in the user range the same.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 325a479c4c110db278ef3361460a48c4093252cc
Merge: ebcc80c... 7f9eaed...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 17 15:53:14 2005 -0700

    Merge with temp tree to get David's gdb inferior calls patch

commit 7f9eaedf894dbaa08c157832e9a6c9c03ffed1ed
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Tue May 10 12:49:00 2005 -0700

    [IA64] Fix convert_to_non_syscall() so gdb inferior calls work again
    
    Fix convert_to_non_syscall() so it arranges for the kernel to be left
    via ia64_leave_kernel() rather than ia64_leave_syscall().  The latter
    no longer tolerates being called with pSys=0 and pNonSys=1.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3ec3b2fba526ead2fa3f3d7c91924f39a0733749
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 17 12:08:48 2005 +0100

    AUDIT: Capture sys_socketcall arguments and sockaddrs
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 69887ac1dcb79dfc773dabac2dd081fa6d6e2573
Merge: 5e014b1... 118326e...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 17 12:04:46 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4638aef40ba9ebb9734caeed1f373c24015259fd
Author: Yum Rayan <yum.rayan@gmail.com>
Date:   Thu May 5 15:14:10 2005 -0700

    [PATCH] smc91c92_cs: Reduce stack usage in smc91c92_event()
    
    This patch reduces the stack usage of the function smc91c92_event() in
    smc91c92_cs driver from 3540 to 132.  Currently this is the highest stack
    user in linux-2.6.12-rc2-mm3.  I used a patched version of gcc 3.4.3 on
    i386 with -fno-unit-at-a-time disabled.
    
    The patch has only been compile tested.
    
    Acked-by: Jorn Engel <joern@wohnheim.fh-wedel.de>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Yum Rayan <yum.rayan@gmail.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit b3dd65f958354226275522b5a64157834bdc5415
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Thu Apr 21 15:57:25 2005 +0200

    [PATCH] Generic HDLC update
    
    The attached patch updates generic HDLC to version 1.18.
    FR Cisco LMI production-tested. Please apply to Linux 2.6. Thanks.
    
    Changes:
    - doc updates
    - added Cisco LMI support to Frame-Relay code
    - cleaned hdlc_fr.c a bit, removed some orphaned #defines etc.
    - fixed a problem with non-functional LMI in FR DCE mode.
    - changed diagnostic messages to better conform to FR standards
    - all protocols: information about carrier changes (DCD line) is now
      printed to kernel logs.
    
    Signed-Off-By: Krzysztof Halasa <khc@pm.waw.pl>

commit 99417769bae55d34348320d7a05615e8a891fd3d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] pcnet_cs cleanup
    
    	killed abuse of ->rmem_end
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 507ef165e8bc078e877db293a5e3048e692491fb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] etherh iomem annotations
    
    	the usual
    echo Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 0b2d7fea1c3893c3790e0b89c310ec1321f1b8c0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] skge 64bit portability
    
    	ptrdiff_t is %td, not %d
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 4075400b8b2b279df1c2be38edb95ace7f75d772
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] skge missing include
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 54d06c3184f416b8244816f3c1d3abb55e99d909
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 15:14:14 2005 -0700

    [PATCH] remove drivers/net/skfp/lnkstat.c
    
    This patch removes a file that seems to be used only on AIX (sic).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit a1365275e745bb0a173c918a52bcdfa6ce122f7e
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Thu May 5 15:14:15 2005 -0700

    [PATCH] DM9000 network driver
    
    This patch adds support for the davicom dm9000 network driver.  The dm9000
    is found on some embedded arm boards such as the pimx1 or the scb9328.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    
    diff -puN /dev/null drivers/net/dm9000.c

commit 84d8a2fb56b1d3c915591a2c1aa321b783c7d00f
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat May 14 17:30:22 2005 +0200

    [PATCH] orinoco: misc fixes
    
    small fixes from CVS that didn't fit elsewhere
    
    Index: linux-2.6/drivers/net/wireless/orinoco.c
    ===================================================================

commit ad8f451b41b3c3438ec4eef15527972bebd854eb
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat May 14 17:30:17 2005 +0200

    [PATCH] orinoco: make orinoco_stop() static
    
    Patch from Pavel Roskin
    
    Index: linux-2.6/drivers/net/wireless/orinoco.c
    ===================================================================

commit 649e59e6ab7817bf1c556b1898356c1a17aa2650
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat May 14 17:30:10 2005 +0200

    [PATCH] orinoco: Symbol 3.0x firmware needs broken_disableport
    
    Patch from Pavel Roskin.
    
    Index: linux-2.6/drivers/net/wireless/orinoco.c
    ===================================================================

commit 8551cb980086eb9952387a9f135d6f96af3b82ee
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat May 14 17:30:04 2005 +0200

    [PATCH] orinoco: disconnect the network device on reset errors
    
    Patch from Pavel Roskin
    
    Index: linux-2.6/drivers/net/wireless/orinoco.c
    ===================================================================

commit d0e3e87ff4516d1b9d7bc6734a99168838f79635
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat May 14 17:29:58 2005 +0200

    [PATCH] orinoco: fix setting of 32 character ESSIDs
    
    Patch from Thomas Schulz
    
    Index: linux-2.6/drivers/net/wireless/orinoco.c
    ===================================================================

commit 5e014b10ef8477c32a939a48fa02aedcad35a226
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri May 13 18:50:33 2005 +0100

    AUDIT: fix max_t thinko.
    
    Der... if you use max_t it helps if you give it a type.
    
    Note to self: Always just apply the tested patches, don't try to port
    them by hand. You're not clever enough.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 23f32d18aa589e228c5a9e12e0d0c67c9b5bcdce
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri May 13 18:35:15 2005 +0100

    AUDIT: Fix some spelling errors
    
    I'm going through the kernel code and have a patch that corrects
    several spelling errors in comments.
    
    From: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c04049939f88b29e235d2da217bce6e8ead44f32
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri May 13 18:17:42 2005 +0100

    AUDIT: Add message types to audit records
    
    This patch adds more messages types to the audit subsystem so that audit
    analysis is quicker, intuitive, and more useful.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    ---
    I forgot one type in the big patch. I need to add one for user space
    originating SE Linux avc messages. This is used by dbus and nscd.
    
    -Steve
    ---
    Updated to 2.6.12-rc4-mm1.
    -dwmw2
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9ea74f0655412d0fbd12bf9adb6c14c8fe707a42
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri May 13 16:35:19 2005 +0100

    AUDIT: Round up audit skb expansion to AUDIT_BUFSIZ.
    
    Otherwise, we will be repeatedly reallocating, even if we're only
    adding a few bytes at a time. Pointed out by Steve Grubb.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5aa83a4c0a1568257ff7e249d39af64f75978b97
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 12 22:27:35 2005 -0400

      [PATCH] remove two obsolete net drivers
    
      The options FMV18X and SK_G16 do depend on the non-available
      CONFIG_OBSOLETE even in kernel 2.4 - IOW, the last time it was able to
      select them was in kernel 2.2 (or even before).
    
      Since it seems noone misses these drivers, this patch removes them.
    
      Signed-off-by: Adrian Bunk <bunk@stusta.de>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f3f1546dbed9efe8ac04fe5069772834ae379e16
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 12 22:25:14 2005 -0400

      [PATCH] drivers/net/tulip/dmfe.c: remove a check after use
    
      This patch removes a NULL check that was useles because it happened
      after the first dereference of the variable.
    
      Signed-off-by: Adrian Bunk <bunk@stusta.de>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 725c0f922f04e5a3a7d2ba66dbc10b8e20000712
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 12 22:24:39 2005 -0400

      [PATCH] drivers/net/smc-mca.c: cleanups
    
      This patch contains the following cleanups:
      - make a needlessly global function static
      - make three needlessly global structs static const
    
      Since after moving the now-static stucts to smc-mca.c the file smc-mca.h
      was empty except for two #define's, I've also killed the rest of
      smc-mca.h .
    
      Signed-off-by: Adrian Bunk <bunk@stusta.de>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 01e5abc24a67d7d619b448428782df21880fdce6
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu May 12 22:23:29 2005 -0400

      [PATCH] ixgb: Add MODULE_VERSION
    
      Add MODULE_VERSION entry.
    
      Signed-off-by: John W. Linville <linville@tuxdriver.com>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 31c27f7334b7fb8b63c862f7d22600324da844ab
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 12 22:22:36 2005 -0400

      [PATCH] drivers/net/myri_code.h cleanup
    
      From: Domen Puncer <domen@coderock.org>
    
      Replace
    
            static unsigned char lanai4_data[20472] __initdata = {
                    <thousands of 0x00's>
            }
    
      with
    
            static unsigned char lanai4_data[20472] __initdata = { };
    
      Signed-off-by: Domen Puncer <domen@coderock.org>
      Signed-off-by: Andrew Morton <akpm@osdl.org>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c56943e655b0778d3a8517ae165ad4db15557b97
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 12 22:21:51 2005 -0400

      [PATCH] net/3c505: replace schedule_timeout() with msleep()
    
      Use msleep() instead of schedule_timeout()
      to guarantee the task delays as expected.
    
      Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
      Acked-by: Phil Blundell <pb@nexus.co.uk>
      Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
      Signed-off-by: Domen Puncer <domen@coderock.org>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 10a87fcf40ce8cee1e85d936cd6d7662943c804e
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 12 22:20:53 2005 -0400

      [PATCH] drivers/net/tulip/winbond-840: Use the DMA_32BIT_MASK constant
    
      The previous patch did not compile cleanly on all architectures so
      here's a fixed one.
    
      Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
      pci_set_dma_mask() or pci_set_consistent_dma_mask()
    
      Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cb199d42e18466e471fa46dc53413402a4ae93e7
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 12 22:20:19 2005 -0400

      [PATCH] drivers/net/tulip/dmfe: Use the DMA_32BIT_MASK constant
    
      The previous patch did not compile cleanly on all architectures so
      here's a fixed one.
    
      Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
      pci_set_dma_mask() or pci_set_consistent_dma_mask()
    
      Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8662d061719a202e8196a19c1043ce271318d31b
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu May 12 22:19:39 2005 -0400

      [PATCH] drivers/net/8139cp: Use the DMA_{64, 32}BIT_MASK constants
    
      The previous patch did not compile cleanly on all architectures so
      here's a fixed one.
    
      Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
      pci_set_dma_mask() or pci_set_consistent_dma_mask()
    
      Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fff9cfd99c0f88645c3f50d7476d6c8cef99f140
Author: JT <jt@hpl.hp.com>
Date:   Thu May 12 20:24:19 2005 -0400

      [PATCH] Wireless Extensions 18 (aka WPA)
    
            This is version 18 of the Wireless Extensions. The main change
      is that it adds all the necessary APIs for WPA and WPA2 support. This
      work was entirely done by Jouni Malinen, so let's thank him for both
      his hard work and deep expertise on the subject ;-)
            This APIs obviously doesn't do much by itself and works in
      concert with driver support (Jouni already sent you the HostAP
      changes) and userspace (Jouni is updating wpa_supplicant). This is
      also orthogonal with the ongoing work on in-kernel IEEE support (but
      potentially useful).
            The patch is attached, tested with 2.6.11. Normally, I would
      ask you to push that directly in the kernel (99% of the patch has been
      on my web page for ages and it does not affect non-WPA stuff), but
      Jouni convinced me that it should bake a few weeks in wireless-2.6
      first, so that other driver maintainers can get up to speed with it.
    
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit eb1d6988130d5f2716ba1d53197caab0fdc31b94
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu May 12 20:19:09 2005 -0400

      [PATCH] smc91x warning fix
    
      A few IO addr type conversions were missing.
    
      Signed-off-by: Nicolas Pitre <nico@cam.org>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 53155109b6ac611d9bb4a4ef9d3109b219b8d0e1
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu May 12 20:18:19 2005 -0400

      [PATCH] smc91x addr config check
    
      The PAGE_SIZE mask is indeed confusing.  Use the exact mask for
      this context which has nothing to do with memory pages at all.
      Also cast to int since the value to compare with is an int.
    
      Signed-off-by: Nicolas Pitre <nico@cam.org>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fdecea66687d76c7d19be6559586df5c51023d11
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 12 20:16:24 2005 -0400

      [netdrvr starfire] Add GPL'd firmware, remove compat code
    
      Contributed by Ion Badulescu <ionut@badula.org>,
      further fixed up by me.

commit baef58b1b09ac0e9339e021144b921560482c8bd
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 12 20:14:36 2005 -0400

    [netdrvr] new driver skge, for SysKonnect cards

commit b1fc5505e0dbcc3fd7c75bfe6bee39ec50080963
Author: Herbert <herbert@gondor.apana.org.au>
Date:   Thu May 12 20:11:55 2005 -0400

    [netdrvr] Fix register_netdev() races in older ISA net drivers

commit b24d4582fd93f3654d0a0a89f85e95140efc7fd4
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Thu May 12 20:04:16 2005 -0400

      [PATCH] Orinoco: consolidate allocation code
    
      Consolidate allocation of firmware buffers.  In the process, remove
      duplication of a workaround for an old symbol firmware bug, and fix a
      bug where we could retry the workaround, even if it already failed to
      help.
    
      Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d51d8b1f249b23a717ae489d6ccf2c25030988e6
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Thu May 12 20:03:36 2005 -0400

      [PATCH] Orinoco: don't set channel in managed mode
    
      Don't attempt to manually set the channel in infrastructure mode, the
      firmware doesn't like that much.  Also don't attempt to override the
      firmware's default channel number for IBSS mode (I believe default
      channel can vary by regulatory domain).
    
      Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1fc5eb642805fa724b67fd17f008b582b0400919
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Thu May 12 20:02:58 2005 -0400

      [PATCH] Orinoco: kill dump_recs
    
      Remove the dump_recs debugging iwpriv command.  It will be replaced
      later with the simpler and more flexible get_rid command.
    
      Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7bb7c3a326f509acbdaf550b54fba565544ef200
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Thu May 12 20:02:10 2005 -0400

      [PATCH] Orinoco: ignore_disconnect flag
    
      Adds an ignore_disconnect module parameter.  When enabled, the driver
      will continue attempting to send packets even when the firmware has
      told us we've lost our link to the AP.  On some firmwares this
      substantially increases the usable range of the card (presumably
      because we have an interrmittent connection, but the firmware is able
      to queue the packets for us until we're connected again).  On some
      other cards, it causes the firmware to fall in a screaming heap :(
      (hence, default off).
    
      Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e67d9d9d9e3934fc2844b795ed68f2d87e9a047a
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Thu May 12 20:01:22 2005 -0400

      [PATCH] Orinoco: wireless stats updates
    
      Minor updates/bugfixes to the handling of wireless statistics.

commit 516cd15f1c0dd6eada3619915b113b4e5baccc7a
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu May 12 19:47:12 2005 -0400

      [PATCH] PPP multilink fragmentation improvements
    
      Here's a patch for -mm for now.  Not sure whose territory this falls
      in, so I'm sending it to everyone I can think of. :)
    
      Some time ago I did some experiments with using PPP multilink over
      largish numbers of channels (up to 32).  The TCP performance was
      woeful due to wildly fluctuating packet latencies, which turned out to
      be because we would sometimes split a packet across all 32 channels,
      and sometimes we would send a whole packet down a single channel.
    
      This patch fixes those problems by being a bit cleverer about how the
      packets are split across the available channels, and in particular, it
      waits until at least half of the channels can take another fragment
      before starting to split up the next packet.
    
      The patch also fixes a buglet in the multilink reconstruction code
      where it would discard incoming packets that had just the multilink
      header and no data.  Such packets are valid and shouldn't be
      discarded.
    
      Signed-off-by: Paul Mackerras <paulus@samba.org>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7d17c1d606f6e89778f05554ddea43791d5c92a0
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu May 12 19:45:25 2005 -0400

    [netdrvrs] Use netif_carrier_* instead of IFF_RUNNING

commit 22f714b64b55012fa4e0d77132fa82719180f994
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu May 12 19:38:47 2005 -0400

      [PATCH] 8139too: use iomap for pio/mmio
    
      This patch converts the 8139too driver to use the iomap infrastructure
      for PIO and MMIO instead of playing macro tricks.  I also had to fix
      read_eeprom(), mdio_sync(), mdio_read(), and mdio_write() to not pass
      PIO base address to MMIO read() and write() functions.  In addition,
      the patch adds proper __iomem annotations for the driver.
    
      Both modes, PIO and MMIO, were tested with a RealTel RTL8139 card on
      an x86 box.  The 8129 support remains untested due to lack of
      hardware.
    
      Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a78d8927966dcc41bba52da3a10935072a592417
Author: Felipe <felipewd@terra.com.br>
Date:   Thu May 12 19:35:42 2005 -0400

    [PATCH] 8139cp net driver: add MODULE_VERSION

commit 7502cd1058152791fec94f32b719fec45e7f5de2
Author: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>
Date:   Thu May 12 19:34:31 2005 -0400

      [PATCH] 8139cp - add netpoll support
    
      Patch adds netpoll support to the 8139cp driver.
      The patch needs some tests because I have no NIC of this type for testing.
    
      Applies against linux-2.6.9-rc2-mm3
    
      Signed-off-by: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>

commit e21ba28262037f5fe7ca8746502c7c03c3da817f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 12 19:33:26 2005 -0400

      [PATCH] 8139cp - module_param
    
      Not sure if I sent this already...
      Convert 8139cp to use new module_param() not old MODULE_PARM
    
      Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 5734418d4f3420352eae38c8fcec699bf09874c1
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu May 12 19:31:31 2005 -0400

      [PATCH] 8139cp: SG support fixes
    
      - suspicious length in pci_unmap_single;
      - wait for the last frag before freeing the relevant skb;
      - no need to crash when facing some unexpected csum combination.

commit fcec34565827f2edb29d124498aa8f561455f15d
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 12 19:28:49 2005 -0400

    [netdrvr 8139cp] TSO support

commit f497ba735fc9ff4e35a19641143708b3be1c7061
Author: Tobias Lorenz <tobias.lorenz@gmx.net>
Date:   Thu May 12 15:51:01 2005 -0400

    [libata sata_promise] pdc20619 (PATA) support

commit 6f2f38128170814e151cfedf79532e19cd179567
Author: Brad Campbell <brad@wasp.net.au>
Date:   Thu May 12 15:07:47 2005 -0400

    [PATCH] libata basic detection and errata for PATA->SATA bridges
    
    This patch works around an issue with WD drives (and possibly others)
    over SiL PATA->SATA Bridges on SATA controllers locking up with
    transfers > 200 sectors.
    
    Signed-off-by: Brad Campbell <brad@wasp.net.au>

commit 907f4678c114a125fe4584758681c31bf3d627da
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 12 15:03:42 2005 -0400

    [libata ahci] support PCI MSI interrupt vector

commit add671412021b68c3b4f2882b0d10a56e2dcdabe
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed May 11 11:36:21 2005 +0100

    Add missing asm-ppc/seccomp.h. Must learn to use git properly.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c1b773d87eadc3972d697444127e89a7291769a2
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed May 11 10:55:10 2005 +0100

    Add audit_log_type
    
    Add audit_log_type to allow callers to specify type and pid when logging.
    Convert audit_log to wrapper around audit_log_type.  Could have
    converted all audit_log callers directly, but common case is default
    of type AUDIT_KERNEL and pid 0.  Update audit_log_start to take type
    and pid values when creating a new audit_buffer.  Move sequences that
    did audit_log_start, audit_log_format, audit_set_type, audit_log_end,
    to simply call audit_log_type directly.  This obsoletes audit_set_type
    and audit_set_pid, so remove them.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 197c69c6afd2deb7eec44040ff533d90d26c6161
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed May 11 10:54:05 2005 +0100

    Move ifdef CONFIG_AUDITSYSCALL to header
    
    Remove code conditionally dependent on CONFIG_AUDITSYSCALL from audit.c.
    Move these dependencies to audit.h with the rest.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 804a6a49d874841a98ebea3247ad2e672812ad6a
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed May 11 10:52:45 2005 +0100

    Audit requires CONFIG_NET
    
    Audit now actually requires netlink.  So make it depend on CONFIG_NET,
    and remove the inline dependencies on CONFIG_NET.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5a241d77039a2632e81070619d5733258728f8bd
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed May 11 10:43:07 2005 +0100

    AUDIT: Properly account for alignment difference in nlmsg_len.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eecb0a7338ef6504aa49def4dde6429853025801
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 10 18:58:51 2005 +0100

    AUDIT: Fix abuse of va_args.
    
    We're not allowed to use args twice; we need to use va_copy.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e3b926b4c1499ba7b1b9513aa6113944d572aba5
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 10 18:56:08 2005 +0100

    AUDIT: pass size argument to audit_expand().
    
    Let audit_expand() know how much it's expected to grow the buffer, in
    the case that we have that information to hand.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8c5aa40c94ef8bb7f7da95ecd5942e2d20fc3c9d
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Tue May 10 18:53:07 2005 +0100

    AUDIT: Fix reported length of audit messages.
    
    We were setting nlmsg_len to skb->len, but we should be subtracting
    the size of the header.
    
    From: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 259692bd5a2b2c2d351dd90748ba4126bc2a21b9
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon May 9 10:47:14 2005 -0500

    JFS: Remove redundant kfree() NULL pointer checks
    
    kfree() can handle a NULL pointer, don't worry about passing it one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit ea9c102cb0a7969df5733d34f26e0b12c8a3c889
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sun May 8 15:56:09 2005 +0100

    Add CONFIG_AUDITSC and CONFIG_SECCOMP support for ppc32
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 13e652800d1644dfedcd0d59ac95ef0beb7f3165
Merge: 4332bdd... 88d7bd8... 88d7bd8...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sun May 8 13:23:54 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4332bdd332a2dca93dc3b1d017b2dd27d5c8cef3
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri May 6 15:59:57 2005 +0100

    AUDIT: Honour gfp_mask in audit_buffer_alloc()
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5ac52f33b6f05fcb91a97124155183b779a4efdf
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri May 6 15:54:53 2005 +0100

    AUDIT: buffer audit msgs directly to skb
    
    Drop the use of a tmp buffer in the audit_buffer, and just buffer
    directly to the skb.  All header data that was temporarily stored in
    the audit_buffer can now be stored directly in the netlink header in
    the skb.  Resize skb as needed.  This eliminates the extra copy (and
    the audit_log_move function which was responsible for copying).
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8fc6115c2a04099a6e846dc0b2d85cba43821b54
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri May 6 15:54:17 2005 +0100

    AUDIT: expand audit tmp buffer as needed
    
    Introduce audit_expand and make the audit_buffer use a dynamic buffer
    which can be resized.  When audit buffer is moved to skb it will not
    be fragmented across skb's, so we can eliminate the sklist in the
    audit_buffer.  During audit_log_move, we simply copy the full buffer
    into a single skb, and then audit_log_drain sends it on.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 16e1904e694d459ec2ca9b33c22b818eaaa4c63f
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri May 6 15:53:34 2005 +0100

    AUDIT: Add helper functions to allocate and free audit_buffers.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c2f0c7c356dc9ae15419f00c725a2fcc58eeff58
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri May 6 12:38:39 2005 +0100

    The attached patch addresses the problem with getting the audit daemon
    shutdown credential information. It creates a new message type
    AUDIT_TERM_INFO, which is used by the audit daemon to query who issued the
    shutdown.
    
    It requires the placement of a hook function that gathers the information. The
    hook is after the DAC & MAC checks and before the function returns. Racing
    threads could overwrite the uid & pid - but they would have to be root and
    have policy that allows signalling the audit daemon. That should be a
    manageable risk.
    
    The userspace component will be released later in audit 0.7.2. When it
    receives the TERM signal, it queries the kernel for shutdown information.
    When it receives it, it writes the message and exits. The message looks
    like this:
    
    type=DAEMON msg=auditd(1114551182.000) auditd normal halt, sending pid=2650
    uid=525, auditd pid=1685
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 450cbfbbbd88876e3ccec1d277f613221ca82bb7
Merge: d53ee32... bfd4bda...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu May 5 22:39:49 2005 +0100

    Merge with /usr/src/ntfs-2.6.git

commit 6f817abc643ec84cf07c99f964d04976212e1fd3
Merge: f77165d... bfd4bda...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu May 5 14:43:19 2005 -0500

    Merge with /home/shaggy/git/linus-clean/

commit ebcc80c1b6629a445f7471cc1ddb48faf8a84e70
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Thu May 5 06:40:00 2005 -0700

    [IA64] Merge audit fix for fsyscalls with syscall-optimizations
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f77165df5ba75461b491a9f20f778307f1b4a0ac
Merge: ddf3e29... b2d84f0...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu May 5 09:32:56 2005 -0500

    Merge with /home/shaggy/git/linus-clean/

commit d53ee3222459f347cb18985a845864bc81a44eaf
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Apr 6 16:11:20 2005 +0100

    NTFS: Use MAX_BUF_PER_PAGE instead of variable sized array allocation for
          better code generation and one less sparse warning in fs/ntfs/aops.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 7fafb8b634121f4fa35ff92f85737f8bc2259f06
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Apr 6 16:09:21 2005 +0100

    NTFS: Minor cleanup: Define and use NTFS_MAX_CLUSTER_SIZE constant instead
          of hard coded 0x10000 in fs/ntfs/super.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit bb3cf33509009132cf8c7a7729f9d26c0c5fa961
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Apr 6 13:34:31 2005 +0100

    NTFS: Update attribute definition handling.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit b0d2374d62faed034dd80e6524efb98a6341597c
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Apr 4 16:20:14 2005 +0100

    NTFS: Some utilities modify the boot sector but do not update the checksum.
          Thus, relax the checking in fs/ntfs/super.c::is_boot_sector_ntfs() to
          only emit a warning when the checksum is incorrect rather than
          refusing the mount.  Thanks to Bernd Casimir for pointing this
          problem out.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 251c8427c9c418674fc3c04a11de95dc3661b560
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Apr 4 14:59:56 2005 +0100

    NTFS: Remove checks for NULL before calling kfree() since kfree() does the
          checking itself.  (Jesper Juhl)
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 53d59aad9326199ef5749c97513db498309a057e
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Mar 17 10:51:33 2005 +0000

    NTFS: Fix compilation when configured read-only.
    
    - Add ifdef NTFS_RW around write specific code if fs/ntfs/runlist.[hc] and
      fs/ntfs/attrib.[hc].
    - Minor bugfix to fs/ntfs/attrib.c::ntfs_attr_make_non_resident() where the
      runlist was not freed in all error cases.
    - Add fs/ntfs/runlist.[hc]::ntfs_rl_find_vcn_nolock().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 1ef334d372d6a7006e20f56f7e85d8f4ec32e3c2
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Apr 4 14:59:42 2005 +0100

    NTFS: Include linux/swap.h in fs/ntfs/attrib.c for mark_page_accessed().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 905685f68fc72844b8c2689c39a5c6c35e840152
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Mar 10 11:06:19 2005 +0000

    NTFS: - Modify ->readpage and ->writepage (fs/ntfs/aops.c) so they detect
            and handle the case where an attribute is converted from resident
            to non-resident by a concurrent file write.
          - Reorder some operations when converting an attribute from resident
            to non-resident (fs/ntfs/attrib.c) so it is safe wrt concurrent
            ->readpage and ->writepage.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 43b01fda8b17b2b63e7dcdeed11c2ebba56b1fc9
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Mar 9 15:18:43 2005 +0000

    NTFS: Fix sign of various error return values to be negative in
          fs/ntfs/lcnalloc.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 2bfb4fff3e9731ecfe745881e53cfb2e646c47bb
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Mar 9 15:15:06 2005 +0000

    NTFS: Add fs/ntfs/attrib.[hc]::ntfs_attr_make_non_resident().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit c0c1cc0e46b36347f11b566f99087dc5e6fc1b89
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Mar 7 21:43:38 2005 +0000

    NTFS: - Fix bug in fs/ntfs/attrib.c::ntfs_find_vcn_nolock() where after
            dropping the read lock and taking the write lock we were not checking
            whether someone else did not already do the work we wanted to do.
          - Rename ntfs_find_vcn_nolock() to ntfs_attr_find_vcn_nolock().
          - Tidy up some comments in fs/ntfs/runlist.c.
          - Add LCN_ENOMEM and LCN_EIO definitions to fs/ntfs/runlist.h.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 271849a98849394ea85fa7caa8a1aaa2b3a849b7
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Mar 7 21:36:18 2005 +0000

    NTFS: Add fs/ntfs/attrib.[hc]::ntfs_attr_vcn_to_lcn_nolock() used by the new
          write code.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 7e693073a940c7484c0c21e3e1603e29ce46f30c
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Mar 3 16:38:59 2005 +0000

    NTFS: Add AT_EA in addition to AT_DATA to whitelist for being allowed to be
          non-resident in fs/ntfs/attrib.c::ntfs_attr_can_be_non_resident().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 9451f8519c5e6d5d064c30033fc3d4ce77de321c
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Mar 3 14:43:43 2005 +0000

    NTFS: Correct sparse file handling.  The compressed values need to be
          checked and set in the ntfs inode as done for compressed files
          and the compressed size needs to be used for vfs inode->i_blocks
          instead of the allocated size, again, as done for compressed files.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 413826868fb49d200b741bcaeaf58ea5c5e45321
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Mar 3 13:44:15 2005 +0000

    NTFS: Make fs/ntfs/namei.c::ntfs_get_{parent,dentry} static and move the
          definition of ntfs_export_ops from fs/ntfs/super.c to namei.c.
          Also, declare ntfs_export_ops in fs/ntfs/ntfs.h.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8907547d4b099e67762ea4891c127ea1f6dd1cb7
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu Mar 3 11:19:53 2005 +0000

    NTFS: Fix printk format warnings on ia64. (Randy Dunlap)
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 5ae9fcf8f329baba4bada8719cb0337eef083a1a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Mar 2 17:03:24 2005 +0000

    NTFS: - Set the ntfs_inode->allocated_size to the real allocated size in the
            mft record for resident attributes (fs/ntfs/inode.c).
          - Small readability cleanup to use "a" instead of "ctx->attr"
            everywhere (fs/ntfs/inode.c).
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 37e4c13b987a7923ec13bda7368901b3e094fecb
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri Feb 18 10:03:13 2005 +0000

    NTFS: Fix a nasty runlist merge bug when merging two holes.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit d8ec785e0bf2941ed546711c2f240a3e030c39c7
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri Feb 18 09:23:39 2005 +0000

    NTFS: Change time to u64 in time.h::ntfs2utc() as it otherwise generates a
          warning in the do_div() call on sparc32.  Thanks to Meelis Roos for the
          report and analysis of the warning.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit b6ad6c52fe36ab35d0fe28c064f59de2ba670c2a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Feb 15 10:08:43 2005 +0000

    NTFS: - Split ntfs_map_runlist() into ntfs_map_runlist() and a non-locking
    	helper ntfs_map_runlist_nolock() which is used by ntfs_map_runlist().
    	This allows us to map runlist fragments with the runlist lock already
    	held without having to drop and reacquire it around the call.  Adapt
    	all callers.
          - Change ntfs_find_vcn() to ntfs_find_vcn_nolock() which takes a locked
    	runlist.  This allows us to find runlist elements with the runlist
    	lock already held without having to drop and reacquire it around the
    	call.  Adapt all callers.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 1a0df15acdae065789446aca83021c72b71db9a5
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Feb 3 12:04:36 2005 +0000

    NTFS: Fix a bug in fs/ntfs/runlist.c::ntfs_mapping_pairs_decompress() in
          the creation of the unmapped runlist element for the base attribute
          extent.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit c002f42543e155dd2b5b5039ea2637ab26c82513
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Feb 3 12:02:56 2005 +0000

    NTFS: - Add disable_sparse mount option together with a per volume sparse
    	enable bit which is set appropriately and a per inode sparse disable
    	bit which is preset on some system file inodes as appropriate.
          - Enforce that sparse support is disabled on NTFS volumes pre 3.0.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit f40661be038ce6ed9ef6a8b80307a9153bd95769
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Jan 13 16:03:38 2005 +0000

    NTFS: Optimise/reorganise some error handling code in fs/ntfs/aops.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 946929d813a3bde095678526dd037ab9ac6efe35
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Jan 13 15:26:29 2005 +0000

    NTFS: Fixup the resident attribute resizing code in
          fs/ntfs/aops.c::ntfs_{prepare,commit}_write()() and re-enable it.
          It should be safe now.  (Famous last words...)
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 3834c3f227725e2395840aed82342bda4ee9d379
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Jan 13 11:04:39 2005 +0000

    NTFS: Fix stupid bug in fs/ntfs/mft.c introduced in last changeset.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 149f0c5200188a43f1fc11ca2fb14d8183013d10
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Jan 12 13:52:30 2005 +0000

    NTFS: Repeat a failed ntfs_truncate() in fs/ntfs/aops.c::ntfs_writepage()
          and abort if it fails again.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 07a4e2da7dd3c9345f84b2552872f9d38c257451
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Jan 12 13:08:26 2005 +0000

    NTFS: Use i_size_{read,write}() in fs/ntfs/{aops.c,mft.c} and protect
          access to the i_size and other size fields using the size_lock.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit f50f3ac51983025405a71b70b033cc6bcb0d1fc1
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri Nov 19 22:16:00 2004 +0000

    NTFS: Use i_size_read() in fs/ntfs/inode.c once and then use the cached value
          afterwards when reading the size of the bitmap inode.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 218357ff1b1b2f1bfdce89d608dbe33dd2f9f14b
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 18 20:34:59 2004 +0000

    NTFS: - Use i_size_read() in fs/ntfs/super.c once and then use the cached
    	value afterwards.  Cache the initialized_size in the same way and
    	protect access to the two sizes using the size_lock.
          - Minor optimization to fs/ntfs/super.c::ntfs_statfs() and its helpers.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 206f9f35b2348b7b966ff18a5564b8a3ca325ed5
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 18 15:01:06 2004 +0000

    NTFS: In fs/ntfs/dir.c, use i_size_read() once and then the cached value
          afterwards.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 367636772f094fd840d2d79e75257bcfaa28e70f
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 18 13:46:45 2004 +0000

    NTFS: - In fs/ntfs/compress.c, use i_size_read() at the start and then use the
    	cached value everywhere.  Cache the initialized_size in the same way
    	and protect the critical region where the two sizes are read using the
    	new size_lock of the ntfs inode.
          - Add the new size_lock to the ntfs_inode structure (fs/ntfs/inode.h)
    	and initialize it (fs/ntfs/inode.c).
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 899101aebb9ab3692aa8efe2805174ee0ee3edb5
Merge: 3605027... 897f5ab...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu May 5 10:15:25 2005 +0100

    Merge with /usr/src/ntfs-2.6.git

commit 36050271e6ec19390184e1a83470eb7e725cad65
Merge: d4b9ba7... 1d42a0e...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu May 5 00:08:35 2005 +0100

    Merge with /usr/src/ntfs-2.6.git

commit ddf3e298b33f3e15a2e6272e0146dfa940c89a74
Merge: 7a694ca... 1d42a0e...
Author: Dave Kleikamp <shaggy@kleikamp.(none)>
Date:   Wed May 4 16:43:30 2005 -0500

    Merge with /home/shaggy/git/linus-clean/

commit 7a694ca74958b97ae2d437c8a730bddd9e9792c3
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed May 4 15:31:14 2005 -0500

    JFS: Fix sparse warning
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit dcc9871270aa3b1bbe2e61cc9c1d80e9b2e8099d
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed May 4 15:30:51 2005 -0500

    JFS: cleanup - remove unneeded sanity check
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 1868f4aa5a4a72bbe0b7db6c1d4ee666824c3895
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed May 4 15:29:35 2005 -0500

    JFS: fix sparse warnings by moving extern declarations to headers
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit d4b9ba7bf6f38cff55b5d95a0db7dd91311ce20a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Wed Nov 17 15:45:08 2004 +0000

    NTFS: Use i_size_read() in fs/ntfs/file.c::ntfs_file_open().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit db30d160cd8dfe1e53435fd76f4189778f1c728e
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 11 12:42:00 2004 +0000

    NTFS: Use i_size_read() once and then use the cached value in
          fs/ntfs/lcnalloc.c::ntfs_cluster_alloc().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 66129f88c4cc719591f687e5c8c764fe9d3e437a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 11 12:34:00 2004 +0000

    NTFS: Use i_size_read() in fs/ntfs/logfile.c::ntfs_{check,empty}_logfile().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit da28438cae9a271c5c232177f81dfb243de9b7fa
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Nov 11 11:18:10 2004 +0000

    NTFS: Use i_size_read() in fs/ntfs/attrib.c::ntfs_attr_set().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8e3e50168c8537807b7a6f78588cd72e21363262
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:22:40 2005 -0700

    [IA64] need r29=psr *after* rsm psr.i
    
    Yanmin Zhang pointed out a sequence problem when saving the psr.  David
    Mosberger provided this patch (which gave up a cycle).
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e7e965fa1961a8ce32cbbb1bd436c655ad03973e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:22:08 2005 -0700

    [IA64] use srlz.d instead of srlz.i in ia64_leave_kernel()
    
    This patch switches the srlz.i in ia64_leave_kernel() to srlz.d.  As
    per architecture manual, the former is needed only to ensure that the
    clearing of PSR.IC is seen by the VHPT for subsequent instruction
    fetches.  However, since the remainder of the code (up to and
    including the RFI instruction) is mapped by a pinned TLB entry, there
    is no chance of an iTLB miss and we don't care whether or not the VHPT
    sees PSR.IC cleared.  Since srlz.d is substantially cheaper than
    srlz.i, this should shave off a few cycles off the interrupt path
    (unverified though; I'm not setup to measure this at the moment).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fbf7192ba06e4b55022231e5fdb9db8ce3ad6307
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:21:26 2005 -0700

    [IA64] Annotate fsys_bubble_down() with McKinley dispatch info.
    
    This patch changes comments & formatting only.  There is no code
    change.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1ba7be7d691f6df2557d39c5b1a2e14c32e5dd20
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:20:51 2005 -0700

    [IA64] Reschedule fsys_bubble_down().
    
    Improvements come from eliminating srlz.i, not scheduling AR/CR-reads
    too early (while there are others still pending), scheduling the
    backing-store switch as well as possible, splitting the BBB bundle
    into a MIB/MBB pair.
    
    Why is it safe to eliminate the srlz.i?  Observe
    that we used to clear bits ~PSR_PRESERVED_BITS in PSR.L.  Since
    PSR_PRESERVED_BITS==PSR.{UP,MFL,MFH,PK,DT,PP,SP,RT,IC}, we
    ended up clearing PSR.{BE,AC,I,DFL,DFH,DI,DB,SI,TB}.  However,
    
     PSR.BE : already is turned off in __kernel_syscall_via_epc()
     PSR.AC : don't care (kernel normally turns PSR.AC on)
     PSR.I  : already turned off by the time fsys_bubble_down gets invoked
     PSR.DFL: always 0 (kernel never turns it on)
     PSR.DFH: don't care --- kernel never touches f32-f127 on its own
    	  initiative
     PSR.DI : always 0 (kernel never turns it on)
     PSR.SI : always 0 (kernel never turns it on)
     PSR.DB : don't care --- kernel never enables kernel-level breakpoints
     PSR.TB : must be 0 already; if it wasn't zero on entry to
    	  __kernel_syscall_via_epc, the branch to fsys_bubble_down
    	  will trigger a taken branch; the taken-trap-handler then
    	  converts the syscall into a break-based system-call.
    
    In other words: all the bits we're clearying are either 0 already or
    are don't cares!  Thus, we don't have to write PSR.L at all and we
    don't have to do a srlz.i either.
    
    Good for another ~20 cycle improvement for EPC-based heavy-weight
    syscalls.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 21bc4f9b34cc1eab3610955207f72c52495ae8ed
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:20:11 2005 -0700

    [IA64] Annotate __kernel_syscall_via_epc() with McKinley dispatch info.
    
    Two other very minor changes: use "mov.i" instead of "mov" for reading
    ar.pfs (for clarity; doesn't affect the code at all).  Also, predicate
    the load of r14 for consistency.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 70929a57cfea8c18de13fcea9ae6771018a98949
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:19:37 2005 -0700

    [IA64] Reschedule __kernel_syscall_via_epc().
    
    Avoid some stalls, which is good for about 2 cycles when invoking a
    light-weight handler.  When invoking a heavy-weight handler, this
    helps by about 7 cycles, with most of the improvement coming from the
    improved branch-prediction achieved by splitting the BBB bundle into
    two MIB bundles.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f8fa5448fc9b4a7806b1297a0b57808f12fe4d43
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:19:04 2005 -0700

    [IA64] Reschedule break_fault() for better performance.
    
    This patch reorganizes break_fault() to optimistically assume that a
    system-call is being performed from user-space (which is almost always
    the case).  If it turns out that (a) we're not being called due to a
    system call or (b) we're being called from within the kernel, we fixup
    the no-longer-valid assumptions in non_syscall() and .break_fixup(),
    respectively.
    
    With this approach, there are 3 major phases:
    
     - Phase 1: Read various control & application registers, in
    	    particular the current task pointer from AR.K6.
     - Phase 2: Do all memory loads (load system-call entry,
    	    load current_thread_info()->flags, prefetch
    	    kernel register-backing store) and switch
    	    to kernel register-stack.
     - Phase 3: Call ia64_syscall_setup() and invoke
    	    syscall-handler.
    
    Good for 26-30 cycles of improvement on break-based syscall-path.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c03f058fbf685f2ff630095d2c1e98d331b81e82
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:18:22 2005 -0700

    [IA64] In ia64_leave_syscall(), fix comments and whitespace only.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 87e522a0f7f8a7a5a1a880517989835c4f09c63e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:17:44 2005 -0700

    [IA64] Schedule ia64_leave_syscall() to read ar.bsp earlier
    
    Reschedule code to read ar.bsp as early as possible.  To enable this,
    don't bother clearing some of the registers when we're returning to
    kernel stacks.  Also, instead of trying to support the pNonSys case
    (which makes no sense), do a bugcheck instead (with break 0).  Finally,
    remove a clear of r14 which is a left-over from the previous patch.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 060561ff79b01eea58e6d72abfb8e7580ff21f2a
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:17:03 2005 -0700

    [IA64] In syscall-entry, use st8 instead of stf8 to clear pt_regs.r8
    
    Using stf8 seemed like a clever idea at the time, but stf8 forces
    the cache-line to be invalidated in the L1D (if it happens to be
    there already).  This patch eliminates a guaranteed L1D cache-miss
    and, by itself, is good for a 1-2 cycle improvement for heavy-weight
    syscalls.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 96e017495e6833adcbad84783e3c5eb685836bbf
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:16:07 2005 -0700

    [IA64] On return from syscall, hint b7 with __kernel_syscall_via_epc().
    
    Why is this a good idea?  Clearing b7 to 0 is guaranteed to do us no
    good and writing it with __kernel_syscall_via_epc() yields a 6 cycle
    improvement _if_ the application performs another EPC-based system-
    call without overwriting b7, which is not all that uncommon.  Well
    worth the minimal cost of 1 bundle of code.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3c79c8b1d92a9ae3edf3cbcd2c43c553ee0f1d83
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:15:13 2005 -0700

    [IA64] Schedule fp-clearing insns at least 6 cycles after reading ar.bsp.
    
    Decreases syscall overhead by approximately 6 cycles.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9ec1a7ad434fa951ff845dbee3397cf6ad4f76df
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:13:33 2005 -0700

    [IA64] Use dynamic prediction for RSE-clearing branches.
    
    This by itself is good for a 1-2 cycle speed up.  Effect is bigger
    when combined with the later patches.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 06ef66081620e94fe35a518f98624b83a140096e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Apr 27 21:10:45 2005 -0700

    [IA64] __ia64_syscall() is no longer used anywhere in the kernel.  Remove it.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>
