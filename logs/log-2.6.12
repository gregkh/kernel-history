commit e7e173af42dbf37b1d946f9ee00219cb3b2bea6a
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 19:08:33 2005 -0700

    Linux 2.6.12-rc2

commit 607899e17218b485a021c6ebb1cff771fd690eec
Author: Andi Kleen <ak@muc.de>
Date:   Sun Apr 3 18:19:34 2005 -0700

    [PATCH] x86_64: Fix segment constraints
    
    Use a register target for segment register saving
    
    Pointed out by H.J.Lu

commit d21ca622e8b80559aba9c012905aa77d1ce13ee8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:07:30 2005 -0700

    [PATCH] missing gameport dependencies
    
    several pci-only drivers marked as dependent on PCI.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 92bff94b41b20bfb9812514abcbaea943d1eaf62
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:07:12 2005 -0700

    [PATCH] missing include in lanai.c
    
    dma-mapping.h needs to be included there; on i386 it works by accident
    since there dma-mapping.h is indirectly brought in elsewhere.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6bcca14e4f981a2572de572911f0f94ee87078ff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:06:56 2005 -0700

    [PATCH] cpuset.c __user annotations
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit b32adaf212f545a028c39a464fe0e3377a2f9b7c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:06:39 2005 -0700

    [PATCH] usblcd portability fix
    
    usblcd.c passes address of size_t variable to function that expects int
    *.  That breaks on 64bit big-endian, obviously.  Fixed, along with the
    usb-skeleton.c - that's where the bug had been copied from.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 63c706b924ed0422b6816a72b8704bc3ed872792
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:06:21 2005 -0700

    [PATCH] jsm fixes
    
     a) jsm depends on PCI.  Kconfig fixed.
     b) spin_lock_irqsave() et.al. expect unsigned long, not u64.
     c) pointer arithmetics works just fine without casts to u64, thank
        you very much.
     d) iomem annotations added.
     e) jsm_get_mstat() lost bits - among other things it did
    	if (mstat & UART_MSR_DSR)
    		result |= TIOCM_DSR;
        and ended with return result; since TIOCM_DSR is 256 on e.g.  i386,
        declaring result as unsigned char was a bad idea (function itself
        returns int).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 376b07691ec54a44925b4fee024c089b8b7b6616
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:06:05 2005 -0700

    [PATCH] generic_serial.c portability fix
    
    gs_wait_tx_flushed() should have its second argument (timeout) unsigned
    long, not int.  One of the callers passes it MAX_SCHEDULE_TIMEOUT and
    function itself compares argument with that value.  Since that's
    LONG_MAX, we get breakage on all 64bit platforms.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 1fa6bac57b20c8250874387bdd9df6b8fe8340d3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 18:05:49 2005 -0700

    [PATCH] non-portable include in coda
    
    fs/coda/upcall.c includes both asm/signal.h and linux/signal.h.
    
    For one thing, the former is included by the latter; for another, on
    some platforms it actually relies on the stuff included earlier in
    linux/signal.h (but not in upcall.c).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a81513e6cba3f255c0ac8a31480c9770fe83b0d
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Sun Apr 3 18:05:31 2005 -0700

    [PATCH] Fix Oops in MXB driver (v4l2 subsystem)
    
    This fixes a NULL pointer dereference Oops in my "Multimedia eXtension
    Board" driver.
    
    The tda9840 i2c driver dereferences the argument pointer, but the MXB
    driver is supplying a NULL pointer for one of the commands.  The patch
    makes this one command behave like the others, ie.  it expects an int
    argument.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f7abe86ce081437353b6f765e82f2eed1337427
Merge: 1075221... 31218ff...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 17:50:59 2005 -0700

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 31218ffa5c408e13a209fb6c131e417a8805e579
Merge: a0b8e21... 983c00c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 17:46:46 2005 -0700

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a0b8e21ee69ccfbed49d93707b033d59d6f2ff58
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Apr 3 17:40:04 2005 -0700

    [PATCH] kfree() NULL pointer cleanups - no need to check - fs/ext3/
    
    kfree() handles NULL pointers fine - checking is redundant.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9aab1ec2eaa11abc7d1b61276e840360bf39568
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Apr 3 17:39:47 2005 -0700

    [PATCH] ext3: move goal logical block into block allocation info structure
    
    Moved i_next_alloc_block and i_next_goal_block out from ext3_inod_info, and
    put it together with the reservation structure into the
    ext3_block_alloc_info structure, and dynamically allocate that structure
    whenever need to allocation a block.  This is also apply for noreservation
    mount.  Also cleanup ext3_find_goal() code.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bc0a5f5c161254ccce512842627dab97a646a70
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Apr 3 17:39:31 2005 -0700

    [PATCH] ext3: reservation info cleanup: remove rsv_seqlock
    
    Since now the ei->truncate_sem is guarding the concurrent allocation and
    the deallocation, there is no need to use the the rsv_seqlock lock in the
    ext3_reserve_window_node, which was there to protect using/allocating
    reservation window race between two threads allocating blocks at the same
    time.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f374d8cc10fd9932359bf5928ed04bdbeca97b1
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Apr 3 17:39:16 2005 -0700

    [PATCH] ext3: dynamic allocation of block reservation info
    
    Right now the ext3 reservation structure(ext3_reserve_window_node) is part of
    the ext3 inode itself.  This part of information is only needed for files that
    need allocate blocks on disk.  So, the attached patches reduce the ext3 inode
    size by dynamically allocating the block allocation/reservation info
    structure(called struct ext3_block_alloc_info) when it is needed(i.e.  only
    for files who need to allocate blocks)
    
    The reservation structure is being allocated and linked to the ext3 inode at
      ext3_get_block_handle(), and being freed and unlinked at the
    iput_final->ext3_clear_inode().
    
    The ei->truncate_sem which is currently used to protect concurrent
    ext3_get_block() and ext3_truncate is used to protect reservation structure
    allocation and deallocation.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0091e60a7e122b3e70658bf6e1148a389f71e90
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Apr 3 17:38:58 2005 -0700

    [PATCH] ppc64: Fix boot memory corruption
    
    Nathan's patch "make OF node fixup code usable at runtim" is introducing a
    snaky bug.  We do 2 passes over this code, one to measure how much memory
    will be needed so we can allocate a single block, and one to do the actual
    fixup.  However, the new code does some result-checking of prom_alloc()
    which breaks this mecanism, as the first pass always starts at "0", thus we
    fail to measure the additional size properly and allocate a block smaller
    than what we'll actually use for the fixup.  This cause us to override
    whatever sits there, with variable results depending on the memory layout
    of the machine (but typically crashes).
    
    This patch fixes it by starting the "measure" pass with an initial size set
    to 16 and not 0.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 196384b529f1018693f0242d9d25c517e816fdb6
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Apr 3 17:38:42 2005 -0700

    [PATCH] ppc64: add definition for PAGE_AGP
    
    This fix DRM build on ppc64 (even if DRM here is not yet functional, you'll
    need the bleeding edge r300 stuff) by properly defining PAGE_AGP for the
    ppc64 architecture.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acec5119069c1896db45b4014c9d1e53514bc843
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:38:26 2005 -0700

    [PATCH] ppc64: Export re{serv,leas}e_pmc_hardware() for oprofile
    
    CONFIG_OPROFILE=m doesn't work on ppc64 if these aren't exported...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ee53497877fc554384337ab17597b6fcdc0dbac
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:38:10 2005 -0700

    [PATCH] ppc32: clean up arch/ppc/syslib/prom_init.c
    
    The call_prom routine in arch/ppc/syslib/prom_init.c, which does a client
    call to Open Firmware, returns a void *, and we use void * for instance
    handles and package handles that are returned from and used in OF calls.
    This is a bad idea - we can't ever dereference those things, and we end up
    with a lot of casts because arguments to and return values from OF calls
    are sometimes handles and sometimes numbers.
    
    This patch cleans things up by using u32 as the type for OF handles.  The
    return type of call_prom becomes int because the return value from an OF
    call is often an int status code.  The number of casts in prom_init.c is
    reduced substantially by this patch.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69aaf0194f00568e13447ce3a64aba347d43e90c
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:37:53 2005 -0700

    [PATCH] ppc32: add syscall6 definition
    
    Since we have some syscalls with 6 arguments, it's useful to have a
    definition of _syscall6 in asm-ppc/unistd.h.  This patch adds a suitable
    definition.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 868cda2807716c7ed12d3b210e06edcb7880ae0a
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:37:37 2005 -0700

    [PATCH] ppc32: eliminate gcc warning in xmon.c
    
    This patch shuts up some more incorrect gcc warnings.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 168b5349e7c36927b5b99f963bfbf1f7b50ff0e6
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:37:20 2005 -0700

    [PATCH] ppc32: eliminate gcc warning in prom.c
    
    This patch shuts up a couple of gcc "variable may be used uninitialized"
    warnings.  The warnings are invalid - the code is such that the variables
    are in fact initialized before being used - but gcc isn't smart enough to
    see that.  This patch eliminates the warnings.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02c73cea37291723e19210b024765792db4d082f
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 3 17:37:03 2005 -0700

    [PATCH] ppc32: use correct sysrq function
    
    We were using an internal sysrq function instead of the exported public
    interface for registering a sysrq key in arch/ppc/xmon/start.c.  This patch
    fixes it (and eliminates a compiler warning).
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66804d7cd20f2b580cadbb593bb4851bb5e34dd1
Author: Kumar Gala <galak@freescale.com>
Date:   Sun Apr 3 17:36:47 2005 -0700

    [PATCH] ppc32: rename head_e500.S to head_fsl_booke.S
    
    Renamed head_e500.S to head_fsl_booke.S since the file is applicable to
    other PowerPC Book-E implementations from Freescale, not just the e500.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 849b87f438890ba6e33cec55fd75f6d24f9c7348
Author: David Howells <dhowells@redhat.com>
Date:   Sun Apr 3 17:36:18 2005 -0700

    [PATCH] BDI: Improve nommu mmap support
    
    The attached patch improves nommu mmap support; particularly in terms on
    supporting private mappings.  It does this by examining the device capability
    mask now in the backing_dev_info structure.
    
    Private mappings will now be backed by the underlying device directly if
    possible, where "possible" is constrained by the protection mask parameter
    and the device capabilities mask.
    
    I've also split the do_mmap_pgoff() function contents into a number of
    auxilliary functions to make it easier to understand.
    
    The documentation is also updated; including the addition of a warning
    about permitting direct mapping of flash chips and the problems of XIP vs
    write.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b5798fbb5e87b423f28622e1a912105643cd9f6
Author: James Bottomley <james.bottomley@SteelEye.com>
Date:   Sun Apr 3 17:36:01 2005 -0700

    [PATCH] x86: fix subarch breakage in intel_cacheinfo.c
    
    Not all x86 subarchitectures have support for hyperthreading, so every
    piece you add for it has to be predicated on checks for CONFIG_X86_HT.
    
    The patch corrects this hyperthreading leakage problem in intel_cacheinfo.c
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10752217624970d25d2244bf9141c240be19ebd9
Merge: c51dcab... 27d7e62...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Sun Apr 3 14:30:18 2005 -0700

    Merge davem@sunset.davemloft.net:/home/davem/src/BK/sparc-2.6
    into kernel.bkbits.net:/home/davem/sparc-2.6

commit 6d029ef5cc2a9f0447b5c114fe84a7f21861e4cb
Merge: c753237... 1d7c382...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 06:03:53 2005 -0700

    Merge bk://linux-sam.bkbits.net/kconfig
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 1d7c38220e5f4cdd577082409835a350c2e82638
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Apr 4 00:16:16 2005 +0200

    kconfig: complete cpufreq Kconfig cleanup
    
    This completes the Kconfig cleanup for all other archs.
    CPU_FREQ_TABLE was moved to drivers/cpufreq/Kconfig and is selected as
    needed.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c753237cb5783cd92b01fbfb6e6028dcac28b113
Merge: 184a2f0... a04780b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 06:02:24 2005 -0700

    Merge bk://bart.bkbits.net/ide-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 184a2f07d38d9bde2119d867c851efe9a2dcb382
Merge: e44f4fd... 9cc45fe...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 05:40:47 2005 -0700

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit e44f4fdbfd425af573a8b2230ca8a0dc5028860a
Merge: 7e5c20f... 78b40ce...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 3 05:35:15 2005 -0700

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 78b40ce3a76a8f484818bd98adf7a8030e93bcb6
Author: pavel@cz.rmk.(none) <pavel@cz.rmk.(none)>
Date:   Sun Apr 3 12:18:11 2005 +0100

    [ARM] Fix u32 vs. pm_message_t in arm
    
    Patch from Pavel Machek
    
    This fixes u32 vs. pm_message_t confusion in arm. I was not able to
    even compile it, but it should not cause any problems. Please apply,

commit 27d7e621b91f3417e1c628337774dfdd9121320c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 00:23:36 2005 -0700

    [SPARC]: iomem annotations in SOC driver
    
    	* struct soc_cq split into two variants differing only in annotations -
    ones we use for requests have ->pool pointing to normal memory, ones for
    responses have it pointing to iomem.
    	* all instances of soc_cq were either always of request or always of
    response variety; replaced with soc_cq_rsp and soc_cq_req resp.
    	* the rest consists of trivial adding __iomem where needed - the
    only tricky bit had been soc_cq annotations.
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 983c00c800a3cf44b589750a16bbf22ff7a15a11
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Apr 3 00:21:10 2005 -0700

    [CRYPTO]: Update MAINTAINERS entry mailing list.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 12f46cc58e58b65ec1662558581c2ca83cb16342
Author: James Bottomley <james.bottomley@SteelEye.com>
Date:   Sun Apr 3 00:19:12 2005 -0700

    [NET]: Missing proto_list_lock initialization.
    
    The new protocol registration locking uses a rwlock to limit access
    to the protocol list.  Unfortunately, the initialisation:
    
    static rwlock_t proto_list_lock;
    
    Only works to initialise the lock as unlocked on platforms whose unlock
    signal is all zeros.  On other platforms, they think it's already locked
    and hang forever.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a04780b2d7f0c71486a6c3e4b452ff8b05f2bd59
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 20:09:12 2005 +0200

    [ide] fix via82cxxx resume failure
    
    With David Woodhouse <dwmw2@infradead.org>.
    
    On resume from sleep, via_set_speed() doesn't reinstate the correct
    mode, because it thinks the drive is already configured correctly.
    
    Also kill redundant printk, ide_config_drive_speed() warns about errors.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 3a644abc595a21d9e23caf3b4219386e06fd0b7c
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 20:03:55 2005 +0200

    [ide] kill ide-default
    
    * add ide_drives list to list devices without a driver
    * add __ide_add_setting() and use it for adding no auto remove entries
    * kill ide-default pseudo-driver
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 5cc8d0f5a3e5d9f133cea67c3194cbdc046983ec
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 20:00:50 2005 +0200

    [ide] get driver from rq->rq_disk->private_data
    
    * add ide_driver_t * to device drivers objects
    * set it to point at driver's ide_driver_t
    * store address of this entry in disk->private_data
    * fix ide_{cd,disk,floppy,tape,scsi}_g accordingly
    * use rq->rq_disk->private_data instead of drive->driver
      to obtain driver (this allows us to kill ide-default)
    
    ide_dma_intr() OOPS fixed by Tejun Heo <htejun@gmail.com>.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit dbb3dc01862b4121a09a4624d820bbe2e1cc24a0
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 19:49:01 2005 +0200

    [ide] kill ide_drive_t->disk
    
    * move ->disk from ide_drive_t to driver specific objects
    * make drivers allocate struct gendisk and setup rq->rq_disk
      (there is no need to do this for REQ_DRIVE_TASKFILE requests)
    * add ide_init_disk() helper and kill alloc_disks() in ide-probe.c
    * kill no longer needed ide_open() and ide_fops[] in ide.c
    
    ide_init_disk() fixed by Andrew Morton <akpm@osdl.org>.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 4de9793a90e10d132275915066194a6bc20895bb
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 19:38:19 2005 +0200

    [ide] add ide_{un}register_region()
    
    Add ide_{un}register_region() and fix ide-{tape,scsi}.c to register
    block device number ranges.  In ata_probe() only probe for modules.
    
    Behavior is unchanged because:
    * if driver is already loaded and attached to drive ata_probe()
      is not called et all
    * if driver is loaded by ata_probe() it will register new number range
      for a drive and this range will be found by kobj_lookup()
    
    If this is not clear please read http://lwn.net/Articles/25711/
    and see drivers/base/map.c.
    
    This patch makes it possible to move drive->disk allocation from
    ide-probe.c to device drivers.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 2f5930e15a6456602366b04b728c8492b07830bc
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 19:33:42 2005 +0200

    [ide] destroy_proc_ide_device() cleanup
    
    When this function is called device is already unbinded from a
    driver so there are no driver /proc entries to remove.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 2d10d2f9c037350f1271e64e39f242ec7953a50d
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 19:31:35 2005 +0200

    [ide] drive->dsc_overlap fix
    
    drive->dsc_overlap is supported only by ide-{cd,tape} drivers.
    Add missing clearing of ->dsc_overlap to ide_{cd,tape}_release()
    and move ->dsc_overlap setup from ide_register_subdriver() to
    ide_cdrom_setup() (ide-tape enables it unconditionally).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 49f0c7c7ba5f3cd7157a81d393253391f41736d5
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Sat Apr 2 19:28:52 2005 +0200

    [ide] drive->nice1 fix
    
    It is drive's property independent of the driver being used so move
    drive->nice1 setup from ide_register_subdriver() to probe_hwif() in
    ide-probe.c.  As a result changing a driver which controls the drive
    no longer affects this flag.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 30f42668ce9be163611ff2b3c58aa64bb9193729
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Apr 2 01:10:31 2005 +0100

    [ARM PATCH] 2638/1: RX3715 - allow fclk as clock source
    
    Patch from Ben Dooks
    
    Since the RX3715 inits with fclk as the clock source,
    and to allow the system to generate the baud-rates for
    bluetooth control, this patch configures the platform
    data for "fclk" as a clock source
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e379d235fd5af2f934bb81e6765ef6062de1a5b1
Author: Richard Purdie <rpurdie@net.rmk.(none)>
Date:   Sat Apr 2 01:01:38 2005 +0100

    [ARM PATCH] 2637/1: Combine code for Sharp SL series parameter area
    
    Patch from Richard Purdie
    
    The Sharp SL series bootloader puts a parameter structure into
    memory with important LCD parameters in it (amongst other things).
    The structure is common to collie, corgi, poodle, tosa and other
    models. This patch combines all the existing code into one place
    and simplifies access to the data.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c51dcabe87930984735de212ccd606f091a7ab51
Merge: 5f78b4f... 916e341...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Fri Apr 1 14:49:00 2005 -0800

    Merge davem@cheetah.davemloft.net:/home/davem/src/BK/sparc-2.6
    into kernel.bkbits.net:/home/davem/sparc-2.6

commit 916e34199eb6a66e08030e0f8495704f2e2d1829
Merge: 204d650... c168f9a...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Fri Apr 1 07:21:27 2005 -0800

    Merge davem@sunset.davemloft.net:/home/davem/src/BK/sparc-2.6
    into kernel.bkbits.net:/home/davem/sparc-2.6

commit 5f78b4f36998a026f7a563c9bbce47c66f7af080
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Fri Apr 1 06:44:03 2005 -0800

    [SPARC64]: Make sure per-cpu area address creates legal TSB value.
    
    Older UltraSPARC chips only have a 43-bit sign extended
    TSB register.  So we have to make sure the address we
    end up with will produce a valid value within that range.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e5c20f55fb68ec55423d2b1dc396dc2fc503818
Merge: af3c4ba... 545cd84...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 1 06:04:53 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/pci-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit af3c4ba378116570005cc4563ea09e5f8a2f422d
Merge: 916e341... 2b55b78...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 1 06:02:46 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 545cd8441635816752c1dcadb23c8b32a22eb0c8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Apr 1 04:02:28 2005 -0800

    PCI: revert dumb SGI patch for resource freeing.
    
    Cset exclude: gregkh@suse.de|ChangeSet|20050317183046|30063
    
    The patch doesn't do anything, and I'm not going to be trusting
    any more SGI pci hotplug patches for a long time...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ab14a9f70555eca4261698c99597684ce1c4378
Merge: 204d650... 2b55b78...
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Fri Apr 1 00:31:19 2005 -0800

    Merge davem@sunset:src/BK/sparc-2.6
    into cheetah.davemloft.net:/home/davem/src/BK/sparc-2.6

commit f4398129a30a4753ab091e7cbe0533a05c4b180b
Merge: 900cf63... c118915...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 31 23:40:53 2005 -0800

    Merge bk://kernel.bkbits.net/tgraf/net-2.6-tcf_exts
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit c118915dbc82e87adcfd742f6437d04102d781e5
Merge: 5435693... cd4e48c...
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Apr 2 02:41:50 2005 +0200

    Merge tgraf@kernel.bkbits.net:/home/tgraf/net-2.6-tcf_exts
    into suug.ch:/home/tgr/dev/linux/net-2.6-tcf_exts

commit cd4e48c6a593a106c89173d9c1e7901e2f820290
Author: Thomas Graf <tgraf@suug.ch>
Date:   Fri Apr 1 19:01:24 2005 +0200

    [NET]: Improve gnet_stats_* dumping logic to be less error prone
    
    The recent additions to make gnet_stats_* useable for action
    statistics dumping in two steps introcuded a few error prone
    assumptions which can easly be forgotten. This patch fixes this
    up by simplifying the process of adding new fields to struct
    gnet_dump or adding additional backward compatibility TLVs.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 80458f046daa6dd6f9a0f8cd2b6a5d3ac766cd28
Author: Thomas Graf <tgraf@suug.ch>
Date:   Fri Apr 1 18:24:14 2005 +0200

    [NET]: Allow dumping of application specific statistics if no primary TLV is used
    
    Although this case is hypothetical at the moment, more advanced actions are
    likely to need this in the future.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 99665d91829d412c2d4103e0a0034af7f740a02c
Author: Thomas Graf <tgraf@suug.ch>
Date:   Fri Apr 1 18:05:21 2005 +0200

    [PKT_SCHED]: Properly return when no backward compatibility action statistics are to be dumped
    
    Fixes a stupid bug introcuded in my "Fix action statistics dumping in
    compatibility mode" patch, no clue why it actually worked without this fix.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 204d650e178cfb507f3eb1df4d23bda49c37d2c2
Merge: 24ca97c... c6454e5...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 31 23:08:13 2005 -0800

    Merge davem@nuts:/disk1/BK/sparc-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit c6454e58ad522c2a1d971e8807a365cba1e64033
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Mar 31 22:35:01 2005 -0800

    [SPARC64]: Store per-cpu pointer in IMMU TSB register.
    
    This trick requires that we PAGE_SIZE align the per-cpu
    areas, but that is fine.  Also, reduce the __per_cpu_offsets[]
    array into just two values, a base and a shift.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2b55b78c26ba106c5caabd6a2529b8af749e4151
Merge: 6a9a52c... 900cf63...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 31 21:30:25 2005 -0800

    Merge proper selinux i_sock fix.

commit 24ca97c3746c322cf857475c47b813eaf06dc786
Merge: 4b84c64... f6ea76c...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 31 20:58:51 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 6a9a52cf8758e064c95bad4367f5ee9a7a852a37
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 31 20:44:10 2005 -0800

    [PATCH] SELINUX: Fix i_sock reference.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6fe8c0db4a95363d2f96adcb1d66075119a9057
Merge: f6ea76c... 7386841...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Mar 31 20:36:30 2005 -0800

    merge

commit 900cf636c1d2300b92ee3c015d4b9b453abe853c
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Thu Mar 31 20:33:21 2005 -0800

    [SELINUX]: Fix for removal of i_sock
    
    This patch against -bk eliminates the use of i_sock by SELinux as it
    appears to have been removed recently, breaking the build of SELinux in
    -bk.  Simply replacing the i_sock test with an S_ISSOCK test would be
    unsafe in the SELinux code, as the latter will also return true for the
    inodes of socket files in the filesystem, not just the actual socket
    objects IIUC.  Hence this patch reworks the SELinux code to avoid the
    need to apply such a test in the first place, part of which was
    obsoleted anyway by earlier changes to SELinux.  Please apply.
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by:  James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 71cc52941ac4963e52435067e3654e000ad5ca39
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 31 19:50:04 2005 -0800

    [PATCH] I2C: Fix a common race condition in hardware monitoring
    
    Grant Coady noticed that most hardware monitoring drivers are exposed to
    a race condition when one writes to the sysfs files they create. While
    the read calls properly request a lock on the internal data, write calls
    manipulate the internal data without proper locking. This big patch
    fixes that by adding locking wherever needed.
    
    Affected drivers: adm1021, adm1025, asb100, ds1621, fscher, fscpos,
    gl518sm, gl520sm, it87, lm63, lm75, lm77, lm78, lm80, lm83, lm87, lm90,
    lm92, max1619, pc87360, pcf8591, sis5595, smsc47m1, via686a, w83627hf
    and w83781d
    
    The adm1026, adm1031 and lm85 were already locking on write calls, but
    held the lock for code that did not require it, so they have been
    modified too.
    
    The smsc47b397 and w83l785ts drivers were not affected, because they are
    read-only.
    
    The patch should apply just fine on top of your stack, provided that you
    applied all previous patches in order (in particular, there is one lm87
    indentation patch which is needed).
    
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3ad6057315e53384a371b4b00e1c3861c3200276
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 31 19:49:04 2005 -0800

    [PATCH] I2C: Move functionality handling from i2c-core to i2c.h
    
    So far, the functionality handling of i2c adapters was done in i2c-core
    by two exported functions: i2c_get_functionality and
    i2c_check_functionality. I found that both functions could be reduced to
    one line each, and propose that we turn them into inline function in the
    i2c.h header file, much like other i2c helper functions (e.g.
    i2c_get_clientdata, i2c_set_clientdata and i2c_clientname).
    
    The conversion of i2c_get_functionality suppresses a legacy check which
    shouldn't be needed anymore. Only one driver (s3c2410) was still relying
    on it, and was fixed some days ago.
    
    The conversion lets us get rid of two exports. Not only i2c-core gets
    smaller (by 458 bytes), but the client drivers using these functions get
    smaller too (typically by 48 bytes). And of course the new way is likely
    to be faster too, even if it wasn't my primary objective.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f6689a0812bdcbdec8f6886554b4d29579b0d574
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 31 19:48:28 2005 -0800

    [PATCH] I2C: pcf8574 doesn't need a lock
    
    While investigating the i2c chips drivers that were not properly
    locking, we found that the pcf8574 driver does the exact contrary. It
    uses a lock where it's not needed.
    
    While we were there, we did some additional cleanups to the driver:
    1* Merge pcf8574_update_client() in show_read(), as it was the only user
    and the function became trivial once the locking was removed.
    2* Add a validity check on values provided by user-space.
    
    Aurelien Jarno tested the modified code for confirmation and it worked
    just fine.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f6ea76c0dc98f2a9219ee5327a2d3a00dfb7e89b
Merge: 5435693... 63b61ea...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 31 16:06:50 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 63b61eadc2c4fd8ef6932e3a31370927b2e4951f
Merge: e1cccd6... 175bc14...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 31 15:37:13 2005 -0800

    Merge bk://linux-acpi.bkbits.net/to-linus
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit c168f9a4f1bcb46516e7fc11b72325eedfe1803a
Merge: f4b9bfe... f937b47...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Thu Mar 31 13:45:22 2005 -0800

    Merge davem@sunset.davemloft.net:/home/davem/src/BK/sparc-2.6
    into kernel.bkbits.net:/home/davem/sparc-2.6

commit 54356933c64d5f26e15c040d6bb81e8d2d616555
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 31 06:54:44 2005 -0800

    [NBD]: Fix i_sock reference.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6eecb695ea9744c90c69c1149fd526099b05afa
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu Mar 31 06:35:09 2005 -0800

    [NETFILTER]: ipt_hashlimit: Remove custom msecs_to_jiffies() macro
    
    Replace the MS2JIFFIES() macro with the msecs_to_jiffies() function provided in
    jiffies.h.  The current macro is incorrect because HZ can have different values
    on different architectures.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit faf3034ed66a3400cc90574e9e8022b5f7609bfd
Author: jix@bugmachine.ca <jix@bugmachine.ca>
Date:   Thu Mar 31 06:30:09 2005 -0800

    [NETFILTER]: ipt_hashlimit: Fix bug introduced by hlist changes.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2b49e85464e3e2e1ce30bf6df6e40b5260cb342c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 31 06:28:03 2005 -0800

    [ISDN]: Fix off-by-one errors in isdn_ppp.c
    
    This patch fixes several off by one errors found by the Coverity checker
    (ippp_table has ISDN_MAX_CHANNELS elements).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b72e012203fe9a4c6083108ddf1f4d66143abe7f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 31 06:27:11 2005 -0800

    [IPSEC]: Make IPCOMP more resilient.
    
    Since the IPCOMP header is left off when the payload is incompressible
    or too small, we can also do the same thing when we encounter an error
    during compression.
    
    In other words, we can let outbound IPCOMP always succeed.  In the cases
    where it would currently fail we simply skip the IPCOMP transform.  This
    makes IPCOMP slightly more resilient when memory is low and simplifies
    the code quite a bit.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 28a60e50ba50594a870e47784cf845142c5ed661
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Thu Mar 31 06:25:26 2005 -0800

    [NET]: Remove i_sock
    
    Remove i_sock from struct inode.  Also remove some checks for SOCKET_I()
    returning NULL -- it can never return NULL for a valid inode.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1f2ad0e4a5499c03409dda5980a7c1bc48ac6aaa
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 31 06:24:38 2005 -0800

    [XFRM]: Simplify xfrm_policy_kill().
    
    So here is a patch to simplify xfrm_policy_kill() by moving the
    GC linking after the write_unlock_bh().
    
    Actually, as the code stands, xfrm_policy_kill() should/will never
    be called twice on the same policy.  So we can add a warning to
    catch that.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b84c6431470729efeb5cc2a9f2e45da053cc25e
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Thu Mar 31 06:05:17 2005 -0800

    [SPARC]: Implement pte_read() more cleanly.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 384b4336e40d686e7a617adc1af032f2915f9733
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 31 05:20:06 2005 -0800

    [IPSEC]: Check if SPI exists before creating acquire state.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0038bccf6b28af630e05c75cc1ef516ecd7e92f9
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 31 05:19:27 2005 -0800

    [IPSEC]: Check SPI in xfrm_state_find()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 71bf6e6d7605727cc287644a11da8e70fd2c63b6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 31 05:18:16 2005 -0800

    [IPSEC]: Move xfrm_flush_bundles into xfrm_state GC
    
    Fixes ABBA deadlock noticed by Patrick McHardy.
    
    The locking in xfrm_state/xfrm_policy has always struck me as being
    an overkill.  A lot of the locks should be replaced by rules that
    ensure the validity of most operations while a ref count is held.
    Now I have an excuse to do just that :)
    
    For 2.6.12 let's go for a simpler fix that breaks the dead lock.
    
    __xfrm_state_delete does not need to flush the bundles immediately.
    In fact, it is more efficient if we delay the flush to the GC worker
    since the flush is not dependent on any particular xfrm state.  By
    delaying it we can do one single flush even when you're deleteing
    the entire xfrm state list.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 102bbba64bde80e5cf25119096dba81adcf53933
Merge: 841d26e... 15d26df...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 31 05:14:28 2005 -0800

    Merge bk://kernel.bkbits.net/acme/net-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 841d26e7e026eb5197b8073a6bf3f530b9f7603b
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Thu Mar 31 04:38:15 2005 -0800

    [BONDING]: Do not drop non-VLAN traffic
    
    Change the bonding driver to not drop non-VLAN traffic when a
    VLAN is configured above it.  Originally fixed by Olaf Kirch
    <okir@suse.de>; I changed his patch slightly to update comments.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 824391a1a90c63ee28e62eb1e9c49981b103a975
Author: Catalin Boie <util@deuroconsult.ro>
Date:   Thu Mar 31 04:36:08 2005 -0800

    [PKT_SCHED]: Fix deadlock in sch_api.c
    
    While qdisc_create() is holding the rtnl_sem, it may try
    to load modules which in turn may try to register devices
    (teql is one such case), and it will then hang trying to
    retake the rtnl_sem.
    
    Signed-off-by: Catalin Boie <catab@umbrella.ro>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6762bc7b42787313b20f23342a83e76ba570761
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 31 04:32:53 2005 -0800

    [PKT_SCHED]: netem: Account for packets in delayed queue in qlen
    
    Netem has a private queue for delayed packets, and currently, packets
    in this queue are not accounted for in the qdisc qlen statistics.
    This is a problem if netem is used inside another qdisc doing rate
    control that peeks at the qlen.
    
    This patch changes the statistics to include the packets held but
    not ready to send.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4492174a34f3118342587bedef10117817179375
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 31 04:29:09 2005 -0800

    [NETLINK]: More complete fix for race.
    
    Unfortunately my patch only closed half the race.  There is still
    a chunk of code between netlink_dump_start and netlink_dump that runs
    outside the cb lock which isn't protected by an sk reference.
    
    Here is a better patch which protects the entire netlink_dump function
    with a sk reference.
    
    The other call to netlink_dump by recvmsg is safe as the open file
    descriptor already holds a reference.  As such the final sock_put
    in netlink_dump can be turned into a __sock_put since there is at
    least one reference held by the caller.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1cccd684e70ddcba500fb14712d55c0ebe459e0
Merge: 3bd1ae4... 662756c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 31 01:11:29 2005 -0800

    Merge http://lia64.bkbits.net/linux-ia64-release-2.6.12
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 662756c753b13231d437e4bc78032b5891c9d4ea
Merge: 1a89e51... 8d7c763...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 31 00:29:06 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/1
    into intel.com:/data/home/aegl/BK/linux-ia64-release-2.6.12

commit 1a89e511e152998311f49c60e55b21d48d1b8973
Merge: 5227ffd... 3d5e39c...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 31 00:26:23 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/0
    into intel.com:/data/home/aegl/BK/linux-ia64-release-2.6.12

commit 5227ffd37189ab2c6d442ab5b43c7a0636622e01
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Mar 31 00:24:49 2005 -0800

    [IA64] CONFIG_NUMA requires CONFIG_ACPI_NUMA
    
    arch/ia64/kernel/smpboot.c:511:17: #error Fixme: Dunno how to build CPU-to-node
    map.
    
    Seems that CONFIG_NUMA requires CONFIG_ACPI_NUMA.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit de69281a2124509eb96a50a6b95e033e8e2af871
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Mar 31 00:21:27 2005 -0800

    [IA64] Andrew's fixes for warnings on ia64 build
    
    drivers/pci/msi.c: In function `msi_set_mask_bit':
    drivers/pci/msi.c:70: warning: cast from pointer to integer of different size
    drivers/pci/msi.c: In function `msi_capability_init':
    drivers/pci/msi.c:558: warning: cast to pointer from integer of different size
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1f892e799c51bb4395f15c9b10e6d0355309e468
Author: David Mosberger <davidm@hpl.hp.com>
Date:   Thu Mar 31 00:15:46 2005 -0800

    [IA64] Initialize ar.k7 to empty_zero_page early on.
    
    Without this initialization, early TLB misses to any user-regions will
    cause the TLB miss handlers to go down in flames.  Normally, no such
    early TLB misses occur, but aggressive use of lfetch.fault can trigger
    it easily (e.g., when using lfetch.fault for the
    prefetch()/prefetchw() macros we get an early miss for address 0 due
    to a prefetch in find_pid()).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit acaf240e91e52280da508b38a5d2da8a55583545
Author: Bob Montgomery <bob.montgomery@hp.com>
Date:   Thu Mar 31 00:10:45 2005 -0800

    [IA64] fix for unwind problem through dispatch_illegal_op_fault
    
    Here is the patch worked out with David Mosberger to fix the unwind info
    for dispatch_illegal_op_fault in ivt.S.  Before adding this patch, an
    illegal op in the kernel would not show a complete stack trace in the
    oops message.
    
    Add PT_REGS_UNWIND_INFO to dispatch_illegal_op_fault to allow stack
    unwind to continue through that stack level when kernel code commits an
    illegal operation.
    
    Signed-off-by: Bob Montgomery <bob.montgomery@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3bd1ae489f9b08a665a7d3d598cd3b6f67efa7b6
Merge: 3a0798d... ebbe7b6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 30 23:49:27 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/i2c-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 2803c46316ed4a40390d146736cfde137fd114ee
Merge: f937b47... 056f267...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Mar 30 23:48:32 2005 -0800

    Merge intel.com:/data/home/aegl/BK/Linus
    into intel.com:/data/home/aegl/BK/linux-ia64-release-2.6.12

commit f4b9bfe34026406a19d58626b14f1a86454adf30
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 22:56:22 2005 -0800

    [SPARC64]: Put per-cpu area base into register g5.
    
    FINALLY, we can put the per-cpu base into register
    g5 on SMP.  There are many simplifications and improvements
    now, but this is the base implementation.
    
    Thanks to Rusty and the IA64 folks for urging that I pursue
    this kind of scheme instead of locking stuff into the TLB
    at some fixed virtual address.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebbe7b61a562c8ff9c27c85091e81dcb7a64241d
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Wed Mar 30 22:33:14 2005 -0800

    [PATCH] i2c: i2c-mv64xxx - set adapter owner and class fields
    
    This patch adds the correct values for the 'owner' and 'class' fields of
    the adapter structure in the mv64xxx i2c bus driver.  The missing class
    field caused some i2c chip drivers to refuse to attempt a probe on the
    mv64xxx i2c bus.
    
    Signed-off-by: Chris Elston <chris.elston@radstone.co.uk>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 12411eb0d191f7616b7eba560f7ddf88817741ab
Author: grant_nospam@dodo.com.au <grant_nospam@dodo.com.au>
Date:   Wed Mar 30 22:32:55 2005 -0800

    [PATCH] I2C: Drop useless w83781d RT feature
    
    This patch removes useless RT feature from w83781d driver.
    
    Patch applies after the recent "I2C: Fix a common race condition
    in hardware monitoring" series.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5249fba7239f98b15382e6e758ec9c32775ae507
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:32:36 2005 -0800

    [PATCH] I2C: Fix indentation of lm87 driver
    
    This trivial patch fixes indentation in the lm87 driver. I need this
    'cause I'll soon post patches affecting these portions of code, and I'd
    like these patches to be easily readable.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11543882368ecb38b880b4e3ae605be3d59371dd
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:32:17 2005 -0800

    [PATCH] I2C: Fix broken force parameter handling
    
    I just noticed a nasty bug in the way the "force" parameter is handled
    for non-sensors i2c chip drivers. The "force" parameter supposedy is a
    list of adapter, address *pairs* where supported chips are
    unquestionably assumed to be. However, after handling one pair, the i2c
    core code searches for the next one *three* values later, not two. So
    with the current code, the second and third pairs wouldn't be properly
    handled. The fourth one would be, and so on.
    
    As a side note, this questions the need of an array parameter handling
    up to 24 of such pairs, when obviously nobody ever required more than
    one for the past 6 years.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7343e7c77c30d385c0a4e0b4adfbd5bdbf647fdf
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:31:59 2005 -0800

    [PATCH] i2c: add adt7461 chip support to lm90 driver's Kconfig entry
    
    Hi Greg, James, all,
    
    > > > Attached is another version of my adt7461 patch, for inclusion in
    > > > the 2.6 tree. Reviewed by Jean.
    >
    > May we have an additional patch to Kconfig for this one?
    
    Here it finally comes.
    
    This simple patch adds a mention to the ADT7461 chip in Kconfig, now
    that the lm90 driver supports it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c54a6e6befadf7648f9a106505bb1bffa2f54e7d
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:31:40 2005 -0800

    [PATCH] I2C: i2c-s3c2410 functionality and fixes
    
    This patch does the following updates to the i2c-s3c2410 bus driver:
    
    * Properly report the i2c functionality by adding to the
      `.functionality` field of the adapter
    
    * Change the dev_err() call on no-ack to an dev_dbg() to make
      it less noisy when the bus is being probed by i2cdetect, etc.
    
    * Add I2C_M_REV_DIR_ADDR to fully implement the
      I2C_FUNC_PROTOCOLO_MANGLING.
    
    * Ensure that the adapter owner field is set to THIS_MODULE
    
    Please apply, thanks.
    
    (Once this is applied, all i2c bus drivers will be properly reporting
    their functionality so I'll be able to go on with the i2c functionality
    core cleanups.)
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9d8eaff2367739d3b0c96a6c83343b8ea1456062
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:31:21 2005 -0800

    [PATCH] I2C: Fix race condition in it87 driver
    
    I noticed a race condition in the it87, affecting the IT8712F chip only.
    The VRM value is currently initialized *after* creating the vrm and vid
    sysfs files. This leaves a theorical room for reading from these files
    and get an invalid value. It's not critical, but let's still fix it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit adcca21aa6af4df6d6e366434a5177a1f76d4355
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:31:02 2005 -0800

    [PATCH] I2C: Delete useless instruction in it87
    
    The IT8705F doesn't support VID, so it's quite pointless to give a value
    to it (and an arbitrary one at that). I think that this instruction was
    there for compatibility reasons some times ago, but the reasons went
    away while the instruction was left in place. We can safely delete it
    now.
    
    Thanks to Rudolf Marek for testing the patch (you never know).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e229b0f7bf6d2c347240f8309435c43f6fd951e0
Author: Rafael Ãvila de EspÃ­ndola <rafael.espindola@gmail.com>
Date:   Wed Mar 30 22:30:43 2005 -0800

    [PATCH] I2C: lsb in emc6d102 and adm1027
    
    The attached patches add support for reading the lsb from the emc6d102
    and change how they are read from the adm1027.
    
    The lm85_update_device function decodes the LSBs to temp_ext and in_ext.
    This strategy was suggested by Philip Pokorny.
    
    The patch also changes some macros to use the SCALE macro. I think that
    they become more readable this way.
    
    
    Signed-off-by: Rafael Ãvila de EspÃ­ndola <rafael.espindola@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f4ce18a3d9ce87b82c26ced004e7136d2ffce63
Author: Eric Brower <ebrower@gmail.com>
Date:   Wed Mar 30 22:30:24 2005 -0800

    [PATCH] I2C: lost arbitration detection for PCF8584
    
    [PATCH] lost arbitration detection for PCF8584 algo driver
    
    Patch against a slightly-dated linux-2.6 BK tree
    
    This patch provides lost arbitration detection for the PCF8584
    I2C algorithm driver.  The PCF8584 LAB bit is set whenever lost
    arbitration is detected, so we check the bit in the wait_for_pin
    function and if LAB is detected we return -EINTR.  The -EINTR
    value bubbles-up all the way to the master_xfer API call so
    callers may detect this condition explicitly.  LAB could be checked
    more often, at the expense of code readability/maintainability.
    
    Signed-off-by: Eric Brower <ebrower@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c10d3e4b15da22c193d40c7ade107509af11e7d0
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Wed Mar 30 22:30:05 2005 -0800

    [PATCH] I2C: busses documentation update 2 of 2
    
    Patch contains promised documentation update for i2c bus drivers.
    I would like to thank Jean Delvare and Aurelien Jarno for their
    comments.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5efe36c305f7927d9e06ba12465efba2e6dbeb73
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Wed Mar 30 22:29:46 2005 -0800

    [PATCH] I2C: busses documentation update 1 of 2
    
    This patch just moves i2c-parport file to busses directory.
    Patch for other busses documentation will follow.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fe198b354feb31463c396376359bfd684f2910dd
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:29:23 2005 -0800

    [PATCH] I2C: Fix Vaio EEPROM detection
    
    This fixes a bug in the eeprom driver, which made all EEPROMs at
    location 0x57 be erroneously treated as Vaio EEPROMs. I have to say I'm
    quite ashamed that I introduced the bug in the first place, as this was
    a really stupid one.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 939836f95cd1e78089f92c471c20b8d915a35a7f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:29:05 2005 -0800

    [PATCH] I2C: Recognize new revision of the ADT7463 chip
    
    This simple patch to the lm85 driver adds recognition of a new revision
    of the ADT7463 chip.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 79e63ffa339d60d47cdc4c5711009e2ef26e54fb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:28:46 2005 -0800

    [PATCH] I2C: Avoid repeated resets of i2c-viapro
    
    It was reported that the i2c-viapro SMBus driver sometimes has trouble
    on recent systems (VT8237 south bridge). The "Host Status" register has
    at least one additional bit used when compared with older south bridges
    of this family. The driver currently considers this additional bit as an
    error condition when it's set, causing repeated bus resets and sometimes
    read failures.
    
    This patch makes the driver ignore the bits of the "Host Status"
    register for which no definition is known. I wish I had a datasheet for
    the VIA VT8237, so that I could check what the additional bit is
    supposed to mean, but I don't. If someone has a datasheet or good
    contacts at VIA, please let me know.
    
    The patch was reported to fix the problem on a system with the VT8237,
    and was also tested not to break the driver on older VIA south bridges,
    so it seems to be safe. Thanks to Aurelien Jarno for the tests.
    
    Additionally, the patch makes the post-transaction bus reset slightly
    more efficient by sparing a few unneeded I/O operations.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cce0115c7b01dc9ed2b7be85eb9940db384de65f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:09:38 2005 -0800

    [PATCH] I2C: Kill outdated defines in i2c.h
    
    Some defines in i2c.h (I2C_CLIENT_MODPARM and friends) are now useless.
    They should have been removed when the i2c client parameters were
    converted from MODULE_PARAM to module_parm_array, but where not. This
    patch removes them now.
    
    Additionally, it moves the definition of I2C_CLIENT_MAX_OPTS next to
    where it is used rather than 220 lines before, which is preferable IMHO.
    
    As a side note, I think that there is a bug in the way these options are
    handled. The i2c code looks for I2C_CLIENT_END as a list terminator, but
    if the maximum number of parameters are actually provided, no terminator
    will be left. It's rather unlikely to happen because nobody will
    probably ever provide that many parameters, but this should probably be
    fixed. I'll address this issue later, since I plan to completely rewrite
    the way these parameters are handled anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 83be2048777eef368cf016ff54c31ba39f474a5b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:09:20 2005 -0800

    [PATCH] I2C: Fix some i2c algorithm initialization
    
    While searching for i2c_algorithm declarations missing their
    .functionality member, I found three of them which were not properly
    initialized. i2c-algo-ite and i2c_sibyte_algo do not use the C99
    initialization syntax, and i2c-ibm_iic.c explicitely initializes NULL
    members. Following patch puts some order in there.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 97bb8b5a4da985dd64205ac587c5f53203a31bd2
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Wed Mar 30 22:09:00 2005 -0800

    [PATCH] I2C: Fix breakage in m41t00 i2c rtc driver
    
    Remove setting of deleted i2c_client structure member.
    
    The latest include/linux/i2c.h:i2c_client structure no longer has an
    'id' member.  This patch removes the setting of that no longer existing
    member.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ac2093ee725623caaf34ebaa36709e10e38cfa31
Author: Frank Beesley <frank.beesley@aeroflex.com>
Date:   Wed Mar 30 22:08:41 2005 -0800

    [PATCH] I2C: Clean up of i2c-elektor.c build
    
    This patch changes the flags variable type from long to unsigned long in
    one function. This removes a couple of warnings from the compile
    messages for elektor i2c bus driver.
    
    Signed-off-by: Frank Beesley <frank.beesley@aeroflex.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9800e965a4fbe190a8b5bdb1b52b415564d67757
Author: James Chapman <jchapman@katalix.com>
Date:   Wed Mar 30 22:08:21 2005 -0800

    [PATCH] i2c: add adt7461 chip support to lm90 driver
    
    i2c: add adt7461 chip support
    
    The Analog Devices ADT7461 temperature sensor chip is compatible with
    the lm90 device provided its extended temperature range is not
    enabled.  The chip will be ignored if the boot firmware enables
    extended temperature range.
    
    Also, since the adt7461 treats temp values <0 as 0 and >127 as 127,
    the driver prevents temperature values outside the supported range
    from being set.
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9b3cc645c34014149c3c66bf38e6b6f715d345b2
Author: James Chapman <jchapman@katalix.com>
Date:   Wed Mar 30 22:08:02 2005 -0800

    [PATCH] i2c: new driver for ds1337 RTC
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 723b671797aa735903e11c240e014beb50487481
Author: grant_nospam@dodo.com.au <grant_nospam@dodo.com.au>
Date:   Wed Mar 30 22:07:43 2005 -0800

    [PATCH] I2C: group Intel on I2C Hardware Bus support
    
     From an end-user perspective it is easy to miss the third Intel PIIX
    entry on the menuconfig "I2C Hardware Bus support" screen.
    Also the Intel 801 menu item does not mention ICH.
    
    This trivial patch groups three Intel entries together, adds ICH to
    menu item, and ICH5/ICH5R to the help section.  Includes suggestions
    from Jean Delvare.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a7d66b47239c8f5ffdf03093ea9142600f81d21
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:07:24 2005 -0800

    [PATCH] I2C: Skip broken detection step in it87
    
    One of the detection steps in the it87 chip driver was reported to be
    broken for some revisions of the IT8712F chip [1] [2]. This detection
    step is a legacy from the lm78 driver and the documentation available
    for the IT8705F and IT8712F chips does not mention it at all. For this
    reason, I propose to skip this detection step for Super-I/O chips.
    Super-I/O chips have already been identified when we reach this step, so
    it is redundant (additionally do being broken). This closes bug #4335.
    
    [1] http://bugzilla.kernel.org/show_bug.cgi?id=4335
    [2] http://archives.andrew.net.au/lm-sensors/msg29962.html
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e6f6019ad2a158520072f411f74599952147b8ec
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:07:05 2005 -0800

    [PATCH] I2C: Make master_xfer debug messages more useful
    
    While working on the recent saa7110 mess, I found that the debug message
    displayed when calling master_xfer wasn't as useful as it could be. Here
    is a patch improving this.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 08b49e0edf37d950c32329978d1c6f30021164ea
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:06:47 2005 -0800

    [PATCH] I2C: Kill unused struct members in w83627hf driver
    
    I just noticed that the pwmenable struct members in the w83627hf driver
    are not used anywhere (and quite rightly so, as PWM cannot be disabled
    in these chips as far as I know). Let's just get rid of them and save
    some bytes of memory.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 74ba4335539bd1c2e8138d636619b580824892af
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:06:28 2005 -0800

    [PATCH] I2C: Fix adm1021 alarms mask
    
    This patch fixes an incorrect bitmasking on the status register in the
    adm1021 driver, which was causing high alarm on remote temperature to be
    hidden.
    This bug was found and reported by Jayakrishnan:
      http://bugzilla.kernel.org/show_bug.cgi?id=4285
    
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f8ccbc0bd0365c581be7819949120927501529e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:06:09 2005 -0800

    [PATCH] I2C: Cleanup adm1021 unused defines
    
    While working on the adm1021 driver, I found that this driver has a
    number of unused (and useless) defines we could get rid of.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c32de391c35d5f6da1e61f2b3f1648b3dd6b77ae
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 30 22:05:50 2005 -0800

    [PATCH] I2C: New lm92 chip driver
    
    This is a new i2c chip driver named lm92. It supports the National
    Semiconductor LM92 and Maxim MAX6635 chips. This time I did not port the
    driver from the lm_sensors project but instead rewrote it. The reason is
    that the original driver has a different structure from the other i2c
    chip drivers, which would have made maintenance harder.
    
    I don't have a compatible chip myself but could test my code thanks to
    Mark Hoffman's i2c-stub fake bus driver. Later on, James Chapman tested
    it on a real chip, successfully.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 739a3ab01723c3751465fbd65a5c647b9bcb5267
Author: Domen Puncer <domen@coderock.org>
Date:   Wed Mar 30 22:05:31 2005 -0800

    [PATCH] i2c/i2c-elektor: remove interruptible_sleep_on_timeout() usage
    
    Replace deprecated interruptible_sleep_on_timeout() with direct
    wait-queue usage. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 587916e8047812ec4e672e738772818d00117713
Author: Domen Puncer <domen@coderock.org>
Date:   Wed Mar 30 22:05:14 2005 -0800

    [PATCH] i2c/i2c-ite: remove interruptible_sleep_on_timeout() usage
    
    Replace deprecated interruptible_sleep_on_timeout() with direct
    wait-queue usage. Patch is compile-tested, sort of; the driver does not build in
    vanilla kernel either, but I don't seem to add any warnings..
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3a0798d0167d59768151953e3eb774b4303e7ddd
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Mar 30 19:27:34 2005 -0800

    [PATCH] Fix incorrect bluetooth socket zapping
    
    On Tue, 2005-03-15 at 22:50 +0000, Linux Kernel Mailing List wrote:
    > -       parent->sk_zapped = 1;
    > +       sock_set_flag(sk, SOCK_ZAPPED);
    
    Er, no. That zapped the wrong socket.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b4155300fc0cdc66ac07846899dc84dc3a2dfb4
Merge: f937b47... 81df61b...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 18:52:38 2005 -0800

    Merge bk://kernel.bkbits.net/tgraf/net-2.6-trunk
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 81df61b91fd240465a4b6ba6b77d3642decfa91b
Author: Thomas Graf <tgraf@suug.ch>
Date:   Thu Mar 31 18:34:31 2005 +0200

    Cset exclude: tgraf@suug.ch|ChangeSet|20050316221421|24742

commit f937b476f5353acc37be22a2f59c7b0f2fc77c8e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:01:50 2005 -0800

    [PATCH] nfsd4: fix indentation in nfsd4_open
    
    OK, so it's trivial, but these misaligned comments have been bugging me
    forever....
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0de0fd94cd8636a6fa6cdc73b4853a63744820eb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:01:33 2005 -0800

    [PATCH] nfsd4: fix open returns for other claim types
    
    Switch on OPEN claim type instead of if-else. add remaining OPEN claim types.
    
    Return nfserr_notsupp instead of nfserr_inval for valid claim types.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90317f80c82f9c7e597ed9bb80540270e582c535
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:01:15 2005 -0800

    [PATCH] nfsd4: remove trailing whitespace from nfs4proc.c
    
    Trivial whitespace
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efeea01e3ade8d057d2baa99bb8ba2c650d35682
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:00:57 2005 -0800

    [PATCH] nfsd4: rename release_delegation
    
    Release_delegation is responsible for removing the delegation's connection
    with the v4 state and with the lease subsystem.  The word "unhash" seems
    closer than "release" as a description of this....
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6785603ff6ee4c3500ffc78fdeee0f59ace3591b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:00:38 2005 -0800

    [PATCH] nfsd4: acl error fix
    
    When a client sends an ACL that is a legal NFSv4 ACL, but that we don't
    support (because we can't represent it using a POSIX ACL), the correct error
    to return is NFS4ERR_ATTRNOTSUPP.
    
    (rfc3530, section 5.11.1: "If the server recieves a request to set an ACE that
    it cannot store, it MUST reject the request with NFS4ERR_ATTRNOTSUPP.  If the
    server receives a request to set an ACE that it can store but cannot enforce,
    the server SHOULD reject the request with NFS4ERR_ATTRNOTSUPP").
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05446e455e965f635e4ee00f0b678c9d07a3790e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:00:22 2005 -0800

    [PATCH] nfsd4: acl don't set named attrs
    
    We were expecting {read,write}_named_attributes to be set in sync with the
    read and write bits.  But we don't actually support named attributes, and when
    we eventually do, it's unlikely that we'll want to use these ACL mode bits to
    control access to them.  So let's just stop supporting these two bits.
    
    This also updates our mapping to the latest ietf draft.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8f610b63dbd01e83fa7c5569f28eabcae6774ab
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 17:00:03 2005 -0800

    [PATCH] nfsd4: don't set WRITE_OWNER in either allow or deny bits
    
    WRITE_OWNER should be neither allowed nor denied.
    
    This improves interoperability with Solaris clients and represents our
    permissions more accurately.
    
    It breaks compatibility with clients using the old version of the
    NFSv4<->POSIX mapping.  I believe the only code that did that was older
    versions of experimental client-side code available only from our website, so
    I prefer not to introduce a hack just to continue support the old mapping.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f33f4432826b4777ae5de2ba86de31ddef6874d
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:59:47 2005 -0800

    [PATCH] nfsd4_remove_unused_acl_function
    
    We're translating v4 ACL's to POSIX ACL's and relying on the filesystem to
    check those, so there's no need for a NFSv4 ACL-checking algorithm.
    
    Some day we'd like to find a way to implement the full v4 ACL protocol on the
    server side, but for now this is dead code.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e06799ec1c744c19f423496ec5afb8ad15968d0
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:59:29 2005 -0800

    [PATCH] nfsd4: fix failure to truncate on some opens
    
    An OPEN upgrade on a file already open for WRITE will not upgrade the OPEN,
    but can still truncate the file.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a090f986f1e998a3645dd7f5fd9b7371e439888
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:59:12 2005 -0800

    [PATCH] nfsd4: factor out common open_truncate code
    
    Factor out a bit of common code.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b756e57399a22b346b0fd6d1ecdc5dd1748daa5
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:58:55 2005 -0800

    [PATCH] nfsd4: allow read on open for write
    
    The rfc recommends allowing read using stateid's from opens that only
    requested write access, as clients may in some cases be unable to write
    without doing reads.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05882be9f254e58ee0e13359949b493e89eb181b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:58:38 2005 -0800

    [PATCH] nfsd4: fix use after put() in cb_recall
    
    nfs4_put_delegation() did a dprintk using a pointer that it had just called a
    put() on.  This could cause a dereference of a pointer to freed memory in some
    situations.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 700e5f1d7cf872e0f4e747ce2cb99960f45eaa0e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:58:20 2005 -0800

    [PATCH] nfsd4: remove unneeded stateowner arguments
    
    Remove the unneeded stateowner argument from nfs4_check_open() and
    init_stateid.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 511f905214890b13964a4f730b8eecb0ba45b957
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:58:03 2005 -0800

    [PATCH] nfsd4: fix share conflict tests
    
    In nfs4_check_open():
    
    Move 'is_open_owner' check to be first.  Remove continue so as to call
    test_share on OPENs with a previously seen open_owner as per rfc3530.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b32f810ad9fd334b08e8efd027681cbdf75d3590
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 30 16:57:45 2005 -0800

    [PATCH] svcrpc: auth_domain documentation
    
    The use of auth_domains is somewhat confusing, in part because they were
    originally intended to be used in a more general way than they currently are.
    
    Update the documentation a little with an eye towards how it's currently used.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5ab2d0eda4619133d683a6794443a5dfde73758
Author: Jonathan Corbet <corbet@lwn.net>
Date:   Wed Mar 30 16:50:03 2005 -0800

    [PATCH] doc: where to find LDD3
    
    Here's an only mildly self-serving patch so that interested people can find
    the free version of LDD3.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff4cf61bc4290b9c2eb6c853ce23d9c2f749eeee
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:49:44 2005 -0800

    [PATCH] Fix atyfb build on ppc
    
    This patch fixes a build problem with atyfb on ppc.  It uses the stuff in
    macmodes.c, but doesn't trigger the build of it.  So if no other driver
    using macmodes is built, the link will fail.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 391438fa4d4e36caac092fe7cd2dfa7a26ef7519
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:49:28 2005 -0800

    [PATCH] radeonfb: Preserve TMDS setting
    
    radeonfb tends to override TMDS_TRANSMITTER_CNTL completely, which appears
    to be incorrect with some recent flat panels.  This patch changes this so
    that we only tweak the bits we want in there and preserve the BIOS value
    for the rest.
    
    Along with the i2c fix, that patch fixes operations on the latest Apple
    cinema displays.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb487640f5f09fa2c31b418d3036628c974b99b7
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:49:09 2005 -0800

    [PATCH] radeonfb: Fix mode setting on CRT monitors
    
    Current radeonfb is a bit "anal" about accepting CRT modes, it basically
    only accepts modes that have the exact resolution, which tends to break
    with fbcon on console switches as it provides "approximate" modes.  This
    patch fixes it by having the driver chose the closest possible mode instead
    of looking for an exact match.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fc97ba68cb8685e2e9b4ae2899b18fd30b33dbc
Author: Petr Vandrovec <vandrove@vc.cvut.cz>
Date:   Wed Mar 30 16:48:52 2005 -0800

    [PATCH] Fix matroxfb on big-endian hardware
    
    There was too much/too few byteswapping done by driver and hardware in
    matroxfb on big endian hardware.  Change fixes mirrored/split/corrupted
    letters seen on screen when using accelerated matroxfb mode.
    
    Patch was tested on Mips (by Peter) and x86-64 (by Petr).
    
    Signed-off-by: Peter 'p2' De Schrijver <p2@mind.be>
    Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a49b4cffbe27108ddd30dbf865fdd4b556772e0c
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Wed Mar 30 16:48:34 2005 -0800

    [PATCH] remove redundant NULL checks before kfree() in drivers/video/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7329205e5ad699005f3129c8c078aa86dbc51a3
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:48:17 2005 -0800

    [PATCH] neofb: Set hwaccel flags properly
    
    Not all neomagic chipsets are capable of hardware acceleration.  Set the
    hwaccel flags only for chipsets that can do so.
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8423c85771f3bf675659acb2ae202fff17e6cb93
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:48:00 2005 -0800

    [PATCH] neofb: mmio fixes
    
    Changes in neo_map_mmio to make neofb working on NM2070, NM2090, NM2093.
    
    From: Marek Marczykowski <marmarek@staszic.waw.pl>
    Signed-off-by: Marek Marczykowski <marmarek@staszic.waw.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 075f215de04547028131c425079712d4888f0d5a
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:47:43 2005 -0800

    [PATCH] fbcon: Do not set palette if console is not visible
    
    A long standing bug in fbcon where switching/opening a vt will also set the
    palette even if the vt is in the background.  This results in color corruption
    in the foreground vt.
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92d3fa193ea4a104b5590b9687b27dbba4308c5f
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:47:26 2005 -0800

    [PATCH] fbcon: Call set_par per fb_info once during init
    
    Currently, fbcon will unconditionally do set_par's on all info's mapped to
    each console.  This results in repetetive hardware initialization when one is
    enough.  Fix this by skipping all fbdev's that already underwent
    initialization.
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03fb6c4a52cb7e37bcc31b1ed032072026cf168e
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:47:09 2005 -0800

    [PATCH] fbcon: Save var rotate field in struct display
    
    Add the rotate field among parameters saved in struct display (per console
    structure).  Some out-of-tree drivers are possibly using this field.
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d763cbf630df86b4b194de89de581ff4da6430ca
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Wed Mar 30 16:46:52 2005 -0800

    [PATCH] s1d13xxxfb: Add support for Epson S1D13806 FB
    
    Add support for Epson S1D13806 framebuffer device.
    
    The driver is intended to be easily used with other S1D13xxx devices,
    hopefully by splitting the header file and changing a few defines.  Since I
    haven't got the hardware to test that, though, I can only assert that it
    works with S1D13806.
    
    This driver has been succesfully tested on ARM embedded boards and reported
    working on SH architecture as well.
    
    Since this is my first framebuffer driver, I would welcome any
    suggestion/comment about it :)
    
    This driver has been built on top of some preliminary ARM specific work by
    Ben Dooks, and adapted from existing code (as stated in the header of
    s1d13xxxfb.c).
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c024519f6ec1a74ba2d4241a75744e2ce637093
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:46:34 2005 -0800

    [PATCH] tridentfb: Clean up printk()'s
    
    This patch adds KERN_ constants to all of the printk()'s that need them in
    drivers/video/tridentfb.c
    
    Signed-off-by: James Nelson <james4765@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66db5e895fcffb726e38e1b6455e11f89b6ce6ef
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:46:17 2005 -0800

    [PATCH] sisfb: Trivial cleanups
    
      sis_main.c vfree() checking cleanups.
      convert from pci_module_init to pci_register_driver
    
      (from:http://kerneljanitors.org/TODO).
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed5f9155a80ccfac36fad06d17823fd38ff0796c
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:45:59 2005 -0800

    [PATCH] fbdev: Convert drivers to pci_register_driver
    
      convert from pci_module_init to pci_register_driver
      (from:http://kerneljanitors.org/TODO).
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96d66c5e48978f7987994b27d04178b535e73226
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:45:41 2005 -0800

    [PATCH] fbdev: Kconfig fix for macmodes and PPC
    
    Fix link error for PPC-based drivers that also use functions in macmodes.c.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9a8095a147a93e259ef76615574402fdbaab6c0
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:45:24 2005 -0800

    [PATCH] atyfb: Add boot/module option to override composite sync
    
    Some SPARC-based displays need the composite sync set to high.  Since none
    of the entries in the default db has the composite sync set to high, using
    fb_find_mode() will produce a blank display.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Acked-by: Alexander Kern <alex.kern@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27d9ca3351ce45fe580c7d0b311253492cd49ae6
Author: Alexander Kern <alex.kern@gmx.de>
Date:   Wed Mar 30 16:45:06 2005 -0800

    [PATCH] Excessive atyfb debug messages
    
    Debug is no longer needed by default.  Driver is pretty stable.
    
    Signed-off-by: Alexander Kern <alex.kern@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06fe6e5ab6231db36aa4c163fa71789bcdbeb3dd
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:44:48 2005 -0800

    [PATCH] fbdev: Cleanups in drivers/video part 2
    
    This patch contains cleanups under drivers/video/ including:
    - make some needlessly global code static
    - the following was needlessly EXPORT_SYMBOL'ed:
      - fbcon.c: fb_con
      - fbmon.c: get_EDID_from_firmware (completely unused)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 520b29528dfa2cc5ac722a720b6824802872dff8
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:44:30 2005 -0800

    [PATCH] pm2fb: X and VT switching crash fix
    
    From: Jim Hague
    
    This is a bug in pm2fb.c exposed by recent changes to fbcon.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a601b347030f3db06944aa2019f687b3275fdae3
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:44:13 2005 -0800

    [PATCH] nvidiafb: Delete i2c bus on driver unload
    
    The driver nvidiafb fails to delete the i2c bus on load failure or unload.
    Fix
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56a0f592b5f9245285670f2a0f2cea070405c825
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:43:56 2005 -0800

    [PATCH] nvidiafb: Process boot options earlier
    
    A few options, such as noscale, are processed after hardware has been
    configured which render them useless.  This manifest as failure of DVI
    displays to scale.
    
    Process them earlier.
    
    From: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f6498653b4cb791260171fb3e97f18f13b316ae
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:43:39 2005 -0800

    [PATCH] nvidiafb: Kconfig help text update for config FB_NVIDIA
    
    Tiny trivial patch to fix up the help text for config FB_NVIDIA.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5928eafeaf2ac96b0ab3db0461a6199b30b444e2
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 30 16:43:22 2005 -0800

    [PATCH] nvidiafb: fix section references
    
    Fix section usage in nvidiafb driver.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46563c7ae61c27154ee8557176669a75b21179a4
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:43:05 2005 -0800

    [PATCH] nvidiafb: Maximize blit buffer capacity
    
    Currently, nvidiafb blit expands a rectangle a scanline at a time.  This is
    very inefficient because the graphics pipeline is not maximized.  It may also
    crash if the scanline is > 4096 (should not happen with fbcon though).
    
    Instead of blitting a scanline at a time, attempt to fill up buffer to maximum
    capacity.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2859de99c8a8f32ee7287d2c01e268b7e64bdd2a
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:42:48 2005 -0800

    [PATCH] fbcon: Stop framebuffer operations before hardware is properly initialized
    
    Accessing the hardware before it is properly initialized can lead to crashes
    or screen corruption.  This happens when switching to X then back to console.
    When console comes back from X, the device is in an undefined state.  During
    this window, accessing the hardware is disallowed.
    
    A new field in fbcon_par is added (graphics), which will be set to nonzero
    just before initialization of the framebuffer and when coming back from
    KD_GRAPHICS, then unset when an fb_set_var/fb_set_par is done.  While this
    field is set, no accesses to the hardware is done.  The consequence of this
    change is, hopefully, more robust switching between KD_GRAPHICS<-> KD_TEXT.
    
    An added benefit coming from this change is that the MODESWITCHLATE hack is
    not needed anymore and thus removed.  This hack is used by savagefb, rivafb
    and nvidiafb.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 835b1e211a24ffce3115b25f39882108a1af5386
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 30 16:42:31 2005 -0800

    [PATCH] fbdev: mvidia licensing clarification
    
    Mark said that the nVidia licensing is MIT-style, so it should be okay.
    I'm including a patch that adds a small licensing comment on the pertinent
    files and also adds the license notice in nv_accel.c, just to be on the
    safe side.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47b343b318bdc258739c3c4c486fa1d8fbcab12b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:42:14 2005 -0800

    [PATCH] radeonfb: DDC i2c fix
    
    The radeonfb code for DDC probing (like it's X.org counterpart) uses to
    leave the DDC clock & data lines asserted after the probing is complete.
    This causes problems with some Apple monitors like the new Cinema HD 23",
    who will turn themselves off when that happens.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f55b27076a1c00b1374cd22cb295d7671eff27ee
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:41:57 2005 -0800

    [PATCH] radeonfb: Implement proper workarounds for PLL accesses
    
    After discussion with ATIs, it seems that the workarounds they initially gave
    me were not completely correct.
    
    This patch implements the proper ones, which includes sleeping in PLL
    accesses, and thus requires the previous patch to make sure we do not call
    unblank at interrupt time (unless oops_in_progress is set, in which case I use
    an mdelay).
    
    It also removes obsolete code that used to disable some power management
    features in the accel init code.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 305b6ba657870491b687c1fcd4f660dd54953add
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:41:40 2005 -0800

    [PATCH] ppc32: move powermac backlight stuff to a workqueue
    
    The powermac has a kernel-based driver for controlling the backlight from
    the keyboard that used to call into some fbdev's from interrupt contexts.
    This patch moves it to a workqueue (and additionally makes sure the console
    semaphore is taken and held).
    
    I hope I'll replace this by the new backlight framework in a future kernel
    version, but for now, this will fix the immediate issues with radeon.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79568b259e375ca02af4263b18abfb5d91e626c7
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 30 16:41:23 2005 -0800

    [PATCH] vt: don't call unblank at irq time
    
    This patch removes the call to unblank() from printk, and avoids calling
    unblank at irq() time _unless_ oops_in_progress is 1.  I also export
    oops_in_progress() so drivers who care like radeonfb can test it and know
    what to do.  I audited call sites of unblank_screen(), console_unblank(),
    etc...  and I _hope_ I got them all, the patch includes a small patch to
    the s390 bust_spinlocks code that sets oops_in_progress back to 0 _after_
    unblanking for example.
    
    I added a few might_sleep() to help us catch possible remaining callers.
    
    I'll soon write a document explaining fbdev locking.  The current situation
    after this patch is that:
    
    - All callbacks have console_semaphore held (fbdev's are fully
      serialised).
    
    - Everything is called in schedule'able context, except the cfb_*
      rendering operations and cursor operations, with the special case of
      unblank who can be called at any time when "oops_in_progress" is true.  A
      driver that needs to sleep in it's unblank implementation is welcome to
      test that variable and use a fallback path (or just do nothing if it's
      not simple).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c373c0215bd782a874318673a8e5193ad21a107
Author: Ronald Bultje <rbultje@ronald.bitfreak.net>
Date:   Wed Mar 30 16:41:06 2005 -0800

    [PATCH] zr36050 typo fix
    
    Fix a typo.  It doesn't cause anything bad (at least not on my computer
    according to some tests), but who knows, maybe it fixes some obscure
    unfixeable bug for some people.
    
    Signed-off-by: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 535684d309abf536c76c92ba659261b8ba074636
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Wed Mar 30 16:40:49 2005 -0800

    [PATCH] sched: fix schedstats warning
    
    Quiet a warning when compiling without CONFIG_SMP
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 540ab745282dfb4f87ab81994a12673f0f99cf68
Author: Robert Love <rml@novell.com>
Date:   Wed Mar 30 16:40:32 2005 -0800

    [PATCH] iput() can sleep
    
    iput() can sleep.  Document it.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 821c2ed6e2df804039b994c52615fd6bc756c8ab
Author: Prasanna S. Panchamukhi <prasanna@in.ibm.com>
Date:   Wed Mar 30 16:40:16 2005 -0800

    [PATCH] Kprobes: Allow/deny probes on int3/breakpoint instruction?
    
    Kprobes did an improper exit when a probe is inserted on an int3
    instruction.  In case of normal execution of int3/breakpoint instruction,
    it oops!.  Probe on an int3 instruction was not handled properly by the
    kprobes, it generated faults after oops!  doing an improper exit with
    holding the lock.  This fix employes a bit different method to handle probe
    on an int3/breakpoint instruction.
    
    On execution of an int3/breakpoint instruction (placed by kprobe),
    kprobes_handler() is called which sets it for single stepping in-line(it
    does not matter whether we single step out-of-line/inline since the single
    stepping instruction is same).  Now it single steps on int3/breakpoint
    instruction here, entering kprobes_handler() once again.  Kprobes now
    check's the status that it is single stepping and avoids the recursion.  It
    runs down through the trap handler and oops messages is seen on the console
    since it executed int3/breakpoint instruction.  Here the kprobes single
    stepping handler never gets called.
    
    Is this behaviour acceptable ?  Or should we avoid putting probes on an
    int3 /breakpoint instruction ?  How should it handle such situations?
    Below is the patch to allow probes on an int3/breakpoint instruction.
    
    This patch fixes the above problem by doing a proper exit while avoiding
    recursion.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e913ca69163f247ac21b581486a011a2d4830e78
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Wed Mar 30 16:39:59 2005 -0800

    [PATCH] kprobe_handler should  check pre_handler function
    
    The kprobe_handler() code currently does not check if a pre_handler is
    registered for the kprobe under process.  This leads to a NULL pointer
    dereference in cases when a module does not define a pre_handler.
    
    The patch corrects the issue by explicitly checking that the pre_handler is
    not NULL before it is invoked.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 089c43f12337dc12d1fc79ee243e3e11467ef29d
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Wed Mar 30 16:39:42 2005 -0800

    [PATCH] paport oops fix
    
    It appears that the parport driver claims on-board superio devices without
    actually doing anything.  When the driver is removed, we try to dereference
    non-existent driver data to unregister the ports.  Since we didn't register
    anything, it's safe to ignore these devices in the remove function.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f335faa05925e878eb50b822af3ea4961149bf76
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Wed Mar 30 16:39:25 2005 -0800

    [PATCH] nommu.c build error fix
    
    - Argument addition of security_file_mmap.
    - Because in_gate_area_no_task undefined with CONFIG_KALLSYM=y, add it.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3fdc0fa3b338831d3fd2c8d2442807de072ef90
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 30 16:39:08 2005 -0800

    [PATCH] kernel/rcupdate.c: make the exports EXPORT_SYMBOL_GPL
    
    Due to the patent situation at least in the USA, the exports of
    kernel/rcupdate.c should be EXPORT_SYMBOL_GPL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ddef3ea114cc58b8518893178aba1266cbc6fd2
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Wed Mar 30 16:38:51 2005 -0800

    [PATCH] Kill stupid warning when compiling riocmd.c
    
    My gcc complains about RIOCommandRup(), this is because this one has no
    forward declaration and uses old style parameter declaration.  This patch
    changes all function headers in riocmd.c to use their parameter types in
    function header directly.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad68b2f085f5c79e4759ca2d13947b3c885ee831
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Wed Mar 30 16:38:34 2005 -0800

    [PATCH] make Documentation/oops-tracing.txt relevant to 2.6
    
    Here is a patch to finally bring oops-tracing.txt into the 2.6 era.
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1c949ef8cb362968dc32abfe0bc314e51445067
Author: Patrick vd Lageweg <patrick@bitwizard.nl>
Date:   Wed Mar 30 16:38:17 2005 -0800

    [PATCH] SX cli() conversion
    
    This patch converts all save_flags/restore_flags to the new
    spin_lock_irqsave/spin_unlock_irqrestore calls, as well as some other 2.6.X
    cleanups.  This allows the "sx" driver to become SMP safe.
    
    Signed-off-by: Patrick vd Lageweg <patrick@bitwizard.nl>
    Signed-off-by: Rogier Wolff <R.E.Wolff@BitWizard.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdc98a74f9b8e27f98064cf4383dbaf011d64fec
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Mar 30 16:38:00 2005 -0800

    [PATCH] consolidate asm/ipc.h
    
    All the asm*/ipc.h files are basically the same (for things that are used)
    so I have consolidated them all into asm-generic/ipc.h
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Acked-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a657b7f9dce92c3cc4ae316c4f3d3ed263700c9
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Wed Mar 30 16:37:22 2005 -0800

    [PATCH] cx24110 Conexant Frontend update
    
    With Peter Hettkamp <peter.hettkamp@t-online.de>
    
    I transformed Peter's attempt into a kernel-compatible patch.
    
    The dvb frontend cx24110 is given back a send burst function which is
    needed by the dvbstream-engine of MPlayer 1.0pre6a, for example.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cdac7692c722e09f65e223f152624eaced547c5
Author: christian@leber.de <christian@leber.de>
Date:   Wed Mar 30 16:37:04 2005 -0800

    [PATCH] make sysrq-F call oom_kill()
    
    Ky box (2.6.9-final) was yesterday completly stalled (mouse movable and
    stupid loadmeter was still working) after starting mutt and was swapping
    for half an hour until I sent SIGTERM to all processes.  I suspect it was a
    2 GB big galeon process that was the problem.
    
    I think sysrq needs a key to call oom_kill manually.
    
    From: Coywolf Qi Hunt <coywolf@sosdg.org>
    
      Move it into a workqueue to avoid taking VM locks from IRQ context.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 598ae05567f1304998c3f4ea895f6702fc08ea8c
Author: Rob Landley <rob@landley.net>
Date:   Wed Mar 30 16:36:46 2005 -0800

    [PATCH] uml: Fix the console stuttering
    
    I spent far too much of the weekend tracking this sucker down through the guts
    of the tty code.  The problem turns out to be that drivers/char/n_tty.c has a
    write_chan that does buffering and retransmitting data, and
    arch/um/drivers/chan_kern.c ALSO has a write_chan that buffers and retransmits
    data, and the first calls the second but the second doesn't always return
    correct status information for the -EAGAIN case.
    
    When they get confused, both of them try to buffer and retransmit data, hence
    the stuttering.
    
    The first fix is that if chan_kern's write_chan gets an -EAGAIN, it should NOT
    gratuitously change that to a 0 before returning.  I don't know why that code
    is in there, but deleting those two lines makes 90% the stuttering go away.
    But not quite all of it.
    
    The second half of the fix is arch/um/drivers/line.c has a buffer_data()
    function that adds data to the buffer, tries to flush the buffer out to disk,
    gets -EAGAIN, and then returns -EAGAIN even though it successfully buffered
    all the data it was sent.  So the upper layer resubmits the last chunk of data
    it sent when the console unblocks, even though the lower layer buffered it and
    sent it on by that point.
    
    With this patch, I can't get the UML console to stutter anymore by suspending
    the process it's writing to.  (Add tee to the mix and you can still make it
    hang by suspending its xterm for a second or two, but I think that tee is
    hanging, not UML.  Hangs with RHEL4 tee, but not busybox tee...)
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 927f804e1d9921d499878f94701d26348a244343
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:36:29 2005 -0800

    [PATCH] uml: correct error message
    
    With "Anthony Brock" <Anthony_Brock@ous.edu>
    
    Replace the message with a more meaningful one. Noted by Anthony Brock.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ade05d5c38568078b747d3c192125c6d768d94be
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:36:12 2005 -0800

    [PATCH] uml: fix hostfs special perm handling
    
    When opening devices nodes on hostfs, it does not make sense to call access(),
    since we are not going to open the file on the host.
    
    If the device node is owned by root, the root user in UML should succeed in
    opening it, even if UML won't be able to open the file.
    
    As reported by Rob Landley, UML currently does not follow this, so here's a
    fix.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Rob Landley <rob@landley.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5ee361de4568bc22f11673476c8b0df04e5e366
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:35:54 2005 -0800

    [PATCH] uml: fixes a build failure with CONFIG_MODE_SKAS disabled
    
    This fixes a build failure (and also some warnings) when CONFIG_MODE_SKAS is
    disabled.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 784652cfa6dc6714ecf69f5c9ea9b5f3566a0202
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:35:37 2005 -0800

    [PATCH] uml: quick fix syscall table
    
    *) Uml 2.6.11 does not compile with gcc 2.95.4 because some entries are
    duplicated, and that GCC does not accept this (unlike gcc 3). Plus various
    other bugs in the syscall table definitions:
    
      *) 223 is a syscall hole (i.e. ni_syscall) only on i386, on x86_64 it's a
      valid syscall (thus a duplicated one).
    
      *) __NR_vserver must be only once with sys_ni_syscall, and not multiple
      times with different values!
    
      *) syscalls duplicated in SUBARCHs and in common files (thus assigning twice
      to the same array entry and causing the GCC 2.95.4 failure mentioned above):
      sys_utimes, which is common, and sys_fadvise64_64, sys_statfs64,
      sys_fstatfs64, which exist only on i386.
    
      *) syscalls duplicated in each SUBARCH, to put in common files:
      sys_remap_file_pages, sys_utimes, sys_fadvise64
    
      *) 285 is a syscall hole (i.e. ni_syscall) only on i386, on x86_64 the range
      does not arrive to that point.
    
      *) on x86_64, the macro name is __NR_kexec_load and not __NR_sys_kexec_load.
      Use the correct name in either case.
    
    Note: as you can see, part of the syscall table definition in UML is
    arch-independent (with everywhere defined syscalls), and part is
    arch-dependant. This has created confusion (some syscalls are listed in both
    places, some in the wrong one, some are wrong on one arch or another).
    
    Also, as add-ons:
    
    *) uses __va_copy instead of va_copy since some old versions of gcc (2.95.4
    for instance) don't accept va_copy.
    
    *) some whitespace cleanups in the syscall table (if you don't like them, feel
    free to remove them).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7cafb1c543c02127105c0274e60395da469a2b3f
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:35:19 2005 -0800

    [PATCH] uml: gprof depends on !TT
    
    CONFIG_GPROF depends on the fact that TT mode is disabled.  I just verified
    this, and this dependency already exists in UML/2.4.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad507c5a5370ded94b8fa7a0ff359461d6a10f2d
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 30 16:35:02 2005 -0800

    [PATCH] uml: fix sigio spinlock
    
    I just saw a "take twice spinlock" deadlock with the Spinlock debugging
    enabled on this lock, and static code analysis revealed this is the culprit:
    update_thread can take (in an error path) the sigio_lock, which is already
    held by all its callers (it's a static function, so it's easy to verify).
    
    Added some comments to mark where this function needs the lock, in case
    someone wants to reduce the locking here.
    
    Also clean an exitcall to mark the thread as killed (won't hurt, and could be
    useful if things go wrong).
    
    As a bonus, some CodingStyle cleanups.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2106630ca40d6889f1609987db685e3bcf290d99
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Wed Mar 30 16:34:45 2005 -0800

    [PATCH] m32r: build fix for CONFIG_DISCONTIGMEM
    
    This patch fixes build error for CONFIG_DISCONTIGMEM.
    
    	* arch/m32r/mm/discontig.c: Fix build error for CONFIG_DISCONTIGMEM.
    	* arch/m32r/kernel/setup.c: ditto.
    
    	* arch/m32r/mm/discontig.c:
    	- Add topology_init.
    	- Cosmetics: change indentation of comments.
    
    Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c718706f56cc2e202893de82fb2157d4fedbd5d9
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Wed Mar 30 16:34:28 2005 -0800

    [PATCH] m32r: Fix spinlock.h for CONFIG_DEBUG_SPINLOCK
    
    This patch is for fixing a build error of asm-m32r/spinlock.h for
    CONFIG_DEBUG_SPINLOCK.
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b502b56175499c472103e1d99346d3b5de7d53f
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Mar 30 16:34:11 2005 -0800

    [PATCH] x86, x86_64: reading deterministic cache parameters and exporting it in /sysfs
    
    The attached patch adds support for using cpuid(4) instead of cpuid(2), to
    get CPU cache information in a deterministic way for Intel CPUs, whenever
    supported.  The details of cpuid(4) can be found here
    
    IA-32 Intel Architecture Software Developer's Manual (vol 2a)
    (http://developer.intel.com/design/pentium4/manuals/index_new.htm#sdm_vol2a)
    and
    Prescott New Instructions (PNI) Technology: Software Developer's Guide
    (http://www.intel.com/cd/ids/developer/asmo-na/eng/events/43988.htm)
    
    The advantage of using the cpuid(4) ('Deterministic Cache Parameters Leaf') are:
    
    - It provides more information than the descriptors provided by cpuid(2)
    
    - It is not table based as cpuid(2).  So, we will not need changes to the
      kernel to support new cache descriptors in the descriptor table (as is
      the case with cpuid(2)).
    
    The patch also adds a bunch of interfaces under
    /sys/devices/system/cpu/cpuX/cache, showing various information about the
    caches.  Most useful field being shared_cpu_map, which says what caches are
    shared among which logical cpus.
    
    The patch adds support for both i386 and x86-64.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0ae26d7b25e2dbbb50a922d8fc24d8d21512520
Author: Roland McGrath <roland@redhat.com>
Date:   Wed Mar 30 16:33:54 2005 -0800

    [PATCH] x86-64 kprobes: handle %RIP-relative addressing mode
    
    The existing x86-64 kprobes implementation doesn't cope with the
    %RIP-relative addressing mode.  Kprobes work by single-stepping a copy of
    an instruction overwritten by a breakpoint.  When a probe is inserted on an
    instruction that uses the %RIP-relative data addressing mode, the copy run
    in a different location gets different data and so the presence of that
    probe causes the probed code to read or write the wrong memory location.
    
    Without this problem fixed, it is woefully unsafe to use the current
    kprobes code on x86-64 unless you are sure the instruction you instrument
    is not one that accesses global data using the %RIP addressing mode.
    
    This patch fixes the problem by recognizing the %RIP-relative addressing
    mode in an instruction when it's being copied to insert the kprobe, and
    adjusting its displacement so that it finds the right data.  Taking this
    approach requires that the copied instruction's %RIP value be within 2GB of
    the virtual address of the data, i.e.  the text/data areas of the kernel
    code and loaded modules.  To satisfy this need the patch also replaces the
    use of vmalloc for getting instruction pages with lower-level calls to use
    a different part of the address space, the area at the top of the address
    space just above where modules are loaded.  I left one page of red zone at
    the top, and the 1MB-4KB thus available allows for at most 69632 kprobes.
    (If we ever need to overcome that limit, we can change this to add a hook
    into the arch/x86_64/kernel/modules.c code and allocate pages inside the
    module area loading area instead.)
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f25e5cc262b1f4f2702342393169cde7ae54c66
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Wed Mar 30 16:33:38 2005 -0800

    [PATCH] x86_64: reduce cacheline bouncing in cpu_idle_wait
    
    Andi noted that during normal runtime cpu_idle_map is bounced around a lot,
    and occassionally at a higher frequency than the timer interrupt wakeup
    which we normally exit pm_idle from.  So switch to a percpu variable.
    
    I didn't move things to the slow path because it would involve adding
    scheduler code to wakeup the idle thread on the cpus we're waiting for.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6e7c2a9222016f41613d2389d230b03a36c9f20
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Wed Mar 30 16:33:22 2005 -0800

    [PATCH] x86_64: avoid panic lockup
    
    This patch avoids a lockup with kernel.panic sysctl > 0, due an underflow
    of the number of the cpus.
    
    Later, Andrea said:
    
     While this still seems a needed fix, unfortunately this wasn't enough to
     fix the problem (the first positive report I got was because they did a
     mistake and they tested an UP kernel, oh well ;).
    
     Anyway the smp_stop_cpu executed by the cpu that invoked panic is wrong
     and it really causes an underflow of the number of cpus that can lead to
     further lockups. So I don't want to stop you from merging it since it
     seems a correct fix and it brings x86-64 in line with the x86 code too.
    
     But apparently we need something more than this too.
    
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2777f0dc41de4338b353ee97ba94d8b59aea58c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 30 16:33:05 2005 -0800

    [PATCH] arch/i386/kernel/smp.c: remove a pointless "inline"
    
    All callers of send_IPI_mask_sequence are in other files, so marking it
    "inline" is quite pointless.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67d7f3abcdb0e99d278806c75f188e29a1ee5cec
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Wed Mar 30 16:32:49 2005 -0800

    [PATCH] x86: fix ESP corruption CPU bug (take 2)
    
    This works around the corruption of the high word of the ESP register,
    which is the official bug of x86 CPUs.  The bug triggers only when the
    one is using the 16bit stack segment, and is described here:
    
          http://www.intel.com/design/intarch/specupdt/27287402.PDF
    
    From: Oleg Nesterov <oleg@tv-sign.ru>
    
      I think that Stas tries to steal 1024 bytes from kernel's memory.
    
    Acked-by: Linus Torvalds <torvalds@osdl.org>
    Acked-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 074b4c6141b583bbab5898512312c92d9a779ae9
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Wed Mar 30 16:32:31 2005 -0800

    [PATCH] x86: reduce cacheline bouncing in cpu_idle_wait
    
    Andi noted that during normal runtime cpu_idle_map is bounced around a lot,
    and occassionally at a higher frequency than the timer interrupt wakeup
    which we normally exit pm_idle from.  So switch to a percpu variable.
    
    I didn't move things to the slow path because it would involve adding
    scheduler code to wakeup the idle thread on the cpus we're waiting for.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34f96943a4eb7e3074a91ad847d8ca6ad4a2e97c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Mar 30 16:32:14 2005 -0800

    [PATCH] ppc64: Add mem=X boot command line option
    
    This patch adds the mem=X boot command line option for PPC64.
    
    On iSeries the user's mem=X value is aligned to PAGE_SIZE, on pSeries we
    align to 16 MB which is the size of a large page.
    
    The iSeries implementation is fairly straight forward, we declare mem=X as
    an early_param() and then in iSeries_init_early() we modify the
    systemcfg->physicalMemorySize based on that value.
    
    On pSeries the mem=X option is parsed in prom_init.c before the kernel
    proper starts, and is used to modify prom_init_mem()'s idea of memory.  The
    mem=X value and computed tce_alloc_start/end values are saved by
    prom_init() into the device tree for later use by the kernel.
    
    The device tree properties are read by the kernel in
    early_dt_scan_chosen(), and used to modify the lmb structure in
    early_init_devtree().  That's the guts of it.
    
    On non-LPAR machines the tce_alloc_start/end values are read from the
    device tree and used in htab_initialize() to make sure the TCE table is
    mapped at the real top of RAM.
    
    If NUMA is enabled we also have to make changes in parse_numa_properties()
    and do_init_bootmem() to exclude memory regions above the memory limit, and
    truncate any region which stradles the limit.
    
    NB. This patch does not facilitate using mem=X to give drivers access to
    large regions of contiguous memory.
    
    Thanks to BenH, Anton, Olof, Stephen, Mike & Maneesh for their help.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22b43a17dfdefb4a975956a92ba9b076e2087833
Author: Amos Waterland <apw@us.ibm.com>
Date:   Wed Mar 30 16:31:57 2005 -0800

    [PATCH] ppc64: fix zilog link error
    
    drivers/built-in.o(.text+0x2c640): In function `pmz_attach':
    /home/apw/devel/percs-head/linux-2.6/drivers/serial/pmac_zilog.c:1560: undefined reference to `.macio_request_resources'
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b053dc29dcde8ec09e85fc71633f5b881d06cc09
Author: Andrea Arcangeli <andrea@cpushare.com>
Date:   Wed Mar 30 16:31:40 2005 -0800

    [PATCH] seccomp for ppc64
    
    This patch against 12-rc1 adds seccomp to the ppc64 arch.  I tested it
    successfully with the seccomp_test.  I didn't bother to change the syscall
    exit not to check for TIF_SECCOMP, in theory that bit could be optimized
    but it's an optimization in the slow path, and current code is a bit
    simpler.  I also verified it still compiles and works fine on x86 and
    x86-64.
    
    Instead of the TIF_32BIT redefine, if you want to change x86-64 to use
    TIF_32BIT too (instead of TIF_IA32), let me know.
    
    Signed-off-by: Andrea Arcangeli <andrea@cpushare.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 192f79194d0aaf354009fe5db4a9f9bf8e885780
Author: Stefan Nickl <stefan.nickl@kontron.com>
Date:   Wed Mar 30 16:31:22 2005 -0800

    [PATCH] ppc32: MPC8555 CPM2 size/pointers for FCCs aka "All-ones problem"
    
    I've seen that MPC8555 support also made it into linux-2.6 by now.
    
    I don't have hardware and time to test, but it looks like this bug has made
    it over from the linuxppc-2.4 tree.  The 8541/8555 has a smaller CPM DPRAM
    than the standard CPM2, just like the 8272.
    
    Unfortunately, the manual recommends you to use a segment of CPM DPRAM that
    is not implemented in the 8541/55.  If the smaller DPRAM is not taken into
    account, fcc_enet.c will initialise the internal CPM buffer pointers
    (fcc_riptr/fcc_tiptr) to invalid offsets, with the result that all the FCC
    will ever send and receive are 0xff-en.
    
    See also "All-ones problem with FCC1 on MPC8541" ~October 2004 on
    linuxppc-embedded.
    
    Signed-off-by: Stefan Nickl <Stefan.Nickl@kontron.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58f961747c91bd046981f7868b5587303649cc2a
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Mar 30 16:31:04 2005 -0800

    [PATCH] ppc32: Fix MPC8555 & MPC8555E device lists (updated)
    
    Removed the FCC3 device from the lists of devices on MPC8555 & MPC8555E
    since it does not exist on these processors.
    
    Signed-off-by: Jason McMullan <jason.mcmullan@timesys.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7b2cd8b2579511fc0cee3da441e768d6ef74997
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Mar 30 16:30:47 2005 -0800

    [PATCH] ppc32: CPM2 PIC cleanup irq_to_siubit array
    
    Cleaned up irq_to_siubit array so we no longer need to do 1 << (31-bit),
    just 1 << bit.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d902023a727b63dd7f3337a79371d93e318813e9
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Mar 30 16:30:30 2005 -0800

    [PATCH] ppc32: CPM2 PIC cleanup
    
    Cleaned up the CPM2 interrupt controller code:
    * Added the ability to offset the IRQs
    * Refactored common PIC init code out of platform files
    * Fixed IRQ offsets on MPC85xx so it can handle properly handled multiple
    interrupt controllers (i8259, CPM2 PIC, and OpenPIC)
    
    Signed-off-by: Jason McMullan <jason.mcmullan@timesys.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a91dbf056ed37f16c233f33f70df95880130f901
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Mar 30 16:30:13 2005 -0800

    [PATCH] ppc32: cleanup of Book-E exception handling
    
    Cleaned up the Book-E exception handling code to remove saving/restoring
    registers that were not needed.  Moved the register save/restore area onto
    the exception stacks instead of dedicated offsets.  Additionally, this
    allows for proper SMP handling of the additional exception levels.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e307b33f548c97d26b8d0218cce12f0961448ae
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:29:56 2005 -0800

    [PATCH] ppc32: Adds necessary cpu init to use USB on LITE5200 Platform
    
    To use external peripheral on MPC5200, some clocking registers and port-muxing
    must be done.  Since this is platform specific, it's placed the platform
    support file.  This particular patch is for USB support on the LITE5200.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 845faaf7555d8a5be0ca0fb0e21d2e4fd690fdff
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:29:39 2005 -0800

    [PATCH] serial: Update mpc52xx_uart.c to use platform bus
    
    All Freescale MPC52xx related code now use new constants and the platform bus
    for it's driver.  This patch makes this driver make use of that.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27afc6c3b6a0d53ae99f9698bd4613e56dc3cc71
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:29:22 2005 -0800

    [PATCH] ppc32: Use platform bus / ppc_sys model for Freescale MPC52xx
    
    This patch makes all platform based around the Freescale MPC52xx use the
    platform bus and more precisly the ppc_sys model put in place by Kumar Gala.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c674630bdd7c6f82aef021e18f1071e5ce38d21d
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:29:04 2005 -0800

    [PATCH] ppc32: Change constants style in Freescale MPC52xx related code
    
    This patch changes the way the constants used for register block address are
    defined/used.  This is a preparation for the use of the platform bus / ppc_sys
    model.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55f35817e5e3fe33c74d4466714f0d1e156efb88
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:28:47 2005 -0800

    [PATCH] ppc32: Remove the OCP system from the Freescale MPC52xx support
    
    We remove all usage of the OCP system as preparation to switch to the platform
    bus model / ppc_sys model.  This is only for 'generic' support, drivers are
    adapted separatly, afterwards.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdb577046749f8a6aa6c8e515cfccea2f52f4af0
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Wed Mar 30 16:28:30 2005 -0800

    [PATCH] ppc32: Remove unnecessary test in MPC52xx reset code
    
    That test is part of an old version of the code and erroneously made it to
    mainstream.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f574f647a9de09f8a4c636fee6501b6cc1f3872
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 30 16:28:13 2005 -0800

    [PATCH] cpuset: make function decl. ANSI
    
    kernel/cpuset.c:1428:41: warning: non-ANSI function declaration
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85be99bb2797d48af8260ba76044c9f1b3fdd416
Author: pj@engr.sgi.com <pj@engr.sgi.com>
Date:   Wed Mar 30 16:27:57 2005 -0800

    [PATCH] cpusets GFP_ATOMIC fix: tonedown panic comment
    
    This patch applies on top of my patch of March 26, entitled "cpusets
    special case GFP_ATOMIC allocs".  It tones down my panic'y commentary.
    
    My commentary shouldn't imply that failed GFP_ATOMICs should lead to, or
    normally lead to, panics.  Even though there are a few panic() calls
    following failed GFP_ATOMIC allocs, this is not the usual or desired result
    of a failed GFP_ATOMIC.  The kernel will probably drop some detail on the
    floor and keep on working.
    
    Thanks to Nick Piggin for noticing (I hope this answers his point.)
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 398bec1b785518e2ad87c36f92e542905708ad71
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Mar 30 16:27:39 2005 -0800

    [PATCH] cpusets: special-case GFP_ATOMIC allocs
    
    Stringent enforcement of cpuset memory placement could cause the kernel
    to fail a GFP_ATOMIC (!wait) memory allocation, even though memory was
    available elsewhere in the system.
    
    Relax the cpuset constraint, on the last zone loop in
    mm/page_alloc.c:__alloc_pages(), for ATOMIC requests.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31b6c032a05d7df098cafa6fa1062dfe735e1d40
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 30 16:27:22 2005 -0800

    [PATCH] read_kmem() fixes
    
    drivers/char/mem.c:289
    		if (p < PAGE_SIZE && read > 0) {
    			[...]
    			read -= tmp;
    			count -= tmp;
    
        This part is losting the number of bytes which read.
    
    drivers/char/mem.c:302
    			sz = min_t(unsigned long, sz, count);
    
        This should use "read" instead of "count".
    
    drivers/char/mem.c:315
    			read -= sz;
    			count -= sz;
    
        Also lost the number of bytes which read.
    
    In short, kmem returns incorrect number always if user is accessing
    the lowmem area. And also it doesn't handle the highmem boundary
    rightly.
    
    This patch uses "low_count" instead of "read", as the number of copy
    in lowmem area. And "read" is used as the number of bytes which read.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 883108b9b92b3232b114d4466222332f8529235e
Author: David Howells <dhowells@redhat.com>
Date:   Wed Mar 30 16:27:05 2005 -0800

    [PATCH] BDI: Provide backing device capability information [try #3]
    
    The attached patch replaces backing_dev_info::memory_backed with capabilitied
    bitmap. The capabilities available include:
    
      (*) BDI_CAP_NO_ACCT_DIRTY
    
          Set if the pages associated with this backing device should not be
          tracked by the dirty page accounting.
    
      (*) BDI_CAP_NO_WRITEBACK
    
          Set if dirty pages associated with this backing device should not have
          writepage() or writepages() invoked upon them to clean them.
    
      (*) Capability markers that indicate what a backing device is capable of
          with regard to memory mapping facilities. These flags indicate whether a
          device can be mapped directly, whether it can be copied for a mapping,
          and whether direct mappings can be read, written and/or executed. This
          information is primarily aimed at improving no-MMU private mapping
          support.
    
    The patch also provides convenience functions for determining the dirty-page
    capabilities available on backing devices directly or on the backing devices
    associated with a mapping. These are provided to keep line length down when
    checking for the capabilities.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit caf875e2091a03fdc2b4b07e70bdf3166e82b315
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Wed Mar 30 16:26:47 2005 -0800

    [PATCH] NFS: Fix typo in access caching code
    
    Currently we fail to clear the "invalid cache" flag when we've revalidated
    the cache.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbd2856c799720ad1926aeb2897d5a951e382829
Author: Alex Zarochentsev <zam@namesys.com>
Date:   Wed Mar 30 16:26:30 2005 -0800

    [PATCH] arm atomic_sub_and_test()
    
    Add a wrapper for atomic_sub_and_test into include/asm-arm/atomic.h
    
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9cc45feb3ecd1914c82d65bf9e1955a0671584cc
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 30 14:22:42 2005 +0100

    [SERIAL] Remove serial8250_late_console_init
    
    The serial core will try to register the console each time a port
    is registered with it.  This makes serial8250_late_console_init
    redundant, so remove it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 52525c94dbad620c16d8378812be7e73caaea22d
Merge: 0ad4ed5... 2baceaf...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 05:04:44 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 2baceafdc038464e60caed5cc6c9cd14a8734104
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 04:44:11 2005 -0800

    [SPARC64]: Kill final normal g5 register reference.
    
    This one was in strncpy_from_user().
    
    Now we can finally put the per-cpu data area base
    into g5 on SMP.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 048257213aee16a221669bb90e3ce82d5206cb8c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 04:13:40 2005 -0800

    [SPARC64]: Simplify checksumming code.
    
    The main impetus was to get rid of some of the
    remaining g5 register accesses.  But this routine
    is about as fast as the older VIS stuff, and actually
    faster on UltraSPARC-III and later chips.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ad4ed51a31ebdc0749d4321807381881869bd10
Merge: 3cf927c... 6d36ed6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 30 03:22:54 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 21248e454178f5c7ea48b83ba58058667e0893df
Author: takata@org.rmk.(none) <takata@org.rmk.(none)>
Date:   Wed Mar 30 11:49:58 2005 +0100

    [SERIAL] m32r_sio driver update
    
    Patch from Hirokazu Takata
    
    m32r_sio driver updates:
    - Move m32r_sio specific description from asm-m32r/serial.h to
      driver/serial/m32r_sio.c.
    - Remove __register_m32r_sio, register_m32r_sio and unregister_m32r_sio
      from driver/serial/m32r_sio.c.
    
    Signed-off-by: Hirokazu Takata

commit 3cf927cafa5ffa1ee72276b243b104a3ece7cc77
Merge: 3397bd0... b02f27c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 30 02:45:46 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b02f27c83dea7e446a4aace08509c54805d184c3
Merge: 1df15d0... af90cfb...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 30 10:52:22 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/b44
    into pobox.com:/garz/repo/net-drivers-2.6

commit 1df15d074f172e59ce074ddf637ac9e9a44d93a2
Merge: 783d444... 762ba24...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 30 10:51:14 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/e1000
    into pobox.com:/garz/repo/net-drivers-2.6

commit 783d4448d395f1124c77944fc50b13ff17c5a0d1
Merge: 64ac4e6... 6dd49c0...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 30 10:49:15 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/s2io
    into pobox.com:/garz/repo/net-drivers-2.6

commit 6dd49c00d8874b8dec287ed6964bb147dfab03a4
Author: Finn Thain <fthain@telegraphics.com.au>
Date:   Wed Mar 30 10:37:02 2005 -0500

    [PATCH] fix Jazzsonic driver build on m68k
    
    Signed-off-by: Finn Thain <fthain@telegraphics.com.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0796505eafa509873f73fde5c710abeb10c93488
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Wed Mar 30 10:14:45 2005 -0500

    [PATCH] pcnet32: 79C975 fiber fix
    
    From: "HARDY, Steven" <steven.hardy@astrium.eads.net>
    
    I have found a bug in the pcnet32 driver (drivers/net/pcnet32.c)
    affecting all ethernet cards based on the AMD79C975 chip, using the
    fiber interface.
    
    It's a one line fix, where some config registers get corrupted during
    initialisation (which stops the Fiber interface working with this chip)
    
    This bug was introduced somewhere betweeen 2.4.17 and 2.6.x (noticed
    whilst upgrading to 2.6), and it may affect other chips too.  I have
    checked all versions up to 2.6.11-bk6 and they are all broken.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 64ac4e68815181e44198d35a042c75d123673330
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Wed Mar 30 09:53:35 2005 -0500

    [PATCH] S2io: Changed copyright and added support for Xframe II
    
    1. Change of Copyright to reflect S2io's new name "Neterion Inc."
    2. Updated driver version number.
    3. Add an additional PCI device id to support Neterion's new Xframe II.
    
    Some background info on Xframe-II, just in case -
    
    The NIC was announced back in January (see
    http://www.serverwatch.com/news/article.php/3464871)
    
    Xframe II is a PCI-X 2.0 DDR adapter designed to work in PCI-X 2.0 servers
    (it is also backwards compatible with current pci-x and pci slots); it's a
    first card to overcome pci-x 133 throughput bottleneck. Some of these pci-x
    2.0 servers are available now and more are coming later in the year.
    
    Xframe II is completely backward compatible and hence the current driver
    will work as-is, except the device id change.
    
    There are some additional features/stateless offloads in Xframe-II
    as well; we plan to submit patches for these soon.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bfc2b18c764d46dc7143cfa298944fbf66059cce
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Wed Mar 30 09:53:21 2005 -0500

    [PATCH] S2io: h/w initialization fixes
    
    Below patch addresses couple of issues w.r.t h/w initialization.
    
    1. The SWAPPER_CTRL register is now initialized as per recommended
       procedure from h/w team. This register when initialized correctly
       ensures correct access to other registers on big-endian and
       little-endian systems.
    2. Enabling the Continuous interrupt feature by default on Tx at
       a rate of 250 interrupts/sec.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 424eb328500805965be8f23778e8b63652755749
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Wed Mar 30 09:53:07 2005 -0500

    [PATCH] S2io: Statistics fix
    
    Below patch fixes the statistics problem on big-endian systems(such
    as IBM PPC).
    Basically, the problem was "ethtool -s" was reporting huge values
    on counters like no. of Tx frames, no. of Rx packets etc.
    The fix has been tested on little-endian and big-endian systems.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 762ba24ab4aa4df4e4593f87a1a25a5f7cac88cf
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed Mar 30 09:42:51 2005 -0500

    [PATCH] e1000: add MODULE_VERSION
    
    Add MODULE_VERSION entry.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6d36ed6877f400d2dc44a995587d0512fb88e267
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 30 00:58:16 2005 -0800

    [NETLINK]: Fix sk_rmem_alloc assertion failure.
    
    In netlink_dump we're operating on sk after dropping the cb lock.
    This is racy because the owner of the socket could close it after
    we drop the cb lock.
    
    This is possible because netlink_dump isn't always called from the
    context of the process that owns the socket.  For instance, if there
    is contention on rtnl then rtnetlink requests will be processed by
    the process that owns the rtnl.
    
    The solution is to hold a ref count on the socket before we drop
    the cb lock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f05eea685e77af818cb771d42e422e92bcde664
Merge: 4f57d25... 7a69697...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 30 00:39:35 2005 -0800

    Merge bk://kernel.bkbits.net/tgraf/net-2.6-tcf_exts
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 4f57d2511a796c775352f587a86f2cfc989bfcfc
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Mar 30 00:35:41 2005 -0800

    [AF_UNIX]: unix_mkname comment
    
    Resurrect an old comment, explaining why this isn't an off-by-one error.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc027ceedf3f8afe63d1296c9c99453e033c806f
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Mar 30 00:35:08 2005 -0800

    [IPV6]: Fix address/interface handling according to the scoping architecture
    
    I think this has been there for long time (maybe since 2.4...).
    
    With the following patch, I can connect local link-local address.
    - Change incoming interface according to the scoping architecture
    - Choose source address on appropriate interface, according to the
      scoping architecture.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 98cdc7019f922a992b69f155e214ee01c8ba1c06
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 30 00:34:22 2005 -0800

    [PKT_SCHED]: Memory leak in ipt.c
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b93b017d9c2e87376a70bf8e14ef3b0b88a0ee2
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Wed Mar 30 00:33:25 2005 -0800

    [NETFILTER]: Restore ports module parameter for ip_nat_{ftp,irq}
    
    There is no 'ports' parameter for the ip_nat_ftp and ip_nat_irc modules in
    2.6.11: the ports parameter supplied to the
    ip_conntrack_ftp/ip_conntrack_irc module defines the ports.  It was
    unfortunate that we were lazy in the original implementation, and forced
    the user to duplicate the arguments.
    
    Even more unfortunate, the removal of the parameter caused autoloading to
    break for various setups, with an 'Unknown parameter' message.  The
    solution is to restore the parameter as a dummy, with a polite warning
    message that it is no longer neccessary.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 822f6f6b78202a13a6aeecbbed304c380767efbf
Author: jan.kiszka@web.de <jan.kiszka@web.de>
Date:   Wed Mar 30 00:32:22 2005 -0800

    [NET]: NULL pointer bug in netpoll.c
    
    It seems that there is a gremlin sleeping in net/core/netpoll.c:find_skb().
     Even if no more buffers are available through skbs, skb is
    dereferenced anyway.  The tiny patch should fix it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3397bd0a1f136d36d69328df1a0acc9d34c6c8be
Merge: 3a32b2c... b6eb092...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 29 23:46:51 2005 -0800

    Merge bk://linux-scsi.bkbits.net/scsi-for-linus-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b6eb092af0ddac950b28aa1ada5a6266330157c3
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Mar 30 01:58:06 2005 -0600

    [PATCH] aacraid: endian cleanup
    
    An update to the patch from Adaptec with byte order changes:
    
     - drop byte swapping on all 0's and all 1's content
     - fix up missing swapping directives
     - ensure swapping on 16 bit values does not use 32 bit swap
     - Made hardware registers __le* types.
     - hopefully caught the style issues.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a66e2a1467b5d6e9306668535edda73d56b9720c
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Mar 30 01:52:14 2005 -0600

    Fix SCSI internal requests hang
    
    When a device is being torn down (mostly in USB ejection)
    we hit conditions where SCSI hangs in wait_for_completion().
    The reason is that the scsi request prep function does a
    state check on the device and rejects it with BLKPREP_KILL if
    we're in the DEL (going away, no more I/O) state.
    
    Unfortunately, I/O submitted by scsi_wait_req() doesn't have
    its request->end_io initialised, so we're never notified of
    this (the submit path expects everything to come back via
    the scsi_request->sr_done() routine, which only happens
    if the I/O actually gets submitted.
    
    Note: almost everything that uses scsi_do_request() is wrong
    not only in this regard but also on other things, like ending
    tags.
    
    Problem Diagnosed with help from: Tejun Heo <htejun@gmail.com>
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3a32b2c3d22aaad1d2fef666a88e1d75704d512b
Merge: 815867b... 3f014b4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 29 23:45:21 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 3f014b4b5c13175d7228c3252e451f4634ccffa9
Author: incent Sanders <vince@kyllikki.org>
Date:   Wed Mar 30 20:34:03 2005 +0100

    [ARM PATCH] 2636/1: Missing include breaking cats build
    
    Patch from Vincent Sanders
    
    Fixes missing include which breaks footbridge_defconfig build
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a812fcba4dc30c8ef7c84b51aa4fa291ccb747dc
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Wed Mar 30 16:42:01 2005 +0100

    [ARM PATCH] 2635/1: i.MX serial hardware handshaking support
    
    Patch from Sascha Hauer
    
    This patch adds support for hardwarehandshaking on i.MX soc
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Mike Lee
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1dccc3593288d0e24ae34bc397dda7869f9218be
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Wed Mar 30 16:24:57 2005 +0100

    [ARM PATCH] 2634/1: prevent the lack of any CPU and/or machine record at link time
    
    Patch from Nicolas Pitre
    
    Without this, someone could successfully link a kernel with, for
    example, no machine description structure at all.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c331ff92a01ac28923fef740a5e70ab80016ae35
Author: lucasvr@org.rmk.(none) <lucasvr@org.rmk.(none)>
Date:   Wed Mar 30 16:16:38 2005 +0100

    [ARM PATCH] 2630/1: Fixes definition of GPB10 on S3C2410
    
    Patch from Lucas Correia Villa Real
    
    This patch fixes the definition of the GPB10 bits on the S3C2410 by using the
    correct offset to access its functions.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 815867b8a94c8a8a70896475df922034e8ae6753
Merge: b8b07d0... db4cea7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 29 23:41:44 2005 -0800

    Sound/USB merge

commit 3ba0b95cc23fc34a76dc6a0bec1ff2664af07ced
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 29 23:11:38 2005 -0800

    [SPARC64]: Add UltraSPARC-IV cpu ids.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 69deff5866fe46025980c0ac7276e92d93578145
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 29 21:49:13 2005 -0800

    [SPARC64]: Simplified csum_partial() implementation.
    
    There is no need to make this thing use VIS et al.
    A simple straightforward prefetching integer version
    is fine.  Actually, most of the time this routine is
    run to compute checksums of small header bits or
    similar.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b8b07d0c41d642d5e89a2a3dc2a65f28e936457e
Merge: 8415f2d... 5ae36c9...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 29 20:36:24 2005 -0800

    Merge suse.de:/home/greg/linux/BK/bleed-2.6
    into suse.de:/home/greg/linux/BK/usb-2.6

commit 7a69697fdef4f3d51ffbb931885eb387f28e9a2f
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 30 05:34:30 2005 +0200

    [PKT_SCHED]: Fix action statistics dumping in compatibility mode
    
    Extends the action dumping function by a parameter to differ between
    regular calls and the one supposed to add the backward compatiblity
    bits for old userspace applications.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc010f75d75e161df8e62bcbb5a9d5407c28c2ae
Merge: aab9356... 8e95069...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 29 18:50:24 2005 -0800

    Merge davem@cheetah:src/BK/sparc-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 8e9506976be53ff06d402acee2dc2ebcca747f78
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Tue Mar 29 18:51:32 2005 -0800

    [SPARC64]: Missed some cases in U1memcpy register rework.
    
    Register o4 is referenced both with a preceeding percent
    sign and without (via macros), so make sure to replace all
    such cases.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 886dcd21e8de0838647112032f2a6143d6a45c78
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Tue Mar 29 18:25:27 2005 -0800

    [SPARC64]: Kill unused header arch/sparc64/lib/VIS.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8415f2d4c90ec27e1795de3a052e0fe494853c1d
Author: David Howells <dhowells@redhat.com>
Date:   Tue Mar 29 17:46:52 2005 -0800

    [PATCH] FRV: Fix kernel configuration
    
    This fixes the FRV configuration to work with 2.6.12-rc1.  It does this
    by breaking out the kernel hacking menu into a separate file, in the
    same way this is done in other archs.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e40499a03f2e78054a762af7ab1baaf1e59f78c
Author: David Howells <dhowells@redhat.com>
Date:   Tue Mar 29 17:46:33 2005 -0800

    [PATCH] FRV: Cleanup unused variable
    
    This removes an unused variable from the FRV arch.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f7ff655a30211180363697c57601749d17224ea
Author: David Howells <dhowells@redhat.com>
Date:   Tue Mar 29 17:46:17 2005 -0800

    [PATCH] FRV: Fix TLB miss mapping cache flush
    
    This fixes the TLB miss mapping cache flush function.
    
    The flush was attempting to invalidate the coverage start virtual addresses
    for the cached page table mappings held in registers SCR0 and SCR1 by writing
    0 into them. Unfortunately, 0x00000000-0x04000000 is itself a valid part of
    the virtual address range. This patches places -1 in there instead, thus
    specifying 0xfc000000-0xffffffff which is covered by a static I/O mapping, and
    so shouldn't ever be seen by the TLB-miss handler.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06b4626e1445374cb591b700b18071363bbc53ee
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Mar 29 17:45:58 2005 -0800

    [PATCH] Remaining u32 vs. pm_message_t fixes
    
    This fixes three remaining places where we put u32 (or worse
    suspend_state_t) into pm_message_t-sized box.  As a bonus, PCI_D0 is used
    instead of constant 0.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c4d1d3e71f11d76fccff53554144c5a0763fcbc
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:45:42 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in AGP
    
    This should fix u32 vs. pm_message_t confusion in AGP.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe50a7ba3b71e9e3eb69006a617a637cad47275d
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:45:26 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t in macintosh
    
    This fixes u32 vs. pm_message_t confusion in macintosh.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db860b8b6eea56e58c7e296a88a547017f90fb28
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:45:09 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in serials
    
    This fixes u32 vs. pm_message_t confusion in serials.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 165929bd1140d2f3353e5f02db79ed9b1179b4ea
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:44:51 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in MMC
    
    This fixes u32 vs. pm_message_t confusion in MMC layer.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 820807d24e07ba93ffd773bd2d1eabf9c7099d87
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:44:34 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in framebuffers
    
    This should fix u32 vs pm_message_t confusion in framebuffers, and do no code
    changes.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c363743bdf690e70cf979c478bffcde39bedd25a
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:44:16 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in PCMCIA
    
    This should fix part of u32 vs.  pm_message_t confusion in pcmcia.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ece1b5c556b168f86cffc583125e19185e03d46
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:43:58 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t confusion in OSS
    
    This fixes (part of) u32 vs. pm_message_t confusion in OSS.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cf672adaeb9d9bcae53e6c1658dcc4a1f732ead
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Mar 29 17:43:40 2005 -0800

    [PATCH] more pm_message_t fixes
    
    While fixing usb, I stomped on a few more fixes. Print error when some
    device fails to power down, and 2 is no longer valid state to pass in
    pm_message_t.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c7ee81e002953ffdc98bde7805081068aa74245
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Mar 29 17:43:23 2005 -0800

    [PATCH] Fix u32 vs. pm_message_t in USB
    
    This fixes (part of) u32 vs.  pm_message_t confusion in USB.  It should cause
    no code changes.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1742768359e8123d6ad3c9fa5e5ed3371a6ae5d7
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Mar 29 17:43:06 2005 -0800

    [PATCH] Fix pm_message_t in generic code
    
    This fixes u32 vs.  pm_message_t in generic code.  No code changes.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ae36c9152fa204845b48491e8bd86bf1ed23858
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Mar 29 07:43:56 2005 -0800

    [PATCH] USB: ohci D3 resume fix
    
    This fixes a problem that cropped up resuming OHCI from PCI D3 on
    NForce2.  Evidently the register controlling frame timing gets
    clobbered in D3, but not other registers ... a "by the book" reinit
    seems to solve this particular problem.  (And ought to help a few
    startup glitches on other implementations.  Linux never used that
    toggle bit before, and has had to struggle with glitchy init...)
    
    It also updates some diagnostics to be bit more useful, and tries
    to avoid a particular "wakeup while suspending" glitch that seems
    particular to one particular type of Australian mouse.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d615d2bda151f93bb626695be41663e38954828
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 29 06:47:47 2005 -0800

    USB: fix up a lot of sparse warnings and bugs in the pwc driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c2d295511be28543893c0bb21cc7f4b52dc2d2a9
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue Mar 29 05:42:28 2005 -0800

    [PATCH] ftdi_sio: fix sysfs attribute permissions
    
    This patch changes the permissions of the 'event_char' and
    'latency_timer' sysfs attributes for devices supported by the ftdi_sio
    driver.  They should only be set by root.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit da043980723c7ee761ec107f9f7a4fe3bfc7bb2e
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue Mar 29 05:42:13 2005 -0800

    [PATCH] ftdi_sio: Support sysfs attributes for more chip
    
    A couple of sysfs attributes were added for the FT232BM (and FT245BM)
    chip type in 2.6.11.  This patch extends there use to the FT8U232AM (and
    FT8U245AM) and FT2232C chip types, where applicable.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 45240901b39ccd0c566330803a749c9f9571ca11
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue Mar 29 05:41:57 2005 -0800

    [PATCH] ftdi_sio: add array to map chip type to a string
    
    This patch just adds an array to map the chip type to a string for use
    in debug messages for the ftdi_sio driver.  I use it in the
    get_ftdi_divisor function and another patch.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7b5aa6a7ea1f5a30742d5f1d9d78854c9811bf4b
Author: Georges Toth <g.toth@e-biz.lu>
Date:   Tue Mar 29 05:26:30 2005 -0800

    [PATCH] USB: rewrite the usblcd driver
    
    The contribution was created in whole or in part by me and I have the right to
    submit it under the open source license indicated in the file.
    
    Signed-off-by: Georges Toth <g.toth@e-biz.lu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 66a79ce285a9c6e5d26466a716597985e8981ad6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 29 05:16:08 2005 -0800

    [PATCH] USB: Put the Kconfig and Makefile back in proper order for the serial drivers
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd00e1f77b92fce64d835a8c3f062a937150a9f8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 29 05:15:53 2005 -0800

    [PATCH] USB: mark functions static in the cp2101 driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c36b0103c30150487e17ba926361dc3220fa16d2
Author: craig@microtron.org.uk <craig@microtron.org.uk>
Date:   Tue Mar 29 05:15:36 2005 -0800

    [PATCH] USB: add driver for CP2101/CP2102 RS232 adaptors
    
    This patch against 2.6.10 provides the driver for the CP2101 and CP2102
    USB to RS232 adaptor chips which are found in some serial converter
    cables and usb mobile phone cables.
    
    It provides cp2101.c, and patches Kconfig and Makefile in
    drivers/usb/serial Since there is no technical data sheet freely
    available for these chips, much of the code in this driver has been
    based on protocol analysis, assumptions and guesswork.
    
    The cp210x family of devices have OEM programmable device IDs so updates
    will be required as and when new devices are found.
    
    The driver currently only supports configuration of baud rate, data
    bits, stop bits and parity mode. While this is enough to enable the use
    of a wide range of devices based on this chip, the driver is still
    incomplete in many areas such as flow control.  Unfortunately without
    technical datasheets, implementing these features is made very difficult
    indeed.
    
    Signed-off-by: Craig Shelley craig@microtron.org.uk
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aab9356ff0e79fe1c0188412c9f3de3d8584103a
Merge: a592a0d... 27649cc...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 29 04:41:34 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 748e598f95e6dbb5921eb90dd896b3699e370ee3
Merge: 692eb31... 27649cc...
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Tue Mar 29 04:19:36 2005 -0800

    Merge davem@sunset:src/BK/sparc-2.6
    into cheetah.davemloft.net:/home/davem/src/BK/sparc-2.6

commit ce4b64f432fdaa56bcdc1a11c48970e10ffdbffe
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue Mar 29 05:20:00 2005 -0600

    [PATCH] fix fc class work queue usage
    
    According to this article http://lwn.net/Articles/125930/, "When
    cancel_delayed_work() returns zero, it means that the delayed
    work request was fired off before the call; it might, in fact,
    be running on another CPU when the cancel attempt is made".
    If it is successful, it returns a nonzero value. Tracing
    through cancel_delayed_work's timer usage would seem to confirm
    this. The fc class today though performs a flush_scheduled_work,
    when the return value is nonzero instead of zero.
    
    Also it appears the fc class will use flush_scheduled_work to
    flush the work from the shost_work_q when it should be using
    flush_workqueue(shost->work_q) (flush_scheduled_work() only
    flushes the default, keventd_wq, work queue).
    
    The attached patch adds a scsi_flush_work function for
    scsi_transport_fc to use and it fixes the cancel_delayed_work()
    test to detect when to flush the work queues correctly (it
    also only calls cancel_delayed_work when the work is queued
    as delayed (scan_work is not delayed).
    
    Signed-off-by: Mike Chrisite <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2814d3969b3c20496e4b172c552623e87c3d1fe4
Merge: ff3fe16... a592a0d...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Mar 29 01:02:10 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 27649cce2886c85b367d2e2c98144c9a78526e66
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 28 21:46:30 2005 -0800

    [SPARC64]: More g5 register usage elimination.
    
    Use temporal stores and prefetches in memset/bzero
    while we are at it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a592a0d140435e410625f05c9f20fbfb8c8f7f6a
Merge: 03c9375... a023ddd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 28 21:09:45 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a023ddd0ebfae9f76c14a077163df703b67b279d
Merge: 654ebde... f54c79e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 29 05:48:28 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/net-drivers-2.6

commit 03c937527514cc196fdad6ef45ca99ff03118aa1
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 29 05:42:20 2005 -0500

    [libata sata_sil] Don't presume PCI cache-line-size reg is > 0
    
    Some BIOSen are known to screw up the PCI cache-line-size register,
    so add a paranoia check.

commit b64200542dc785eb82c4cc0841b10d1d7d8bf9b7
Merge: 654ebde... fceff08...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 29 05:18:05 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/libata-2.6

commit 5b58635b4a9ad92c5a54a99181e1e13300e9e38b
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Mon Mar 28 23:06:06 2005 -0600

    3ware 9000 driver update
    
    From: 	adam radford <aradford@gmail.com>
    
    - Add support for PAE mode.
    - Add lun support.
    - Fix twa_remove() to free irq handler/unregister_chrdev() before
    shutting down the card.
    - Change to new 'change_queue_depth' api. (From James)
    - Fix 'handled=1' ISR usage, remove bogus IRQ check (from Jeff Garzik)
    - Remove un-needed eh_abort handler.
    - Add support for embedded firmware error strings.
    
    Signed-off-by: Adam Radford <linuxraid@amcc.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a51c32f119a2397517cb21d7fe561677fac6d288
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 22:55:43 2005 -0600

    [PATCH] scsi_sysfs: use NULL instead of 0
    
    drivers/scsi/scsi_sysfs.c:814:66: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1b29c38606b1f41d9831c28f5d7cfbd965282d3f
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Mar 29 06:55:11 2005 +0200

    [NET]: Make primary TLV type optional
    
    Allows the use of the gnet_stats API for backward compatiblity
    cases where no "modern" TLV structure is needed.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73e2ef10a4d452501d286d5ddad1f0539f39e145
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Mar 28 22:49:22 2005 -0600

    [PATCH] rm unused scan delay var
    
    Is FC_SCSI_SCAN_DELAY used by a FC driver that is
    not yet in mainline? This patch just deletes it
    if not since no one else is.
    
    Signed-off-by: Mike Chrisite <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b82bc2fff322411af8b731e46ba46e1663e41313
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Mar 29 06:45:52 2005 +0200

    Cset exclude: hadi@cyberus.ca|ChangeSet|20050325173452|50562

commit ff3fe16c345d5e74d5a1c89ef2d3f6055a7463d8
Merge: 74ae524... 654ebde...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Mar 28 19:25:49 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 654ebdefc23e87ad73c8087fae3f9d1d73fd7682
Author: Christophe Saout <christophe@saout.de>
Date:   Mon Mar 28 15:43:57 2005 -0800

    [PATCH] x86-64: Fix preemption off of irq context with PREEMPT_BKL
    
    Fixing the interrupt tst for CONFIG_PREEMPT on x86-64 exposes another
    bug with CONFIG_PREEMPT_BKL.  Calling schedule due to preemption
    releases the BKL which it shouldn't do.
    
    Call preempt_schedule_irq instead (like for i386).  This fixes the
    easily reproducible filesystem errors I've seen (with reiserfs, which
    heavily relies on the BKL).
    
    Signed-off-by: Christophe Saout <christophe@saout.de>
    Signed-off-by: Andi Kleen  <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ae524ac4e9028710eed3f35a98221b6f32169e
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 28 10:50:11 2005 -0600

    [CIFS] Return inode numbers (from server) more consistently on lookup and readdir to both types of servers
    (whether they support Unix extensions or not) when serverino mount parm specified.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 738684161f014713fee74436447f4836664ff933
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 28 06:29:40 2005 -0800

    [PATCH] PCI: create PCI_DEBUG config option to make it easier for users to enable pci debugging
    
    Now you don't have to dig through a file to change a #define, it's a real config option.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 780f0ab02c33589a35cf3d9647202104c6801202
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 28 06:00:24 2005 -0800

    PCI: clean up the dynamic id logic a little bit.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit edaf1d5950d3bb2094132650da81484078a431c4
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 28 07:58:58 2005 -0600

    [PATCH] Add a scsi_device flag for RETRY_HWERROR
    
    It turns out that a bunch of USB-IDE converters make the mistake of
    returning SK = 04 (Hardware Error) whenever the IDE device signals any
    sort of error, without bothering to distinguish recoverable from
    non-recoverable errors.  The best way to handle this is for usb-storage to
    set a per-device flag indicating that these errors should always be
    retried.  The current scheme (blacklist flag but no per-device flag) isn't
    well suited for this situation.
    
    This patch adds the per-device flag and sets it initially based on the
    blacklist setting.  Once this has been merged, a separate patch will be
    submitted to Matt Dharm adding the corresponding support to usb-storage.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 19118d91bd8d55767158343e13f38dd3d39b1367
Merge: 269f263... 3abd71a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 28 05:24:58 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 3abd71a2f2796e820904d3ce2649fb904ce3ca29
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Mar 28 23:29:59 2005 +0100

    [ARM PATCH] 2583/1: add several registers to arch-ixp2000/ixp2000-regs.h
    
    Patch from Lennert Buytenhek
    
    These registers ({RAW_STATUS,ENABLE_SET,ENABLE_CLEAR}_[AB]_[0123])
    are needed for checking the status of, acking, unmasking and masking
    the 256 individual thread interrupt sources.  This is used by the
    microengine thread interrupt driver.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 939d5bb32d061003db06ab8811af09a5a778b1c4
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Mar 28 23:04:52 2005 +0100

    [ARM PATCH] 2582/1: correct thread interrupt comments in arch-ixp2000/irqs.h
    
    Patch from Lennert Buytenhek
    
    Some comments in arch-ixp2000/irqs.h say that thread interrupts 64-127
    are IXP2800-only, but this is not true: IXP2400 has 0-31 and 64-95, and
    32-63 and 96-127 are IXP2800-only.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7ba439d27f6fdbc902fe87cff28664081a1c37d1
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Mon Mar 28 22:38:21 2005 +0100

    [ARM] Fix ARM TLB shootdown code
    
    We missed flushing the TLB when we're unmapping only reserved pages.
    Since the kernel is now better at passing vmas which correspond
    solely with the region to unmap, we can use tlb_*_vma() to do
    "just enough" flushing, both for the TLB and cache.
    
    We can avoid all flushes in tlb_*_vma() for the full-MM case, and
    just do a flush_tlb_mm().  We can omit the cache flushing because
    this thread will die soon.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3c931cd4c3d1e060440812f4bfcc84656362aac8
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 16:32:20 2005 +0100

    [ARM PATCH] 2629/1: Update shark_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates shark_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9b974c327ffe7319bde05dc1f1519463e7f63eba
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 16:09:29 2005 +0100

    [ARM PATCH] 2628/1: Update simpad_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates simpad_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d1855e628f8d190e1cb04259fbd932b225895828
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:47:55 2005 +0100

    [ARM PATCH] 2627/1: Update lusl7200_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates lusl7200_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc266140c94e95f9569ea6a2e5239cdea58ff834
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:39:24 2005 +0100

    [ARM PATCH] 2626/1: Update versatile_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates versatile_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fed028fe30512e3619f67ab074db6420d238ad74
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:31:48 2005 +0100

    [ARM PATCH] 2625/1: Update lubbock_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates lubbock_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66062a06ab70f0b1259ecd2fe86825ba3cf7b203
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:22:45 2005 +0100

    [ARM PATCH] 2624/1: Update lpd7a404_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates lpd7a404_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5960eca1cdac3d02e3c3eedec2356e60058d1bb2
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:15:10 2005 +0100

    [ARM PATCH] 2623/1: Update lpd7a400_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates lpd7a400_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1f45c15881b8babd42c0f3305785bf6df920f681
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 15:07:48 2005 +0100

    [ARM PATCH] 2622/1: Update lart_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates lart_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 335a08dd848ce8f504442dcc4b2ebe1204f6bac8
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:59:29 2005 +0100

    [ARM PATCH] 2621/1: Update hackkit_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates hackkit_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc36b5984053fe1b1d9018291fba679bc7917cbe
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:51:11 2005 +0100

    [ARM PATCH] 2620/1: Update h7202_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates h7202_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 121522345fafca181b9b162c0263f8931fc51c03
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:42:46 2005 +0100

    [ARM PATCH] 2619/1: Update h7201_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates h7201_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 023837e0447be611326cb89713c0cadea94569ee
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:35:10 2005 +0100

    [ARM PATCH] 2618/1: Update h3600_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates h3600_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8628c669b4ea3155955622ff72d9c316f761066b
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:27:36 2005 +0100

    [ARM PATCH] 2617/1: Update fortunet_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates fortunet_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 269f263466ef3582731c9a403bea4d5dae615e31
Merge: 8276111... 5a00e89...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 28 05:20:51 2005 -0800

    Merge bk://linux-1394.bkbits.net/1394-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit e4430f2bb9bde0a6271c3eba1a09c25ceb2fef36
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:19:02 2005 +0100

    [ARM PATCH] 2616/1: Update smdk2410_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates smdk2410_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 56a41d362d3a03b97e31fe442289c193253004f0
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:11:19 2005 +0100

    [ARM PATCH] 2615/1: Update shannon_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates shannon_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc514a96749537917aef72eba3e299e1e682fdf3
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 14:03:00 2005 +0100

    [ARM PATCH] 2614/1: Update jornada720_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates jornada720_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3eb0ed1b3de418c1fa4ea94b4eaeb77d537566f5
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:54:31 2005 +0100

    [ARM PATCH] 2613/1: Update ixp4xx_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ixp4xx_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 327b045a6c8167057352b424c2226dfc74ebf98d
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:47:29 2005 +0100

    [ARM PATCH] 2612/1: Update ixdp2801_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ixdp2801_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5a00e89e1cc9dcea7507aca74eabf5bceb26967f
Merge: ae55089... b489072...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Mar 28 04:43:20 2005 -0800

    Merge whitespace and __nocast changes

commit 36653b4636823ea43146d54fbf1050c9c2c060ac
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:39:28 2005 +0100

    [ARM PATCH] 2611/1: Update footbridge_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates footbridge_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc3ca4a12aba457855e2e3b972c360270659b064
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:31:18 2005 +0100

    [ARM PATCH] 2610/1: Update epxa10db_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates epxa10db_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b489072eefdaaf41fb6a25cb940c40d2410bb3f1
Author: Stephen C. Tweedie <sct@redhat.com>
Date:   Mon Mar 28 04:24:26 2005 -0800

    [PATCH] ext3: fix journal_unmap_buffer race
    
    There is a race condition in jbd between journal_unmap_buffer() and
    journal_commit_transaction().  This is leading to corruption of buffers on the
    transaction's t_locked_list, leading to a variety of symptoms usually
    involving an oops in kjournald.
    
    The problem is that various special-case exit paths in journal_unmap_buffer()
    call journal_put_journal_head without any locking.  This is racing against a
    refiling of the same journal_head in journal_commit_transaction():
    
    			__journal_unfile_buffer(jh);
    			__journal_file_buffer(jh, commit_transaction,
    						BJ_Locked);
    
    The way these functions work, this leaves the jh temporarily with
    b_transaction==NULL; and if journal_unmap_buffer()'s call to
    journal_put_journal_head() hits this window, it sees the NULL transaction and
    frees the journal_head which is just about to get refiled on the locked list.
    
    The main exit path on journal_unmap_buffer() performs its
    journal_put_journal_head() before dropping the j_list_lock, so is not
    vulnerable to this race.  The fix is to move the other similar calls on
    special-case exit branches in that function so that they also release the
    journal_head before dropping that lock.
    
    This is low-risk since the new order has already been tested as the normal
    exit path from this function.  The change has had extensive testing and has
    been shown to fix the problem with no regressions found.
    
    Signed-off-by: Peter Keilty <Peter.Keilty@hp.com>
    Signed-off-by: Nicholas Dokos <nicholas.dokos@hp.com>
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3406d7beb747a164f6d4dc819dc9df5d13c96340
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Mon Mar 28 04:24:10 2005 -0800

    [PATCH] ext3 writeback "nobh" option
    
    Add a `nobh' mount option to ext3 in writeback mode: avoid attaching
    buffer_head to data pages, like ext2.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d06159a2f8fa0a824344ea78215a30b898561a0
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Mon Mar 28 04:23:53 2005 -0800

    [PATCH] ext3 writepages support for writeback mode
    
    Add writepages support for ext3 writeback mode.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fdaeaa8210bad1b3421e5c6941d53a819d6c3f3
Author: Stephen C. Tweedie <sct@redhat.com>
Date:   Mon Mar 28 04:23:36 2005 -0800

    [PATCH] ext3/jbd race: releasing in-use journal_heads
    
    Fix destruction of in-use journal_head
    
    journal_put_journal_head() can destroy a journal_head at any time as
    long as the jh's b_jcount is zero and b_transaction is NULL.  It has no
    locking protection against the rest of the journaling code, as the lock
    it uses to protect b_jcount and bh->b_private is not used elsewhere in
    jbd.
    
    However, there are small windows where b_transaction is getting set
    temporarily to NULL during normal operations; typically this is
    happening in
    
    			__journal_unfile_buffer(jh);
     			__journal_file_buffer(jh, ...);
    
    call pairs, as __journal_unfile_buffer() will set b_transaction to NULL
    and __journal_file_buffer() re-sets it afterwards.  A truncate running
    in parallel can lead to journal_unmap_buffer() destroying the jh if it
    occurs between these two calls.
    
    Fix this by adding a variant of __journal_unfile_buffer() which is only
    used for these temporary jh unlinks, and which leaves the b_transaction
    field intact so that we never leave a window open where b_transaction is
    NULL.
    
    Additionally, trap this error if it does occur, by checking against
    jh->b_jlist being non-null when we destroy a jh.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52cebf1bd99944f841687f7ea28be95561da6597
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:23:19 2005 -0800

    [PATCH] dvb: mt352: cleanups
    
    o remove s* from state, they are only used in read_status
    o remove casting of void*
    o remove FIXME in set_parameters, should be handled by dvb-core state machine
    o remove some unnecessary braces
    o remove #if 1 in read_status, and add note from Zarlink design manual
    o change read_signal_strength to read total AGC_GAIN in case
      some adapter turns on the RF_AGC loop.
    (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a54001c3f5106ea84b8a0519d078299099919490
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:23:03 2005 -0800

    [PATCH] dvb: gcc 2.95 compile fixes
    
    Patch by Olaf Titz: gcc 2.95 compile fixes
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71c0cdd08958d2966bc2ec506dccc84ab7f4f931
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:22:46 2005 -0800

    [PATCH] dvb: ttusb_dec: cleanup
    
    Cleanup patch from Peter Beutner:
    
    o unregister the input device on disconnect
      and move cleanup stuff of the RC to own function
    o keymap should be static not const
    o set up keymap correctly and completly for input device
      plus a more cosmetic one:
    o usb endpoints are only 4bit numbers[0...15], the 8th bit
      only specifies the direction and is set by the snd/rcvxxxpipe() macro
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac4633fbdb5e8b5ac4f9297b53c469d93f90b534
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:22:33 2005 +0100

    [ARM PATCH] 2609/1: Update ep80219_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ep80219_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e93aac31fc87c6fee4752d1334bee889506c63cc
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:22:30 2005 -0800

    [PATCH] dvb: support Nova-S rev 2.2
    
    Support for Nova-S rev 2.2 (Gregor Kroesen)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4168e298be2f93a76230ceba9306308787c9092
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:22:13 2005 -0800

    [PATCH] dvb: sparse warnings on one-bit bitfields
    
    Remove some sparse warnings on one-bit bitfields.
    
    Signed-off-by: Peter Hagervall <hager@cs.umu.se>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cca0b5524bb30f8b5ab49fd305404e33935b98b2
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:21:57 2005 -0800

    [PATCH] dvb: dibusb: support dtt200u (Yakumo/Typhoon/Hama) USB2.0 device
    
    o added native support for the dtt200u (Yakumo/Typhoon/Hama) USB2.0 device
    o URBs are now submitted, when the actual transfer began, not right from the
      device plugin (solves a lot of problems)
    o minor fixes in the dib3000-frontends
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cea2a50d4214404d8108bae35866c520ecfc3ce
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:21:40 2005 -0800

    [PATCH] dvb: convert from pci_module_init to pci_register_driver
    
    From: http://kerneljanitors.org/TODO
    o convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f72e9c27cc2d78cd3aef2ef74408cf69a4235310
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:21:23 2005 -0800

    [PATCH] dvb: vfree() checking cleanups
    
    vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e3467b3631da96e9be6702d0cd7fd15dbb37984
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:21:06 2005 -0800

    [PATCH] dvb: dibusb: HanfTek UMT-010 fixes
    
    HanfTek UMT-010: adapted the pll-programming, the usb-ids and the firmware name
    to the new firmware (thanks to Sunny Liu from HanfTek)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58e313c312ef83a005f32260b59a5307ab8d1190
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:20:50 2005 -0800

    [PATCH] dvb: support for Technotrend PCI DVB-T
    
    patch by Anssi Hannula: add support for Technotrend PCI DVB-T
    (0x13c2,0x0008, Grundig 29504-401 (LSI L64781 Based) frontend)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bc197802f9758a8787885d23e3e131b11051333
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:20:33 2005 -0800

    [PATCH] dvb: dibusb: remove useless ifdef
    
    removed useless ifdef: dvb_register_adapter always takes 3 parameters in this tree
    (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca7751b684b227a416f53e2b462df1d479d3fc4c
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:20:17 2005 -0800

    [PATCH] dvb: clear up confusion between ids and adapters
    
    clear up confusion between ids and adapters (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc98eef51a3308dfc3110ec99a5803495382d9ca
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:19:59 2005 -0800

    [PATCH] dvb: frontends: kfree() cleanup
    
    kfree(NULL) is safe (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63ac9fdea206c5740c7913a78b0d7008ca7df152
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:19:42 2005 -0800

    [PATCH] dvb: fix CAMs on Typhoon DVB-S
    
    Fix for CAMs on Typhoon DVB-S, where it would constantly reset itself.
    (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e1f937afa0029d3f7786beb2ca055c983dec8ee
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:19:26 2005 -0800

    [PATCH] dvb: saa7146: remove duplicate setgpio
    
    Remove duplicate setgpio (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbbebdf18f85bb216626e53092ca0baba21f2783
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:19:10 2005 -0800

    [PATCH] dvb: tda10021: fix continuity errors
    
    Fix Continuity Errors with tda10021 (slickhenry, Robert Schlabbach)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d3d6647df9d79167b12562bcb989ce45a713634
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:18:53 2005 -0800

    [PATCH] dvb: dibusb: pll fix
    
    o fixed pll frequency calculation for channels > 700 MHz.  (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 506ab522b15d064ce3110841c9760f8f2a9511be
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:18:36 2005 -0800

    [PATCH] dvb: ttusb_dec: IR support
    
    Add IR support added by Peter Beutner
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e19a53196d0816b47bc7eb7b092d84558eb19fb9
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:18:20 2005 -0800

    [PATCH] dvb: OREN or51211, or51132_qam and or51132_vsb firmware download info
    
    o add OREN or51211, or51132_qam and or51132_vsb firmware
    o correct some links
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00d62742591b856bfece1adc70ae5bd215251e08
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:18:04 2005 -0800

    [PATCH] dvb: dibusb: support nova-t usb ir
    
    o added native nova-t support, since only the nova-t firmware works with the
      nova-t remote control
    o added keys statically (maybe we should find something to sort this out...
      cinergyt2 is doing the same)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3ce808bd32ac94a5609ae293eda705141783d4c
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:17:47 2005 -0800

    [PATCH] dvb: support pcHDTV HD2000
    
    o DVB support for the pcHDTV HD2000 card, submitted by Rusty Scott
    o remove bttv dependency from frontend (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc11415323cb13c1d5c52f937150cc5f4294d99e
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:17:30 2005 -0800

    [PATCH] dvb: corrected links to firmware files
    
    corrected links to firmware files (reported by Stefan Frings)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3afd36454e9102d6cf6351b9a94bbff0b540c7f9
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:17:14 2005 -0800

    [PATCH] dvb: av7110: error handling during attach
    
    Janitoring - error handling during attach
    o av7110_arm_sync(): small helper to factor out some code;
    o av7110_attach() does not check the status code returned by all the
      functions is uses;
    o balance the error path in av7110_attach and have it easy to check.
      Please check it;
    o if everything is correctly balanced, device_initialized is not needed
      anymore in struct av7110;
    o av7110_detach(): no need to cast a void * pointer;
    o av7110_detach(): die #ifdef, die !
    o change the returned value of av7110_av_exit() as it can't fail;
    o change the returned value of av7110_ca_init() as it can fail. Removed
      extraneous casts while are it;
    o check for failure of vmalloc() in ci_ll_init().
    o vfree(NULL) is safe.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9a99b8dab6fb6fdbf367fbdd5f1b59ed2d78b09
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:16:57 2005 -0800

    [PATCH] dvb: saa7146: static initialization
    
    Static initialization.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 190a63eee47621edc1c249e997a9e59ea1dca28d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:16:41 2005 -0800

    [PATCH] dvb: av7110: fix Oops when av7110_ir_init() failed
    
    o don't call av7110_ir_init() if driver initialization failed already
      due to previous errors (resulted in Oops in out-of-memory conditions) (me)
    o don't do av7110_ir_exit if init was not done (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b529dbddbf5fc96d6e45ad3070c5fa19083e309
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:16:24 2005 -0800

    [PATCH] dvb: ttusb-budget: s/usb_unlink_urb/usb_kill_urb/
    
    patch by Colin Western: s/usb_unlink_urb/usb_kill_urb/
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76f734f1c4281ee50d93367a3a1464658d77d71d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:16:07 2005 -0800

    [PATCH] dvb: nxt2002: fix max frequency
    
    Patch by Taylor Jacob and Tom Dombrosky: There was a typo in the BBTI/B2C2
    specs that stated the upper frequency of the air2pc/nxt2002 was 806Mhz, not
    860Mhz.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf496b6ae8f53de95e129d6112b2bbc5885339a1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:15:50 2005 -0800

    [PATCH] dvb: refactor sw pid filter to drop redundant code
    
    o added index field to struct dvb_demux_feed for having a unique feed id, which
      can be used for hardware pid filter tables
    o dibusb: adding the index to struct dvb_demux_feed makes dibusb-pid-filtering redundant
    o ttusb-budget: struct channel removed in favour of dvbdmxfeed->index
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40b1ede69f7375f0e716198ac42b7798d51d2452
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:15:33 2005 -0800

    [PATCH] dvb: cleanups, make stuff static
    
    This patch contains the following possible cleanups:
    o make needlessly global code static
    o remove the following EXPORT_SYMBOL'ed but unused function:
      - bt8xx/bt878.c: bt878_find_by_i2c_adap
    o remove the following unused global functions:
      - dvb-core/dvb_demux.c: dmx_get_demuxes
      - dvb-core/dvb_demux.c: dvb_set_crc32
    o remove the following unneeded EXPORT_SYMBOL's:
      - dvb-core/dvb_demux.c: dvb_dmx_swfilter_packet
      - dvb-core/dvb_demux.c: dvbdmx_connect_frontend
      - dvb-core/dvb_demux.c: dvbdmx_disconnect_frontend
      - dvb-core/dvbdev.c: dvb_class
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0aad13d5f6e4d7c5b23f0c988490e5e90be6354
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:15:16 2005 -0800

    [PATCH] dvb: support KWorld/ADSTech Instant DVB-T USB2.0
    
    o added support for KWorld/ADSTech Instant DVB-T USB2.0 (DiB3000M-B)
    o added deactivation option of the pid parser for the DiB3000M-B (since there
      are USB2.0 devices and which now have the ability to deliver the complete
      Transport Stream)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c7b3e93f44419bbbc9ed4f593beea1368c19bdb
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:14:58 2005 -0800

    [PATCH] dvb: skystar2: fix MAC address reading
    
    fixed MAC address reading (eeprom address to read, was not correctly set,
    respectively overwritten)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ca07f3a175a4e70cf8fd61bb1c6e733702ff7ca
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:14:42 2005 -0800

    [PATCH] dvb: l64781: email address fix
    
    fix marko kohtala's mail address
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4e79b95f523e050ad9391cc355fa998cd93de26
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:14:40 2005 +0100

    [ARM PATCH] 2608/1: Update pxa255-idp_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates pxa255-idp_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bce62f829867ecf558c1c03134fa425017f95322
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:14:26 2005 -0800

    [PATCH] dvb: ttusb_dec: use alternative interface to save bandwidth
    
    Use alternative interface.  Asks for less bandwidth and therefore works with
    OHCI as well as UHCI (Alex Woods)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e60ec7217eb36d470bac67ac50d7bc94e3b38df
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:14:09 2005 -0800

    [PATCH] dvb: dibusb: increased the number of urbs for usb1.1 devices
    
    increased the number of urbs for usb1.1 devices (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f885b1b6758e35f4328f5be36f89e2d540fa33a1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:13:53 2005 -0800

    [PATCH] dvb: dibusb: debug changes
    
    o use own err,info,warn defines, driver description
    o remove warning about firmware bug
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 655cae55fc1e24051e5a96d2a914b3d711df010d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:13:37 2005 -0800

    [PATCH] dvb: dib3000: corrected device naming
    
    corrected device naming (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c176bc2d21eed9d197ba5606e5ef2deb5a3b4e7
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:13:20 2005 -0800

    [PATCH] dvb: get_dvb_firmware: new unshield version
    
    patch by Mattias Holmlund: support new version of unshield for
    sp887x firmware extraction (changed cmdline parameters)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eee5001d6101d121d7e5b8497546a06398c9399c
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:13:04 2005 -0800

    [PATCH] dvb: nxt2002: QAM64/256 support
    
    patch by Taylor Jacob: Add QAM64/256 Support
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d200712f1024c330904bbaf23af8fb15a245853b
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:12:46 2005 -0800

    [PATCH] dvb: dibusb: support Hauppauge WinTV NOVA-T USB2
    
    o added support for Hauppauge WinTV NOVA-T USB2 (clone of MOD3000P by DiBcom)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb3247c2d0c9ff5d1ceccc83fbd47eee18a27278
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:12:29 2005 -0800

    [PATCH] dvb: dibusb readme update
    
    dibusb readme update (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4780b8776afec164b01ecda0a60e164037c2092
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:12:13 2005 -0800

    [PATCH] dvb: ves1x93: invert_pwm fix
    
    fix unhandled invert_pwm option (needed on dbox2 hardware)
    submitted by Carsten Juttner
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d84baa095f8d4a3e0c4c191d9aedd90530acebed
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:11:56 2005 -0800

    [PATCH] dvb: skystar2: update email address
    
    Updated email address.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1778e17d857486eb3f46f98b593fc4b2e1d9b303
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:11:40 2005 -0800

    [PATCH] dvb: support Activy Budget card
    
    support Activy Budget with ALPS BSRU6 tuner
    submitted by Andreas 'randy' Weinberger.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d3f66c3131dc9745a72a87e5c1cbab9c2f81edb
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:11:24 2005 -0800

    [PATCH] dvb: mt352: Pinnacle 300i comments
    
    Comment preliminary Pinnacle 300i changes to the mt352 driver.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c98cdabef8cc4b6fbcf72c6741a09946e8a35e22
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:11:08 2005 -0800

    [PATCH] dvb: skystar2: remove duplicate pci_release_region()
    
    remove duplicated pci_release_region() etc.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf94e5f3d5321e24a63792a388c191016c923df
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:10:51 2005 -0800

    [PATCH] dvb: dibusb: misc. fixes
    
    o worked around hw_sleep handling for usb1.1 devices
    o fixed oops when no frontend was attached (because of usb1.1 timeouts in my
      debugging sessions)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13b1d2355adb46b60892b7cd593c05b286a04873
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:10:35 2005 -0800

    [PATCH] dvb: dibcom: frontend fixes
    
    o corrected the name in driver_desc
    o removed debug messages and some comments (see dib3000-watch)
    (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09c95deb071c87541041177a3d7d1fa03512db20
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon Mar 28 04:10:18 2005 -0800

    [PATCH] dvb: clarify firmware upload messages
    
    clarify firmware upload messages
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d239a0c8b99541b47eb9239396dc8420f0e218b7
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:10:02 2005 -0800

    [PATCH] hfs: unicode decompose support
    
    HFS+ specificies that a number of unicode characters must be stored in its
    decomposed form on disk.  This adds the support for the composition and
    decomposition of such HFS+ file names.  There is also an option to turn it off
    again, in case one managed to create invalid names, which otherwise become
    inaccessible.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61e76bc2799e5836f81019224757ac15a8455d0d
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:09:45 2005 -0800

    [PATCH] hfs: add nls support
    
    Add full nls support for HFS+.  The default is still utf8, but that can be
    changed now via a mount option.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fad7d09c3c3ea606b992e17d97bf7f8bdd985fda
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:09:28 2005 -0800

    [PATCH] hfs: use parse library for mount options
    
    Make use of parser library to parse mount options.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59aecb4cdfbb8e8e3fb57f61a26c677b827fc110
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:09:12 2005 -0800

    [PATCH] hfs: fix sign problem in hfs_ext_keycmp
    
    The key values are unsigned, so comparing them using the difference doesn't
    always work.
    
    (Problem reported by k_guillaume@libertysurf.fr)
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 849fbf664537f7bf17b87f63ef2051ee8e2c4d9c
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:08:56 2005 -0800

    [PATCH] hfs: more bnode error checks
    
    Check for errors during reading of bnode pages and report them.  Also improve
    error checks in case bnode validity checks failed.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75fd58c6c5418b69ad93f40d53f65ae05dbe32e0
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:08:39 2005 -0800

    [PATCH] hfs: fix umask behaviour
    
    This makes umask behaviour more consistent, so it's now also used for new
    files and the mount options behave like other umask users.  (Problem reported
    by <horms@verge.net.au>)
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d59b40a3e666ca6cb7b261bc8d11cdabb75a40d2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 28 04:08:23 2005 -0800

    [PATCH] hfs: free page buffers in releasepage
    
    Call try_to_free_buffers() when a page can be released.  This behaviour
    changed during 2.5 and wasn't fixed in hfs while porting it to 2.6.  Also
    remove an unnecessary PageActive() check, only the node ref count is really
    relevant.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a61e05e6b5b87ddb42e08a45b0b51787d3ba652
Author: Patrick vd Lageweg <patrick@bitwizard.nl>
Date:   Mon Mar 28 04:08:06 2005 -0800

    [PATCH] Specialix/IO8 cli() conversion
    
    This patch converts all save_flags/restore_flags to the new
    spin_lock_irqsave/spin_unlock_irqrestore calls, as well as some other 2.6.X
    cleanups.  This allows the "io8+" driver to become SMP safe.
    
    The large size of this patch comes mostly from the added debug features.
    
    Signed-off-by: Patrick vd Lageweg <patrick@bitwizard.nl>
    Signed-off-by: Rogier Wolff <R.E.Wolff@BitWizard.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6136ca6b07461156896016667411f21ea729ec6e
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Mon Mar 28 04:07:50 2005 -0800

    [PATCH] au1x00_uart deadlock fix
    
    This driver also needs to drop the lock when calling back into the tty layer.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1ffa553070ed8f0642cda882764c1f99383c4a8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 28 04:07:34 2005 -0800

    [PATCH] fs/attr.c: fix check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec9bfd07f3952f7c581f91acddc70337fc0489c3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 28 04:07:17 2005 -0800

    [PATCH] drivers/telephony/ixj: fix a use after free
    
    This patch fixes a use after free found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2def55b4ea9683936ffedebec1a6af804440e51d
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 13:07:06 2005 +0100

    [ARM PATCH] 2607/1: Update pleb_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates pleb_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d35ef163318b09097e19c9039e291b0bb9491ccc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 28 04:07:01 2005 -0800

    [PATCH] drivers/block/DAC960.c: fix a use after free
    
    This patch fixes a use after free found by the Coverity checker.
    
    Controller is used in the Failure path.
    
    In the Failure patch, Controller will be freed in the end, so this kfree
    can simply be deleted.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fb02d84c862c0bf859b1c3b6041ff28d0e142fa
Author: Amit Gud <gud@eth.net>
Date:   Mon Mar 28 04:06:44 2005 -0800

    [PATCH] unified spinlock initialization
    
    - remove the usage of {SPIN,RW}_LOCK_UNLOCKED as far as possible
    
    - add a note to Documentation/spinlocks.txt about the deprecation of the
      macros {SPIN,RW}_LOCK_UNLOCKED
    
    Signed-off-by: Amit Gud <gud@eth.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa045f5c157bcd1b04fa85e81af23ebccefd65af
Author: Ronald Bultje <rbultje@ronald.bitfreak.net>
Date:   Mon Mar 28 04:06:27 2005 -0800

    [PATCH] bt819 array indexing fix
    
    Signed-off-by: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f8b061050c7f12da0a9435604ef6cab700a7dac
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Mar 28 04:06:09 2005 -0800

    [PATCH] Netmos parallel/serial/combo support
    
    There's a bugzilla entry for this here:
        http://bugzilla.kernel.org/show_bug.cgi?id=4334
    
    This should fix all the problems I know about with Netmos combo cards:
        - 9735, 9835, and 9855 are not supported
        - combo cards with parallel are erroneously claimed by serial driver
        - serial and parport_serial blindly probe for ports
    
    parport_pc:
        Sort Netmos device IDs, no functional change.
    parport_serial:
        Previously supported 9735 and 9835.  Add 9745, 9845, 9855, and
        add init hooks to discover how many serial/parallel ports are
        actually present (the boards are available in various configs).
        Add protection for overflow of static tables.
    quirks:
        Detect Netmos combo (parallel + serial) cards and change class from
        SERIAL to OTHER to prevent serial driver from claiming them.
    8250:
        Add init hook to discover the number of serial ports present.
        This prevents us from poking at unused BARs.
    pci_ids:
        Add Netmos 9745, 9845, and sort.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8ddabd480cb2a8fefb6b69e4c2adc8570dbb11c
Author: wendyx@us.ibm.com <wendyx@us.ibm.com>
Date:   Mon Mar 28 04:05:53 2005 -0800

    [PATCH] serial: Digi Neo driver
    
    This device driver is for the Digi Neo serial adapter.  We got several rounds
    of detail comments from linux community and updated our earlier patches
    according to comments including Jeff Garzik and Greg Kroah-Hartman's.
    
    Signed-off-by: Wen Xiong <wendyx@us.ltcfwd.linux.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f1820994478d08cebc58b3cb56394d75a1cba1a
Author: Patrick vd Lageweg <patrick@bitwizard.nl>
Date:   Mon Mar 28 04:05:36 2005 -0800

    [PATCH] generic-serial cli() conversion
    
    This patch converts all save_flags/restore_flags to the new
    spin_lock_irqsave/spin_unlock_irqrestore calls, as well as some other 2.6.X
    cleanups.  This prepares the way for the "io8+", "sx" and "rio" drivers to
    become SMP safe.  Patches for those drivers follow.
    
    Signed-off-by: Patrick vd Lageweg <patrick@bitwizard.nl>
    Signed-off-by: Rogier Wolff <R.E.Wolff@BitWizard.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 831dd35e92e0d56dad76820cad62eafaaef16f49
Author: Seth Rohit <rohit.seth@intel.com>
Date:   Mon Mar 28 04:05:21 2005 -0800

    [PATCH] arch hook for notifying changes in PTE protections bits
    
     Recently on IA-64, we have found an issue where old data could be used by
     apps.  The sequence of operations includes few mprotects from user space
     (glibc) goes like this:
    
     1- The text region of an executable is mmaped using
        PROT_READ|PROT_EXEC.  As a result, a shared page is allocated to user.
    
     2- User then requests the text region to be mprotected with
        PROT_READ|PROT_WRITE.  Kernel removes the execute permission and leave
        the read permission on the text region.
    
     3- Subsequent write operation by user results in page fault and
        eventually resulting in COW break.  User gets a new private copy of the
        page.  At this point kernel marks the new page for defered flush.
    
     4- User then request the text region to be mprotected back with
        PROT_READ|PROT_EXEC.  mprotect suppport code in kernel, flushes the
        caches, updates the PTEs and then flushes the TLBs.  Though after
        updating the PTEs with new permissions, we don't let the arch specific
        code know about the new mappings (through update_mmu_cache like
        routine).  IA-64 typically uses update_mmu_cache to check for the
        defered flush flag (that got set in step 3) to maintain cache coherency
        lazily (The local I and D caches on IA-64 are incoherent).
    
    DavidM suggeested that we would need to add a hook in the function
    change_pte_range in mm/mprotect.c This would let the architecture specific
    code to look at the new ptes to decide if it needs to update any other
    architectual/kernel state based on the updated (new permissions) PTE
    values.
    
    We have added a new hook lazy_mmu_prot_update(pte_t) that gets called
    protection bits in PTEs change.  This hook provides an opportunity to arch
    specific code to do needful.  On IA-64 this will be used for lazily making
    the I and D caches coherent.
    
    Signed-off-by: David Mosberger <davidm@hpl.hp.com>
    Signed-off-by: Rohit Seth <rohit.seth@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5087f7016fee9a24c52528fcdd5fe75d0d88e513
Author: relf@os2.ru <relf@os2.ru>
Date:   Mon Mar 28 04:05:04 2005 -0800

    [PATCH] fs/hpfs/*: fix HPFS support under 64-bit kernel
    
    The provided patch fixes HPFS filesystem support under 64-bit Linux kernel
    and closes the bugreport http://bugme.osdl.org/show_bug.cgi?id=4333
    
    The problem is in 'time_t' size which is 8 bytes on 64-bit systems
    (comparing to 4 bytes on 32-bit systems).  The patch introduces local
    'time32_t' type of the fixed size 4 and uses it where required.
    
    Cc: Mikulas Patocka <mikulas@artax.karlin.mff.cuni.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5ecffb016c222b27b81ceedfe421dd6a23cd53c
Author: Magnus Damm <damm@opensource.se>
Date:   Mon Mar 28 04:04:48 2005 -0800

    [PATCH] module parameter fixes
    
    Crystal clear MODULE_PARM_DESC typo fixes for: bt878, edgeport, g_ether,
    budget, cifs, drm, eepro100
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ec33be7586a7ceb4dfdedf7ce230d9b37b6958
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon Mar 28 04:04:30 2005 -0800

    [PATCH] nlm: fix f_count leak
    
    I can't see any reason for this file->f_count++.  Removing it fixes a bug
    which leaves an exported filesystem busy if a callback for a lock held on that
    filesystem ever failed.
    
    Found by Terence Rokop.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f065212c55e47af15161aecacf626d866efa58db
Author: Mika Kukkonen <mikukkon@gmail.com>
Date:   Mon Mar 28 04:04:14 2005 -0800

    [PATCH] Fix compile warning in drivers/pnp/resource.c with !CONFIG_PCI
    
    drivers/pnp/resource.c:24: warning: `pnp_skip_pci_scan' defined but not used
    
    Signed-off-by: Mika Kukkonen (mikukkon@gmail.com)
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d84f22cb6d8e2ec28bad3dc09bff8faf9acf47d
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Mon Mar 28 04:03:58 2005 -0800

    [PATCH] FAT: Fix msdos ->[ac]{date,time}
    
    MSDOS doesn't have ->adate and ->c{date,time}, those should be filled
    by zero.
    
    This fixes my recent changes.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 881b174b59eccaaf9f502b8b003f7b57142ab516
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Mon Mar 28 04:03:42 2005 -0800

    [PATCH] FAT: set MS_NOATIME to msdos
    
    MSDOS doesn't have atime, so this sets MS_NOATIME to msdos in order that we
    don't get unnecessary writes.
    
    Signed-off-by: Werner Almesberger <werner@almesberger.net>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fdb2f143b3c74d9eeff3c76eef3a3df7daea853
Author: Richard Henderson <rth@twiddle.net>
Date:   Mon Mar 28 04:03:25 2005 -0800

    [PATCH] alpha: elimitate two warnings from gcc4
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8480d89d71575a59a49c70314f9d2633c1dd59e9
Author: Richard Henderson <rth@twiddle.net>
Date:   Mon Mar 28 04:03:09 2005 -0800

    [PATCH] small warning fix for gcc4
    
    Eliminates "warning: type qualifiers ignored on function return type".
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f53145cc7ff30d3e6d12ed4cf037daedda9d7b5
Author: Russell King <rmk+pcmcia@arm.linux.org.uk>
Date:   Mon Mar 28 04:02:53 2005 -0800

    [PATCH] pcmcia: clean up suspend
    
    Where suspend is implemented, all socket drivers set their socket state to
    "dead_socket" as the first thing in their suspend ops method.  Factor this
    out to the core PCMCIA code.
    
    This allows us to kill some suspend methods, and reduce the references to
    "dead_socket".  Note that the suspend ops method is now optional.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98340b5b65824af9a5fdcebea2e410b77c203634
Author: Russell King <rmk@arm.linux.org.uk>
Date:   Mon Mar 28 04:02:36 2005 -0800

    [PATCH] Fix PCMCIA resume with card inserted
    
    The following patch fixes a minor but annoying issue with PCMCIA resume.
    When a machine is suspended with an empty socket, and then resumed with a
    card in the socket, the card is ignored.  The following patch adjusts the
    resume paths such that we detect the card and properly initialise it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10b1d788d83f9ba6eb641ff9f91fc3eab78022ea
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 28 04:02:19 2005 -0800

    [PATCH] alpha build fixes
    
    Needed this to build Fedora rawhide kernel (2.6.12-rc1 + some patches) on
    alpha.  This is the upstream portion of the build fixes.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5274eb71123151e25e31bd5bf45e48ada9e6c3de
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 04:02:03 2005 -0800

    [PATCH] io_remap_pfn_range: convert last callers
    
    io_remap_pfn_range() remaining callers:
      convert all remaining callers of io_remap_page_range()
      to io_remap_pfn_range();
      add io_remap_page_range() to feature-removal-schedule.txt;
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 265b13c7a0326ba2d4fecc4efc08770bdd8a3319
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 04:01:45 2005 -0800

    [PATCH] io_remap_pfn_range: fix some callers for XEN
    
    (from Keir:)
    I have audited the drivers/ and sound/ directories. Most uses of
    remap_pfn_range are okay, but there are a small handful that are
    remapping device memory (mostly AGP and DRM drivers).
    
    Of particular driver is the HPET driver, whose mmap function is broken even
    for native (non-Xen) builds.  If nothing else, vmalloc_to_phys should be used
    instead of __pa to convert an ioremapped virtual address to a valid physical
    address.  The fix in this patch is to remember the original bus address as
    probed at boot time and to pass this to io_remap_pfn_range.
    
    Signed-off-by: Keir Fraser <keir@xensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07deb35c84171df8917b05faa5eb231ef5860315
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 04:01:29 2005 -0800

    [PATCH] io_remap_pfn_range: convert sparc callers
    
    io_remap_pfn_range():
      convert sparc32/64 callers of io_remap_page_range(with 6 args)
      to io_remap_pfn_range(with 5 args);
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fd200244636c19389ded891665d8abb8d96d440
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 04:01:12 2005 -0800

    [PATCH] io_remap_pfn_range: add for all arch-es
    
    This patch introduces a new interface function for mapping bus/device memory:
    io_remap_pfn_range.  This accepts the same parameters as remap_pfn_range and
    io_remap_page_range but should be used in any situation where the caller is
    not simply remapping ordinary RAM.  For example, when mapping device registers
    the new function should be used.
    
    The distinction between remapping device memory and ordinary RAM is critical
    for the Xen hypervisor.
    
    This patch series also cleans up the remaining users of io_remap_page_range
    (in particular, the several sparc-specific sections in various drivers that
    use a special form of io_remap_page_range: an extra <iospace> argument for
    SPARC arch.) by converting them to use io_remap_pfn_range(), where
    io_remap_pfn_range() supports passing <iospace> as part of the pfn argument.
    
    The sparc32 & sparc64 code needs live testing.
    
    
     (from Keir:)
    
     I have audited the drivers/ and sound/ directories.  Most uses of
     remap_pfn_range are okay, but there are a small handful that are remapping
     device memory (mostly AGP and DRM drivers).
    
     Of particular driver is the HPET driver, whose mmap function is broken even
     for native (non-Xen) builds.  If nothing else, vmalloc_to_phys should be used
     instead of __pa to convert an ioremapped virtual address to a valid physical
     address.  The fix in this patch is to remember the original bus address as
     probed at boot time and to pass this to io_remap_pfn_range.
    
    io_remap_pfn_range():
      add io_remap_pfn_range() for all arches;
      add MK_IOSPACE_PFN(), GET_IOSPACE(), and GET_PFN()
    	for all arches but primarily for sparc32/64's extended IO space,
      sparc: kill the hack of using low bit of <offset> to mean
    	write_combine or set side-effect (_PAGE_E) bit;
    	(DaveM suggested that I kill it;)
      future: convert remaining callers of io_remap_page_range() to
    	io_remap_pfn_range() and deprecate io_remap_page_range();
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58aceba09b4f67abd309d199de8f2da375f45e88
Author: Jakub JelÃ­nek <jakub@redhat.com>
Date:   Mon Mar 28 04:00:54 2005 -0800

    [PATCH] Futex: make futex_wait() atomic again
    
    Call get_futex_value_locked in futex_wait with futex hash bucket locked and
    only enqueue the futex if futex has the expected value.  Simplify
    futex_requeue.
    
    Signed-off-by: Jakub Jelinek <jakub@redhat.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c09ce22cae6c775e7733a4798a44e6ef727a6e5a
Author: Stephen C. Tweedie <sct@redhat.com>
Date:   Mon Mar 28 04:00:38 2005 -0800

    [PATCH] ext2/3 file limits to avoid overflowing i_blocks
    
    As discussed before, we can overflow i_blocks in ext2/ext3 inodes by
    growing a file up to 2TB.  That gives us 2^32 sectors of data in the file;
    but once you add on the indirect tree and possible EA/ACL metadata,
    i_blocks will wrap beyond 2^32.  Consensus seemed to be that the best way
    to avoid this was simply to stop files getting so large that this was a
    problem in the first place; anything else would lead to complications if a
    sparse file tried to overflow that 2^32 sector limit while filling in
    holes.
    
    I wrote a small program to calculate the total indirect tree overhead for
    any given file size, and 0x1ff7fffe000 turned out to be the largest file we
    can get without the total i_blocks overflowing 2^32.
    
    But in testing, that *just* wrapped --- we need to limit the file to be one
    page smaller than that to deal with the possibility of an EA/ACL block
    being accounted against i_blocks.
    
    So this patch has been tested, at least on ext3, by letting a file grow
    densely to its maximum size permitted by the kernel; at 0x1ff7fffe000, stat
    shows the file to have wrapped back exactly to 0 st_blocks, but with the
    limit at 0x1ff7fffd000, du shows it occupying the expected 2TB-blocksize
    bytes.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b8f061e04e3090a40f2828434f17c9003013cc7
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 28 04:00:22 2005 -0800

    [PATCH] posix-cpu-timers and cputime_t divisons.
    
    The posix cpu timers introduced code that will not work with an arbitrary
    type for cputime_t.  In particular the division of two cputime_t values
    broke the s390 build because cputime_t is define as an unsigned long long.
    
    The first problem is the division of a cputime_t value by a number of
    threads.  That is a cputime_t divided by an integer.  The patch adds
    another macro cputime_div to the cputime macro regime which implements this
    type of division and replaces all occurences of a cputime / nthread in the
    posix cpu timer code.
    
    Next problem is bump_cpu_timer. This function is severly broken:
    
    1) In the body of the first if statement a timer->it.cpu.incr.sched is
       used as the second argument of do_div.  do_div expects an unsigned long
       as "base" parameter but timer->it.cpu.incr.sched is an unsigned long
       long.  If the timer increment ever happens to be >= 2^32 the result is
       wrong and if the lower 32 bits are zero this even crashes with a fixed
       point divide exception.
    
    2) The cputime_le(now.cpu, timer->it.cpu.expires.cpu) in the else if
       condition is wrong.  The cputime_le() reads as "now.cpu <=
       timer->it.cpu.expires.cpu" and the subsequent cputime_ge() reads as
       "now.cpu >= timer.it.cpu.expires.cpu".  That means that the two values
       needs to be equal to make the body of the second if to have any effect.
       The first cputime_le should be a cputime_ge.
    
    3) timer->it.cpu.expires.cpu and delta in the else part of the if are of
       type cputime_t.  A division of two cputime_t values is undefined (think
       of cputime_t as e.g.  a struct timespec, that just doesn't work).  We
       could add a primitive for this type of division but we'd end up with a
       64 bit division or something even more complicated.
    
    The solution for bump_cpu_timer is to use the "slow" division algorithm
    that does shifts and subtracts.  That adds yet another cputime macro,
    cputime_halve to do the right shift of a cputime value.
    
    The next problem is in arm_timer.  The UPDATE_CLOCK macro does the wrong
    thing for it_prof_expires and it_virt_expires.  Expanded the macro and
    added the cputime magic to it_prof/it_virt.
    
    The remaining problems are rather simple, timespec_to_jiffies instead of
    timespec_to_cputime and several cases where cputime_eq with cputime_zero
    needs to be used instead of "== 0".
    
    What still worries me a bit is to use "timer->it.cpu.incr.sched == 0" as
    check if the timer is armed at all.  It should work but its not really
    clean.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdce31f1b46f1f5a6888a1c690551fef335c848c
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Mon Mar 28 04:00:05 2005 -0800

    [PATCH] Fix oops when inserting ipmi_si module
    
    In one of machines in our lab, spmi->addr.register_bit_width is 0 (so the
    returned address is invalid).  Ignoring the check will cause inserting the
    module oops.
    
    Signed-off-by: Li Shaohua<shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4733474d20cbe84f8bd83fd38aef645b6eb11f57
Author: George Anzinger <george@mvista.com>
Date:   Mon Mar 28 03:59:49 2005 -0800

    [PATCH] Fix POSIX timers expiring before their scheduled time
    
    This patch fixes the problem of POSIX timers returning too early due to not
    accounting for the time starting mid jiffie.
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fb021f5831dbbbc4e2443efc3511cc23692e6fc
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 03:59:33 2005 -0800

    [PATCH] cciss: range chcking fix
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8cbc47b4e9510d5a49642c0b78cfbdc88c96566
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 03:59:17 2005 -0800

    [PATCH] mtrr: uaccess range checking fix
    
    mtrr: prevent copy_from_user(to, from, -1) or (if that should
      succeed somehow) write to line[-1] (on stack);
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ad8c79cb32c4a145af23ab45fc70225240ae92c
Author: Paul Jackson <pj@sgi.com>
Date:   Mon Mar 28 03:59:00 2005 -0800

    [PATCH] cpusets: alloc GFP_WAIT sleep fix
    
    The cpuset mems_allowed update code in alloc_pages_current could (in
    theory) put a task to sleep that didn't allow sleeping (did not have
    __GFP_WAIT flag set).  In the rare circumstance that the current tasks
    mems_generation is outofdate compared to the tasks cpuset mems_generation,
    this mems_allowed update code needs to grap cpuset_sem, which can sleep.
    
    We avoid this by not trying to update mems_allowed here if we can't sleep
    (__GFP_WAIT not set).
    
    Thanks to Ray Bryant <raybry@sgi.com> for noticing this.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47f65a4152108517d4c2fbc52ec1e007c2884433
Author: Paul Jackson <pj@sgi.com>
Date:   Mon Mar 28 03:58:44 2005 -0800

    [PATCH] cpusets: mems generation deadlock fix
    
    The cpuset code to update mems_generation could (in theory) deadlock on
    cpuset_sem if it needed to allocate some memory while creating (mkdir) or
    removing (rmdir) a cpuset, so already held cpuset_sem.  Some other process
    would have to mess with this tasks cpuset memory placement at the same
    time.
    
    We avoid this possible deadlock by always updating mems_generation after we
    grab cpuset_sem on such operations, before we risk any operations that
    might require memory allocation.
    
    Thanks to Jack Steiner <steiner@sgi.com> for noticing this.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4158b4b8ca50e3d02bd82ec47284cbbde0fea434
Author: Randolph Chung <randolph@tausq.org>
Date:   Mon Mar 28 03:58:26 2005 -0800

    [PATCH] Missing set_fs() calls around kernel syscall
    
    Found by sparse...  since we are passing kernel param to a syscall handler,
    we need to do the set_fs() wrappers.
    
    Signed-off-by: Randolph Chung <tausq@debian.org>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9f31a09c93108079ffda249c8663ec941b5ff40
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 12:58:14 2005 +0100

    [ARM PATCH] 2606/1: Update omnimeter_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates omnimeter_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 068c82777b6b4f8827dc2820d41d312f2d58ae89
Author: Prasanna S. Panchamukhi <prasanna@in.ibm.com>
Date:   Mon Mar 28 03:58:10 2005 -0800

    [PATCH] kprobes: incorrect spin_unlock_irqrestore() call in register_kprobe()
    
    register_kprobe() routine was calling spin_unlock_irqrestore() wrongly.
    
    This patch removes unwanted spin_unlock_irqrestore() call in
    register_kprobe() routine.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d85077eea77fc2d82b2b8943fdceada46e15a708
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Mon Mar 28 03:57:54 2005 -0800

    [PATCH] pipe: save one pipe page
    
    Save one page in pipe writev without incuring additional cost (just that
    ampersand operator).
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e758da38da22c0863cf96323077323080ffc9ad9
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 28 03:57:38 2005 -0800

    [PATCH] New console flag: CON_BOOT
    
    CON_BOOT is like early printk in that it allows for output really early on.
     It's better than early printk because it unregisters automatically when a
    real console is initialised.  So if you don't get consoles registering in
    console_init, there isn't a huge delay between the boot console
    unregistering and the real console starting.  This is the case on PA-RISC
    where we have serial ports that aren't discovered until the PCI bus has
    been walked.
    
    I think all the current early printk users could be converted to this
    scheme with a minimal amount of effort.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 798f347f11469414d73411cf41adc826ff5bb6bb
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Mar 28 03:57:22 2005 -0800

    [PATCH] InfiniBand: remove unsafe use of in_atomic()
    
    Using in_atomic() to decide between GFP_KERNEL and GFP_ATOMIC is not safe
    (it doesn't work if CONFIG_PREEMPT=n).  Change to just always allocating
    with GFP_ATOMIC, since we don't know if we can sleep or not.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78d44bdc1b698066a9084b792ab6a69e33be46e3
Author: Mikael Pettersson <mikpe@user.it.uu.se>
Date:   Mon Mar 28 03:57:05 2005 -0800

    [PATCH] drivers/char/isicom.c gcc4 fix
    
    Fix two array-of-incomplete-type errors from gcc4 in isicom.c.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86080eff417b6fea4a6862a47bc7335bfeb0e719
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 28 03:56:49 2005 -0800

    [PATCH] kill drivers/cdrom/mcd.c
    
    As described in my patch that marked this obsolete driver as BROKEN, this
    patch completely removes it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e571d89ec873c68b9469877e24becee1122c42c
Author: Christoph Lameter <christoph@lameter.com>
Date:   Mon Mar 28 03:56:31 2005 -0800

    [PATCH] Per cpu irq stat
    
    The definition of the irq_stat as an array means that the individual
    elements of the irq_stat array are located on one NUMA node requiring
    internode traffic to access irq_stat from other nodes.  This patch makes
    irq_stat a per_cpu variable which allows most accesses to be local.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Shai Fultheim <Shai@Scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9026dff22e10aeae3be3d682d49b956fef0f3bab
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Mar 28 03:56:15 2005 -0800

    [PATCH] Exports to enable clock driver modules
    
    The following exports are necessary to allow loadable modules to define new
    clocks.  Without these the mmtimer driver cannot be build correctly as a
    module (there is another mmtimer specific fix necessary to get it to build
    properly but that will be a separate patch):
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3b86557bea3cf1cccaa82f9b50762035b80b857
Author: hong.liu@intel.com <hong.liu@intel.com>
Date:   Mon Mar 28 03:55:59 2005 -0800

    [PATCH] fix mmap() return value to conform to POSIX
    
    POSIX said:
    mmap() should return [EOVERFLOW] if the file is a regular file and the
    value of off + len exceeds the offset maximum established in the open
    file description associated with fildes.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 619c840d33741d3afd4539e7b4c47223bfd004b5
Author: Gordon Jin <gordon.jin@intel.com>
Date:   Mon Mar 28 03:55:43 2005 -0800

    [PATCH] fix mmap() return value to conform POSIX
    
    This patch fixes 2 return values in mmap() to conform POSIX spec:
    
    [EINVAL]
            The value of len is zero.
    
    [ENOMEM]
            MAP_FIXED was specified, and the range [addr,addr+len) exceeds
            that allowed for the address space of a process; or, if
            MAP_FIXED was not specified and there is insufficient room in
            the address space to effect the mapping.
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03dd1d1113eb992a44cc78e05a7b8f2fe0f63946
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Mon Mar 28 03:55:27 2005 -0800

    [PATCH] Fix irq_affinity write from /proc for ia64
    
    Made GENERIC_HARDIRQ mechanism work for ia64 and CPU hotplug.  When write
    to /proc/irq is handled it is not appropriate to perform set_rte
    immediatly, since there is a race when the interrupt is asserted while the
    re-program is happening.  Hence such programming is only safe when we do
    the re-program at the time of servicing an interrupt.  This got broken when
    GENERIC_HARDIRQ got introduced for ia64.
    
    - added CONFIG_PENDING_IRQ so default /proc/irq write handler can do the right
      thing.
    
    TBD: We currently dont handle redirectable hint either in the display, or
    when we handle writes to /proc/irq/XX/smp_affinity.  We need an arch
    specific way to account for the presence of "r" hint when we handle the
    proc write.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Cc: <linux-ia64@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd57c429f3aade0e9c5938b105d9957475e5a145
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Mon Mar 28 03:55:10 2005 -0800

    [PATCH] checkstack: fix sort misbehavior for long function names
    
    Fix sort behavior when long names are encountered.  The previour regular
    expression depended on a tab to find the size in a string.  For long names,
    this tab no longer exists, so it is smarter to check for a colon instead.
    
    For the kernel, this change shouldn't make a difference.  But people
    started using the same script for c++ code in other projects.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5c2985a772ef2c7eb58a7c1ec27487cb4bb3833
Author: Gordon Jin <gordon.jin@intel.com>
Date:   Mon Mar 28 03:54:54 2005 -0800

    [PATCH] fix mprotect() with len=(size_t)(-1) to return -ENOMEM
    
    This patch fixes a corner case in sys_mprotect():
    
    Case: len is so large that will overflow to 0 after page alignment.  E.g.
    len=(size_t)(-1), i.e.  0xff...ff.
    
    Expected result: POSIX spec says it should return -ENOMEM.
    
    Current result: len is aligned to 0, then treated the same as len=0 and
    return success.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1ca6da213517be7ea59dff964c9e8205b11201c
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Mon Mar 28 03:54:38 2005 -0800

    [PATCH] sedlbauer: eliminate bad section references
    
    Fix sedlbauer section references:
      convert __initdata to __devinitdata.
    
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 0000235f R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 0000236e R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 0000238d R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 000023b2 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 00002417 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/sedlbauer.o .text refers to 0000244c R_386_32
    .init.data
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12913955506095e7ed5bd1e2bfb6166e1ffb5153
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Mon Mar 28 03:54:21 2005 -0800

    [PATCH] hfc_sx: eliminate bad section references
    
    Fix hfc_sx section references:
      convert __initdata to __devinitdata.
    
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 0000204d R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 0000205c R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 00002082 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 0000209f R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 00002114 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 0000211c R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/hfc_sx.o .text refers to 0000212e R_386_32
    .init.data
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4130a9e685405d6558cc3bf850c6fcdacca97fb5
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Mon Mar 28 03:54:05 2005 -0800

    [PATCH] elsa eliminate bad section references
    
    Fix elsa section references:
      convert __initdata to __devinitdata.
    
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003d28 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003d37 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003d56 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003d77 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003ddb R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003e0e R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/elsa.o .text refers to 00003e20 R_386_32
    .init.data
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d316a250b905c364415a1e990da5411b80c87e3
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Mon Mar 28 03:53:49 2005 -0800

    [PATCH] teles3: eliminate bad section references
    
    Fix teles3 section references:
      convert __initdata to __devinitdata.
    
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 000011ab R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 000011ba R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 000011e0 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 000011fd R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 0000128c R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 00001294 R_386_32
    .init.data
    Error: ./drivers/isdn/hisax/teles3.o .text refers to 000012a6 R_386_32
    .init.data
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8759dd02cc40a0885441c355b3e4ca386c62d29d
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Mon Mar 28 03:53:31 2005 -0800

    [PATCH] w6692: eliminate bad section references
    
    Fix w6692 section references:
    	added __init to W6692Version().
    
    Error: ./drivers/isdn/hisax/w6692.o .text refers to 0000002f R_386_32
    .init.data
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2edd4e21ccca6a71c1c7b980e664d2ce1d9c6131
Author: Solar Designer <solar@openwall.com>
Date:   Mon Mar 28 03:53:15 2005 -0800

    [PATCH] Enable gcc warnings for vsprintf/vsnprintf with "format" attribute
    
    Extend the gcc printk format-string checking.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f3a213104f8b296ce8c1d03ce3293e6158c4d83
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 28 03:52:59 2005 -0800

    [PATCH] revert recent gconfig changes
    
    Revert a 2.6.11 patch "make gconfig work with gtk-2.4".  It causes the cute
    little pixmap buttons to not appear any more.
    
    Hopefully this will motivate someone to have another attempt at fixing gconf
    for gtk-2.4.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8a033b305566a8a1a80f67ddcc5343ee1562775
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 28 03:52:42 2005 -0800

    [PATCH] cdrom/cdu31a: use wait_event
    
    Use wait_event instead of sleep_on.
    Also, remove two unused variables.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Ondrej Zary <linux@rainbow-software.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 824eab2b545fb6a67a4d502a9eeae0a1ccea6dd5
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 28 03:52:26 2005 -0800

    [PATCH] cdrom/cdu31a: locking fixes
    
    Use semaphores instead of sleep_on*.
    Stolen from patch: http://lkml.org/lkml/2004/12/18/107 from
    Ondrej Zary <linux@rainbow-software.org>
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Ondrej Zary <linux@rainbow-software.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a848143ae2ec369915ea7ef0587321816ff000f
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 28 03:52:09 2005 -0800

    [PATCH] cdrom/cdu31a: cleanups
    
    Pretty trivial cleanups:
    - reordered #includes
    - improved some printk's (note: this actually enabled some debug printk's)
    - removed ()'s from returns
    - removed SONY_POLL_EACH_BYTE, as grep doesn't find it anywhere else
    - removed panic() as it can't happen.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Ondrej Zary <linux@rainbow-software.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f03bb0f68caef3a6b4f79e22c80c89b8fff6c41
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 28 03:51:53 2005 -0800

    [PATCH] break_lock fix
    
    lock->break_lock is set when a lock is contended, but cleared only in
    cond_resched_lock.  Users of need_lockbreak (journal_commit_transaction,
    copy_pte_range, unmap_vmas) don't necessarily use cond_resched_lock on it.
    
    So, if the lock has been contended at some time in the past, break_lock
    remains set thereafter, and the fastpath keeps dropping lock unnecessarily.
     Hanging the system if you make a change like I did, forever restarting a
    loop before making any progress.  And even users of cond_resched_lock may
    well suffer an initial unnecessary lockbreak.
    
    There seems to be no point at which break_lock can be cleared when
    unlocking, any point being either too early or too late; but that's okay,
    it's only of interest while the lock is held.  So clear it whenever the
    lock is acquired - and any waiting contenders will quickly set it again.
    Additional locking overhead?  well, this is only when CONFIG_PREEMPT is on.
    
    Since cond_resched_lock's spin_lock clears break_lock, no need to clear it
    itself; and use need_lockbreak there too, preferring optimizer to #ifdefs.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe3ae97549bc8417f9fc25b198fef36f6448b183
Author: Peter Osterlund <petero2@telia.com>
Date:   Mon Mar 28 03:51:36 2005 -0800

    [PATCH] DVD-RAM support for pktcdvd
    
    This patch makes it possible to use the packet writing driver with
    DVD-RAM discs. The pktcdvd driver is not needed for writing to DVD-RAM
    discs but it can improve write performance. PolgÃ¡r IstvÃ¡n reports:
    
    	I wrote 178716Kb data to DVD-RAM without pktcdvd driver within
    	4.54 minutes. With pktcdvd driver it took me 2.33 minutes.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1946ea317910f1e328528f49f6d56f7b321abd0
Author: Peter Osterlund <petero2@telia.com>
Date:   Mon Mar 28 03:51:19 2005 -0800

    [PATCH] Use __init and __exit in pktcdvd
    
    This patch adds __init and __exit annotations to the pktcdvd driver.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 217acba7315146183dc6b865666f8b79ed663c09
Author: Darren Williams <dsw@gelato.unsw.edu.au>
Date:   Mon Mar 28 03:51:02 2005 -0800

    [PATCH] Stallion driver module clean up
    
    These two patches continue the work that Wayne Meissner started and are
    against the current bk tree.
    
    These patches allow the stallion driver to be built-in and loaded at boot
    time, the current #ifdef MODULE only allows the init code to be included if
    compiled as a module.
    
    Tested for compile, boot and running on our console server as module and
    built-in.
    
    Signed-off-by Darren Williams <dsw@gelato.unsw.edu.au>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c410650318931753394b39a0b8010933e9339ff2
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Mon Mar 28 03:50:45 2005 -0800

    [PATCH] Can't unmount bad inode
    
    This patch fixes a problem when a inode which is the root of a mount
    becomes bad (make_bad_inode()).  In this case follow_link will return
    -EIO, so the name resolution fails, and umount won't work.  The
    solution is just to remove the follow_link method from bad_inode_ops.
    Any filesystem operation (other than unmount) will still fail, since
    every other method returns -EIO.
    
    A test case for this is:
    
     1) export an smbfs on host A and mount the share on host B
    
     2) create directory X on A under the exported directory
    
     3) bind mount X to Y on B (Y need not be under the share)
    
     4) remove directory X, and create regular file X (same name) on A
    
     5) stat X on B, this will make X a bad inode (file type changed)
    
     6) umount Y
    
    Without the patch applied, umount won't succeed, and a reboot is
    necessary to get rid of the mount.
    
    With the patch applied, umount will succeed.
    
    The same is true for any filesystem which uses make_bad_inode() to
    mark an existing inode bad (NFS, SMBFS, FUSE, etc...).
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 514889338289fe9c32da3c1468f6ab76b369df8b
Author: richtera@us.ibm.com <richtera@us.ibm.com>
Date:   Mon Mar 28 03:50:29 2005 -0800

    [PATCH] s390: claw network device driver
    
    Add support for claw network devices.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b09e177f997430b258191d31eaf113b79fdb86c
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Mon Mar 28 03:50:10 2005 -0800

    [PATCH] s390: qeth tcp segmentation offload
    
    Add support for TCP Segmentation Offload to the qeth network driver.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbd53e60a1b46eaf33b7497c3900516c4830d621
Author: Steffen Thoss <thoss@de.ibm.com>
Date:   Mon Mar 28 03:49:52 2005 -0800

    [PATCH] s390: qeth blkt tuning
    
    Add support for qeth BLKT tuning, the OSA inbound blocking or packing
    algorithm.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc5e811ae9d459ffc91c9b517f6f792b2b175697
Author: Peter Tiedemann <ptiedem@de.ibm.com>
Date:   Mon Mar 28 03:49:36 2005 -0800

    [PATCH] s390: qeth 1920 device suppor
    
    cio/qeth changes:
     - Add new api to common i/o layer for qeth 1920 device support.
     - Add 1920 device support to qeth.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6777a7df1241ec3eb03b6eeeed9a7facb6dbaff2
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 12:49:23 2005 +0100

    [ARM PATCH] 2605/1: Update ixdp2800_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ixdp2800_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1cac88b6f35a4362e557ceaa9c4663358543b117
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Mon Mar 28 03:49:20 2005 -0800

    [PATCH] s390: qeth layer2 fixes
    
    qeth network driver changes:
     - Clear qeth header struct in qeth_fill_header.
     - Drop broadcast packets in qeth_send_packet if the card
       can't do broadcasts.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03c28268d660eba4a13d6502bcc642784179f4b4
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Mon Mar 28 03:49:03 2005 -0800

    [PATCH] s390: dasd preferred path support
    
    Add code to the dasd driver to select the I/O path based on the path
    preferences of the device.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7cb60776e65ed9af0a4e71b702afe7ec9649432
Author: bstroesser@fijitsu-siemens.com <bstroesser@fijitsu-siemens.com>
Date:   Mon Mar 28 03:48:46 2005 -0800

    [PATCH] s390: signal stack bug
    
    If a signal handler is set to use the signal stack (SA_ONSTACK), but the
    signal stack is disabled, the signal frame should be written to the current
    stack without stack switching.
    
    The reason for the bug is get_sigframe() using on_sig_stack() instead of
    sas_ss_flags(), which would be ok.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13a0ea42944b5f8607b99f43f309f2068e1275c9
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 28 03:48:30 2005 -0800

    [PATCH] s390: kernel faults
    
    Correct check for user space faults.  If the failing address space is in the
    secondary address space and uaccess has been switched to KERNEL_DS with
    set_fs, check_user_space() erroneously returns 1.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 346a1756e97b30a0470c1e1b9b2b4e73b8b6d3d2
Author: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
Date:   Mon Mar 28 03:48:13 2005 -0800

    [PATCH] s390: swapped memset arguments.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9eb31e188e7220edd91a376ecdb466be40ea88c1
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:47:57 2005 -0800

    [PATCH] uml: fix "cond. expr. as lvalues" warning
    
    Gcc 3.4.3 (and probably any 3.4) emits some "deprecation" warnings currently
    about usages of CHOOSE_MODE, since the below syntax has been deprecated:
    
    (a ? foo: bar) = foobar;
    which often results from expansion of:
    CHOOSE_MODE(foo, bar) = foobar;
    
    So add an additional __CHOOSE_MODE syntax for users which need to get a
    lvalue, which uses (a ? &foo : &bar) inside a function, casts the result to
    the correct type and dereference the pointer, and use it where needed (i.e.
    in <sysdep/ptrace.h>)
    
    The patch builds and runs correctly (this has been tested on i386 only, not on
    x86_64), and removes all the warnings.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 261d42b81c4ad9771ed48f28570727427e7bec90
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:47:41 2005 -0800

    [PATCH] uml: real fix for __gcov_init symbols
    
    Correctly export __gcov_init for cases where it's needed, by adding a weak
    definition for the case when GCC does not define this symbol and letting it
    being overriden by the real definition when GCC defines it (recent ones).
    
    Can't be implemented as a test on GCC version because SuSE has a crippled GCC,
    declared as 3.3.4 but having a lot of backported features.
    
    Also, since gcc 3.4.3 requires profiling options even during linking, add
    profiling options to final link stage.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Anton Altaparmakov <aia21@cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 968463c330eab02ab669ca5c73580005c3caf309
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:47:24 2005 -0800

    [PATCH] uml: add kconfig debug deps
    
    Add some needed dependencies for some debug options and hide the MAGIC_SYSRQ
    option for UML, since it displays this option in another menu.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32a9d98f1c5ff291f7939da080bd8e4930663c84
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:47:08 2005 -0800

    [PATCH] uml - kbuild: link cmd
    
    Use the cmd_* syntax to define a command for symlink creations in UML (to
    reuse files from other archs).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f129bf2d9cb343660df6c27b89e0ec3975b67a21
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:46:51 2005 -0800

    [PATCH] uml: factor out common code in user-obj handling
    
    With Vadim Abrossimov <vadim_abrossimov@yahoo.com>
    
    *) Handle USER_OBJS through the general Kbuild infrastructure; the trick we
       use is to change c_flags only for USER_OBJS.
    
       This ain't at all worse than the previous kludgy solution, enables us to
       use a better dependency handling and to support MODVERSIONS.
    
       And it is UML-specific, as a bonus.
    
       So, no "it ain't clean enough" reasoning is allowed to hold this patch
       until you find a better solution.  Leaving there the current broken code is
       not accepted.
    
    *) Move similar definitions from Makefiles to the newly created
       arch/um/scripts/Makefile.rules and include it everywhere needed.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a65cdf017c81369454c5b59f8554d1ec4a93c16
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:46:33 2005 -0800

    [PATCH] Uml: little build fixes
    
    From: Al Viro <viro@www.linux.org.uk>
    
    Easier parts from "cross-build" (or "UML-kbuild") patch from Al Viro:
    
    *) abuses of host cc/ld/objcopy/paths are gone
    *) some #include path fixes
    *) other little abuses fixed
    *) remove LIBC_DIR var, ask gcc where libc.a is placed.
    
    This creates no problem so can be merged very likely. Note: only tested on
    i386, give a run on x86-64.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: "Vadim Abrossimov" <vadim_abrossimov@yahoo.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4642679326a9905bae7ae306fa37e917f2ef096
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:46:15 2005 -0800

    [PATCH] uml: disable more hardware kconfig opt and rename USERMODE to UML
    
    Disable some hardware-only configuration options when configuring for ARCH=um.
    
    By the way, we rename CONFIG_USERMODE to CONFIG_UML, as requested some time
    ago by the UML maintainer Jeff Dike.
    
    We also update defconfig as a consequence of all this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d97a403d7b9d0496326100ff8a84c78a172f5b98
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:45:58 2005 -0800

    [PATCH] uml: extend cmd line limits
    
    From: "Catalin BOIE" <util@deuroconsult.ro>, Paolo 'Blaisorblade'
    Giarrusso <blaisorblade@yahoo.it>, Jeff Dike <jdike@addtoit.com> Increase UML
    command line size.  And fix a crash from passing an overly-long command line
    to UML.
    
    XXX: check that init can handle 128 params and 128 env.  var.  The original
    patch set this limit to 256, but it seems me too much.  Think!
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 166ee920cffc3ea3ecf136f0dca49ff759e80350
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:45:42 2005 -0800

    [PATCH] uml: cpu_relax fix
    
    Use rep_nop instead of barrier for cpu_relax, following $(SUBARCH)'s doing
    that (i.e.  i386 and x86_64).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf9db9f3c50dbc39c16758efdba80b5109b6d7d8
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:45:26 2005 -0800

    [PATCH] uml: fix compile
    
    Quick compile fix for i386-only change (which interacts with UML since we
    include headers from include/asm-$(SUBARCH)), which keeps the old behaviour
    and hence should cause no problems.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9cde37077e8a61b75994c75e6e5a06cb48c28372
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:45:09 2005 -0800

    [PATCH] uml: cope with uml_net security fix
    
    Pass the interface to close as an fd besides that by name...  passing it by
    name does not work with newer uml_net because that allows to ifconfig down
    arbitrary interfaces, while if you have an open fd to the SLIP interface it
    means you have full access to it (and thus can close it).  Passing only by fd
    does not work with older utilities, so we do both things (which does not
    hurt).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7b5e9790ed5600f845dabdc8422d18172774943
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Mar 28 03:44:51 2005 -0800

    [PATCH] m32r_sio driver update
    
    I made a patch to update m32r_sio driver.
    
    Compile checked and tested on a M32700UT eva board with SMP kernel.
    It looks working...
    
    __register_m32r_sio, register_m32r_sio, unregister_m32r_sio are still
    remained.  I'm going to take a look them after.
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dd0dcc00253eaa6216105f74c9c13d2cedbf4f6
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Mar 28 03:44:35 2005 -0800

    [PATCH] m32r: Fix M32102 I-cache invalidation
    
    This patch fixes I-cache invalidation operation for M32102 chip, which is
    one of m32r MMU-less targets.
    
    Before this fix, the m32r kernel for M32102 chip missed I-cache
    invalidation operation and switched off I-cache unintentionally.  This bug
    caused awful performance degradation.
    
    Signed-off-by: Mamoru Sakugawa <sakugawa@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d53024dd7928f1b7d503d4c8d5d47e8f233c8063
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Mar 28 03:44:19 2005 -0800

    [PATCH] m32r: Update MMU-less support #3
    
    This patch is for updating m32r's MMU-less support.
    
    	* arch/m32r/boot/compressed/Makefile:
    	Use m32r-elf-gcc for MMU-less targets; change ELF object format
    	from elf32-m32r-linux to elf32-m32r for !CONFIG_MMU.
    
    	* arch/m32r/boot/compressed/head.S: Set up cache for M32102 chip.
    	* arch/m32r/boot/setup.S: ditto.
    
    	* arch/m32r/kernel/module.c: Module support for !CONFIG_MMU.
    
    Signed-off-by: Kazuhiro Inaoka <inaoka.kazuhiro@renesas.com>
    Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 930e7e3fffdd252411e18e8674f0bba2d6026f9e
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Mar 28 03:44:02 2005 -0800

    [PATCH] m32r: Update MMU-less support #2
    
    This patch is for updating m32r's MMU-less support.
    
    	* arch/m32r/boot/compressed/m32r_sio.c:
    	- Fix serial output routine
    
    	* include/asm-m32r/mmu.h:
    	- Update mm_context_t definition
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4497f3d2ee9b5d22399fb55bbc14c2a9e1b6c30d
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Mon Mar 28 03:43:45 2005 -0800

    [PATCH] m32r: Update MMU-less support #1
    
    This patch is for updating m32r's MMU-less support.
    
    	* arch/m32r/kernel/entry.s:
    	- Fix syscall table for !CONFIG_MMU
    
    	* arch/m32r/kernel/traps.c:
    	- Fix EIT vector setup routine for !CONFIG_MMU
    
    Signed-off-by: Naoto Sugai <sugai@isl.melco.co.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96f3e0cca37a60a33837ade37c2538e5ee706d19
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 28 03:43:28 2005 -0800

    [PATCH] swsusp: kill swsusp_restore
    
    This kills swsusp_resume; it should be arch-neutral but some i386 code
    sneaked in.  And arch-specific code is better done in assembly anyway.
    Plus it fixes memory leaks in error paths.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7b2e321ebc22a62871a7b7245db303591038b01
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 28 03:43:12 2005 -0800

    [PATCH] swsusp: small updates
    
    This kills unused macro and write-only variable, and adds messages where
    something goes wrong with suspending devices.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79904ebc9e4f0c60cbc27572a54e1e200e315aaa
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 28 03:42:55 2005 -0800

    [PATCH] pm: remove obsolete pm_* from vt.c
    
    Those functions are useless these days, and should be gone.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58990ca1b0d92031af9acb5fc975a4d5a48710d7
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 28 03:42:39 2005 -0800

    [PATCH] suspend-to-ram: update video.txt with more systems
    
    This updates video.txt documentation.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca0a9bc2cf3937968f1a4395b8e8711c150afe96
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 28 03:42:22 2005 -0800

    [PATCH] swsusp: Add missing refrigerator calls
    
    This adds few more places where it is possible freeze kernel threads.
    
    From: Nigel Cunningham <ncunningham@cyclades.com>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22a02db52244bc26fa43a4f7be166ad7e8347b11
Author: Richard Henderson <rth@twiddle.net>
Date:   Mon Mar 28 03:42:04 2005 -0800

    [PATCH] alpha spinlock.h update
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd4ab578e9af490ee3234f65d1325394b0ef6ac8
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 03:41:48 2005 -0800

    [PATCH] kernel-parameters: IA-32/X86-64 cleanups
    
    Convert "kernel-parameters.txt" to use IA-32 in place of x86
      and X86-64 in place of x86_64, to be in line with other
      architecture documentation conventions.
    Add reference to Documentation/x86_64/boot-options.txt .
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdc0dd83d55d8cdf844ec85cbbf506167faa7ac5
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:41:32 2005 -0800

    [PATCH] x86-64: forgot asmlinkage on sys_mmap
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 754b42ed392ce6056af6a7f35b187a2862837da8
Author: Kenneth W. Chen <kenneth.w.chen@intel.com>
Date:   Mon Mar 28 03:41:15 2005 -0800

    [PATCH] x86_64: hugetlb fix
    
    x86-64 may have to allocate a bunch of upper levels of pagetables, and those
    allocations may fail.  When they do, unmap_hugepage_range() needs to be able
    to clean up after them.
    
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97ca6e7d4510ee43e1a6e7938d9d688c92e2aaeb
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:40:59 2005 -0800

    [PATCH] x86_64: remove old decl (trivial)
    
    vm_force_exec32 and friends were still alive on 2.6.9 release, but now (and
    in 2.6.10) they seem deleted.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7b549f9ebb8b51668e235dfc15357daa464ee63
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 12:40:47 2005 +0100

    [ARM PATCH] 2604/1: Update ixdp2401_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ixdp2401_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5777ca5bd6d4d9c35ed17cbcdabc1cf44a0867c0
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 28 03:40:43 2005 -0800

    [PATCH] x86-64: kconfig typo
    
    Trivial typo:
    	default off
    instead of
    	default n
    in kbuild.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fc80562ba96f16910cab9a0a59d426247dfdfcc
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:40:26 2005 -0800

    [PATCH] x86_64: Clean up the IOMMU initialisation a bit
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c51e28ffbbebf49437ec63ac4f9e385d60827e5
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:40:09 2005 -0800

    [PATCH] x86_64: Fix missing delay when the TSC counter just   overflowed
    
    Fix missing delay when the TSC counter just overflowed
    
    Noticed by Jan Beulich
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <Jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7447e64136bcc51ea8d65266c607a1df506d26e
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:39:53 2005 -0800

    [PATCH] x86_64: Fix gcc 3.4 warning in bitops.c
    
    Move include down to avoid:
    
    arch/x86_64/lib/bitops.c:18: warning: `find_first_zero_bit' declared inline after being called
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b6499deacd290e6e626c2f649df23161961d718
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:39:37 2005 -0800

    [PATCH] x86_64: Fix exception stack detection during backtraces
    
    The test in in_exception_stack was done the wrong way round, which lead to
    incorrect exception stack detection in the kernel backtracer.
    
    Also fix a off by one in the test.
    
    Noticed by Jan Beulich
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7eb9a9cf2835ef053410bbbf6e885f69882010f1
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:39:20 2005 -0800

    [PATCH] x86_64: Fix CONFIG_PREEMPT
    
    Fix a pretty bad bug in the x86-64 preempt support.  The test for interrupts
    off was done the wrong way round, which would lead to kernel preemption only
    when interrupts were off.
    
    Found by Jan Beulich.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <JBeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b58c9a9df3f14c3d8501281549f1839df96ae9c8
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:39:05 2005 -0800

    [PATCH] x86_64: Fix SMP fallback to UP
    
    When falling back to UP on a SMP kernel make sure cpu_sibling_map is always
    initialized.  Otherwise scheduler_tick eventually runs into incompletely
    initialized sched domains and oopses.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdd0555453476b9578b4495d3f075c9cca259cc8
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:38:48 2005 -0800

    [PATCH] x86_64: Don't enable interrupts in oopses unconditionally
    
    The original reason for it was to allow backwards scrolling on the console,
    but that didn't work for other reasons anyways.  And in some cases the early
    interrupt enabling can lead to a nested oops.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 727318d73bf32894a6a39d2f3b144e80a4a9e3bd
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:38:32 2005 -0800

    [PATCH] x86_64: Only free PMDs and PUDs after other CPUs have been flushed
    
    This avoids a race on AMD systems where other CPUs could speculatively follow
    an already freed page table.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 290d3990a9c3aa2072f010a6902853615fe50e8f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:38:15 2005 -0800

    [PATCH] x86_64: Change the y2069 bug in the RTC timer code to be a y2100 bug.
    
    That's ok since x86-64 systems only exist since 2001.  More is unfortunately
    not possible because the RTC CMOS only supports two decimal digits.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 194a4a0ff41658f20bbd1961c3c9a32875531f55
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:37:59 2005 -0800

    [PATCH] x86_64: Fix LDT descriptor
    
    Fix bug introduced with the TLS system calls in 2.5.  The LDT descriptor needs
    two entries, not one.  It would overlap into the TLS range, which means
    setting an LDT would corrupt the first TLS descriptor.
    
    Noticed by Jan Beulich
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <JBeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e66c618c5845ae4a3d2706a60ebef87eb5ad3050
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:37:42 2005 -0800

    [PATCH] x86_64: Always reload CR3 completely when a lazy MM thread drops a MM.
    
    Always reload CR3 completely when a lazy MM thread drops a MM.  This avoids
    keeping stale mappings around in the TLB that could be run into by the CPU by
    itself (e.g.  during prefetches).
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 401108ceeda75cd83c248400da658e3d13e8a320
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:37:27 2005 -0800

    [PATCH] x86_64: Minor fix to TLB flush IPI
    
    Minor fix to TLB flush IPI
    
    Fix minor harmless bug.  When doing a flush IPI we used 0xffffffff as the
    catch all wildcard, which is a valid address in a 64bit process.  When this
    page was flushed the IPI handler would do a full flush by mistake instead of
    just flushing the page.  Use -1ULL instead.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d66c1dd1cc2fe7f9c326e5d4def8653ced2ddaa5
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:37:10 2005 -0800

    [PATCH] x86_64: Fix NMI RTC access race
    
    Fix NMI RTC access race
    
    This patch fixes a race between the CMOS clock setting and the NMI code.  The
    NMI code indiscriminatly sets index registers and values in the same place the
    CMOS clock is set.  If you are setting the CMOS clock and an NMI occurs, Bad
    values could be written to or read from the CMOS RAM, or the NMI operation
    might not occur correctly.
    
    Resetting the NMI is not required on x86_64 (in fact, it should not be done
    according to the ICH5 documentation).  This patch simply removes the useless
    code.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cce5b09041c76ae289ed9123c663650aaf7bc0ba
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:36:54 2005 -0800

    [PATCH] x86_64: resume PIT for x86_64
    
    resume PIT for x86_64
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d736f4a7a9aa63d4e1426082abdc95a3adcab5eb
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:36:37 2005 -0800

    [PATCH] x86_64: mem=XXX will now limit kernel memory to XXX instead of XXX+1MB
    
    mem=XXX will now limit kernel memory to XXX instead of XXX+1MB
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e52d631048dbef714a5c9ae601576cc40c1b72c
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:36:20 2005 -0800

    [PATCH] x86_64: Fix formatting and white space in signal code
    
    Fix formatting and white space in signal code No functional changes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1bf2102b447f63c2e7ad58b03f5402d368df799
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:36:04 2005 -0800

    [PATCH] x86_64: Fix special ISA case in iounmap()
    
    Fix special ISA case in iounmap(), from i386.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5480c66a4d323770db77b85a3476f8ed219abaf9
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:35:48 2005 -0800

    [PATCH] x86_64: Cleanups in new backtrace code in oprofile
    
    Remove 4/4 support code.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9ca3b91e178e1219f8eeb8e7095360f08ae63a8
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:35:31 2005 -0800

    [PATCH] x86_64: Include PCI-Express configuration
    
    Include PCI-Express configuration
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfcbe62078792052d578d2f83bbeb6b680159789
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:35:15 2005 -0800

    [PATCH] x86_64: Work around Tyan BIOS MTRR initialization bug.
    
    Work around Tyan BIOS MTRR initialization bug.
    
    Some Tyan AMD BIOS don't initialize the first fixed range MTRR, which causes
    it to contain random bogus values.  When the MTRR tries to duplicate the MTRR
    state to other CPUs at startup it oopses because of this.
    
    This patch works around this by catching exception while setting MTRRs.
    
    It would be better to validate all fixed range MTRRs and fix them, but that
    would be very complicated code.  This simple hack seems to work too (except
    that the first 64k of physical memory are likely uncached).  A BIOS update
    fixes that.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c45192b4102b37fa1debef0870388f737352375
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:34:59 2005 -0800

    [PATCH] x86_64: Give out of line get_user better calling conventions
    
    Give out of line get_user better calling conventions
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e990c9bcda340ced5e77287fc33345b939d38b3
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:34:42 2005 -0800

    [PATCH] x86_64: Move put_user out of line
    
    Move put_user out of line.  Generates smaller code.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fcb5b41dffc8ac798204d30541178985ca155f3
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:34:25 2005 -0800

    [PATCH] x86_64: Remove stale unused file
    
    Remove stale unused file
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b12014174bcd04c6b9c9a1cf156476d4db85be0
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:34:09 2005 -0800

    [PATCH] x86_64: Remove unused and broken code in io.h
    
    Remove unused and broken code in io.h
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4166f20fc2ec7740c85a9234c4f8d6fb044df794
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:33:53 2005 -0800

    [PATCH] x86_64: Remove noisy printk in K8 bus detection code
    
    Remove noisy printk in K8 bus detection code
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38c0e3c3e0155b62ad26d5dcfe8e2832daeb3afb
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:33:37 2005 -0800

    [PATCH] x86_64: Remove obsolete comments in vsyscall.c and fix some others.
    
    Remove obsolete comments in vsyscall.c and fix some others.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fa9e9f3238cec59af255f270ddca87223d540bd
Author: Mikael Pettersson <mikpe@csd.uu.se>
Date:   Mon Mar 28 03:33:20 2005 -0800

    [PATCH] x86_64: fix vsyscall.c syntax error
    
    arch/x86_64/kernel/vsyscall.c:193: error: syntax error before 'vsyscall_sysctl_change'
    
    Signed-off-by: Mikael Pettersson <mikpe@csd.uu.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 906c53473692d261df6a1b2eec77372b7d506a89
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:33:04 2005 -0800

    [PATCH] x86_64: Nop out system call instruction in vsyscall page when not needed
    
    Nop out system call instruction in vsyscall page when not needed.  This may
    make some attacks more difficult.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c356305c0488f0646819d35391fb81d81c8c7dc
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:32:48 2005 -0800

    [PATCH] x86_64: Fix indentation in vsyscall.c. No functional changes.
    
    Fix indentation in vsyscall.c.  No functional changes.  Needed for followup
    patches.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e2494d74ea979df05d63ef86f6107d53185195a
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:32:32 2005 -0800

    [PATCH] x86_64: Remove never used obsolete file
    
    Remove never used obsolete file.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eada07ab681c35e2e4993bc001886a8ee083545a
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:32:15 2005 -0800

    [PATCH] x86_64: Move HPET selection into processor specific options
    
    Move HPET selection into processor specific options.
    
    Pointed out by Pavel Roskin
    Fix the help text up a bit.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b268cc41cf0710f4eac2d7f05d70d65623b9e21
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:31:58 2005 -0800

    [PATCH] x86_64: Fix compilation with CONFIG_PROC_FS=n
    
    Fix compilation with CONFIG_PROC_FS=n
    
    Pointed out by Randy Dunlap
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ea1eeeab12dc884e4254d93ecb2aba75bb5b46
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:31:42 2005 -0800

    [PATCH] x86_64: Busses array is only indexed with a 8bit value, doesn't make sense
    
    Busses array is only indexed with a 8bit value, doesn't make sense to make it
    bigger.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8ae1609c4b7c45702ad91d4064ec237bdf96975
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:31:26 2005 -0800

    [PATCH] x86_64: Add an 64bit entry path for exec
    
    Add an 64bit entry path for exec.
    
    From: <ebiederm@xmission.com>
    
    Also fix up the entry address in vmlinux.
    
    >>
    
    I have moved most of what was code duplication until after we are in 64bit
    mode.  And I have reduced the amount of code in the 32bit entry path a little
    bit.
    
    And to keep things maintainable we now always execute the full 64bit entry
    point.
    
    <<
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02e41b3dec14829d2d80a48088f7c77dce6af7bb
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:31:09 2005 -0800

    [PATCH] x86_64: Add new AMD cpuid flags to cpuinfo
    
    Add new AMD cpuid flags to cpuinfo
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 857592f783202688ce5edefe6c757c80ee92349c
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 28 03:30:53 2005 -0800

    [PATCH] x86_64: Update defconfig
    
    Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d6e9ef9db97c2f6b2784682a001bcd0cb294bee
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Mar 28 03:30:36 2005 -0800

    [PATCH] rename FPU_*verify_area to FPU_*access_ok
    
    Since verify_area is going the way of the Dodo soon it seems resonable to
    no longer refer to it in wrapper functions/macros.  FPU_verify_area and
    FPU_code_verify_area have already been converted to call access_ok so now
    seems a good time to rename them.  This patch makes no functional changes
    at all.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa156cb39edd0e101610883614fc81d94571bf57
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 28 03:30:20 2005 -0800

    [PATCH] i386: add kstack=N option (from x86_64)
    
    Add "kstack=N" boot option for IA-32 (from x86_64).
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29d299157ac2caa6afc5048f91e76305b87de2c1
Author: Andrey Panin <pazke@donpac.ru>
Date:   Mon Mar 28 03:30:04 2005 -0800

    [PATCH] es7000 dmi cleanup
    
    This moves es7000_plat global variable out of DMI code.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad77ff531d32e995e8ce0c55cca9913a21567c3a
Author: jason@rightthere.net <jason@rightthere.net>
Date:   Mon Mar 28 03:29:48 2005 -0800

    [PATCH] ES7000 Legacy Mappings Update
    
    This update only affects Unisys' ES7000 machines.
    
    The patch reflects a change needed to determine which generation of ES7000
    is currently running.  The next generation of ES7000s will have
    conventional legacy support so the patch accommodates for this.  This patch
    has been tested and verified on both an authentic 5xx ES7000 box and the
    next generation ES7000 box.
    
    Signed-off-by: Natalie Protasevich <natalie.protasevich@unisys.com>
    Signed-off-by: Jason Davis <jason.davis@unisys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 859035d74597a9ef40c97234de731a58e5f57a8d
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Mon Mar 28 03:29:31 2005 -0800

    [PATCH] fix put_user for 80386
    
    Linus noticed that put_user doesn't to the manual page table lookup that is
    required for cpus without a working WP flag.  The solution is simple: if
    CONFIG_X86_WP_WORKS_OK is not set, then the put_user macros must call
    __copy_to_user_ll().  That function contains the required checks.
    
    This is already implemented for __put_user_size(), somehow I overlooked
    __put_user_{1,2,4,8,X}.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a47faf87e98d0c083b87008d865dd1bac1e1eb5
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Mar 28 03:29:15 2005 -0800

    [PATCH] rtc_lock is irq-safe
    
    rtc_lock is held during timer interrupts. So, we should block interrupts
    while holding it.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13ff51c95405b33bab761984d1a35320352a4b2b
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Mon Mar 28 03:28:58 2005 -0800

    [PATCH] APM: fix interrupts enabled in device_power_up
    
    APM was calling device_power_down and device_power_up with interrupts
    enabled, resulting in a few calls to get_cmos_time being done with
    interrupts enabled (rtc_lock needs to be acquired with interrupts
    disabled).
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dbbe74b828f525fba77aeb6deab49a5bd108b7b
Author: George Anzinger <george@mvista.com>
Date:   Mon Mar 28 03:28:42 2005 -0800

    [PATCH] x86: CMOS time update optimisation
    
    This patch changes the update of the cmos clock to be timer driven rather
    than poll driven by the timer interrupt function.  If the clock is not
    being synced to an outside source the timer is removed and thus system
    overhead is nill in that case.  The update frequency is still ~11 minutes
    and missing the update window still causes a retry in 60 seconds.
    
    We want the calls to sync_cmos_clock() to be made in a consistent environment.
    This was not true when calling it directly from the NTP call code.  The
    change means that sync_cmos_clock() is ALWAYS called from run_timers(), i.e.
    as a timer call back function.
    
    Also, call the timer code only through the timer interface (set a short timer
    to do it from the ntp call).
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 842ab645baf2e5137d06d2ead2cf35e6dda49dba
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Mar 28 03:28:26 2005 -0800

    [PATCH] mips: update VR41xx RTC support
    
    This patch updates NEC VR4100 series RTC support.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdd7f7fcf4f862c3ffe8562b740d6702dc5cd319
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 28 03:27:38 2005 -0800

    [PATCH] mips linkage fix
    
    Jim Gifford <maillist@jg555.com>
    
    The iomap.o functions aren't dragged into the kernel if the build is fully
    modular.  But modules need them.  So link iomap.o into the kernel
    unconditionally.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58622df3e8d2d859c7ec2d7c4d312706ce523dc1
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Mon Mar 28 03:27:21 2005 -0800

    [PATCH] ppc64: numa: Remove redundant and broken overlap check
    
    The numa code used to have to handle the fact that memory regions (as
    reported by OF) had been coallesced in the lmb struct and so might overlap
    node boundaries.
    
    Since Mike's patch went in this doesn't happen anymore, because we iterate
    over the memory regions from OF directly.  This patch simply removes a
    check that catered for the overlapping case, which now "can't happen".
    
    The condition also happens to be broken in the current code, but in a
    painless way, so it's as good as removed already.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb6ec58ae84f5763d6f07bc68f9446ea0ca398b3
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Mon Mar 28 03:27:06 2005 -0800

    [PATCH] PPC64: Fix LPAR IOMMU setup code for p630
    
    Here's a fix to deal with p630 systems in LPAR mode.  They're to date the
    only system that in some cases might lack a dma-window property for the
    bus, but contain an overriding property in the device node for the specific
    adapter/slot.  This makes the device setup code a bit more complex since it
    needs to do some of the things that the bus setup code has already done.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a582579af0fee40ef48d1c8058731ee6db7ebcf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Mar 28 03:26:49 2005 -0800

    [PATCH] ppc64: Fix ethernet PHY reset on iMac G5
    
    On iMac G5, when netbooting (or causing any other ethernet activity from
    within the Open Firmware environment), the PHY is put into a low power
    state before booting the OS.  The result is that Linux doesn't see it and
    networking doesn't work.
    
    This patch adds the ethernet PHY reset platform hook to pmac_feature.c on
    ppc64 (it already is commonly used on ppc32 as lots of macs have this same
    problem, so the hook definition is already there and sungem is already
    calling it).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 604ddc346ec71816408359c55efb3e5d4e1911a1
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Mon Mar 28 03:26:33 2005 -0800

    [PATCH] ppc64: Make numa=off command line argument work again
    
    Mike's patch "ppc64: NUMA memory fixup (another try)" broke the
    numa code when "numa=off" is specified on the kernel command line.
    
    The fix is to pretend everything is in node 0 when numa is disabled.
    
    Boot tested on pSeries LPAR with numa=off and numa=debug (ie. on).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea1d6b364e2906036f5c938421116d5d983a1d91
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Mar 28 03:26:17 2005 -0800

    [PATCH] ppc64: fix pseries hcall stubs
    
    Fix a number of bugs in our pseries hcall stubs:
    
    - store parameters in the area specified by the ABI, no need to create
      stack frames.
    - plpar_hcall_4out would corrupt r14
    - merge multiple HVSC definitions
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 448d82f47315d8700b0a2cf4f4d2f781a90c436f
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Mar 28 03:26:01 2005 -0800

    [PATCH] ppc64: fix semtimedop compat syscall
    
    As with sparc64, the ppc64 version of semtimedop was incorrect - the
    timeout is in the fifth argument. I got caught copying again :)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a027980e3ee6e032e919bdfa670afff861dc358f
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Mar 28 03:25:45 2005 -0800

    [PATCH] ppc64: fix linkage error on G5
    
    Move the ppc64 specific cond_syscall(ppc_rtas) into sys_ni.c so that it
    takes effect.  With this fixed we can remove the #define hack.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbbe4d6646c1e4ed6edfa46064018b4cec4ac09b
Author: Mikael Pettersson <mikpe@csd.uu.se>
Date:   Mon Mar 28 03:25:28 2005 -0800

    [PATCH] ppc64: fix compile error in prom.c
    
    arch/ppc64/kernel/prom.c:1691: error: syntax error before 'prom_reconfig_notifier'
    arch/ppc64/kernel/prom.c:1692: error: field name not in record or union initializer
    arch/ppc64/kernel/prom.c:1692: error: (near initialization for 'prom_reconfig_nb')
    arch/ppc64/kernel/prom.c:1692: warning: initialization makes pointer from integer without a cast
    
    Signed-off-by: Mikael Pettersson <mikpe@csd.uu.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 491f16d55464a7ad7a654ff02c5228fdcb7603b2
Author: Mikael Pettersson <mikpe@csd.uu.se>
Date:   Mon Mar 28 03:25:12 2005 -0800

    [PATCH] ppc64: fix gcc4 compile error in paca.h
    
    In file included from include/asm/spinlock.h:20,
                     from include/linux/spinlock.h:43,
                     from include/linux/signal.h:5,
                     from arch/ppc64/kernel/asm-offsets.c:17:
    include/asm/paca.h:25: error: array type has incomplete element type
    
    Signed-off-by: Mikael Pettersson <mikpe@csd.uu.se>
    Acked-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c114c1643afbc45eda6b2c6153c4c8d0062ce41
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 28 03:24:56 2005 -0800

    [PATCH] ppc64: pSeries_iommu.c: use pSeries reconfig notifier
    
    Use the pSeries_reconfig notifier chain for tearing down the iommu table when
    a device node is removed.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f38f48759c179332bd624442c94ad7dc30e4d7f
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 28 03:24:40 2005 -0800

    [PATCH] ppc64: pci_dn.c: use pSeries reconfig notifier
    
    Use the pSeries_reconfig notifier list to handle newly added pci device nodes.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1826963ebdd74fe3b1ce276c18843b232238d8ee
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Mon Mar 28 03:24:23 2005 -0800

    [PATCH] ppc32: 8xx typo fix
    
    The following patch fixes a typo which was introduced in the great SPRN_
    renaming.
    
    Signed-off-by: Pantelis Antoniou <panto@intracom.gr>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a5317f647398aa2d51e435906edfd3cbb43c51d
Author: Brian Waite <waite@skycomputers.com>
Date:   Mon Mar 28 03:24:07 2005 -0800

    [PATCH] ppc32: fix broken compile on Sky Computers HDPU platform
    
    This fixes some compile errors in Sky Computers HDPU platform that were
    created by a bad patch.
    
    Signed-off-by: Brian Waite <waite@skycomputers.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit feddf3914817e21d644e4b2b606e685250cc3b1b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Mar 28 03:23:50 2005 -0800

    [PATCH] ppc32/64: Map prefetchable PCI without guarded bit
    
    While experimenting with framebuffer access performances, we noticed a very
    significant improvement in write access to it when not setting the
    "guarded" bit on the MMU mappings.  This bit basically says that reads and
    writes won't have side effects (it allows speculation).  It appears that it
    also disables write combining.
    
    This patch implements a new phys_mem_access_prot() arch callback for use by
    /dev/mem and fbdev when available, implements it for ppc32 and ppc64, and
    modifies /dev/mem and fbdev to use it, respectively when available or on
    ppc.  I didn't change fbdev to use it on all archs when available because
    there is already a whole lot of arch specific mess in there (more than in
    /dev/mem !) that I didn't feel like messing with, but archs maintainers are
    welcome to give it a go).
    
    The old mechanism in /dev/mem is still there, but arch maintainers should
    probably switch to this once which is more consistent imho.
    
    Finally, the ppc32 and ppc64 implementation of this and of the PCI mmap
    calls (used by /proc and /sys) are modified to check if the mapping happens
    in a prefetchable PCI resource, in which case, the guarded bit is not set
    for the pgprot.  In fact, ppc32 implementation of this code is updated to
    be identical to ppc64.
    
    This improves framebuffer write performance on a simple test paul wrote
    from about 50Mb/sec to 200Mb/sec on my M9 based laptop and on a G5.  The
    new hook will automatically catch up Xfree mmap's from /dev/mem, so it will
    work out of the box with existing X servers.  Kernel fbdev accesses aren't
    improved yet as ioremap doesn't use that mecanism.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4d6ef11d3f9c3b9a6c3457ffb11242753b42ea4
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Mon Mar 28 03:23:33 2005 -0800

    [PATCH] ppc32: Fix Sandpoint Soft Reboot
    
    This patch allows the Freescale Sandpoint to perform soft reboots.  A write
    of 0x00 to the Winbond's Chip Select Control Register was clearing the
    Upper BIOS Chip Select Enable bit which unmaps the boot flash.  The comment
    associated with the write noted that it was enabling the RTC and Keyboard
    address locations, but the bits in question (1 and 0) are reserved when the
    Winbond chip is in PowerPC mode.  Also, the bits are 1 for enable, 0 for
    disable, therefore the original code was actually disabling the address
    locations.  The patch also corrects errors in the definitions of 2
    configuration bits in the Tundra Tsi107 bridge's MAPB Options register.
    
    Signed-off-by Randy Vinson <rvinson@mvista.com>
    Signed-off-by Mark A. Greer <mgreer@mvista.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6941f97b77a526792becd4ac1e39792479625880
Author: perchrh@pvv.org <perchrh@pvv.org>
Date:   Mon Mar 28 03:23:16 2005 -0800

    [PATCH] ppc32: dmasound compilation fix
    
    sound/built-in.o(.init.text+0xb68): In function `dmasound_awacs_init':
    : undefined reference to `pmac_xpram_read'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 774897643e136cc2545494813d2aff6cc68a0cfb
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Mar 28 03:22:59 2005 -0800

    [PATCH] ppc32: Report chipset version in common /proc/cpuinfo handling
    
    Moved reporting of chipset revision from board specific to common handing
    of /proc/cpuinfo.  In light of numerous PPC system-on-chip devices, we
    report both the cpu version (reflects the core version) and the chipset
    version (reflects the system-on-chip or bridge version).
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88462ef28bf2d6f3f04cb75f42c69465c96987e6
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Mar 28 03:22:43 2005 -0800

    [PATCH] ppc32: typo fix in load/store string emulation
    
    Patch fixes a typo in the emulation of load/store string emulations pointed
    out by Segher Boessenkool.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88b48e2473378431e88107b84b67b3d98ab842f6
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Mar 28 03:22:27 2005 -0800

    [PATCH] ppc32: Fix CONFIG_SERIAL_TEXT_DEBUG support on 83xx
    
    The uart initialization for CONFIG_SERIAL_TEXT_DEBUG on 83xx was passing in
    physical addresses instead of effective.  Additional, fix the Kconfig
    support to be for all 83xx devices, not just the MPC834x SYS board.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ec233561c878c6feb713a8e243974631c5d7850
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Mar 28 03:22:11 2005 -0800

    [PATCH] ppc32: Move 83xx & 85xx device and system description files
    
    This patch moves the 83xx & 85xx device and system description files out
    of the platform directory (used for board code) and into the syslib
    directory (used for common system code).
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6011b0960ea39eea590950a0ea68bde6adda6216
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Mon Mar 28 03:21:42 2005 -0800

    [PATCH] ppc32: Fix mv64x60 internal SRAM size
    
    ppc32: Fix wrong size for mv64[34]60's internal SRAM.
    
    - Fix incorrect SRAM size
    - Minor Kconfig cleanups for mv64x60 platforms
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a987ce8f834689c425d4ab656a32576ff379242c
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Mon Mar 28 03:21:26 2005 -0800

    [PATCH] SELinux: add name_connect permission check
    
    This patch adds a name_connect permission check to SELinux to provide
    control over outbound TCP connections to particular ports distinct from the
    general controls over sending and receiving packets.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da47ed8be39b7169ced8e16d383a8c56f0e47a29
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Mon Mar 28 03:21:10 2005 -0800

    [PATCH] SELinux: audit unrecognized netlink messages
    
    This patch changes SELinux to audit any unrecognized netlink messages in
    controlled classes rather than silently rejecting them, and to allow them
    if in permissive mode.  Please apply.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a50b7593b6b4cbc355e6df1916860670df21913
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 28 03:20:57 2005 -0800

    [SPARC64]: Some more cheetah+ patches needed for fptraps.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7e524ba8a83a15b7bb4d8eaf3d6bcbadc14611b
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Mon Mar 28 03:20:54 2005 -0800

    [PATCH] SELinux: allow mounting of filesystems with invalid root inode context
    
    This patch alters the SELinux handling of inodes with invalid security
    contexts so that a filesystem with a root inode that has an invalid
    security context can still be mounted for administrative recovery without
    disabling SELinux altogether.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be71daf429f7a8a77f810c5dea4d99d6b4734c65
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Mon Mar 28 03:20:37 2005 -0800

    [PATCH] SELinux: make code static and remove unused code
    
    This patch from Adrian Bunk makes needlessly global code static and removes
    a number of unused global and static functions from SELinux.  Please apply.
    
    Author: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ccba0403395c28e2ed9e206550dfa8a5755cab1
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Mon Mar 28 03:20:20 2005 -0800

    [PATCH] unused 'size' assignment in filemap_nopage
    
    filemap_nopage has the following code:
    
    retry_all:
    	size = (i_size_read(inode) + PAGE_CACHE_SIZE - 1) >> PAGE_CACHE_SHIFT;
    	if (pgoff >= size)
    		goto outside_data_content;
    
    	/* If we don't want any read-ahead, don't bother */
    	if (VM_RandomReadHint(area))
    		goto no_cached_page;
    
    	/*
    	 * The "size" of the file, as far as mmap is concerned, isn't bigger
    	 * than the mapping
    	 */
    	if (size > endoff)
    		size = endoff;
    
    After this, size is not referenced.  So, either this potential reassignment
    of size is superfluous, or we are missing some other code later on in the
    function.  If it is the former, I've attached a patch which will remove the
    code.
    
    (akpm: and endoff can go away too.  That was the unused variable which gcc has
    been warning about for ages.  Also, gratuitous whitespace fiddling).
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8db5a32b6011a2401648651c04c4ae6e22f9011
Author: Andi Kleen <ak@muc.de>
Date:   Mon Mar 28 03:20:04 2005 -0800

    [PATCH] Fix mmap of /dev/kmem
    
    Fix mmap of /dev/kmem. It cannot ever have worked before.
    
    vmalloc is still not supported because that would be more complicated.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89c9f6cc548ab1d30df4c866644e131524783d62
Author: Herbert PÃ¶tzl <herbert@13thfloor.at>
Date:   Mon Mar 28 03:19:48 2005 -0800

    [PATCH] include cleanup in pgalloc.h
    
    This patch cleans up asm-*/pgalloc.h by removing the generous includes
    which are obsoleted (duplicated) by including linux/mm.h (and friends)
    
    They are double checked and verified by the PLM cross compiling service
    (the patched kernel gives the same warnings/errors as the unpatched)
    
    http://osdl.org/plm-cgi/plm?module=patch_info&patch_id=4313
    
    Signed-off-by: Herbert PÃ¶tzl <herbert@13thfloor.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71f1c3c9580350470d57af84e932326e0f726c4d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 28 03:19:32 2005 -0800

    [PATCH] slab shrinkers: use vfs_cache_pressure
    
    Fix some bugs spotted by Andrea Arcangeli <andrea@suse.de>
    
    - When we added /proc/sys/vm/vfs_cache_pressure we forgot to allow it to
      tune the dquot and mbcache slabs as well.
    
    - Reduce lock contention in shrink_dqcache_memory().
    
    - Use dqstats.free_dquots in shrink_dqcache_memory(): this is the count of
      reclaimable objects.
    
    - Export sysctl_vfs_cache_pressure to GPL modules for mbcache.o
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b65d113fe1cd4961ce94127584413cefd49aaed
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Mar 28 03:19:14 2005 -0800

    [PATCH] mm counter operations through macros
    
    This patch extracts all the operations on counters protected by the page
    table lock (currently rss and anon_rss) into definitions in
    include/linux/sched.h.  All rss operations are performed through the
    following macros:
    
    get_mm_counter(mm, member)		-> Obtain the value of a counter
    set_mm_counter(mm, member, value)	-> Set the value of a counter
    update_mm_counter(mm, member, value)	-> Add to a counter
    inc_mm_counter(mm, member)		-> Increment a counter
    dec_mm_counter(mm, member)		-> Decrement a counter
    
    With this patch it becomes easier to add new counters and it is possible to
    redefine the method of counter handling.  The counters are an issue for
    scalability since they are used in frequently used code paths and may cause
    cache line bouncing.
    
    F.e. One may not use counters at all and count the pages when needed, switch
    to atomic operations if the mm_struct locking changes or split the rss
    into counters that can be locally incremented.
    
    The relevant fields of the task_struct are renamed with a leading underscore
    to catch out people who are not using the acceessor macros.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae102ac599f557ea3544875957dda84ed5bb020e
Author: Martin Hicks <mort@sgi.com>
Date:   Mon Mar 28 03:18:57 2005 -0800

    [PATCH] vmscan: move code to isolate LRU pages into separate function
    
    I noticed that the loop to pull pages out of the LRU lists for processing
    occurred twice.  This just sticks that code into a separate function to
    improve readability.
    
    Signed-Off-By: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a212ae3071285d3b618835a08de0b4036d9c723
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Mon Mar 28 03:18:41 2005 -0800

    [PATCH] slab: 64-bit fix
    
    Use kmem_bufctl_t instead of int for the loop counters in check_slabp.
    
    Signed-of-by: Manfred Spraul <manfred@colorfullife.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 656a20ac70b438d0da17a295b213e0de176122d7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 28 03:18:25 2005 -0800

    [PATCH] slab: kfree(null) is unlikely
    
    - mark kfree(NULL) as being unlikely
    
    - Coding-style consistency for function definitions
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15864f2201249477499f84b24d97d38da188330f
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Mon Mar 28 03:18:09 2005 -0800

    [PATCH] slab.[ch]: kmalloc() cleanups
    
    I found a new idea for optimizing the loop in kmalloc - now the cleanup
    both reduces the size of the .text segment in mm/slab.o and speeds up largs
    kmallocs a bit.  I still loose 2 cycles for kmalloc(32,GFP_KERNEL) compared
    to the current code, but I haven't figured out how I could optimize
    further.
    
    - inline kmem_find_general_cachep()
    
    - optimize kmem_find_general_cachep() and document the optimization.
    
    - remove duplicate code from __kmalloc(): call kmem_find_general_cachep()
      directly.
    
    Based on a patch from Renaud Lienhart <renaud.lienhart@free.fr>
    
    Signed-off-by: Manfred Spraul <Manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 781d2f1196f943e51798c14add87a100325004b4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 28 03:17:52 2005 -0800

    [PATCH] tty overrun time fix
    
    moreau francis <francis_moreau2000@yahoo.fr> points out that we need to
    initialise overrun_time, else the overrun reporting screws up when jiffies is
    "negative".
    
    So initialise tty->overrun_time apropriately, and handle the case where the
    tty has been open for so long that the overrun time has become "greater than"
    jiffies.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 628110ea2a2aca4bb55edd68ee9a3533a2c90386
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Mon Mar 28 03:17:36 2005 -0800

    [PATCH] handle multiple video cards on the same bus
    
    When detecting the boot video device, allow for the case of multiple
    cards on the same bus. Check each candidate to make sure that the card
    is active.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd29cece6828f979880ef7df013d946480410406
Author: Daniel McNeil <daniel@osdl.org>
Date:   Mon Mar 28 03:17:20 2005 -0800

    [PATCH] ppc64: fix AIO panic on PPC64 caused by is_hugepage_only_range()
    
    When testing AIO on PPC64 (a power5 machine) running 2.6.11 with
    CONFIG_HUGETLB_PAGE=y, I ran into a kernel panic when a process exits that has
    done AIO (io_queue_init()) but has not done the io_queue_release().  The
    exit_aio() code is cleaning up and panicking when trying to free the aio ring
    buffer.
    
    I tracked this down to is_hugepage_only_range() (include/asm-ppc64/page.h)
    which is doing a touches_hugepage_low_range() which is checking
    current->mm->context.htlb_segs.  The problem is that exit_mm() cleared tsk->mm
    before doing the mmput() which leads to the exit_aio() and then the panic.
    Looks like is_hugepage_only_range() is only used in ia64 and ppc64.  Fix is to
    change is_hugepage_only_range() to take an 'mm' as a parameter as well as
    'addr' and 'len' and then the ppc64 code could change to use 'mm'.  It looks
    like it has been broken for quite a while.
    
    Signed-off-by: Daniel McNeil <daniel@osdl.org>
    Acked-by: David Gibson <dwg@au1.ibm.com>
    Acked-by: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8513620d370d3a60320c86468455a80979ad119d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Mar 28 03:17:04 2005 -0800

    [PATCH] pcmcia: don't send eject request events to userspace
    
    Here follow PCMCIA-related patches which allow for kernel-based matching
    between 16-bit PCMCIA devices and their drivers.  If you're using this (and
    using a special startup script or small tool), you don't need to run "cardmgr"
    any longer.  cardmgr still works, though, allowing for a gradual transition.
    
    These patches apply on top of what's in 2.6.11-rc4-mm1; for proper operation
    pcmcia-bridge-resource-management-fix.patch should be removed first, though.
    Andrew, please apply them to your next -mm release.
    
    
    1. Theory of operation I: setting up the sockets
    ================================================
    - the appropriate socket driver is initialized (modprobe or built-in)
    - a hotplug event (CLASS=pcmcia_socket) is generated
    - if it's a socket which doesn't map the resources statically, resources
      available for use by PCMCIA cards need to be marked as "allowed". This is
      done using either a small shell script[*] or pcmcia-socket-startup[**]. The
      latter parses /etc/pcmcia/config.opts -- the same file cardmgr currently
      uses for this purpose.
    
    [*] e.g.
    #!/bin/sh
    echo -n "+ 0x00000100 - 0x000004cf" > /sys/class/pcmcia_socket/pcmcia_socket1/available_resources_io
    echo -n "+ 0x60000000 - 0x60ffffff" > /sys/class/pcmcia_socket/pcmcia_socket1/available_resources_mem
    echo -n "1" > /sys/class/pcmcia_socket/pcmcia_socket1/available_resources_setup_done
    
    [**] note: for pcmcia-socket-startup to work properly you need a patch for
         libsysfs (it is already accepted by the maintainer of the package). See
         below for details.
    
    
    2. Theory of operation II: setting up a device
    ==============================================
    - a pcmcia device is discovered in the socket
    - device information is determined and exported to sysfs
    - a hotplug event is created, passing -- among others -- a complete MODNAME
      string to userspace. Available match flags are the product ID strings [in
      userspace, only the hashes are matched -- you can't use strings in
      modules.alias], manufactor and card ID, the multifunction device number,
      the pseudo-multifunction device number [this is what e.g.
    	bind "serial_cs", bind "serial_cs"
      was before], whether it needs a CIS override, and the function ID [this match
      is only used if it is allowed by userspace -- it should be avoided and will
      be removed in future, after existing users have been converted to matches of
      other types].
    - modprobe $MODNAME [*]
    - the device is matched against drivers. function ID matches are ignored at
      this stage. If the device needs a CIS override, it is requested from
      userspace using the firmware helpers. It is recommended to have a symlink
      either from  /lib/firmware/cis/ to /etc/pcmcia/cis/ or the other way to let
      both (old) cardmgr and (new) firmware.agent access the override CIS data.
    - if no driver was found, an userspace helper checks whether the card is one of
      two(!) which can only be detected using cardmgr's tuple directive. If this is
      the case, a CIS override is done using
      /sys/class/pcmcia_socket/pcmcia_socket%n/cis , loading a CIS with proper
      identification values.
    - if this doesn't lead to a driver being bound to the device, function ID-based
      matches are allowed.
    
    [*] note: for this to work properly you need a patch to be written which loads
        _all_ matching modules, not just one]
    
    
    3. patches
    ==========
    I'll not send the patches which add the proper device identification tables to
    this list, but only (and a bit later) to Andrew and the appropriate
    maintainers. You can find them already at
    http://www.kernel.org/pub/linux/kernel/people/brodo/patches/2.6.11-rc5/
    -- they start with pcmcia-25-
    
    I used all identification information I could find in pcmcia-cs, the kernel,
    and some web resources and, but probably missed some. If I did, please send
    me either the appropriate device info from the cardmgr config file or the
    output of "pcmcia-modalias" (see below) -- or a PCMCIA_MATCH patch.
    
    
    4. userspace tools
    ==================
    Several GPL[*] userspace tools are required or useful for this (new) method of
    operation. I'll send them to this list for review, and they're also available
    _temporarily_ at
    http://www.kernel.org/pub/linux/kernel/people/brodo/temp-pcmcia-tools.tar.gz
    
    I'm still undecided on what to do with these userspace tools. IMO they could
    either be merged into pcmcia-cs or distributed in addition to pcmcia-cs. Also,
    I'd be very glad if somebody else could maintain and improve these tools.
    
    pcmcia-socket-startup
    This tool is based on "cardmgr" by Dave Hinds, but most of it was removed. The
    remains parse the /etc/pcmcia/config file for allowed ioport and iomem ranges
    and for disallowed IRQs, and sets these using libsysfs. Due to a bug in
    libsysfs, a patch is needed for this to work properly. It takes one parameter,
    the socket number to be set up.
    
    
    pcmcia-modalias
    This tool reads device information and generates a MODALIAS string just like
    the kernel exports using hotplug for this device. It takes one paramter, the
    device's bus_id string (e.g. "pcmcia-modalias 1.0" for the first device on the
    second PCMCIA socket)
    
    
    pcmcia-check-broken-cis
    This checks whether the CIS is so broken that only the "tuple"-based match is
    possible. It takes one parameter, the socket the PCMCIA card to be tested is
    inserted to, and returns nothing (if no CIS override is needed), or the CIS
    file name. The CIS parsing is done using a much simplified version of what
    is to be found in drivers/pcmcia/cistpl.c, so this is based on Dave Hinds
    work as well.
    
    
    hotplug/pcmcia*
    The hotplug scripts are quite self-explanatory and also allow for "coldplug"
    (i.e. they work around "missed" events during boot).
    
    
    pccardctl
    This previously announced tool uses sysfs instead of an ioctl for commands
    like "eject", "insert", "info" and "ident".
    
    
    [*] reason: they're partly based on other GPL-licensed tools.
    
    
    This patch:
    
    
    Don't inform cardmgr of ejection requests so that "cardctl eject" behaves
    _exactly_ the same as a physical ejection from an userspace point of view.
    
    Removing this allows us to clean up some other code which is otherwise unused.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5718b736da9897be76186d8159bc68520326ebb4
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Mar 28 03:16:47 2005 -0800

    [PATCH] pcmcia: don't lock up in rsrc_nonstatic pcmcia_validate_mem
    
    struct socket_data wasn't zeroed, so pcmcia_validate_mem() didn't get called.
    If it is called, though, one possible code-path already holds skt_sem, so
    lockups occur. Therefore, change calling conventions to pcmcia_validate_mem().
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ad6326851f6dcc57cda8c8c29a7b82fe136ade3
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Mon Mar 28 03:16:31 2005 -0800

    [PATCH] pcmcia: properly bail out on MTD-related ioctl invocation
    
    Properly set the return value for DS_BIND_MTD, DS_GET_FIRST_REGION and
    DS_GET_NEXT_REGION.  Else trying to bind MTD devices the old (deprecated)
    way may cause an endless loop in cardmgr.  This also happens if the
    resources weren't made available properly in /etc/pcmcia/config.opts.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f04ffedd17904d16c5ce1c1f5eac4510c70d3265
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 12:09:55 2005 +0100

    [ARM PATCH] 2603/1: Update ixdp2400_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ixdp2400_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 22cf23188bc39332843720206bef8f779042a43b
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 12:02:38 2005 +0100

    [ARM PATCH] 2602/1: Update integrator_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates integrator_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 766e072b5b8020e611cac17a20de70ade0f3197a
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 11:53:34 2005 +0100

    [ARM PATCH] 2601/1: Update enp2611_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates enp2611_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c279f291d109e03046d35bcd5ee519215d052eb8
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 11:44:30 2005 +0100

    [ARM PATCH] 2600/1: Update edb7211_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates edb7211_defconfig to take account of the Kconfig changes this
    change is slightly more invasive than otehrs in this series because this
    configuration has not been updated in a *long* time. It appears to
    build with this config now.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae55089235bcc2741c3a3466d30c0a7d62208886
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 28 01:42:49 2005 -0800

    Mark "gfp" masks as "unsigned int" and use __nocast to find violations.
    
    This makes it hard(er) to mix argument orders by mistake for things like
    kmalloc() and friends, since silent integer promotion is now caught by
    sparse.

commit 692eb311a94c3802511883fd5d2c916e585add40
Merge: e5e8c2d... 0e587b5...
Author: David S. Miller <davem@cheetah.davemloft.net>
Date:   Mon Mar 28 01:01:51 2005 -0800

    Merge davem@sunset.davemloft.net:/home/davem/src/BK/sparc-2.6
    into cheetah.davemloft.net:/home/davem/src/BK/sparc-2.6

commit e5e8c2d8155a014c3ff3eea68986045dfe16357b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 28 00:19:59 2005 -0800

    [SPARC64]: FPU disabled trap needs context register patching.
    
    It writes the nucleus context into the secondary context
    register so that it can do block stores and loads from
    nucleus context.  So, we need to patch on cheetah+.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit caf2fc1287688db6dfd3521c95c3b41858dbeb84
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 27 23:29:13 2005 -0800

    [SPARC64]: Support >=cheetah+ dual-dtlbs properly.
    
    UltraSPARC-III+ (aka. cheetah+) and later chips have three
    D-TLB units.  One is fully assosciative and has 16 entries,
    the other two have 512 entries each and are 2 way subblocked
    and then indexed by the PAGE_MASK bits.  This implies that
    the two 512 entry TLBs need to know the page size in order
    to index things properly.
    
    The page size to use is encoded in page size fields within
    the TLB context registers.
    
    Up until this point we just left them at zero, which meant
    that both 512 entry TLBs were used for 8K translations only.
    The rest (including the 4MB kernel mappings) went into the
    16 entry fully assosciative TLB.
    
    Now, for the kernel, we use the first 512 entries for 4MB
    mappings and the second 512 entries for PAGE_SIZE mappings
    (ie. for vmalloc and modules).  For the user, we use the
    first 512 entries for PAGE_SIZE and the second 512 entries
    for HPAGE_SIZE if the user maps any hugetlb pages else we
    use the second half for user PAGE_SIZE stuff as well.
    
    Most of this changeset is clerical.  We move most of the
    mm->context layout defines into asm/mmu.h, we abstract the
    mm->context type so that it is now much easier to see and
    trap accesses to the context values.  In particular, one
    can find all context handling by grepping the sparc64 sources
    for CTX_* and {PRIMARY,SECONDAY}_CONTEXT.
    
    Happily, the fast paths of the kernel are mostly untouched
    by this new stuff.  We add 2 cycles to trap entry, 1 cycle
    to trap exit, and 2 cycles to the window trap fixup code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4236bf56605d6f95739d990ac6a04b18fd66a655
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 23:20:34 2005 -0800

    [PATCH] drivers/pci/msi.c: fix a check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4b74c39a7244f6102ad2f9fb6aea33c590d829a5
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Mar 27 23:19:00 2005 -0800

    [PATCH] PCI: remove pci_find_device usage from pci sysfs code.
    
    Greg Kroah-Hartman wrote:
    > On Sun, Mar 20, 2005 at 03:53:58PM +0100, Rolf Eike Beer wrote:
    > > Greg Kroah-Hartman wrote:
    > > > ChangeSet 1.1998.11.23, 2005/02/25 08:26:11-08:00, gregkh@suse.de
    > > >
    > > > PCI: remove pci_find_device usage from pci sysfs code.
    
    > > Any reasons why you are not using "for_each_pci_dev(pdev)" here?
    >
    > Nope, I forgot it was there :)
    
    Patch is against 2.6.12-rc1-bk1 and does the same think like your one,
    except it uses for_each_pci_dev()
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 786943a31220d8d115441ff52f843a9174deeab7
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Mar 27 23:10:57 2005 -0800

    [PATCH] PCI: handle multiple video cards on the same bus
    
    From: Jon Smirl <jonsmirl@gmail.com>
    
    When detecting the boot video device, allow for the case of multiple
    cards on the same bus. Check each candidate to make sure that the card
    is active.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc64e0b0e6b89406443e0b7e22267b139d1afd54
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Mar 27 23:10:34 2005 -0800

    [PATCH] PCI: shrink drivers/pci/proc.c::pci_seq_start()
    
    this patch shrinks pci_seq_start by using for_each_pci_dev() macro instead
    of explicitely using a loop and avoiding a goto.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a5208a6aa6152b79cff6bd809c9b2c521c99591
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 23:10:15 2005 -0800

    [PATCH] drivers/pci/hotplug/cpqphp_core.c: fix a check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9fbd11826fe7558741afd28159316ef79558f751
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Mar 27 23:09:51 2005 -0800

    [PATCH] PCI: Quirk for Asus M5N
    
    One more Asus laptop which requires a PCI quirk to unhide the SMBus.
    Contributed by Matthias Hensler through bugzilla (#4391).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8ab0935d2002c6d63b6be415cab1dbce7738ba0
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Sun Mar 27 23:09:31 2005 -0800

    [PATCH] PCI Hotplug: add documentation about release pointer.
    
    Adds "release" func pointer comments to nano-doc.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    
    Index: hp/drivers/pci/hotplug/pci_hotplug.h
    ===================================================================
    RCS file: /usr/local/src/cvsroot/bk/linux-2.5/drivers/pci/hotplug/pci_hotplug.h,v
    retrieving revision 1.1.1.1

commit 91f36502d474a11f3d7c0942e999700e9a6e1efb
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Mar 27 20:36:04 2005 -0800

    [PATCH] sound/usbmidi: change parameters of usb_bulk_msg() to msecs
    
    Use milliseconds at the timeout parameter in the call to
    usb_bulk_msg() to match the converted interface.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8d430035af7db89d67b6292a2dff831433815a7
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Mar 27 20:35:42 2005 -0800

    [PATCH] sound/usbaudio: change parameters of snd_usb_ctl_msg() to msecs
    
    Use milliseconds at the timeout parameter in the call to
    snd_usb_ctl_msg(), a wrapper to usb_control_msg(), to match
    the converted interface.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f89117d0de7ba41c34e04c73346a8b9856f896f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Mar 27 20:35:20 2005 -0800

    [PATCH] usb/kl5kusb105: change parameters of usb_control_msg() to msecs
    
    Use milliseconds at the timeout parameter in the call to
    usb_control_msg() to match the converted interface.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 45fd98a192110f0d79d861cc5e0f66bc8f748621
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Mar 27 20:34:56 2005 -0800

    [PATCH] usb/pwc-ctrl: change parameters of usb_control_msg() to msecs
    
    Use milliseconds at the timeout parameter in the call to
    usb_control_msg() to match the converted interface.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9be368810aff1120f074c214cfffeed8a082fade
Author: Colin Leroy <colin@colino.net>
Date:   Sun Mar 27 20:34:31 2005 -0800

    [PATCH] USB: fix shared key auth in zd1201
    
    It's currently impossible to associate with a shared-key-only access
    point using the zd1201 driver. The attached patch fixes it. The reason
    was (probably) a typo in the definitions of the authentification types.
    I found that they should be (1,2) instead of (0,1) by looking at the
    old linux-wlan-ng driver by Zydas.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a288bc09a8180dfe068f200a2368a5de7dc3be8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 20:34:11 2005 -0800

    [PATCH] MAINTAINERS: remove obsolete HPUSBSCSI entry
    
    It seems I forgot MAINTAINERS in my patch that removed this driver...
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0aba55a90a3307bcf898d1e413fba4851ca2b810
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 20:33:49 2005 -0800

    [PATCH] drivers/usb/media/usbvideo.c: fix a check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d3fe6ad5ccb4f6824fefe3f76988759b898113b0
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun Mar 27 20:33:26 2005 -0800

    [PATCH] USB: fix for ub for sleeping function called from invalid context at kernel/workqueue.c:264
    
    From: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f13cbf848d1a1034cc3e02ea0dfab8230def0381
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 20:33:04 2005 -0800

    [PATCH] drivers/usb/misc/usbtest.c: fix a NULL dereference
    
    This patch fixes a NULL dereference found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 89175fe5330111ddaec2058f623c608166ae28cd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 27 20:32:43 2005 -0800

    [PATCH] drivers/usb/class/usb-midi.c: remove dead code
    
    This patch removes some obviously dead code found by the Coverity
    checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 74ddde7d85d5b246b47e971780a826131f7dc71f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Mar 27 20:11:14 2005 -0800

    USB: add fossil watch ids to the visor driver.
    
    Thanks to Gunter Ohrner <G.Ohrner@post.rwth-aachen.de> for the information.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94c923eeadc6989facea987ed34dd90bf152d784
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 13:56:44 2005 +1000

    drm: free kbuf if copy from user fails..
    
    From: Eric Anholt <anholt@freebsd.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 20ccdd4981bd8f200af8561d27f3d180ef08f818
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 13:53:53 2005 +1000

    drm: radeon idct defines
    
    Add some type 3 idct packets for reference.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit af406fa28c1934749f8af680c70b10d4730deafc
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 13:52:15 2005 +1000

    drm: radeon driver update 1.16
    
    add R200_EMIT_PP_TRI_PERF_CNTL packet to support brilinear filtering on r200
    fix a bug in the 1.15 merge also.
    
    From: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7dc68c8a040301d487d0387ea6c80f88a43796d0
Merge: c01debc... 46c73cc...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 13:21:10 2005 +1000

    Merge starflyer.(none):/foo/airlied/bitkeeper/linux-2.5
    into starflyer.(none):/foo/airlied/bitkeeper/drm-linus

commit 46c73cc1aae6d36489ff028ad94fa9c06f002951
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 13:17:28 2005 +1000

    drm: change DRIVER_ to CORE_
    
    Change some defines to better naming.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit fb6907ade75c9061321b11af1be6c8dd645fc82a
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 03:57:43 2005 +0100

    [ARM PATCH] 2599/1: Update s3c2410_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates s3c2410_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4ed7d729fa7c9bda02efc421e861590e8d760a39
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 12:49:13 2005 +1000

    Fix sparse NULL/0 warning:
    drivers/char/drm/radeon_state.c:1845:15: warning: Using plain integer as NULL
    pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1e96cd8c600d553eea380762e8c6e998472ba6d9
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Mar 28 12:47:24 2005 +1000

    drm: Remove incorrect "drm_"-prefix from parameter description.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit b7e63ebc92a99dd7cb71b3f2fd17050543522191
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 03:35:40 2005 +0100

    [ARM PATCH] 2598/1: Update omap_h2_1610_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates omap_h2_1610_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 89b0e46d3e26e19c11f994add00836de8b6a4df3
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 03:13:42 2005 +0100

    [ARM PATCH] 2597/1: Update netwinder_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates netwinder_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c947b8cab6f6f7d82598672d6f36cc3f9813a54b
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 02:56:04 2005 +0100

    [ARM PATCH] 2596/1: Update mx1ads_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates mx1ads_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5a2e6f92f73b94a094bcffc4c7942d1f3ad413da
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 02:31:05 2005 +0100

    [ARM PATCH] 2595/1: Update mainstone_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates mainstone_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c5e5ac474a7192c140a704bb9abf5614dfecd545
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 02:08:19 2005 +0100

    [ARM PATCH] 2594/1: Update iq80332_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates iq80332_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d20080f6178000e1f53673f8faee99dac3417cd5
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 01:47:51 2005 +0100

    [ARM PATCH] 2593/1: Update iq80331_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates iq80331_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit adc65050709a02516808ee018eb48663bb61c27c
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 01:23:01 2005 +0100

    [ARM PATCH] 2592/1: Update iq80321_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates iq80321_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 187774cb3c82a1282d36f3dd59b84f9254b818c8
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 01:01:32 2005 +0100

    [ARM PATCH] 2591/1: Update iq31244_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates iq31244_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 02d7fa5458cabef7c892fee2ec6e4b3a30bf9031
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 00:39:04 2005 +0100

    [ARM PATCH] 2590/1: Update ebsa110_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates ebsa110_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4f1dedd90d322ad869eb27f6c4f3ee9e2d80103c
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 00:14:50 2005 +0100

    [ARM PATCH] 2589/1: Update cerfcube_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates cerfcube_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b8e88064f7ec4ce88f076c59ea5649642b00e114
Author: incent Sanders <vince@kyllikki.org>
Date:   Mon Mar 28 00:07:05 2005 +0100

    [ARM PATCH] 2588/1: Update bast_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates bast_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d63d2a4bafa9f8b07b76079d332fa30e4be82113
Author: incent Sanders <vince@kyllikki.org>
Date:   Sun Mar 27 23:59:21 2005 +0100

    [ARM PATCH] 2587/1: Update badge4_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates badge4_defconfig to take account of the Kconfig changes
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 91a2c03fc2fba46e1379c9a5d60750313fb3de76
Author: incent Sanders <vince@kyllikki.org>
Date:   Sun Mar 27 23:51:56 2005 +0100

    [ARM PATCH] 2586/1: Update clps7500_defconfig default config
    
    Patch from Vincent Sanders
    
    Updates clps7500_defconfig to take account of the Kconfig changes this
    depends on 2585/1
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 450fc14bb6b4dac8e3d7a950303d8e3324bea891
Author: incent Sanders <vince@kyllikki.org>
Date:   Sun Mar 27 22:09:22 2005 +0100

    [ARM PATCH] 2585/1: missing ARCH_CLPS7500 depends in video Kconfig
    
    Patch from Vince Sanders
    
    While updating default configurations it was noted that the FB_ACORN
    video config option was missing a dependancy on ARCH_CLPS7500
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5168cdf670ec491c8336edab3c856afb66b1267b
Author: incent Sanders <vince@kyllikki.org>
Date:   Sun Mar 27 22:01:58 2005 +0100

    [ARM PATCH] 2584/1: cpufreq Kconfig menu tidyup
    
    Patch from Vincent Sanders
    
    While updating default configurations it was noted that CONFIG_SA1100
    seems to enable the cpufreq entries however the sourced
    drivers/cpufreq/Kconfig doesnt do a menu section so it looks awful,
    this tiny patch fixes it.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d7f63850fcf85c465b2841c0d19dd9b4ea3687c7
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Sun Mar 27 20:48:13 2005 +0100

    [ARM PATCH] 2576/1: Fix LDRD and LDRSB (Thumb) abort handling
    
    Patch from Deepak Saxena
    
    The ARM LDRD (v5+) and Thumb LDRSB instructions use bit 20/11 (ARM/Thumb)
    differently than every other instruction, so it is set to 0 (write) even
    though the instructions are read instructions. This means that during an
    abort the instructions will be treated as a write and the handler will
    raise a signal from unwriteable locations if they fault. We have to
    specifically check for these instructions from the abort handlers to
    treat them properly. EABI toolchains emit LDRD instructions and even
    those not using EABI might have handcoded ASM that uses these instructions.
    This patch creates an abort-macro.S file that is included by the
    abort-ev* files that need the special cases and changes those
    handlers to use the macros.  ARMv6 does not need the special case
    handling as the HW takes care of setting the FSR bit appropriately.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 35ac4b331a046e0afa76b96ff524471b42c90881
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Mar 27 20:32:03 2005 +0100

    [ARM PATCH] 2581/1: two more ixp2000 typo fixes
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 05b08c3aebd7b2ab338c19adab4a0f1bc41c9e0d
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Mar 27 20:24:18 2005 +0100

    [ARM PATCH] 2580/1: remove nonsensical comment from arch-ixp2000/io.h
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ed4076de8f79dab0a396bfaf967e089cc97e02c5
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Sun Mar 27 20:17:05 2005 +0100

    [ARM PATCH] 2579/1: make early boot failure more verbose
    
    Patch from Nicolas Pitre
    
    It is pointless for cases where one tries to boot a kernel
    on the wrong ARM subarchitecture, but for those cases where the
    architecture is similar enough so the low level routines do work
    then something a bit more informative than "Error: a" might be
    handy, especially when the bootloader is the culprit.
    All extra strings are compiled in only if CONFIG_DEBUG_LL
    is selected of course.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 25dc779fabf4930c55b2928205bf6d082a24847e
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Sun Mar 27 20:09:23 2005 +0100

    [ARM PATCH] 2578/1: unsigned compare in processor and machine list walking
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7f4abe50afacd60d3386ae4bf215a451b4ed4d35
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 27 10:24:51 2005 -0600

    [CIFS] various code formatting cleanup
    
    Signed-off-by: Jesper Juhl (juhl-lkml@dif.dk)
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit e8ff686ed621120665283cdac41b780392fdd5bf
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 27 05:43:19 2005 -0800

    [SPARC64]: Do not use magic constant in mmu_context.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb3f51c6ee5fc40af739b497239f9e8d9127902f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 27 04:46:20 2005 -0800

    [SPARC64]: Make PAGE_SIZE configurable.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c94b21ce550c1d64afda9b0ffd1919a795a236e
Merge: 6460cf4... 0e587b5...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Mar 27 03:10:18 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 0e587b5daec9f4db079d9194af366684e23d98b1
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 27 00:25:11 2005 -0800

    Add '__nocast' sparse annotation to allow people to mark places
    where implicit casts are not appropriate.
    
    This can be used to mark unsigned integers as being uncastable
    to signed, for example. Or enums as not degrading to integers
    and vice versa.

commit bfb584057be3de3b2697d071dff0f1c4988d53c8
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Mar 27 09:16:56 2005 +1100

    drm: fixup pci ids
    
    Add new ATI PCI ID, and fixup i915GM one...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 15d26df09084ff3a891a696efd0d56b52d852e24
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Sat Mar 26 14:04:49 2005 -0300

    [NET] make all protos partially use sk_prot
    
    sk_alloc_slab becomes proto_register, that receives a struct proto not necessarily
    completely filled, but at least with the proto name, owner and obj_size (aka proto
    specific sock size), with this we can remove the struct sock sk_owner and sk_slab,
    using sk->sk_prot->{owner,slab} instead.
    
    This patch also makes sk_set_owner not necessary anymore, as at sk_alloc time we
    have now access to the struct proto onwer and slab members, so we can bump the
    module refcount exactly at sock allocation time.
    
    Another nice "side effect" is that this patch removes the generic sk_cachep slab
    cache, making the only last two protocols that used it use just kmalloc, informing
    a struct proto obj_size equal to sizeof(struct sock).
    
    Ah, almost forgot that with this patch it is very easy to use a slab cache, as it is
    now created at proto_register time, and all protocols need to use proto_register,
    so its just a matter of switching the second parameter of proto_register to '1', heck,
    this can be done even at module load time with some small additional patch.
    
    Another optimization that will be possible in the future is to move the sk_protocol
    and sk_type struct sock members to struct proto, but this has to wait for all protocols
    to move completely to sk_prot.
    
    This changeset also introduces /proc/net/protocols, that lists the registered protocols
    details, some may seem excessive, but I'd like to keep them while working on further
    struct sock hierarchy work and also to realize which protocols are old ones, i.e. that
    still use struct proto_ops, etc, yeah, this is a bit of an exaggeration, as all protos
    still use struct proto_ops, but in time the idea is to move all to use sk->sk_prot and
    make the proto_ops infrastructure be shared among all protos, reducing one level of
    indirection.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15a31486718d68c75fe37937335269d41ce0b95f
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 26 05:23:28 2005 -0800

    [SPARC64]: Kill stray reference to pgdcache_size.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0cab20211817c0559c4bf9f3f249782e82d01667
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 26 05:37:09 2005 -0800

    [SPARC64]: Handle non-8K PAGE_SIZE better in TLB miss handlers.
    
    The existing code mostly worked, but only for 32-bit
    processes.
    
    This caught a serious bug too, pgd_index() was masking
    with plain PTRS_PER_PGD instead of (PTRS_PER_PGD - 1).
    That has been with us for several years.  It is a wonder
    that things work at all some times :-)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e93203de6dca2bcb2b2cc00f2063a9cfa4738a3a
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 26 03:48:01 2005 -0800

    [SPARC64]: Make *_LOCKED_TLBENT and L1DCACHE_SIZE asm visible.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7bde6c657936fc8bb341062ff3d39852295b42fa
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 26 03:31:26 2005 -0800

    [SPARC64]: Create and use new macro, DCACHE_ALIASING_POSSIBLE.
    
    It determines whether D-cache aliasing issues are
    possible, and if not elide all of the D-cache flushing
    code and logic.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit df9e0f59224a184fef133a19ff60e7b437f1cbdd
Merge: ade0862... fce3ef6...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 25 23:50:40 2005 -0800

    Merge davem@nuts:/disk1/BK/sparc-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit ade08620b8887518c368949b937afe3455484f92
Merge: c01debc... c993df5...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 25 23:48:22 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit fce3ef6f224358ce7a12371fdeaae3255287ad04
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Mar 25 23:03:00 2005 -0800

    [SPARC64]: Eliminate g5 register usage from ultra.S
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c01debcd72ff37dbd87de54d5f0a1d753092775f
Merge: d506d2b... 651b6a3...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 22:39:45 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 651b6a34392167cd0310869cbc0341f91ba4d956
Merge: f1aea73... 19a51f6...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 25 21:47:42 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/network-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit d506d2b66af72403912db434453c5e5a31c0b2d3
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:45:09 2005 -0800

    [PATCH] 3dfx DRM depends on PCI
    
    3dfx DRM depends on PCI
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc3dec3d701e7b06ec253bf768d1710eb13679a2
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:44:52 2005 -0800

    [PATCH] TPM depends on PCI
    
    TPM depends on PCI.
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0de0c87fa155a2f1d13ae20fa1f0a9d5ee4076af
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:44:35 2005 -0800

    [PATCH] M68k: Add missing pieces of thread info TIF_MEMDIE support
    
    M68k: Add missing pieces of thread info TIF_MEMDIE support (introduced in
    2.6.11-rc3)
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 520c1b9b4cbcc598e1721fa679848fc0240e6e84
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:44:17 2005 -0800

    [PATCH] Mac NCR5380 SCSI: Fix bus error
    
    Mac NCR5380 SCSI: Fix bus error by passing the correct instance pointer to
    request_irq()
    
    Signed-off-by: Finn Thain <fthain@telegraphics.com.au>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2474ac6f3e246002cd73814432e8ff103cdda9ee
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:44:00 2005 -0800

    [PATCH] M68k: IP checksum updates
    
    M68k: IP checksum updates:
      - ip_fast_csum() needs a "memory" constraint with new gcc versions
      - Do not always use d0 in ip_fast_csum(), leave register allocation to gcc
      - Fixed constraints of csum_fold()
      - Fixed constraints of csum_tcpudp_nofold()
      - Moved comment for csum_tcpudp_magic() to the right place
    
    Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fa30dbac9d5373c635c53e6fbcc48a57896a3c0
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:43:42 2005 -0800

    [PATCH] Sun-3/3x: Enable Sun partition tables support by default
    
    Sun-3/3x: Enable Sun partition tables support by default
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7dfa0b6e4bafc2f010e5387c7c4d8bb4602d537
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:43:26 2005 -0800

    [PATCH] Zorro: replace printk() with pr_info() in drivers/zorro/zorro.c
    
    Zorro: This fixes the only printk() in drivers/zorro that has no KERN_*
    constant.
    
    Signed-off-by: James Nelson <james4765@gmail.com>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e53780084b01c95c3236f64cef64e260bc6c52b3
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:43:09 2005 -0800

    [PATCH] M68k/stdma: Replace sleep_on() with wait_event()
    
    M68k/stdma: Use wait_event() instead of the deprecated sleep_on() function.
    Since wait_event() expects the condition passed in to be the stopping
    condition, negate the current one.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fb013f5a43ecca818a41f37fa28ad9210cd362f
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Fri Mar 25 21:42:52 2005 -0800

    [PATCH] M68k: Update signal delivery handling
    
    M68k: Update signal delivery handling, which was broken by the removal of
    notify_parent() in 2.6.9-rc2
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6913225601437e8cf3d52add9715b8ea83bc5a5
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:31:00 2005 -0800

    [PATCH] m68knommu: remove unused variables in mcfserial.c
    
    Removed unused/unrefernced mcfrs_tmp_buf array in mcfserial.c, and
    mutex associated with it.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d695ace1c20417f7320a973461a62f2f41b7e611
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:30:45 2005 -0800

    [PATCH] m68knommu: cleanup ColdFire specific trap handling asm code
    
    A couple of fixes to the ColdFire specific trap handling code:
    
    . do not clear the stack alignment bits in exception frame (in Lreturn)
      breaks return stack badly if applications work with stack un-aligned.
    . use generated asm-offsets instead of local offset definitions
    . use THREAD_SIZE definition instead of hard coding stack size
      (this is needed to support 4k stacks)
    . some instruction optimization (uses instructions that encode using
      ledd bytes)
    
    Patches originally from Philippe De Muyter <phdm@macqel.be>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit feb26ab7ad75cc331e5887029755afe8159a2c82
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:30:30 2005 -0800

    [PATCH] m68knommu: use generated asm-offsets in trap handlers
    
    Use generated asm-offsets in trap handling code, not local definitions
    of the offsets.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e05b314e5e441bcc4af0ecaa000e40f20479935
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:30:15 2005 -0800

    [PATCH] m68knommu: move LED variable definitions for 5307
    
    The LED specific setup code that used to be in platform specific
    start up code moved to board level code. This is specificaly for
    the Motorola/Freescale 5307 family.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4342e14b90b88a434138aacc2b689a5d6378334
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:30:01 2005 -0800

    [PATCH] m68knommu: generate asm-offsets for thread_info struct
    
    Offsets into the thread_info structure should be auto generated,
    instead of using hard coded offset values. This adds entries to
    the asm-offsets generated for the m68knommu varients.
    
    Original patch submitted by Philippe De Muyter <phdm@macqel.be>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81c20c0e1e80bc2efd2a91298a6acf69b892f308
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:29:46 2005 -0800

    [PATCH] m68knommu: move LED variable definitions for 5272
    
    The LED specific setup code that used to be in platform specific
    start up code moved to board level code. This is specificaly for
    the Motorola/Freescale 5272 family.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3f89ebdcd007eb2180eaba8a08909339c244a0e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:29:30 2005 -0800

    [PATCH] m68knommu: update MAINTAINERS entry
    
    Update entry in MAINTAINERS file to use my generic uclinux.org
    email address. And also clarify who is support the m68knommu
    architecture branch.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2293d6ea0c992d572e4409185f2099041e5dba46
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:29:14 2005 -0800

    [PATCH] m68knommu: 4k stack support
    
    Support for 4k kernel stacks on m68knommu. This cleans up the use
    of THREAD_SIZE, so it is used instead of hard coded size. Also remove
    local offset definitions, these are generated in asm-offsets.
    
    Patches original from Patch submitted by Philippe De Muyter <phdm@macqel.be>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e5519351f0922bfc9e0a003b06749d83087207f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:28:59 2005 -0800

    [PATCH] m68knommu: remove duplicate definition of THREAD_SIZE
    
    Remove definition of THREAD_SIZE in page.h for m68knommu.
    It is defined in thread_info.h
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b4f09c78544ef8e29b323916f23872a37ee8439
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:28:43 2005 -0800

    [PATCH] m68knommu: fix spelling mistakes in mafcache.h
    
    Fix some spelling mistakes in mcfcache.h
    
    Patch originally submitted by Geert Uytterhoeven <geert@linux-m68k.org>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dabf8e55f0b53a658ee877247eb4b6aaa999a94a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:28:27 2005 -0800

    [PATCH] m68knommu: add missing KM_ enums
    
    Bring the km_type enum definitions into like with other architectures.
    
    Patch originally submitted by Leon Woestenberg <leonw@mailcan.com>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5abc881bb26177c0b6af38e75c8ff0bb8d013a7e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Mar 25 21:28:10 2005 -0800

    [PATCH] m68knommu: optimize trap handling asm code
    
    Optimize the trap handling asm code for m68knommu targets.
    Mostly this is using instructions that use fewer bytes to encode.
    Also remove local definitions for constants that are automatically
    generated in the asm-offsets header.
    
    Original patch came from Philippe De Muyter <phdm@macqel.be>
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9814bc3f377d067a4c97cfaf2f85d23c162ecb8
Merge: c81f0bc... 7c54b35...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 21:26:31 2005 -0800

    Merge http://oss.sgi.com:8090/xfs-linux-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 7c54b35afdc43940b4d82b196f6bded4e76f14e3
Merge: f1aea73... 68d10ae...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 21:14:30 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-mmc
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit f1aea737fd00796dc9c0a14b3c824084a9012943
Merge: 54387ae... ef25783...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 18:14:01 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/merge-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 54387aec362616c261cc44e810d18affe8a360af
Merge: 4af964b... be2e712...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 18:12:33 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit be2e7126b3a3f14a761328b04340aef9a4ca9f0b
Merge: a04564a... 4c0a9ed...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 18:09:29 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a04564abf04f6fd424c6affd4e9bb7854f2740e1
Merge: 930daba... c592802...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 18:04:43 2005 -0800

    Merge http://jfs.bkbits.net/linux-2.5
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 4c0a9ed815677da9402869288fb00aa84aa1c55c
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Mar 25 22:43:46 2005 +0000

    [ARM PATCH] 2577/1: more ixp2000 comment work (typo fixes and annotations)
    
    Patch from Lennert Buytenhek
    
    Fix two more ixp2000 typos, and place some comments in ixp2000-regs.h
    to remind the developer that the virtual addresses of some of the io
    mappings have been hardcoded in various assembly files.  (I've been
    bitten by this too many times now.)
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6460cf4eba6a4a96af397d05056cd31d1a27f455
Merge: 77602ae... c592802...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Mar 25 14:37:57 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 22bbee0aeaac224b9c853c2a567e4dae57b781e0
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Mar 25 21:06:29 2005 +0000

    [ARM PATCH] 2507/1: work around ixp2400 erratum #66
    
    Patch from Lennert Buytenhek
    
    Intel's ixp2400 can occasionally corrupt writes to its on-chip
    registers, leading to system crashes.  The suggested workaround for
    this is to map in those registers using XCB=101 instead of XCB=000.
    Patch 2491/1 makes all mappings of ixp2000 on-chip I/O regions use
    section mappings.  This patch makes all iotable section mappings use
    XCB=101.  This patch depends on 2491/1.
    Kernel iotable mappings that are not 1MB-aligned, ioremap(), and
    userspace mappings using mmap() on /dev/mem will still generate
    XCB=000 mappings, which can trigger erratum #66 quite easily.
    For this, an extra patch (to arch/arm/mm/proc-xscale.S) is needed,
    which is maintained out-of-tree because it has been rejected in
    the past.  See http://ixp2xxx.sourceforge.net/kernel/ and look
    for 'ixp2000-erratum66-ptes.diff'.
    2.6.11-rc4 with 2491/1 plus this patch survives a week of heavy
    testing on my ENP-2611, while 2.6.11-rc4 vanilla doesn't stand a
    chance and crashes within 30 minutes under the same workload.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ef2578392380c828c4bdfa2996bc691c9f44d23e
Merge: 85c5427... 13fd8d4...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 25 05:05:43 2005 -0800

    Merge suse.de:/home/greg/linux/BK/bleed-2.6
    into suse.de:/home/greg/linux/BK/foo

commit 13fd8d4a2dbf3e5170bdadefd3ba608949024bb2
Merge: f8eabec... ac7f041...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 25 04:57:47 2005 -0800

    merge mainline with 2.6.11.6 and 2.6.11.5

commit 19a51f6fb3b1a4f1ead4ff0d13bbef401e35a94e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 25 04:50:14 2005 -0800

    [NET]: Forgot to remove doc file when I killed ethertap.
    
    Noticed by Chris Wright.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c592802569a333651bdf69d91dabcfa3f49d5313
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 25 03:07:07 2005 -0800

    Undo VIA AGP TLB flush low-bits-zero patch
    
    It causes problems for people, and as DaveJ says: "Yes, it's clearly
    completely broken".
    
    Cset exclude: davej@delerium.kernelslacker.org|ChangeSet|20050223022752|60156

commit 3d728f35331ece17d502fb7ab3fb402f47be42e2
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Mar 25 02:14:44 2005 -0800

    [PATCH] ppc64: prom.c: use pSeries reconfig notifier
    
    Use the pSeries_reconfig notifier list to fix up a device node which is about
    to be added.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9de16eff75ee4e2bcff081909134e2f42ad6a59
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Mar 25 02:14:28 2005 -0800

    [PATCH] ppc64: introduce pSeries_reconfig.[ch]
    
    Move as much pSeries-specific DLPAR/hotplug code as possible into its own
    file, which is built only when pSeries support is enabled in the config.  This
    new file is intended to contain support code for the "Dynamic Reconfiguration"
    option in the RISC Platform Architecture, which encompasses both PCI hotplug
    and dynamic logical partitioning (DLPAR).
    
    This patch mostly just moves code around, but the device node addition and
    removal API is slightly modified.  In this way, of_add_node and of_remove_node
    are now responsible only for safely updating the device tree and global list,
    without all the other stuff like proc entries etc.  of_add_node and
    of_remove_node have been renamed to of_attach_node and of_detach_node,
    respectively.
    
    This also adds the definitions and api for a notifier chain which is meant to
    be used by code that must act upon device node addition or removal.  Patches
    to migrate code to the notifier api follow in this series.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 056f267341d55d8ab47d5d79864a6386a3d69d81
Author: David Mosberger <davidm@hpl.hp.com>
Date:   Fri Mar 25 02:11:48 2005 -0800

    [IA64] minstate.h: fix stray backslash
    
    Trivial fix to drop a stray backslash in the
    MINSTATE_START_SAVE_MIN_VIRT macro.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9ca9470ffb9dfbe6fead427eb30bc11a129a6f14
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Mar 25 02:04:55 2005 -0800

    [PATCH] ppc64: make OF node fixup code usable at runtime
    
    At boot we recurse through the device tree "fixing up" various fields and
    properties in the device nodes.  Long ago, to support DLPAR and hotplug, we
    largely duplicated some of this fixup code, the main data structures which are
    attached to the new device nodes.
    
    This patch introduces a helper function (prom_alloc) for handling allocations
    at both boot and runtime, kills most of the duplicated code, and makes
    finish_node, finish_node_interrupts, and interpret_pci_props suitable for use
    at runtime by converting them to use prom_alloc.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f98f73e4c03ef82a56f9a67ec91764143108a71d
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Mar 25 02:04:37 2005 -0800

    [PATCH] ppc64: preliminary changes to OF fixup functions
    
    Preliminary modifications to support using some of the interpret_func family
    of functions at runtime.  Changes the mem_start argument to be passed by
    reference, and the return type to int for error handling to be implemented in
    following patches.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac7f04175fa547609036fa5e03b1886091807dea
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Mar 25 02:00:30 2005 -0800

    Linux 2.6.11.6

commit 6202fcb5eaf2755de40ca0fca01b9d8e4b006c25
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Mar 25 01:50:52 2005 -0800

    [PATCH] Potential DOS in load_elf_library
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    Yichen Xie <yxie@cs.stanford.edu> points out that load_elf_library can
    modify `elf_phdata' before freeing it.
    
    CAN-2005-0749 is assigned to this issue.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit d8c4be787e7c35f1f81d988e9afaca6179f5a67b
Author: mlafon@arkoon.net <mlafon@arkoon.net>
Date:   Fri Mar 25 01:50:01 2005 -0800

    [PATCH] Suspected information leak (mem pages) in ext2
    
    From: "Mathieu Lafon" <mlafon@arkoon.net>
    
    I think I have discovered a potential security problem in ext2: when a
    new directory is created, the ext2 block written to disk is not
    initialized.
    
    Included is a proposed patch for Linux 2.6 (ext2_make_empty() function):
    
    CAN-2005-0400 is assigned to this issue.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 9e283161969e24bdf2e2c286df7feccdd651ceef
Author: Marcus Meissner <meissner@suse.de>
Date:   Fri Mar 25 01:49:05 2005 -0800

    [PATCH] Fix signedness problem at socket creation
    
    From: Marcel Holtmann <marcel@holtmann.org>
    
    CAN-2005-0750 is assigned to this issue
    
    ilja <ilja@suresec.org> discovered potential local root exploit in
    bluetooth socket creation.
    
    This patch fixes a small signedness problem when creating the
    socket.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit c8640e6218ec2e98458435aa8bfb02954b91f543
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Mar 25 01:46:03 2005 -0800

    [PATCH] isofs: more defensive checks against corrupt isofs images
    
    Michal Zalewski <lcamtuf@dione.ids.pl> discovers range checking flaws in
    iso9660 filesystem.
    
    http://marc.theaimsgroup.com/?l=bugtraq&m=111110067304783&w=2
    
    CAN-2005-0815 is assigned to this issue.
    
    Some more defensive checks to keep corrupt isofs images from corrupting
    memory or causing Oops.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    
    ===== fs/isofs/rock.c 1.23 vs edited =====

commit e4bff1f9243b4b0c4796457fee526cdc27542a61
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Fri Mar 25 01:45:24 2005 -0800

    [PATCH] isofs: more "corrupted iso image" error cases
    
    Michal Zalewski <lcamtuf@dione.ids.pl> discovers range checking flaws in
    iso9660 filesystem.
    
    http://marc.theaimsgroup.com/?l=bugtraq&m=111110067304783&w=2
    
    CAN-2005-0815 is assigned to this issue.
    
    From: Linus Torvalds <torvalds@osdl.org>
    
    isofs: more "corrupted iso image" error cases
    
    Thanks to Michal Zalewski for testing.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit c1b1945b695e8684daba8fa58292be552e4e50cc
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Fri Mar 25 01:44:34 2005 -0800

    [PATCH] isofs: Handle corupted rock-ridge info slightly better
    
    Michal Zalewski <lcamtuf@dione.ids.pl> discovers range checking flaws in
    iso9660 filesystem.
    
    http://marc.theaimsgroup.com/?l=bugtraq&m=111110067304783&w=2
    
    CAN-2005-0815 is assigned to this issue.
    
    From: Linus Torvalds <torvalds@osdl.org>
    
    isofs: Handle corupted rock-ridge info slightly better.
    
    Keyword here being 'slightly'. The code is a mess.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 77602ae8b1a3e62b6cff56b2ed35330397a30732
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 25 02:58:46 2005 -0600

    [CIFS] cleanup unnecessary casts, and redundant null pointer checks
    
    Suggested by Jesper Juhl, although slightly modified.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 7a1350b87e52e5354883307ee00396b42e0cd9b7
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 25 19:18:38 2005 +1100

    agp: export agp_find_bridge for drm
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d0a1a35c0bfa0a3f4498b363ac87edd4e0c5a4ae
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 25 19:15:09 2005 +1100

    drm: fix issue where agp is acquired before agp_init
    
    With integrated chipsets ala i865 the X server acquires the bridge
    for 2D operations then the DRM acquires it for 3D kaboom..
    
    Based on patch from Brice Goglin <Brice.Goglin@ens-lyon.org> but I
    think this patch is safer if it can't find a bridge it acquires it.
    
    Tested on i865 (i830/i915) and Radeon on Xorg CVS and XFree86 4.3.0
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9b33f1b1dba16e4a49a6e38e02577ab5bb197752
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 25 02:12:19 2005 -0600

    [CIFS] add generic readv/writev and aio support.
    
    Suggested by Christoph Hellwig
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit d35babae1d6407debe6ee118a8c2b1aa3b49f1a8
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 25 15:40:57 2005 +1100

    drm: issue with unique for XFree86 4.3 backwards compatibility
    
    This got broken at some stage not sure when exactly... but it caused
    XFree86 4.3 issues and I had to install sarge...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1eecdf32cef78738687a096f59759537224a4c07
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 25 15:27:39 2005 +1100

    verify_area is deprecated, replaced by access_ok.
    Seems I missed this one when I did the big overall conversion.
    
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1597344bc40919216b296ed670c92d960526ecad
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Thu Mar 24 17:34:52 2005 -0800

    [PKT_SCHED]: action stats double dip
    
    Following patch fixes a scenario where we have forward compatibility
    but action stats being double dipped.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65c8e82ebc92d03e5892585a067232f58ead1939
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Mar 24 17:25:23 2005 -0800

    [XFRM]: xfrm_policy destructor fix
    
    the patch below fixes a bug that i encountered while running a
    PREEMPT_RT kernel, but i believe it should be fixed in the generic
    kernel too. xfrm_policy_kill() queues a destroyed policy structure to
    the GC list, and unlocks the policy->lock spinlock _after_ that point.
    This created a scenario where GC processing got to the new structure
    first, and kfree()d it - then the write_unlock_bh() was done on the
    already kfreed structure. There is no guarantee that GC processing will
    be done after policy->lock has been dropped and softirq processing has
    been enabled.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4af964b7ef226175459e7e5e1c3e4398dda27fbd
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 21:10:51 2005 +0000

    [SERIAL] Remove SERIAL_INLINE, and move debug macro to 8250_pci.c
    
    This removes the unnecessary SERIAL_INLINE macro, and moves
    SERIAL_DEBUG_PCI to 8250_pci.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fceff08ed7660f9bbe96ee659acb02841a3f1f39
Author: carlos.pardo@siliconimage.com <carlos.pardo@siliconimage.com>
Date:   Thu Mar 24 13:32:42 2005 -0500

    [PATCH] sata_sil: Fix FIFO PCI Bus Arbitration
    
    This patch set default values for the FIFO PCI Bus Arbitration to avoid
    data corruption. The root cause is due to our PCI bus master handling
    mismatch with the chipset PCI bridge during DMA xfer (write data to the
    device). The patch is to setup the DMA fifo threshold so that there is
    no chance for the DMA engine to change protocol. We have seen this
    problem only on one motherboard.
    
    Signed-off-by: Silicon Image Corporation <cpardo@siliconimage.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8a5e19cabed49977188f7b40e90509c91331cb78
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 18:07:49 2005 +0000

    [ARM] Don't call force_sig_info() for kernel-mode exceptions.
    
    If an exception happens during boot, we may call force_sig_info(),
    which tries to allocate memory.  If the memory subsystem has not
    been setup, we oops.  However, we have lost the real cause of the
    problem (the original exception.)  Avoid this problem by not calling
    force_sig_info() for kernel mode exceptions.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f54c79e6d527a262c45cef018d519a04d4db4e5e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 24 12:56:42 2005 -0500

    [PATCH] drivers/net/wireless/airo.c: correct a wrong check
    
    The Coverity checker correctly noted that this condition can't ever be
    fulfilled.
    
    This patch changes it to what it should have been.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 41c2288d26f94e4a33aa9ff6669e85b46ba69a6a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 17:49:23 2005 +0000

    [ARM] Move alignment_trap/zero_fp macros into usr_entry macro.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c4bb7a475ac69e1c3f35a7bc92d39e99d237895c
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 17:34:28 2005 +0000

    [ARM] mach-types update
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8c828be9359d6bf753b1cf34cc3ba31054d0bfb5
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 16:22:25 2005 +0000

    [SERIAL] Add UART_CAP_UUE
    
    Rather than relying on port->type == PORT_XSCALE, determine when we
    need to set UUE via a capability.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 33b880ba9d0cbcd3f8906cca72789d9a02ebbb75
Author: Steve French <stevef@smf-t23.(none)>
Date:   Thu Mar 24 07:33:28 2005 -0600

    [CIFS] Check if cifs demultiplex thread valid (not exited, or exiting) before we wake it on unmount (otherwise can cause oops in send_sig).
    
    Pointed out by Ameet Paranjape
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit db4cea7b1a5b60a45275dd93cd53fd9621844e1c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 14:13:42 2005 +0100

    ALSA 1.0.9rc2

commit cf16879a8fbf8b8f40faba3d49b9b403b48fe101
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 14:00:49 2005 +0100

    ALSA CVS update
    ALSA Version
    release: 1.0.9rc2
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 465190dc4bc9b62f9db5bf8e2b08b65cb5509a9a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 14:00:05 2005 +0100

    [ALSA] seq - fix local variable initialization
    
    ALSA sequencer
    This patch re-adds the initialization of callbacks and pcallbacks
    that was accidentally removed in the last revision.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit baedc86d057c2c1eef506cd24c21e0263c3e2af5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:59:21 2005 +0100

    [ALSA] usb - change timeout of USB control/bulk msg functions to msecs
    
    USB generic driver
    This changes the timeout in the remaining (indirect) calls to
    usb_control/bulk_msg from jiffies to msecs.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 447e3b154ae1bff46f8e7baf98f59b5767bc7e99
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:58:40 2005 +0100

    [ALSA] cs4281 - fix typos in the case gameport is disabled
    
    CS4281 driver
    This patch fixes the wrong names of the dummy gameport functions
    used when CONFIG_GAMEPORT isn't set.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit a80f7c5c5ace55fed88a9dec5fd8ce8f4ec11ea4
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:57:55 2005 +0100

    [ALSA] Add AC97_SCAP_NO_SPDIF flag
    
    AC97 Codec,ATIIXP driver,au88x0 driver,EMU10K1/EMU10K2 driver
    Added a new flag, AC97_SCAP_NO_SPDIF, to prevent to build the SPDIF-related
    controls on ac97 codec.  This flag is used when the sound chip has its
    native SPDIF support and it conflicts with the one of AC97 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 115494955f1428346c52e9dfadc2eb54a3f66bc5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:57:09 2005 +0100

    [ALSA] Fix EFX voice allocation/preparation
    
    EMU10K1/EMU10K2 driver
    Fixed a bug (possibly Oops) in allocation/preparation of EFX voices
    The invalid voice pointer was accessed when voices are allocated over
    the voice table boundary.
    
    The patch includes a small clean-up & optimization.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9ab33337354528bae467c3586017753074eb1bc1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:56:28 2005 +0100

    [ALSA] Fix Oops in snd_emu10k1_add_controls
    
    EMU10K1/EMU10K2 driver
    Fixed Oops in snd_emu101k_add_controls (introduced in the last patch
    for stack usage reduction).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 86cdae0ca6d0beca673aed4d26c613063b29fa1c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:55:42 2005 +0100

    [ALSA] Clean up the chip detection
    
    EMU10K1/EMU10K2 driver
    Minor clean-ups of the chip detectoin code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1dfdb44c161d0b6bc804942f640df304ec51bf11
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:54:58 2005 +0100

    [ALSA] Add Mono volume controls for ALC260
    
    HDA Codec driver
    Added Mono volume controls for ALC260 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 33d43a3ff79ec843e728a882b7140f1c3502b6f5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:54:18 2005 +0100

    [ALSA] Add AD1986A support
    
    HDA generic driver,HDA Codec driver
    Added the patch for Analog Device AD1986A codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1473be8cfc62d928fff68d160987b0afee33eb4a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:53:32 2005 +0100

    [ALSA] correct comment for setting widget output
    
    HDA Codec driver
    This patch has no real logical change, it simply correct the comment.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1dd917adb89f634bf4c44156e8e1f1036c041930
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:52:53 2005 +0100

    [ALSA] Fixes AC3 output on Audigy2 sound cards
    
    EMU10K1/EMU10K2 driver
    This patch adds a DSP patch to fix an spdif_bug on some Audigy2 cards.
    
    Signed-off-by: James Courtier-Dutton
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 039adca725809ae52b9a08aa9e28fab88eff3bef
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:52:11 2005 +0100

    [ALSA] Add framework for better audigy sound card capabilities selection
    
    EMU10K1/EMU10K2 driver
    This patch adds more options to help identify all the many different
    creative sound cards. It will eventually be used to control features
    more finely.
    
    Signed-off-by: James Courtier-Dutton
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 52d5dffc88b67c773cb15b368e7a3572cc56e936
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:51:23 2005 +0100

    [ALSA] Replace with macros for gameport initialization
    
    ALSA Core,ALS4000 driver,AZT3328 driver,CMIPCI driver,CS4281 driver
    ENS1370/1+ driver,ES1938 driver,ES1968 driver,SonicVibes driver
    VIA82xx driver,au88x0 driver,CS46xx driver,Trident driver,YMFPCI driver
    Use some macros for gameport initialization.  This makes much easier
    to write the compatible layer for the old gameport API in alsa-driver
    tree.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f938f0ddd25a05c84f96fb51388f612f9b9194f9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:50:38 2005 +0100

    [ALSA] Fix Oops with joystick support
    
    YMFPCI driver
    Fix Oops when joystick is enabled.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 122a3098ee9e87a2138968b388d71bab9eed728a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:49:58 2005 +0100

    [ALSA] Fix Oops with joystick support
    
    ES1968 driver
    Fix Oops when joystick is enabled.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4281bcd7e8c1dfd725c422d3e69c76e5e7cbeca0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:48:53 2005 +0100

    [ALSA] Use vprintk()
    
    ALSA Core
    Use vprintk() instead of printk with a temporary line buffer.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a1fd7681c09f1bcccc36bc839234597d2e9e6ac0
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Mar 24 04:48:11 2005 -0800

    [SPARC64]: Eliminate g5 register usage from switch_to().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e89e782bec1dc67e18cebf92dd4f8e8be4c802d2
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:46:07 2005 +0100

    [ALSA] Reduce stack usage
    
    Control Midlevel,ALSA Core,PCM Midlevel,Timer Midlevel
    ALSA<-OSS emulation,ALSA sequencer,ALSA<-OSS sequencer
    AK4XXX AD/DA converters,GUS Library,Wavefront drivers
    EMU10K1/EMU10K2 driver,HDA generic driver,MIXART driver
    PDAudioCF driver,USB generic driver
    Reduce the stack usage, mostly by replacing large structs with kmalloc'ed
    instances.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 09f9f1ff7e4ebcc4ea0243d132f1d01d4e4262db
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 24 13:44:51 2005 +0100

    [ALSA] Remove unnecessary ac97 init code
    
    VIA82xx driver,VIA82xx-modem driver
    Removed unnecessary ac97 init code in snd_via82xx_chip_init().
    This reduces eventually the big stack usage, too.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1c28768c1e446abff9af5315422ece556dc96d62
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 12:18:28 2005 +0000

    [SERIAL] au1x00_uart: remove duplicate serial registration functions
    
    au1x00_uart doesn't need to provide duplicated 8250 registration
    functions.  Remove them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4973e061704af4cc173773bfca070e013780ac4a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 11:58:57 2005 +0000

    [SERIAL] Set port.dev to PCMCIA device.
    
    Since serial_cs provides power management callbacks, we should not use
    the fallback methods in 8250.c.  We tell 8250.c about this when we
    associate a struct device with the port, and, since we now have such
    a beast, use it.
    
    This also makes sysfs indicate which port is associated with which
    PCMCIA device.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dcadb85fee284ebf78de755362613a3693a0451e
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 24 11:34:14 2005 +0000

    [SERIAL] Allow drivers to use uart_match_port
    
    This removes the duplicate of uart_match_port in 8250.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca788e0e922fc1e1dec077491b1adc6a08964978
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Mar 24 01:59:43 2005 -0800

    [SPARC64]: Move rwsem helpers into asm file.
    
    They were all purely inline asm statements anyways.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f46ce8c9fe882b0706d4998e678c0de2a37bfe1
Author: Phil Dibowitz <phil@ipom.com>
Date:   Thu Mar 24 00:11:28 2005 -0800

    [PATCH] USB Storage: Remove dup in unusual_devs
    
    Matthew Dharm pointed out that your BK tree somehow got 2 versions of an
    unusual_devs entry in it. One was from a patch in January and the other
    was from an automerge.
    
    I dug around in bk - which I find to be the most counter-intuitive
    program in the world - and generated a patch against your latest BK
    tree, and I've attached it. It just removes the dup.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 916e3f0a108ff0e3760ca4848480b95f7de73ca5
Author: Colin Leroy <colin@colino.net>
Date:   Thu Mar 24 00:11:11 2005 -0800

    [PATCH] USB: fix harmful typos in zd1201.c
    
    I was looking around to see why monitor mode wouldn't work using the
    zd1201 driver, and spotted these obvious typos.
    
    I think you can safely apply :)
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit edb2b1885291d8e0cc52ab9826c235e155ab0c43
Merge: 235d39a... 3807a91...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 23 23:51:49 2005 -0800

    Merge http://linux-mh.bkbits.net/bluetooth-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 3807a91abd5aab5077b2b832a44c6c08cb4e527a
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Mar 25 02:26:46 2005 +0100

    [Bluetooth] Fix signedness problem at socket creation
    
    This patch fixes a small signedness problem when creating the
    socket.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit b33a6f12736149b90c2ca00fb533ecf933bfc5e3
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:31:46 2005 -0800

    [PATCH] USB: ehci split ISO fixes (full speed audio etc)
    
    This contains patches to the EHCI driver for the full speed isochronous
    transfer support:
    
        - The sitd->hw_buf[1] and sitd->hw_buf_hi[1] fields were not
          correctly initialized, affecting transfers which crossed 4K
          boundaries.  Helps resolve some "buzz" in audio playback.
    
        - Correctly rounds 188-byte OUT transfers to fit into a single
          packet ... no split transfers needed.  Resolves other "buzz" in
          audio OUT streams.
    
        - Fixes a cut'n'paste error in the logic to check for microframe
          scheduling collisions with a given transaction translator.
          The error caused full speed iso tds to be treated in part as
          if they were high speed iso tds, which could oops.
    
        - The split transaction state flag doesn't indicate an error, and
          it should be ignored when deciding if (IN) transfers had errors.
    
        - Remove some code rejecting full speed iso IN transfers; it's
          not fully working yet though.
    
    Plus a some minor cleanups:  reporting the iso start frame in the
    relevant units, making a debug message more consistent.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4f805ea0182c6bef4985973bc8e28cb9528b08b7
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:31:29 2005 -0800

    [PATCH] USB: usbnet uses netif_msg_*() ethtool filtering
    
    This converts most of the usbnet code to actually use the ethtool
    message flags.  The ASIX code is left untouched, since there are
    a bunch of patches pending there ... that's where the remaining
    handful of "sparse -Wbitwise" warnings come from.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f05b554c74a9f8615c4ba93ce22b7905b9e2427d
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:31:13 2005 -0800

    [PATCH] USB: usbnet minor bugfixes
    
    Two bugfixes to usbnet.  The important one is that it's OK when the
    minidriver doesn't want to use a status endpoint.  That shouldn't
    be treated as an error ... errors prevent probe() from succeeding!
    
    The minor fix is that software driven interface shutdown should neither
    be accounted as an error, nor generate a diagnostic.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 33535cc6ef6aaa8c703eeebb7e2d2557bd3c7bde
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:30:57 2005 -0800

    [PATCH] USB: pegasus uses netif_msg_*() filters
    
    This updates the messaging for the pegasus driver:
    
      - Use driver model diagnostics or printk using the interface name
        for all diagnostic messages ... not dbg()/warn()/err().
    
      - Almost everywhere, use the netif_msg_XXX() macros to check the
        message control bitmask maintained by ethtool.  The default mask
        is initialized using a new "message_level" module parameter.
    
    Also:
    
      - Removes the needless PEGASUS_RUNNING flag, replacing it with the
        standard netdevice mechanism.
    
      - Cleaner access for unaligned values.  Not all processors spend
        silicon to support them like x86 does.
    
      - Adds a few "sparse" fixes.
    
      - Saves the return values for the requests that manipulate chip
        registers ... doesn't yet check them, but at least anyone looking
        at the code (e.g. to find out why the link check task is wedged...)
        will see where those failure modes are ignored.  Currently the
        errors may be reported by printk, but the netif_msg_*() filters
        make that an even worse alert mechanism.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7da807ce33ef588652aaf9a4447cf87c8c0bd0e8
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:30:41 2005 -0800

    [PATCH] USB: usb rndis gadget sparse fixes [4/5]
    
    This is a bunch of "sparse" fixups for the RNDIS code, saying it's
    little-endian on the wire and swapping cpu_to_le32() calls with
    more-correct le32_to_cpu() ones.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 19a580200e4f344e7f754ed02354e6160a038531
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:30:24 2005 -0800

    [PATCH] USB: gadget zero sparse fixes [5/5]
    
    Some "sparse" updates for the Gadget Zero driver, preparing it to
    expect SETUP packets to be little endian.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1d1af23fb7664c3d47a7fc5378583be50e0dc38
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:30:07 2005 -0800

    [PATCH] USB: usb gadgetfs sparse fixes [3/5]
    
    Many "sparse" updates for GadgetFS driver, preparing it to expect
    SETUP packets to be little endian.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 43bf896428c1282ce5a41d36fb8180125544e61b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Mar 23 23:29:50 2005 -0800

    [PATCH] USB: fix usb file_storage gadget sparse fixes [2/5]
    
    On Sun, 20 Mar 2005, David Brownell wrote:
    
    > >   - gfile-0319 ... gets rid of most byteorder warnings from the
    > >     file_storage gadget driver (except for SETUP packet fields)
    
    This patch causes an undeclared variable error when verbose debugging is
    enabled.  Please add the following on top of it.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 62816c7226bd1897615af57cb21e27c91d85e8a1
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:29:34 2005 -0800

    [PATCH] USB: usb file_storage gadget sparse fixes [2/5]
    
    Some "sparse" updates for the File-backed Storage Gadget driver,
    preparing it to expect SETUP packets to be little endian.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8c6206f4a32616ad7612dee5f5bcfc8812d54e6f
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 23:29:17 2005 -0800

    [PATCH] USB: usb gadget misc sparse fixes [1/5]
    
    This lets the file_storage gadget appear again in Kconfig, and fixes
    some minor "sparse" warnings.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 692fc28887d7313821cb0299048727ce907346ce
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Wed Mar 23 23:14:10 2005 -0800

    [PATCH] USB Storage: remove RW_DETECT from being a config option
    
    This patch started life as as454b from Alan Stern.  It has been rediffed
    against the tip, including updates for the way unusual_devs flags are
    defined.
    
    This patch removes the Kconfig option USB_STORAGE_RW_DETECT.  That option
    was used to enable/supress the attempt to detect if a device was write
    protected.
    
    It seems that the vast majority of devices properly respond to the latest
    algorithm for making that determination.  So now we move to excluding only
    those devices that can't handle it.  We accomplish this via the
    unusual_devs.h list.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 391f743d27a646a18d538baa7016857e9e4ad287
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Wed Mar 23 23:13:53 2005 -0800

    [PATCH] USB Storage: combine waitqueues
    
    This patch started life as as476, and has been rediffed against the tip.
    However, that was a few days ago.
    
    This patch combines the two separate waitqueue heads used by the
    scsi-scanning thread and the device-reset routine into one.  After all,
    until the scanning thread is through waiting there will be no SCSI
    devices and hence no device resets.
    
    Once the scanning thread is done waiting, the waitqueue can be used by the
    reset logic -- so even if the act of scanning produces resets, we're fine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db265e3e3906ea9913dd5401d7df9b516f4414c6
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Wed Mar 23 23:13:36 2005 -0800

    [PATCH] USB Storage: allow disconnect to complete faster
    
    This patch started life as as476 from Alan Stern.  It has been rediffed
    against the tip, tho that was a few days ago.
    
    This patch makes the disconnect() routine not wait for the control and
    scanning threads to exit.  This may not seem important now, but it will
    become important later: We would end up with a deadlock if disconnect()
    (which is called with the device locked) was waiting for the control
    thread to exit, while the control thread was waiting to lock the device so
    it could do an autosuspend.
    
    It's necessary to make sure that the host and us_data structures aren't
    deallocated before the control and scanning threads are through with them.
    This is done by calling scsi_host_get and scsi_host_put at the start and
    end of each thread, before signalling that the threads are running.  Since
    the probe() and disconnect() routines cannot run concurrently (guaranteed
    to us by the USB core), this method will guarantee the structures are not
    deallocated too soon.
    
    While there's nothing wrong with leaving the threads alive after
    disconnect() returns, there would be a real problem if the threads were
    still alive when usb_stor_exit returned!  So now usb_stor_exit has to wait
    to make sure all the threads have died.  Apparently the only safe way for
    one thread to signal another while exiting is to use complete_and_exit,
    which we've been doing.  So the patch adds a new driver-wide struct
    completion, named threads_gone, and each thread signals it while exiting.
    usb_stor_exit must call wait_for_completion the appropriate number of
    times, and that number is stored in a new counter named total_threads.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit abe0f925d66bf34b1cddb8811a8361903cb635fa
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Wed Mar 23 23:13:20 2005 -0800

    [PATCH] USB Storage: exit control thread immediately upon disconnect
    
    This patch started life as as475 from Alan Stern.  It has been rediffed
    against the tip, tho that was several days ago.
    
    This patch causes the main control thread to exit as soon as possible,
    i.e., as soon as the DISCONNECTING flag is set.  It no longer waits for an
    explicit exit command, one with srb == NULL.
    
    There won't be any bad implications for our interaction with the SCSI
    midlayer, because once the DISCONNECTING flag is set we fail every
    submitted command immediately in the queuecommand routine.  And if a
    command manages to squeeze through the crack (submitted and accepted
    before we disconnect but not yet processed), the SCSI midlayer will cancel
    it automatically when we remove the host.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bb1e0019f28eca66b118a60135926edfc75907cf
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Wed Mar 23 23:13:02 2005 -0800

    [PATCH] USB Storage: make usb-storage structures refcounted by SCSI
    
    This patch started life as as474 from Alan Stern.  It's been rediffed
    against the tip, tho that is now several days old.
    
    This patch changes the way our private struct us_data is allocated; now it
    gets stored at the end of the Scsi_Host rather than separately.  That's
    what the hostdata field is intended for, and this is how other low-level
    host drivers operate.  In order to convert between us_data and the
    corresponding Scsi_Host I added two new inline routines: us_to_host and
    host_to_us.  (The conversion actually should be quicker than before by a
    microscopic amount, because now it only involves adding an offset whereas
    before it involved dereferencing a pointer.)
    
    The main advantage is that the host is refcounted, so now our us_data
    automatically is too.  Although that doesn't matter at the moment, it will
    matter later on when the control thread may need to outlive the disconnect
    callback.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 452c470b32bd3ca2172d9a96e1b9412fbd031621
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 23 22:45:05 2005 -0800

    [PATCH] drivers/usb/core/devices.c: small corrections
    
    total_written is used at places where it can't have any value different
    from 0.
    
    This patch is partially based on findings of the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 40c751a690932ee0b5cf30f94e54bb55a9b8e200
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Mar 23 22:44:07 2005 -0800

    [SPARC64]: Eliminate g5 register usage in rwsem.
    
    Also, semaphore stuff needs a g5 register clobber
    until we move over to actually passing -ffixed-g5
    to the compiler.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96dabd5e7d834a8e0ba6a0731fe8a38696bc5997
Author: Roman Kagan <rkagan@mail.ru>
Date:   Wed Mar 23 22:34:40 2005 -0800

    [PATCH] drivers/usb/core/usb.c: add MODALIAS env var to hotplug
    
    The patch below adds MODALIAS environment variable to usb hotplug
    callout, allowing for its straightforward use with modprobe.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c79e5ccd8766854d8680c06d5b64cf036a4e7701
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 22:29:06 2005 -0800

    [PATCH] USB: pxa25x udc updates, mostly PM
    
    This has various updates to the PXA 21x/25x/26x UDC driver.
    
        - Implement the "new" pullup() and vbus_session() methods, and
          use them to keep the UDC 48 MHz clock off much of the time.
    
    	* Reworked that ugly Lubbock VBUS IRQ code.  Claim both IRQs,
    	  enable only one at a time; clock the UDC only when VBUS is
    	  present.  (And get rid of rude runtime messages.)
    
    	* Implement driver model suspend() and resume() calls.  When
    	  this device suspends, it clocks off the UDC.  On boards that
    	  support it (including Zaurus clamshells, but not Lubbock)
    	  the D+ pullup is disabled, so the host won't see the device.
    
        - Hmm, the "latest" errata defined some "Must Be One" bits.  OK.
    
        - Change the LED support for debugging.  It stopped compiling for
          Lubbock a while back.  This switches to the standard LED calls
          (so it can work on non-Lubbock hardware), removes the EP0 calls
          (not very useful any more), and for Lubbock now initializes the
          hex leds (U-Boot doesn't enable them, BLOB did).
    
        - "sparse" updates, and get rid of a warning that's pointless
          unless someone's working on DMA support;
    
    Tested on Lubbock (VBUS sensing but no pullup) and some Zaurus
    clamshells (pullup but no VBUS).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b543e4771187672775f3cda4569852de2096c4d8
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 23 22:28:49 2005 -0800

    [PATCH] USB: ohci-omap update (mostly clock gating)
    
    This syncs the OMAP OHCI code with the latest from the OMAP tree.
    The main changes are updated clock gating support (goes with some
    clock tree updates, submitted separately) and two minor cleanups:
    the platform device resources use physical addressing, not the
    static i/o mapped addresses; and there's no longer a need for a
    (noexistent in mainstream) separate header file.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3f144da15716f0a177e781fd787eff99e1c33c14
Author: Colin Leroy <colin@colino.net>
Date:   Wed Mar 23 22:28:28 2005 -0800

    [PATCH] USB: fix missing hunk in drivers/usb/Makefile
    
    I see there's been a driver for zd1201 added in drivers/usb/net/.
    There's a hunk missing in drivers/usb/Makefile, the driver doesn't
    get built in nothing else in drivers/usb/net is configured in :
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 44d355b6a96b7ac1206bc35cd723a11a8bfc2de5
Author: Steve French <stevef@smfhome.smfdom>
Date:   Thu Mar 24 00:13:35 2005 -0600

    [CIFS] Display pool sizes in cifs stats
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 930daba952ea1548892a4103537568810addd7d2
Merge: 85c5427... 043f701...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Wed Mar 23 20:08:53 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit 235d39ae5393cc928ee5a2c1c0a62e10ebee76ce
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 23 18:29:25 2005 -0800

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 043f701b488c4aa11a692f67fd43b280050dd05c
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Mar 23 20:06:44 2005 -0600

    JFS: remove aops from directory inodes
    
    jfs no longer uses a directory inode's address space.  Clean up the
    code by removing aops for directories altogether
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e2c11ba43942c53b82504438126212ce387a3bb3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 23 08:35:43 2005 -0800

    USB: mark usb-serial interface GPL only
    
    This is done because you have to use a GPL only licensed .h file in order to write a usb-serial
    driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit da7bfa7c6a5f6134cc52211f3075fc0555601036
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Wed Mar 23 05:18:39 2005 -0800

    [PKT_SCHED]: Use proper attritbute for action stats.
    
    Action stats were being sent on the wrong TLV. Patch attached.
    
    Thanks to Andy Furniss for finding and helping debug this.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73a26cc6987b99fb14bed57bce4aebb69955ea12
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Mar 23 04:34:15 2005 -0800

    [PATCH] USB: Add myself to MAINTAINERS
    
    A Jan Kasprzak asked a few days ago to have a MAINTAINERS entry for ub.
    This patch updates my entries in MAINTAINERS (ub & ymfpci).
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d783f9f5585abf3b02db99bc30bd999e6ce5c1c0
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Mar 23 04:33:55 2005 -0800

    [PATCH] USB: usbmon - document and kill pipe from API
    
    Someone at linux-usb-devel observed that usbmon should not leak the concept
    of pipe to the user space. This patch makes a compromise between having
    too many words in the line and the pipe. It breaks API, but I doubt anyone
    has any usbmon tools in circulation at this time, so I decided not to move
    to a different filename.
    
    Also, I decided to add a document which describes what is going on. I was
    reluctant to do it because I doubt my ability to keep it synchronized and
    updated, but there were requests to have one.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47e96eb1a5c0b766a67576d7ca7c0d176adddb59
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Mar 23 04:33:34 2005 -0800

    [PATCH] USB: Fix baud selection in mct_u232
    
    This is a patch by Hansjoerg Lipp to fix coding error in divisor calculation.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1c312212198fe371fe39f326c5a505b22f602e37
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Mar 23 04:33:13 2005 -0800

    [PATCH] USB: ub static patch
    
    I'm pretty sure this comes from Bunk originally, but I didn't keep the
    original, so only one signed-off-by is present.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 943067295f2e76e82b1362b28ede146db1cd7158
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Mar 23 04:43:50 2005 -0600

    JFS: Don't allow xtLookup to run against directory with inline data
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 5222eee11ca24695415220a385edfcb64b0756a6
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Mar 23 04:32:55 2005 -0600

    3ware driver update
    
    - Increase max ioctl buffer size to 512 sectors.
    - Make tw_scsi_queue() return 0 for 'Unknown scsi opcode'.
    - Fix tw_remove() to free irq handler/unregister_chrdev() before shutting down
     the card.
    - Change to new 'change_queue_depth' api (from James).
    - Fix 'handled=1' ISR usage, remove bogus IRQ check (from Jeff).
    
    Signed-off-by: Adam Radford <linuxraid@amcc.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 76ff82e99de4f26a14fee81841dcbfaa7b564510
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 22 23:26:40 2005 -0800

    USB: fix bug in visor driver with throttle/unthrottle causing oopses.
    
    Thanks to Mark Lord <mlord@pobox.com> for reporting this and helping with testing.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 091dd4a091e6a933a2a725fb25c1d92c73423ad9
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Tue Mar 22 23:13:21 2005 -0600

    Make Fusion-MPT much faster as module
    
    From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
    
    Between the 3.01.16 and 3.01.18, we introduced new method
    to passing command line options to the driver.  Some of the
    command line options are used for fine tuning dv(domain
    validation) in the driver.  By accident, these command line options were
    wrapped around #ifdef MODULE in the 3.01.18 version of the driver.
    What this meant is when the driver is compiled built-in the kernel,
    the optimal settings for dv were ignored, thus poor performance.
    
    There was actually a fix for this when I submitted SAS drivers
    to the mailing list back in November, however the SAS drivers was
    rejected, and later on I overlooked submitting a single patch to
    solve this.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cae024c15d1125839d6e8a1020aed537c2087127
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 22 23:05:01 2005 -0600

    [PATCH] drivers/scsi/osst.c: remove unused code
    
    Thanks to both the Coverity checker and GNU gcc, it was found that this
    variable is completely unused.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Willem Riede <osst@riede.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dd7d40d77a08d9f9b861c1d1091fab3115520979
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 22 22:59:06 2005 -0600

    [PATCH] drivers/scsi/osst.c: make code static
    
    This patch makes needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Willem Riede <osst@riede.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3238eaf8e9fd210d1b248cec9506cd892db7ef64
Merge: 7bdb3c6... 22d864d...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 20:32:50 2005 -0800

    Merge bk://kernel.bkbits.net/acme/net-2.6
    into sunset.davemloft.net:/home/davem/src/BK/acme-2.6

commit 7bdb3c67ef2bb731104f395e338d024aa508b1fb
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 20:27:01 2005 -0800

    [TG3]: Missing counter bump in tigon3_4gb_hwbug_workaround().
    
    Reported by Adrian Bunk.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 114b3ff3d95101a18e27c9dd9dd0d1ef13d6880f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 22 20:19:14 2005 -0800

    [EQL]: Kill dead code
    
    This patch removes some obviously dead code found by the Coverity
    checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f332288e3339eb21d52b952fb0517db24545d86
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:17:47 2005 -0800

    [IPV4]: Clear DF bit in ip_fragment fast path
    
    It is possible for ip_fragment() to send out head fragments with
    both DF and MF set for packets with local_df set to true.  This is
    because the fast path tries to only modify the MF bit of the head
    fragment.
    
    Since the offset is always zero for the head fragment, and we know
    that DF should be cleared in case of local_df, we can change |= to
    a straight assignment.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db7bba75e8b8617f465ef36e08220d755a6cb7de
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:16:53 2005 -0800

    [IPV4]: Check mtu instead of frag_list in ip_push_pending_frames()
    
    I still didn't like the fact that ip_append_data was the only user
    of dst_pmtu :) So I went looking for bugs in the surrounding code.
    I managed to find something in ip_push_pending_frames.
    
    When dst_mtu < dst_pmtu - IPsec overhead (which can be caused by PMTU
    discovery within an IPsec tunnel), and we transmit a packet that's
    longer than dst_mtu but shorter than dst_pmtu - IPsec overhead, then
    the DF bit will be incorrectly set in the inner IP header.
    
    This will cause the packet to be dropped when it hits the router that
    generated the original PMTU event.  Unfortunately the ICMP packet coming
    back doesn't tell us anything new so the next time we send a packet we
    will do exactly the same thing.
    
    The fix is similar to what we did in ip_output.  Instead of checking
    whether frag_list is empty, we check the condition skb->len <= dst_mtu
    directly and set the DF bit based on that.
    
    We can enumerate all the possibilities to see that this is correct.
    
    If skb->len <= dst_mtu and frag_list is empty then this does the
    samething as before and is obviously correct.
    
    If skb->len <= dst_mtu and frag_list is non-empty then it implies
    that dst_pmtu has increased since the fragments were constructed
    as dst_pmtu = dst_mtu + IPsec overhead.  So the skb will now fit
    within a single fragment which means that setting DF is correct.
    The fragments will be merged by skb_linearise in dev_queue_xmit.
    
    If skb->len > dst_mtu and frag_list is non-empty then again this
    maintains the status quo.
    
    If skb->len > dst_mtu and frag_list is empty then we will leave the
    DF bit clear as the packet will need to be fragmented between the
    remote IPsec gateway and the final destination.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c181cf943c5a902312b47e12b0c4b97ca4d0261
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:13:40 2005 -0800

    [CRYPTO]: Remap when walk_out crosses page in crypt()
    
    This is needed so that we can keep the in_place assignment outside the
    inner loop.  Without this in pathalogical situations we can start out
    having walk_out being different from walk_in, but when walk_out crosses
    a page it may converge with walk_in.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c24f191bae5b001b13d0fcc5217513774484acf
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:12:46 2005 -0800

    [CRYPTO]: Split cbc_process into encrypt/decrypt
    
    Rather than taking a branch on the fast path, we might as well split
    cbc_process into encrypt and decrypt since they don't share anything
    in common.
    
    We can get rid of the cryptfn argument too.  I'll do that next.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f8de0eb7d2e930d728c3d30844f5f86b728ed7de
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:11:58 2005 -0800

    [CRYPTO]: Kill obsolete iv check in cbc_process()
    
    Here's some more optimisations plus a bug fix for a pathological case
    where in_place might not be set correctly which can't happen with any
    of the current users.  Here is the first one:
    
    We have long since stopped using a null cit_iv as a means of doing null
    encryption.  In fact it doesn't work here anyway since we need to copy
    src into dst to achieve null encryption.
    
    No user of cbc_encrypt_iv/cbc_decrypt_iv does this either so let's just
    get rid of this check which is sitting in the fast path.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ae8120eb3797dff24576ecc1aade455f336bafbb
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:10:18 2005 -0800

    [CRYPTO]: Fix walk->data handling
    
    The problem is that walk->data wasn't being incremented anymore
    after my last change.  This patch should fix it up.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59de21037401234f88dd22a9f0a20d2641b8f5e5
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:09:27 2005 -0800

    [CRYPTO]: Optimise kmap calls in crypt()
    
    Perform kmap once (or twice if the buffer is not aligned correctly)
    per page in crypt() instead of the current code which does it once
    per block.  Consequently it will yield once per page instead of once
    per block.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6fbd22fb37baa71fdb90e9efe095d6edabd24858
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:08:48 2005 -0800

    [CRYPTO]: Eliminate most calls to scatterwalk_copychunks from crypt()
    
    Only call scatterwalk_copychunks when the block straddles a page boundary.
    This allows crypt() to skip the out-of-line call most of the time.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88649bf71ba78fe64e69a18ab62c17599b52f38f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:08:10 2005 -0800

    [CRYPTO]: Split src/dst handling out from crypt()
    
    Move src/dst handling from crypt() into the helpers prepare_src,
    prepare_dst, complete_src and complete_dst.  complete_src doesn't
    actually do anything at the moment but is included for completeness.
    
    This sets the stage for further optimisations down the track without
    polluting crypt() itself.
    
    These helpers don't belong in scatterwalk.[ch] since they only help
    the particular way that crypt() is walking the scatter lists.
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f65cfe66595d0944bfb2d75b163845664807a1e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:07:31 2005 -0800

    [CRYPTO]: Handle in_place flag in crypt()
    
    Move the handling of in_place into crypt() itself.  This means that we only
    need two temporary buffers instead of three.  It also allows us to simplify
    the check in scatterwalk_samebuf.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c42e471856770ee7c6ff28a5c60c37a3844c181
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 22 20:06:51 2005 -0800

    [CRYPTO]: Do scatterwalk_whichbuf inline.
    
    scatterwalk_whichbuf is called once for each block which could be as
    small as 8/16 bytes.  So it makes sense to do that work inline.
    
    It's also a bit inflexible since we may want to use the temporary buffer
    even if the block doesn't cross page boundaries.  In particular, we want
    to do that when the source and destination are the same.
    
    So let's replace it with scatterwalk_across_pages.
    
    I've also simplified the check in scatterwalk_across_pages.  It is
    sufficient to only check len_this_page.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9b6ee3c64b50d648a9fba39fe124227f880e72ea
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 19:52:39 2005 -0800

    [NETROM]: net/netrom.h now needs net/sock.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bed60e3d5ea1cacb947d4048c7854d9b2cf1071b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 19:44:24 2005 -0800

    [TG3]: Add missing CHIPREV_5750_{A,B}X defines.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a75717a1b4880896b0e224572a6bf5586e2536a6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 22 19:16:37 2005 -0800

    [ROSE]: Get rid of sk_protinfo use
    
    Below patch puts struct sock into rose_cb to get rid of the need for the
    use of sk_protinfo in rose_sk().  While we're touching the data structure
    convert it from a typedef into a struct.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc7423cdda72c931e83eb7505b013c37eb1e3134
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 22 19:15:42 2005 -0800

    [NETROM]: Get rid of sk_protinfo use
    
    Below patch puts struct sock into nr_cb to get rid of the need for the
    use of sk_protinfo in nr_sk().  While we're touching the data structure
    convert it from a typedef into a struct.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b8d263683391ab74f5794657a4b4edc6d7632937
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:14:06 2005 -0800

    [TG3]: Add Broadcom copyright.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c328b5c6ea6f082490470fe22872a4c698c9e7e8
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:12:04 2005 -0800

    [TG3]: Fix ethtool set functions
    
    Fix all relevant ethtool set functions to properly handle the
    not-netif_running() case. In most cases, the new settings are accepted without
    setting the hardware if not-netif_running(). The new settings will take effect
    when the device is subsequently brought up. tg3_nway_reset() is the exception
    where it will return -EAGAIN if not-netif_running().
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a491d1b80829f330d15a0034ed253fc95f59bf5d
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:09:49 2005 -0800

    [TG3]: Fix jumbo frames phy settings
    
    Fix jumbo frame settings on all copper phys that support jumbo frames by
    setting the fifo elasticity bit. This setting is for the phy's tx fifo to
    properly handle jumbo frames. Note that a similar jumbo frame fix for the
    phy's rx fifo was made to tg3 in the past.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 14ec853c0617758de32da06eb62eae37ea708253
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:07:37 2005 -0800

    [TG3]: Add unstable PLL workaround for 5750
    
    Add unstable PLL clock workaround for 5750 Ax and Bx devices. The workaround
    code is run just before entering D3hot state.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e42952d9f84cef9a5eef3d5e9d200b4cba7dbf7
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:05:03 2005 -0800

    [TG3]: Flush status block in tg3_interrupt()
    
    Add register read of PCI state register in tg3_interrupt() if status block's
    updated bit is not set. This will flush the status block and confirm whether
    the interrupt is ours or not. PCI ordering rules allow the interrupt to
    arrive at the CPU ahead of the status block that may be posted at the
    chipset.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85ca1c7d5390025b8245d492ddf3ad51bb5f8ed1
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Mar 22 19:01:22 2005 -0800

    [TG3]: Add 5705_plus flag
    
    Add a 5705_plus flag to indicate the device is 5705, 5750, or future chips
    that all share the same basic architecture. This makes it easier to add
    support for future devices.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    ACKed-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3c51d933a9f254ccbe35935bc1b234957c63c732
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:58:41 2005 -0800

    [ATM]: assorted cleanups
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed0e326c1cbf2e9510c650d86568e1f0b1e2074b
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:57:53 2005 -0800

    [ATM]: [lanai] alpha build fixes
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89132521308a33d300bb2baa139d71bf73b45c39
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:57:06 2005 -0800

    [ATM]: [ambassador] fix sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5db4a27696b81cf79cf3228842978bb5d7fe271b
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:53:53 2005 -0800

    [ATM]: [nicstar] fix some sparse warnings
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83cc3146c0d23a01757c6a78525317c62fd4b0cd
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:52:51 2005 -0800

    [ATM]: [zatm] fix sparse warning
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db0e6b3f5a3821a8b7dcb4477202d533c6230267
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Mar 22 18:51:57 2005 -0800

    [ATM]: Remove bridge/lec interdependency
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c993df5cc758e511667e3078f37f78aee573ebc1
Merge: 224de59... f51104e...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 18:33:30 2005 -0800

    Merge davem@davemloft.net:/disk1/BK/sparc-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 22d864d542a0b92116751186f1794c7d0f1ca1b9
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Tue Mar 22 16:40:53 2005 -0300

    [NET] use sk_acceptq_is_full
    
    Replacing the open coded equivalent.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cad01f67e6e3da60e2b6cdea9dbf4de362d59798
Author: Brett Russ <russb@emc.com>
Date:   Tue Mar 22 13:24:12 2005 -0500

    [PATCH] libata: support descriptor sense in ctrl page
    
    libata must support the descriptor format sense blocks as they
    are required to properly report results of ATA pass through
    commands as well as other SCSI commands reporting 48b LBAs.
    This patch adjusts the control mode page to properly report
    this.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c0e3d9554d6da0526b5c69c82943bbd256ee4cf6
Author: Steve French <stevef@smfhome.smfdom>
Date:   Tue Mar 22 10:51:15 2005 -0600

    [CIFS] clean up source code formatting
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 64dea4fb6cada572962acaa388e3a2c06a9e8230
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Mar 22 09:00:15 2005 -0500

    [PATCH] net/sk98lin: remove duplicate delay
    
    Remove an unnecessary second (and identical) delay.
    schedule_timeout() does not need to be called, as msleep_interruptible() already
    delayed the task.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cd0a4d4cc86c1d0789d7051e5993e53440fb4481
Author: Jun Komuro <komurojun-mbn@nifty.com>
Date:   Tue Mar 22 08:57:37 2005 -0500

    [PATCH] net/Kconfig: remove unsupported network adapter names
    
    3c569B (98) and RE1000Plus(C-Bus) is not supported at all by
    the kernel 2.6.11.
    
    Signed-off-by: Jun Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 28be74bc7a0aa64f1dff11ac988aef8f15c07fa2
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Mar 22 08:24:56 2005 -0500

    [PATCH] mii: GigE support bug fixes
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Acked-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4fc56460a00450edd7c04f46851e4b29d68352c2
Author: venza@brownhat.org <venza@brownhat.org>
Date:   Tue Mar 22 08:14:13 2005 -0500

    [PATCH] Maintainer change for the sis900 driver
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b06835f02ca28aadd67f7c8fd81968de6aec6c5b
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Mar 22 07:54:26 2005 -0500

    [PATCH] bonding: avoid tx balance for IGMP (alb/tlb mode)
    
    Add special case to bond_alb_xmit() to avoid tx balance for IGMP.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit af90cfb79df2345a3e5e156058d1458a4e4e5cdc
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 22 07:53:22 2005 -0500

    [PATCH] b44: allocate tx bounce bufs as needed
    
    From: "John W. Linville" <linville@tuxdriver.com>
    
    The b44 hardware has a DMA mask that only covers 1GB.  On x86, a DMA mask
    <4GB results in allocations using GFP_DMA.  The GFP_DMA pool (16MB) gets
    exhausted very quickly in some configurations.
    
    The b44 driver has been pre-allocating bounce buffers in a single large
    (~750k) contiguous block.  On boxes w/ limited GFP_DMA memory, this
    allocation can fail.  Such failure results in the driver being unable to
    load and function.
    
    The solution here is to check each tx skb against the DMA mask.  If it is
    outside the allowable range, a single buffer is allocated from the GFP_DMA
    range and discarded after the tx completes.  This behaviour mimics what is
    done for bounce buffers on the rx side.
    
    The pre-allocation of tx bounce buffers is, of course, removed.
    
    Acked-by: Pekka PietikÃ¤inen <pp@netppl.fi>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4f2d8cf982a1e8282844694eea5d1f6688e8b3e6
Author: Mikael Pettersson <mikpe@user.it.uu.se>
Date:   Tue Mar 22 07:50:47 2005 -0500

    [PATCH] drivers/net/depca.c gcc4 fix
    
    Fix
    
    drivers/net/depca.c: In function 'load_packet':
    drivers/net/depca.c:1829: warning: operation on 'i' may be undefined
    
    warning from gcc4 in depca.c.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 00ce0266ccf10a1603353ef4bf48880e29a5db6f
Author: Mikael Pettersson <mikpe@user.it.uu.se>
Date:   Tue Mar 22 07:50:35 2005 -0500

    [PATCH] drivers/net/arcnet/arcnet.c gcc4 fixes
    
    Fix
    
    drivers/net/arcnet/arcnet.c: In function 'release_arcbuf':
    drivers/net/arcnet/arcnet.c:256: warning: operation on 'i' may be undefined
    drivers/net/arcnet/arcnet.c: In function 'get_arcbuf':
    drivers/net/arcnet/arcnet.c:292: warning: operation on 'i' may be undefined
    
    warnings from gcc4 in arcnet.c.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5d199b971cca5e938df7439d1e2ff2e533bb9394
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 22 07:48:09 2005 -0500

    [PATCH] drivers/net/sis900.c: fix a warning
    
    From: Adrian Bunk <bunk@stusta.de>
    
    drivers/net/sis900.c:199: warning: 'sis900_poll' declared `static' but never defined
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4a8f1a356127e7d54eefc33dce27a76a3feceb97
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 22 07:47:57 2005 -0500

    [PATCH] fix pci_disable_device in 8139too
    
    From: Andres Salomon <dilinger@debian.org>
    
    http://linux.bkbits.net:8080/linux-2.6/cset@418391928THbmFKdJ5UCOhnFPMYbOA
    added an unconditional pci_disable_device() to __rtl8139_cleanup_dev().
    
    That's fine for rtl8139_remove_one and rtl8139_init_one; however, for
    rtl8139_init_board, it ends up being called in the error path.  That is, if
    pci_enable_device or pci_request_regions fails, err_out calls
    __rtl8139_cleanup_dev, which calls pci_disable_device.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2287739a72522eaf441183db9840e8e9e37101ca
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 22 07:45:58 2005 -0500

    [PATCH] bonding needs inet
    
    The bonding driver needs CONFIG_INET, for arp_create(), arp_send(), arp_xmit().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 247f075c1a5765cbb951fd8786076cb0ca1432ee
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 22 07:33:07 2005 -0500

    [PATCH] Fix suspend/resume on via-velocity
    
    From: Pavel Machek <pavel@ucw.cz>
    
    This fixes suspend-resume on via-velocity.  It was confused w.r.t.
    pointers...  Now uses netdev_priv().  [Well, someone should run sed over
    that driver, there are many more dev->priv].
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8ae80ae57cf1a3b711671d73ac21ac2d4e6d2cdc
Author: Dave Jones <davej@redhat.com>
Date:   Tue Mar 22 04:07:41 2005 -0800

    [IPV4]: Fix swapped memset args in multipath_wrandom.c
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93c1d45d97a31da46f23ab7dccfdaa6f3d592305
Author: FranÃ§ois Romieu <romieu@fr.zoreil.com>
Date:   Tue Mar 22 04:06:35 2005 -0800

    [IPV4]: Fix early use of inline in route.c
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1a0b77f00b3ae4f4e451b549aea907ef505be6d6
Merge: a08c932... eb38b10...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:58:17 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/crypto-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit eb38b10ba32870c83819d0e9bd2d80ec36772aa7
Merge: 85c5427... 2e7eb6c...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:45:01 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/network-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 2e7eb6cc4a3691a7c6b7585893da9dffccaf3165
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:37:26 2005 -0800

    [IRDA]: Squash warnings introduced by DEBUG cleanups.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6f1a030e92e5188ee086eef3e8c4348b786f368
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Tue Mar 22 03:23:10 2005 -0800

    [IRDA]: DEBUG macro fixes
    
    	o [CRITICA] Eliminate all 'ASSERT(..., break;)' -> use goto;
    		That would compile differenty with/without CONFIG_IRDA_DEBUG
    	o [CORRECT] Add '()' to IRDA_DEBUG macro to avoid side effects
    	o [CORRECT] Add 'do {} while(0)' to IRDA_ASSERT to avoid side effects
    	o [FEATURE] Rename ASSERT to IRDA_ASSERT (namespace pollution)
    	o [FEATURE] Rename MESSAGE to IRDA_MESSAGE (namespace pollution)
    	o [FEATURE] Rename ERROR to IRDA_ERROR (namespace pollution)
    	o [FEATURE] Disable IRDA_ASSERT when no CONFIG_IRDA_DEBUG -> footprint
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>'

commit df1aa060a61047b25fe16357612c20c75099d5ca
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:20:39 2005 -0800

    [NET]: Kill NETLINK_DEV and its only user, ethertap.
    
    This stuff has been scheduled to die for 2 years.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit df2752b64ffa669be702dfe7d23ad09fb4306341
Author: Chris Wright <chrisw@osdl.org>
Date:   Tue Mar 22 03:17:22 2005 -0800

    [NETLINK]: Remove unused netlink NL_EMULATE_DEV code
    
    Now that netlink_attach() has been removed, the NL_EMULATE_DEV handler
    functions can't ever be set.  So let's rip them out too, because what's
    left behind can't be used at all.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 67b4a1f32f740ba79897b37e6dcff8bb921783c1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:09:27 2005 -0800

    [NETPOLL]: netpoll_queue needs to be exported to modules
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7af7d698228aa20986905a879a0b4df1115cff5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Mar 22 03:05:52 2005 -0800

    [TCP]: BIC not binary searching correctly
    
    While redoing BIC for the split up version, I discovered that the existing
    2.6.11 code doesn't really do binary search. It ends up being just a slightly
    modified version of Reno.  See attached graphs to see the effect over simulated
    1mbit environment.
    
    The problem is that BIC is supposed to reset the cwnd to the last loss value
    rather than ssthresh when loss is detected.  The correct code (from the BIC
    TCP code for Web100) is in this patch.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0e59b453e01135036ae123fd8a13e931628ae542
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 03:04:16 2005 -0800

    [NETPOLL]: Do not use __smp_processor_id().
    
    It is not necessarily available in all configurations.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a458609844576b0593180c78b60f9f3af6183159
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue Mar 22 02:46:25 2005 -0800

    [NET]: Remove redundant NULL pointer check before kfree in socket.c
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fc82b50c4aa7283981dc8db9be4621493f2de3f8
Author: Arthur Kepner <akepner@sgi.com>
Date:   Tue Mar 22 02:44:45 2005 -0800

    [BONDING]: Use NETIF_F_LLTX in bonding device
    
    Lock contention on the bonding device's xmit_lock can
    become a bottleneck when 3 or more gige links are aggregated.
    And it looks like it's unnecessary too, so use the
    NETIF_F_LLTX flag to avoid grabbing this lock.
    
    Signed-off-by: Arthur Kepner <akepner@sgi.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3faf42ff53f6467cd959e922d11734baa270b17e
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Tue Mar 22 05:41:49 2005 -0500

    [PATCH] SATA AHCI correction Intel ICH7R
    
    This patch removes an invalid DID for Intel ICH7R from the ahci.c
    SATA AHCI driver.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6f4e46bd2cad180869ff641fc50666ee5338e641
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:39:35 2005 -0800

    [NETPOLL]: Fix racy dev->flags usage
    
    Put ndev->flags usage under the lock. Spotted by Patrick McHardy.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5192d3a6a61794e38202391ca1708ec1b1ed89e
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:38:55 2005 -0800

    [NETPOLL]: Carrier clarification
    
    Clarify the flaky carrier detect code and use msleep().
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9fc628f3762a3befdba2857979648b09c39a7ecb
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Mar 22 05:37:06 2005 -0500

    [PATCH] e1000: flush work queues on remove
    
    Flush work queues in ->remove() for e1000.
    
    Acked-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2d48d1160e544ae74594a4a94400f32b0046b322
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Mar 22 05:36:54 2005 -0500

    [PATCH] e1000: avoid sleeping in watchdog timer context
    
    Move bulk of e1000_watchdog to a workqueue to make it safe to call
    functions which can sleep.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ead823f898bb801af819fec41bc7cada0dbf7a02
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:33:48 2005 -0800

    [NETPOLL]: Avoid kfree_skb() on packets with destructor
    
    Packets that have destructors should not be zapped here as that might
    produce additional printk warnings via netconsole.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 94ed0fe63d0413767f778daf380f22a085706054
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:31:52 2005 -0800

    [NETPOLL]: Handle xmit_lock recursion similarly
    
    Handle possible recursion on xmit_lock while we're at it.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0574bcad26423e388932e97854911dc6d9944ec0
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:31:14 2005 -0800

    [NETPOLL]: Add optional dropping and queueing support
    
    This adds a callback for packets we can't deliver immediately and a
    helper function for clients to queue such packets to the device
    post-interrupt.
    
    Netconsole is modified to use the queueing function for best-effort
    delivery.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc86a62eb6a9067719c19b0fee1b4f4aca759b4a
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:30:38 2005 -0800

    [NETPOLL]: Fix ->poll() locking
    
    Introduce a per-client poll lock and flag. The lock assures we never
    have more than one caller in dev->poll(). The flag provides recursion
    avoidance on UP where the lock disappears.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f06a39cc010a8c87bb6fa8fe8bcfb951fde44074
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:30:01 2005 -0800

    [NETPOLL]: Add netpoll pointer to net_device
    
    Add struct netpoll pointer to struct netdevice
    Move netpoll rx flags to netpoll struct
    Stop traversing rx_list and get np pointer from skb->dev->np
    Remove now unneeded rx_list
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53e6589a66bb35c8dfb574365f104a960829e841
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:29:23 2005 -0800

    [NETPOLL]: Filter inlines
    
    Add netpoll rx helpers
    Move skb_free for rx into __netpoll_rx
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f18fda985318b256a62d70303b7fe7db29946715
Author: Matt Mackall <mpm@selenic.com>
Date:   Tue Mar 22 02:28:36 2005 -0800

    [NETPOLL]: Shorten carrier detect timeout.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7324000d60925d9dac7c802962f01e7a807fd597
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 22 02:27:00 2005 -0800

    [IPV4]: The multipath select_route method must be implemented.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e00e7ab8f6ba3a5a7c36025de5782a2d9c92bb3f
Author: Steve French <stevef@smfhome.smfdom>
Date:   Tue Mar 22 04:17:42 2005 -0600

    [CIFS] whitespace/formatting cleanup
    
    Signed-off-by: Jesper Juhl (juhl-lkml@dif.dk)
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 98679f5fd18bfa045cc7431bf40607701b2477e7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:17:29 2005 +0100

    [ALSA] Increase buffer sizes for the CA0106 driver
    
    CA0106 driver
    This patch increases the buffer size for the ca0106 driver, so this
    might help prevent over/underruns.
    
    Signed-off-by: James Courtier-Dutton
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fd07e9d64ac2a6493237a118eb707046423931b9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:16:48 2005 +0100

    [ALSA] Fix 96000 SPDIF out from Audigy 2 P16V
    
    EMU10K1/EMU10K2 driver
    This allows one to output at 96000 to the SPDIF using the P16V chip.
    Note: The sample phase is wrong when using the P16V chip, but at least
    no resampling is done.
    
    Signed-off-by: James Courtier-Dutton
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2086c7bd7c0572d67609462e164bf42b928114eb
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:16:05 2005 +0100

    [ALSA] emu10k1 external tram size
    
    EMU10K1/EMU10K2 driver
    This patch fixes wrong size reported by driver for external tram. It
    reports size in bytes and should report it in samples as for internal tram.
    
    Signed-off-by: Peter Zubaj <pzad@pobox.sk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 96005c7971b016c7f84782de660e5dde29d24274
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:15:23 2005 +0100

    [ALSA] use amp capabilities from afg if amp override not set
    
    HDA Codec driver
    Fix by Matt <matt@embeddedalley.com>:
    
    Some HDA codec nodes contain an amp, but do not provide local amp
    capabilities.  In these cases, AC_WCAP_AMP_OVRD is not set so we
    should query the AFG nid in order to get the general amp capabilities.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e9d8b439be18b1b40dc53a225b0f0e444166697d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:14:43 2005 +0100

    [ALSA] fix bug with pci hotplug mode
    
    MIXART driver
    Fix the Oops with hotplug fw loader.
    (Theis fix is missing in the last commit to mixart.c accidentally.)
    
    Signed-off-by: Markus Bollinger <bollinger@digigram.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c8027081515a496576f52b541dbe65010c68e47b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:13:58 2005 +0100

    [ALSA] add HPET support
    
    Timer Midlevel,ALSA Core
    add a wrapper for the HPET driver
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit dbaa7a2cc540ff201f845c8a5be06bab4314d95a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:13:15 2005 +0100

    [ALSA] remove unneeded interrupt locks in rawmidi drivers
    
    Generic drivers,MPU401 UART,CS4281 driver,ENS1370/1+ driver
    CS46xx driver,EMU10K1/EMU10K2 driver
    Now that the output trigger callback is called from a softirq instead
    of an hardirq, we don't need anymore to disable interrupts in our
    interrupt handlers.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 5d579349957c24f72c013077ea318f3def00a10f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:12:31 2005 +0100

    [ALSA] rawmidi - move output trigger into a tasklet
    
    Documentation,RawMidi Midlevel
    Calling the output trigger callback from another interrupt handler
    can lead to unintuitive locking requirements (i.e., spin_lock_irqsave)
    in the sound card interrupt handler.  Moving the call to the callback
    into a tasklet cures this, and has the added benefit that the callback
    is called only once if more that one sequencer event has been
    delivered in one timer interrupt tick.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 06135fe4f17f7552246d600b5cac4366df5267dd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:11:47 2005 +0100

    [ALSA] rawmidi - fix locking in drop_output and drain_input
    
    RawMidi Midlevel
    The comments in snd_rawmidi_drop_output and snd_rawmidi_drain_input
    are wrong -- interrupts _are_ enabled, and spinlocks _are_ required.
    So remove the comments and add spinlocks.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b6f9e089228c2a5492ec16d79e21a7f95d17bd8c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:11:04 2005 +0100

    [ALSA] Replace '/' with commas in ac97 codec names
    
    AC97 Codec
    Replaced '/' letters with commas in ac97 codec names, so that
    they can be used for sysfs entries in ac97_bus.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8827134f9c000f7a034f4479b3e6481ae72bc9b0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:10:24 2005 +0100

    [ALSA] Fix SPDIF output on CMI9880
    
    HDA Codec driver
    There is mute control on 9880's spdif (IEC958) out, so it needs to be
    turned on/off in mixer.
    The patch is for CVS version and I think it can be patched to azx too.
    Hope this also fix the 9880 SPDIF-out bug.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a6c24617d652784ec7facdd825f399bf2a90d70f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:09:39 2005 +0100

    [ALSA] fix bug with pci hotplug mode
    
    MIXART driver
    There is a bug with mixart driver, when using hotplug:
    accessing NULL pointer -> segmentation fault
    
    Signed-off-by: Markus Bollinger <bollinger@digigram.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6ac835466ff801805884474f2de043979a1ca2f9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:08:57 2005 +0100

    [ALSA] rme32 - remove superfluous spin_lock_irqsave call
    
    RME32 driver
    In the PCM trigger callback, replace spin_lock_irqsave() with
    spin_lock() because interrupts are already guaranteed to be disabled.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 04907e03db478e7e511353882af3948422b0c8b7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:08:16 2005 +0100

    [ALSA] Fix typos
    
    ALSA sequencer,ALSA Core
    Fix typos in alsa-kernel code for MIDI sostenuto.
    
    Signed-off-by: William <walsac3c@orthoset.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 718566ca0f702ec51bfa5c5250360e958a31e4ac
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:07:30 2005 +0100

    [ALSA] fix misc oopses
    
    EMU10K1/EMU10K2 driver
    Fix Oops with Multi-channel (EFX) mixer controls.
    
    Signed-off-by: Arnaud Patard <apatard@mandrakesoft.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3637dbb649d620321935d85845d22795e1c79236
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:06:46 2005 +0100

    [ALSA] fix P16V breakage for non Audigy2 cards
    
    EMU10K1/EMU10K2 driver
    The P16V patch unconditionally checks the IPR2 register in the interrupt
    handler resulting in infinite loop and system lockup on any non Audigy2
    cards.  I really hate checking emu->is_audigy and emu->revision in a
    fast path like the IRQ handler but I don't see another way.
    
    Also, don't bother allocating/freeing the DMA buffer for P16V unless
    it's really present.
    
    This is a critical fix and should trigger an immediate rc2 release IMO.
    Currently any emu10k1 users other than Audigy 2 will lock up hard as
    soon as they play any sound.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 616c2f7ee8467b1dcad3f94ac1a5f9000d44235b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:06:04 2005 +0100

    [ALSA] remove superfluous spin_lock_irqsave calls
    
    MPU401 UART,CS4281 driver,ENS1370/1+ driver,CS46xx driver
    RME HDSP driver
    In PCM trigger and pointer callbacks, replace spin_lock_irqsave() with
    spin_lock() because interrupts are already guaranteed to be disabled.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 1058e1cddf80cddf32ceb996ff48035ba78cb6e6
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:05:21 2005 +0100

    [ALSA] documentation - clarify information about atomic callbacks
    
    Documentation
    Document that the ack callback is atomic, too, and that the atomic
    callbacks are called with disabled interrupts.  Additionally, clarify
    the description of the rawmidi trigger callback.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f76dc2baa866ca61baeb0107fbb08fff278e3201
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:04:37 2005 +0100

    [ALSA] Add new C-Media 9880 codec ID
    
    HDA Codec driver
    Following change need to be added for newer C-Media 9880 codec ID.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 49ab1fbbce009d3fe183ba3c24a65dd89584472d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:03:57 2005 +0100

    [ALSA] Use full-digital model as default for CMI9880
    
    HDA Codec driver
    Use full-digital model as default for CMI9880 rather than the
    minimal model.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0088fa6302b15e0b66dd2423c73ff5f9f002dec1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:03:14 2005 +0100

    [ALSA] ak4114 (Juli@) - increased delay between statistics update & rate check
    
    AK4114 receiver
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 23e506d0e3ae79eaffeaf7be2f2ba34aa88d9e2d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:02:33 2005 +0100

    [ALSA] Wake up polls and signals at timer notification
    
    Timer Midlevel
    Wake up polls and signals at timer notification (TREAD mode only).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a45ab28d2dd25890f7c4c734fe0c11015d71b282
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:01:52 2005 +0100

    [ALSA] Fix resume of es1968
    
    ES1968 driver
    Fixed the resume of es1968.
     - restore the running PCM set up properly in resume
     - ignore spurious hw-vol irqs during resume
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1bf969b6544542064c683c7b5359a66783346be5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:01:11 2005 +0100

    [ALSA] Fix Oops with timer notifying
    
    Timer Midlevel
    Fixed Oops with timer notifying after TIMER_TREAD ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a6bf071ce497ea9c5b420059d1294e12fa5cfc86
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 11:00:28 2005 +0100

    [ALSA] Fix suspend/resume with ATIIXP
    
    ATIIXP driver
    Fixed the suspend/resume with ATIIXP driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6d198c1493184249700dcfda963cbeca00a6d539
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:59:49 2005 +0100

    [ALSA] Add proper spin/irq locks to suspend
    
    PCM Midlevel
    Add the proper spin/irq locks to PCM suspend functions so that PCM
    trigger and pointer callbacks can be called safely without irqsave.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 92285a80da404df70b93421dc6fde55848943260
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:59:10 2005 +0100

    [ALSA] isa/Kconfig - added SND_AD1848_LIB and SND_CS4231_LIB tristates
    
    ISA
    This patch fixes problem with missing SND_GENERIC_PM for isa cards using
    ad1848 and cs4231 library modules.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ae661ef27ca702bba34ee68f1138975da0b2113f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:58:26 2005 +0100

    [ALSA] emu10k1 - add support for p16v chip (24-bit playback)
    
    EMU10K1/EMU10K2 driver
    Add 24bit, 96khz support for multichannel playback on the Audigy 2 sound cards.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.demon.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e8be163ab7240ec815edbf0dd11fcc11fd1ee55c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:57:43 2005 +0100

    [ALSA] emu10k1 - copyright additions/fixes
    
    EMU10K1/EMU10K2 driver
    The next two patches add my copyright for adding the multichannel PCM
    support to emupcm.c and emumixer.c.
    
    The final patch adds Clemens Ladisch to the copyright on timer.c, rather
    than just saying 'Copied from similar code by CL'.  This has been
    bugging me for a while, since I just copied and pasted from the ymfpci
    driver & changed the registers.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5a1dbb761abfb9135c3b53392f2c97b93ca2e04d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:57:02 2005 +0100

    [ALSA] emu10k1 - Silence the 'BUG (or not enough voices)' message
    
    EMU10K1/EMU10K2 driver
    Silence the 'BUG (or not enough voices)' message. This does not in fact
    represent a bug; it's a normal ocurrence when the wavetable synth is in use.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1b9db03fa8dab9562163d8b338de8a39e42994a2
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:56:19 2005 +0100

    [ALSA] emu10k1 - give the subdevices descriptive names
    
    EMU10K1/EMU10K2 driver
    Give the subdevices descriptive names, like 'ADC Capture/Standard PCM Playback' instead of 'EMU10K1' for
    hw:x,0 and 'Multichannel Capture/PT Playback' instead of 'EMU10K1 EFX'
    for hw:x,2.  Now that qjackctl enumerates the devices automatically,
    this is a significant usability improvement.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit fc2efca24d214be9bd49913041119b9304a23740
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:55:39 2005 +0100

    [ALSA] Fix voice allocation corruption
    
    EMU10K1/EMU10K2 driver
    Fixed the corrupted voice allocation in snd_emu10k1_pcm_channel_alloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a6dfbe4479681c47cd82bf2dffdbea3930fe133a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:54:56 2005 +0100

    [ALSA] Add DXS support for MSI K8T Neo2-FI
    
    VIA82xx driver
    Added the DXS entry for MSI K8T Neo2-FI.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b930765c0455421e70a8ba6194303e5d95321dbb
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 22 10:54:10 2005 +0100

    [ALSA] Fix ALC655/658/850 SPDIF playback route
    
    AC97 Codec
    Fix ALC655/658/850 IEC958 (SPDIF) playback route control.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 21686c512adbe5ea69c2eb5a48f6609942086438
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Mar 22 09:36:50 2005 +0000

    [ARM PATCH] 2575/1: pass -mbig-endian/-mlittle-endian to invocations of cpp
    
    Patch from Lennert Buytenhek
    
    We currently pass -mbig-endian/-mlittle-endian to the compiler and the
    assembler, but we do not pass it to cpp, even though it also needs it.
    So, add this flag to CPPFLAGS, and since CPPFLAGS is also passed to the
    compiler and the assembler, we can then then remove the flag from CFLAGS
    and AFLAGS.
    The symptom of this problem is the kernel hanging after
    "Memory: ......KB available (....K code, ...K data, ...K init)"
    when compiling a big-endian kernel with a little-endian toolchain or
    vice versa, and this happens because 'jiffies' points to the wrong
    half of 'jiffies_64' (due to vmlinux.lds having been generated with
    the wrong preprocessor flags), so calibrate_delay() takes forever to
    complete.
    Derived from an earlier patch by Krzysztof Halasa.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 224de59aebccab7d849ac4a6aca447c9adf823a6
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 21 17:45:15 2005 -0800

    [SPARC64]: Handle straddling VA space hole correctly.
    
    Noticed by Hugh Dickins.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c81f0bc5b98b302a90415cf2834b056047ff2d53
Merge: ce32792... 85c5427...
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Mar 22 10:18:51 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit ce327920dcaad0b263b2afa0c117e3b44b16c7cb
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Mar 22 10:16:10 2005 +1100

    [XFS] Make trivial extension to sync flag to implement dirsync,
    instead of silently ignoring it.
    
    SGI-PV: 932297
    SGI-Modid: xfs-linux-melb:xfs-kern:21888a
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d7ce8b77d44245186d36a449a45b17b17dab6ba8
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Mar 22 10:03:51 2005 +1100

    [XFS] Fix sync mount option to also do metadata updates synchronously.
    
    SGI-PV: 932297
    SGI-Modid: xfs-linux-melb:xfs-kern:21887a
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1ee21026660bf0febed3996100bf7ab300742cb2
Author: Ian Campbell <icampbell@com.rmk.(none)>
Date:   Mon Mar 21 21:26:20 2005 +0000

    [ARM PATCH] 2574/1: PXA2xx: Save CCLKCFG over sleep
    
    Patch from Ian Campbell
    
    As discussed on the ARM kernel list, the CCLKCFG[TURBO] bit is
    documented as being cleared when sleep mode exits so we need
    to save and restore it ourselves.
    
    Signed-off-by: Ian Campbell
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3d545b37ca2be87514fb2d07d347214f713078ed
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Mar 21 21:17:05 2005 +0000

    [ARM PATCH] 2573/1: simplify align[bw]() in ixp2000's io.h and update comments
    
    Patch from Lennert Buytenhek
    
    We currently have a workaround for the fact that early IXP2400s
    assert byte lanes for PCI I/O transactions the other way round.
    Newer silicon has a bit that can be set to 1 to get the 'proper'
    behavior, but since that is not available on older silicon we
    choose to keep working around this issue by hand.
    The workaround can be done in an easier way than is currently the
    case, though -- instead of substracting the lower two bits of the
    I/O address from 3 and putting the result back into the lower two
    bits, we can just toggle the two lowest bits using a simple XOR
    with 3.
    While we are at it, the outb() macro does not seem to parenthesize
    its first argument, while outw() and outl() do, so fix this up.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 674051c91a76cab0af15317a67dcce8ac4c60744
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Mar 21 20:57:28 2005 +0000

    [ARM PATCH] 2572/1: remove ifdefs from enp2611.c
    
    Patch from Lennert Buytenhek
    
    If enp2611.c is compiled in, it implies that CONFIG_ARCH_ENP2611
    is defined, so we don't need the ifdefs.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit edfb74968a4f6f6b312652760956f8fd6524924f
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Mar 21 20:47:35 2005 +0000

    [ARM PATCH] 2571/1: minor time-keeping fixes for ixp2000
    
    Patch from Lennert Buytenhek
    
    There are two very minor issues with time-keeping on the ixp2000:
    1. It turns out that if T#_CLD (timer reload value) is set to X,
       it means the timer will spend a full tick on 0, then a full
       tick on X, and then start counting down towards 0, which then
       effectively gives the timer a period of X+1 instead of the
       intended X.  Solve by writing X-1 instead of X to T#_CLD.
       This is relatively harmless, though -- assuming a 50MHz system
       clock (like on the ENP-2611) and HZ=100, there will be 500000
       timer interrupts generated per 500001 real-world jiffies, but
       that last timer interrupt will call timer_tick twice, taking the
       system time from 499999 jiffies plus 20000 usec to 500001 jiffies
       plus 0 usec.  Every 500000th jiffy will 'not exist', and every
       other jiffy will last 10002us instead of 10000us.
    2. next_jiffy_time is initialised as '0xffffffff - ticks_per_jiffy',
       but timer 4 starts ticking from 0xffffffff downwards, which will
       cause the time offset in the first 1/HZ sec after timer int init
       to be negative, and the first timer interrupt ever not to call
       timer_tick().
    Neither of these issues can cause clock drift or backwards clock
    motion, but it's good to fix them nevertheless.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7672bb6e482fa8622bdd20f12d2d0379429170ec
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 21 10:32:17 2005 -0600

    [CIFS] Fix NT4 attribute setting
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit dd79fab035990fc43fe06e559bb7f117c0fd1ef8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 21 06:55:26 2005 -0800

    PCI Hotplug: enforce the rule that a hotplug slot needs a release function.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 75e2d213e529f3d0e52c239a0cb3dc46aa1edfc1
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:36:57 2005 -0800

    [PATCH] UHCI updates
    
    This is the fifth of five updates to the uhci-hcd driver:
    
    	Separate out the part of the driver responsible for scanning the
    	schedule and doing delayed processing.  Put it in a new routine
    	which can be called as needed (such as when the controller is
    	suspended) from several places in addition to the usual IRQ
    	handler.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ee715255d59ede01bc89dac7b9489fa39139462
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:36:17 2005 -0800

    [PATCH] UHCI updates
    
    This is the fourth of five updates to the uhci-hcd driver:
    
    	Reimplement the get_current_frame routines so that when the
    	controller isn't running they return a cached value.  Also add
    	a flag to track whether the controller is running and allow
    	critical data structure updates to occur immediately if the
    	controller is stopped.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8ecf044c762751a3a164b1a84e68742194c9e6bf
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:30:56 2005 -0800

    [PATCH] UHCI updates
    
    This is the third of five updates to the uhci-hcd driver:
    
    	Change the first argument to uhci_finish_completion from hcd
    	to uhci and expand the spinlock-protected region to include
    	the entire timer callback routine plus the suspend and resume
    	routines.  It's a little awkward that the reset routine must
    	run without the spinlock, but that whole pathway will vanish
    	before long.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ecd0e4bc123a06eb178855af1ff2c5bcadfb1ee7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:27:09 2005 -0800

    [PATCH] UHCI updates
    
    This is the second of five updates to the uhci-hcd driver:
    
    	Reimplement the port reset function by splitting it into two
    	parts like the other HC drivers do, where the second part is
    	triggered by a port status request when the reset finishes.  Now
    	the entire hub_control routine can run without sleeping and can
    	hold the device spinlock.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b8684abc7f2ab9bf9a01f560ed1d341845479c98
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:26:12 2005 -0800

    [PATCH] UHCI updates
    
    This is the first of five updates to the uhci-hcd driver:
    
    	Rename the uhci->schedule_lock to just plain uhci->lock.
    	Originally I had thought of adding a separate device-management
    	lock, but now it seems better to use a single lock for both
    	purposes.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 366c0d35510d9a6c578ace1b97e85b830b582899
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 21 06:24:51 2005 -0800

    [PATCH] USBcore updates
    
    This is the fifth of five updates to usbcore:
    
    	Add some extra debugging messages to the hub driver and make it
    	set the power state for root hubs like it does for external hubs.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 52cb6da5987b5a087be3529a3b76f1b5c53525bc
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 21 08:09:44 2005 -0600

    [CIFS] add new retry on failure to legacy servers such as NT4 of delete of readonly files.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit a08c93261904fedc79b0dc3e72c8b421ac8fdcd6
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 21 18:36:54 2005 +1100

    [CRYPTO]: Fix sparse warnings in tea
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 942e50534eea3ed324606a6aa335701b105a1465
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 21 18:30:42 2005 +1100

    [CRYPTO]: Fix sparse warnings in blowfish
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit b8126afb85a0eb0b5344c27f129af3063f9ad8c6
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 21 18:24:16 2005 +1100

    [CRYPTO]: Fix sparse warning in sha512
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 4100391f78e8904ce7746a1379f337bea350a05f
Author: Domen Puncer <domen@coderock.org>
Date:   Mon Mar 21 18:21:42 2005 +1100

    [CRYPTO]: Fix sparse warning in sha256
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit d03176fcd00edc8272e2e1c298bd91929cc36f18
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sun Mar 20 23:04:00 2005 -0800

    [PATCH] USBcore updates
    
    This is the fourth of five updates to usbcore:
    
    	Add a new usb_hcd_resume_root_hub function for use by HCDs in
    	processing resume requests from their root hubs.  No calls to
    	this new routine are in the patch but they will be added in
    	due course.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 44b4692cd211037e49df1912f8431d1100db2f2d
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sun Mar 20 22:58:02 2005 -0800

    [PATCH] USBcore updates
    
    This is the third of five updates to usbcore:
    
    	Adjust the usb_hc_died routine to eliminate races with root-hub
    	registration/deregistration and have it tell khubd to remove
    	all devices below the root hub.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a62a84075e45bd71eb0116c72c2d1cdfaf3c9f0e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sun Mar 20 22:43:56 2005 -0800

    [PATCH] USBcore and HCD updates
    
    This is the second of five updates to usbcore:
    
    	Rename the hcd->state constants so that they all begin with
    	HC_STATE.  Right now some of them start with HCD_STATE and
    	others with USB_STATE, which can be very confusing.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 827611120f4c9c6dcf94e25cf5b7e0525d016711
Merge: 5088eca... 10692db...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 21 00:13:05 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit 10692db9b1f794b52c5f9bd4a4736f4229092231
Merge: f537c25... 85c5427...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 21 00:04:13 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 81390b69282188100663fad5ccadd87e32ffed02
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 20 17:56:38 2005 -0800

    [SPARC64]: Fix fifth arg pointer check for SEMTIMEDOP.
    
    Noticed by Anton Blanchard.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8f4fdf7328bcf62b554f48ca1280d03c6340846
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 20 17:28:06 2005 -0800

    [PARISC]: Fix type in unaligned.h header.
    
    Meant to include asm-generic/unaligned.h, not make
    this file include itself :-)
    
    Noticed by Mika Kukkonen.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e48ca3fe83e0caaa4800bbb246e55ec5749b9d5a
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sun Mar 20 20:12:44 2005 +0100

    [Bluetooth] Fix race condition in virtual HCI driver
    
    This patch fixes a race condition in the hci_vhci_chr_close()
    routine of the virtual HCI driver.
    
    Signed-off-by: Imre Deak <imre.deak@nokia.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 9de468627695692bb121dd277883a64d759c718a
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Sun Mar 20 09:05:57 2005 -0600

    53c700: Alter interrupt assignment
    
    This change makes interrupt assignment the job of the
    glue driver.  The upshot being that the glue driver can
    now set the name of the interrupt and, in the case of
    the NCR_D700 driver, make the interrupt routing more efficient.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 43d1c69ccf7d30b80b6696615b6cf39528f6b7d3
Merge: f40bb34... e48ca3f...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 20 03:49:56 2005 -0800

    Merge http://linux-mh.bkbits.net/bluetooth-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 70de6c40d88a57cc10ebd7a75fd49cd7e7d2eade
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 20 05:09:22 2005 -0600

    [CIFS] streamlining cifs open with various helper functions
    
    Signed-off-by: Jesper Juhl (juhl-lkml@dif.dk)
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 7882ca4e6934b0ad113f7a80758ca8d818b08daf
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Mar 20 09:46:11 2005 +0000

    [ARM] Add vserver syscall allocation
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c2bb2e18a0c147b2fff848fa12d61673feb67b51
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Sat Mar 19 22:12:34 2005 -0600

    SCSI: Re-export code incorrectly made static
    
    The interrupt routine in 53c700 is designed to be exported
    for a future code change
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f74cc48ecb9e1fd3ab3d50215d6073065820f19a
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 19 22:40:25 2005 +0100

    [Bluetooth] Make another variable static
    
    This patch makes another needlessly global variable static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 29e2fd304ee64244cf7dd2a64651745e8ee5c7dc
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 19 22:37:30 2005 +0100

    [Bluetooth] Remove now unneeded references to sk_protinfo
    
    Now that sk_protinfo is not used anymore for storing private
    protocol information, we can safely remove the code in the
    socket destruct path to free it.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 6884922417aba6f3a87bc9e34929fb53199b6102
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 21:20:40 2005 +0000

    [ARM PATCH] 2540/1: OMAP update 10/10: Add boards VoiceBlue and NetStar
    
    Patch from Tony Lindgren
    
    This patch by Ladislav Michl adds support for boards
    VoiceBlue and NetStar
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit eefbb5d60f76f48a90c257a505e81a220f97334f
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 21:12:49 2005 +0000

    [ARM PATCH] 2542/1: OMAP update 9/10: Board specific updates
    
    Patch from Tony Lindgren
    
    This patch updates the board specific files for OMAP.
    The highlights of this patch are:
    - Change flash memory to use device model style init by
      Ladislav Michl
    - USB related resource fixes by David Brownell
    - Resource fixes for smc91x by Tony Lindgren
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a0d49434d8c52c1df26390e8740dc6b7f1dbb0c0
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 21:04:42 2005 +0000

    [ARM PATCH] 2541/1: OMAP update 8/10: Leds related changes
    
    Patch from Tony Lindgren
    
    Better leds support by David Brownell
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9ec8b7e73ac921e1d3d6726c981123e433ba5213
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:57:37 2005 +0000

    [ARM PATCH] 2547/1: Update OMAP 7/10: USB low-level init
    
    Patch from Tony Lindgren
    
    This patch by David Brownell updates the USB low-level
    init on OMAP.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0101e5c581e596fac59ae15a7f12808b1a6a36a3
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:49:36 2005 +0000

    [ARM PATCH] 2544/1: OMAP update 6/10: Change OCPI to use clock framework
    
    Patch from Tony Lindgren
    
    This patch by Paul Mundt and Tony Lindgren changes cleans up
    the OCPI bus code and changes it to use clock framework.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7e52e6650922bc66028d79c0c73115accc64364a
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:43:23 2005 +0000

    [ARM PATCH] 2546/1: OMAP update 5/10: GPIO interrupt changes
    
    Patch from Tony Lindgren
    
    This patch fixes problems with missed GPIO interrupts. FPGA
    interrupt handling is also simplified based on the GPIO changes.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1aa851882de87a407905686872fb1908be1a7c43
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:35:11 2005 +0000

    [ARM PATCH] 2564/1: OMAP update 4/10: Pin multiplexing updates, take 2
    
    Patch from Tony Lindgren
    
    This patch from David Brownell and Nishant Menon adds new pin
    configurations. A fix for the mux spinlock is also included.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4132dba7cf17dae57070e76c79d7bddbb7a997f6
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:28:36 2005 +0000

    [ARM PATCH] 2565/1: OMAP update 3/10: Clock changes, take 2
    
    Patch from Tony Lindgren
    
    This patch by Tuukka Tikkanen and David Brownell updates OMAP
    clocks and removes old clocks.h.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 83e718c9718668442854cca5c264f690c2c371fe
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 20:12:56 2005 +0000

    [ARM PATCH] 2548/1: OMAP update 2/10: Include files
    
    Patch from Tony Lindgren
    
    This patch syncs the mainline kernel with the linux-omap tree.
    The patch mostly contains minor fixes and extra register definitions
    by various OMAP developers.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5b0244629dd2906b1e8381359682bfe79920b1fb
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Mar 19 19:54:31 2005 +0000

    [ARM PATCH] 2539/1: OMAP update 1/10: Arch files
    
    Patch from Tony Lindgren
    
    This patch syncs the mainline kernel with the linux-omap tree.
    The patch contains various minor fixes by various OMAP
    developers.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit beb44089f1adb0e634caeb7c352e77b608a76d99
Author: dick@com.rmk.(none) <dick@com.rmk.(none)>
Date:   Sat Mar 19 18:26:40 2005 +0000

    [SERIAL] sealevel 8 port RS-232/RS-422/RS-485 board
    
    Patch from Dick Hollenbeck
    
    Vendor Sealevel suggested these changes for its new board.  Tried
    them, they work with the card.  Please apply the patch below, which
    was made from 2.6.10 but can be applied to 2.6.11.2 without errors.

commit 624bedd4115922a62731e44921ea128800cd94c1
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sat Mar 19 11:16:23 2005 -0600

    [CIFS] code cleanup, rearranging of large function
    
    Mostly following suggestions of Jesper Juhl
    
    Signed-of-by: Steve French <sfrench@us.ibm.com>

commit 7f0b0bd1c71db10488c4c5a1ab3ecd0cab01374b
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Mar 19 16:54:46 2005 +0000

    [ARM PATCH] 2557/1: S3C2410 - fix otom/nexcoder buiilds due to sparse fixes
    
    Patch from Ben Dooks
    
    These two machines where missed out when updating
    for sparse fixes, return them to building correctly.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 68d10ae631a4ee0aa08d9551b1a792588e16ef2d
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 19 16:39:44 2005 +0000

    [MMC] SD support : protocol
    
    Patch from Pierre Ossman
    
    Protocol definitions.
    
    The basic commands needed for the later patches. The R1_APP_CMD seems
    to be misdefined in protocol.h so this patch changes it.

commit fb91722a9673446a8d86049d07e94fa6081323e6
Author: afong@org.rmk.(none) <afong@org.rmk.(none)>
Date:   Sat Mar 19 16:22:50 2005 +0000

    [SERIAL] 8250/sbc8560 bug/fix
    
    Patch from Amy Fong
    
    On the sbc8560 platform, changes were introduced as of 2.6.10-rc2
    which caused the sbc8560 to splutter noise all over the serial
    console.  It seems that ALPHA_KLUDGE_MCR was mulitply and differently
    defined in both drivers/serial/8250.h and include/linux/serialP.h
    
    Below is a patch that clones the definition of ALPHA_KLUDGE_MCR from
    serialP.h, it has been tested and works on the sbc8560.

commit ad3f9f285b0cf47e37e412bcb740abb0bd99ffb2
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Sat Mar 19 16:11:36 2005 +0000

    [SERIAL] new hp diva console port
    
    Patch from Alex Williamson
    
    The patch below adds IDs and setup for a new PCI Diva console port.
    This device provides a single UART described by PCI Bar 1.  ID already
    submitted to pciids.sf.net.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>

commit 22320b150ea0bf35ce6974f90f46665d0e7e21a3
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Sat Mar 19 08:36:15 2005 -0600

    ncr53c8xx: Fix small problem with initial negotiation
    
    The driver produces messages list this:
    
    ncr53c720-1: ID 7, Fast-10, Parity Checking
    scsi1 : ncr53c8xx-3.4.3g
     target1:0:1: target did not report SYNC.
      Vendor: TOSHIBA   Model: CD-ROM XM-5401TA  Rev: 3605
      Type:   CD-ROM                             ANSI SCSI revision: 02
     target1:0:1: Beginning Domain Validation
     target1:0:1: asynchronous.
     target1:0:1: Domain Validation skipping write tests
     target1:0:1: FAST-5 SCSI 4.2 MB/s ST (236 ns, offset 8)
     target1:0:1: Ending Domain Validation
    
    Although everything is fine.  The initial "target did not report SYNC"
    is because the driver is trying to negotiate over the initial inquiry
    (so, naturally we don't know if it supports sync yet).  The solution is
    to rip out the last remnants of the spontaneous attempts at negotiation
    to force it to wait for the DV negotiation in slave_configure.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f51104e76627f3ba13ef8e4dd772deffd176ee16
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 19 04:27:17 2005 -0800

    [SPARC64]: Eliminate g5 register usage from bitops assembly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ae69ec5c84b3d75e70e9dadca863b62afb2ff0e0
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sat Mar 19 03:43:33 2005 -0600

    Q720: fix compile warning
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit de798a0541a89422e1189217146df4f630a86043
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Mar 19 09:23:19 2005 +0000

    [ARM PATCH] 2563/1: RiscPC - update IOMEM annotations
    
    Patch from Ben Dooks
    
    Fixes `iomem` annotations on a number of parts
    of the arch-rpc build, including IO_BASE, IOC_BASE
    and IOMD_BASE.
    Changed the include/asm-arm/arch-rpc/io.h and hardware.h
    to reflect this, and fixed-up the build problems
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3ea03a966e509450ff613b4cb6b0868036039e39
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Sat Mar 19 09:16:10 2005 +0000

    [ARM PATCH] 2552/2: woops
    
    Patch from Nicolas Pitre
    
    argh!
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdda2dbeb92d91bb1016485624b3d246d17468ab
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Mar 19 09:07:26 2005 +0000

    [ARM PATCH] 2562/2: CL7500 - iomem fixes
    
    Patch from Ben Dooks
    
    Fixes for iomem annotations in include/asm-arm/arch-cl7500/hardware.h
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 694338e098a205c50b5fb06031e303831a5cae52
Author: James Bottomley <james.bottomley@SteelEye.com>
Date:   Sat Mar 19 02:58:03 2005 -0600

    [PATCH] fix breakage in the SCSI generic tag code
    
    When I redid the target allocation routines, I inadvertently broke the
    generic tag code.  The problem is that the device is added to the host
    list after slave_configure in the new code.  This is too late since if
    any command disconnects during the initial inquiry phase, we now cannot
    find the device for the reconnect.  The fix is to add the device to the
    lists earlier.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4f5ed44d465efa7d361622e443a91fb0a5494abe
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sat Mar 19 02:55:41 2005 -0600

    [PATCH] Fix small bug in scsi_transport_spi
    
    Fix small bug in scsi_transport_spi
    
    "reserved" was being printed without a trailing \n.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a0338ea8ed46a8568a73ce3ea06db168d640eecb
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sat Mar 19 02:54:23 2005 -0600

    [PATCH] ncr53c8xx update
    
    ncr53c8xx update
    
    ncr-3.4.3g:
    
     - set the starget in slave_alloc instead of slave_configure to avoid
       problems with drives sending negotiation messages before we try to
       configure them.
     - Implement ->get_signalling.
     - Pass the scsi_cmnd to ncr_get_ccb() instead of the target & lun numbers
     - All ncr_show_msg() callers changed to use ncr_print_msg()
     - Combine ncr_show_msg() into ncr_print_msg()
     - Move ncr_print_msg() to near the top of the file and eliminate prototype
     - Change PRINT_ADDR() to take a fmt string
     - Make PRINT_ADDR use dev_info()
     - Eliminate PRINT_LUN -- all callers can use PRINT_ADDR or dev_info
     - Replace PRINT_TARGET() with a direct call to dev_info()
     - Whitespace cleanups
     - Get rid of superfluous ; after } of if/switch statements
     - Use IDENTIFY() instead of M_IDENTIFY | ...
     - Convert to use spi_display_xfer_agreement()
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 29ac0e39050b346ebe31ef0de909ec0af9f7fe25
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sat Mar 19 02:53:04 2005 -0600

    [PATCH] Zalon updates
    
    Zalon updates
    
     - Add KERN_INFO to printk
    Signed-off-by: Andrew McGregor <am@misk.net>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    
     - Remove iomem-related warnings
     - Improve printk message
     - Use cpu_relax()
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2de222d1e237211de94f99fa0757caaa988b5ca6
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sat Mar 19 02:47:37 2005 -0600

    [PATCH] Misc Lasi 700 fixes
    
    Misc Lasi 700 fixes
    
     - Use the DMA_32BIT_MASK constants when calling dma_set_mask()
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    
     - ioremap fixes
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f40bb34c043618cfbdcb07a0d35fe426a5911f46
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Sat Mar 19 00:46:45 2005 -0800

    [IPV4]: Size ip_mp_alg_table[] correctly.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 23ab5cfe76e26b73925a3dbcaf8fca4217e0e9cc
Author: Jens Axboe <axboe@suse.de>
Date:   Sat Mar 19 02:46:29 2005 -0600

    [PATCH] queue <-> sdev reference counting problem
    
    There is a problem with the way sdev is freed currently. The reason is
    really that there is a circular referencing problem: the sdev needs to
    hold on to the queue, but the queue (through the request function) also
    needs to hold on to the sdev.
    
    The easiest way to work-around this problem is to kill the sdev
    reference in the queue when the sdev is freed. On invocation of
    scsi_request_fn(), kill io to this device.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 285cace02a20e0097f52c3c046e916f1cb54078f
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sat Mar 19 02:45:29 2005 -0600

    atp870u DMA mask fix
    
    From: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Noted by James Bottomley
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 01945d9b23284f99d73830dd4765eb94948f38aa
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 19 00:45:16 2005 -0800

    [IPV4]: Check multipath ops func pointers against NULL.
    
    Multipath algorithms are not required to implement
    all of the methods.  Just the ones they need.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit afbbab598cf4fb9ea6b8b6c2186d8ea003010203
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sat Mar 19 02:39:40 2005 -0600

    atp870u: Re-merge cleanups
    
    From: Alan Cox <alan@lxorguk.ukuu.org.uk>
    
    This restores the Adrian Bunk and Al Viro cleanups that got trashed in
    the driver update. It also fixes a few formatting glitches and adds
    cpu_relax() calls to the polls spinning on the controller/bus.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit edfd24be9baa74381c3a848c6fb896c8ce010ba3
Merge: 5a971ed... cc8b6e4...
Author: Nathan Scott <nathans@sgi.com>
Date:   Sat Mar 19 13:34:21 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit ffb8a3cdfdd8be6a5870843361dae256db0c7f46
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Mar 18 17:10:40 2005 +0100

    [Bluetooth] Kill bt_sock_alloc() and its usage
    
    Kill bt_sock_alloc() function and make the derived socks have
    a struct bt_sock as its first member, so that the _pi() functions
    can just cast the struct sock pointer to its respective types,
    taking advantage of the fact that sk_alloc() now use kmalloc()
    when no slab is passed.
    
    This is another step, close to the final one, to kill sk_protinfo
    and make further planned changes possible.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit ece5c96e5b85cd78c5f3ebb5155216503eec3479
Merge: 4b6c18a... 85c5427...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Mar 18 07:25:03 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 4b6c18aed086c9153ffd147a344a6307f8847bcb
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 18 13:32:29 2005 -0600

    [CIFS] remove redundant null pointer checks before kfrees
    
    Signed-off-by: Jesper Juhl  (juhl-lkml@dif.dk)
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 382d3830e6cb81de223355a2d76b25066659a1e1
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 18 13:15:34 2005 -0600

    [CIFS] whitespace cleanups and source formatting improvements
    
    Signed-off-by: Jesper Juhl (juhl-lkml@dif.dk)
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit ce615e585ad640356dc724bb6d909acd3db007a7
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 18 12:50:27 2005 -0600

    [CIFS] remove sparse warnings
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 42549212c708296f390d19870fedbc830b2c03ae
Author: Steve French <stevef@smf-t23.(none)>
Date:   Fri Mar 18 10:52:54 2005 -0600

    [CIFS] handle passwords with multiple commas in them
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 9364f4e6f6b13f6a4ecadb7228e47d0c54e66ab6
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Mar 18 06:43:10 2005 -0800

    [SPARC64]: Kill g5 register usage from rtrap.S
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83652e914689e70807068584cdc0641e24748607
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Mar 18 06:30:06 2005 -0800

    [SPARC64]: Kill all smp_tune_scheduling(), totally unused.
    
    Kill off cheetah_tune_scheduling() as well.
    Adrian Bunk's changes made this all apparent.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b924054c151ac0055973eab9e12d0a63ff845690
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Mar 18 15:25:42 2005 +0100

    [Bluetooth] Fix session reference counting for RFCOMM
    
    When an incoming connection terminates, the signal DLC is never
    closed and thus the underlaying L2CAP connection stays open. This
    problem doesn't show up often, because most times the other side
    takes care of terminating the signal DLC.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit cba07b74fdda7ef1e26ae19c99c683b68ebb5d03
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Mar 18 06:22:06 2005 -0800

    [SPARC64]: Eliminate g5 register usage in semaphore support code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8542242e9097d8122fb151def4146af7aa21aeee
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Mar 18 15:21:52 2005 +0100

    [Bluetooth] Support HCI Extensions in BCSP driver
    
    To support the vendor specific HCI commands and events the BCSP
    drivers needs to convert these to BCSP packets for the correct
    channel.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 472cbaba6c565342d5af12d62f04ce2208ff9f43
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 18 06:11:36 2005 -0800

    Linux 2.6.11.5

commit 077999830a13edfe1ba2903a61d8aa299bca1fbc
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Fri Mar 18 05:47:12 2005 -0800

    [PATCH] Fix kernel panic on receive with WAN Hitachi SCA HD6457x
    
    Another patch for 2.6.11.x: already in main tree, fixes kernel panic on
    receive with WAN cards based on Hitachi SCA/SCA-II: N2, C101, PCI200SYN.
    The attached patch fixes NULL pointer dereference on RX.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8453cce7dd00ce7b128ab83d689fe711a2eb1dc9
Author: Andres Salomon <dilinger@debian.org>
Date:   Fri Mar 18 05:43:33 2005 -0800

    [PATCH] Possible VIA-Rhine free irq issue
    
    It seems to me that in the VIA Rhine device driver the requested irq might
    not be freed in case the alloc_ring() function fails. alloc_ring()
    can fail with a ENOMEM return value because of possible
    pci_alloc_consistent() failures.
    
    Updated to CodingStyle.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a1c8615455f8dfb5b27dc0c9cc660f1573e95b28
Author: Hugh Dickins <hugh@veritas.com>
Date:   Fri Mar 18 05:41:52 2005 -0800

    [PATCH] tasklist left locked
    
    On 4-way SMP, about one reboot in twenty hangs while killing processes:
    exit needs exclusive tasklist_lock, but something still holds read_lock.
    do_signal_stop race case misses unlock, and fixing it fixes the symptom.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d37d0fb8b484dabc41659b78d65905071ae68ca6
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Mar 18 05:40:56 2005 -0800

    [PATCH] : Fix check for underflow
    
    http://bugme.osdl.org/show_bug.cgi?id=4279
    Summary: When I try to start vpnc the net/core/skbuff.c:91 crash
    
    This check is wrong, gcc optimizes it away:
    
                    if ((len -= sizeof(pi)) > len)
    			return -EINVAL;
    
    This could be responsible for the BUG. If len is 2 or 3 and TUN_NO_PI
    isn't set it underflows. alloc_skb() allocates len + 2, which is 0 or
    1 byte. skb_reserve tries to reserve 2 bytes and things explode in
    skb_put.
    
    [TUN]: Fix check for underflow
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ad6be0768ccf8a8ae5d6ca2c3ef2057776db2a74
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Mar 18 05:39:03 2005 -0800

    [PATCH] [IPSEC]: Fix __xfrm_find_acq_byseq()
    
    This function, as it's name implies, is supposed to only
    return IPSEC objects which are in the XFRM_STATE_ACQ
    ("acquire") state.  But it returns any object with the
    matching sequence number.
    
    This is wrong and confuses IPSEC daemons to no end.
    
    [XFRM]: xfrm_find_acq_byseq should only return XFRM_STATE_ACQ states.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 858b4c713e16d724c21a51b0e11f78306dd43071
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Mar 18 05:37:15 2005 -0800

    [PATCH] Fix crash while reading /proc/net/route
    
    [IPV4]: Fix crash while reading /proc/net/route caused by stale pointers
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ecf4c2e11997f6a016effc84c0b576bb572ed13d
Author: Andres Salomon <dilinger@debian.org>
Date:   Fri Mar 18 05:32:44 2005 -0800

    [PATCH] Possible AMD8111e free irq issue
    
    It seems to me that if in the amd8111e_open() fuction dev->irq isn't
    zero and the irq request succeeds it might not get released anymore.
    
    Specifically, on failure of the amd8111e_restart() call the function
    returns -ENOMEM without releasing the irq. The amd8111e_restart()
    function can fail because of various pci_alloc_consistent() and
    dev_alloc_skb() calls in amd8111e_init_ring() which is being
    called by amd8111e_restart.
    
    1374     if(dev->irq ==0 || request_irq(dev->irq, amd8111e_interrupt, SA_SHIRQ,
    1375                      dev->name, dev))
    1376         return -EAGAIN;
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 31c31824b219f5bc84b0853c02e48a1e4274661e
Author: Daniel Drake <dsd@gentoo.org>
Date:   Fri Mar 18 05:32:08 2005 -0800

    [PATCH] Fix stereo mutes on Surround volume control
    
    As of 2.6.11, I have no output out of the rear right speaker of my 4.1
    surround sound setup. I am using snd-intel8x0 based on a Realtek ALC650F chip
    on an nvidia motherboard.
    
    A gentoo user with completely different hardware also ran into this:
    http://bugs.gentoo.org/84276
    
    2.6.11-mm3 fixes this problem and I've identified the specific fix, which is
    already in the ALSA development tree. An ALSA developer asked me to submit the
    fix for 2.6.11.x when I'd found it, so here it is :)
    
    --
    AC97 Codec
    Fix stereo mutes on Surround volume control.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0b169d2fde1a46536eb49b6e95884f7fa4edadf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 18 05:30:08 2005 -0800

    [PATCH] NetROM locking
    
    Fix deadlock in NetROM due to double locking.  I was sent the patch by
    Alan and have doublechecked it.  This bug hits Net/ROM users really hard.
    It's accepted by DaveM - but just too late to make it into 2.6.11.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 85c542719ab908b136eb235614e4bc664a9030ba
Merge: 14ad7e5... d96cf37...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Thu Mar 17 23:39:34 2005 -0800

    Merge http://lia64.bkbits.net/linux-ia64-release-2.6.12
    into evo.osdl.org:/home/torvalds/v2.6/linux

commit d96cf377c2d8e4711f3655ea37efaf1c3d10aa2e
Merge: 63c0f26... 4fc885d...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 17 23:18:01 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/17
    into intel.com:/data/home/aegl/BK/linux-ia64-release-2.6.12

commit 4fc885d74a21298e7afaa756b740684b9b6190ec
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 17 23:17:04 2005 -0800

    [IA64] Another fix for pgd_addr_end (last one was wrong).
    
    I confused the hole in the middle of a region when an implementation of
    the Itanium architecture doesn't implement all the virtual address bits
    with the actual layout in Linux.  Linux doesn't put a hole in the middle
    of the region, it stacks all the address space that the page tables can
    reference at the start of the region.
    
    Thanks to Dave Miller (again) and Peter Chubb.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 56a91e5fe84e01c725895fbf88be6c7a79b7acfc
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 17 23:08:47 2005 -0800

    [PATCH] USBcore updates
    
    This is the first of five updates to usbcore:
    
    	Merge the hcd_register_root macro with the usb_register_root_hub
    	function.  This is part of the ongoing campaign to flatten out
    	the hcd glue layer.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ad979299f6e97d057ca75a1cbdfc991f3543e48
Author: Olaf Hering <olh@suse.de>
Date:   Thu Mar 17 21:56:40 2005 -0800

    [PATCH] USB: another broken usb floppy
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5f7539f6b5f4b3fd9345e877ad8bdc0faad4d7d3
Author: Phil Dibowitz <phil@ipom.com>
Date:   Thu Mar 17 21:51:56 2005 -0800

    [PATCH] USB unusual_devs: add another datafab device
    
    The following was reported by Josef Reisinger
    <josef.reisinger@netcologne.de>. This entry allows the device to be
    found and prevents it from showing up twice.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1c7f7c20d1235891f4616c7b934018bb2254bf3
Author: Phil Dibowitz <phil@ipom.com>
Date:   Thu Mar 17 21:51:36 2005 -0800

    [PATCH] USB unusual_devs: Add another Tekom entry
    
    This patch adds support for Another "Tekom 300" camera - or more
    specifically a BenQ DC5330.
    
    Versions of this patch were submitted by both Frank Copeland
    <fjc@thingy.apana.org.au> and Manuel Fombuena <mfombuena@ya.com> - but
    neither were quite right, so I've tweaked it accordingly.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 164a31d0cb669095d11d24d3478582806b663453
Author: gmenguez@usuarios.retecal.es <gmenguez@usuarios.retecal.es>
Date:   Thu Mar 17 21:51:17 2005 -0800

    [PATCH] USB: Support for new ipod mini (and possibly others) + usb
    
    Just a little patch to unusual_devs.h in usb-storage in order to support
    new ipods mini (ie. the new 6 gig model) and possibly other new big
    models reported to have problems through usb in linux 2.6.
    
    
    From: Guillermo Menguez Alvarez <gmenguez@usuarios.retecal.es>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 14ad7e5aac21ef18ce52ab643cb14f1e141f6026
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Mar 17 21:46:48 2005 -0800

    [PATCH] s390: oprofile support
    
    Remove experimental tag from the s390 oprofile support.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f63a409ee53bc8870007398c61c9954f6466a6b
Author: Peter Tiedemann <ptiedem@de.ibm.com>
Date:   Thu Mar 17 21:46:29 2005 -0800

    [PATCH] s390: ctc buffer size
    
    ctc network driver changes:
     - Allow to change the ctc buffer size while ctc is offline.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a67d57a805f1fd6533a3ad7b345c929c5860ba5a
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Mar 17 21:46:10 2005 -0800

    [PATCH] s390: missing timer ticks
    
    s390 core changes:
     - Fix missing timer ticks.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0f425e512bae0ba4eec327b3b7bf7f70141b614
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Thu Mar 17 21:45:52 2005 -0800

    [PATCH] s390: s390dbf permissions
    
    Use more specific permissions for the procfiles if s390dbf.  Read only views
    should have read permission, write only views should have write permission.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c128de640c103beaab6aa9ea2a289078aca300e
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Thu Mar 17 21:45:31 2005 -0800

    [PATCH] s390: device unregistering
    
    Common i/o layer changes:
     - Don't unregister devices from ccw_device_{on,off}line_notoper directly,
       but put the unregister on the ccw_device_work workqueue (as it is done
       for all other unregisters).
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b36fa7671cb8784ea8463e3ca705cc2ab4cbacda
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Mar 17 21:45:12 2005 -0800

    [PATCH] s390: add run_posix_cpu_timers to account_user_vtime
    
    The posix-timers patch introduces a call to run_posix_cpu_timers in
    update_process_times.  The same call is required in the s390 private
    account_user_vtime function as well.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ce4ef705b07befed793098c473ee454002c1a37
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Mar 17 21:44:55 2005 -0800

    [PATCH] s390: define atomic_sub_return
    
    Add missing atomic_sub_return for skb_release_data.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35b0c952520c468976a8f87bfefbca65ed52e714
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Mar 17 21:44:36 2005 -0800

    [PATCH] s390: system calls
    
    s390 system call fixes:
     - Add missing waitid and remap_file_pages system calls to s390.
     - Keep consistent naming scheme xxx_wrapper in compat_wrapper.S.
     - Remove #undef of __NR_getdents64 for 64 bit. The system call is
       present for 64 bit (linux_getdents and linux_getdents64 differ).
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d19081ed25cb18901a0ae95d9695e5427ac01c2
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Mar 17 21:44:18 2005 -0800

    [PATCH] mips: convert a remaining verify_area to access_ok
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3c03becb4ffc9ab78733b35f091e0ef8cb0a4eb
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:44:00 2005 -0800

    [PATCH] ppc64: allow xmon=on,off,early
    
    allow 'xmon' or 'xmon=early' to enter xmon very early during boot.  allow
    'xmon=on' to just enable it, or 'xmon=off' to disable it.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b8d5386bfe14021f22557670b9dc6ea3fb2c5b9
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:43:42 2005 -0800

    [PATCH] ppc64: fix error cases in nvram partition scan
    
    The NVRAM on pSeries machines and powermacs is structured as a series of
    partitions, each of which has a header containing its length (including the
    header) and a header checksum.  When the checksum was wrong or the length
    was zero, we would previously keep trying to scan through the partitions,
    possibly looping forever if the length was zero.  This patch changes the
    behaviour to terminate the scan when a corrupted partition is found.
    
    Signed-off-by: Utz Bacher <utz.bacher@de.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2503f7622b79edf8174d30a82f2c11ec40e3ab73
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:43:21 2005 -0800

    [PATCH] ppc64: remove unnecessary ISA ioports
    
    During boot, pSeries_request_regions() should only request I/O ports for
    legacy ISA in the case that ISA exists on the system.  Add a check for
    this.  This patch was suggested by Anton.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41257851fc6802fba26a3c4a0c6fdf9c41dc01ae
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:43:04 2005 -0800

    [PATCH] ppc64: make cpu hotplug play well with maxcpus and smt-enabled
    
    This patch allows you to boot a pSeries system with maxcpus=x or
    smt-enabled=off (or both) and bring up the offline cpus later from userspace,
    assuming the kernel was built with CONFIG_HOTPLUG_CPU=y.
    
    - Record cpus which were started from OF in a cpu map and use that instead
      of system_state to decide how to start a cpu in smp_startup_cpu.
    
    - Change the smp bootup logic slightly so that the path for bringing up
      secondary threads is exactly the same as hotplugging a cpu later from
      userspace.
    
    - Add a new function to smp_ops - cpu_bootable.  This is implemented only by
      pSeries to filter out secondary threads during boot with smt-enabled=off.
      Another way this could be done is to change the kick_cpu member to return
      int and we can check for this case in smp_pSeries_kick_cpu.
    
    - Remove the games we play with cpu_present_map and the
      hard_smp_processor_id to handle smt-enabled=off, since they're now
      unnecessary.
    
    - Remove find_physical_cpu_to_start; assigning threads to logical slots
      should be done at bootup and at DLPAR time, not during a cpu online
      operation.
    
    One caveat: you need up-to-date firmware on Power5 for the maxcpus option to
    work on systems with more than one processor.  Otherwise interrupts get
    misrouted, typically resulting in hangs or "unable to find root filesystem"
    problems.
    
    Tested on Power5 with and without CONFIG_HOTPLUG_CPU and with various
    combinations of the maxcpus= and smt-enabled= parameters.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 344dd663bfba29a92f316a537d853ca90c61a903
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:42:41 2005 -0800

    [PATCH] ppc64: use pSeries reconfig notifier for cpu DLPAR
    
    Use the pSeries_reconfig notifier API to handle processor addition and removal
    on pSeries LPAR.  This is the "right" way to do it, as opposed to setting
    cpu_present_map = cpu_possible_map at boot (this is fixed in a following
    patch).
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d348db16f14927cd93a5072c79cc2f8828e33b2
Author: Olaf Hering <olh@suse.de>
Date:   Thu Mar 17 21:42:16 2005 -0800

    [PATCH] ppc64: missing newline/carrige return in zImage
    
    Some eyecandy for zImage and zImage.initrd.
    
    Most OF implementations do not print a newline after their last line of
    output, so the "zImage starting..." appears right after the last number or
    netboot output.
    
    A zImage.initrd misses a carrige return to avoid a staircase effect.
    
    Tested on JS20.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2226501f30a97a236353e63b6ed632be94e07fb6
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:41:56 2005 -0800

    [PATCH] ppc64: thermal control for Xserve
    
    This patch adds support for Xserve G5 to the thermal control driver.  It
    also adds a few updates to the desktop G5 code based from changes Apple did
    to their own drivers.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff034c52942b20b3409329d6943812d87de5bf4c
Author: Mike Kravetz <kravetz@us.ibm.com>
Date:   Thu Mar 17 21:41:39 2005 -0800

    [PATCH] ppc64: NUMA memory fixup (another try)
    
    Below is a new version of the patch that allows holes within nodes on ppc64
    NUMA.  I would appreciate it if someone familiar with OF device tree
    parsing could take a look at this part of the code.  So far, I've gotten
    this wrong twice.  Patch was tested in various configurations on a G5 and
    OpenPower 720.
    
    Signed-off-by: Mike Kravetz <kravetz@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc60a245e46a6e51bdd2377fa791c7c46b89ca25
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Mar 17 21:41:20 2005 -0800

    [PATCH] ppc64 iSeries: cleanup iSeries_setup
    
    This patch does some trivial cleanups on iSeries_setup.[ch]:
    	- eliminiate warning about iommu_init_early_iSeries not being
    	  declared
    	- remove trailing whitespace
    	- change some functions to static
    	- remove defunct function declarations
    
    Built and booted on iSeries.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d87baebc6ede0988d102bb5c9538baca655734cd
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Mar 17 21:41:02 2005 -0800

    [PATCH] ppc64 iSeries: cleanup viopath
    
    I figured I might as well do some simple cleanups.  This patch does:
    
    - single bit int bitfields are a bit suspect and Anndrew pointed out
      recently that they are probably slower to access than ints
    
    - get rid of some more studly caps
    
    - define the semaphore and the atomic in struct alloc_parms rather than
      pointers to them since we just allocate them on the stack anyway.
    
    - one small white space cleanup
    
    - use the HvLpIndexInvalid constant instead of ita value
    
    Built and booted on iSeries (which is the only place it is used).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44edbb53e013d46e223404adfc0a18a0585a2d51
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:40:44 2005 -0800

    [PATCH] ppc64: delete unused file iSeries_fixup.h
    
    This patch is from Domen Puncer <domen@coderock.org>.
    
    Remove nowhere referenced file. (egrep "filename\." didn't find anything)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5517d0c9833c4e443f8c51bae52842086344ecc2
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:40:25 2005 -0800

    [PATCH] ppc64: delete unused file no_initrd.c
    
    This patch is from Domen Puncer <domen@coderock.org>.
    
    Remove nowhere referenced file. (egrep "filename\." didn't find anything)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fc04a7c59c8ac32478632e2a33a38b107654c47
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Mar 17 21:40:24 2005 -0800

    [PATCH] emi26: add another product ID for the Emi2|6/A26
    
    This adds the product ID for another hardware revision of the Emi 2|6.
    Except for the ID, this device behaves the same and uses the same
    firmware.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5bdc0f3688855348d66dd6608a48dbc1e443ef80
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:40:06 2005 -0800

    [PATCH] ppc64: make RTAS code usable on non-pSeries machines
    
    This patch is from Arnd Bergmann <arnd@arndb.de>.
    
    RTAS is not actually pSeries specific, but some PPC64 code that relies on RTAS
    is currently protected by CONFIG_PPC_PSERIES.
    
    This introduces a generic configuration option PPC_RTAS that can be used by
    other subarchitectures as well.  The existing option with the same name is
    renamed to the more specific RTAS_PROC.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23059ed10b3d4b38eae88caada36c26594a9e90b
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:39:47 2005 -0800

    [PATCH] ppc64: kill might_sleep() warnings in __copy_*_user_inatomic
    
    This patch is from Arnd Bergmann and Olof Johansson.
    
    This implements the __copy_{to,from}_user_inatomic() functions on ppc64.  The
    only difference between the inatomic and regular version is that inatomic does
    not call might_sleep() to detect possible faults while holding locks/elevated
    preempt counts.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7b85e37f7488338f67db240da568d828fdd625b
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 17 21:39:27 2005 -0800

    [PATCH] ppc64: fix kprobes calling smp_processor_id when preemptible
    
    When booting with kprobes and preemption both enabled and
    CONFIG_DEBUG_PREEMPT=y, I get lots of warnings about smp_processor_id being
    called in preemptible code, from kprobe_exceptions_notify.  On ppc64,
    interrupts and preemption are not disabled in the handlers for most
    synchronous exceptions such as breakpoints and page faults (interrupts are
    disabled in the very early exception entry code but are reenabled before
    calling the C handler).
    
    This patch adds a preempt_disable/enable pair to kprobe_exceptions_notify,
    and moves the preempt_disable() in kprobe_handler() to be done only in the
    case where we are about to single-step an instruction.  This eliminates the
    bug warnings.
    
    From: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    
    The patch is fine, but it seems to break jprobes - we have an unbalanced
    preempt_enable/disable path while handling jprobes. Patch below is
    against 2.6.11-mm4 and fixes the issue.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03b35b562570805b89477440565f49d7b508e6f4
Author: Brian Waite <waite@skycomputers.com>
Date:   Thu Mar 17 21:39:10 2005 -0800

    [PATCH] ppc32: add support for Sky Computers HDPU Compute blade enhanced features
    
    The Sky Computers HDPU compute blade is an embedded compute platform for
    the Sky Computers SMARTpac 600/1200 series.  The blade consists of
    ppc7445/ppc7447A UP or SMP, Marvell Discovery II, 100 BaseT ethernet, a
    single PCI/PCI-X slot, and a PCI-X on-board Infiniband device.
    
    This patch contains drivers for enhanced features of the HDPU compute
    blade.  Namely, 2 drivers for registers used by the Health monitoring
    co-processor.  The cpustate register is a write only register used to
    convey critical states to the health monitor and the nexus registers
    provides a read-only interface from the health monitoring system to provide
    location based information.
    
    Signed-off-by: Brian Waite <waite@skycomputers.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9e020ce3d60532e0ba41d5c6cecd58f6c371ab4
Author: Nathan T. Lynch <ntl@pobox.com>
Date:   Thu Mar 17 21:38:51 2005 -0800

    [PATCH] ppc64: rtasd shouldn't hold cpucontrol while sleeping
    
    The rtasd thread should not hold the cpucontrol semaphore while sleeping
    between event scans in its first pass; it needlessly delays boot by one
    second per cpu when CONFIG_HOTPLUG_CPU=y.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 178d9f1c4b575b3b846ac97160ffb7446823aa14
Author: Brian Waite <waite@skycomputers.com>
Date:   Thu Mar 17 21:38:22 2005 -0800

    [PATCH] ppc32: add support for Sky Computers HDPU Compute blade
    
    The Sky Computers HDPU compute blade is an embedded compute platform for
    the Sky Computers SMARTpac 600/1200 series.  A blade consists of
    ppc7445/ppc7447A, Marvell Discovery II, 100 BaseT ethernet, a single
    PCI/PCI-X slot, and a PCI-X on-board Infiniband device.
    
    This patch contains the base platform support required for booting Linux.
    
    Signed-off-by: Brian Waite <waite@skycomputers.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edf4ecc8a3f3800c2026c0ddd74fb6285a6b5acd
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Thu Mar 17 21:37:48 2005 -0800

    [PATCH] ppc32: sparse clean ups for the Freescale MPC52xx related code
    
    These clean-ups are mainly missing __iomem qualifier, unnecessary (and
    'wrong') casting, missing static.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f1ce6af95b6ea3d94d9ed710fc6cb86b0000013
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:37:25 2005 -0800

    [PATCH] ppc32: Add pegasos ethernet support
    
    This patch declares the necessary platform device on the pegasos platform
    so that the mv643xx eth driver can be used on it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Sven Luther <sven.luther@wanadoo.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de518a531a2e61ff63c59bd6de2d1e345f43ed3f
Author: Sylvain Munaut <tnt@246tnt.com>
Date:   Thu Mar 17 21:37:05 2005 -0800

    [PATCH] ppc32: Add PCI bus support for Freescale MPC52xx
    
    Note that this support has "known" problem but theses are believed to be
    due to hardware issues.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13f884a46a09705e02f2cb827626428e7f4da7bf
Author: Kumar Gala <galak@freescale.com>
Date:   Thu Mar 17 21:36:44 2005 -0800

    [PATCH] ppc32: Fix FEC ethernet intialization on MPC8540 ADS board
    
    The PHY interrupt for the DM9121 PHY connected to the FEC ethernet port
    does not work on the MPC8540 ADS board.  If we tell the driver that the PHY
    does not have an interrupt the FEC works properly on the MPC8540 ADS board.
    
    Signed-off-by: Roy Zang
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4379ccbdd63f254683de37794118ff81e5b756c
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Thu Mar 17 21:36:24 2005 -0800

    [PATCH] ppc32: Clean up mv64x60 bootwrapper support
    
    This patch removes the call to mv64x60_init() in
    arch/ppc/boot/simple/head.S and now uses the 'load_kernel()' hook to call
    to have mv64x60-specific code called.  This means that the mv64x60 code
    will be called after the bootwrapper has relocated itself.  The platforms
    affected by this change are updated by this patch as well.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c736e58673dd38c41c0462c905f6b86f9fbe9f1
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Thu Mar 17 21:35:33 2005 -0800

    [PATCH] ppc32: update Radstone ppc7d platform
    
    - Recent mv643xx #define name changes broke the PPC7D platform compile.
      Fixed by this patch.
    
    - Change default platform config to add mv643xx_eth and mv64xxx-i2c
      config options.
    
    - Add i2c platform data and update to cope with recent platform device
      name change.
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8701c5b6b1d45731ee1ff5a37773bd089908cf29
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Thu Mar 17 21:35:15 2005 -0800

    [PATCH] ppc32: Patch for changed dev->bus_id format
    
    - Recent changes to drivers/base/platform.c:platform_device_register()
      changed the format of dev->bus_id (there is now a '.' between the name &
      instance (e.g., the old mpsc0 is now mpsc.0)).  This field is used by
      some platform's platform_notify() routine to identify the dev entry.
      This patch updates the bus_id value compared to include the dot.
    
    - Fix an bad macro name change by a previous patch.
    
    - Some coding style fixups, etc.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffd094ae379e94eca3ed12a220b20888790dcc4b
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:34:57 2005 -0800

    [PATCH] ppc32: Update 8260_io/fcc_enet.c to function again
    
    There's too many things in here that've sat too long (I'd been hoping to
    just delete the driver, but that hasn't happened yet, so).  A cobbled
    together list of changes is:
    
    - Update MDIO support for workqueues.
    - Make use of <linux/mii.h>
    - Add RPX6 support.
    - Comment out set_multicast_list (broken).
    - Rework tx_ring stuff so we have tx_free, not tx_Full/n_pkts.
    - Other PHY updates/fixes.
    - Leo Li: Rework FCC clock configuration, make it easier.
    - 2.4 : VLAN header room, other misc bits.
    - Kill MII_REG_NNN in favor of defines from <linux/mii.h>
    - DM9161 PHY support (2.4, Myself & alebas@televes.com)
    - PQ2ADS and PQ2FADS support bits (Myself & alebas@televes.com
    
    From: Leo Li <leoli@freescale.com>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Alexandre Bastos <alebas@televes.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40d10bb1f693bb97873b53c0c4e36a68bbfe829f
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:34:37 2005 -0800

    [PATCH] ppc32: Fix a typo on 8260
    
    This fixes a lingering typo in arch/ppc/boot/simple/m8260_tty.c
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d36ae4dfbcbd4ca3cf735a4a2e62f1e0b68019e3
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:34:08 2005 -0800

    [PATCH] ppc32: Serial fix for PAL4
    
    Add PAL4's bit to <asm-ppc/serial.h>
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0291261454c33a711f201bc94f1e855262988420
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:33:38 2005 -0800

    [PATCH] ppc32: Better comment arch/ppc/syslib/cpc700.h
    
    This adds better comments to arch/ppc/syslib/cpc700.h
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cfbee2e69e7397c2f460f4dea4080c958e1697a
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:33:17 2005 -0800

    [PATCH] ppc32: Lindent include/asm-ppc/dma.h
    
    This originally came from Paul, back in July of 2003.  Run Lindent over
    include/asm-ppc/dma.h
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc58f3a5d2e711ecdab3a06e3886726ff6413bcc
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:32:53 2005 -0800

    [PATCH] ppc32: Delete arch/ppc/syslib/ppc4xx_serial.c
    
    arch/ppc/syslib/ppc4xx_serial.c is unused cruft, delete.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b00f3ed9c43a08ca834269574ec865cf82b09190
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Mar 17 21:32:35 2005 -0800

    [PATCH] ppc32: Fix a warning in planb video driver
    
    [ aside: This has been sitting in the linuxppc-2.5 bk tree for I don't
      know how long.  And the driver is still horribly broken. ]
    
    The following patch moves overlay_is_active to before its first use.  It
    was originally written when gcc wouldn't complain, but now does, about not
    having the definition before usage.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09b4d02cc9de24695e2f566e0980874da073a1a1
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:32:14 2005 -0800

    [PATCH] ppc32: Add virtual DMA support to legacy floppy driver
    
    This patch adds support for pseudo-dma transfers on ppc32 for the legacy
    floppy driver.  It is useful on some machines like pegasos where the legacy
    DMA doesn't seem to work properly (possibly to the lack of a "legacy" DMA zone
    on ppc32).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Pavel Fedin <sonic_amiga@rambler.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79efaf90c9630d6e51f961b688f84389f3b2d9d6
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:31:55 2005 -0800

    [PATCH] ppc32: Update PowerMac models table
    
    This patch updates the table of PowerMac models, adding the Mac mini, a few
    missing ones in older slots too, and sorts it in a more logical way.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ee4caae632db869c6869973c8e70ee1fa0ed23c
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:31:36 2005 -0800

    [PATCH] ppc32: Fix overflow in cpuinfo freq. display
    
    The CPU frequency in /proc/cpuinfo would overflow because of a signed/unsigned
    bug.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8f4a94689e2d36f233e43464198905da7ae5c17
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 17 21:31:16 2005 -0800

    [PATCH] ppc32: Fix PowerMac cpufreq for newer machines
    
    This patch fixes the cpufreq support for newer machines, including latest
    Apple laptops using the 7447A CPU.  With this patch, it should now
    propertly detect that the CPU is booting low speed on some models, and let
    you switch it to full speed (previously, /proc/cpuinfo would display the
    frequency of the full speed CPU but it was really running low speed).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 673cbd11c787e8acfb2a79def6d67e1fa1c2648d
Merge: abb670e... 94c3085...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Thu Mar 17 21:24:17 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into evo.osdl.org:/home/torvalds/v2.6/linux

commit 94c3085377ee20c2e7e6780d96c8cb39be11c0db
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:45:06 2005 -0800

    [NET]: Make dst_allfrag use dst instead of dst->path
    
    > BTW, shouldn't dst_allfrag be called dst_path_allfrag?
    
    Rather than doing that, let's make the path usage explicit in
    the one place that it's needed (the same place where we use
    dst_mtu(dst->path)).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b5d04023a3b81bd10d7859f338f64bbf10e2d26d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:43:40 2005 -0800

    [NET]: Kill dst_pmtu/dst_path_metric
    
    This would have been the patch that removed dst->path.  But
    ip_append_data got in the way :)
    
    However, using dst->path is only needed rarely and should always
    require a bit of deliberation.  So let's get rid of dst_pmtu
    and dst_path_metric and use dst_mtu and dst_metric directly.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 775563eff1181489871ebc05ec9f054431686693
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:42:32 2005 -0800

    [NET]: Kill unnecessary uses of dst_path_metric
    
    This gets rid of the last unnecessary use of dst_path_metric.  In
    decnet dst->path is always equal to dst.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1ea3ad39d2d7d3e7437964ab166b957d9ff8abd
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:41:41 2005 -0800

    [IPSEC]: Get ttl from child instead of path
    
    Now that dst_pmtu is almost gone let's do the same to dst_path_metric.
    I've only found one legitimate use of it and that's the one that was
    recently added in dst_allfrag.
    
    This patch makes xfrm4_encap/xfrm6_encap use dst->child instead of
    dst->path so that we choose the correct route to get the hoplimit
    from when nested tunnels are present.
    
    For simple tunnels dst->child == dst->path so there is no change.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15d51267ba9c4505c04c3a7c7d269d7f88079fec
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:39:12 2005 -0800

    [IPV4]: Kill remaining unnecessary uses of dst_pmtu
    
    Once again here is a couple of trivial dst_pmtu/dst_mtu replacements.
    In both locations, we can only have simple dst entries which means
    that dst == dst->path.
    
    BTW, this is the rule that we should apply in future for uses of
    dst_mtu/dst_pmtu (or other metrics on dst).  If the only dst's that
    can appear are simple dst's (dst == dst->path), then we should use
    dst_mtu or dst_metric.  If dst != dst->path, then whoever is writing
    the code will need to think about which of dst or dst->path is the
    right one.
    
    In most instances dst will be the one.  However, as we have seen in
    ip_append_data, dst->path may be needed rarely.  In particular, if
    we're doing fragmentation immediately after IPsec, then you may need
    it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f6d990dae5179aa565881021d597aec4cad9170
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:37:41 2005 -0800

    [NETFILTER]: Use correct IPSEC MTU in TCPMSS
    
    This patch makes ipt_TCPMSS use the correct MTU value for clamping.
    This is a bit tricky actually since TCPMSS can be used in FORWARD,
    LOCAL_OUT as well as POST_ROUTING.
    
    In the first two cases we haven't performed IPsec yet so dst_mtu
    obviously does the right thing.  As it is, POST_ROUTING is performed
    after xfrm_output so MSS clamping is useless there.
    
    With Patrick's IPsec netfilter stuff, there will be a POST_ROUTING
    processing before IPsec processing, in which case dst_mtu also returns
    exactly what we want.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0675727e0a6d8b61358ebf6e20581e7beaac4276
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 17 18:36:23 2005 -0800

    [IPV4]: Fix MTU check in ipmr_queue_xmit
    
    Somehow I missed four files with dst_pmtu usages in them.  I'm going
    to split them along the sames lines I did before: bug fixes and then
    the trivial changes.
    
    Here is a patch that replaces dst_pmtu with dst_pmtu in ipmr.c
    since this is straight IPIP tunneling equivalent to what we have
    in ipip.c.
    
    As it is we may send ICMP packets when IPsec is present which is
    exactly what the comment says that we shouldn't do.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a2be59a8bde3a5293a119ae0eb97b7db8aaf6f9
Author: Sven Henkel <shenkel@gmail.com>
Date:   Thu Mar 17 18:34:53 2005 -0800

    [TUN]: Align only ethernet packets to NET_IP_ALIGN.
    
    Signed-off-by: Sven Henkel <shenkel@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a4b673ca54cf5cb2814b65edb5b7a1312964ede1
Author: Sven Henkel <shenkel@gmail.com>
Date:   Thu Mar 17 18:30:20 2005 -0800

    [NETPOLL]: Align UDP packets to NET_IP_ALIGN.
    
    This avoids unnecessary alignment traps on some
    platforms.
    
    Signed-off-by: Sven Henkel <shenkel@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abb670e9c5b9ad0d991294406be859aaf1f8bfb0
Merge: a346723... 71a7c96...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 17 17:17:11 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a5091ba0e5ae5514ee72bda8bf03cf42531206c7
Merge: 3463bb5... 227da3e...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 17 17:07:35 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/network-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 3463bb5df64b6f7bbab8f277eb3aad4c3802d41d
Merge: ffb8a3c... ded97b8...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 17 17:00:35 2005 -0800

    Merge http://linux-mh.bkbits.net/bluetooth-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit a346723eca131f55890adbd67a67e24fb7176f51
Merge: 8041dfd... 227da3e...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 17 16:46:13 2005 -0800

    Merge bk://bart.bkbits.net/ide-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 8041dfd0b09c8ef65bbbbed2480ee70b968b1993
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 14:06:33 2005 +0100

    [ide] ide-tape: fix character device ->open() vs ->cleanup() race
    
    Similar to the same race but for the block device.
    
    * store pointer to struct ide_tape_obj in idetape_chrdevs[]
    * rename idetape_chrdevs[] to idetape_devs[] and kill idetape_chrdev_t
    * add ide_tape_chrdev_get() for getting reference to the tape
    * store tape pointer in file->private_data and fix all users of it
    * fix idetape_chrdev_{open,release}() to get/put reference to the tape
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit df792a6aaefd0892853406ebeae2cea90afd17c6
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 14:05:37 2005 +0100

    [ide] ide-scsi: add basic refcounting
    
    * pointers to a SCSI host and a drive are added to idescsi_scsi_t
    * pointer to the SCSI host is stored in disk->private_data
    * ide_scsi_{get,put}() is used to {get,put} reference to the SCSI host
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 3569c405a0c9c5cb314c679d46d826c9d845c919
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 14:01:47 2005 +0100

    [ide] ide-tape: add basic refcounting
    
    Similar changes as for ide-cd.c.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit b1098accddc919e7549e994a0db936cc52a63cfa
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 13:59:51 2005 +0100

    [ide] ide-floppy: add basic refcounting
    
    Similar changes as for ide-cd.c.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 863b82917ca80e375d2fe88cb903787193ee38a2
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 13:57:25 2005 +0100

    [ide] ide-disk: add basic refcounting
    
    Similar changes as for ide-cd.c (except that struct ide_disk_obj is added).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 9c27fd4f8acf682b0fc2f158f49786adc413932e
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 13:54:40 2005 +0100

    [ide] ide-cd: add basic refcounting
    
    * based on reference counting in drivers/scsi/{sd,sr}.c
    * fixes race between ->open() and ->cleanup() (ide_unregister_subdriver()
      tests for drive->usage != 0 but there is no protection against new users)
    * struct kref and pointer to a drive are added to struct ide_cdrom_info
    * pointer to drive's struct ide_cdrom_info is stored in disk->private_data
    * ide_cd_{get,put}() is used to {get,put} reference to struct ide_cdrom_info
    * ide_cd_release() is a release method for struct ide_cdrom_info
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 89fec8aa5ae8df4a896a8bc069f59cd8b5363645
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Fri Mar 18 13:51:25 2005 +0100

    [ide] make ide_generic_ioctl() take ide_drive_t * as an argument
    
    As a result disk->private_data can be used by device drivers now.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 097e82f6b7a9db43c313d7cfa1a5478b202d1335
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 18 13:45:52 2005 +0100

    [ide] hdio.txt update
    
    This patch updates Documentation/ioctl/hdio.txt to include more
    detailed descriptions about HDIO_DRIVE_{CMD|TASK|TASKFILE} ioctls.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 42efdda5ae77f4f290e3f018f579d89dc35a7b31
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Fri Mar 18 13:42:11 2005 +0100

    [ide] drivers/ide/cs5520.c: use the DMA_{64,32}BIT_MASK constants
    
    Description: Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h
    when calling pci_set_dma_mask() or pci_set_consistent_dma_mask()
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit da6db96d82f9e3628f3c82e1248b95368dee199b
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Fri Mar 18 13:36:11 2005 +0100

    [ide] pci_ids.h correction for Intel ICH7R
    
    This patch removes an incorrect ICH7R DID in pci_ids.h.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit a80b9dc0361c9aa775069a8ffbdb3f0538c14a42
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Mar 18 00:10:10 2005 +0000

    [ARM PATCH] 2561/1: CL7500 - core.c init call should be void
    
    Patch from Ben Dooks
    
    The init call should not return anything
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0cca2880b7cc78501628074afb890b1b25e27702
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Mar 18 00:03:02 2005 +0000

    [ARM PATCH] 2559/1: CL7500 - fix `__iomem` on VIDC_BASE
    
    Patch from Ben Dooks
    
    Add __iomem to VIDC_BASE
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 227da3edcee43e6b1032f129835cf4a74df9f10a
Author: Martin Waitz <tali@admingilde.org>
Date:   Thu Mar 17 16:01:17 2005 -0800

    [PATCH] docbook: fix escaping of kernel-doc
    
    This fixes a bug I introduced with the last patches of the DocBook
    generation.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3147aa8b2e611373a3605a0cf41aea94a26badd
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Thu Mar 17 16:01:00 2005 -0800

    [PATCH] uml: Fix compilation due to mismerge.
    
    The recent slew of UML updates that appeared in BK seems to have gone
    wrong somewhere.  The file "arch/um/kernel/syscall_user.c" contains
    identical content twice over, thus breaking compilation.
    
    Below is a patch to fix this.  Please apply.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f592955e5f09ffca2c882f2a628348322d3636c4
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Thu Mar 17 23:54:43 2005 +0000

    [ARM PATCH] 2555/1: i.MX DMA fix
    
    Patch from Sascha Hauer
    
    This patch fixes the dma interrupt acknowledge as mentioned by Nicolas
    Pitre here:
    http://lists.arm.linux.org.uk/pipermail/linux-arm-kernel/2005-March/027349.html
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ad21379fc4cde08d53128697acc27a40f468813c
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:52:44 2005 -0800

    [PATCH] m68k-nommu: remove vendor/board specific startup code
    
    Remove all board specific startup code files. Code has been merged
    into a much smaller set of common code for each CPU class type,
    so that is 3 types now.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9f287322641988568704448f008ba09cfad1521
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:52:22 2005 -0800

    [PATCH] m68k-nommu: move PILOT platform startup code
    
    Create more common 68328 startup code for the PILOT platform.
    It requires some unique setup from boot, that no other platform
    requires. This is part of the re-organization of the start up
    code to make more if it common.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3156b56a45c7d18baa0f6daf3c912f443843e66d
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:52:05 2005 -0800

    [PATCH] m68k-nommu: create common 68328 RAM based startup code
    
    Create common 68328 startup code for the ram based platforms.
    This is part of the re-organization of the start up code to
    make more if it common.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bb5cc727ec414332369121804bf56e12325c238
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:51:48 2005 -0800

    [PATCH] m68k-nommu: remove nowhere referenced file semp3.h
    
    Remove nowhere referenced file. (egrep "filename\." didn't find anything)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 591fec41328496b9e8b6a1b10d6c72699a9fbb7d
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:51:32 2005 -0800

    [PATCH] m68k-nommu: create common 68328 ROM based startup code
    
    Create common 68328 startup code for the ROM based platforms.
    This is part of the re-organization of the start up code to
    make more if it common.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43c66fef355b7c9510bf7494afaa52ba65522ba9
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:51:14 2005 -0800

    [PATCH] m68k-nommu: fix broken GET_MEM_SIZE macro in ColdFire head code
    
    Fix GET_MEM_SIZE macro, name was wrong. It is only used on the 5272
    platform, so got overlooked in original changes.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9372026071283b4acb45ea4adb4b2fe3417ac999
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:50:57 2005 -0800

    [PATCH] m68k-nommu: change build process to use common head code
    
    Update m68knommu Makefiles to build just the common start up head
    code now. Remove all referneces to the older vendor/board specific
    start codes.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a2b437123c569286b6d9f0f9480f0bb2fd8ac49
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:50:40 2005 -0800

    [PATCH] m68k-nommu: use vma list in nommu mmap support
    
    Modify the mm_context struct to keep a list of vma's instead of
    the uClinux specific mm_block struct's that used to be used.
    This reflects the changes made to mm/nommu.c in 2.6.11.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7afc02c9a5eb9bfef9563752e464cbaf9b405c9d
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Mar 17 15:50:25 2005 -0800

    [PATCH] m68k-nommu: remove nowhere referenced file io_hw_swap.h
    
    Remove nowhere referenced file. (egrep "filename\." didn't find anything)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bb82354d7a491a5796d3d0f672be15929cf72ba
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Mar 18 00:12:55 2005 +0100

    kconfig: Fix kconfig docs typo: integer -> int
    
    Trivial correction: the type of numbers for Kconfig is not integer but int (I
    just verified because I followed the wrong docs and got a error, I looked
    elsewhere and they are using int, and int works for me). Please apply.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 57386bf58f79d11e6bd1f1587a67da3ee704beaf
Author: lucasvr@org.rmk.(none) <lucasvr@org.rmk.(none)>
Date:   Thu Mar 17 22:01:38 2005 +0000

    [ARM PATCH] 2556/1: S3C2400 - defines PHYS_OFFSET at include/asm-arm/arch-s3c2410/memory.h
    
    Patch from Lucas Correia Villa Real
    
    This patch defines the PHYS_OFFSET for the S3C2400 cpu at
    include/asm-arm/arch-s3c2400/memory.h . This is going to
    be used by the GP32 machine.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3ac32201ec77fa4c45ceb669fb5d365f3c9e1e3f
Author: David Vrabel <dvrabel@arcom.com>
Date:   Thu Mar 17 21:14:25 2005 +0000

    [ARM PATCH] 2501/2:  ixp4xx: support edge triggered gpio irqs
    
    Patch from David Vrabel
    
    Adds support for edge triggered GPIO IRQs on IXP4xx. The correct IRQ type (level or edge) is set when the GPIO line is configured (with gpio_line_config(..)). GPIO IRQs default to level triggered since that's the most common type.
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 380edebca53a88f134dfba265b73e300391e8f98
Merge: 3125272... cc6dcfb...
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Mar 17 20:46:15 2005 +0000

    Merge flint.arm.linux.org.uk:/usr/src/bk/linux-2.6-config
    into flint.arm.linux.org.uk:/usr/src/bk/linux-2.6-rmk

commit b2aa9d190c50af57d7f130fda416dd120a2cb045
Merge: cae3cf8... a69bdcb...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Thu Mar 17 21:32:33 2005 +0100

    Merge mars.ravnborg.org:/home/sam/bk/linux-2.6
    into mars.ravnborg.org:/home/sam/bk/kconfig

commit 175bc146b9a93cc743a64914c8d1adafafda7a87
Merge: 1e74fa1... cc8b6e4...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 17 15:27:36 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 1e74fa16a824ec842bfb8ed7ca45ef1ca668ef08
Merge: 6bd637d... 300d31b...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 17 14:00:20 2005 -0500

    merge

commit 6bd637d034744162dd553e855b4e86073df377e3
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 17 13:26:54 2005 -0500

    [ACPI] build fix in acpi_pci_irq_disable()
    
    bk-acpi-acpi_pci_irq_disable-build-fix.patch
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3125272ccdf5729a5a67323220fc0a95df9a7170
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Thu Mar 17 18:01:33 2005 +0000

    [ARM PATCH] 2553/1: imx __REG2 fix
    
    Patch from Sascha Hauer
    
    This patch changes the definition of __REG2 not to use conditional
    expressions as lvalue, which are deprecated in gcc 3.4
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 59d1b9e1a1ccc222b5cbcd21dc537a2e0356971b
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu Mar 17 17:53:55 2005 +0000

    [ARM PATCH] 2552/1: ptrace support for accessing iWMMXt regs
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 933b331cc179e7085a701e5eae4a8e869515962a
Author: cbrake@com.rmk.(none) <cbrake@com.rmk.(none)>
Date:   Thu Mar 17 17:46:33 2005 +0000

    [ARM PATCH] 2551/1: Fix timer and CPU leds on Vibren PXA255 IDP Platform
    
    Patch from Cliff Brake
    
    This patch fixes the timer and CPU LED (blinky LEDS) logic for the Vibren PXA255 IDP (CONFIG_ARCH_PXA_IDP).
    
    Signed-off-by: Cliff Brake
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 75a2465117c45a1f02f11114371951147349601c
Author: lucasvr@org.rmk.(none) <lucasvr@org.rmk.(none)>
Date:   Thu Mar 17 17:37:53 2005 +0000

    [ARM PATCH] 2549/2: S3C2400 - adds EDO DRAM definitions to regs-mem.h
    
    Patch from Lucas Correia Villa Real
    
    This patch defines EDO DRAM for the S3C2400 at
    include/asm-arm/arch-s3c2410/regs-mem.h, which is going to be used by
    the GP32 machine.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fb9487bcbd7623d1f316ff72e791a9cc08b02c31
Merge: 30cb394... 474ae56...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 17 08:45:01 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit ded97b801515e8a9c0c32000880fc865a0d2c6d3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 17 04:00:13 2005 -0800

    [IPV4]: Make multipath algs into true drivers.
    
    This also makes them configurable on a per-route
    basis via rtnetlink route attributes.
    
    Based upon suggestions from Thomas Graf and Alexey
    Kuznetsov.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ec376c83aec73382e6e1e3f83ec32e9a88a5e576
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Mar 17 02:15:50 2005 -0800

    [PATCH] USB Storage: remove unneeded unusual_devs.h entry.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 05da7ea6e587efd6940a0bb1f10d7315c21e80aa
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Mar 17 02:15:30 2005 -0800

    [PATCH] USB Storage: change how unusual_devs.h flags are defined
    
    This patch started life as as473 from Alan Stern, and has been rediffed
    against the current tip.
    
    This patch changes the way the flags bits are defined, so that the
    proc_info routine can automatically list all the flags that are set.  As a
    side effect it will also include the NEED_OVERRIDE flag; that shouldn't
    really matter.  (As another side effect, the definitions grew too long to
    fit on a single 80-character line so I had to wrap the comments.)
    
    This patch also takes the opportunity to remove a couple of obsolete flags
    and to renumber the bit values.  The patch also removes an unusual_devs
    entry whose only purpose was to set one of those obsolete flags; apparently
    it got left behind when all the other uses of those flags were removed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b7472661c570b75bbd57c76da50a5b59c1075ede
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu Mar 17 02:15:11 2005 -0800

    [PATCH] pwc: fix printk arg types
    
    Fix gcc printk arg type warnings:
    drivers/usb/media/pwc/pwc-if.c:325: warning: int format, different type arg (arg 2)
    drivers/usb/media/pwc/pwc-if.c:1182: warning: int format, different type arg (arg 4)
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 98bd3f79b50ab033ed069b4269540811b6bae7ec
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu Mar 17 02:14:52 2005 -0800

    [PATCH] sisusb: fix arg. types
    
    Fix gcc printk arg type and other function parameter warnings:
    
    drivers/usb/misc/sisusbvga/sisusb.c: In function `sisusb_send_packet':
    drivers/usb/misc/sisusbvga/sisusb.c:583: warning: passing arg 7 of `sisusb_send_bulk_msg' from incompatible pointer type
    drivers/usb/misc/sisusbvga/sisusb.c:591: warning: passing arg 6 of `sisusb_recv_bulk_msg' from incompatible pointer type
    drivers/usb/misc/sisusbvga/sisusb.c: In function `sisusb_send_bridge_packet':
    drivers/usb/misc/sisusbvga/sisusb.c:620: warning: passing arg 7 of `sisusb_send_bulk_msg' from incompatible pointer type
    drivers/usb/misc/sisusbvga/sisusb.c:628: warning: passing arg 6 of `sisusb_recv_bulk_msg' from incompatible pointer type
    drivers/usb/misc/sisusbvga/sisusb.c: In function `sisusb_write_mem_bulk':
    drivers/usb/misc/sisusbvga/sisusb.c:989: warning: int format, different type arg (arg 3)
    drivers/usb/misc/sisusbvga/sisusb.c:989: warning: int format, different type arg (arg 3)
    drivers/usb/misc/sisusbvga/sisusb.c: In function `sisusb_clear_vram':
    drivers/usb/misc/sisusbvga/sisusb.c:1407: warning: passing arg 7 of `sisusb_write_mem_bulk' from incompatible pointer type
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46cee5a76b10c09be613dc5ba88d0248f67e9242
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Mar 17 02:14:33 2005 -0800

    [PATCH] USB Storage: remove unneeded NULL tests
    
    This patch started life as as472 from Alan Stern, and has been rediffed
    against the current tip.
    
    This patch simply removes some unnecessary NULL checking before kfree()
    calls.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 127600f7f03193dfd0678e68cfa00c057c3333ca
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Mar 17 02:14:14 2005 -0800

    [PATCH] USB Storage: Header reorganization
    
    This patch started life as as471 from Alan Stern, and has been regenerated
    against the current tip.
    
    This patch cleans up the use of header files.  Primarily it makes sure
    that "usb.h" is included before any of the other local headers.  It also
    removes some unnecessary declarations of struct us_data and struct
    scsi_cmnd, and it moves the inclusion of <scsi/scsi_host> to usb.h where
    it will be needed by a later patch.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dabdcf61891ee1a4649d8a8ded9df5b6bb89a87b
Author: Olaf Kirch <okir@suse.de>
Date:   Thu Mar 17 02:13:54 2005 -0800

    [PATCH] USB: fix uhci irq 10: nobody cared! error
    
    From: Olaf Kirch <okir@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6836b946a8163f1116ab3d4bd46628fa813a3387
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Mar 17 02:13:34 2005 -0800

    [PATCH] USB: compile warning cleanup
    
    compile warning cleanup - handle error return from
    scsi_add_host
    
    Signed-off-by: Stephen Biggs <yrgrknmxpzlk@gawab.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc19aea951aa8dc2d8c437734fe380316798aadc
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Mar 17 02:13:15 2005 -0800

    [PATCH] usb/digi_acceleport: remove interruptible_sleep_on_timeout() usage
    
    Replace deprecated interruptible_sleep_on_timeout() with direct
    wait-queue usage. Also replace some rather odd wait-queue usage with the
    existent macros. Also adjusted the wake_up_interruptible() call appropriately,
    as I changed all the states to TASK_UNINTERRUPTIBLE (signals were not be checked
    in the current code). Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a9a978d536f47fd4286b7a6b42bfabb9c1941d83
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Mar 17 02:12:55 2005 -0800

    [PATCH] usb/rio500: remove interruptible_sleep_on_timeout() usage
    
    Replace deprecated interruptible_sleep_on_timeout() with direct
    wait-queue usage. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c26010e5d8ff287820547d14caf254c5acb3a4e
Author: Oliver Neukum <oliver@neukum.org>
Date:   Thu Mar 17 01:58:07 2005 -0800

    [PATCH] USB: removal of obsolete error code from kaweth
    
    this patch from David removes an obsolete error code from kaweth.
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0cc96633803f13ffc84f35ef352e92c7b7136eba
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 17 01:57:47 2005 -0800

    [PATCH] USB: Prevent hub driver interference during port reset
    
    This patch causes the hub driver to ignore ports that are being reset by
    another driver.  Without this protection khubd will sometimes notice that
    the port is behaving funny while the reset is taking place and will
    unilaterally disconnect it, which is not what we want.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c3dc5bcaad73d17884733a888ffe7fc259f0e738
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 17 01:57:27 2005 -0800

    [PATCH] g_file_storage: add configuration and interface strings
    
    This patch adds iConfiguration and iInterface strings to the
    g_file_storage driver (just to spiff it up and help in testing software
    that looks at those strings).  It also enlarges the space reserved for the
    Manufacturer string, since combinations of long kernel names and long UDC
    driver names were sometimes getting truncated.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cd5d3ad71ee8855a7048a32b22b839e5ba3db795
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 17 01:57:07 2005 -0800

    [PATCH] usb-midi: fix arguments to usb_maxpacket()
    
    The usb-midi driver uses an incorrect value for the is_out argument to
    usb_maxpacket(), triggering a WARN_ON.  This patch fixes the mistake.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4e0371524d5ad8b18038cc475b6f48eda9538969
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Mar 17 01:56:48 2005 -0800

    [PATCH] usb hcd u64 warning fix
    
    drivers/usb/core/hcd.c:1689: warning: long long unsigned int format, u64 arg (arg 6)
    drivers/usb/core/hcd.c:1695: warning: long long unsigned int format, u64 arg (arg 5)
    
    We must not assume that u64 is implemented as `unsigned long long'.  On ppc64
    (for example) it is `unsigned long'.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 31420f77ecad85e88c9539c6e512996f0d4683f8
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu Mar 17 01:49:09 2005 -0800

    [PATCH] USB: Patch for ub to fix oops after disconnect
    
    This patch was developed by Glenn Maynard for his oops back in December,
    but for some reason I forgot about it and had it reimplemented when I stepped
    on this problem myself. In my case, there was no oops, but a warning about
    slab corruption.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 65fb23cf7838a13ef96f5067cb4fd710adb7789f
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:35:24 2005 -0800

    [PATCH] USB: ethernet/rndis gadget driver updates
    
    Various fixes to the Ethernet/RNDIS gadget core code:
    
        - Pre-allocate the request used to transfer status back to the host.
          Used initially for CDC Ethernet; RNDIS will change later.  This
          resolves a longstanding FIXME, elimininating fault modes.
    
        - Use larger packets for those status reports, 16 bytes not 8; this
          eliminates some fault modes, without losing hardware support.
    
        - Streamline endpoint configuration, just save the endpoints during
          driver binding.  The previous scheme was a complex leftover from
          before the endpoint autoselection library code existed, and this
          bit of cleanup prepares for more simplifications later.
    
        - Implement a basic outgoing packet filter, for CDC Ethernet and RNDIS
          but not the CDC subset.  This improves conformance to both specs.
    
        - Correct the bit rate reports for CDC Ethernet and RNDIS to match
          the peak bulk transfer rates, not the raw signaling rates.
    
    This still doesn't issue CDC or RNDIS link status change notifications
    to the host as often as it should, but that'll be easier now.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9b88bda4bd9e0fdeb3fca6d1df292f010905441a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:35:05 2005 -0800

    [PATCH] USB: net2280 reports correct dequeue status
    
    Minor bugfix to net2280:  don't return incorrect dequeue() status.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8cf5299fcb32a77c22fe05defb7dad1a8fa7da08
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:34:45 2005 -0800

    [PATCH] USB: usbnet fix for Zaurus C-860
    
    This patch resolves a recent problem with the Zaurus C-860 support.
    
    A change to correct handling of Zaurii that are lying about their support
    for the "CDC Ethernet" class specification broke the C-860, which tells
    an entirely different lie (that it supports "CDC MDLM", providing access
    to a cell phone modem).  The code expecting it to be telling a lie about
    CDC Ethernet support naturally misbehaved.  (Sharp should straighten out
    its story.  The 2.6 OpenZaurus kernels don't have any such issues...)
    
    The fix is just to recognize this bogus MDLM stuff and ignore it.
    This patch also includes the two MDLM descriptors in <linux/usb_cdc.h>
    although they're not currently used.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dab9770ef4f0161b53d0c4c729a062561283465c
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:34:24 2005 -0800

    [PATCH] USB: usbnet gets status polling, uses for CDC Ethernet
    
    This adds status/interrupt transfer infrastructure to "usbnet", and
    uses it for CDC Ethernet support.  It can be used with other devices
    that define an interrupt-IN endpoint (quite a few!), so long as the
    meaning of the events is documented (erm, not so many).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e62a1fea73074428dd094cbb1d7e28f3485a7e21
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:34:04 2005 -0800

    [PATCH] USB: ehci and short in-bulk transfers with 20KB+ urbs
    
    This changes handling of short bulk IN transfers with URB buffers that require
    two or more transfer descriptors.  The case is rare in most systems, since few
    drivers use such large buffers (bigger than 20KB, assuming 4K-aligned).
    
    The existing code misbehave on at least NEC's EHCI 0.95 silicon, where it seems
    to hit a new variant of a silicon quirk relating to dummy TDs.  Symptom of the
    misbehavior is that the host stops polling on the IN endpoint, and the URB queue
    no longer progresses.
    
    This fix uses simpler logic to detect those short reads, dodging that quirk.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f6be81c8126409c4c622bb7daefbfca2b7028585
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:33:44 2005 -0800

    [PATCH] USB: ohci zero length control IN transfers
    
    This fixes a longstanding bug in the OHCI driver, inherited from the 2.4
    code.  It also fixes a related comment in the EHCI driver, which came when
    the EHCI code was first derived from OHCI.  (The EHCI code doesn't have
    that bug; the comment was effectively "FIXME add bug".)
    
    The bug: control-IN transfers with no data stages have status stages with
    an IN packet (like a control-OUT transfer), instead of using an OUT packet.
    See figure 8-37 of the USB spec.  The current code makes trouble with some
    peripheral hardware and zero length IN transfers (scarce in the Real World).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d2d6405828a9416296e4d450d31c67c26ec4f547
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:33:24 2005 -0800

    [PATCH] USB: usb gadget kconfig tweaks
    
    This makes two small changes to the gadget Kconfig.
    
     - It removes SA-1100 support ... if anyone gets around to
       finishing that controller driver, it could go back, but
       until then there's no real point.
    
     - The "dummy_hcd" moves to the end, with a comment to please
       keep it there.
    
    Moving that Kconfig entry helps keep "real hardware" as the default
    on systems that have it ... otherwise Kconfig will surprise people
    with a curious default.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd4068e5dce5dc9b83f689325a0ca3ecb57fe3dd
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Mar 17 01:33:03 2005 -0800

    [PATCH] USB: add at91_udc recognition
    
    Add declarations to recognize the AT91 USB peripheral controller,
    as used in various ARMv4T chips including the mmu-ful at91rm9200.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fec3558e7036e59af86372ba013b20a0f535734d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 17 01:13:54 2005 -0800

    [PATCH] remove drivers/usb/image/hpusbscsi.c
    
    USB_HPUSBSCSI was marked as BROKEN in 2.6.11 since libsane is the
    preferred way to access these devices.
    
    Unless someone plans to resurrect this driver, I'm therefore proposing
    this patch to completely remove it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f192bcfa943cdb71290f64c2f9b89c9d30f979af
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 17 01:09:47 2005 -0800

    [PATCH] drivers/usb/net/pegasus.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a5fcaac98f5249c55bf37c6a48c7d5affb35f90b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 17 01:09:18 2005 -0800

    [PATCH] drivers/usb/storage/: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - scsiglue.c: remove the unused usb_stor_sense_notready
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f40df87736e4b9f9912a482c5b17c4415db1333c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 17 01:07:38 2005 -0800

    [PATCH] drivers/usb/serial/: make some functions static
    
    This patch makes some needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2b90ba15395cc15c9c5a927751fdb0628b6fbb5f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 17 01:04:11 2005 -0800

    [PATCH] USB: possible cleanups
    
    Before I'm getting flamed to death:
    This patch contains possible cleanups. If parts of this patch conflict
    with pending changes these parts of my patch have to be dropped.
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - #if 0 the following unused global functions:
      - core/usb.c: usb_buffer_map
      - core/usb.c: usb_buffer_unmap
    - remove the following unneeded EXPORT_SYMBOL's:
      - core/hcd.c: usb_bus_init
      - core/hcd.c: usb_alloc_bus
      - core/hcd.c: usb_register_bus
      - core/hcd.c: usb_deregister_bus
      - core/hcd.c: usb_hcd_irq
      - core/usb.c: usb_buffer_map
      - core/usb.c: usb_buffer_unmap
      - core/buffer.c: hcd_buffer_create
      - core/buffer.c: hcd_buffer_destroy
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc8b6e45dd635d698cd4ef28aa6ccc704a23cd72
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 17 00:52:58 2005 -0800

    Linux 2.6.12-rc1

commit bd6f62e627fc083d31f74e40b0c1ed8fa73f9b02
Merge: 48a922f... f8eabec...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 17 00:42:48 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/merge-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 48a922f0dee24c7717efcd2b60bcd12b3482a53a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 17 00:24:01 2005 -0800

    [PATCH] i2c eeprom oops fix
    
    Fix recent oopses with i2c nvram access.  If count is less than in_row1,
    bad things will happen.
    
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 419335fc67e07e2beb62fc99db950b283aa6a299
Merge: 602fa93... 474ae56...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Thu Mar 17 00:04:07 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 59b51e70e85997a24a744f895255760894fac171
Author: elueck@de.ibm.com <elueck@de.ibm.com>
Date:   Wed Mar 16 23:58:54 2005 -0800

    [IPV4]: Multipath cache algorithm support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 44f47fcde644b80d7247ca0f150cbc1c631c69a3
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 16 22:50:04 2005 -0800

    [PATCH] arch/i386/pci/i386.c: Use new for_each_pci_dev macro
    
    From: Domen Puncer <domen@coderock.org>
    
    As requested by Christoph Hellwig I created a new macro called
    for_each_pci_dev.  It is a wrapper for this common use of
    pci_get/find_device:
    
    (while ((dev = pci_get_device(PCI_ANY_ID, PCI_ANY_ID, dev)) != NULL))
    
    This macro will return the pci_dev *for all pci devices.  Here is the first
    patch I used to test this macro with.  Compiled and booted on my T23.
    There will be 53 more patches using this new macro.
    
    Signed-off-by: Hanna Linder <hannal@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc3c054e47dcd3b45f4d0e9bfa832d616ae77204
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 16 22:49:28 2005 -0800

    [PATCH] sort-out-pci_rom_address_enable-vs-ioresource_rom_enable.patch
    
    From: Jon Smirl <jonsmirl@gmail.com>
    
    This sorts out the usage of PCI_ROM_ADDRESS_ENABLE vs
    IORESOURCE_ROM_ENABLE.  PCI_ROM_ADDRESS_ENABLE is for actually manipulating
    the ROM's PCI config space.  IORESOURCE_ROM_ENABLE is for tracking the
    IORESOURCE that the ROM is enabled.  Both are defined to 1 so code
    shouldn't change.
    
    Just to remind people, there are new PCI routines for enable/disable ROMs
    so please call them instead of directly coding access in device drivers.
    There are ten or so drivers that need to be converted to the new API.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4d2b2b929a7fea61fa418efb392d590ae0c2e19
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Wed Mar 16 22:32:07 2005 -0800

    [PATCH] pci_ids.h correction for Intel ICH7M
    
    This patch corrects the ICH7M LPC controller DID in pci_ids.h from x27B1
    to x27B9.
    
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2eefc3b3170c14f3f9bb3bb8f6fd2f1ab78b3a73
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Wed Mar 16 22:31:48 2005 -0800

    [PATCH] PCI busses are structs, not integers
    
    PCI busses are structs, not integers.  Fix pcibus_to_cpumask to take
    a struct.  NB changing it from a macro to an inline function would
    require serious include file surgery.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c78b148d0968d85ede9b870472244cab59c93b83
Author: John Rose <johnrose@austin.ibm.com>
Date:   Wed Mar 16 22:31:26 2005 -0800

    [PATCH] [PATCH] remove redundant devices list
    
    The RPA PCI Hotplug module creates and maintains a list of devices for
    each slot.  This is redundant, because the PCI structures already
    maintain such a list.  This patch changes the module to use the list
    provided in the pci_bus structure.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0b16e45c28e9c6ea72ca603487707dc6ad80cbe1
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 16 22:31:08 2005 -0800

    [PATCH] PCI: 80 column lines
    
    PCI 80-column lines
    
    A couple of lines are >80 columns
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 71a7c96d4c15e109a6daf04077cc7ab68a532a6d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 16 22:02:44 2005 -0800

    [M68KNOMMU]: Use asm-generic/unaligned.h for COLDFIRE.
    
    Based upon comments from Geert Uytterhoeven.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 28c72287192b6aaf726dd625cdc218b8508355e2
Author: Rolf Eike Beer <eike-hotplug@sf-tec.de>
Date:   Wed Mar 16 21:54:51 2005 -0800

    [PATCH] PCI Hotplug: only call ibmphp_remove_resource() if argument is not NULL
    
    If we call ibmphp_remove_resource() with a NULL argument it will write
    a warning. We can avoid this here because we already look if the argument
    will be NULL before (and we ignore the return code anyway).
    
    Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 376d333f8f8f2c7a5d948f29e1f8b5c870dd0786
Author: Rolf Eike Beer <eike-hotplug@sf-tec.de>
Date:   Wed Mar 16 21:54:33 2005 -0800

    [PATCH] PCI Hotplug: remove code duplication in drivers/pci/hotplug/ibmphp_pci.c
    
    This patch removes some code duplication where if and else have the
    same code at the beginning and the end of the branch.
    
    Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d7eaa5a419a2de23bcc1c8d0e6c66a70742752c0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 16 21:54:31 2005 -0800

    [ARCH]: Consolidate portable unaligned.h implementations.
    
    Several architectures do their asm/unaligned.h support support by
    simply casting the pointer to a packed strcuture, then deref'ing that
    pointer.  This forces gcc to assume the object is not aligned
    properly.
    
    This technique originated in Richard Henderson's
    asm-alpha/unaligned.h, IA64 uses the same technique as well.
    
    This works well on RISC systems for two reasons:
    
    1) On systems like Alpha, MIPS, et al. which have special
       "load unaligned" instructions, GCC knows to emit them
       for code like this.
    
    2) Even on systems without explicit unaligned load/store instruction
       support, the code emitted (basically, byte loads with shifts and
       ors) is about the same as what you get when emitting a memmove()
       call and you don't need the local stack slot.
    
    I was going to thus move asm-sparc64/unaligned.h over to such a
    scheme, but then I noticed that nobody actually includes the current
    memmove() based asm-generic/unaligned.h code.  So why not put the
    portable packed structure implementation into asm-generic/unaligned.h
    and then make asm-{alpha,ia64,sparc64}/unaligned.h simply include that?
    
    I only had to make minor modifications to the alpha header when placing
    it into the generic area.  In particular I had to convert some explicit
    "unsigned long", "unsigned int" et al. into the arch-agnostic "u64" "u32"
    etc.  so that even 32-bit platforms could use this.
    
    Come to think of it I'll make sparc32 use this as well.
    
    I looked at all the other platform unaligned.h headers:
    
    I386/X86_64: can do unaligned loads directly
    ARM: is trying to be incredibly clever, and open codes the shifts and
         ors.  I think it would be better if it used something similar to
         the packed structure technique.
    CRIS: like x86, can do unaligned stuff directly.
    FRV: needs help doing unaligned stuff, it probably also could use the
         packed structure stuff.
    H8300: needs help, could use this new asm-generic/unaligned.h header
    M32R: likewise
    M68K: can do unaligned access directly.
    MIPS: appears to be a copy of the original alpha/ia64 unaligned.h
          header, so I converted it to use the new asm-generic/unaligned.h
          too
    PARISC: is just a copy of asm-sparc/unaligned.h, so I converted it
            over to use asm-generic/unaligned.h too
    PPC/PPC64: can do unaligned access directly in big-endian mode which
               is what the Linux kernel runs in
    S390: can do it directly as well
    SH/SH64: just has the memmove() code ala asm-sparc/unaligned.h, I
             converted it to use asm-generic/unaligned.h
    V850: has some clever code just like ARM, so I didn't touch it.
    
    So this is the patch I came up with.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a7e00043915ccece006d681280f4945db52b36dd
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Mar 16 21:50:00 2005 -0800

    [PATCH] PCI: trivial DBG tidy-up
    
    Tidy-up a bunch of PCI DBG output to use pci_name() when possible,
    add domain when appropriate, remove redundancy, settle on one
    style (DBG vs DBGC), etc.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 474ae5615a9e1924abefdeb71bb37bf713131d9a
Author: steven@brudenell.name <steven@brudenell.name>
Date:   Wed Mar 16 21:46:30 2005 -0800

    [PATCH] parport_pc: partially revert netmos patch
    
    There's a conflict between parport_pc and parport_serial.  parport_pc is
    claiming the 9735 and 9835 devices, but parport_pc wants to handle them.  So
    remove support for those devices from parport_pc.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a78a838897d8c443767b06cf5a7aaef0d4cecfc3
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 16 21:46:13 2005 -0800

    [PATCH] revert vmalloc-use-list-of-pages-instead-of-array-in-vm_struct
    
    XFS will under some circumstances use vmap() to map pagecache pages.  These
    are on the LRU.  So the recent patch to use page->lru in the vmalloc() code
    corrupts these pages's ->lru pointers.  Revert.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4522f2caf0f77829a7a3cde874500241b7a43f6
Author: Jes Sorensen <jes@trained-monkey.org>
Date:   Wed Mar 16 21:45:56 2005 -0800

    [PATCH] compile fix for ia64 UP
    
    Minor compile fix from Peter Chubb for ia64 UP boxes after my /dev/mem
    patch was applied.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daa10536f86fb12fbe6c159e983c2c999b06f553
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Mar 16 21:45:38 2005 -0800

    [PATCH] sh build fix
    
    sh and sh64 need xlate_dev_mem_ptr/xlate_dev_kmem_ptr definitions too.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cae15a8550bdc6186a5b1ac6dfb7b3dbd9511670
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Mar 16 21:45:21 2005 -0800

    [PATCH] PPC64 Implement non-executable stacks
    
    This patch, by Jake Moilanen with some further hacking from me, adds a
    real execute permission bit to the linux PTEs on PPC64, and connects
    that into the kernel infrastructure for implementing non-executable
    stacks and heaps.  This means that on any PPC64 cpu since the POWER4
    (i.e. POWER4, PPC970, PPC970FX, POWER4+, POWER5) you will get a
    segfault if you try to execute instructions from a region that doesn't
    have PROT_EXEC permission.  The patch also marks the pages of the
    linear mapping that aren't part of the kernel text as non-executable.
    
    Andrew and Linus, could you try this on your G5s?  I have tried it
    here on a Debian system and a SLES9 system and everything runs fine,
    but I haven't been able to try it on YDL, FC or RHEL4.
    
    With this patch we default to executable stack and read-implies-exec
    behaviour when there is no PT_GNU_STACK program header entry, or when
    there is one and it indicates the stack is executable.  For 32-bit
    processes, the heap is always executable, because the PLT contains
    instructions and it ends up in the bss segment.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed9a0a9f113f9b1d8ba8f9ed9957d2896dccb630
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 20:07:27 2005 -0800

    umount: avoid racy block-size set
    
    Setting the block size back to the original blocksize at umount time
    is unnecessary, and can cause buffer errors and infinite loops in
    __getblk_slow, and possibly other problems.
    
    Just getting bdev_lock instead causes other issues, namely AB-BA deadlocks
    with /proc/meminfo etc. Just drop it, and replace with a "sync_blockdev()"
    to cause a flush (which was a side effect of changing the blocksize before).
    
    Debugging and testing by Jeff Mahoney <jeffm@suse.com>

commit 34ea9d86690be7f791efd3da30cedc88d9e37b8c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 19:30:25 2005 -0800

    isofs: more "corrupted iso image" error cases
    
    Thanks to Michal Zalewski for testing.

commit e2b2c65a060f72bbcd7e4a942734369c20c937aa
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Mar 16 18:31:09 2005 -0800

    [NET]: Save space for sk_alloc_slab() failure message.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b164d03ce3e632457e5ff761dc457711e64df1ec
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 18:30:46 2005 -0800

    PCI: fix an oops in some pci devices on hotplug remove when their resources are being freed.
    
    As reported by Prarit Bhargava <prarit@sgi.com>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5813e5fea0c779f2f6a0101ad3148ef58622ff2c
Author: kimball.murray@stratus.com <kimball.murray@stratus.com>
Date:   Wed Mar 16 18:23:26 2005 -0800

    [PATCH] PCI: Patch for Serverworks chips in hotplug environment
    
    From: Kimball Murray <kimball.murray@stratus.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 954ed36c60547d97da9b3300836ca4ab0c327fb4
Author: Roland Dreier <roland@topspin.com>
Date:   Wed Mar 16 18:11:55 2005 -0800

    [PATCH] PCI: Add PCI device ID for new Mellanox HCA
    
    Add PCI device IDs for new Mellanox "Sinai" InfiniHost III Lx HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 63c0f2612bf447cd8ba99876ee6c4a9a2ac36deb
Merge: 72401d5... cae3cf8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Mar 16 18:09:06 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/17
    into intel.com:/data/home/aegl/BK/linux-ia64-release-2.6.12

commit e7159ebba919be21ef2153642c5f3179334475a1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 16 18:05:53 2005 -0800

    [IPV4]: Send TCP reset through dst_output in ipt_REJECT
    
    I noticed that the TCP reset code in ipt_REJECT didn't call dst_output
    either so it also bypasses IPsec processing.  Here is a patch to fix
    that and use the correct MTU value.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5a971ed0f7e46732295f79c054e997c7e206226e
Merge: 05177e1... 6bec228...
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Mar 17 12:16:53 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit cae3cf8f1b6bd60ec4a6c657f4399e2f8269cab0
Merge: 94dad77... 76ae6d5...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 16:35:45 2005 -0800

    Merge

commit 6bec228f339b7f77e606af9ec9d557d16e42d33c
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Mar 17 10:26:59 2005 +1100

    [XFS] Provide a mechanism for reporting ihashsize defaults via
    /proc/mounts.
    
    SGI-PV: 931940
    SGI-Modid: xfs-linux-melb:xfs-kern:21841a
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 0c9e002cee7e2f721263b1427a74f13fe13d1bdc
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Mar 17 10:17:21 2005 +1100

    [XFS] Further improvements to the default XFS inode hash table sizing
    algorithms, resolving regressions reported with the previous change.
    
    SGI-PV: 931940
    SGI-Modid: xfs-linux-melb:xfs-kern:21839a
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 30cb39434cc57750e1424d3c07a0b6fd74e78e53
Merge: c9f8b2e... 94dad77...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 16 14:50:01 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit c87d7688b989cedd09a57391bdfd660f797e1a02
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 08:07:27 2005 -0800

    [PATCH] PCI: sync up with the latest pci.ids file from sf.net.
    
    Thanks to Dave Jones for the automated patch generation: http://www.codemonkey.org.uk/projects/pci/
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5befb9ce9818818e5d2e6ea2bd01eedff79e63d6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 07:56:39 2005 -0800

    PCI: add CONFIG_PCI_NAMES to the feature-removal-schedule.txt file
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 33825137e2153ecc506a890f7eebca3869449a2b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 07:56:17 2005 -0800

    Remove item from feature-removal-schedule.txt that was already removed from the kernel.
    
    my mistake...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9681681bd8e7e8263b22c580bc293b5a6d09b762
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 07:55:56 2005 -0800

    PCI: increase the size of the pci.ids strings
    
    If we are going to waste memory, might as well do it right...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f8eabec2498fbaaad830cd7fe75344cc758e60cf
Merge: 94dad77... 8936f70...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 16 05:55:47 2005 -0800

    merge 2.6.11.4 into mainline.

commit 68dea47a5751ce4ed43c02f14f28add84791e36e
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Mar 16 04:57:52 2005 -0800

    [IPV6]: Remove redundant NULL checks before kfree
    
    I don't mind calling kfree twice itself (because that function is not
    so performance critical), but fl_free(NULL) is out because
    if fl is NULL, kfree(fl->opt) is out.
    
    So, what do you think of checking fl inside fl_free like this?
    
    Based on patch from Jesper Juhl <juhl-lkml@dif.dk>.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d03c8abab6cb16a811ac90dfee1a263233791bf5
Author: aaw@rincewind.tv <aaw@rincewind.tv>
Date:   Wed Mar 16 04:56:17 2005 -0800

    [AF_KEY]: Fix error handling in pfkey_xfrm_state2msg()
    
    The pfkey_xfrm_state2msg() was missing a return in an EINVAL statement.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7a2baa10a2c26d2214a14db8493d03d694e7ed8f
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Wed Mar 16 04:54:22 2005 -0800

    [IPV4]: Save space in struct inetpeer on 64-bit platforms.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 056ebfacab563d1516c3ba567d0a874c525b618c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 16 04:44:03 2005 -0800

    [IPV4]: Mark a struct static in inetpeer.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9f8b2ed2009463d279239ab946b40e4ee4a6816
Merge: e25bd00... cda61e3...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 16 05:19:57 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 94dad77b4d2ae306a8055447ebabaaac0762fc5f
Merge: 4d1de97... 9012791...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 02:18:10 2005 -0800

    Merge http://linux-watchdog.bkbits.net/linux-2.6-watchdog
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 4d1de97be76eb983fa74922b7b41772b3e018a45
Merge: 22b45c8... 02b6caa...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 02:16:52 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 3bd31d43d53fc01261137cbd7c7be160c183cab6
Merge: cda61e3... 78e4d40...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Mar 16 04:03:18 2005 -0600

    Merge jfs@jfs.bkbits.net:linux-2.5
    into austin.ibm.com:/home/shaggy/bk/jfs-2.5

commit 78e4d40157955fe124e1cf2c251ea6218f7346d7
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Mar 16 03:43:34 2005 -0600

    JFS: Fix hang caused by race waking commit threads
    
    The flag, jfs_commit_threads_waking, is meant to avoid waking up too
    many jfs_commit threads when only one is needed.  There is a
    possibility that all the threads will be running, and the flag gets
    set, but never reset.  The fix is to make sure the flag is reset
    before a thread sleeps.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 22b45c8cca60d8e57dc94d0186d598c26c0d07d1
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 16 00:13:02 2005 -0800

    isofs: Handle corupted rock-ridge info slightly better.
    
    Keyword here being 'slightly'. The code is a mess.

commit 3af47cc5bc7b85bed056e31e37d36075c19f5f3f
Merge: f3fc4c8... b3976eb...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 15 23:53:27 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b3976eb3cb29e1b446b43ec93428026afe0cb5bb
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Mar 15 23:05:28 2005 -0800

    [PATCH] tasklist left locked
    
    On 4-way SMP, about one reboot in twenty hangs while killing processes:
    exit needs exclusive tasklist_lock, but something still holds read_lock.
    do_signal_stop race case misses unlock, and fixing it fixes the symptom.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3fc4c843426ba97e4d3d77af8f79e650a52cf59
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 15 22:52:41 2005 -0800

    [IPV6]: Make a function static in ndisc.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 99c9f1b89af18b237b48dce0362a286b3ab8874b
Author: Robert Olsson <robert.olsson@data.slu.se>
Date:   Tue Mar 15 22:50:22 2005 -0800

    [PKTGEN]: Fix maintainence of next_tx_{us,ns}.
    
    Also a minor fixup from Adrian Bunk.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3d3c59a4fcafdd2d1e1274fc77658ee4305d256
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue Mar 15 22:48:24 2005 -0800

    [BRIDGE]: Limit BRCTL_GET_BRIDGES to 2048 bridges.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c7ec2528b5776bd64a7c1240879087198e57da9
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 15 22:44:28 2005 -0800

    [IPV4]: Make ipt_REJECT use icmp_send again.
    
    As it is ipt_REJECT doesn't work at all with IPsec.  Despite my efforts
    previously in making the policy lookups work there I neglected to change
    the final call to dst_output so the policy lookup is useless.
    
    ipt_REJECT also had a number of deviations from icmp_send which seems to
    be unjustified.  For examples it ignored source routing IP options.
    
    There was a bug in icmp_send too :) It didn't set the ICMP type/code
    values for the policy lookup.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dbbd405f9c50f09367b854118f075971896e0062
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 22:27:10 2005 -0800

    [ISDN]: Set skb->input_dev properly.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b1bba5ce75de0b1014a484ff7d5db33f16d37cb1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 15 22:26:05 2005 -0800

    [AX25]: Fix build.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 864e014fa5e5885b28f03b8e40d1142e15b07472
Merge: cf32f74... aff31da...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 15 22:16:33 2005 -0800

    Merge bk://kernel.bkbits.net/tgraf/net-2.6-sock-reorder
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit cf32f74cef51ebc30ad874a50006803558058da1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 15 22:15:19 2005 -0800

    [AX25]: Use skb_queue_purge().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8fd0dfb3a9bba91f9a3d4d08e7d00ac47a68f3e9
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Mar 15 22:14:21 2005 -0800

    [IPV4]: All deletion of equal addresses only differing by prefix length.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c149bdada85031ffa345fc1a65ad7bf622786133
Author: Sven Henkel <shenkel@gmail.com>
Date:   Tue Mar 15 22:07:17 2005 -0800

    [TCP]: Use get_unaligned() in tcp_parse_options()
    
    TCP options are not guaranteed to be aligned at all, so we should use
    get_unaligned when accessing u16- or u32-values in the TCP
    options header to avoid alignment errors on some platforms. The patch
    applies to vanilla 2.6.11.
    
    Signed-off-by: Sven Henkel <shenkel@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 818a9ce8ca971e880a77a72a42a1223e427c5b7d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 15 22:02:46 2005 -0800

    [IPSEC]: Revert ip{,6}_append_data() dst_mtu() conversion.
    
    This patch is wrong.  This is the *one* place where we do need to
    use the path MTU.  The reason is that when the packet is fragmented
    we only pay for the IPsec overhead once over all and not once for
    each fragment.
    
    Please revert it for now.
    
    The trailer_len in ip_append_data is not quite right as the trailer's
    length depends on the length of the entire packet.  However, it should
    be harmless since ESP knows how to extend the packet when necessary.
    
    Cset exclude: herbert@gondor.apana.org.au|ChangeSet|20050315181807|13007

commit 5088eca49e8f942785f764cd4fb3dc4f76aede78
Merge: f537c25... b4af682...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Mar 16 00:15:17 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit f537c2582ec636a994034a591124a9b9325ae7f1
Merge: 53654f8... e8006df...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Mar 16 00:03:53 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 72401d5fc0ae1d64a3c8074c15daf8208b35aa42
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Mar 15 17:37:39 2005 -0800

    [IA64] override for pgd_addr_end to step around holes
    
    Every user region has a hole in the middle where we don't have
    enough bits in pgd+pmd+pte so pgd_addr_end needs some extra math
    to compute the virtual address base of the next pgd entry.
    
    Thanks to Dave Miller for pointing me in the right direction.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit aff31da36349c9fb6e383ad45c0df48d06d1dd3a
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:29:26 2005 +0100

    [NET] Reorder struct tcp_options_received
    
    Reorders struct tcp_options_received to avoid padding and shrinks the
    following fields to more appropriate sizes saving 8 bytes.
    
    saw_tstamp: char -> 1 bit
    tstamp_ok: char -> 1 bit
    sack_ok: char -> 4 bits
    wscale_ok: char -> 1 bit
    snd_wscale: u8 -> 4 bits
    rcv_wscale: u8 -> 4 bits
    dsack: u8 -> 1 bit
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15f9f6f1e878104b1557504c07d1e4aa7dd4fa8e
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:27:28 2005 +0100

    [NET] Reorder struct ipv6_pinfo
    
    Converts hop_limit and mcast_hops to signed 16 bit types saving 4 bytes
    on 32bit archs and another 4 bytes on 64bit archs.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0568d1a22f48a4f181f7da5cdd2f0d26f0629cbd
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:24:54 2005 +0100

    [NET] Reorder struct sock
    
    Reorders struct sock to avoid padding and shrinks the following
    fields to more appropriate sizes saving 12 bytes and some more
    on 64bit architectures.
    
    sk_shutdown: char -> 2 bits
    sk_no_checks: char -> 2 bits
    sk_userlocks: char -> 4 bits
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 62c068015b4ce2d4cb76be1070b6e51283a662da
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:23:08 2005 +0100

    [NET] Convert sk_queue_shrunk into SOCK_QUEUE_SHRUNK flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e183abe614020361c722cf4a1be7f5e2d0853fa4
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:20:49 2005 +0100

    [NET] Convert sk_localroute into SOCK_LOCALROUTE flag and use RT_CONN_FLAGS where appropriate
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit edca4cb448ccb4d88ecfcb9edf320eb3f9fd7828
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:15:15 2005 +0100

    [NET] Convert sk_no_largesend into SOCK_NO_LARGESEND flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a585a039c6e03702d0b32145013aba2f66cbc128
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:10:30 2005 +0100

    [NET] Convert sk_rcvtstamp into SOCK_RCVTSTAMP flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc008b4b048c81f5c63aef26ccbf73a1847851bc
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 02:05:30 2005 +0100

    [NET] Convert sk_debug into SOCK_DBG flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f96df9b98a901abe562f7da5e313e60034ce4e9
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 01:57:29 2005 +0100

    [NET] Convert sk_user_write_queue into SOCK_USE_WRITE_QUEUE flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ad701b91f476c14cd094ed0874b68fac0f16e5e
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 01:50:36 2005 +0100

    [NET] Convert sk_zapped into SOCK_ZAPPED flag
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 553f516cd094a964772541b159e1ca07b2faa9d1
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 16 01:40:20 2005 +0100

    [NET] Reorder struct inet_sock
    
    tos: int -> 8bit
    uc_ttl: int -> 16 bit
    cmsg_flags: int -> 16 bit
    hdrincl: 8bit -> 1 bit
    mc_loop: 8bit -> 1 bit
    
    Saves 12 bytes together with the reordering.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cda61e3d87e6d457f9cbd99560eab501d9c6a89b
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:29:32 2005 -0800

    [PATCH] Fix PA-RISC IDE macros
    
    Fix prototype of __ide_mm_{in,out}{sw,sl} function prototypes
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 299a76539e49c34252e6d4e0d1732ea370656d9e
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:29:15 2005 -0800

    [PATCH] Fix PA-RISC put_user
    
    Some put_user() callers mismatch the type of the object and the pointer.
    Since PA-RISC is big-endian, the wrong bits were being copied to userspace.
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4305dde5c99fdd0781d04bd8247b8f7d7ae7dbbc
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:28:57 2005 -0800

    [PATCH] PA-RISC Harmony update
    
    Minor line wrapping fix
    
    From: Kyle McMartin <kyle@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dd3784d80c355267950fc9ed8db97fea416c05a
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:28:40 2005 -0800

    [PATCH] PA-RISC MUX device is not a boot console
    
    MUX should never have had CON_BOOT set
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b10b5a3e979e15e887985aea461538f817b3920
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:28:24 2005 -0800

    [PATCH] drivers/parisc: Convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    (from:http://kerneljanitors.org/TODO).
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbd6064e48c8efa47163bfac16afdc09426a55bd
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:28:07 2005 -0800

    [PATCH] PA-RISC power controller update
    
     - Small cleanups to LED/LCD support code
    
    From: Grant Grundler <grundler@parisc-linux.org>
     - asm/irq.h is unnecessary
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12aaf8e1ed9c4a9c96b06553846dedb43fa5a818
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 15 16:27:51 2005 -0800

    [PATCH] Update PA-RISC documentation directory
    
    IODC.txt and mm were removed ages ago
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af5c6dc592a895850d1ccd7e240884233d3f3bd4
Merge: 9741534... 345f0c6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 15 15:46:29 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 97415342a323823d0104f0e792bfe6d316d835d1
Merge: e8006df... 119eac4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 15 15:30:11 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 90127915d7305de50ff91cd9e848de60ec4e0f3a
Author: Dave Jones <davej@redhat.com>
Date:   Tue Mar 15 23:07:13 2005 +0100

    [WATCHDOG] Makefile-patch
    
    The comment at the top of the Makefile suggests that the current
    ordering is incorrect.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit eb63740ad145546e4d84c4854b9df7fb8eb8a1a6
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Mar 15 22:53:50 2005 +0100

    [WATCHDOG] pcwd_pci-register-driver-patch
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit e25bd0003c36bc34558355ef771b79ecc8847e40
Merge: e8006df... 2d1d9c2...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 15 16:49:22 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 081a07d5db31be41bb19abecdb7b9b16a6b9a2d6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Mar 15 22:39:19 2005 +0100

    [WATCHDOG] s3c2410-divide-patch
    
    The s3c2410 watchdog driver has an incorrect /2
    in the timer calculation, fix this problem
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>

commit a9d07907af186d03ae0673f9973552baccac495e
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Mar 15 22:32:57 2005 +0100

    [WATCHDOG] pcwd_usb: usb_control_msg-timeout-patch
    
    set timeout in usb_control_msg to USB_COMMAND_TIMEOUT instead of a
    full second.

commit 119eac40d93ec0536a6066009d759bab785b74d6
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue Mar 15 11:08:22 2005 -0800

    [IPV6]: Fix non-modular build.
    
    Remove __exit from functions calls from functions
    other than module_exit().
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 345f0c6e071eb634521db00115f9f348ca2bb8d5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 15 04:34:36 2005 -0800

    [SPARC64]: Override {pgd,pmd}_addr_end() to handle vaddr hole.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e8006df818594b536bcc74b927f9e66b65654ea7
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Tue Mar 15 03:44:28 2005 -0800

    [PATCH] NFS: Ensure that dirty pages are written with the right creds.
    
     When doing shared mmap writes, the resulting dirty NFS pages may
     find themselves incapable of being flushed out if I/O is started
     after the file was released.
     Make sure we start I/O on all existing dirty pages in nfs_file_release().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52898b44ec51d872081a924612d7e864b0859791
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Mar 15 03:37:28 2005 -0800

    [PATCH] Fixes to mmtimer driver
    
    Fix the issue that the timer sometimes will not fire if the scheduled time
    has already expired.  Plus some simplifications and style changes.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Dimitri Sivanich <sivanich@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a832e2275731847c15a2757f9df55634a4325d85
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Mar 15 03:37:12 2005 -0800

    [PATCH] fs/proc/base.c - fix sparse errors
    
    Rewrite initialiser for proc_oom_adjust_operations, and add __user
    annotations to oom_adjust_{read|write}
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2713c436910e9b9a5607b7435df5a01accef28d1
Author: Jesse Barnes <jbarnes@engr.sgi.com>
Date:   Tue Mar 15 03:36:55 2005 -0800

    [PATCH] gcc4 fix for sn_serial.c
    
    The sal_console and sal_console_uart structures have a circular
    relationship since they both initialize member fields to pointers of one
    another.  The current code forward declares sal_console_uart as extern so
    that sal_console can take its address, but gcc4 complains about this since
    the real definition of sal_console_uart is marked 'static'.  This patch
    just removes the static qualifier from sal_console_uart to avoid the
    inconsistency.
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98fc640fc3dd280c712bb4c77141f599d2f83d00
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Tue Mar 15 03:36:39 2005 -0800

    [PATCH] use strncpy in get_task_comm
    
    Set_task_comm uses strlcpy, so get_task_comm must use strncpy.
    
    Signed-Off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b291c0243ab9a60fc651166ee68cda9b3755335
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 03:36:22 2005 -0800

    [PATCH] ia64 msi build fix
    
    drivers/pci/quirks.c:pci_msi_quirk is only defined if CONFIG_X86_IO_APIC, but
    msi_init() unconditionally uses it.
    
    Acked-by: "Nguyen, Tom L" <tom.l.nguyen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79da696f2cbdaa4dd78d5ec536cc2512d9751738
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 03:36:06 2005 -0800

    [PATCH] dvb pll warning fix
    
      CC [M]  drivers/media/dvb/frontends/dvb-pll.o
    drivers/media/dvb/frontends/dvb-pll.c:38: warning: excess elements in array initializer
    drivers/media/dvb/frontends/dvb-pll.c:38: warning: (near initialization for `dvb_pll_thomson_dtt7579.entries')
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6544701728209e6d5311884856dff59d1fea5f9
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 03:35:49 2005 -0800

    [PATCH] saa7134 !CONFIG_MODULES build fix
    
    drivers/media/video/saa7134/saa7134-core.c: In function `saa7134_fini':
    drivers/media/video/saa7134/saa7134-core.c:1215: `pending_registered' undeclared (first use in this function)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d6b0e2ab7d00ca48ccb7a84a7b80aaac69c3b76
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 03:35:33 2005 -0800

    [PATCH] esp build fix
    
    We forgot to add the spinlock to the device structure.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05177e128001e565f291d5d781f471d6e133fc0f
Merge: 5c64e94... 7bcfc31...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 15 01:07:22 2005 -0800

    Merge bk://linux-scsi.bkbits.net/scsi-for-linus-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 5c64e94a6a835200ff475238e1a9a32b39d94c62
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Tue Mar 15 06:12:11 2005 -0600

    From: 	James.Smart@Emulex.Com
    
    FC Remote Port Patch
    
    This is the reworked patch for fc_remote ports.
    It started with the "patch2" converted for scsi-misc-2.6 (and
    updated for the revised midlayer scsi target implementation)
    Incorporates Andrew Vasquez's updates
    Adds scsi target scanning on behalf of the driver based on
    addition of a per-host workq.
    
    This patch adds support for FC Remote Ports (which may or may not
    be FCP targets) to the fc transport. The attributes for the ports are
    in support of HBAAPI. This patch also implements consistent scsi target
    id bindings for the remote ports.
    
    This patch also moves the dev_loss attribute from the target-level
    fc_transport device to the remote port device. It also deletes the
    link_down attribute. The fc_target_block and fc_target_unblock
    routines have been replaced by fc_remote_port_block and
    fc_remote_port_unblock. The fc_host_block/unblock functions have
    been removed (unused).
    
    A new interface has been created - fc_remove_host(), which a driver
    must call immediately prior to scsi_remove_host() when unloading.
    This tears down the transport, starget, and sdev devices.
    The transport, which utilizes the midlayer mods to insert transport
    entities between the shost and starget, results in a device tree
    such as the following:
    
      /sys/class/fc_host/host4/device/rport-4:0-0/target4:0:0/4:0:0:0
    
    Signed-off-by: James Smart <james.smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3cb8085939aaa116a3aff02f6dda95c7aed1e0fc
Author: James Smart <james.smart@emulex.com>
Date:   Tue Mar 15 05:58:52 2005 -0600

    [PATCH] add per scsi-host workqueues for defered processing
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit eec217ebb1a7a2f6ced0d6871b741df878985c51
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Tue Mar 15 05:49:34 2005 -0600

    [PATCH] target code updates to support scanned targets
    
    * add scsi_target_block() and scsi_target_unblock() routines which
      take a generic-device.  Side note:  there are mixture of
      scsi_<object>_<action>() and scsi_<action>_<noun>() functions defined
      in the scsi APIs -- going forward are there any 'guides' or
      suggestions on which to choose?
    * modify scsi_remove_target() to take a generic-device.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 995f8ecfe2695d40227774acc689c6bb389bf1f7
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 15 04:38:02 2005 -0600

    [PATCH] st msleep warning fix
    
    drivers/scsi/st.c:805: warning: implicit declaration of function `msleep_interruptible'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7bcfc31891dc3511f316393dd0c4d05a5c95eddf
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 15 00:12:13 2005 -0800

    Revert recent NUMA and pgd_index() fixes, since they show regressions.
    
    People are investigating.
    
    Cset exclude: davem@sunset.davemloft.net|ChangeSet|20050315051617|44508
    Cset exclude: kravetz@us.ibm.com[torvalds]|ChangeSet|20050314002422|18516

commit 5055b1345ca688b0070621fe56f59fab020acbb9
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Tue Mar 15 01:52:18 2005 -0600

    [PATCH] SCSI tape security: require CAP_ADMIN for SG_IO etc.
    
    The kernel currently allows any user permitted to access the tape device file
    to send the tape drive commands that may either make the tape drivers internal
    state inconsistent or to change the drive parameters so that other users find
    the drive to be unusable. This patch changes ioctl handling so that SG_IO,
    SCSI_IOCTL_COMMAND, etc. require CAP_ADMIN. This solves the consistency
    problems for SCSI tapes. The st driver provides user-accessible commands to
    change the drive parameters that users may need to access.
    
    The SCSI command permissions were discussed widely on the linux lists but this
    did not result in any useful refinement of the permissions. It may very well
    be that the tape drives are the only devices that users are sometimes given
    permissions to access and that have security problems with the current command
    filtering. This patch solves the problem for tapes and no more elaborate
    patches are needed.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8936f70a1ee228b1bc90c0a90171700cbf2ce89d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 14 23:50:14 2005 -0800

    Linux 2.6.11.4

commit 43e79be5c1ab7dae2a11e53c8bb650b06c82ad59
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Tue Mar 15 01:48:37 2005 -0600

    [PATCH] SCSI tape fixes: remove f_pos handling
    
    This patch applies over the previous patch in this thread. The patch removes
    updating filp->f_pos. It has been dead code since 2.6.8 and nobody has missed
    it.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e8ad22baee71611c026e478f8132fb7f47b79a29
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Tue Mar 15 01:41:31 2005 -0600

    [PATCH] SCSI tape fixes (new version): sense descriptor
    
    This patch changes the sense descriptor initialization a little faster.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 93bf18c70ba9d6ca8c85d4ced4cdc8974b66dcd7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 14 23:39:08 2005 -0800

    [PATCH] use strncpy in get_task_comm
    
    From: Prasanna Meda <pmeda@akamai.com>
    
    Set_task_comm uses strlcpy, so get_task_comm must use strncpy.
    
    Signed-Off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2b68239ff70ab5ff848181db88a967b67f744e25
Author: Paul Mackerras <paulus@au1.ibm.com>
Date:   Mon Mar 14 23:38:47 2005 -0800

    [PATCH] CAN-2005-0384: Remote Linux DoS on ppp servers
    
    Martin Schulze writes:
    
    > Ben Martel and Stephen Blackheath have discovered a denial-of-service attack
    > that a client of pppd can make that can hang the server machine.  The bug is
    > in the Linux kernel 2.6 (tested on 2.6.9), but it looks like it also exists
    > in the 2.4 series.
    
    Yes, this is my bug. :(
    
    I would just do this instead:
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d1d9c276cadbe2e805a56fb7e069e62dbb3afc4
Merge: 4df73de... 5f5cb8b...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 15 01:43:06 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit f923bca217b754f6c593e5d7f76a7e301c87b52f
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Mar 14 22:42:54 2005 -0600

    [PATCH] aacraid: adapter naming fix
    
    From Mark Salyzyn at Adaptec.
    
    This fixes the way the aac device's id is calculated.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3bdb1c261fd753dc5cabaf17287036e7d9b576a4
Author: Mike Anderson <andmike@us.ibm.com>
Date:   Mon Mar 14 22:39:37 2005 -0600

    [PATCH] SCSI: Add TASK_ABORTED to status_byte macro
    
    Add TASK_ABORTED and ACA_ACTIVE to status_byte macro.
    
    Signed-off-by: Mike Anderson <andmike@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bb0d28aa64b2da37b3d5e46dd0ad9735f244b5a5
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Mon Mar 14 22:37:07 2005 -0600

    [PATCH] SCSI tape fixes: sense descriptor init, bsf->weof, blkno,
    
    Problems fixed:
    
    - the sense descriptor is cleared before filling
    - BSF and BSFM are added to the commands causing automatic writing of filemark
      if the previous operation was write (tar expects this)
    - the block number is set to unknown (-1) if spacing forward ends at BLANK CHECK
    - debugging printout of spacing counts fixed to work also with 64-bit systems
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cf65abbccf9caba28fdf1ce5ecec184e2e23f0b2
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Mon Mar 14 21:42:42 2005 -0600

    SCSI: dc395x.c add missing #include <linux/vmalloc.h>
    
    Prevents a compile warning about vmalloc/vfree being undefined
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0600d2becc7d069d7b48798bcb9c2bb10349234a
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Mon Mar 14 21:41:22 2005 -0600

    SCSI: fix transport statistics mismerge
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dac1ab6d51e08056b0aac8889cf7c33fd7bf3702
Merge: 4df73de... bd210e3...
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Mon Mar 14 21:33:30 2005 -0600

    Merge by hand
    
    pci_ids.h (removal of on ID next to addition of another)
    scsi_transport_iscsi.c: change of attribute_container_unregister
    to transport_container_unregister.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7b2f228564901f63a8de2632f38f994f12d0b35d
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Mar 14 21:16:28 2005 -0600

    JFS: Don't clobber wait_queue_head while there are waitors on it
    
    The resize code closes down the log and reinitializes it in another location
    on the disk.  The problem is that it re-initializes a wait_queue_head while
    there are waitors waiting for the resize to be completed.  The result
    is that the waitors are never awakened.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 581bdf781ef5a04e44ca5f43e4004c3ffe43a2d4
Merge: 3ea6f49... 7240cf4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 14 18:56:50 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 3ea6f4950dc8bf6e81bd3cdc47aeba298ef797bd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 14 18:26:35 2005 -0800

    [NET]: Remove fc_type_trans()
    
    The only user of fc_type_trans (drivers/net/fc/iph5526.c) is removed in
    Linus' tree.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7240cf479b2219b02796dde0d8163b8b3848f89e
Merge: 4df73de... 5ff7310...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 14 18:23:14 2005 -0800

    Merge bk://linux-dj.bkbits.net/agpgart
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 5ff7310cb97572d4c0d38971f26d95b9e9b15f77
Author: Dave Jones <davej@redhat.com>
Date:   Tue Mar 15 02:38:47 2005 -0500

    [AGPGART] Enable Intel AGP support for x86-64 again.
    
    The previous commit that killed off the _mch driver forgot
    to reenable the old driver.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 294e2ad614cc2b83a159c5fd651ea45fbb8004bd
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 18:21:42 2005 -0800

    [NET]: Replace dst_pmtu with dst_mtu
    
    This patch replaces most of the other uses of dst_pmtu with dst_mtu.
    As far as I can tell these are either identical because dst->path == dst,
    or they're a straightforward replacement of (the slightly incorrect)
    dst_pmtu(dst) - dst->header_Len with dst_mtu(dst).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4230b1beac503b01a73b26e243a50439f08c840b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 18:19:37 2005 -0800

    [IPV4/IPV6]: Take IPsec overhead into account in tunnels
    
    This patch uses dst_mtu instead of dst_pmtu in the various tunnel
    implementations.  As it is they simply ignore the IPsec overhead.
    This leads to bogus MTU values inside the tunnels.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 51382d091af023f037458f695d5ce496e7a96913
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 18:18:07 2005 -0800

    [IPV4/IPV6]: Fix IPsec calculation in ip_append_data/ip6_append_data
    
    This patch fixes the IPsec overhead handling in ip_append_data and
    ip6_append_data.  As it is they assume that the IPsec overhead is
    constant.  This is not true as with ESP the IPsec overhead will vary
    as the MTU varies.
    
    The result is that they may produce packets that will exceed the MTU
    when ESP is used.  Had it taken the trailer_len into account, it would
    have produced packets less than the real MTU.
    
    By switching to dst_mtu we get the optimal result.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e5c060bb5321ac2b381b27ceea63c964b81277e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 14 18:16:32 2005 -0800

    [NET]: Need to export dev_get_flags() to modules.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 02b6caaaa899bb1c030baf08d714d744a6c5dfa1
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Mar 14 23:26:39 2005 +0000

    [ARM PATCH] 2535/1: RPC - VIDC_BASE `void __iomem *` annotation
    
    Patch from Ben Dooks
    
    Add `void __iomem *` to VIDC_BASE
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8fcd935b8652c6993ee6a76307812a843823a46
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Mar 14 23:07:28 2005 +0000

    [ARM PATCH] 2538/1: S3C2410 - ADC IRQ correct edge handling
    
    Patch from Ben Dooks
    
    The S3C2410 ADC+TC interrupt where being registrered as
    edge-sensitive IRQs, but the code was handling them as
    if they where level-sensitive.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1b12a3a9cd965edeb5173d8343a64cb116c07b0a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Mar 14 22:46:53 2005 +0000

    [ARM PATCH] 2537/2: S3C2410 - fix iomem warnings from sparse
    
    Patch from Ben Dooks
    
    Change all S3C24XX_VA defines to have the type `void __iomem *`
    and the necessary changes to the other bits of the s3c24xx
    support.
    Note, the map_desc will need changing in the future to allow
    `void __iomem *` instead of an unsigned long for IO
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 65850f34fdce590eb45865234eb06d1ac3ccc7a4
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 14 07:57:02 2005 -0800

    USB: fix cpia_usb driver's warning messages in the syslog
    
    This fixes the cpia driver to call usb_kill_urb() instead of
    usb_unlink_urb() which reduces the ammount of syslog messages when
    kernel debugging is enabled.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd210e30da74cd7e156bcac85388642fab2aea2c
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Mon Mar 14 09:34:59 2005 -0600

    Add statistics to generic transport class
    
    These were lost from the SCSI transport classes in
    the transition to the generic classes.  Ressurect it in
    the generic class, since it's probable that more than SCSI
    will want to use this.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4df73de0f5533d0040d0801b9c24657cbbe818b8
Merge: d50485c... 0b58009...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 14 07:20:38 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit d50485cb64f3f8558cf678bae9624e8d0ad8960d
Merge: 8c736c0... 18e71a8...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 14 07:10:38 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a668bb42330bc190da69842cfcc82113fbf91cb8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 14 06:57:48 2005 -0800

    [PATCH] USB: minor cleanup of string freeing in core code.
    
    As pointed out by Paulo Marques <pmarques@grupopie.com>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e8772a64f96090f979c4925ca5d7fc9333486f97
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 14 06:57:23 2005 -0800

    [PATCH] USB: optimize the usb-storage device string logic a bit.
    
    As pointed out by Alan Stern <stern@rowland.harvard.edu>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a9cbe6ab263531d3bc47df2b2ab51306ca320864
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 08:55:14 2005 -0600

    [PATCH] ipr: Handle new RAID 6 errors
    
    This patch allows ipr to properly log 2 new RAID 6 related
    errors.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 18e71a890416aec33a259971b3f66e43b6714262
Author: Robert Olsson <robert.olsson@data.slu.se>
Date:   Mon Mar 14 05:43:50 2005 -0800

    [PKTGEN]: Fix thread_lock() usage.
    
    The current code bombs out with preemption enabled.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 649f575dfad4d98bee1980310a91b92ec0b86ba8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:41:19 2005 -0800

    [NETFILTER]: ipt_hashlimit.c needs lockhelp.h
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb081ed71d01d89f5ce985ed81ccf8c9b6f1e2c5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Mar 14 05:39:50 2005 -0800

    [BRIDGE]: No update when hold time is zero
    
    Some users, set hold time to zero on bridge so it always does
    flooding. This is usually when using it with wireless.  The new RCU
    based code changed the behaviour so the bridge would not flood for
    one GC interval. This patch restores the original behaviour.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fba1111a64344ced80abfd3baa1fe837640c2e9b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:38:52 2005 -0800

    [IPSEC]: Do not hold state lock while checking size.
    
    This can elicit ICMP message output and thus result in a
    deadlock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0172d20ed1486cb39db4c757e9a5e10f56678bea
Author: Andre Tomt <andre@tomt.net>
Date:   Mon Mar 14 05:36:52 2005 -0800

    [TCP]: Fix gcc-3.4 build when TCP_DEBUG is disabled in tcp.h
    
    Signed-off-by: Andre Tomt <andre@tomt.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 770ce0ff771dc33395c6e9a30c4f812eb7e1c7de
Author: Harald Welte <laforge@gnumonks.org>
Date:   Mon Mar 14 05:35:35 2005 -0800

    [NETFILTER]: ipt_hashlimit: use | instead of & for correct hash key
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f859721814f7c66792e81f14bf8ffa74d2d39a3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 14 05:29:54 2005 -0800

    [AX25]: Fix ax25_get_socket locking
    
    In an attempt to return a locked socket ax25_get_socket() was calling
    lock_sock() with a spinlock held, bad idea.  Making matters worse it's
    only user is running in bottom half context resulting in a potencial
    attempt to sleep in bottom half context, so fix the locking there as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 400aee84461e5a374138f27ca1b5d0e3b4bb2702
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:28:10 2005 -0800

    [NETLINK]: Fix multicast bind/autobind race
    
    netlink_autobind has always set nlk_sk(sk)->groups to zero.  This is
    unnecessary because sk_alloc already zeroes the entire structure.
    Since a socket can only be bound once netlink_autobind doesn't need
    to zero groups at all.
    
    This had been safe until I added mc_list.  Now it is possible for
    netlink_bind to race against netlink_autobind running on the same
    socket on another CPU.  The result would be a socket that's on
    mc_list with groups set to zero.  This socket will be left on the
    list even after it is destroyed.
    
    The fix is to remove the zeroing in netlink_autobind.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c8e4372854b950bd8ba56c4f53eb6d00c4fbaae
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:27:07 2005 -0800

    [IPV6]: Reload skb->dst after xfrm6_route_forward()
    
    While replacing dst_pmtu in ip6_output I found this little gem.  In
    ip6_forward we're not reloading the dst pointer after calling
    xfrm6_route_forward.  So all subsequent dereferences of dst will
    refer to its pre-IPsec value.
    
    The solution is of course to refresh its value.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 453b67316f8c0e74bcb311d2e10a5d05b348f558
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:26:23 2005 -0800

    [IPSEC]: Fix room calculation in icmp_send
    
    I'm now cleaning up all users of dst_pmtu with the aim of replacing
    dst_pmtu with dst_mtu.  I'm going to start with the ones that actually
    fix bugs.
    
    This patch fixes the length calculation in icmp_send.  As it is
    we're overestimating the space available by including the space
    that would be used up by IPsec encapsulation.
    
    IPv6 doesn't have this problem since its calculation is based
    on 1280 instead of the PMTU.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4193b1c2d308f5b3e593fa88cfc21183f2f63680
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Mar 14 05:25:12 2005 -0800

    [IPSEC]: Handle local_df in IPv4
    
    When cleaning up the remaining users of dst_pmtu I noticed that
    local_df wasn't being treated correctly in IPsec.  In fact, if
    you socket's dst went over IPsec, local_df is essentailly ignored.
    
    This patch fixes that.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff158ab3465864ae488c9bed06e3b26c7d30ccd2
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Mon Mar 14 05:22:31 2005 -0800

    [EBTABLES]: Fix smp race.
    
    The patch below fixes an smp race that happens on such systems under
    heavy load.
    This bug was reported and solved by Steve Herrell
    <steve_herrell@yahoo.ca>
    
    Signed-off-by: Bart De Schuymer <bdschuym@pandora.be>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 78fb7c45d3ce5dc80c893519e2e188220717d602
Author: Thomas Graf <tgraf@suug.ch>
Date:   Mon Mar 14 05:21:24 2005 -0800

    [IPV6]: Use dev_get_flags() while building inet6 ifinfo message
    
    Use dev_get_flags() in inet6_fill_ifinfo() to fetch interface flags
    to ensure correctly reporting IFF_PROMISC and IFF_ALLMULTI flags.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b5800967e4b15ad7a26609686a0ce576113f723
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 14 05:16:17 2005 -0800

    [MM]: Restore pgd_index() iteration to clear_page_range().
    
    Otherwise ia64 and sparc64 explode with the new ptwalk
    iterators.  The pgd level stuff does not handle virtual
    address space holes (sparc64) and region based PGD indexing
    (ia64) properly.  It only matters in functions like
    clear_page_range() which potentially walk over more than
    a single VMA worth of address space.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d87c8eda6f5df9650282fc2c097f72dcff9f0237
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 07:08:57 2005 -0600

    [PATCH] ipr: Bump driver version to 2.0.13
    
    Bump the driver version to 2.0.13
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8f99d13814be4ab34af9cfc001eb932e7a56fc3a
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 07:03:18 2005 -0600

    [PATCH] ipr: Send uevent change notifications
    
    Send scsi_host kobject uevent notifications for potential
    configuration changes. This small change allows userspace ipr
    apps to use netlink/uevent for configuration change notification
    instead of having to poll /sys for this information. These apps
    can already look for add/remove uevents for devices, but they also
    need to be notified when an adapter reset occurs, which is what this
    patch will do.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 937dbcc067d32771dc5416c002320ec6d14900d9
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:54:05 2005 -0600

    [PATCH] ipr: Sparse fixes
    
    Various fixes to make sparse happy
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 921e8e04772956f289dff7380a15c7b371fc4e06
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:47:30 2005 -0600

    [PATCH] ipr: Use bitwise types
    
    Change to use bitwise types for additional error checking by sparse
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1d7ac6807bd078619c47ec86e9f7303ba4b9f701
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:38:47 2005 -0600

    [PATCH] ipr: Remove tcq_active flag from resource entry
    
    Remove the tcq_active flag from the ipr_resource_entry struct
    since the same information is available through scsi core APIs.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 90a9ad7ba20f07a1ac7c6cc95b4148da1e3fa5f7
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:26:40 2005 -0600

    [PATCH] ipr: Remove resource qdepth field
    
    Remove qdepth field from the ipr_resource_entry structure since
    the same data is also available in the scsi_device struct.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a6ad5f15cac56ea4125c4f1229d65ba7bab52a95
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:07:58 2005 -0600

    [PATCH] ipr: Remove tcq_enable device attribute
    
    Remove driver specific tcq_enable attribute now that change_queue_type
    API has made it redundant.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3e1398e7c84b85366f2d11bf465933124a20f480
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 06:02:30 2005 -0600

    [PATCH] ipr: Use change queue type API
    
    Use new change_queue_type API.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fe60e694d115728601f9b6301b07fae6b7da62df
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 05:45:25 2005 -0600

    [PATCH] ipr: Fast failure module options
    
    Since the ipr adapter initialization is performed by waiting for
    an interrupt to occur and this is the first interrupt ever received
    from the adapter, and the timeout for this interrupt is 5 minutes,
    failed ipr adapters can halt the boot process for a long time.
    In certain environments, it makes sense to not try as hard to get
    the adapter working and just fail the adapter. This patch adds
    two module parameters to modify the adapter initialization sequence.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1da2f358fbe5f9aada9eb72cc51d46651912e779
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 05:38:43 2005 -0600

    [PATCH] ipr: Support dynamic IDs
    
    Fixes ipr to handle dynamic pci ids by searching for the adapter
    chipset in the probe routine if driver_data is NULL.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b4982c684ef26ea544a69c2b4b751323f6f05a19
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 05:23:00 2005 -0600

    [PATCH] ipr: Setup max_sectors based on device type
    
    The ipr family of adapters is capable of handling data transfer sizes of
    16777215 bytes. Logical disk array devices under ipr are capable of only
    256k transfer lengths. Patch sets max_sectors of the adapter to 32767 and
    overrides max_sectors for the logical disk array devices in the
    slave_configure routine.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2ef2a2d5dc5950e0a9d20e2dab08b65d56d31897
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 05:17:29 2005 -0600

    [PATCH] ipr: Device remove cleanup
    
    If a device disappears across an adapter reset, ipr schedules the device to be
    removed from scsi core. Any ops sent to that device prior to its actual removal
    end up getting sent to the adapter using a now invalid adapter resource handle.
    Usually, the adapter will just fail the command and the failure will end up
    looking like a selection timeout, but it is possible the resource handle
    has been re-used by the adapter and we could be sending an op to a different
    device than we think we are. This patch closes this window.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 619c4e95de187b46888c62218b612e34510f5361
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 05:06:25 2005 -0600

    [PATCH] ipr: New adapter support
    
    Add support for some new adapters.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c84f3891d70f0125ea9c3ba1c701fffb7412fcc5
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 04:51:13 2005 -0600

    [PATCH] ipr: PCI ID table update
    
    Remove an adapter from the table that never shipped.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0eb94cb2575a49fc96702a20f6bcd7c07988a4ef
Author: Brian King <brking@us.ibm.com>
Date:   Mon Mar 14 04:36:31 2005 -0600

    [PATCH] PCI: update ipr PCI ids
    
    Add some new IPR adapters and remove one. These ids have already been
    entered into http://pciids.sourceforge.net.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 53654f8078120a1ad3a19dc90ad563eb592a8cb4
Merge: 91e5a30... 4aac175...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 14 01:19:59 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 13d5e44c095f59ec25c0b129d94268951e45ed0b
Merge: 91e5a30... d01d5ec...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 13 19:48:37 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into sunset.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 602fa93133b797d5ad5166ce5cacaaee7a6f081a
Author: Steve French <stevef@smfhome.smfdom>
Date:   Sun Mar 13 21:03:04 2005 -0600

    [CIFS] whitespace cleanup
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit d01d5ec74a6078860dbe08056a2385aa5863e40f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 13 18:26:30 2005 -0800

    [SPARC64]: check_bugs() should be __init.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c736c01cc90e7f22ae6aa6af4a78b1ebf7cb17a
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Mar 13 18:09:43 2005 -0800

    Fixup 2.6.11.3 merge by hand.

commit 9de0077f948c294b6e54d449e8fd28ff299187d6
Merge: 91e5a30... 542d0e2...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Mar 13 18:02:44 2005 -0800

    Merge 2.6.11.3 into mainline

commit 229a5817b4c90264fb5f330a1dbf0c3af57b6b89
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Mar 13 20:16:48 2005 +0000

    [ARM PATCH] 2536/1: SA1100 - serial sparse error
    
    Patch from Ben Dooks
    
    Fix the mapbase to have __iomem
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2d99f599617357ac8b21dd87de28c978687a665a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Mar 13 20:08:51 2005 +0000

    [ARM PATCH] 2532/1: CLPS7500 build fix
    
    Patch from Ben Dooks
    
    Fixed missing sys_timer from timer initialisation,
    renamed platform_register_device to platform_device_register
    and ensured that the machine init is called.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dac5e7e93dc65e36e8d4dd190fd726167eb0dfab
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Mar 13 20:01:23 2005 +0000

    [ARM PATCH] 2531/1: S3C2410 - OTOM1.1 and Nexcoder 2440 support
    
    Patch from Ben Dooks
    
    Support for OTOM v1.1 and Nexcoder 2440, from Guillaume Gourat.
    
    Signed-off-by: Guillaume GOURAT
    Cleaned up for submission, and brough up-to-date by Ben Dooks
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3b23039f44fefd428d02bc41c27c6f37b495f017
Author: George G. Davis <gdavis@mvista.com>
Date:   Sun Mar 13 19:53:20 2005 +0000

    [ARM PATCH] 2529/1: Add semtimedop support - semop() with a timeout (with demuxed IPC syscall entry added)
    
    Patch from George G. Davis
    
    Adds ARM support for the semtimedop() function - semop with a timeout.
    This updates ARM with same support added for other archs long ago.
    Also includes sys_semtimeop syscall table entry appended to end of
    syscall table as per RMK\'s request.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a69bdcbe6c2738b1f490efe0fdae01e9975bc444
Merge: e6d8676... d375cab...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 12:07:55 2005 +0100

    Merge mars.ravnborg.org:/home/sam/bk/linux-2.6
    into mars.ravnborg.org:/home/sam/bk/kconfig

commit 91e5a305728308729d8876f479f27e9ff927cf34
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 01:00:36 2005 -0800

    [PATCH] i386/power/cpu.c: remove three unused variables
    
    This patch removes three unused variables.
    
    Pavel Machek and H. Peter Anvin have already confirmed it's correct.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dda40805bcbcf22ec00a2fa8b11660ffcb129acc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 01:00:19 2005 -0800

    [PATCH] unexport kmap_{pte,port} on !ppc
    
    I haven't found any modular usage of kmap_{pte,port} on !ppc in the
    kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 045c7d6fdd4af43b20778055d9e1af9e7e486e18
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 01:00:02 2005 -0800

    [PATCH] unexport *flush_tlb_all
    
    flush_tlb_all was exported on i386 for a DRM usage - that was removed
    in 2003.
    
    I haven't found any modular usage of *flush_tlb_all in the kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a9a7314968d98de546b97d4f5f956172a07380e
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:59:43 2005 -0800

    [PATCH] drivers/macintoshisdn/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 620859d1c6fdc886bec3244d74f19ffb3a8c8fb3
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:59:25 2005 -0800

    [PATCH] macintosh/mediabay: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to guarantee the
    task delays as expected.  Also remove macro MS_TO_HZ() and replace with
    msecs_to_jiffies().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by:: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5014788de34cb1b3340f5cc84b10d7e2619d8e61
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sun Mar 13 00:59:07 2005 -0800

    [PATCH] mips: fix section type conflict about mpc30x
    
    This patch fixes section type conflict about mpc30x
    
      CC      arch/mips/pci/fixup-mpc30x.o
    arch/mips/pci/fixup-mpc30x.c:26: error: internal_func_irqs causes a section type conflict
    make[1]: *** [arch/mips/pci/fixup-mpc30x.o] Error 1
    make: *** [arch/mips/pci] Error 2
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed826042e4b607217dbd67a3dbad938ab0d7d646
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:58:49 2005 -0800

    [PATCH] list_for_each_entry: arch-um-drivers-chan_kern.c
    
    Make code more readable with list_for_each_reverse.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cecdb36fbf0517c351aec1c87602c771cb3dc296
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:58:31 2005 -0800

    [PATCH] char/istallion: replace interruptible_sleep_on() with wait_event_interruptible()
    
    Use wait_event_interruptible() instead of the deprecated
    interruptible_sleep_on().  The replacements were all straight-forward as every
    sleep was conditionally-looped.  Patch is compile-tested (still warns about
    {save,restore}_flags(),cli()).
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfdcfd635488801ac714ef0fb773995351c134d5
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:58:13 2005 -0800

    [PATCH] char/lp: remove interruptible_sleep_on_timeout() usage
    
    Replace deprecated interruptible_sleep_on_timeout() function calls with direct
    wait-queue usage.  There may be an existing problem with this driver, as I am
    not finding any wake_up_interruptible() callers for the waitq.  Patch is
    compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 962fa8018f8d248660aa82f3f5474e397820b5bc
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:57:55 2005 -0800

    [PATCH] drivers/eisa/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddbfa651f559a7fb0be1f78c48e3a027f63bf671
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:57:38 2005 -0800

    [PATCH] drivers/message/fusion/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b5e7ff2fb03a54440d55a4a1d7f9829bdd223fa
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:57:19 2005 -0800

    [PATCH] message/mptbase: replace schedule_timeout() with ssleep()
    
    Use ssleep() instead of schedule_timeout() to guarantee the task delays as
    expected.  The original code does use TASK_INTERRUPTIBLE, but does not check
    for signals or early return from schedule_timeout() so ssleep() seems more
    appropriate.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb96b6e26221877a2a6edcbc5ef5b5e5453ae3fb
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:57:02 2005 -0800

    [PATCH] drivers/isdn/hardware/avm/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1102d90d54eee4ffdb6518519a887b1463a2ee78
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:56:43 2005 -0800

    [PATCH] delete unused file drivers_char_hp600_keyb.c
    
    Remove nowhere referenced file. (egrep "filename\." didn't find anything)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcd2db4efd406a3a90fd80f7ac57d21b06c0766e
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:56:28 2005 -0800

    [PATCH] tc/zs: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64c3ae43c78ad9713c9d9dc6605f954df2d3cbe0
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:56:09 2005 -0800

    [PATCH] ftape/fdc-io: insert set_current_state() before schedule_timeout()
    
    Inserts a set_current_state(TASK_INTERRUPTIBLE) before the schedule_timeout()
    call.  Without this change, after the first iteration of the loop,
    schedule_timeout() will not only return immediately, but the loop will break,
    as the conditional will no longer be satisfied.  In fact, this conditional
    makes little sense given the workings of schedule_timeout.  The timeout
    variable is ignored, as well, and I'm fairly certain that it should be
    included in the loop conditional.  That way, if the timeout expires before a
    signal hits, -ETIME will be returned by fdc_interrupt_wait() instead of
    -EINTR.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fd06db336e23c9149cf58668d0aa22d1928a102
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:55:52 2005 -0800

    [PATCH] serial/crisv10: replace schedule_timeout() with msleep()
    
    Use msleep() instead of schedule_timeout() to guarantee the task delays as
    expected.  The current code uses TASK_INTERRUPTIBLE, but does not care
    about signals, so I believe msleep() should be ok.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8fbbeb85d19dc92d89057f6a8ecc349c5d0e9ed
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:55:33 2005 -0800

    [PATCH] char/sx: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() to guarantee
    consistent timing regardless of HZ value.  schedule_timeout(1) will vary
    between 10 and 1 milliseconds, depending on the value of HZ (100 or 1000
    respectively).  For consistent behavior, msleep_interruptible() should be
    used.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6eeee1a9f600f06e208356243f582b7376a821f4
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Mar 13 00:55:16 2005 -0800

    [PATCH] char/hvsi: use wait_event_timeout()
    
    Use wait_event_timeout() in place of custom wait-queue code.  The code is
    not changed in any way (I don't think), but is cleaned up quite a bit (will
    get expanded to almost identical code).
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 291e276aa8c2f8ec2566aa5fd34e2ab89c86e214
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:54:58 2005 -0800

    [PATCH] char/snsc: reorder set_current_state() and add_wait_queue()
    
    Reorder add_wait_queue() and set_current_state() as a signal could be lost in
    between the two functions.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6fb6f26885395b4bec7ef600020a75b2bb38abe
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:54:41 2005 -0800

    [PATCH] scripts/mod/sumversion.c: replace strtok() with strsep()
    
    Replaces strtok() with strsep()
    
    Signed-off-by: Nicolas Kaiser <nikai@nikai.net>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 853877cfe8e07c963efb9af4caa1d4d35707131e
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:54:23 2005 -0800

    [PATCH] Unified spinlock initialization include/linux/wait.h
    
    Unify the spinlock initialization as far as possible.
    
    Signed-off-by: Amit Gud <gud@eth.net>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2077e5e3292d51e1049f1538f7260219101347de
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:54:05 2005 -0800

    [PATCH] radio-sf16fmi boot parameter cleanup
    
    Remove the `sf16fm=' kernel boot parameter.  Users must switch to
    `radio-sf16fmi.io='
    
    Signed-off-by: Marcel Sebek <sebek64@post.cz>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 943df21e28d625d68cc6ccc6765d55e3b01cfc79
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:53:48 2005 -0800

    [PATCH] i386/traps: replace schedule_timeout() with ssleep()
    
    Use ssleep() instead of schedule_timeout() to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77f6425b75b21f371aa1a04c0c57052288197a83
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:53:31 2005 -0800

    [PATCH] gus_wave.c - vfree() checking cleanups
    
    gus_wave.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1995c1867e4379905bf2b0c7b6c3f87f7c064c1
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Mar 13 00:53:14 2005 -0800

    [PATCH] list_for_each_entry: arch-i386-mm-pageattr.c
    
    Make code more readable with list_for_each_entry*
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b819b55072ce6b2f7314f3b91f89a3f0f51c6f2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:52:56 2005 -0800

    [PATCH] unexport pcibios_penalize_isa_irq
    
    I haven't found any possible modular usage of pcibios_penalize_isa_irq
    in the kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 092884739debb6df215322ae2b8835ec6cf7af16
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:52:38 2005 -0800

    [PATCH] i386: unexport dmi_get_system_info
    
    I haven't found any possible modular usage of dmi_get_system_info in the
    kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44b099e06b95824a1e08763ffa667b94d2432c4f
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:52:20 2005 -0800

    [PATCH] hweight: typecast return types
    
    Make hweight() macros return unsigned int for 8,16,32 bits,
    instead of requiring callers to do that.
    
    drivers/input/joystick/analog.c:414: warning: int format, different type arg (arg 3)
    drivers/input/joystick/analog.c:414: warning: int format, different type arg (arg 4)
    drivers/input/joystick/analog.c:418: warning: int format, different type arg (arg 4)
    
    Note:  does not address parisc, s390, or sparc64...
    waiting for comments.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6179c472eb92140e57a3944004846a2b61c0ca09
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:52:02 2005 -0800

    [PATCH] zoran: fix printk format types
    
    zoran: fix printk format types:
    
    drivers/media/video/zoran_driver.c:3763: warning: long long unsigned int format, long unsigned int arg (arg 3)
    drivers/media/video/zoran_driver.c:3775: warning: long long unsigned int format, long unsigned int arg (arg 3)
    drivers/media/video/zoran_driver.c:4109: warning: long long unsigned int format, long unsigned int arg (arg 3)
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce776473f1b74dd23478523fe00981f977e68140
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:51:46 2005 -0800

    [PATCH] W1: fix printk format warning
    
    Use 'unsigned long long' for __u64 printk:
    
    drivers/w1/w1.c:415: warning: long long unsigned int format, __u64 arg (arg 6)
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccf629039ffc87f462ea2359a8cffec2b93076c6
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:51:28 2005 -0800

    [PATCH] isdn: fix gcc data type/size warning
    
    Fix gcc warning:
    drivers/isdn/i4l/isdn_ppp.c:1581: warning: large integer implicitly truncated to unsigned type
    <seq> is unsigned int.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fc0a6d38a44f47e7e293f822d0f570789548cc0
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:51:12 2005 -0800

    [PATCH] procfs: fix printk arg type warning
    
    On sparc32 build, there is a printk format arg-type warning:
    fs/proc/proc_misc.c:195: warning: long unsigned int format, unsigned int arg (arg 23)
    
    I tried to fix it with a change to asm-sparc/vaddrs.h:
    -#define VMALLOC_START          0xfe600000
    +#define VMALLOC_START          0xfe600000UL
    -#define VMALLOC_END            0xffc00000
    +#define VMALLOC_END            0xffc00000UL
    
    but that won't fly because the #defines are used in asm code and asm doesn't
    like the UL suffixes (reported by Bill Irwin).
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39f79b93db6519c545e3ccfb3cac0d27d9203368
Author: Telemaque Ndizihiwe <telendiz@eircom.net>
Date:   Sun Mar 13 00:50:54 2005 -0800

    [PATCH] Removes unused label from /drivers/isdn/hisax/hisax_fcpcipnp.c
    
    Remove an unused label (fixes compiler WARNING) and a function (inside a
    preprocessor directive) that is never called.
    
    Signed-off- by: Telemaque Ndizihiwe <telendiz@eircom.net>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72c51615b2e4d05532ee60001f707168487d5c56
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:50:36 2005 -0800

    [PATCH] drivers/char/vt*: cleanups
    
    This patch contains the following cleanups:
    - make needlessly gloval code static
    - vt_ioctl.c: removed the global variable keyboard_type since noone
                  did actually set it to any other value
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8782a0bec6235e3f714408875bef83a2e97a0e99
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:50:18 2005 -0800

    [PATCH] drivers/char/sysrq.c: remove the unused sysrq_power_off
    
    sysrq_power_off was completely unused.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f02ab30ad4cd2ee73aa289fdadd8602d9f44c8d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:49:59 2005 -0800

    [PATCH] drivers/char/specialix.c: misc cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global code static
    - remove the unused global function specialix_setup
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af59fe4eead30c7fb8e49fe5209c2a3c9a895bff
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:49:40 2005 -0800

    [PATCH] drivers/char/mwave/smapi.c: small cleanups
    
    This patch contains the following cleanups:
    - make the needlessly global function smapi_request static
    - #if 0 the currently unused function SmapiQuerySystemID
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e25ce14a3b43b931b7ce311c7df0b7c0b3325e71
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:49:23 2005 -0800

    [PATCH] drivers/char/mxser.c cleanups
    
    This patch contains the following cleanups:
    - make two needlessly global structs static
    - remove the unused global function SDS_PORT8_DTR
    
    Alan already ACK'ed this patch.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64855e941c3d82445637deb5198fcb6c2bab382d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:49:05 2005 -0800

    [PATCH] unexport mmu_cr4_features
    
    I haven't found any possible modular usage of mmu_cr4_features in the
    kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 674f96e8afbd11d3cd20f23114763ffa585de8f6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:48:46 2005 -0800

    [PATCH] i386 scx200.c: misc cleanups
    
    The patch below contains the following cleanups:
    - make some needlessly global code static
    - #if 0 the following unused global functions:
      - scx200_gpio_dump
    - remove the following unneeded EXPORT_SYMBOL's:
      - scx200_gpio_lock
      - scx200_gpio_dump
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Henrik Brix Andersen <brix@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dce252ce374127447c32d7ee58de6fef9b41d60a
Author: Brian Gerst <bgerst@didntduck.org>
Date:   Sun Mar 13 00:48:29 2005 -0800

    [PATCH] vsprintf.c cleanups
    
    - Make sprintf call vsnprintf directly
    - use INT_MAX for sprintf and vsprintf
    
    Signed-off-by: Brian Gerst <bgerst@didntduck.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52eab33a0834327ce22c3298981cf685e261c409
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:48:12 2005 -0800

    [PATCH] mark BLK_DEV_PS2 as BROKEN
    
    Andries Brouwer proposed this patch with the following comment:
    
    As observed earlier, ps2esdi was broken as a module, and the passing of
    geometry boot parameters is broken.  But does it still work with kernels
    2.3 or later?  I think it does, but failed to verify that.
    
    I found an IBM PS/2 model 70-A21 with 8 MB and 120 MB ESDI disk.
    Tried a few distribution boot floppies to see whether they would boot.
    
    Slackware has special ibmmca bootdisks.
    SW 3.3 - Linux 2.1.43 - boots fine
    SW 4.0 - Linux 2.2.6 - hangs
    SW 7.0 - Linux 2.2.13 - boots fine
    SW 8.1 - Linux 2.4.18 - boots, but every single command is killed by OOM
    SW 10.0 - Linux 2.4.26 - kernel panic: no 386 supported
    
    Then Debian:
    Woody - Linux 2.2.10 - boots fine, but the rootdisk hangs
    Sarge - Linux 2.4.27 - does not recognize the ESDI disk, and the rootdisk
     crashes by OOM.
    
    So, good luck with 2.1 and 2.2 kernels, only failures with later kernels.
    
    What about other people? The two major Linux/MCA sites were
    http://glycerine.itsmm.uni.edu/mca (also referenced in Documentation/mca.txt)
    but it doesnt exist any longer, and http://www.dgmicro.com/mca/,
    which still exists ("last update: Jan 28 1999"), but the binaries
    it refers to live on ftp.dgmicro.com, which isn't there anymore.
    
    Concerning the speed:
    I measured this ESDI disk under Linux as transferring 50 kB/s,
    that is 4% of the speed the IBM specs claim. Also other Linux users
    complained that the disk is much faster under DOS.
    
    My proposal for this patch would be to get it into one 2.6 kernel (is it
    too late for 2.6.11?) and wait if anyone was still using it and screams,
    and remove it a few months later otherwise.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 068e379d9f97d7626d28473a624958d739bdb68d
Author: Olaf Hering <olh@suse.de>
Date:   Sun Mar 13 00:47:54 2005 -0800

    [PATCH] typo in include/linux/compiler.h
    
    small nitpick, __KERNEL__ is the inner ifdef.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 230c59ec92fad9a9f470bacbf084a1da43e5aeef
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Mar 13 00:47:36 2005 -0800

    [PATCH] Remove unused get_resource_list() declaration
    
    Remove unused get_resource_list() declaration.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 299b7f6e26493750d5e203c0c8475fb60bb5d93c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:47:18 2005 -0800

    [PATCH] drivers/block/cciss*: misc cleanups
    
    This patch contains the following cleanups:
    - make some needlesly global code static
    - cciss_scsi.c: remove the unused global function cciss_scsi_info
    - cciss.c:
      - init_cciss_module -> cciss_init
      - cleanup_cciss_module -> cciss_cleanup
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18891d81ae2fe86993ce2ee12ac8c88a0ba7973a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:47:00 2005 -0800

    [PATCH] fs/jffs2/: misc cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global functions static
    - remove the following unused global functions:
      - compr.c: jffs2_set_compression_mode
      - compr.c: jffs2_get_compression_mode
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0761f492f1e8f7c2d71a7d479fc68728c9b04df6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:46:43 2005 -0800

    [PATCH] fs/jffs/: misc cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global code static
    - #if 0 the following unused functions:
      - intrep.c: jffs_print_file
      - jffs_fm.c: jffs_print_node_ref
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c42188435a30f40ad98d009e65f3c349e7222460
Author: Olaf Hering <olh@suse.de>
Date:   Sun Mar 13 00:46:25 2005 -0800

    [PATCH] remove obsolete linux/resource.h inclusion from asm-generic/siginfo.h
    
    Roland added this include with his 'waitid system call' patch, which was
    removed again after a while.  Just the header inclusion was not removed.
    
    http://linux.bkbits.net:8080/linux-2.5/cset@4134b6dd1rY3qnaq7YABrXPXGvzzpw
    http://linux.bkbits.net:8080/linux-2.5/cset@41499f66EDHON_8B1FYGEzLZQ2u13Q
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0330aace02585ccd30ce1523372a31b58d3530ac
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:46:07 2005 -0800

    [PATCH] drivers/block/paride/ cleanups (fwd)
    
    The patch below does the following cleanups in each if the five changed
    C files:
    - #ifndef MODULE: remove unused setup function
    - make a needlessly global struct static
    - pf.c: pf_init_units can be static and __init
    
    After this cleanup, setup.h is completely unused and therefore removed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ea6e8e6863936f21f19ae69c3fb28b625d56115
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:45:49 2005 -0800

    [PATCH] pm3fb: remove kernel 2.2 code
    
    This patch removes kernel 2.2 code from pm3fb.{c,h}.
    
    It also removes KERNEL_2_4 and KERNEL_2_5 since all places where this
    was used had a
      #if (defined KERNEL_2_4) || (defined KERNEL_2_5)
    
    (Yes, I know the driver is marked as BROKEN.)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d70d49b8e39b522687f400d83ae77438538bd672
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun Mar 13 00:45:30 2005 -0800

    [PATCH] Update panic() comment
    
    panic() doesn't flush the filesystem cache anymore.  The comment above the
    function still claims it does.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2aeb85c9238dedca906dd52b824782e1dc3a089f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:45:13 2005 -0800

    [PATCH] mxser.c: remove unused variable
    
    drivers/char/mxser.c: In function `mxser_initbrd':
    drivers/char/mxser.c:551: warning: unused variable `flags'
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 048f1465eb8bd9f80a721d9085c14eccbcade249
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:44:54 2005 -0800

    [PATCH] i386/kernel/i387.c: misc cleanups
    
    This patch contains the following cleanups:
    - make a needlessly global variable static
    - #if 0 four unused global functions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1c5659448192528fe6ea13dfc6ea9a9d85b73fb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:44:37 2005 -0800

    [PATCH] smp{,boot}.c cleanups
    
    This patch contains the following cleanups on several architectures:
    - make some needlessly global code static
    - remove the following write-only (except for printk's) variables:
      - cache_decay_ticks
      - smp_threads_ready
      - cacheflush_time
    
    I've only tried the compilation on i386, but I hope all mistakes I made
    are on unimportant architectures.  ;-)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1a57d660997752e4f012a190c40e37df53b57cb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:44:16 2005 -0800

    [PATCH] i386/x86_64: acpi/sleep.c: kill unused acpi_save_state_disk
    
    acpi_save_state_disk does nothing and is completely unused.
    
    This patch was already ACK'ed by Pavel Machek.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebc4a2dfe3f22d29794dd30b4bf43e45953dc829
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:43:59 2005 -0800

    [PATCH] kill IPHASE5526
    
    iph5526 does not compiles since 2.5 and was therefore marked as broken.  This
    patch removes it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d006c935ccd28dd2e960d4dd67e191d71e20aed6
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Mar 13 00:43:39 2005 -0800

    [PATCH] hpet setup comment fix
    
    Suggested by Andrew Walrond <andrew@walrond.org>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a66d8407966eed6b6e9a4e39652861d8a0b17d2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:43:21 2005 -0800

    [PATCH] SCSI qlogicisp.c: some cleanups
    
    This patch does the following cleanups:
    - make some needlessly global functions static
    - remove qlogicisp.h since it doesn't contain much
    - remove the unused functions isp1020_abort and isp1020_reset
    
    Please review especially the latter two points.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae436d9c01b2b11f35c05f3c3816699363f69ef0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:43:03 2005 -0800

    [PATCH] SCSI qlogicfc.c: some cleanups
    
    This patch does the following cleanups:
    - make some needlessly global functions static
    - remove qlogicfc.h since it doesn't contain much
    - remove the unused function isp2x00_reset
    
    Please review especially the latter two points.
    
    From: Adrian Bunk <bunk@stusta.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d15b48a19372e342888b179370dc7af0036b443e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:42:48 2005 -0800

    [PATCH] prism54: misc cleanups
    
    This patch makes some functions in prism54 that are only required
    locally static.
    
    As a side effect it turned out that the mgt_unlatch_all function was
    completely unused, and it's therefore #if 0'ed.
    
    I also considered moving display_buffer as static inline into
    islpci_mgt.h, but I wasn't 100% sure and therefore left it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e17b42f9e3725d59454aaf62bb1436a7bc4b6f4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:42:31 2005 -0800

    [PATCH] non-PC parport config change
    
    This patch adds a config option PARPORT_NOT_PC (and removes the
    PARPORT_OTHER option) that get's selected if any non-PC hardware was
    chosen.
    
    This way, the mega #if in parport.h is gone now.
    
    Additionally, it removes the unneeded PARPORT_NEED_GENERIC_OPS #define.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa8533535b430f5de8652f57e9d2fccce4005928
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:42:16 2005 -0800

    [PATCH] i386/math-emu/: misc cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - #if 0 unused code
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 398917cece9c4da63264ca6b6ace31c228f04bab
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:41:58 2005 -0800

    [PATCH] fs/hfsplus/: misc cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - bnode.c: remove the unused global functions hfsplus_lock_bnode
               and hfsplus_unlock_bnode
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec26a4b2db6c64fcfd4d0903892848e0c7d5992e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:41:41 2005 -0800

    [PATCH] fs/hfs/: misc cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - super.c: remove the unused global variable hfs_version
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83ccdad543d62bd32994a33614fcf36beab5a42b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:41:21 2005 -0800

    [PATCH] remove the unused OSS maestro_tables.h
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72490ad81c2ffff25272c0a6f07df2ac814a8bd4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:41:05 2005 -0800

    [PATCH] generic_serial.h: kill incorrect gs_debug reference
    
    generic_serial.h contained an incorrect extern reference to the static
    variable gs_debug (Benoit Boissinot reported that gcc 4.0 rejects this).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccabc1b3aa29b066bc8193dc8d332c697b49a584
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:40:48 2005 -0800

    [PATCH] mm/page-writeback.c: remove an unused function #2
    
    This patch removes an unused global function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7abe7329c235357abc5afd9e65123e3e55573153
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:40:31 2005 -0800

    [PATCH] wavefront: reduce stack usage
    
    Reduce local stack usage in wavefront_load_gus_patch()
    from 984 bytes to 140 bytes (on x86-32) by using kmalloc()
    instead of stack for these 840 bytes:
    	wavefront_patch_info samp, pat, prog; // 3 * 280
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0da486d44881f1799c2426eec022aaf6cc474dd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:40:13 2005 -0800

    [PATCH] warning fix in drivers/cdrom/mcd.c
    
    drivers/cdrom/mcd.c:268: warning: passing arg 1 of `mcd_setup' discards qualifiers from pointer target type
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a42a35704cc0130e2417dbb45a021d0d1320edc5
Author: James Nelson <james4765@cwazy.co.uk>
Date:   Sun Mar 13 00:39:57 2005 -0800

    [PATCH] pcxx: Remove obsolete driver
    
    Remove the pcxx driver.  It is obsoleted by the epca driver.
    
    Signed-off-by: James Nelson <james4765@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86c54fbd562dbe8e41e60d77c5df6a760b3d4a6e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:39:39 2005 -0800

    [PATCH] drivers/block/cpqarray.c: small cleanups
    
    This patch contains the following cleanups:
    - make cpqarray_pci_device_id static
    - merge cpqarray_init_step2 into cpqarray_init and make it static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58e9967f6745663d87a4314236b52530e3eef415
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:39:24 2005 -0800

    [PATCH] small drivers/video/kyro/ cleanups
    
    This patch does the following cleanups under drivers/video/kyro/ :
    - remove an unused global varaible from STG4000Ramdac.c
    - make some needlessly global code static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b721e0cdf55da5941c541334507e4c24fdacb06
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:39:06 2005 -0800

    [PATCH] *-iosched.c: Use proper documentation path
    
    This patch by Josef "Jeff" Sipek <jeffpc@optonline.net> fixes two
    documentationn paths.
    
    Signed-off-by: Josef "Jeff" Sipek <jeffpc@optonline.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dda4dd54a9873dc4754ed721b1b840568c0c977d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:38:48 2005 -0800

    [PATCH] OSS sb_card.c: no need to include mca.h
    
    I didn't find any reason why this file includes mca.h.  Paul Laufer already
    ACK'ed this patch.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17aea9bdbb715a0b5b8b7b1540f7c124f096e8e2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:38:30 2005 -0800

    [PATCH] drivers/char/moxa.c: #if 0 an unused function
    
    This patch #if 0's an unused global function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6feaf6db4640995a212ab2c94c097053996b6505
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:38:13 2005 -0800

    [PATCH] fs/adfs/dir_f.c: remove an unused function
    
    This patch removes an unused function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2710bc302684d41ac7d4999e133c62b00523c556
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:37:55 2005 -0800

    [PATCH] remove bouncing email address of Thomas Hood
    
    This patch removes the bouncing email address of Thomas Hood (I haven't
    found any more recent email address).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a42acb0105cb0a352a3af00619ff630d03341989
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:37:39 2005 -0800

    [PATCH] i386 APIC Kconfig cleanups
    
    This patch contains the following changes to arch/i386/Kconfig:
    - update the X86_UP_APIC and X86_UP_IOAPIC help texts:
      - in the SMP case, these options are not visible
      - today, it's no longer only "a small number of uniprocessor systems"
        that have an IO-APIC
    - there were two X86_LOCAL_APIC and two X86_IO_APIC options -
      in both cases, merge them
    - move X86_VISWS_APIC to the other APIC options
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4efcb03872e20604c4b7595a36add326ad5799f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:37:20 2005 -0800

    [PATCH] remove bouncing email address of Hennus Bergman
    
    The email address of Hennus Bergman in the kernel is bouncing.
    
    Aftern asking him whether I should update his email address in the Linux
    kernel, he replied:
    
    <--  snip  -->
    
    I get a lot of spam already and I'd rather avoid getting even more by
    'advertising' my email address on the internet like that. So I don't want
    my current email address in the kernel distribution.
    If you want to remove my old cybercomm.nl email address, that's fine
    by me.
    
    <--  snip  -->
    
    This patch therefore simply his bouncing email address and no longer
    available homepage.
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efe7d8ddd24ab5b6e8747ed75c10d7aa2a77a7ed
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sun Mar 13 00:37:03 2005 -0800

    [PATCH] sparse: use NULL for pointer
    
    drivers/char/isicom.c:1274:14: warning: Using plain integer as NULL pointer
    arch/x86_64/oprofile/../../i386/oprofile/backtrace.c:30:10: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5547e08ae38428be3625a4703438a29b8bfcd29b
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:36:44 2005 -0800

    [PATCH] Make loglevels in init/main.c a little more sane.
    
    This patch modifies a few of the printk() loglevels used in init/main.c in
    an attempt to make them a bit more appropriate.
    
    The default loglevel is KERN_WARNING, but a few printk's without explicit
    loglevel are not (in my oppinion) warnings, so add proper warning levels -
    for instance; telling the user how many CPU's were brought up is hardly a
    warning, make it KERN_INFO instead.  The initial printing of linux_banner
    is not a warning condition, I'd say it's more of a NOTICE or even INFO
    condition - I've made it KERN_NOTICE just as the printing of the kernel
    command line.  A few printk's without explicit loglevel do match the
    default one, but I've made them explicit (the default could change in the
    future, and if it does then explicitly setting the proper loglevel is a
    nice thing).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ba9025ad036d8cf9c38f505df7a8fe4675fc839
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:36:27 2005 -0800

    [PATCH] some PNP cleanups
    
    This patch makes the following changes to the PNP code:
    - make some needlessly global code static
    - remove the EXPORT_SYMBOL(pnp_assign_resources) since this function
      is only used in the file it is defined in
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41cb690a2e74eda527aa718a568bd6c10d11f442
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:36:08 2005 -0800

    [PATCH] misc ISAPNP cleanups
    
    This patch removes some completely unused code and makes some needlessly
    global code static in drivers/pnp/isapnp/core.c .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 965b3f6b4740cea1983832d7e6b63ca5c24645e9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:35:51 2005 -0800

    [PATCH] mm/page-writeback.c: remove an unused function
    
    This patch removes an unused global function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5676c5ecb0b981d7cd4d2506088404bb358d43c9
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:35:33 2005 -0800

    [PATCH] fix placement of static inline in nfsd.h
    
    The patch fixes a bunch of warnings like these
    
    include/linux/nfsd/nfsd.h:137: warning: `inline' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:138: warning: `inline' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:139: warning: `inline' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:140: warning: `inline' is not at beginning of declaration
    
    and these
    
    include/linux/nfsd/nfsd.h:137: warning: `static' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:138: warning: `static' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:139: warning: `static' is not at beginning of declaration
    include/linux/nfsd/nfsd.h:140: warning: `static' is not at beginning of declaration
    
    when building with gcc -W
    
    True, that's not how most people build, but some of us do in order to try and
    find potential trouble spots, and the less warnings we have to go through the
    better - especially when they can be cleaned up nice and safe with no real
    impact to the code like these ones.  Please apply.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e6cf829b8e7de18387df5bb1a05700f82299afd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:35:16 2005 -0800

    [PATCH] saa7146_vv_ksyms.c: remove two unused EXPORT_SYMBOL_GPL's
    
    This patch removes two unused EXPORT_SYMBOL_GPL's.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82ea15f40eafff6a13d312316fb1ad4bc0410326
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:34:56 2005 -0800

    [PATCH] Update email address of Philip Blundell
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 843c01105a72c62c6ea0c32667dceb636c5eff92
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:34:38 2005 -0800

    [PATCH] Update email address of Benjamin LaHaise
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba3e413aaf4647bba016a2916f20e925dc3a32cd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:34:19 2005 -0800

    [PATCH] (mostly i386) mm cleanup
    
    - arch/i386/mm/boot_ioremap.c: make a variable static
    - frv/ppc highmem.c: remove stale kmap_init prototypes
    - arch/um/kernel/mem.c: make kmap_init static
    - arch/i386/mm/init.c: make five functions static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f18778da79ff80bec509c5e5c4275f99e4fdae7a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:34:02 2005 -0800

    [PATCH] kill aux_device_present
    
    There's no reason for keeping a write-only variable.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a81b5f2023f1621adb1f9130345fb4bdeabc0af
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:33:44 2005 -0800

    [PATCH] 3w-abcd.h: TW_Device_Extension: remove an unused field
    
    num_units in struct TAG_TW_Device_Extension is completely unused.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e536024f7f2c4573104f9de4597d0ee5a719582f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:33:26 2005 -0800

    [PATCH] i386/x86_64 io_apic.c: misc cleanups
    
    - make some needlessly global code static
    - #if 0 some global print* functions that have no user
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 765ce4fd515661b49ee876c4c7c1699b62d8987c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:33:08 2005 -0800

    [PATCH] i386 cpu/common.c: some cleanups
    
    - make some needlessly global code static
    - remove the unused dodgy_tsc function
    - remove the stale dodgy_tsc z86_64 prototype
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0e0fd28559e8d13a704631cfa60fad853d0ce89
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:32:52 2005 -0800

    [PATCH] update email address of Andrea Arcangeli
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57fcd109cc77e6c52a2443553857dddea71b0ed7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:32:33 2005 -0800

    [PATCH] oprofile: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2425d5f497f674b99fd04a4236a323dd50aa3757
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:32:16 2005 -0800

    [PATCH] arch/sparc/kernel/ptrace: pointless assignment and shadowed var
    
    A few tiny cleanups for arch/sparc/kernel/ptrace.c::do_ptrace post the big
    verify_area/access_ok cleanup.
    
    'ret' shadows a variable of the same name in the enclosing scope, rename it.
    
    The assignment of -EFAULT to 'i' exactely mirrors what the old verify_area
    code did, but that was only to use 'i' to check the return value of
    verify_area.  Now that we check access_ok directly and 'i' is initialized in
    the for loop a few lines below anyway, the asignment of -EFAULT to i is bogus,
    just pass pass EFAULT directly as the second arg to pt_error_return.
    
    Also a few tiny whitespace cleanups - 'if ()' vs 'if()'.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd96701c4d218de01bab07c0ffe5ca740dc02b38
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:31:59 2005 -0800

    [PATCH] arch/mips/kernel/irixsig: slight rework of irix_sigsendset
    
    Slight rework of arch/mips/kernel/irixsig.c::irix_sigsendset to eliminate the
    use of a local variable, a goto and shorten the code a bit.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e130d8fd8f0d02810665537f2c8ca949f641d74
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:31:42 2005 -0800

    [PATCH] fs_compat: tiny cleanup t retval
    
    Tiny patch that cuts down the nr of assignments to 'ret'.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb5451e4fc651b556ec88252b9a3edc85ec279c1
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:31:23 2005 -0800

    [PATCH] arch/alpha/kernel/osf_sys: tiny cleanup to retval
    
    Improve readability after verify_area to access_ok conversion.  The new code
    was pretty ugly - this should be a bit better.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8200dccd45421d352cc108e22f75576b1ed0a0bd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:31:07 2005 -0800

    [PATCH] verify_area cleanup : deprecate
    
    The previous 9 patches should take care of converting all callers of
    verify_area into access_ok, so now it's time to deprecate verify_area all over
    so noone gets tempted to use it in new code - this patch does that.
    
    Eventually when this has been deprecated for a while I'll send patches to
    completely remove the function (thoughts on how long it should be deprecated
    first are welcome).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df7c9d5153a46d92f4fdcbdaa7e2e61b8245ef45
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:30:48 2005 -0800

    [PATCH] verify_area cleanup : misc remaining archs
    
    The last remaining archs that have not already been converted from verify_area
    to access_ok by the previous patches are all taken care of by this one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4c888086ffa853f1d9856cf4267e54537da3182
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:30:29 2005 -0800

    [PATCH] verify_area cleanup : x86_64 and ia64
    
    This is the patch that converts verify_area to access_ok for the x86_64
    and ia64 archs.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f4d48c79f0fd55d9b77940a14fd323a184b5cb
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:30:10 2005 -0800

    [PATCH] verify_area cleanup : sparc and sparc64
    
    This patch converts verify_area to access_ok for sparc and sparc64.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83ea1812ad902191a15130acb5a51a62069ef9b0
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:29:53 2005 -0800

    [PATCH] verify_area cleanup : ppc, ppc64, m68k, m68knommu
    
    Convert verify_area to access_ok for ppc, ppc64, m68k and m68knommu
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae090d92b0daa7bbed3a45be825c1d184ccfba06
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:29:34 2005 -0800

    [PATCH] verify_area cleanup: mips
    
    This is the patch to convert verify_area to access_ok for arch/mips
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b8e07293b3fc84fb254214b5e6c2fd71f20ea37
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:29:18 2005 -0800

    [PATCH] verify_area cleanup : i386 and misc.
    
    This patch converts verify_area to access_ok in arch/i386, fs/, kernel/ and a
    few other bits that didn't fit in the other patches or that I actually was
    able to test on my hardware - this is by far the best tested of all the
    patches.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ca2ea5b7c876bf79f72365072bb557a35107587
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:28:58 2005 -0800

    [PATCH] sound/oss/soundcard.c: remove an unused variable
    
    This patch removes an unused variable.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54cd92aaa2f88a2e8e46f76480c4b2fcad55f2f3
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:28:42 2005 -0800

    [PATCH] verify_area cleanup : sound
    
    This patch converts verify_area to access_ok in sound/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e39b725a97a7935f2d74a25e8c4b4668650fa1d
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:28:24 2005 -0800

    [PATCH] verify_area cleanup : drivers part 2
    
    This patch converts the second half of drivers from verify_area to
    access_ok.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 446b35433fa04818db3395396d3dded84cfe933a
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Mar 13 00:28:06 2005 -0800

    [PATCH] verify_area cleanup : drivers part 1
    
    This patch converts the first half of drivers from verify_area to
    access_ok.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c589073d453f0f6587cd0684aa88bee06dd3f13
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Sun Mar 13 00:27:48 2005 -0800

    [PATCH] sysfs: mount error path cleanup
    
    Sysfs mount error path sanity work.  Perhaps we can panic here, but did not
    want to disturb the code here.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 114d4d47b991934093783e715b93e677430300a7
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Sun Mar 13 00:27:32 2005 -0800

    [PATCH] pivot_root: better documentation to code
    
    pivot_root works with five nami data structures, I would like add
    the minimal documentation to the code to make things clear.
    
    Signed-Off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 517445fced0a284900acb6b51201034c968ac3db
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Mar 13 00:27:15 2005 -0800

    [PATCH] selinux needs inet
    
    security/built-in.o(.text+0xe2fc): In function `selinux_socket_bind':
    : undefined reference to `sysctl_local_port_range'
    
    Acked-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec8a31b1b504d01602f4920faf35f4fd1d63aeb6
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Mar 13 00:26:59 2005 -0800

    [PATCH] CONFIG_BASE_FULL help clarification
    
    Clarify the BASE_FULL help text.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 002d476a22f2369922030d10be901d3637474af0
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Mar 13 00:26:41 2005 -0800

    [PATCH] rol/ror type cleanup
    
    Minor type cleanup.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88d1ad6164c533c6423b2906d8e2d8906adeb6fb
Author: Thierry Vignaud <tvignaud@mandrakesoft.com>
Date:   Sun Mar 13 00:26:25 2005 -0800

    [PATCH] MODULE_DEVICE_TABLE fixes
    
    Add lots of MODULE_DEVICE_TABLE entries.
    
    Signed-off-by: Thierry Vignaud <tvignaud@mandrakesoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f37f8fffae7c5a2761eef87f5de50c2cbec41786
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:26:06 2005 -0800

    [PATCH] consolidate CONFIG_DEBUG_INFO
    
    We seem to have two CONFIG_DEBUG_INFO entries in Kconfig.debug.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03b734f799ce03d90b3b12b994761d7d21577094
Author: Jan Kara <jack@ucw.cz>
Date:   Sun Mar 13 00:25:50 2005 -0800

    [PATCH] Allow admin to enable only some of the Magic-Sysrq functions
    
    Allow admin to enable only some of the Magic-Sysrq functions.  This allows
    admin to disable sysrq functions he considers dangerous (e.g.  sending kill
    signal, remounting fs RO) while keeping the possibility to use the others
    (e.g.  debug deadlocks by dumps of processes etc.).
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8599d0a28fb4ab69c13261a63d3a30c596c7d2ef
Author: Stefan Seyfried <seife@suse.de>
Date:   Sun Mar 13 00:25:32 2005 -0800

    [PATCH] Subject: swsusp: do not provoke emergency disk shutdowns
    
    In platform swsusp mode, we were forgetting to spin disks down, leading to
    ugly emergency shutdown.  This synchronizes platform method with other
    methods and actually helps.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1026f161d01dc816be109869ac6c557ff4370c92
Author: Pavel Machek <pavel@suse.cz>
Date:   Sun Mar 13 00:25:15 2005 -0800

    [PATCH] swsusp: enable resume from initrd
    
    From: <mjg59@scrf.ucam.org>
    
    When using a fully modularized kernel it is necessary to activate resume
    manually as the device node might not be available during kernel init.
    
    This patch implements a new sysfs attribute '/sys/power/resume' which allows
    for manual activation of software resume.  When read from it prints the
    configured resume device in 'major:minor' format.  When written to it expects
    a device in 'major:minor' format.  This device is then checked for a suspended
    image and resume is started if a valid image is found.  The original
    functionality is left in place.
    
    It should be used from initramfs, or with care.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a408c2f6f0465ad7887931e1a4fe881e5a16258
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sun Mar 13 00:24:58 2005 -0800

    [PATCH] swsusp: use non-contiguous memory on ppc
    
    This patch contains the necessary changes to the assembly routines etc.  for
    ppc.  It depends on the main resume part.  It's a Hu Gang's patch.
    
    From: Hu Gang <hugang@soulinfo.com>
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff87eef9f6f515e835b1ca9b3fa454787ba2660b
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sun Mar 13 00:24:40 2005 -0800

    [PATCH] swsusp: use non-contiguous memory on resume
    
    The following patch is designed to fix a problem in the current implementation
    of swsusp in mainline kernels.  Namely, swsusp uses an array of page backup
    entries (aka pagedir) to store pointers to memory pages that must be saved
    during suspend and restored during resume.
    
    Unfortunately, the pagedir has to be located in a contiguous chunk of memory
    and it sometimes turns out that an 8-order or even 9-order allocation is
    needed for this purpose.  It sometimes is impossible to get such an allocation
    and swsusp may fail during either suspend or resume due to the lack of memory,
    although theoretically there is enough free memory for it to succeed.
    
    Moreover, swsusp is more likely to fail for this reason during resume, which
    means that it may fail during resume after a successful suspend (this actually
    has happened for some people, including me :-)) and this, potentially, may
    lead to the loss of data.
    
    The problem is fixed by replacing the pagedir with a linklist so that
    high-order memory allocations are avoided (the patches make swsusp use only
    0-order allocations).  Unfortunately this means that it's necessary to change
    assembly routines used to restore the image after it's been loaded from swap
    so that they walk the list instead of walking the array.
    
    This patch makes swsusp allocate only individual pages during resume.  it
    contains the necessary changes to the assembly routines etc.  for i386 and
    x86-64.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f656b523f6d41baad6dd7df6dab6ba48f5c5e8b2
Author: Mike Kravetz <kravetz@us.ibm.com>
Date:   Sun Mar 13 00:24:22 2005 -0800

    [PATCH] ppc64: NUMA memory fixup
    
    When I booted my new 720 on a kernel configured for NUMA, I received
    the following during bootup:
    
    WARNING: Unexpected node layout: region start 44000000 length 2000000
    NUMA is disabled
    
    This is due to memory 'holes' within nodes.  If such holes are
    encountered, then NUMA is disabled.  The following patch adds support
    for such configurations.
    
    This patch gets the cell sizes before extracting the cells.  I have made this
    change to existing code in the file, as well as the code I added.
    
    Signed-off-by: Mike Kravetz <kravetz@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82c7633ae8d2d99cf5ba235ddc01e89e9e09678f
Author: Kumar Gala <galak@freescale.com>
Date:   Sun Mar 13 00:24:06 2005 -0800

    [PATCH] ppc32: Remove SPR short-hand defines
    
    Removed the Special purpose register (SPR) short-hand defines to help with
    name space pollution.  All SPRs are now referenced as SPRN_<foo>.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70fc7b77c21bb703af6d7cc8329fa0a1669bdbcd
Author: Kumar Gala <galak@freescale.com>
Date:   Sun Mar 13 00:23:46 2005 -0800

    [PATCH] ppc32: emulate load/store string instructions
    
    Some Book-E implementations (e500) do not implement the userland load/store
    string instructions.  Apparently these instructions are rather painful to
    implement do to the fact that they modify the destination register
    differently then ever other instruction.  Matt did the inital work some
    time ago, and I finally got around to cleaning it up.
    
    Signed-off-by: Matt McClintock
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 746e5d655cb0be5453a82c8aa4caedf57fcd16de
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Sun Mar 13 00:23:30 2005 -0800

    [PATCH] ppc32: Update chestnut platform files
    
    - Set up mtd partition from arch-specific platform file and remove
      obsoleted mtd map.
    
    - Update default config file (now enables embedded ethernet driver).
    
    - Make some minor fixups.
    
    - General code cleanup.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3a304109d4dbd23f8cdbc939d71c86125d20a6a
Author: Roland McGrath <roland@redhat.com>
Date:   Sun Mar 13 00:23:12 2005 -0800

    [PATCH] Unbacked shared memory not included in ELF core dump
    
    We're currently not including sysv shared memory segments in coredumps.
    
    This patch intends to include any shared mapping whose target file has zero
    links.  That covers sysv shm and MAP_ANON|MAP_SHARED mmap's (which I think
    are only ever useful if you want to share pages with a fork'd child).  I
    think it also covers a regular file that was unlinked but is still mmap'd.
    It doesn't cover mapping of a tmpfs file like /dev/shm/foo, but those are
    still available to be seen after your program crashes, until reboot.
    
    Note that this still omits plenty of cases that the old code would include,
    such as all writable shared mappings of regular files.  It also will
    include some arcane cases the old one wouldn't, like a read-only shared
    mapping of an unlinked file; that comes up e.g., for the text segment of a
    shared library or executable that was removed/renamed-over while still in
    use.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecce8424a505cfccb497e37a1d26ba89edc53b3c
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sun Mar 13 00:22:56 2005 -0800

    [PATCH] no arch-specific mem_map init
    
    So, this patch started out with me trying to keep from passing contiguous,
    node-specific mem_map into free_area_init_node() and cousins.  Instead, I
    relied on some calls to pfn_to_page().
    
    This works fine and dandy when all you need is the pgdat->node_mem_map to
    do pfn_to_page().  However, the non-NUMA/DISCONTIG architectures use the
    real, global mem_map[] instead of a node_mem_map in the pfn_to_page()
    calculation.  So, I ended up effectively trying to initialize mem_map from
    itself, when it was NULL.  That was bad, and caused some very pretty colors
    on someone's screen when he tested it.
    
    So, I had to make sure to initialize the global mem_map[] before calling
    into free_area_init_node().  Then, I realized how many architectures do
    this on their own, and have comments like this:
    
            /* XXX: MRB-remove - this doesn't seem sane, should this be done somewhere else ?*/
            mem_map = NODE_DATA(0)->node_mem_map;
    
    The following patch does what my first one did (don't pass mem_map into the
    init functions), incorporates Jesse Barnes' ia64 fixes on top of that, and
    gets rid of all but one of the global mem_map initializations (parisc is
    weird).  It also magically removes more code than it adds.  It could be
    smaller, but I shamelessly added some comments.
    
    Boot-tested on ppc64, i386 (NUMAQ, plain SMP, laptop), UML (i386).
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c4942f99d8fc003f118b1237bb5bfb8f22ddfeb
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Mar 13 00:22:38 2005 -0800

    [PATCH] vmalloc: use list of pages instead of array in vm_struct
    
    This patch assumes that there is no valid usage of
    vmalloced_or_vmaped_page->lru.
    
    In such a case vm_struct->array could be eliminated.
    It saves some memory and simplifies code a bit.
    
    In vmap/vunmap case vm_struct->page_list is used only
    in map_vm_area(), so it is ok to do:
    
    	addr1 = vmap(pages, count);
    	addr2 = vmap(pages, count);
    	...
    	vunmap(addr1);
    	vunmap(addr2);
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e0168c9f6137a0b6c1d58443d02d45c0e0ee2ae
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Mar 13 00:22:22 2005 -0800

    [PATCH] vmalloc: use __vmalloc_area in arch/x86_64/
    
    Replace open coded __vmalloc() with __vmalloc_area().
    
    Uncompiled, untested.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9e5b3f8e3ab31807eb633f0c38214754504b7eb
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Mar 13 00:22:05 2005 -0800

    [PATCH] vmalloc: use __vmalloc_area in arch/sparc64/
    
    Replace open coded __vmalloc() with __vmalloc_area().
    
    Uncompiled, untested.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e338698888f5abd49a3f45a746945fe48c05cf7e
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Mar 13 00:21:50 2005 -0800

    [PATCH] vmalloc: use __vmalloc_area in arch/arm
    
    Replace open coded __vmalloc() with __vmalloc_area().
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21367bf0c70e71ebed486220760205885c75778f
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Mar 13 00:21:32 2005 -0800

    [PATCH] vmalloc: introduce __vmalloc_area() function
    
    There are 3 copy-and-paste implementations of __vmalloc() in
    arch/{arm,sparc64,x86_64}/kernel/module.c.
    
    I believe the only reason is that __vmalloc() doesn't allow
    to specify parameters of __get_vm_area().
    
    This patch splits __vmalloc() into 2 functions. The new one,
    __vmalloc_area(), can be used as follows:
    
    	vm_struct *area = __get_vm_area(...);
    	void *addr = __vmalloc_area(area, gfp, prot);
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 772bb69313ec9939720bbee9681cda32f71a33b9
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:21:15 2005 -0800

    [PATCH] ptwalk: pud and pmd folded
    
    Nick Piggin's patch to fold away most of the pud and pmd levels when not
    required.  Adjusted to define minimal pud_addr_end (in the 4LEVEL_HACK
    case too) and pmd_addr_end.  Responsible for half of the savings.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f71513bf9a2ea83fcd2e2c985884a6ab806d24fd
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:20:59 2005 -0800

    [PATCH] ptwalk: inline pmd_range and pud_range
    
    As a general rule, ask the compiler to inline action_on_pmd_range and
    action_on_pud_range: they're none very interesting, and it has a better
    chance of eliding them that way.  But conversely, it helps debug traces
    if action_on_pte_range and top action_on_page_range remain uninlined.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6b62af7a58eb721900254b28cad514dc9f3cae3
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:20:43 2005 -0800

    [PATCH] ptwalk: move p?d_none_or_clear_bad
    
    To handle large sparse areas a little more efficiently, follow Nick and
    move the p?d_none_or_clear_bad tests up from the start of each function
    to its callsite.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5bce0a9084b7ae705890f5b9ddb4dbc781e959c
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:20:27 2005 -0800

    [PATCH] ptwalk: clear_page_range
    
    Convert clear_page_range pagetable walkers to loops using p?d_addr_end.
    These are exceptional in that some out-of-tree memory layouts might pass
    end 0, so the macros need to handle that (though previous code did not).
    
    The naming here was out of step: now we usually pass pmd_t *pmd down to
    action_on_pte_range, not action_on_pmd_range, etc: made like the others.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 367b39f0b0804e467d163c6758aea41be8a6f54c
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:20:11 2005 -0800

    [PATCH] ptwalk: copy_pte_range hang
    
    This patch is the odd-one-out of the sequence.  The one before adjusted
    copy_pte_range from a for loop to a do while loop, and it was therefore
    simplest to check for lockbreak before copying pte: possibility that it
    might keep getting preempted without making progress under some loads.
    
    Some loads such as startup: 2*HT*P4 with preemption cannot even reach
    multiuser login.  Suspect needs_lockbreak is broken, can get in a state
    when it remains forever true.  Investigate that later: for now, and for
    all time, it makes sense to aim for a little progress before breaking
    out; and we can manage more pte_nones than copies.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5afe74cddcd122661917d50121c398c3bcc49ad
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:19:53 2005 -0800

    [PATCH] ptwalk: copy_page_range
    
    Convert copy_page_range pagetable walkers to loops using p?d_addr_end.
    Merge copy_swap_pte into copy_one_pte, make a few minor tidyups.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9736ce3ae266e5be4ecc8c2e34102b0347ff05e8
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:19:37 2005 -0800

    [PATCH] ptwalk: unmap_page_range
    
    Convert unmap_page_range pagetable walkers to loops using p?d_addr_end.
    Move blanking of irrelevant details up to unmap_page_range as Nick did.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b634975cca04348c3deef3b0568d6f2524792520
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:19:20 2005 -0800

    [PATCH] ptwalk: zeromap_page_range
    
    Convert zeromap_page_range pagetable walkers to loops using p?d_addr_end.
    Remove the redundant flush_tlb_range from afterwards: as its comment
    noted, there's already a BUG_ON(!pte_none).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccdb8d8da99b78a4330aa7cd5d9d92b29b158279
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:19:04 2005 -0800

    [PATCH] ptwalk: remap_pfn_range
    
    Convert remap_pfn_range pagetable walkers to loops using p?d_addr_end.
    Remove the redundant flush_tlb_range from afterwards: as its comment
    noted, there's already a BUG_ON(!pte_none).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f6ea7b3024f61457e58a927b82566a5a8f3efc8
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:18:47 2005 -0800

    [PATCH] ptwalk: ioremap_page_range
    
    Convert i386 ioremap pagetable walkers to loops using p?d_addr_end.
    Rename internal levels ioremap_p??_range.  Don't cheat, give it a real
    (but inlined) ioremap_pud_range; uninline lowest level to help debug.
    Replace "page already exists" printk and BUG by BUG_ON.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1523e5cbe25ad12f3fdfcd9621bccb6e7d07f5a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:18:31 2005 -0800

    [PATCH] ptwalk: map and unmap_vm_area
    
    Convert unmap_vm_area and map_vm_area pagetable walkers to loops using
    p?d_addr_end; rename internal levels vunmap_p??_range, vmap_p??_range.
    map_vm_area shows the style when allocating: allocs moved down a level.
    Replace KERN_CRIT Whee message by boring WARN_ON.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f801372a97d035a68f3e9fa27a4b151502ef6d2b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:18:14 2005 -0800

    [PATCH] ptwalk: unuse_mm
    
    Convert unuse_process pagetable walkers to loops using p?d_addr_end; but
    correct its name to unuse_mm, rename its levels to _range as elsewhere.
    
    Leave unuse_pte out-of-line since it's so rarely called; but move the
    funny activate_page inside it.  foundaddr was a leftover from before: we
    still want to break out once page is found, but no need to pass addr up.
    And we need not comment on the page_table_lock at every level.
    
    Whereas most objects shrink ~200 bytes text, swapfile.o grows slightly:
    it had earlier been converted to the addr,end style to fix a 4level bug.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64a43fe26ed4352c35294f00ba14ba1eb6bc3d44
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:17:58 2005 -0800

    [PATCH] ptwalk: sync_page_range
    
    Convert filemap_sync pagetable walkers to loops using p?d_addr_end; use
    similar loop to split filemap_sync into chunks.  Merge filemap_sync_pte
    into sync_pte_range, cut filemap_ off the longer names, vma arg first.
    
    There is no error from filemap_sync, nor is any use made of the flags:
    if it should do something else for MS_INVALIDATE, reinstate it when that
    is implemented.  Remove the redundant flush_tlb_range from afterwards:
    as its comment noted, each dirty pte has already been flushed.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ba3dbb4cc71d11064061b4b4eb744e09aa6c2b1
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:17:41 2005 -0800

    [PATCH] ptwalk: change_protection
    
    Begin the pagetable walker cleanup with a straightforward example,
    mprotect's change_protection.  Started out from Nick Piggin's for_each
    proposal, but I prefer less hidden; and these are all do while loops,
    which degrade slightly when converted to for loops.
    
    Firmly agree with Andi and Nick that addr,end is the way to go: size is
    good at the user interface level, but unhelpful down in the loops.  And
    the habit of an "address" which is actually an offset from some base has
    bitten us several times: use proper address at each level, whyever not?
    
    Don't apply each mask at two levels: all we need is a set of macros
    pgd_addr_end, pud_addr_end, pmd_addr_end to give the address of the end
    of each range.  Which need to take the min of two addresses, with 0 as
    the greatest.  Started out with a different macro, assumed end never 0;
    but clear_page_range (alone) might be passed end 0 by some out-of-tree
    memory layouts: could special case it, but this macro compiles smaller.
    Check "addr != end" instead of "addr < end" to work on that end 0 case.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec24decb0630105ef24cd12af1b90f636819d0a0
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Mar 13 00:17:25 2005 -0800

    [PATCH] ptwalk-pd_none_or_clear_bad ia64 fix
    
    pgtable.h now need pud_t.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 928876c9199586cc9758f34edb095cf85208a320
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sun Mar 13 00:17:07 2005 -0800

    [PATCH] ptwalk: p?d_none_or_clear_bad
    
    Replace the repetitive p?d_none, p?d_bad, p?d_ERROR, p?d_clear clauses
    by pgd_none_or_clear_bad, pud_none_or_clear_bad, pmd_none_or_clear_bad
    inlines throughout common and i386 - avoids a sprinkling of "unlikely"s.
    
    Tests inline, but unlikely error handling in mm/memory.c - so the ERROR
    file and line won't tell much; but it comes too late anyway, and hardly
    ever seen outside development.
    
    Let mremap use them in get_one_pte_map, as it already did in _nested;
    but leave follow_page and untouched_anonymous page just skipping _bad
    as before - they don't have quite the same ownership of the mm.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6213074bcef2c17b5340c05d8292285632e47185
Author: Chris Wright <chrisw@osdl.org>
Date:   Sun Mar 13 00:16:49 2005 -0800

    [PATCH] allow vma merging with mlock et. al.
    
    Successive mlock/munlock calls can leave fragmented vmas because they can
    be split but not merged.  Give mlock et.  al.  full vma merging support.
    While we're at it, move *pprev assignment above first split_vma in
    mprotect_fixup to keep it in step with mlock_fixup (which for mlockall
    ignores errors yet still needs a valid prev pointer).
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afb7359a63fc8812064ff4bdbe7ea34325d8a361
Author: Jes Sorensen <jes@wildopensource.com>
Date:   Sun Mar 13 00:16:33 2005 -0800

    [PATCH] ia64 specific /dev/mem handlers
    
    Convert /dev/mem read/write calls to use arch_translate_mem_ptr if
    available.  Needed on ia64 for pages converted fo uncached mappings to
    avoid it being accessed in cached mode after the conversion which can lead
    to memory corruption.  Introduces PG_uncached page flag for marking pages
    uncached.
    
    Also folds do_write_mem into write_mem as it was it's only user.
    
    Use __ARCH_HAS_NO_PAGE_ZERO_MAPPED for architectures to indicate they
    require magic handling of the zero page (Sparc and m68k).
    
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 939034527a64b84ae4c727fce011d7a7d335b87b
Author: Chris Mason <mason@suse.com>
Date:   Sun Mar 13 00:16:16 2005 -0800

    [PATCH] reiserfs: make sure data=journal buffers are cleaned on free
    
    In data=journal mode, when blocks are freed and their buffers are dirty,
    reiserfs can remove them from the transaction without cleaning them.  These
    buffers never get cleaned, resulting in an unfreeable page.
    
    Signed-off-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce91b575332b4ef0ecb393c3fabf976134d5ca61
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Sun Mar 13 00:15:58 2005 -0800

    [PATCH] orphaned pagecache memleak fix
    
    Chris found that with data journaling a reiserfs pagecache may be truncate
    while still pinned.  The truncation removes the page->mapping, but the page
    is still listed in the VM queues because it still has buffers.  Then during
    the journaling process, a buffer is marked dirty and that sets the PG_dirty
    bitflag as well (in mark_buffer_dirty).  After that the page is leaked
    because it's both dirty and without a mapping.
    
    So we must allow pages without mapping and dirty to reach the PagePrivate
    check.  The page->mapping will be checked again right after the PagePrivate
    check.
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2172436cdc1b2b6418f1b66f2f1e43e0c78e0864
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sun Mar 13 00:15:41 2005 -0800

    [PATCH] x86: fix booting non-NUMA system with NUMA config
    
    There is a bug booting with CONFIG_NUMA=y, CONFIG_X86_GENERICARCH=y, and
    booting on a non-NUMA system.  While not the most common configuration, it
    should surely be supported.
    
    memmap_init_zone() is the first user to do pfn_to_nid(), which relies on
    physnode_map[] to be done properly.  memory_present() was supposed to do
    that, but never got called for the flat configuration, so pfn_to_nid() was
    returning -1 on valid pages.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05121992eb4d441da1f21f1a102f4ceaed930e57
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:15:24 2005 -0800

    [PATCH] drivers/video/intelfb/: fix a warning
    
    drivers/video/intelfb/intelfbdrv.h:31: warning: 'intelfb_setup' declared `static' but never defined
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 304aa41113fd649eb84ae008424ce036695e4204
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 13 00:15:08 2005 -0800

    [PATCH] remove drivers/mtd/maps/ich2rom.c
    
    drivers/mtd/maps/ich2rom.c is completely unused because it was renamed to
    drivers/mtd/maps/ichxrom.c.
    
    This patch removes the stale ich2rom.c file.
    
    This patch was already ACK'ed by David Woodhouse and Eric W. Biederman.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffaa6d5ab52115171bab0ff2ae942dd16d3039fd
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Sun Mar 13 00:14:51 2005 -0800

    [PATCH] dcache: is_subdir missed reset after seqretry
    
    dcache: is_subdir forgot to reset the result after seqretry.
    
    Signed-Off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea8924f74c7d3dd4e2da744ba4c51f0826a9a337
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Sun Mar 13 00:14:35 2005 -0800

    [PATCH] DVB whitespace cleanup
    
    This is the DVB whitespace cleanup patch (the big one ;-).
    
    I checked the whitespace-onlyness:
    
    linux-2.6.11-bk9$ find drivers/media/common drivers/media/dvb -name "*.o" | xargs size >/tmp/1
    linux-2.6.11-bk9$ cd -
    linux-2.6.11-bk9.patched
    linux-2.6.11-bk9.patched$ find drivers/media/common drivers/media/dvb -name "*.o" | xargs size >/tmp/2
    linux-2.6.11-bk9.patched$ less /tmp/1
    linux-2.6.11-bk9.patched$ less /tmp/2
    linux-2.6.11-bk9.patched$ diff -us /tmp/1 /tmp/2
    Files /tmp/1 and /tmp/2 are identical
    
    DVB whitespace cleanups:
    
     o sync kernel and linuxtv.org CVS wrt whitespace
     o repair indentation damage
     o remove whitespace at eol
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83c6737c8f5a6304cef0a85e3a428f7566c22220
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Mar 13 00:14:14 2005 -0800

    [PATCH] ide-pmac logic fix
    
    This patch fixes a logic error in the ide-pmac driver which could try to
    access the chip's fcr register after the cell clock has been shut down,
    thus causing a machine check on machines with the "Intrepid" chipset.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 473c67f96e064428787e0252c3bd68010ce9af79
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sun Mar 13 02:12:32 2005 -0600

    [PATCH] sym2 version 2.2.0
    
    Docs
     - The sym53c8xx= kernel parameter no longer exists
     - Correct a typo
    
    Bugfixes
     - The driver really isn't capable of dealing with 64-bit bus addresses
       yet, so bail out early
     - Get rid of SYM_SCAN_TARGETS_HILO (which had no effect) and set the
       shost->reverse_ordering flag instead
     - Associate a scsi_device with the target in slave_alloc instead of
       slave_configure
    
    Printk cleanups
     - Use dev_warn/dev_info where possible
     - Delete PRINT_ADDR, PRINT_TARGET and PRINT_LUN
     - Remove sym_print_target() and sym_print_lun()
     - Make sym_print_addr() call dev_info
    
    Memory allocation related
     - Delete non-dma allocators; use kmalloc/kcalloc directly instead
     - Move memory allocation wrappers from sym_glue to sym_malloc
     - Get rid of m_addr_t; use void * or dma_addr_t as appropriate
     - Change m_pool_ident_t from a struct pci_dev * to a struct device *
     - Use dma_alloc_coherent() instead of pci_alloc_consistent()
    
    Negotiation related
     - Move scsi_transport_spi.h include from sym_glue.c to sym_glue.h
     - Store the current transfer contract settings in the starget attributes
     - Delete sym2_get_offset(), sym2_get_period(), sym2_get_width(),
       sym2_get_dt(), sym2_get_iu() and sym2_get_qas()
     - Use spi_support_wide() (and friends) instead of scsi_device_wide()
     - We don't need tinfo.prev -- we can tell if the contract changed
     - Delete SYM_OPT_ANNOUNCE_TRANSFER_RATE
     - Use spi_display_xfer_agreement()
     - Use sdev->scsi_level instead of the never-set tinfo.curr.scsi_version
     - Instead of checking current xfer settings against our goal, use a
       check_nego flag.
     - Get rid of sym_tinfo and use sym_trans directly.
     - Split the sym_trans options into flags
     - Change width from an u8 into a flag
     - Delete sym_misc.c
     - Remove sym_xpt_async_nego_wide
    
    Linuxisation
     - Use udelay() directly instead of indirecting through UDELAY and sym_udelay
     - Rename some scsi_cmnd pointers from ccb or csio to cmd
     - Use simple_strtoul() instead of a handwritten parser
     - SKIP_SPACES was always being used with 1 as a parameter, and was implicitly
       modifying ptr and len.
     - GET_INT_ARG was doing the same with ptr and len.
     - Use pci_iomap(), pci_iounmap(), ioread8() et al
     - Delete the sym_data_dmamap_*() macros
     - Replace SYM_CONF_IOMAPPED with CONFIG_SCSI_SYM53C8XX_IOMAPPED
     - Delete unused SYM_HAVE_SCCB, SYM_HAVE_M_SVTOB, SYM_HAVE_M_SPOOL
    
    Misc cleanup
     - Move sym_conf.h into sym53c8xx.h
     - Eliminate the unused SYM_SETUP_MAX_LUN, SYM_SCMD_PTR
     - SYM_SETUP_PCI_PARITY and SYM_SETUP_SCSI_PARITY are always defined; simplify
     - Rename sym_pci_chip to sym_chip
     - Write sym_get_hcb() to hide nasty macro abuse
     - sym_lp() doesn't need to take the sym_hcb as an argument
     - sym_get_ccb() works better if you give it the cmd instead of the id/lun
     - We don't use cmd->host_scribble, host->dma_channel, host->n_io_port,
       host->io_port, host->base or host->irq; stop initialising them.
     - sym_tune_dev_queuing() works better if you give it the tcb rather than
       the hcb and target
     - Get rid of sym_driver_name(), just use SYM_DRIVER_NAME directly
     - OUTB/INB/etc macros implicitly use the hcb pointer; pass it explictly instead
     - Map the BARs early instead of mapping and unmapping them as necessary
     - Automatically fall back to ioport accesses if iomem isn't available
     - Get rid of tcb_p, lcb_p and ccb_p typedefs
     - Delete support for big endian chips -- 8xx chips can't be in BE mode
     - Inline sym_slot into sym_device
     - Inline sym_printb_hex() into sym_printl_hex()
     - Don't cast function return values to void
     - Introduce sym_nvram_type()
     - Pass the hcb and starget to sym_check_goals since we already have them
       in the caller
     - Some 0/NULL cleanup
     - Embed the sense buffer in the CCB so it doesn't need to be allocated
       separately
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1b3187fc3b487490b45c7c0b551d17208149d560
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 12 23:43:27 2005 -0800

    [SPARC64]: Cleanup and debloat arch/sparc64/kernel/central.c
    
    - Kill unused inline long_align()
    - Consolidate all of the error/failure reporting into
      one function, central_probe_failure()
    - Consolidate linux_prom_registers to physical address
      calculation into one function, prom_reg_to_paddr()
    - Change ZAP() macro into function, do not inline.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6a22cd4a1728df49896fb62474952fd01a4b8e0
Merge: 48d2eca... 256aa11...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Mar 12 22:52:36 2005 -0800

    Merge bk://cifs.bkbits.net/linux-2.5cifs
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 48d2ecacabddf64c1eb97a459cae0e1ea4392725
Author: Steve French <stevef@smfhome.smfdom>
Date:   Sun Mar 13 02:00:48 2005 -0600

    [CIFS] remove the last cifs sparse warnings (except for those which require changes
    outside of cifs vfs)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit c2b0a38341d85896f2a21ad112328eee1db1b53e
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 13 01:07:17 2005 -0600

    [CIFS] remove sparse warnings
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 256aa113f1079656b923fcd7c9ccbd9a29bd5d74
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Mar 12 16:42:20 2005 -0800

    [PATCH] x86: further EFLAGS and ptrace cleanups/fixes
    
    This patch further cleans up the appearance of TF in eflags when ptrace is
    involved.  With this, PTRACE_SINGLESTEP will not cause TF to appear in
    eflags as seen by PTRACE_GETREGS and the like, when the instruction faulted
    for some reason other than the single-step trap.
    
    This moves the check added by Dan's patch from setup_sigcontext to
    handle_signal.  This is a cosmetic difference, but I think it makes more
    sense to consolidate all the "reset registers to canonical state" work in
    the same place (i.e. put it with the syscall rollback code), separate from
    the signal handler setup.
    
    The change that matters is moving the similar check out of do_debug,
    where it only covers the case of a single-step trap.  Instead, it goes
    into the ptrace_signal_deliver macro, which is called before the ptrace
    stop for whatever signal results from whatever kind of fault in that
    instruction (or asynchronous signal).  With that, the handle_signal
    check is still needed only for the case of PTRACE_SINGLESTEP with a
    handled signal.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d375cab01efb635bc731118aa17d6c614c00c753
Merge: 2bd1c1e... c9050ef...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 01:40:58 2005 +0100

    Merge bk://linux-sam.bkbits.net/kconfig
    into mars.ravnborg.org:/home/sam/bk/kconfig

commit 0756f628f0a20b5818f40cc8253e32ff5f71115e
Merge: e6d8676... d375cab...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Mar 12 16:39:57 2005 -0800

    Merge bk://linux-sam.bkbits.net/kconfig
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit c9050ef920a479b5183632e9df6b528e784a4fb5
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 01:35:55 2005 +0100

    kconfig/ppc: fix kconfig warning
    
    fix:
    arch/ppc/Kconfig:211:warning: type of 'CPU_FREQ_TABLE' redefined from 'tristate' to 'boolean'
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 39d77bf2b34d09171aa20beb3448b4a8e70afb43
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 01:27:24 2005 +0100

    kconfig: cleanup USB menu
    
    This properly indents the USB menu.
    In usb menu do not display comment when USB is disabled.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit b49ba2534fdd8a7fc21cc1a37283ea57a55599db
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 01:13:45 2005 +0100

    Kconfig: cleanup various driver menus
    
    This properly indents various driver menus.
    Remove PARPORT_PC_CML1.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit dfa4df1fd3eb10800495ca944601fe6b060b696c
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 00:59:55 2005 +0100

    Kconfig: cleanup kernel hacking menu
    
    o This properly indents the kernel hacking menu.
    o Move LOG_BUF_SHIFT into kernel hacking menu (it already depended on DEBUG_KERNEL).
    o Add DEBUG_KERNEL dependency to EARLY_PRINTK, DEBUG_PREEMPT and FRAME_POINTER.
    o Remove overlong dependency, which included practically every arch.
    o Merge the two MAGIC_SYSRQ menu entries.
    o Remove unnecessary "default n" options.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit b038f7f3fe393aac5d4baad0500076e2dd679f03
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 00:50:13 2005 +0100

    Kconfig: cleanup cpufreq menu
    
    This properly indents the cpufreq menu.
    Remove CPU_FREQ_TABLE as visible option and use select instead
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6ce1c0420678236cb8a0c0733a97c6b86de53ff3
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 00:40:08 2005 +0100

    kconfig/bus: cleanup bus options menu
    
    This properly indents the bus options menu.
    Merge the two MCA variables.
    Remove unnecessary "default n" options.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 7aa5d97cc5447083d5b71850119c2cae39a66a85
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Mar 13 00:28:05 2005 +0100

    kconfig/acpi: Cleanup Kconfig
    
    Simplify dependencies.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c157282ddf285805337bd5dac1bebeff546005f5
Author: Romain LiÃ©vin <lkml@lievin.net>
Date:   Sun Mar 13 00:15:05 2005 +0100

    kconfig: gconfig - fix 2 warnings
    
    This patch fixes some warnings about GtkToolButton in gconfig
    
    Signed-off-by: Romain LiÃ©vin <lkml@lievin.net>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 7a855b2eac6aa3d3b24e615809c4cb87b9e1487b
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Mar 12 23:55:30 2005 +0100

    kconfig: gconfig - define local icons
    
    Define own icons for tree structure, allowing icons to match other icons.
    This also makes gconfig independent on icons defined for xconfig.
    Teached bk to ignore gconf executable
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 542d0e2ae5d7322843e9483e6709f0b3142e415f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Mar 12 06:31:28 2005 -0800

    Linux 2.6.11.3

commit 917f8a8beff29960fee9901ddbf03a7dc7685403
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Sat Mar 12 05:47:59 2005 -0800

    [PATCH] [VIA RHINE] older chips oops on shutdown
    
    Kernel 2.6.11, hardware is a MSI KT333-based board with an XP1800.
    
    I'm oopsing on shutdown on a machine that has a Via Rhine adapter in it:
    
    Unable to handle kernel paging request at virtual address e0803003
      printing eip:
    c01f262c
    *pde = 014dc067
    *pte = 00000000
    Oops: 0000 [#1]
    Modules linked in: cpufreq_userspace cpufreq_powersave cpufreq_ondemand
    CPU:    0
    EIP:    0060:[<c01f262c>]    Not tainted VLI
    EFLAGS: 00010292   (2.6.11)
    EIP is at ioread8+0x2c/0x40
    eax: e0803003   ebx: e0803003   ecx: c026b430   edx: e0803003
    esi: dff90260   edi: e0802f80   ebp: dd117e74   esp: dd117e74
    ds: 007b   es: 007b   ss: 0068
    Process reboot (pid: 5769, threadinfo=dd117000 task=dfafa080)
    Stack: dd117e8c c026b490 dff90040 c151ccd4 c044a1a8 b7fdc078 dd117ea4
    c0253ad9
            c151ccd4 00000042 fee1dead 00000001 dd117fbc c012461c c04d72a8 00000001
            00000000 00010800 00000000 dd117ed8 c013b40b dffe7380 00030800 00000000
    Call Trace:
      [<c0103d5f>] show_stack+0x7f/0xa0
      [<c0103efa>] show_registers+0x15a/0x1c0
      [<c01040ce>] die+0xce/0x150
      [<c0113406>] do_page_fault+0x356/0x692
      [<c01039ff>] error_code+0x2b/0x30
      [<c026b490>] rhine_shutdown+0x60/0x140
      [<c0253ad9>] device_shutdown+0x89/0x8b
      [<c012461c>] sys_reboot+0xac/0x200
      [<c0102f71>] sysenter_past_esp+0x52/0x75
    Code: 3d ff ff 03 00 89 c2 89 e5 77 20 66 31 c0 3d 00 00 01 00 75 0c
    81 e2 ff ff 00 00 ec 0f b6 c0 c9 c3 0f 0b 37 00 7b 65 3b c0 eb ea <0f>
    b6 00 eb ec eb 0d 90 90 90 90 90 90 90 90 90 90 90 90 90 55
    
    Seems like it is the ioread8 in:
    
             /* Hit power state D3 (sleep) */
             iowrite8(ioread8(ioaddr + StickyHW) | 0x03, ioaddr + StickyHW);
    
    that fails. StickyHW is 0x83. lspci says:
    
    0000:00:07.0 Ethernet controller: VIA Technologies, Inc. VT86C100A
    [Rhine] (rev 06)
             Flags: bus master, medium devsel, latency 32, IRQ 18
             I/O ports at ec00 [size=128]
             Memory at dfffff80 (32-bit, non-prefetchable) [size=128]
    
    In other words, it's trying to read outside of the I/O range (0x80),
    which matches the fauling address.
    
    I'm guessing my chip revision doesn't support WOL, it's a crappy noname
    card.
    
    It does seem as if rhine_power_init checks quirks for rqWOL before
    touching any registers. Should rhine_shutdown do the same? Proposed
    patch below, which resolves the problem on my system.
    
    
    Check to make sure WOL is supported before setting it up in
    rhine_shutdown.
    
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8627f44c2b5ad6414769f108c0e4659dbf91aa5
Author: Chris Wright <chrisw@osdl.org>
Date:   Sat Mar 12 05:46:45 2005 -0800

    [PATCH] sis900 kernel oops fix
    
    Backport of fix described below.
    
      From: Herbert Xu <herbert@gondor.apana.org.au>
    
      Fix bug #4223.
    
      OK, this happened because we got preempted before sis900_mii_probe
      finished setting the sis_priv->mii.  Theoretically this can happen
      with SMP as well but I suppose the number of SMP machines with sis900
      is fairly small.
    
      Anyway, the fix is to make sure that sis900_mii_probe is done before
      the device can be opened.  This patch does it by moving the setup
      before register_netdevice.
    
      Since the netdev name is not available before register_netdev, I've
      changed the relevant printk's to use pci_name instead.  Note that
      one of those printk's may be called after register_netdev as well.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e0e4e66b4a81795bc907e71c7bbbf0fe10ca4e6e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sat Mar 12 05:46:01 2005 -0800

    [PATCH] r8169: receive descriptor length fix
    
    The status and received packets indication in the Rx descriptor ring
    are not correctly reset when a descriptor is recycled.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8af4bd799c136b7d419d0b5367c78d4e27fc1cb7
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Sat Mar 12 05:43:53 2005 -0800

    [PATCH] PCI: fix hotplug double free
    
    [PATCH] PCI: fix hotplug double free
    
    With the brackets missed out func could be freed twice.
    
    Found by Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf3e7eabbccf2732d93fb74de9bf9d1de45908e3
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Mar 12 05:42:42 2005 -0800

    [PATCH] ppc32: trivial fix for e500 oprofile build
    
    Fix for trivial fix for 2.6.11 oprofile compilation on e500 based ppc.
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 38541ce8918bb4a61d675466534fb3563380f26c
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 12 05:41:54 2005 -0800

    [PATCH] [TCP]: Put back tcp_timer_bug_msg[] symbol export.
    
    This wrecks the ipv6 modular build for a lot of people.
    In fact, since I always build ipv6 modular I am surprised
    I never hit this.  My best guess is that my compiler is
    optimizing the reference away, but that can never be
    depended upon and the symbol export really is needed.
    
    [TCP]: Put back tcp_timer_bug_msg[] symbol export.
    
    It is needed for tcp_reset_xmit_timer(), which is invoked by
    tcp_prequeue() which is invoked from tcp_ipv6.c
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e29f177378cdfc817adb158ad16951185e2d03ed
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Mar 12 05:40:46 2005 -0800

    [PATCH] Fix i2c messsage flags in video drivers
    
    While working on the saa7110 driver I found a problem with the way
    various video drivers (found on Zoran-based boards) prepare i2c messages
    to be used by i2c_transfer. The drivers improperly copy the i2c client
    flags as the message flags, while both sets are mostly unrelated. The
    net effect in this case is to trigger an I2C block read instead of the
    expected I2C block write. The fix is simply not to pass any flag,
    because none are needed.
    
    I think this patch qualifies hands down as a "critical bug fix" to be
    included in whatever bug-fix-only trees exist these days. As far as I
    can see, all Zoran-based boards are broken in 2.6.11 without this patch.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c794976dacc3d3264377bb5a522e717f843293c7
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Mar 12 05:39:19 2005 -0800

    [PATCH] ppc32: Compilation fixes for Ebony, Luan and Ocotea
    
    From: Matt Porter <mporter@kernel.crashing.org>
    
    this patch fixes the problem, that the current kernel (linux-2.6.11-rc5)
    could not be compiled, when "support for early boot texts over serial port"
    (CONFIG_SERIAL_TEXT_DEBUG=y) is active.
    
    Signed-off-by: Gerhard Jaeger <gjaeger@sysgo.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 757d1be69c951b3d644318ca2a6f282904006bd0
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Mar 12 05:38:27 2005 -0800

    [PATCH] drm missing memset can crash X server..
    
    Egbert Eich reported a bug 2673 on bugs.freedesktop.org and tracked it
    down to a missing memset in the setversion ioctl, this causes X server
    crashes...
    
    From: Egbert Eich <eich@pdx.freedesktop.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 26556a1162f82e214fe6fc7b832f72e367c46920
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Mar 12 05:35:18 2005 -0800

    [PATCH] cramfs: small stat(2) fix
    
    From: Eric Lammerts <eric@lammerts.org>
    
    When I stat(2) a device node on a cramfs, the st_blocks field is bogus
    (it's derived from the size field which in this case holds the major/minor
    numbers).  This makes du(1) output completely wrong.
    
    Signed-off-by: Eric Lammerts <eric@lammerts.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit afa1175df28c9f416b099ed3a682d3f993dd5dbb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Mar 12 05:33:36 2005 -0800

    [PATCH] fix amd64 2.6.11 oops on modprobe (saa7110)
    
    This is a rewrite of the saa7110_write_block function, which was plain
    broken in the case where the underlying adapter supports I2C_FUNC_I2C.
    It also includes related fixes which ensure that different parts of the
    driver agree on the number of registers the chip has.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 04914174d8302a1da55c883eacd5dd3033ec38e2
Merge: 76bf69b... e6d8676...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Mar 11 23:36:12 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 76bf69b27bfd761ac5566c1cd50815276861eb66
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sat Mar 12 01:35:51 2005 -0600

    [CIFS] remove sparse warning
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit e6d8676171bf9e5f25d48fde962e6f5aab3037a0
Merge: 2bd1c1e... 0e6affc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 11 22:03:27 2005 -0800

    Merge bk://linux-sam.bkbits.net/kbuild
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 0e6affc5a27c00c2f740f149b6b491e268d2396c
Merge: 12dd2ea... d605b1d...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Mar 12 10:49:12 2005 +0100

    Merge mars.ravnborg.org:/home/sam/bk/linux-2.6
    into mars.ravnborg.org:/home/sam/bk/kbuild

commit d64be658cf2e0e47432436c214ae493ae607f02d
Merge: eed7bb1... 2bd1c1e...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Mar 11 17:37:39 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 2bd1c1e2685671d995303ec053094398852d86e6
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:17:17 2005 -0800

    [PATCH] PA-RISC signal handler fix
    
    Fix singlestepping into a signal handler
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8eaa6900ea5afc2b9b9ebb0c320baba527fc6ff0
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:17:01 2005 -0800

    [PATCH] Update Thibaut Varene's email address
    
    Update my copyright information in a few files (email change)
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be090884a9e31dc61fe211db4bbaa12e1c13dc8d
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:16:45 2005 -0800

    [PATCH] Make PA-RISC hlt_counter static
    
    makes a needlessly global variable static.
    Posted to parisc-linux mailing list on Mon, 6 Dec 2004 01:41:39 +0100
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92adf9495332efde5886d2accfeb52dfbc40bd45
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:16:29 2005 -0800

    [PATCH] Remove ASSERT macro from PA-RISC PCI-DMA implementation
    
    Remove no-longer-needed ASSERTs
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1842ab56bb98bb3f4bef96e6222512993d932d8
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:16:13 2005 -0800

    [PATCH] Fix PA-RISC for older compilers
    
    Fix declaration-after-code
    
    From: Grant Grundler <grundler@parisc-linux.org>
    From: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e18898f00a7d8431e812b5ac44c8487cca106341
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:15:57 2005 -0800

    [PATCH] PA-RISC GCC-3.4 build fix
    
    fix problem with building 64-bit kernels with gcc-3.4
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 961d603a84347207a234f6eb389b30c2abd7a3f8
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:15:40 2005 -0800

    [PATCH] Add BUG_ON to IRT code
    
    The IRT buffer must be 8-byte aligned
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7148b170b4eb0735e1243da0523bcf65fbf6660
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:15:25 2005 -0800

    [PATCH] PA-RISC PCI update
    
     - Fix PCI-PCI bridges under the first HBA in the system
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    
     - fix up the comment to reflect rbrad's change and why it was made.
     - fix base_addr warning
    From: Grant Grundler <grundler@parisc-linux.org>
    
     - Reword the explanation about why we renumber PCI busses on all platforms.
     - Remove CONFIG_PARISC64 symbol; use CONFIG_64BIT everywhere instead.
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6a70f7108e1b8a177f10599e7f37030c71b0f6c
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:15:08 2005 -0800

    [PATCH] Fix compile warnings in PA-RISC LEC driver
    
    LED addresses are physical addresses, not remapped.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da32f974a05e11ec2f6c85cd01736b2965639b58
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:14:51 2005 -0800

    [PATCH] PA-RISC GSC interrupt fixes
    
    Two problems occurred with the recent switch to virtual interrupt numbers.
    
    The first is that two devices (eg Lasi PS/2 mouse and keyboard) can
    share the same physical interrupt and should therefore share the same
    virtual interrupt rather than have a new one assigned to them.  Fix this
    by initialising the global_irq array to NO_IRQ, then checking the array
    before assigning a new one.
    
    The second is that some GSC devices (eg HIL and EISA) can have
    two interrupts; one for normal interrupts and the other for NMI or
    high-priority.  To fix this, I introduced an auxiliary IRQ to the
    parisc_device and fill it in in Asp and Wax.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01c7a821e0f92091b5d6d5bf7101193569719dc3
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:14:34 2005 -0800

    [PATCH] PA-RISC MM init fixes
    
     - add missing header fixing build warning
    From: Thibaut Varene <varenet@parisc-linux.org>
    
     - remove duplicate definition of max_pfn
    From: Randolph Chung <tausq@parisc-linux.org>
    
     - remove unnecessary assignment to mem_map (thanks to Dave Hansen)
     - print memory in MB, not Mb
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c84d973b16fdac1746f104efce2f9284dbad7a5e
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:14:18 2005 -0800

    [PATCH] Fix PA-RISC memcpy asm() statements
    
    some adjustments to the asm()s to make gcc happy
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91e564f47ab52607c3b5d0a247968cfa329e1416
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:14:01 2005 -0800

    [PATCH] Fix PA-RISC unwinding from millicode
    
    Fix unwinding from millicode
    
    Signed-off-by: Randolph Chung <tausq@debian.org>
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1d4933069a6e420a1c7259267751a4f13876ba4
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 17:13:44 2005 -0800

    [PATCH] PA-RISC STI video updates
    
     - currcon seems to have disappeared.  We weren't using it, just initialising
       it.
     - parisc_driver names no longer need to be different from pci_driver names.
     - DUMMY_CONSOLE_COLUMNS and DUMMY_CONSOLE_ROWS aren't used by the STI_CONSOLE
       at all.  In fact, they're used by the DUMMY_CONSOLE as their name implies.
     - STI_CONSOLE doesn't need to depend on FRAMEBUFFER_CONSOLE
     - sticore.o uses functions from fonts.o
     - PA-RISC doesn't have an MDA_CONSOLE
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    
     - Move STI_CONSOLE after FRAMEBUFFER_CONSOLE
     - Convert sticore.c to using gsc_(read|write)X instead of __raw_(read|write)X.
     - Convert pci_device_id table to use PCI_DEVICE().
    Signed-Off-By: Kyle McMartin <kyle@parisc-linux.org>
    
     - apply patch by Andy Walker <ajwalker@broadpark.no> to fix stifb=
       bpp:x:y handling
    From: Helge Deller <deller@parisc-linux.org>
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30fa4fec25794bebf646cc268363abf5cc9f1c75
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Fri Mar 11 17:13:28 2005 -0800

    [PATCH] RPC: remove bogus atomic_dec in auth_null
    
    The atomic_dec in nul_destroy() is harmless, but can trigger an underflow
    error if the atomic_dec_and_test() debugging is turned on.
    
    Problem diagnosed by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfcba092b33c781d560956c0f94779aa0dfd5099
Merge: a4fa703... b42d155...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 11 17:10:59 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a4fa7036693a11e5403e1d9ae6d1eeb2f581a685
Merge: 85ef12d... 488677e...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 11 17:09:40 2005 -0800

    Merge bk://gkernel.bkbits.net/libata-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 85ef12d65a0d5652cc8684bad1ba0160257f0469
Merge: 9c488d6... 9d340cb...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 11 17:02:29 2005 -0800

    Merge http://lia64.bkbits.net/linux-ia64-release-2.6.12
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 9d340cb7c38e0872b742890d76190cc3ac3cfd50
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Mar 11 16:40:56 2005 -0800

    [PATCH] Make lots of things static
    
    This is a megarollup of ~60 patches which give various things static scope.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af942602d0cc67254c861ed1c9a4171ccd6e0e32
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:40:32 2005 -0800

    [PATCH] docbook: escape declaration_purpose
    
    Escape declaration_purpose
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d32e0c137a0a43a4766682b4a1434a47fe87e006
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:40:16 2005 -0800

    [PATCH] docbook: factor out escaping of XML special characters
    
    Factor out escaping of XML special characters
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb445dd47e2ed04fb0fff87584b4912b5578bf4c
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:40:00 2005 -0800

    [PATCH] docbook: add kfifo to kernel-api docs
    
    Add kfifo to kernel-api docs
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc3b3b1dd5da36b29dd35abdd95795b54bb09241
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:39:44 2005 -0800

    [PATCH] docbook: kernel-docify comments
    
    Kernel-docify comments
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed309c361ac51d3ad8f1a34ceef811234959fd4d
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:39:28 2005 -0800

    [PATCH] docbook: fix XML in templates
    
    Fix XML in templates
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f326b3fcd05424f848caa7735e8e33d7d6692d2d
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:39:12 2005 -0800

    [PATCH] docbook: s/sgml/xml/ in Documentation/DocBook/Makefile
    
    s/sgml/xml/ in Documentation/DocBook/Makefile
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e393704408bfdd2ee9cb69068b642cdebbef281e
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:38:56 2005 -0800

    [PATCH] docbook: move kernel-doc comment next to function
    
    Move kernel-doc comment next to function
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0de590c4445343f9a02e391b567d0209c45bb1ec
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:38:39 2005 -0800

    [PATCH] docbook: s/sgml/xml/ in scripts/kernel-doc
    
    s/sgml/xml/ in scripts/kernel-doc
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f25aad9eeb251592d79000c1a0c5830756358760
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:38:24 2005 -0800

    [PATCH] docbook: convert template files to XML
    
    Convert template files to XML
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 543147290f76042a0b8ac9ff7aba05fe409d1a62
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:38:06 2005 -0800

    [PATCH] docbook: new kernel-doc comments for might_sleep & wait_event_*
    
    New kernel-doc comments for might_sleep & wait_event_*
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62c1de8c0c066f36d8e9d7d6a457eedff155bff5
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:37:50 2005 -0800

    [PATCH] docbook: fix function parameter descriptin in fbmem
    
    Fix function parameter descriptin in fbmem
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89fc22e4f3c6be4f7d947495d87d9d4bb7dc6894
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:37:34 2005 -0800

    [PATCH] docbook: update function parameter description in USB code
    
    Update function parameter description in USB code
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 132f5057991286484937e5539f07555228c3bf8d
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:37:17 2005 -0800

    [PATCH] docbook: update function parameter description in block/fs code
    
    Update function parameter description in block/fs code
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37afa8a4b47677cfa6bb20996f4461c36c6bea0f
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:36:59 2005 -0800

    [PATCH] docbook: update function parameter description in network code
    
    Update function parameter description in network code
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae093336be560d4c9259442303ead98662ffcfce
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Mar 11 16:36:44 2005 -0800

    [PATCH] docbook: allow preprocessor directives between kernel-doc and function
    
    Allow preprocessor directives between kernel-doc and function
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95500fb7eb1e0531fefc3b012680d92580c14bb2
Author: Jan Kara <jack@suse.cz>
Date:   Fri Mar 11 16:36:28 2005 -0800

    [PATCH] Update Documentation/filesystems/Locking
    
    Attached patch updates documentation in Documentation/filesystems/Locking
    to match the current state of quota code.  Also a few comments in quota
    code are updated.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dc35eed11ee19f34b6c488b2066ac0287e14f03
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:36:11 2005 -0800

    [PATCH] md: remove kludgy level check from md.c
    
    This test is overly specific, and misses raid10.
    Assume all levels >= 1 might need reconstruction instead.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98202f3224a464b041cb5411473e45a8ab33f5c1
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:35:55 2005 -0800

    [PATCH] md: make raid5 and raid6 robust against failure during recovery.
    
    Two problems are fixed here.
    1/ if the array is known to require a resync (parity update),
      but there are too many failed devices,  the resync cannot complete
      but will be retried indefinitely.
    2/ if the array has too many failed drives to be usable and a spare is
      available, reconstruction will be attempted, but cannot work.  This
      also is retried indefinitely.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea9694b2974ab8d4bcc2236596f11b20a05ae86a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:35:37 2005 -0800

    [PATCH] md: remove possible oops in md/raid1
    
    When we get a pointer and check it is non-null, we should not get the pointer
    again but should instead use the pointer we got in the first place...
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93c944b29866a79a337cf7c5a8d3669014426afb
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:35:21 2005 -0800

    [PATCH] md: RAID Kconfig cleanups, remove experimental tag from RAID-6
    
    This patch removes the experimental tag from RAID-6 (unfortunately the
    damage is already done...:-|) and cleans up a few more things in the
    Kconfig file.
    
    Signed-Off-By: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4cee2ee53fbb2f26d57ffe03d78ce1692aa4c0d8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:35:06 2005 -0800

    [PATCH] md: fix multipath assembly bug
    
    In md, there are "level" number and "personality" numbers.  LEVEL_MULTIPATH
    is the level number for multipath.  MULTIPATH is the personality number for
    multipath.
    
    In one place, we compare the level with a personality ...  bad
    
    This makes it impossible to assemble multipath arrays.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1eb197e6f14851205bc85d9a53b1619af469c931
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 11 16:34:50 2005 -0800

    [PATCH] md: erroneous sizeof use in raid1
    
    This isn't a real bug as the smallest slab-size is 32 bytes but please
    apply for consistency.
    
    Found by the Coverity tool.
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6bbef685997f9f8c41f1014a84c502b21a014e9
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:34:33 2005 -0800

    [PATCH] v4l: MAINTAINERS file update.
    
      Hi folks,
    
    Goodbye, and that thanks for all the fish ;)
    
    After several years of v4l maintainance I'm going to switch
    to a new work field and will not be able to spend much time
    on maintaining video4linux and the drivers, so someone else
    will have to step in.
    
    I will not suddenly disappear from earth, I will be available
    for questions and patch reviews for some time, but I'll stop
    doing active development and most likely will not have the
    time to act as central patch relay for all video4linux stuff.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c418775aeb5667c9e8d5e26f8faa94109c804ec9
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:34:17 2005 -0800

    [PATCH] media/video/cx88*: convert pci_module_init to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1313943fe6c479a1df61e7c19cb01fe7abdace87
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:34:01 2005 -0800

    [PATCH] dvb: add or51132 driver (atsc demodulator)
    
    This patch adds a new ATSC frontend driver, needed by the cx88-based pcHDTV
    3000 card.  Also includes a tiny chunk to activate the or51132 support in the
    cx88-dvb driver.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e44d520eae58003b0c21a7fa80a775457d1fb0ae
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:33:43 2005 -0800

    [PATCH] v4l: cx88 driver update
    
    Finally the big cx88 driver update which makes the cx88-dvb driver compile and
    work for some cards.  A number of changes accumulated over time ...
    
     * various new tv cards added / fixed.
     * added support for infrared remote controls.
     * some fixes in the blackbird (mpeg encoder) driver,
       starts working now.
     * configurarion for analog hauppauge cards now uses
       the tveeprom module.
     * kconfig fixups.
     * powermanagement fixups.
     * lot of tweaks for tv audio (make NICAM decoding work).
     * lot of changes in the dvb driver, still not working
       for all cards though as some more changes in the dvb
       subsystem are needed.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d3430ba10afd2436c74c1503c03734d6b86a36d
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:33:26 2005 -0800

    [PATCH] saa7134 update
    
    Major saa7134 driver update.  Changes:
     * add a bunch of new cards.
     * add dvb card support (Pinnacle 300i only for now ...).
     * update empress encoder card support,
       use the new v4l2 mpeg API for the settings.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32ecb127185101e58f6efc001c1965e686ce621a
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:33:08 2005 -0800

    [PATCH] v4l2 api: mpeg encoder support
    
    Add a ioctl to set mpeg hardware encoder parameters.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fe3fc30cfffc7dd20720cdba3bb5a56cb6ddecb
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:32:52 2005 -0800

    [PATCH] dvb: mt352 frontend driver update
    
    This patch updates the mt352 driver to make it work with the Pinnacle 300i
    card.  Some values are calculated at runtime now instead of having hard-coded
    defaults because the defaults don't fit for the Pinnacle, and some more small
    tweaks + fixes.
    
    This was also discussed + accepted on the dvb list, going to submit directly
    because the saa7134 driver update depends on this.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33faa39b822526e06559c580626980b27c81a166
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:32:35 2005 -0800

    [PATCH] dvb: add pll lib
    
    This adds some helper code to handle tuning for dvb cards, with a struct
    describing the pll and a function calculating the command sequence needed to
    program it.
    
    This one was discussed + accepted on the linuxtv list and also is in the
    linuxtv cvs.  As the the cx88 driver update I want finally get out of the door
    depends on this one I'll go submit it myself instead of waiting for the dvb
    guys doing it.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a97b3a41237f25be41d84c44d4a3ffb1e48465f2
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:32:18 2005 -0800

    [PATCH] Videotext: use I2C_CLIENT_INSMOD macro
    
    The patch below simplifies the videotext drivers saa5246a and saa5249 by using
    the I2C_CLIENT_INSMOD macro.
    
    Thanks to Kai Volkmar.
    
    Signed-off-by: Michael Geng <linux@michaelgeng.de>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa17e4e2a9d91331b7930aeff5e49c4f5172ec97
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:32:02 2005 -0800

    [PATCH] media/planb: replace interruptible_sleep_on() with wait_event()
    
    Use wait_event() instead of the deprecated interruptible_sleep_on().  Current
    code does not check for signals, so interruptible seems unnecessary.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ea2cda876edb5c484ddfc62e63f3c6b35dca6cf
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:31:44 2005 -0800

    [PATCH] media/radio-zoltrix: replace sleep_delay() with msleep()
    
    Use msleep() instead of sleep_delay() so that the driver sleeps as the comment
    indicated.  I assumed that two sleep_delay()s in a row indicated sleeping for
    20ms.  Please let me know if this is incorrect.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c21677a93e5c183b2aef71cc5e845ef232063f5
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:31:28 2005 -0800

    [PATCH] media/saa7110: remove sleep_on*() usage
    
    Directly use wait-queues instead of the deprecated sleep_on_timeout().  Since
    the sleep in this function is unconditional, wait_event_timeout() does not
    appear to be appropriate.  Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ac6475211932b85e9432c92fed4890d5b14ae56
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:31:12 2005 -0800

    [PATCH] media/zoran_card: remove interruptible_sleep_on_timeout() usage
    
    Remove deprecated interruptible_sleep_on_timeout() function calls and replace
    with direct wait-queue usage.  Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86154747d9a3e1e52854b712fb478085ae31cfca
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:30:55 2005 -0800

    [PATCH] media/zoran_device: replace interruptible_sleep_on() with wait_event_interruptible()
    
    Use wait_event_interruptible() instead of the deprecated
    interruptible_sleep_on().  Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50b5642a3e24e5167945476e28b983d50383cc71
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:30:39 2005 -0800

    [PATCH] media/zoran_driver: replace interruptible_sleep_on_timeout() with wait_event_interruptible_timeout()
    
    Use wait_event_interruptible_timeout() instead of the deprecated
    interruptible_sleep_on_timeout().  Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98dcb39d9c953c983c72f6e8fb0ed08e05feb1d2
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:30:23 2005 -0800

    [PATCH] media/zr36120: replace interruptible_sleep_on() with wait_event_interruptible()
    
    Use wait_event_interruptible() instead of the deprecated
    interruptible_sleep_on().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3df31a7b14b5bb8ab025e83518597c7f61943dae
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:30:07 2005 -0800

    [PATCH] miropcm20-radio cleanup
    
    This is cleanup of file miropcm20-radio.c
    
    Compile tested.
    
    Signed-off-by: Marcel Sebek <sebek64@post.cz>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 439b0336dbb4ea9d8b85b6a2957c7d98ee78e14e
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:29:50 2005 -0800

    [PATCH] stradis.c - vfree() checking cleanups
    
    stradis.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0896f63b3e7647b7469782b3fd4f767ff3c06f8
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:29:34 2005 -0800

    [PATCH] v4l: tveeprom update
    
    Add some new tuners to the list.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d980df0c86c882eba050f263bddab5494ddfdd3e
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:29:18 2005 -0800

    [PATCH] v4l: documentation update.
    
    $subject says all ;)
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 480a857dd53293ea0fb470ecafdd884648341337
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:29:02 2005 -0800

    [PATCH] v4l: tuner update
    
    Minor update for the tuner module:  Add some new entries,
    fix a bug in the tda8290 driver.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9edf190eef93b66fb9e246df7c0d633314346da5
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:28:44 2005 -0800

    [PATCH] v4l: bttv IR driver update
    
    minor bttv IR driver update: drop a keytable and use the one in
    ir-common.ko instead.
    
    This patch depends on the ir-common update.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33a3f0489ca0d21b9fc8f21c751370c38c3f0c53
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:28:29 2005 -0800

    [PATCH] v4l: video-buf update
    
    Bugfix: catch pci_map_sg() failures.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fd96c9c36f50da008cedeab566cd4f993e59d2f
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:28:13 2005 -0800

    [PATCH] v4l: bttv driver update
    
    This is a bttv driver update, changes:
      * add support for a new card.
      * add some debug code (bt878 risc disassembler).
      * drop some obsolete i2c code.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60b59358a68f0282faa589b28864db5d2a12a759
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Fri Mar 11 16:27:56 2005 -0800

    [PATCH] v4l: IR common update
    
    Changes:
     * add some keytables which are used by both bttv and cx88 driver
       so they can be shared.
     * add IR decoding helper functions.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa90e37011db4ef1405511f5e7486f230a8ef0a6
Author: Kenneth W. Chen <kenneth.w.chen@intel.com>
Date:   Fri Mar 11 16:27:39 2005 -0800

    [PATCH] re-inline sched functions
    
    This could be part of the unknown 2% performance regression with
    db transaction processing benchmark.
    
    The four functions in the following patch use to be inline.  They
    are un-inlined since 2.6.7.
    
    We measured that by re-inline them back on 2.6.9, it improves performance
    for db transaction processing benchmark, +0.2% (on real hardware :-)
    
    The cost is certainly larger kernel size, cost 928 bytes on x86, and
    2728 bytes on ia64.  But certainly worth the money for enterprise
    customer since they improve performance on enterprise workload.
    
    # size vmlinux.*
       text    data     bss     dec     hex filename
    3261844  717184  262020 4241048  40b698 vmlinux.x86.orig
    3262772  717488  262020 4242280  40bb68 vmlinux.x86.inline
    
       text    data     bss     dec     hex filename
    5836933  903828  201940 6942701  69efed vmlinux.ia64.orig
    5839661  903460  201940 6945061  69f925 vmlinux.ia64.inline
    
    Possible we can introduce them back?
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfec4ab5852be481742b5af1880ebc185d1201e3
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Fri Mar 11 16:27:23 2005 -0800

    [PATCH] sched: find_busiest_group cleanup
    
    Cleanup find_busiest_group a bit.  New sched-domains code means we can't have
    groups without a CPU.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ef1a7bf81c5f5e6c1ab5f6d98a04feb5363ceef
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Fri Mar 11 16:27:07 2005 -0800

    [PATCH] sched: find_busiest_group fixlets
    
    Fix up a few small warts in the periodic multiprocessor rebalancing code.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3f4a698afae3b512b54af1eb49b02a53cf1bf3f
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Fri Mar 11 16:26:51 2005 -0800

    [PATCH] sched: rework schedstats
    
    Move balancing fields into struct sched_domain, so we can get more useful
    results on systems with multiple domains (eg SMT+SMP, CMP+NUMA, SMP+NUMA,
    etc).
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 992ee3c55f8fd91a83330eccd95db65c7f8da2a5
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Fri Mar 11 16:26:34 2005 -0800

    [PATCH] sched: timestamp fixes
    
    Some fixes for unsynchronised TSCs.  A task's timestamp may have been set by
    another CPU.  Although we try to adjust this correctly with the
    timestamp_last_tick field, there is no guarantee this will be exactly right.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97e7cd85558a555b917c570afadb82721831918a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:26:18 2005 -0800

    [PATCH] pcmcia: per-device sysfs output
    
    Per-device sysfs output which reports up to four product ID strings,
    manufactor ID, product ID and function ID.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf923b783b2c54cd4f6629003626ceb5e26479cb
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:26:02 2005 -0800

    [PATCH] pcmcia: determine some useful information about devices
    
    Determine some useful information about the device, namely
    a) manufactor ID
    b) card ID
    c) function ID
    d) product information strings
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c72ec50c5c17362618070a407e5b37a9b13a1c0c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:25:46 2005 -0800

    [PATCH] pcmcia: add pcmcia devices autonomously
    
    Add pcmcia devices without cardmgr's interaction
    
    If it's a "static" socket or the non-static socket has all its resources set
    up, there's no reason why the PCMCIA core can't detect and set up pcmcia
    devices without cardmgr's interaction.  Matching is still done in userspace,
    though; and if the PCMCIA core misses something, cardmgr can still add
    devices...
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e51cb13af4f2707209a284966b8d8f68918c3213
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:25:30 2005 -0800

    [PATCH] pcmcia: use bus_rescan_devices
    
    Use bus_rescan_devices() and a pcmcia_bus_match() function to match pcmcia
    devices and drivers based on cardmgr's wishes.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6eb54a114c9a8d1fa7e2f988086a1c3bc809eb65
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:25:14 2005 -0800

    [PATCH] pcmcia: pcmcia_device_add
    
    Re-structure the adding of PCMCIA devices and the binding of devices and
    drivers by cardmgr in bind_device: pcmcia_add_device() adds a new PCMCIA
    device for a socket and a device function, if it hasn't been done before.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd6d3a0f255cc344eb627cdef7741cea5f29604a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:24:58 2005 -0800

    [PATCH] pcmcia: pcmcia_device_remove
    
    Move the removal of a device from a driver (a.k.a.  "detach") to a
    driver-model conform pcmcia_device_remove() function which is called within
    device_unregister().
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10008a57a0a083ed3ac424af4907af6f02eaefdb
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:24:42 2005 -0800

    [PATCH] pcmcia: pcmcia_device_probe
    
    Move the probing of a device-driver pair (a.k.a. "attach") into
    pcmcia_device_probe() conforming to the driver model.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0efb3841ad6cd87f488d669325b7897a296c03ae
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:24:26 2005 -0800

    [PATCH] pcmcia: mark resource setup as done
    
    PCMCIA device registration should only happen if we're quite confident
    there are resources available to at least map the CIS space -- else we can't
    determine manfid/cardid, whether it is a multifunction card, etc. So,
    add a flag to struct pcmcia_socket which denotes that -- and also whether
    resources were added the "old" adjust_resource_info way. On static sockets,
    it is activated upon registration, on non-static sockets, it is set upon an
    echo'ing of anything into
    /sys/class/pcmcia_socket/pcmcia_socket%n/device_possible_resources_setup_done
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a071032271f8e8a54287e939125bb4686efdb547
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:24:09 2005 -0800

    [PATCH] pcmcia: rsrc_nonstatic: sysfs input
    
    Add a sysfs input method for the non-static socket resource database. It
    works by writing
    "+ 0x%[l]x - 0x%[l]x"
    or simply
    "0x%[l]x - 0x%[l]x"
    for adding resources, and by
    "- 0x%[l]x - 0x%[l]x"
    for removing resources to
    /sys/class/pcmcia_socket/pcmcia_socket%n/available_resources_{io_mem}
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 650f2fe623218979f305f9ba04b1281625d8dda3
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Mar 11 16:23:53 2005 -0800

    [PATCH] pcmcia: rsrc_nonstatic: sysfs output
    
    Add sysfs output to the non-static resource database.  It'll reside in
    /sys/class/pcmcia_socket/pcmcia_socket%n/available_resources_{io_mem} and be
    of the format
    
    "0x%08lx - 0x%08lx\n"
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ede2f6288152315fd667dd7fefe72bdec1d453e2
Author: Christophe Lucas <c.lucas@ifrance.com>
Date:   Fri Mar 11 16:23:37 2005 -0800

    [PATCH] pcmcia: pd6729 - convert to pci_register_driver()
    
    convert from pci_module_init to pci_register_driver
    (from:http://kerneljanitors.org/TODO).
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a1bd22430d1d6a6d73e25ce1dcc14a143e107dd
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Fri Mar 11 16:23:19 2005 -0800

    [PATCH] pcmcia: yenta_socket - ti4150 support
    
    1) Add PCI_DEVICE_ID_TI_4510 to pci_id.h.
    2) Add PCI4510 to yenta_table (that uses TI12XX handlers).
    3) Add zoom_video handler support.
    
    TI12XX handlers can disable CLKRUN feature with "disable_clkrun" option.  Some
    devices or bridge itself seems to be needing this option as workaround.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aaa7a2c83cee71daacfd03c5839a8ddaa298f9ab
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Mar 11 16:23:04 2005 -0800

    [PATCH] pcmcia: update vrc4171_card
    
    These patches add a new interface for adding and removing I/O and mem
    resources which are made available to 16-bit PCMCIA devices (content of
    /etc/pcmcia/config.opts ) on non-statically mapped sockets.  Also, they
    continue the device model integration of the PCMCIA subsystem, and provide
    some output about PCMCIA devices via sysfs.
    
    This patch updates vrc4171 pcmcia driver.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10563ff4f63903a3ecedcf8375d766149c31111e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 11 16:22:47 2005 -0800

    [PATCH] ppc64: Add basic support for the SMU chip in iMac G5
    
    The iMac G5 and latest single-cpu PowerMac G5 have seen the venerable PMU
    (Power Management Unit) chip been sent to well deserved retirement.  It has
    been replaced by a newcomer, the SMU (System Management Unit ?) which is of
    course totally undocumented and has no open source darwin driver...  The
    SMU chip is responsible of initializing the chipset & CPU (boot process),
    power supply control, real time clock, fan control, provides some i2c
    busses, etc...  etc...  etc...
    
    This is a very basic driver based on the Open Firmware methods for
    accessing this chip.  It provides synchronous functions only, and does
    restart, shutdown, and real time clock access.  There is still no fan
    control, at least not until we have figured out how to access the fans via
    the SMU.
    
    The initial code was written by J.  Mayer <l_indien@magic.fr>, I mostly
    rewrote it to better adhere to our coding style standards ;)
    
    The patch also updates the g5_defconfig to include the SMU support by
    default.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25f8f7433f094c99c40bac55ae46a8aceee9144d
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 11 16:22:29 2005 -0800

    [PATCH] ppc64: Fix some PCI interrupt routing issues on iMac G5
    
    The iMac G5 has some issues with Apple chips not having a valid
    PCI_INTERRUPT_PIN.  This patch fixes IRQ routing on PowerMac platforms so
    that it only relies on the Open Firmware informations which are correct.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: J. Mayer <l_indien@magic.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6bf4cce48665ef340dc59853b5b9b5727d123bf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 11 16:22:13 2005 -0800

    [PATCH] ppc64: Add IDE-pmac support for new "Shasta" chipset
    
    The iMac G5 and new single CPU PowerMac G5 come with a new revision of the
    K2 ASIC called Shasta.  The PATA cell in there now does 133Mhz.  This patch
    adds support for it.  It also adds some power management bits to the old
    100MHz cell that was in Intrepid based ppc32 machines.  The original iMac
    G5 bits are from J.  Mayer <l_indien@magic.fr>
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e1995d26cbe998a17e109de5276540b7af00928
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 11 16:21:57 2005 -0800

    [PATCH] ppc64: new machine definitions
    
    This patch adds new machine definitions for the iMac G5 and the new single
    processor PowerMac G5.  It also slightly updates the existing definitions.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 796cdefdbb96f1118f0f5d44cce72552d7af8d21
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri Mar 11 16:21:41 2005 -0800

    [PATCH] ppc64: don't use in_atomic()
    
    in_atomic() in viopath.c was just used to determine if we had initialised
    enough to be able to wait in a semaphore (i.e.  schedule).  Thus it can be
    replaced now with checking system_state for SYSTEM_RUNNING.
    
    Test booted on iSeries (which is the only place it is used).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9f1c6de5f93337fe6b93235aad28942407ff12f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 11 16:21:25 2005 -0800

    [PATCH] ppc64: Export proper version from vDSO
    
    The ppc64 vDSO is still exporting LINUX_2.6.11 (from -mm) for symbol
    versioning.  The glibc folks asked me to export the first kernel version
    that will contain it, so this patch fixes it to LINUX_2.6.12
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d95eeb26503a6721fa0d9f91dcac7a000180805
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Fri Mar 11 16:21:09 2005 -0800

    [PATCH] ppc64: fix linking zImage with biarch ld
    
    I noticed that with the vDSO patch in 2.6.11-bk, it's almost possible to
    build the kernel with the fedora biarch toolchain.  However, I still get
    warnings from ld about zImage being the wrong architecture, unless I change
    the script as shown in this patch.
    
    I'm not sure if this breaks setups with old binutils that might not
    understand powerpc:common, otherwise please apply.
    
    (benh said: "Our toolchain guru says this shouldn't break unless your
    binutils are completely rotten...")
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6abb21f4d1aaf7ee6e4b1057de7e26b99f30eb87
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 11 16:20:54 2005 -0800

    [PATCH] ppc32: Add rtc hooks to katana + fw bug workaround
    
    Add rtc hooks to katana and workaround firmware bug.
    
    - Now that the mv64xxx i2c and m41t00 i2c rtc drivers are in the source
      base, add hooks to the katana file to use that rtc.
    
    - A recent version of the katana firmware incorrectly changes the
      mv64x60's pci vendor & device id so this patch puts back the proper
      values.
    
    - Misc. cleanup and update of the default config file.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 933fd0aa1bf403d30fef6b367b88777088558969
Merge: 0ef0d8d... 30c47ae...
Author: Nathan Scott <nathans@sgi.com>
Date:   Sat Mar 12 09:49:23 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit b42d155103fef789caa75f18c6296788d9b6e3f4
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri Mar 11 13:27:01 2005 -0500

    [PATCH] -ac bits for ULI ethernet missing from 2.6.11
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit afe4b3a6bfa942d368d5bf63c5146c51ebab87fc
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Fri Mar 11 13:26:46 2005 -0500

    [PATCH] Lance needs delay.h
    
    An 'allyesconfig' on PA-RISC shows that lance is using mdelay without
    including <linux/delay.h>
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9009442068c2fa5fa6b267184184fe854e75bcda
Author: Arnaud Patard <apatard@mandrakesoft.com>
Date:   Fri Mar 11 13:26:34 2005 -0500

    [PATCH] sk98lin driver: fix driver name string
    
    I've just notice that in 2.6.11 in the sk98lin driver, the name of the
    module is set to skge in the pci_driver structure. IMHO, it should be
    sk98lin.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a243576b5acccdf0b7a235aff643a598230d9a11
Author: FranÃ§ois Romieu <romieu@fr.zoreil.com>
Date:   Fri Mar 11 13:26:21 2005 -0500

    [PATCH] Fix r8169: panic on 2.6.11
    
    Stephen Hemminger <shemminger@osdl.org> :
    [...]
    > > +	u32 eor = le32_to_cpu(desc->opts1) & ~RingEnd;
                                                 ^
    Oops.
    
    Updated patch against plain 2.6.11 below (NAPI is strongly
    suggested, no need to disable rx_copybreak). The patch has
    been tested on a 100Mbps ethernet but it does not want to
    crash. I'll hack the testbed and see tomorrow how things
    behave on Gb.
    
    The status and received packets indication in the Rx descriptor ring
    are not correctly reset when a descriptor is recycled.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 51c9392596b7430200ee34a35d7ee313ef868721
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Mar 11 13:26:08 2005 -0500

    [PATCH] drivers/net/typhoon: make a firmware image static
    
    This patch makes a nedlessly global firmware image static.
    
    This patch was already ACK'ed by David Dillow.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5f7435968f50615831b44ea5c1b5034a3e407d32
Author: Dave Jones <davej@redhat.com>
Date:   Fri Mar 11 13:11:50 2005 -0500

    [AGPGART] SGI TIO support.
    
    From: Mike Werner
    Signed-off-by: Dave Jones <davej@redhat.com>

commit eed7bb1bb8a8e4f5bb24292b98f8535925701b03
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Fri Mar 11 05:31:12 2005 -0600

    [CIFS] fix when CONFIG_CIFS_EXPERIMENTAL is on and server does not support Unix extensions to call the legacy qfsinfo
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 12dd2ea4409a7b2829641b5af9ec14f68295d718
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Mar 11 03:16:16 2005 -0800

    [PATCH] netfilter: Fix iptables userspace compatibility breakage
    
    ip_tables failed to recognize IPT_RETURN because it was defined relative
    to NF_MAX_VERDICT (which changed) and returned it to nf_iterate(). The
    old value of IPT_RETURN matches NF_REPEAT, so the hook was called again
    and again.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec43f55fee8179b753f5b389185deeceb03a7f37
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 11 03:12:53 2005 -0800

    Undo the netfilter undo - the next patch fixes the regression it caused.
    
    Cset exclude: torvalds@ppc970.osdl.org|ChangeSet|20050311080305|44342

commit 0684ae4af87608010fcfe86ceb8e205b75aa9580
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Fri Mar 11 04:57:29 2005 -0600

    [CIFS] statfs protocol extensions part 2
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 76ae6d567b0f17402feb35164a9323ca8a88f97d
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Mar 11 01:38:21 2005 -0800

    Make audit.h forward declarations unconditional.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit d605b1d3fef0abb0c76798101859b26e04e3e51a
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Fri Mar 11 08:37:01 2005 +0100

    kbuild: Trivial fixes for top level Makefile
    
    o Typos corrected
    o Avoid line wrapping
    Both from: Manish Singh <yosh@gimp.org>
    o Remove duplicate -Wno-sign-compare for gcc 4.0
    From: Adrian Bunk <bunk@stusta.de>
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5ee8f03ce7bac545f94826e27f21fe7fe3ac33c9
Merge: 23b721a... e8a5428...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Thu Mar 10 20:43:41 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 9c488d6256e579133eadf027a45648e99d943239
Author: Eric Piel <eric.piel@lifl.fr>
Date:   Thu Mar 10 19:43:50 2005 -0800

    [IA64] document "nohalt" option
    
    IA64 has had a "nohalt" command line option to bypass calling
    PAL_HALT_LIGHT in the idle loop for some time ... documenting
    it has somehow slipped through the cracks.
    
    Signed-off-by: Eric Piel <eric.piel@lifl.fr>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 72af864e1225d5a6ce67bbefe6e82a2eeed12ede
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Thu Mar 10 18:59:58 2005 -0800

    [IA64] Add HP zx2 chipset identifier
    
    Here's a little patch that adds the chipset identifier for the
    upcoming successor to the zx1 chipset.  Please apply.  Thanks,
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e8a542874606691df2d754c2a37153085a4b64ae
Merge: e072d3e... e7e3950...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 10 17:57:14 2005 -0800

    Merge http://linux-sound.bkbits.net/linux-sound
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit e7e3950ab5b4eda2b7d3ee536ff4b684873522fe
Merge: ece8df7... 4eaf05a...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Mar 11 11:20:05 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-sound
    into suse.cz:/home/perex/bk/linux-sound/work

commit ece8df7933db68b04d396f6c97a333281573bad1
Merge: 771a730... 72815e1...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Mar 11 11:09:44 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-2.5
    into suse.cz:/home/perex/bk/linux-sound/linux-sound

commit 4eaf05ae2cba578ce00d92c1c274d18d256bc919
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Mar 11 10:57:50 2005 +0100

    [ALSA] AC97 wm9713 support
    
    AC97 Codec
    This patch series adds support for the WM9713/WM9714 family of AC97
    codecs. This family is different from 'standard' AC97 codecs in that the
    default codec power state is 'off'. i.e. performing a register reset
    will power the device down.
    
    This patch also adds better support for larger single/double channel
    enumerated mixer types.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 30c47ae0bda2fa5a5080b9390a6ced81c263ac3f
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Mar 11 10:43:32 2005 +1100

    [XFS] reinstate missed copyright date updates.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b40d10c55cde02d3421ca13d4160d947ae9bb686
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Fri Mar 11 00:43:10 2005 +0100

    kconfig: Add explicit depedencies
    
    Without these I could not do make menuconfig when using O=
    This is the shipped rule that plays tricks here.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f40f6ce6e619c9c345d2484024961d3cb56652d5
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Fri Mar 11 00:38:55 2005 +0100

    kbuild: Install external modules in a path relative to their own path
    
    When an external module is being built in down in a directory structure
    keep the relative directory when installing the module.
    
    Example:
    fs/ contains a Makefile used to build both modules:
    obj-y := myfs/ oldfs/
    Install directories
    fs/myfs/myfs.ko	  => Will be installed in /lib/modules/<version>/extra/fs/myfs/
    fs/oldfs/oldfs.o  => Will be installed in /lib/modules/<version>/extra/fs/oldfs/
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5b6f1f47ea3ee244a6f30dc94ba77ffe3ca49c09
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Mar 11 10:37:19 2005 +1100

    [XFS] reinstate a missed xfs_iget check on is_bad_inode.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ea9c1766e9f767a46fa691e9d7a4f58754608a71
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Mar 11 10:19:57 2005 +1100

    [XFS] Steve noticed we were duplicating some work the block layer can do
    for us; switch to SYNC_READ/WRITE for some metadata buffers.
    
    SGI-PV: 931924
    SGI-Modid: xfs-linux-melb:xfs-kern:21771a
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit c6d69cd4e07b6eaa3c27b0ab885dfa6e63ffc98a
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Fri Mar 11 00:19:04 2005 +0100

    video/console: fix spurious rebuild
    
    kbuild does have troubles with assignmnets including '#'.
    The '#' is seen as a comment marker and this will in the end cause
    kbuild to think the commandline to build promcon_tbl.c has changed.
    This happens because the commandline is stored in the file: .promcon_tbl.c.cmd
    
    Although a bit complex the command to build promcon_tbl.c is unlikely
    to change so the workaround is to skip the check for a changed commandline.
    Now promcon_tbl.c is only rebuilt if the .uni file is newer than the .c file.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 56d73ac468acfc64974137ff7cce8482b0be84d8
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Mar 11 10:16:11 2005 +1100

    [XFS] remove non-helpful inode shakers
    
    SGI-PV: 931920
    SGI-Modid: xfs-linux-melb:xfs-kern:189108a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 2577f07e0a700eea94d63b8aa74b5e46db53d2d9
Merge: 60ba96e... 22c4934...
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Mar 11 09:25:28 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit e072d3e042f52759c29383def785932cced875c3
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 10 08:03:05 2005 -0800

    Cset exclude: bdschuym@pandora.be|ChangeSet|20050310042817|04711

commit 771a7305941c940458cf57a1ae7ec1ffeefdcf0c
Merge: e0f4c5c... fd4615c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 10 05:03:28 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit fd4615c9a0c3340cca3612f2ccdcb8c04724e213
Author: Matt Mackall <mpm@selenic.com>
Date:   Thu Mar 10 04:20:45 2005 -0800

    [PATCH] ia64 extable sorting fix
    
    Fix a goofup from the recent sort consolidation patches.
    
    - Subtractions in comparison functions could overflow the return type for
      64-bit pointers.  Make it right again.
    
    - Add missing size arg to ia64 extable swap function.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1af5aff3d1fd2c43bb3b37c8b8acd844c5b54d9
Author: Tim Bird <tim.bird@am.sony.com>
Date:   Thu Mar 10 04:20:30 2005 -0800

    [PATCH] printk-times bugfix for loglevel-only printks
    
    This patch fixes a bug with the recently added printk-times feature.
    
    In the case where a printk consists of only the log level (followed
    subsequently by printks with more text for the same line), the printk-times
    code doesn't correctly recognize the end of the string, and starts emitting
    chars at the 0 byte at the end of the string.
    
    The patch below fixes this problem.  It also adjusts the handling of
    printed_len in the routine, which was affected by the printk-times feature.
    
    Signed-off-by: Tim Bird <tim.bird@am.sony.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f4c5ce06d142c024544b240d234ceeec57ffe5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 10 04:13:05 2005 -0800

    [SUNGEM]: Rework PM handling and fix MAC reset on stuck receiver.
    
    This patch updates the sungem driver. I reworked all of the PM stuff, making it
    less prone to races, probably simpler to read as well, and I no longer shut the
    PHY down when the interface is down so that things like laptop-net no longer
    die (the gain in power consumption was minimal, not worth the pain). I also
    implemented basic WOL support.
    
    There is still something I'm not totally happy with in the locking
    (explained in the comment at the beginning), basically too much locking and a
    couple of places with delays in locks. I will try to improve these later on.
    
    It also adds a fix for a MAC reset issue when the receiver gets stuck.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f8a50e91fd4fa39d9928469f9ed0ce9f674d55c
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 04:02:08 2005 -0800

    [ATM]: lanai: quiet sparse warnings
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4844f390a303a133f480f00e3bedbb6b38b89125
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 04:01:23 2005 -0800

    [ATM]: iphase: Use after free, found by Coverity tool
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85f54536aca4fc76fd0e87d642cfe790ab65833a
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 03:59:56 2005 -0800

    [ATM]: fore200e: Replace MSECS() with msecs_to_jiffies()
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f9dab44a133e0c92e38c093a7926350adf83c65
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 03:53:46 2005 -0800

    [ATM]: Convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef3080a18f701120fdaea54215d630357e58238d
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 03:52:36 2005 -0800

    [ATM]: lanai: use the DMA_{64,32}BIT_MASK constants from dma-mapping.h
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 806a96b633d9b8aa8671b1a118b70f3ce0134a88
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 10 03:47:59 2005 -0800

    [NETROM]: Sparse fixes.
    
    Moving nr_init_timers prototype to where all the other prototypes
    already are.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 82bee3aebcc51dba2154746bd8a9d941162cec60
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 10 03:47:08 2005 -0800

    [ROSE]: Fix minor security hole
    
    ROSE wasn't verifying the ndigis argument of a new route resulting in a
    minor security hole.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b1b8725546715f3c2f0ba4a4ebfa05dd2ea05589
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 10 03:46:23 2005 -0800

    [NETROM]: Fix deadlock due to double locking.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e0698e4f56888d6dd66a86708798b7f1dab6f58d
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Mar 10 03:40:52 2005 -0800

    [ATM]: fore200e: rewrite to eliminate pci_find_device() but preserve sbus support
    
    this patch correctly removes the pci_find_device() used by the fore200e
    driver.  the __init/__exit remains a bit clunky since we need to preserve
    sbus support.
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ee8110e3d0594802941092f44f985cedd65b445
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 10 03:38:38 2005 -0800

    [SIS900]: Driver needs to include asm/irq.h
    
    Otherwise declarations for disable_irq()/enable_irq() will
    not be obtained on platforms not doing CONFIG_GENERIC_HARDIRQS.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ca45a7279848e1a4430f6baffa0a66896aae80a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 10 03:20:20 2005 -0800

    [TUN]: Fix check for underflow
    
    This check is wrong, gcc optimizes it away:
    
                    if ((len -= sizeof(pi)) > len)
    			return -EINVAL;
    
    This could be responsible for the BUG. If len is 2 or 3 and TUN_NO_PI
    isn't set it underflows. alloc_skb() allocates len + 2, which is 0 or
    1 byte. skb_reserve tries to reserve 2 bytes and things explode in
    skb_put.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91105f2f8dc9d3956b2133aff28c6df4356b05ad
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 10 03:10:10 2005 -0800

    [PATCH] AGP support for powermac G5
    
    This patch adds AGP support for the U3 northbridge used in Apple G5
    machines to drivers/char/agp/uninorth-agp.c.  This patch is based on
    earlier work by Jerome Glisse.  With this patch, the driver works in
    both ppc32 and ppc64 kernels.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 112e925ef02d8845b5854fe5ca0c1df6d0f8a3c5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 10 03:06:23 2005 -0800

    [SK98LIN]: Driver needs to include asm/irq.h
    
    Otherwise declarations for disable_irq()/enable_irq() will
    not be obtained on platforms not doing CONFIG_GENERIC_HARDIRQS.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20bd1298eb3387d79ffb2a070e03ba6a41a63fc1
Author: Robert Olsson <robert.olsson@data.slu.se>
Date:   Thu Mar 10 02:58:21 2005 -0800

    [PKTGEN]: Use __in_dev_put().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f0fdd24a4ec0f029937f99f4e4b824350e1eddf
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 10 02:56:25 2005 -0800

    [IPV4]: Speed up sequential reading of /proc/net/route
    
    Cacheing the current position reduces complexity from O(n^2)
    to O(n).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6186c00ac58aa7ad9bc400ad525c48f8758ca30d
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:52:51 2005 -0800

    [NET]: Optimize is_valid_ether_addr()
    
    Low level optimization of the comparison with zero address.
    On most cpu's faster to use unrolled or rather than a loop
    and memcmp. This is in the fastpath of bridge forwarding.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 318a924d44cb4332a95b2929fc86bb2c0a1c5707
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:51:52 2005 -0800

    [BRIDGE]: Forwarding table lockless update
    
    Optimize bridge forwarding table for the fastpath of updating
    an existing entry. Use RCU to find the entry and change it's time.
    Fallback to normal locking for insert. This gives about a 1/3
    improvement in packets forwarding per second on SMP.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 46d5439d017446ec68c641a91e398fbc37cc3d92
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:51:00 2005 -0800

    [BRIDGE]: Get rid of threaded link for forwarding timeout
    
    For 2.6, I changed the bridge forwarding table timeout code to keep
    a threaded list of in order entries. Well, it turns out that this is
    a performance hit because we end up constantly moving entries around
    in the list.  Later patch changes this to be in place update with RCU.
    
    This version just uses a 100ms garbage collection timer.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f5b3da09750637de05dd1c9a04d99acf2365277e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:50:22 2005 -0800

    [BRIDGE]: Get rid of unneeded include
    
    Get rid of unneeded include.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 27bddffcb523fbbdbab57d56df1f4a3957fd67e4
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:49:36 2005 -0800

    [BRIDGE]: Use Jenkins hash
    
    Replace the existing mac hash in the bridge code with the nice
    inline jenkins hash. This should provide better distribution across
    hash buckets and compiles to code that is similar in complexity.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e7ae4c1d10397bcf7395689fdf33e09e23e7765
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Thu Mar 10 02:44:11 2005 -0800

    [IPV6]: Build modular by default.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e94e24d5320af1d6d93e30f805d2956fa3981a6c
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:42:50 2005 -0800

    [PKT_SCHED]: Move tc_u32_mark into pkt_cls.h
    
    The tc_u32_mark structure is used as part of the netlink message
    from the user API to the kernel, so it needs to be moved to
    include/linux/pkt_cls.h and have types changed from u32 to __u32.
    
    Also, the definition of u32 performance counters doesn't need to depend
    on the config option.  The definition can exist even if the code isn't
    enabled.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 301107242f13035b34e9bc2b571a264430f8438b
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Thu Mar 10 02:41:35 2005 -0800

    Fix double pci_dev_put()
    
    Paul Mackerras points out that the pci_get_class() call will
    properly put away the old PCI device. Blush.

commit 72815e1fa1c279bf7bfe1c9a4f6c0a97a8320317
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:41:28 2005 +0100

    [ALSA] Fix ALC260 input
    
    HDA Codec driver
    Fixed the ALC260 input on HP machines.  Added the front mic support.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8a311d61c9f6f4936df0f8d3e7352774a0d8a072
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Mar 10 02:41:27 2005 -0800

    [NET]: Rearrange netdevice structure to save space.
    
    Trivial reordering of netdevice structure to save four bytes.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 284161e3d4597ae0cebce43f1c5a051c0b78f97d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:40:48 2005 +0100

    [ALSA] Fix pops and clicks at beginning/end of playback
    
    EMU10K1/EMU10K2 driver
    The patch fixes pops and clicks at the beginning and the end of playback
    on emu10k1 due to the cache size mismatch.
    
    Signed-off-by: Jindrich Makovicka <makovick@kmlinux.fjfi.cvut.cz>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1f28b28aecfcb66a34bb535fb5172bdc6e56d90a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 10 02:40:08 2005 -0800

    [XFRM]: xfrm_find_acq_byseq should only return XFRM_STATE_ACQ states.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 103e56a9eabde74a6150e23ec40dc9e0a54cafce
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:40:07 2005 +0100

    [ALSA] fix forgotten release of semaphore in error path
    
    ALSA<-OSS emulation
    In snd_mixer_oss_get_volume1_vol and snd_mixer_oss_put_volume1_vol,
    card->controls_rwsem wouldn't be released if the boolean type
    check fails.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7371d860934a5c399429c46b1b69f8ad56a7dd73
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:39:23 2005 +0100

    [ALSA] remove duplicate field initialization
    
    au88x0 driver
    Remove duplicate (and inconsistent) initialization of the iface field.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 49b4b7b22eefb532d095308133c17c5b0858343b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:38:43 2005 +0100

    [ALSA] replace wrong spin_trylock_irqsave with spin_lock_irqsave
    
    MPU401 UART
    The last patch accidentally left a 'try' in where none was intended.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 208b7d48947a7f082dfcfff380d9e32f6c650d3b
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Mar 10 02:38:36 2005 -0800

    [SCTP]: Add receive buffer accounting.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8b0a6291b9061d15a52b7bfd7e76434495d16d7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:38:03 2005 +0100

    [ALSA] Add PCI ids for ICH6/7
    
    Intel8x0-modem driver
    Added the PCI IDs for ICH6 and ICH7.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 65b709f4cc9e4ce324301c6f618b9b3ad9c3df57
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:37:17 2005 +0100

    [ALSA] Add AD1986 support
    
    AC97 Codec
    Added the support of AD1986.  Using the same patch as AD1985.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2a8bbc88dad2dff7d5547da71e854868aef58372
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:36:28 2005 +0100

    [ALSA] Disable DRA for ALI5455
    
    Intel8x0 driver
    Disable DRA for ALI5455.  Apparently the device doesn't support it.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e9c62e06b6064e6a060f49fbc5806301e76cc8fa
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:35:43 2005 +0100

    [ALSA] Restore the default value after rate detection
    
    AC97 Codec
    Restore the default value of rate registers after detection of available
    rates.  This might fix the problem of playback noises on some mobo drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cc0aed76288c45b01ede77afdf89427a6593e966
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:35:03 2005 +0100

    [ALSA] replace spdif frequency control with iec958 control
    
    au88x0 driver
    The appended patch replaces the manual spdif frequency control in the
    mixer with code that use the standard iec958 interface. The patch is
    nearly the same as the one Raymond submitted, except it gets rid of the
    identical *_default_* versions of the functions, and has a tiny bit of
    cleanup.
    I have only tested it a little bit because I don't currently
    have the hardware to actually test it properly. However, it looks
    harmless to me.
    
    Patch-by: Raymond
    
    Signed-off-by: Jeff Muizelaar <muizelaar@rogers.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c5f8803085eff05b11c54423ad0e1d83ef4591de
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:34:20 2005 +0100

    [ALSA] Fix sample rates of Revo 7.1
    
    ICE1712 driver,ICE1724 driver
    Fixed the available sample rates of Revo 7.1 board.
    AK codecs don't support the rate below 32k Hz.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b9c0bda6647bb2d945b38276e9fc0cfbbcd3be39
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:33:35 2005 +0100

    [ALSA] Fix auto-probing of widget tree
    
    HDA generic driver
    Fixed auto-probing of the widget tree, ignoring the widgets with
    the digital attributes.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bcb55067701aba2f5be3706a6b99ef1cf054a098
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:32:53 2005 +0100

    [ALSA] Fix stereo mutes on Surround volume control
    
    AC97 Codec
    Fix stereo mutes on Surround volume control.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 715e568365fd2a989d15642d3340afc101a44759
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:32:09 2005 +0100

    [ALSA] Fix ALC260 support
    
    HDA Codec driver
    Fix ALC260 support on HP machines.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e4a745cc7af7aaa00fcd27152af9bace5b4703ab
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:31:26 2005 +0100

    [ALSA] Use DXS volumes as PCM
    
    VIA82xx driver
    Use DXS volumes as PCM control in cases with no volume control on codec
    (e.g. C-Media).  'DXS Playback Volume' controls are removed.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a45e01144ca0cda26c5ca54b67cc45c79d60be14
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:30:39 2005 +0100

    [ALSA] GUS - Remove unused gus_lfo.c file
    
    GUS Library
    
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9024d50ac07b0fa4b2d559aa95d77fdff091dc69
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:29:52 2005 +0100

    [ALSA] fix locking for rawmidi trigger callbacks
    
    Generic drivers,MPU401 UART,SB8 driver,Wavefront drivers,CS4281 driver
    ENS1370/1+ driver,CS46xx driver,EMU10K1/EMU10K2 driver,RME HDSP driver
    Use spin_lock_irqsave() instead of spin_lock() in places where we
    could be interrupted by another hardware interrupt that could call
    the rawmidi trigger callback that could try to take the same lock.
    
    Additionally, remove locking code that is no longer needed now that
    the trigger callback is no longer called recursively from the rawmidi
    'event' handler.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 0e65c6fa775cc099ab9350b80879bba413204dea
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:29:07 2005 +0100

    [ALSA] remove duplicate module alias
    
    ALSA Core
    Remove duplicate MODULE_ALIAS for the snd module.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit baa3cb67923b4f0df6306d223bfa34ce46af1e24
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:28:21 2005 +0100

    [ALSA] add module aliases for rtctimer and seq-dummy
    
    RTC timer driver,ALSA sequencer
    Add snd-timer-1 and snd-seq-client-63 module aliases for the
    snd-rtctimer and snd-seq-dummy modules.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 231dd68002c1a23bda188aabeb41e52148d9fed6
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:27:40 2005 +0100

    [ALSA] document rawmidi interface
    
    Documentation
    Add information about the rawmidi interface to the driver-writing
    documentation.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 4bcbec5abeba862274a678c80a81b829d6add053
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:26:58 2005 +0100

    [ALSA] use simple_strtoul instead of simple_strtol
    
    AC97 Codec
    Replace simple_strtol with simple_strtoul for compatibility with
    2.2.x kernels.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 91a700ed26922af3eba7e977422637c230d14954
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:26:12 2005 +0100

    [ALSA] move rawmidi event callback into tasklet
    
    RawMidi Midlevel
    Move the event callback into a tasklet instead of calling it directly
    from snd_rawmidi_transmit_ack/_receive to prevent recursive calls to
    the trigger callback.  This means that drivers no longer have to
    check that they're called inside their own spinlock.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit e575374cdbc8881e37bbe8f02eb7722c6a17e593
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:25:29 2005 +0100

    [ALSA] move common code into snd_rawmidi_runtime_create/_free functions
    
    RawMidi Midlevel
    Move the duplicated memory handling code for the rawmidi runtime struct
    into the snd_rawmidi_init/_done_buffer functions and rename them to
    snd_rawmidi_runtime_create/_free.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 9c98cf7e090942ccb41ff23c89eddf8f4df60e6c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:24:49 2005 +0100

    [ALSA]  Fix bugs with incorrectly wrapped appl_ptr
    
    PCM Midlevel
        This patch is against alsa-driver-1.0.8.
        It covers:
            alsa-kernel/core/pcm_lib.c
        The main changes are in the first listed file.
    
        It corresponds to bug description:
            <https://bugtrack.alsa-project.org/alsa-bug/view.php?id=951>
    
        The patch does cosmetic change:
    
         -- Better, more universal and smaller wrapping to within
            0..runtime->boundary-1 in functions snd_pcm_lib_write1() and
            snd_pcm_lib_read1() in pcm_lib.c
    
    Signed-off-by:  Charles Levert <charles_levert@gna.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7eb905792f7eba0dbd2f18c8e320380a498add96
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:24:06 2005 +0100

    [ALSA]  Fix rounded-up integer division bug
    
    PCM Midlevel
        This patch is against alsa-driver-1.0.8.
        It covers:
            alsa-kernel/core/pcm_lib.c
    
        It corresponds to bug description:
            <https://bugtrack.alsa-project.org/alsa-bug/view.php?id=951>
    
        The patch fixes the following problem:
    
         -- Properly perform rounded-up integer division in
            snd_pcm_system_tick_set() in pcm_lib.c.
    
            This only had a minor impact.
    
    Signed-off-by:  Charles Levert <charles_levert@gna.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e584042249a1be713ff23b0098f25bd00d4f5acc
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 11:23:19 2005 +0100

    [ALSA] fix snd-serial-u16550 docs for setserial
    
    Documentation
    Change the documentation about disabling the standard serial driver
    to use 'uart none' instead of 'none' as setserial option.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 981428f3c8c2f8048f43a94861b9b6f6e2ec893e
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Mar 10 02:23:13 2005 -0800

    [TIGON3]: Replace pci_find_device with pci_dev_present.
    
    Signed-off-by: Scott Feldman <sfeldma@pobox.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f53f5bd4c92622f6682b7d8bf43d3962517a9a2
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 10 02:20:44 2005 -0800

    [IPV4]: Fix crash while reading /proc/net/route caused by stale pointers
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa9b5b02f152ca2fc2496f979429bf748f128444
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Mar 10 02:19:49 2005 -0800

    [NET]: Kill netdev->accept_fastpath hook.
    
    Never called AFAICS, and only assigned -- to a no-op stub -- in
    one driver.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 13711d881950c8c344342516f8719c86a8cd76cd
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Mar 10 02:17:45 2005 -0800

    [NET]: Move dst_release out of dst->ops->check
    
    As promised here is the patch that moves dst_release out of
    dst->ops->check.  It bloats sk_dst_check/__sk_dst_check slightly
    but they're only used in a handful of places so it isn't too bad.
    I actually counted, it's about a few hundred bytes.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89e54606e290b5b6fad5b3aea50d0f78da119405
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 10 02:01:48 2005 -0800

    [PATCH] AGP 3.0 bogosities
    
    There are other bogosities in drivers/char/agp/generic.c.  I can't
    believe Dave ever tested that code with an AGP 3.0 device.  If you pass
    in a mode that has the AGP 3.0 bit set, agp_v3_parse_one() will first
    clear that bit (and print a message), and then complain because you
    haven't got that bit set in the mode, with a message that the caller is
    broken.  Furthermore, if the mode passed in has both the 4x and 8x bits
    set, the new code will give you 4x where the old code would give you 8x
    (which is what the caller wanted).
    
    The patch below fixes this.  It will work in the 99.99% of cases where
    we have one AGP bridge and one AGP video card.  We should eventually
    cope with multiple AGP bridges, but doing the matching of bridges to
    video cards is a hard problem because the video card is not necessarily
    a child or sibling of the PCI device that we use for controlling the AGP
    bridge.  I think we need to see an actual example of a system with
    multiple AGP bridges first.
    
    Oh, and by the way, I have 3D working relatively well on my G5 with a
    64-bit kernel (and 32-bit X server and clients), which is why I care
    about AGP 3.0 support.  :)
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4d4d388626881c8bc8df3101ced8493eb583390
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Mar 10 02:00:24 2005 -0800

    Fix up AGP device discovery.
    
    The previous revert needed some more work to make it actually work.

commit c0569a66327a27f98aa29f9526b083c4a613a3b9
Merge: 1a8fca9... 9571607...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Mar 10 10:03:11 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-2.5
    into suse.cz:/home/perex/bk/linux-sound/linux-sound

commit cc8d308cc3c39b5573e72272702a6aa6ad695131
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 10 00:19:18 2005 -0800

    [XFRM]: Always reroute in tunnel mode
    
    Tunnel mode packets are rerouted if the tunnel destination
    address is different from the original destination address,
    otherwise the old route is used. This is inconsistent, the
    old route might have been selected for a given output device
    or using routing by tos/fwmark. Always choose a new route
    in tunnel mode.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 488677e918b18514581eb32cc66a0e26c773daf1
Merge: 3e2c445... c6e4a22...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Mar 10 03:18:12 2005 -0500

    Merge pobox.com:/garz/repo/libata-dev/ahci-tf-read
    into pobox.com:/garz/repo/libata-2.6

commit 54060547c0611f8616551cdbf6ba097d9f2c4581
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:10:12 2005 -0800

    [IRDA]: remove unneeded EXPORT_SYMBOL's from irport.c
    
    	<Patch from Adrian Bunk>
    make needlessly global code static
    remove unneeded EXPORT_SYMBOL's from irport.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 47652ae9d5d5c010ee07c1659ad310a9e7236282
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:09:18 2005 -0800

    [IRDA]: cleanup obsolete construct in IrCOMM
    
    cleanup some construct obsoleted by Linus's patch
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7680d6fde1553a7df91d3d7e462981e6089009ed
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:08:32 2005 -0800

    [IRDA]: support NSC PC8738x
    
    	<Original patch from Steffen Pingel>
    support NSC PC8738x chipset (IBM x40 & ...)
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 591461cfe8e68b17dd246ad05c06baf53228bc24
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:07:54 2005 -0800

    [IRDA]: arbitrary lsap connect
    
    	<Original patch from Iavor Fetvadjie>
    allow IrDA socket to connect on arbitrary LSAPs
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 256d8778d5d352bce63aaed26eb96ef8a7e08206
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:07:15 2005 -0800

    [IRDA]: Mark exit code properly in VIA driver
    
    	<Patch from Randy Dunlap>
    Mark exit code properly in VIA driver
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 685ed2fb5d63e3243fa109e6fd135c81c39468c3
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:06:27 2005 -0800

    [IRDA]: stir4200 turnaround calculation fix
    
    	<Patch from John K. Luebs>
    Proper turnaround computations in the stir4200 driver
    Take care of Tx packet without IrDA metadata (speed)
    
    Signed-off-by: John K. Luebs <jkluebs@lu...>
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7fcf21c6315a68ccc0326a93bf1fb8d7a1ae3402
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:05:02 2005 -0800

    [IRDA]: irda-usb sysfs support
    
    Forgot to convert a few usb_unlink_urb() in usb_kill_urb()
    	<Patch from John K. Luebs>
    Proper sysfs support
    
    Signed-off-by: John K. Luebs <jkluebs@lu...>
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 82058a0aa53699f029872891709a0394ef952ed0
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Thu Mar 10 00:04:14 2005 -0800

    [IRDA]: fix IrNET poll with empty disco log
    
    poll would improperly exit when the discovery log
    was empty
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ef0d8d3cccbe6f7984afa9634e32533e93e2081
Merge: b2a47c1... 6d4617a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 23:51:28 2005 -0800

    Merge bk://nfsclient.bkbits.net/linux-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b2a47c160c9d924b33b6b0875ba3fba435a3eeee
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:05:47 2005 -0500

     NFS: Ensure "mount" is always interruptible and soft
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 00e1e0aeac09d4082fd5faa8d2334aaf478ad619
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:05:29 2005 -0500

    NFS: cleanup create()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 906fd2d2a37cc2077ecdcdd0b8389d2896289bc6
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:05:12 2005 -0500

    NFS: mkdir() cleanup
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4e593930ecca730bb7d6b5fd4a5ca1c584545acf
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:04:54 2005 -0500

    NFS: mknod() cleanup
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a159352061b6039d5d27cf815e13cdfd8b26b8b7
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:04:40 2005 -0500

    NFSv4: in readdir, use MOUNTED_ON_FILEID, rather than true fileid
    
     Some servers return an error if the READDIR call attempts to read the
     fileid of a mountpoint.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 743d642c6095d97d6b22c3647e3e94793386688a
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:04:20 2005 -0500

    NFSv4: Allow recovery from network partitions
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 2ca4be61041e072d8ae681fdd1632e56c959db58
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:04:01 2005 -0500

    NFSv4: Add nfs4_state_recovery_ops
    
     We want to reuse the same code to recover the NFSv4 state after a server
     reboot, a network partition, or a failover situation.
    
     Add a structure to contain those operations will that depend on the recovery
     scenario under consideration.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4800a811177a191d218511cbecaca2a6efdb61ad
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:03:44 2005 -0500

    NFS: Cleanups for the network partition reclaim code
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 16ba67b19932d0da0d0aca2172bc15c6f15afcac
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:03:27 2005 -0500

    NFSv4: Fix access mode checking when opening a delegated file.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c80650bd30113fa564e231e3d285db20f9584338
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:03:10 2005 -0500

    NFSv4: NFSv4 errors in nfs4_init_client() must not leak to userland
    
     Fixes a potential Oops at mount time.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit cdb9095c7f1382a2a8dff5da57f285a475f7b77a
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:02:53 2005 -0500

     NFSv4: Exit without Oopsing from close when servers send us crazy errors.
    
     If retrying the request is not an option, we should just set state->state
     and be done with it.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 39b4fa56e16b6fedc00e9f0cad45d73677622d5d
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:02:36 2005 -0500

     NFSv4: Handle the NFS4ERR_CLID_INUSE error in SETCLIENTID
    
     Encode the AUTH flavour in the clientid, since AUTH_UNIX and AUTH_GSS
     credentials will always conflict.
    
     Then, strategy is to first retry after sleeping for a lease period. If
     the server then still refuses our clientid, assume we have a conflicting
     client, out there, and try bumping a "uniquifier" variable.
    
     Give up if we're signalled, or if we've gone through the entire range
     of uniquifiers...
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit e4bcc04c172521f104336541d11b270b08ede0cd
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:02:19 2005 -0500

    NFS: catch a few extra ESTALE errors that we are currently discarding.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 24b7fec42ce68c88905629faf609e176041f466f
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:02:01 2005 -0500

    VFS: Retry pathname resolution after encountering ESTALE
    
     Add a mechanism for the VFS layer to retry pathname resolution if a file
     system returns ESTALE at any point during the resolution process.  Pathname
     resolution is retried once from the first component, using all real lookup
     requests.
    
     This provides effective recovery for most cases where files or directories
     have been replaced by other remote file system clients.  It also provides
     a foundation to build a mechanism by which file system clients can fail
     over transparently to a replicated server.
    
     Test-plan:
     Combinations of rsync and "ls -l" on multiple clients.  No stale file handles
     should be after directory trees are replaced.  Standard performance tests;
     little or no loss of performance is expected.
    
     Created: Fri, 11 Feb 2005 16:46:19 -0500
    
     Signed-off-by: Chuck Lever <cel@netapp.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit afdc754f2b8528423553d0ed443341685fd1ae09
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:01:43 2005 -0500

    NFS,RPC: RPC client now advertises maximum payload size
    
     The RPC client now reports the maximum payload size supported by the chosen
     transport method.  This is something a little less than 64KB for RPC over
     UDP, and about 2GB - 1 for RPC over TCP.  The effective rsize and wsize
     values are not allowed to exceed the reported maximum RPC payload size.
    
     Signed-off-by: Chuck Lever <cel@netapp.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 388a910da2a61717581135118611340a086aadb5
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:01:26 2005 -0500

    RPC: remove broken_suid mount option
    
    Remove broken_suid mount option (retry RPC after dropping privileges
    upon EACCES): no longer used and questionable w.r.t. security.
    
     Signed-off-by: Frank van Maarseveen <frankvm@frankvm.com>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a9ed1ac1bd88f64dd111f8cf7e0b0a7142fde03b
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:01:08 2005 -0500

    [NLM] fs/lockd/clntproc.c: make 2 functions static
    
     This patch makes two needlessly global functions static.
    
     Signed-off-by: Adrian Bunk <bunk@stusta.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit af3ab931841404cb4374bc45d370f6d31419bf95
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:00:50 2005 -0500

    NFS: This patch makes some needlessly global code static.
    
     Signed-off-by: Adrian Bunk <bunk@stusta.de>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a2832a8fe12d528689ebdde7711b184bf8f315a0
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:00:33 2005 -0500

    RPC: Clean up of rpcauth_lookupcred() and rpcauth_bindcred()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b62d37e62c22ba2ce98cbf03d39fcf8397aa0a90
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:00:17 2005 -0500

    RPC: make rpcauth_lookupcred() return error codes.
    
     So we can distinguish between ENOMEM and EACCES errors.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5a9e20efe0843a2c0ba85897a19da3af166ef0d0
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 08:00:00 2005 -0500

    RPC: Initialize the GSS context upon RPC credential creation.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4d08b43c00f3e9a51096e1c165529d6692f71098
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:59:44 2005 -0500

    RPC: Remove dependency of RPCSEC_GSS upcalls on the credential cache
    
     Ensure that credentials that are referenced by an RPC task, but that
     have been booted out of the credcache may still be refreshed.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6180efbee86a45b0ff7a27125c95cd4608bce8be
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:59:27 2005 -0500

    RPCSEC_GSS: Enable expiring of credentials
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d554fe251e7c3ee4c28497e987c39b35e8e176d4
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:59:09 2005 -0500

    RPCSEC_GSS: Misc little cleanups.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a0c5470759304a61d5c484aef80c2b88ed3d73d1
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:58:52 2005 -0500

    RPCSEC_GSS: cleanup gss_cred.
    
     gc_flavor is used only for looking up the security service, which is an
     integer value that never changes. Store the latter instead of the former.
    
     Fix up a couple of dodgy casts between gss_cred and rpc_cred. Replace them
     with the appropriate container_of().
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8af92f28c047cefb9c833c9115a18fe19e3b33a0
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:58:34 2005 -0500

    RPC: Document the format of the gssd downcalls
    
     - Document the format of the gssd downcalls
     - Separate out "uid" field from rest of GSS context data struct
       since it will not be needed for the keyring-based contexts.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 41e3d179c4258768ca543c43d36572bf5407e952
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:58:17 2005 -0500

    RPC: clean up the RPCSEC_GSS kerberos and spkm3 context import functions
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 25326faa35335e4c23d44c755e842f3a7a57868e
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:58:00 2005 -0500

    NLM: Always use AUTH_UNIX authentication for NLM locking.
    
     Most existing servers do not implement RPCSEC_GSS for either the lockd or
     statd daemons.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 2c485f63fd9d70aa6950a2c64aaf21787268b153
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:57:38 2005 -0500

    NFS: Add emulation of BSD flock() in terms of POSIX locks on the server
    
     This makes for an interesting situation in which programs compiled
     to use flock() and running on the server will not see the locks that
     are set by the clients. The clients will, however, see both POSIX and
     flock() locks set by other clients.
    
     It is the best you can do, given the limitations of the protocol.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d63b828957798e3c532e03f849af9f7176c00494
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:57:20 2005 -0500

    VFS: Fix structure initialization in locks_remove_flock()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 335a65913e4e5c2dff91117804a8e0e8dd3a8bda
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:57:03 2005 -0500

    RPC: Shrink struct rpc_auth for those flavours that don't use the cache
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d48b484f118cde1a1c7021aefb632d561ec6a523
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:56:46 2005 -0500

    RPC: Unify the AUTH_UNIX credential cache.
    
     AUTH_UNIX credentials really only depend on the process uid/gid/groups
     information. In particular there is no dependency on any strict rpc_client
     specific information. Might as well share them all between all RPC clients.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit fe980f94f7aa2f0537126ad6f79091eda22aa690
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:56:29 2005 -0500

    RPC: Unify AUTH_NULL credentials
    
     There is only one AUTH_NULL "credential".
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a00dd564de2b5b1f93363d0358a50efa2234bcd1
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:56:13 2005 -0500

    RPC: Convert RPC credcache to use hlists
    
     This will make initialization of statically allocated caches simpler.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 378e5f269b4dde30ae3601f6fd5fb66158caaf0e
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:55:56 2005 -0500

    RPC: kill cr_auth
    
     The cr_auth field is currently used only in order to figure out the name
     of the credential's flavour in debugging printks. Replace with a dedicated
     pointer in the statically allocated rpc_credops instead.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 2fc8c6f3f0e8abbf91b31e40a7a28b582ff26f93
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:55:39 2005 -0500

    RPC: Make rpc_auth credential cache optional.
    
      Some RPC authentication flavours are not related to the uid (AUTH_NULL
      springs to mind). This patch moves control over the caching mechanism
      into the auth-specific code.
    
      Also ensure that expired creds are removed from the cache.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9d956f5b5b80679b2709888174453de3a2ca1cb9
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:55:21 2005 -0500

    RPC: Move credcache-specific code out of put_rpccred()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit cf6dd6f24f743cf34a12f6be3fa1696bdcad3b79
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:55:05 2005 -0500

    RPC: struct rpc_auth initialization and destruction code cleanup
    
     Move the initialization of auth->au_count into the flavour-specific code.
     Move the kfree(auth) into the flavour-specific code.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7b13d54711e39a419af85fea9583e5867f9e052e
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:54:47 2005 -0500

    RPC: Remove unnecessary reference counting in gss downcall code.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit fcc7319e716c5a4521de4fc4a9cf15f3c9f8d2cf
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:54:29 2005 -0500

    RPC: Remove unnecessary module refcounting
    
     The sunrpc module itself is referenced by other sources, so only the
     auth_gss credcaches need to increment their module refcount.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ebd75375bca0dc6ba036737aac154058a9bc22d1
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:54:10 2005 -0500

    RPC: Some portmappers expect AUTH_UNIX authentication
    
     Sun's RPC library portmap client therefore defaults to AUTH_UNIX. Change our
     in-kernel client to follow that convention.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 315f9a3818f4035e270b91d1f6a46a65ff27072d
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:53:53 2005 -0500

    RPC: Fix return value of rpc_call_async()
    
     RPC call async is supposed to return an error if and only if
     it failed to run the rpc_task.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 2f8416dbb7417ca5733f637a4d263dc12d1859b5
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:53:36 2005 -0500

    NFS: Use sizeof() instead of strlen() on string constants.
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bb13f3d07b0d4b71d24f19acf7584cf34c20fa70
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:53:19 2005 -0500

    RPC: Don't kill timers when calling rpc_restart_call() after rpc_delay()
    
     Currently, if we restart an RPC call after having set an RPC delay (for
     instance in the case where an NFS EJUKEBOX error has occurred) the call
     to rpc_delete_timer() at the top of the rpc_execute() loop will
     kill off our timer.
    
     This patch causes rpc_delete_timer() to detect if the rpc_task is still
     queued on a wait queue, and refuse to delete the timer if this is the case.
    
     Problem diagnosed by Jan Sanislo and Olaf Kirch.
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c85f50f08170c4e876f0afa3745d5d957633223c
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:53:02 2005 -0500

     NFS: Fix refcount leakage in nfs4_proc_create()
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b79c3f26fbf3a072e9132d3dbe1f9ae78c3316a2
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Thu Mar 10 07:52:45 2005 -0500

    NFS: Clean up nfs_permission().
    
     Fix a bug whereby we are failing to test for permissions on opendir().
     Optimize away permissions checks that request MAY_WRITE on directories.
     Ensure that VFS sets LOOKUP_CONTINUE before calling permission().
    
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6d4617a1fd82d03f9e614db0a57357c75ce67ec9
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 23:36:27 2005 -0800

    Revert AGP card->bridge mapping checks.
    
    They don't work, as per Ben Herrenschmidt:
    
     "device->bus may be a host bridge, which has no bus->self -> Ooops.
    
      Unfortunately, there is no sane way to match a host bridge with it's
      eventual "self" device if it has any. The only way would be to scan for
      devices of class host bridge, but that isn't even 100% reliable.
    
      The result is that the self device (AGP bridge device) is generally a
      sibling of the actual AGP card, which is source of interesting problems,
      especially with power management."
    
    Cset exclude: davej@delerium.kernelslacker.org|ChangeSet|20050223022533|52155

commit 563be2349f78bc1986e70692f04b9c4ba733a012
Merge: f6e9e45... 1ccba83...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 23:33:43 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 1ccba836c8d95f1bda0946241a3d6fa82deada8f
Author: lucasvr@org.rmk.(none) <lucasvr@org.rmk.(none)>
Date:   Thu Mar 10 20:18:55 2005 +0000

    [ARM PATCH] 2528/1: S3C2410 - modifies S3C2410_{VA,SZ} to S3C24XX_{VA,SZ}
    
    Patch from Lucas Correia Villa Real
    
    This patch modifies ocurrences of S3C2410_{VA,SZ} to S3C24XX_{VA,SZ},
    as well as defining S3C2400 physical mappings on
    include/asm-arm/arch-s3c2410/map.h.
    
    This cleans up the naming of the virtual address macros, which are
    fixed for all S3C24XX systems. This should clean up any confusion
    about whether the virtual addresses are specific to the CPU or to
    the arch.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdb68a3a75d3cc97aaa351ef702c1e6c17674771
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 10 20:11:58 2005 +0000

    [ARM PATCH] 2527/1: S3C2410 - update regs-iis.h with fifo and s3c2440
    
    Patch from Ben Dooks
    
    Add definitions for getting FIFO usage information
    and the small difference for using the s3c2440.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4e7612d0f8d1c8de5280fa439b0f650ed5ed2a8f
Merge: 8de08f9... f6e9e45...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 9 21:07:29 2005 -0800

    Merge sunset.davemloft.net:/home/davem/src/BK/network-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit f6e9e45ccfbcee8d4a15d4b8700033d893d5d4ab
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:55:24 2005 -0800

    [PATCH] Remove CONFIG_PARISC64 symbol
    
    Use CONFIG_64BIT everywhere instead.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a233d3bf7e1462fb7c3459108b8db29876864bc
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:55:09 2005 -0800

    [PATCH] PA-RISC misc header cleanups
    
    Indentation and header file ordering
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 497e8d89271b18deaf54394f49940715b7d1f57d
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:54:53 2005 -0800

    [PATCH] Fix PA-RISC EISA EEPROM support
    
    The EISA EEPROM driver was being initialised too early, before miscdevs
    can be registered.  But EISA needs to be registered early -- before PCI.
    So stash the EEPROM address in a global variable at EISA init time,
    then pick it up later in the EISA EEPROM driver.
    
    Also ioremap() it, use readb instead of gsc_readb and rename the
    miscdev to not have a space in the name.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d54c115b9442c161305390c91d0bccebe5486224
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:54:38 2005 -0800

    [PATCH] Minor changes to the PA-RISC Asp driver
    
    There can be only one Asp in the machine, so allocate its controller
    structure statically.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ecc86cea9417cd15295e2d274cf1ee11264e5ec
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:54:23 2005 -0800

    [PATCH] Fix panic in PA-RISC CCIO driver
    
    Ditch ccio_mem_ratio. "Ported" from similar change to sba driver.
    
    From: Joel Soete <soete.joel@tiscali.be>
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8196fb920f3ddfdadd304e2da67e9ce2ec5155d1
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:54:09 2005 -0800

    [PATCH] PA-RISC IOMMU-related fixes
    
     - PCI_DMA_BUS_IS_PHYS is only true if we don't have an IOMMU.  Getting this
       wrong results in system panics when we run out of bounce buffers.
     - parisc_vmerge_boundary and parisc_vmerge_max_size need to be available on
       all machines, not just ones with GSC.
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac6cd4374e0735801af400476a24561e50200e5f
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:53:53 2005 -0800

    [PATCH] Fix PA-RISC debuglocks
    
    _dbg_write_trylock() needs to return an int.
    Also update Thibaut's email address
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce8ed09bc62155daab8bac0fea8b561c29e4f33a
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:53:38 2005 -0800

    [PATCH] PA-RISC access_ok()
    
    Make access_ok an inline function to get rid of an unused variable warning
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c2185ffa214793cda3a970e2351eade2a936fa9
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:53:23 2005 -0800

    [PATCH] PA-RISC preempt accounting fixes
    
     - Match other architectures by initialising preempt_count to 1.
     - PREEMPT_ACTIVE needs to not overlap with HARDIRQ_MASK
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08aa972324c4957359d83c81312cbede937ca4fe
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:53:08 2005 -0800

    [PATCH] PA-RISC mb() definition
    
    The extraneous semicolon in mb() breaks the SMP build in the new skbuff.h
    
    From: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42a0b90d23dbca900f0d3a36a3805230fc11436d
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:52:52 2005 -0800

    [PATCH] PA-RISC readX() simplification
    
    The result from __raw_readX() can never be const so use __fswabXX() instead
    of cpu_to_leXX()
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53c5b7179026510accd757dc492ef4acceeee203
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:52:37 2005 -0800

    [PATCH] PA-RISC can use the generic HARDIRQ_BITS
    
    We no longer need to define our own HARDIRQ_BITS
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2080bcd0b033ce0afbd709662d356bedf1acd56
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:52:21 2005 -0800

    [PATCH] PA-RISC DMA definitions
    
    Copy some DMA definitions from x86 to get crufty drivers to build
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 241c7e6debd719162d1db871d6a80a7c07772c15
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:52:06 2005 -0800

    [PATCH] PA-RISC nonatomic bitops for ext2/3
    
    Use nonatomic bitops for ext2/3 where possible.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24cc466c93e048083b536cdbaf7bd5e8ef3784ba
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:51:51 2005 -0800

    [PATCH] PA-RISC: define SHRREG
    
    Add definition of SHRREG
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 874d59c3c333f323f48707e2a3e23b397214281a
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Wed Mar 9 20:51:35 2005 -0800

    [PATCH] PA-RISC unwind updates
    
     - Update stale url to documentation
    
    From: Kyle McMartin <kyle@parisc-linux.org>
    
     - Make unwinding from modules work, mostly
     - Fix unwinding from millicode
    
    Signed-off-by: Randolph Chung <tausq@debian.org>
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb194696a654715fca7a60624c6b144ad475041a
Merge: 994220c... 56107ff...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 20:43:54 2005 -0800

    Merge bk://kernel.bkbits.net/vojtech/for-linus
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 56107ff8b29a708e20024749740c9e2bd87b24a5
Merge: 1a8fca9... 04dccf6...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Mar 10 22:32:04 2005 +0100

    Manual merge

commit 8de08f908adf692f748319c289eff5df9df0b5ea
Merge: 0f634eb... b20f3c6...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 9 20:06:29 2005 -0800

    Merge bk://212.42.230.204:994/nf-2.6
    into sunset.davemloft.net:/home/davem/src/BK/net-2.6

commit 0f634eb32d3a5cba9d3411f23974962bb8f94bdd
Merge: 6a1b925... 04db042...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 9 19:13:11 2005 -0800

    Merge

commit 994220c39e814fc69f5f9e596875c79e1d7597a8
Merge: baba4f5... 7ffd435...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 18:33:12 2005 -0800

    Merge bk://drm.bkbits.net/drm-linus
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit baba4f51a07f2f6961f4f1344524f88424cae355
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 20:49:02 2005 +1100

    drm: fix setversion ioctl zeroing
    
    Egbert Eich reported a bug 2673 on bugs.freedesktop.org and tracked it
    down to a missing memset in the setversion ioctl, this causes X server
    crashes so I would like to see the fix in a 2.6.11.x tree if possible..
    
    From: Egbert Eich <eich@pdx.freedesktop.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 780ce1d2eeb1f404a52389468f19ac2be421f3a5
Merge: 1a8fca9... 6b93091...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 20:20:01 2005 +1100

    Merge starflyer.(none):/foo/airlied/bitkeeper/linux-2.5
    into starflyer.(none):/foo/airlied/bitkeeper/drm-linus

commit 6b930915f46332f9b3ea796b6af89fff0c282cff
Merge: 60ff519... dfb01d3...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 20:11:56 2005 +1100

    Merge starflyer.(none):/foo/airlied/bitkeeper/drm-heads
    into starflyer.(none):/foo/airlied/bitkeeper/drm-linus

commit 60ff519101b094ab8e03c2a2849456523562cc24
Merge: 4abca5c... ecd1dcb...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 20:08:34 2005 +1100

    Merge starflyer.(none):/foo/airlied/bitkeeper/drm-fixes
    into starflyer.(none):/foo/airlied/bitkeeper/drm-linus

commit ecd1dcbe4850da6460619055fa37213c5a73827c
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 19:59:02 2005 +1100

    drm: upgrade radeon driver to 1.15
    
    add support for texture micro tiling on radeon/r200.
    Add support for r100 cube maps (since it also requires a version bump).
    
    From: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9b35a67bf82d238a4b1498bacc21dc824c9e59f8
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 19:44:35 2005 +1100

    drm: cleanup i810/i830 drivers
    
    Cleanup patch for i810/i830
    
    From: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit fe8ebee1959abf8e52705c27910313870f222f44
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 19:20:36 2005 +1100

    drm: cleanup patch
    
    This makes a lot of functions static and cleans up a few
    other minor things.
    
    From: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 5bc5f96bbf000f386e750c66562d93f5c3f9084b
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 18:47:24 2005 +1100

    drm: fix radeon pci id
    
    fd.o bug #2576: Add support for ATI RN50/ES1000. (ATI Technologies Inc.)
    
    From: Michel Daenzer <michel@daenzer.net>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit dfb01d372f0065adc953fccec46fb951b2cd71f3
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Mar 11 18:19:51 2005 +1100

    drm: split out structure into heads
    
    This patch splits out the main drm structures for future multi-head support.
    It just sets up the structures and the stub functions for putting/getting heads
    
    From: Jon Smirl <jonsmirl@gmail.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 4abca5c280d196791012949afd30250b988bca38
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Thu Mar 10 16:55:51 2005 +1100

    drm: fixup CREDITS and MAINTAINERS
    
    Add myself to MAINTAINERS for drm, and fixup my CREDITS.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7ffd43508043f3464cb04943156a15caf7aa2f8b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 9 18:22:15 2005 -0800

    [PATCH] ppc64: fix iounmap TLB flushes
    
    This patch fixes a bug in ppc64 local implementation of iounmap() that
    would cause it to incorrectly flush the hash table since the changes to
    set_pte have been applied.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c2e2094e015aca8b893699c6cdf0d5fb0f649a5
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 18:09:50 2005 -0800

    Remove empty file left over from dead cpufreq /proc interface

commit 891dfbd9c23764eb09ea7c68dfc73e72c47c0545
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 18:05:36 2005 -0800

    make Geode FB driver depend on X86
    
    There seems little point in doing otherwise.

commit d10006551e0c91672f51cef866a2388921b708bb
Merge: b4ae004... c140b4a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 17:57:25 2005 -0800

    Merge bk://bart.bkbits.net/ide-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b4ae00490008866fd7ee5da28bb44eff72bc012c
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 20:17:49 2005 +0100

    [ide] kill setup_driver_defaults()
    
    * move default_do_request() to ide-default.c
    * fix drivers to set ide_driver_t->{do_request,end_request,error,abort}
    * kill setup_driver_defaults()
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 0a04d0c2a650a357a8bfe303eb9a1a4d24379de3
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 20:13:44 2005 +0100

    [ide] kill ide_driver_t->capacity
    
    * add private /proc/ide/hd?/capacity handlers to ide-{cd,disk,floppy}.c
    * use generic proc_ide_read_capacity() for ide-{scsi,tape}.c
    * kill ->capacity, default_capacity() and generic_subdriver_entries[]
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 7a44e2e83b6ca915aee7b0e512bca5028c335e04
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 20:06:22 2005 +0100

    [ide] kill ide_driver_t->pre_reset
    
    Add ide_drive_t->post_reset flag and use it to signal post reset
    condition to the ide-tape driver (the only user of ->pre_reset).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit a32ec5211491b6afba45a8bbd29441bc286b99de
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 20:00:07 2005 +0100

    [ide] fix some rare ide-default vs ide-disk races
    
    Some rare races between ide-default and ide-disk are possible, i.e.:
    * ide-default is used, I/O request is triggered (ie. /proc/ide/hd?/identify),
      drive->special is cleared silently (so CHS is not initialized properly),
      ide-disk is loaded and fails if drive uses CHS
    * ide-disk is used, drive is resetted, ide-disk is unloaded, ide-default
      takes control over drive and on the first I/O request silently clears
      drive->special without restoring settings
    
    Fix them by moving idedisk_{special,pre_reset}() and company to IDE core.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit d1c1bba5adc3cbdf3917322149d059b1baea9dcc
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 19:55:36 2005 +0100

    [ide] generic Power Management for IDE devices
    
    Move PM code from ide-cd.c and ide-disk.c to IDE core so:
    * PM is supported for other ATAPI devices (floppy, tape)
    * PM is supported even if specific driver is not loaded
    
    Also s/HWIF(drive)/drive->hwif/ while at it.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 1ef372a68f166517047af569aa11493a0a12dc24
Author: Bartlomiej Zolnierkiewicz <bzolnier@trik.(none)>
Date:   Thu Mar 10 19:49:07 2005 +0100

    [ide] fix drive->ready_stat for ATAPI
    
    ATAPI devices ignore DRDY bit so drive->ready_stat must be set to zero.
    It is currently done by device drivers (including ide-default fake driver)
    but for PMAC driver it is too late as wait_for_ready() may be called during
    probe: probe_hwif()->pmac_ide_dma_check()->pmac_ide_{mdma,udma}_enable()->
    ->pmac_ide_do_setfeature()->wait_for_ready().
    
    Fixup drive->ready_stat just after detecting ATAPI device.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit dc282020d02c8798ae798caa4eb607e84c792f5d
Author: bram.verweij@wanadoo.nl <bram.verweij@wanadoo.nl>
Date:   Thu Mar 10 18:15:57 2005 +0100

    [ide] fix DMA support for LBA48 disks on ALi15x3 (revs < 0xC5)
    
    From: Bram Verweij <bram.verweij@wanadoo.nl>
    
    The problem seems to be that ide-disk.c tries to use PIO mode for
    blocks > 137 GB (which is good), and LBA48 + DMA for blocks <= 137GB
    (which is known to be a problem, i.e., this is why the no_lba48_dma
    field was introduced in the first place).  Attached is a small patch
    that makes ide-disk.c use PIO mode for blocks > 137 GB, and LBA28 DMA
    (instead of LBA48 DMA) for blocks <= 137 GB.
    
    bart: argh, I forgot about 'lba48' flag; patch slightly modified by me
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit c140b4a0abf594f1a3aec10a87538ac5c0cb9b2a
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:20:53 2005 -0800

    [PATCH] device-mapper: Some multipath fn renames
    
    Rename ctr to create etc.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7250613f35025d2db97d9fae258d8af6ad1d3506
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:20:37 2005 -0800

    [PATCH] device-mapper: Some code/formatting cleanups
    
    Some multipath code/formatting cleanups
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32ff840b307f2aa82e022cefdeca72f09e68e126
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:20:21 2005 -0800

    [PATCH] device-mapper: tag multipath exports GPL
    
    Tag multipath exports GPL.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 797c85d8fbca80e472ea9b63dc58e5e56a235b34
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:20:05 2005 -0800

    [PATCH] device-mapper: multipath hardware handler for EMC
    
    Outline Hardware Handler for EMC CLARiiON AX/CX-series.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 593c9debb12b512ec1fc4ff01a8ed2a99a9dd61e
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:19:48 2005 -0800

    [PATCH] device-mapper: multipath hardware handler
    
    Each multipath instance can use a Hardware Handler with hooks for the
    particular hardware you're using.
    
    This patch provides the hw_handler infrastructure.
    
    So far 3 hooks are available:
    
      A status function invoked by device-mapper table and status requests.
    
      An initialisation function called when a Priority Group is selected for
      use but before any I/O is sent to it.  This function should return straight
      away, and I/O is queued until dm_pg_init_complete() is called indicating
      whether or not the initialisation was successful.  The are three error
      flags, any or all of which may be set: MP_FAIL_PATH, MP_BYPASS_PG,
      MP_ERROR_IO.
    
      An error handler which gets the opportunity to decode any error that a bio
      generated.  Patches are pending to make scsi error details available for
      dm_scsi_err_handler() to decode.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa9384a41fbce65f06b85ca3596f5af858ca7e67
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:19:31 2005 -0800

    [PATCH] device-mapper: multipath round-robin path selector.
    
    A very basic path selector: round-robin.
    
    It uses in turn each path that has not been disabled.
    
    By default, it instructs core multipath to use each path it supplies for 1000
    bios, but a different repeat_count can be set against any path to provide
    primitive load-balancing across unequal paths.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f494a8028cf63a2fcfa7a9ba0706ca188dad83a
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:19:15 2005 -0800

    [PATCH] device-mapper: multipath
    
    The core device-mapper multipath and path-selector code.
    
    Paths are grouped into an ordered list of Priority Groups.  Each Priority
    Group has a Path Selector which chooses which of the Priority Group's paths is
    to be used for each bio e.g.  according to some load-balancing algorithm.  If
    a bio generates an error, the path that it used gets disabled and an
    alternative path is tried.  If all the paths in a Priority Group fail, another
    Priority Group is selected.
    
    There are management commands fail_path and reinstate_path.  A path tester
    (currently implemented in userspace) is responsible for monitoring paths that
    have failed and reinstating them should they come back.
    
    Other management commands can be use to switch immediately to a specified
    Priority Group or to disable a particular Priority Group so it will only be
    tried after there are no more left.
    
    As a last resort there is an option to 'queue_if_no_path' which queues I/O if
    all paths have failed e.g.  temporarily during a firmware update or if the
    userspace daemon is slow reinstating paths.
    
    The userspace multipath tools are available at:
      http://christophe.varoqui.free.fr/
    macroflux.png is a diagram of the current architecture.
    
    From: Alasdair G Kergon <agk@redhat.com>
    
      Don't requeue I/O repeatedly if there are no paths left and the device is
      in the process of being suspended, or else the suspend can never complete.
    
    Reported-By: "goggin, edward" <egoggin@emc.com>
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0296e4944a31ddbbc4dd9b66a7d41e9f2342c552
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:18:57 2005 -0800

    [PATCH] device-mapper: Export map_info
    
    Export map_info (part of bio->bi_private) for targets like multipath to use
    for storing context.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6d16564cfcf7f5331bc36fdb00388801344be37
Author: Alasdair G. Kergon <agk@redhat.com>
Date:   Wed Mar 9 17:18:42 2005 -0800

    [PATCH] device-mapper: Record & restore bio state.
    
    Simple functions to record and restore bio state so we can resubmit a bio
    that returned an error.
    
    DM multipath (following shortly) uses this.
    
    This patch has it private to device-mapper: is it any use elsewhere?
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dd5239b1fb060efc7334c2ebde5f51c5be03c30
Author: Lars Marowsky-Bree <lmb@suse.de>
Date:   Wed Mar 9 17:18:24 2005 -0800

    [PATCH] device-mapper: Store name directly against device
    
    Add a name field to struct dm_dev so we don't have to use format_dev_t()
    all over the place for informative error messages.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8caca4d75127933ecf140154fd697207d964aa9
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:18:09 2005 -0800

    [PATCH] tdfxfb: eliminate bad section references
    
    Fix tdfxfb section references:
      convert __initdata to __devinitdata.
    
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000000e6f R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000000fea R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001006 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001022 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000103c R_X86_64_PC32     .init.data+0x00000000000000f4
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001067 R_X86_64_PC32     .init.data+0x00000000000000f4
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000106f R_X86_64_PC32     .init.data+0x00000000000000fc
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001084 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000010f1 R_X86_64_PC32     .init.data+0x00000000000000cc
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000011b8 R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000011c1 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000122b R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001232 R_X86_64_PC32     .init.data+0x00000000000000cc
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000124a R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001320 R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/tdfxfb.o .text refers to 0000000000001327 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000134c R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000136a R_X86_64_PC32     .init.data+0x00000000000000e6
    Error: ./drivers/video/tdfxfb.o .text refers to 000000000000137d R_X86_64_PC32     .init.data+0x00000000000000e8
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000013b1 R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000013c5 R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/video/tdfxfb.o .text refers to 00000000000013e4 R_X86_64_32S      .init.data+0x0000000000000020
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1e14918a8bd96ea102bac33561549415d888302
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:17:52 2005 -0800

    [PATCH] sis: eliminate bad section references
    
    Fix sis section reference:
      change 2 __init functions to be __devinit.
    
    Error: ./drivers/video/sis/sis_main.o .text refers to 0000000000000b5b R_X86_64_PC32     .init.text+0xfffffffffffffffc
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9edfd0e78f0b9a12f9f55cbfff988bb81d14786
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:17:37 2005 -0800

    [PATCH] riva: eliminate bad section references
    
    Fix riva sections references:
      change __initdata to __devinitdata.
    
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001e64 R_X86_64_32S      .init.data+0x0000000000000020
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001e6f R_X86_64_PC32     .init.data+0x0000000000000004
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001e7c R_X86_64_PC32     .init.data+0x0000000000000003
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001e93 R_X86_64_PC32     .init.data
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001ec6 R_X86_64_PC32     .init.data+0x000000000000005c
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001ef2 R_X86_64_PC32     .init.data+0x0000000000000034
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001f38 R_X86_64_PC32     .init.data+0x000000000000005c
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001f41 R_X86_64_PC32     .init.data+0x0000000000000054
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001f4f R_X86_64_PC32     .init.data+0x000000000000002c
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000001f94 R_X86_64_PC32     .init.data+0x000000000000002c
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000201a R_X86_64_PC32     .init.data+0x0000000000000034
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000002035 R_X86_64_PC32     .init.data+0x0000000000000034
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000203c R_X86_64_PC32     .init.data+0x000000000000002c
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000206b R_X86_64_PC32     .init.data+0xfffffffffffffffb
    Error: ./drivers/video/riva/fbdev.o .text refers to 0000000000002074 R_X86_64_PC32     .init.data+0x0000000000000034
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000207b R_X86_64_PC32     .init.data+0x000000000000002c
    Error: ./drivers/video/riva/fbdev.o .text refers to 00000000000020e7 R_X86_64_32S      .init.data+0x0000000000000020
    Error: ./drivers/video/riva/fbdev.o .text refers to 00000000000021cb R_X86_64_32S      .init.data+0x0000000000000080
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000220f R_X86_64_PC32     .init.data+0x000000000000011c
    Error: ./drivers/video/riva/fbdev.o .text refers to 000000000000228e R_X86_64_32S      .init.data+0x0000000000000080
    Error: ./drivers/video/riva/fbdev.o .text refers to 00000000000022ea R_X86_64_PC32     .init.data+0x0000000000000007
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f16f7766087071f266aaf0e82c4af97ea98eaaf9
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 17:17:20 2005 -0800

    [PATCH] fbdev-cleanups-in-driver-video warning fixes
    
    drivers/video/cyber2000fb.c:95: warning: `default_font_storage' defined but not used
    drivers/video/radeonfb.c:661: warning: `mode_option' defined but not used
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b4dff24cc2ca9117a190e2b8626095023735315
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:17:05 2005 -0800

    [PATCH] radeonfb: eliminate bad section references
    
    Fix radeonfb section references by changing __initdata
      to __devinitdata.
    
    Error: ./drivers/video/radeonfb.o .text refers to 0000000000002037 R_X86_64_PC32     .init.data+0x0000000000000003
    Error: ./drivers/video/radeonfb.o .text refers to 0000000000002491 R_X86_64_PC32     .init.data
    Error: ./drivers/video/radeonfb.o .text refers to 0000000000002870 R_X86_64_PC32     .init.data+0x000000000000000c
    Error: ./drivers/video/radeonfb.o .text refers to 0000000000002a21 R_X86_64_PC32     .init.data+0xfffffffffffffffb
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d6c317cfbc500f040de1e1e0165a39e48824adc
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:16:49 2005 -0800

    [PATCH] pm2fb: eliminate bad section references
    
    Fix pm2fb section references by changing referenced
      __initdata to __devinitdata.
    
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000000ad4 R_X86_64_PC32     .init.data+0x0000000000000007
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000000afc R_X86_64_PC32     .init.data+0x0000000000000003
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000147e R_X86_64_PC32     .init.data+0x00000000000000bc
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001491 R_X86_64_PC32     .init.data+0x00000000000000c2
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000149a R_X86_64_PC32     .init.data+0x00000000000000bc
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000014aa R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000014e0 R_X86_64_PC32     .init.data+0x00000000000000f8
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000014eb R_X86_64_PC32     .init.data+0x00000000000000f4
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000150e R_X86_64_PC32     .init.data+0x00000000000000fc
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001515 R_X86_64_PC32     .init.data+0x00000000000000f4
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000152d R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000015ce R_X86_64_PC32     .init.data+0x00000000000000cc
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000015d7 R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000015fa R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001601 R_X86_64_PC32     .init.data+0x00000000000000cc
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001644 R_X86_64_32S      .init.data+0x00000000000000c0
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001674 R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000168e R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/video/pm2fb.o .text refers to 00000000000016af R_X86_64_32S      .init.data+0x0000000000000020
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001724 R_X86_64_PC32     .init.data+0x00000000000000d4
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000172b R_X86_64_PC32     .init.data+0x00000000000000cc
    Error: ./drivers/video/pm2fb.o .text refers to 0000000000001746 R_X86_64_PC32     .init.data+0x00000000000000fc
    Error: ./drivers/video/pm2fb.o .text refers to 000000000000174d R_X86_64_PC32     .init.data+0x00000000000000f4
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ded4b3e6fc90f98ab78444c368fc24b6d8f5fbdc
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:16:33 2005 -0800

    [PATCH] neofb: eliminate bad section references
    
    Fix neofb section reference to __initdata: make it __devinitdata.
    
    Error: ./drivers/video/neofb.o .text refers to 0000000000001fb4 R_X86_64_PC32     .init.data+0xfffffffffffffffc
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b5e490cc7ae7a2f3631cb81de95cfbcf915cd81
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:16:18 2005 -0800

    [PATCH] kyro: eliminate bad section references
    
    Fix kyro sections references by changing __initdata
      to __devinitdata.
    
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000692 R_X86_64_PC32     .init.data+0x000000000000090c
    Error: ./drivers/video/kyro/fbdev.o .text refers to 00000000000006c2 R_X86_64_PC32     .init.data+0x0000000000000914
    Error: ./drivers/video/kyro/fbdev.o .text refers to 00000000000006d1 R_X86_64_PC32     .init.data+0x0000000000000934
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000709 R_X86_64_PC32     .init.data+0x0000000000000934
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000711 R_X86_64_PC32     .init.data+0x000000000000093c
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000727 R_X86_64_PC32     .init.data+0x000000000000090c
    Error: ./drivers/video/kyro/fbdev.o .text refers to 000000000000072d R_X86_64_PC32     .init.data+0x0000000000000914
    Error: ./drivers/video/kyro/fbdev.o .text refers to 000000000000073f R_X86_64_PC32     .init.data+0x00000000000008eb
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000748 R_X86_64_PC32     .init.data+0x0000000000000914
    Error: ./drivers/video/kyro/fbdev.o .text refers to 000000000000075b R_X86_64_PC32     .init.data+0x000000000000090c
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000778 R_X86_64_32S      .init.data+0x0000000000000900
    Error: ./drivers/video/kyro/fbdev.o .text refers to 000000000000077e R_X86_64_PC32     .init.data+0x00000000000008e7
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000793 R_X86_64_PC32     .init.data+0x0000000000000926
    Error: ./drivers/video/kyro/fbdev.o .text refers to 000000000000079b R_X86_64_PC32     .init.data+0x00000000000008e3
    Error: ./drivers/video/kyro/fbdev.o .text refers to 00000000000007a6 R_X86_64_PC32     .init.data+0x0000000000000928
    Error: ./drivers/video/kyro/fbdev.o .text refers to 00000000000007f1 R_X86_64_PC32     .init.data+0x00000000000008dc
    Error: ./drivers/video/kyro/fbdev.o .text refers to 00000000000007f8 R_X86_64_32S      .init.data+0x0000000000000420
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000805 R_X86_64_32S      .init.data+0x00000000000000a0
    Error: ./drivers/video/kyro/fbdev.o .text refers to 0000000000000834 R_X86_64_32S      .init.data
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a76f26e9c28fb0591860377c85167d36efbd470a
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:16:02 2005 -0800

    [PATCH] imsttfb: eliminate bad section references
    
    Fix imsttfb section references:  change __initdata to __devinitdata
      and __init to __devinit.
    
    Error: ./drivers/video/imsttfb.o .text refers to 000000000000103b R_X86_64_32S      .init.data+0x0000000000000040
    Error: ./drivers/video/imsttfb.o .text refers to 0000000000001049 R_X86_64_32S      .init.data+0x0000000000000041
    Error: ./drivers/video/imsttfb.o .text refers to 0000000000001064 R_X86_64_32S      .init.data
    Error: ./drivers/video/imsttfb.o .text refers to 0000000000001071 R_X86_64_32S      .init.data+0x0000000000000001
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 335d650232c3ad35ac34cd7f705f9d674ded09a2
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:15:46 2005 -0800

    [PATCH] atyfb: eliminate bad section references
    
    Fix atyfb references to __initdata from .text code sections
      by changing __initdata to __devinitdata.
    
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002416 R_X86_64_32S      .init.data+0x00000000000004a0
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002514 R_X86_64_32S      .init.data
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 000000000000253e R_X86_64_32S      .init.data+0x0000000000000060
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 00000000000026c4 R_X86_64_32S      .init.data+0x00000000000004a0
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 00000000000026e7 R_X86_64_32S      .init.data+0x0000000000000070
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 00000000000026ee R_X86_64_32S      .init.data+0x0000000000000068
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 00000000000026fa R_X86_64_32S      .init.data+0x0000000000000074
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002706 R_X86_64_32S      .init.data+0x0000000000000078
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002712 R_X86_64_32S      .init.data+0x000000000000007c
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002afb R_X86_64_32S      .init.data+0x0000000000000560
    Error: ./drivers/video/aty/atyfb_base.o .text refers to 0000000000002baa R_X86_64_32S      .init.data+0x00000000000004c0
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f657f4f7c1e05e6a6b5cea7a86c1b58b47ae3c92
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 9 17:15:30 2005 -0800

    [PATCH] asiliantfb: eliminate bad section references
    
    asiliantfb refers to __initdata that should be __devinitdata
      and calls __init functions that should be __devinit;
    
    Error: ./drivers/video/asiliantfb.o .text refers to 00000000000006ee R_X86_64_32S      .init.data+0x00000000000000a0
    Error: ./drivers/video/asiliantfb.o .text refers to 0000000000000711 R_X86_64_32S      .init.data
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a5a6a4a956e28e94c92109a1cf8e5d5cd73fe68
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 9 17:15:13 2005 -0800

    [PATCH] radeonfb: PLL access workaround
    
    So you remember all those weird lockups at boot that happened in late
    2.6.11-rc with radeonfb.  I posted a "workaround" which just moved code
    around a bit and it appeared to work.  I finally got some real infos about
    the problem from ATI, and it seems my "workaround" is not very safe and
    there are other potential issues realted to HW bugs when accessing the PLL
    registers.
    
    This patch implements all of these workarounds (and puts back the code
    where it was before my previous fix).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64c823b4b2bbc07f504510c7749a3e774a6c4512
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:14:57 2005 -0800

    [PATCH] fbdev: Cleanups in driver/video
    
    This patch contains cleanups including the following:
    - make needlessly global code static
    - remove the needlessly #ifdef MODULE from several module_exit
    - remove or #if 0 the following unused global functions:
      - fbmon.c: fb_create_modedb
      - fbmon.c: fb_get_monitor_limits
      - nvidia/nv_i2c.c: nvidia_delete_i2c_busses
      - nvidia/nv_setup.c: NVEnablePalette
      - nvidia/nv_setup.c: NVReadDacMask
    - remove the following unneeded EXPORT_SYMBOL's:
      - fbmon.c: fb_create_modedb
      - fbmon.c: fb_get_monitor_limits
      - hgafb.c: hgafb_setup
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 948592caf183c1da0606f4d16f70407b547d8bf1
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:14:39 2005 -0800

    [PATCH] savagefb: Make savagefb one module
    
    #if defined(CONFIG_FB_SAVAGE_ACCEL)
    
      doesn't work with FB_SAVAGE_ACCEL=m, and
    
    #if defined(CONFIG_FB_SAVAGE_ACCEL) || defined(CONFIG_FB_SAVAGE_ACCEL_MODULE)
    
      would break with FB_SAVAGE=y and FB_SAVAGE_ACCEL=m.
    
    Rename savagefb.c to savagefb_driver.c.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06b051b91d2f2ef852876f0c3a07f59176b2f822
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Mar 9 17:14:07 2005 -0800

    [PATCH] fbdev: Allow core fb to be built as a module
    
    Allow the framebuffer core to be built as a module to ease debugging.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd7ff3fa9d3631b6138ebfaaeb51e302fa63e342
Author: James Simmons <jsimmons@www.infradead.org>
Date:   Wed Mar 9 17:13:51 2005 -0800

    [PATCH] fbdev: Generic drawing function cleanups 2
    
    Replaced LONG_MASK, SHIFT_PER_LONG, BYTES_PER_LONG with dynamic variables.
    This will allow drivers in the future to control how much data to read/write
    from the framebuffer.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 285311b345c259312d3d1cd53a999d18c338c355
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:13:36 2005 -0800

    [PATCH] nvidiafb:  Some chipsets need a buffer pitch divisible by 64
    
    The Geforce2 cards crashes at 800x600-8, but not at 640x480 or 1024x768.
    Changing the xres_virtual to be divisible by 64 fixes the problem.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71992da30c676660a3d9f4398ecce0abea4b5132
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:13:19 2005 -0800

    [PATCH] nvidiafb: Fix i2c error handling
    
    Fixed error handling in rivafb-i2c.c if bus registration fails.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71b2cdc41f88aa1b9774128b6c95019d9ae90fde
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:13:03 2005 -0800

    [PATCH] rivafb: Fix i2c error handling
    
    Fixed error handling in rivafb-i2c.c if bus registration fails.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20067d73b5b6189ed3b2a8a313cdebfce638e140
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:12:46 2005 -0800

    [PATCH] fbcon: Cursor fixes
    
    From Jiri Benc:
    
    we found several bugs in framebuffer console code in recent kernels.
    
    1. The escape sequence '\033[?25l' does not work (should disable cursor).
    
    2. When scrolling console using Shift-PgUp with cursor in the upper half
       part of the screen, cursor position is not updated.
    
    3. If cursor is placed at some character and console is scrolled using
       Shift-PgUp, that character remains on the screen.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbfda4e400c0720f03e5a00b4b30e874df184110
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:12:31 2005 -0800

    [PATCH] fbdev: Capture modelist change event
    
    Add capability to change private modelist.  It checks if the entries in the
    new modelist are acceptable, and if not, trimmed from the modelist.
    
    Also added a new event, FB_EVENT_NEW_MODELIST, sent by fbmem, and captured by
    fbcon to resize all consoles, if need be.
    
    Requires minor changes to new functions, ie, fb_get_color_depth().
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c91d5e9882cb6206ee1443d6b395c1281998a8c
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Wed Mar 9 17:12:15 2005 -0800

    [PATCH] fbdev: Add mode changing via sysfs
    
    This is a first pass at adding two new sysfs attributes to
    /sys/class/graphics/fb0 for setting modes.  There are two attributes: modes
    which contains a list of valid modes, and mode which is the current mode.  To
    switch modes echo one of the entries from the modes list to the mode
    attribute.
    
    The D,V,S on the modes represents Detailed, Vesa, Standard from the DDC info.
    
    modes is root writable.  It can also be used to set the list of modes.  For
    example a /etc file could add modes that are not in the monitor's DDC.
    
    mode is user writable.  PAM would set ownership of mode at user login time.
    This provides a safe way for a user to set the mode without being root.  You
    can only set the mode to one of the modes on the list.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f719499bcec715305bd61cf13f443cccef3be19
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 9 17:12:01 2005 -0800

    [PATCH] ppc32: uninorth-agp suspend support
    
    This patch adds suspend/resume support to the Apple UniNorth AGP bridge to
    make sure AGP is properly disabled when the machine goes to sleep.  Without
    this, the r300 based laptops will fail to wakeup from sleep when using the
    new experimental r300 DRI driver.  It should also improve reliablility in
    general with other chips.
    
    Unfortunately, uninorth-agp is just a "sibling" of the video chip on the
    PCI bus, and thus ends up beeing called either before the video chip
    suspend routine, or after, depending on the HW layout or other random
    things.
    
    To make sure the device side of AGP is always disabled first and that we
    never touch the device after having put it into D2 state (which can be
    deadly), I also need the separate patch to radeonfb and aty128fb which will
    make them disabled their own side if not already done by the bridge driver.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58a40ef75fec2d7b03c1034ab07bab90952c0baa
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 9 17:11:45 2005 -0800

    [PATCH] aty128fb: Disable AGP on suspend
    
    This patch improves reliability of suspend/resume by making sure AGP is
    disabled on the Rage 128 chip before putting it into a suspend state.  It
    works in conjunction with the uninorth-agp suspend patch, but should be
    harmless on machines with a different AGP bridge.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd616dd951ccce9bd2fa86243aa67d1268b9d807
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 9 17:11:29 2005 -0800

    [PATCH] radeonfb: Disable AGP on suspend
    
    This patch improves reliability of suspend/resume by making sure AGP is
    disabled on the radeon chip before putting it into a suspend state.  It
    works in conjunction with the uninorth-agp suspend patch, but should be
    harmless on machines with a different AGP bridge.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ae26b93d8ce048b6ded0362d465d90c28bec533
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:11:13 2005 -0800

    [PATCH] fbdev: Generic drawing function cleanups
    
      From Ulrich Eckhardt:
    
       * removed trailing whitespace
       * use helper function for common bitwise operations
       * fixed several cases where either the wrong mask was used for bitops
         or the mask was computed falsely, messing up <32 BPP support
       * added self-tests for bitcpy_rev() algorithm in module-init function
       * no need to use explicitly sized integers in some cases
       * added a few comments where things weren't obvious to me
    
      I tested these changes on an Au1100 based board, using the patches to its
      framebuffer code that were posted here by Christian Pellegrin[1]. I had this
      code working both on a 16BPP color LCD and a 4BPP monochrome one.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e0de75e775cd97d9234bdea41b428a85e3ede42
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:10:58 2005 -0800

    [PATCH] nvidiafb: Add update framebuffer driver for nVidia chipsets
    
    Because nVidia keeps pumping out new graphics chipsets, it is becoming
    harder to add support for these with the old rivafb code.  Currently, rivafb
    can properly support NV_ARCH_20 chipsets and older.
    
    Instead of rewriting rivafb to support the latest chipsets, I've decided to
    write a new driver, called nvidiafb.  The aim is to closely follow Xorg
    development.
    
    Currently, this driver is based on the most recent CVS Xorg nv driver. Main
    
      - console acceleration for all chipsets
      - uses DMA instead of PIO
      - better LCD/digital output support
      - better monitor detection
      - support for Riva128 will be dropped as it cannot do DMA, rivafb
        will remain as the driver for this chipset
    
    It should work with Xorg/XFree86 nv driver, but as with rivafb, is not
    compatible with the proprietary nvidia driver.
    
    Once the code becomes stable, rivafb code will be trimmed to only support the
    Riva128 and perhaps some of the older chipsets.  The code has been tested on
    several nVidia graphics card on x86 and x86_64.  I'm still waiting for
    feedback from Guido Guenther regarding ppc.
    
    This need not go to mainline immediately, as I would prefer the code to
    receive rigorous testing in the mm tree.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dcf65069f8dc8f601dbc4ccb8a008a334992d9c
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:10:41 2005 -0800

    [PATCH] geodefb: Add Geode framebuffer driver
    
      Attached is a patch (against 2.6.10) for a framebuffer driver for the
      Geode family of processors.  It does not use AMD's horrible Durango API.
       It is, however, rather feature incomplete at the moment.
    
              * Only Geode GX1 (with CS5530 companion chip) is supported.
              * Tested resolutions: 640x480 to 1280x1024.
              * Supported bit depths: 8 bit palette, 16 bit RGB 5-6-5.
              * CRT output only.
              * No accelerated features.
              * Compression is not enabled.
              * flat panel support (panel=<x>x<y> option). (Only one 640x480 panel
                has been tested though.)
              * blank function for display blanking/powersaving.
              * crt=<n> option to enable/disable the CRT output.
    
    From: Alexey Dobriyan <adobriyan@mail.ru>
    
    Fix
    
    drivers/video/geode/display_gx1.c: error: `loops_per_jiffy' undeclared (first use in this function)
    drivers/video/geode/video_cs5530.c: error: `loops_per_jiffy' undeclared (first use in this function)
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5eeb19bd77432a8a5c725879fc86c6682807d66c
Author: David Vrabel <dvrabel@arcom.com>
Date:   Wed Mar 9 17:10:24 2005 -0800

    [PATCH] fbdev: Kbuild cleanups
    
    This set of two patches add new options (FB_CFB_IMAGEBLIT, FB_CFB_FILLRECT,
    FB_CFB_COPYAREA, FB_SOFT_CURSOR) to the framebuffer Kconfig to enable
    building the generic software cfbfillrect, cfbcopyarea, cfbimageblt and
    softcursor objects.  This cuts out a lot of stuff from the Makefile and
    allows drivers in their own directory to be more self-contained.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c71ab5cfe7d2039e0d82ee4141320c2cc1ad8bc
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:10:08 2005 -0800

    [PATCH] fbdev: Logo code fixes
    
      This patch fixes a few bugs with the low level logo code.
    
      1. Allow DEC Alpha machines to draw the DEC logo
      2. Cleanup the logo directory on a make clean
      3. Some makefile cleanups.
    
      I have tested on my local machines. I like to be able to create the C
      files from the logos for only the ones we want to compile but I haven't
      figured out how to do that. That can wait. Please apply.
    
    Signed-off-by: James Simmons <jsimmons@www.infradead.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d566ddb2da963c3ed1635c0d896a99203f1a42bd
Author: Antonino Daplas <adaplas@hotpop.com>
Date:   Wed Mar 9 17:09:51 2005 -0800

    [PATCH] intelfb: vesa_modes require CONFIG_FB_MODEHELPERS
    
    The recent intelfb update made intelfb pass vesa_modes as the database to
    fb_find_mode(). The array vesa_modes depends on CONFIG_FB_MODEHELPERS. Fix
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bae2dadc07b23440f6792ec7ae16abd40e61242
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 17:09:35 2005 -0800

    [PATCH] tridentfb warning fix
    
    drivers/video/tridentfb.c:1219: warning: `tridentfb_setup' declared `static' but never defined
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 747525decbc511492562a518b7f6f45f4ea09efa
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 9 17:09:19 2005 -0800

    [PATCH] tridentfb.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31859ae9bae858db877dc675ff0b01738c64fb58
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 17:09:04 2005 -0800

    [PATCH] sis warning fix
    
    drivers/video/sis/sis_main.c: In function `sisfb_compat_ioctl':
    drivers/video/sis/sis_main.c:2204: warning: implicit declaration of function `lock_kernel'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 922b072ee97aa79285920ab2eb412a039dbd1206
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 17:08:48 2005 -0800

    [PATCH] fbdev compat_ioctl warning fix
    
    Fix some confusion over fbdev compat_ioctl return types - compat_ioctls return
    `long'.
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 089d5f720f0645d44762134e985e9e9b505ca410
Author: Antonino Daplas <adaplas@gawab.com>
Date:   Wed Mar 9 17:08:31 2005 -0800

    [PATCH] intelfb: Add partial support 915G chipset
    
    Add (partial) support for 915G
      No HW cursor at the moment
      Screen is blanked but signal/sync is not switched off
    Mostly derived from XFree86/Xorg driver
    Pass "vesa_modes" and VESA_MODEDB_SIZE in call to "fb_find_mode()"
      to allow loading as module. Makes "vesa_modes" also the default
      "modedb" when linking statically into the kernel.
    Change PREFERRED_MODE to more reasonable value "1024x768-32@70"
    
    Signed-off-by: Axel Buttchereit <XL@XLsigned.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c3bf9684eafe43aac255c82ed8f5f708e485fd0
Author: lucasvr@gobolinux.org <lucasvr@gobolinux.org>
Date:   Wed Mar 9 17:08:15 2005 -0800

    [PATCH] skeletonfb: Documentation fixes
    
    This patch just fixes some typos and adds retval documentation for some
    functions that were missing it.
    
    I've also a question here: skeletonfb says that xxxfb_setcolreg() should
    return a negative errno on error.  However, if the register number being
    accessed is out of bounds, 1 is returned.  Shouldn't it be better to return
    -EINVAL instead?  By looking at fbcmap.c, the retval isn't being checked
    against positive/negative values, so it doesn't make sense to return 1.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30afec674acaf54bb8f5fc230eb1b9bcc7d7579f
Author: Antonino Daplas <adaplas@gawab.com>
Date:   Wed Mar 9 17:08:00 2005 -0800

    [PATCH] kyrofb: copy_*_user return value checks added to kyro fb
    
    Here's a patch that makes sure the return value of copy_from/to_user gets
    checked and handled in drivers/video/kyro/fbdev.c It also updates a comment at
    the top of the file that lists the files name and location.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58f533f9610d585d07be5b8d27ba6bdfa4b0495b
Author: Antonino Daplas <adaplas@gawab.com>
Date:   Wed Mar 9 17:07:44 2005 -0800

    [PATCH] w100fb: Make blanking function interrupt safe
    
    w100fb bugfix: The blanking function used vmalloc/vfree which isn't interrupt
    safe.  To avoid problems, switch to kmalloc/kfree and use several buffers to
    avoid kmalloc size limitations.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 117738c40a03232556666a430bf0abd33ad52c52
Author: Antonino Daplas <adaplas@gawab.com>
Date:   Wed Mar 9 17:07:28 2005 -0800

    [PATCH] radeonfb: Fix spurious error return in FBIO_RADEON_SET_MIRROR
    
    FBIO_RADEON_SET_MIRROR always returns with -EINVAL even if successful due to
    an inappropriate fall-through.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec567d00cfd3dce033124249a2d40ef69e493f8c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Mar 9 17:07:12 2005 -0800

    [PATCH] Ressurrect the esp serial driver
    
    Another first pass rescue run.  Fix up for modern locking, make it build
    and check over.  It could still do with other fixes (sleep_on etc) but it's
    a start
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0043c15d531327380c2c55c677697c4f2abccc6c
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Mar 9 17:06:56 2005 -0800

    [PATCH] cpusets: make CONFIG_CPUSETS the default in sn2_defconfig
    
    Make CONFIG_CPUSETS enabled by default in sn2_defconfig.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a978e558a32b51d03809f7d72b6c68d1a46d953
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Mar 9 17:06:39 2005 -0800

    [PATCH] cpusets - big numa cpu and memory placement
    
    This my cpuset patch, with the following changes in the last two weeks:
    
     1) Updated to 2.6.8.1-mm1
     2) [Simon Derr <Simon.Derr@bull.net>] Fix new cpuset to begin empty,
        not copied from parent.  Needed to avoid breaking exclusive property.
     3) [Dinakar Guniguntala <dino@in.ibm.com>] Finish initializing top
        cpuset from cpu_possible_map after smp_init() called.
     4) [Paul Jackson <pj@sgi.com>] Check on each call to __alloc_pages()
        if the current tasks cpuset mems_allowed has changed.  Use a cpuset
        generation number, bumped on any cpuset memory placement change,
        to make this check efficient.  Update the tasks mems_allowed from
        its cpuset, if the cpuset has changed.
     5) [Paul Jackson <pj@sgi.com>] If a task is moved to another cpuset,
        then update its cpus_allowed, using set_cpus_allowed().
     6) [Paul Jackson <pj@sgi.com>] Update Documentation/cpusets.txt to
        reflect above changes (4) and (5).
    
    I continue to recommend the following patch for inclusion in your 2.6.9-*mm
    series, when that opens.  It provides an important facility for high
    performance computing on large systems.  Simon Derr of Bull (France) and
    myself are the primary authors.  Erich Focht has indicated that NEC is also
    a potential user of this patch on the TX-7 NUMA machines, and that he
    "would very much welcome the inclusion of cpusets."
    
    I offer this update to lkml, in order to invite continued feedback.
    
    The one prerequiste patch for this cpuset patch was just posted before this
    one.  That was a patch to provide a new bitmap list format, of which
    cpusets is the first user.
    
    This patch has been built on top of 2.6.8.1-mm1, for the arch's:
    
      i386 x86_64 sparc ia64 powerpc-405 powerpc-750 sparc64
    
    with and without CONFIG_CPUSET.  It has been booted and tested on ia64
    (sn2_defconfig, SN2 hardware).  The 'alpha' arch also built, except for
    what seems to be an unrelated toolchain problem (crosstool ld sigsegv) in
    the final link step.
    
    ===
    
    Cpusets provide a mechanism for assigning a set of CPUs and Memory Nodes to
    a set of tasks.
    
    Cpusets constrain the CPU and Memory placement of tasks to only the
    processor and memory resources within a tasks current cpuset.  They form a
    nested hierarchy visible in a virtual file system.  These are the essential
    hooks, beyond what is already present, required to manage dynamic job
    placement on large systems.
    
    Cpusets require small kernel hooks in init, exit, fork, mempolicy,
    sched_setaffinity, page_alloc and vmscan.  And they require a "struct
    cpuset" pointer, a cpuset_mems_generation, and a "mems_allowed" nodemask_t
    (to go along with the "cpus_allowed" cpumask_t that's already there) in
    each task struct.
    
    These hooks:
      1) establish and propagate cpusets,
      2) enforce CPU placement in sched_setaffinity,
      3) enforce Memory placement in mbind and sys_set_mempolicy,
      4) restrict page allocation and scanning to mems_allowed, and
      5) restrict migration and set_cpus_allowed to cpus_allowed.
    
    The other required hook, restricting task scheduling to CPUs in a tasks
    cpus_allowed mask, is already present.
    
    Cpusets extend the usefulness of, the existing placement support that was
    added to Linux 2.6 kernels: sched_setaffinity() for CPU placement, and
    mbind() and set_mempolicy() for memory placement.  On smaller or dedicated
    use systems, the existing calls are often sufficient.
    
    On larger NUMA systems, running more than one, performance critical, job,
    it is necessary to be able to manage jobs in their entirety.  This includes
    providing a job with exclusive CPU and memory that no other job can use,
    and being able to list all tasks currently in a cpuset.
    
    A given job running within a cpuset, would likely use the existing
    placement calls to manage its CPU and memory placement in more detail.
    
    Cpusets are named, nested sets of CPUs and Memory Nodes.  Each cpuset is
    represented by a directory in the cpuset virtual file system, normally
    mounted at /dev/cpuset.
    
    Each cpuset directory provides the following files, which can be
    read and written:
    
      cpus:
          List of CPUs allowed to tasks in that cpuset.
    
      mems:
          List of Memory Nodes allowed to tasks in that cpuset.
    
      tasks:
          List of pid's of tasks in that cpuset.
    
      cpu_exclusive:
          Flag (0 or 1) - if set, cpuset has exclusive use of
          its CPUs (no sibling or cousin cpuset may overlap CPUs).
    
      mem_exclusive:
          Flag (0 or 1) - if set, cpuset has exclusive use of
          its Memory Nodes (no sibling or cousin may overlap).
    
      notify_on_release:
          Flag (0 or 1) - if set, then /sbin/cpuset_release_agent
          will be invoked, with the name (/dev/cpuset relative path)
          of that cpuset in argv[1], when the last user of it (task
          or child cpuset) goes away.  This supports automatic
          cleanup of abandoned cpusets.
    
    In addition one new filetype is added to the /proc file system:
    
      /proc/<pid>/cpuset:
          For each task (pid), list its cpuset path, relative to the
          root of the cpuset file system.  This file is read-only.
    
    New cpusets are created using 'mkdir' (at the shell or in C).  Old ones are
    removed using 'rmdir'.  The above files are accessed using read(2) and
    write(2) system calls, or shell commands such as 'cat' and 'echo'.
    
    The CPUs and Memory Nodes in a given cpuset are always a subset of its
    parent.  The root cpuset has all possible CPUs and Memory Nodes in the
    system.  A cpuset may be exclusive (cpu or memory) only if its parent is
    similarly exclusive.
    
    See further Documentation/cpusets.txt, at the top of the following
    patch.
    
    
    /proc interface:
    
    It is useful, when learning and making new uses of cpusets and placement to be
    able to see what are the current value of a tasks cpus_allowed and
    mems_allowed, which are the actual placement used by the kernel scheduler and
    memory allocator.
    
    The cpus_allowed and mems_allowed values are needed by user space apps that
    are micromanaging placement, such as when moving an app to a obtained by
    that app within its cpuset using sched_setaffinity, mbind and
    set_mempolicy.
    
    The cpus_allowed value is also available via the sched_getaffinity system
    call.  But since the entire rest of the cpuset API, including the display
    of mems_allowed added here, is via an ascii style presentation in /proc and
    /dev/cpuset, it is worth the extra couple lines of code to display
    cpus_allowed in the same way.
    
    This patch adds the display of these two fields to the 'status' file in the
    /proc/<pid> directory of each task.  The fields are only added if
    CONFIG_CPUSETS is enabled (which is also needed to define the mems_allowed
    field of each task).  The new output lines look like:
    
      $ tail -2 /proc/1/status
      Cpus_allowed:   ffffffff,ffffffff,ffffffff,ffffffff
      Mems_allowed:   ffffffff,ffffffff
    
    
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Simon Derr <simon.derr@bull.net>
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 794c8de9b9ae014f9d48583fb996cdcd135a2d6e
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Mar 9 17:06:21 2005 -0800

    [PATCH] new bitmap list format (for cpusets)
    
    [This is a copy of the bitmap list format patch that I submitted to lkml
     on 9 Aug 2004, after removing the prefix character fluff^Wstuff.  I
     include it here again just to get it associated with the current cpuset
     patch, which will follow in a second email 10 seconds later.  -pj]
    
    A bitmap print and parse format that provides lists of ranges of numbers,
    to be first used for by cpusets (next patch).
    
    Cpusets provide a way to manage subsets of CPUs and Memory Nodes for
    scheduling and memory placement, via a new virtual file system, usually
    mounted at /dev/cpuset.  Manipulation of cpusets can be done directly via
    this file system, from the shell.
    
    However, manipulating 512 bit cpumasks or 256 bit nodemasks (which will get
    bigger) via hex mask strings is painful for humans.
    
    The intention is to provide a format for the cpu and memory mask files in
    /dev/cpusets that will stand the test of time.  This format is supported by
    a couple of new lib/bitmap.c routines, for printing and parsing these
    strings.  Wrappers for cpumask and nodemask are provided.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 883ba7443358b1143e78586b7984d799407d06e8
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:06:05 2005 -0800

    [PATCH] FAT: Fix typo
    
    Add a `:'.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbc3c2a76fe53a156f91e88ce449e5112aaf8e4c
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:05:49 2005 -0800

    [PATCH] FAT: Update ->rename() path
    
    a) If old_dir == new_dir, we don't need to update the ".." entry,
       so this doesn't touch it if unneeded.
    
    b) old algorithm is using
             1) add a new entry (doen't point the data cluster yet).
    	 2) remove a old entry.
    	 3) switch the data cluster to new entry.
    	 4) update a ".." entry
       this order lose the data cluster when between 2) and 3).
    
       Instead of above, this is using
             1) add a new entry (doen't point the data cluster yet).
    	 2) switch the data cluster to new entry.
    	 3) update a ".." entry if needed.
    	 4) remove a old entry.
       this order would not lose the data cluster, but on disk metadata is
       corrupted on some point (later, fsck would recover this corruption
       without losing the data).
    
    c) use synchronous update.
    
    d) Fix the corrupted directory check created by 1 of new algorithm.
       1) Fix fat_bmap(). If directory's ->i_start == 0, fat_bmap() is
          handling it as root directory, this removes that strange behavior.
       2) On mkdir() path if directory's ->i_start == 0, returns -EIO.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e33b8d604db24635de90abd7f3ba0cf4ad6373a0
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:05:34 2005 -0800

    [PATCH] FAT: Use synchronous update for  {vfat,msdos}_add_entry()
    
    Use the synchronous updates, in order to guarantee that the writing to
    a disk is completeing when a system call returns.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1ae98cc2db49627a5df5777fee187af3e9b558a
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:05:18 2005 -0800

    [PATCH] FAT: Fix fat_write_inode()
    
    Fix a missing error check for sync_buffer_dirty().
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b85212ce89d38c28ba96e96fb1dd084d679f3eb
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:05:02 2005 -0800

    [PATCH] FAT: Fix fat_truncate()
    
    Instead of
    	mark_inode_dirty(inode);
    	if (IS_SYNC(inode))
    		fat_sync_inode(inode);
    
    use this
    	if (IS_SYNC(inode))
    		fat_sync_inode(inode);
    	else
    		mark_inode_dirty(inode);
    
    And if occurs a error, restore the ->i_start and ->i_logstart.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d127375a47a8aed283ad9696a0662a581f5e4014
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:04:46 2005 -0800

    [PATCH] FAT: Remove unneed mark_inode_dirty()
    
    Some mark_inode_dirty() is unneeded. Those are already detached (it's
    not written) or change a ->i_nlink count only (fatfs don't have).
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9627dfaf5ec6261cf81aba526f8f5a87ea981a8c
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:04:30 2005 -0800

    [PATCH] FAT: Remove the multiple MSDOS_SB() call
    
    Since MSDOS_SB() is inline function, it increases text size at each calls.
    I don't know whether there is __attribute__ for avoiding this.
    
    This removes the multiple call.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc359f2093a36e23b2d0a71090b8dedeee576f27
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:04:13 2005 -0800

    [PATCH] FAT: "i_pos" cleanup
    
    The "i_pos" can calculate later, so this makes the "i_pos" when it's needed.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 760b8a24a226866ea6466f97dd68b0cf4fadebc3
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:03:57 2005 -0800

    [PATCH] FAT: make the fat_get_entry()/fat__get_entry() static
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3efd9a5bb2f3984617f02b8e7ca330f2fa3c1e0f
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:03:41 2005 -0800

    [PATCH] FAT: Use fat_remove_entries() for msdos
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3278e910ec8f7b44221396b68f55ec1c4b267e5f
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:03:26 2005 -0800

    [PATCH] FAT: Rewrite fat_add_entries()
    
    In order not to write out the same block repeatedly, rewrite the
    fat_add_entries().
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b13796528b8f08d931a384210144b4a9e29292d3
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:03:09 2005 -0800

    [PATCH] FAT: Allocate the cluster before adding the directory  entry
    
    With this change, ->mkdir() uses the correct updating order.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 391517ecefeecf8ebcab6d02099d24b6fd73dd6b
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:02:54 2005 -0800

    [PATCH] FAT: msdos_add_entry() cleanup
    
    The msdos_add_entry() use similar interface to vfat_add_entry().  And use a
    same timestamp on some operations path.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be3a386a400e0df48e0231b414977c6f44cf444e
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:02:38 2005 -0800

    [PATCH] FAT: msdos_rename() cleanup
    
    Cleans up the msdos_rename(). (use the logic similar to vfat_rename().)
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 262adc8152b1235eea5db1497cec608a9574ff72
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:02:22 2005 -0800

    [PATCH] FAT: Use a same timestamp on some operations path
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d29b92d8f2cc91673d9e45b290e7f5d4c1021729
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:02:06 2005 -0800

    [PATCH] FAT: vfat_build_slots() cleanup
    
    With this, the vfat_build_slots() builds the completely data including the
    timestamp and cluster.  (But this is not using "cluster", it's not complete
    yet)
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9410e6563f12cd3830c8094b4789b35354c8a2dc
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:01:49 2005 -0800

    [PATCH] FAT: Use "struct fat_slot_info" for msdos_find()
    
    The msdos_find() provide the "struct fat_slot_info". Then some cleanups.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9117711fc0deb3f7e015d4c0a029861e43f2a707
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:01:33 2005 -0800

    [PATCH] FAT: Use "struct fat_slot_info" for fat_scan()
    
    Use "struct fat_slot_info" for fat_scan().  But ".." entry can not provide
    valid informations for inode, so add the fat_get_dotdot_entry() as special
    case.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a87a717bbcdd9a96c656445250c25ab63e26e97f
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:01:17 2005 -0800

    [PATCH] FAT: fat_build_inode() cleanup
    
    Just use ERR_PTR() instead of getting the error code by additional
    argument.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b59d996b55555a266714ef6001ca87713c33e3c
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:01:01 2005 -0800

    [PATCH] FAT: Add fat_remove_entries()
    
    This changes the fat_slot_info->nr_slot, now it's total counts which
    include a shortname entry.  And this adds a fat_remove_entries()
    which use the ->nr_slots.
    
    In order not to write out the same block repeatedly,
    fat_remove_entries() was rewritten from vfat_remove_entries().
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae4dc6dfad1348b9de234a11beaf0f6287de7339
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:00:46 2005 -0800

    [PATCH] FAT: Use "struct fat_slot_info" for fat_search_long()
    
    The fat_search_long() provide the "struct fat_slot_info" by this
    change.  So, vfat_find() became to be enough simple, and it just
    returns 0 or error.
    
    And the error check of vfat_find() is also simplify.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab3ae75f9d7609cb14bd1556edb877e4b25b9fe5
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:00:30 2005 -0800

    [PATCH] FAT: "struct vfat_slot_info" cleanup
    
    Add "struct fat_slot_info" for updating data of the directory entries.
    
     1) Rename "struct vfat_slot_info" to "struct fat_slot_info"
     2) Add "de" and "bh" to fat_slot_info instead of using argument.
     3) Replace the "vfat_slot_info + de + bh" by new fat_slot_info
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dc806f7449486d1ff51aafc02cf7c8e463e634f
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 17:00:15 2005 -0800

    [PATCH] FAT: Use "unsigned int" for ->free_clusters and  ->prev_free
    
    This changes ->free_clusters and ->prev_free from "int" to "unsigned int".
    These value should be never negative value (but it's using 0xffffffff(-1) as
    undefined state).
    
    With this changes, fatfs would handle the corruption of free_clusters
    more proper.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60eb24814c255e55da7e07eab3123b7cb5f0b03f
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:59:58 2005 -0800

    [PATCH] FAT: add debugging code to fatent.c
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b6577f013bff14d11f2a44655afc40965b241e8
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:59:42 2005 -0800

    [PATCH] FAT: Rewrite the FAT (File Allocation Table) access  stuff
    
    In order not to write the same block repeatedly, rewrite the FAT entry access
    stuff.
    
    And this separates the "allocate the cluster" and "link to cluster chain"
    operations for expanding the file/dir safely.  (fat_alloc_clusters() allocates
    the cluster, and fat_chain_add() links allocated cluster to the chain which
    inode has.)
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b6225bb5a6adea64439a7dcae938057be769cf4
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:59:25 2005 -0800

    [PATCH] let fat handle MS_SYNCHRONOUS flag
    
    Adds MS_SYNCHRONOUS flag support.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c13dd39595db3824fbee73b4e8c577caf85ca21
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:59:09 2005 -0800

    [PATCH] FAT: fat_readdirx() with dotOK=yes fix
    
    In the case of dotsOK, re-initialization of "ptname" pointer is needed,
    otherwise, "ptname" is pointing the previous start position.
    
    This fixes it.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a48736ed6549608dca6223add76b1680eec3294b
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:58:53 2005 -0800

    [PATCH] FAT: Updated FAT attributes patch
    
    This updates the FAT attributes as well as (hopefully) corrects the handling
    of VFAT ctime.  The FAT attributes are implemented as a 32-bit ioctl, per the
    previous discussions.
    
    Signed-Off-By: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b53beffbb9ea45ca0c55ecde456819551e8a37da
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Wed Mar 9 16:58:38 2005 -0800

    [PATCH] fat: fix writev(), add aio support
    
    With Christoph Hellwig <hch@lst.de>
    
    These patches adds the `-o sync' and `-o dirsync' supports to fatfs.  If user
    specified that option, the fatfs does traditional ordered updates by using
    synchronous writes.  If compared to before, these patches will show a
    improvement of robustness I think.
    
    `-o sync'    - writes all buffers out before returning from syscall.
    `-o dirsync' - writes the directory's metadata, and unreferencing
                   operations of data block.
    
        remaining to be done
             fat_generic_ioctl(), fat_notify_change(),
    	 ATTR_ARCH of fat_xxx_write[v],
    	 and probably, filling hole in cont_prepare_write(),
    
    NOTE: Since fatfs doesn't have link-count, unfortunately ->rename() is
    not safe order at all.  It may make the shared blocks, but user
    shouldn't lose the data by ->rename().
    
    If you test this, please use the dosfstools at
    
    	http://www.zip.com.au/~akpm/linux/patches/stuff/fatfsprogs.tar.bz2
    
    This is fixing several bugs of dosfstools.  And "2/29" patch from hpa adds new
    ioctl, the attached archive is also including the commands for testing it.
    
    
    This patch fixes vectored write support on fat to do the nessecary
    non-standard action done in write() aswell.
    
    Also adds aio support and makes read/write wrappers around the aio
    version.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f18ceec7bd65af3da942634a2c386165af25969e
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Wed Mar 9 16:58:22 2005 -0800

    [PATCH] nfs4: Error checking on the results of nfsd4_lookupcred()
    
    Removing the spurious (!clnt) check, as in the following, will also simplify
    that conflict resolution a bit.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 131b7c29ea486df7949f90065c55abb06d746612
Author: gam3@gam3.net <gam3@gam3.net>
Date:   Wed Mar 9 16:58:06 2005 -0800

    [PATCH] Fix error reported by nfsd which it gets ETXTBSY
    
    ETXTBSY doesn't have a direct anaolog in NFS, so just map it to nfserr_io.
    
    As this is the default error code this does not change the operation of nfsd.
    It only reduces logging.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 554cfd4150703ecabe78b4d6d24077880b168ef6
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:57:51 2005 -0800

    [PATCH] nfsd: replace schedule_timeout() with msleep()
    
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbc42ec016d95f1b4e9240ab98539dc5c864c044
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:57:36 2005 -0800

    [PATCH] nfsd4: eliminate unnecessary remove_lease
    
    Get rid of remove_lease, use setlease() with F_UNLCK
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 690589732d253ffbfef15bb4262a47616cc027a6
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:57:19 2005 -0800

    [PATCH] nfsd4: move delegation decisions to lock_manager callbacks
    
    Remove nfs4_check_deleg_recall().  Move its checks into __setlease() via two
    new lock_manager callbacks, fl_mylease and fl_change, so that all leases (not
    just NFSv4 lease as with nfs4_check_deleg_recall) are checked.  Default
    implementations of fl_mylease and fl_change are provided for the sake of the
    fcntl_setlease interface.  Both callbacks must always be defined.
    
    fl_mylease:
    
       for the NFSv4 server, this check is used to see if an existing lease
       comes from the same client.  For the fcntl_setlease interface, the existing
       logic is preserved.  the fl_mylease check sees if the existing lease is
       from the input filp.
    
    fl_change: called if the fl_mylease returns true
    
       the NFSv4 server does not hand out a delegation to a client that already
       has one.  -EAGAIN is returned.  Otherwise lease_modify is used.  For the
       fcntl_setlease interface, the exisiting logic is preserved: The callback
       used in lease_modify().
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6399c163142ffcdec44cd9a5920c5a4d622903a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:57:03 2005 -0800

    [PATCH] locks: remove unnecessary BUG()
    
    We get a NULL dereference here anyway, no need to BUG() explicitly.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77340644799689d3cfa72763c05abaa125fb99b8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:56:47 2005 -0800

    [PATCH] nfsd4: fix_release_state_owner prototype
    
    Note that the second parameter is unused.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb1e8963fceb38479a0e48b6231904641334e45b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:56:31 2005 -0800

    [PATCH] nfsd4: fix delegation refcount leak
    
    It is the responsibility of the code that runs in the do_recall thread to drop
    the reference to the delegation.  So if we fail to run that thread, then we
    need to do it ourselves here.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 846045cfc1491e83ba8058c9a7d79a8b25a5ceb3
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:56:15 2005 -0800

    [PATCH] nfsd4: remove dl_state
    
    The dl_state flag isn't actually useful.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aac8197f95cccc6463a5de05d3c05d3d561da5b8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:55:59 2005 -0800

    [PATCH] nfsd4: allow io to use deleg stateid file
    
    Allow io using a delegation stateid to proceed without the need to reopen the
    file, as is done already with open stateid's.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56678f3300a31e5fba03efc62d2f135d06d1e123
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:55:43 2005 -0800

    [PATCH] nfsd4: fix sleep under spinlock
    
    We shouldn't be calling release_deleg under a spinlock.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95d1c9e1155a486741004886cc5a949429ee2f37
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:55:27 2005 -0800

    [PATCH] nfsd4: fix delegation filp sharing
    
    The st_vfs_file pointer is set when the open that originally got the delegation
    is closed, and then in release_deleg we attempt to distinguish between the case
    when the original open has been closed and when it hasn't.  The resulting logic
    is complicated and buggy.
    
    It's much simpler just to keep a reference count on the struct file.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68ffd8bac84eef541a1b400e06d61fc0b3371ef3
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:55:11 2005 -0800

    [PATCH] nfsd4: store-file-with-deleg
    
    The only reason we're keeping a pointer to the stateid in the delegation is so
    we can get at st_vfs_file.  So we should just keep a pointer to the struct
    file instead.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9df0b29705dd7afa4758cace561f7024e9d7c8da
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:54:55 2005 -0800

    [PATCH] nfsd4: reorganize release_deleg
    
    Just separate part of release_deleg into a separate function.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b9d4d3c64483478133b3b368e8183db82e1e326
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:54:39 2005 -0800

    [PATCH] nfsd4: fix delegation refcounting
    
    The delegation recall callback is setting the REAP_DELEGATION state when it
    drops the reference count to zero instead of just freeing the thing itself,
    which is needlessly complicated and bug-prone.  It's simpler just to define a
    nfs4_put_delegation() which works in the usual way and have the delegation
    recall code do call that itself.
    
    Eventually I'll convert all the nfsd4 state reference counts to struct krefs
    which will be harder to abuse in this way....
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f143640914217b8133cf2614c0033c030e58e022
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:54:23 2005 -0800

    [PATCH] nfsd4: fix cb-race
    
    We weren't taking the reference count in the delegation recall thread until
    we'd already started the new delegation thread (and possibly returned from the
    break_lease callback).  That's too late.
    
    Also document some assumptions.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d4d8a57589fade947b97a9dc0503415dff28477
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:54:07 2005 -0800

    [PATCH] nfsd4: remove st_vfs_file checks
    
    The st_vfs_file field *must* be non-NULL as long as the stateid is in use, so
    there's no point testing for it, unless we want to just BUG().  But since we'd
    immediately hit a NULL dereference in every case, there's no need even for
    that.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7fd9bb95b8faaf7d9eedbdfa4744fd7c8f4b9e2
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:53:51 2005 -0800

    [PATCH] nfsd4: remove st_vfs_set
    
    Note st_vfs_set is redundant; we can always just check whether st_vfs_file is
    set.
    
    Fix one inconsistency along the way: we were setting st_vfs_file to 0 in one
    case without fput()'ing st_vfs_file.  It doesn't appear there was a need to do
    either one in that case.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b370f788c87d1f8d1c74d39b3cee53c5056ef17
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:53:36 2005 -0800

    [PATCH] nfsd4: fix laundromat delegation reaping
    
    The laundromat is freeing any delegation it finds in the RECALL_COMPLETE
    state.  But note that RECALL_COMPLETE is the state that the delegation recall
    callback leaves the state in.  We shouldn't actually be giving up on the
    delegation till either the client has had a chance to call delegreturn, or the
    lease time has run out.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52283cc5f58b852cf4bdd822b8b728f016ce1f55
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:53:20 2005 -0800

    [PATCH] nfsd4: keep lockowners off perclient list
    
    There's no reason to have the lockowners hang off the same list on the client
    struct as the openowners do; you can always get to the lockowners from their
    original openowners instead.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75ca5e6daca568aa37c2cad91e2d13d707c871d8
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:53:04 2005 -0800

    [PATCH] nfsd4: rename release_stateid_lockowner
    
    The name makes it sounds like the job of this function is to release a single
    lockowner; the plural seems clearer.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d8d931da5eeeeb249efae19012acfaaf885701a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:52:48 2005 -0800

    [PATCH] nfsd4: remove dl_recall_cnt
    
    We don't need dl_recall_cnt any more, we're just using a local variable
    in nfsd4_cb_recall.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f691a02518824acb590264e5c9402aa53b2510f7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:52:33 2005 -0800

    [PATCH] nfsd4: nfs4_cb_recall cleanup
    
    Miscellaneous cleanup including:
    	remove recursion
    	use a local variable instead of dl_recall_cnt
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c585d6f25da479cbc8631844b96090de13fe29e5
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:52:17 2005 -0800

    [PATCH] nfsd4: trivial callback cleanup
    
    Whitespace, etc.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa011dbc9608029089e4f1dc2ffde325bff236c9
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:52:01 2005 -0800

    [PATCH] nfsd4: use sync rpc for delegation recall
    
    Use a synchronous rpc for the delegation recall.  This is simpler and
    avoids putting rpciod to sleep for 2 seconds on retries.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3544095328d863ed4446db25f25b3eca74f0305e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:51:46 2005 -0800

    [PATCH] nfsd4: fix callback cred refcnt leak
    
    The rpc creds we look up in the callback code need puts.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 759c0bc03d63ec9cee6500db0a5db4906f40fa26
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:51:30 2005 -0800

    [PATCH] nfsd4: make nfsd4_cb_recall return void
    
    The return value of nfsd4_cb_recall isn't really used (and the errors we were
    returning were incorrect anyway).
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d19e414a7027dc3e4ec8e56a673dc94a8b0a45f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:51:15 2005 -0800

    [PATCH] nfsd4: remove incorrect kfree from callback
    
    Remove incorrect kfree.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a464620563ebe6b97f1f4695685d38aa7bcb0bcd
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:50:59 2005 -0800

    [PATCH] nfsd4: return callback_ident in callbacks
    
    Pass the callback_ident received in SETCLIENTID to the CB_RECALL rpc.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81ecc8461a53a0f868f629c093ce1cf48485dc9b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:50:43 2005 -0800

    [PATCH] nfsd4: simplify find functions
    
    Fix "find" functions that use return value redundantly.  Calculate hashes on
    demand.  Miscellaneous kernel style.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46f180939a9c5f0335574d284e49b2a87c7d6d0f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:50:28 2005 -0800

    [PATCH] nfsd4: simplify find_openstateowner_str
    
    There's no need to return duplicate information through the return value and an
    argument.  Other minor cleanup.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba3fd7aa64610fddeaabc5bf57f963e12da77d1e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:50:12 2005 -0800

    [PATCH] nfsd4: provide no_cb_path error on renew
    
    If the client was given a delegation, but our callback path to the client has
    since failed for some reason, then our only chance to inform the client of this
    is to return the cb_path_down error next time the client attempts to renew its
    state.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92c8e22c88f54c25c391f32a52397cf467c6c80b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:49:56 2005 -0800

    [PATCH] nfsd4: don't allow unconfirmed renew
    
    Don't bother searching for unconfirmed clients when handling RENEW; a client is
    pretty sick if it's trying to renew state it hasn't even finished acquiring
    yet.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ee83986bd5ebb8fc1d685b5901ff2aad14684d4
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:49:41 2005 -0800

    [PATCH] nfsd4: simplify verify_clientid
    
    Simplify verify_clientid out of existance.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee7ded83f7807091f1a33d73938f11fb75e79288
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:49:25 2005 -0800

    [PATCH] nfsd4: simplify clientid hash table searches
    
    We repeat the same hash table searches in a bunch of places, and keep making
    the mistake of assuming the variable iterating over the list will be NULL when
    the search fails.  Some helper functions here simplify things a bit.
    
    While we're at it, make move_to_confirmed take just a clp instead of making the
    caller compute the hash.  This means we sometimes have to compute the hash
    multiple times, but it's only an &, so no big deal.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 666d0944a00f7d8143bccedefaa1fb2e0bbe0bd9
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:49:09 2005 -0800

    [PATCH] nfsd4: fix nfs4_check_delegmode()
    
    Inline nfs4_check_delegmode, replace & by &&, remove incorrect check. (Note
    that it's fine to read using the stateid for a write delegation.)
    
    While we're at it, the status return logic seems like overkill for one simple
    check.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a2ac33926db19c18ab6d0c9230198053b726e41
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:48:54 2005 -0800

    [PATCH] nfsd4: remove unnecessary check in find_delegation_stateid
    
    We would have oopsed some time ago if either of these parameters were NULL.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79a1c2d2b630dfa22bceefe2e38f57e935c8a944
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:48:38 2005 -0800

    [PATCH] nfsd4: miscellaneous delegation fixes
    
    Don't hand out a delegation to a client that already has one.
    
    Minor simplification and reformatting.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acaf31412e08649596a937c28b1f0d845b5bc510
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:48:22 2005 -0800

    [PATCH] nfsd4: simplify open_delegation 2
    
    Simplify logic in nfs4_open_delegation, fix a small bug on allocation failure.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6d7637dac77f5587f57ee158c3d73cc4b7cab5c
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:48:07 2005 -0800

    [PATCH] nfsd4: simplify open_delegation
    
    The DONT_DELEGATE flag is superfluous.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6eef1c50723d3455a3ac270f3986db646cfd846e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:47:51 2005 -0800

    [PATCH] nfsd4: do callback replays by hand
    
    Turn off rpc layer timeout replay for the NFSv4 server callback client.
    Rely on manual replay in nfs4_cb_recall_done instead.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af1830280fa39218ccb8b31cb642db3d4b4c2ade
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:47:35 2005 -0800

    [PATCH] nfsd4: don't release nfs4_file with associated delegations
    
    Only release a struct nfs4_file if there are no associated delegations.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa88b1ad44c87c3f18a896c96711db89b5b84679
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:47:19 2005 -0800

    [PATCH] nfsd4: miscellaneous open cleanup 3
    
    More minor logic cleanup.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc6f8b88b9c09dad1124080243e4e20599f72342
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:47:03 2005 -0800

    [PATCH] nfsd4: miscellaneous open cleanup 2
    
    Replace sequence of if {...  goto} 's by if-elseif's, other minor
    simplification of logic.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da0c38ec604e6be09dc4b51e3adbb8dbe510624a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:46:48 2005 -0800

    [PATCH] nfsd4: miscellaneous open cleanup
    
    Minor trivial cleanup, mostly whitespace.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99a9f594f96ae4478d5a36d1fc249508068543d7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:46:32 2005 -0800

    [PATCH] nfsd4: use existing open instead of reopening on read and write
    
    Use the struct file * obtained in nfsd4_open for nfsd_read and nfsd_write when
    available.
    
    To do this we add a struct file * argument to nfsd_read and nfsd_write.  If a
    struct file is passed in, nfsd_read and nfsd_write will use it, doing just an
    access check instead of an open and close.  If the new argument is NULL, they
    will fall back on the old behaviour.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d4ef76cacef291d7ee95f8758880cfb57f2d3b7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:46:17 2005 -0800

    [PATCH] nfsd4: allow some reads and writes during the grace period
    
    Allow READ and WRITE during the grace period on OPEN or LOCK state that has
    been reclaimed, for files for which mandatory locking is not in force.  (Reads
    and writes to files with mandatory locking must be delayed until we're sure
    all the other clients have had a chance to recover locks.)
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23b087697049fe5a1ed51419f7d2379c86a8a228
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:46:01 2005 -0800

    [PATCH] nfsd4: move special stateid processing
    
    Move special stateid processing to nfs4_preprocess_stateid_op().  Also make
    stateid processing for setattr the same as that for write.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2eeb8d7bb2cf35baf87556a9d1d4b32795f375d3
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:45:45 2005 -0800

    [PATCH] nfsd4: reclaim cleanup
    
    Remove unnecessary fields in the nfs4_client_reclaim structure.  Initialize
    reclaim_str_hashtbl_size and increment it inside of nfs4_client_to_reclaim.
    Modify client_to_reclaim() in preparation for reboot recovery.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecaf29442794c10bfc05f14b50d0572b7401839c
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:45:29 2005 -0800

    [PATCH] nfsd4: cbnull refcount leak
    
    Properly decrement refcount on failure in nfsd4_probe_callback.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4cdabcbee4cf9497b828359d434cdc1432d85d71
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:45:14 2005 -0800

    [PATCH] nfsd4: Fix oops on nfsd4 shutdown
    
    Fix Oops at nfsd shutdown.  Reap any open nfs4_stateowners remaining on the
    close_lru hash list prior to reaping nfs4_clients at shutdown.
    
    Signed-off-by: Andy Adamson <andros@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7372cfb817809e37d849ce7af8be4afcabd51b12
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:44:58 2005 -0800

    [PATCH] nfsd4: remove stateowner debug counters
    
    Get rid of these debug counters.  Since they're no longer necessarily
    incremented under state lock, we'd need to convert them to atomic_t to
    guarantee them correct.  It doesn't seem worth it.
    
    Also, the debug checks in kmem_cache_destroy() should be sufficient for at
    least one of the purposes the debugging counters existed for--we'll get a
    dump_stack() if there are still stateowners left when we shut down.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cc9438be4ccfa96348bdbd3b6fb419b5387e659
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:44:42 2005 -0800

    [PATCH] nfsd4: create a slab cache for stateowners
    
    Create a slab cache for nfsv4 stateowners.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b0f11fa5d3e5c4114e25ea9b33cb413ed1e0823
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:44:26 2005 -0800

    [PATCH] nfsd4: remove utf8 checking
    
    RFC3530 says NFSv4 filenames are in UTF-8, and that servers "should" reject
    filenames that aren't valid UTF-8.  Currently we do some incomplete UTF-8
    checking, but this turns out to be more of a hindrance than a help--if we
    export a filesystem with non-UTF8 names, things break.  We might be able to
    help things if we had some idea of the exported filesystem's charset and could
    do some translation.  For now, though, the simplest solution by far seems to
    be just to remove the UTF-8 checks, making NFSv4's behaviour just like
    NFSv2/v3's.
    
    Similar problems exist with usernames.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8bbd251671510ebe05fa67f0b5c0345280da2a9
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Wed Mar 9 16:44:10 2005 -0800

    [PATCH] ext3: fix race between ext3 make block reservation and reservation window discard
    
    This patch fixed a race between ext3_discard_reservation() and
    ext3_try_to_allocate_with_rsv().
    
    There is a window where ext3_discard_reservation will remove an already
    unlinked reservation window node from the filesystem reservation tree:
    It thinks the reservation is still linked in the filesystem reservation
    tree, but it is actually temperately removed from the tree by
    allocate_new_reservation() when it failed to make a new reservation from
    the current group and try to make a new reservation from next block
    group.
    
    Here is how it could happen:
    
    CPU 1
    try to allocate a block in group1 with given reservation window my_rsv
    ext3_try_to_allocate_with_rsv(group
    	----copy reservation window my_rsv into local rsv_copy
    	ext3_try_to_allocate(...rsv_copy)
    		----no free block in existing reservation window,
    		----need a new reservation window
    	spin_lock(&rsv_lock);
    
    CPU 2
    
    ext3_discard_reservation
    	if (!rsv_is_empty()
    		----this is true
    	spin_lock(&rsv_lock)
    		----waiting for thread 1
    
    CPU 1:
    
    	allocate_new_reservation
    		failed to reserve blocks in this group
    		remove the window from the tree
    		rsv_window_remove(my_rsv)
    			----window node is unlinked from the tree here
    		return -1
    	spin_unlock(&rsv_lock)
    ext3_try_to_allocate_with_rsv() failed in this group
    group++
    
    CPU 2
    	spin_lock(&rsv_lock) succeed
    	rsv_remove_window ()
    		---------------break, trying to remove a unlinked node from the tree
    	....
    
    
    CPU 1:
    ext3_try_to_allocate_with_rsv(group, my_rsv)
    	rsv_is_empty is true, need a new reservation window
    	spin_lock(&rsv_lock);
    		^--------------- spinning forever
    
    We need to re-check whether the reservation window is still linked to
    the tree after grab the rsv_lock spin lock in ext3_discard_reservation,
    to prevent panic in rsv_remove_window->rb_erase.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d53a4c72ef3c4b95f590a1b6986c3d47346707ad
Author: Mike Miller <mike.miller@hp.com>
Date:   Wed Mar 9 16:43:54 2005 -0800

    [PATCH] cciss: per disk queue support
    
    This patch adds per disk queue functionality.  It seems that the 2.6 kernel
    expects a queue per disk.  If you have multiple logical drives on a controller
    all of the queues actually point back to the same queue.  If a drive is
    deleted it blows us out of the water.
    
    We hold the lock during any queue operations and have added what we call a
    "fair-enough" algorithm to prevent starving out any drive.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71d2385e1299de679c7d191d631f6c0ed3e866bb
Author: Mike Miller <mike.miller@hp.com>
Date:   Wed Mar 9 16:43:39 2005 -0800

    [PATCH] cciss: support for more than 8 controllers
    
    This patch adds support for more than 8 controllers.  If we run out of
    preallocated major numbers we dynamically allocate more.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit feb46ab0c5494133b650774da686eb9e6ff36617
Author: Mike Miller <mike.miller@hp.com>
Date:   Wed Mar 9 16:43:23 2005 -0800

    [PATCH] cciss: new controller support
    
    This patch adds support for 2 new SAS controllers due out this summer.  It
    also bumps the version to 2.6.6.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad1aa7145a35803f94a991bf145785eb6d9ae3be
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Wed Mar 9 16:43:07 2005 -0800

    [PATCH] Hotplug parallel ports
    
    The Mobility docking station provides a PCI-based parallel port.  Since the
    docking station connects via Cardbus, such devices are removable.
    Therefore, track which parallel ports are registered to each PCI device,
    and remove them when the PCI device is removed.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6480aaa10f6a4bdcf1b52b0d101cda725b8a177
Author: David Howells <dhowells@redhat.com>
Date:   Wed Mar 9 16:42:51 2005 -0800

    [PATCH] Properly share process and session keyrings with CLONE_THREAD [try #2]
    
    The attached patch causes process and session keyrings to be shared
    properly when CLONE_THREAD is in force.  It does this by moving the keyring
    pointers into struct signal_struct[*].
    
    [*] I have a patch to rename this to struct thread_group that I'll revisit
    after the advent of 2.6.11.
    
    Furthermore, once this patch is applied, process keyrings will no longer be
    allocated at fork, but will instead only be allocated when needed.
    Allocating them at fork was a way of half getting around the sharing across
    threads problem, but that's no longer necessary.
    
    This revision of the patch has the documentation changes patch rolled into it
    and no longer abstracts the locking for signal_struct into a pair of macros.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13ae0ab182f083877990070b8da8f478f89b7615
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Wed Mar 9 16:42:34 2005 -0800

    [PATCH] Race against parent deletion in key_user_lookup()
    
    I looked at some of the oops reports against keyrings, I think the problem
    is that the search isn't restarted after dropping the key_user_lock, *p
    will still be NULL when we get back to try_again and look through the tree.
    
    It looks like the intention was that the search start over from scratch.
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38d6c5c5a1cf08d5948726071ef7c7781ffe4f7c
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed Mar 9 16:42:18 2005 -0800

    [PATCH] Security contact info
    
    Add security contact info and relevant documentation.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8248793e4eadc827c9a0aed77d2bfd84dce3aa2
Author: Coywolf Qi Hunt <coywolf@gmail.com>
Date:   Wed Mar 9 16:42:01 2005 -0800

    [PATCH] mnt_init() cleanup
    
    At the very beginning in 2.4 days, in mnt_init(), mount_hashtable
    allocation page order was determined at runtime.  Later the page order got
    fixed to 0.  This patch cleanups it.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67baf9aae65e9dfec9cf092089ccad738e17d421
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Wed Mar 9 16:41:45 2005 -0800

    [PATCH] mips: use c99 initialisers
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33f9cb8a6d393714ab48d0cffc7a97916a99e5ce
Author: Matt Mackall <mpm@selenic.com>
Date:   Wed Mar 9 16:41:31 2005 -0800

    [PATCH] make cond_syscall look right
    
    The current cond_syscall #defines add a semicolon on the end, and then
    folks leave the semicolons off in kernel/sys_ni.c, which confuses editors
    that are language-aware and is just generally bad style.  This sweeps all
    the users and makes sys_ni.c look like normal C code.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a53cdcc725022b36ca94e7acd08ca17d1771076b
Author: Pavel Machek <pavel@suse.cz>
Date:   Wed Mar 9 16:41:13 2005 -0800

    [PATCH] deprecate ACPI S4bios support
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 215897da562abe5ed5a3fc71db7bbaeca32e0ddf
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Wed Mar 9 16:40:58 2005 -0800

    [PATCH] checkstack false positive fix
    
    Randy Dunlap found one case where checkstack reported a false
    positive.  From objdump of efi_stub.o:
       5:   81 ea 00 00 00 c0       sub    $0xc0000000,%edx
    
    With the old code, this was interpreted as a negative number.  The
    output line was:
    0xc0116f5d efi_call_phys:                               1073741824
    
    Randy wanted a change to return the correct number, like this:
    0xc0116f5d efi_call_phys:                               3221225472
    
    adding "or I can just ignore it, like I've been doing for awhile..."
    
    Let's help him with the most sophisticated electronic tools and have
    the script actively ignore this case for him.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9918041c1b450d2bd4ad8b033c197a26788ac034
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Mar 9 16:40:42 2005 -0800

    [PATCH] consolidate the last of the compat sigevent structs
    
    This patch pulls together the compat_sigevent structs.  It also
    consolidates the copying of these structures into the kernel.
    
    The only part of the second union in sigevent that the kernel looks at
    currently is the _tid, so that is the only bit we copy.
    
    This patch depends on my previous two patches "add and use
    COMPAT_SIGEV_PAD_SIZE" and "Consolidate the last compat sigvals".
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba6965f29efa372dd888b4149e785589f66240eb
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Mar 9 16:40:27 2005 -0800

    [PATCH] Consolidate the last compat sigvals
    
    This patch just consolidates the last of the (what should have been)
    compat_sigval_ts.  It also fixes S390 that had a sigval_t in its struct
    compat_siginfo.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2feb6f04d561517b33b91b774561207d7939d983
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Mar 9 16:40:11 2005 -0800

    [PATCH] add and use COMPAT_SIGEV_PAD_SIZE
    
    All the 32 bit architectures (effectively) define SIGEV_PAD_SIZE to be
    ((SIGEV_MAX_SIZE/sizeof(int)) - 3).  So define COMPAT_SIGEV_PAD_SIZE to be
    this and replace SIGEV_PAD_SIZE32 where it is used.  It also needs to be
    used in the definition of struct compat_sigevent as most of the
    architectures would have had it 4 bytes too small in the kernel (since we
    were using SIGEV_PAD_SIZE).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9e697a27f5ca0432289b30cbda83882bdce7643
Author: Stephen C. Tweedie <sct@redhat.com>
Date:   Wed Mar 9 16:39:55 2005 -0800

    [PATCH] invalidate_inode_pages2_range livelock fix
    
    With Andrew Morton
    
    invalidate_inode_pages2_range() can livelock if all the pages in the pagevec
    are outside the end of teh range which we're trying to invalidate.
    
    Fix that up in a similar manner to the truncate_inode_pages_range() handling.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbd24e681028a12fef694e6152aa1f0a8845b9f3
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Mar 9 16:39:39 2005 -0800

    [PATCH] Removing Auvertech TurboPAM ISDN driver
    
    The Auvertech TurboPAM ISDN hardware was never produce and the company do
    not longer exist, so it makes no sense to support this any longer.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Acked-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a00b6a6257c5f5b310f3be88c88d75e99defbe5a
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Mar 9 16:39:21 2005 -0800

    [PATCH] Cleanup version of the hdriver for HFC 4S/8S based cards
    
    This should resolve all the issues from the review and is a big cleanup for
    i4l-hfc-4s-and-hfc-8s-driver.patch.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b4c9f7c60d0ff38972c320648f04f7a76b9ac0a
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Mar 9 16:38:52 2005 -0800

    [PATCH] i4l: HFC-4S and HFC-8S driver
    
    Add a new driver for new ISDN hardware.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bce4e1f0bb633a19931681d6029902f60090b1a
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Mar 9 16:38:35 2005 -0800

    [PATCH] i4l: new hfc_usb driver version
    
    This is an update of the HFC USB ISDN driver, the current one has some bugs
    and support not all HW.  It was already tested as standalone patch for some
    time, so including it should be safe.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65bbbfb688dad3351a96bbdd0b4a69eb81f08e63
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Wed Mar 9 16:38:18 2005 -0800

    [PATCH] uml: Fix rounding bug in tlb flushing
    
    fix_range_common and flush_tlb_kernel_range_common don't work correctly,
    if a PGD (or PUD or PMD) is not present and start_addr (resp. start) is not
    aligned to a PGD boundary (or PUD or PMD boundary).
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 323fb82b31a8f5247e4618a175a8169cdb7f5cd1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:38:02 2005 -0800

    [PATCH] uml: Consolidate tlb flushing code
    
    This patch merges now-identical page table walking and flushing code that had
    been duplicated in skas and tt modes.  The differences had been the low-level
    address space updating operations, which are now abstracted away in the
    respective do_ops functions.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2eb2be7db0cb84589d6b5bd71b3856488bcaa392
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:37:46 2005 -0800

    [PATCH] uml: Speed up tlb flushing
    
    This patch optimizes tlb flushing in a couple of ways to reduce the number
    of system calls made to the host in order to update an address space.
    
    Operations are collected, and adjacent ones which can be merged, are.  This
    includes consecutive munmaps, mprotects with the same permissions, and mmaps
    with the same backing file and permissions and linear in the file.
    
    Second, the munmaps that always preceded mmaps are now done instead of mmap if
    necessary.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cffe64b25c87d2c8dc1e656a0632203fc14effd9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:37:31 2005 -0800

    [PATCH] uml: Remove build dependency on perl
    
    To quote .config into config.c for building the result into the code, use sed
    instead of perl, as requested by one "embedded" UML user (which notes that
    perl is a big requirement, while busybox provides sed which is used in this
    patch).
    
    I've tested that there are only cosmethical differences in the produced
    config.c file, which don't change at all the result (i.e.  "a" is replaced by
    "" "a" at the beginning, which is non-significant).
    
    Reported by, and initial patch provided by, Rob Landley.
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2711b96351e35c807b5c4874fad6dfdd624a424
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:37:15 2005 -0800

    [PATCH] uml: change semaphores to completions
    
    From: Esben Nielsen <simlo at phys au dk>
    
    One of the problems was use of direct architecture specific semaphores (which
    doesn't work under PREEMPT_REALTIME) and in places where a quick (maybe too
    quick) look at the code told me that completions ought to be used.  Therefore
    I changed two semaphores to completions which compiled fine.  I have tried the
    change on 2.6.11-rc2, and it seemed to work, but I have not tested it heavily.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 660f6e317c02bde858d54778bbf4fb0dddefffcc
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:36:59 2005 -0800

    [PATCH] uml: Export gcov symbol based on gcc version
    
    The init function called by gcc when gcov is enabled is __gcov_init or
    __bb_init_func, depending on the gcc version.  Anton is using 3.3.4 and seeing
    __gcov_init.  I'm using 3.3.2 and seeing __bb_init_func, so we need to close
    that gap a bit.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df3090645f1d92ec40c42e6d73f0e5a6a360af33
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:36:44 2005 -0800

    [PATCH] uml: "Hardware" random number generator
    
    This implements a hardware random number generator for UML which attaches
    itself to the host's /dev/random.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a98c04a3b10ab272c72a18a3cd07a8ed14862a7a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:36:26 2005 -0800

    [PATCH] uml: ptrace interface cleanup
    
    From: Bodo Stroesser, mostly:
    
    Gets rid of all inclusions of {sys,linux,asm}/ptrace.h since their effects and
    contents are somewhat distro- and architecture-dependent.
    arch/um/sysdep/ptrace_user is now responsible for providing the system's
    ptrace interfaces to UML.
    
    As such, it is a purely userspace header, and this exposed a couple of places
    where kernel files were including it.  One of them needed MAX_REG_OFFSET, so
    this was provided by adding a new generated header, user-constants.h, which
    includes this.
    
    Also, changed PTRACE_{PEEK,POKE}_USER to _USR since that seems to be more
    standard.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 583d88357183f6338a893b50b18343da7405ac94
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:36:08 2005 -0800

    [PATCH] uml: gix hostfs typo
    
    Fix a typo in the hostfs setgid code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c468a253e062dd30fbf9b0f782013201fdcb0a13
Author: Domen Puncer <domen@coderock.org>
Date:   Wed Mar 9 16:35:53 2005 -0800

    [PATCH] unified spinlock initialization arch/um/drivers/port_kern.c
    
    Unify the spinlock initialization as far as possible.
    
    Signed-off-by: Amit Gud <gud@eth.net>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fe697249911af4a03d21a5f9ad479119b61aab4
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:35:38 2005 -0800

    [PATCH] uml: Make a bunch of driver functions static
    
    Noticed by Frank Sorenson - the methods in arch/um/drivers/tty.c should be
    static.  It turns out that all the channels have the same problem, so these
    are all fixed.  These files export only a structure of function pointers, so
    that structure should be the only externally visible symbol.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34dffb1519f7aa0fe6e4399f30fc30103765222b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:35:22 2005 -0800

    [PATCH] uml: Improve error reporting
    
    This patch adds some errors and warnings where there were none before:
        If someone typos "ubd" as "udb", that is caught and a warning is printed
        If a ubd file can't be opened, that now results in an error message
        If there are more telnet connections to port consoles than there are
    consoles, then a message will appear in the telnet session explaining why
    there is no login prompt.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f635699ff829c724e5cc7a8ca209bb469d02fa30
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:35:06 2005 -0800

    [PATCH] uml: Fix a compile failure
    
    Remove a UML/x86_64 warning (and build failure if CONFIG_MODE_TT is disabled).
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9b4e63b3e6a98e27450cb58d3cbf024c4777bc
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:34:51 2005 -0800

    [PATCH] uml: Remove mm_indirect reference in modify_ldt
    
    Spotted by Al Viro, there was some bogosity in the UML/x86_64 modify_ltd.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b8733dc20b3f4596c1c4b49d1547e50cff598ca
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:34:35 2005 -0800

    [PATCH] uml: Remove useless sys_mount wrapper
    
    um_mount did nothing but turn around and call sys_mount with the same
    arguments.  This makes it useless code, and it has been duly removed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 098973013b1ad6b09373d53303279153d86bb66f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:34:19 2005 -0800

    [PATCH] uml: add a comment explaining pread availability
    
    Prompted by Dave Mielke: This adds a comment explaining why we do not
    define _XOPEN_SOURCE, even though the pread man page says you should.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99171a522b1727672a05bde4ab0b9e0c59d5cb6c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:34:04 2005 -0800

    [PATCH] uml: Make syscall debugging code configurable
    
    This patch makes some debug code in the system call path configurable.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 810f52c675d069b6df76b40db843bba655bca557
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:33:48 2005 -0800

    [PATCH] uml: Clean up the syscall path
    
    This patch removes some useless code from the system call path, and removes
    some debug code, which will reappear in a configurable form in the
    syscall-debug patch.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 223ffc34e69ae7305e715607674920324cc34c53
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Wed Mar 9 16:33:33 2005 -0800

    [PATCH] uml: Code cleanup
    
    Shifting register restore and userspace resume to the beginning of the
    userspace loop, we can remove the identical code done before the loop.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f251318625b1cdc9af2e27ac8c2df1f24368347e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:33:18 2005 -0800

    [PATCH] uml: Fix a shutdown hang caused by a failed ifconfig
    
    The network driver wasn't checking that the host side of an interface had been
    successfully opened before trying to close it at shuwtdown.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc2f204a3090e489c03264b5d63290c380caf5fd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:33:03 2005 -0800

    [PATCH] uml: make the ubd driver recognize letters in device names
    
    ubd_get_config wasn't using the standard device number parser, which caused it
    not to recognize letters.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e61ef4a66f17a7521e4afcc645a144fec96758ea
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:32:48 2005 -0800

    [PATCH] uml: Fix some usercopy confusion
    
    This fixes a couple of copy-user problems spotted by Al Viro.
    
    copy_sc_from_user_tt was doing a copy_from_user to do an in-kernel assignment.
     I commented this, at the request of Chris Wedgewood.  sys_ipc had a void
    *__user ptr which should have been void __user *ptr.  Finally, there were a
    couple of bogus __user annotations on unsigned longs, which were never going
    to be passed into copy_user.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22a5cf6237456f25747a5d4fcfa6f5aa53728429
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:32:32 2005 -0800

    [PATCH] uml: Get rid of uneccessary hostfs build trick
    
    Get rid of the grepping for __st_ino in hostfs, since it doesn't work on
    x86_64 (the grep finds it, but it is ifdefed out), and Al says it's
    unnecessary anyway.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c72df50762b5bf895ece8ecafc173dc728bb88b
Author: tzachar@cs.bgu.ac.il <tzachar@cs.bgu.ac.il>
Date:   Wed Mar 9 16:32:17 2005 -0800

    [PATCH] uml: slirp driver tells the network it's not ethernet
    
    Tell the netdevice code that a slirp device is not ethernet.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24823b089183819e07a9c1ae5e7aa95f962d65e5
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:32:02 2005 -0800

    [PATCH] uml: Update defconfig
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f101b23cefc277eae6e5237dca4a0fefeca4eb0
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 9 16:31:48 2005 -0800

    [PATCH] uml: 2.6.11 updates
    
    This patch makes some small changes that parallel changes in 2.6.11:
    	The csum buffers are now unsigned char.
    	Got rid of an unused define from pgtable-2level.h.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf9f5763ae107f2565cb89aca8f0c9cebf6cc3b8
Author: Coywolf Qi Hunt <coywolf@gmail.com>
Date:   Wed Mar 9 16:31:32 2005 -0800

    [PATCH] remove barrier() in software_resume()
    
    This patch removes the redundant compiler barrier.  As Linus ever said "The
    mb() should make sure that gcc cannot move things around...".
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8461e0c6cb11f70d88fef590348fb24ae92644c3
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Mar 9 16:31:17 2005 -0800

    [PATCH] x86: disable MSI for AMD-8131
    
    The AMD-8131 I/O APIC (device id 1022:7450/7451) does not support message
    signalled interrupts.  Thus, if a device driver attempts to enable msi, it
    will suceed, but interrupts are not actually delivered to the cpu.  The
    Nforce chipsets do not seem to have this limitation.  AMD confirmed that
    MSI mode is unsupported with this APIC.
    
    The following patch adds a flag to pci quirks to detect this and disable
    msi.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellano.co.il>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29b76f6e26f3752ab2900f6c9e0eb2b6d4fb570b
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Wed Mar 9 16:31:01 2005 -0800

    [PATCH] x86: SRAT cleanup: make calculations and indenting level more sane
    
    Using the assumption that all addresses in the SRAT are ascending, the
    calculations can get a bit simpler, and remove the "been_here_before"
    variable.
    
    This also breaks that calculation out into its own function, which further
    simplifies the look of the code.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65b039a8d68cf5dfa39841fd391ec8c0d6bd4011
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Wed Mar 9 16:30:46 2005 -0800

    [PATCH] x86: allow SRAT to parse empty nodes
    
    This patch is to allow the booting of a numa srat base i386 system without
    requiring memory to be in all of it's nodes.  It breaks the assumption that
    all nodes have memory during bootup.
    
    Signed-off-by: Keith Mannthey <kmannth@us.ibm.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c810c5057c4a15fe01a4a3de1b9de0f8a8ecc48
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Wed Mar 9 16:30:30 2005 -0800

    [PATCH] x86: abstract discontigmem setup
    
    memory_present() is how each arch/subarch will tell sparsemem and discontigmem
    where all of its memory is.  This is what triggers sparse to go out and create
    its mappings for the memory, as well as allocate the mem_map[].
    
    By: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7e3b0c7b98b748fe462dd95918dc17afff3bc00
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Wed Mar 9 16:30:15 2005 -0800

    [PATCH] x86: do not unnecessarily memset the pgdats
    
    Both the pgdats and the struct zonelist are zeroed unnecessarily.  The
    zonelist is a member of the pgdat, so any time the pgdat is cleared, so is the
    zonelist.  All of the architectures present a zeroed pgdat to the generic
    code, so it's not necessary to set it again.
    
    Not clearing it like this allows the functions to be reused by the memory
    hotplug code.  The only architecture which has a dependence on these clears is
    i386.  The previous patch in this series fixed that up.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e2af7dbc174d8ddd812c7a1821f930c408b180f
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Wed Mar 9 16:30:00 2005 -0800

    [PATCH] x86: memset the i386 numa pgdats in arch code
    
    The next patch in this series will remove the arch-independent clearing of the
    pgdat's.  This first patch removes the i386 dependency on that behavior.
    
    The new i386 function, remapped_pgdat_init() takes care of initializing the
    pgdats which are finally mapped after paging_init() is done.  The
    zone_sizes_init() call has to occur after the pgdat clearing.
    
    zone_sizes_init() is currently called from the end of paging_init(), because
    that's the first place where the pgdats could have been zeroed.  However,
    zone_sizes_init() really doesn't have anything to do with paging, and probably
    shouldn't be in paging_init().
    
    Moving this call into setup_memory() allows the declaration of
    zone_sizes_init() to change files as well, which means a net removal of one
    #ifdef.  It also provides a handy place to put the new function, far away from
    the paging code that it really has nothing to do with.  Moving files required
    only using highend_pfn inside of the HIGHMEM ifdef, but this saves a line of
    code anyway.
    
    Fixes from: Yasunori Goto <ygoto@us.fujitsu.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4bb2b8a9b848e1e959f8775763e4b43188fa196
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Wed Mar 9 16:29:45 2005 -0800

    [PATCH] ppc64: allow emulation of mfpvr on ppc64 kernel
    
    Allow userspace programs on ppc64 to use the (privileged) mfpvr instruction
    to determine the processor type.  At the moment it emulates the instruction
    to provide the real PVR value, though it could be made to lie in future if
    for some reason we wish to restrict what CPU features userspace uses.
    
    If nothing else this means that some existing ppc32 applications will now
    run on a 64-bit kernel (the 32-bit kernel has long supported this
    emulation).  It will also be necessary for ppc64 perfctr support, where
    userspace requires finer-grained cpu type information than the kernel in
    order to correctly program the performance monitor control registers.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f49d1f28839ad8ec7565a8a80d4e06e205d99d5e
Author: Nathan T. Lynch <ntl@pobox.com>
Date:   Wed Mar 9 16:29:29 2005 -0800

    [PATCH] ppc64: fix xmon build break with non-SMP config
    
      CC      arch/ppc64/xmon/xmon.o
    arch/ppc64/xmon/xmon.c: In function `set_controlled_dabr':
    arch/ppc64/xmon/xmon.c:633: warning: implicit declaration of function `plpar_hcall_norets'
    arch/ppc64/xmon/xmon.c:633: error: `H_SET_DABR' undeclared (first use in this function)
    arch/ppc64/xmon/xmon.c:633: error: (Each undeclared identifier is reported only once
    arch/ppc64/xmon/xmon.c:633: error: for each function it appears in.)
    arch/ppc64/xmon/xmon.c:634: error: `H_Success' undeclared (first use in this function)
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a805eba0523079995533fe6376b1874962ff299e
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Mar 9 16:29:14 2005 -0800

    [PATCH] ppc32: Consolidate Kconfig support for 83xx
    
    Consolidate Kconfig options between arch/ppc/platforms/83xx/Kconfig and
    arch/ppc/Kconfig at Tom Rini's request.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc3149bd0e300d0fcd245aef94cbbd71bc7ec0ab
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Wed Mar 9 16:28:59 2005 -0800

    [PATCH] SELinux: fix selinux_setprocattr
    
    This patch changes the selinux_setprocattr hook function (which handles
    writes to nodes in the /proc/pid/attr directory) to ignore an optional
    terminating newline at the end of the value, and to handle a value
    beginning with a newline or a null in the same manner as a zero length
    value (clearing the attribute for the process and resetting it to using the
    default policy behavior).  This change is to address the divergence from
    POSIX in the existing API, as POSIX says that write(2) with a zero count
    will return zero with no other effect, as well as to simplify use of the
    API from scripts (although that isn't recommended).
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by:  James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78b96d12feb4384b623d4e31876d909983978ebf
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Wed Mar 9 16:28:44 2005 -0800

    [PATCH] SELinux: document boot options
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65e05719ebd5107c82b40f8d2f2dba0964cac61f
Author: Stephen D. Smalley <sds@tycho.nsa.gov>
Date:   Wed Mar 9 16:28:29 2005 -0800

    [PATCH] SELinux: pass requested protection to security_file_mmap/mprotect hooks
    
    This patch adds a reqprot parameter to the security_file_mmap and
    security_file_mprotect hooks that is the original requested protection
    value prior to any modification for read-implies-exec, and changes the
    SELinux module to allow a mode of operation (controllable via a
    checkreqprot setting) where it applies checks based on that protection
    value rather than the protection that will be applied by the kernel,
    effectively restoring SELinux's original behavior prior to the introduction
    of the read-implies-exec logic in the mainline kernel.  The patch also
    disables execmem and execmod checking entirely on PPC32, as the PPC32 ELF
    ABI presently requires RWE segments per Ulrich Drepper.
    
    At present, the read-implies-exec logic causes SELinux to see every
    mmap/mprotect read request by legacy binaries or binaries marked with
    PT_GNU_STACK RWE as a read|execute request, which tends to distort policy
    even if it reflects what is ultimately possible.  The checkreqprot setting
    allows one to set the desired behavior for SELinux, so either the current
    behavior or the original behavior is possible.  The checkreqprot value has
    a compile-time configurable default value and can also be set via boot
    parameter or at runtime via /selinux/checkreqprot if allowed by policy.
    Thanks to Chris Wright, James Morris, and Colin Walters for comments on an
    earlier version of the patch.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d75f9d53dcd74638f4650a41179b78afd56641c2
Author: dgoeddel@trustedcs.com <dgoeddel@trustedcs.com>
Date:   Wed Mar 9 16:28:14 2005 -0800

    [PATCH] SELinux: enhanced MLS support
    
    This patch replaces the original experimental Multi-Level Security (MLS)
    implementation in SELinux with an enhanced MLS implementation contributed
    by Trusted Computer Solutions (TCS).
    
    The enhanced MLS implementation replaces the hardcoded MLS logic with a
    flexible constraint-based system and replaces the compile-time option for
    MLS support with a policy load-time enable based on whether MLS support was
    enabled in the policy when it was built.
    
    The latter change allows a single kernel and policy toolchain to support
    both MLS and non-MLS policies.  Compatibility is still provided as usual
    for existing policies.
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by:  James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0234a620a248e7d2f0a5c0d3af93aa0df1a7a28
Author: Kenneth W. Chen <kenneth.w.chen@intel.com>
Date:   Wed Mar 9 16:27:58 2005 -0800

    [PATCH] fix in slab.c:alloc_arraycache
    
    Kmem_cache_alloc_node is not capable of handling a null cachep pointer as
    its input argument.
    
    If I try to increase a slab limit by echoing a very large number into
    /proc/slabinfo, kernel will panic from alloc_arraycache() because
    Kmem_find_general_cachep() can actually return a NULL pointer if the size
    argument is sufficiently large.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a85d4dd4dc909516ccdd46c8deb824a7cf058a3
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 16:27:42 2005 -0800

    [PATCH] setup_per_zone_lowmem_reserve() oops fix
    
    If you do 'echo 0 0 > /proc/sys/vm/lowmem_reserve_ratio' the kernel gets a
    divide-by-zero.
    
    Prevent that, and fiddle with some whitespace too.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ce890047f4a81022389fd74ad47fd7b0598cbe9
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Wed Mar 9 16:27:26 2005 -0800

    [PATCH] md: fix typo in super_1_sync
    
    Instead of setting one value lots of times, let's set lots of values once
    each, as we should..
    
    This fixes possible inconsistencies that might arise in a version-1 superblock
    when devices fail and are removed.
    
    Usage of version-1 superblocks is not yet widespread and no actual problems
    have been reported.
    
    From: Paul Clements <paul.clements@SteelEye.com>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c5b4f37fab326654ab34152f5e084a85dd3ccf7
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 16:27:11 2005 -0800

    [PATCH] ptep_test_and_clear_dirty typo fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e2c44521d29dbecc6570e90dec759859acfde3c
Author: Brett Russ <russb@emc.com>
Date:   Wed Mar 9 14:44:26 2005 -0500

    [PATCH] AHCI: fix fatal error int handling
    
    I noticed that the AHCI CI (cmd issue) reg wasn't getting cleared
    after error ints resulting in no further commands being successfully
    issued to the port.  This patch fixes.  All that's really needed is
    the 1's complement but I also removed the disabling/enabling of the
    FIS_RX b/c this isn't spec'd as necessary when handling error ints.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5f5cb8b3f8f147e07d7746ddf46712881fb965b5
Merge: fcc545d... 4ca5d14...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 9 13:57:44 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit 4ca5d141df1bf28ec3047f8ef08041bb407452a8
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 9 13:46:24 2005 -0500

    [ACPI] ACPICA 20050309 from Bob Moore
    
    The string-to-buffer implicit conversion code has been
    modified again after a change to the ACPI specification.
    In order to match the behavior of the other major ACPI
    implementation, the target buffer is no longer truncated
    if the source string is smaller than an existing target
    buffer. This change requires an update to the ACPI spec,
    and should eliminate the recent AE_AML_BUFFER_LIMIT issues.
    
    The "implicit return" support was rewritten to a new
    algorithm that solves the general case. Rather than
    attempt to determine when a method is about to exit,
    the result of every ASL operator is saved momentarily
    until the very next ASL operator is executed. Therefore,
    no matter how the method exits, there will always be a
    saved implicit return value.  This feature is only enabled
    with the acpi_gbl_enable_interpreter_slack flag which
    Linux enables unless "acpi=strict".  This should
    eliminate AE_AML_NO_RETURN_VALUE errors.
    
    Implemented implicit conversion support for the predicate
    (operand) of the If, Else, and While operators. String and
    Buffer arguments are automatically converted to Integers.
    
    Changed the string-to-integer conversion behavior to match
    the new ACPI errata: "If no integer object exists, a new
    integer is created. The ASCII string is interpreted as a
    hexadecimal constant. Each string character is interpreted
    as a hexadecimal value ('0'-'9', 'A'-'F', 'a', 'f'),
    starting with the first character as the most significant
    digit, and ending with the first non-hexadecimal character
    or end-of-string."  This means that the first non-hex
    character terminates the conversion and this is the code
    that was changed.
    
    Fixed a problem where the ObjectType operator would fail
    (fault) when used on an Index of a Package which pointed
    to a null package element.  The operator now properly
    returns zero (Uninitialized) in this case.
    
    Fixed a problem where the While operator used excessive
    memory by not properly popping the result stack during
    execution. There was no memory leak after execution,
    however. (Code provided by Valery Podrezov.)
    
    Fixed a problem where references to control methods within
    Package objects caused the method to be invoked, instead
    of producing a reference object pointing to the method.
    
    Restructured and simplified the pswalk.c module
    (acpi_ps_delete_parse_tree) to improve performance and reduce
    code size. (Code provided by Alexey Starikovskiy.)
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 23b721a0f9f2ea2413e3f68e1b82d975ba25eea6
Author: Steve French <stevef@smfhome.smfdom>
Date:   Wed Mar 9 11:13:25 2005 -0600

    [CIFS] Fix compile warning
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 08a0c76882ada299621244e1ca95719b372bd2e6
Author: Steve French <stevef@smfhome.smfdom>
Date:   Wed Mar 9 11:09:25 2005 -0600

    [CIFS] null pointer fixes pointed out by the coverity tool.  Remove redundant
    checks for null SMBs (in the cases where the can not be null) - pointed out by
    the coverity code checker tool as well.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit cc6dcfb7476b017125b6cd275a9305d508294db5
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 9 15:08:09 2005 +0000

    [ARM] Update Assabet and related Neponset default configuration.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 286f256e22376e890bf021aad4ffdd9cd2053892
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 9 14:53:10 2005 +0000

    [ARM] Update RiscPC default configuration
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6a1b925ddace110c6f91df7df0c725faba63d8ab
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 9 05:22:32 2005 -0800

    [NEIGH]: Provide number of probes to userspace
    
    Provides number of probes done so far to userspace,
    quite useful for debugging.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87f3a4c3798949e96c28a9e2bc5f7bb7a7b12001
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Mar 9 05:21:30 2005 -0800

    [NEIGH]: rtnetlink neighbour cleanups
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c99be4f8700899964ca561f93d17da68d8b0478e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Mar 9 05:19:27 2005 -0800

    [NET]: Remove dead skb_iter code
    
    The code to iterate over skb_frags is defined but not used by any
    existing kernel code.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ca2fd0ded87dce681e38795aa69153313558a77
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Mar 9 05:14:27 2005 -0800

    [NET]: Kill dead externs in netdevice.h
    
    The following definitions are historical relics.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c5f2825998c6cd701890d223d8afd1f3ff352a4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 9 05:12:23 2005 -0800

    [NET]: Fix CHECKSUM_HW wrt. packet trimming.
    
    When something, on receive, between a CHECKSUM_HW using
    driver and the code validating skb->csum trims the head
    of the packet we have to reset skb->ip_summed back to
    CHECKSUM_NONE because this kind of change invalidates
    the skb->csum value calculated by the driver.
    
    Various spots handle this properly, but not all.  So
    abstract these actions into helper routines in order
    to avoid code duplication.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ba955f6763e2756d00ca12297a0fcfa0c75ddf1
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Mar 9 04:49:05 2005 -0800

    [XFRM]: Fix ICMP tempsel
    
    The selector ports are initialized to fl_ip_sport/fl_ip_dport instead
    of xfrm_flowi_sport(fl)/xfrm_flowi_dport(fl). This is wrong for ICMP,
    type and code should be stored in sport and dport, in struct flowi both
    are contained in fl_ip_sport.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 25a943a13ceb692aa91381efd5ca096d03fbc908
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 9 04:44:37 2005 -0800

    [SUNHME]: make a struct static
    
    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1cc6b1043b153dbff4458f7ec6ef5f712ea353d2
Author: Herbert PÃ¶tzl <herbert@13thfloor.at>
Date:   Wed Mar 9 04:43:08 2005 -0800

    [NET]: Passcred cleanup in struct sock
    
    struct socket uses a 'bool' (unsigned char) to
    'flag' the pass-credential option for sockets
    (which can be easily replaced by a flag)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6fab4b4501dd8ca0165f6594b0df9ca4618eac10
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 9 04:39:57 2005 -0800

    [IPV6]: Handle loopback restration errors in addrconf_init()
    
    Let's also clean up loopback's ipv6 structure in addrconf_cleanup
    even though it never happens currently :)
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9184092a62bf9c3397e869912d0156aa33b678e8
Author: Wensong Zhang <wensong@linux-vs.org>
Date:   Wed Mar 9 04:34:01 2005 -0800

    [IPVS]: Fix that the WRR scheduler works correctly when server is updated or overloaded
    
    Here is the patch to make the WRR scheduler work correctly when server is
    updated with new weight or marked overloaded. Please check and apply it to
    kernel 2.6.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf611a8d6c3d5bc60edba0331f8d64fa3db62315
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Mar 9 04:29:20 2005 -0800

    [IPVS]: Fix comment typos.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc14a93c9a87bdddba610c57b847bcd3e700ccc2
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Wed Mar 9 04:28:17 2005 -0800

    [NETFILTER]: Reduce call chain length in netfilter (take 2)
    
    This is a second try to fix the long chain call lengths in netfilter.
    The difference with the previous patch is that I got rid of the extra
    argument. I somehow didn't see it could be done without using the 'int
    *ret2' argument.
    
    A comment on the number of arguments to nf_hook_slow: I don't think the
    number of arguments should be decreased. For the bridge-nf code, f.e.,
    the indev argument does not equal (*pskb)->dev (this is an answer to a
    question of Rusty in the old thread).
    
    A comment on the argument change of nf_hook_slow (sk_buff * to sk_buff
    **) and the bad influence on tail call optimization possibilities. From
    the discussion in the old thread it became clear that no tail call is
    generated for the current code. So, I don't see why this is a reason not
    to accept the patch. Furthermore, if gcc ever would become able of doing
    the current code with a tail call, it should be very easy to change the
    code back to the original. In the meantime, I think this patch is the
    best known solution.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c90850ddad7d603be184208bf52e1a1033cab7e
Merge: 1a8fca9... c92af55...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Wed Mar 9 03:04:22 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit c92af55543facd1d6c7d9cc1895c5570fb433ad3
Author: Steve French <stevef@smf-t23.(none)>
Date:   Wed Mar 9 08:46:48 2005 -0600

    [CIFS] fix build break
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 256e6ea95245b6b0fdf57227ab142fa9218af178
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Wed Mar 9 04:37:52 2005 -0600

    [CIFS] Add new cifs posix qfs info level for improved handling of statfs
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 1a8fca91f15f25a9ead2a0f8dd992c7bc095e87d
Merge: 6f8efff... 15a586f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:32:43 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 15a586f0dd966c71c4c119b8c08d824e03e41d41
Merge: 509b994... aede13b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:17:36 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/2.6.11/sh
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 509b994a1dc0e4ae143355071e1bfc4411ac12bf
Merge: 509224bf... d9922d4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:15:11 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/2.6.11/tpm
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 509224bff58976b324276a70ee59a396b431c84a
Merge: 0a98329... e9271e6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:13:52 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/2.6.11/aoe
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 0a983298a21165bd7321bd02de6f166293e2d884
Merge: aa61674... 0c156ba...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:11:30 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/2.6.11/driver
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit aa61674d1a2a026449e00de79d36fb921c13fe16
Merge: 81476ef... ab4da72...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Mar 9 01:10:06 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/2.6.11/debugfs
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 6f8efff7c4974cbcce234d4dd06f801ade8ddc70
Merge: 93be829... 81476ef...
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Wed Mar 9 00:57:03 2005 -0800

    Merge northbeach.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into northbeach.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 81476ef1e6fcef8b21bf415582f8c55a8dca0f70
Merge: 6528b1c... 93db938...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 23:54:39 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 93db938e21a9444cf30977c60ba42a4027c35093
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Mar 9 22:57:45 2005 +0000

    [ARM PATCH] 2526/1: S3C2410 - s3c2400 uart support
    
    Patch from Ben Dooks
    
    Support for s3c2400 uarts in the s3c2410.c driver,
    to go with the s3c2410 and s3c2440 support already
    in there.
    Add PORT_S3C2400 to include/linux/serial_core.h
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6528b1cb65f99eacdcddb68945620f7b701d74d4
Merge: a176bee... ed09476...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 23:51:46 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit ed094760a0ad4f4decc68b059a89c6c54fa3b15f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Mar 9 22:33:29 2005 +0000

    [ARM PATCH] 2521/2: S3C2410 - update documentation
    
    Patch from Ben Dooks
    
    Update info on supported CPUs, add Lucas to
    the list of contributors.
    Add section on adding new machines
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a176beea4ff043b3e8c41319e05e52140c26dcc4
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Wed Mar 9 05:14:14 2005 -0500

    [PATCH] [VIA RHINE] older chips oops on shutdown
    
    I'm oopsing on shutdown on a machine that has a Via Rhine adapter in it:
    
    Unable to handle kernel paging request at virtual address e0803003
    [...]
    EIP is at ioread8+0x2c/0x40
    Call Trace:
     [<c0103d5f>] show_stack+0x7f/0xa0
     [<c0103efa>] show_registers+0x15a/0x1c0
     [<c01040ce>] die+0xce/0x150
     [<c0113406>] do_page_fault+0x356/0x692
     [<c01039ff>] error_code+0x2b/0x30
     [<c026b490>] rhine_shutdown+0x60/0x140
     [<c0253ad9>] device_shutdown+0x89/0x8b
     [<c012461c>] sys_reboot+0xac/0x200
     [<c0102f71>] sysenter_past_esp+0x52/0x75
    
    
    Seems like it is the ioread8 in:
    
            /* Hit power state D3 (sleep) */
            iowrite8(ioread8(ioaddr + StickyHW) | 0x03, ioaddr + StickyHW);
    
    that fails. StickyHW is 0x83. lspci says:
    
    0000:00:07.0 Ethernet controller: VIA Technologies, Inc. VT86C100A [Rhine] (rev 06)
            Flags: bus master, medium devsel, latency 32, IRQ 18
            I/O ports at ec00 [size=128]
            Memory at dfffff80 (32-bit, non-prefetchable) [size=128]
    
    In other words, it's trying to read outside of the I/O range (0x80),
    which matches the fauling address.
    
    I'm guessing my chip revision doesn't support WOL, it's a crappy noname
    card.
    
    It does seem as if rhine_power_init checks quirks for rqWOL before
    touching any registers. Should rhine_shutdown do the same? Proposed
    patch below, which resolves the problem on my system.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 93a1f69a2f52e4b570196582599e2dd691e5c70b
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 9 05:12:50 2005 -0500

    [PATCH] sis900 kernel oops fix
    
    From: Herbert Xu <herbert@gondor.apana.org.au>
    
    Fix bug #4223.
    
    OK, this happened because we got preempted before sis900_mii_probe
    finished setting the sis_priv->mii.  Theoretically this can happen
    with SMP as well but I suppose the number of SMP machines with sis900
    is fairly small.
    
    Anyway, the fix is to make sure that sis900_mii_probe is done before
    the device can be opened.  This patch does it by moving the setup
    before register_netdevice.
    
    Since the netdev name is not available before register_netdev, I've
    changed the relevant printk's to use pci_name instead.  Note that
    one of those printk's may be called after register_netdev as well.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0c156ba8ede6d99bd1738d7d987d9d58f65d0aa9
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:41:29 2005 -0800

    [PATCH] class: add a semaphore to struct class, and use that instead of the subsystem rwsem.
    
    This moves us away from using the rwsem, although recursive adds and removes of class devices
    is not yet possible (nor is it really known if it even is needed.)  So this simple change is
    done instead.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d32accb04cc6c42c61fe9e9641a176c00cdd1cb8
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:39:09 2005 -0800

    [PATCH] sysdev: remove the rwsem usage from this subsystem.
    
    If further finer grained locking is needed, we can add a lock to the sysdev_class to
    lock the class drivers list.  But if you do that, remember the global list also is still
    there and needs to be protected.  That's why I went with a simple lock for everything.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11cdd9aacec31f2dcb45f7d22409088d10516b9d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:35:31 2005 -0800

    [PATCH] sysdev: fix the name of the list of drivers to be a sane name
    
    Heh, "global_drivers" as a static...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ab4da7256662fa6e57f03e8d903d757de10e9a24
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:24:27 2005 -0800

    [PATCH] debugfs: fix bool built-in type.
    
    Thanks to Alessandro Rubini <rubini@gnudd.com> for pointing this out.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c29047a19b688cb3a548f88aa5eb7de9ba3a5eb9
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:24:07 2005 -0800

    [PATCH] debufs: make built in types add a \n to their output
    
    Thanks to Alessandro Rubini <rubini@gnudd.com> for pointing this out.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 66928d6cf6bc7ae31f2c465c570a23fe3b1a1a31
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 23:06:02 2005 -0800

    [PATCH] kmap: remove usage of rwsem from kobj_map.
    
    This forces the caller to provide the lock, but as they all already had one, it's not a big change.
    It also removes the now-unneeded cdev_subsys.  Thanks to Jon Corbet for reminding me about that.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aede13bd09150254f56943e9a9a246b3de9d0214
Merge: 60ba96e... 8414a60...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 20:18:20 2005 -0800

    Merge gregkh@kernel.bkbits.net:linux/2.6.11/sh
    into suse.de:/home/greg/linux/BK/do/sh-2.6

commit 9ddbb23b9490327011d99f85fbec497a9eb30cc9
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 20:17:18 2005 -0800

    [PATCH] USB: move usb core to use class_simple instead of it's own class functions.
    
    This is needed if the class code is going to be made easier to use, and it makes the code
    smaller and easier to understand.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8414a60dbedd9862ee51ab2c6936504890d2b7bc
Author: Paul Mundt <paul.mundt@nokia.com>
Date:   Tue Mar 8 20:14:18 2005 -0800

    [PATCH] Add SuperHyway bus subsystem
    
    Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 60ba96e546da45d9e22bb04b84971a25684e4d46
Author: David Howells <dhowells@redhat.com>
Date:   Tue Mar 8 18:25:02 2005 -0800

    [PATCH] rwsem: Make rwsems use interrupt disabling spinlocks
    
    The attached patch makes read/write semaphores use interrupt disabling
    spinlocks in the slow path, thus rendering the up functions and trylock
    functions available for use in interrupt context.  This matches the
    regular semaphore behaviour.
    
    I've assumed that the normal down functions must be called with interrupts
    enabled (since they might schedule), and used the irq-disabling spinlock
    variants that don't save the flags.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Tested-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9271e60ab499e188440eda38a8406c4328c3e70
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Tue Mar 8 18:22:12 2005 -0800

    [PATCH] aoe: drivers/block/aoe/aoechr.c cleanups
    
    Adrian Bunk <bunk@stusta.de> writes:
    
    > This patch contains the following cleanups:
    > - make the needlessly global struct aoe_fops static
    > - #if 0 the unused global function aoechr_hdump
    
    Thanks for the patch.  The original patch leaves the prototype for
    aoechr_hdump in aoe.h, but since this function is just for debugging,
    it seems better to just take both prototype and definition out.
    
    
    remove aoechr_hdump
    make aoe_fops static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0106946073353afed60205931db39c904f769e66
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Tue Mar 8 18:21:52 2005 -0800

    [PATCH] aoe status.sh: handle sysfs not in /etc/mtab
    
    Suse 9.1 Pro doesn't put /sys in /etc/mtab.  This patch makes the
    example aoe status.sh script work when sysfs is mounted but `mount`
    doesn't mention sysfs.
    
    
    aoe status.sh: handle sysfs not in /etc/mtab
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c9c39d9615da4e9cbd64bcaaf55690c2a5094c1e
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Tue Mar 8 18:21:33 2005 -0800

    [PATCH] aoe: fail IO on disk errors
    
    This patch makes disk errors fail the IO instead of getting logged and
    ignored.
    
    
    Fail IO on disk errors
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94955ede975b594ccf612d840cc4d69fb82820ef
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Tue Mar 8 18:21:15 2005 -0800

    [PATCH] aoe: update documentation for udev users
    
    Bodo Eggert <7eggert@gmx.de> writes:
    
    > Ed L Cashin <ecashin@coraid.com> wrote:
    >
    >> +if=A0test=A0-z=A0"$conf";=A0then
    >> +=A0=A0=A0=A0=A0=A0=A0=A0conf=3D"`find=A0/etc=A0-type=A0f=A0-name=A0udev=
    .conf=A02>=A0/dev/null`"
    >> +fi
    >> +if=A0test=A0-z=A0"$conf"=A0||=A0test=A0!=A0-r=A0$conf;=A0then
    >> +=A0=A0=A0=A0=A0=A0=A0=A0echo=A0"$me=A0Error:=A0could=A0not=A0find=A0rea=
    dable=A0udev.conf=A0in=A0/etc"=A01>&2
    >> +=A0=A0=A0=A0=A0=A0=A0=A0exit=A01
    >> +fi
    >
    > This will fail and print
    > ---
    > bash: test: etc/udev.conf: binary operator expected
    > ---
    > if there is more than one udev.conf.
    >
    > Fix: Always put quotes around variables.
    
    Thanks.  With the changes below, it still will complain if it finds
    more than one udev.conf, but only if /etc/udev/udev.conf doesn't
    exist.
    
    Quote all shell variables, and use /etc/udev/udev.conf if available.
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ea2e6956aee6195c1e47c9e2fe931049afd5076
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Tue Mar 8 18:20:56 2005 -0800

    [PATCH] aoe: add documentation for udev users
    
    add documentation for udev users
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 41768f5a90712570dbd69a32fcef02d5eeaa2650
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Tue Mar 8 18:20:37 2005 -0800

    [PATCH] AoE warning on 64-bit archs
    
    I just accidently built AoE on x86-64 and it emits a warning
    due to conversion of types of different size, trivial fix:
    
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9922d49975b818a40b0e721fd4ea513bb950a76
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 8 18:13:34 2005 -0800

    [PATCH] tpm-build-fix
    
    drivers/char/tpm/tpm.c: In function `show_pcrs':
    drivers/char/tpm/tpm.c:228: warning: passing arg 1 of `tpm_transmit' from incompatible pointer type
    drivers/char/tpm/tpm.c:238: warning: passing arg 1 of `tpm_transmit' from incompatible pointer type
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 01050bb759f0b63d1de4fa729d3948483e9fdf40
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 8 18:13:15 2005 -0800

    [PATCH] tpm_atmel build fix
    
    drivers/char/tpm/tpm_atmel.c:131: unknown field `fops' specified in initializer
    drivers/char/tpm/tpm_atmel.c:131: warning: missing braces around initializer
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6a54f08e636b3fce5970316a73c3c4a19a909525
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 8 18:12:56 2005 -0800

    [PATCH] tpm_msc-build-fix
    
    With older gcc's:
    
    drivers/char/tpm/tpm_nsc.c:238: unknown field `fops' specified in initializer
    drivers/char/tpm/tpm_nsc.c:238: warning: missing braces around initializer
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48fd33b26f921fd34f7411828e08354f4ffe4c08
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Tue Mar 8 18:12:38 2005 -0800

    [PATCH] tpm: fix cause of SMP stack traces
    
    There were misplaced spinlock acquires and releases in the probe, close and release
    paths which were causing might_sleep and schedule while atomic error messages accompanied
    by stack traces when the kernel was compiled with SMP support. Bug reported by Reben Jenster
    <ruben@hotheads.de>
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4aea4047d75a0677a1a151c678ca236573aac795
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Tue Mar 8 18:12:19 2005 -0800

    [PATCH] Add TPM hardware enablement driver
    
    This patch is a device driver to enable new hardware.  The new hardware is
    the TPM chip as described by specifications at
    <http://www.trustedcomputinggroup.org>.  The TPM chip will enable you to
    use hardware to securely store and protect your keys and personal data.
    To use the chip according to the specification, you will need the Trusted
    Software Stack (TSS) of which an implementation for Linux is available at:
    <http://sourceforge.net/projects/trousers>.
    
    
    Signed-off-by: Leendert van Doorn <leendert@watson.ibm.com>
    Signed-off-by: Reiner Sailer <sailer@watson.ibm.com>
    Signed-off-by: Dave Safford <safford@watson.ibm.com>
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dc01d0035a3efd4e12b4aabf7eaae4d69a263978
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 18:00:20 2005 -0800

    [PATCH] kref: make kref_put return if this was the last put call.
    
    This is needed for the upcoming klist code from Pat.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d24eff04157b00248c2fa90883de1b966c859ca7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 17:59:49 2005 -0800

    [PATCH] sysdev: make system_subsys static as no one else needs access to it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 181dfb4cef2cf62ea71bdc17a52073f6f02d5bfe
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 17:53:28 2005 -0800

    [PATCH] kset: make ksets have a spinlock, and use that to lock their lists
    
    Do this instead of using the rwsem of a subsys.
    Smaller, faster, and I'm trying to get rid of the rwsem in the subsys.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 199c50aa72e7e04aa63b797996b8ea8e320a6de2
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:53:08 2005 -0800

    [PATCH] floppy.c: pass physical device to device registration
    
    With this patch the floppy driver creates the usual symlink in sysfs to
    the physical device backing the block device:
    
      $tree /sys/block/
      /sys/block/
      |-- fd0
      |   |-- dev
      |   |-- device -> ../../devices/platform/floppy0
      ...
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4564909bcd6d50b9fd245655518bad2b7c1e7dd0
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:52:48 2005 -0800

    [PATCH] Driver core: add "bus" symlink to class/block devices
    
    On Tue, Feb 15, 2005 at 09:53:44PM +0100, Kay Sievers wrote:
    > Add a "bus" symlink to the class and block devices, just like the "driver"
    > and "device" links. This may be a huge speed gain for e.g. udev to determine
    > the bus value of a device, as we currently need to do a brute-force scan in
    > /sys/bus/* to find this value.
    
    Hmm, while playing around with it, I think we should create the "bus"
    link on the physical device on not on the class device.
    
    Also the current "driver" link at the class device should be removed,
    cause class devices don't have a driver. Block devices never had this
    misleading symlink.
    
     From the class device we point with the "device" link to the physical
     device, and only the physical device should have the "driver" and the
     "bus" link, as it represents the real relationship.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db36587d7fea5d9fba0e85a10b82ef134db81aab
Author: Mike Waychison <michael.waychison@sun.com>
Date:   Tue Mar 8 17:52:29 2005 -0800

    [PATCH] driver core: clean driver unload
    
    Get rid of semaphore abuse by converting device_driver->unload_sem
    semaphore to device_driver->unloaded completion.
    
    This should get rid of any confusion as well as save a few bytes in the
    process.
    
    Signed-off-by: Mike Waychison <michael.waychison@sun.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 67642d35e2172ab56ddc26eeba02a0427d4816c6
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:52:10 2005 -0800

    [PATCH] videodev: pass dev_t to the class core
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 304ee84e6201840b1f973092b02ba28d467bf33e
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:51:50 2005 -0800

    [PATCH] i2c: class driver pass dev_t to the class core
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46b7a7bede8df1752984c8987d42928980dfb929
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:51:30 2005 -0800

    [PATCH] usb: class driver pass dev_t to the class core
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit abe26395fab4014299cbda53cc2615de83ea6835
Merge: 9edf0ff... d9795da...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 17:49:06 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit f6f454dda2d6eca8d9147c4ee21951926064babc
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:33:17 2005 -0800

    [PATCH] class_simple: pass dev_t to the class core
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3d2f23a779740f233a2cc077c7dc728bbbfc27c4
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:32:58 2005 -0800

    [PATCH] block core: export MAJOR/MINOR to the hotplug env
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aac136f255575f8bdfb97b63d27525bcc5620938
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Tue Mar 8 17:32:38 2005 -0800

    [PATCH] class core: export MAJOR/MINOR to the hotplug env
    
    Move the creation of the sysfs "dev" file of a class device into the
    driver core. The struct class_device contains a dev_t value now.  If set,
    the driver core will create the "dev" file containing the major/minor
    numbers automatically.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9b723aaac44759ea51c5af243918d2e62ea3f188
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Tue Mar 8 17:32:19 2005 -0800

    [PATCH] driver core: Separate platform device name from platform device number
    
    Separate platform device name from platform device number such that
    names ending with numbers aren't confusing.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d72038c245f18ce9def0f87e66241968b1963693
Author: Dominik Brodowski <linux@dominikbrodowski.de>
Date:   Tue Mar 8 17:32:00 2005 -0800

    [PATCH] cpufreq 2.4 interface removal schedule
    
    Even though these 2.4. interfaces are already gone in Dave Jones' cpufreq
    bitkeeper tree, here's a patch which properly announces it in
    Documentation/feature-removal-schedule.txt:
    
    
    Add meaningful content concerning the removal of deprecated interfaces to
    the cpufreq core.
    
    Signed-off-by: Dominik Brodowski <linux@brodo.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0788b6187de8445ab28ea67c40e729a869c40740
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Tue Mar 8 17:31:40 2005 -0800

    [PATCH] Add 2.4.x cpufreq /proc and sysctl interface removal feature-removal-schedule
    
    Add 2.4.x cpufreq /proc and sysctl interface removal
    to the feature-removal-schedule.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5929ad91e2abd248b07b206cf30c09f5dcbbbfe7
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Tue Mar 8 17:31:21 2005 -0800

    [PATCH] Kobject: remove some unneeded exports
    
    kobject_get_path and kobject_rename are only used by the sysfs core code
    and not aren't really driver-ish code. Remove the unused exports
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9795da7533d783a7bd2b9973ef864f0aa6cc7bd
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Mar 8 16:30:33 2005 -0800

    [PATCH] barrier rework updates
    
    As promised to Andrew, here are the latest bits that fixup the block io
    barrier handling.
    
    - Add io scheduler ->deactivate hook to tell the io scheduler is a
      request is suspended from the block layer. cfq and as needs this hook.
    
    - Locking updates
    
    - Make sure a driver doesn't reuse the flush rq before a previous one
      has completed
    
    - Typo in the scsi_io_completion() function, the bit shift was wrong
    
    - sd needs proper timeout on the flush
    
    - remove silly debug leftover in ide-disk wrt "hdc"
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6365711de73b0e67cf2c8e496300dbfe491d2a8c
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 8 16:13:13 2005 -0800

    [PATCH] PA-RISC irq handling improvements
    
     - Move the bits_wide parameter from txn_alloc_data to txn_alloc_irq.
       It's too late by the time it hits txn_alloc_data(), we can only panic.
       In txn_alloc_irq, we can fail the allocation and continue.
     - Also fix a bug where we'd only allow up to half the interrupts to be
       allocated.  Not a problem for iosapic machines, but might have sucked
       on a really big GSC-based machine.
     - Add missing irq_enter() / irq_exit()
     - Allow interrupt processing to be interrupted by the timer tick so we
       actually account hard interrupts.  Also speed up the handling of CPU
       interrupts by not masking with cpu_eiem again.
     - Remove sufficiently obsolete DEBUG_IRQ code
     - Remove limit on times around the loop.  If we exit the loop while
       interrupts are still pending, we'll only be re-interrupted as soon
       as we exit the function.
     - Remove unnecessary includes
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16b81eccbfaa784f801af8e67cea7e924b572f2f
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 8 16:12:57 2005 -0800

    [PATCH] Improve PA-RISC make configcheck
    
    Fix "make configcheck | fgrep 'not needed' | fgrep parisc"
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28c6150167a30e00ea3bc58d580f0e5376a936d4
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 8 16:12:42 2005 -0800

    [PATCH] ALSA Harmony fixes
    
     - The entire silence buffer is now being filled, instead of just 1/8th of it.
     - The silence buffer is now prepared during initialisation of the driver.
     - snd_pcm_format_size() is missing from the ALSA headers:
       using snd_pcm_format_physical_width() instead.
    
    Signed-off-by: Stuart Brady <sdbrady@ntlworld.com>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f93f6dd3bb43e0ee32a3edf496fb84f74a51ce8
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 8 16:12:28 2005 -0800

    [PATCH] Sparse annotations and cleanup warnings for PA-RISC
    
     - Missing UL on large integers
     - 0/NULL confusion
     - __user annotations
     - C99-style array elements
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6181a0a1999c7d4dd937d7f5234fb62eca68e89
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Tue Mar 8 16:12:13 2005 -0800

    [PATCH] PA-RISC assembler cleanups and fixes
    
     - Convert ldil/ldo to using the load32 macro.
    
    Signed-Off-By: Kyle McMartin <kyle@parisc-linux.org>
    
     - loop on signal delivery like other archs
     - unify VM initialization code for 32/64-bit
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcc545dc266d335b42b96df15d12c23f03f3b5ea
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 15:38:15 2005 -0500

    [ACPI] limit scope of various globals to static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 230584a9d4012c6501454c5175fa2dc41e7371c7
Merge: abed082... d1833bd...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 15:31:00 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit d1833bdaf4b380966686ba201640c6df139179e3
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 15:29:06 2005 -0500

    [ACPI] fix acpi_numa_init() build warning
    
    Signed-off-by: Randy Dunlap <rdddunlap@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit abed08298d429ed348f395a79316e3e46f6ee395
Merge: 5059981... e374d76...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 15:05:45 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit e374d764e0cb86ff87055422fb4fec9458bf394b
Merge: 90907a8... dfc9bcb...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 14:32:09 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit dfc9bcb4570dd86709eda1bd611300fd930a2d6c
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 14:02:51 2005 -0500

    [ACPI] Allow 4 digits when printing PCI segments
    to be consistent with the rest of the kernel.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e7452b6fcf9d37c284c23b61cb6db69d88cae3f8
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 13:59:02 2005 -0500

    [ACPI] Make PCI device -> interrupt link associations explicit,
    
    ACPI: PCI Interrupt 0000:00:0f.2[A] -> Link [IUSB] -> GSI 10 (level, low) -> IRQ 10
    
    Previously, you could sometimes infer an association based on the output
    when an interrupt link is enabled, but when interrupt links are shared
    among several PCI devices, you could only make the inference for the first
    device to be enabled.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8a022b292383bba7e2c3e8735a5b0ff97f49777c
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 8 13:56:24 2005 -0500

    [ACPI] PNPACPI should ignore vendor-defined resources
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1b0e59d69ebd72398d26ac1d329ddc35c8b7d8f6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 08:05:27 2005 -0800

    Linux 2.6.11.2

commit 018c4f0f5fa947caecb8e31360ae20d1ee60561e
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 08:01:53 2005 -0800

    epoll: return proper error on overflow condition
    
    Noted by Georgi Guninski.

commit 5059981773b193dd47126e8f1d65b1f0bacd7d59
Merge: 7c4e441... 7516ebe...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 05:36:15 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/usb-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 7516ebeec375dd9dfacb71cb0f68b5f9e93df11b
Merge: 45d5a24... 9eb205b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 05:34:52 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 9eb205b1470393176a1d7c4c0dcdad025c180b0a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Tue Mar 8 22:13:51 2005 +0000

    [SERIAL] Add PCI state save/restore and PCI power state management
    
    Resolve a problem where a Sony Ericsson GC79 Cardbus device was not
    being correctly resumed across a S3 suspend, as reported by Hendrik
    Hoeth.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c08ef5421d1f2ede953bae38a7244ffa9c1d91ad
Author: vandrove@cz.rmk.(none) <vandrove@cz.rmk.(none)>
Date:   Tue Mar 8 14:24:12 2005 +0000

    [SERIAL] Fix 16550A misdetection
    
    Patch from Petr Vandrovec
    
    XScale detection needs access to Interrupt Enable Register on UART.
    But this register shares position with high byte clock divisor, and
    previous detection steps were leaving clock divisor and not IER
    selected, causing misdetection of all 16550A chips as XScale.
    
    Fix this by disabling access to clock divisor at the end of previous
    detection step, so chip is in same mode after each detection step.
    
    Signed-off-by: Petr Vandrovec

commit 45d5a24033a4a7367f4fe7486b230242d8295779
Merge: ec18d37... ea3cfbd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Mar 8 05:28:18 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit ea3cfbd3d4d3166a7cc7b2126bc649925b7a660c
Author: Tony Lindgren <tony@atomide.com>
Date:   Tue Mar 8 23:44:06 2005 +0000

    [ARM PATCH] 2451/1: OMAP 32KHz timer and 64-bit sched_clock, take 3
    
    Patch from Tony Lindgren
    
    This patch adds support for 32k timer on OMAP 16xx, and 64-bit
    sched clock to the MPU timer.
    This is an update version of ARM patch 2337/1. The 32k timer
    modulo code has been left out, and the dynamic tick (VST) timer
    will be submitted in a separate patch.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 482514b4211493754e1ee6795d375096e2efaae1
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Tue Mar 8 23:25:46 2005 +0000

    [ARM] Fix build error in rtctime.c
    
    Oops, it broke.  Glue the bits back together, replacing yrs with
    tm->tm_year + 1900.
    
    I will not merge untested changes into Linus' tree.
    I will not merge untested changes into Linus' tree.
    I will not merge untested changes into Linus' tree.
    I will not ...
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit deecd43353bb49ae8f97a483d2659798130044fa
Author: Richard Purdie <rpurdie@net.rmk.(none)>
Date:   Tue Mar 8 22:47:59 2005 +0000

    [ARM PATCH] 2522/1: Sharp SCOOP - Add mutliple device support
    
    Patch from Richard Purdie
    
    Sharp SCOOP: Devices with multiple scoop interfaces are now
    available so:
    * add support for mutliple device support to the driver
    * Update corgi, collie and poodle to share the scoop
      device structure so a device can be selected in drivers
    * Update drivers to use the device structures
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d364e1899ceda638bd3e0d59c44a901bd60ff91b
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Mar 8 22:37:20 2005 +0000

    [ARM PATCH] 2517/1: more ixp2000 typo fixes
    
    Patch from Lennert Buytenhek
    
    Another round of ixp2000 typo fixes.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 56b5054febf9c5c40b69602220aa802135ad9bec
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Mar 8 16:14:02 2005 +0000

    [ARM PATCH] 2516/1: S3C2410 - add Acer n30
    
    Patch from Ben Dooks
    
    Add the Acer N30 machine, from Christer Weinigel
    
    Signed-off-by: Christer Weinigel
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 93be829a8640d570956c9d6d000ae2c66d49baea
Merge: 62bc8d6... ec18d37...
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 03:40:52 2005 -0800

    Merge northbeach.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into northbeach.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 62bc8d6415846ac2787e9b8d2434aef022aafa76
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 03:17:53 2005 -0800

    [SPARC64]: Fix inline assembler in init_irqwork_curcpu().
    
    'tmp' cannot be a global register, because we are going
    into the interrupt globals by writing to pstate.
    Since we did not specify any particular register, gcc
    could use anything, and in fact because of this I am
    surprised we did not hit this bug earlier.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b7bede290aa9ec7f6543c6b4aeb6e06064249161
Merge: cc18e05... ec18d37...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Mar 8 03:04:41 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit cc18e059c260b3ea0e881b9746621ab2360f2b28
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Tue Mar 8 06:40:07 2005 -0600

    [CIFS] add new statfs call for posix extensions
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit c763ee48a4616d87a07503378d511d2db75f8d3c
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Tue Mar 8 06:14:21 2005 -0600

    [CIFS] Add support for setting timestaps by handle for NT4 servers
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 9edf0fffb657b48ccf1c36d0a5dea61c4189f048
Merge: cf4a465... 5e03b79...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 8 05:50:28 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/ibmtr
    into pobox.com:/garz/repo/net-drivers-2.6

commit cf4a4652b7052246a1aca9b4d2ca069dff6f9aa4
Merge: e9eb0d8... 09c16a6...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 8 05:49:23 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/viro-isa-ectomy
    into pobox.com:/garz/repo/net-drivers-2.6

commit e9eb0d84e084e92b6d4997c0364597a9cf296752
Merge: ec18d37... 135522d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 8 05:46:55 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 78fe824a63ccb6a0242594c2e92d5a5bb62be358
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 01:02:18 2005 -0800

    [SCSI_ACARD]: Eliminate bogus virt_to_bus() call in atp870u.c
    
    prdaddr is set by the pci_alloc_consistent() call to portably
    specify the DMA address.  There is no need to recompute it
    again using the deprecated virt_to_bus() on the pointer returned
    from pci_alloc_consistent().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cd9cc1059a1344e8dbd145c26be03fa7373f61f5
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 00:56:36 2005 -0800

    [AFS]: Push module_{init,exit}() after function definitions.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 60edee8647a3ed93faf0b6cf04fda9cf2c97e7d0
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 00:54:08 2005 -0800

    [RXRPC]: Push module_{init,exit}() after function definitions.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7010778625235f5718bdf017a44e18bfadc4ce18
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Tue Mar 8 00:50:31 2005 -0800

    [BTTV]: Declare bttvs[] array after struct layout.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8d7c763253b85b5598e5975a5c88b896fefe2110
Author: Bob Montgomery <bob.montgomery@hp.com>
Date:   Tue Mar 8 00:44:21 2005 -0800

    [IA64] fix bad emulation of unaligned semaphore opcodes
    The method used to categorize the load/store instructions in
    arch/ia64/kernel/unaligned.c is masking the entire set of instructions
    described in Table 4-33 of the 2002 Intel Itanium Volume 3: Instruction
    Set Reference.
    
    It's the set of instructions for opcode 4, mbit 0, x bit 1, described
    as Semaphore/Get FR/16-Byte Opcode Instructions.
    
    Because the IA64_OPCODE_SHIFT and IA64_OPCODE_MASK operations ignore
    the x bit, this set of instructions (including cmpxchg, xchg, and
    fetchadd among others) are processed like the corresponding opcode 4,
    mbit 0, x bit 0 instructions.
    
    This means that a cmpxchg.acq with a misaligned pointer will return the
    old value without setting the new one (rendering spin locks as No-ops)
    and that the other instructions also appear not to update memory.
    A cmpxchg.rel will be treated like a ld.s and just retry forever.
    
    The correct behavior for this class of instructions is documented
    in the file as producing failures for user code and kernel oops in
    kernel mode, but the code as implemented does not behave this way.
    
    I have user test code to demonstrate the problem if you would like
    a copy.
    
    The simple fix in this patch has been discussed with Stephane Eranian
    and David Mosberger.  It has the advantage of not requiring the
    redesign of the opcode discrimination in unaligned.c.
    
    Signed-off-by: Bob Montgomery <bob.montgomery@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7c4e441b2362127f0f9198d937623f61289c2b14
Merge: ec18d37... 40f1626...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 8 00:26:54 2005 -0800

    Merge suse.de:/home/greg/linux/BK/bleed-2.6
    into suse.de:/home/greg/linux/BK/usb-2.6

commit b4af6823212d8a12b81a36a00b912098320d7e8f
Merge: 4aac175... fe9232d...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Mar 8 02:56:24 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit 8b46eae95b9d8a182ac434d38eb0c638567f939b
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Mar 7 23:04:50 2005 -0800

    [IA64-SGI] Remove unused cpu_bte_if from pda_s
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 217907ba12bb5dfb7a05d8f0559556abdf1667ee
Author: Jack Steiner <steiner@sgi.com>
Date:   Mon Mar 7 23:02:27 2005 -0800

    [IA64-SGI] [PATCH 2/2] - New chipset support for SN platform
    
    - move a number of fields out of the SN pda & into
      per-cpu data. The pda is ugly & will be deleted.
      This is a first step.  Additional patches will follow.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8223648fd1f8e9d49649728d427fcbeac591c274
Author: Jack Steiner <steiner@sgi.com>
Date:   Mon Mar 7 22:45:52 2005 -0800

    [IA64-SGI] [PATCH 1/2] - New chipset support for SN platform
    
    - add new parameters to a platform-specific SAL
      call to retrieve addition chipset specific info.
    
    - change partition_coherence_id() so that it works
      on platforms using the new chipset.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4aac175781816e972a442bca2d2718ca3e29168e
Merge: 726a118... 4ddd726...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Mar 8 01:18:32 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 612b532e36e103f7affb890f15f67a204153c8fd
Merge: 26a56ee... 5e2bd00...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Mar 7 20:11:37 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/2
    into intel.com:/data/home/aegl/BK/linux-ia64-test-2.6.12

commit 26a56ee7bd02d9582ff478d00a9e9af4614cf873
Merge: ec18d37... 3d5e39c...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Mar 7 20:08:59 2005 -0800

    Merge intel.com:/data/home/aegl/BK/work/0
    into intel.com:/data/home/aegl/BK/linux-ia64-test-2.6.12

commit 5e2bd00949f386b2e0758f2491b0b7253ea8c941
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 19:57:10 2005 -0800

    [IA64] pci.c: PCI root busses need resources
    
    Using the generic setup-bus.c code currently fails on HP's Integrity
    servers because the root busses have their resources set to the whole
    of ioport space and the whole of iomem space, instead of just the ranges
    that are routed to that particular bus.
    
    This patch uses the resources in the pci_windows to provide the ranges
    to each PCI root bus.  In order to do that, I had to change them from
    being bus addresses to system addresses.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ec18d37912f3487a35f4481a48377835b1dae583
Merge: def7102... 7e093c3...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 7 19:37:01 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit def7102a5bd2d60b1a96a58a39846150285d7c77
Merge: a4bc8f1... 09aa336...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 8 04:25:54 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/net-drivers-2.6

commit 7e093c30ae10e1d7fa7f53058a668613995f55eb
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 19:27:48 2005 -0800

    [PATCH] ppc64: fix eeh.h compile warnings
    
    This patch is from Nathan Lynch <ntl@pobox.com>.
    
    Use static inlines instead of #defines for stub functions when
    CONFIG_EEH=n, to eliminate "statement with no effect" warnings with
    some toolchains.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cf0110a321cbc5a587c9d09ea2bf4c8e1be330d
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 19:27:33 2005 -0800

    [PATCH] ppc64: update irq affinity mask when migrating irqs
    
    This patch is from Nathan Lynch <ntl@pobox.com>.
    
    When offlining a cpu, any device interrupts which are bound to the cpu
    have their affinity forcibly reset to all cpus (the default).
    However, the value in /proc/irq/XXX/smp_affinity remains unchanged.
    Since we're doing this while all the other cpus are stopped, it should
    be safe to just call desc->handler->set_affinity and manually update
    the irq_affinity array.
    
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d98d0dd6da6706c6fecd62691152b1f4ae989898
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 19:27:18 2005 -0800

    [PATCH] ppc64: call idle_task_exit with irqs disabled
    
    This patch is from Nathan Lynch <ntl@pobox.com>.
    
    Seeing this very occasionally during cpu hotplug testing:
    
     Badness in slb_flush_and_rebolt at arch/ppc64/mm/slb.c:52
     Call Trace:
     [c0000000ef0efbe0] [c0000000000127a0] .__switch_to+0xa4/0xf0 (unreliable)
     [c0000000ef0efc80] [c000000000050178] .idle_task_exit+0xbc/0x15c
     [c0000000ef0efd10] [c00000000000d108] .cpu_die+0x18/0x68
     [c0000000ef0efd90] [c00000000001023c] .dedicated_idle+0x1fc/0x254
     [c0000000ef0efe80] [c00000000000fc80] .cpu_idle+0x3c/0x54
     [c0000000ef0eff00] [c00000000003aa90] .start_secondary+0x108/0x148
     [c0000000ef0eff90] [c00000000000bd28] .enable_64b_mode+0x0/0x28
    
    idle_task_exit can result in a call to slb_flush_and_rebolt, which
    must not be called with interrupts enabled.  Make the call with
    interrupts disabled.
    
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68417bcd9153595c4ec0d865cdb985676722f2b9
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 19:27:02 2005 -0800

    [PATCH] ppc64: error code cleanups rpa(php,dlpar)
    
    This patch is from John Rose <johnrose@austin.ibm.com>
    
    This patch changes the RPA PCI Hotplug and DLPAR modules to use more
    conventional error values for return codes.  The goal is to make failure
    conditions obvious in the wrapper functions and in the caller code.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76cc4499890dc49723c9fe943e158faceccaac95
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 19:26:46 2005 -0800

    [PATCH] ppc64: error code cleanups for rtas wrappers
    
    This patch is from John Rose <johnrose@austin.ibm.com>
    
    This patch changes the rtas wrapper functions in rtas.c to map RTAS
    failure codes to conventional error values.  The goal is to make
    failure conditions obvious in the wrapper functions and in the caller
    code.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 861cf5205ec5ef2693688f12d19773f73c8a9aeb
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Mar 7 19:23:57 2005 -0800

    [PATCH] ppc64: "invert" dma mapping routines
    
    This patch "inverts" the PPC64 dma mapping routines so that the pci_ and
    vio_ ... routines are implemented in terms of the dma_ ... routines (the
    vio_ routines disappear anyway as noone uses them directly any more).
    
    The most noticable change after this patch is applied will be that the
    flags passed to dma_alloc_coherent will now be honoured (whereas they were
    previously silently ignored since we used to just call
    pci_alloc_consistent).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09aa3367ff6a0bbff7ce35eb770aab23bc9d4213
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Mon Mar 7 18:49:39 2005 -0800

    [PATCH] remove vmalloc guard page knowledge from arch code
    
    Now that we cleaned up the guard page handling in vmalloc, we have to
    remove the p-PAGE_SIZE hack that was put in there for the original guard
    page handling.  This also removes some spurious tab.
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb5b29911b8c7ad7041c4e1a15b0e9b19c7f97da
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:18:29 2005 -0800

    [PATCH] set RLIMIT_SIGPENDING limit based on RLIMIT_NPROC
    
    While looking into the issues Jeremy had with the RLIMIT_SIGPENDING limit,
    it occurred to me that the normal setting of this limit is bizarrely low.
    The initial hard limit setting (MAX_SIGPENDING) was taken from the old
    max_queued_signals parameter, which was for the entire system in aggregate.
    
    But even as a per-user limit, the 1024 value is incongruously low for this.
     On my machine, RLIMIT_NPROC allows me 8192 processes, but only 1024 queued
    signals, i.e.  fewer even than one pending signal in each process.  (To me,
    this really puts in doubt the sensibility of using a per-user limit for
    this rather than a per-process one, i.e.  counted in sighand_struct or
    signal_struct, which could have a much smaller reasonable value.  I don't
    recall the rationale for making this new limit per-user in the first
    place.)
    
    This patch sets the default RLIMIT_SIGPENDING limit at boot time, using the
    calculation that decides the default RLIMIT_NPROC limit.  This uses the
    same value for those two limits, which I think is still pretty conservative
    on the RLIMIT_SIGPENDING value.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a36e7143a21007aee0dac83952ca02a64e5fd5a2
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:18:14 2005 -0800

    [PATCH] show RLIMIT_SIGPENDING usage in /proc/PID/status
    
    Jeremy mentioned the aggravation of not being able to tell when your
    processes are using up signal queue entries and hitting the
    RLIMIT_SIGPENDING limit.  This patch adds a line to /proc/PID/status
    showing how many queue items are in use, and allowed, for your uid.
    
    I can certainly see the appeal of having a display of the number of queued
    items specific to each process, and even the items within the process
    broken down per signal number.  However, those are not things that are
    directly counted, and ascertaining them requires iterating through the
    queue.  This patch instead gives what can be readily determined in constant
    time using the accounting already done.  I'm not sure something more
    complex is warranted just to facilitate one particular debugging need.
    With this, you can see quickly that this particular problem has come up.
    Then examination of each process's SigPnd/ShdPnd lines ought to give you an
    indication of which processes have any queued RT signals sitting around for
    a long time, and you can then attack those programs directly, though there
    is no way after the fact to determine how many queued signals with the same
    number a given process has (short of killing it and seeing the usage drop).
    
    Note you may still have a mystery if the leaking programs are not leaving
    pending RT signals queued, but rather preallocating queue items via
    timer_create.  That usage is not readily apparent in any /proc information.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98e4b451306be8eb831c9ed102cf34c54ef358ea
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:18:00 2005 -0800

    [PATCH] override RLIMIT_SIGPENDING for non-RT signals
    
    I can read POSIX to say that the siginfo_t data must be available when
    `kill' was used, as well.  This patch makes it allocate the siginfo_t, even
    when that exceeds {RLIMIT_SIGPENDING}, for any non-RT signal (< SIGRTMIN)
    not sent by sigqueue (actually, any signal that couldn't have been faked by
    a sigqueue call).  Of course, in an extreme memory shortage situation, you
    are SOL and violate POSIX a little before you die horribly from being out
    of memory anyway.
    
    The LEGACY_QUEUE logic already ensures that, for non-RT signals, at most
    one is ever on the queue.  So there really is no risk at all of unbounded
    resource consumption; the usage can reach {RLIMIT_SIGPENDING} + 31, is all.
    
    It's already the case that the limit can be exceeded by (in theory) up to
    {RLIMIT_NPROC}-1 in race conditions because the bump and the limit check
    are not atomic.  (Obviously you can only get anywhere near that many with
    assloads of preemption, but exceeding it by a few is not too unlikely.)
    This patch also fixes that accounting so that it should not be possible to
    exceed {RLIMIT_SIGPENDING} + SIGRTMIN-1 queue items per user in races.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9046dd435b58f6118d9fa5a9ab2e51ba4e0e9c93
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:17:44 2005 -0800

    [PATCH] make RLIMIT_CPU/SIGXCPU per-process
    
    POSIX requires that the RLIMIT_CPU resource limit that generates SIGXCPU be
    counted on a per-process basis.  Currently, Linux implements this for
    individual threads.  This patch fixes the semantics to conform with POSIX.
    
    The essential machinery for the process CPU limit is is tied into the new
    posix-timers code for process CPU clocks and timers.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d80d30ff8b9122aa51135e942e35566904f32ee5
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:17:29 2005 -0800

    [PATCH] make ITIMER_PROF, ITIMER_VIRTUAL per-process
    
    POSIX requires that setitimer, getitimer, and alarm work on a per-process
    basis.  Currently, Linux implements these for individual threads.  This patch
    fixes these semantics for the ITIMER_PROF timer (which generates SIGPROF) and
    the ITIMER_VIRTUAL timer (which generates SIGVTALRM), making them shared by
    all threads in a process (thread group).  This patch should be applied after
    the one that fixes ITIMER_REAL.
    
    The essential machinery for these timers is tied into the new posix-timers
    code for process CPU clocks and timers.  This patch requires the cputimers
    patch and its dependencies.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1dcd6c2d9b7478baf876725bd356f1b19eeaa65
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:17:13 2005 -0800

    [PATCH] make ITIMER_REAL per-process
    
    POSIX requires that setitimer, getitimer, and alarm work on a per-process
    basis.  Currently, Linux implements these for individual threads.  This patch
    fixes these semantics for the ITIMER_REAL timer (which generates SIGALRM),
    making it shared by all threads in a process (thread group).
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 857b64a59ebac8c9e1d951039cc9fb6a078f8274
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:16:57 2005 -0800

    [PATCH] PANIC in check_process_timers()
    
    It was intended that such things would not be possible because getting into
    that code in the first place should be ruled out while exiting.  That
    removes the requirement for any special case check in the common path.
    But, it was done too late since it hadn't occurred to me that ->live going
    zero itself created a problem.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c3871a8f5244025fe9d846f76994251319e23e4
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:16:42 2005 -0800

    [PATCH] posix-timers: CPU clock support for POSIX timers
    
    POSIX requires that when you claim _POSIX_CPUTIME and _POSIX_THREAD_CPUTIME,
    not only the clock_* calls but also timer_* calls must support the thread and
    process CPU time clocks.  This patch provides that support, building on my
    recent additions to support these clocks in the POSIX clock_* interfaces.
    This patch will not work without those changes, as well as the patch fixing
    the timer lock-siglock deadlock problem.
    
    The apparent pervasive changes to posix-timers.c are simply that some fields
    of struct k_itimer have changed name and moved into a union.  This was
    appropriate since the data structures required for the existing real-time
    timer support and for the new thread/process CPU-time timers are quite
    different.
    
    The glibc patches to support CPU time clocks using the new kernel support is
    in http://people.redhat.com/roland/glibc/kernel-cpuclocks.patch, and that
    includes tests for the timer support (if you build glibc with NPTL).
    From: Christoph Lameter <clameter@sgi.com>
    
      Your patch breaks the mmtimer driver because it used k_itimer values for
      its own purposes.  Here is a fix by defining an additional structure in
      k_itimer (same approach for mmtimer as the cpu timers):
    From: Roland McGrath <roland@redhat.com>
    
    Fix bug identified by Alexander Nyberg <alexn@dsv.su.se>
    
    > The problem arises from code touching the union in alloc_posix_timer()
    > which makes firing go non-zero. When firing is checked in
    > posix_cpu_timer_set() it will be positive causing an infinite loop.
    >
    > So either the below fix or preferably move the INIT_LIST_HEAD(x) from
    > alloc_posix_timer() to somewhere later where it doesn't disturb the other
    > union members.
    
    Thanks for finding this problem.  The latter is what I think is the right
    solution.  This patch does that, and also removes some superfluous rezeroing.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68f35a6b0d81c1e5e47ea05fc787b28a4b99a762
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:16:26 2005 -0800

    [PATCH] posix-timers: fix posix-timers signals lock order
    
    The posix-timers code establishes the locking order that k_itimer locks are
    outside siglocks.  However, when the signal code calls back into the
    posix-timers code to reload a timer after its signal is dequeued, it holds a
    siglock while calling do_schedule_next_timer, which gets a timer lock.
    
    I'm not sure there is any deadlock scenario possible using the real-time POSIX
    timers, because of the intricate arrangement of timer firing and resetting
    synchronization.  But with the new CPU timers code, this deadlock pops up
    right away.  Dropping the siglock here certainly doesn't hurt in the real-time
    timer cases, and it really seems like the right thing here to keep the locking
    details in the interface between signals and posix-timers code comprehensible.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 615594c52a6445394a0e00f9d0b77a7073535558
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:16:12 2005 -0800

    [PATCH] posix-timers: tidy up clock interfaces and  consolidate dispatch logic cleanup
    
    > We do need to do one or the other.  I assume the current indecision is
    > pending some benchmarking work?
    
    That was more or less the idea.  But I kind of figured someone would just
    tell me which one to do without actually doing any timings.  This patch
    (applies after the cpuclocks patch) makes the one decision, to use
    conditional branches rather than indirect calls in the common case.
    That is consistent with what the old code did.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a78331f2168ef1e67b53a0f8218c70a19f0b2a4c
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:15:56 2005 -0800

    [PATCH] posix-timers: high-resolution CPU clocks for POSIX clock_* syscalls
    
    This patch provides support for thread and process CPU time clocks in the
    POSIX clock interface.  Both the existing utime and utime+stime information
    (already available via getrusage et al) can be used, as well as a new
    (potentially) more precise and accurate clock (which cannot distinguish user
    from system time).  The clock used is that provided by the `sched_clock'
    function already used internally by the scheduler.  This gives a way for
    platforms to provide the highest-resolution CPU time tracking that is
    available cheaply, and some already do so (such as x86 using TSC).  Because
    this clock is already sampled internally by the scheduler, this new tracking
    adds only the tiniest new overhead to accomplish the bookkeeping.
    
    Some notes:
    
    This allows per-thread clocks to be accessed only by other threads in the same
    process.  The only POSIX calls that access these are defined only for
    in-process use, and having this check is necessary for the userland
    implementations of the POSIX clock functions to robustly refuse stale
    clockid_t's in the face of potential PID reuse.
    
    This makes no constraint on who can see whose per-process clocks.  This
    information is already available for the VIRT and PROF (i.e.  utime and stime)
    information via /proc.  I am open to suggestions on if/how security
    constraints on who can see whose clocks should be imposed.
    
    The SCHED clock information is now available only via clock_* syscalls.  This
    means that per-thread information is not available outside the process.
    Perhaps /proc should show sched_time as well?  This would let ps et al show
    this more-accurate information.
    
    When this code is merged, it will be supported in glibc.  I have written the
    support and added some test programs for glibc, which are what I mainly used
    to test the new kernel code.  You can get those here:
    
    	http://people.redhat.com/roland/glibc/kernel-cpuclocks.patch
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b9cfca63e45badb418550c61397be4c33022752
Author: Roland McGrath <roland@redhat.com>
Date:   Mon Mar 7 18:15:40 2005 -0800

    [PATCH] posix-timers: tidy up clock interfaces and consolidate dispatch logic
    
    This patch cleans up the posix-timers interfaces for defining clocks, and the
    calls to them.  It fixes some sloppy types, adds a clockid_t parameter to the
    calls that lacked it, and adds a function pointer that can be used for
    clock_getres.  It further cleans up the posix-timers.c code using the k_clock
    function pointers or default functions when no hooks are supplied,
    consolidating repeated code into shared inline functions or macros.  This
    paves the way for adding the CPU clock hooks.
    
    The mmtimer.c changes are untested, but obviously can't be wrong.  There
    aren't any other struct k_clock definitions in the tree, but any others would
    need to be updated for the function signature changes.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6b7a781c51c91dd054e5c437885205592faac21
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Mon Mar 7 18:15:24 2005 -0800

    [PATCH] Speed up /proc/pid/maps
    
    This patch uses find_vma() to improve the read response of /proc/pid/maps.
    It attempts to make the liner scan instead of quadratic walk and utilise rb
    tree.  Reading the file was doing sequential scan from the begining to file
    position all the time, and taking a quite long time.
    
    The improvements came from f_version/m_version and resulting in mmap_cache
    match.  Even if mmap_cache does not match, rb tree walk should be faster
    than sequential walk.  First attempt was to put the state across read
    system calls into private data.  Later got inspiration from wli's pid patch
    using f_version in readdir of /proc.  Other advantage is, f_version will be
    cleared automatically by lseek.
    
    The test program creates 32K maps and splits them into two(limited by
    max_map_count sysctl) using mprotect(0).  After the patch, the read time
    improves from many seconds to milliseconds, and does not grow superlinearly
    with number of read calls.
    
    Help taken from Peter Swain in idea and testing.
    
    After the patch:
    Reading /proc/self/maps:65528 time: 0 secs and   780728 usecs buf:4096 bytes:3811362
    Reading /proc/self/maps:65528 time: 1 secs and   117573 usecs buf:1024 bytes:3866627
    Reading /proc/self/maps:65528 time: 0 secs and   473459 usecs buf: 256 bytes:3866627
    Reading /proc/self/maps:65528 time: 0 secs and   901288 usecs buf:  64 bytes:3866627
    Reading /proc/self/maps:65528 time: 1 secs and   480185 usecs buf:  16 bytes:3866627
    Reading /proc/self/maps:65528 time: 1 secs and   636268 usecs buf:   4 bytes:3866627
    Reading /proc/self/maps:65528 time: 4 secs and   118327 usecs buf:   1 bytes:3866627
    
    Before the patch:
    Reading /proc/self/maps:65528 time: 4 secs and   359556 usecs buf:4096 bytes:3866647
    Reading /proc/self/maps:65528 time:16 secs and   218584 usecs buf:1024 bytes:3866688
    Reading /proc/self/maps:65528 time:67 secs and   870200 usecs buf: 256 bytes:3866688
    Reading /proc/self/maps:65528 time:255 secs and   186934 usecs buf:  64 bytes:3866688
    Small reads never completed.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27f04a42b4bbe52200310cf248086ceb8cf3996e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 18:15:09 2005 -0800

    [PATCH] lib/parser.o linkage fix
    
    It's possible to define .configs in which there are no references in vmlinux
    to lib/parser.o.  So you cannot load any filesystem modules.
    
    Arrange for parser.o to be statically linked.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8331dc5b536aa9ddda6cf46760aa513f6c4f92bc
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:14:53 2005 -0800

    [PATCH] random: Move syncookies to net/
    
    Move syncookie code off to networking land.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3cd1c67c9549bbc29d43a761dc36e261a6b1fb2a
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:14:38 2005 -0800

    [PATCH] random: Simplify and shrink syncookie code
    
    Simplify syncookie initialization
    Refactor syncookie code with separate hash function
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 567200b8fba50573de44bc6f4e71572bb8c5e987
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:14:22 2005 -0800

    [PATCH] random: Kill duplicate halfmd4 in ext3 htree
    
    Replace duplicate halfMD4 code with call to lib/
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ced79bdd08d2826eed9342bda625c8198638e2f
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:14:07 2005 -0800

    [PATCH] random: Move halfmd4 to lib
    
    Move half-MD4 hash to /lib where we can share it with htree.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c1763b3e9d83851919e411c44215dd9b9a2cd69
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:13:51 2005 -0800

    [PATCH] random: Update cryptolib to use SHA fro lib
    
    Drop the cryptolib SHA implementation and use the faster and much smaller SHA
    implementation from lib/.  Saves about 5K.  This also saves time by doing one
    memset per update call rather than one per SHA block.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 221774f3327ec85dd3d8889e764b9f931e11cab2
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:13:35 2005 -0800

    [PATCH] random: Replace SHA with faster version
    
    A replacement SHA routine that's slightly larger, but over twice as
    fast. It's also faster and much smaller than the cryptolib version.
    
                 size      speed    buffer size
    original:    350B      2.3us     320B
    cryptolib:  5776B      1.2us      80B
    this code:   466B      1.0us     320B
    alternate:  2112B      1.0us      80B
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b14bcee300b9d5d54e9093108ad581486dedd28
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:13:20 2005 -0800

    [PATCH] random: Move SHA code to lib/
    
    Move random SHA code to lib/.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da2b005600f472bf1f96b5ed769f200de500ca12
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:13:04 2005 -0800

    [PATCH] random: Cleanup SHA interface
    
    Clean up SHA hash function for moving to lib/
    Do proper endian conversion
    Provide sha_init function
    Add kerneldoc
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a41cad2c45c6c6fadc8c2fe1532f4ad6416dca5
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:12:49 2005 -0800

    [PATCH] random: Kill the SHA variants
    
    Kill the unrolled SHA variants, they're unused and duplicate code in
    cryptoapi.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66a6d19c4c7310cc5dc928fc7d0238b9ef9e9313
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:12:34 2005 -0800

    [PATCH] random: Use them throughout the tree
    
    Move users of private rotl/rotr functions to rol32/ror32.  Crypto bits
    verified with tcrypt.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18684e6e939e136dbbcf0eabcc75d0e9f5e306fa
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:12:18 2005 -0800

    [PATCH] random: Create new rol32/ror32 bitops
    
    Add rol32 and ror32 bitops to bitops.h
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c41f39c1442b3683e522cf65f5d28f037a0c019e
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:12:03 2005 -0800

    [PATCH] random: Remove entropy batching
    
    Rather than batching up entropy samples, resulting in longer lock hold times
    when we actually process the samples, mix in samples immediately.  The trickle
    code should eliminate almost all the additional interrupt-time overhead this
    would otherwise incur, with or without locking.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9eabcc8ada36b4fc26721390cb807270bd66a81
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:11:49 2005 -0800

    [PATCH] random: Clean up hash buffering
    
    Clean up buffer usage for SHA and reseed.  This makes the code more readable
    and reduces worst-case stack usage.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66764b54480941de2b351e47ae1335bc5742d6f4
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:11:32 2005 -0800

    [PATCH] random: Simplify hash folding
    
    Simplify output hash folding
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f0564c1d7eaa81bb61573d6515ea062fa7cb8cf
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:11:15 2005 -0800

    [PATCH] random: Remove dead MD5 copy
    
    Remove long-dead md5 code.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c3ddb148bdf05e877cf8a593923b0366b4439f0
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:11:00 2005 -0800

    [PATCH] random: Break up extract_user
    
    Break apart extract_entropy into kernel and user versions, remove last extract
    flag and some unnecessary variables.  This makes the code more readable and
    amenable to sparse.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 115e3f944bbbc505933c325db406c37b5fb72c0a
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:10:45 2005 -0800

    [PATCH] random: Reseed pointer in pool struct
    
    Put pointer to reseed pool in pool struct and automatically pull entropy from
    it if it is set.  This lets us remove the EXTRACT_SECONDARY flag.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fb4f725ec6e10706343622ccfa93692fc34b42b
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:10:29 2005 -0800

    [PATCH] random: Reservation flag in pool struct
    
    Move the limit flag to the pool struct, begin process of eliminating extract
    flags.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67d53899f7a70ba4ba43874e09c37f6f0b492fec
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:10:15 2005 -0800

    [PATCH] random: Entropy reservation accounting
    
    Additional parameter to allow keeping an entropy reserve in the input pool.
    Groundwork for proper /dev/urandom vs /dev/random starvation prevention.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0af4170fee21d3f02052c7ac839dfde5278a36a
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:10:00 2005 -0800

    [PATCH] random: Catastrophic reseed checks
    
    When reseeding, we must always do a "catastrophic reseed" where we pull enough
    new bits to make the new state unguessable from outputs even if we knew the
    old state.  So we must do the checks against the minimum reseed amount under
    the pool lock in extract_entropy.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 104d7201df7c181ab7ca1ad0a09f5db77afea7e4
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:09:45 2005 -0800

    [PATCH] random: Static sysctl bits
    
    Static initialization for sysctl support
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca99f246560ad1711327b9df31f1e5dcefc92335
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:09:30 2005 -0800

    [PATCH] random: Static allocation of pools
    
    As we no longer allow resizing of pools, it makes sense to allocate and
    initialize them statically.  Remove create_entropy_store and simplify
    rand_initialize.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8099b8c18654502a962fe53c6b72c1b578dec737
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:09:14 2005 -0800

    [PATCH] random: More meaningful pool names
    
    Give pools more meaningful names.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cab4f6cd5d96dfe04b25f9c8461d09bd6d60a7a9
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:08:59 2005 -0800

    [PATCH] random: kill misnamed log2
    
    Remove incorrectly named ln (it's log2!) and x86 asm function and replace with
    fls bitop.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 311666733bbe6264e8b979eee4b761dd0e83e4da
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:08:44 2005 -0800

    [PATCH] rol32 thinko
    
    This thinko..  makes things a bit more arbitrary than we'd like.  I've
    re-audited the other rotate conversions.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85c9d14a7e40cd6427363844bbb7ee2c84fb9675
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:08:28 2005 -0800

    [PATCH] random: kill redundant rotate_left definitions
    
    We've got three definitions of rotate_left.  Remove x86 and duplicate rotate
    definitions.  Remaining definition is fixed up such that recent gcc will
    generate rol instructions on x86 at least.
    
    A later patch will move this to bitops and clean up the other tree users.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae334d0f9a522b1482dbbe0d8bfc9af829f05c67
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:08:13 2005 -0800

    [PATCH] random: kill 2.2 compat waitqueue defs
    
    Remove Linux 2.2 compatibility cruft.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1c48e61c251f57e7a3f1bf11b3c462b2de9dcb5
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:07:57 2005 -0800

    [PATCH] random: kill dead extract_state struct
    
    Remove unused extract_timer_state struct.  It was formerly used to feedback
    zero-entropy timing samples while extracting entropy, but that had a tendency
    to overwhelm the batch processing queue and prevent storing real samples.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f64df3d452d3b9804fc67651409c1cb5ee0b843
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:07:42 2005 -0800

    [PATCH] random: kill memsets of static data
    
    Remove redundant memsets of BSS data
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 763b54f0dafadcd90a22c47da8059215c40fca08
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:07:27 2005 -0800

    [PATCH] random: simplify initialization
    
    Simplify the init code
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41aff7417bb1bfe9341602e4494727519b8e598f
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:07:12 2005 -0800

    [PATCH] random: re-init all pools on zero
    
    - Re-init all three pools in ioctls
    
    - Clear entropy count in init_std_data under a lock
    
    - Add kerneldoc comment
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca60d324b19f1335ceb905f0710a61934240143f
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:06:57 2005 -0800

    [PATCH] random: combine legacy ioctls
    
    ZAPENTCNT is now effectively identical to RNDCLEARPOOL, fall through
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 540d6998549642f54ed4a5d23de5fb78e6d50321
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:06:41 2005 -0800

    [PATCH] random: kill pool clearing
    
    Remove pool clearing.  We've only ever cleared one of three pools and there's
    no good reason to do it.  Instead just reset the entropy count.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88117a25b7b9a6d578cde754535bffc66cec4989
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:06:26 2005 -0800

    [PATCH] random: cleanup waitqueue logic, fix missed wakeup
    
    Original code checked in output pool for missed wakeup avoidance, while waker
    (batch_entropy_process) checked input pool which could result in a missed
    wakeup.
    
    - Move to wait_event_interruptible style
    
    - Delete superfluous waitqueue
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcff6bbff2045dead059a2d8374813915368ec77
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:06:11 2005 -0800

    [PATCH] lib/sort: Use generic sort on x86_64
    
    x86_64 wasn't doing anything special in its sort_extable.  Use the generic
    lib/extable sort.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5d3f322f9fb551cd5321e9ebdaf3a0c53d40956
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:05:55 2005 -0800

    [PATCH] lib/sort: Replace insertion sort in IA64 exception tables
    
    Switch IA64 exception tables to lib/sort.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e9dd5d9cf1868a69fcee884006b555a4d860a11
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:05:40 2005 -0800

    [PATCH] lib/sort: Replace insertion sort in exception tables
    
    Replace exception table insertion sort with lib/sort
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72203f0e32d5d38aa7dd56deedaec3342e94059f
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:05:24 2005 -0800

    [PATCH] lib/sort: Replace qsort in XFS
    
    Point XFS qsort at lib/sort in a way that makes it happy.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f683a166432ff6675885c31d40418430d1d8dec5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 18:05:10 2005 -0800

    [PATCH] sort: link it in
    
    We cannot tell at build time whether some module may want it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c63b6d337534a6b5fb111dc27d0850f535118c0
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:04:55 2005 -0800

    [PATCH] lib/sort: Heapsort implementation of sort()
    
    This patch adds a generic array sorting library routine. This is meant
    to replace qsort, which has two problem areas for kernel use.
    
    The first issue is quadratic worst-case performance. While quicksort
    worst-case datasets are rarely encountered in normal scenarios, it is
    in fact quite easy to construct worst cases for almost all quicksort
    algorithms given source or access to an element comparison callback.
    This could allow attackers to cause sorts that would otherwise take
    less than a millisecond to take seconds and sorts that should take
    less than a second to take weeks or months. Fixing this problem
    requires randomizing pivot selection with a secure random number
    generator, which is rather expensive.
    
    The second is that quicksort's recursion tracking requires either
    nontrivial amounts of stack space or dynamic memory allocation and out
    of memory error handling.
    
    By comparison, heapsort has both O(n log n) average and worst-case
    performance and practically no extra storage requirements. This
    version runs within 70-90% of the average performance of optimized
    quicksort so it should be an acceptable replacement wherever quicksort
    would be used in the kernel.
    
    Note that this function has an extra parameter for passing in an
    optimized swapping function. This is worth 10% or more over the
    typical byte-by-byte exchange functions.
    
    Benchmarks:
    
    qsort:     glibc variant            1189 bytes (+ 256/1024 stack)
    qsort_3f:  my simplified variant     459 bytes (+ 256/1024 stack)
    heapsort:  the version below         346 bytes
    shellsort: an optimized shellsort    196 bytes
    
                             P4 1.8GHz        Opteron 1.4GHz (32-bit)
    size   algorithm      cycles relative        cycles relative
    100:
               qsort:      38682 100.00%	      27631 100.00%
            qsort_3f:      36277 106.63%	      22406 123.32%
            heapsort:      43574  88.77%	      30301  91.19%
           shellsort:      39087  98.97%	      25139 109.91%
    200:
               qsort:      86468 100.00%	      61148 100.00%
            qsort_3f:      78918 109.57%	      48959 124.90%
            heapsort:      98040  88.20%	      68235  89.61%
           shellsort:      95688  90.36%	      62279  98.18%
    400:
               qsort:     187720 100.00%	     131313 100.00%
            qsort_3f:     174905 107.33%	     107954 121.64%
            heapsort:     223896  83.84%	     154241  85.13%
           shellsort:     223037  84.17%	     148990  88.14%
    800:
               qsort:     407060 100.00%	     287460 100.00%
            qsort_3f:     385106 105.70%	     239131 120.21%
            heapsort:     484662  83.99%	     340099  84.52%
           shellsort:     537110  75.79%	     354755  81.03%
    1600:
               qsort:     879596 100.00%	     621331 100.00%
            qsort_3f:     861568 102.09%	     522013 119.03%
            heapsort:    1079750  81.46%	     746677  83.21%
           shellsort:    1234243  71.27%	     820782  75.70%
    3200:
               qsort:    1903902 100.00%	    1342126 100.00%
            qsort_3f:    1908816  99.74%	    1131496 118.62%
            heapsort:    2515493  75.69%	    1630333  82.32%
           shellsort:    2985339  63.78%	    1964794  68.31%
    6400:
               qsort:    4046370 100.00%	    2909215 100.00%
            qsort_3f:    4164468  97.16%	    2468393 117.86%
            heapsort:    5150659  78.56%	    3533585  82.33%
           shellsort:    6650225  60.85%	    4429849  65.67%
    12800:
               qsort:    8729730 100.00%	    6185097 100.00%
            qsort_3f:    8776885  99.46%	    5288826 116.95%
            heapsort:   11064224  78.90%	    7603061  81.35%
           shellsort:   15487905  56.36%	   10305163  60.02%
    25600:
               qsort:   18357770 100.00%	   13172205 100.00%
            qsort_3f:   18687842  98.23%	   11337115 116.19%
            heapsort:   24121241  76.11%	   16612122  79.29%
           shellsort:   35552814  51.64%	   24106987  54.64%
    51200:
               qsort:   38658883 100.00%	   28008505 100.00%
            qsort_3f:   39498463  97.87%	   24339675 115.07%
            heapsort:   50553552  76.47%	   37013828  75.67%
           shellsort:   82602416  46.80%	   56201889  49.84%
    102400:
               qsort:   81197794 100.00%	   58918933 100.00%
            qsort_3f:   84257930  96.37%	   51986219 113.34%
            heapsort:  110540577  73.46%	   81419675  72.36%
           shellsort:  191303132  42.44%	  129786472  45.40%
    From: Zou Nan hai <nanhai.zou@intel.com>
    
    The new sort routine only works if there are an even number of entries in
    the ia64 exception fix-up tables.  If the number of entries is odd the sort
    fails, and then random get_user/put_user calls can fail.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79d22ee86a32cb00096fdad4510dd7656faf401c
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:04:39 2005 -0800

    [PATCH] base-small: shrink console buffer
    
    CONFIG_BASE_SMALL reduce console transfer buffer
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65f6018777a8e027d7494540caccce8b0e3d27f7
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:04:24 2005 -0800

    [PATCH] base-small: shrink timer hashes
    
    CONFIG_BASE_SMALL reduce timer list hashes
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 731184f54cc774f11e7569877c00102ad5bdc6f8
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:04:09 2005 -0800

    [PATCH] base-small: shrink futex queues
    
    CONFIG_BASE_SMALL reduce futex hash table
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4c62e9417148d205a0de3e18d26cffd4b9678a3
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:03:54 2005 -0800

    [PATCH] base-small: shrink UID hash
    
    CONFIG_BASE_SMALL reduce UID lookup hash
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ad226a285b751f486b657b2ab16204c2a33e925
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:03:40 2005 -0800

    [PATCH] base-small: shrink PID tables
    
    CONFIG_BASE_SMALL reduce size of pidmap table for small machines
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6843d7f3b76eafee419a29068880322f1714cf1a
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:03:24 2005 -0800

    [PATCH] base-small: shrink chrdevs hash
    
    CONFIG_BASE_SMALL degrade char dev hash table to linked list
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eef2fd1db423e00de3b936d637177c1a5058cbd1
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon Mar 7 18:03:10 2005 -0800

    [PATCH] base-small: introduce the CONFIG_BASE_SMALL flag
    
    This patch series introduced a new pair of CONFIG_EMBEDDED options call
    CONFIG_BASE_FULL/CONFIG_BASE_SMALL.  Disabling CONFIG_BASE_FULL sets the
    boolean CONFIG_BASE_SMALL to 1 and it is used to shrink a number of core data
    structures.  The space savings for the current batch is around 14k.
    
    This patch:
    
    Add CONFIG_BASE_SMALL for miscellaneous core size that don't warrant
    their own options. Example users to follow.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c69be78d7f0937d1dde0f373c0720f8efd18eff
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:02:55 2005 -0800

    [PATCH] oss/sscape: fix section references
    
    oss/sscape: fix initdata reference used in exit:
    
    Error: ./sound/oss/sscape.o .exit.text refers to 000000000000007d R_X86_64_PC32     .init.data+0x0000000000000003
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01cd378773fff1ac7c061c0fceeb0848af638cab
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:02:40 2005 -0800

    [PATCH] oss/pss: fix section references
    
    oss/pss: fix initdata reference used in exit:
    
    Error: ./sound/oss/pss.o .exit.text refers to 000000000000003f R_X86_64_PC32     .init.data+0x0000000000000003
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f9ea0104264555b5a613545dcc9bf1f2e07b8cd
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:02:25 2005 -0800

    [PATCH] oss/nm256: fix section references
    
    oss/nm256_audio: fix init text section reference:
    
    Error: ./sound/oss/nm256_audio.o .text refers to 0000000000001847 R_X86_64_PC32     .init.text+0x0000000000000018
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8309eaac402e36274ab45a0248ddfb6331bbab7
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:02:09 2005 -0800

    [PATCH] oss/esssolo1: fix initdata section references
    
    oss/esssolo1: fix initdata section reference:
    
    Error: ./sound/oss/esssolo1.o .text refers to 0000000000000bab R_X86_64_32S      .init.data+0x0000000000000004
    Error: ./sound/oss/esssolo1.o .text refers to 0000000000000bb2 R_X86_64_32S      .init.data
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fb457c81826155796199e123b439e9bd093b64a
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:01:54 2005 -0800

    [PATCH] oss/es1370: fix initdata section references
    
    oss/es1370: fix initdata section reference:
    
    Error: ./sound/oss/es1370.o .text refers to 00000000000042bd R_X86_64_32S      .init.data+0x0000000000000024
    Error: ./sound/oss/es1370.o .text refers to 00000000000042c5 R_X86_64_32S      .init.data+0x0000000000000020
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 842dd2ff595b7b1d3b4d8c5e5781a2bacaa019db
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:01:39 2005 -0800

    [PATCH] oss/cmpci: fix initdata section references
    
    oss/cmpci: fix initdata section reference:
    
    Error: ./sound/oss/cmpci.o .text refers to 000000000000418e R_X86_64_32S      .init.data+0x0000000000000004
    Error: ./sound/oss/cmpci.o .text refers to 0000000000004196 R_X86_64_32S      .init.data
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31a20d14e38ab8ce8d599c0083e039d77ff4923c
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:01:24 2005 -0800

    [PATCH] oss/cs4281: fix initdata section references
    
    oss/cs4281: fix initdata section references:
    
    Error: ./sound/oss/cs4281/cs4281.o .text refers to 0000000000006dae R_X86_64_32S      .init.data+0x0000000000000004
    Error: ./sound/oss/cs4281/cs4281.o .text refers to 0000000000006db6 R_X86_64_32S      .init.data
    Error: ./sound/oss/cs4281/cs4281m.o .text refers to 0000000000006dae R_X86_64_32S      .init.data+0x0000000000000004
    Error: ./sound/oss/cs4281/cs4281m.o .text refers to 0000000000006db6 R_X86_64_32S      .init.data
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbb0ad61a6503bb1d994453daa706722de0472a1
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:01:09 2005 -0800

    [PATCH] atm/zatm: fix section references
    
    atm/zatm: fix text section references to __init text and __initdata;
      they should be __devinit instead of __init;
    
    Error: ./drivers/atm/zatm.o .text refers to 0000000000001abb R_X86_64_PC32     .init.text+0x0000000000000154
    Error: ./drivers/atm/zatm.o .text refers to 0000000000001ad3 R_X86_64_PC32     .init.text+0x0000000000000154
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc9ea0b6b67a3bb9105cfc92e138cdc0c7eb8875
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:00:54 2005 -0800

    [PATCH] atm/ambassador: fix init section references
    
    atm/ambassador: fix text section references to __init text and __initdata;
    
    The biggest negative about this AFAIK is that it makes ucode_data
    non-initdata, and that moves about 8 KB of data from .init.data
    to .data.  Similarly, .text increases by approx. 1300 bytes (on x86-32).
    
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002a07 R_X86_64_PC32     .init.text+0x0000000000000149
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002a45 R_X86_64_32S      .init.data+0x0000000000000040
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002a7c R_X86_64_PC32     .init.data+0x0000000000000020
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002a83 R_X86_64_PC32     .init.data+0x000000000000001c
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002b40 R_X86_64_PC32     .init.text+0x0000000000000149
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002bbc R_X86_64_PC32     .init.text+0x0000000000000149
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002c0f R_X86_64_32S      .init.data+0x0000000000000024
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002c17 R_X86_64_32S      .init.data+0x0000000000000020
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002c3c R_X86_64_PC32     .init.data+0xfffffffffffffffc
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002c6a R_X86_64_PC32     .init.text+0x0000000000000149
    Error: ./drivers/atm/ambassador.o .text refers to 0000000000002c77 R_X86_64_32S      .init.data+0x0000000000000040
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0562d0518d1ab4a3e2de362ef7f450c21ca5994b
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Mon Mar 7 18:00:39 2005 -0800

    [PATCH] atm/lanai: fix section references
    
    atm/lanai: fix text section references to __init text;
      they should be __devinit instead of __init;
    
    Error: ./drivers/atm/lanai.o .text refers to 0000000000002105 R_X86_64_PC32     .init.text+0x0000000000000021
    Error: ./drivers/atm/lanai.o .text refers to 0000000000002116 R_X86_64_PC32     .init.text+0x0000000000000021
    Error: ./drivers/atm/lanai.o .text refers to 0000000000002132 R_X86_64_PC32     .init.text+0x0000000000000021
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f28ab13707705a58f63f388f3f63474e9cbdecfd
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Mon Mar 7 18:00:24 2005 -0800

    [PATCH] fix register access typo in synclinkmp
    
    Fix register access typo in synclinkmp.c that caused value to be written to
    wrong register.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e7409c17e4faa51c73705872d8ac8e85a15ae23
Author: Panagiotis Issaris <panagiotis.issaris@mech.kuleuven.ac.be>
Date:   Mon Mar 7 18:00:09 2005 -0800

    [PATCH] efi: fix failure handling
    
    The EFI driver allocates memory and writes into it without checking the
    success of the allocation.  Furthermore, on failure of the
    firmware_register() it doesn't free the allocated memory and on failure of
    the subsys_create_file() calls it returns zero instead of the errorcode.
    
    Signed-off-by: Panagiotis Issaris <panagiotis.issaris@mech.kuleuven.ac.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 669479bab8ba515d5695a368d111f3fe2fa8c1b5
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Mon Mar 7 17:59:54 2005 -0800

    [PATCH] autofs4 patch: autofs4_wait can leak memory
    
    There is a memory in the autofs4_wait function, if multiple processes are
    waiting on the same queue:
    
    	name = kmalloc(NAME_MAX + 1, GFP_KERNEL);
    	if (!name)
    		return -ENOMEM;
    	...
    
    	if ( !wq ) {
    		/* Create a new wait queue */
    		wq = kmalloc(sizeof(struct autofs_wait_queue), GFP_KERNEL);
    		if ( !wq ) {
    			kfree(name);
    			up(&sbi->wq_sem);
    			return -ENOMEM;
    		}
    		...
    		wq->name = name;
    
    		...
    	} else {
    		atomic_inc(&wq->wait_ctr);
    		up(&sbi->wq_sem);
    		...
           }
    
    In the else clause, we forget to free the name we kmalloc'd above.  This is
    pretty easy to trigger with the following reproducer:
    
    setup an automount map as follows:
    for n in `seq 1 48`; do echo "$n server:/export/$n" >> /etc/auto.test; done
    setup a master map entry to point at this:
    echo "/test /etc/auto.test --timeout=1" >> /etc/auto.master
    
    Now, assuming the nfs server was setup to export said directories, run the
    following shell script in two xterms:
    
    #!/bin/sh
    while true; do
            for n in `seq 1 48`; do
                    ls /test/$n
            done
            sleep 2
    done
    
    and watch the size-256 slab cache grow
    
    Within 4 minutes, I had the size-256 cache grow to 384k.  On a kernel with
    the below patch applied, the size-256 remained constant during an over-night
    run.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90e500696af001ca0255bc838b085166521a3bb3
Author: Jan Kara <jack@suse.cz>
Date:   Mon Mar 7 17:59:39 2005 -0800

    [PATCH] Quotactl changes for XFS
    
    Attached patch from Nathan splits the checks done in quotactl() in XFS and
    VFS parts (it's mostly just moving of code back and forth).  It's done
    mainly because XFS guys would like to implement more types of quotas and I
    don't want them to slow down the general VFS case.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5f17cb26b56417566cfba44fde34887601f4eba
Author: Corey Minyard <minyard@acm.org>
Date:   Mon Mar 7 17:59:24 2005 -0800

    [PATCH] Minor cleanups to the IPMI driver
    
    This patch cleans up the DMI handling so that multiple interfaces can be
    reported from the DMI tables and so that the DMI slave address can be
    transferred up to the upper layer.  It also adds an option to specify the
    slave address as an init parm and removes some unnecessary initializers.
    
    This patch also adds inc/dec usecount functions for the SMIs so they can
    modify the usecounts of modules they use (added because the SMB driver uses
    the I2C code).
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e0b6385639c96fc3f5496ea691f99feab664e29
Author: Nathan T. Lynch <ntl@pobox.com>
Date:   Mon Mar 7 17:59:09 2005 -0800

    [PATCH] explicitly bind idle tasks
    
    With hotplug cpu and preempt, we tend to see smp_processor_id warnings from
    idle loop code because it's always checking whether its cpu has gone
    offline.  Replacing every use of smp_processor_id with _smp_processor_id in
    all idle loop code is one solution; another way is explicitly binding idle
    threads to their cpus (the smp_processor_id warning does not fire if the
    caller is bound only to the calling cpu).  This has the (admittedly slight)
    advantage of letting us know if an idle thread ever runs on the wrong cpu.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Acked-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 909c31786f4d169e692a1bc473c89b19da36ec4f
Author: Andries Brouwer <andries.brouwer@cwi.nl>
Date:   Mon Mar 7 17:58:54 2005 -0800

    [PATCH] partitions/msdos.c fix
    
    A well-known kernel bug is that it guesses at the partition type and the
    partitions on any disk it encounters.  This is bad because needless I/O is
    done, slowing down the boot, sometimes quite a lot, especially when I/O
    errors occur.  And it is bad because sometimes we guess wrong.
    
    In other words, we need the user space command `partition', where
    "partition -t dos /dev/sda" reads a DOS-type partition table.  (And
    "partition /dev/sda" tries all known heuristics to decide what type of
    partitioning might be present.) The two variants are: (i) partition tells
    the kernel to do the partition table reading, and (ii) partition uses partx
    to read the partition table and tells the kernel one-by-one about the
    partitions found this way.
    
    Since this is a fundamental change, a long transition period is needed, and
    that period could start with a kernel boot parameter telling the kernel not
    to do partition table parsing on a particular disk, or a particular type of
    disks, or all disks.
    
    This could have been the intro to a patch doing that, but is not.  (It is
    just an RFC.)
    
    The tiny patch below prompted the above - it was suggested by Uwe Bonnes
    who encountered USB devices without partition table where our present
    heuristics did not suffice to stop partition table parsing.  It causes the
    kernel to ignore partitions of type 0.  A band-aid.
    
    I think nobody uses such partitions seriously, but nevertheless this should
    probably live in -mm for a while to see if anybody complains.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86c4c2434f29a0e593f9679b7e5e3c16cfb05c50
Author: Alexey Dobriyan <adobriyan@mail.ru>
Date:   Mon Mar 7 17:58:39 2005 -0800

    [PATCH] sparc: use initalisers for struct resource
    
    For when the layout of `struct resource' changes.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c329b29bd27571cc2a849c48d29831711770819
Author: Peter Samuelson <peter@p12n.org>
Date:   Mon Mar 7 17:58:25 2005 -0800

    [PATCH] cross-compile scripts/lxdialog/ on AIX
    
    AIX curses.h defines macros 'clear_screen' and 'color_names' but does not
    define 'scroll()'.
    
    Signed-Off-By: Peter Samuelson <peter@p12n.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a9dafd11fa87413451b862db59757b8593c51f9
Author: matthias.kunze@gmx-topmail.de <matthias.kunze@gmx-topmail.de>
Date:   Mon Mar 7 17:58:10 2005 -0800

    [PATCH] loglevel boot option
    
    Add a boot-time option to set the loglevel.  We already have `quiet' and
    `debug', which set it to specific levels.  This is better.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b921bc08f7038cf0601ddaeba23720797c910fa1
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Mon Mar 7 17:57:54 2005 -0800

    [PATCH] ext3_new_inode() failure handling missing check
    
    There's a missing failure handling check here that would possibly lead to a
    null dereference later on, I'm not sure about the correct return value
    however.  I haven't tried it as I'm not sure how to trigger the case ;)
    
    Found by the Coverity tool.
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97ffe49fdf962ed18b2cef38a04ad365930086e8
Author: David Howells <dhowells@redhat.com>
Date:   Mon Mar 7 17:57:39 2005 -0800

    [PATCH] Keys: Doc update on locking
    
    The attached patch updates the documentation on the kernel keys to describe
    the locking associated with keys and key type operations.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b423a99d415b2f3ea1bb0f23a33c8f31eb21ca5a
Author: Vladimir Saveliev <vs@namesys.com>
Date:   Mon Mar 7 17:57:23 2005 -0800

    [PATCH] reiserfs: return -EIO instead of calling BUG() when rename goes wrong
    
    This patch makes reiserfs to return -EIO when rename-ing went wrong instead
    of calling BUG().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ea5e988195439b479d81a869603411c0d76a583
Author: a.llano@usyscom.com <a.llano@usyscom.com>
Date:   Mon Mar 7 17:57:09 2005 -0800

    [PATCH] Fix 1-Wire Dallas in bigendian machines
    
    I've been testing the 1-Wire Dallas in a bigendian machine (through a GPIO)
    and I've found some problems that can easily addressed with the provided
    patch.  (inline at the end of the message).
    
    I have a question about the implementation of w1_smem.
    In the line 90 of drivers/w1/w1_smem.c.
      for (i = 0; i < 9; ++i)
         count += sprintf(buf + count, "%02x ", ((u8 *)&sl->reg_num)[i]);
    I don't see why this loop is execute 9 times when the provided reg_num
    is 8 bytes long. I don't understand the purpose of the last byte.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a61faa62c497867e2e5ceb23f699b2a911338260
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Mon Mar 7 17:56:54 2005 -0800

    [PATCH] Add nobh_writepage() support
    
    Add nobh_wripage() support for the filesystems which uses
    nobh_prepare_write/nobh_commit_write().
    
    Idea here is to reduce unnecessary bufferhead creation/attachment to the
    page through pageout()->block_write_full_page().  nobh_wripage() tries to
    operate by directly creating bios, but it falls back to
    __block_write_full_page() if it can't make progress.
    
    Note that this is not really generic routine and can't be used for
    filesystems which uses page->Private for anything other than buffer heads.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f326c26ecb1d4a06760a40445bce19865101fdf1
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Mon Mar 7 17:56:38 2005 -0800

    [PATCH] export kallsyms_lookup_name()
    
    Export kallsyms_lookup_name() for kprobe/jprobe module use.
    
    (akpm: modules which use kprobes/jrobes are usually problem-specific and
    will not be merged into the mainline kernel, so we we're actually to see
    actual users of this patch merged)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da18d3e27ace3e6a8a7c49bd3e7fd60e1c43a794
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Mon Mar 7 17:56:23 2005 -0800

    [PATCH] bksend example script fix
    
    The "bksend" example script doesn't work if PAGER (used by "bk changes")
    is set to something which doesn't fallback to plain stdout if its output
    isn't a tty.
    
    Fixed by forcing PAGER to be /bin/cat.
    
    Signed-Off-By: Matthias Urlichs <smurf@debian.org>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21bf8934d6efbeb5306288d3de92d8dbf928d0ba
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Mon Mar 7 17:56:07 2005 -0800

    [PATCH] CREDITS Update
    
    CREDITS update for Mattihas Urlichs.
    
    Signed-Off-By: Matthias Urlichs <smurf@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 414d718a8d880d860ebfbbc27e3305831a3ce4da
Author: rene.scharfe@lsrfire.ath.cx <rene.scharfe@lsrfire.ath.cx>
Date:   Mon Mar 7 17:55:52 2005 -0800

    [PATCH] remove mount option parsing from procfs
    
    This patch removes the mount options of the proc filesystem.  They don't
    have any effect since 2.4.something.
    
    Only proc_fill_super() calls parse_options, notably proc_remount() does
    not.  And proc_fill_super() is only called at the very first mount which in
    turn is the one caused by kern_mount() in fs/proc/root.c and that passes a
    NULL pointer as mount options string.  It is called only once because proc
    is a filesystem with a single super_block (i.e.  it uses get_sb_single()).
    
    Since noone seems to miss the uid and gid options so far I suggest to
    simply remove them.  Their function can be easily performed in userspace.
    E.g.  this (if it worked like intended):
    
        # mount -t proc -o uid=procuser,gid=procgrp proc /proc
    
    can be done like so, probably in some init script:
    
        # mount -t proc proc /proc && chown procuser:procgrp /proc
    
    But I don't see why anyone would want to do that in the first place.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a23550f1b6655e1199d51e0fc99b84eba2a273d
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Mon Mar 7 17:55:38 2005 -0800

    [PATCH] tv tuner module update.
    
    Did some code reorganization: split up the source into four files:
     - tuner-core.c for all the interfacing stuff (register driver,
       handle insmod options, react on v4l ioctls, ...),
     - tuner-simple.c for all those trivial 4-byte-command-sequence tuner
       chips.
     - mt20xx.c for the mt2032 and mt2050 tuners.
     - tda8290.c for the tda8290/8272 combo (this code is new).
    
    I also did a number of cleanups like using dev_printk() for the
    messages everythere.  There should be no functional changes beside
    the new support for the tda8290 tuner.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57b951e3d436d70e93ebadf3748e11b644d99892
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Mon Mar 7 17:54:59 2005 -0800

    [PATCH] minor bttv driver update
    
    Just a new PCI Subsystem ID and a PM fix from Pavel.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d949d0ec9c601f2b148bed3cdb5f87c052968554
Author: Andrea Arcangeli <andrea@cpushare.com>
Date:   Mon Mar 7 17:54:43 2005 -0800

    [PATCH] seccomp: secure computing support
    
    I'd need it merged into mainline at some point, unless anybody has strong
    arguments against it.  All I can guarantee here, is that I'll back it out
    myself in the future, iff Cpushare will fail and nobody else started using
    it in the meantime for similar security purposes.
    
    (akpm: project details are at http://www.cpushare.com/technical.  It seems
    like a good idea to me, and one which is worth supporting.  I agree that for
    this to be successful, the added robustness of Andrea's simple and specific
    jail is worthwhile).
    
    Signed-off-by: Andrea Arcangeli <andrea@cpushare.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abbaf4f16cb54b73a644a2fcaa96c4103e99b374
Author: Tim Bird <tim.bird@am.sony.com>
Date:   Mon Mar 7 17:54:26 2005 -0800

    [PATCH] add timing information to printk messages
    
    Here's a little patch which is useful for showing timing information for
    kernel bootup activities.
    
    This patch adds a new Kconfig option under "Kernel Hacking" and a new
    option for the kernel command line.  It also provides a script for showing
    delta information.
    
    Note that the timing data may not be correct on some platforms until after
    time_init() is called.
    
    Recently (as of about 2.6.10) I found that the message log produced by
    dmesg is truncated when I use this feature.  That is, the first few printk
    messages of the boot sequence are not in the dmesg output, although they
    are printed to console during startup.  This is a new behavior - dmesg
    output was fine as of 2.6.9.  Increasing CONFIG_LOG_BUF_SHIFT had no effect
    on the truncation.
    
    Has something changed with printk recently?
    
    For more information on this patch, see:
    http://tree.celinuxforum.org/CelfPubWiki/InstrumentedPrintk
    
    Here's some sample output:
    ...
    [4294667.296000] Kernel command line: ro root=/dev/nfs ip=dhcp hdc=ide-scsi console=vga console=ttyS0,115200
    [4294667.296000] ide_setup: hdc=ide-scsi
    [4294667.296000] Initializing CPU#0
    [4294667.296000] PID hash table entries: 512 (order: 9, 8192 bytes)
    [    0.000000] Detected 1995.620 MHz processor.
    [   21.397369] Using tsc for high-res timesource
    [   21.399820] Console: colour VGA+ 80x25
    [   21.537244] Dentry cache hash table entries: 32768 (order: 5, 131072 bytes)
    [   21.544547] Inode-cache hash table entries: 16384 (order: 4, 65536 bytes)
    [   21.555066] Memory: 125076k/130240k available (2002k kernel code, 4556k reserved, 1006k data, 140k init, 0k highmem)
    [   21.565775] Checking if this processor honours the WP bit even in supervisor mode... Ok.
    [   21.574089] Calibrating delay loop... 3940.35 BogoMIPS (lpj=1970176)
    [   21.596511] Mount-cache hash table entries: 512 (order: 0, 4096 bytes)
    [   21.603263] CPU: After generic identify, caps: bfebfbff 00000000 00000000 00000000 00004400 00000000 00000000
    [   21.603276] CPU: After vendor identify, caps: bfebfbff 00000000 00000000 00000000 00004400 00000000 00000000
    [   21.603287] CPU: Trace cache: 12K uops, L1 D cache: 8K
    [   21.608884] CPU: L2 cache: 128K
    ...
    
    And now the patch...
    
    Signed-off-by: Tim Bird <tim.bird@am.sony.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3f28e49a723a2ded9dedf61398c7f5f3bb8235c
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Mon Mar 7 17:54:10 2005 -0800

    [PATCH] a_ops-based loop I/O
    
    Implements fallback to file_operations->write in the case that
    aops->{prepare,commit}_write are not present on the backing filesystem.
    
    The fallback happens in two different ways:
    
    - For normal loop devices, i.e.  ones which do not do transformation on
      the data but simply pass it along, we simply call fops->write.  This
      should be pretty much just as fast as using aops->{prepare,commit}_write
      directly.
    
    - For all other loop devices (e.g.  xor and cryptoloop), i.e.  all the
      ones which may be doing transformations on the data, we allocate and map
      a page (once for each bio), then for each bio vec we copy the bio vec
      page data to our mapped page, apply the loop transformation, and use
      fops->write to write out the transformed data from our page.  Once all
      bio vecs from the bio are done, we unmap and free the page.
    
    This approach is the absolute minimum of overhead I could come up with and
    for performance hungry people, as you can see I left the address space
    operations method in place for filesystems which implement
    aops->{prepare,commit}_write.
    
    I have tested this patch with normal loop devices using
    aops->{prepare,commit}_write on the backing filesystem, with normal loop
    devices using the fops->write code path and with cryptoloop devices using
    the double buffering + fops->write code path.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20b0bb36b2cf703fecc5a8bbbcdc126642cd44c7
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Mon Mar 7 17:53:55 2005 -0800

    [PATCH] Run softirqs on proper processor on offline
    
    We take down ksoftirqds at CPU_DEAD time, so there is a brief period whereupon
    there is a ksoftirqd thread for an offline processor, it is at this point that
    ->cpus_allowed won't have it pinned anymore.  An online processor would then
    take down that ksoftirqd and exit it.
    
    Ensure that we only offline the processor when it's safe and never run
    softirqs in another processor's ksoftirqd context.  This also gets rid of the
    warnings in ksoftirqd on cpu offline.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad87b3750efcaf5ceffd82d10dbf4bc1d267d69e
Author: Jan Kara <jack@suse.cz>
Date:   Mon Mar 7 17:53:40 2005 -0800

    [PATCH] Implement quota reading and writing functions for UFS.
    
    Attached patch adds functions ufs_quota_read() and ufs_quota_write() to the
    UFS code.  So quotas for UFS should work again (they were broken by the
    quota io redesign).  I don't actually think the patch is too much important
    as I'm not sure anybody uses quotas on UFS but we're in the "stable" branch
    so just dropping a support did not seem right to me.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63858f83796cc179010632f0f9a23b2524e79c17
Author: Dave Olien <dmo@osdl.org>
Date:   Mon Mar 7 17:53:24 2005 -0800

    [PATCH] add local bio pool support and modify dm
    
    I've had this patch reviewed by Jens, and incorporated his recommended
    fixes.
    
    The patch adds new interfaces to bio.c that support the creation of local
    bio and bvec pools.  This is important for layered drivers that need to
    allocate new bio and bvec structures in response to bio's submitted to it
    from higher up.  The layered drivers can allocate local pools of bio
    structures to preclude deadlock under global bio pool exhaustion.
    
    The device mapper source files have been modified to remove duplicate bio
    code, and to use the new interfaces to create local bio pools.
    
    From: Dave Olien <dmo@osdl.org>
    
    Change bio_clone() to use the global bio_set pool instead of the bio_set pool
    associated with the bio argument.  This is because raid5 and raid6 bio's are
    not allocated from a bio_set and have no bio_set associated with them.  This
    patch along with the patch Linux just accepted allows raid5 and raid6 to
    function.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98a1031eb02f82ce522d0ef2bc20a8d20af22970
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 7 17:53:09 2005 -0800

    [PATCH] clean up and unify asm-*/resource.h files
    
    This patch does the final consolidation of asm-*/resource.h file, without
    changing any of the rlimit definitions on any architecture.  Primarily it
    removes the __ARCH_RLIMIT_ORDER method and replaces it with a more compact
    and isolated one that allows architectures to define only the offending
    rlimits.
    
    This method has the positive effect that adding a new rlimit can now be
    purely done via changing asm-generic/resource.h alone.  Previously one
    would have to patch 4 other (sparc, sparc64, alpha and mips) resource.h
    files.
    
    The patch also does style unification, whitespace cleanups and
    simplification of resource.h files and cleans up the asm-generic/resource.h
    file as well.  I've added more comments too.
    
    This patch should have no effect on any code on any architecture.  (i.e.
    it's a pure identity patch.)
    
    Tested on x86 and carefully reviewed to make sure that Sparc, Sparc64,
    MIPS and Alpha rlimits are still the same as required by the ABI.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54f1a7a72c69fd58be8199453c250dd077abde48
Author: ken@mvista.com <ken@mvista.com>
Date:   Mon Mar 7 17:52:53 2005 -0800

    [PATCH] drivers/char/lp.c race fix
    
    In lp_write(), copy_from_user() is called to copy data into a statically
    allocated kernel buffer before down_interruptible() is called.  If a second
    thread of execution comes in between the copy_from_user() and the
    down_interruptible() calls, silent data corruption could result.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c6672c154a3aff3d63736609b3341f4ed0b0edf
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Mar 7 17:52:39 2005 -0800

    [PATCH] convert /proc/driver/rtc to seq_file.
    
    The /proc/driver/rtc interface didn't have any module owner hook.  The
    simplest fix is to just convert this to the single version of seq_file.
    Also, fix initialization of rtc_dev to use C99 form.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6740e938fe4eb30563c6fb040b3321ad7e546b61
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 7 17:52:24 2005 -0800

    [PATCH] add compiler-gcc4.h
    
    With the release of gcc 4.0 being only a few months away and people
    already tring compiling with it, it's time for adding a compiler-gcc4.h .
    
    This patch contains the following changes:
    - remove compiler-gcc+.h
    - compiler-gcc4.h: new file based on a corrected compiler-gcc+.h
    - compiler.h: include compiler-gcc4.h for gcc 4
    - compiler.h: #error for gcc > 4
    - compiler-gcc3.h: remove __compiler_offsetof (there will never be a
                                                   gcc 3.5)
                       small indention corrections
    
    I've tested the compilation with both gcc 3.4.4 and a recent gcc 4.0
    snapshot from Debian experimental.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcba0212905d6b08fa33f7215bd1c41bb86317ab
Author: Ernie Petrides <petrides@redhat.com>
Date:   Mon Mar 7 17:51:51 2005 -0800

    [PATCH] minor conceptual fix for /proc/kcore header size
    
    While investigating the 2.4 memory corruption problem fixed by the patch
    previously posted, it was noticed that the 2.6 version of get_kcore_size()
    inappropriately uses sizeof(struct memelfnote) in its calculation of the
    /proc/kcore ELF header size.  What is actually stored in the header is an
    "elf_note" structure plus the 4 ASCII chars "CORE".
    
    It just so happens that on 32-bit arches, both calculations result in the
    same value (16).  But on 64-bit arches, the allocated size (24) is larger
    than necessary (16).  This does not result in any possible data corruption,
    but it might be nice to correct this "conceptual" error.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08d081dbcb5393eff5cb5b8583b2b98e7b1130cc
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Mar 7 17:51:35 2005 -0800

    [PATCH] serial: update vr41xx_siu
    
    This patch updates serial driver for VR41xx serial unit.  Some check are
    added to verify_port.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a667d2e3336310628d7465a3d48bbc539fa5f06
Author: Arun Sharma <arun.sharma@intel.com>
Date:   Mon Mar 7 17:51:21 2005 -0800

    [PATCH] add TCSBRKP to compat_ioctl.h
    
    Move ioctl TCSBRKP support to compat layer. Same rationale as TCSBRK.
    
    - Remove corresponding code under ppc64, sparc64 and s390.
    - Use ULONG_IOCTL() instead of COMPATIBLE_IOCTL(), since the argument is int,
      not pointer.
    
    Signed-off-by: Gordon Jin <gordon.jin@intel.com>
    Signed-off-by: Arun Sharma <arun.sharma@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 410a5816a0721a8733b70cf4082b21b358a4f357
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 7 17:51:06 2005 -0800

    [PATCH] sys_setpriority() euid semantics fix
    
    What _is_ inconsistent is kernel/sys.c's setpriority()/set_one_prio().
    
    It checks current->euid|uid against p->uid, which makes little sense, but
    is how we've been doing it ever since.  It's a Linux quirk documented in
    the manpage.  To make things funnier, SuS requires current->euid|uid match
    against p->euid.
    
    The patch below fixes it (and brings the logic in line with what
    setscheduler()/setaffinity() does), but if we do it then it should be done
    only in 2.6.12 or later, after good exposure in -mm.
    
    (Worst-case this could break an application but i highly doubt it: it at
    most could deny renicing another task to positive (or in very rare cases,
    to negative) nice values, which no application should crash on something
    like that, normally.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de1e6c0ea7150bd2b9b9d22d286b081cbbbe233f
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Mar 7 17:50:52 2005 -0800

    [PATCH] serial: add the output interface control to VR41xx SIU driver
    
    This patch adds the output interface control to VR41xx SIU driver.
    And obsolete function for VR41xx SIU is removed.
    
    And add __init for the function used only for initialization.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26e25c95e30faaa235f7d783adae797a21fa7392
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Mar 7 17:50:18 2005 -0800

    [PATCH] serial: add NEC VR4100 series serial support
    
    This patch adds serial driver for NEC VR4100 series serial interface unit.
    
    The new device numbers have been recorded by LANANA.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ca551265942666ce638441de5fbdb6cee5fd078
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 7 17:50:03 2005 -0800

    [PATCH] annotate /proc/<PID>/maps with [heap]/[stack]/[vdso] markers
    
    This patch makes the /proc/<PID>/maps file easier to parse (both for humans
    and for applications), by annotating the heap, stack and vdso mappings with
    [heap], [stack] and [vdso] markers.
    
    It makes it easier/faster to determine at a quick glance whether an
    application has a secure VM layout, and it also makes it easier for tools
    to determine whether e.g.  the heap or stack is executable or not.
    
    new maps file, on a patched kernel:
    
     001c4000-001d9000 r-xp 00000000 03:01 19954      /lib/ld-2.3.3.so
     001d9000-001db000 rw-p 00014000 03:01 19954      /lib/ld-2.3.3.so
     001dd000-002fb000 r-xp 00000000 03:01 19960      /lib/tls/libc-2.3.3.so
     002fb000-002fd000 r--p 0011d000 03:01 19960      /lib/tls/libc-2.3.3.so
     002fd000-002ff000 rw-p 0011f000 03:01 19960      /lib/tls/libc-2.3.3.so
     002ff000-00301000 rw-p 002ff000 00:00 0
     08048000-0804c000 r-xp 00000000 03:01 31968      /bin/cat
     0804c000-0804d000 rw-p 00003000 03:01 31968      /bin/cat
     0804d000-0806e000 rw-p 0804d000 00:00 0          [heap]
     b7dbc000-b7dbd000 r--p 009d1000 03:01 83628      /usr/lib/locale/locale-archive
     b7dbd000-b7dc4000 r--p 0097d000 03:01 83628      /usr/lib/locale/locale-archive
     b7dc4000-b7df1000 r--p 0094a000 03:01 83628      /usr/lib/locale/locale-archive
     b7df1000-b7ff1000 r--p 00000000 03:01 83628      /usr/lib/locale/locale-archive
     b7ff1000-b7ff2000 rw-p b7ff1000 00:00 0
     bffeb000-c0000000 rw-p bffeb000 00:00 0          [stack]
     ffffe000-fffff000 ---p 00000000 00:00 0          [vdso]
    
    Tested on x86, but should work on all architectures.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c0ac75fb753cfe24b6210e65171d1104e59c0ef
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Mar 7 17:49:48 2005 -0800

    [PATCH] blk_execute_rq() oops on fast completion
    
    blk_execute_rq() can oops in wait_for_completion(), if the request has
    completed before we call wait_for_completion() because blk_end_sync_rq()
    clears ->waiting when it is entered.  Fix this by always using the on-stack
    completion variable instead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d324f68b89690ba471b1657d73e4a85a944144bd
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Mar 7 17:49:33 2005 -0800

    [PATCH] scsi_io_completion sense copy
    
    For the flush generated requests, we don't have room for sense info right
    now.  This might change in the future so that the sd end_io function can
    make a better judgement on what to do about an error.  So check this in
    scsi_io_completion(), only copy sense data to request if it has space
    assigned to it.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e18e923a3cbae899248430b52fc761ce6e7f6ef0
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Mar 7 17:49:17 2005 -0800

    [PATCH] rework core barrier support
    
    This reworks the core barrier support to be a lot nicer, so that all the
    nasty code resides outside of drivers/ide.  It requires minimal changes to
    support in a driver, I've added SCSI support as an example.  The ide code
    is adapted to the new code.
    
    With this patch, we support full barriers on sata now.  Bart has acked the
    addition to -mm, I would like for this to be submitted as soon as 2.6.12
    opens.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8be9091faa43e75879ec238d0171b6f3484d61c
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Mar 7 17:49:01 2005 -0800

    [PATCH] Add struct request end_io callback
    
    This is needed for several things, one in-tree user which I will introduce
    after this patch.
    
    This adds a ->end_io callback to struct request, so it can be used with
    async io of any sort.  Right now users have to wait for completion in a
    blocking manner.  In the next iteration, ->waiting can be folded into
    ->end_io_data since it is just a special case of that use.
    
    From: Peter Osterlund <petero2@telia.com>
    
    The problem is that the add-struct-request-end_io-callback patch forgot to
    update pktcdvd.c.  This patch fixes it.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd67725a0cede85ca80348333efdd7063e3ebfb7
Author: Jan Blunck <j.blunck@tu-harburg.de>
Date:   Mon Mar 7 17:48:44 2005 -0800

    [PATCH] d_drop should use per dentry lock
    
    d_drop() must use the dentry->d_lock spinlock.  In some cases __d_drop()
    was used without holding the dentry->d_lock spinlock, too.  This could end
    in a race with __d_lookup().
    
    Signed-off-by: Jan Blunck <j.blunck@tu-harburg.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02721572728cccd31b54d69e1dfb8124fa02407e
Author: David Howells <dhowells@redhat.com>
Date:   Mon Mar 7 17:48:29 2005 -0800

    [PATCH] Fix kallsyms/insmod/rmmod race
    
    The attached patch fixes a race between kallsyms and insmod/rmmod.
    
    The problem is this:
    
     (1) The various kallsyms functions poke around in the module list without any
         locking so that they can be called from the oops handler.
    
     (2) Although insmod and rmmod use locks to exclude each other, these have no
         effect on the kallsyms function.
    
     (3) Although rmmod modifies the module state with the machine "stopped", it
         hasn't removed the metadata from the module metadata list, meaning that
         as soon as the machine is "restarted", the metadata can be observed by
         kallsyms.
    
         It's not possible to say that an item in that list should be ignored if
         it's state is marked as inactive - you can't get at the state information
         because you can't trust the metadata in which it is embedded.
    
         Furthermore, list linkage information is embedded in the metadata too, so
         you can't trust that either...
    
     (4) kallsyms may be walking the module list without a lock whilst either
         insmod or rmmod are busy changing it. insmod probably isn't a problem
         since nothing is going a way, but rmmod is as it's deleting an entry.
    
     (5) Therefore nothing that uses these functions can in any way trust any
         pointers to "static" data (such as module symbol names or module names)
         that are returned.
    
     (6) On ppc64 the problems are exacerbated since the hypervisor may reschedule
         bits of the kernel, making operations that appear adjacent occur a long
         time apart.
    
    This patch fixes the race by only linking/unlinking modules into/from the
    master module list with the machine in the "stopped" state. This means that
    any "static" information can be trusted as far as the next kernel reschedule
    on any given CPU without the need to hold any locks.
    
    However, I'm not sure how this is affected by preemption. I suspect more work
    may need to be done in that case, but I'm not entirely sure.
    
    This also means that rmmod has to bump the machine into the stopped state
    twice... but since that shouldn't be a common operation, I don't think that's
    a problem.
    
    I've amended this patch to not get spinlocks whilst in the machine locked
    state - there's no point as nothing else can be holding spinlocks.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69bfca0e64ca97d1a3063687e26fa0191ae3ddfd
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Mon Mar 7 17:48:14 2005 -0800

    [PATCH] OSS Support for AC97 low power codecs
    
    This is a resend of a patch that has been applied to 2.4.  The low power
    codec functionality has also now been included in ALSA.
    
    It checks the codec ID before doing an AC97 register reset.  This allows
    the kernel to support low power codecs that are powered down by a reset
    command.  This patch also fixes some other minor issues.
    
    Changes:-
    
    - Added AC97_DEFAULT_POWER_OFF to ac97_codec_ids[]
    
    - ac97_probe now checks hardwired codec ID's before sending a reset
    
    - Added support for WM9713
    
    - Moved the codec specific inits after the mixer setup as some init
    
    - tings were being clobbered.
    
    - Added extra check so that default_digital_ops doesn't overwrite a valid
      codec_ops.  (SPDIF)
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd26caf1efe40a9296bb5223ede57f78adf2eaf1
Author: Corey Minyard <minyard@acm.org>
Date:   Mon Mar 7 17:47:58 2005 -0800

    [PATCH] Fix race between the NMI code and the CMOS clock
    
    This patch fixes a race between the CMOS clock setting and the NMI code.
    The NMI code indiscriminatly sets index registers and values in the same
    place the CMOS clock is set.  If you are setting the CMOS clock and an NMI
    occurs, Bad values could be written to or read from the CMOS RAM, or the
    NMI operation might not occur correctly.
    
    Fixing this requires creating a special lock so the NMI code can know its
    CPU owns the lock an "do the right thing" in that case.
    
    This was discovered and the fix has been tested by a very demanding
    customer who tests the heck of out the software we deliver.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef1ae53d0259c7c9261e848b4553ede8a3e20e35
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Mon Mar 7 17:47:43 2005 -0800

    [PATCH] ext3_test_root() speedup
    
    Reorder test_root testing from 3,5,7 to 7,5,3 so that average case becomes
    good.  Even number check is added.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb596f367f0112c71dd5b8d278dfdb8044074d53
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 17:47:28 2005 -0800

    [PATCH] ext3: free block accounting fix
    
    If we chose to "do_more", we would double-count the amount freed in the
    second and subsequent block groups.  Fix it the same way as was done in
    ext2 a couple of years ago.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94ee039d596b1a381a1070fe091e7d0f6aea7bf2
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 17:47:13 2005 -0800

    [PATCH] ext3 cleanup 1
    
    Rename variables in ext3/balloc.c as was done in ext2 a couple of years
    ago.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77579d37f7d47db7ed58517ded5a937d52feb0bd
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 17:46:59 2005 -0800

    [PATCH] Factor out phase 6 of journal_commit_transaction
    
    journal_commit_transaction() is 720 lines long.  This patch pulls about 55
    of them out into their own function, removes a goto and cleans up the
    control flow a little.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9338e33f2f8eb92826fbdb5da67fdaf5588246de
Author: Alex Tomas <alex@clusterfs.com>
Date:   Mon Mar 7 17:46:43 2005 -0800

    [PATCH] JBD: log space management optimization
    
    during truncate ext3 calls journal_forget() for freed blocks, but before
    these blocks go to the transaction and jbd reserves space in log for them
    (->t_outstanding_credits).  also, journal_forget() removes these blocks
    from the transaction, but doesn't correct log space reservation.  for
    example, removal of 500MB file reserves 136 blocks, but only 10 blocks go
    to the log.  a commit is expensive and correct reservation allows us to
    avoid needless commits.  here is the patch.  tested on UP.
    
    Signed-off-by: Alex Tomas <alex@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96761507cc998cb9c1c06f9d74bfa47cb11ae254
Author: Alex Tomas <alex@clusterfs.com>
Date:   Mon Mar 7 17:46:28 2005 -0800

    [PATCH] JBD: reduce stack and number of journal descriptors
    
    Dynamically allocate the holding array for kjournald write patching rather
    than allocating it on the stack.
    
    Signed-off-by: Alex Tomas <alex@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5025daf1ae75ab4d91f48cebb9af3d4a519e611b
Author: Alex Tomas <alex@clusterfs.com>
Date:   Mon Mar 7 17:46:14 2005 -0800

    [PATCH] jbd: journal overflow fix #2
    
    fix against credits leak in journal_release_buffer()
    
    The idea is to charge a buffer in journal_dirty_metadata(), not in
    journal_get_*_access()).  Each buffer has flag call
    journal_dirty_metadata() sets on the buffer.
    
    Signed-off-by: Alex Tomas <alex@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0142e3ff96edcf707297cf81e54d917664951a28
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 7 17:45:57 2005 -0800

    [PATCH] merge vt_struct into vc_data
    
    The vt_struct and vc_data are always allocated together, so there is no need
    for a separate vt_struct structure.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64ff3b1614f246772528ed88bdc519cc93b57f81
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 7 17:45:43 2005 -0800

    [PATCH] remove console_macros.h
    
    Remove the macros in console_macros.h and so make the structure references
    explicit.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 716a66395fbcdf572e3dcc972730f09e038656f3
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Mar 7 17:45:28 2005 -0800

    [PATCH] cleanup vc array access
    
    This removes as far as possible unneccessary vc_cons lookups by using a
    pointer to the vc_data structure instead of the index.  The hidden currcons
    argument in console_macros.h is temporarily replaced with a hidden vc pointer.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c035fc1241e9542f1a11dc7c275207548e67582c
Author: Peter Tiedemann <ptiedem@de.ibm.com>
Date:   Mon Mar 7 17:45:12 2005 -0800

    [PATCH] s390: ctc online/offline bug fix.
    
    ctc network driver changes:
     - Properly initialize ccw array. This fixes the stray oopses after
       an online/offline cycle.
     - Correct check for already existing channel.
     - Add missing kfrees.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89a3a1cf6841cbf2364eca962ce0606254ebe84d
Author: Ursula Braun-Krahl <braunu@de.ibm.com>
Date:   Mon Mar 7 17:44:57 2005 -0800

    [PATCH] s390: qeth layer 2, fake_ll and vlan bugs.
    
    With Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver changes:
     - Using layer 2 mode IPv6 multicast addresses has not been
       registered at the OSA card (??? FIXME)
     - We have to allow QETH_IP_THREAD in qeth_set_online too when
       running in layer 2 mode otherwise multicast addresses won't
       be registered at the OSA card.
     - fake_ll improvements for dhcpcd.
     - Strip ethernet header of VLAN packets before calling skb_pull.
       This fixes multicast VLAN traffic stalls.
     - Fix unused variable warning.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 580afb5e97347ab0b4ac1c4184632fc907c5e2d4
Author: Ursula Braun-Krahl <braunu@de.ibm.com>
Date:   Mon Mar 7 17:44:42 2005 -0800

    [PATCH] s390: iucv driver init call.
    
    iucv changes:
     - Initialize iucv with subsys_initcall to make sure that it is
       there before either vmlogrdr or netiucv start using it.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f99fc6de90c7fd0c1396a75b1bedac70be31f9c
Author: Eric Rossman <edrossma@us.ibm.com>
Date:   Mon Mar 7 17:44:28 2005 -0800

    [PATCH] s390: z90crypt reader task rescheduling.
    
    z90crypt device driver changes:
     - Correct the condition for which the reader task is scheduled to run.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39d324ae91fc312d2288564f533cc673f109cab7
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Mon Mar 7 17:44:13 2005 -0800

    [PATCH] s390: irb faking.
    
    Common i/o layer changes:
     - If a device driver tries to start I/O while the common I/O layer wants
       to start path verification, don't reject the I/O with -EBUSY (which
       might prompt the driver to retry the next tick) but seemingly accept
       the I/O and deliver a fake irb with deferred cc 1 after path
       verification has finished (prompting the driver to retry the I/O).
       This prevents the device driver from doing useless retries while cio
       is still busy with path verification.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d872210a0ac1de28f1a369e611811d53cd5fd97f
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Mon Mar 7 17:43:59 2005 -0800

    [PATCH] s390: common i/o layer.
    
    Common i/o layer changes:
     - Update scsw information before checking activity control bits in
       the offline processing.
     - Clear irb structure after cio initiated I/O completed.
     - Modify cdev private structure only while holding the lock.
     - Update scsw information before checking whether we can start path
       verification.
     - Only generate a notoper event if the device is not already in the
       not operation state, otherwise we end up with two unregister calls.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9c09a69edb5a1bb982c150233c31cf63b47b863
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 7 17:43:42 2005 -0800

    [PATCH] s390: key management.
    
    Add key management system calls.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc6fcffc7d3fc84d8895848885aefdb1e66812ec
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 7 17:43:28 2005 -0800

    [PATCH] s390: gcc4 compile fixes.
    
    Make s390 compile and work with gcc4.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43816472f92ab49da06001659a77042ae9c38463
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 7 17:43:13 2005 -0800

    [PATCH] s390: soft-float, 4GB swap bug, smp clean & cpu hotplug.
    
    s390 core changes:
     - Add -msoft-float to CFLAGS.
     - Remove experimantal tag from cpu hotplug.
     - Allow more than 4GB swap on a single device for 64 bit.
     - Fix race in machine_restart to make sure all cpus entered
       stopped state before reipl.
     - Cleanup: use for_each_online_cpu macro where possible.
     - Add argument brackets to __FD_SET/__FD_CLEAR/__FD_ZERO.
     - Reset cpu_present in smp startup to avoid long delays if only
       one cpu is defined.
     - Regenerate default configuration.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6f1216b0531e10c561fd962038ecf42e735c4b2
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Mar 7 17:42:58 2005 -0800

    [PATCH] uml: trivial removal of Makefile var
    
    That var is used only once, use its value directly.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 391d0122168225d25025c565939b48a2837abfd2
Author: Daniel Dickman <didickman@yahoo.com>
Date:   Mon Mar 7 17:42:42 2005 -0800

    [PATCH] m32r: use generic bug.h
    
    Signed-off-by: Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a99e0107531f732ac33dca63f265b908662d241d
Author: Barry K. Nathan <barryn@pobox.com>
Date:   Mon Mar 7 17:42:28 2005 -0800

    [PATCH] kconfig: DEBUG_PAGEALLOC and SOFTWARE_SUSPEND are incompatible on i386
    
    On i386, SOFTWARE_SUSPEND requires the CPU to have PSE support, but
    DEBUG_PAGEALLOC disables PSE.  Thus, allowing both options to be enabled
    simultaneously makes no sense.  This patch disables DEBUG_PAGEALLOC if
    SOFTWARE_SUSPEND is enabled; it also displays a comment to briefly explain
    why DEBUG_PAGEALLOC is missing in that case.
    
    I have tested this patch against oldconfig and menuconfig on 2.6.11-bk2.
    
    Signed-off-by: Barry K. Nathan <barryn@pobox.com>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b3add16438e5b180f3c270f83bc557c2e481e8a
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 7 17:42:13 2005 -0800

    [PATCH] swsusp fails to suspend if CONFIG_DEBUG_PAGEALLOC is also enabled
    
    swsusp low-level assembly requires PSE (4mb pages for kernel) and
    DEBUG_PAGEALLOC disables that capability.
    
    Tell people what went wrong, some people seen same problem on VIA cpus...
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d849deaaf2bd654663a4df3ff83fd34c6a5fd74
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 7 17:41:59 2005 -0800

    [PATCH] Update suspend-to-RAM vs. video documentation
    
    We got quite long list of machines and tricks needed to get them working.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56a25bd2cd79b069e7ef33ae1b0edf931f9b2cb5
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Mar 7 17:41:44 2005 -0800

    [PATCH] swsusp: do not use higher order memory allocations on suspend
    
    This is patch from Rafael, it eliminates order-5 (or worse) allocations
    during suspend.  I did few style/whitespace modifications.  It was tested
    by me, Rafael, and Stefan from SuSE.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c58d9bf44b89eac1971473636d573dfa4f5e578
Author: Pat Gefre <pfg@sgi.com>
Date:   Mon Mar 7 17:41:29 2005 -0800

    [PATCH] Altix: ioc4 serial driver support
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4685ed5e0d456b18a2d9b674658003d7547002fc
Author: Pat Gefre <pfg@sgi.com>
Date:   Mon Mar 7 17:41:13 2005 -0800

    [PATCH] Altix: Ignore input during early boot
    
    2.6 Altix console patch to ignore input during early booting
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 635f55990ad85d051dfeb5414c7b7c96b7056eca
Author: Andries Brouwer <andries.brouwer@cwi.nl>
Date:   Mon Mar 7 17:40:59 2005 -0800

    [PATCH] remove dead cyrix/centaur mtrr init code
    
    There are several cases where __init function pointers are stored in a
    general purpose struct.  For example, a SCSI template may contain a __init
    detect function.  Have not yet thought of an elegant way to avoid this.
    
    One such case is the mtrr code, where struct mtrr_ops has an init field
    pointing at __init functions.  Unless I overlook something, this case may
    be easy to settle, since the .init field is never used.
    
    The patch below comments out the declaration and initialisation of the
    .init field of struct mtrr_ops, and puts #if 0 ...  #endif around the
    centaur_mcr_init() and cyrix_arr_init() code.
    
    Simultaneously a number of variables are made static.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c00bf6a9889aaa8f0e79da2ad79b744bba708f1
Author: Christoph Lameter <christoph@graphe.net>
Date:   Mon Mar 7 17:40:43 2005 -0800

    [PATCH] Support HPET with a single timer for system time
    
    This patch removes the check for the existence of multiple HPET timers.  It
    allows the use of HPET with only a single timer for system time if
    HPET_EMULATE_RTC is not set.
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Shai Fultheim <Shai@Scalex86.org>
    Acked-by: "Pallipadi, Venkatesh" <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 113b500bbbe98c030047a667169135a915c274f3
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Mon Mar 7 17:40:29 2005 -0800

    [PATCH] x86: clean up FIXME in do_timer_interrupt
    
    Clean up the logic in do_timer_interrupt()
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18ecb76819dce3098efcba62a0f47ccd08ef70b7
Author: Rik van Riel <riel@redhat.com>
Date:   Mon Mar 7 17:40:13 2005 -0800

    [PATCH] cpuid takes unsigned arguments
    
    Because Xen is compiled with -Wall -Werror, has inherited processor.h from
    Linux and Fedora is now built with gcc4, I discovered this bug.
    
    The few callers I verified all call cpuid with unsigned ints, but the
    function is defined with signed ints.  This trivial patch fixes that.
    
    Signed-off-by: Rik van Riel <riel@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17ee4446dcdc111f6d111ed727924e829d6a839e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Mar 7 17:39:59 2005 -0800

    [PATCH] i386: C99 initializers for hw_interrupt_type structures
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cc880d1991d585ee6dcb055b66184ba843506f6
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Mon Mar 7 17:39:45 2005 -0800

    [PATCH] make highmem_start access only valid addresses (i386)
    
    When CONFIG_HIGHMEM=y, but ZONE_NORMAL isn't quite full, there is, of
    course, no actual memory at *high_memory.  This isn't a problem with normal
    virt<->phys translations because it's never dereferenced, but
    CONFIG_NONLINEAR is a bit more finicky.  So, don't do __va() in
    non-existent addresses.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a59ebd473267e48b525b62256efdfe42cbc7cab
Author: kianusch@sk-tech.net <kianusch@sk-tech.net>
Date:   Mon Mar 7 17:39:30 2005 -0800

    [PATCH] Support for GEODE CPUs
    
    Those CPU's are found mostly in embedded systems ...  one of the most
    prominent Hardware using GEODE CPU is probably soekris net4801
    (http://www.soekris.com).
    
    This patch has been on my homepage
    (http://www.sk-tech.net/support/soekris.html) for quite a time - but I've
    been asked several time to have it included in the main kernel.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf9c6f42fdc72a78e0851069489da3616ed1cf21
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 17:39:16 2005 -0800

    [PATCH] x86: iounmap() isa special case
    
    ioremap() has special-case handling for the IS region, but inunmap() does not.
     So iounmap() generates a warning when a caller correctly performs an
    ioremap()/iounmap() sequence.
    
    Fix that by teaching iounmap() about the IS address range.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dccafd6e87b700ca429461c62466de2e1e9183d3
Author: Henrik Brix Andersen <brix@gentoo.org>
Date:   Mon Mar 7 17:39:00 2005 -0800

    [PATCH] Determine SCx200 CB address at run-time
    
    The current SCx200 drivers use a fixed base address of 0x9000 for the
    Configuration Block, but some systems (at least the Soekris net4801) uses a
    base address of 0x6000.  This patch first tries the fixed address then - if
    no configuration block could be found - tries the address written to the
    Configuration Block Address Scratchpad register by the BIOS.
    
    Signed-off-by: Henrik Brix Andersen <brix@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54fe2b5bfa8887f57cfff32c81d124b56d9de3ac
Author: Andrea Arcangeli <andrea@novell.com>
Date:   Mon Mar 7 17:38:45 2005 -0800

    [PATCH] fix iounmap and a pageattr memleak (x86 and x86-64)
    
    Reject zero page vm-area request, align size properly and hide the guard page
    from the callers like ioremap - this avoids a kernel crash due one more page
    being passed to change_page_attr
    
    Signed-off-by: Andrea Arcangeli <andrea@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b525cd4479e68f1d642b58c1e8c5ea22f4889b11
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Mon Mar 7 17:38:30 2005 -0800

    [PATCH] x86: remove-free_all_bootmem() #define
    
    in arch/i386/mm/init.c, there's a #define for __free_all_bootmem():
    
    #ifndef CONFIG_DISCONTIGMEM
    #define __free_all_bootmem() free_all_bootmem()
    #else
    #define __free_all_bootmem() free_all_bootmem_node(NODE_DATA(0))
    #endif /* !CONFIG_DISCONTIGMEM */
    
    However, both of those functions end up eventually calling the same
    thing:
    
    	free_all_bootmem_core(NODE_DATA(0))
    
    This might have once been a placeholder for a more complex bootmem
    init call, but that never happened.  So, kill off the DISCONTIG
    version, and just call free_all_bootmem() directly in both cases.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70b833b54c4f72e2377cfd1fd7434ffdd413f869
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Mon Mar 7 17:38:15 2005 -0800

    [PATCH] x86: consolidate set_max_mapnr_init() implementations
    
    discontig.c has its own version of set_max_mapnr_init().  However, all that it
    really does differently from the mm/init.c version is skip setting max_mapnr
    (which doesn't exist because there's no mem_map[]).
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af916f7d5ae50defc34c41d6d5e4d6fa4da73925
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Mon Mar 7 17:37:59 2005 -0800

    [PATCH] x86: refactor memory setup
    
    Refactor the i386 default and CONFIG_DISCONTIG_MEM setup_memory() functions to
    share the common bootmem initialisation code.  This code is intended to be
    identical, but there are currently some fixes applied to one and not the
    other.  This patch extracts this common initialisation code.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7f21c708059cd1b10706802fa3379627f298660
Author: Keith Mannthey <kmannth@us.ibm.com>
Date:   Mon Mar 7 17:37:44 2005 -0800

    [PATCH] Allow hot-add enabled i386 NUMA box to boot
    
    Dave Hanson mentioned I should send this patch to you.  I posted it to
    linux-mm a while ago without complaint.  This patch solves a simple
    problem related to the interpretation on the SRAT table and the info
    found in the e820.
    
    When a possible hot-add area is exposed on my box (IBM x445 with hot
    add enabled in the bios) my SRAT table correctly exposed a new node from
    the end of my physical memory to 64gb.  In the present kernels the numa
    KVA areas (based on the SRAT) are calculated before find_max_pfn.  The
    remap area is created for this large non-populated zone and the system
    dies a while later during bootup.
    
    I believe the correct things to do (as did the hot-plug community) the
    correct thing to do is the keep the node_start_end_pfn data structures
    focuses on memory that is in the system.  That is all this patch does.
    It ignores any node data (correctly reported by the SRAT) that is above
    the e820 end of memory.
    
    Signed-off-by: Keith Mannthey <kmannth@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acd416955469541466df943ddd12f4ef0fe9d520
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:37:29 2005 -0800

    [PATCH] sh: merge updates
    
    More random cleanup and build fixes.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5408b494ce55e261995c73132d52f53f5927a2bf
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:37:13 2005 -0800

    [PATCH] sh: Update cpufreq driver for cpumask
    
    This updates the sh cpufreq driver for the cpumask changes.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bc8a5d23575d28db592319d0a43e28830556ea1
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:36:58 2005 -0800

    [PATCH] sh: framebuffer updates
    
    hitfb and pvr2fb were both recently broken by mainline changes, this gets them
    working properly again.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae71d5e5e74a7c8269654b81f098655acd67c98f
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:36:44 2005 -0800

    [PATCH] sh: hp620 updates
    
    This gets hp620 working again..
    
    Signed-off-by: Kristoffer Ericson <kristoffer@jlime.com>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abb15663ba1ad1d840510df30a9819cb4d09ce53
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:36:28 2005 -0800

    [PATCH] sh: generic hardirqs
    
    Convert sh to use generic hardirqs.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48c4c22e7f1a4f8fa91226ad2217157ced837700
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:36:13 2005 -0800

    [PATCH] sh: defconfig updates
    
    Nothing to see here, move along.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1edd5491c269eaeb8029205faca447e093afa405
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:35:43 2005 -0800

    [PATCH] sh64: merge updates
    
    Mostly random bugfixes and some build fixes, as well as killing off some
    leftover cruft.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25fc8acb452a641eba45066beee39b8a0735f7c6
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:35:28 2005 -0800

    [PATCH] sh64: Beat dcache disabling back into submission
    
    Somewhere along the line dcache disabling decided it wanted to stop itself
    from compiling.  So we fix it.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e46a5acd7e60d9ea42f88adc7a0b8c848dcf550e
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:35:14 2005 -0800

    [PATCH] sh64: Send cli()/sti() back from whence it came
    
    There were a couple of cli()/sti() users left, so we get rid of them..
    Hopefully this is the last of this mess.
    
    Signed-off-by: James Nelson <james4765@cwazy.co.uk>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73f7d2c5fbeff57f6a1077fc718bf3acd48db4cf
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:34:59 2005 -0800

    [PATCH] sh64: TMU init bugfix
    
    TMU0 initialization was broken when the timer was already started by someone
    else (for instance, a boot loader).  This fixes it.
    
    Signed-off-by: Andy Sturges <andy.sturges@st.com>
    Signed-off-by: Richard Curnow <rc@rc0.org.uk>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7aaa84d631a3e824384994e935a5779731f29bf4
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:34:45 2005 -0800

    [PATCH] sh64: IDE updates
    
    This fixes up a few minor IDE issues on sh64.  We also enable cayman on-board
    IDE in the SuperIO.
    
    Signed-off-by: Richard Curnow <rc@rc0.org.uk>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ccda9ad003925837271f7c10adc24a68a266411
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:34:30 2005 -0800

    [PATCH] sh64: generic hardirqs
    
    Convert sh64 to use generic hardirqs.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 601f593c4caf3e35f6458e1fa4fa146032cc5587
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:34:16 2005 -0800

    [PATCH] sh64: module support
    
    This adds support for modules.
    
    Signed-off-by: Richard Curnow <rc@rc0.org.uk>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c45c377693a0c468d0358d77cc3c78327a5a429
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:34:00 2005 -0800

    [PATCH] sh64: iomap interface.
    
    This adds support for the iomap interface to sh64.  As a result of this, we
    can also clean up a lot of the sh64 common I/O routines.
    
    We also add a board-specific ioport_map() for the cayman
    so we can use iomap generically.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 626f92b3e656587fa41a541a5727063f48b5c60c
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:33:45 2005 -0800

    [PATCH] sh64: defconfig updates
    
    Update for the cayman defconfig.  We also drop the generic arch/sh64/defconfig
    as it has very little hope of being kept up to date, so we use the cayman one
    instead.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fd5c7471890be4b218a0713130c3b5f57030a17
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:33:31 2005 -0800

    [PATCH] sh64: Align slab caches on an 8-byte boundary
    
    The BYTES_PER_WORD assumption doesn't work out on sh64 when we are using a
    32-bit ABI.  We want slab caches to be forced to a minimum alignment of
    8-bytes, as it was before Anton's change.
    
    This was also already discussed at length with Manfred in this thread:
    
    	http://marc.theaimsgroup.com/?l=linux-kernel&m=110227138116749&w=2
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f41b4f057b7d3d9908fbc71aadcb728a9534af2
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:33:17 2005 -0800

    [PATCH] sh64: Update Richard Curnow's MAINTAINERS info
    
    Fairly self explanatory..
    
    Signed-off-by: Richard Curnow <rc@rc0.org.uk>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fc9272d17629b1979d1781f0ffd8507391dc308
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:33:02 2005 -0800

    [PATCH] sh64: Initial checkstack port
    
    This provides a port of checkstack for sh64 for the simple frames
    allocated as an immediate with a single instruction.
    
    Stack frame creation on sh64 happens in a couple of different ways,
    when the frame size is less than 511 bytes an addi or addi.l is
    typically used, generally along the lines of something like:
    
    	addi{,.l}	r15, -IMM_FRAME_SIZE, r15
    
    For larger frames, this ends up getting split up into a
    movi/sub pair:
    
    	movi	IMM_FRAME_SIZE, rX
    	sub	r15, rX, r15
    
    We currently don't handle the split pair case, as basically
    any register can be used, and there is no easy way to determine
    what happens without scanning the prologue multiple times and
    using some sort of register cache (we already do something
    similar for the sh64 stack unwinder, but it would be preferable
    not to do this in perl..).
    
    This does have limited usefulness in that we are not easily able
    to check for huge frames without manual inspection, but this is
    still useful enough in the general case to be worth doing for
    the addi/addi.l case as long as people are aware of this caveat.
    
    It may be worth revisiting at a later point to try and catch the
    larger users though.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99e68e9c50b6a23170f7e1636df3d1b7767cbac0
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon Mar 7 17:32:48 2005 -0800

    [PATCH] mips: add spare timer init
    
    This patch adds spare timer initialization for NEC VR41xx.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 728a9e1ae87f6ff07793d2c60788440a832f4117
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:32:34 2005 -0800

    [PATCH] ppc64: allow dynamic enablement of EEH
    
    This patch is from John Rose <johnrose@austin.ibm.com>.
    
    EEH scans the system I/O adapters at boot for EEH-capabilities.  If no
    EEH-capable adapters are found, the subsystem is marked disabled for the life
    of the system.  EEH should allow dynamic enabling of the EEH subsystem when
    hotplug-adding an adapter.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b638a4c28ba89b3e4038a6d911d8f49007cd4f39
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:32:20 2005 -0800

    [PATCH] ppc64: set pci_io_base dynamically if necessary
    
    This patch is from John Rose <johnrose@austin.ibm.com>.
    
    Upon DLPAR addition of a PCI Host Brige to a system with purely virtual I/O,
    set pci_io_base as necessary.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9079a999e7dd6bbbe9159e17399742fb8fba2f08
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:32:05 2005 -0800

    [PATCH] ppc64: kprobes: handle trap variants while processing probes
    
    This patch is from Ananth N Mavinakayanahalli <ananth@in.ibm.com>.
    
    While processing a kprobe, we were currently not handling all available trap
    variants available on PowerPC.  This lead to the breakage of BUG() handling in
    ppc64.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0c257398e389038135cddfbfdf96015ba3c2b64
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:31:51 2005 -0800

    [PATCH] ppc64: C99 initializers for hw_interrupt_type
    
    This patch is from Thomas Gleixner <tglx@linutronix.de>.
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 944190acc934b05f95cfb5e5e79969f3f7dc469a
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:31:37 2005 -0800

    [PATCH] ppc64: fix init_boot_display link error
    
    This patch is from Amos Waterland <apw@us.ibm.com>.
    
    In pmac_setup.c, the function init_boot_display as currently written only
    makes sense with CONFIG_BOOTX_TEXT enabled, and causes a link error if it is
    not enabled.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1893318154215986b2141699ce96497667fb3af
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:31:23 2005 -0800

    [PATCH] ppc64: addresses from OF getting truncated to 32-bits
    
    This patch is from Jake Moilanen <moilanen@austin.ibm.com>,
    reformatted by me.
    
    The `assigned-addresses' property in the Open Firmware device tree
    nodes for PCI devices has 64 bits of PCI bus address, but we were only
    using 32.  This patch fixes it so we use all 64.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f766a9581cf53eb5cd4f7461334f70a2b11eb26
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 7 17:31:09 2005 -0800

    [PATCH] ppc64: Mode 2 PCI-X config space size fix
    
    This patch is from Brian King <brking@us.ibm.com>.
    
    When working with a PCI-X Mode 2 adapter on a PCI-X Mode 1 PPC64 system, the
    current code used to determine the config space size of a device results in a
    PCI Master abort and an EEH error, resulting in the device being taken
    offline.  This patch checks OF to see if the PCI bridge supports PCI-X Mode 2
    and fails config accesses beyond 256 bytes if it does not.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd2d5b6a2ad24c49149833c3141aedc0243954f7
Author: Colin Leroy <colin@colino.net>
Date:   Mon Mar 7 17:30:54 2005 -0800

    [PATCH] Make therm_adt746x handle latest powerbooks
    
    This patch lets therm_adt746x handle the latest powerbooks.  In these ones,
    Apple doesn't put the i2c bus number in the "reg" property of the fan node.
     Instead, we can get the bus number from the fan node path, which looks
    like "/proc/device-tree/.../i2c-bus@1/.../fan".  Here's a patch that
    handles both old and new form.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cd213647a38e979029e0872a318790e825d55b7
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Mon Mar 7 17:30:40 2005 -0800

    [PATCH] ppc32: add Radstone PPC7D platform support
    
    Radstone PPC7D are ppc7447A VME boards with Marvell Discovery-II, dual
    GigE, dual PMC, 6 serial ports, keyboard/mouse, USB and optional SCSI/VGA.
    This patch adds support for the PPC7D platform.
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24a4286fc41bfaf74460c90630a7ff9212bbf43a
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Mar 7 17:30:25 2005 -0800

    [PATCH] reiserfs: change reiserfs to use S_PRIVATE
    
    This patch changes reiserfs to use the VFS level private inode flags, and
    eliminates the old reiserfs private inode flag.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bf0b7bc87b078e1cd9f0baa2db30a991c4a285c
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Mar 7 17:30:08 2005 -0800

    [PATCH] reiserfs: private inode abstracted to static inline
    
    This patch moves the assignment of i_priv_object to a static inline.  This
    is in preparation for selinux support in reiserfs.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9993be5c50189f6a3366abe058d2dcf8bb451029
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Mar 7 17:29:53 2005 -0800

    [PATCH] selinux: internal inode loop needs IS_PRIVATE test
    
    This patch applies the IS_PRIVATE test to the selinux internal inode loop.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 415b536d1338a7b636f6c3866ba208c402168f47
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Mar 7 17:29:39 2005 -0800

    [PATCH] vfs: adds the S_PRIVATE flag and adds use to security
    
    This patch series adds SELinux support to reiserfs.
    
    This patch adds an S_PRIVATE flag to inode->i_flags to mark an inode as
    filesystem-internal. As such, it should be excepted from the security
    infrastructure to allow the filesystem to perform its own access control.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d5d36943259171d2a90f2499541c8a8f4e90d54
Author: Nigel Cunningham <ncunningham@cyclades.com>
Date:   Mon Mar 7 17:29:24 2005 -0800

    [PATCH] Speed freeing memory for suspend.
    
    Here's a patch I've prepared which improves the speed at which memory is freed
    prior to suspend.  It should be a big gain for swsusp.  For suspend2, it isn't
    used much, but has shown big improvements when I set a very low image size
    limit and had memory quite full.
    
    1GB P4, 2.6.11+Suspend2 2.1.8.
    Soft image size limit set to 2MB to emulate Pavel's implementation (eat
    as much memory as we can).
    
    Without patch:
    Freed  16545 pages in  4000 jiffies = 16.16 MB/s
    Freed  83281 pages in 14060 jiffies = 23.14 MB/s
    Freed 237754 pages in 41482 jiffies = 22.39 MB/s
    
    With patch:
    Freed  52257 pages in  6700 jiffies = 30.46 MB/s
    Freed 105693 pages in 11035 jiffies = 37.41 MB/s
    Freed 239007 pages in 18284 jiffies = 51.06 MB/s
    
    With a less aggressive image size limit (200MB):
    
    Without the patch:
    Freed  14600 pages in  1749 jiffies = 32.61 MB/s (Anomolous!)
    Freed  88563 pages in 14719 jiffies = 23.50 MB/s
    Freed 205734 pages in 32389 jiffies = 24.81 MB/s
    
    With the patch:
    Freed  68252 pages in   496 jiffies = 537.52 MB/s
    Freed 116464 pages in   569 jiffies = 798.54 MB/s
    Freed 209699 pages in   705 jiffies = 1161.89 MB/s
    
    The later pages take more work to get, which accounts for the slower MB/s with
    smaller numbers of pages to free.  Without the patch, though, getting the
    easier pages also takes longer because we do a far greater number of
    invocations of shrink_all_memory in order to get the same number of pages.
    
    Signed-Off-By: Nigel Cunningham <ncunningham@cyclades.com>
    Acked-By: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffdb99e08c87f006972d403b7e2e59e721bc57e1
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Mar 7 17:29:09 2005 -0800

    [PATCH] put newly registered shrinkers at the tail of the list
    
    This way we actually shake dentries before inodes and thus mark more
    inodes reclaimable once we shake them.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d80857d9abeb217dcb2f5ef8af7fcd37282fc61
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Mar 7 17:28:54 2005 -0800

    [PATCH] Bad page state mapcount
    
    A small change to the tests for "Bad page state", to avoid one class of the
    page_remove_rmap BUG reports, giving more information while letting the
    system continue: check page_mapcount (_mapcount != -1) rather than
    page_mapped (_mapcount >= 0).
    
    And how does _mapcount go bad?  In the case under study, it looks sure now
    that an overheating(?) Pentium III sometimes gets confused by a pair of
    instructions in the no-buddy-bitmap __free_pages_bulk, and clears the
    PG_private bit from the _mapcount field while buddying around - changing
    PG_private value changes the bit cleared from _mapcount.  Bad page state
    mapcount:-4096 would have tracked this down much sooner, and will be
    recognizable if other cpus show the same aberrant reaction to 2.6.11.
    
    The page_remove_rmap BUG does need to be replaced by more permissive and
    informative handling, but I'm not yet ready to to finalize such a patch.
    
    Please admit Colin Harrison to the Order of the Iridescent Penguin, for his
    tireless testing.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01b1ec7c228970200aceb1cf085c53853c1fb448
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Mon Mar 7 17:28:40 2005 -0800

    [PATCH] use find_trylock_page in free_swap_and_cache instead of hand coding
    
    Use find_*_page helpers in swap code instead handcoding it.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 577a3dd8fd68d24056075fdf479a1627586f8c46
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:28:25 2005 -0800

    [PATCH] readahead: trivial, small comments update
    
    On top of "[PATCH 2/2] readahead: improve sequential read detection".
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 671ccb4b50a6ef21e8c0ed0ef9070098295e1e61
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:28:11 2005 -0800

    [PATCH] readahead: improve sequential read detection
    
    1. Current code can't always detect sequential reading, in case
       when read size is not PAGE_CACHE_SIZE aligned.
    
       If application reads the file by 4096+512 chunks, we have:
       1st read: first read detected, prev_page = 2.
       2nd read: offset == 2, the read is considered random.
    
       page_cache_readahead() should treat prev_page == offset as
       sequential access. In this case it is better to ++offset,
       because of blockable_page_cache_readahead(offset, size).
    
    2. If application reads 4096 bytes with *ppos == 512, we have to
       read 2 pages, but req_size == 1 in do_generic_mapping_read().
    
       Usually it's not a problem. But in random read case it results
       in unnecessary page cache misses.
    
    ~$ time dd conv=notrunc if=/tmp/GIG of=/tmp/dummy bs=$((4096+512))
    
    2.6.11-clean:	real=370.35 user=0.16 sys=14.66
    2.6.11-patched:	real=234.49 user=0.19 sys=12.41
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8ca47af9571a3a8b0c59234e696de0e356ab253
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:27:57 2005 -0800

    [PATCH] readahead: simplify ra->size testing
    
    Currently page_cache_readahead() treats ra->size == 0 (first read)
    and ra->size == -1 (ra_off was called) separately, but does exactly
    the same in both cases.
    
    With this patch we may assume that the reading starts in 'ra_off()'
    state, so we don't need to consider the first read as a special case.
    
    
    file_ra_state_init() sets
    	ra->prev_page = -1;
    	ra->size      =  0;
    
    When the page_cache_readahead() is called for the first time it sets
    ra->size to nonzero value either via get_init_ra_size() or ra_off().
    So ra->size == 0 implies that ra->prev_page == -1. I am ignoring the
    case when readahead is disabled via ra->ra_pages == 0.
    
    
    page_cache_readahead detects sub-page sized reads:
    	if (offset == ra->prev_page && req_size == 1 && ra->size != 0)
    
    But if offset == ra->prev_page, then ra->size == 0 can happen only if
    offset == -1, so there is no need to check ra->size here. If application
    starts reading 16Tb file from the last page then readahead can't help.
    
    
    First offset==0 read or first sequential detection:
    	if ((ra->size == 0 && offset == 0) || (ra->size == -1 && sequential)
    could be changed to:
    	if ((ra->size == 0 && sequential) || (ra->size == -1 && sequential)
    which means:
    	if (sequential && (ra->size == 0 || ra->size == -1))
    
    
    Random case detection:
    	if (!sequential || (ra->size == 0))
    But if sequential == 1, then ra->size can't be 0, this case is already handled
    before.
    
    
    Now we have:
    
    	if (offset == ra->prev_page && req_size == 1)
    		/* sub-page reads */
    
    	if (sequential && (ra->size == 0 || ra->size == -1))
    		/* first offset==0 read or first sequential */
    
    	if (!sequential)
    		/* random case */
    
    Now ->size is checked only in one place, so ra_off() can set ra->size = 0,
    and we can just test ->size against 0.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccb8470e1893d035dcb47159adadefc6a0ade92d
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:27:43 2005 -0800

    [PATCH] readahead: cleanup blockable_page_cache_readahead()
    
    I think that do_page_cache_readahead() can be inlined in
    blockable_page_cache_readahead(), this makes the code a bit more readable in
    my opinion.
    
    Also makes check_ra_success() static inline.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b07c7787e289b0fb2f382eebca43e7e56a298bef
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:27:29 2005 -0800

    [PATCH] readahead: factor out duplicated code
    
    This patch introduces make_ahead_window() function for simplification of
    page_cache_readahead.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8a4cd6f10a54f95bd11ac552f89b62d2f17440b
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:27:15 2005 -0800

    [PATCH] readahead: cleanup get_next_ra_size()
    
    get_next_ra_size() can get all info from file_ra_state.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b359d55d0ac992f9e7464e85fe9ad3f51961ac1
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Mar 7 17:27:01 2005 -0800

    [PATCH] readahead: unneeded prev_page assignments
    
    There is no point in setting ra->prev_page before 'goto out', it will be
    overwritten anyway.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 192297988f8a790aa0371b636879774f8d8461b8
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Mar 7 17:26:46 2005 -0800

    [PATCH] copy_pte_range latency fix
    
    Ingo's patch to reduce scheduling latencies, by checking for lockbreak in
    copy_page_range, was in the -VP and -mm patchsets some months ago; but got
    preempted by the 4level rework, and not reinstated since.  Restore it now
    in copy_pte_range - which mercifully makes it easier.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dad361f28f6fd7041e86dbb516325bdc0940741b
Author: Gordon Jin <gordon.jin@intel.com>
Date:   Mon Mar 7 17:26:32 2005 -0800

    [PATCH] Fix mincore cornercases: overflow caused by large "len"
    
    This patch fixes 2 cornercases of overflow caused by argument len in
    sys_mincore():
    
    Case 1: len is so large that will overflow to 0 after page alignment.
    E.g. len=(size_t)(-1), i.e. 0xff...ff.
    Expected result: it's overflow and return ENOMEM.
    Current result: len is aligned to 0, then treated the same as len=0 and
    return succeed.
    This cornercase has been fixed in do_mmap_pgoff(), and here
    sys_mincore() also needs this fix.
    
    Case 2: len is a large number but will not overflow after alignment. But
    start+len will overflow.
    E.g. len=(size_t)(-PAGE_SIZE), and start>0.
    Expected result: it's overflow and return ENOMEM.
    Current result: return EINVAL. Looks like considering len as a
    non-positive value, probably influenced by manpage. But since the type
    of len is size_t, i.e. unsigned, it shouldn't be considered as
    non-positive value.
    I've also reported this inconsistency to manpage mincore.
    
    Signed-off-by: Gordon Jin <gordon.jin@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aef4321116978820a2dfa742e96bdd07094207e3
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Mon Mar 7 17:26:18 2005 -0800

    [PATCH] mempool: protect buffer overflow in mempool_resize
    
    - Race in mempool_resize: memcpy can copy at the end of the kmalloced
      elements.
    
    - When new_min_nr is same as min_nr, instead of reallocate and copy, just
      return, changed '<' to '<='.
    
    - Changed while condition to the same sense of if condition from '>' to
      '<'; it is easy to think with only one of the left and right brains at a
      time.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f2584c32dc409785580c6ae5e68fa541732e644
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Mon Mar 7 17:26:04 2005 -0800

    [PATCH] stop using "base" argument in __free_pages_bulk()
    
    Appended is a patch which stops using the zone->zone_mem_map to calculate
    the buddy and combined page pointers.  It uses the fact that the mem_map
    array is guaranteed to be contigious for the surrounding (1 << MAX_ORDER)
    pages.  The relative positions of the pages in the physical address space
    to provide the alignement; which conicidentally fixes the issue where zones
    are not aligned at MAX_ORDER.  There is a very comprehensive comment in the
    new code explaining the mathematical relationship between a page and its
    buddy so I won't reproduce it here.
    
    This kind of approach is required for CONFIG_NONLINEAR systems where the
    mem_map is not contiguous within a zone, and the zone->zone_mem_map is not
    used at all.
    
    This patch has been boot-tested on a large variety of systems and
    architectures: my P4 laptop, 16-way NUMAQ, 16-way Summit, 4-way x86 SMP,
    ppc64 LPAR, x86_64, and several ia64 configurations.
    
    It has been performance-tested on a 16-way NUMAQ.  SDET shows a very slight
    (within margin of error) performance gain.  Kernbench shows an
    approximately ~1% decrease in system time with this patch applied.  So, it
    has a likely positive performance impact.
    
    However, the patch has the potential to have a negative performance impact
    on systems with an expensive page_to_pfn() implementation.  But, I think
    the NUMAQ has one of the more expensive ones around, and it doesn't seem
    mind too much.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f1543f196c7bb79416b17faa567341ed587e941
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Mon Mar 7 17:25:50 2005 -0800

    [PATCH] vmscan: reclaim SWAP_CLUSTER_MAX pages in a single pass
    
    Here is another small OOM killer improvement.  Previously we needed to
    reclaim SWAP_CLUSTER_MAX pages in a single pass.  That should be changed so
    that we need only reclaim that many pages during the entire
    try_to_free_pages run, without going OOM.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fe1f5e6c07607c9fcb28227eda1427534a836bb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 7 17:25:35 2005 -0800

    [PATCH] simpler topdown mmap layout allocator
    
    1. typos/spelling ;-)
    
    2. removed prev_vma and find_vma_prev because the condition checked
       later was always true
    
    3. moved the free_area_cache/mmap_base check into arch_unmap_area_topdown
       where i think it belongs.
    
    4. removed the extra free_area_cache setting code in the while loop
       as it only has to be set when we actually (and successfully) return
       from this function.
    
    The only visible change to the layout should be the following:

commit 26eecbf3543b7a57699ce5b0bed82b84d3b61705
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Mon Mar 7 17:25:19 2005 -0800

    [PATCH] vm: pageout throttling
    
    With silly pageout testcases it is possible to place huge amounts of memory
    under I/O.  With a large request queue (CFQ uses 8192 requests) it is
    possible to place _all_ memory under I/O at the same time.
    
    This means that all memory is pinned and unreclaimable and the VM gets
    upset and goes oom.
    
    The patch limits the amount of memory which is under pageout writeout to be
    a little more than the amount of memory at which balance_dirty_pages()
    callers will synchronously throttle.
    
    This means that heavy pageout activity can starve heavy writeback activity
    completely, but heavy writeback activity will not cause starvation of
    pageout.  Because we don't want a simple `dd' to be causing excessive
    latencies in page reclaim.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf90416303a8720cab80d4664a910922431af8c0
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Mon Mar 7 17:25:05 2005 -0800

    [PATCH] make st seekable again
    
    Apparently `tar' errors out if it cannot perform lseek() against a tape.  Work
    around that in-kernel.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b86db5afefe306e5f14be1f6a635a949ed4d48d5
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Mon Mar 7 17:24:50 2005 -0800

    [PATCH] ppc32: Compilation fixes for Ebony, Luan and Ocotea
    
    this patch fixes the problem, that the current kernel (linux-2.6.11-rc5)
    could not be compiled, when "support for early boot texts over serial port"
    (CONFIG_SERIAL_TEXT_DEBUG=y) is active.
    
    Signed-off-by: Gerhard Jaeger <gjaeger@sysgo.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4328b65974e5ec430937b2e02c305a4d9686aa1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 17:24:37 2005 -0800

    [PATCH] macserial build fix
    
    `current' is a lousy choice for a variable name.  This driver explodes on
    ppc64 because `current' expands to (local_paca->__current).
    
    OK, the driver doesn't compile on power4 anyway, but...
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7cd6a3f8340fa43b67e01bcd81a1f77cff5e733
Author: Eric Lammerts <eric@lammerts.org>
Date:   Mon Mar 7 17:24:22 2005 -0800

    [PATCH] cramfs: small stat(2) fix
    
    When I stat(2) a device node on a cramfs, the st_blocks field is bogus
    (it's derived from the size field which in this case holds the major/minor
    numbers).  This makes du(1) output completely wrong.
    
    Signed-off-by: Eric Lammerts <eric@lammerts.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d96fb2db706ba4174688d856ee1459be55c71ed4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 17:24:08 2005 -0800

    [PATCH] ppc64: revert implement-a-vdso-and-use-it-for-signal-trampoline-gas-workaround
    
    We don't actually need this.
    
    The reason why the ppc64 build exploded was that I had CC="gcc -m64", and even
    though the build system turns that into "gcc -m64 -m32", that is,
    surprisingly, equivalent to "gcc -m64".
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee05e0b0a30a5e1965d1baeadaa3b534ad7a1686
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 7 17:23:53 2005 -0800

    [PATCH] remove drivers/char/tpqic02.c
    
    Since at about half a year, this driver was no longer selectable via
    Kconfig.
    
    Since it seems noone missed this driver, therefore this patch removes
    it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08b2d0889821c9b7b8364e1cb5c562f43a59ee3d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 17:23:39 2005 -0800

    [PATCH] x86_64 pte warning fix
    
    include/asm/pgtable.h:267: warning: `struct vm_area_struct' declared inside parameter list
    include/asm/pgtable.h:267: warning: its scope is only this definition or declaration, which is probably not what you want
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71d85f2762bc10dd50ae3e3b6c4e166ed0c2bfd3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 17:23:25 2005 -0800

    [PATCH] ppc: raid6 build fix
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d242462bc3b63f8a5952e8faef6802ae5f21c6a
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Mar 7 17:23:11 2005 -0800

    [PATCH] ppc32: fix for e500 oprofile build
    
    Fix for trivial fix for 2.6.11 oprofile compilation on e500 based ppc.
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98390435429fe6db229c33cbeb2a4fdc427328e0
Merge: d12ac83... 726a118...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Mar 7 16:46:33 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 30b4c1c8b117aef287f20bd11f86974e9d690fef
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Mar 7 16:18:50 2005 -0800

    epoll: return proper error on overflow condition
    
    Noted by Georgi Guninski.

commit 22c4934d32672c186cbf03e148f1ae8448e0110f
Merge: 58a96a6... b1907dc...
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Mar 8 10:58:51 2005 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit b1907dc179027c12af8cb8af064010a6ae0360fb
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Mar 8 10:55:26 2005 +1100

    [XFS] fix DMAPI & NOSPACE data corruption
    
    SGI-PV: 931297
    SGI-Modid: xfs-linux:xfs-kern:188833a
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 73747a8d230aecf3043687e5ce544c181c4247d2
Author: Greg Banks <gnb@sgi.com>
Date:   Tue Mar 8 10:54:09 2005 +1100

    [XFS] Make XFS provide encoding and decoding callbacks from knfsd which
    encode the fileid portion of the NFS filehandle differently than the
    default functions.  The new fileid formats allow filesystems mounted with
    "inode64" to be exported over NFSv3 (and NFSv2 if you also use the
    "no_subtree_check" export option).
    
    SGI-PV: 902621
    SGI-Modid: xfs-linux:xfs-kern:21686a
    Signed-off-by: Greg Banks <gnb@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d1a1bba17fd3bd60cb46f9190b9a9c0e2027033f
Author: Timothy Shimmin <tes@sgi.com>
Date:   Tue Mar 8 10:52:40 2005 +1100

    [XFS] Revokes revision 1.37 of xfs_acl.c. It caused CAPP evaluation to
    break as it always requires exec permission for directories when the aim
    was really meant for non-dir executables. See pv#930290.
    
    SGI-PV: 930290
    SGI-Modid: xfs-linux:xfs-kern:21668a
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 8f562e9d1ac8d1e3079fddee13f4d497c4fd6c05
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Mar 8 10:51:26 2005 +1100

    [XFS] Fix and streamline directory inode number handling
    
    SGI-PV: 930401
    SGI-Modid: xfs-linux:xfs-kern:187996a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 557aefb0596bb38e6d95f0042b3aaa09f4972cc3
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Mar 8 10:47:06 2005 +1100

    [XFS] Update copyright to 2005
    
    SGI-PV: 929263
    SGI-Modid: xfs-linux:xfs-kern:187126a
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 42a825bec3181ce3f936f2938f1ce5b264a73ec6
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Tue Mar 8 10:44:25 2005 +1100

    [XFS] dmapi - Execution of an offline script or binary fails.  If a user
    thread is trying to execute the file that is offline then the HSM won't
    get write access when it attempts invisible I/O to bring it online because
    the user thread has already denied write access...but that thread is
    waiting for us to write the file....  So add a callout from open_exec() to
    give DMAPI an early notice that the file must be online.
    
    SGI-PV: 929263
    SGI-Modid: xfs-linux:xfs-kern:186543a
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit bb053133502adebcba2d28f62aa8dad92c14f1f9
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Mar 8 10:38:16 2005 +1100

    [XFS] pagebuf_lock_value is also needed for trace builds
    
    SGI-PV: 928101
    SGI-Modid: xfs-linux:xfs-kern:185972a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f6a2fac22129032e816a7a176159c20794302bff
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Mar 8 10:37:01 2005 +1100

    [XFS] Remove INT_ZERO and INT_ISZERO
    
    SGI-PV: 928382
    SGI-Modid: xfs-linux:xfs-kern:185768a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d7469ccae00e6a241d4736eb882911290842e9e2
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Mar 8 10:35:06 2005 +1100

    [XFS] Stop passing ARCH_CONVERT/ARCH_NOCONVERT around everywhere
    
    SGI-PV: 928382
    SGI-Modid: xfs-linux:xfs-kern:185644a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit e6c635c14422eb2016f1bb2b91daf34588fcd2ef
Author: Christoph Hellwig <hch@sgi.com>
Date:   Tue Mar 8 09:53:40 2005 +1100

    [XFS] Don't dereference user pointers in xattr by handle ioctls
    
    SGI-PV: 930402
    SGI-Modid: xfs-linux:xfs-kern:187995a
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a4bc8f1c791fa542a6f0f8043b670690894bd440
Merge: c1c4077... caa533e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 7 13:31:52 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/via-rhine
    into pobox.com:/garz/repo/net-drivers-2.6

commit c1c40774b934d21fbb4058854e7b234bf3c7ee75
Merge: a948a06... 006beb9...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 7 13:30:48 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/sis900
    into pobox.com:/garz/repo/net-drivers-2.6

commit a948a06e0cd030d5213f110e3ee283e9b61ffee1
Merge: cf6d3eb... 5264605...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 7 13:29:12 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/viro-iomap-orinoco
    into pobox.com:/garz/repo/net-drivers-2.6

commit cf6d3eb745ada1ee94fdaa42b90de6856fc2d7ca
Merge: 8f3dca8... ce7916c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 7 13:28:06 2005 -0500

    Hand-merge MV643xx ethernet Kconfig dependencies.

commit 8f3dca899a3ae7103dee86279ca82e84d5b6d513
Merge: 726a118... c8d9f6e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Mar 7 13:25:35 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/ham
    into pobox.com:/garz/repo/net-drivers-2.6

commit 40f1626986f711eb7d9b281a6f374b575aa4221c
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 09:10:37 2005 -0800

    [PATCH] USB: compat ioctl for submiting URB
    
    From: Christopher Li <chrisl@vmware.com>
    
    - Let usbdevfs directly handle 32 bit URB ioctl. More specifically:
      USBDEVFS_SUBMITURB32, USBDEVFS_REAPURB32 and USBDEVFS_REAPURBNDELAY32.
      Those asynchronous ioctls are too complicate to handle by the
      compatible layer.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit daaa099fa07f314d799df5be96e63bd27f4ae3a6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 09:05:49 2005 -0800

    [PATCH] USB: fix up HZ change in zd1201 driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1dafc7a8bc1ac2c801674d5f72eff42fbe9d4167
Author: Jeroen Vreeken <pe1rxq@amsat.org>
Date:   Mon Mar 7 09:05:26 2005 -0800

    [PATCH] USB: add zd1201 wireless lan driver
    
    Signed-off-by: Jeroen Vreeken <pe1rxq@amsat.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f1ddb9ae83f17e3c08a3dd26b1d4546d81f4413
Author: Sean Young <sean@mess.org>
Date:   Mon Mar 7 09:05:04 2005 -0800

    [PATCH] USB: PhidgetKit driver update
    
    A small patch for drivers/usb/misc/phidgetkit.c:
    
    Fixes for PhidgetInterfaceKit 0/0/4, by Chris Strandt <chris@firetrim.com>
    
    Signed-off-by: Sean Young <sean@mess.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d077d0d0af5a702d9e81046b2faad9c429f6f493
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Mon Mar 7 09:04:42 2005 -0800

    [PATCH] USB: Fix use after free in usb/core/devices.c
    
    There's a low probability use-after-free here caused by some switched
    pointers, st needs to go back to file->private_data
    
    Found by Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c66f8b2e7d9bac6ef3efbd7e3b3d7460da400bc
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 09:04:22 2005 -0800

    [PATCH] USB Storage: Unusual_devs entry for Nikon DSC D70
    
    Here's a new unusual_devs.h entry for the Nikon DSC D70 camera, which
    suffers the common problem of reporting one more sector than it actually
    has.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a34c50b6d997636a46bfe6989f9489b3902ab5bb
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 09:04:01 2005 -0800

    [PATCH] usb/ftdi_sio: convert WDR_TIMEOUT to milliseconds
    
    WDR_TIMEOUT was not updated with the the other constants related to
    converting the final parameter of usb_{control,bulk}_msg() to
    milliseconds.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0b42600919b25bb6fd64fb04b5ed793fcb4e1e3d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 09:03:39 2005 -0800

    [PATCH] usb/usblp: convert USBLP_WRITE_TIMEOUT to milliseconds
    
    USBLP_WRITE_TIMEOUT was not updated with the the other constants related
    to converting the final parameter of usb_{control,bulk}_msg() to
    milliseconds.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 009e0e6ad0a6960e493f20ed911e8b7af37efafe
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon Mar 7 09:03:15 2005 -0800

    [PATCH] [PATCH] Add US_FL_GO_SLOW flag,
    
    This adds the US_FL_GO_SLOW flag. This flag is for devices that need a
    110 usec delay during high-speed transfers. This seems to be limited to
    USB-to-IDE chips. Unusual_dev entries for affected devices are included.
    
    This has been thrown around in the usb-storage list for a while now, and
    I believe everyone is happy with it.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 193a5041ba02972ebaebf4684897cab835d1ead1
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 09:02:53 2005 -0800

    [PATCH] USB: pxa2xx_udc tweak
    
    Add a missing local_irq_restore() on the SET_CONFIGURATION completion path.
    
    From: Eugeny S. Mints <emints@ru.mvista.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b465d750f41b17a29b6a33feda9a1f8ab1b823a3
Author: Petko Manolov <petkan@nucleusys.com>
Date:   Mon Mar 7 09:02:31 2005 -0800

    [PATCH] USB: pegasus and rtl8150 cset for proper link detection
    
    changes mainly include adding work queue to both drivers
    and a bunch of other small fixes.
    
    Signed-off-by: Petko Manolov <petkan@nucleusys.com>

commit e95ea9819755f1e2ed599a72c5fbbb70166fe06a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 09:02:09 2005 -0800

    [PATCH] USB Documentation update: USB error codes
    
    This patch fixes a documentation error I made earlier and clears up the
    meaning of the -ETIMEDOUT error code in urb->status.  Some host controller
    drivers _do_ use that code to indicate no response was received from the
    device, which can be confusing since the same code is also used when a
    request's timer expires.  In the future it would be a good idea to change
    the second usage (as returned by usb_bulk_msg and usb_control_msg) to
    -ETIME.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 85cdb10b75a165593c13d5683b8cf2037a263e0c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:55:59 2005 -0800

    [PATCH] USB: fix up compiler warnings when CONFIG_USB_DEBUG is not set.
    
    As pointed out by Kay Sievers <kay.sievers@vrfy.org>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 91acf357bce1fb0ffbd231e858ad95e6ea329015
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:55:39 2005 -0800

    [PATCH] USB: fix memory leak in get_string if usb_string() call failed.
    
    Pointed out by Alan Stern <stern@rowland.harvard.edu>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b3bda4b9e513aef5e580c19f98a528260c41c036
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:55:16 2005 -0800

    [PATCH] USB: cache the iConfiguration string, if present.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ed5e73976cfa2755ee7a972e54fbc2fc610fc44
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:54:56 2005 -0800

    [PATCH] USB: make iInterface string cached
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 691e95cdcd5444ea558b78feb1a27ded302b88b0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:54:31 2005 -0800

    [PATCH] USB: remove string fetches from the usb-storage core, have them used the cached versions instead.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c0e5913ed83a8a85c06bc8c0b6cb3959dc0576b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:54:10 2005 -0800

    [PATCH] USB: fix up the input drivers to use the built in strings, instead of re-reading them from the device.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 769846655096a00d8ac0bd9b59505885e9a77735
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 08:53:47 2005 -0800

    [PATCH] USB: cache the product, manufacturer, and serial number strings at device insertion.
    
    This should fix a lot of issues with broken devices that can't handle retrieving strings
    while they are doing something else (strings would be fetched from usbfs and sysfs entries.)
    
    Based on a patch that has been in the SuSE kernel tree for a long time from Olaf Hering <olh@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ac6190ee1fabf78923c4fa1bb58fb48a7f33032
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 08:45:11 2005 -0800

    [PATCH] USB: fix ohci Kconfig entry
    
    The recently merged AMD/Alchemy Au1xxx OHCI driver won't configure
    on boards which also have PCI support; this resolves that.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1e95f148b36f1e8609e6861915155ba9e6d3afb9
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:44:49 2005 -0800

    [PATCH] USB: Don't return IRQ_NONE for edge-triggered interrupts
    
    On Tue, 15 Feb 2005, Greg Kroah-Hartman wrote:
    > Thanks, I've applied all of them except as460 as there seemed to be
    > confusion about that one.  Care to respin that one based on all of the
    > comments given to it?
    
    It turns out that patch as460 is all right as it stands, and the addition
    of the patch below will resolve the problem.  It prevents the OHCI drivers
    from returning IRQ_NONE on architectures that use edge-triggered
    interrupts.  The patch has been OK'ed by Christopher and David.  Just be
    sure to apply this one and as460 at the same time!
    
    Properly speaking this problem ought to be fixed in the interrupt core
    since it affects every driver, not just USB.  Until that happens, this
    will suffice.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 32e26c32feffbd23886d1af01e4c7a18acd92ae0
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:44:22 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the ohci-sa1111 driver to accomodate
    the new usb_add_hcd, usb_remove_hcd routines.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1e8abf5589ead78b86fddbd80062b4cc8fc5340
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:43:55 2005 -0800

    [PATCH] USB: Fix race in URB submission vs. endpoint-disable
    
    This patch fixes a race between URB submission and endpoint-disable.  (I
    don't know that it's actually possible to trigger the race, but it won't
    hurt to move the appropriate test inside the region protected by the
    spinlock.)  In addition, an out-of-date comment referring to timeouts is
    removed.
    
    The patch also changes the error code returned when an URB is submitted
    for a nonexistent or disabled endpoint to -ENOENT and documents the error
    code (which was already in use by usbfs) in
    Documentation/usb/error-codes.txt.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 660a6dbc708c226b7d3be351977667ad817eac8b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:43:29 2005 -0800

    [PATCH] USB: Clear endpoint toggles in usb_set_interface
    
    Pete Zaitcev has found some USB devices that don't reset their endpoint
    data toggles when they get a SET-INTERFACE request.  Apparently they
    interpret the USB specification too literally when it says that the
    toggles must be reset whenever the alternate setting is "changed".
    
    Anyway, this patch calls usb_clear_halt for all endpoints in the
    altsetting whenever usb_set_interface is called and the new altsetting is
    the same as the old one.  It adds some extra overhead for the majority of
    devices that don't need it, but fortunately usb_set_interface isn't called
    very often.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6aa4db4f69a94a4b04f1a1d658d64b617cce660c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:43:04 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the ohci-au1xxx driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1901255a329920505540c16df2e898eadaedd718
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:42:37 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the sl811-hcd driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 505a9d1a8d954245ea53a73dd716ff291b0860fb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:42:13 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the ohci-pxa27x driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 24623ee5c2c14e3cdb4a754d4a3c382e6c6e9ff2
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:41:46 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the ohci-ppc-soc driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 257d760fc816ce7d761fe8e9dcf72b9c04e8fcac
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:41:20 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the ohci-omap driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 803e2a6c28f6da0fd63a55cfcf5eb47425a85a26
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:40:59 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes for the ohci-lh7a404 driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30ddf079e13b097ef1517188ce3f7b8f6f1023bd
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:40:34 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes for the dummy-hcd driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ae92c37a3c9719b94a70c2c81a1465c5a4a54443
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:40:13 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes for the core hcd-pci file and the uhci-hcd
    driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 429339343cbb38cf9278e61a267e2913628904f2
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:39:47 2005 -0800

    [PATCH] USBcore: implement usb_add_hcd and usb_remove_hcd
    
    This patch contains the changes to the hcd glue layer in usbcore.  It is a
    prerequisite for all the other patches (which are all otherwise
    independent).
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d2a18988271d0708a9d3888128a3204c3d096f03
Author: Brian Murphy <brian@murphy.dk>
Date:   Mon Mar 7 08:39:20 2005 -0800

    [PATCH] USB: usbfs: remove debug message
    
    	this removes a warning message which only contains
    data which is in any case returned to user space. This message
    is especially annoying when polling with short timeouts, filling
    up the log files and polluting the console. As agreed with
    David Brownell.
    
    
    Signed-off-by: Brian Murphy <brian@murphy.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e4897aa537c1293c14dc53bea6d1dfaf078409d4
Author: Brian Murphy <brian@murphy.dk>
Date:   Mon Mar 7 08:38:55 2005 -0800

    [PATCH] USB: set timeout message to debug level: message.c
    
    	this makes a the debug message on timeout be at debug level
    so it only exists when compiling with explicit debugging support.
    I have added information about the request length and data length
    as now if the data length is non-zero a 0 status is returned.
    
    Signed-off-by: Brian Murphy <brian@murphy.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc4ce180e8d236fc46fbe6eb95f6c33d33d0c5cb
Author: Brian Murphy <brian@murphy.dk>
Date:   Mon Mar 7 08:38:29 2005 -0800

    [PATCH] USB: usbfs fix for data loss in message.c
    
    	This is my fix for usbfs losing data when the urb
    is timed out but already contains data.
    
    Signed-off-by: Brian Murphy <brian@murphy.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3e457d79f614c7c39d8052ed0d010c1441ad9b06
Author: hwelte@hmw-consulting.de <hwelte@hmw-consulting.de>
Date:   Mon Mar 7 08:38:00 2005 -0800

    [PATCH] [PATCH 2.6] maintainers / documentation update cyberjack
    
    Here's a pure documentation update for the cyberjack driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c25464ac9c9269a3c37cdc089867cc2bc7c85617
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 08:37:33 2005 -0800

    [PATCH] usb-storage: Don't log expected signatures
    
    This fairly trivial patch makes three small changes:
    
    	Correct a typo in a comment.
    
    	Don't print a debugging message when a USB mass-storage device
    	uses the standard signature (the one we would expect normally).
    
    	Shorten a debugging message and add a newline.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5f9957f732f740ea93297fed4a28f654203d8e2c
Author: 050035w@acadiau.ca <050035w@acadiau.ca>
Date:   Mon Mar 7 08:37:10 2005 -0800

    [PATCH] USB: fix error in usb_skel.c
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4563b2853b630c88844b355b8f349c82a521c8b9
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 08:36:42 2005 -0800

    [PATCH] USB: usbnet uses NET_IP_ALIGN
    
    Go back to aligning RX packets to make the IP layer happy, now that
    there's an appropriately platform-specific way to do this.  This should
    be only a performance tweak.  However, the alignment handlers on some
    platforms don't seem to behave; so it may have correctness impacts too.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e789da4a1b685972e9aa920f11129407ccee8d6
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 08:36:16 2005 -0800

    [PATCH] USB: teach gadget drivers about s3c2410_udc
    
    This patch makes gadget drivers recognize the UDC controller in
    the Samsung s3c2310 (ARMv4T).  This is used in the iPaq H1940,
    partially supported by Linux, as well as various other devices.
    A controller driver is available, though it's not yet submitted.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d20dd36774235b0b3c39853f26fc46d776bd2ae
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 08:35:50 2005 -0800

    [PATCH] USB: ehci updates for TDI/ATG silicon
    
    This patch updates support for the TDI EHCI controller, which is mostly
    used on non-PCI systems:
    
        - Correctly initialize the latest chip, which has both host (EHCI)
          and peripheral modes.
    
        - Initialize split isochronous transfers to use the integrated TT.
    
    Most of the patch, by volume, just changes the company name from ARC to TDI in
    the source code; TransDimension bought ARC's peripheral connectivity business.
    
    From: Craig Nadler <cnadler@transdimension.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4107b47e41fc6a738ffa8ba7d57a0a08f9cd2e51
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 08:35:22 2005 -0800

    [PATCH] USB: ethernet gadget driver aligns IP headers
    
    Align incoming Ethernet packets so the header after Ethernet starts on
    something closer to a cacheline boundary.  This normally just tweaks
    performance for the IP layer.  But on one board (a no-MMU ARM9TDMI with
    no hardware support for alignment fixups) it's needed to prevent the
    IP checksumming code from failing.
    
    From: Thomas Brinker <thomas.brinker@gmx.de>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 04dccf6fc1b06a3e7481209290b5aa9e1444e4cf
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Mon Mar 7 17:30:12 2005 +0100

    input: hid-debug.h includes resolv_event, which is not used if DEBUG is only
           enabled in hid-core, but _is_ used when DEBUG is also enabled in hid-input.
           Mark the function with __attribute__((unused)) to silence the warning
           when only hid-core is being DEBUGged.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit c10b5f89465c543eb8fdfc78d1f452ee2e606ddb
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Mar 7 17:29:15 2005 +0100

    Input: export psmouse module parameters via sysfs:
              /sys/module/psmouse/parameters/proto
              /sys/module/psmouse/parameters/rate
              /sys/module/psmouse/parameters/resetafter
              /sys/module/psmouse/parameters/resolution
              /sys/module/psmouse/parameters/smartscroll
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 6889030e47f4eb56554c5c3592e73279b4ab595f
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Mar 7 17:28:44 2005 +0100

    Input: i8042 - disable MUX mode on some Fujitsu notebooks as it
           does not seem to be working properly and requires psmouse
           module to be reloaded several times for touchpad to be
           identified correctly.
           Since none of these notebooks have external PS/2 ports
           disabling MUX should have no drawbacks.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit f13751ac8585c298a3ddbff12ad246db9fa76348
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:28:41 2005 -0800

    [PATCH] dvb/ttusb_dec: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f434d8072122fec43daca0d8690dda570a6da43
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:28:14 2005 -0800

    [PATCH] dvb/dvb-ttusb-budget: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 06458b493a52bc36b8c458a88da9e6662372274f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:27:47 2005 -0800

    [PATCH] dvb/dvb-dibusb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. This constant is only used for these functions. Patch is
    compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d36d00d7adcd52e949799b1e19725ca7a2ce11b7
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Mar 7 17:27:41 2005 +0100

    input: some whitespace and formatting cleanup in Corgi drivers.
           Also change del_timer to del_timer_sync in corgikbd and
           add missing del_timer_sync to corgi_ts.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 45ce22c9565c0eec543b79b33da7ce2226c22cad
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:27:22 2005 -0800

    [PATCH] dvb/cinergyT2: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d8724f3c050663eb65b568eb0305304d4be187e1
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:26:55 2005 -0800

    [PATCH] video/cpia_usb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ef81cfa50ad1babccf55d81e1a9b6a126e4b3fac
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:26:29 2005 -0800

    [PATCH] dvb/dvb-dibusb-firmware: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86cb57d61d57113183a7a22986f3e296442caec3
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:26:02 2005 -0800

    [PATCH] dvb/b2c2-usb-core: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94eff96a64eb2e300f354fef015a0938b0ad70f9
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:25:38 2005 -0800

    [PATCH] sound/usX2Yhwdep: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 186ac22a33d42a9f28e7230253e3bd3fa38ad3e3
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:25:11 2005 -0800

    [PATCH] sound/usbmixer: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 885542ce9c9ee33db5169e75322802443e04b0ee
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:24:43 2005 -0800

    [PATCH] w1/dscore: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c7d84c906328e4866a8317855e52e2ebb2c54398
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Mar 7 17:24:32 2005 +0100

    input: Fix compiler warning in trident gameport code with enabled debugging
           and compiler error in ymfpci when compiled without gameport support.
    
    From: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 1ef6039267825a4d2332c3d664fdfab16e0557f7
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:24:17 2005 -0800

    [PATCH] net/stir4200: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0eb8d9929029c2a70079d8894ad025c4e942af71
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:23:52 2005 -0800

    [PATCH] net/irda-usb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fe2363fdc99cfc5fd3b330c2a837078bb1e4763b
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:23:26 2005 -0800

    [PATCH] char/pcwd_usb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fef49ff06d3c7c905477a4c259e1d809daf866f8
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:23:00 2005 -0800

    [PATCH] bluetooth/bfusb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2ae6ec48f2dd52dc67f187dc712c3720cb56612e
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:22:34 2005 -0800

    [PATCH] usb/usb-skeleton: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1c4f069598a59d2068c3826a3bb45d880cb4322
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:22:07 2005 -0800

    [PATCH] usb/whiteheat: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 325f7ddf2eee6d234ec8ee0706888e81199718e9
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:21:41 2005 -0800

    [PATCH] usb/rio500: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6c6609336225242bc2ed97629876672919e0f3d7
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:21:14 2005 -0800

    [PATCH] usb/visor: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02c0fe34db7db814917b5723fdc481e2798bcb19
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:20:48 2005 -0800

    [PATCH] usb/ti_usb_3410_5052: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b59a9a27663c3711d2b8408baa6435576bf61780
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:20:21 2005 -0800

    [PATCH] usb/mct_u232: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6d6e3870b223c14933bd56d8ac5a7b7aafdcbaa8
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:19:54 2005 -0800

    [PATCH] usb/kl5kusb105: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34baaf6d0623d359b8d84e95024205422d94bb37
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:19:28 2005 -0800

    [PATCH] usb/keyspan_pda: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ed5a0b3c6c00b43c696516289bf346689d2cc623
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:19:01 2005 -0800

    [PATCH] usb/ir-usb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4118cf2f4e6c22b883f7a357832b8a1f0f0e6ab9
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:18:33 2005 -0800

    [PATCH] usb/ipw: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e49e633a6db792958ee774dd9ad90f8deaead816
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:18:07 2005 -0800

    [PATCH] usb/ipaq: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 307728d412c7cbedb7969fdc1ceee2fd267309f8
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:17:40 2005 -0800

    [PATCH] usb/io_ti: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8dfa13d07ac199c13d32850388e26ac157c0945a
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:17:13 2005 -0800

    [PATCH] usb/ezusb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 17740e8cfea5d56795ece0f6c63b3b546a74aa53
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:16:49 2005 -0800

    [PATCH] usb/belkin_sa: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2142e3d46ae6bca53c2d6b05d22aa943b7e28cb3
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:16:23 2005 -0800

    [PATCH] usb/usbnet: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Remove unused jiffy-unit constant. Patch is
    compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e7ad921b8a17338d11e20bf12b68537d3df9c90f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:15:59 2005 -0800

    [PATCH] usb/rtl8150: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 531ccfbb32f695485dc9122568fe9d9fd4baa534
Author: Christophe Lucas <c.lucas@ifrance.com>
Date:   Mon Mar 7 17:15:42 2005 +0100

    input: convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 79eab0b0536fa790769dd77ce380c302b455ff3a
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:15:32 2005 -0800

    [PATCH] usb/catc: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b466f041c68af45905f845271c8f95c4b1eeb7fa
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:15:09 2005 -0800

    [PATCH] usb/uss720: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8198474ddf4fcaa85740b78775967e81448600ec
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:14:43 2005 -0800

    [PATCH] usb/usbled: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5137ada891bb0d136285cbc05beccf1480a1e440
Author: akropel@rochester.rr.com <akropel@rochester.rr.com>
Date:   Mon Mar 7 17:14:28 2005 +0100

    input: hid-debug.h uses a C99 feature (range designators) not available in
           gcc-2.95. Since gcc-2.95 is still a supported compiler for 2.6 and the
           initializers as used here add no functional value, this patch removes
           them. gcc-2.95 is then able to compile hid-core with DEBUG enabled.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0e2838f17f25c3a7662fbea55f0d840e9681833d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:14:16 2005 -0800

    [PATCH] usb/phidgetservo: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d68f9d889caf7f5c9e047bb179561b424da89b1
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:13:49 2005 -0800

    [PATCH] usb/phidgetkit: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 13f139772a0c8354dc43d1a12ff9292ed405e667
Author: John Lenz <lenz@cs.wisc.edu>
Date:   Mon Mar 7 17:13:27 2005 +0100

    input: This patch is for the keyboard on Sharp Zaurus collie and poodle
           models (SL5000, SL5500, and SL5600).  It uses the devices exported
           in arch/arm/common/locomo.c.  The pressed state of the keys is now
           handled by the input layer rather than directly in this driver.
    
    More information about the status of Zaurus (and some extra patches
    if you need to test this out) can be found on my web page at
    http://www.cs.wisc.edu/~lenz/zaurus
    
    Signed-off-by: John Lenz <lenz@cs.wisc.edu>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 63d394cc0f19fcc1a08a78d8832e3e0d86e43ee6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:13:24 2005 -0800

    [PATCH] usb/legousbtower: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9e14f8930381a6136c8f7b18b2d80a9a743c80c
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:12:56 2005 -0800

    [PATCH] usb/idmouse: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fc3267b386af5457c22601fa224401c5342025ee
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:12:32 2005 -0800

    [PATCH] usb/w9968cf: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7a6e34b16282db6a116aafd3d2c2a4e29357fcbf
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:12:05 2005 -0800

    [PATCH] usb/auerswald: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 93d33aa984c3a30dcc93aa5d87e1b95406c94069
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 7 17:12:03 2005 +0100

    New BitKeeper file ``drivers/input/touchscreen/hp680_ts_input.c''

commit c4c2ce02ef08345352fa1efaa0552409bec7cb91
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:11:43 2005 -0800

    [PATCH] usb/vicam: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c44ce6550092a2d4f512bebcc624fc512e0b47a6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:11:16 2005 -0800

    [PATCH] usb/ultracam: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db8e0429ce5d47eb390ab5a00e26e2bfc353fbfb
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Mar 7 17:10:51 2005 +0100

    input: Fix a connector name in a comment in lkkbd.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit cc23408a01d85a7276ab7a49f2ac8f62268d621d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:10:49 2005 -0800

    [PATCH] usb/sn9c102: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 972247eb753279b3c39c04226fa6c404612c7c53
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:10:23 2005 -0800

    [PATCH] usb/se401: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 39be80de30a736673cf34367502dc55419d49865
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Mar 7 17:09:59 2005 +0100

    input: Fix ALPS breakage caused by previous refactoring.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 9663db0fcb9a16e725ca76c2cea491c60192f941
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:09:57 2005 -0800

    [PATCH] usb/ov511: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f818333702e2627a04bf1e1a330f598d768ddef8
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:09:31 2005 -0800

    [PATCH] usb/konicawc: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80cabff5db09c133186b1f6923a37920b9983add
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:09:04 2005 -0800

    [PATCH] usb/ibmcam: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20d82bc62a7a36cc4580dbc36edb41089810d203
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:08:37 2005 -0800

    [PATCH] usb/wacom: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5a7c351b658caaca4ba71da88688b6c0a634755d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:08:11 2005 -0800

    [PATCH] usb/mtouchusb: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 06cd7f9e3a482ba7e116d5f20715061c2572de78
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Mar 7 17:07:54 2005 +0100

    input: Fix two typos in i8042 PnP code.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e51ebe5c0ab919ff94e1d4ea2ae73ce71e338b58
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:07:45 2005 -0800

    [PATCH] usb/aipteke: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aa500fdbafb378f24f9308ffc62c92792d8bffa4
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:07:18 2005 -0800

    [PATCH] usb/powermate: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dff8eaaf176d48384c13e41b6aa156d3be3af6ba
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:06:51 2005 -0800

    [PATCH] usb/usbtest: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a02f81e2b7709ca9edd761f8cb5f891b7debe797
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:06:27 2005 -0800

    [PATCH] usb/cytherm: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 981a19c5b8fb311c99eb4dd2473bd62031181c1e
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:06:00 2005 -0800

    [PATCH] usb/hid-core: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT were converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b29afa1923f7d70c6ab29f8adacdf67142ab7db5
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:05:35 2005 -0800

    [PATCH] usb/hub: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT was converted to milliseconds
    in a separate patch. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f394c0a953ca127f99b7f458ace7d7e84992486
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:05:09 2005 -0800

    [PATCH] usb/devio: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3c7e6158804c91c54ba2003c428197f545e62dfb
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:04:43 2005 -0800

    [PATCH] usb/usblp: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7efff9f6a2cedf53a2e6b88ab64cefce7b9a7983
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:04:16 2005 -0800

    [PATCH] usb/cdc-acm: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f64d2575b71fd01bf8dde4d650523d247ddfe7f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:03:49 2005 -0800

    [PATCH] usb/audio: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to usb_{control,bulk}_msg() to
    milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0a3ef128351635e05fada8042cf1b5adb89b9f24
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:03:23 2005 -0800

    [PATCH] usb/speedtch: change parameters of usb_{control,bulk}_msg() to msecs
    
    Change units of parameters being passed to
    usb_{control,bulk}_msg() to milliseconds. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 535ec52aebfb893fb13fd0c1d8ae8ea61a394584
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 08:02:54 2005 -0800

    [PATCH] usb/message: move msecs change into usb_start_wait_urb()
    
    After discussion with gregkh on IRC, I realized that the conversion can
    be pushed one layer further down into usb_start_wait_urb(), as only
    usb_{control,bulk}_msg() call this function (kaweth.c has its own
    version, which remains unchanged by this set of patches).
    
    The following incremental patch pushes the conversion into
    usb_start_wait_urb(). It should be applied after the previous ones to
    message.c [1/63 and 3/63].
    
    Description: Pushes conversion from milliseconds to jiffies one function
    further down the usb stack into usb_start_wait_urb(). The only callers
    of this function are usb_{control,bulk}_msg(); this patch makes the
    units conversion happen in one place instead of two.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9664deb1ef24b74a8ce15bf7fa36b33377d99245
Merge: d121ff2... c096e84...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Mar 7 16:50:57 2005 +0100

    Manual merge

commit 775e1a3e1e2b9b807d0176437e361b59afe95f85
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 07:19:27 2005 -0800

    [PATCH] usb/message: change parameters of usb_control_msg() to msecs
    
    Change units of parameters being passed to usb_control_msg() to
    milliseconds. USB_CTRL_{GET,SET}_TIMEOUT's units are changed in a separate patch
    such that the the HZ multiplication is no longer necessary.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56e7cec4797e80a91ab754991a063f5d0282808d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 07:19:01 2005 -0800

    [PATCH] include/usb: change USB_CTRL_{SET,GET}_TIMEOUT to msecs
    
    Change the units of the timeout constants in usb.h to correspond to
    the new parameter units for usb_{control,bulk}_msg(), in this case from seconds
    to milliseconds.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7da9166b536c162c576a9e5e4119f56375a25ee1
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 07:18:40 2005 -0800

    [PATCH] usb/message: make usb_{control,bulk}_msg() use msecs
    
    Change the units of the timeout parameter in both usb_control_msg()
    and usb_bulk_msg() from jiffies to milliseconds. This is the core patch upon
    which the remaining ones will be built. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0d068d07b048588c4a75756130d484be2b60185e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 07:18:12 2005 -0800

    [PATCH] USB: UHCI: Fix build errors when CONFIG_DEBUG_FS isn't set
    
    > I've dropped this now.  It caused the usb-bk tree to be dropped from the
    > -mm releases due to it causing build errors if CONFIG_DEBUG_FS not being
    > enabled.  Andrew sent me a horrible hack to try to fix it up, but I'm
    > going to trust you to fix it up properly :)
    
    Here's a proper fix (well, it's a little hackish, but better than Andrew's
    I hope).  No more build problems if CONFIG_DEBUG_FS isn't set.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1597cab45f11c4c77ccf18fb599c4c21dcc17cc1
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 07:17:43 2005 -0800

    [PATCH] USB: ohci ppc driver (2/2):  ohci-ppc-soc.c
    
    This adds drivers/usb/host/ohci-ppc-soc.c, the USB OHCI glue file
    for two PPC SOC implementations.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 312da7683d5c71ed4f5885b970d208fd22ef9885
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 07:17:15 2005 -0800

    [PATCH] USB: ohci ppc driver (1/2):  big-endian tweaks
    
    These are the remaining OHCI core (and Kconfig) updates for big-endian
    support on STB03xxx and MPC52xx PPC chips.  These are the first known
    implementations with big-endian register and memory layouts.
    
        - Two more in-memory fields, related to isochronous transfers
          have different behavior:  HCCA frame number, and ISO TD status.
    
        - Kconfig gets new OHCI options, for big-endian and little-endian.
          The default is little-endian; those PPC platforms can support
          both the on-chip big-endian version, and little-endian PCI chips.
    
    Most of the related ohci core fixes have already been merged.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af6d8afdaf913fe5e4f49fb616ea6327ef1fdac1
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 07:16:45 2005 -0800

    [PATCH] USB: cdc-acm uses <linux/usb_cdc.h>
    
    This makes cdc-acm use the <linux/usb_cdc.h> file.  It (still) passes
    "sparse -Wbitwise" on those fields.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0c976bd50ea43c54e0720b53f949050ed837ba0c
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 07:16:18 2005 -0800

    [PATCH] USB: serial/acm gadget uses <linux/usb_cdc.h>
    
    This converts the serial/ACM gadget driver to use <linux/usb_cdc.h>, again
    a net code shrink.
    
    It also gets rid of several "sparse -Wcontext -Wbitwise" warnings; again,
    excepting the cases where the gadget driver setup() callback hasn't yet
    changed in all the controller drivers.  Two of these warnings were bugs:
    one affecting CDC ACM support on big-endian hardware (reporting of DTE
    data rate), one keeping IRQs blocked too long.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56a61cfe40033c78e89c5e87c4d63216c956aaa7
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 07:15:46 2005 -0800

    [PATCH] USB: Ethernet/RNDIS gadget driver uses <linux/usb_cdc.h>
    
    This converts the Ethernet/RNDIS gadget driver to use <linux/usb_cdc.h>.
    It now passes "sparse -Wbitwise", except for the spot in the gadget API
    where the SETUP packet is still byteswapped.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d12ac835b946809c2ba98c0129681683bc984a42
Merge: 96dd7db... ea4b557...
Author: Steve French <stevef@smfhome.smfdom>
Date:   Mon Mar 7 09:15:17 2005 -0600

    Merge bk://cifs.bkbits.net/linux-2.5cifs
    into smfhome.smfdom:/home/stevef/bk_cifs_org/linux-2.5cifs

commit 6105e9c94e2fa50b71cc64911c7135f8afbcd013
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 07:13:13 2005 -0800

    USB: revert wacom driver patch.
    
    Cset exclude: akpm@osdl.org[gregkh]|ChangeSet|20050308064955|00321
    
    Will be coming in through the bk-input tree instead.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ee921a6a9a6e46c61ed17798f8869da96a8b4a31
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:57:40 2005 -0800

    [PATCH] USB: usbnet uses <linux/usb_cdc.h>
    
    This makes the "usbnet" driver user the new <linux/usb_cdc.h> header,
    and the stuctures and constants found therein.  It also cleans up
    the Zaurus device table entries a smidgeon.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5d890021a371300ee47e95a04652fcf5659d2e2b
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:57:11 2005 -0800

    [PATCH] USB: usbnet, cleanups and suspend/resume calls
    
    This has some small updates to the "usbnet" driver:
    
     - Remove an unused debug-only symbol
     - Make the net1080 minidriver pass "sparse -Wbitwise"
     - Add suspend/resume methods
    
    No functionality changes other than the suspend/resume support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c71665ed263996a2ee9212e299a9c68e8324da5b
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:56:40 2005 -0800

    [PATCH] USB: pxa2xx_udc isn't for pxa27x
    
    This prevents selection of the pxa2xx_udc driver on pxa27x chips;
    the newer chip has incompatible changes in the register API.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8667831b20fd525d078e0b3ab49bf5c2bfbd3b8d
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:56:17 2005 -0800

    [PATCH] USB: omap_udc handles two more devel boards
    
    This teaches omap_udc how to work on two more OMAP development boards:
    
      - OMAP 5912 OSK, a starter kit;
      - OMAP 1710 H3, more or less an H2 with a newer OMAP chip (0.90 nm etc).
    
    It also adds slightly more informative debug dumps for transceiver
    configuration.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a723c723f76f96ded702d543c960acbf0ef2d0b9
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:55:48 2005 -0800

    [PATCH] USB: Ethernet/RNDIS build fix on PXA25x
    
    This fixes a build problem with the RNDIS support on PXA25x processors.
    It's useful to help OpenZaurus win even bigger ... current OpenEmbedded
    builds already bundle this patch.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9ab81c3936b5e6ff6fd2cf40eccc8d74463f46fc
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:55:19 2005 -0800

    [PATCH] USB: add <linux/usb_cdc.h>
    
    This adds a new <linux/usb_cdc.h> header file, with definitions for the
    CDC class constants and structures used by various drivers.  For now
    this only has the ones Linux actually uses.  Each one is used in at least
    two or three different drivers, so sharing the definitions helps reduce
    errors.  It's also a good excuse to make sure there "sparse -Wbitwise"
    doesn't report errors in how these are used!
    
    Patches to those drivers will follow as I have time to verify the updates:
    
      - CDC ACM (for serial lines and modems)
    	* Host side support in "cdc-acm"
    	* Peripheral side support in "g_serial"
      - CDC Ethernet (cable modems, PDAs, etc)
    	* Host side support in "usbnet"
    	* Peripheral side support in "g_ether"
    
    Also, Microsoft's RNDIS is a variant of CDC ACM, providing an Ethernet model
    and implemented by g_ether; it uses these definitions too.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ec43a44beffa9fafd9a7041c32cf482f1dc3187
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:54:50 2005 -0800

    [PATCH] USB: don't power down net2280 on suspend
    
    This creates a module parameter "enable_suspend", and changes the default
    behavior to avoid the need to power cycle machines with net2280 cards to
    recover from some common developer actions (like rmmod/modprobe).
    
    When set to 1, the net2280, for better or worse, will enter low-power
    mode when the USB host requests it.  This is fine except in situations
    involving a power-cycling host or rmmoding the gadget driver while
    connected to a suspended (or disconnected!) port.
    
    When set to 0 (now the default), the driver will report suspend requests
    to the gadget driver, but will not place the NET2280 into low-power mode.
    This works fine in all situations except bus-powered devices (for which
    a PCI+Linux-based NET2280 generally doesn't make much sense anyway)
    
    It also (finally...) updates NetChip references to refer to PLX; and
    updates the dates on the driver.
    
    From: Alex Sanks <ASanks@plxtech.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 548d4b3978096d4c90f46412a228f58803544058
Author: Bernard Blackham <bernard@blackham.com.au>
Date:   Mon Mar 7 06:54:20 2005 -0800

    [PATCH] USB: fix types in usb suspend
    
    This fixes types in USB w.r.t. driver model. It should not actually
    change any code. Please apply,
    
    
    From: Bernard Blackham <bernard@blackham.com.au>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5d00bae5bf41586fd97996fd8eb4e07732c0fd19
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:53:53 2005 -0800

    [PATCH] usb/mdc800: replace wake_up() with wake_up_interruptible()
    
    On Tue, Feb 01, 2005 at 11:51:36AM -0800, Nishanth Aravamudan wrote:
    > This should fix the behavior of the previous patch (probably not noticed yet).
    > The wake_up*() was not matched properly in the first patch (fixed below).
    
    Modify the wake_up*() calls to match the wait_event*() ones from a
    previous patch.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 992ec93f1ef2f7ca65909306fa64a8d0c6a4ea70
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:53:26 2005 -0800

    [PATCH] usb/io_edgeport: remove interruptible_sleep_on_timeout() usage
    
    On Tue, Feb 01, 2005 at 11:43:08AM -0800, Nishanth Aravamudan wrote:
    > This should fix the behavior of the previous patch (probably not noticed yet).
    > The wake_up*() was not matched properly in the first patch (fixed below). Please
    > consider reverting the previous patch and applying this one instead.
    
    Directly use wait-queues to remove remaining callers of
    interruptible_sleep_on_timeout(). Signals are not checked (except in one
    case) in the current code, so interruptible should not be necessary.
    Modify the wake_up*() calls to match the wait-queue usage. There were
    some naming conflicts, which I tried to resolve appropriately. The final
    replacement is within a #if 0 / #endif section of code, but in case that
    code is ever used again, I would prefer it had the correct interface :)
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0bcdd9489f3c853cdb38291f1d5385f6ab660223
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Mar 7 06:52:55 2005 -0800

    [PATCH] USB: add usbmon, a USB monitoring framework
    
    This patch adds so-called "usbmon", or USB monitoring framework, similar
    to what tcpdump provides for Ethernet. This is an initial version, but
    it should be safe and useful. It adds an overhead of an if () statement
    into submission and giveback paths even when not monitoring, but this
    was deemed a lesser evil than stealth manipulation of function pointers.
    
    The patch makes two changes to hcd.c which make usbmon more useful:
     - Change the way we determine that DMA should not be mapped for root
       hubs, so that usbmon knows easily when it's safe to capture data.
     - Return exports of usb_bus_list and usb_bus_list_lock for those who
       wish to build usbmon as a module.
    
    This version of the patch changes #define to inlines for hooks and
    drops extra mod_ops.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 73ad99b6fcf5b8b2a3cf41a1b98f1c548be258d3
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Mar 7 06:52:25 2005 -0800

    [PATCH] usb-storage: More flexible signature checking mechanism
    
    This patch alters the CSW signature checking code to work with devices that
    report non-standard signatures, such as some Olympus and Aldi cameras.
    
    We now learn the first signature we see, and use it to check signatures of all
    subsequent transfers. This allows us to continue to benefit from the
    error-checking capabilities of the signature transfer, while becoming
    compatible with (yet more) non-standard devices.
    
    Suggestion from Alan Stern.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d91cf50d6c4a79d477140d251c7e8d7dd2059f04
Author: David T. Hollis <dhollis@davehollis.com>
Date:   Mon Mar 7 06:51:55 2005 -0800

    [PATCH] USB: Add ASIX AX88772 10/100 Ethernet support to usbnet
    
    * Add support for the ASIX AX88772 10/100 Ethernet chip
    * Fix ax8817x_bind to use allocated buffer to avoid DMA on the stack
    * Fix ax8817x_bind error handling to ensure all resources are freed on failure
    * Fix ax8817x_get_eeprom routines to return valid eeprom data
    
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 250600e1f692c07b03c22697f048d21d4cee19a9
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 06:51:25 2005 -0800

    [PATCH] USB: Revised fixups for root-hub message handler
    
    This patch fixes a number of small errors in the routines that handle
    messages for root hubs:
    
    	Fill in the extra byte if a string descriptor transfer
    	asks for an odd number of bytes.
    
    	Don't copy more than urb->transfer_buffer_length bytes.
    	Use an extra internal buffer to avoid the need for lots
    	of bounds checking.
    
    	Replace strcpy by strlcpy and sprintf by snprintf to avoid
    	overflowing an internal buffer.
    
    	Don't set urb->status without first acquiring urb->lock.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5a09838ebf588ed296a4508ef1f89aefc8330e54
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:50:54 2005 -0800

    [PATCH] usb/kaweth: use wait_event_timeout()
    
    Use wait_event_timeout() instead of custom wait-queue code. Remove now
    unused variables. I changed the code to only add to the wait-queue if
    necessary, but I'm not sure if this is correct.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 654b05dc74eeb3492fee147dd9573d8bd5a21b80
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:50:25 2005 -0800

    [PATCH] usb/hid-core: use wait_event_timeout()
    
    Use wait_event_timeout() instead of custom wait-queue code. Remove now
    unused variables.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7b900ed5114ffaad57382020ac9cfbcaee959de7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Mar 7 06:49:55 2005 -0800

    [PATCH] USB: wacom tablet driver
    
    From: Ping Cheng <pingc@wacom.com>
    
    This patch adds support for a Wacom new tablet, Intuos3, and its associated
    tools.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1871c9ab3a90bab96e0d4c6164281953a40c0864
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 06:49:23 2005 -0800

    [PATCH] USB UHCI: split code from uhci-hcd.c to new file uhci-q.c
    
    The uhci-hcd.c source file has become uncomfortably large.  In
    anticipation of separate upcoming changes to the HC management (for
    suspend/resume) and the URB handling (single QH per endpoint), and for the
    sake of compatibility with the structure of the OHCI and EHCI drivers,
    this patch splits out almost all the code for scheduling URBs and sticks
    it in a new source file, uhci-q.c.  This is code rearrangement only, with
    no functional changes.
    
    In case your patch scripts aren't smart enough to realize it, the new
    uhci-q.c file will have to added to the list of BK-managed files.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f324f555f2196445ceabfb621f654d4b3a373c1a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 06:35:24 2005 -0800

    [PATCH] USB: Initialize connected ports on newly-activated hubs
    
    This patch changes the mechanism used for detecting devices that were
    already connected to a hub at the time the hub was activated.  This can
    occur in several different circumstances:
    
    	when the hub is configured for the first time,
    
    	when the hub is reset following a malfunction,
    
    	when the hub is resumed.
    
    The patch mainly addresses the third possibility, although it also handles
    the other two.  The scenario I have in mind is waking up from a system
    suspend, where the user has plugged in a new USB device while the system
    was asleep, and for some reason the hub no longer has a record of the
    connect change on that port.  (Maybe the BIOS or the boot kernel has
    interfered.)  At any rate, the patch causes the hub driver to scan all
    ports in the reactivated hub, and if it finds a connected port with no
    child device already allocated then it pretends there was a connect-change
    event on that port.
    
    This will serve to take care of ports with new devices attached that the
    driver doesn't know about.  The existing resume code already handles the
    case of ports that used to have a device but don't any longer.  The
    remaining case, where different devices are attached to the port before
    suspending and after resuming, still needs to be handled.  The resume code
    should call the same "descriptors changed" check used by usb_reset_device.
    That's a patch for another day.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f39c80269a24c38e90188ec185fb4f6f4c560afb
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:35:05 2005 -0800

    [PATCH] USB: ohci-omap updates
    
    This resolves a FIXME by making the OHCI driver handle power switching
    on the OSK board, rather than expecting tps65010 init logic to do that.
    The tps65010 support is #ifdeffed, since that driver hasn't yet been
    merged into the mainline kernel tree.
    
    It also makes OSK (and Innovator) report that they can do ganged power
    switching; the rest of usb ignores that for now, but that'll change.
    (Eventually OHCI needs to support board-specific root hub operations,
    especially for power switching and overcurrent detection, but that needs
    a few more tweaks.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1318d0e449959d9d9bf4fdbbd0c421053a2f1457
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 7 06:34:40 2005 -0800

    [PATCH] USB: add 'distrust_firmware' option to ohci
    
    This replaces an undocumented/experimental "power_switching" flag with a
    more useful one that lets the driver rely on the boot firmware to report
    such capabilities.
    
    The driver still defaults to munging those informational flags (as it has
    since 2.2!), so usbcore usually won't try to power-switch with OHCI, but
    now we have a simple way to default to the behavior specified by the board
    manufacturer.
    
    Also corrects a misprint in the debug 'registers' dump:  a bit was shifted
    right by one nibble, so every controller was reported as supporting the
    legacy i8042 emulation registers.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2b78d81cc7bb3325eaf6f3f63a05c8c75a4d9821
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:34:19 2005 -0800

    [PATCH] usb/ati_remote: use wait_event_timeout()
    
    Description: Use wait_event_timeout() instead of custom wait-queue code. The
    current code uses TASK_INTERRUPTIBLE but doesn't seem to care about signals
    so TASK_UNINTERRUPTIBLE should be ok.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cad0d2aef99b3a10ff865ad8ff4012fbf920a020
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:33:54 2005 -0800

    [PATCH] usb/auerswald: use wait_event_timeout()
    
    Use wait_event_timeout() instead of custom wait-queue code. There
    might be a problem with returning without adding/removing to the waitqueue
    before wait_event_timeout() is called. I am not sure if this is a problem or
    not.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b428e550c58c79322f41fbf02b6faa553e4d425a
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:33:35 2005 -0800

    [PATCH] usb/mdc800: use wait_event_timeout()
    
    Use wait_event_timeout() instead of custom wait-queue code. Remove
    now unused variables.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a3cd00a416e7a41c619e097746eb2f82d508b48
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:33:09 2005 -0800

    [PATCH] usb/io_edgeport: replace interruptible_sleep_on_timeout() with wait_event_timeout()
    
    Use wait_event_timeout() instead of deprecated
    interruptible_sleep_on_timeout(). Signals are not checked in the current
    code, so interruptible should not be necessary. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4103423e81cc2f5897d2bb59d56927db568477ed
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 06:32:50 2005 -0800

    [PATCH] USB: Make use_both_schemes=y the default
    
    Enough people are experiencing problems with the new device initialization
    scheme that it seems like a good idea to make the default behavior be to
    try the old scheme when the new one fails.  That's what this patch does,
    simply by changing the initial value of the use_both_schemes module
    parameter.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b1de213911c71166927812c40502e4a9445a484f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 7 06:32:28 2005 -0800

    [PATCH] USB: Retry more aggressively during device initialization
    
    This patch make the hub driver's device initialization routine more
    aggressive about detecting errors and retrying.  It checks the result of
    the 64-byte GET-DESCRIPTOR request to verify that the descriptor tag is
    set correctly and the ep0-maxpacket value is legal; if either is not true
    it will retry the request immediately.  David Brownell has said that this
    kind of approach is necessary to make certain buggy devices work.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 36b7c128cde3bf9c667d260df190f2e4a246da90
Author: Jim Radford <radford@golemgroup.com>
Date:   Mon Mar 7 06:32:07 2005 -0800

    [PATCH] USB ftdi_sio: an rs485 adaptor from 4n-galaxy.de
    
    This patch adds support for an rs485 adaptor from 4n-galaxy.de.
    
    
    Signed-off-by: Jim Radford <radford@golemgroup.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9ade55b37066d02a73bf95937733c8f7fb6e1187
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Mar 7 06:21:24 2005 -0800

    [PATCH] usb/cypress_m8: replace schedule_timeout() with msleep()
    
    Description: Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected. The current code is not incorrect. Using msleep(), though,
    encourages specifying time delays in human time-units and consistency across the
    kernel.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0a5839d79dea1d4ae27306c5f5a10351f96e99fe
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Mar 7 06:21:00 2005 -0800

    [PATCH] USB Storage: devices which don't process PREVENT-ALLOW MEDIUM REMOVAL
    
    This patch started life as as423, and has been re-generated against the
    current tip.
    
    Some storage devices don't like PREVENT-ALLOW MEDIUM REMOVAL commands;
    rather than returning an Invalid Command ASC they just die or imagine that
    the medium has actually been removed.  Until now people have been relying
    on the SCSI blacklist table, which can be updated at runtime, to mark
    devices which shouldn't receive these commands.  However it will be more
    efficient and easier to do it from within usb-storage, particularly since
    many of these devices share the same USB Vendor and Product IDs (while
    having different INQUIRY product strings).
    
    *sigh* We really should be trying to push as much of this as possible onto
    hotplug.  It's easier to update userspace tools than the kernel to support
    a new device.
    
    The relevant devices already have unusual_devs entries; this patch just
    adds the new flag to those entries and uses it to set a corresponding flag
    in the scsi_device structure.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 887d69697d2eb0b552cf7e5fadb3af087be6fd36
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon Mar 7 06:20:36 2005 -0800

    [PATCH] USB: unusual_devs.h update
    
    Alan and Matt recently submitted a patch to change IGNORE_RESIDE to
    ignore residues on WRITE as well as READ. As a follow up to that, this
    device needs that functionality. This adds the unusual_devs entry for
    that device.
    
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 22b8ec4d0dc567efe1ee71c2718660616774e755
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Mar 7 06:20:14 2005 -0800

    [PATCH] USB: Add USBAT-based CompactFlash storage support
    
    Adds long overdue support for 12 CompactFlash card reader/writers based on the
    USBAT02 chip!
    
    See http://usbat2.sourceforge.net
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1c5e06502df9a2b732200ac47780c552af6a8eb7
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Mar 7 06:19:51 2005 -0800

    [PATCH] USB: Add USBAT02 storage support
    
    Adds support for USBAT02-based devices. A few HP cd writers came out
    with this chip.  A lot of flash-readers also share these ID numbers:
    this will be addressed in the next patch.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 01d652c4a0d2333650bf1017f0fc873f2fd70ad6
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Mar 7 06:19:29 2005 -0800

    [PATCH] USB: shuttle_usbat cleanups and generalisations
    
    Misc cleanups, a few more annotations, some function name/usage
    generalisation, and preparation for addition of support for flash-reader devices.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 50c65d55a6118e64289e12e522aac5f616c2b931
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 06:19:06 2005 -0800

    [PATCH] USB: remove UB checks in the usb-storage driver.
    
    This allows either the ub or usb-storage driver to bind to the same device,
    allowing people to use both without rebuilding their kernels.  It can be
    a bit messy at times...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Matthew Dharm <mdharm-kernel@one-eyed-alien.net>
    Acked-by: Pete Zaitcev <zaitcev@redhat.com>

commit 5c0f5dc9cd6d8dc2b49001ca8bccdebbdc889d03
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Mar 7 06:18:46 2005 -0800

    [PATCH] USB storage: make IGNORE_RESIDUE apply for reads (in addition to writes)
    
    This patch was originally as406.  I've rediffed it against a current tree.
    
    This patch makes the iGNORE_RESIDUE flag apply to reads (as well as writes,
    which it already does).  This is done because we've found devices which
    improperly report residue in the 'read' case.
    
    Phil will send in a follow-up patch with the appropriate unusual_devs
    entry for Ian's device soon.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c30e3b4637350657fcf57e94e00184205909192c
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Mar 7 06:18:22 2005 -0800

    [PATCH] USB Storage: Remove fix_capacity routine
    
    This is patch as422 from Alan Stern.
    
    This is the second half of the two-part patch to move the fix_capacity
    functionality up into the sd driver.  James Bottomley has applied the SCSI
    half, so now the usb-storage part is ready to go.
    
    In short, the patch removes the fix_capacity routine and in its place,
    sets a device flag to tell sd that the reported capacity is one sector too
    high.  It's a simple change and shouldn't cause any problems.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ae456fef619238d434896bba15a1e9f62c80a6f2
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Mar 7 06:18:03 2005 -0800

    [PATCH] USB: SN9C10x driver bugfix
    
    SN9C10x driver bugfix.
    
    Changes:
    @ Calculate correct image size in urb_complete()
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 892ddc1a83284831e0b5371b8c15e3c003c47fde
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Mar 7 06:17:36 2005 -0800

    [PATCH] USB: SN9C10x driver bugfix
    
    SN9C10x bugfix and small updates.
    
    Changes:
    @ Allocate the correct number of buffer memory bytes for read()
    * Wakeup interruptible events on DEV_MISCONFIGURED status
    * Allocate the exact number of buffers (nreadbuffers) in poll()
    * Documentation updates
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7337a69a25e2293caf3407b67cd08d6c6391f981
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 06:17:17 2005 -0800

    [PATCH] USB: give sisusb a valid minor number (133 - 140)
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a476511d343172cc2187041cb8b4f3ac07290ad9
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Mon Mar 7 06:16:51 2005 -0800

    [PATCH] USB: SiS USB2VGA minor fix.
    
    here is a tiny, small update for the sisusb driver. It fixes one spacing
    issue, one (internal) API issue and one endian issue (stupid copy/paste
    error)
    
    Signed-off by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ce15148684dc687aaf5a6500ddf5476d3c678075
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 7 06:16:31 2005 -0800

    [PATCH] USB: fix sparse bitwise warnings in the sisusb.c driver
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eb42ab39de37199e08a5f1f44445baea37b1e130
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Mon Mar 7 06:16:09 2005 -0800

    [PATCH] USB: add SiS USB2VGA kernel driver
    
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 551cb3d2a5424b844b870a9b9929292bf0ed8441
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Mon Mar 7 05:22:43 2005 -0800

    [BT8XX]: Declare bt878[] array after struct layout definition.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abb7cdd926569726706995e67a565de76e88b39f
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Mon Mar 7 05:21:18 2005 -0800

    [SPARC64]: Make access_ok() more palatable to gcc-4.x
    
    Also, kill __{user,kernel}_ok() as they are unused
    macros on sparc64.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a93bd5c88dd2fa1d23d6be0b765eca5cbafab2a
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Mon Mar 7 04:35:08 2005 -0800

    [SPARC64]: boot_cpu_id is static.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4677cc72cbaf842eed686057a3612a2be51071d7
Author: David S. Miller <davem@northbeach.davemloft.net>
Date:   Mon Mar 7 04:22:40 2005 -0800

    [SPARC]: mstk48t{08,59}_regs is static.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96dd7dbd1f8ecbf136c4a573abd4b94f63ea777f
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 7 06:18:45 2005 -0600

    [CIFS] recognize nouser_xattr and user_xattr mount options (default is still xattr
    enabled if built with xattr support)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit cee9a2d6b4ec900217e5d300ddadfc23091f25bf
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 13:56:02 2005 +0200

    [PATCH] Use spi_display_xfer_agreement() in 53c700
    
    Convert 53c700 to use spi_display_xfer_agreement()
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ccde55ebf84f00895a8088b83e34e88eb8c24876
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Mar 7 13:51:22 2005 +0200

    [PATCH] Display SPI transfer agreement in common code
    
    [ This is an updated version of
      http://marc.theaimsgroup.com/?l=linux-scsi&m=110918302718178&w=2
      Relative to that patch, it prints the period in a nicer way; exactly
      the same way as the strings in the original version of this file. ]
    
    Introduce a generic SPI function to print the negotiated transfer
    agreement.  It's based on the implementation in sym53c8xx_2/sym_misc.c.
    I have changes in my tree to make 53c700, ncr53c8xx and sym2 use it.
    Other drivers need to be converted to use the SPI transport layer first.
    
    In order to calculate the speed I needed to be able to convert from
    period factor to period in picoseconds.  That required changing
    (show|store)_spi_transport_period to work in picoseconds rather than
    a string.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a18e1b13d49827f4224b36d08902381ce4962590
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 7 13:46:29 2005 +0200

    [PATCH] SCSI NCR_D700.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5a550acd4bcb3e663dee3d226aa43e3d0d4a57fe
Author: Kenn Humborg <kenn@linux.ie>
Date:   Mon Mar 7 13:41:11 2005 +0200

    [PATCH] NCR5380 delayed work fix and locking fix
    
    Changes to the NCR5380 driver between 2.6.9 and 2.6.10 replaced the
    driver's home-grown delayed work implementation with a call to
    schedule_delayed_work().  However, the delay argument was not passed
    correctly, so the work was usually scheduled for _way_ too far in
    the future.  This patch fixes this.
    
    NCR5380_print_status() is called from NCR5380_abort() and from
    NCR5380_bus_reset().  In at least the abort() case, the host lock
    has already been acquired by scsi_error.c:scsi_try_to_abort_command().
    NCR5380_print_status() calls NCR5380_proc_info() which also acquires
    and releases the host lock.  This patch removes the call to
    NCR5380_proc_info() from NCR5380_print_status.
    
    Cosmetic: Remove duplicated lines of code from NCR5380_abort().
    
    Signed-off-by: Kenn Humborg <kenn@linux.ie>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 868f613b909b880c897fdbc729afd49b89ce3283
Author: Dave Jones <davej@redhat.com>
Date:   Mon Mar 7 13:32:15 2005 +0200

    [PATCH] blacklist microtek scanmaker III
    
    To try and escape the madness of adding a zillion USB card readers
    to the SCSI whitelist, I flipped the scan all lun's by default switch
    in the fedora kernel recently to see just what breaks, in the hope
    of moving from a whitelist solution to a blacklist.
    
    Here's the first (hopefully of not too many) devices that broke.
    (See https://bugzilla.redhat.com/beta/show_bug.cgi?id=149402 for more info)
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 40fbfc16e1f6d616c040447b44c5a073ab82af1a
Merge: d4eca30... 82925e1...
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 7 05:15:36 2005 -0600

    Merge bk://cifs.bkbits.net/linux-2.5cifs
    into smf-t23.(none):/home/stevef/linux-2.5cifs

commit 4ddd7266693790313e537dfb7cf3d48049381e31
Merge: 6463284... 7248f10...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 7 06:12:58 2005 -0500

    Merge

commit 82925e160695ce7c71b73b65f59caa1a2200fd8e
Author: Steve French <stevef@smf-t23.(none)>
Date:   Mon Mar 7 05:12:19 2005 -0600

    [CIFS] ioctl support part 1
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit fe9232d33c3f833fa1b3e30043c6e44cf7799155
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 7 05:13:46 2005 -0500

    convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 30a038b634b37d3e0af551a301142cc90e414565
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 7 04:56:08 2005 -0500

    Fix comment to match reality.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 91819707cb6c7264b59f8f7129f53d7607c59965
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 7 04:54:30 2005 -0500

    Fix end of line to match linux1394.org SVN and be <80 chars.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit df7c6e0bd73e40dd4465080b9e84e9341bc4c652
Merge: 1861e04... 726a118...
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Mon Mar 7 01:21:55 2005 -0800

    Merge northbeach.davemloft.net.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into northbeach.davemloft.net.davemloft.net:/home/davem/src/BK/sparc-2.6

commit c3f9e84c408e941921e10d286ff85d33a401dcff
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Mar 7 04:02:01 2005 -0500

    Fix a partial conversion to unlocked_ioctl().
    
    drivers/ieee1394/dv1394.c: In function `handle_dv1394_init':
    drivers/ieee1394/dv1394.c:2529: warning: comparison of distinct pointer types lacks a cast
    drivers/ieee1394/dv1394.c: In function `handle_dv1394_get_status':
    drivers/ieee1394/dv1394.c:2559: warning: comparison of distinct pointer types lacks a cast
    drivers/ieee1394/dv1394.c: In function `dv1394_compat_ioctl':
    drivers/ieee1394/dv1394.c:2593: warning: unused variable `err'
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 726a11803431a494f197fdb23ddc6901261419e9
Merge: ef4333a... 6463284...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 22:07:42 2005 -0800

    Merge bk://linux-1394.bkbits.net/1394-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit ef4333ae30d89900f5cea00b8da253239f91fb3f
Merge: 8e8acb7... 86261eb...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 21:54:45 2005 -0800

    Merge pcnet32 conflicting updates manually

commit 86261eb90bc7135b14477c12dae51bc1c36017fc
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:50:19 2005 -0800

    [PATCH] resync ATI PCI idents into base kernel

commit 1907f9db3890d1aad20960c300dd3c3f317bc96e
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:50:06 2005 -0800

    [PATCH] stallion ressurection, phase 1
    
    This gets the stallion driver working again non-SMP. Patch by Wayne
    Meissner
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a5df2210b29cac8d96f0eb15a055bc2d92e5373
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:49:53 2005 -0800

    [PATCH] PCI idents for PCnet32 fix
    
    Sorry forgot I made these constants

commit 5f0a6f863e098fdefe705fc9e5215caa75ac0415
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:49:40 2005 -0800

    [PATCH] Restore PWC driver
    
    PWC has a new maintainer (Luc Saillard) and also the various contentious
    binary hooks removed and replaced with reverse engineering work.
    
    Please restore it to the kernel
    
    Alan
    
    Signed-off-by: Luc Saillard <luc@saillard.org>
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d978494df4141c5e7760fc03ff38575853fbd1f
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:49:26 2005 -0800

    [PATCH] Add ATP88x support to the ATP870U driver (Vendor patch)
    
    Patch-by: ARTOP Corp.
    
    Basically this adds the small bits for the new card and makes one set of items
    an array because the new card is multi-channel.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2f33312686ee5e033a263db0dc928306272dd28
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:49:13 2005 -0800

    [PATCH] Fibre attached pcnet/32
    
    The current driver does workarounds for errata that do not work with
    fibre attached devices. This patch avoids doing the workaround on the
    only known fibre attach pcnet/32 hardware. All handling is automated on
    pci sub-ids
    
    Patch by: Guido Guenther
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d01e778044890551dbb0ec54735df493e6d514e4
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Mar 6 21:49:00 2005 -0800

    [PATCH] Document a "don't do that" case for the tty layer

commit 8e8acb7f3fd70f9a0c03511df2aa2660f6f08b7d
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:34:58 2005 -0800

    [PATCH] PA-RISC Makefile updates
    
     - Support sparse
     - Use CONFIG_64BIT instead of CONFIG_PARISC64
     - Find palo in /sbin even if it's not in our $PATH
    
    Signed-off-by: Randolph Chung <tausq@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 629e332a6fa24a956ea0175c3080bf9f463a5484
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:34:43 2005 -0800

    [PATCH] PA-RISC Kconfig updates
    
     - Use def_bool where possible
     - Eliminate PARISC64
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9da300e903a7336b3542b6b320c1ccc0b9e91968
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:34:29 2005 -0800

    [PATCH] Update PA-RISC IOSAPIC driver
    
     - Fix all ioremap abuse noticed by CONFIG_DEBUG_IOREMAP on an N4000.
     - F_EXTEND doesn't do what I thought it did on a 32-bit box.
     - New calling convention for txn_alloc_irq()
     - Replace CONFIG_PARISC64 with CONFIG_64BIT
     - Ensure alignment of the irt buffer to 8 bytes even when slab debugging
       is enabled
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4a993e7dee5ac78fd752fefca92373d84cdcb37
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:34:15 2005 -0800

    [PATCH] Update PA-RISC IOMMU code
    
     - The pdc_io_reset_devices() call necessary for USB keyboard kills the
       serial console.  Use a test that seems to work for both.
     - Don't bounce >4G buffers on machines with IOMMU
     - Remove ASSERT code and cleanup iomem * related warnings
     - Fix comment that was pointing to the old file location
     - Expand comment about PDC reset to describe broken GFX+USB console at
       powerup by direct linux to serial console
     - Fix all ioremap abuse noticed by CONFIG_DEBUG_IOREMAP on an N4000
     - Remove casts from "READ_REG" and "WRITE_REG" macro
     - Set D4 and DD bits in IOC_CTRL
     - Allow all memory in machine to be in-flight DMA at once, up to 4GB
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8f08b676ec12694eaecaebbe30c8cfdf5353f55
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:34:01 2005 -0800

    [PATCH] Update PA-RISC PCI host adapter
    
     - Use CONFIG_64BIT instead of CONFIG_PARISC64
     - Rename lba_cfg_ops to elroy_cfg_ops
     - Don't check for a non-1,2 or 4 size in the cfg_ops
     - Call LBA_CFG_ADDR_SETUP instead of LBA_CFG_TR4_ADDR_SETUP in elroy_cfg_ops
     - Don't read back from LBA_PCI_CFG_ADDR in LBA_CFG_TR4_ADDR_SETUP
     - Remove LBA_FLAG_NO_DMA_DURING_CFG since it's always set for elroy_cfg_ops
     - Remove LBA_TR4PLUS since we no longer need to test for it.
     - Inline lba_common_init() into lba_driver_probe()
     - Move TR2.1 check into an elroy-only path
     - Check for LBAs that aren't Elroy, Mercury or Quicksilver.
     - Remove all casts to 'int' in the driver, got rid of some unnecessary parens
       and deleted the obsolete part of a comment.
     - Return -EINVAL for config space >255
     - Always return 0 on config read success
     - Remove definitions of TRUE and FALSE
     - ioremap fix for port-io on non-PAT machines
     - Remove the bad casts from the register accessors
     - With those gone, I could see the piop_base needed to be remapped.
     - Fix all ioremap abuse noticed by CONFIG_DEBUG_IOREMAP on an N4000.
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ba2807862bca83e164ac7788621b35a83bf0b81
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:33:46 2005 -0800

    [PATCH] PA-RISC defconfig update
    
    Update a500_defconfig
    Remove n4000_defconfig as a500_defconfig is now suitable for both boxes
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 317e45504bf740fa99c82ff0e43229f59046e509
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:33:32 2005 -0800

    [PATCH] ALSA Harmony sound driver for PA-RISC
    
    ALSA Harmony rewrite
    
    Signed-Off-By: Kyle McMartin <kyle@parisc-linux.org>
    Signed-off-by: Stuart Brady <sdbrady@ntlworld.com>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dadfb8032cc1bf3fedd3220220949315023aff4a
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:33:16 2005 -0800

    [PATCH] PA-RISC PDC stable storage driver
    
    Add PDC stable storage driver.  Also reorganise PA-RISC Kconfig a little.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9db8b2ddbb85ee533a4048d826152e6548d16de9
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:33:01 2005 -0800

    [PATCH] Convert from a struct dev to a firmware hwpath
    
    PA-RISC firmware needs a hwpath which can be constructed from a pci_dev
    or a parisc_device.  Previously we've known what type of device we had,
    but when using sysfs we have to figure it out.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95c15e306439c12c75b7d6406f939f202fd54d2d
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:32:46 2005 -0800

    [PATCH] Convert PARISC64 to 64BIT
    
    More CONFIG_PARISC64 to CONFIG_64BIT conversion
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 241ce6414222f6a89f4281cb1d81248f302935cf
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:32:32 2005 -0800

    [PATCH] GCC 3.4 fixes for PA-RISC parport support
    
     - Move include/asm/parport_gsc.h to drivers/parport/
     - Fix gcc 3.4 compilation (redefined extern inline functions are not
       considered for inlining)
    
    From: Joel Soete <joel.soete@tiscali.be>
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13d38e968abdd853c3a820f9664f30ffff1f157a
Author: Matthew Wilcox <willy@parisc-linux.org>
Date:   Sun Mar 6 21:31:48 2005 -0800

    [PATCH] PA-RISC copy/clear_user_page improvements
    
     - Performance improvement to __clear_user_page_asm
     - White space cleanup
     - 64-bit version of copy_user_page_asm
     - Add prefetching to copy_user_page_asm
     - remove NOP and "bundle" comments
    
    Contributions from Joel Soete
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4eca30cb0acbcf3f5788095de75cc2380a030aa
Merge: ade0216... 7af6ca6...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Mar 6 20:56:41 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit ade02163e3097af111e14e5d5d140d80cf508b56
Merge: dc0f389... f518764...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 18:13:23 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit f5187643b8c18d5b395eb0191b4b81735a066715
Merge: fd17280... 7428eac...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 18:12:09 2005 -0800

    Merge bk://gkernel.bkbits.net/libata-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit dc0f3894513c9f2dcea49af9f6d87f98d4e499fc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 17:34:59 2005 -0800

    [IPSEC]: Kill redundant dst_release check in xfrm_dst_destroy
    
    Here's a trivial patch to get rid of a redundant check that I added
    in patch 3/4.  dst_release already checks for dst == NULL.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6c7571e58695bb51370f374a27e2cece3099b53
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Mar 6 17:33:29 2005 -0800

    [ATALK]: linux/atalk.h needs net/sock.h
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ee91501fc096ac35baa92613984bb6541b0ad8e8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 17:32:25 2005 -0800

    [IPSEC]: Get rid of dst_pmtu/ext2_header_len
    
    Here is a patch that replaces all occurrences of dst_pmtu in the TCP
    stack.  As a result we no longer need ext2_header_len.
    
    This has a nice synergetic effect with Arnaldo's latest change to
    linux/tcp.h :)
    
    I'll be removing other users of dst->path/dst_pmtu next.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b62c32db243af775a3fcd0afa9acbd63ebd8f653
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 17:31:04 2005 -0800

    [IPSEC]: Check dst validity harder in xfrm_bundle_ok
    
    There is another bug in xfrm_bundle_ok where I forgot to
    check the validity of xdst->route.  In fact, the check
    on dst->path isn't strong enough either.  For IPv6 entries,
    dst->path->obsolete is always negative until you call
    ipv6_dst_check.  So we really need to do that here.
    
    Here's the patch to fix those two problems.  Yes I know
    my dst_check implementation is lame.  I'll come back and
    fix up all the dst_check functions by moving their dst_release
    calls out.  It proves that you were right in that IPv6 dst
    leak thread :)
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7428eac40018b36345185fe2c9014f11a43a3f19
Merge: 72b5182... 5de9cf6...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 16:15:04 2005 -0500

    Merge pobox.com:/garz/repo/libata-dev/remove-one-fix
    into pobox.com:/garz/repo/libata-2.6

commit 5de9cf6062f67458102291b0b8b6ea3e4cb4bbd7
Merge: d121ff2... e16d7fc...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:52:19 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/libata-dev/remove-one-fix

commit 72b518231f2137d0c4176cd99701685dd0fe7417
Merge: d121ff2... 3e846bc...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:48:21 2005 -0500

    Merge pobox.com:/garz/repo/libata-dev/janitor
    into pobox.com:/garz/repo/libata-2.6

commit fd172807fa94f15757fef16f102c0d37f46d6021
Merge: 06e34c3... 2bb5005...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:39:42 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/sk_mca
    into pobox.com:/garz/repo/net-drivers-2.6

commit 06e34c354ed559d5a46ec8c45bab504661d1d8d1
Merge: 28b53d6... c5410ef...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:37:25 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/smc91x
    into pobox.com:/garz/repo/net-drivers-2.6

commit 28b53d6d110485888d5536cbfb0b89d551196b8e
Merge: 8a09222... 59fb935...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:36:20 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/sundance
    into pobox.com:/garz/repo/net-drivers-2.6

commit 8a09222d4113f4d6a774624277f105e979449b13
Merge: 302683a... 8393227...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:35:21 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/s2io
    into pobox.com:/garz/repo/net-drivers-2.6

commit 302683a5167ff15b634751671efbe8864fe34ae1
Merge: 6b60b23... ca4e495...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:34:23 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/prism54
    into pobox.com:/garz/repo/net-drivers-2.6

commit 6b60b23fdcfde323c4e3a8daa4091f928192b486
Merge: c3a3968... 3a71816...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:33:21 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/pm_message_t
    into pobox.com:/garz/repo/net-drivers-2.6

commit c3a3968b38c5f98b02a6175f59f7e444b4190d0e
Merge: e602c6f... c817c3f...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:32:23 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/mii
    into pobox.com:/garz/repo/net-drivers-2.6

commit e602c6f01de6b1ca98ef6710cb2726450dbfad4b
Merge: 70f1399... 5994284...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:31:20 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/ibmlana
    into pobox.com:/garz/repo/net-drivers-2.6

commit 70f139905360edb99c35e2c1de89acb851e18fc0
Merge: 1c99af2... d276a59...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:30:13 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/bonding
    into pobox.com:/garz/repo/net-drivers-2.6

commit 1c99af21cdd85c0f4f540d2323f31d86febd366d
Merge: 2cf1d63... 317b42f...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:28:37 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/atmel
    into pobox.com:/garz/repo/net-drivers-2.6

commit 2cf1d63f8c5a0038550ae14aeb424c269abaa79f
Merge: 8545168... 5901f6c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:27:36 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/arlan
    into pobox.com:/garz/repo/net-drivers-2.6

commit 8545168673102e8a7f2f91d9f17f2d61558ce5c6
Merge: d121ff2... 619c04b...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Mar 6 15:25:58 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/8139too
    into pobox.com:/garz/repo/net-drivers-2.6

commit 7af6ca6462b75196d1db64b7a12a0e7f9873f079
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 6 12:17:42 2005 -0600

    [CIFS] cifs ioctl support part 1
    
    This is needed for getflags and setflags (chattr) support and the new CIFS
    POSIX extensions
    
    Signed-off-by:  Steve French <sfrench@us.ibm.com>

commit 2160e348966b5ba616628c45f17dc196773eaded
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:36:51 2005 -0800

    [IPSEC]: Get metrics for xfrm_dst from top dst
    
    For the metrics other than MTU, we should also be getting it from
    the top dst as opposed to the bottom dst.  With this change, the
    user is able to manipulate values such as advmss for individual
    hosts behind a remote IPsec gateway.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b39c5d9a6cebe64c5f484e58b8d8b6956d7d2c80
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:35:27 2005 -0800

    [IPSEC]: Fix xfrm[46]_update_pmtu to update top dst
    
    Let's also fix IPsec PMTU storage.  When we get an MTU update for an
    xfrm_dst, it should be done to the top dst, not the bottom dst.
    
    For example, when we get a need-to-frag message for host C behind
    a our IPsec peer B, we should be updating the dst entry for C and
    not B as we do now.
    
    I've removed the boundary checks since the same checks are done
    in ipv[46]/route.c already.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4d37d4632f042e2f4ea7414bbc512fa03f522e5f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:34:23 2005 -0800

    [IPSEC]: Use dst_mtu i n xfrm[46]_output
    
    There was a lot of fun in laying the foundations.  Now it's time
    to start using it.
    
    This patch fixes the calculations in xfrm[46]_output so that we don't
    reject properly sized packets from the TCP stack.  The previous
    calculation is wrong because the xfrm overhead is not constant.
    
    After this I'll start cleaning stuff up.  For example, tcp's
    ext2_header_len and dst's path can both be removed.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e58c25485309321a74467b8d8dd8fd5d947d9728
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:31:52 2005 -0800

    [IPSEC]: Store MTU at each xfrm_dst
    
    Finally this is the patch that sets the MTU values of each xfrm_dst
    and keeps it up-to-date.
    
    To recap, at this point we've obtained accurate MTU values at each
    xfrm_dst.  The next step would be to start using it as
    dst_pmtu(xfrm_dst).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ffd27433c4ecb8df0fd2f98e13d7481dd5eed3a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:27:44 2005 -0800

    [IPSEC]: Add route element to xfrm_dst
    
    This patch adds a pointer to the route corresponding to the specific
    flow over the SA of an xfrm_dst that's being used.
    
    It also sets the next pointer of each xfrm_dst to the one above it.
    This allows to traverse the list upwards from the bottom.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b08e2fc8eef60c96679d6d731ad646a98339a94f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:24:19 2005 -0800

    [IPSEC]: Add xfrm_state_mtu()
    
    This patch introduces the function xfrm_state_mtu which calculates
    the MTU under a specific SA.  This function can be simplified once
    we get rid all other uses of get_max_size as we can move the calculation
    into the invidual SA type.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e37c834127e1948bd396c5a98dbe7232284d1064
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Mar 6 13:16:02 2005 +0000

    [ARM] Remove arch/arm/configs/a5k_defconfig
    
    A5000 is no longer supported by ARM, but by ARM26.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7a352fda358f594980b74860d893961e17c1b7be
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Mar 6 05:03:21 2005 -0800

    [CRYPTO]: Mark myself as co-maintainer.
    
    James is stepping down for a while.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1861e0458655fda4da12ee9dab8064d987a0f54f
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Sun Mar 6 04:50:43 2005 -0800

    [SPARC64]: Fix semtimedop compat ipc code.
    
    The timeout pointer really does get passed in
    as the fifth argument, not the third.
    
    Thanks to Willy Tarreau for noticing.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5138e2e60f1a932b3ecf6524a2aaeef9c338b5ef
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Sun Mar 6 04:48:08 2005 -0800

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 944836b9b16c9e7e119b0885f3a0df6d69e7de87
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 6 05:55:20 2005 -0600

    [CIFS] replace schedule_timeout with msleep (uninterrutable) in send retry path
    when clogged socket
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit bc3ce75b705a61df18b9dbf18bf304d261b09757
Author: Steve French <stevef@smf-t23.(none)>
Date:   Sun Mar 6 05:08:39 2005 -0600

    [CIFS] remove sparse warnings - moving externs & making more functions static
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit d121ff248f21667b96d927936c28843b8a451f8e
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun Mar 6 01:25:39 2005 -0800

    [PATCH] Consolidate compat_sys_waitid
    
    This patch does:
    	- consolidate the three implementations of compat_sys_waitid
    	  (some were called sys32_waitid).
    	- adds sys_waitid syscall to ppc
    	- adds sys_waitid and compat_sys_waitid syscalls to ppc64
    
    I have left PARISC and MIPS to their own devices (by request).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5487472e4487e8650b72a41138eb3ce937f79e73
Merge: 0a19bba... bfa166f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 01:04:35 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit bfa166fa144c919a7cc5c2836343d4091dfd54ff
Merge: fe2839b... 4595e94...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 01:03:25 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 4595e94727d41a70e13447de5b77c2f07f789db2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Mar 6 23:07:50 2005 +0000

    [ARM PATCH] 2515/1: S3C2410 - allow serial to use fclk on s3c2440
    
    Patch from Ben Dooks
    
    This patch extends the s3c2410 serial driver to allow it
    to use fclk and correctly determine the uart dividers. The
    necessary defines are added to the serial headers as well.
    Also modified is the header to point at the current
    Simtec linux pages, as well as extend the copyright.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a5dd2d6bb8f524c07ee90c6e5f2786981af6c9e9
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Mar 6 22:33:13 2005 +0000

    [ARM] Update mach-types from website.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 58f9a6004d4370ccf55e5a3fa86b40773db14a2f
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Mar 6 19:53:37 2005 +0000

    [ARM] Simplify /proc/driver/rtc procfs interface.
    
    The read method doesn't need to calculate eof/start offsets.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44f5ca2907ad5747e16629d0a191de541e29bb82
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Mar 6 19:05:01 2005 +0000

    [ARM] Add validation function for struct rtc_time
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fe2839b325194b12448f5a4c2d6ae9d41b175ebb
Merge: e537d26... c0231af...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:59:24 2005 -0800

    Merge bk://linux-dj.bkbits.net/agpgart
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit c0231af3e11f59759f556574892bc6f5ce921d96
Author: Dave Jones <davej@redhat.com>
Date:   Sun Mar 6 08:11:09 2005 -0500

    [AGPGART] vfree() checking cleanups
    
    generic.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e537d26b16305f8967a87f3198f1ac5f8306c330
Merge: 30ae754... cd7d517...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:58:12 2005 -0800

    Merge http://jfs.bkbits.net/linux-2.5
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit cd7d51777dc287daeded1b7776ff2ee15515ebfe
Merge: 2b7df07... 323cdc7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:56:53 2005 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 2b7df07833ecb788b3ee8c1bf4489bd7bd7e967f
Merge: 61f8095... 28ff874...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:55:28 2005 -0800

    Merge bk://kernel.bkbits.net/davem/flush_cache_page-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 61f809500a2c7d7ac591853c468cb24e102f7b30
Merge: aa02c66... c59c28f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:54:07 2005 -0800

    Merge bk://kernel.bkbits.net/davem/set_pte-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit c59c28f7fb2f5a1d36557cf02a20fec82b7fbaaf
Merge: 9da2166... 7b37bf9...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Mar 6 00:52:51 2005 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 9da21666180825fc05d5634a6a158d7fbba46f5c
Author: Daniel Jacobowitz <dan@debian.org>
Date:   Sun Mar 6 00:52:04 2005 -0800

    [PATCH] x86: fix TF bit corner case with ptrace and signals
    
    If a debugger set the TF bit, make sure to clear it when creating a
    signal context.  Otherwise, TF will be incorrectly restored by
    sigreturn.
    
    Signed-off-by: Daniel Jacobowitz <dan@debian.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5225cc148d8f03d9a30e1d2fc692c08d93163db0
Merge: 58a96a6... 9477cce...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sat Mar 5 17:32:59 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit e2c5ce04c126d0e3f5de2bab13e71e71d53a10cf
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 15:55:50 2005 +0000

    [ARM] Remove ARM specific set_pmd()
    
    set_pmd has specific behaviour on ARM which may be unexpected.  Since
    it is rather too close to macros used by other architectures, open
    code this functionality.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c0b3fe339669383613df3d67cf226dfc6588df0c
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 14:29:38 2005 +0000

    [ARM] Fix sparse warnings for ebsa110 IO implementation
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 96c632843a5234fd2c9d0962d21222fc22a9e908
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 14:20:51 2005 +0000

    [ARM] Add __iomem checking for __raw_{read,write}[bwl]
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 449076365e8ad5a6ac0b296aafef8804e53fad79
Author: Adrian Bunk <bunk@de.rmk.(none)>
Date:   Sat Mar 5 14:07:36 2005 +0000

    [ARM] NR_CPUS: use range
    
    Patch from Adrian Bunk
    
    The patch below uses range for NR_CPUS on arm (the same is already
    done on all other architectures).
    
    Signed-off-by: Adrian Bunk

commit 28ff874fca80a44f1d151d2e643febb36f28049c
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Sat Mar 5 05:23:33 2005 -0800

    [SH]: Cache flush simplifications after flush_cache_page() arg change.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 890cb81982c4bd373b351e43cdb9dd099bba248d
Merge: 58a96a6... 8f2a2e2...
Author: David S. Miller <davem@picasso.davemloft.net>
Date:   Sat Mar 5 05:15:21 2005 -0800

    Merge davem@nuts:/disk1/BK/flush_cache_page-2.6
    into picasso.davemloft.net:/home/davem/src/BK/flush_cache_page-2.6

commit 0a19bba4d5f916904713b047141b5740466e4bb8
Merge: a7d684d... 20fe3f1...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:11:05 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/mips
    into pobox.com:/garz/repo/net-drivers-2.6

commit 20fe3f1e9cf5d7c3741bb8dd8356aec2a854d1f3
Merge: e0630f6... f953b99...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:10:00 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/sk98lin
    into pobox.com:/garz/repo/net-drivers-2.6

commit e0630f60db022598d06b689ceea4dea2eb9759e5
Merge: f1d920a... 9e29846...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:08:48 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/wan-fixes
    into pobox.com:/garz/repo/net-drivers-2.6

commit f1d920a4f8d3f3a1212a1eecf38113bdc9c65598
Merge: a918356... a9f7630...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:07:32 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/pcnet32
    into pobox.com:/garz/repo/net-drivers-2.6

commit a918356d7d853a408ada288d3c8ad0d18961049b
Merge: acee613... 118aee2...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:06:21 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/ixgb
    into pobox.com:/garz/repo/net-drivers-2.6

commit acee613cef411e307f441c31c5e048eb1c47cee5
Merge: 353353e... fdc17a1...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:04:54 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/gianfar
    into pobox.com:/garz/repo/net-drivers-2.6

commit a343f1fbfa6b85e8b4b58ccd594f0c0171d57fca
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 13:03:51 2005 +0000

    [ARM] Remove depends on/default y from FIQ configuration
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdc17a1b9a156fc9331392cc81e8134f108cf4fd
Merge: d103bdb4... 1bdd99e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:03:49 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/emac
    into pobox.com:/garz/repo/net-drivers-2.6

commit d103bdb4278a1b4c41b891e754fe0edb91163e69
Merge: 13f26c3... 55d12ca...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:02:06 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/dl2k
    into pobox.com:/garz/repo/net-drivers-2.6

commit 13f26c343d5b08939933dc69724fe3e98d7ac449
Merge: 58a96a6... b2ab599...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 08:00:58 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/amd8111
    into pobox.com:/garz/repo/net-drivers-2.6

commit 353353e732e7ccf332ae7629c356257a0af10491
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Mar 5 07:55:29 2005 -0500

    [PATCH] initialize a spin lock in gianfar driver
    
    Initialize the mdio_lock spin lock in mii_info struct, which is otherwise
    accessed prior to initialization.
    
    Signed-off-by: Jaka Mocnik <jaka@activetools.si>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 323cdc72f5a4cf4b7f016c5f596c08d89d83399d
Merge: 4f96d0a... cc9d9e4...
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 5 04:52:11 2005 -0800

    Merge http://linux-mh.bkbits.net/bluetooth-2.6
    into nuts.davemloft.net:/disk1/BK/net-2.6

commit cc9d9e460497c33da49d25734a27328c93f984ab
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 5 16:22:13 2005 +0100

    [Bluetooth] Update entry for the BPA 100/105 driver
    
    This patch adds the missing entry for the BPA 100/105 driver
    into the MAINTAINERS file.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit e21e50222b56d43011f726ec2e2023a539ed92bb
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 5 16:10:28 2005 +0100

    [Bluetooth] Enhance HCI callback interface
    
    This patch adds callback functions for changing the link key and
    switching the role to the Bluetooth core interface.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 9ee73ad7a8f7645a892412efd537359565100c69
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 5 15:45:00 2005 +0100

    [Bluetooth] Convert clock offset value from little endian
    
    The clock offset value is stored in little endian and so convert
    it before showing it in the inquiry cache list.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 2755f6ad4ec8b855c9610cc05ebf1404b4861f10
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 5 15:31:32 2005 +0100

    [Bluetooth] Remove interruptible_sleep_on_timeout() usage
    
    Remove deprecated interruptible_sleep_on_timeout() function calls
    and replace them with direct wait-queue usage.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 524e4ea8b63c3d780a7dd07808d6d62370a78dd5
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Mar 5 15:29:30 2005 +0100

    [Bluetooth] Don't use ISOC transfers for sniffer devices
    
    The sniffer devices present themself as a full H:2 device, but
    actually they don't need any ISOC transfers and so don't start
    them.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit c5410ef921e9302620972ba3aa44b13ba81e9507
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Sat Mar 5 07:50:51 2005 -0500

    [PATCH] net: port smc91x to SH4-202 Microdev.
    
    Here is a patch that gets the smc91x driver working on the
    SH4-202 Microdev board.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit aa02c666ed857ef288db07cfa146d0da867645a5
Merge: 9ebe3d6... 58a96a6...
Author: David S. Miller <davem@picasso.davemloft.net>
Date:   Sat Mar 5 04:48:01 2005 -0800

    Merge davem@nuts:/disk1/BK/set_pte-2.6
    into picasso.davemloft.net:/home/davem/src/BK/set_pte-2.6

commit 2b6c5819b3df6c08bd2d07be1ee3c665ec15fb9b
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 12:46:29 2005 +0000

    [ARM] Simplify LEDs dependencies
    
    The LED dependencies were getting completely out of hand, and
    weren't obvious what was actually intended.  Simplify them so
    that it's easlier to understand, and wrap overly long lines.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4f96d0aab57dc838146cd5a05ae6dfdd5c81d03c
Merge: 4ae7de5... a1b4c3d...
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 5 04:43:56 2005 -0800

    Merge nuts.davemloft.net:/disk1/BK/net-2.6.12
    into nuts.davemloft.net:/disk1/BK/net-2.6

commit 7b37bf9788587159778772332ffd4ac8cb2193e7
Merge: 58a96a6... 0ff0381...
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Sat Mar 5 04:35:23 2005 -0800

    Merge northbeach.davemloft.net.davemloft.net:/home/davem/src/BK/sparcwork-2.6
    into northbeach.davemloft.net.davemloft.net:/home/davem/src/BK/sparc-2.6

commit 4ae7de515fbdefb5e6ef32836a1fef47a4420f65
Merge: 58a96a6... 2c49c80...
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Mar 5 04:33:48 2005 -0800

    Merge davem@picasso:src/BK/net-2.6
    into nuts.davemloft.net:/disk1/BK/net-2.6

commit 750a4cdc1e35cda2b52d5e86a5357889697a0ca1
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 12:18:43 2005 +0000

    [ARM] We're always CPU_32, so remove dependencies on this symbol
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7efdee61193b88a42c705e9dae24e4b879fcaa81
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 12:10:59 2005 +0000

    [ARM] Group more options into their own separate menus
    
    Group boot options, floating point emulation, userspace binary
    formats, and power management into their own separate menus.

commit f383cee5b1ab8c2db5a042e22ff319eb65717060
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 11:58:51 2005 +0000

    [ARM] Group device drivers together under their own menu
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2e64b3e2b64da5e1470312ed10c9d0c68d8888e2
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 11:48:07 2005 +0000

    [ARM] Group kernel features together under their own menu
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2044ec330819cccd8185f0fa3391e8d5a53d0b9b
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 11:38:44 2005 +0000

    [ARM] Group bus support options together under own menu
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 963cc6b84bb6cdf20a9baeaf9b91a7bdf18f531a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 11:21:36 2005 +0000

    [ARM] Move "common" Kconfig symbols to arch/arm/common/Kconfig
    
    Move ICST525, ICST307, SA1111, DMABOUNCE, TIMER_ACORN, SHARP_LOCOMO
    and SHARP_SCOOP to arch/arm/common/Kconfig

commit 2267c61ac08f2ad9a1c703880108dcae0e497dcc
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 11:12:44 2005 +0000

    [ARM] Use select for DMABOUNCE, SA1111, SHARP_LOCOMO and SHARP_SCOOP
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit aaec7086bd8fc2d48c98a120885579bb3f31042a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sat Mar 5 10:27:08 2005 +0000

    [ARM] Use select for some hidden ARM configuration symbols
    
    Convert ARCH_ACORN, TIMER_ACORN, ICST525, ICST307 and ARM_AMBA
    to be controlled via "select" rather than "default y" and
    "depends on"
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 24a03cd67539a1c2059c84cbe6bb2e5605265835
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Mar 5 03:32:17 2005 -0500

    Description: Use wait_event_interruptible() instead of the deprecated
    interruptible_sleep_on(). Add a helper function to make the condition
    for wait_event_interruptible() sane and lock-safe. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 7e7c5bf046c64c83939f9a83c2c25efd5f8f4795
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Sat Mar 5 00:26:40 2005 -0800

    x86: make put_user() out-of-line
    
    This makes the resulting assembly not only easier to read,
    it results in roughly a 0.5% savings in code size.
    
    Fixes from Richard Henderson for the original broken asm
    constraints.

commit 58a96a605ee4e5d573bec35c73bb6d015171cc16
Merge: 55d411d... 05e7304...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 21:30:44 2005 -0800

    Merge bk://gkernel.bkbits.net/libata-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 05e7304908ec281ce4ef29d1db58ec8d6fd73563
Merge: b30e09e... a8e82cc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 21:26:50 2005 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b30e09ec6aef1b9ed548da2abe7a451151479440
Merge: 30be2b6... 1f66c74...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 03:33:56 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/typhoon
    into pobox.com:/garz/repo/net-drivers-2.6

commit 30be2b690449a31bd51f2302b262204198da06fb
Merge: 56ca294... 955bd9b...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 03:32:48 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/smc91x
    into pobox.com:/garz/repo/net-drivers-2.6

commit 56ca294877ce9a02e176c76a742e16cb2c78288b
Merge: 42d895d... 0943fd4...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 03:31:48 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/e100
    into pobox.com:/garz/repo/net-drivers-2.6

commit 42d895d8e9ecf241e524b769063be215805987b7
Merge: 617d212... 77231c4...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 03:30:48 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/eepro100
    into pobox.com:/garz/repo/net-drivers-2.6

commit 617d212b0daa350ef27d450cbd544ec116ab83ba
Merge: 0ba34de... 333cefe...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Mar 5 03:29:39 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/initdata-fixes
    into pobox.com:/garz/repo/net-drivers-2.6

commit a8e82cc7a9c42443207702560332b5dec3211525
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Mar 4 17:37:01 2005 -0800

    [PATCH] mips: update CMU
    
    This patch updates cmu.c to get the resource by standard method.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce4ddcb1b0f3c04f2d115281d97db417a1853a69
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Mar 4 17:36:48 2005 -0800

    [PATCH] mips: calculate clock at any time
    
    This patch changes bcu.c to calculate clock at any time.  Because clock can
    be changed.  Moreover, EXPORT_SYMBOL_GPLs are added to it.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c751453da9f53fff644bc49578f9a2930279c68
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Mar 4 17:36:33 2005 -0800

    [PATCH] mips: add TANBAC TB0219 base board driver
    
    This patch adds GPIO/LED/DIPSW driver for TANBAC TB0219.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d838d91e54ca530573455a1936232580afe9ff93
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Fri Mar 4 17:35:39 2005 -0800

    [PATCH] ppc64: offb remapped address
    
    The offb code did not take into account a remapped pci address.  Adding in
    the pci_mem_offset fixed a DSI in offb.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7725deb181fd9f54eb3da6da21770ae5572da94
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 4 17:35:25 2005 -0800

    [PATCH] ppc64: Fix zImage wrapper incorrect size to flush_cache()
    
    This patch fixes a bug in the ppc64 zImage wrapper causing it to pass an
    incorrect size to flush_cache() when flushing the data and instruction
    caches prior to jumping to the kernel entry.  This causes crashes on
    firmare environment that do strict MMU mapping only of actually allocated
    areas
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4c3bbc510f2a8c2b055a3552fb2bb4660a3b104
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 4 17:35:12 2005 -0800

    [PATCH] ppc64: Fix thinko in prom_init.c
    
    (It's a real bug, but I suspect it doesn't trigger normally as we tend
    to allocate the initrd low, but it should be fixed anyway).
    
    This patch fixes an error in prom_init.c in the check for the initrd
    location vs. the memory allocation mecanism.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7becb964e374e84ed564b4832f4a966d9878668
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Mar 4 17:34:58 2005 -0800

    [PATCH] ppc64: functions to reserve performance monitor hardware
    
    The PPC64 interrupt code includes a hook to call when an exception
    from the performance monitor unit occurs.  However, there's no way of
    reserving the hook properly, so if more than one bit of code tries to
    use it things will get ugly.  Currently oprofile is the only user, but
    there are likely to be more in future e.g. perfctr, if and when it
    reaches a fit state for merging.
    
    This patch creates functions to reserve and release the performance
    monitor hardware (including its interrupt), and makes oprofile use
    them.  It also creates a new arch/ppc64/kernel/pmc.c, in which we can
    put any future helper functions for handling the performance monitor
    counters.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fe0c005382d0498d43cc7a781a7be5a116a42c8
Author: Olaf Hering <olh@suse.de>
Date:   Fri Mar 4 17:34:42 2005 -0800

    [PATCH] ppc64: use vmlinux during make install on ppc64
    
    make install passes the zImage to the installkernel script.  When an initrd is
    used, this script has to pull out the vmlinux from the zImage because yaboot
    can not boot a zImage+initrd combo.  It can only handle vmlinux+initrd or
    zImage.initrd.  Its simple to just pass the plain vmlinux instead.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2706c302b9113b41edb879ece59a21887df99bf6
Author: Olaf Hering <olh@suse.de>
Date:   Fri Mar 4 17:34:28 2005 -0800

    [PATCH] ppc64: disable HMT for RS64 cpus
    
    Hardware multithreading for RS64 cpus is currently broken.  Anton sent me a
    patch a few weeks ago, but it did not work.  So just hide the config option
    for the time being.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4e39ec3f6b9b623f6af1da4e5cf792f84a89322
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Mar 4 17:34:14 2005 -0800

    [PATCH] ppc64: generic hotplug cpu support fix
    
    Fix a false-positive from the smp_processor_id() debugging code.  Idle threads
    are per-cpu anwyay.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d1c8cd737fd7835f57c228d8c696f0b18f68ee1
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Fri Mar 4 17:34:00 2005 -0800

    [PATCH] ppc64: generic hotplug cpu support
    
    Patch provides a generic hotplug cpu implementation, with the only current
    user being pmac.  This doesn't replace real hotplug code as is currently
    used by LPAR systems.  Ben i can add the additional pmac specific code to
    put the processor into a sleeping state seperately.  Thanks to Nathan for
    testing.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c8c1108ffc74a58ec30c1a8d6f86098ad3e951b
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Mar 4 17:33:46 2005 -0800

    [PATCH] ppc64-implement-a-vdso-and-use-it-for-signal-trampoline gas workaround
    
    I cannot find a version of binutils which doesn't either do
    
    arch/ppc64/kernel/vdso32/gettimeofday.S: Assembler messages:
    arch/ppc64/kernel/vdso32/gettimeofday.S:33: Error: syntax error; found `@' but expected `,'
    
    or
    
    arch/ppc64/kernel/vdso32/gettimeofday.S: Assembler messages:
    arch/ppc64/kernel/vdso32/gettimeofday.S:33: Internal error, aborting at ../../gas/config/tc-ppc.c line 2658 in md_assemble
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 054eb7153aeb84cc92da84210cf93b0e2a34811b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 4 17:33:32 2005 -0800

    [PATCH] ppc64: Implement a vDSO and use it for signal trampoline
    
    This patch adds to the ppc64 kernel a virtual .so (vDSO) that is mapped
    into every process space, similar to the x86 vsyscall page.  However, the
    implementation is very different (and doesn't use the gate area mecanism).
    Actually, it contains two implementations, a 32 bits and a 64 bits one.
    
    These vDSO's are currently mapped at 0x100000 (+1Mb) when possible (when a
    process load section isn't already there).  In the future, we can randomize
    that address, or even imagine having a special phdr entry letting apps that
    wnat finer control over their address space to put it elsewhere (or not at
    all).
    
    The implementation adds a hook to binfmt_elf to let the architecture add a
    real VMA to the process space instead of using the gate area mecanism.
    This mecanism wasn't very suitable for ppc, we couldn't just "shove" PTE
    entries mapping kernel addresses into userland without expensive changes to
    our hash table management.  Instead, I made the vDSO be a normal VMA which,
    additionally, means it supports copy-on-write semantics if made writable
    via ptrace/mprotect, thus allowing breakpoints in the vDSO code.
    
    The current implementation of the vDSOs contain the signal trampolines with
    appropriate DWARF informations, which enable us to use non-executable
    stacks (patches to come later) along with a few more functions that we hope
    glibc will soon make good use of (this is the "hard" part now :) Note that
    the symbols exposed by the vDSO aren't "normal" function symbols, apps
    can't be expected to link against them directly, the vDSO's are both seen
    as if they were linked at 0 and the symbols just contain offsets to the
    various functions.  This is done on purpose to avoid a relocation step
    (ppc64 functions normally have descriptors with abs addresses in them).
    When glibc uses those functions, it's expected to use it's own trampolines
    that know how to reach them.
    
    In some cases, the vDSO contains several versions of a given function (for
    various CPUs), the kernel will "patch" the symbol table at boot to make it
    point to the appropriate one transparently.  What is currently implemented
    is:
    
     -  int __kernel_gettimeofday(struct timeval *tv, struct timezone *tz);
    
     This is a fully userland implementation of gettimeofday, with no barriers
     and no locks, and providing 100% equivalent results to the syscall version
    
     - void __kernel_sync_dicache(unsigned long start, unsigned long end)
    
     This function sync's the data and instruction caches (for making data
     executable), it is expected that userland loaders use this instead of
     doing it themselves, as the kernel will provide optimized versions for the
     current CPU.  Currently, the vDSO procides a full one for all CPUs prior
     to POWER5 and a nop one for POWER5 which implements hardware snooping at
     the L1 level.  In the future, an intermediate implementation may be done
     for the POWER4 and 970 which don't need the "dcbst" loop (the L1D cache is
     write-through on those).
    
     - void *__kernel_get_syscall_map(unsigned int *syscall_count);
    
     Returns a pointer to a map of implemented syscalls on the currently
     running kernel.  The map is agnostic to the size of "long", unlike kernel
     bitops, it stores bits from top to bottom so that memory actually contains
     a linear bitmap check for syscall N by testing bit (0x80000000 >> (N &
     0x1f)) of * 32 bits int at N >> 5.
    
    Note about backward compatibility issues: A bug in the ppc64 libgcc
    unwinder makes it unable to unwind stacks properly accross signals if the
    signal trampoline isn't on the stack.  This has been fixed in CVS for gcc
    4.0 and will be soon on the stable branch, but the problem exist will all
    currently used versions.
    
    That means that until glibc gets the patch to enable it's use of the vDSO
    symbols for the DWARF unwinder (rather trivial patch that will be pushed to
    glibc CVS soon hopefully), unwinding from a signal handler will not work
    for 64 bits applications.
    
    I consider this as a non-issue though as a patch is about to be produced,
    which can easily get pushed to "live" distros like debian, gentoo, fedora,
    etc...  soon enough (it breaks compatilbity with kernels below 2.4.20
    unfortunately as our signal stack layout changed, crap crap crap), as there
    are few 64 bits applications out there (expect gentoo), as it's only really
    an issue with C++ code relying on throwing exceptions out of signal
    handlers (extremely rare it seems), and as "release" distros like SLES or
    RHEL will probably have the vDSO enabled glibc _and_ the unwinder fix by
    the time they release a version with a 2.6.11 or 2.6.12 kernel anyway :)
    
    So far, I yet have to see an app failing because of that...
    
    Finally, many many many thanks to Alan Modra for writing the DWARF
    information of the signal handlers and debugging the libgcc issues !
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56a373b73de8a6e2d9bcdd5c0ae1953c7acf412a
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri Mar 4 17:33:16 2005 -0800

    [PATCH] ppc64: distribute EXPORT_SYMBOLs
    
    This patch just moves as many as possible EXPORT_SYMBOL()s from
    arch/ppc64/kernel/ppc_ksyms.c to where the symbols are defined.  This has
    been compiled on pSeries, iSeries and pmac.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e67ac05b47156d3d1d35835e6891705f54adc7d5
Author: Olaf Hering <olh@suse.de>
Date:   Fri Mar 4 17:33:01 2005 -0800

    [PATCH] ppc64: defconfig updates
    
    Update several ppc64 defconfigs.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad826aafc674e081c49c6c426db284f926a52bd1
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 4 17:32:46 2005 -0800

    [PATCH] ppc64: Move systemcfg out of head.S
    
    The "systemcfg" data structure in the ppc64 kernel is something that used
    to be defined to be at a hard-coded page number in the kernel image.  This
    is not necessary (at least not any more) and is a possible problem with
    future developements.  This patch removes that constraint, which also
    simplifies various bits of assembly in head.S that were dealing with it.
    
    This is the first step of a deeper cleanup of systemcfg definition of usage
    (and ultimately removal in it's current incarnation).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e9014435180c54811db0ad446941bb33b1e5e26
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Mar 4 17:32:31 2005 -0800

    [PATCH] ppc64: collect and export low-level cpu usage statistics
    
    POWER5 machines have a per-hardware-thread register which counts at a rate
    which is proportional to the percentage of cycles on which the cpu
    dispatches an instruction for this thread (if the thread gets all the
    dispatch cycles it counts at the same rate as the timebase register).  This
    register is also context-switched by the hypervisor.  Thus it gives a
    fine-grained measure of the actual cpu usage by the thread over time.
    
    This patch adds code to read this register every timer interrupt and on
    every context switch.  The total over all virtual processors is available
    through the existing /proc/ppc64/lparcfg file, giving a way to measure the
    total cpu usage over the whole partition.
    
    Signed-off-by: Manish Ahuja <ahuja@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88e470bf9d2df529c5a05fd549bd9ae1f37e2f0e
Author: Olaf Hering <olh@suse.de>
Date:   Fri Mar 4 17:32:17 2005 -0800

    [PATCH] remove unneeded includes from pSeries_nvram.c
    
    The pseries nvram driver started probably as a copy of nvram.c.  These
    includes are not needed to build it.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f57efe0f1dcb3998153b7fad27add388ca678733
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:32:03 2005 -0800

    [PATCH] ppc32: PowerQUICC II Pro subarch support
    
    Patch adds support for the initial PowerQUICC II Pro processors
    (MPC8343/E, MPC8347/E, and MPC8349/E) and the first reference platform
    (MPC834x SYS) from Freescale.
    
    The initial support is limited to existing drivers that overlap with the
    MPC85xx subarch (ethernet, I2C, uart).
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f399d31172aeee2fea70d5b08b8bebc51bca40e
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:31:47 2005 -0800

    [PATCH] ppc32: Trivial bug fix in CRITICAL_EXCEPTION macro
    
    This patch fixes a trival bug in the CRITICAL_EXCEPTION macro
    
    Signed-off-by: Takeharu KATO <kato.takeharu@jp.fujitsu.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b72cc82edc1626e812d82b1854f9e46752ad5e16
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:31:34 2005 -0800

    [PATCH] ppc32: Add support to use the DS1553 RTC/NVRAM on MPC8555 CDS system
    
    This patch makes the MPC8555 CDS system utilize the DS1553 RTC/NVRAM.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5dbab45d23a0d0184b6cbfac8adfddebb0ca60da
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:31:20 2005 -0800

    [PATCH] ppc32: Add support for the Dallas 1553 RTC/NVRAM
    
    This patch adds support for the Dallas 1553 RTC/NVRAM.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74d11d4cff06003317580e824b182700763725d2
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Fri Mar 4 17:31:06 2005 -0800

    [PATCH] ppc32: support OpenBIOS/U-Boot for Ebony
    
    This patch adds support for OpenBios on Ebony, as Matt Porter has
    suggested.  It will provide same functionality as the pibs extension for
    Luan and Ocotea.
    
    Signed-off-by: Gerhard Jaeger <gjaeger@sysgo.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bda0d53c19e918755b420bdc21c0c04cbe9af31
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:30:51 2005 -0800

    [PATCH] ppc32: Add GPIO/IRQ definitions for mv64x60 parts
    
    Add mv64x60 GPP IO pin/IRQ register definitions
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e70a4fa1d5cda62644a30b145f23fe4638cab2c4
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:30:37 2005 -0800

    [PATCH] ppc32: mv64360_pic non-zero irq base
    
    Add support for non-zero irq base to mv64360_pic code.
    
    - Fix mv64360 pic code to handle non-zero mv64x60_irq_base
    - Cleanup mv64360 entries in /proc/interrupts
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0a09f0c37e5f04ffeb725ae2f3c4bbd0f1447f9
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:30:23 2005 -0800

    [PATCH] ppc32: Move from using #define SVR_ to cur_ppc_sys_spec name for 85xx platform
    
    Removes explicit defines for SVR_85xx and use the information in the
    ppc_sys_specs table in platform code.  Changed the ppc_sys_name strings to
    be a bit more generic so we have a bit more flexilibity when we display
    them.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 572c61b3c47a250aad9b14bfa56681ed548cb64d
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:30:10 2005 -0800

    [PATCH] ppc32: fix whitespace for 85xx CDS common platform
    
    Fix whitespace in arch/ppc/platforms/85xx/mpc85xx_cds_common.c
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fddaeff6451949cd7dce90e57ca8c14628d617bf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Mar 4 17:29:56 2005 -0800

    [PATCH] ppc32: Bogus definition of __cmpxchg_u32()
    
    This patch fix bogus types in the definition of __cmpxchg_u32() on ppc32.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 241d932692fa8cea6fa6bf861e64a4743767939b
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:29:42 2005 -0800

    [PATCH] ppc32: incorrect #define in include/asm-ppc/cpm2.h
    
    This patch fixes the incorrect definition of a macro that sets the transmit
    parity to even on a cpm uart device.
    
    Signed-off-by: Mark A. Greer <mgreer@mista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc10b3c920300ab3687ff5ec3ab9a948d57aed73
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Fri Mar 4 17:29:28 2005 -0800

    [PATCH] ppc32: PPC4xx PIC: ack parent UIC in disable_irq
    
    This patch fixes bug in PPC4xx disable_irq implementation.  We need to ACK
    parent UIC to prevent false triggering in case IRQ we just disabled was
    already pending.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6e281b7513a7c043109a9ee37f965e7463d52f3
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Fri Mar 4 17:29:14 2005 -0800

    [PATCH] ppc32: Lindentify PPC4xx PIC driver
    
    This patch fixes whitespace in PPC4xx PIC driver.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 021baacbd8db8d8321149daa6b8eaf29f46480ff
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Fri Mar 4 17:28:59 2005 -0800

    [PATCH] ppc32: move irq_desc[].status, IRQ_LEVEL bit setup to xilinx_pic.c
    
    Move the code that informs the kernel if the particular interrupt is edge
    triggered or level sensitive from the board specific file to a
    "CONFIG_VIRTEX_II_PRO-specific" file.  Using old IRQ numbering in that code
    is also fixed.
    
    Signed-off-by: Andrei Konovalov <akonovalov@ru.mvista.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bb62aab099c29d87cb762896767e12ece676637
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:28:45 2005 -0800

    [PATCH] ppc32: Artesyn Katana enet update
    
    - Adapt Katana to the new names used by the ethernet driver.
    - Remove SRAM allocation code for mv643xx_enet until it's had more review.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dee79019884900e08d748d2f9de20ca9491bb15b
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:28:32 2005 -0800

    [PATCH] ppc32: Artesyn Katana platform update
    
    - Adds MTD support for the soldered FLASH
    - Adds cmdline parsing
    - Turns on the Blue LED when the system is halted
    - Moves some of the device window left by the firmware to proper alignments
    - Handles possibility of different frequencies for TCLK & SysCLK in 64460
    - Misc. code clean up
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c883a6b44a443077dc08ecd1dda567a0497fefa
Author: Olaf Hering <olh@suse.de>
Date:   Fri Mar 4 17:28:17 2005 -0800

    [PATCH] ppc32: update arch/ppc/configs/pmac_defconfig
    
    enable drm/agp, cpufreq, pppoe and new pccard option
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75df6449ca4b5dd9c3e79256c3861cb6fc9ab1ce
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 4 17:28:04 2005 -0800

    [PATCH] ppc32: fix mv64x60 register relocation bug in bootwrapper
    
    The gt64260 looks at the highest 20 bits while the mv64[34]60 looks at only
    the highest 16 bits when determining the base address for the bridge's
    registers.  This patch adds support for both.
    
    Signed-off-by: Nate Case <ncase@xes-inc.com>
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94307385fe1d6db8f589129fcd9b893dca7c18aa
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Fri Mar 4 17:27:51 2005 -0800

    [PATCH] ppc32: Don't create .tmp_gas_check
    
    This changes how the ppc32 'checkbin' target works.  Previously we did all
    of the tests using variables which would be evaluated for any and every
    make target.  This meant that 'make tags' for example would leave behind a
    '.tmp_gas_check' file even though we didn't actually compile up anything,
    and would get in the way of diffs.  By moving all of this logic directly
    into the 'checkbin' target, we only test gcc/gas versions when we're going
    to compile.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b21d1ff22952382860b6a163ae9325ea5d3bc30b
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Fri Mar 4 17:27:37 2005 -0800

    [PATCH] PPC/PPC64: Abstract cpu_feature checks.
    
    Abstract most manual mask checks of cpu_features with cpu_has_feature()
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1eeae0158ecd0535a2bc257a53d3472cc37ceb15
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Fri Mar 4 17:27:21 2005 -0800

    [PATCH] make mapping->tree_lock an rwlock
    
    Convert mapping->tree_lock to an rwlock.
    
    with:
    
    dd if=/dev/zero of=foo bs=1 count=2M  0.80s user 4.15s system 99% cpu 4.961 total
    dd if=/dev/zero of=foo bs=1 count=2M  0.73s user 4.26s system 100% cpu 4.987 total
    dd if=/dev/zero of=foo bs=1 count=2M  0.79s user 4.25s system 100% cpu 5.034 total
    
    dd if=foo of=/dev/null bs=1  0.80s user 3.12s system 99% cpu 3.928 total
    dd if=foo of=/dev/null bs=1  0.77s user 3.15s system 100% cpu 3.914 total
    dd if=foo of=/dev/null bs=1  0.92s user 3.02s system 100% cpu 3.935 total
    
    (3.926: 1.87 usecs)
    
    without:
    
    dd if=/dev/zero of=foo bs=1 count=2M  0.85s user 3.92s system 99% cpu 4.780 total
    dd if=/dev/zero of=foo bs=1 count=2M  0.78s user 4.02s system 100% cpu 4.789 total
    dd if=/dev/zero of=foo bs=1 count=2M  0.82s user 3.94s system 99% cpu 4.763 total
    dd if=/dev/zero of=foo bs=1 count=2M  0.71s user 4.10s system 99% cpu 4.810 tota
    
    dd if=foo of=/dev/null bs=1  0.76s user 2.68s system 100% cpu 3.438 total
    dd if=foo of=/dev/null bs=1  0.74s user 2.72s system 99% cpu 3.465 total
    dd if=foo of=/dev/null bs=1  0.67s user 2.82s system 100% cpu 3.489 total
    dd if=foo of=/dev/null bs=1  0.70s user 2.62s system 99% cpu 3.326 total
    
    (3.430: 1.635 usecs)
    
    
    So on a P4, the additional cost of the rwlock is ~240 nsecs for a
    one-byte-write().  On the other hand:
    
    From: Peter Chubb <peterc@gelato.unsw.edu.au>
    
      As part of the Gelato scalability focus group, we've been running OSDL's
      Re-AIM7 benchmark with an I/O intensive load with varying numbers of
      processors.  The current kernel shows severe contention on the tree_lock in
      the address space structure when running on tmpfs or ext2 on a RAM disk.
    
    
      Lockstat output for a 12-way:
    
      SPINLOCKS         HOLD            WAIT
        UTIL  CON    MEAN(  MAX )   MEAN(  MAX )(% CPU)     TOTAL NOWAIT SPIN RJECT  NAME
    
              5.5%  0.4us(3177us)   28us(  20ms)(44.2%) 131821954 94.5%  5.5% 0.00%  *TOTAL*
    
       72.3% 13.1%  0.5us( 9.5us)   29us(  20ms)(42.5%)  50542055 86.9% 13.1%    0%  find_lock_page+0x30
       23.8%    0%  385us(3177us)    0us                    23235  100%    0%    0%  exit_mmap+0x50
       11.5% 0.82%  0.1us( 101us)   17us(5670us)( 1.6%)  50665658 99.2% 0.82%    0%  dnotify_parent+0x70
    
    
      Replacing the spinlock with a multi-reader lock fixes this problem,
      without unduly affecting anything else.
    
      Here are the benchmark results (jobs per minute at a 50-client level, average
      of 5 runs, standard deviation in parens) on an HP Olympia with 3 cells, 12
      processors, and dnotify turned off (after this spinlock, the spinlock in
      dnotify_parent is the worst contended for this workload).
    
      	 tmpfs...............               ext2...............
      #CPUs	 spinlock      rwlock               spinlock     rwlock
          1     7556(15)      7588(17)  +0.42%      3744(20)     3791(16) +1.25%
          2	 13743(31)     13791(33)  +0.35%      6405(30)     6413(24) +0.12%
          4	 23334(111)    22881(154) -2%        9648(51)     9595(50)  -0.55%
          8	 33580(240)    36163(190) +7.7%     13183(63)    13070(68)  -0.85%
         12	 28748(170)    44064(238)+53%      12681(49)	 14504(105)+14%
    
      And on a pentium3 single processsor:
          1    4177(4)        4169(2)  -0.2%        3811(4)     3820(3) +0.23%
    
      I'm not sure what's happening in the 4-processor case.  The important thing to
      note is that with a spinlock, the benchmark shows worse performance for a 12
      than for an 8-way box; with the patch, the 12 way performs better, as
      expected.  We've done some runs with 16-way as well; without the patch below,
      the 16-way performs worse than the 12-way.
    
    
    It's a tricky tradeoff, but large-smp is hurt a lot more by the spinlocks than
    small-smp is by the rwlocks.  And I don't think we really want to implement
    compile-time either-or-locks.
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3db29f35016f7bb9f2aa459f6dbca26d4ec606c9
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Mar 4 17:27:06 2005 -0800

    [PATCH] only unmap what intersects a direct_IO op
    
    Now that we're only invalidating the pages that intersected a direct IO
    write we might as well only unmap the intersecting bytes as well.  This
    passed a light fsx load with page cache, direct, and mmap IO.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daf70db8d1b99e28523baee92c6848ed794ea326
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Mar 4 17:26:52 2005 -0800

    [PATCH] write and wait on range before direct io read
    
    This adds filemap_write_and_wait_range(mapping, lstart, lend) which starts
    writeback and waits on a range of pages.  We call this from
    __blkdev_direct_IO with just the range that is going to be read by the
    direct_IO read.  It was lightly tested with fsx and ext3 and passed.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7afadfdc750969c3fd7128c4f03678232118d155
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Mar 4 17:26:38 2005 -0800

    [PATCH] invalidate range of pages after direct IO write
    
    Presently we invalidate all of a file's pages when writing to any part of
    that file with direct-IO.
    
    After a direct IO write only invalidate the pages that the write intersected.
    invalidate_inode_pages2_range(mapping, pgoff start, pgoff end) is added and
    called from generic_file_direct_IO().
    
    While we're in there, invalidate_inode_pages2() was calling
    unmap_mapping_range() with the wrong convention in the single page case.
    It was providing the byte offset of the final page rather than the length
    of the hole being unmapped.  This is also fixed.
    
    This was lightly tested with a 10k op fsx run with O_DIRECT on a 16MB file
    in ext3 on a junky old IDE drive.  Totaling vmstat columns of blocks read
    and written during the runs shows that read traffic drops significantly.
    The run time seems to have gone down a little.
    
    Two runs before the patch gave the following user/real/sys times and total
    blocks in and out:
    
    0m28.029s 0m20.093s 0m3.166s 16673 125107
    0m27.949s 0m20.068s 0m3.227s 18426 126094
    
    and after the patch:
    
    0m26.775s 0m19.996s 0m3.060s 3505 124982
    0m26.856s 0m19.935s 0m3.052s 3505 125279
    
    akpm:
    
    - Don't look up more pages than we're going to use
    
    - Don't test page->index until we've locked the page
    
    - Check for the cursor wrapping at the end of the mapping.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 545a604c163b11bc625e7d031dbe1c02a520d6d6
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Mar 4 17:26:24 2005 -0800

    [PATCH] Move accounting function calls out of critical vm code paths
    
    In the 2.6.11 development cycle function calls have been added to lots
    of hot vm paths to do accounting. I think these should not go into the
    final 2.6.1 release because these statistics can be collected in a different
    way that does not require the updating of counters from frequently used
    vm code paths and is consistent with the methods use elsewhere in the kernel
    to obtain statistics.
    
    These function calls are
    
    acct_update_integrals	-> Account for processes based on stime changes
    update_mem_hiwater	-> takes rss and total_vm hiwater marks.
    
    acct_update_integrals is only useful to call if stime changes otherwise
    it will simply return. It is therefore best to relocate the function call
    to acct_update_integral into the function that updates stime which is
    account_system_time and remove it from the vm code paths.
    
    update_mem_hiwater finds the rss hiwater mark.  We call that from timer
    context as well.  This means that processes' high-water marks are now
    sampled statistically, at timer-interrupt time rather than
    deterministically.  This may or may not be a problem..
    
    This means that the rss limit is not always updated if rss is increased
    and thus not as accurate. But the benefit is that the rss checks do no
    pollute the vm paths and that it is consistent with the rss limit check.
    
    The following patch removes acct_update_integrals and update_mem_hiwater
    from the hot vm paths.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    
    From: Jay Lan <jlan@sgi.com>
    
    The new "move-accounting-function-calls-out-of-critical-vm-code-paths"
    patch in 2.6.11-rc3-mm2 was different from the code i tested.
    
    In particular, it mistakenly dropped the accounting routine calls
    in fs/exec.c. The calls in do_execve() are needed to properly
    initialize accounting fields. Specifically, the tsk->acct_stimexpd
    needs to be initialized to tsk->stime.
    
    I have discussed this with Christoph Lameter and he gave me full
    blessings to bring the calls back.
    
    Signed-off-by: Jay Lan <jlan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf57909ff72b7e1481b38590edd036c1ef5991e9
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:26:09 2005 -0800

    [PATCH] Randomisation: top-of-stack randomization
    
    In addition to randomisation of the stack pointer within the stack, the stack
    itself should be randomized too.  We need both approaches, we can only
    randomize the stack itself in pagesize increments.  However randomizing large
    ranges with the stackpointer runs into the situation where a huge chunk of the
    stack rlimit is used by the randomisation; this is undesirable so we need to
    do both.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ec0defa78358ecae2b24146666e384af30950b5
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:25:55 2005 -0800

    [PATCH] Randomisation: add ADDR_NO_RANDOMIZE personality
    
    Introduce a personality that disables randomisation, so that users can use
    setarch and related commands to run specific applications without
    randomisation.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f06ae033fc51fd6163445f7bee505f0095404ec
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:25:41 2005 -0800

    [PATCH] Randomisation: enable by default
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fd350176e16d49d64b4131b20ee3e686402d8ba
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:25:27 2005 -0800

    [PATCH] Randomisation: mmap randomisation
    
    The patch below randomizes the starting point of the mmap area.
    
    This has the effect that all non-prelinked shared libaries and all bigger
    malloc()s will be randomized between various invocations of the binary.
    Prelinked binaries get a address-hint from ld.so in their mmap and are thus
    exempt from this randomisation, in order to not break the prelink advantage.
    The randomisation range is 1 megabyte (this is bigger than the stack
    randomisation since the stack randomisation only needs 16 bytes alignment
    while the mmap needs page alignment, a 64kb range would not have given enough
    entropy to be effective)
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccc875c1d2fe18b50020d501f1005ef46fc55fed
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:25:13 2005 -0800

    [PATCH] Randomisation: stack randomisation
    
    The patch below replaces the existing 8Kb randomisation of the userspace stack
    pointer (which is currently only done for Hyperthreaded P-IVs) with a more
    general randomisation over a 64Kb range.  64Kb is not a lot, but it's a start
    and once the dust settles we can increase this value to a more agressive
    value.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c518b108234a2418fb65a09e6219202eda316d6c
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:24:57 2005 -0800

    [PATCH] Randomisation: add PF_RANDOMIZE
    
    Even though there is a global flag to disable randomisation, it's useful to
    have a per process flag too; the patch below introduces this per process flag
    and automatically sets it for "new" binaries.
    
    Eventually we will want to tie this to the legacy-va-space personality
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 967423e87f9979166e815f9c281943325637b05e
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:24:44 2005 -0800

    [PATCH] Randomisation: infrastructure
    
    The patch below introduces get_random_int() and randomize_range(), two helpers
    used in later patches in the series.  get_random_int() shares the tcp/ip
    random number stuff so the CONFIG_INET ifdef needs to move slightly, and to
    reduce the damange due to that, secure_ip_id() needs to move inside random.c
    From: Frank Sorenson <frank@tuxrocks.com>
    Acked-By: Jeff Dike <jdike@addtoit.com>
    
    The stack randomization patches that went into 2.6.11-rc3-mm1 broke
    compilation of ARCH=um.  This patch fixes compiling by adding arch_align_stack
    back in.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Frank Sorenson <frank@tuxrocks.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 818bcba580bbe96829fe776de526125205eb8c8b
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Fri Mar 4 17:24:30 2005 -0800

    [PATCH] Randomisation: global sysctl
    
    This first patch of the series introduces a sysctl (default off) that
    enables/disables the randomisation feature globally.  Since randomisation may
    make it harder to debug really tricky situations (reproducability goes down),
    the sysadmin needs a way to disable it globally.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba4cfe0329cd9ef11e8f45032a202741237798c3
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Mar 4 17:24:16 2005 -0800

    [PATCH] initialize a spin lock in CPM2 uart driver
    
    Static initialization of spin locks that are otherwise accessed prior to
    initialization.
    
    Signed-off-by: Jaka Mocnik <jaka@activetools.si>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 998a5a63ce12c1ae7d838f77d55e21ba6d94b273
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Fri Mar 4 17:24:03 2005 -0800

    [PATCH] IB: MAD cancel callbacks from thread
    
    Modify ib_cancel_mad() to invoke a user's send completion callback from
    a different thread context than that used by the caller.  This allows a
    caller to hold a lock while calling cancel that is also acquired from
    their send handler.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3af2e092ba3eeef04e9e03fea0bcb195eb3a06df
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:23:48 2005 -0800

    [PATCH] IB/mthca: implement query of device caps
    
    Set device_cap_flags field in mthca's query_device method.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1781dd37a1f297c344ed4fe895f3e624306735b9
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:23:36 2005 -0800

    [PATCH] IB/mthca: QP locking optimization
    
    1. Split the QP spinlock into separate send and receive locks.
    
       The only place where we have to lock both is upon modify_qp, and
       that is not on data path.
    
    2. Avoid taking any QP locks when polling CQ.
    
       This last part is achieved by getting rid of the cur field in
       mthca_wq, and calculating the number of outstanding WQEs by
       comparing the head and tail fields.  head is only updated by
       post, tail is only updated by poll.
    
       In a rare case where an overrun is detected, a CQ is locked and the
       overrun condition is re-tested, to avoid any potential for stale
       tail values.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9171ea956c53d0f053c9f61bb4b38e4d9698f12
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:23:21 2005 -0800

    [PATCH] IB/mthca: mem-free multicast table
    
    Tie up one last loose end by mapping enough context memory to cover
    the whole multicast table during initialization, and then enable
    mem-free mode.  mthca now supports enough of mem-free mode so that
    IPoIB works with a mem-free HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86a637df7f2676e8032ed3f84fe5b3d9cda0ad75
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:23:08 2005 -0800

    [PATCH] IB/mthca: mem-free work request posting
    
    Implement posting send and receive work requests for mem-free mode.
    Also tidy up a few things in send/receive posting for Tavor mode (fix
    smp_wmb()s that should really be just wmb()s, annotate tests in the
    fast path with likely()/unlikely()).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcd3df17489c28e7a7b9a5ef6fa8c8086e86dad6
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:22:54 2005 -0800

    [PATCH] IB/mthca: mem-free address vectors
    
    Update address vector handling to support mem-free mode.  In mem-free
    mode, the address vector (in hardware format) is copied by the driver
    into each send work queue entry, so our address handle creation can
    become pretty trivial: we just kmalloc() a buffer to hold the
    formatted address vector.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7332bc00f71c53a2e2bb1f6859cae239a652c16
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:22:41 2005 -0800

    [PATCH] IB/mthca: mem-free QP initialization
    
    Update QP initialization and cleanup to handle mem-free mode.  In
    mem-free mode, work queue sizes have to be rounded up to a power of 2,
    we need to allocate doorbells, there must be memory mapped for the
    entries in the QP and extended QP context table that we use, and the
    entries of the receive queue must be initialized.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2766dbe2d87bcdd0a7328a20345d89d79eaabfe6
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:22:27 2005 -0800

    [PATCH] IB/mthca: mem-free CQ operations
    
    Add support for CQ data path operations (request notification, update
    consumer index) in mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b925f6a8ebd9cb921a466861e867015c959c6213
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:22:12 2005 -0800

    [PATCH] IB/mthca: mem-free CQ initialization
    
    Update CQ initialization and cleanup to handle mem-free mode: we need
    to make sure the HCA has memory mapped for the entry in the CQ context
    table we will use and also allocate doorbell records.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8688ff94cdcd964660c4aa6a39f11817484fb8d7
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:21:58 2005 -0800

    [PATCH] IB/mthca: refactor CQ buffer allocate/free
    
    Factor the allocation and freeing of completion queue buffers into
    mthca_alloc_cq_buf() and mthca_free_cq_buf().  This makes the code
    more readable and will eventually make handling userspace CQs simpler
    (the kernel doesn't have to allocate a buffer at all).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e922f5a617473579cccc682f020c6f527999ff9
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:21:44 2005 -0800

    [PATCH] IB/mthca: mem-free doorbell record writing
    
    Add a mthca_write_db_rec() to wrap writing doorbell records.  On
    64-bit archs, this is just a 64-bit write, while on 32-bit archs it
    splits the write into two 32-bit writes with a memory barrier to make
    sure the two halves of the record are written in the correct order.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83a2f6480153174dccce3ca97f26e5ad77413483
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:21:30 2005 -0800

    [PATCH] IB/mthca: mem-free doorbell record allocation
    
    Mem-free mode requires the driver to allocate additional doorbell pages
    for each user access region.  Add support for this in mthca_memfree.c,
    and have the driver allocate a table in db_tab for kernel use.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 117c1f2848ea42551570e417a5b041bb6722774e
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:21:17 2005 -0800

    [PATCH] IB/mthca: tweak MAP_ICM_page firmware command
    
    Have MAP_ICM_page() firmware command map assume pages are always the
    HCA-native 4K size rather than using the kernel's page size.  This
    will make handling doorbell pages for mem-free mode simpler.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76d68fc04270f0e14a6dc0f029894706ba83c3bf
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:21:04 2005 -0800

    [PATCH] IB/mthca: tweak firmware command debug messages
    
    Slightly improve debugging output for UNMAP_ICM and MODIFY_QP firmware commands.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a899597c477bb4afe77a80a8c553f66ac00d5b9
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:20:51 2005 -0800

    [PATCH] IB/mthca: mem-free interrupt handling
    
    Update interrupt handling code to handle mem-free mode.  While we're
    at it, improve the Tavor interrupt handling to avoid an extra MMIO
    read of the event cause register.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f584626b81602d33fb4fb92b205b70d8d86dcaef
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:20:37 2005 -0800

    [PATCH] IB/mthca: mem-free EQ initialization
    
    Add code to initialize EQ context properly in both Tavor and mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8988c693ce4706d8d8c7f7fed22ff8407201bbd
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:20:23 2005 -0800

    [PATCH] IB/mthca: mem-free memory region support
    
    Add support for mem-free mode to memory region code.  This mostly
    amounts to properly munging between keys and indices.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f753f5dec2fb28c4988d9f11a3eff0efa4636bdf
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:20:10 2005 -0800

    [PATCH] IB/mthca: dynamic context memory mapping for mem-free mode
    
    Add support for mapping more memory into HCA's context to cover
    context tables when new objects are allocated.  Pass the object
    size into mthca_alloc_icm_table(), reference count the ICM chunks,
    and add new mthca_table_get() and mthca_table_put() functions to
    handle mapping memory when allocating or destroying objects.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfb2659930986d2ed800aacdcbf705df8f4c5765
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:19:57 2005 -0800

    [PATCH] IB/mthca: add UAR allocation
    
    Add support for allocating user access regions (UARs).  Use this to
    allocate a region for kernel at driver init instead using hard-coded
    MTHCA_KAR_PAGE index.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa96c1923fc80d7cbae8de807697b962252a5f02
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:19:43 2005 -0800

    [PATCH] IB/mthca: map registers for mem-free mode
    
    Move the request/ioremap of regions related to event handling into
    mthca_eq.c.  Map the correct regions depending on whether we're in
    Tavor or native mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96ddbcba4059f2c1d81aa3328bf94f8e644f340a
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:19:29 2005 -0800

    [PATCH] IB: remove unsignaled receives
    
    Remove support for unsignaled receive requests.  This is a
    non-standard extension to the IB spec that is not used by any known
    applications or protocols, and is not supported by newer hardware.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 386690a45295f3bf3a4ec7028977fbc240cccd43
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:19:15 2005 -0800

    [PATCH] IB/mthca: CQ cleanups
    
    Simplify some of the code for CQ handling slightly.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef049c27fb3a0ae8844289eeb8124f94bbd47199
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:19:00 2005 -0800

    [PATCH] IB/mthca: improve CQ locking part 2
    
    Locking during the poll cq operation can be reduced by locking the cq
    while qp is being removed from the qp array.  This also avoids an
    extra atomic operation for reference counting.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b6e6a38dc54785691af068189ec08bcb673934b
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:18:47 2005 -0800

    [PATCH] IB/mthca: improve CQ locking part 1
    
    Avoid taking the CQ table lock in the fast path path by using
    synchronize_irq() after removing a CQ from the table to make sure that
    no completion events are still in progress.  This gets a nice speedup
    (about 4%) in IP over IB on my hardware.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aab64dc6c3b71ff52a21a54df366467f773d13c7
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Mar 4 17:18:33 2005 -0800

    [PATCH] IB/mthca: CQ minor tweaks
    
    Clean up CQ code so that we only calculate the address of a CQ entry
    once when using it.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5acb9f6807785ace90f3d28c5993a8256fbc1a11
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Fri Mar 4 17:18:19 2005 -0800

    [PATCH] IB: fix ib_find_cached_gid() port numbering
    
    Fix ib_find_cached_gid() to return the correct port number relative to
    the port numbering used by the device.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27670f5c6205d36822176fd88a7714363236c9c2
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:18:04 2005 -0800

    [PATCH] IB/ipoib: fix locking on path deletion
    
    Fix up locking for IPoIB path table.  Make sure that destruction of address
    handles, neighbour info and path structs is locked properly to avoid races and
    deadlocks.  (Problem originally diagnosed by Shirley Ma)
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aabe8488a6dd0fbcc69d63c1e2365b4df9561b9c
Author: Shirley Ma <xma@us.ibm.com>
Date:   Fri Mar 4 17:17:51 2005 -0800

    [PATCH] IB/ipoib: don't call ipoib_put_ah with lock held
    
    ipoib_put_ah() may call ipoib_free_ah(), which might take the device's lock.
    Therefore we need to make sure we don't call ipoib_put_ah() when holding the
    lock already.
    
    Signed-off-by: Shirley Ma <xma@us.ibm.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02413477eb33f411d8a8b707c000d9078a40ba6c
Author: Shirley Ma <xma@us.ibm.com>
Date:   Fri Mar 4 17:17:36 2005 -0800

    [PATCH] IB/ipoib: small fixes
    
    IPoIB small fixes: Initialize path->ah to NULL, and fix dereference after free
    of neigh in error path of neigh_add_path().
    
    Signed-off-by: Shirley Ma <xma@us.ibm.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 881fca9e507a9f5a2b4cb0d551bffcecfe63e57a
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:17:23 2005 -0800

    [PATCH] IB/ipoib: rename global symbols
    
    Make IPoIB data_debug_level module parameter static to the single file
    where it is used.  Also Rename IPoIB module parameter variable from
    "debug_level" to "ipoib_debug_level".  This avoids possible name
    clashes if IPoIB is built into the kernel.  We use module_param_named
    so that the user-visible parameter names remain the same.
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33bb84485a64dac89cf71f4ca307ce6e1e8196c
Author: Shirley Ma <xma@us.ibm.com>
Date:   Fri Mar 4 17:17:09 2005 -0800

    [PATCH] IB/ipoib: use list_for_each_entry_safe when required
    
    Change uses of list_for_each_entry() where the loop variable is freed
    inside the loop to list_for_each_entry_safe().
    
    Signed-off-by: Shirley Ma <xma@us.ibm.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5273d6296cd0ce9a92865ff23c3eba6cf07b0d39
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:16:56 2005 -0800

    [PATCH] IB/ipoib: fix rx memory leak
    
    Fix memory leak when posting a receive buffer (pointed out by Shirley Ma).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4e3c8dfa41f89fb4da3cc9306df485a9b554c16
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:16:43 2005 -0800

    [PATCH] IB/mthca: fix reset value endianness
    
    MTHCA_RESET_VALUE must always be swapped, since the HCA expects to see
    it in big-endian order and we write it with writel.  This means on
    little-endian systems we have to swap it to big-endian order before
    writing, and on big-endian systems we need to swap it to make up for
    the additional swap that writel will do.  This fixes resetting the HCA
    on big-endian machines.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ed9f0ab3650cf877085ce0b111083c319f42985
Author: Roland Dreier <roland@topspin.com>
Date:   Fri Mar 4 17:16:29 2005 -0800

    [PATCH] IB/mthca: add missing break
    
    Add missing break statements in switch in mthca_profile.c (pointed out
    by Michael Tsirkin).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f52a9313724543494559fa680fe926095c11e9f
Author: Tom Duffy <tduffy@sun.com>
Date:   Fri Mar 4 17:16:17 2005 -0800

    [PATCH] IB: sparse fixes
    
    Fix some sparse warnings by making sure we have appropriate "extern"
    declarations visible.
    
    Signed-off-by: Tom Duffy <tduffy@sun.com>
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25b1bc67c2e456143639a41856e3fd01f2e6cc46
Author: shaharf@voltaire.com <shaharf@voltaire.com>
Date:   Fri Mar 4 17:16:03 2005 -0800

    [PATCH] IB: fix vendor MAD deregistration
    
    Fix bug when deregistering a vendor class MAD agent.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f548296450e30486b1e51c76b6834c0e4dfdddb5
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Fri Mar 4 17:15:49 2005 -0800

    [PATCH] IB: simplify MAD code
    
    Remove unneeded MAD agent registration by using a single agent for
    both directed-route and LID-routed MADs.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 493b4d4fc5b53f3aa4f04a4b4d206b00e3da13c7
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Mar 4 17:15:36 2005 -0800

    [PATCH] audit mips fix
    
      CC      arch/mips/kernel/ptrace.o
    arch/mips/kernel/ptrace.c: In function 'do_syscall_trace':
    arch/mips/kernel/ptrace.c:310: warning: implicit declaration of function 'audit_syscall_entry'
    arch/mips/kernel/ptrace.c:310: error: 'struct pt_regs' has no member named 'orig_eax'
    arch/mips/kernel/ptrace.c:314: warning: implicit declaration of function 'audit_syscall_exit'
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0560b158ed4e66268b193e0442ede79391a66442
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Fri Mar 4 17:15:23 2005 -0800

    [PATCH] aoe: fix printk warning
    
    u64's are not longlongs on sparc64 and ppc64.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba15d6aa95ae689b083a133a3689ff95f4c47321
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:15:09 2005 -0800

    [PATCH] nfsd: discard CACHE_HASHED flag, keeping information in refcount instead.
    
    This patch should fix a problem that has been experienced on at-least one
    busy NFS server, but it has not had lots of testing yet.  If -mm could provide
    that .....
    
    The rpc auth cache currently differentiates between a reference due to
    being in a hash chain (signalled by CACHE_HASHED flag) and any other
    reference (counted in refcnt).
    
    This is an artificial difference due to an historical accident, and it
    makes cache_put unsafe.
    
    This patch removes the distinction so now existance in a hash chain is
    counted just like any other reference.  Thus a race window in cache_put is
    closed.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edd9a0079e105fbd06b699c276d19fe4160dd1e7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:14:56 2005 -0800

    [PATCH] nfsd: change nfsd reply cache to use list.h lists
    
    also kmalloc the cache one entry at a time, instead of in one big slab.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd074e20d900243cb081d6ad9a6a553efc0a7556
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:14:42 2005 -0800

    [PATCH] nfsd: global/static cleanups for nfsd
    
    The patch below contains the following cleanups:
    - make some needlessly global code static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c59e02e193f1206b57718d9c50160b489f20c258
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:14:29 2005 -0800

    [PATCH] nfsd: nfsd: remove pg_authenticate field
    
    The pg_authenticate (now pg_authenticate_obsolete) callback was only being
    used by the nfs4 client callback code to circumvent the svcauth_unix code's
    insistence on checking all requests against the export table.  With that
    problem solved, we no longer need it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53e730f620d617a661c113982bb01a9bdbcf6ea7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:14:15 2005 -0800

    [PATCH] nfsd: lockd: don't try to match callback requests against export table
    
    On lockd callbacks, we're a client, and the source address is that of a
    server, so we shouldn't be trying to match the source address of the callback
    request against our export table.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30c22e805680d01690a34bb4214268060f31c0e6
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:14:01 2005 -0800

    [PATCH] nfsd: nfs4: use new pg_set_client method to simplify nfs4 callback authentication
    
    Use new pg_authenticate method to simplify nfs4 callback authentication.
    
    This also has the effect of changing the error return from rejectedcred to
    badcred.  I believe the change is correct.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 556d600cd16d20949f6c9bbfe07c7ca2e8f85789
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:13:48 2005 -0800

    [PATCH] nfsd: svcrpc: move export table checks to a per-program pg_add_client method
    
    svcauth_null_accept() and svcauth_unix_accept() are currently hard-wired to
    check the source ip address on an incoming request against the export table,
    which make sense for nfsd but not necessarily for other rpc-based services.
    
    So instead we have the accept() method call a program-specific
    pg_authenticate() method.  We also move the call to this method into
    svc_process instead of calling it from the flavor-specific accept() routines.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6147285bf4c2328556f98a501fc97973f6a3a23f
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:13:35 2005 -0800

    [PATCH] nfsd: svcrpc: rename pg_authenticate
    
    Later patches remove pg_authenticate and use the name for a different purpose;
    so rename it to pg_authenticate_obsolete for now.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bf03de1d2686d5aafbbf40b2c328b5735ce672a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:13:22 2005 -0800

    [PATCH] nfsd: svcrpc: add a per-flavor set_client method
    
    Add a set_client method to the server rpc auth_ops struct, used to set the
    client (for the purposes of nfsd export authorization) using flavor-specific
    information.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a2fceca146215cc62eac11347cd3fe6a4927c20
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:13:08 2005 -0800

    [PATCH] nfsd: exportfs: reduce stack usage
    
    find_exported_dentry() declares
    	char nbuf[NAME_MAX+1];
    in 2 separate places, and gcc allocates space on the stack for both
    of them.  Having just one of them will suffice, if we can put put
    with its scope.
    
    Reduces function stack usage on x86-32 from 0x230 to 0x130.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5801ce956b72d3886fc460b3bd680839a832286
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Mar 4 17:12:54 2005 -0800

    [PATCH] SGI 921857: find broken with nohide on NFSv3
    
    This patch makes "find" work when traversing nohide exports on NFSv3.  The
    READDIRPLUS reply needs to not return a file handle for the ".." entry when
    the directory is a server side mountpoint, which would be the directory
    itself, otherwise the client remembers the wrong file handle and gets
    confused.
    
    Signed-off-by: Greg Banks <gnb@melbourne.sgi.com>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ff038150a49b1d2f2f49214b57f130169ecc80e
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Fri Mar 4 04:21:20 2005 -0800

    [TIGON3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbe7a673ecb0e7323e679174e241e2e641f0eb39
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Fri Mar 4 04:20:02 2005 -0800

    [TIGON3]: Do not touch NIC_SRAM_FIRMWARE_MBOX when TG3_FLG2_SUN_570X.
    
    There is no firmware on these chips, so accessing this
    value is pointless.  But, more importantly, touching
    this area on such chips results in PCI PIO timeouts.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f8aac81f68709f77bfd1cc0bab13108d4c47948a
Author: David S. Miller <davem@northbeach.davemloft.net.davemloft.net>
Date:   Fri Mar 4 00:47:05 2005 -0800

    [SPARC64]: Tomatillo PCI controller bug fixes.
    
    - Error handlers were mis-calculating ICLR register to
      ACK on Tomatillo.
    - PCI error handlers should not ACK other IRQ.
    - Fix Tomatillo version comparison for PCI Timeout
      Interval setting
    - Tomatillo PCI control register prefetch enable bits
      were off.
    - Tomatillo revs <= 1 need bit 61 set, all others should
      have it clear.  This is in the PCI control register.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 54fd44c975d152b5e8fddebf239ad60f5ee17b77
Merge: 1b10467... 650004d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:30:31 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 1b104678425d99b2333a50ab83d0d99c2263d533
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Fri Mar 4 23:55:22 2005 +0000

    [ARM] Fix two missed ether1_outw() function calls.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8d511c7b4dd0df6cc06d8b5bc2650c5d3448fd28
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Fri Mar 4 23:13:29 2005 +0000

    [ARM PATCH] 2514/1: save iWMMXt context to ram before entering sleep mode
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f3a2b3ccf0239f580942db933efa5a48b3a6e6bc
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Fri Mar 4 18:43:44 2005 +0000

    [ARM PATCH] 2513/1: more PXA27x regs to save for sleep mode
    
    Patch from Nicolas Pitre
    
    ... plus Mainstone bits.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 49ee1b77fa886dae22f7b901517a8049dc89a26a
Author: George G. Davis <gdavis@mvista.com>
Date:   Fri Mar 4 18:19:21 2005 +0000

    [ARM PATCH] 2459/1: ARMv6 supersections for static kernel direct mapped memory regions [updated]
    
    Patch from George G. Davis
    
    Use ARMv6 supersections for 16MiB static kernel direct mapped memory
    regions when possible.
    Based on comments received for the first version of this patch, this
    version has added a comment to clarify that ARMv6 supersections are
    only valid for the domain == 0 case and moved the supersection address
    mask and size macros before the hardware page table definitions.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5f2849e44bf9b56cd3085d104f4f437e9ec263d3
Author: Andrew Victor <andrew@com.rmk.(none)>
Date:   Fri Mar 4 17:01:00 2005 +0000

    [ARM PATCH] 1941/2: End-of-interrupt (irq_finish) macro on ARM
    
    Patch from SAN People
    
    On some ARM-based processor's (eg, Atmel's AT91RM9200) it is necessary
    to signal the end-of-interrupt to the interrupt controller. This is
    necessary so it can restore its internal priority levels, etc.
    This patch is equivalent to the version in the current 2.4 kernels.
    Patch now updated to 2.6.11
    
    Signed-off-by: Andrew Victor
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f9d05f3ee0d95e26d694c658541bc43cfd29db8f
Author: Richard Purdie <rpurdie@net.rmk.(none)>
Date:   Fri Mar 4 16:47:29 2005 +0000

    [ARM PATCH] 2510/1: PXA: Disable pxa_gpio_irq_type printks
    
    Patch from Richard Purdie
    
    The printks inside pxa_gpio_irq_type damage performance and are of little value in a production kernel. They should be disabled.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f33e69ef3e302872a87f0a70c845e6b314e74ead
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 4 16:24:42 2005 +0000

    [ARM PATCH] 2477/1: Move double defined macro to header file
    
    Patch from Thomas Gleixner
    
    IRQ_DISPATCH is defined in two c files. Move it to the common header file.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 650004d2d86516d6728608123d435ce69a0a2d5d
Merge: 992b0b1... 13cf3d8...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:19:11 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit 13cf3d87c7fd50fc0a7e9bcead1d7f7f37edda4f
Author: George T. Joseph <gtj.member@com.rmk>
Date:   Fri Mar 4 21:19:20 2005 +0000

    [ARM PATCH] 2472/1: Updates 8250.c to correctly detect XScale UARTs
    
    Patch from George Joseph
    
    Modifications to autoconfig_16550a to add a testcase
    to detect XScale UARTS.
    
    Signed-off-by: George Joseph <gtj.member@com.rmk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 992b0b1c9f1e70f1a6620101c271a4c8c831c6b5
Merge: edaa05a... c87203c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:16:35 2005 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-mmc
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit c87203c3402794e17d5703cae953ad9696d64004
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Fri Mar 4 22:07:11 2005 +0000

    [MMC] Use bus dev_attrs instead of handling device attrs manually
    
    Convert MMC to use bus dev_attrs instead of handling the registration
    of these attributes itself.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit edaa05a61e648ac8e27bbeacface9fcd3c26696f
Merge: b9dcde6... 2235551...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:12:52 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/pci-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit b9dcde6e21d7922ef04b728aca14a0d3f5575d66
Merge: a993857... 3de7cc9...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:11:32 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/w1-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit a9938579fffc7a10310b807725841e80761d3d56
Merge: db05e98... edc1ca2...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Mar 4 00:10:17 2005 -0800

    Merge bk://kernel.bkbits.net/gregkh/linux/i2c-2.6
    into ppc970.osdl.org:/home/torvalds/v2.6/linux

commit f8e7c4bd98db31729e5e3c920c18ca38100c32b1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Mar 3 17:15:33 2005 -0800

    Linux 2.6.11.1

commit b20f3c6cba4f282f380bed2241185b7a230542be
Author: Patrick McHardy <kaber@coreworks.de>
Date:   Fri Mar 4 01:20:42 2005 +0100

    [NETFILTER]: Don't insist on ICMP errors carrying 8 byte of protocol header
    
    An ICMP error only needs to carry 8 bytes of protocol header if they were
    present in the original packet. Makes netfilter's handling of ICMP errors
    consistent with IP.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 660a8d484a6fd78893061a3eaf3601a550d2b02b
Author: Jozsef Kadlecsik <kadlec@blackhole.kfki.hu>
Date:   Fri Mar 4 01:19:00 2005 +0100

    [NETFILTER]: Fix multiple problems with TCP window tracking
    
    The first attached patch addresses several problems in the current TCP
    connection tracking in the 2.6 tree. Some of the problems was reported,
    others was discovered by nfsim tests:
    
    - tcp_sack function was not safe against nonlinear skbs
    - practically arbitrary RST segments (addresses, ports assumed to be
      known) could cause connection teardown in conntrack (thanks to Tim
      Burress for the bugreport and patch)
    - article on which the code was based falsely assumed that packets
      must fit completely into the window: packets must at least overlap
      (thanks to Phil Oester for the bugreport and patch)
    - state table slightly changed to handle ACK packets sent by server to
      late resent SYNs
    - tracking reopening connections reworked
    - cosmetic change: when window tracking is ignored by setting
      ip_conntrack_tcp_be_liberal to nonzero, it's ignored completely from
      now on
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit bfbfc54b1330afe4d10f238a4de96b7f4e65b91d
Author: ariel@blueslice.com <ariel@blueslice.com>
Date:   Fri Mar 4 01:18:41 2005 +0100

    [NETFILTER]: SCTP conntrack: fix association restart
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 788efd05e00cd5003328a7884a6dc3c6ec62bbce
Author: Patrick McHardy <kaber@coreworks.de>
Date:   Fri Mar 4 01:17:17 2005 +0100

    [NETFILTER]: Fix /proc/net/ip_conntrack seq_file operations
    
    ip_conntrack dumps an entire hash chain at a time. If dumping
    the first hash chain exceeds the available room nothing has
    been copied and seq_read() stops and returns the error. Change
    it to dump just a single entry at a time.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 7d2239ad476628440eeda5ae1b25e89c7fbbf5ea
Author: Patrick McHardy <kaber@coreworks.de>
Date:   Fri Mar 4 01:16:38 2005 +0100

    [NETFILTER]: Use num_possible_cpus instead of NR_CPUS in {ip6_,arp_,eb}tables
    
    Similar to Andi Kleen's patch "Reduce netfilter memory use on MP systems".
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 08a3c0c0d07a568330b9033d5f43cece3495f8da
Author: Andi Kleen <ak@suse.de>
Date:   Fri Mar 4 01:15:48 2005 +0100

    [NETFILTER]: Reduce netfilter memory use on MP systems
    
    On kernels compiled with a big NR_CPUS netfilter rules would
    eat a lot of memory because all counters would be duplicated
    for all NR_CPUs CPUs.  With NR_CPUS=256 this would add up
    to many MBs of memory.
    
    This patch only allocates enough memory for the possible CPUs,
    which is usually a much smaller number than NR_CPUS.
    
    This allows loading of bigger rule sets on 64bit systems.
    There is still a limit because someone else broke vmalloc to have a 64MB
    limit on 64bit systems for single allocations, 129MB on 32bit.
    It allocates an array of pages with kmalloc and kmalloc has a 128K limit.
    To be fixed with a separate patch.
    
    64bit systems were hurt worst because they tend to have big NR_CPUS
    and the counters need more memory there, and the vmalloc limit is lower.
    But it will raise the limits even on 32bit.
    
    And in general it saves a lot of memory.
    
    Tested only on a small dual CPU box.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 33ef19f6fb1c9217eea2993c54999347c47c51bf
Author: Patrick McHardy <kaber@coreworks.de>
Date:   Fri Mar 4 01:15:03 2005 +0100

    [NETFILTER]: Use correct types in seq_printf calls
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 836582b572b121c302c4da735a8a5527f07e78fc
Author: mstjohns@mindspring.com <mstjohns@mindspring.com>
Date:   Fri Mar 4 01:12:29 2005 +0100

    [NETFILTER]: fix ip6_queue inefficiencies
    
    Check if packet exceeds max queue length before netlink_unicast(),
    add drop statistics.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 0b725eeef1adeed3062e301650fae3b40174d022
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Mar 3 16:12:02 2005 -0800

    [PATCH] Fix keyboards for Dell machines
    
    Some ACPI-related changes were recently made to i8042 discovery for ia64.
    Unfortunately this broke a significant number of Dell laptops due to their
    having incorrect BIOS tables.
    
    So, for now, arrange for the new code to be ia64-only.
    
    From: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 04db04202b006675c18c356aa69810f57e98a639
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:39:35 2005 +0900

    [NET] Don't use magic number for sysctl table definition.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 5dccd6be6725f8d51d8c6efeebb3d0234f214080
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:39:22 2005 +0900

    [IPV6] Mature enough, no longer EXPERIMENTAL.
    
    Now we can pass IPv6 Ready Logo <http://www.ipv6ready.org>
    Phase 1 and Phase 2 Self Tests.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 94dab722d18d7525ee64ddefb225567fa5b671c6
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:39:10 2005 +0900

    [IPV6] ADDRCONF: Update prefix route on address deletion.
    
    We did not delete prefix route on deletion of corresponding
    permanent address while we add prefix route on addition of
    permanent address. This was confusing.
    With this changeset, we purge prefix route or convert it to
    dynamic one, if appropriate.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 83f680daa7773d2eb97309e754d815f67ad1f8ee
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:38:57 2005 +0900

    [IPV6] Unify common functions to compare ipv6 prefixes.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 0d098fc4f4a768ad2597c2154ee7094cab8e6467
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:38:44 2005 +0900

    [IPV6] Ensure to use interface hoplimit by default.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 8b123d00b713465bb5d262cdfa9a05d3e34f612d
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:38:31 2005 +0900

    [IPV6] Always add a fragment header after receiving TOO BIG w/ pmtu < 1280.
    
    According to RFC2460, PMTU is set to the IPv6 Minimum Link
    MTU (1280) and a fragment header should always be included
    after a node receiving Too Big message reporting PMTU is
    less than the IPv6 Minimum Link MTU (1280).
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 3b4804268a4aa955614ad03770f6a68cc808403e
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:38:18 2005 +0900

    [IPV6] NDISC: Ensure to send redirects even if we don't know target's lladdr.

commit 57f2998851911f1d3117e87be3353d25497497be
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:38:06 2005 +0900

    [IPV6] NDISC: Ensure to send redirects.
    
    rt6_lookup() is inappropriate because it cannot lookup
    route to the source node of the original packet if
    we don't have specific route to it.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 21e88ae5bb69ad9478b1c1f586acd96fc0d57c18
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:37:53 2005 +0900

    [IPV6] ROUTE: Keep cache entries for a while.
    
    GC always removed most cache entries and
    a fresh redirect entry might be removed immideately.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit f381e657d13fa51e1e2fa05761ba4a7201527547
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:37:40 2005 +0900

    [IPV6] NDISC: Deprecate base_reachable_time and retrans_timer.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 42ed4aad9878f50397b7d32adebd61b76308c451
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:37:28 2005 +0900

    [NET] NEIGHBOUR: Add retrans_time_ms and reachable_time_ms sysctls.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit ea3b8835ec883c9841052349c439f5ec12b6beab
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:37:14 2005 +0900

    [IPV6] NDISC: Recompute Reachable Time on change of Base Reachable Time.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 328bb78cd178784b01b3d1e4b76298336eaa4283
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:37:02 2005 +0900

    [IPV6] NDISC: NEWLINK notification on change of Reachable Time
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 2ee7b6bf4c183caedb5da11f6b80dd405df1af1e
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:36:49 2005 +0900

    [NET] NEIGHBOUR: Add hook for sysctl strategy.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 63c6297fee4b52872d6a9d45bbd6ccc329a068a8
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:36:36 2005 +0900

    [IPV6] NDISC: Ensure to notify up-to-date link information.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit bbeface4f7cb1d117901695e35e2391073ce0ba3
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:36:24 2005 +0900

    [IPV6] ROUTE: Add gc_min_interval_ms sysctl.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 4aceb6e78018702f3c4f1085c47209b89e7f7811
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:36:11 2005 +0900

    [IPV6] NDISC: Make ndisc_opt_lladdr_data() and check length inside.
    
    What we should do is to check lladdrlen and get pointer
    for link-layer address option.
    Since we know lladdrlen == dev->addr_len, we can check inside.
    
    Singned-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 91a0438b79766628e49fc6742efd5261b3cf88dd
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:35:57 2005 +0900

    [IPV6] NDISC: Save space for ndisc_options{}.
    
    Pointed out by Krishna Kumar <kumarkr@us.ibm.com>.
    
    Also, size of structure is now adjusted automatically.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 5aeb0dad39e9f9cb3304cce86eac378df59a696c
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 4 08:35:45 2005 +0900

    [IPV6] NDISC: Fix space calculation for link-layer address options.
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

commit 6a5d4f1d8a164f6b8d6a0010388458122ae4ca38
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu Mar 3 23:15:05 2005 +0000

    [ARM PATCH] 2509/1: fix watchdog timer frequency for PXA27x
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1234c028b77dc57bd725017c08fb9ca4fe66efd6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 22:57:33 2005 +0000

    [ARM PATCH] 2512/1: S3C2410 - remove bast-cpld.h from include/asm-arm/arch-s3c2410/hardware.h
    
    Patch from Ben Dooks
    
    Remove the include of bast-cpld.h, as it shouldn't be here as
    it only defines some extra bast-specific registers, and does
    not affect the configuration of the hardware dependenat items.
    Ensure that the file is included in the one place it is needed
    and not included.
    This should discourage anyone else putting include files in
    which do not affect the over-all hardware definitions.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 141146803bcc48276807a6bb9294392b4404a1ab
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 22:35:54 2005 +0000

    [ARM PATCH] 2511/1: SMDK2440 - base machine support
    
    Patch from Ben Dooks
    
    SMDK2440 core board support
    
    Signed-off-by: Ben Dooks
    
    Signed-off-by: Dimitry Andric <dimitry.andric@tomtom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f25b6a2703e6a03541335710b20c1b90e93301cc
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 22:09:57 2005 +0000

    [ARM PATCH] 2508/1: S3C2440 - timer and irq device updates
    
    Patch from Ben Dooks
    
    The patch does a number of updates, which are inter-dependant
    on each other, for the s3c2440 support and some clean-ups for
    all s3c24xx architecture in general.
    1) Remove the s3c24xx_{fclk,hclk,pclk} variables, and pass
       these values to the clock core on initialisation. This
       removes the needless double copy, as only the timer code
       uses these directly (see point 4).
       Add an over-all xtal clock to the clock core
    2) Add a sysdev driver to the clock code to ensure all the
       s3c2440 clocks are added if an s3c2440 is present.
    3) Add the new IRQs to irq.c, and initialise them if the
       sysdev for the s3c2440 is present.
    4) Change the timer code to request the timer clk and
       use it to get the frequency.
    Depends on patch 2467/1
    Thanks to Guillaume Gourat for the original patches that
    prompted this re-write.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cd4ad67de87761060ea822c6ae2ce03816aa3711
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Mar 3 21:58:16 2005 +0000

    [ARM PATCH] 2491/1: make ixp2000 use section mappings for on-chip registers
    
    Patch from Lennert Buytenhek
    
    This patch makes the ixp2000 port use section mappings for on-chip
    registers.  This has two advantages:
    1. It saves some TLB entries.
    2. It enables us to work around ixp2400 erratum #66, for which the
       suggested (and only) fix involves mapping all on-chip registers
       using XCB=101 instead of XCB=000.
    This patch was derived from an older patch for the same erratum
    (ARM patch ID 2265/1), made by Deepak Saxena.
    Note that this patch does not actually constitute a workaround for
    erratum #66, it merely lays the foundation for such a workaround.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 357867277a0c7ab984dd2c2babaa3542f685e7dd
Author: John Lenz <lenz@cs.wisc.edu>
Date:   Thu Mar 3 21:35:52 2005 +0000

    [ARM PATCH] 2461/1: base support for poodle machine
    
    Patch from John Lenz
    
    Adds support for the Sharp Zaurus SL-5600
    Add the ability to compile any collection of poodle and
    corgi support under the PXA_SHARPSL option.
    arch/arm/boot/compressed/head-sharpsl.S already has code
    to detect the poodle machine.
    
    Signed-off-by: John Lenz <lenz@cs.wisc.edu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 90907a8b68d6d5eb5d1ae883948ee67dd4caff94
Merge: 425c0d3... 07f8d68...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 3 13:36:41 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit 07f8d68bd46d33d5ddb3d178de0eb42937c7f3b9
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 3 13:21:29 2005 -0500

    [ACPI] fix [ACPI_MTX_Hardware] AE_TIME warning
    which resulted from enabling the wake-on-RTC feature
    
    http://bugme.osdl.org/show_bug.cgi?id=3967
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 425c0d35a5a5bb382e567ed73573f9629d7457d3
Merge: b86f6cf... 1bd4f4d...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 3 10:03:54 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit 1bd4f4d03d6c5cef0e451cf304f87cd3573e170b
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 3 09:55:50 2005 -0500

    [ACPI] ACPICA 20050303 from Bob Moore for AE_AML_BUFFER_LIMIT issue.
    
    It turns out that tightening up the interpreter to truncate buffers
    per the ACPI spec was a bad idea -- BIOS' in the field depended
    on old behaviour.  Instead, we'll endeavor to update the ACPI spec
    to reflect industry practice in this area.
    
    http://bugme.osdl.org/show_bug.cgi?id=4263
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 52b9797f27f41d52ac274b7d834c911542c2bb16
Author: Jamie Lenehan <lenehan@twibble.org>
Date:   Thu Mar 3 14:41:40 2005 +0200

    [PATCH] dc395x: Fix support for highmem
    
    From: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    
    Removes the page_to_virt and maps sg lists dynamically.
    This makes the driver work with highmem pages.
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c1f63ffc23203a79d0339a21b180fd649356d3a8
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Thu Mar 3 14:34:52 2005 +0200

    [PATCH] SCSI tape: write filemark before rewind etc. when writing
    
    The patch at the end of this message modifies the st write semantics in
    the following way: write a filemark before rewind, offline, or seek if the
    previous operation was write.
    
    This semantics is specified on the man pages of some Unices and some
    software (e.g., cpio) seems to assume this. The change makes sure that the
    last file on the tape is properly terminated with a filemark and reading the
    file does not fail at the end.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9b21fa11913a16022748f4d11064d15269983aca
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Thu Mar 3 14:22:41 2005 +0200

    SCSI: revamp target scanning routines
    
    The basic change is to allow target scans to be done
    by generic device (which need only have a scsi host
    as a parent).  Also changes most target functions to
    take a struct scsi_target instead of the H/C/T numbers.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3386c76a75132722b776ec9c6f11b2312bc7864d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 08:29:59 2005 +0000

    [ARM PATCH] 2506/1: S3C2410 - dma descriptor slab
    
    Patch from Ben Dooks
    
    Use slab allocator instead of kmalloc() to allocate the
    dma buffer descriptors. This should allow the tracking
    of dma descriptors, and to check if they are being freed
    correctly.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ade4e2cc36d4061e2343eb18fe3b168700abf368
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 08:13:07 2005 +0000

    [ARM PATCH] 2503/1: S3C2410 - add brief documentation for HP IPAQ H1940
    
    Patch from Ben Dooks
    
    Brief documentation for Documents/arm/Samsung-S3C24XX for the
    HP IPAQ H1940
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9bbbf278d2fd68a4796e825c3e4ae1d7d77c4874
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 07:53:43 2005 +0000

    [ARM PATCH] 2502/1: S3C2410 - watchdog during kernel uncompression
    
    Patch from Ben Dooks
    
    Enable the watchdog at the start of the kernel uncompression
    stage, so that if any errors occur before the kernel reaches
    the stage where it can start running processes then the system
    will be reset.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e190b25ce10aaaaf73c4f9010902b6111eb75969
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Wed Mar 2 23:14:35 2005 -0800

    [PATCH] Fix for trivial fix for 2.6.11 raid6 compilation on ppc w/ Altivec
    
    Here's a patch that will work for both PPC and PPC64. The proper way to
    fix this in mainline is to merge -mm's cpu_has_feature patch, but for
    the stable 2.6.11-series, this much less intrusive (i.e. just the pure
    bugfix, not the cleanup part).
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8fc24098c3df847dff12bb9eccb5a097dbf017eb
Author: Chris Wright <chrisw@osdl.org>
Date:   Wed Mar 2 19:57:09 2005 -0800

    Inode audit records are currently showing only name, inode, and dev.
    The device is calculated incorrectly, and similarly dev based filtering
    is broken.  Fix device node problems and add some more useful data to
    inode audit record -- mode, uid, gid of inode.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 2ddc2a53299af6b493e1b19c23b6d8aa654737dc
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 2 19:21:52 2005 -0800

    For UML, this is fine as far as it goes, but you're adding register references
    to arch-independent code, so this is needed as well:
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit c60af94e8da2653319282f6390ba546ff9f03db5
Author: rene@exactcode.de <rene@exactcode.de>
Date:   Wed Mar 2 18:58:16 2005 -0800

    [PATCH] trivial fix for 2.6.11 raid6 compilation on ppc w/ Altivec
    
    From: Rene Rebe <rene@exactcode.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5a2ddbe1afc638a80c1c0cda65e13c003349028a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 02:32:18 2005 +0000

    [ARM PATCH] 2500/1: S3C2410 - include/asm-arm/arch-s3c2410/regs-adc.h
    
    Patch from Ben Dooks
    
    S3C2410 ADC register definitions
    Patch from Shannon Holland
    
    Signed-off-by: Shannon Holland
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c012f19d05b5fc060383ae3876305488d2e0090a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 02:11:30 2005 +0000

    [ARM PATCH] 2495/1: 21285 - fix build warnings
    
    Patch from Ben Dooks
    
    21285 serial driver has a couple of sparse errors from zero
    initialiser, as well as an unused label.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 55935dfdb041156a27a2d2a033ba1e1fe3f6bb9e
Author: cbrake@com.rmk.(none) <cbrake@com.rmk.(none)>
Date:   Thu Mar 3 01:52:00 2005 +0000

    [ARM PATCH] 2488/1: Update Vibren PXA255 IDP support
    
    Patch from Cliff Brake
    
    Changes to machine specific files and add defconfig so the CONFIG_ARCH_PXA_IDP machine will build and run.  Changes are mostly related to the 2.6 driver model.  Also removed code that is no longer required -- support for older versions of hardware, etc.
    
    Signed-off-by: Cliff Brake
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8e8458805a97d5459a92cc66ed2c4cb5345cf36d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 01:37:23 2005 +0000

    [ARM PATCH] 2483/1: S3C2410 - serial sparse error
    
    Patch from Ben Dooks
    
    Eliminate NULL initiated fields in the port structures
    which where causing errors from sparse.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5063dd9d9f91c42bdf7081fb85a808c06baad895
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 01:16:06 2005 +0000

    [ARM PATCH] 2482/1: IXP2000 - header cleanup
    
    Patch from Ben Dooks
    
    fix the following problems:
    lib/iomap.c:140: warning: passing arg 1 of `__raw_readsb' makes pointer from integer without a cast
    lib/iomap.c:156: warning: passing arg 1 of `__raw_writesb' makes pointer from integer without a cast
    include/asm-arm/arch-ixp2000/io.h modified to have (void __iomem *) in front of the alignment code
    include/asm/arch/system.h:22: warning: `cli' is deprecated (declared at include/linux/interrupt.h:65)
    cli() replace by local_irq_disable
    arch/arm/mach-ixp2000/ixdp2x01.c:116: warning: passing arg 1 of `ixp2000_reg_write' from incompatible pointer type
    arch/arm/mach-ixp2000/ixdp2x01.c:117: warning: passing arg 1 of `ixp2000_reg_write' from incompatible pointer type
    fixed definition of the cpld registers IXDP2X01_CPLD_VIRT_REG()
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 09674ad0b7fed330a9a83ce1cbc8b32e0c17e77d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 00:55:12 2005 +0000

    [ARM PATCH] 2470/1: S3C2410 Documentation - add Guillaume Gourat
    
    Patch from Ben Dooks
    
    Add Guillaume Gourat to list of port contributors
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ff21ec427405a8dbd6961da051b54ebc9f4eea11
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 00:37:40 2005 +0000

    [ARM PATCH] 2469/1: S3C2410 - add S3C2410_TCFG1_MUX4_SHIFT definition
    
    Patch from Ben Dooks
    
    Add missing S3C2410_TCFG1_MUX4_SHIFT
    Patch from Guillaume Gourat
    
    Signed-off-by: Guillaume GOURAT
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6d5611bb064c3d80984f8aaa865730e239732b47
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 00:18:41 2005 +0000

    [ARM PATCH] 2467/1: S3C2440 - camera interface device
    
    Patch from Ben Dooks
    
    Add s3c2440 camera interface device definition
    Patch from Guillaume GOURAT
    
    Signed-off-by: Guillaume GOURAT
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f6da93e9409099098851f840a3924d14747a1a1c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Mar 3 00:00:59 2005 +0000

    [ARM PATCH] 2465/1: VR1000 - add power-off hook
    
    Patch from Ben Dooks
    
    Add PM hook to power board down when requested
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 592dd383dcdd82d6a971c5a5c4238dcedf0b2d8d
Author: John Lenz <lenz@cs.wisc.edu>
Date:   Wed Mar 2 23:39:59 2005 +0000

    [ARM PATCH] 2460/1: fix up resource usage on locomo
    
    Patch from John Lenz
    
    Add the list of devices on the locomo chip, and change around
    how resources and struct resource are used.  There is only one
    struct resource for the entire locomo, but each driver will
    call request_mem_region on the pieces it is using.
    Secondly, add a few helper functions to locomo.c to control
    GPIOs and DAC.
    
    Signed-off-by: John Lenz <lenz@cs.wisc.edu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4a5506940d40d563b503c4409e7b75eb1dc5997d
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Mar 2 23:20:52 2005 +0000

    [ARM PATCH] 2450/1: Add missing REG_OFFSET to ixp4xx platform.h header
    
    Patch from Deepak Saxena
    
    Patch 2449/1 depends on this since it removes REG_OFFSET from the
    individual board implementations.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bd63d6bf496ce542c5bddb8e2c4d42e75fe73700
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Mar 2 22:57:50 2005 +0000

    [ARM PATCH] 2449/1: Make IXP4xx use platform devices for serial ports
    
    Patch from Deepak Saxena
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6bb7f913151b402beb3b0f5b6893a74a1de4a68e
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Mar 2 22:33:50 2005 +0000

    [ARM PATCH] 2448/1: Remove PrPMC1100 platform
    
    Patch from Deepak Saxena
    
    No longer maintained, not sure one can even buy one of these.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 32fc453e050822b013b6a1d92b60470999bd385c
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 22:21:51 2005 +0000

    [ARM] Acorn expansion card core update.
    
    Add __iomem annotations and use iomem functions where appropriate.
    Separate out expansion card allocation/initialisation and freeing.
    Convert device attributes to be handled by driver core.
    Clean up deprecated function warnings for internal ecard_address
    usage.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit caa533e2ce904a4fa9bafaaaedc164f9dff5b8d9
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 2 16:31:57 2005 -0500

    [PATCH] VIA-Rhine: undork whitespace
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4ee9f1920836e974fe86b4f5708344027a06186d
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 21:28:32 2005 +0000

    [ARM] Add card type specific data structure.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ffb5fccfd9027f7d9855a81109fc7231797d8c5f
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 21:09:16 2005 +0000

    [ARM] Net: Convert ether1 and ether3 to use iomem accesses.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fe12455c5d36ac18719e34105bfe681e031fb59a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 20:35:25 2005 +0000

    [ARM] Use ecard_{request,release}_resources() for resource management
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7af60616d952a6fd24851db07956ea07fbd9c970
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 20:17:47 2005 +0000

    [ARM] Net: add macro to access driver specific netdev data.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c817c3f85c544452a060c0002363330dd2e7b60a
Author: James Chapman <jchapman@katalix.com>
Date:   Wed Mar 2 14:56:29 2005 -0500

    [PATCH] mii: add GigE support
    
    Add support for GigE PHYs in MII support library.
    
    This patch allows GigE drivers to use the MII library the same way
    10/100 drivers do.
    
    Since the MII library is already used by lots of network drivers and the
    GigE MII register bit definitions were reserved when many 10/100 PHYs
    were designed, the new GigE registers are accessed only if a driver
    specifically enables it. Existing 10/100 drivers should see no behavior
    differences with this change.
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e69db2c05ad2e83f4bec5d6563b14a774e74ed85
Merge: 1274fcd... 2a0591d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 14:55:29 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/mii

commit 77231c487af266c150703e41db0be4e1b4e86a43
Author: Xose Vazquez Perez <xose@wanadoo.es>
Date:   Wed Mar 2 14:23:55 2005 -0500

    [PATCH] 2.6 eepro100: replace and delete duplicate ids
    
    - replace PCI_DEVICE_ID_INTEL_82557 and PCI_DEVICE_ID_INTEL_82559ER
      with theirs hex numbers
    - PCI_DEVICE_ID_INTEL_82801BA_7 is a duplicate of 0x2449.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9e2984637190613a2e12c3c40c8e6ce712c89ef8
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 2 14:22:23 2005 -0500

    [PATCH] drivers/net/wan/z85230.c interrupt handling fix
    
    From: tom watson <lkml@tommywatson.com>
    
    While working on a driver for z85230 based board I noticed what looks like
    it could be a problem.  If the interrupt handler is handling an interrupt
    on port b and an interrupt comes in for port a, it seems to me that the
    port b handler would be called instead of the port a handler, and possibly
    hang the board until reset.
    
    Attached is a patch to set the irq methods back to port a before attempting
    to call them.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3e846bc0b0a0c40897d6c9fec571d1ed3cb2ff06
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Mar 2 14:21:30 2005 -0500

    [PATCH] drivers/scsi/sata_*: make code static
    
    This patch makes needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4d655d05cca880130affa5ea7375ef53b29e3f2c
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Wed Mar 2 14:19:59 2005 -0500

    [PATCH] WAN drivers fix: N2, C101, PCI200SYN - quite fatal
    
    The last change to drivers/wan/hd6457x.c was a bit fatal to drivers
    using it - the attached patch fixes NULL pointer dereference on RX.
    
    I've updated URLs in MAINTAINERS and wan/Kconfig as well.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1bdd99e379a426cee1f934a88ef82f2c874fc417
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Wed Mar 2 14:18:38 2005 -0500

    [PATCH] emac: fix skb allocation for full-size jumbo frames
    
    Sets jumbo frame handling based on MTU and allocates rx buffers
    large to handle full-size jumbo frames.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 333cefe7deed0d4ed0c0d44c4877724ef2acddd9
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 2 14:17:59 2005 -0500

    [PATCH] tulip/de2104x: don't mix __init & __devinit sections
    
    tulip/de2104x: fix section usage, don't mix __init & __devinit:
    
    Error: ./drivers/net/tulip/de2104x.o .text refers to 000000000000176d R_X86_64_PC32     .init.text+0xfffffffffffffffc
    Error: ./drivers/net/tulip/de2104x.o .text refers to 0000000000001798 R_X86_64_PC32     .init.text+0xfffffffffffffffc
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit dd6764f50f700326e18ec9b6f6bc5342f100b846
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 2 14:17:18 2005 -0500

    [PATCH] net/wan/sbni: fix section usage
    
    net/wan/sbni data reference can be initdata:
    
    Error: ./drivers/net/wan/sbni.o .data refers to 0000000000000000 R_X86_64_64       .init.data+0x0000000000000060
    Error: ./drivers/net/wan/sbni.o .data refers to 0000000000000008 R_X86_64_64       .init.data+0x0000000000000140
    Error: ./drivers/net/wan/sbni.o .data refers to 0000000000000010 R_X86_64_64       .init.data+0x0000000000000180
    Error: ./drivers/net/wan/sbni.o .data refers to 0000000000000018 R_X86_64_64       .init.data+0x0000000000000020
    Error: ./drivers/net/wan/sbni.o .data refers to 0000000000000020 R_X86_64_64       .init.data+0x00000000000001c0
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 38a45f47737567ee1bf3b4ed15976080074a44b0
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 19:16:04 2005 +0000

    [ARM] Unuse scsi host->base
    
    This eliminates the final usage of deprecated elements in scsi_host by
    Acorn SCSI drivers.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 55d411d0e475235b36343c10216657d96e9da156
Author: liml@rtr.ca <liml@rtr.ca>
Date:   Wed Mar 2 14:15:00 2005 -0500

    [PATCH] sata_qstor: eh_timeout fix
    
    Here is an update to sata_qstor.c to enable full/proper
    register access during eh_timeout handling.
    
    Signed-off-by: Mark Lord <mlord@pobox.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c8d9f6ee693fac247daac0f2c5c8ccc01cdd983e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Mar 2 14:09:53 2005 -0500

    [PATCH] Remove unused MAXBPQDEV definition
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ca4e495f815b4541eba9a0921286dee397a8436e
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 2 14:09:04 2005 -0500

    [PATCH] prism54: fix printk format warnings
    
    prism54 build shows some printk format complaints:
    (sparc64 build warning)
    
    drivers/net/wireless/prism54/isl_38xx.c:131: warning: long int format, different type arg (arg 3)
    drivers/net/wireless/prism54/isl_38xx.c:151: warning: long int format, different type arg (arg 3)
    
    cross-compile results:
    https://www.osdl.org/plm-cgi/plm?module=patch_info&patch_id=4240
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b2ab5990653dc476f828a9e738039b4e6c023001
Author: Panagiotis Issaris <takis@lumumba.luc.ac.be>
Date:   Wed Mar 2 14:07:46 2005 -0500

    [PATCH] Possible AMD8111e free irq issue
    
    It seems to me that if in the amd8111e_open() fuction dev->irq isn't
    zero and the irq request succeeds it might not get released anymore.
    
    Specifically, on failure of the amd8111e_restart() call the function
    returns -ENOMEM without releasing the irq. The amd8111e_restart()
    function can fail because of various pci_alloc_consistent() and
    dev_alloc_skb() calls in amd8111e_init_ring() which is being
    called by amd8111e_restart.
    
    1374     if(dev->irq ==0 || request_irq(dev->irq, amd8111e_interrupt, SA_SHIRQ,
    1375                      dev->name, dev))
    1376         return -EAGAIN;
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 770af0ba96a49293b8b15ecad9420d0e3654e114
Author: Panagiotis Issaris <takis@lumumba.luc.ac.be>
Date:   Wed Mar 2 14:06:39 2005 -0500

    [PATCH] Possible VIA-Rhine free irq issue
    
    It seems to me that in the VIA Rhine device driver the requested irq might
    not be freed in case the alloc_ring() function fails. alloc_ring()
    can fail with a ENOMEM return value because of possible
    pci_alloc_consistent() failures.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 55d12caa569dfe69d928033a212165024ac9113e
Author: Thierry Vignaud <tvignaud@mandrakesoft.com>
Date:   Wed Mar 2 14:04:43 2005 -0500

    [PATCH] fix driver name in dl2k as returned by ETHTOOL_GDRVINFO
    
    The GDRVINFO command of the ETHTOOL ioctl returns a bogus driver name.
    
    this bug confusees various network config tools...
    
    see mdk bug #12609 (http://qa.mandrakesoft.com/show_bug.cgi?id=12609)
    for reference
    
    Signed-off-by: Thierry Vignaud <tvignaud@mandrakesoft.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 659a868c91a338c147e007f836ef5a523f204b29
Author: Scott Feldman <sfeldma@pobox.com>
Date:   Wed Mar 2 14:02:38 2005 -0500

    [PATCH] eepro100: remove ID for 82556
    
    82556 support doesn't work with eepro100, so this removes the ID
    (0x1228) for 82556.  See this thread for more info:
    
    http://marc.theaimsgroup.com/?l=linux-kernel&m=110726223221165&w=2
    
    Signed-off-by: Scott Feldman <sfeldma@pobox.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f953b996cfa79415efd803c44a23bb626c0d67aa
Author: John W. Linville <linville@redhat.com>
Date:   Wed Mar 2 14:01:46 2005 -0500

    [PATCH] sk98lin: add MODULE_DEVICE_TABLE entry
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3a718160ae6daef25e2821dea5fc270e45f87564
Author: Pavel Machek <pavel@suse.cz>
Date:   Wed Mar 2 14:00:49 2005 -0500

    [PATCH] Fix u32 vs. pm_message_t in network device drivers
    
    This should fix confusion in network device drivers. No code
    changes.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ae38ce02be6d71fb5187e1d83fe69f89382546ec
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Wed Mar 2 13:58:29 2005 -0500

    [PATCH] Add PPC440SP support to IBM EMAC driver
    
    Configures EMAC thresholds appropriately for the EMAC on the PPC440SP.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0943fd4a90e718920819cd8f5efa6a25e4d90d8b
Author: Scott Feldman <sfeldma@pobox.com>
Date:   Wed Mar 2 13:57:27 2005 -0500

    [PATCH] e100: remove reference to NAPI config option
    
    e100 is NAPI all the time, so the Kconfig option is wasting space.
    
    Signed-off-by: Scott Feldman <sfeldma@pobox.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 955bd9bb8e6e4ac3d042434424aed42efdd5c636
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 2 13:55:36 2005 -0500

    [PATCH] smc91x: power down PHY on suspend
    
    From: Ian Campbell <icampbell@arcom.com>
    
    Powering down the PHY saves something like 100mA at 5V on my platform.
    Currently it is only done when the interface is brought down but it makes
    sense to do it on suspend as well.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 317b42fdcf19f001ef2f75263d2d78ca406793db
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 13:54:56 2005 -0500

    [wireless atmel] Add support LG LW2100N WLAN PCMCIA card
    
    Originally from Serge A. Suchkov <justman@e1.bmstu.ru>.

commit 4ceb33e3c5a9bfe6e8d5394ad0b55d32512c0c9a
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Mar 2 13:50:42 2005 -0500

    [PATCH] Add OMAP support to smc91x Ethernet driver
    
    From: Tony Lindgren <tony@atomide.com>
    
    Following patch adds support for various OMAP boards to smc91x.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ffb764177d30624cfadefd87bcb9928919f1209d
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 18:50:36 2005 +0000

    [ARM] SCSI: Move host->dma_channel to info->scsi.dma
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5901f6c7320f76a91dff229adc4eb1aa5c1f2cfb
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Mar 2 13:49:14 2005 -0500

    [PATCH] (v2) arlan: remove gcc warning with CONFIG_PROC_FS=n
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 118aee24b436e6b442ac9d7452674b548d6b8936
Author: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
Date:   Wed Mar 2 13:48:04 2005 -0500

    [PATCH] ixgb: Documentation/networking/ixgb.txt
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4b3c2782f70a6e5ecc43be4853118de1cfbbfe70
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Mar 2 13:37:44 2005 -0500

    [PATCH] Sparse fixes for drivers/net/hamradio
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2734cbe34fc24dc96e27792b7832ec2cc91c90d9
Merge: 1274fcd... 400706a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 13:35:12 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/ham

commit 006beb9044d3020b563b02ed5d2ca9f8869034d7
Merge: 1274fcd... e985493...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 13:32:38 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/sis900

commit e9854933e4dc1eb94d0817f3fa87d95719a3629f
Merge: 536079e... a0dcd22...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 13:30:53 2005 -0500

    Hand-merge sis900 conflicts.

commit a0dcd22945ee78a5d308f0b4e02489f7401b1143
Author: mbrancaleoni@tiscali.it <mbrancaleoni@tiscali.it>
Date:   Wed Mar 2 13:28:51 2005 -0500

    [PATCH] sis900.c net poll support
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a51a0aaebafe45a2069fd2dc7975326e4c7f348c
Merge: 0f13f7d... 1274fcd...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Mar 2 12:56:19 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/libata-2.6

commit 4661fb3f27d545aaef57995e371565e887198378
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 17:28:15 2005 +0000

    [ARM] Don't use host->irq
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce39ffcd3134304ff11ec618a9e61dd256130f7f
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 16:56:54 2005 +0000

    [ARM] Acorn SCSI: Ensure iomem pointers are marked as such.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7c9fa9ff6b58b1cf086fb1c0307eb4aae24902d4
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 16:07:18 2005 +0000

    [ARM] Fix sparse warnings in ARM IDE drivers.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9571607610b08656a5109a5079ba24ad14858465
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 17:03:02 2005 +0100

    [ALSA] emu10k1 - fix the initial value for Captured FX8010 Outputs
    
    EMU10K1/EMU10K2 driver
    - rename 'EFX voices mask' to 'Captured FX8010 Outputs'
    - fix the initial value
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 327ee9322c2572cf081629d14b45df7c922b6975
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 17:02:09 2005 +0100

    [ALSA] Control API - fix the wrong allocation for userspace controls
    
    Control Midlevel
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 10b92f2f3718d780ea988155953119e4e7a4e20f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 17:01:23 2005 +0100

    [ALSA] Fix the Audigy SPDIF sample rate register definitions
    
    EMU10K1/EMU10K2 driver
    
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 38dc7aa8f591135bee5e4f2e034fc81926a34015
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 17:00:33 2005 +0100

    [ALSA] remove _snd_rawmidi_runtime.trigger
    
    RawMidi Midlevel
    Remove the trigger field from _snd_rawmidi_runtime because
    it is never ever read.  (This may be why nobody noticed that
    snd_rawmidi_transmit_empty sets it to the wrong value.)
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7b9c0fff24348b434a478306ea59b1aea4b75959
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:59:45 2005 +0100

    [ALSA] remove unsafe usage of urb->status
    
    USB generic driver
    Remove unprotected accesses to urb->status and
    substream->runtimer->trigger.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7af96d58df379aa88e09468ba49a6dd3fa71e677
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:58:55 2005 +0100

    [ALSA] add port names for serial MIDI ports
    
    Generic drivers
    Give each of the MIDI ports created by snd-serial-u16550
    a unique name.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 62d2146dd6f17b1a6cc7f6184ce6c40e8083db6e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:58:06 2005 +0100

    [ALSA] fix counting of MIDI input overruns
    
    RawMidi Midlevel
    Do not throw away the old value of the overrun counter when
    more than one byte is received.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f6d1f14c9617a3f6d10d8910d06de5ca0d4e06a8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:57:19 2005 +0100

    [ALSA] fix buffer wrap in snd_rawmidi_transmit_peek
    
    RawMidi Midlevel
    Fix the behaviour and return value of snd_rawmidi_transmit_peek
    when the buffer wraps around.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 8c8a652c6578464c4b61753a829cf905135f6920
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:56:32 2005 +0100

    [ALSA] add more USB MIDI quirks
    
    USB generic driver
    Add support for Roland RS-70, SP-606, BOSS DR-880
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 11127316411cc3e08248ada32339167dfe0ff491
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:55:41 2005 +0100

    [ALSA] AC97 quirk for Dell Precision 650
    
    Intel8x0 driver
    Added the ac97 quirk entry for Dell Precision 650.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6e4544b00591cc9d13163d677c2e7202394b3b74
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:54:56 2005 +0100

    [ALSA] Add mixer controls to intel8x0m
    
    Intel8x0-modem driver
    This patch adds a mixer switch to the intel8x0m driver, so that the
    hook state can be controlled from userspace, instead of bringing the
    line off hook on capture start. Please someone test, and merge into
    cvs. Comments are welcome.
    
    Signed-off-by: Jaime A. Lopez Sollano <jsollano@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b86f6cfb30e2cacc9fa3c6a72748969aae935049
Merge: 326b629... 3cc24cb...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 10:54:36 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit 9c22b78f61b4b6b3381c0a3b010025633362bce0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:54:11 2005 +0100

    [ALSA] Fix CM9761 again
    
    AC97 Codec
    Fixed the silent output playback problem on CM9761.
    The SPDIF_CTRL register (0x6c) bit 17 was the culprit.
    
    The master volume is back again since it seems to have some
    influence on the looped input sounds.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3ca29229aea5c7dd42083ef5995d83c7d3c54c18
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:53:21 2005 +0100

    [ALSA] do codec init more like windows does
    
    au88x0 driver
    The following patch makes the codec init code act more like the windows
    code.
    
    Signed-off-by: Jeff Muizelaar <jeff@infidigm.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 28a49f5131a15e6014404af5848193dc056221d7
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:52:35 2005 +0100

    [ALSA] add Roland FANTOM-X support
    
    USB generic driver
    This adds a USB MIDI quirk for the Roland FANTOM-X.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7f5ad3a2bff8d31f3c1ab920542220f620054ef8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:51:49 2005 +0100

    [ALSA] Add module_init and module_exit entries
    
    ALSA sequencer
    From Mikael Magnusson <mikaelmagnusson@glocalnet.net>:
    Added the missing module_init and module_exit entries.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 89c22338e0cd31a75e347d68848ab905e714697b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:50:58 2005 +0100

    [ALSA] Don't query chip models on CMI8338
    
    CMIPCI driver
    Don't call query_chip() for CMI8338.  It's for CMI8738/8768 only.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3ecb87e18ee483e41a48733db16ac3a426ba4534
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:50:13 2005 +0100

    [ALSA] Fix digital input
    
    HDA Codec driver
    Fixed SPDIF digital input.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 34d146d48ccb2603dd3348316f21e07fe1ab68c1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:49:25 2005 +0100

    [ALSA] ALC882 support, fix ALC880 5-stack mode
    
    HDA Codec driver
    - Added the ALC882 support.
      Currently no model selections; full-mode with digital I/O only.
    - Fixed the widget assignment in ALC880 5-stack mode.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 27f3dcc707fb7eeda173f6de184c351bd9fda7d9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:48:40 2005 +0100

    [ALSA] CMI8768 patch
    
    CMIPCI driver
    Hi,
    
    I made a patch for CM8768, which has the same PCI ID but there are
    several HW diffecece, aas listed:
    
    1. 8768 has no PCM volume control.
    2. The ADC of 8768 can only record in 44.1kHz or 48kHz.
    3. 8768 can support up to 8 channels.
    
    I made change for item 2 and 3, I want to use the softvol plugin but
    don't know how to. The driver just don't generate the PCM volume slider
     for now.
    
    Signed-off-by: ChenLi Tien <cltien@cmedia.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 684cb2f58a084dbf1d6ac245aea251619a243b68
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:47:54 2005 +0100

    [ALSA] Fix Digital Input
    
    HDA Codec driver,HDA generic driver
    Fixed the SPDIF digital input support for HDA codecs.
    New controls 'IEC958 Capture Switch' and 'IEC958 Capture Default'
    are added.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 63a153750afe5d171f03091d7c17fd30e258011e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:47:08 2005 +0100

    [ALSA] fix Emagic broadcast port names
    
    USB generic driver
    Name the broadcast port 'Broadcast' instead of 'Broadcast/Control'
    because control messages are returned through the first MIDI port.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 1f166d117db487be6960ad08c41dc3dcb37316a1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:46:23 2005 +0100

    [ALSA] ignore Emagic padding bytes
    
    USB generic driver
    Ignore the 0xff padding bytes added by Emagic devices at the end
    of input packets.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit ea00ba342c7a57220f909d273354cf8b12cc26e0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:45:33 2005 +0100

    [ALSA] add logging to send_bulk_static_data
    
    USB generic driver
    Add the optional dump_urb call to send_bulk_static_data, too.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d63bda498062e8877efeb3c11b782003e45b9394
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:44:45 2005 +0100

    [ALSA] add support for Emagic USB MIDI interfaces
    
    USB generic driver
    Add support for the Emagic USB MIDI protocol (raw MIDI with 'F5 xx'
    port switching) and for Unitor8/AMT8/MT4 devices.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7f96165b774abb23c75bb1d07b9a0c932e541996
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:43:50 2005 +0100

    [ALSA] fix indentation
    
    Generic drivers
    
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 5ddd193a8928a72785d26d304de6f944677a6592
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:43:04 2005 +0100

    [ALSA] remove superfluous from_timer_port parameter
    
    ALSA sequencer
    Removed superfluous from_timer_port parameter from
    snd_seq_queue_process_event and queue_broadcast_event
    functions.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 33e44d917d26d6f5d736ca74754abfab45db4e9c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:42:11 2005 +0100

    [ALSA] Fix SPDIF output
    
    HDA Codec driver
    Fixed SPDIF output (over multi-out).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ac8e27f533fab8860e30a1fcc7015ec9a910b590
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:41:26 2005 +0100

    [ALSA] Fix mono volume/mute controls
    
    HDA generic driver
    Fixed mono volume/mute controls.  They were handled as stereo mistakenly.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7d071f2102598ea6cf344a45ddc834cfec95f972
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:40:37 2005 +0100

    [ALSA] Don't set up the front stream twice
    
    HDA Codec driver
    Don't set up the front stream twice in the loop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 53bae30329e83c3a26feb98b07af91df7794e119
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:39:47 2005 +0100

    [ALSA] Fix compilation with compat support
    
    ALSA sequencer
    Fix the compilation with 32bit compat support.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a0cb9dbfde330076bc67cf71284bca20bd503880
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:38:56 2005 +0100

    [ALSA] remove an unnecessary printk
    
    EMU10K1/EMU10K2 driver
    This patch removes an unnecessary printk accidentally left in the
    multichannel patch.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 373beab07671e532f5dcbaa2b8b281a88cc25486
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:38:10 2005 +0100

    [ALSA] Fix invalid use of readl/writel
    
    KORG1212 driver
    Fixed the invalid use of readl/writel to normal pointers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1e1075858a189fee2818f928f2794a35aa891670
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:37:23 2005 +0100

    [ALSA] [SPARSE] Use NULL instead of 0
    
    HDA Codec driver
    Use NULL for pointers instead of 0.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 199a4a8c5b802e9a1dd67ddb339cf93a62feecca
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:36:33 2005 +0100

    [ALSA] [SPARSE] Add __user pointer casts
    
    Wavefront drivers
    Added __user pointer casts to sys_*() arguments
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41cbf69f42b0d197c5e1dcffe14cecbd171d43ec
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:34:50 2005 +0100

    [ALSA] [SPARSE] Fix __user pointers
    
    EMU10K1/EMU10K2 driver
    Fix the access to __user pointers in some places.
    Added proper casts.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6fe7a1ce80c381f63eadc5cf8c0da4cd0f2738c6
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:34:07 2005 +0100

    [ALSA] Fix comiple with old gcc
    
    EMU10K1/EMU10K2 driver
    Fix compile with old gcc.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7c3f7e28d77ee16c04aebae48a7d6103761dc409
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:33:19 2005 +0100

    [ALSA] [SPARSE] Use unsigned int :1 bitfields
    
    EMU10K1/EMU10K2 driver,GUS Library,ALSA<-OSS emulation,Trident driver
    YMFPCI driver,CMIPCI driver,Intel8x0-modem driver,Maestro3 driver
    ALI5451 driver,ICE1712 driver
    Use unsigned int :1 bitfields.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0c7ba7bc1ffa0af9a75833186ac366607e83cf18
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:32:38 2005 +0100

    [ALSA] [SPARSE] Fix __user pointers
    
    PCM Midlevel,RawMidi Midlevel,ALSA<-OSS emulation,ALSA sequencer
    Fixed __user pointers including other misc fixes:
     - replaced the obsolete CONFIG_SND_IOCTL32_EMUL.
     - added the proper segment change before passing the kernel pointer
       as the user pointer in PCM code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2e1946e6d49417978af3f84f20573ae21566bb2b
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 15:32:02 2005 +0000

    [ARM] Fix set_fiq_regs()/get_fiq_regs()
    
    Make these "naked" functions.  This allows us to eliminate the
    clobbers which later gcc versions complain about.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f951b38650f1b5def8ec6e4d735c5d681f0b124f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:31:51 2005 +0100

    [ALSA] Fix the wrong function call from ioctl
    
    Control Midlevel
    Fixed the call of a wrong function from ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2359b08ad7053fd5a8fe11c0189c79ab38b486aa
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:31:07 2005 +0100

    [ALSA] use unsigned 1-bit fields
    
    Virtual Midi
    Can't have a boolean and a sign bit in 1 bit.
    
    Fix (14) boolean/bitfield sparse warning:
    include/sound/seq_virmidi.h:41:16: warning: dubious one-bit signed bitfield
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fb29cc9ee20ff4efe9337db36ac948f375dac013
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:30:15 2005 +0100

    [ALSA] Fix CM9761 again
    
    AC97 Codec
    Revert the last addition for CM9761A support.  The codec doesn't
    support the real control of Master/PCM volumes, too.
    Instead, fixed the default multi-channel register setting now.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5a813f11ca20428669baec330a3993788bacdef8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:29:36 2005 +0100

    [ALSA] Fix CM9761A codec support
    
    AC97 Codec
    Fixed the codec patch for (probably) CM9761A.  It looks incompatible
    with other CM9761 models.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c6d76f09b6cd84efd40e2b297283491e2859eccd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:28:44 2005 +0100

    [ALSA] add code to dump packets
    
    USB generic driver
    add a compile-time option to log the contents of USB packets
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit df6f6b09f8708db8caaf95b1ccc89eac091bd58b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:28:03 2005 +0100

    [ALSA] Fix detection of AFG node
    
    HDA Codec driver
    Fix the detection of AFG node with unsolicited events.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 607a44535941987b3d281cb6e0cd88f41d393cb2
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:27:11 2005 +0100

    [ALSA] emu10k1 - add 'voices' /proc entry for debugging the voice allocator
    
    EMU10K1/EMU10K2 driver
    This patch adds a 'voices' /proc entry for debugging the voice
    allocator.  It also increases the size of the ptr_regs files to display
    the values for all channels.  Finally it updates the names of the EFX
    recording inputs from '???' to 'FXBUS2_*'.
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 27ae958cf6816e7f973d7de57af9876fb483dbde
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:26:25 2005 +0100

    [ALSA] emu10k1 driver - add multichannel device hw:x,3 [2-8/8]
    
    EMU10K1/EMU10K2 driver
    This series of patches adds a 16 channel non interleaved PCM playback
    device, hw:x,3, to the emu10k1 driver.  It also adds support for the
    newly discovered per channel half loop interrupt.
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3acd4a9a940177d89b5831582ac7392d9948f52d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:25:34 2005 +0100

    [ALSA] emu10k1 driver - add multichannel device hw:x,3 [1/8]
    
    EMU10K1/EMU10K2 driver
    Update header file for multichannel support.
    Add some new register info.
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 789f96c98d034745848ff3d395d124704c08cca8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:24:49 2005 +0100

    [ALSA] FM801 - radio: Fixed thinko for tea575x_tuner module parameter (int type not bool)
    
    FM801 driver
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6f07cc6edb77ba5442c321c532d895b1daf06f14
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 16:23:58 2005 +0100

    [ALSA] TEA575x - add video release callback to avoid warning
    
    TEA575x tuner
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2235551de593b3e7b93a7f239bb8097929b1cfd6
Merge: 1274fcd... 458a71c...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 2 07:18:01 2005 -0800

    Merge suse.de:/home/greg/linux/BK/bleed-2.6
    into suse.de:/home/greg/linux/BK/pci-2.6

commit a98faa0cfb14567db871088699adde16c81957eb
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Mar 2 15:09:38 2005 +0000

    [ARM] Update syscall table
    
    Add demultiplexed socket and ipc syscalls.  Add key syscalls.
    
    Leave the new numbers for the demultiplexed socket and ipc syscalls
    commented out in asm-arm/unistd.h for the time being.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2c49c809cc3f2d7772807a8ed61b40b56717a8f0
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Mar 2 05:36:48 2005 -0800

    [TCP]: Put back tcp_timer_bug_msg[] symbol export.
    
    It is needed for tcp_reset_xmit_timer(), which is invoked by
    tcp_prequeue() which is invoked from tcp_ipv6.c
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f22951c615c598204917563d1998e9a30ff01475
Merge: 1274fcd... addcf6d...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 2 13:17:39 2005 +0100

    Alsa sync

commit 3bd95d6da37b66ee05da10115d7ce7e356942c5c
Author: Dave Jones <davej@redhat.com>
Date:   Wed Mar 2 05:03:29 2005 -0500

    [AGPGART] Fix typo.
    
    From: Joern Heissler
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3cc24cb10c0fca1b697f9c17136f02d9422376aa
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 04:13:39 2005 -0500

    [ACPI] fix sysfs "eject" file
    
    This fixes a if-statement in setup_sys_fs_device_files().  It seems to
    assume that 'struct acpi_device_flags.ejectable' indicates whether a device
    has _EJ0 or not.  But this is not a right assumption.  It indicates whether
    a device has _EJ0|_EJD (See acpi_bus_get_flags() function).
    
    setup_sys_fs_device_files() creates 'eject' file for devices that have _EJ0
    control method under a corresponding directory in
    /sys/firmware/acpi/namespace/ACPI/.  'eject' file is used to trigger
    hot-removal function from userland.
    
    <Note that we expect this file location to change in the future.>
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 682327941ae1a6f3150f4895e7c256996d2a903a
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 04:06:18 2005 -0500

    [ACPI] fix ACPI container driver's notify handler.
    
    Previously, the handler tried to make a container device be offline if an
    ACPI_NOTIFY_BUS/DEVICE_CHECK notification is performed on the device was
    present and has its acpi_device.  But, the condition is weird.  Whenever
    the notification is performed, there should be only the following two
    conditions:
    
      1. the device is present, but does not have its acpi_device.
      2. the device is not present, but has its acpi_device.
    
    #1 is a hot-addition case, which was handled properly also in previous
    handler.  #2 is a surprising hot-removal case, which was not handled in
    previous handler.
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 913ad613751aa04d8584f9e99dbe86b0a91126c6
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 04:02:55 2005 -0500

    [ACPI] fix kobject_hotplug() use by ACPI processor and container drivers
    
    A while ago, the drivers used their own function
    'processor_run_sbin_hotplug() and container_run_sbin_hotplug()' to notify
    the agent script using /sbin/hotplug mechanism.  But, they were changed to
    use kobject_hotplug() instead and this has caused a side effect.
    
    The container driver was supposed to invoke a container.agent (user mode
    agent script) using /sbin/hotplug mechanism, but after the changes, it is
    not able to call the agent any more and kobject_hotplug() in the
    container.c became to invoke a namespace.agent instead if exists.  So, I
    would like to use the namespace.agent to handle container hotplug event (or
    something else) and let the agent to call proper agent (e.g.
    container.agent).  But, there is an issue we need to solve.  When the
    namespace.agent is called, a path name of associated kobject is passed as a
    DEVPATH (e.g./sys/firmware/ acpi/namespace/ACPI/_SB/DEV0).  However, the
    agent would not know what device is associated with the DEVPATH nor which
    agents to call since the DEVPATH name depends on platform.  The attached
    patch is to add .hotplug_ops member to acpi_namespace_kset structure and
    let it to set a driver name attached to the target kobject into the envp[]
    variable as a DRV_NAME element.  With this, the namespace.agent can call
    proper agents (e.g.  container.agent) by refering the DRV_NAME.
    
    Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3de7cc9916d8887b301f0b29bc46fcb8439c63c9
Author: Christophe Lucas <c.lucas@ifrance.com>
Date:   Wed Mar 2 00:59:57 2005 -0800

    [PATCH] drivers/w1/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    (from:http://kerneljanitors.org/TODO).
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ff1ebf2089b5f730a64b8c68a60f7329a5bf59a3
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Mar 2 00:59:41 2005 -0800

    [PATCH] w1: get rid of the potential problems with atomic operations.
    
    Get rid of the potential problems with atomic operations.
    
    According to upcoming atomic_ops.txt by David Miller and Anton Blanchard
    some archs may reoder atomic operations with nonatomic, since
    the former are always visible but the latter are not, this can lead
    to unpredicted behaviour.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 977f4000b29fe2ab862474e7d1fbbda52676b302
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Mar 2 00:59:25 2005 -0800

    [PATCH] w1: replace obsoleted *sleep_on*
    
    Remove obsoleded *sleep_on*.
    
    Since they are used only to wait for a given flags and awakening
    only happens on signals, we can just replace them with
    msleep_interruptible.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7d821d9981b386cb5a3fa85f19e02f7a4cf6a19d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Mar 2 00:59:08 2005 -0800

    [PATCH] w1: fix some compiler warnings generated by the last "static" patch.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f77735c7d60339f90b7965aef1818fce858e8f98
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Mar 2 00:58:52 2005 -0800

    [PATCH] w1: Core cleanup 1/2
    
    Trivial cleanups, mostly static/non static, removed unneded exports.
    It fuzzes a bit, sorry, patch is quite old.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 991dadefd460026c27165000c3519d3ba173bfda
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Mar 2 00:58:36 2005 -0800

    [PATCH] w1: dscore cleanups. 2/2
    
    Trivial cleanups, mostly static/non static, removed unneded exports.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20f56796a59212e44a84cf6dd9c6db24ef4c6404
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Wed Mar 2 00:58:20 2005 -0800

    [PATCH] w1/w1_therm: replace schedule_timeout() with msleep_interruptible()
    
    Description: Use msleep_interruptible() instead of schedule_timeout() to
    guarantee the task delays as expected. Changed tm to an int, as it now is in
    terms of msecs, not jiffies.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d08af00eaf6a7615b49b5473b33c8b092c648ed2
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 03:57:35 2005 -0500

    [ACPI] flush TLB in init_low_mappings()
    
    From: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b95379dce1a5208ddf57a671d663152462f0a231
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 03:54:47 2005 -0500

    [ACPI] enhance fan output in error path
    
    Currently, fan.c ignores errors from acpi_bus_get_power.  On compaq evo
    notebook that leads to very confusing empty output.
    
    From: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b0303cb3c7376b9e39f3a55da00ed583319d7f0b
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 03:36:53 2005 -0500

    [ACPI] CONFIG_ACPI_NUMA build fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit db05e98e775fedde336c7b895233e873e8ba12b4
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 2 00:13:45 2005 -0800

    [PATCH] I2C: Trivial indentation fix in i2c/chips/Kconfig
    
    Hi Greg,
    
    Quoting myself:
    
    > (...) I also think I see an indentation issue on the "tristate" line,
    > seemingly copied from the SENSORS_DS1621 section which would need to
    > be fixed as well.
    
    Here is the trivial patch fixing that, if you want to apply it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 439c9db8025e2506891ed41d5afae17b22ddd2e0
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Mar 2 00:13:14 2005 -0800

    [PATCH] I2C: Change of i2c co-maintainer
    
    Since I am working more actively than Philip (or anyone else, for that
    matter) on the i2c subsystem these days, it would probably make sense
    that I am listed as the co-maintainer instead of him.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Philip Edelbrock <phil@netroedge.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9477cced275ea6ad0ef8c3ce7a4b29d2240463c9
Merge: a8a4d43... 1274fcd...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Mar 1 23:52:53 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 1491bba79c2c6afb91c9e589d6d1dad33462baa4
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 1 23:50:42 2005 -0800

    [PATCH] I2C: fixed up the i2c-id.h algo ids.
    
    Thanks to Jean Delvare <khali@linux-fr.org> for the help with this.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 42e80eccf7a29de2da95c0575cf545e47cef2156
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 23:03:48 2005 -0800

    [PATCH] I2C: w83627hf needs i2c-isa
    
    The w83627hf driver is useless unless i2c-isa is present. All other
    drivers in this case do select I2C_ISA through Kconfig, so this one
    should as well do.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8edbaf4d45403272b7dd42d349ce41814943a54d
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 1 23:03:32 2005 -0800

    [PATCH] I2C: saa7146 build fix
    
    include/media/saa7146.h:160: parse error before `*'
    include/media/saa7146.h:160: warning: function declaration isn't a prototype
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 427b8e6c52f362efc23a2a7dcda62eadb1d9c9af
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 23:03:15 2005 -0800

    [PATCH] Add class definition to the elektor bus driver
    
    Hi Frank, all,
    
    > > Which bus driver are you using? It obviously lacks class declaration,
    > > so the correct fix is to add the class there.
    >
    > The modules that are loading are (in reverse order):
    >      adm1031
    >      ad5321
    >      mic184
    >      pca9540
    >      i2c_sensor
    >      i2c_elektor
    >      i2c_algo_pcf
    >      i2c_core
    >
    > So I believe what you are asking for is the i2c_elektor driver for the
    > PCF8584 ISA to I2C chip.
    
    Correct, I just checked and this one actually lacks its class. Patch
    follows.
    
    This patch adds a class definition to the elektor i2c bus driver.
    Without this definition, hardware monitoring chips located on such
    busses cannot possibly be driven.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b8513f1c6ee58b8427111ca127d9836f92ae8f7f
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Mar 1 23:03:00 2005 -0800

    [PATCH] I2C: minor I2C cleanups
    
    This is one in a series of patches for adding a non-blocking interface
    to the I2C driver for supporting the IPMI SMBus driver.  This patch is a
    simply some minor cleanups and is in addition to the patch by Mickey
    Stein (http://marc.theaimsgroup.com/?l=linux-kernel&m=110919738708916&w=2).
    
    Clean up some general I2C things.  Fix some grammar and put ()
    around all the #defines that are compound to avoid nasty
    side-effects.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ef4237f47e42aa0852b627a8730a983b61dee9a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Mar 1 23:02:43 2005 -0800

    [PATCH] I2C: S3C2410 missing I2C_CLASS_HWMON
    
    None of the standard sensor drivers currently recognise the s3c24xx
    I2C controller as it does not have I2C_CLASS_HWMON set in the
    adapter class field.
    
    The attached patch initialises the adapter class to I2C_CLASS_HWMON
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 96ad05d373635c55902f1e826c6d7258cc187c87
Author: Mickey Stein <yekkim@pacbell.net>
Date:   Tue Mar 1 23:02:27 2005 -0800

    [PATCH] I2C: Fix some gcc 4.0 compile failures and warnings
    
    gcc 4.0.x cvs seems to dislike "include/linux/i2c.h file" and others due
    to a current gcc 4.0.x change having to do with array declarations.
    
    Example error msg:   include/linux/i2c.h:{55,194} error: array type has
    incomplete element type
    
    A. Daplas has recently done a workaround for this on another header
    file. A thread discussing this can be found by following the link below:
    
    http://gcc.gnu.org/ml/gcc/2005-02/msg00053.html
    
    The patch changes the array(struct i2c_msg) declaration used by
    *i2c_transfer and *master_xfer from "struct i2c_msg msg[]" format to
    "struct i2c_msg *msg".
    
    After some grepping, I came up with about a dozen files that used the
    format disliked by gcc4 that're addressed by the attached patch.
    Tested on gcc 3.x & gcc 4.x by configuring kernel with all i2c switches
    enabled as module, and saw no errors or warnings in i2c.
    
    Signed-off-by: Mickey Stein <yekkim@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 01389791cf97d952a1ec5ec329181b508956820b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 23:02:10 2005 -0800

    [PATCH] I2C: Make i2c list terminators explicitely unsigned
    
    Shouldn't the i2c list terminators be explicitely declared as unsigned?
    I'd hope it to help code analysis tools and possibly avoid false
    positives. Coverity's SWAT pointed my attention to these constants.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 14bef7a5b0e14016c406998f213e25060b61d00c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 23:01:52 2005 -0800

    [PATCH] I2C: Remove NULL client checks in rtc8564 driver
    
    Several functions in your rtc8564 driver verify the non-NULLity of the
    i2c client that is passed to them. It doesn't seem to be necessary, as I
    can't think of any case where these functions could possibly be called
    with a NULL i2c client. As a matter of fact, I couldn't find any similar
    driver doing such checks.
    
    My attention was brought on this by Coverity's SWAT which correctly
    noticed that three of these functions contain explicit or hidden
    dereferences of the i2c client pointer *before* the NULL check. I guess
    it wasn't a problem because the NULL case cannot happen (unless I miss
    something), but this still is confusing code.
    
    Thus I propose the following changes:
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit edc1ca207f3816230896c8cfe37c9b82402ae9e6
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Mar 1 22:03:27 2005 -0800

    [SPARC64]: Accept 'm5823' clock chip as seen on SB1500.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 326b6293ff5169928a26fe65322af10a0ad676ec
Merge: e43950f... 1274fcd...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Mar 2 00:51:19 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 646328440bba7893994c476464b136285314993d
Merge: 1274fcd... 10107e9...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Mar 2 00:43:51 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 9962e88327fdb4ec6dc92efeb6d25019a15b350e
Author: hfvogt@gmx.net <hfvogt@gmx.net>
Date:   Tue Mar 1 20:18:53 2005 -0800

    [PATCH] I2C i2c-nforce2: add support for nForce4 (patch against 2.6.11-rc4)
    
    can you please apply the attached patch (against 2.6.11-rc4, but works
    as well for 2.6.11-rc3-mm2),  that adds support for the two SMBusses of
    the nForce4 to the i2c-nforce2 i2c bus driver.  The patch is reported to
    work on the standard nForce4 (i.e. non-Ultra, non-SLI), but I expect
    that it works as well for the other nForce4 chipsets, that seem to have
    the same PCI-id for the SMBus-device.
    
    This patch was proposed by Chuck <chunkeey@web.de>, thanks to him for the
    information, testing and his patch.
    
    Signed-off-by: Hans-Frieder Vogt <hfvogt@arcor.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c9366a3e508c6333c7b7fa2d07af9fe151b9db24
Author: Ian Campbell <icampbell@arcom.com>
Date:   Tue Mar 1 20:18:36 2005 -0800

    [PATCH] I2C: fix typo in drivers/i2c/busses/i2c-ixp4xx.c
    
    I was looking at your ixp4xx gpio i2c driver for inspiration (for a
    similar pxa2xx one) and I just happened to notice a tiny typo.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cb1d0a7d403387ed0975d54c245be4858634c7e4
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Tue Mar 1 20:18:19 2005 -0800

    [PATCH] I2C: Enable I2C_PIIX4 for 64-bit platforms
    
     Is there any specific reason for the PIIX4 SMBus driver to be disabled on
    64-bit platforms?  If not, then please apply the following change.  The
    MIPS Technologies Malta development board has the 82371EB chip and
    supports 64-bit configurations.  I've verified the driver to work
    correctly using 64-bit kernels for both endiannesses.
    
    Signed-off-by: Maciej W. Rozycki <macro@mips.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7742cc3e79f378703472f648cf4d8ee53c74a872
Author: Ian Campbell <icampbell@arcom.com>
Date:   Tue Mar 1 20:18:03 2005 -0800

    [PATCH] I2C: improve debugging output
    
    Rework the pca_xfer() function to always print the number of
    successfully completed transfers in a series when debugging, even when
    exiting with an error.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f01d23dabbbb76c097951932fced7bfdb57259f
Author: maartendeprez@scarlet.be <maartendeprez@scarlet.be>
Date:   Tue Mar 1 20:17:46 2005 -0800

    [PATCH] I2C: add GL520SM Sensor Chip driver
    
    Port of the Genesys Logic 520SM sensor chip driver from linux 2.4
    
    Signed-off-by: Maarten Deprez <maartendeprez@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 460698873c9556ce3d315f7c2a5ca2bd8dff8b90
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Tue Mar 1 20:17:29 2005 -0800

    [PATCH] I2C: add Marvell mv64xxx i2c driver
    
    Marvell makes a line of host bridge for PPC and MIPS systems.  On those
    bridges is an i2c controller.  This patch adds the driver for that i2c
    controller.
    
    Please apply.
    
    Depends on patch submitted by Jean Delvare:
    http://archives.andrew.net.au/lm-sensors/msg29405.html
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5196cea7854b23cf885da15610c9dd5870c36c58
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Mar 1 20:17:12 2005 -0800

    [PATCH] I2C: New chip driver: sis5595
    
    Please find below the new version of the patch against kernel
    2.6.11-rc3-mm1 to add the sis5595 driver (sensor part).
    
    As you suggested, I have changed the PCI part of the driver, taking the
    via686a driver as an example. I have also changed the comparison of
    jiffies by using time_after.
    
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4315f2edf1660c11807f9c696982bf77505eab9b
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Tue Mar 1 20:16:55 2005 -0800

    [PATCH] I2C: add ST M41T00 I2C RTC chip driver
    
    This patch adds support for the ST M41T00 I2C RTC chip.
    
    This rtc chip has no mechanism to freeze it's registers while being
    read; however, it will delay updating the external values of the
    registers for 250ms after a register is read.  To ensure that a sane
    time value is read, the driver verifies that the same registers values
    were read twice before returning.
    
    Also, when setting the rtc from an interrupt handler, a tasklet is used
    to provide the context required by the i2c core code.
    
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 367deba26bd41b766f636c64805b79a42442c714
Author: Alexey Dobriyan <adobriyan@mail.ru>
Date:   Tue Mar 1 20:16:37 2005 -0800

    [PATCH] I2C: use time_after instead of comparing jiffies
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fc08381fb44ed8b67c8fbf5f7bdff33fd3b8c9d5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 1 20:12:54 2005 -0800

    [PATCH] i2c-core.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4fdd4cb6f69ea9e6d2a10e55604044ebf655100
Author: Shawn Starr <shawn.starr@rogers.com>
Date:   Tue Mar 1 20:10:18 2005 -0800

    [PATCH] I2C: lm80 driver improvement
    
    Description: Cleanup some cluttered macros, add error checking for fan divisor value set.
    
    Signed-off-by: Sytse Wielinga <s.b.wielinga@student.utwente.nl>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>
    Signed-off-by: Shawn Starr <shawn.starr@rogers.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e86f8368d7c5adef16f08ef3a848c7a618bcb4b4
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Tue Mar 1 20:10:01 2005 -0800

    [PATCH] I2C: unnecessary #includes in asb100.c
    
    * Jean Delvare <khali@linux-fr.org> [2005-01-25 10:14:49 +0100]:
    > Any reson why asb100.c (in linux 2.6.11-rc2) includes linux/ioport.h and
    > asm/io.h? As an i2c-only chip driver, I don't think it needs these.
    >
    > As a side note, I also wonder what the inclusions of linux/config.h,
    > linux/types.h and asm/errno.h are there for.
    
    Because they look pretty?  Here's a patch Greg, please apply...
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a32600bf51431798681bad9c6545fcc0fe77ede1
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 20:09:45 2005 -0800

    [PATCH] I2C: Kill unused includes in i2c-sensor-detect.c
    
    Looks to me like i2c-sensor-detect.c includes a handful of headers it
    doesn't need at all. This patch removes them.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bbb7e78c3000fec73b2db86bbed0c1525cc15167
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 20:09:28 2005 -0800

    [PATCH] I2C: Enable w83781d and w83627hf temperature channels
    
    The chips supported by the w83781d and w83627hf drivers might come up
    with their temperature channels disabled. Currently, the w83781d driver
    does so for temp3 but omits temp2, while the w83627hf driver omits both.
    The following patch fixes that, and prints warning messages when the
    driver has to enable the channels (normally the BIOS should do it for
    us). We also skip this initialization step for the AS99127F chips, for
    which we have no documentation.
    
    This should hopefully solve the problem reported here:
    http://archives.andrew.net.au/lm-sensors/msg29150.html
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 683d88c80f944e2d56ee6b246035dff3f5d996b3
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Mar 1 20:04:28 2005 -0800

    [PATCH] I2C: lm78 driver improvement
    
    The following patch against kernel 2.6.11-rc2-mm1 improves the lm78
    driver. I used it as a model to port the sis5595 driver to the 2.6
    kernel, and I then applied the changes suggested by Jean Delvare on
    the sis5595 driver to this one.
    
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8e3efd1ad9adecedf554a01dd873e4bb13c25f6
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Tue Mar 1 20:04:12 2005 -0800

    [PATCH] I2C: i2c-dev namespace cleanup
    
    This patch is namespace cleanup for the i2c-dev module.  Please apply.
    
    Signed-off-by Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d38ac526db9f408e7b1f5721750126cc6714a371
Author: Stefan Ott <stefan@desire.ch>
Date:   Tue Mar 1 19:59:41 2005 -0800

    [PATCH] I2C: fix for fscpos voltage values
    
    Multiplied the voltage multipliers by 10 in order to comply with the sysfs
    guidelines.
    
    Signed-off-by: Stefan Ott <stefan@desire.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3732c94014b1838a116fafdb338550609e423427
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 1 19:58:47 2005 -0800

    [PATCH] I2C: just delete the id field, let's not delay it any longer
    
    Becides, sparse keeps complaining when it sees this attribute within a structure...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e02de9bce90c05d9bedc9aeac4403e69d5e2aa03
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:58:29 2005 -0800

    [PATCH] I2C: Kill i2c_client.id (5/5)
    
    > (5/5) Documentation update.
    
    Finally, updates are required to the i2c/writing-client and
    i2c/porting-client documents. Remove any reference to i2c_client id and
    invite porters to discard that struct member.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e49e9e81c8eb46dc9f155815c2d6f865dc8cf6e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:52:48 2005 -0800

    [PATCH] I2C: Kill i2c_client.id (4/5)
    
    > (4/5) Deprecate i2c_client.id.
    
    Now that i2c_client.id has no more users in the kernel (none that I
    could find at least) we could remove that struct member. I however think
    that it's better to only deprecate it at the moment, in case I missed
    users or any of the other patches are delayed for some reason. We could
    then delete the id member definitely in a month or so.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 038963f5be7f2a90f9b7a2b3aa2e139d0444813c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:52:31 2005 -0800

    [PATCH] I2C: Kill i2c_client.id (3/5)
    
    (3/5) Stop using i2c_client.id in misc drivers.
    
    Affected drivers:
    * acorn/char/pcf8583
    * acorn/char/i2c
    * i2c/i2c-dev
    * macintosh/therm_windtunnel
    * sound/oss/dmasound/dac3550a
    * sound/ppc/keywest
    
    The Acorn pcf8583 driver would give the i2c_client id the same value as
    the i2c_driver id, and later test that client id (in i2c). I changed it
    to test the client's driver id instead. The result is the same and the
    client id is then useless and can be removed.
    
    All other drivers here would allocate the client id to some value and
    then never use it. They are unaffected by the change.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 24e36cfe9bf72e0ad9f2dd3ae0f0be58515ada8b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:52:15 2005 -0800

    [PATCH] I2C: Kill i2c_client.id (2/5)
    
    (2/5) Stop using i2c_client.id in media/video drivers.
    
    Affected drivers:
    * adv7170
    * adv7175
    * bt819
    * bt856
    * bttv
    * cx88
    * ovcamchip
    * saa5246a
    * saa5249
    * saa7110
    * saa7111
    * saa7114
    * saa7134
    * saa7185
    * tda7432
    * tda9840
    * tda9875
    * tea6415c
    * tea6420
    * tuner-3036
    * vpx3220
    
    Most drivers here would include the id as part of their i2c client name
    (e.g. adv7170[0]). This looks more like an habit than something really
    needed, so I replaced the various printf by strlcpy, which should be
    slightly faster. As said earlier, clients can be differenciated thanks
    to their bus id and address if needed, so I don't think that including
    this information in the client name is wise anyway.
    
    Other drivers would either set the id to -1 or to a unique value but
    then never use it. These drivers are unaffected by the changes.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e11d70c6388f7b4fd83b877544bc5c308912186
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:51:51 2005 -0800

    [PATCH] I2C: Kill i2c_client.id (1/5)
    
    (1/5) Stop using i2c_client.id in i2c/chips drivers (mostly hardware
          monitoring drivers).
    
    Drivers affected:
    * adm1021
    * adm1025
    * adm1026
    * adm1031
    * ds1621
    * fscher
    * gl518sm
    * isp1301_omap
    * lm75
    * lm77
    * lm80
    * lm83
    * lm85
    * lm87
    * lm90
    * max1619
    * pcf8574
    * pcf8591
    * rtc8564
    * smsc47m1
    * w83l785ts
    
    The vast majority of these drivers simply defined the i2c_client id
    struct member but never used it, so they are not affected at all by the
    change. Exceptions are:
    
    * lm85 and rtc8564, which would at least display the id in a debug
    message when assigning it. Not really useful though, as the id was then
    never used.
    
    * adm1026, which used the assigned id in all driver messages. However,
    since dev_* calls will append the bus number and client address to these
    messages, the id information is redundant and can go away. Also, the
    driver would allow some GPIO reprogramming on the first client only
    (id=0) and removing the id doesn't allow that anymore. I would restore a
    similar functionality if needed, but the ADM1026 chip is found on very
    few motherboards and none of these has more than one ADM1026 chip AFAIK,
    so it doesn't seem to be worth the effort.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 25fcc3191c3598efd82dd3e3896a5b1eeb05b527
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 1 19:51:21 2005 -0800

    [PATCH] I2C: Fix up some build warnings in the fscpos driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8929157c60d968fc2eec82af0aef3ae6cde476d9
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Mar 1 19:50:10 2005 -0800

    [PATCH] I2C: Allow it87 pwm reconfiguration
    
    Quoting myself:
    
    > As soon as you will have confirmed that everything worked as expected,
    > Jonas and I will provide a patch adding a pwm polarity reconfiguration
    > module parameter for you to test. This should give you access to the
    > PWM features of your it87 chip again, but in a safe way for a change
    > ;)
    
    Here comes this patch. The new "fix_pwm_polarity" module parameter
    allows one to force the it87 chip reconfiguration. This is only
    supported in the case the original PWM configuration is suspected to be
    bogus, and only if we think that reconfiguring the chip is safe.
    
    I wish to thank Rudolf Marek and Jonas Munsin again for their testing
    and review of my code.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bcc32d2245b3f674e99fca61514ad80cafad28f5
Author: Stefan Ott <stefan@desire.ch>
Date:   Tue Mar 1 19:04:17 2005 -0800

    [PATCH] I2C: add fscpos chip driver
    
    This patch against 2.6.11-rc1 contains a driver for fscpos sensors.
    
    Signed-off-by: Stefan Ott <stefan@desire.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30ae754eb7d11ccd04a6f045646d0bb4fd08b762
Merge: b08646e... 1274fcd...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Tue Mar 1 15:15:49 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit 0ba34de2653d39cac33b68a542e76aba481a14a3
Merge: 1274fcd... eb6840c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 1 17:24:31 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/net-drivers-2.6

commit 2a0591d988be752aed116f99c0dbe0856d9da3e9
Merge: cd1496b... f2b0334...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 1 15:44:55 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/mii

commit ce7916c26a9054eda06e791ebc14584486f7f1a6
Merge: 6ee1059... 7c691d0...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 1 15:19:48 2005 -0500

    Merge bk://dfarnsworth.bkbits.net/linux-2.5-mv643xx-enet
    into pobox.com:/garz/repo/netdev-2.6/mv643xx

commit e43950f0acbbf42550045e11b9fd2369220832e2
Merge: 828cfa8... 60c7eac...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 1 13:13:06 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 828cfa89c238410cdf7e62c09865ccb4140c3ccb
Merge: 244edc6... d62164f...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 1 12:51:49 2005 -0500

    Merge intel.com:/home/lenb/src/26-stable-dev
    into intel.com:/home/lenb/src/26-latest-dev

commit c096e841d74fee11635c0026d706b4d2bd737536
Author: Dan Streetman <ddstreet@ieee.org>
Date:   Tue Mar 1 16:13:43 2005 +0100

    input: Add the option to use cooked coordinates in MicroTouch
           USB touchscreen driver.
    
    From: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 573147c557c6202eec1dcb1932fcf706734fe006
Author: Dan Streetman <ddstreet@ieee.org>
Date:   Tue Mar 1 16:02:56 2005 +0100

    input: Add MicroTouch (3M) serial touchscreen driver
    
    From: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit a8a4d439e457c88b2cb0382440d4de35496c06c8
Merge: 60c7eac... 059df94...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Mar 1 06:25:05 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 0f13f7d1e54b992b7834af7673efc592126e43ed
Merge: cd1496b... 29802bf...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Mar 1 09:06:26 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/libata-2.6

commit d62164f6f78c3095234e55e6356ce2b9c0a8f3e4
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 1 05:26:20 2005 -0500

    [ACPI] ACPICA 20050228 from Bob Moore
    
    Fixed a problem where the result of an Index() operator
    (an object reference) must increment the reference count
    on the target object for the life of the object reference.
    
    Implemented AML Interpreter and Debugger support for
    the new ACPI 3.0 Extended Address (IO, Memory, Space),
    QwordSpace, DwordSpace, and WordSpace resource descriptors.
    
    Implemented support in the _OSI method for the ACPI 3.0
    "Extended Address Space Descriptor" string, indicating
    interpreter support for the descriptors above.
    
    Implemented header support for the new ACPI 3.0 FADT
    flag bits.
    
    Implemented header support for the new ACPI 3.0 PCI Express
    bits for the PM1 status/enable registers.
    
    Updated header support for the MADT processor local Apic
    struct and MADT platform interrupt source struct for new
    ACPI 3.0 fields.
    
    Implemented header support for the SRAT and SLIT ACPI
    tables.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 244edc67ece1f23fed2b006382f22e789724b0fa
Merge: 637f0bb... a847f56...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 1 02:49:50 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 9ebe3d6ea6848ed70c224ca33cd581a5ea1772be
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 28 23:38:13 2005 -0800

    Resolve conflicts.

commit 7011dbd28d20d120232c804487b1213d6dcc048b
Merge: cd1496b... b5fa324...
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 28 23:33:45 2005 -0800

    Resolve conflicts.

commit b5fa3247be8c283b90fce065d7237c99e58a1eef
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 28 23:00:34 2005 -0800

    [S390]: Fix build after set_pte_at() changes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52ba1924919b0a83b861f64810a2adaca6860593
Author: Chris Wright <chrisw@osdl.org>
Date:   Mon Feb 28 22:34:18 2005 -0800

    A closer sweep of configurable audit symbols shows the following need
    audit.h included when audit.h is detangled from fs.h.
    
            arch/um/kernel/ptrace.c    for audit_syscall_entry/exit
            arch/s390/kernel/ptrace.c  for audit_syscall_entry/exit
            arch/mips/kernel/ptrace.c  for audit_syscall_entry/exit
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 6df791c286f9c010a026dd4b50f6749a609cfcc2
Author: Chris Wright <chrisw@osdl.org>
Date:   Mon Feb 28 22:30:53 2005 -0800

    Currently touching audit.h triggers a large rebuild because it's sucked
    in via fs.h.  It's there because of the getname()/putname() requirements
    that come with CONFIG_AUDITSYSCALL.  Remove header dependency by pushing
    relevant putname() implementation into fs/namei.c.  It adds function
    call overhead for putname() callers when CONFIG_AUDITSYSCALL is set,
    quite minor cost for detangled source.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit a0110032c256fdaf577bbd6ed1b6550f88958170
Merge: a847f56... e20ffd7...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Mar 1 09:27:27 2005 +0000

    Merge shinybook.infradead.org:/home/dwmw2/bk/linus-2.6
    into shinybook.infradead.org:/home/dwmw2/bk/audit-2.6

commit e20ffd76fc5bdccf79223667a615dd4c820947ab
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Mar 1 09:15:37 2005 +0000

    Audit IPC object owner/permission changes.
    
    Add linked list of auxiliary data to audit_context
    Add callbacks in IPC_SET functions to record requested changes.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6353792d2616e44e3ac84513ec11aa82a209aeb5
Merge: 24b2c80... 54077d3...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 28 14:08:34 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 24b2c804cda9f1174bcb7610637164d43756ae50
Merge: 3ecaa6a... 20a380e...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 28 13:59:59 2005 +0100

    Merge bkbits:input into suse.cz:/home/vojtech/bk/input

commit 20a380e2a29c1d8762e306c0a4b2b0a3a3556b6b
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 28 13:58:50 2005 +0100

    input: Make gameport digital joysticks work on 2.6 and x86_64 again.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 3ecaa6a5aaa05ee9d129d36e099fcabec6e6e92a
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 28 10:48:22 2005 +0100

    input: Add more PnP IDs to i8042 PnP probe table. BIOS manufacturers
           are very creative.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 7c691d0bb2f1659fad4044ee377b1ae62575cd90
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Mon Feb 28 02:45:42 2005 -0700

    mv643xx: remove superfluous function, mv643xx_set_ethtool_ops
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 33c5d937413ef484bfe56a0bc6ab3ca42410102c
Merge: 10107e9... 9e2a453...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Feb 28 04:17:14 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit 10107e9c19e654f6e1467fbec8f2ab2e2a35def5
Merge: 54077d3... c62d348...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Feb 28 04:08:25 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 9eb55325195e64c33839128637ec16654de1de8d
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Mon Feb 28 01:50:37 2005 -0700

    mv643xx: raise size of receive skbs to allow for an optional VLAN tag
    
    VLAN tag needs an extra 4 bytes in receive skb
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 637f0bbceb27093a797c056b409ac5e34257671d
Merge: 54077d3... 64ebe3d...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Feb 28 00:39:15 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 64ebe3d84daaefec52e1c04c51dc106655b748e6
Merge: 8ad4c60... 36d2972...
Author: Len Brown <len.brown@intel.com>
Date:   Sun Feb 27 04:44:19 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 1c7c8e67c3fca9f4e233a9e5d410d4c2bae10e12
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Feb 26 19:34:35 2005 -0800

    [SPARC64]: Do the init_mm check inline in set_pte_at().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a9128d881ed779d09474db91b6251a2b14183019
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Feb 26 04:51:23 2005 -0800

    [MM]: Pass correct address down to bottom of page table iterators.
    
    Some routines, namely zeromap_pte_range, remap_pte_range,
    change_pte_range, unmap_area_pte, and map_area_pte, were
    using a chopped off address.  This causes bogus addresses
    to be passed into set_pte_at() and friends, resulting
    in missed TLB flushes and other nasties.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf934d18e3819b04de4abee87ab6e50a939ecd19
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat Feb 26 11:01:13 2005 +0100

    input: Fix string formatting in joydump.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 497fccadc86d11c41cfbaed61b36289915ccd756
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Feb 26 10:13:30 2005 +0100

    input: set gameport devices' bus so they can be bound to drivers.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit eb7d28b6e71ddd343cb07cb8ce45e5a752b29144
Author: Dan Williams <dcbw@redhat.com>
Date:   Fri Feb 25 18:10:55 2005 -0500

    [PATCH] wireless: Make Atmel driver use SET_NETDEV_DEV
    
    Make the Atmel wireless driver use SET_NETDEV_DEV to get the correct
    entries in sysfs.  Seems like somebody meant to do this but it got lost.
    atmel_cs.c was previously fixed to pass in the correct struct device *
    via handle_to_dev() but the driver never actually used it.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d0943bfc479ba12a28fb8b99a8091a3639f07546
Author: Dan Williams <dcbw@redhat.com>
Date:   Fri Feb 25 18:10:42 2005 -0500

    [PATCH] wireless: WEXT quality cleanups + max rssi
    
    (resend)
    
    Use correct maximum rssi level for at76c502e-type cards, and correct
    values in the qual.updated field to more closely match the current
    Wireless Extensions API.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8b87cfcc1df3e883cabde3b59d40b13230add46f
Author: Dan Williams <dcbw@redhat.com>
Date:   Fri Feb 25 18:10:29 2005 -0500

    [PATCH] wireless: Clean up firmware loading in
    
    (resend)
    
    Identify different firmware by enums, not strings, as we need to have
    some integral firmware identifier for choosing maximum rssi values for
    each different firmware type.  Consolidate the information about
    firmware filenames and capabilities in the atmel module, not in atmel_cs
    or atmel_pci.  Move common prototypes and firmware enum into new atmel.h
    file.  The atmel_cs driver also thought that init_atmel_card() took "int
    irq" as the first parameter, this is now fixed to be "unsigned short
    irq".
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 135522dd8daea8b1614472b1d4dc34b864875aa5
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Fri Feb 25 18:04:17 2005 -0500

    [PATCH] sb1000: reduce ioctl stack usage
    
    sb1000_dev_ioctl() (on i386) uses 824 bytes of stack space,
    all due to overuse of inline functions.
    By changing a few infrequently used functions to non-inline,
    the stack usage is reduced to only 60 bytes.
    Nothing in a fast path is changed.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3730ed4d29ab72aef6cdbff8ad525d6584193e3a
Merge: 26f1fcc... 06c8faf...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Feb 25 18:03:29 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 526460567bb76d32736e3eaa51018900622cd8cc
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Fri Feb 25 18:00:31 2005 -0500

    [PATCH] Orinoco driver updates - cleanup PCI initialization
    
    As someone pointed out, pci_set_drvdata() belongs right at the
    end of PCI initialization.  Correct this in the various PCI based
    orinoco drivers.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 21f42d8a648f23beaa331110165692eb849d2d08
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Fri Feb 25 18:00:17 2005 -0500

    [PATCH] Orinoco driver updates - PCMCIA initialization cleanups
    
    The client_reg.Attributes field is no longer used.  Don't bother
    setting it.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 02b8823fb180c8d2ad8b9a7e2db9ed18eb037515
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 25 23:21:03 2005 +0100

    input: After testing on real world hardware, it's obvious we can't trust
           ACPIPnP nor PnPBIOS to properly report the existence of a keyboard
           and mouse port in all cases. Some BIOSes hide the ports if no mouse
           or keyboard is connected, causing trouble with eg. KVM switches.
    
           The i8042 driver now does read-only probing first, which should
           not cause any problems even if an i8042 controller really is not
           present.
    
           However, on IA64 we still need to trust ACPI, since legacy-free hardware
           is common there and invalid port accesses cause exceptions.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 66b0d6628d5bdee01d5e62686a70ae72f64642cb
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 25 17:27:54 2005 +0100

    input: Add a missing brace in hid-core.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit c6e4a2283507a844975f883461cf8fd97800085c
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Feb 25 08:18:09 2005 -0500

    [libata ahci] support ->tf_read hook

commit eb6840cf8a5d618665a4e96f82c98bedad4e3fcb
Merge: 306ebc0... f8319d0...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Feb 25 04:27:42 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/ixgb
    into pobox.com:/garz/repo/net-drivers-2.6

commit 306ebc0988413ca4d720e3a4c580eb5fcf102a6d
Merge: 8672a65... f4f57a5...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Feb 25 04:26:49 2005 -0500

    Merge pobox.com:/garz/repo/netdev-2.6/e1000
    into pobox.com:/garz/repo/net-drivers-2.6

commit 0f5d4125c356c1bc5ab682745599ed442430dcfa
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 25 10:17:35 2005 +0100

    input: Remove filtering of duplicate events in hid-core. HIDDEV wants them,
           and hid-input doesn't care, since input does the filtering anyway.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 6121c72ccccdcb1ae001fb8256508d85e92e27ef
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Feb 25 10:06:21 2005 +0100

    input: atkbd - "scroll" is a per-device attribute, don't use global
           flag in interrupt handler.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8f2a2e2e4041d036bf77f404171bc5396806decf
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Feb 25 00:36:06 2005 -0800

    [MM]: Add 'pfn' arg to flush_cache_page().
    
    Based almost entirely upon a patch by Russell King.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 458a71cde815a7ab0848046f42af2d4fcb226fef
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Feb 24 23:48:28 2005 -0800

    [PATCH] PCI: One more Asus SMBus quirk
    
    One more Asus laptop requiring the SMBus quirk (W1N model).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6b31dffd555a86c885801b99732ea4d6fd60810f
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Thu Feb 24 23:48:12 2005 -0800

    [PATCH] PCI: fix hotplug double free
    
    With the brackets missed out func could be freed twice.
    
    Found by Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 24b599bc7152a6695664a62499112ea1a110677d
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Feb 24 23:47:53 2005 -0800

    [PATCH] PCI: tone down pci=routeirq message
    
    From: Bjorn Helgaas <bjorn.helgaas@hp.com>
    
    Tone down the message about using "pci=routeirq".  I do still get a few
    reports, but most are now prompted just by the fact that my email address
    appears in dmesg in an "error-type" message.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b2e3409a12673460e2dd5b6778ca0fcc152e6b82
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Feb 24 22:36:10 2005 -0800

    [PATCH] PCI: Apple PCI IDs update
    
    please sent that to Andrew/Linus in your next batch for after 2.6.11,
    those new IDs will be needed for support of the new iMac G5.
    
    The changes to pci.ids match the changes already submitted to the web
    database.
    
    From: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e02459496ca715e51f8d3f24b2827001bbe8f4a3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Feb 24 16:26:11 2005 -0800

    PCI: remove pci_find_device usage from pci sysfs code.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e3a0985d9781b7d3490ed2d576955b0d7fd5eb71
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 25 00:02:25 2005 +0100

    input: Disable scancode event generation in hid-core.c, as it can
           cause floods of events when devices don't honor the set_idle()
           call or report noise on absolute values, until a solution for
           this is found.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit f30c15efda5c2371eb484fc512b894ca96bc78dc
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 23:54:53 2005 +0100

    input: Print a warning message when PnP fails to find an i8042
           controller.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 3f85b762376c28e3e46095402e74499d5b43f99b
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 23:38:18 2005 +0100

    input: Make the i8042 PnP detection even more BIOS and CONFIG-proof.
           This now should work with almost any BIOS and kernel config
           combination.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 4cb5e57c63800b2c446ca34f9bc7d8ee74730ee5
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 22:37:21 2005 +0100

    input: Separate dualpoint and passthrough flags in ALPS driver.
           Some non-dualpoint devices need passthrough enabled.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 117f64d4cdbb3add955f0ad90ad6e282ac804cf7
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 22:12:05 2005 +0100

    input: Fix usage of *_MAX macros. Check keycode in KDIOSKEYCODE and
           EVIOCSKEYCODE macros to be <= KEY_MAX. Check off-by one mistakes
           in keycodemax usage. There was a lot of potential for overwriting
           memory. Also enlarge NR_KEYS to 256 while we're at it.
    
    Found-by: Georgi Guninski <guninski@guninski.com>
    Initial-patch-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 50efb8b3dccb7fcd2e73e020b95c2675f5e24092
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 17:36:55 2005 +0100

    input: Make ALPS protocol synchronization dependent on
           protocol variant to enhance robustness.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 519ac44528dcc813b2fad4de9401905c4fffbd14
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 17:06:24 2005 +0100

    input: Fix i8042's interactions with ACPI. Only believe what ACPI
           tells us if it is enabled, if is PnP enabled, and if is
           ACPIPnP enabled. It will still lie to us, but it won't be
           too bad.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 9a3dacf265c5a784bbbae0a67b4361498e381cfd
Merge: c982414... 8672a65...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 15:20:20 2005 +0100

    Merge

commit c98241480da6a6261639a51070d821a88ed52095
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 14:44:37 2005 +0100

    input: Update kernel documentation to reflect the
           i8042.noacpi -> i8042.nopnp change.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit c807cebed8c834d01c87ecb1b578f9415b81adb5
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 13:31:55 2005 +0100

    input: Workaround in i8042 for PnP BIOS reporting incorrect command
           register address. If the address is in the standard range,
           and a non-standard number is reported, we ignore it and use
           the default.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 20951baa825ffc9fe4b6f728533eb0753c049e30
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 24 12:40:24 2005 +0100

    Input: fix identation in PID driver.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 21da1ba349d0d8d04a98552afc7677bac4438406
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 12:39:32 2005 +0100

    input: Rename hid_find_field to hidinput_find_field to
           match the naming convention in hid-input
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 08dc09fb42869788911e0ddc3c0f2d6c068c6c97
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 24 12:31:36 2005 +0100

    input: Fix compilation warning in PID driver and generally
           repair force feedback effect erase routine that could
           never have worked.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 52a4cc74cee6da841d5dd2b251d4a5a7f5d28af0
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 24 12:20:01 2005 +0100

    input: Fix sermouse not to call serio_open() twice.
           Bug introduced in last serio update.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0da2df3d7d95f85b6b61014517ee9421ce5a1772
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 24 12:18:37 2005 +0100

    input: adjust file2alias utility to export aliases for
           serio drivers (serio:tyNprNidNexN).
           Move serio_device_id from serio.h to mod_devicetable.h
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit cfac99f238d7d22ea583b414b98e492dc9abc09d
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Feb 24 12:04:38 2005 +0100

    input: Add support for less usual ALPS touchpads, rearrange code,
           separate touchpoint/passthrough into its own input device.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 29802bf684f99c18281f88908ec534ec92e595c8
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Feb 24 04:52:48 2005 -0500

    [libata ahci] Print out port id on error messages
    
    Pointed out by Justin Cormack, Brett Russ, and others.

commit 9e2a453c4d34df7a897fc8c8f00b2f019b8fbbb2
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 24 00:47:48 2005 -0500

    ohci1394.c allocates the legacy IR DMA Context on demand. This happens in IRQ
    path resulting in call to dma_pool_create from within interrupt. Same is true
    for de-allocation of the IR DMA Context - it happens again in IRQ path
    resulting in call to dma_pool_destroy.
    
    After attempting to fix the above by using schedule_work for delayed
    allocation and de-allocation, it was determined that it should be fixed
    simply by moving the allocation to the drivers probe() function and
    de-allocation to remove() function. This way it reduces the complexity and
    does not result into any significant wastage of resources.
    
    This patch also fixes duplicate pci pool names and removes spaces from the
    names to make it easier for parsing by scripts.
    
    Thanks go to Dave Brownell for greatly simplifying this.
    
    Signed-off-by: Parag Warudkar <kernel-stuff@comcast.net>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit a1b4c3d46cd400a0ee45080f2ea1a959a53018e3
Author: Aaron Grothe <ajgrothe@yahoo.com>
Date:   Wed Feb 23 19:25:26 2005 -0800

    [CRYPTO]: Add Tiger digest algorithms.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 006472c870d2c4c5fa7e79839a4b692b3fd8f0e0
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Feb 23 18:59:51 2005 -0800

    [IXGB]: Check skb_header_cloned for TSO packets.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b08646e1258d2184690b7807a77ec78a94b47465
Merge: 26c8640... 8672a65...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Wed Feb 23 14:08:50 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit 12007258f684d4337a31e3b870bb86c13b1e784c
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 23 22:43:04 2005 +0100

    input: Add a missing ';' to hid-core.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0d67e728f80b3c1d5beb8c4871890bfbc7dde52f
Merge: 54d5522... fe353e9...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 23 22:02:16 2005 +0100

    Merge bkbits:input into suse.cz:/home/vojtech/bk/input

commit fe353e9e7a8d4f0ea0eedee8158676f209de6402
Merge: 36ea144... 9f459de...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 23 21:37:57 2005 +0100

    Manual merge

commit 26f1fccbdf243a1ca4805359bbed52cf51ca4d4e
Author: FranÃ§ois Romieu <romieu@fr.zoreil.com>
Date:   Wed Feb 23 15:00:31 2005 -0500

    [PATCH] strip: use of netdev_priv
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e7fa38cb1a32c958963570e2be5f388e79f8e5af
Merge: 8672a65... e3f386a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 23 14:57:59 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit d5349df81c499a9eab0a0fab7d54e08719c3ee08
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Wed Feb 23 14:33:29 2005 -0500

    [PATCH] drivers/scsi/ahci: Use the DMA_{64,32}BIT_MASK constants
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h
    when calling pci_set_dma_mask() or pci_set_consistent_dma_mask()
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 719004f32619854b28cdcf8de75afc67f22a7855
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Wed Feb 23 14:33:15 2005 -0500

    [PATCH] drivers/scsi/sata_vsc: Use the DMA_{64,32}BIT_MASK constants
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h
    when calling pci_set_dma_mask() or pci_set_consistent_dma_mask()
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9cacfed1139d71d9a7485ec7d2696fdcb08ae96f
Author: Mark Lord <mlord@pobox.com>
Date:   Wed Feb 23 14:25:36 2005 -0500

    [libata qstor] minor update per LKML comments
    
    * use __le{32,64}
    * use DMA_{32,64}BIT_MASK

commit 89cd6a22d4010a87cfa76ee566ee99dfd8953fe2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Feb 23 14:17:17 2005 -0500

    [PATCH] smc91x iomem annotations
    
    	usual iomem annotations;
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b9dc97bbfb5ffdfccffd19b3daf1be83248c736a
Merge: 0202b16... 52433c9...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 23 14:12:34 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/smc91x

commit 6ee105980d3448779abdeb7511c9557966cd839e
Merge: 1ddd988... 5c7c074...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 23 13:56:56 2005 -0500

    Merge bk://dfarnsworth.bkbits.net/linux-2.5-mv643xx-enet
    into pobox.com:/garz/repo/netdev-2.6/mv643xx

commit 1ddd9886b16db9a4ba5e2379720a83832a558a8c
Merge: 0202b16... 41072f5...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 23 13:46:03 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/mv643xx

commit 36ea144c04a6c8b552c4357ba01c3088a7c598ac
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 23 19:40:00 2005 +0100

    input: Fix keyboard scrollwheel support, add horizontal
           wheel support, and enable both by default.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit bf769b3bf25bcc7f6e238715258ebf1e583b2af7
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:39:39 2005 -0500

    [PATCH] Orinoco driver updates - update version and changelog
    
    Previous patches have brought the in-kernel orinoco driver roughly to
    parity with version 0.14alpha2 from out-of-tree.  Update the version
    number and changelog accordingly.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0dde525a5755918b62a02a93054bab70d9431c81
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:39:26 2005 -0500

    [PATCH] Orinoco driver updates - update firmware detection
    
    Update firmware detection code.  This will now reliably detect
    Intersil firmwares past verison 1.x, a serious flaw in the previous
    code.  It cleans up the code, and reduces the size of the private
    structure by using single bits for the various firmware feature flags.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 90d68d93f8a88d0f37b766d16bbede87391e092b
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:39:14 2005 -0500

    [PATCH] Orinoco driver updates - WEP updates
    
    Updates to the WEP configuration code.  This adds support for shared
    key authentication on Agere firmwares.  It also adds support (in some
    cases) for changing the WEP keys without disabling the MAC port (thus
    triggering a reassociation by the firmware).  This is needed by 802.1x
    implementations, although it's not clear if the code so far is
    sufficient to allow working 802.1x.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 794c297ab6564c67b062ae65f2ec73e1296c139a
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:39:03 2005 -0500

    [PATCH] Orinoco driver updates - delay Tx wake
    
    Delay netif_wake_queue() until the packet has actually been
    transmitted, rather than just when the firmware has copied it into its
    internal buffers.  This seems to prevent problems on some Intersil
    firmware versions (I suspect the problems were caused by the
    firmware's buffers filling up).
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 43887775a968ee214b20c538f6a221c409418e58
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:38:50 2005 -0500

    [PATCH] Orinoco driver updates - prohibit IBSS with no ESSID
    
    Remove has_ibss_any flag and never set the CREATEIBSS RID when the
    ESSID is empty.  Too many firmware break if we do.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6d230b8a9200dad2284b147d6803bd92d81ef2ea
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:37:56 2005 -0500

    [PATCH] Orinoco driver updates - update is_ethersnap()
    
    Make the is_ethersnap() function take a void * rather than a pointer
    to the internal header structure.  This makes more logical sense and
    reduces dependencies between different parts of the code.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 83d38e82dc5fea79f63a286e388671c9c4f2b364
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:37:45 2005 -0500

    [PATCH] Orinoco driver updates - PCMCIA initialization cleanups
    
    Cleanup the various bits of initialization code for PCMCIA / PC-Card
    orinoco devices.  This includes one important bugfix where we could
    fail to take the lock in some circumstances.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e90286a73d557cbd37f2ef6520a0c21a142a708b
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:37:33 2005 -0500

    [PATCH] Orinoco driver updates - use modern module_parm()
    
    Add descrptions to module parameters in the orinoco driver, and also
    add permissions to allow them to be exported in sysfs.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d9e4a7fcb648b95d50a1fce1f0aadabc81994ae6
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:37:21 2005 -0500

    [PATCH] Orinoco driver updates - cleanup PCI initialization
    
    Update the initialization code in the various PCI incarnations of the
    orinoco driver.  This applies similar initialization and shutdown
    cleanups to the orinoco_pci, orinoco_plx and orinoco_tmd drivers.  It
    also adds COR reset support to the orinoco_plx and orinoco_tmd
    drivers, improves PCI power management support in the orinoco_pci
    driver and adds a couple of extra supported cards to the ID tables.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cd33f6f313ed073e0bb87378cefa7122d09e314b
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:32:46 2005 -0500

    [PATCH] Orinoco driver updates - cleanup low-level code
    
    Apply some cleanups to the low-level orinoco handling code in
    hermes.[ch].  This cleans up some error handling code, corrects an
    error code to something more accurate, and also increases a timeout
    value.  This last can (when the hardware plays up) cause long delays
    with spinlocks held, which is bad, but is rather less prone to
    prematurely giving up, which has the unfortunate habit of fatally
    confusing the hardware in other ways :-/.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 09f0d75b5a3b83c85e2960aaf28d264918ea5878
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:32:35 2005 -0500

    [PATCH] Orinoco driver updates - add free_orinocodev()
    
    Introduce a free_orinocodev() function into the orinoco driver, used
    by the hardware type/initialization modules to free the device
    structure in preference to directly calling free_netdev().  At the
    moment free_orinocodev() just calls free_netdev().  Future merges will
    make it clean up internal scanning state, so merging this now will
    reduce the diff noise.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 67348246a6d47e1bcb283400c1f1122c05458717
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:32:22 2005 -0500

    [PATCH] Orinoco driver updates - use mdelay()/ssleep() more
    
    Use mdelay() or ssleep() instead of various silly more complicated
    ways of delaying in the orinoco driver.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 60b74968029a0de4534550088a68a4c9b85ccfc5
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:32:10 2005 -0500

    [PATCH] Orinoco driver updates - update printk()s
    
    Reformats printk()s, comments, labels and other cosmetic strings in
    the orinoco driver.  Also moves, removes, and adds ratelimiting in
    some places.  Behavioural changes are trivial/cosmetic only.  This
    reduces the cosmetic/trivial differences between the current kernel
    version, and the CVS version of the driver; one small step towards
    full merge.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 38deb26ae7873e1abb2f68f5542e99ab8057dd30
Author: David Gibson <hermes@gibson.dropbear.id.au>
Date:   Wed Feb 23 13:31:18 2005 -0500

    [PATCH] Orinoco driver updates - use netif_carrier_*()
    
    Removes the orinoco driver's custom and dodgy "connected" variable
    used to track whether or not we're associated with an AP.  Replaces it
    instead with netif_carrier_ok() settings.
    
    Signed-off-by: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f09667e080be3f69e496bb882d5323b2e5690617
Merge: 0202b16... e3caf5d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 23 13:25:36 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/viro-iomap

commit 01e66becaafbf1ad7530be9125fe51405184ba50
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 09:36:15 2005 -0500

    [AGPGART] add bridge parameter to driver functions
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    Add bridge parameter to create_gatt_table, free_gatt_table and mask_memory
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 2704ec5795d7fe070167a3f69d6b2d5e6fe92291
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:19:13 2005 -0500

    [FB] add support for new multiple agp bridge agpgart api
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    This patch adds fb support for new multiple agp bridge agpgart api.
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2a56a8840c0ace8f61ff0d8ad5842d66f688d7f8
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:18:13 2005 -0500

    [DRM] add support for new multiple agp bridge agpgart api
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    This patch adds drm support for new multiple agp bridge agpgart api.
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3c6ab8c2f77b2bf873cd32b7bfe8e78c6c3ec935
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:17:02 2005 -0500

    [AGPGART] allow drivers to allocate memory local to the bridge
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    This patch allows drivers to allocate memory local to the bridge using
    platform specific alloc_page routines.
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 4ce94034b7e903ecb677e2a8cbfe4296f9c568be
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:15:47 2005 -0500

    [AGPGART] add agp_find_bridge function
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    This patch gives non-generic platforms a method for using platform specific
    agp_find_bridge functions.
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit aeac6f3a3f5d6f3fc2744cd7f999fc48d527d6c5
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:12:13 2005 -0500

    [AGPGART] allow multiple backends to be initialized.
    
    From: Michael Werner <werner@mrcoffee.engr.sgi.com>
    
    This patch adds support for initializing and addressing multiple AGP
    bridges using the agpgart driver.  In particular, it extends agp_acquire
    and agp_allocate_memory so that different bridges can be acquired and
    memory allocated within a specific AGP aperature.
    
    From: Brice Goglin <Brice.Goglin@ens-lyon.fr>
    
    It seems that memsetting the whole bridge structure to 0 (instead of juste
    the agp_in_use field) fixes Benoit's problem too.  No idea which field was
    responsible for this.  New patch attached.
    
    From: Mike Werner <werner@sgi.com>
    
    add bridge assignment missed in agp_allocate_memory
    
    From: Andi Kleen <ak@suse.de>
    
    Here's the correct fix. agp_bridge is defined in drivers/char/agp/agp.h.
    It's a bit ugly though.
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 39f7a73c3737df47b331e549ca6734d1f42a3850
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 08:02:50 2005 -0500

    [AGPGART] Rework AGPv2 rate verification.
    
    The spec says its valid for multiple bits to be set when we read rate,
    however we must take care to ensure that we only write 1 bit back.
    
    This removes some bogus warnings that appeared on some boxes.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7248f108d591f842461759fec6c27cbcb112ce8a
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Feb 23 07:17:28 2005 -0500

    Move hpsb_unregister_protocol, which fixes a hang on rmmod
    experienced by Parag Warudkar <kernel-stuff@comcast.net>
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit c9bbe1d2385541763ef00dfc72871dfd0b11ba03
Author: Harald Welte <laforge@netfilter.org>
Date:   Wed Feb 23 03:57:33 2005 -0800

    [NETFILTER]: ipt_hashlimit: use hlist instead of list head
    
    Use hlist instead of list_head to save lots of memory for the hash buckets.
    
    Signed-off-by: Samuel Jean <sjean@cookinglinux.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb6815fa6d3a472ad48992babeefe63cd4cf76af
Author: Harald Welte <laforge@netfilter.org>
Date:   Wed Feb 23 03:56:46 2005 -0800

    [NETFILTER]: ipt_hashlimit: replace rwlock with spinlock
    
    As Samuel points out, the rwlock doesn't really make much sense.
    
    Signed-off-by: Samuel Jean <sjean@cookinglinux.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0bb1d4e909db2824055651d763fec15279ca8f98
Merge: 0fcc652... dd9e577...
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Feb 23 03:51:56 2005 -0800

    Merge nuts.davemloft.net:/disk1/BK/net-2.6
    into nuts.davemloft.net:/disk1/BK/net-2.6.12

commit b8d5af56ddee4536e0da0ce96d73a92d953ba6e0
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Feb 23 03:27:50 2005 -0800

    [PPC]: Use new set_pte_at() w/mm+address args.
    
    Based almost entirely upon an earlier patch by
    Benjamin Herrenschmidt.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fcc652d6fdaebdb0ceb3899af4ab8903542f49c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Feb 23 03:18:34 2005 -0800

    [NET]: Add skb_header_cloned and use it in e1000/tg3
    
    This patch adds skb_header_cloned which tells us whether we need to
    copy the data before we can modify the header part of the skb.  Again,
    what constitutes the header is left up to the users of the skb to define.
    
    This patch then uses this function in e1000/tg3 to copy the data before
    the TCP/IP header is modified.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 99a54de720dcd9902cd51a77d5275fa91850036c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Feb 23 03:17:24 2005 -0800

    [NET]: Add skb_header_release and use it in net/ipv4/tcp
    
    This patch adds skb_header_release which can be called when the owner
    of an skb no longer needs to access the header at all.  What constitutes
    the header is left up to the users of the skb to define.
    
    For instance, for outbound TCP packets we define the header to be
    anything in front of the TCP payload.  Therefore we add skb_header_release
    calls to all the paths where outound TCP packets are produced.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9845bf7f382e79cee9078cb67c4cb607b4264117
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Feb 23 01:46:43 2005 -0800

    [SPARC64]: Pass mm/addr directly to tlb_batch_add()
    
    No longer need to store this information in the pte table
    page struct.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea4b557c8d0f01771f55ca34f62ceaf93799dca1
Merge: fc46ae5... 059df94...
Author: Steve French <stevef@smfhome.smfdom>
Date:   Wed Feb 23 01:55:13 2005 -0600

    Merge bk://cifs.bkbits.net/linux-2.5cifs
    into smfhome.smfdom:/home/stevef/bk_cifs_org/linux-2.5cifs

commit ae3d0a847f4b38812241e4a5dc3371965c752a8c
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Feb 22 23:42:56 2005 -0800

    [MM]: Add set_pte_at() which takes 'mm' and 'addr' args.
    
    I'm taking a slightly different approach this time around so things
    are easier to integrate.  Here is the first patch which builds the
    infrastructure.  Basically:
    
    1) Add set_pte_at() which is set_pte() with 'mm' and 'addr' arguments
       added.  All generic code uses set_pte_at().
    
       Most platforms simply get this define:
    	#define set_pte_at(mm,addr,ptep,pteval) set_pte(ptep,pteval)
    
       I chose this method over simply changing all set_pte() call sites
       because many platforms implement this in assembler and it would
       take forever to preserve the build and stabilize things if modifying
       that was necessary.
    
       Soon, with platform maintainer's help, we can kill of set_pte() entirely.
       To be honest, there are only a handful of set_pte() call sites in the
       arch specific code.
    
       Actually, in this patch ppc64 is completely set_pte() free and does not
       define it.
    
    2) pte_clear() gets 'mm' and 'addr' arguments now.
       This had a cascading effect on many ptep_test_and_*() routines.  Specifically:
       a) ptep_test_and_clear_{young,dirty}() now take 'vma' and 'address' args.
       b) ptep_get_and_clear now take 'mm' and 'address' args.
       c) ptep_mkdirty was deleted, unused by any code.
       d) ptep_set_wrprotect now takes 'mm' and 'address' args.
    
    I've tested this patch as follows:
    
    1) compile and run tested on sparc64/SMP
    2) compile tested on:
       a) ppc64/SMP
       b) i386 both with and without PAE enabled
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5ebab1c1ab7850e660b4e52042725a4b75bd1118
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 02:37:52 2005 -0500

    [AGPGART] aper_base can't be signed.
    
    We pass this to remap_pfn_range after shifting it right.
    Nasty things happen as a result.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit dccd43f974f00c8ec2cf22c41c218002d935a23b
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 23 02:36:42 2005 -0500

    [AGPGART] Compile fixes.
    
    Somehow the conversion to the extra arg for agp_collect_device_status() got dropped.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3d3bad5bbb3519ca3830c023e442e53f50450e8b
Merge: 75be027... af7c5d6...
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Wed Feb 23 02:32:51 2005 -0500

    Merge delerium.kernelslacker.org:/mnt/data/src/bk/bk-linus
    into delerium.kernelslacker.org:/mnt/data/src/bk/agpgart

commit 3d5e39cfe35cfd43174c3e74849ac17ddd34a38c
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Feb 22 22:40:01 2005 -0800

    [IA64] fix IOSAPIC destinations when CONFIG_SMP=n
    
    Always use cpu_physical_id() (which is really the ID/EID of
    a processor's Local SAPIC) when programming IOSAPIC entries.
    
    Previously we sometimes used hard_smp_processor_id(), which
    is correct when CONFIG_SMP=y but wrong otherwise.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 059df94afd6b83427bc8991f5fa08a253082789c
Merge: 0bd8007... 75be027...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Feb 22 19:48:44 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit af7c5d609ff08987ccbf51e8e64bc4280b3f7d39
Author: Dave Jones <davej@redhat.com>
Date:   Tue Feb 22 17:46:53 2005 -0500

    [AGPGART] yet more whitespace removal.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f0be1e675fc1c9fcc2d07d1fbc4378a91f9df81a
Merge: cc99ca5... c62d348...
Author: Jody McIntyre <scjody@gribbl.modernduck.com>
Date:   Tue Feb 22 14:46:16 2005 -0500

    Merge gribbl.modernduck.com:/usr/src/bk/1394-2.6
    into gribbl.modernduck.com:/usr/src/bk/1394-dev

commit c62d34883db103208055167e0b15ceb97a947859
Merge: bdc1a5f... 9f459de...
Author: Jody McIntyre <scjody@gribbl.modernduck.com>
Date:   Tue Feb 22 14:32:08 2005 -0500

    Merge gribbl.modernduck.com:/usr/src/bk/linux-2.5
    into gribbl.modernduck.com:/usr/src/bk/1394-2.6

commit 51e278ff02016ace01d6b62bc9a9ac37c4c4fd63
Author: Dave Jones <davej@redhat.com>
Date:   Tue Feb 22 12:00:10 2005 -0500

    [AGPGART] i810 suspend/resume support.
    
    From Nigel Cunningham/Karol Kozimor
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b0d3c209d43060ccaf5fa10b95ee6cf4b254213e
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:53:10 2005 -0500

    [AGPGART] Convert from pci_module_init to pci_register_driver
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 36f93dfcce6a1a9157ff9725fd9fca2944b43668
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:35:30 2005 -0500

    [AGPGART] Drop the Intel-mch AGP driver.
    
    Andi Kleen points out that the intel-agp driver actually works on i865's, where
    the -mch driver doesn't.  The -mch driver was something of a failed experiment.
    Hoping that the code would be much cleaner, I forked the intel-agp driver into
    this variant, and removed some legacy bits. The result was a third the size,
    but it still was no work of art, worse yet -- it didn't even do what it said on the can.
    
    intel-agp still supports everything that the -mch driver did, so we can just
    remove this from the tree and fall back to the old driver.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8268d81a86447848dd0221ebd64000080af96017
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:27:52 2005 -0500

    [AGPGART] Lower 7 bits of TLB flush register must be zero.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2d567cf316b93d8d35c0613008c83ab64f8f9fac
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:27:37 2005 -0500

    [AGPGART] Various "I'm a dumbass" compile fixes.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8f9d9cdf9e630bb7684d12eeb5ae8229525c8e2e
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:27:22 2005 -0500

    [AGPGART] Don't clobber other bits in control register when flushing TLB on VIA.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3425492a344186c4267870baaa7d6b5fda00d978
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:27:07 2005 -0500

    [AGPGART] VIA AGPGARTs can support really small aperture sizes.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 708902d2bc0e392599088f612700cba09604415c
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:26:52 2005 -0500

    [AGPGART] Trailing whitespace removal de jour.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 966c1038079708e092021ee3c2cb108701f9799f
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:26:36 2005 -0500

    [AGPGART] Print diagnostic info when failing to determine aperture size on VIA systems.
    
    I've seen this happen a few times, and never got to the bottom of it, so hopefully
    this will make things a little easier to diagnose what's going on.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 42d8fc5de15bd6335bc2e296085a6e6cc5b5f914
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:26:21 2005 -0500

    [AGPGART] Trailing whitespace removal.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2a642a81c3a841080b5d1ed2c99b3590d9abe06f
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:26:04 2005 -0500

    [AGPGART] Make agp=off boot param work for Intel AGP drivers.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 07de993e6cfa6e46ff51699ac3354648492d2859
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:25:49 2005 -0500

    [AGPGART] Make sure we don't give up searching for gfx cards.
    
    We need to clear the previously found cap_ptr, or we exit after
    finding the first one, even if its not the one plugged into the
    bridge we're looking at.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit dace4366e8e3ee16c98ed453c1e2956c5b1cce5d
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:25:33 2005 -0500

    [AGPGART] Map the graphic card to the bridge its connected to.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 30a6c1b219b67a6c28d8a6189290459264302a70
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:25:18 2005 -0500

    [AGPGART] Silly thinko in reserve bit masking.
    
    Stupid inversion meant we passed '0' to userspace, and madness
    ensued resulting in very funky visuals.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f63a405c225f4dbe9580de41236428243a7470e2
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:25:03 2005 -0500

    [AGPGART] Fix the same pci_get_class bug in the amd-k7 driver.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b8cf7cb7ce2c826f13a903274a0352c42c7b1476
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:24:48 2005 -0500

    [AGPGART] Fix stupid thinko in device discovery.
    
    Should fix the 'cant find AGP VGA controller' warnings.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 36cd36ee4855e45423b17c9ee71d92f98798ee22
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:24:32 2005 -0500

    [AGPGART] In AGP2.0 mode, if we're in 1X mode, disable fast writes.
    
    In this mode, fast writes are just ignored, and treated as regular PCI
    writes, but disabling them explicitly doesn't hurt.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8d7a5b5d3adbb4c5fde71ca7a565042dfa1106d3
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:24:12 2005 -0500

    [AGPGART] Mask out the reserved bits of the agp mode register before handing them to userspace.
    
    X munges what we hand to it, so with luck, this will lower the possibility
    of it handing us something with reserved bits set.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1b13cadfbf8f7250afa66a690dc4a855f20554d9
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:23:57 2005 -0500

    [AGPGART] Introduce routine to check current operating mode of agp bridge.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b108855a9fecc9593a1eda080e2b9fa656a244bf
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:23:42 2005 -0500

    [AGPGART] Remove pointless tests for bridge vendor from amd-k7-agp driver.
    
    If we got far enough to run this code, we *must* have an AMD bridge.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f0cf0f99bce84ba0a0d033b39c787238813f0b5e
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:23:27 2005 -0500

    [AGPGART] AMD 751 errata workaround.
    Some combinations of NVidia GeForce cards and this AGP chipset cause lockups
    when operated in AGP x2 mode. Force them to x1 mode for safety.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 5331be42009bdc2212f302cea0b3fa632eacfb7a
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:23:12 2005 -0500

    [AGPGART] AMD 761 errata workaround.
    B0/B1 steppings of this chipset were horribly broken,
    and couldn't do fast writes, or side band addressing.
    Looking through the errata on this one reads like a horror story, it's
    a miracle it could get AGP x1 working.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 523c9aea1173879b379e705a5786c534df3f6ce3
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:22:57 2005 -0500

    [AGPGART] Add mechanism for chipset specific errata.
    
    Allow chipset drivers to tell the generic routines not to enable
    certain features if they have errata when those features are used.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7f265b00e6f29bf94e0b73b42a9416dbf5ac9a1d
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:22:42 2005 -0500

    [AGPGART] Name & Shame the apps passing bad flags.
    (Basically a distinction between XFree and Xorg)
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 5b0a5e8487ceadbeeee838c2d40f60c12f5bbd00
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:22:27 2005 -0500

    [AGPGART] Do some sanity checks on the rates that userspace passes.
    
    The AGP specifications define the following...
    
          agp2 agp3
    000   BAD  BAD
    001   x1   x4
    010   x2   x8
    011   BAD  x8
    100   x4   BAD
    101   BAD  BAD
    110   BAD  BAD
    111   BAD  BAD
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1b678004ca55889d7f7ae3fdac248c9adb587f62
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:22:11 2005 -0500

    [AGPGART] Fix up the reserved bits.
    The previous checks were against AGP_STAT values, but userspace passes us
    an agp command register.

commit e19ad01510a4ecb8ec0a5bd1e23cfed091c0d686
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:21:55 2005 -0500

    [AGPGART] Warn and fix up mode if userspace passes nonsense.
    Check the reserved bits in the agp mode register.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 35e1acd83182f25314724595d1620c069afd0d2b
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:21:40 2005 -0500

    [AGPGART] Check the bridge is in 3.0 mode, not the graphic card.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 4708e0d91e6f198b0dbc664af22ffcdc5f0801e8
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:21:25 2005 -0500

    [AGPGART] Fix refcount bug in mode parsing code.
    
    The pci_get_class conversion leaked this refcount.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit af12b5cc05714084a15b7cc11fd89fbf85afe5a5
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:21:09 2005 -0500

    [AGPGART] Rename a bunch of ambiguous variables.
    mode = What X wants us to set the mode to (As set by AGPMode in X config)
    cmd = PCI_AGP_STATUS from the AGP bridge.
    tmp = PCI_AGP_STATUS from the graphic card.
    
    mode -> requested_mode
    cmd -> bridge_agpstat
    tmp -> vga_agpstat
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit a217b0c6857891edcace30c6ec8fdba5f71cef1e
Author: Dave Jones <davej@delerium.kernelslacker.org>
Date:   Tue Feb 22 11:20:54 2005 -0500

    [AGPGART] Don't scan whole bus for a VGA card.
    Use the handy pci_get_class() function instead of implementing our own
    pci bus walking loop.  Also makes it skip non-VGA devices fixing up a
    long-standing FIXME. Previously, it may have been tripping up on AGP
    bridges, which could have caused all sorts of sillyness.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f2b03344829b0df7c975f494a9cc76e2ef745525
Merge: 539bc6a... 7dd35f8...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Feb 22 11:09:45 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/mii

commit e3f386a248e5a73c2054edeeae66124a4e3a47c4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 22 10:56:28 2005 -0500

    [PATCH] drivers/net/via-rhine.c: make a variable static const
    
    This patch makes a needlessly global variable static const.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f64778d37c8066b9d4a6158ec0bdbcc6b8367fbd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 22 10:56:12 2005 -0500

    [PATCH] drivers/net/sb1000.c: make some variables static
    
    This patch makes some needlessly global variables static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4e02f41f1f81b6e85443f68fa7b53d4c293c0d07
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 22 10:55:59 2005 -0500

    [PATCH] drivers/net/lp486e.c: make some code static
    
    This patch makes some needlessly global code static and makes
    CUcmdnames const.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cbd2e4ec41f38a9b4f67dde665e58f653fbd5604
Merge: 539bc6a... dae1f0f...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Feb 22 10:50:18 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 6a135a53cb9ef5a17b5d52f9b49a5422257b2071
Merge: ed712db... aa82c4c...
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Feb 22 03:23:21 2005 -0800

    Merge nuts.davemloft.net:/disk1/BK/network-2.6.12
    into nuts.davemloft.net:/disk1/BK/net-2.6.12

commit 6ea4fe3d3139d4fde88a3fe963e0765a9ec39805
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 22 12:21:31 2005 +0100

    [PATCH] Add a NOREPORTLUN blacklist flag
    
    This patch adds a NOREPORTLUN blacklist flag for a disk made by "WDC"
    (Winchester?).  The drive's firmware crashes when it receives REPORT_LUNS,
    even though it claims to be SCSI rev 04.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ecac39222652390ede4e0a7c354bce1bbf109750
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 22 12:18:48 2005 +0100

    [PATCH] Retry supposedly "unrecoverable" hardware errors
    
    This is an updated and unmangled version of the patch sent in by Martin
    Peschke.  Apparently some drives report Hardware Error sense for
    problems which do improve after retrying, so the patch retries these
    supposedly "unrecoverable" errors for such devices.
    
    In addition to the IBM ESS drive it adds a blacklist entry for the drive
    inside the MPIO HS200 Gigabox.
    
    Signed-off-by: Martin Peschke <mpeschke@de.ibm.com>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cb406274b79f002b173874b8271be498494f8e58
Author: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
Date:   Tue Feb 22 12:13:21 2005 +0100

    [PATCH] SCSI tape descriptor based sense data support
    
    The patch at the end of this message converts the SCSI tape driver to support
    also descriptor based sense data. Test for deferred sense data have been added
    in a couple of places and the EOM tests have been unified. Some tests have been
    simplified but the patch is not meant to change the current behavior. The
    patch is against 2.6.11-rc4 and has been tested to some extent.
    
    The patch also includes the msleep_interruptible change from from kernel
    janitors.
    
    Thanks to Doug Gilbert for doing a first version of this sense data
    conversion.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 178a856d31e901b5b2eb7b1a27ff583c61691edb
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 22 12:06:06 2005 +0100

    [PATCH] mark qlogicisp broken
    
    It's lacking EH support and the hardware is supported by the qla1280
    driver now.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ce780e30ade297e1a976988c15254be2da8c05f8
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 22 12:03:39 2005 +0100

    [PATCH] mark eata_pio broken
    
    it oopses when trying to use it with my SmartRaid IV card, it's a mess
    and the only hardware supported by it but not the eata driver are two
    10-year old ISA boards.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 02c8ad4df11eeba592f81a4b8e411e24a4a60fcd
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 22 12:01:04 2005 +0100

    [PATCH] qla1280: update changelog
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit eb6e5b2f4ff61bb5997c59b61088a88c9e183ff4
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 22 11:57:38 2005 +0100

    [PATCH] qla1280: use pci_map_single
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 164c1a4ae24b46a816533e7a43f3d12bcdf6e48b
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 22 11:54:33 2005 +0100

    [PATCH] qla1280: remove qla1280_proc_info
    
    reading the /proc/scsi/qla1280/* files can easily corrupt kernel memory.
    
    As the feature is deprecated, and the qla1280 implementation doesn't
    return very usefull implementation but is so buggy that any serious
    user would have noticed we just remove it.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a8be57ca822cc12c8dc616846520991227a02b56
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Tue Feb 22 11:51:11 2005 +0100

    scsi: remove device_request_lock
    
    The static device_request_lock doesn't protect anything; remove it.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e59d89da8ec42706cda947082ca6df8d918d7a6a
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 22 11:47:49 2005 +0100

    [PATCH] Fix selection of command serial numbers and pids
    
    This patch fixes one of Christroph's fixme comments in the SCSI midlayer.
    
    The selection of the serial number and pid for commands was done
    by a global variable and not SMP safe. The race was not very
    serious because it was only used for error handling, but it's
    still better to fix it.
    
    I audited all the drivers and none seemed to use them
    for anything interesting, so I just made it a per host counter
    protected by host lock.
    
    (in fact they could be probably removed because they only see
    to be used as a flag in exception handling and for debugging.
    The patch would be unfortunately quite big because a lot
    of driver printks use them)
    
    This should be slight faster on SMP too because the cache line of
    the counter won't bounce around the machine.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5c7c074478b98d6edbbbf2d30f9a0fa0c80e366a
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Feb 22 02:44:56 2005 -0700

    [netdrvr mv643xx] Remove call to msleep() while locks are held.  We don't really need to
    wait for the link to come up.  It was a workaround to avoid a transient
    error message, "Virtual device %s asks to queue packet!\n", in
    dev_queue_xmit() when called by ic_bootp_send_if().  This happens because
    right after opening the network device, there is a pending PHY status
    change interrupt causing the driver to call netif_stop_queue().  A half
    second later, the link comes up and all is well.  We could have moved
    the call to msleep() to mv643xx_eth_open() to perpetuate the workaround,
    but I think it's best to remove it entirely.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit f4ca530bbd36afce74f428b1c3307af0c11845d0
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Feb 22 02:34:46 2005 -0700

    [netdrvr mv643xx] Ensure that we only change the Port Serial Control Reg while the port is
    disabled.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit cc99ca585da0a2c0811df49511226c1c8c309c3f
Merge: 888cc8f... bdc1a5f...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Feb 22 01:11:45 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit bdc1a5f487e06a0e07f2867d214722dee09916d6
Merge: 428fc7d... f7b4ca4...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Feb 22 01:04:08 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 888cc8fe5700240eb0a3c222eebb9be7af5ae601
Merge: 84094b6... 428fc7d...
Author: Jody McIntyre <scjody@gribbl.modernduck.com>
Date:   Mon Feb 21 12:34:13 2005 -0500

    Merge gribbl.modernduck.com:/usr/src/bk/1394-2.6
    into gribbl.modernduck.com:/usr/src/bk/1394-dev

commit 428fc7d2bddd4d41bb241d6b50b7d565ad8333d0
Merge: 23bf8bb... 21e9943...
Author: Jody McIntyre <scjody@gribbl.modernduck.com>
Date:   Mon Feb 21 12:26:36 2005 -0500

    Merge gribbl.modernduck.com:/usr/src/bk/linux-2.5
    into gribbl.modernduck.com:/usr/src/bk/1394-2.6

commit 54d55220b1046db56b70f282a0fa82b195a22b4a
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 21 13:07:58 2005 +0100

    input: Fix a few conditions in power.c, which kept it from doint
           anything at all.
    
    Found-by: BJ Douma <bjdouma@xs4all.nl>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 84094b6acf34b8be93624fbce1adcda0692f55e6
Merge: 1a997b0... 23bf8bb...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Feb 20 13:35:01 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit 23bf8bba8519a2d1e4103a36860d96053c61efdd
Merge: 07087a3... c0d51c6...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Feb 20 13:27:26 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit f4f57a52081d668538fa8691bc09e1d5b3a2d525
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:11:56 2005 -0500

    [PATCH] e1000: Driver version white space,
    
    10 Driver version number, white space, comments, device id & other changes
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 39b72775caed2149d5dd2feda684be723f249027
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:11:41 2005 -0500

    [PATCH] e1000: Fixes related to Cable length
    
    9 Fixes related to Cable length estimation
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 51d8ccfae189c00b90e4959832198cbc486ee135
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:11:30 2005 -0500

    [PATCH] e1000: Report failure code when loopback
    
    8 Report failure code when loopback test fails
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 966403f6d2dbaca31547ca87db8009ea8b6cade8
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:11:15 2005 -0500

    [PATCH] e1000: Checks for desc ring/rx data
    
    7 Add checks for desc ring/rx data bufs spanning 64k address boundary
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 992a1bcc114214111d6772548d2031f9565f52d3
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:11:01 2005 -0500

    [PATCH] e1000: Patch from Peter Kjellstroem --
    
    6 Patch from Peter Kjellstroem -- fix lockup with 82547
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ae5d1c7d3749a913b8f038a50d4ee81abe1ea41a
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:10:46 2005 -0500

    [PATCH] e1000: Fix WOL settings in 82544 based
    
    5 Fix WOL settings in 82544 based adapters
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1a1ba392b87dfbf4f09ded8959b8fb74a07f8d95
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:10:31 2005 -0500

    [PATCH] e1000: Delay clean-up of last Tx buffer
    
    4 Delay clean-up of last Tx buffer to fix pre-mature writeback of Tx descriptors.
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 24cbc9043abde07f0768b508e83ad4b6f82d5b0b
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:10:20 2005 -0500

    [PATCH] e1000: Avoid race between e1000_watchdog
    
    3 Avoid race condition between e1000_watchdog and e1000_clean_tx_irq
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1992e926789b9a417623772800a51f12dc956930
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:10:06 2005 -0500

    [PATCH] e1000: use netif_poll_{enable|disable}
    
    2 use netif_poll_{enable|disable} to synchronize between poll and i/f down/up
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b02022b8f406512f72d53dce803132a9ba6976c4
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 11:09:54 2005 -0500

    [PATCH] e1000: Robert Olsson's fix and refinement
    
    1 Robert Olsson's fix and refinement to the poll routine
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f8319d0226c10729bf188a15894c67e8b3f07590
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 10:59:40 2005 -0500

    [PATCH] ixgb: Driver version, white space, other stuff
    
    Driver version number, white space, comments, device id & other changes
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 56b25843a16966e24ad31ac04c3bea98342f236d
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 10:59:28 2005 -0500

    [PATCH] ixgb: Invalidate software cache, when EEPROM write occurs
    
    Added code to invalidate software cache, when a write is made to the EEPROM.
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2229f542cefd78dcb643b0277230adcd820145c5
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 10:59:16 2005 -0500

    [PATCH] ixgb: Robert Olsson's fix and refinement to poll
    
    obert Olsson's fix and refinement to the poll routine
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 187dcf1978f423af8fd8a579b2b92f5ecfcd732f
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 10:59:04 2005 -0500

    [PATCH] ixgb: Avoid race e1000_watchdog and ixgb_clean_tx_irq
    
    Avoid race between e1000_watchdog and ixgb_clean_tx_irq
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0825287352332b44d3451939bc0ffee860712f8d
Author: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Sun Feb 20 10:58:53 2005 -0500

    [PATCH] ixgb: use netif_poll_{enable|disable}
    
    1 use netif_poll_{enable|disable} to synchronize between poll and i/f down/up
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit dae1f0f9f87849e6930a225881922984b133aac5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:52:00 2005 -0500

    [PATCH] drivers/net/3c509.c: make 2 structs static
    
    This patch makes two needlessly global structs static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 76749f8470f42e666b54114b6d693d834966818f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:51:47 2005 -0500

    [PATCH] drivers/net/3c527.c: make a struct static
    
    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit de4f7f866c3d271defe8100d2fc60ffb05ae0515
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:51:34 2005 -0500

    [PATCH] drivers/net/amd8111e.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ebd6680e60e41589802fd0d03bd69a74da11d682
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:48:56 2005 -0500

    [PATCH] drivers/net/loopback.c: make a function static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b9b78581f3d5edf5a8569c0ef223c3fa9d77b3a1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:48:42 2005 -0500

    [PATCH] drivers/net/ethertap.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 86697f23b989388fa013880f0bb023323883484f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:48:28 2005 -0500

    [PATCH] drivers/net/dgrs.c: make 3 functions static
    
    This patch makes three needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6f0cb1ecaf04393c43ceb5d397d03747521e78bc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:48:15 2005 -0500

    [PATCH] drivers/net/depca.c: make 2 structs static
    
    This patch makes two needlessly global structs static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1138d7e8cab141aa58611317fdf2e92dc26edaff
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:48:02 2005 -0500

    [PATCH] drivers/net/bonding/: make 3 functions static
    
    This patch makes three needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 82d25473b5c688c72f9ff4b7dcc11515c57b8a5a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:41:20 2005 -0500

    [PATCH] drivers/net/s2io.c: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global code static
    - remove the unused blobal function get_xena_rev_id
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ea91754ee81da36b547d25e8ba021a3f7a439c18
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:41:06 2005 -0500

    [PATCH] drivers/net/pppoe.c: make a struct static
    
    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4f66b057e2815f9a885e37e6b5434014099e0416
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:40:52 2005 -0500

    [PATCH] drivers/net/ppp_deflate.c: make 2 structs static
    
    This patch makes two needlessly global structs static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit dab397d7e3d6d93a88914a12ba1fd3daf0ef1c2f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:34:26 2005 -0500

    [PATCH] drivers/net/via-velocity.c: make a function static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3bec73755febed70e91e96ea9149a66634563ecc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:34:11 2005 -0500

    [PATCH] drivers/net/tun.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 157fcdbd57dc97cfac614fdd655213f281c9511b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:33:57 2005 -0500

    [PATCH] drivers/net/tulip/interrupt.c: make a variable static
    
    This patch makes a needlessly global variable static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit acddc52f2c97a78f8f5a6bfdec310346ab735090
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:33:44 2005 -0500

    [PATCH] drivers/net/shaper.c: make a variable static
    
    On Fri, Feb 18, 2005 at 07:18:19PM -0500, Jeff Garzik wrote:
    > Adrian Bunk wrote:
    > >This patch contains the following cleanups:
    > >- remove an unused #define SHAPER_BANNER
    > >- remove the sh_debug flag
    > >
    > >Signed-off-by: Adrian Bunk <bunk@stusta.de>
    >
    > you are removing presumably-useful debug code; NAK.
    
    OK, less invasive patch below.
    
    
    <--  snip  -->
    
    
    This patch makes a needlessly global variable static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 18b054661502930ec294e85113bf13e619a32fe9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 20 10:33:30 2005 -0500

    [PATCH] drivers/net/slhc.c: remove 2 functions
    
    This patch removes two unused global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d0c14dc8f2ab208bcbdac0377786b86c6915c3fa
Merge: db8a1d4... 7d447d8...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Feb 20 10:28:37 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit fc46ae57f75f8bcefc51aaad06d6b9dddc1e7f1a
Merge: ce7d248... 0bd8007...
Author: Steve French <stevef@smfhome.smfdom>
Date:   Sat Feb 19 02:13:16 2005 -0600

    Merge bk://cifs.bkbits.net/linux-2.5cifs
    into smfhome.smfdom:/home/stevef/bk_cifs_org/linux-2.5cifs

commit 1a997b0e788bf0310e25d5861e8460dfe6dcdb1c
Merge: 07087a3... e8fd045...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Fri Feb 18 14:44:30 2005 -0500

    Merge modernduck.com:/usr/src/bk/1394-2.6
    into modernduck.com:/usr/src/bk/1394-dev

commit 07087a3fbc4521b3bdd89021520ae38af02d8baf
Merge: 175df1e... 72a7aba...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Fri Feb 18 14:39:07 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 26c8640a4571ea63bbd851a7c996a7028d58a98b
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Feb 18 04:45:25 2005 -0600

    JFS: change project url to http://jfs.sourceforge.net/
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 8c0405f90c97d9c7c68372ddc2e7a56b2267bd06
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Feb 18 04:41:17 2005 -0600

    JFS: allow iocharset=none mount option
    
    iocharset=none is an explicit option to specify the default
    character translation be used (no translation).  This allows
    remounting a partition which was mounted with a different setting,
    and allows the same mount options to be used between 2.6 and 2.4
    kernels, where there is a different default.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 36d2972ee42d9c8d4fe0f9fb333b2cec07e8d079
Merge: 6f7a5e5... 66e4261...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 18 04:52:31 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit d83dc7340a682d46b2d7427ed2c716886229e189
Merge: 5dad2b4... ef215f9...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Feb 17 22:29:12 2005 -0600

    Merge jfs@jfs.bkbits.net:linux-2.5
    into austin.ibm.com:/home/shaggy/bk/jfs-2.5

commit 0bd8007446efe5c00e95df9f2d179924656d6b56
Merge: 786c8f6... 66e4261...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Thu Feb 17 17:24:29 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit ef215f9c13d9cf768461c910fb65d8fe953e2ded
Merge: d76f906... 28ad2df...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Thu Feb 17 16:22:46 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit ce7d248624e9db168ec920f901d9a30025520a31
Author: Steve French <stevef@smfhome.smfdom>
Date:   Thu Feb 17 10:52:34 2005 -0600

    [CIFS] Handle RFC1001 NACK with length of 4
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 6f7a5e58dcbc6d2e653d10d28c87e7d1ae10d9e4
Merge: 10d75b8... 28ad2df...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Feb 17 07:16:14 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit b974b6e86479b248bef428eaa7a41e776c1b0413
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:28:01 2005 -0700

    [netdrvr mv643xx] Add ethtool support to the mv643xx ethernet driver.
    Initially, we add statistics and link status reporting.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 5d0fbc09b546501aa3730cf30c00862b574ad287
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:26:54 2005 -0700

    [netdrvr mv643xx] Enable the mv643xx ethernet support on platforms using the MV64360 chip.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit e9335f1db2bfe1b7285ac291d6f2a82668e26788
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:26:04 2005 -0700

    [netdrvr mv643xx] Disable tcp/udp checksum offload to hardware.  It generally works,
    but the hardware appears to generate the wrong checksum if the
    hw checksum generation wasn't used in the previous packet sent.
    
    I'm increasingly confident this is a hardware error.
    We'll disable hw tcp/udp checksum generation until we have a fix
    or workaround.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit a73a1cb755fc4184d1ea29bfbd2c6f872fefa068
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:25:19 2005 -0700

    [netdrvr mv643xx] We already set ETH_TX_ENABLE_INTERRUPT whenever we set ETH_TX_LAST_DESC.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 7ac3663c741f587d8f4f7f97e20cf7d9622711b0
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:24:24 2005 -0700

    [netdrvr mv643xx] Update tx_bytes statistic when using hw tcp/udp checksum generation.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 53534b419ad9175a35f0fdcdd699503f128dd96a
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:23:18 2005 -0700

    [netdrvr mv643xx] Call netif_carrier_off when closing the driver.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 18d0533724e9f6aad8c25af6462291936e76c4ad
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:22:23 2005 -0700

    [netdrvr mv643xx] Trivial.  Remove repeated comment.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit b5e82c1052651a227f8ccf9e59953cfd66a7004c
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:21:31 2005 -0700

    [netdrvr mv643xx] Clear transmit l4i_chk even when the hardware ignores it.
    Not absolutely necessary, but makes debugging easier.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 8b921bbf77eae2e1755a3b2e3a3855d8e08a3f22
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:19:54 2005 -0700

    [netdrvr mv643xx] Increment tx_ring_skbs before calling eth_port_send, since
    otherwise the irq handler may check and decrement it before
    we increment it.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit b19064d28faa46274fba46d90b2ac8ac317bebd4
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:18:46 2005 -0700

    [netdrvr mv643xx] Fix handling of unaligned tiny fragments not handled by hardware
    Check all fragments instead of just the last.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 66b87210b995a752ab27a3a1effbcff8fd52d0a2
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Feb 17 00:17:16 2005 -0700

    [netdrvr mv643xx] Fix a few places I missed in the previous rename patch.
    Rename: mv64x60 => mv643xx
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 8000c7d2afa1a418ee512f8309e3e9be1ba8fe72
Author: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2005@gmx.net>
Date:   Wed Feb 16 23:07:21 2005 -0800

    [PATCH] PCI: pci.ids update
    
    this patch partially updates drivers/pci/pci.ids to the current
    version from http://pciids.sf.net. I have gone over the diff to
    ensure nothing gets deleted/changed erroneously. There are some
    differences where I couldn't verify whether the in-kernel or
    the upstream version are correct, so I left them alone.
    
    Patch checked for build warnings and I'm running a kernel with
    it on my machine right now.
    
    Signed-off-by: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2005@gmx.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ed28c4ae239df7c8da09672f09032e8f22f4acdf
Author: Roland Dreier <roland@topspin.com>
Date:   Wed Feb 16 23:07:01 2005 -0800

    [PATCH] PCI: clean up the msi api
    
    Remove the call to request_mem_region() in msix_capability_init() to
    grab the MSI-X vector table.  Drivers should be using
    pci_request_regions() so that they own all of the PCI BARs, and the
    MSI-X core should trust it's being called by a correct driver.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47b2eb2bc711921a677146822099b75aa9305fd9
Author: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2005@gmx.net>
Date:   Wed Feb 16 23:06:37 2005 -0800

    [PATCH] pci/quirks.c: unhide SMBus device on Samsung P35 laptop
    
    this patch is needed to make the SMBus device on my Samsung P35
    laptop visible. By default, it doesn't appear as a pci device.
    
    Patch tested, works perfectly for me. Please apply.
    
    Signed-off-by: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2005@gmx.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1f107ea8fc93d105e9ffc76a50bfb682a87e8646
Author: Andi Kleen <ak@muc.de>
Date:   Wed Feb 16 23:06:16 2005 -0800

    [PATCH] PCI: allow x86_64 to do pci express
    
    On Mon, Feb 14, 2005 at 10:47:01AM +0100, Piotr Kaczuba wrote:
    > On Mon, Feb 14, 2005 at 10:18:43AM +0100, Andi Kleen wrote:
    > > Piotr Kaczuba <pepe@attika.ath.cx> writes:
    > > > Is there a reason why "PCI access mode" config option isn't available for
    > > > x86_64? Due to this, PCIE config options aren't available either.
    > >
    > > There is no 64bit PCI BIOS, so access is always direct.
    > >
    > > I assume you mean mmconfig access with "PCIE config options", that is
    > > a separate config option and available.
    >
    > I mean the PCIEPORTBUS option which depends on PCI_GOMMCONFIG or
    > PCI_GOANY. I assume that due to PCI_MMCONFIG / PCI_GOMMCONFIG mismatch
    > it's not available on x86_64.
    
    Ok, that's a bug in PCIEPORTBUS.  Best is probably to
    completely remove the dependency, it doesn't make much sense
    (the code has to handle the case of mmconfig not being available at
    runtime anyways)
    
    Remove bogus dependency in PCI Express root driver.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 423e0aef4dc0ad940719c96fd92ea37423be6a14
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 16 23:05:53 2005 -0800

    [PATCH] PCI: Add PCI quirk for SMBus on the Toshiba Satellite A40
    
    The Toshiba Satellite A40 laptop hides its SMBus device, much like a
    number of Asus boards reputedly do. This prevents access to the LM90
    hardware monitoring chip. This simple patch extends the PCI quirk used
    for the Asus and HP systems to this Toshiba laptop.
    
    Signed-off-by: Frans Pop <aragorn@tiscali.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f602b876a2593657028c4ffb1140df29eaec69fc
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Wed Feb 16 23:05:32 2005 -0800

    [PATCH] PCI Hotplug: Fix OSHP calls in shpchp and pciehp drivers
    
    Here is a patch to fix a problem in OSHP calls in shpchp and pciehp
    drivers that was detected in 2.6.11-rc3. In this kernel, calls to
    acpi_evaluate_object() to evaluate OSHP returned AE_BUFFER_OVERFLOW
    with the existing code.  Earlier kernels didn't return this error
    code.  The correct fix should be making return_buffer pointer NULL
    for no value is returned from this method.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f9843fce093639680d909755225e87148267c9fc
Author: Christophe Lucas <c.lucas@ifrance.com>
Date:   Wed Feb 16 23:05:08 2005 -0800

    [PATCH] drivers/pci/*: convert to pci_register_driver
    
    convert from pci_module_init to pci_register_driver
    (from:http://kerneljanitors.org/TODO).
    
    Signed-off-by: Christophe Lucas <c.lucas@ifrance.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10d75b862f43aba1a61a4dd111744b8540e674cf
Merge: d7f9c23... 97a4e84...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Feb 17 01:26:40 2005 -0500

    Merge intel.com:/home/lenb/bk/26-latest-ref
    into intel.com:/home/lenb/src/26-latest-dev

commit 520102a2e9bc5c4219a3e368590f09bffc5ed86d
Merge: 17eda96... 579f884...
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Wed Feb 16 20:23:56 2005 -0700

    Merge bk://dfarnsworth@bkbits.net/linux-2.5-mv643xx-enet
    into farnsworth.org:/x/bk/linux-2.5-mv643xx-enet

commit 579f884cd6ba2ea8f938f972e3772d01a24208cd
Merge: 97a4e84... 8c14bc9...
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Wed Feb 16 20:15:17 2005 -0700

    Merge farnsworth.org:/x/bk/linux-2.5
    into farnsworth.org:/x/bk/linux-2.5-mv643xx-enet

commit 17eda963725173a2b428752a2d793fbff3a85826
Merge: 97a4e84... 8c14bc9...
Author: Dale Farnsworth <dfarnsworth.adm@bkbits.net>
Date:   Wed Feb 16 17:11:28 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/d/dfarnsworth/linux-2.5-mv643xx-enet

commit 300d31b9613e71217758f105bad3ff71755a223b
Author: Len Brown <len.brown@intel.com>
Date:   Wed Feb 16 15:50:15 2005 -0500

    [ACPI] Add ACPI-based memory hot plug driver.
    
    The ACPI based memory hot plug driver patch supports physical hotplug
    operations on memory. This driver fields notifications for memory add
    and remove operations from firmware and notifies the VM of the affected
    memory ranges. Accordingly, this driver also maintains and updates the
    states of all the memory ranges. This driver is useful on hardware which
    helps firmware generating ACPI events for every physical hotplug
    operation of memory boards on the system during runtime.
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Naveen B S <naveen.b.s@intel.com>
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 12752be2309f0df8d4638d40844addb2af46884c
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Feb 16 11:35:42 2005 +0100

    Input: fix timer handling race in sidewinder joystick driver by
           switching to gameport's polling facilities.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8be94da11aee122faf7d77661559edebf5a25266
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 16 10:51:47 2005 +0100

    input: Fix Microtouch USB touchscreen Y axis direction.
           [0,0] should be upper left corner.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 4badb20ec60fffcd309b7f69dc84569f2684aa82
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Feb 15 23:05:48 2005 +0100

    input: Properly ignore padding fields in HID reports.
    
    Bug-found-by: Ted <6x0124@yahoo.com.tw>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit aeef05744046d2bdea4dbedb99fa59618d0a6356
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Feb 15 18:05:47 2005 +0100

    Input: fix race timer handling races in gameport-based joystick drivers
           by moving pollig timer down into gameport and using spinlock to
           protect it.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e9ba1cf06cd450bc35ce717d3fdb38844eb5b517
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Feb 15 17:14:38 2005 +0100

    input: Some changes to ati_remote key assignments:
    - Channel up/down keys are reversed on my ATI Remote Wonder.
    - Use KEY_TV, KEY_DVD and KEY_OK where appropriate.
    - Replace KEY_PLAYCD with KEY_PLAY.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit edb96b02fc191c89c8f70e39c31ca97d452f4fd9
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Feb 15 17:13:33 2005 +0100

    input: Make ati_remote clean up properly when removing either the device or the
    module.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 5dad2b43ed080b5736e6ace1faa0e14a341868ac
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Feb 15 03:47:08 2005 -0600

    JFS: Fix array overflow
    
    On a system with more than 64 processors, commit_threads was too
    big and caused an array overflow.  Always limit it to MAX_COMMIT_THREADS.
    
    Also, avoid waking up more than one commit thread at a time.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e8fd045415dd1b6d70faa3f8a874a83cfdf7b1e4
Merge: 67948c8... 34e4475...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Feb 15 03:17:12 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-dev

commit 34e4475639bd2da852ec285fa39a57f517d1bfdd
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Feb 15 03:13:47 2005 -0500

    This should fix u32 vs. pm_message_t confusion in firewire. No code
    changes. Please apply,
                                                            Pavel
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit aa82c4c49bee16ba193ddc1e03ca53ccf52debaf
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Feb 14 23:16:58 2005 -0800

    [XFRM]: stale_bundle()'s test was reversed
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0419d1d86defbd37c7521dd237fd11ec084bb185
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Feb 14 22:10:35 2005 -0800

    [IPV6]: Make loopback idev stick around.
    
    Mirror the ipv4 change.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8d588c105fe40762af29f5c01c8d81186a602fe
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Feb 14 22:09:38 2005 -0800

    [IPV4]: Make loopback idev stick around.
    
    As it is when loopback_dev loses all of its IPv4 addresses its
    corresponding idev will be destroyed.  Unfortunately as of last
    August route.c relies on the loopback idev to kill references
    to other idev objects.
    
    The end result is that when you do ip a f dev lo, unregistering
    other devices will hang until those dst objects referring to
    their idev objects die of natural causes.  Of course this may
    never happen if the processes holding those references get
    dead-locked by invoking an operation that takes the RTNL.
    
    A simple solution is to make sure that loopback's idev sticks
    around all the time.
    
    Incidentally this also fixes the setting of some flags on the
    loopback idev object as currently the code that does it won't
    be called if you add the addresses to lo after bring it up.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53a0e05f8bde6fc4147f21f1feaa00a6ade75b84
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 14 21:58:56 2005 -0800

    [IPVS]: Fix deadlock in update_defense_level()
    
    This function invokes si_meminfo() from timer context,
    which doesn't work due to bdev_lock not being an IRQ
    safe lock.
    
    So move it to keventd context.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4e9c5abed9f041db9011f04ffbfdf9853c8481ce
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 14 21:57:16 2005 -0800

    [WORKQUEUE]: Add cancel_rearming_delayed_work()
    
    From: Arjan van de Ven <arjan@infradead.org>
    
    cancel_rearming_delayed_workqueue() is only used inside workqueue.c; make
    this function static (the more useful wrapper around it later in that
    function remains non-static and exported)
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c0912476f4baed8557845863e9972881865bf1a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Feb 14 21:46:51 2005 -0800

    [IPSEC]: Merge xfrm{4,6}_bundle_ok/stale_bundle
    
    This patch merges __xfrm4_bundle_ok/__xfrm6_bundle_ok/stale_bundle
    so that when I add MTU verification code I don't have to put it in
    three places.
    
    It also moves the tests on dst->dev and dst->obsolete outside the
    loop since the former is identical throughout the bundle and the
    latter can only be positive on the final element which also happens
    to be dst->path.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 168542b9cfe6d53603317afa99c7cd58ed835629
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 21:36:18 2005 -0800

    [TIMER]: Export avenrun for packet scheduler meta ematch.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e8ada2c045389c934c1d4ad945cca5685901cc2
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 21:04:52 2005 -0800

    [ATM]: fore200e needs to be converted over to sk_atm().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e30b1ddf685b7596d8fb43a4d6335b69d5bd15b
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:21:22 2005 -0800

    [PKT_SCHED]: Basic classifier
    
    The basic classifier is the most simple classifier one can think of,
    it doesn't do anything on its own but to support extended matches and
    actions. A basic classifier returns true if no ematches or actions
    are configured and thus can also be used as a catch-all classifier.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 660976037056efe042b5885c18d8dd5da5c06b98
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:20:03 2005 -0800

    [PKT_SCHED]: Metadata ematch (meta)
    
    The meta ematch allows comparing various metadata values against
    static values from usersapce or other metadata values. It currently
    supports various numeric meta values such as netfilter mark, packet
    length, security level, interface indices, tc classid, load average,
    a random value but also variable length values such as interface
    names. Adding support for additional meta values is as easy as
    writing a data collector (usually 1-5 lines of code) and assign it
    to a id and type by putting it into the meta operations table.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a7d8d82ef5275ee2e573632165165ba39542ff07
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:18:11 2005 -0800

    [PKT_SCHED]: u32 ematch
    
    The u32 ematch behaves exactly the same as a u32 match and will replace
    it in the long term. It allows the underlying classifiers to give hints
    about the position of the next protocol header (i.e. nexthdr+).
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e29bf325f17d784a519646c490c3aad39ad1739a
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:16:10 2005 -0800

    [PKT_SCHED]: Multi byte comparison ematch (nbyte)
    
    The nbyte ematch allows comparing any number of bytes at an arbitary
    offset based on one of the skb layers. Its main usage is intended
    for IPv6 addresses but may be used for any kind of pattern.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 580eb91a2b53c00a3530b27a488ef3aef2121fdf
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:14:44 2005 -0800

    [PKT_SCHED]: Simple comparison ematch (cmp)
    
    The cmp ematch compares a static value provided by userspace against
    a 8, 16, or 32bit chunk read from the packet. The reading offset is
    provided by userspace and based on one of the skb layers (mac|nh|h).
    The ematch provides functionality to transform the byte order of
    the chunk and/or apply a mask and understands the operands eq, lt,
    and gt. Basically, it is very similiar to the u32 (e)match but tries
    filling the gaps left behind.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b55d24379c528deb43e78a9197e3829417407622
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 20:13:15 2005 -0800

    [PKT_SCHED]: Extended Matches API
    
    An extended match (ematch) is a small classifiction tool not worth
    writing a full classifier for. Ematches can be interconnected to form
    a logic expression and get attached to classifiers to extend their
    functionatlity.
    
    The userspace part transforms the logic expressions into an array
    consisting of multiple sequences of interconnected ematches separated
    by markers. Precedence is implemented by a special ematch kind
    referencing a sequence beyond the marker of the current sequence
    causing the current position in the sequence to be pushed onto a stack
    to allow the current position to be overwritten by the position
    referenced in the special ematch. Matching continues in the new sequence
    until a marker is reached causing the position to be restored from the
    stack.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e82642945cdae75f365af48b0ffcad22fd3f61f3
Merge: 547b39b... d175167...
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Feb 14 19:54:41 2005 -0800

    Merge nuts.davemloft.net:/disk1/BK/network-2.6.12
    into nuts.davemloft.net:/disk1/BK/net-2.6.12

commit addcf6d4ee71d49bab9e82eaac604bd545bd9821
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:24:30 2005 +0100

    [ALSA] Add ac97_quirk for Dell machine
    
    Intel8x0 driver
    Added ac97_quirk option for Dell machine.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6b40a47989a8a676995881b32362ab3fc5eaab9b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:23:16 2005 +0100

    [ALSA] Enables SPDIF output on the Audigy2 Value
    
    EMU10K1/EMU10K2 driver
    Enables SPDIF output on the Audigy2 Value.
    It seems to work for PCM, but not AC3 yet.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fcaa569883ba47e5aa6d9473bfbe290c0cf44be0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:22:05 2005 +0100

    [ALSA] Add support for Audigy2LS on MSI motherboard
    
    CA0106 driver
    Add support for Audigy2LS on MSI motherboard.
    Fixes Bug #0901
    
    Signed-off-by: James Courtier-Dutton <James@superbug.demon.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ae596ed5a830eb1ffc8f129f1576ba994d25c389
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:20:52 2005 +0100

    [ALSA] fix typo in midi code
    
    RME HDSP driver
    fix typo in midi code
    
    Signed-off-by: Thomas Charbonnel <thomas@undata.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c0ff26f212a77722d687bd33a45b91e82048509d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:19:39 2005 +0100

    [ALSA] Fix rate setting on multiple codecs
    
    AC97 Codec
    From Ron Cococcia <ron.cococcia@request.com>:
    
    Fixed the PCM rate setting on multiple AC97 codecs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3bac07c85fd880437a9234a8bb6aed9debec6bfd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:18:30 2005 +0100

    [ALSA] split snd_emu10k1_trigger_voice into trigger and prepare functions
    
    EMU10K1/EMU10K2 driver
    This patch provides better sync between multiple voices by separating
    the trigger_voice function into prepare_voice which sets up the volume
    and filter parameters and trigger_voice which sets pitch target, current
    and initial pitch and enables the voice interrupt.  For standard PCM
    this should not make much of a difference but will be important for
    minimizing phase error between voices for multichannel PCM.
    
    This behavior was derived from the opensource.creative.com driver.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cb72b251efa6a0bddf4aea6f278656f379787fb4
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 18:03:46 2005 +0100

    [ALSA] Remove unused yss225.h
    
    Wavefront drivers
    yss225.h is just obsolete, not used/read by any codes.
    Let's remove it.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 755bd547ce54dd277e56f156c3503d418afe9d8e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:31:18 2005 +0100

    [ALSA] Added support for Terratec PHASE 22
    
    ICE1712 driver,ICE1724 driver
    I've struggled for a couple of days with Terratec Phase 22 card.
    Chips used on it are well known but the combination is somehow unique.
    Phase 88 should have been similar...  but it actually uses 1712
    instead of 1721 (Envy24HT-S). So here is the patch against release
    1.0.8 that adds Phase 22 to ice1724. I've tested only analog part
    (balances 1/4 TRS in and outs).
    
    Signed-off-by: Misha Zhilin <misha@epiphan.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ebcfbe8dab2d66a9f19111a1c32846fc7fe176af
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:27:44 2005 +0100

    [ALSA] AK4114 - fixed workqueue initialization & removed debug code
    
    AK4114 receiver
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 83e1be3f27bb8a29852afc55c52bdecdc0eb0e05
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:26:34 2005 +0100

    [ALSA] fix typo in assignment of snd_ak4114_spdif_playback_put
    
    AK4114 receiver
    snd_ak4114_spdif_playback_put was assigned to the .get callback
    which resulted in a duplicate initialization of that member
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit e81585354771a1862e0013ec9a205810fa5c6558
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:25:22 2005 +0100

    [ALSA] Added ICE1724 - ESI Juli@ code (not complete) + AK4114 code + AK4358
    
    Serial BUS drivers,AK4114 receiver,AK4XXX AD/DA converters
    ICE1712 driver,ICE1724 driver
    Initial incomplete driver for ESI Juli@ cardcards based on ICE1724, AK4114,
    AK4358 and AK5385. The ICE1724 and ICE1712 main files plus some drivers are
    also updated (cleanups and new callbacks).
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f2e84c94d02414f35a9deadb46da8c3035be41fe
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:21:35 2005 +0100

    [ALSA] add STAC9708 output bias mixer control
    
    AC97 Codec
    This adds a mixer control for an undocumented bit of the STAC9708
    that somehow affects the analog output.  This should help reducing
    the distortion at high output levels on ymfpci and SBLive cards.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit fe90225073c798f69581d7e73481680cc4c268f8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:20:21 2005 +0100

    [ALSA] MPU-401 driver cleanup
    
    MPU401 UART
    Correctly check for error codes returned by pnp_register_driver,
    use a common function for registering the sound card, and remove
    many #ifdef's.
    
    Signed-off-by: Matthieu Castet <castet.matthieu@free.fr>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 6d92388b61cca79b3443f5a8a48b0c7e0866c278
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:19:12 2005 +0100

    [ALSA] add 96Khz support and setting sample rate for	direct SPDIF output
    
    EMU10K1/EMU10K2 driver
    This patch should add support for 96Khz 'direct SPDIF' aka 'SPDIF
    Bypass' (not P16V) playback mode available on the Audigy1 and 2 and
    newer SBLives (?).  It lets you bypass the 48khz DSP resampling when
    using the card in digital mode.  It also adds 96khz analog playback
    support, good for testing but less interesting because it's downsampled
    to 48khz.  A new mixer control 'Audigy SPDIF Output Sample Rate' is
    created, you can choose 44100, 48000, or 96000.  Standard SPDIF
    playback, AC3 passthrough (real 96khz playback), and analog playback
    (96khz is resampled to 48khz in the DSP) all work with a 16 bit,96khz
    wav file.  Only the last was tested due to lack of any SPDIF hardware.
    
    This was derived mostly from the opensource.creative.com driver.  All
    that was needed for 96khz playback to work in analog mode was changing
    the format to 8000_96000 (looks like the creative driver supports 192khz
    too).  And, of course this sample rate has always been supported (albeit
    downsampled) because if you have 48khz samples in a soundfont the
    envelope engine has to be able to pitch shift them in both directions.
    
    I still have not been able to figure out how to get 24 bit playback to
    work.  This is possible, independent of the P16V, for spdif and analog
    24/48 playback via the DSP.  I do know how to access the full 24 bits
    from the ADC from within the DSP, just not how to get it in there.  For
    one thing I have no idea which 24 bit format it supports.  Some of them
    seemed to work with JACK but produced noise.
    
    This was generated with my multichannel patch but it applies against
    ALSA CVS as well.
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0915d2b79f545ce4d68bf7118c40c957e3041d39
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:18:00 2005 +0100

    [ALSA] fix sound/isa/gus/interwave.c compile with PNP=n
    
    AMD InterWave driver
    Emmanuel Colbus sent this patch one month ago with the following
    description:
    
    There is a trivial bug in the file sound/isa/gus/interwave.c .
    The variable isapnp is defined only if CONFIG_PNP is enabled, but it is
    always used few lines after.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c7cbac70e2caea806ef8ca4ad3f2de3e01ed40ad
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:11:49 2005 +0100

    [ALSA] Bind master and HP controls with hp_only quirk
    
    AC97 Codec
    Bind master and HP controls when hp_only quirk is given, instead
    of removing master control.  This fixes the problem of some laptops
    which require sync'ed volume for PC-speaker and headphone output.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit dc37bf6e3c06191228da23aabd6fbb75bc389ee0
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:10:40 2005 +0100

    [ALSA] fixes als100 not detecting opl3
    
    ALS100 driver
    This patch fixes issue when opl3 device couldn't be found
    due to numbering of devices in pnp card, because search of
    opl3 device started from mpu device, which could have number
    greater than opl3 could.
    
    Example:
    MPU is 00:01.03
    and
    OPL is 00:01.01
    
    Signed-off-by: Anton Romanov <theli@ukr.net>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 8d847c971e32bd7c5329deafad96037790c25613
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:09:33 2005 +0100

    [ALSA] enable disabling of isapnp
    
    OPL3SA2 driver
    Fixed a logic error that prevented the 'isapnp=0' module
    parameter from taking effect.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7d177fdd768fd9552e81f49bdf4b8154f70f0878
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:08:24 2005 +0100

    [ALSA] MPU-401 PnP support
    
    Documentation,MPU401 UART
    Replace the ACPI PnP code with generic PnP calls.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 2da0e44a2dd28ee4be93948b269171d07a4d4712
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:07:15 2005 +0100

    [ALSA] Add quirk for Fujitsu S6210
    
    Intel8x0 driver
    Added ac97_quirk for Fujitsu S6210.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2dee14ed80b7b4e454cb5fc5dca14962bcaee1fb
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:06:09 2005 +0100

    [ALSA] Add __iomem prefix
    
    BT87x driver
    Added __iomem prefix to the mmio pointer.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6024b62414bca78077acdb6e045f53f657bdf1da
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:04:59 2005 +0100

    [ALSA] Remove interruptible_sleep_on_timeout().
    
    ALSA<-OSS sequencer
    Use wait_event_interruptible_timeout() instead of deprecated
    interruptible_sleep_on_timeout().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8423f1fe7f6b82b0b0bfe5990ff4013a23f3f002
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:03:52 2005 +0100

    [ALSA] remove interruptible_sleep_on_timeout() usage
    
    GUS Library
    Replace deprecated interruptible_sleep_on_timeout() with
    wait_event_timeout(). Code is not identical, as the current sleeping
    system is 1 jiffy at a time checking atomic_read()'s return every
    iteration. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit aa426f3d095a4c9b26eac171c867e781bf23c61b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:02:40 2005 +0100

    [ALSA] Korg1212 updates
    
    KORG1212 driver
    This patches covers the following issues:
    
        - solves double 'spin_lock_irqsave' problems;
        - eliminate the use of deprecated function 'sleep_on_timeout';
        - clarify some 'printk' messages; and
        - logs korg DMA Errors due to PCI congestion.
    
    Signed-off-by: Haroldo Gamal <gamal@alternex.com.br>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 079508e7dcf3a895ba7076e8966c3ab783f76d3f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:01:33 2005 +0100

    [ALSA] Novation and MOTU USB MIDI support
    
    USB generic driver
    Rewrote USB MIDI protocol handling code to use callbacks
    for each protocol;
    added support for Novation and MOTU protocols;
    changed detection code to allow interrupt endpoints.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 480ca440fd65b611b7d1fc86801035d4f1ce65ad
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 17:00:22 2005 +0100

    [ALSA] simplify snd_usbmidi_count_bits()
    
    USB generic driver
    This makes the bit counting code smaller and simpler.
    
    Signed-off-by: Charles C. Bennett <ccb@acm.org>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 8fdee9cf1e455610510cdc4a0acc45bc31890111
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:59:12 2005 +0100

    [ALSA] capture EXTINs with multichannel device
    
    EMU10K1/EMU10K2 driver
    This patch changes the emu10k1 multichannel capture device (hw:x,2) to
    capture the 16 external inputs by default.  This involves adding DSP
    code to route the EXTINs to the FXBUS2 (EFX capture) channels and
    setting the corresponding FXWC bits by default.
    
    This allows capturing multiple inputs simultaneously.  It completely
    bypasses the capture controls of the mixer.  With my Audigy2 ZS I can
    capture LineIn, Line2, and Aux2 at the same time (6 channels).
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 02f365920a3b78a244f13c2f47a24d7e2e9d7d6d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:57:56 2005 +0100

    [ALSA] Add quirk for LEGEND ZhaoYang 3100CF
    
    Maestro3 driver
    Added a quirk entry for LEGEND ZhaoYang 3100CF.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 553623ec9490f403891ec6657b9b9718667f17bb
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:56:43 2005 +0100

    [ALSA] replace interruptible_sleep_on_timeout() with wait_event_interruptible_timeout()
    
    RawMidi Midlevel
    Use wai_event_interruptible_timeout() instead of deprecated
    interruptible_sleep_on_timeout(). Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bce794ba79720114a770e180ef244c555a5f0bd8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:55:33 2005 +0100

    [ALSA] Kconfig: cleanup sound menu
    
    ALSA Core
    This properly indents the sound menu.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4dc379e2c94af9d9f152d876acc723bf280f9f6b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:54:24 2005 +0100

    [ALSA] hdsp ghost midi device fix
    
    RME HDSP driver
    * Prevents the creation of a second midi device for cards with only
      one midi I/O
    
    Signed-off-by: Thomas Charbonnel <thomas@undata.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 009a74792f949c74502793d05c34c017d1085a8d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:53:15 2005 +0100

    [ALSA] Fix 32bit calls to snd_pcm_channel_info()
    
    PCM Midlevel
    Fix 32-bit calls to snd_pcm_channel_info().
    
    Signed-off-by: Brian Gerst <bgerst@didntduck.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a9466dfde19fe97eea302631f0e68f82de5b3f31
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:52:11 2005 +0100

    [ALSA] Fix compile error (due to last suspend/resume fix)
    
    PPC PMAC driver
    Fixed the forgotten caller of suspend/resume callbacks to follow
    the recent PM fixes.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ea9d1ad1bf34aa4fad9f56c554f223f9e3517e0e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:51:01 2005 +0100

    [ALSA] intel8x0 - fix for broken PCI ID define for ICH6
    
    Intel8x0 driver
    Patch-level: High
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 19909a8a300462cf9de2526be7b779467cf2d1d6
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:49:48 2005 +0100

    [ALSA] intel8x0 - fixed timeout in the 'get current DMA pointer' routine
    
    Intel8x0 driver
    Patch-level: High
    
    Signed-off-by: Wei Ni <Wei.Ni@uli.com.tw>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c72434dab42acfa6d82e111a6f85c81d1c0c291b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:48:36 2005 +0100

    [ALSA] Fix suspend/resume functions
    
    ALSA Core
    Fix the suspend/resume callback functions to follow the last change.
    (This fix was missing in the last patch.)
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 61c7da990676a5e746e30ff19ac1d9e49a26fde3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:47:25 2005 +0100

    [ALSA] Fix inclusion of pm.h
    
    ALSA Core
    Added the missing inclusion of linux/pm.h.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 034a0ab8d31501c01729ef129cebdb0f1b8578bd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:46:09 2005 +0100

    [ALSA] Fix resume callback
    
    HDA Codec driver
    Fixed resume callback to follow the recent change of PM callbacks.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 39fe852c5683274042febaf3e28e7086f2ab2383
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:44:45 2005 +0100

    [ALSA] Remove unused variable
    
    USB USX2Y
    Removed an unused variable to fix a compile warning.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9d400d6d829ad66ebee205e3c1ac4bbfe144d04f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:43:33 2005 +0100

    [ALSA] Fix descriptions about suspend/resume callbacks
    
    Documentation
    Fixed the descriptions about suspend/resume callbacks.
    The suspend callback takes pm_message_t argument, and resume takes no
    extra argument now.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f285aed4a9eb8e100993587b67ef3064b27031f8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:42:16 2005 +0100

    [ALSA] driver model type fixes for ALSA
    
    SA11xx UDA1341 driver,Control Midlevel,ALSA Core,Digigram VX core
    ES18xx driver,OPL3SA2 driver,AD1848 driver,CS4231 driver,ATIIXP driver
    ATIIXP-modem driver,CS4281 driver,ES1938 driver,ES1968 driver
    Intel8x0 driver,Intel8x0-modem driver,Maestro3 driver,VIA82xx driver
    VIA82xx-modem driver,ALI5451 driver,CS46xx driver,HDA Codec driver
    HDA Intel driver,NM256 driver,Trident driver,YMFPCI driver
    PDAudioCF driver,Digigram VX Pocket driver,PPC PMAC driver
    Fixes by Pavel Machek <pavel@suse.cz>:
    suspend() routines no longer get u32 as their parameter (they get
    pm_message_t, which is u32 for now, but will change in 2.6.12 or
    so). This fixes ALSA to notice this, and uses constants with right
    types where appropriate. It results in no code changes. [Best results
    will be when patching against latest -mm, you may get some warnings if
    you patch it into older kernel, but it should still do the right
    thing.] Please apply,
    							Pavel
    
    [In addition, suspend callback type is changed to follow to the standard
     style taking no state argument -- Takashi]
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 15548cc55b4a2ba3de63936d8f229d509d4ccafd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:40:49 2005 +0100

    [ALSA] use cached idVendor/idProduct values
    
    USB generic driver
    use the vendor/product IDs in the state structure instead of
    reading them again from the device
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit bdd8a80bafc7d03f3b05ed23d2af63c48ac7c42e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:39:40 2005 +0100

    [ALSA] Set default index of modem and bt87x drivers to -2
    
    Documentation,ATIIXP-modem driver,BT87x driver,Intel8x0-modem driver
    VIA82xx-modem driver
    Set the default index value of modem and bt87x drivers to -2 so that
    the first slot is excluded when no index option is given.
    This gives other uadio drivers a chance to put them as the primary
    driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 287b1242a6c1e59590357c89cf33077fd6065d1a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:38:31 2005 +0100

    [ALSA] Interpret negative index as bitmask of permissible indexes
    
    Documentation,ALSA Core
    Currently arguments of the 'index' option from 0 through SNDRV_CARDS-1
    force a module to take the specified index. Index -1 makes the module
    take the first available index. This patch extends this convention so
    that a negative index value is interpreted as a bitmask of the
    permitted indexes. Special cases:
    
        -1 0xffffffff 0 and up
        -2 0xfffffffe 1 and up
        -4 0xfffffffc 2 and up
        ...
    
    The patch includes also corrections of ALSA-Configuration.txt document.
    
    Signed-off-by: Thomas Hood <jdthood@yahoo.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7d4268952f5dcaaebaae77cf47338dbbfcd4ee77
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:37:21 2005 +0100

    [ALSA] Changes 'Music' to 'Synth' in mixer control names
    
    EMU10K1/EMU10K2 driver
    Changes 'Music' to 'Synth' in mixer control names
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b6e0688346d44f0362f25d51535e50f886b7e625
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:36:10 2005 +0100

    [ALSA] HDSP fixes
    
    Documentation,RME HDSP driver
    * init sequence cleanup and firmware upload related bugfixes
    * more robust revision detection scheme
      (should transparently handle new revisions)
    * allow hdsploader and the kernel fw loader to coexist
      this is useful for cardbus user who compiled the driver in-kernel
      (userspace may not be ready to upload the firmware when the card
       is probed)
    * removed confusing and obsolete passthru option (was interfering
      with the mixer when opening the device for capture or playback)
      this change requires a recompile of the userspace tools against
      the patched hdsp.h
    * removed confusing and obsolete line_outs_monitor module param
    * made precise_ptr the default behaviour, and runtime tweakable
      (removed corresponding module param)
    * add an alsa ctl to disable the use of the midi tasklet, and
      process midi data in the interrupt handler
      (using the tasklet is still the default)
      this is mainly intended for users of Ingo Molnar's RT patch
    * metering fix for Multiface/Digiface users (closes ALSA BUG #0000801)
    * small endianness fix
    * ALSA-Configuration.txt HDSP entry update
    * error messages cleanup
    
    Signed-off-by: Thomas Charbonnel <thomas@undata.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit efac16caa86e5d6fb3c7972edb28d1614b32ece4
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:34:58 2005 +0100

    [ALSA] Remove pm_register/pm_unregister
    
    SA11xx UDA1341 driver,ALSA Core,ISA
    Removed pm_register() and pm_unregister().
    Use platform_device for suspend/resume, instead.
    
    The current implemention is still a hack.  The whole ISA drivers should
    be rewritten with a proper bus definition.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41a3b69fd8ce270354f709995a40832d451dd620
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:33:45 2005 +0100

    [ALSA] Remove descriptions of obsolete options
    
    Documentation
    Removed descriptions of obsolete irq_mask and irq_list options for
    vxpocket, vxp440 and pdaudiocf drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1ea5a466a7495a4a5644e0ca6c3eb11dab0f2f30
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:32:27 2005 +0100

    [ALSA] Ascii chars only
    
    RME HDSP driver
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5b2890137b69c11a05d54cc71fc700372d02f9a1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Feb 14 16:28:53 2005 +0100

    [ALSA] Add newline to printk
    
    ALSA Core
    Added the newline to printk error output.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 72a7abacdba27a4ba0198861fb8f77ae09d331bc
Merge: 67948c8... 2375001...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Feb 14 07:41:22 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit ca8e0d3c2181eeeb4354e67088bd3b36540cdd30
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Feb 14 09:59:28 2005 +0100

    Input: psmouse should probe for "special" protocols only if max
           protocol is greater than IMEX so that proto=imps and
           proto=exps options work. Fix Kensington case.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit d76f906519acbc00c10a4507aaefc9117be8efae
Merge: 27a98d0... d14d402...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Sun Feb 13 20:53:38 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit b67f6ef901e65b37ef5156390c143ea94727ea64
Author: Peter Osterlund <petero2@telia.com>
Date:   Sun Feb 13 20:58:47 2005 +0100

    input: Store alps hardware version info in the input_dev structure, so that
           it shows up in /proc/bus/input/devices.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 83932276980c64a760c5aab5906c939be4ba28c9
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sun Feb 13 02:50:34 2005 -0500

    [PATCH] net/s2io: replace schedule_timeout() with msleep()
    
    Use msleep() instead of schedule_timeout() to guarantee the task delays
    as expected. This makes the code independent of HZ values (particularly
    important when HZ changes or is dynamic). Compile- and boot-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Acked-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 786c8f69756ce9d47e0eb348afae941bcdc73008
Merge: 3d482f5... dd13b9b...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sat Feb 12 23:15:31 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit f7d8de58a6b2f35bfc850402dfc162cb007255ef
Merge: 7b8e33f... 7240613...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun Feb 13 02:02:28 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 7b8e33fccabfd742e07d8ac257b93337d762fe02
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat Feb 12 22:10:55 2005 +0100

    input: HID list handling cleanup, fix two bugs in pid.c and one in hid-core.c
           that the cleanup uncovered. Remove a workaround for BTC keyboard
           46e:5303, because it's breaking other devices. Instead enable
           QUIRK_NOGET for this keyboard.
           Change set_idle handling to use a '0' report ID, meaning all reports
           instead of iterating over each individual report ID. This shouldn't
           change much, since most normal devices have only one report with
           id '0'.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 9c15d10ba9202379c97e1dd8d2ed5065218d74ed
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat Feb 12 22:05:32 2005 +0100

    input: Add pin numbers to parkbd.c documentation.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 86cd0b53885df9864c0fc253d7f927fb3b52d450
Merge: 8fccf06... d007c49...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat Feb 12 10:31:37 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 8fccf0697baa3f95799c0f2e5babf268f9f69803
Author: Dave Jones <davej@redhat.com>
Date:   Sat Feb 12 10:18:35 2005 +0100

    input: Looks like someone forgot the ARCH_
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 9af4b8341f143c700155d26e981b7b7922618e3e
Merge: d174591... 88f48c8...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat Feb 12 00:03:58 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit d1745915ec77d526713c29710e6e2ef97fa7754c
Author: n1gp@hotmail.com <n1gp@hotmail.com>
Date:   Fri Feb 11 19:08:14 2005 +0100

    input: Fix keybit initialization in MK712 touchscreen driver.
           With this, the driver is tested to work properly.
    
    From: Richard Koch <n1gp@hotmail.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 59fb935e17152cd2ea7773c9ca48c9829adce6a7
Author: andi@cosy.sbg.ac.at <andi@cosy.sbg.ac.at>
Date:   Fri Feb 11 06:59:53 2005 -0500

    [PATCH] sundance: attempt to address high irqs due to TX overflow
    
    In at least some versions of Kernel 2.6 (2.6.8.1, 2.6.11-rc2)
    the driver drivers/net/sundance.c creates high interrupt load
    (~ 100 interrupts per second) even in case of no network traffic
    at all.
    
    It seems that some sort of TX overflow handling is misplaced
    and triggers interrupts very often even in case of no data to
    send. The TX overflow handling has been moved to a more
    appropriate place.
    
    While there, an off by one error of reading the TX status has
    also been corrected by moving the read after the break.
    
    Thanks to Jeroen who tested the patch (also with high workload).
    Interrupts are down to normal and there are no obvious side
    effects.

commit d276a594737a93ede71f4189f98fc5486d4e65ef
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Feb 11 06:55:06 2005 -0500

    [PATCH] bonding: Update/rewrite bonding.txt
    
    	This is a complete overhaul of the bonding.txt documentation.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e05057f5c5931ac6f9160300b972cda4aba6aa13
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Feb 11 06:54:54 2005 -0500

    [PATCH] bonding: Update kconfig description
    
    This patch updates the very-outdated Kconfig description for bonding.
    Users reading the help text in menuconfig or xconfig would see text that
    implied that bonding only supports static link aggregation, and required a
    specific switch to make it work.  The new description mentions multiple
    bonding modes and points the user to the bonding.txt documentation.
    
    Signed-off-by:  Mitch Williams <mitch.a.williams@intel.com>
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cbee2fc60d83e0cc7123d1d0d91d457af433ff71
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Feb 11 06:54:40 2005 -0500

    [PATCH] bonding: change misleading warning
    
    	This updates a warning message that the bonding driver issues
    when some modes are unable to determine the link speed of a slave
    device.  The old message led users to believe that bonding was slowing
    their gigabit devices to 100 Mb/sec.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0e7c2458f80afc48f929226eb131afd5abca9569
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Feb 11 06:54:28 2005 -0500

    [PATCH] : bonding: use wrappers to change mtu and MAC
    
    	This updates the bonding driver to use the dev_set_mtu() and
    dev_set_mac_address() wrapper functions.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b3865596a3c29909c7fc15e3a993859edcf8f20a
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Feb 11 06:54:16 2005 -0500

    [PATCH] : net/core: move set MAC into separate function
    
    	This moves the SIOCSIFHWADDR code from dev_ifsioc() into a
    separate new function, dev_set_mac_address().  This provides a single
    entry point for all callers performing MAC address changes.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e9b4c4d6c6ea86d1ad09553d667cd5e89432cd73
Merge: f26b6ac... cd2f97f...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 11 12:44:43 2005 +0100

    Merge bkbits:input into suse.cz:/home/vojtech/bk/input

commit f26b6acc844e17fd3de8d81168dc54a1e6147d9f
Merge: eeca3f3... 8b5b19d...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 11 11:30:12 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 8b5b19dd9cdc62f39a75f2167d7861133d1f4b58
Merge: 6165b06... a5b82ec...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 11 11:13:10 2005 +0100

    Merge bk://dtor.bkbits.net/input into suse.cz:/home/vojtech/bk/input

commit a5b82ec1407ffba9610e03e1d5a573fd64dc0aff
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:23:40 2005 -0500

    Input: remove gameport->private in favor of using driver-specific data
           in device structure, add gameport_get/set_drvdata to access it.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c48819286fe42bcfdcb78f4d6f75d1113ece42f8
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:21:32 2005 -0500

    Input: complete gameport sysfs integration, ports are now
           devices in driver model. Implemented similarly to serio.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit bee3129f23b8d04ad13daa11b91988607db851c6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:21:02 2005 -0500

    Input: integrate gameport drivers info dribver model/sysfs,
           create "gameport" bus. drivers' connect() routines
           now return error code instead of void.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6f551b6f1e24ca11c9a716f4a202946d85f5ea17
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:20:30 2005 -0500

    Input: convert sound/pci to dynamic gameport allocation.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f519f9cfaaf3725b4c5e521a9abb910f14e3dbcd
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:20:08 2005 -0500

    Input: convert sound/oss to dynamic gameport allocation.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 25bce0cf5b026b2abbffeb48db9f493ec612b03f
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:19:36 2005 -0500

    Input: convert input/gameport to dynamic gameport allocation.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b6c911d04942d7ff66ccbf14da8d1f530b5b23e6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:18:48 2005 -0500

    Input: prepare for dynamic gameport allocation:
           - provide functions to allocate and free gameports;
           - provide functions to properly set name and phys;
           - dynamically allocated gameports are automatically
             announced in kernel logs and freed when unregistered.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 31fae8675882bbaa424d96eca13a3fc709a16dfa
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:18:29 2005 -0500

    Input: make connect and disconnect methods mandatory for gameport
           drivers since that's where gameport_{open|close} are called
           from to actually bind driver to a port.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c9c2f7010dd2d2feca824ea0b607ae8f28a47a56
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:09:59 2005 -0500

    Input: more renames in gameport in preparations to sysfs integration
           - gameport_dev -> gameport_driver
           - gameport_[un]register_device -> gameport_[un]register_driver
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 14104b86a2c540c7ba12dad5f999a95ee70d319b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Feb 10 15:09:43 2005 -0500

    Input: rename gameport->driver to gameport->port_data in preparation
           to sysfs integration.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2cdcb18745900dc8ec6b233487dbe0dae6668eaf
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 10 04:23:38 2005 -0500

    sbp2: add precautionary log notice to new exit branch from last
    patch
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit bbc2b4a694db641adb1917db95a5b8b8ce414085
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 10 04:22:20 2005 -0500

    apply patch from Nishanth Aravamudan <nacc@us.ibm.com> to use
    sleep_interruptible for clarity and prevent early return on wait_queue
    events.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit b68edcbc074d6438956c274e1406277382e27f2f
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 10 03:08:56 2005 -0500

    Change the initialization message for eth1394 to KERN_INFO, requested by
    Steffen Zieger <lkml@steffenspage.de>
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 2ac5408ca32265cc5bee44c0abe5dbbc3f62967a
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 10 03:02:21 2005 -0500

    Description: Use wait_event_interruptible() instead of the deprecated
    interruptible_sleep_on(). The first change is simply to clean up the code a
    little to make it clearer. The second actually does a replacement, mimicking
    exactly the first. I removed the #if 1/#else/endif logic, as it duplicated the
    same code. Patch is compile-tested.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit dd13b9bad325a7e8d960c83d870b661eb61e094a
Merge: cddd110... acab46d...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Wed Feb 9 16:29:17 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 6165b06096175d0590564f57a141217dbd779708
Merge: 25bd04b... 245f9eb...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 9 22:50:46 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 25bd04b0c4b03eb4126a62935140fb54842edced
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 9 22:48:10 2005 +0100

    input: Fix Elo touchscreen touch detection.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e3caf5d33e2a634ad69a52483c696577b534b44c
Merge: 3d23006... e0dea12...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Feb 9 12:41:07 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/viro-iomap

commit 23750010bfa81de0867ddd4bd4bd7c9b2d27fe05
Merge: c5ff533... 245f9eb...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Feb 9 08:19:10 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit cd2f97f96c9f9fd4c04a7ec4a6a054c3bf59827e
Author: jbj1@ultraemail.net <jbj1@ultraemail.net>
Date:   Wed Feb 9 12:17:53 2005 +0100

    input: Fix a code example in a comment in hiddev.c
    
    From: Jens B. Jorgensen <jbj1@ultraemail.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 314375b64e8205ecb9628fda092fa07dae5a566f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 9 12:09:47 2005 +0100

    input: Add support for serial ELO touchscreens, including
           Elo IntelliTouch, AccuTouch and SecureTouch.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit d0807a8c23da0045d5074b371129ce7b1ef48960
Merge: 0db0e37... 3d23006...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Wed Feb 9 12:07:08 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 0db0e3715b70ceee6ac95dee244ea179ab033001
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Feb 9 10:24:55 2005 +0100

    Input: alps - fix protocol validation rules causing touchpad
           to lose sync if an absolute packet is received after
           a relative packet with negative Y displacement.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 394e3ec6c76dd57853a34a4cb26510fa0d69e258
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Tue Feb 8 21:04:58 2005 +0100

    input: this patch turns off the pc speaker when pcspkr.ko is unloaded,
           else it would never stop
    
    Signed-off-by: Matthieu Castet <castet.matthieu@free.fr>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e19b918d79f3110692e294c482df85df9df08b30
Merge: ceeb2f7... e75276a...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Feb 8 20:02:13 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit ceeb2f7790c1e250c3a5e78fe39d573054016822
Author: svrmgrl@gmx.net <svrmgrl@gmx.net>
Date:   Tue Feb 8 20:00:02 2005 +0100

    input: Add a new ID to the Logitech ForceFeedback joystick driver.
    
    From: Rainer KÃ¼mmerle <svrmgrl@gmx.net>
    Acked-by: Johann Deneux <johann.deneux@it.uu.se>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8b0774e37b7218669f95f73acb8c7236fb7bcf1d
Author: hal@realmsys.com <hal@realmsys.com>
Date:   Tue Feb 8 19:53:43 2005 +0100

    input: Fix range checks for the HIDIOC[GS]USAGES ioctl() to allow
           reading full number of bytes.
    
    From: Hal Tolley <hal@realmsys.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 3325d95e9d6ea456b4c7a62cf7b065f38e3ecd47
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Feb 8 19:37:12 2005 +0100

    input: Move #include <linux/interrupt.h> inside #ifdef __KERNEL__
           in serio.h, to make it userspace-compilable.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 53b212368ef98ccdba811c35ab9f59bfb13bb2c4
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Feb 8 19:35:59 2005 +0100

    input: Change touchscreen drivers NOT to rescale their values
           to a 4:3 shape.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2f5f5b04475716c60e9e65cc8bf6bee75864b917
Merge: 8cd4e29... 2681516...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Feb 8 18:05:23 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit d17516724fcbbbae448b6f06f3be9ff38f934555
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Feb 8 04:26:38 2005 -0800

    [IPSEC]: Stop using dst->xfrm
    
    Here is a precursor to the xfrm dst consolidation that I talked about.
    In order to be able to store multiple SAs in one dst, we need to stop
    using dst->xfrm directly.
    
    The following patch does that for the ->output() functions.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65cc34b758a6d57a66e197e55d2464df70f27255
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Feb 8 04:17:48 2005 -0800

    Resolve ATM conflicts.

commit b44fe8ef1a38591c2d1b85726ca93d6bed0ffa0d
Merge: bb41d2f... b5cd338...
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Feb 8 04:13:46 2005 -0800

    Resolve ATM conflicts.

commit bb41d2ff99ab1c37d8bff8615b59bf0d51e2e43b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Feb 8 04:06:58 2005 -0800

    [IPV6]: match TCP port selection behavior with ipv4
    
    This patch makes TCP over IPV6 select ports the same way the current
    TCPv4 code does. It uses a hash function to provide a starting offset
    and a free running counter to provide seed.
    
    This changes the port selection semantics to match TCPv4 as well.
    If the port is in use but to a different remote address, it will get
    reused. It looks like the TCPv6 code was not updated when the TCPv4
    code changed. Now the code in ipv4/tcp_ipv4.c and ipv6/tcp_ipv6.c are
    almost identical for tcp_hash_connect.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9a5a93e34e3b9f7b8bc0d06b723ff6fc02778dd2
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Feb 8 04:02:47 2005 -0800

    [NET]: Remove protocol specific hacks in skb_ip_make_writable()
    
    These cause more trouble than anything else.  In fact these
    silly checks keep the ipt action from working with targets
    that mangle the data area.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cd4e292274743e95b73ae9524f538c38efee528
Author: Stuart Hayes <stuart_hayes@dell.com>
Date:   Tue Feb 8 12:27:30 2005 +0100

    input: A Chicony keyboard doesn't like get_report on its non-exisiting
           PS/2 mouse interface. Add to HID blacklist.
    
    From: Stuart Hayes <stuart_hayes@dell.com>
    Seen-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 23f99b4eb43c043d0640c01ea3e40c56927e18c1
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Feb 8 12:20:19 2005 +0100

    input: On some architectures the atomic ops return `long'. Fix
           a printk() in serio.c to take that into account.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 999341a78b2a7604f6098865ad63184b818d902d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Feb 8 12:18:37 2005 +0100

    Input: make sure that all instances of ns558 are released
           upon module unload.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 90324bfd80dd860a51d520983242e1037dee101f
Author: Peter Nelson <rufus-kernel@hackish.org>
Date:   Tue Feb 8 10:53:09 2005 +0100

    input: For now, a bug in the PSX controllers support in gamecon prevents
    hot-swapping of such controllers. If a controllers is removed then all
    the controllers stop working and cpu usage gets high. The attached patch
    (against 2.6.11-rc3) corrects this bug by checking the information read
    from the controller. If the message length is bigger than the maximum
    possible, then it means the controller is not there and therefore this
    value should be discarded.
    
    Note that this is a re-send of a previous patch now that the patch of
    Peter (which had to be applied before this one) has been intregrated in
    the vanilla kernel. It's Peter's version modified to apply cleanly
    against 2.6.11-rc3 plus a fix in the comment.
    
    Signed-off-by: Peter Nelson <rufus-kernel@hackish.org>
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>

commit cddd1103ebf8c28900c0bcf007e247b120422fee
Merge: 1a318ea... e75276a...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Feb 7 20:50:11 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit d7e411319a4602d11cab09c4407b46dbe56d7cc5
Author: Brian King <brking@us.ibm.com>
Date:   Mon Feb 7 20:23:18 2005 -0800

    [PATCH] PCI: Dynids - passing driver data
    
    Currently, code exists in the pci layer to allow userspace to specify
    driver data when adding a pci dynamic id from sysfs. However, this data
    is never used and there exists no way in the existing code to use it.
    This patch allows device drivers to indicate that they want driver data
    passed to them on dynamic id adds by initializing use_driver_data in their
    pci_driver->pci_dynids struct. The documentation has also been updated
    to reflect this.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1de0164ad5e64f6600ca25db6071c8d2d3f15019
Author: Mark F. Haigh <mark.haigh@spirentcom.com>
Date:   Mon Feb 7 20:22:53 2005 -0800

    [PATCH] arch/i386/kernel/pci/irq.c:  Wrong message output
    
    The following has been reported in the wild for kernel 2.6.8-24:
    
    PCI: Enabling device 0000:00:05.0 (0000 -> 0002)
    PCI: No IRQ known for interrupt pin @ of device 0000:00:05.0. Probably
    buggy MP table.
    
    It should read "No IRQ known for interrupt pin A", but the 'pin'
    variable has already been decremented (from 1 to 0), so the line:
    
    printk(KERN_WARNING "PCI: No IRQ known for interrupt pin %c of device
    %s.%s\n", 'A' + pin - 1, dev->slot_name, msg);
    
    causes "pin @" to be output, because 'A' + 0 - 1 == '@'.
    
    The supplied patch should fix it.  It also removes a redundant check for
    a nonzero pin.
    
    Signed-off-by: Mark F. Haigh  <Mark.Haigh@spirentcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 27a98d0004e0b351a27d30d3d0f63bd6be514d94
Merge: ff70344... 1a70252...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Mon Feb 7 16:32:47 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit 6a6bfca17711b399177fd042145f5eddd59bdae2
Author: Mikkel Krautz <krautz@gmail.com>
Date:   Mon Feb 7 23:13:22 2005 +0100

    input: Make the polling interval for mice a configurable parameter
           of the HID driver. This is useful when a faster response
           from a mouse is beneficial, ie games.
    
    Signed-off-by: Mikkel Krautz <krautz@gmail.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit b21ed8e4cd5cee9e94cbda33055b97aa35092d83
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Mon Feb 7 22:46:26 2005 +0100

    input: Fix i8042 PnP printk()'s and pnp_driver name.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 7490ff874de4bc5e2f19d4dce4bf4e5327877db5
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Mon Feb 7 21:00:24 2005 +0100

    input: Now that ACPIPnP is available, replace ACPI probing in i8042
           with PnP probing.
    
    From: Matthieu Castet <castet.matthieu@free.fr>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2c96fa6a82fbc76f9dc9bb83fd128ba45b112fcc
Author: duraid@octopus.com.au <duraid@octopus.com.au>
Date:   Mon Feb 7 20:32:36 2005 +0100

    input: Properly set input.phys in Griffin Powermate driver.
    
    From: Duraid Madina <duraid@octopus.com.au>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 57d3c4ad54d61841b4c8c5b650901d9849f47193
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Mon Feb 7 20:30:35 2005 +0100

    input: Do a kill_fasync() in input handlers on device disconnect
           to notify a client using poll() that the device is gone.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 5789fe10f0e491a89ea2c30fd2a038f81012f899
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Feb 7 15:09:39 2005 +0100

    Input: fix compie error in twidjoy.c
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 741db7a8e66ef855cc33f6609b26378f8876cfa0
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 7 12:53:26 2005 +0100

    input: This patch fixes an oops in ns558 when no ports are found and
    at the same time the driver gets registered with the PnP subsystem.
    Since there is no need for port->type struct member, it removes it.
    Patch based on a patch from Matthieu Castet <castet.matthieu@free.fr>
    and Adam Belay <ambx1@neo.rr.com>
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8e9e2d1cfcb0a3b585a089da4e278a11d8fce6b7
Merge: 124d91c... 72aa1a6...
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Feb 7 11:45:39 2005 +0100

    Merge suse.cz:/home/vojtech/bk/linus into suse.cz:/home/vojtech/bk/input

commit 8d79a5154ce614249c9a624138e2bd8b463c2c87
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Feb 7 00:21:16 2005 -0800

    [PATCH] PCI: pci_raw_ops should use unsigned args
    
    Convert pci_raw_ops to use unsigned segment (aka domain),
    bus, and devfn.  With the previous code, various ia64 config
    accesses fail due to segment sign-extension problems.
    
    ia64:
        - With a signed seg >= 0x8, unwanted sign-extension occurs when
          "seg << 28" is cast to u64 in PCI_SAL_EXT_ADDRESS()
        - PCI_SAL_EXT_ADDRESS(): cast to u64 *before* shifting; otherwise
          "seg << 28" is evaluated as unsigned int (32 bits) and gets
          truncated when seg > 0xf
        - pci_sal_read(): validate "value" ptr as other arches do
        - pci_sal_{read,write}(): return -EINVAL rather than SAL error status
    
     arch/i386/pci/direct.c     |   12 ++++++----
     arch/i386/pci/mmconfig.c   |    6 +++--
     arch/i386/pci/numa.c       |    6 +++--
     arch/i386/pci/pcbios.c     |    6 +++--
     arch/ia64/pci/pci.c        |   53 ++++++++++++++++++---------------------------
     arch/x86_64/pci/mmconfig.c |    8 ++++--
     include/linux/pci.h        |    6 +++--
     7 files changed, 51 insertions(+), 46 deletions(-)
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bf100d09021f9cc836f53cc8db73c72070845891
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Feb 7 00:20:50 2005 -0800

    [PATCH] PCI: NUMA-Q PCI config access arg validation
    
    Fix NUMA-Q PCI config access bus validation.  "bus" indexes
    into BUS2QUAD, which is mp_bus_id_to_node[MAX_MP_BUSSES].
    
    This depends on the "pci_raw_ops should use unsigned args"
    patch I posted earlier today (no functional dependency; it
    just happens to be very close textually).
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Martin J. Bligh <mbligh@aracnet.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ccdbbcb3b2821c929b9e571f52c4a77f257e0f93
Author: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
Date:   Mon Feb 7 00:20:26 2005 -0800

    [PATCH] PCI: fix pci_remove_legacy_files() crash
    
    The legacy_io which is the member of pci_bus struct might be
    NULL. It should be checked.
    
    This patch checks 'b->legacy_io', NULL or not.
    
    Signed-off-by: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
    Acked-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c5ff533d2618c3c26242551e2a9957763f126e2c
Merge: f9f6ccc... edffd6d...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Feb 7 02:20:33 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit b238064dcaf7592f74ac64c214b51071471b8f19
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sun Feb 6 22:38:32 2005 -0800

    [PATCH] PCI: Make pci_claim_resource __devinit
    
    ia64 calls pci_claim_resource() from pcibios_fixup_bus(), which is
    __devinit, so pci_claim_resource() needs to be __devinit too.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 223c286758da50d1e1b237b9078e785bb3be92b0
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sun Feb 6 22:38:06 2005 -0800

    [PATCH] PCI: pci_proc_domain
    
    There's no need for the architectures to know how to name busses,
    so replace pci_name_bus with pci_proc_domain -- a predicate to allow
    architectures to choose whether domains are included in /proc/bus/pci
    or not.  I've converted all architectures but only tested ia64 and a
    CONFIG_PCI_DOMAINS=n build.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ddcbcef27656efd20a7d542fe059312e940310d
Author: Rolf Eike Beer <eike-hotplug@sf-tec.de>
Date:   Sun Feb 6 22:37:42 2005 -0800

    [PATCH] PCI Hotplug: Remove unneeded instructions from ibmphp_pci.c
    
    this patch removes some unneeded code from ibmphp_pci.c. First I thought it
    is a bug and the second line should have been "sec_no = (int) sec_number".
    But than I found exactly the same read only 9 lines higher and after it the
    line I expected the second one to be. Between the 2 pci_bus_read_config_byte's
    are only some checks so I don't expect them to return different results. And
    sec_no is and int so removing this wont change anything at all.
    
    
    Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c6423658c9c50f9dda5f42f33735b458fafbfc62
Author: Dave Jones <davej@redhat.com>
Date:   Sun Feb 6 22:37:01 2005 -0800

    [PATCH] Remove pci_dev->slot_name
    
    This is a pointer to dev.bus_id, which is properly accessed through the
    pci_name() function.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f80f8ec253c65c7d5dcad243198a3540c405c7d5
Author: Dave Jones <davej@redhat.com>
Date:   Sun Feb 6 22:36:14 2005 -0800

    [PATCH] convert pci_dev->slot_name usage to pci_name()
    
    Prepare for removal of pci_dev->slot_name
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a318eabca2b336f8caffc84ebbeaa08f55de41e
Merge: edffd6d... 3b81449...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Feb 6 17:45:18 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 124d91c87bb40295ea1ec155d739e3bc13acbb5a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 6 22:56:49 2005 +0100

    input: This patch removes the bouncing email address of Victor Krapivin from
    MODULE_AUTHOR.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 3010c81136345893d36d3ad9589ca85fd69a59d5
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Feb 6 22:47:57 2005 +0100

    input: ere's a patch that removes a few pointless comparisons; "scancode" is
    unsigned so it can never be <0 which makes the test pointless.
    Also, there are a few instances where signed and unsigned variables are
    comared, and as far as I can tell they really should just all be unsigned.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2105c4f61cdb892ec987fe2b4355e5a626699e28
Author: pingc@wacom.com <pingc@wacom.com>
Date:   Sun Feb 6 22:19:36 2005 +0100

    input: This patch adds support for a Wacom new tablet, Intuos3, and its associated
    tools.
    
    From: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 278c7a9f4902f3914130d7411fb8aead5ec5d27a
Merge: 308fc6d... b423289...
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 22:09:33 2005 +0100

    Merge silver.ucw.cz:/home/vojtech/bk/linus
    into silver.ucw.cz:/home/vojtech/bk/input

commit 308fc6d0f282796b871cbafe25b8ecd25dfaa31b
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 21:56:01 2005 +0100

    input: Fix ExplorerPS/2 wheel emulation for wheel events > 8 ticks.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e393b84ba52775c2c5cb5ba703918c995ab9e02f
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 21:49:20 2005 +0100

    input: Typo fix in parkbd.c comment
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit b5d08e1774e269b89ad3b1a26928ac4dbd2128a5
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 20:04:33 2005 +0100

    input: Document the adapter schematic needed for parkbd.c, right
           in the source.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2d648d2852ecb890551aa51c6a9a78f005d7b9a3
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Sun Feb 6 17:55:16 2005 +0100

    I have a buggy USB HID device (APC SmartUPS) in which the designers
    forgot that ReportCount is a global item. Consequently, according to the
    report descriptor, several reports have multiple copies of the same
    usage in each field. When you actually query the device, however, only a
    single copy of the usage is returned. hid-core catches the expected vs.
    actual length mismatch and fails the transfer. This effectively makes
    the buggy reports inaccessible even though enough data is present to
    populate one usage (which is all userspace wants anyway).
    
    This patch changes hid-core to only warn (if debug is enabled) on such
    reports rather than failing the transfer.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0d1c24249819af08e3f1681132126058484b8c1e
Author: cl81@gmx.net <cl81@gmx.net>
Date:   Sun Feb 6 17:46:02 2005 +0100

    input: Typo fix in atkbd.c comment
    
    From: Christian Ludwig <cl81@gmx.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8ea0d85ca18a2e932bfc6862488d96b124ba5a5a
Author: Helge Deller <deller@gmx.de>
Date:   Sun Feb 6 16:34:19 2005 +0100

    input: HP HIL support (from PARISC Linux tree).
    
    From: Helge Deller <deller@gmx.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 388e6f0d368126b2bb746d6040891c6112968675
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 15:58:37 2005 +0100

    input: Fix poll() behavior of input handlers on disconnect.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 113fc8b33463b62ff338beb3c79b2d37547c006c
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 13:18:28 2005 +0100

    input: Add MCC devices to HID blacklist, cleanup whitespace along
           the way.
    
    From: Mark Glines <mark-pmd@glines.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 1dcb0e66052349c680c2e4e8c8d12e099e0ebc25
Merge: e81d036... 1581782...
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 12:34:03 2005 +0100

    Merge silver.ucw.cz:/home/vojtech/bk/linus
    into silver.ucw.cz:/home/vojtech/bk/input

commit e81d036a66e145ea94f0763af9ecdc09a98f649d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Feb 6 12:15:36 2005 +0100

    Input: add resume method to serio bus so ports are properly
           set up at resume time. Remove calls to serio_reconnect
           from i8042 as they should now be reconnected in course
           of regular resume process.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit bb2741a384bf45e58bf38bd86236a3d88126aeea
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Sun Feb 6 12:13:52 2005 +0100

    input: New driver for ICS MicroClock MK712 TouchScreens.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit cf81d0bdef7adcfff440192c656e193157e13de0
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 5 22:08:22 2005 +0100

    input: Add support for Sharp SL-C7xx touchscreen (Corgi).
    
    From: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 020684ab9534d093bac27ec7706a0702ca8dcae6
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 5 22:06:12 2005 +0100

    input: Add support for Sharp Zaurus SL-C7cc Corgi keyboards.
    
    From: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e16d7fc378c5db4e061146f2b369b55304f7c908
Merge: 2093d53... e284f9a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Feb 5 13:12:30 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/libata-dev/remove-one-fix

commit e284f9aae1248e7de770b34ec3a71079e955e17a
Author: Adam J. Richter <adam@yggdrasil.com>
Date:   Sat Feb 5 13:08:09 2005 -0500

    [PATCH] ata_pci_remove_one used freed memory
    
    	Attempting to unload a serial ATA driver module gave me a kernel
    memory fault.  I think this problem occurs in all configurations, but
    I should mention that my configuration may be slightly unusual in that
    I configured my BIOS not to do IDE emulation with SATA disks, and I don't
    actually have any disks plugged in.
    
    	The problem was that ata_pci_remove_one would call
    scsi_host_put(ap->host), which would free the memory used to hold
    host_set->ports, but host_set->ports was used later in ata_pci_remove_one.
    
    	So, the following patch reorders some of the steps in
    ata_pci_remove_one and seems to eliminate the problem, at least to
    the extent that I can unload and reload the module, although I do not
    have a SATA disk handy for testing (I'm expecting one to arrive later
    today).
    
    	The patch actually makes the code four lines shorter, although
    two of those lines come from putting an assignement and variable
    declaration in the same line.  Since the patch is a little hard to
    read, here is a description of the edit steps.
    
    	1. Moved pci_release_regions() to toward the end of the routine
    to facilitate merging the loops before and after it.  Also, I think that
    calls that are good candidates for consolidating into the bus-level code
    in the future (instead of individual drivers) are best put at the beginning
    or end of the driver routines so that it is clearer if there would be
    problems doing such consolidation.
    
    	2. Moved the cacluation of ioaddr into the only if-branch that
    uses it.
    
    	3. Moved the call to scsi_host_put to after the code that
    checks ATA_FLAG_NO_LEGACY.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3b55b4780919ab1aef57315298eac809839d284b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Feb 5 15:25:50 2005 +0100

    Input: make serio drivers register asynchronously. This should
           speed up boot process as some drivers take a long time
           probing for supported devices.
    
           Also change __inline__ to inline in serio.h
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit eb931a5feea0af9565c75c245fd015b967658f02
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 5 09:23:23 2005 +0100

    input: This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 150b9045485d24d2ad4baff1c82e13be52c139cc
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 22:06:07 2005 +0100

    input: Only parse a "z == 127" packet as a relative Dualpoint stick
    packet if the touchpad actually is a Dualpoint device.  The Glidepoint
    modelsdon't have a stick, and can report z == 127 for a very wide finger.
    If such a packet is parsed as a stick packet, the mouse pointer will
    typically jump to one corner of the screen.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 7587418fa29935ff05321e8db6c287868a81aae7
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 22:04:21 2005 +0100

    input: When hardware tapping is disabled on an ALPS touchpad, the touchpad
    generates exactly the same data for a single tap and a fast double
    tap.  The effect is that the second tap in the double tap sequence is
    lost.
    
    To fix this problem, this patch enables hardware tapping and converts
    the resulting tap and gesture bits to standard finger pressure values
    (z), which is what mousedev.c and the userspace X driver expects.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit ed80e00612eca2de5ba89ea0facd7e7d5e448354
Merge: b117810... 85714da...
Author: Vojtech Pavlik <vojtech@silver.ucw.cz>
Date:   Fri Feb 4 21:41:44 2005 +0100

    Merge silver.ucw.cz:/home/vojtech/bk/linus
    into silver.ucw.cz:/home/vojtech/bk/input

commit b117810dda019ef5f721db69c941ef394dd51bbd
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Feb 4 17:41:37 2005 +0100

    input: Cleanup the Kconfig menus for the input subsystem.
    
    From: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 4b3cd06899f31ab20c64a4b04dd56908105f558f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 4 17:35:12 2005 +0100

    input: Add support for the Logitech MX1000 mouse in PS/2 mode.

commit 927484d0db5a51b16124e289ddb1e72936850cd0
Author: gijoe@poczta.onet.pl <gijoe@poczta.onet.pl>
Date:   Fri Feb 4 16:35:55 2005 +0100

    input: Add support for Logitech MX300 mouse in PS/2 mode.
    
    From: Daniel Johnson <gijoe@poczta.onet.pl>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 77f2e8e79c6a27066d850dde3d2eb53b6b674f22
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 16:25:26 2005 +0100

    input: Correct Y axis range for ALPS touchpads.
    
    From: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 55736917aae99f68d68cb0156792a10147bd5ab2
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 16:23:40 2005 +0100

    input: Here it is, with the suggestions from Pete and Dmitry included. The
    patch does the following:
    
    * Compensates for the lack of floating point arithmetic by keeping
      track of remainders from the integer divisions.
    * Removes the xres/yres scaling so that you get the same speed in the
      X and Y directions even if your screen does not the same aspect ratio
      as your touchpad.
    * Sets scale factors to make the speed for synaptics and alps equal to
      each other and equal to the synaptics speed from 2.6.10.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 5d152e020eb7b4ec67ab600c477d627de9eceb9d
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 16:20:48 2005 +0100

    input: Some Synaptics touchpads have a middle mouse button that also works
    as a scroll wheel.  Scroll data is reported as packets with w == 2 and
    the scroll amount in byte 1, treated as a signed character.  For some
    reason, the smallest possible wheel movement is reported as a scroll
    amount of 4 units.  This amount is typically spread out over more than
    one packet, so the driver has to accumulate scroll delta values to
    correctly deal with this.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 15defbedb6d13e673bc36e6885235b6b9283967d
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri Feb 4 16:16:34 2005 +0100

    input: mousedev_packet() incorrectly clears list->ready when called with
    "tail == head - 1".  The effect is that the last mouse event from the
    hardware isn't reported to user space until another hardware mouse
    event arrives.  This can make the left mouse button get stuck when
    tapping on a touchpad.  When this happens, the button doesn't unstick
    until the next time you interact with the touchpad.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit a47a9f934c89e3be5a221c595d062e0ce1d4304c
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Fri Feb 4 16:13:08 2005 +0100

    input: joydump_connect: reduce stack usage from 2048 to 44 bytes (on i386)
    by allocating 'buf' dynamically;
            struct joydump buf[BUF_SIZE]; // 2048 bytes
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 72457fd43538d03738b7d5bc4892fb396da00941
Author: Micah Dowty <micah@navi.cx>
Date:   Fri Feb 4 16:09:42 2005 +0100

    input: This patch adds support to uinput for Linux's force feedback interface.
           With these changes, it's possible to write drivers for force feedback
           joysticks and similar devices in userspace.  It also adds a way to set the
           physical path of devices created via uinput, and it has a couple trivial
           bugfixes.
    
    Signed-off-by: Micah Dowty <micah@navi.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit acb5033c11f402b4cebe9139717f6c6db1b53b10
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Fri Feb 4 16:06:43 2005 +0100

    input: Don't even try to reset the i8042 controller when it's not
           willing to talk to us at all - it's probably not there.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 29a1cbe4d09fb31217bb23d169594fe59f775236
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Fri Feb 4 15:49:36 2005 +0100

    Input: i8042 - call i8042_platform_exit to release resources
           acquired by i8042_platform_init when controller
           initialization fails.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit af83e659695ade7efd883b2591e88d7df3ee425e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Feb 4 15:47:18 2005 +0100

    Input: Make some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 252d98b40726679b4277cd414b63431d79488f32
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:44:14 2005 +0100

    Input: serio - export id.type, id.proto, id.id and id.extra as
           sysfs attributes to assist hotplug scripts in recovering
           lost boot-time serio hotplug events.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit d60fb3011f89f4ce2d2da6d056ed20478ec99dd0
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:43:30 2005 +0100

    Input: i8042 - fix 'noloop' module parameter description
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 65b415040699a905b183c31f9f9347d6fa5647c0
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:42:32 2005 +0100

    Input: make serio's connect routines return error code
           instead of void.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8fb4953844b4857314a430264c0f4a2996956643
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:40:52 2005 +0100

    Input: make serio implementation more in line with standard
           driver model implementations. serio_register_port is
           always asynchronous to allow freely registering child
           ports. When deregistering serio core still takes care
           of destroying children ports first.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit e122050fef4216632a43bf6ebcaa44c3ad6b07cf
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:39:25 2005 +0100

    Input: replace serio's type field with serio_id structure and
           add id_table to serio drivers to split initial matching
           and probing routines for better sysfs integration and
           to assist hotplug scripts in loading proper drivers.
           Add serio_hotplug to notify userspace about new ports.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 8f9ba920e5efff59cff044749a6cae9748f8b6f8
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:36:53 2005 +0100

    Input: remove serio->private in favor of using driver-specific data
           in device structure, add serio_get_drvdata/serio_put_drvdata
           to access it.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2e3443813d6f52fb887d9effa16f3e3dff87bb33
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:33:07 2005 +0100

    Input: use msecs_to_jiffies instead of manually calculating
           delay for Toshiba bouncing keys workaround to the code
           works with HZ != 1000.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 9acd2bb562b5248770e7d4118b2131f4fb5aa5fb
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:24:54 2005 +0100

    Input: use msecs_to_jiffies instead of homegrown ms_to_jiffies
           when setting timer for autorepeat handling. This will
           make sure that autorepeat is scheduled correctly when
           HZ != 1000.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 5013aa40907fab90457832e91b07475cbb5011b4
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:22:01 2005 +0100

    Input: twidjoy - apparently Kconfig and Makefile disagreed on the
           name for config option so the module was never built.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 421c7accd551ee74a4cf14c0212d124570020c53
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:18:43 2005 +0100

    Input: synaptics - use DMI to detect Toshiba Satellite notebooks
           and automatically reduce touchpad reporting rate to 40 pps
           as they have trouble handling high rate (80 pps).
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 90473a62613815c4e1de71555930c265057cdddf
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:17:07 2005 +0100

    Input: evdev - return -EINVAL from evdev_read if read buffer
           is too small.
    
           Based on a patch by James Lamanna.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0341da949673abde8dffa9644124510b7a633212
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:14:06 2005 +0100

    Input: rearrange serio event processing to get rid of duplicate
           events - do not sumbit event into the event queue if similar
           event has not been processed yet; also once event has been
           processed check the queue and delete events of the same type
           that have been accumulated in the mean time.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 66ae6ac6b8f2317078de7f52adbc7bbee4265c5b
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 15:08:36 2005 +0100

    Input: i8042 - make use of new serio start() and stop() callbacks
           to ensure that i8042 interrupt handler that is shared among
           several ports does not reference deleted ports. Also rename
           i8042_valies structure to i8042_port, consolidate handling
           of KBD, AUX and MUX ports, rearrange interrupt handler code.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0769514a30709e2eb44b3dff8cc476dfa28a07b3
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 14:57:11 2005 +0100

    Input: add serio->start() and serio->stop() callback methods that
           are called whenever serio port is finishes being registered
           or unregistered. The callbacks are useful for drivers that
           share interrupt between several ports and there is a danger
           that interrupt handler will reference port that was just
           unregistered.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 0416dfc6045f5339a843f88b7fff2cee1414a9fc
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Fri Feb 4 14:55:58 2005 +0100

    Input: i8042 - move panicblink with the rest of module parameters,
           add proper entry to kernel-parameters.txt
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit f9f6ccc943be88d043e9cf67a3397e757b959c09
Merge: 85714da... b55d7a9...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Fri Feb 4 04:49:20 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit f4d5eadedc77a565b8f4a726db47adbdf9223a9b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Feb 3 21:12:34 2005 -0600

    [PATCH] SCSI sim710.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 22369b82359c2e11e05077e8573e77e75f7e3ef0
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Thu Feb 3 10:08:04 2005 -0600

    SCSI: fix io statistics compile warnings
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1e076baeca6e94f633748b663c9ba7c0955555da
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Thu Feb 3 09:37:56 2005 -0600

    SCSI: Add device io statistics
    
    From: 	James.Smart@Emulex.Com
    
    Adds io statistics (requests, completions, error count) as generic
    attributes for scsi devices.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 82a8a98e45f1876c29356c8e8b35be760d61cbf4
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Feb 3 09:29:59 2005 -0600

    [PATCH] drop some attibutes from the FC transport class
    
    I think the hardware_version, firmware_version, rom_version and
    driver_version don't belong to the FC transport class, there's
    nothing specific to FC or even SCSI specific in them.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a5f2c3c4f525efdc0b3ce8f8487d0b356343d544
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Thu Feb 3 08:51:38 2005 -0600

    SCSI: fix compat_ioctl compile warnings
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7e8c19ef447358a8b5256b937814edd2d07de9da
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Thu Feb 3 08:01:17 2005 -0600

    mptfusion: delete watchdogs timers from mptctl and mptscsih
    
    From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
    
    1) mptscsih.c: I have changed task management
    requests so they complete in same thread before returning
    to os.  I removed the TMtimer code.
    
    (2) mptctl.c: I have deleted both TMtimer and timer code. Replaced
    with wait_event_interruptible_timeout.  So commands are now
    completed in same thread.
    
    (3) mptctl_do_fw_download - nasty polling of global parameters
    that are set in contents of interrupt handler(mptctl_reply), now using
    wait_event_interruptible_timeout.
    
    (4) I have cleaned up mptctl_reply.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 71db3852c3fa75daf6bc51ec397a0e54f4871837
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 07:49:11 2005 -0600

    [PATCH] Add compat_ioctl to mptctl
    
    Convert mptctl to compat_ioctl. I also changed it to unlocked_ioctl
    while I was on it.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 21062f4c007c74d688369801bbb27c142fa6c26c
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 07:38:47 2005 -0600

    [PATCH] Convert megaraid2 to compat_ioctl
    
    Convert megaraid2 driver to new compat_ioctl entry points.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 05bb8b5f4bb413093d1076db862bf63604059c57
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 07:27:13 2005 -0600

    [PATCH] Add compat_ioctl to SG
    
    Add compat_ioctl to SG driver
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 037f81dc52f9d727a4f04eba019c8bb4c6a8b079
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 07:17:33 2005 -0600

    [PATCH] Convert aacraid to compat_ioctl
    
    Convert aacraid driver to the compat_ioctl entry points.
    
    I don't have hardware, so this is only compile tested, but I just
    did some transformations on the existing code.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e09b75d20fce89188a6ffd7326823db5518254c4
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 06:56:42 2005 -0600

    [PATCH] Add compat_ioctl to osst
    
    Add compat_ioctl to osst
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4285f4de8bcb6ea0a1806b1d96a0f4516a22d4d7
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 06:52:01 2005 -0600

    [PATCH] Add comment for compat_ioctl to SR
    
    Add comment that SR doesn't support compat_ioctl (because it doesn't
    pass down any driver ioctls right now)
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fd442c5e955dbd7703749fbb73c926ddefd8c1f1
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 06:47:23 2005 -0600

    [PATCH] Add compat_ioctl to st
    
    Call new compat_ioctl host vector from tape driver
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 26c2f3532b21a5f284b47df5f9b37c8a4d649823
Author: Andi Kleen <ak@muc.de>
Date:   Thu Feb 3 06:33:31 2005 -0600

    [PATCH] Add compat_ioctl to SD
    
    Add compat_ioctl entry point to SD
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b55d7a927f6ba189a161efab155c84f6072289b1
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 3 04:17:57 2005 -0500

    Re-added Ben Collins to 1394.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit d916f5dbce22e687288622e1a31d07fb360fdb62
Merge: c581cb6... 409c2be...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Thu Feb 3 03:32:52 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit ff70344397160992b20a72ad48d7b3e1db28fae8
Merge: 138a18f... f002ad3...
Author: Dave Kleikamp <jfs.adm@bkbits.net>
Date:   Wed Feb 2 18:21:54 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/j/jfs/linux-2.5

commit a0e1b007dd53c2e106c4a671514859c1766aff27
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Wed Feb 2 22:50:41 2005 +0100

    prismtech: Avoid recompile when changing compile dir
    
    -I$(PWD) is superflous - and caused absolute path to be stored in build command - this
    casuses recompile when using symlink to kernel.
    Also deleted commented out -DCONFIG_PRISM_WDS. CONFIG_PRISM_WDS are not present in
    any of the source files.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f173ee0514a7a774e9dca16d5cb05e280f94d308
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Wed Feb 2 22:30:19 2005 +0100

    kbuild: Fix debugging leftover
    
    So now check for commandline options actually works again.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 36c20d250f46268b0f171f25c8f6a9d4763147af
Author: lkml@einar-lueck.de <lkml@einar-lueck.de>
Date:   Wed Feb 2 00:50:23 2005 -0800

    [IPV4]: Splitting of ip_route_{in,out}put_slow().
    
    From: Einar Lueck <lkml@einar-lueck.de>
    
    This patch splits up ip_route_[in|out]put_slow in inlined functions.
    Basic idea:
    * improve overall comprehensibility
    * allow for an easier application of patch for improved multipath
      support
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 409c2be4cb887854569f794fc53070396331ead5
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Wed Feb 2 03:33:22 2005 -0500

    1394 uses skbs, so select NET.

commit 52433c9bfd2d6ea428179c8d261803df1ab31f90
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Feb 1 14:37:41 2005 -0500

    [PATCH] use datacs in smc91x driver
    
    From: Ian Campbell <icampbell@arcom.com>
    
    Below is a patch to support the second 32-bit DATACS chipselect in the
    smc91x driver to transfer data.  Support is enabled by adding a resource to
    the platform device named 'smc91x-data32'.
    
    My platform has a 16-bit chip select for the primary IO region and no DMA.
    I found that throughput went from roughly 50mbit/s to 80mbit/s.  I tested
    by throwing UDP packets at it using mgen (9000 packets/second with UDP
    payload of 1472 bytes is roughly 100mbit/s, I think) and counting the
    packets received in 60s, I then did the same for transmitting.  The
    measurements are very rough but the improvement seems fairly significant to
    me.
    
    Patch was compiled for lubbock and neponset and compiled and tested on my
    PXA platform.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 67b929db37d83cbeeb38190877ddc6d8a1c391dd
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Feb 1 14:37:29 2005 -0500

    [PATCH] smc91x: allow RX of VLAN packets
    
    This patch allows for VLAN packets to be received.  The initial patch
    was from Andrew de Quincey.
    
    While there, it also adds a test against an impossible hardware state
    in theory but that happened in practice where the chip returns a
    packet length of 0 which, once the status words have been substracted,
    causes the transfer of data with a negative length.  Flaky hardware is
    probably to blame here but better guard ourselves against that than
    crashing the kernel.  David Brownell was the happy victim of such hw.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7d447d85749af438ee1e4443c01255119b596cdd
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Feb 1 14:33:52 2005 -0500

    [PATCH] eepro100 kill obsolete ifdefs
    
    pci layer should provide enough dummy functions for such ugly hacks to
    be unneccessary these days. Please apply,
    
    Signed-off-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d0aa4e2b217929f4be6e3d2dfeb6e060de02708c
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Tue Feb 1 14:33:39 2005 -0500

    [PATCH] ray_cs: reduce stack usage (sockaddr)
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ea4009f3158006661f3fce4144713cf6d15958a6
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Feb 1 14:33:27 2005 -0500

    [PATCH] remove bogus exports in ppp
    
    From: Paul Mackerras <paulus@samba.org>
    
    Remove unnecessary exports from ppp_generic.c.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1c6ecedcde91f268ba302f3bbeeabfb7bda97690
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 1 14:33:15 2005 -0500

    [PATCH] remove dp83840.h
    
    dp83840.h is included once but none of the definitions it contains is
    actually used.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit eec6624e2af823b8c13c9cc0d3ed54b0bc5ba4c7
Merge: b389f38... 1be4935...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Feb 1 14:30:50 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 400706a76853b985e3f36b32f25ff17692d7ea19
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:26:35 2005 -0500

    [PATCH] Reformat DMASCC driver
    
    Feed dmascc through indent, remove the RCS $Id string.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ea1d23bb998b63a4fe358398d5cdac15170ba99b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:23:03 2005 -0500

    [PATCH] Use netdev_priv in baycom_epp driver
    
    Eleminate the last remaining instance of a direct reference to the priv
    member of struct net_device.  The paranoia check code of the same
    type that has been eleminated from many other drivers, so do this here
    also.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit feb4063e293100e7e2f3c31814ab07c4fc6c6070
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:22:51 2005 -0500

    [PATCH] Use netdev_priv in baycom_ser_fdx driver
    
    Eleminate the last remaining instance of a direct reference to the priv
    member of struct net_device.  This was debug code only, so use BUG_ON()
    instead of printk.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a74f79ff10e04383ad5affbc4b458183c4a3c1be
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:22:39 2005 -0500

    [PATCH] Use netdev_priv in hdlcdrv driver
    
    Eleminate the last remaining instance of a direct reference to the priv
    member of struct net_device.  The paranoia check code of the same
    type that has been eleminated from many other drivers, so do this here
    also.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 81903997b8be91d9943985d77196fd7cb1be13ff
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:22:27 2005 -0500

    [PATCH] Use netdev_priv in baycom_ser_hdx driver
    
    Eleminate the last remaining instance of a direct reference to the priv
    member of struct net_device.  This was debug code only, so use BUG_ON()
    instead of printk.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 69655b07b1aa029ccbe46be9b00f17039626c9cd
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:22:15 2005 -0500

    [PATCH] Use netdev_priv in baycom_par driver
    
    Eleminate the last remaining instance of a direct reference to the priv
    member of struct net_device.  This was debug code only, so use BUG_ON()
    instead of printk.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3554349e6230ad83fed544a04187a8e1135183fb
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:22:03 2005 -0500

    [PATCH] Use netdev_priv in bpqether driver
    
    Convert the bpqether driver to use netdev_priv().
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 411cc09c038ca50d735947018bb55dfa33ffe67c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:21:51 2005 -0500

    [PATCH] Use netdev_priv in mkiss driver
    
    Convert the mkiss driver to use netdev_priv().
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 257c1bb95771aa3ceecd222b5383dad011472601
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 1 14:21:39 2005 -0500

    [PATCH] Use netdev_priv in YAM driver
    
     o Convert the YAM driver to use netdev_priv().
     o If dev is valid there is no point in checking netdev_priv()'s return
       value for being NULL.
     o Fix build warning.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b783b40ffe71daecff54f62c9b262c4a9ae439bf
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Tue Feb 1 07:05:14 2005 -0500

    pcilynx.c:
      pcilynx: reduce stack usage in add_card(),
      from 800 to 308 bytes (on i386), by dynamically allocating
              struct i2c_adapter i2c_adapter;  /* 492 bytes */
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 3b814495d9abcac1351b79dab5583f95722c7a9a
Merge: b389f38... 165ff41...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Jan 31 23:51:19 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit d7107fa1d49412404ea5be4943b4a829da8d51fb
Author: tero_niemela@yahoo.com <tero_niemela@yahoo.com>
Date:   Mon Jan 31 22:44:43 2005 +0100

    [PATCH] kbuild: skip depmod if not executable
    
    I've cross-compiled Linux on i386-netbsdelf2.0 for
    arm-linux for quite some time now and everything seems
    to be working perfectly except for one minor glitch in
    the build process that halts module installation
    (needlessly, IMHO). Specifically, if System.map exists
    $(DEPMOD) is run ("for convenience" as the comment
    says in the Makefile). However, on NetBSD I don't have
    $(DEPMOD) available so the command fails and make
    exits with non-zero exit status. Please consider the
    attached patch to add a check for $(DEPMOD) so that
    missing $(DEPMOD) won't halt the whole build process.
    
    From: Tero Niemela <tero_niemela@yahoo.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f9caf7466d6be1317b3285872ca93de64fce4fab
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jan 31 22:37:03 2005 +0100

    [PATCH] kbuild: fix for i386 cross compile
    
    I used to be be able to cross compile for i386 on my x86_64 machine,
    but recently something (gcc/binutils?) changed, and it stopped working.
    
    Following patch makes cross compile work with:
    
    make ARCH=i386 CFLAGS_KERNEL="-m32" AFLAGS_KERNEL="-m32" bzImage
    
    Without the patch I'm getting the following error:
    
      SYSCALL arch/i386/kernel/vsyscall-syms.o
    /usr/lib/gcc/x86_64-pc-linux-gnu/3.4.3/../../../../x86_64-pc-linux-gnu/bin/ld:
    Relocatable linking with relocations from format elf32-i386
    (arch/i386/kernel/vsyscall-sysenter.o) to format elf64-x86-64
    (arch/i386/kernel/vsyscall-syms.o) is not supported
    collect2: ld returned 1 exit status
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c75f4aa4b180e1368c24087d4c36cd61de0d0188
Author: Paolo \'Blaisorblade\' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Jan 31 22:34:06 2005 +0100

    [PATCH] kbuild: no redundant srctree in tags file
    
    Avoid cluttering the tags/TAGS generated file with $(srctree) in the paths
    if this is not needed.
    
    This has two advantages:
    
    - Saving about 20M on the size of the resulting tags file (which are used
      currently to store the absolute path of the file names rather than the
      relative one) when KBUILD_OUTPUT is not set.
    
    - Keeping the tags file valid when the directory is renamed.
    
    No change is done for who does make tags O=..., if this is wanted (I would
    find that incommodous and non-typical for a developer, but anyway I've not
    ruined functionality in that case).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3f4f4dedee0915892132111267adf7e507f2c4c0
Author: Andi Kleen <ak@muc.de>
Date:   Mon Jan 31 22:31:59 2005 +0100

    [PATCH] kbuild: Use -Wno-pointer-sign for gcc 4.0
    
    Compiling an allyesconfig kernel straight with a gcc 4.0 snapshot
    gives nearly 10k new warnings like:
    
    warning: pointer targets in passing argument 5 of `cpuid' differ in signedness
    
    Since the sheer number of these warnings was too much even for the
    most determined kernel janitors (I actually asked ;-) and I don't
    think it's a very serious issue to have these mismatches I submitted
    an new option to gcc to disable it. It was incorporated in gcc mainline
    now.
    
    This patch makes the kernel compilation use it. There are still
    quite a lot of new warnings with 4.0 (mostly about uninitialized variables),
    but the compile log looks much nicer nnow.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 72c55a9d0d07c814e504412916ce185bd7391790
Merge: b389f38... 743d27b...
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 06:58:30 2005 -0500

    Merge modernduck.com:/usr/src/bk/linux-2.5
    into modernduck.com:/usr/src/bk/1394-2.6

commit 743d27bf35c38d9f46fd9909c242cd6ed3722045
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 06:19:48 2005 -0500

    Update ieee1394 maintainers.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 4007e4171be85ef4dbe34804edde631c4c8ca3c6
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 06:02:58 2005 -0500

    Fix PCILynx bus resets.
    
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 283f29a5d70b85764c10de313e080f94499c0edc
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 05:51:07 2005 -0500

    Dan Dennedy: change allocation to GPF_ATOMIC to fix timing issue when this
    is called from raw1394.c:arm_register().
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 994260148a69149ff07a00954b755a30225e6f23
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 05:50:09 2005 -0500

    Fix whitespace/indenting to match SVN.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 9b1a8bbc5cd5313a7be0615d13d2f34aa34ed56c
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Mon Jan 31 05:47:36 2005 -0500

    Fix revisions to match svn
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 138a18f4572db93759e1b0226f7659e7eeb974af
Merge: b389f38... 8e16979...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Sun Jan 30 22:33:56 2005 -0600

    Merge jfs@jfs.bkbits.net:linux-2.5
    into austin.ibm.com:/home/shaggy/bk/jfs-2.5

commit bba5b563d3982bddaedf811c00fa32e8f9ec3487
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Mon Jan 31 01:56:02 2005 +0100

    The wrong version of the parmtype patch was merged, incompletely, and
    the part that got merged got broken on the way.  Here are the fixes:
    
    Move __MODULE_INFO to modparam.h: This macro is used in modparam.h;
    there are users who include this header but not module.h.  The latter
    includes modparam.h already.
    
    __MODULE_INFO(parmtype, name##type, #name ":" #type) does not evaluate
    to __MODULE_INFO(parmtype, footype, "foo:int") as was the idea, but to
    __MODULE_INFO(parmtype, fooint, "foo:int") when type is bound to int.
    In more complicated cases, we get syntax erros.  Re-introduce the
    __MODULE_PARM_TYPE macro; this is cleaner than renaming the type parameter.
    
    Add the parmtype definition which was dropped during the merge to to the
    obsolete but still heavily used MODULE_PARM macro.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Sam Ravnborf <sam@ravnbrg.org>

commit 2b5cc014ceef96e182ee7ed8ccee8965d9ef70e4
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Jan 31 01:32:26 2005 +0100

    kbuild: make 'make help' show all *config targets and update descriptions slightly.
    
    "make help" doesn't show "make randconfig" nor "make config" as options
    and the description of oldconfig could be better (IMHO). Patch below adds
    the missing targets to the help and updates the description of oldconfig.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 9b73aaa7538b75ff2ea0b29dcf6e4d657dd9beec
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jan 31 01:30:19 2005 +0100

    kbuild: update scripts/namespace.pl
    
    The patch below removes some false positives I've observed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3ec7533092a44ded4d1fa5754ebe0b30ee5c2075
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jan 31 01:27:49 2005 +0100

    kallsyms: kallsyms.c - make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 018330a6622ca8b74fea82d3d976c1c1bdc3f1fc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jan 31 01:25:13 2005 +0100

    kernel/configs.c: make a variable static
    
    This patch makes a needlessly global variable static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit a929bb5e008910a228e6dcb6df44616372da6265
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:16:24 2005 -0500

    Dan Dennedy:
    
    reorganise LUN handling to resolve oops
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 772137b4b6d183f026e0e3eac947778e8e2a6974
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:15:11 2005 -0500

    Adds a disable_irm option to ieee1394.ko which disables all Isochronous
    Resource Manager functionality, useful to work around certain problems,
    e.g. iPod detection.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 130c2a5fc6c3e6e63fdf72bd3d5aecbe9c95af48
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:13:34 2005 -0500

    Dan Dennedy:
    
    bugfix for logical unit directory lun number
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 5a59204f43356f658f1a275ebcae4bb39e0fc4aa
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:10:23 2005 -0500

    Bugfix for Logical Unit Number in unit directory -- popular with multi-bay
    enclosures -- while not breaking Logical Unit Directory.
    
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 422d6acf0c6439e2f285eded6b198865e26329fb
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:08:05 2005 -0500

    Fixed removal of old partial datagrams.  Since max_partial_datagrams can
    be changed at runtime, there may be _more_ than max_partial_datagrams
    in the list.  Also removed obsolote comment.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 3fb756d850e355e654796697abb031f5a09d9502
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:06:59 2005 -0500

    dma.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit ad072b281ee49a9d28d44d0bd2b1627101a4d14d
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:05:55 2005 -0500

    Sets the sendtime of a packet _before_ adding it to pending_packet_queue,
    to prevent premature expiry (which leads to "unsolicited response packet"
    errors, among other things).
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 20cd78092dfa848128aa00d017fe5cfc218a1a9d
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:04:34 2005 -0500

    We need to update the old csr1212 cache's bus generation after a bus
    reset once we decide it is still valid.
    Closes a vmalloc leak on *every* bus reset.
    
    Signed-off-by: Jim Radford <radford@indigita.com>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 0d2094076a841de4a3d5d9de41cfb90343c182e9
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:03:20 2005 -0500

    This closes a small vmalloc leak on insmod/rmmod.
    
    Signed-off-by: Jim Radford <radford@indigita.com>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit ed5bcaf31bbfe5ceae029c315cc5f7d036f57d0a
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 15:00:27 2005 -0500

    Dan Dennedy:
    
    Ignore any return value from devfs since it is non-critical, and a
    EEXIST return prevents the module from loading!
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 5b37ee8171ac9b81d889806e0f19e015afa13ff7
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 14:58:01 2005 -0500

    Move simple class to ieee1394 core and register as
    /sys/class/ieee1394_protocol.
    Add sysfs/udev support to video1394 and dv1394 using simple class
    ieee1394_protocol.
    
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit ab9b4d79b01ef2aaf5bbcaae948e3473d5cb9b62
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 14:56:15 2005 -0500

    Cleanup with Lindent.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit aeddb0c0f1716f75bc060877daba34ac10504374
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 14:49:36 2005 -0500

    Some Lindent cleanup (most removed to its own patch by scjody)
    Adds basic sysfs support for udev etc.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 33a5b4068d76364388d1011ed2801c3ec571dd06
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 14:34:02 2005 -0500

    Change some variables and functions that were needlessly global static.
    Removes several functions that weren't used anywhere in the kernel.
    Removes many unnecessary EXPORT_SYMBOL's.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit f49f60e405d7edd618ae42c46e78b731e9598037
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 14:32:16 2005 -0500

    Fixes a bug in the channel reservation :
    If dma resources allocation fails, the channel was not freed.  I fixed
    that by marking the channel allocated after the dma resources allocation
    succeeded.  Also changed the error return value from ioctl.
    
    Signed-off-by: Philippe De Muyter <phdm@macqel.be>
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit c914a1a95d70a92556bbb90eb3895a350b6fe535
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 13:28:23 2005 -0500

    Damien Douxchamps:
    
    I have tested and updated a patch from Randy Dunlap that fixes missing
    entries in the modules.ieee1394map file. The patch is against latest SVN
    (1234).
    
    The patch adds the following entries for IIDC cameras that would not be
    detected otherwise:
    
    video1394            0x0000000c  0x000000  0x000000 0x00a02d     0x000101
    video1394            0x0000000c  0x000000  0x000000 0x00a02d     0x000102
    raw1394              0x0000000c  0x000000  0x000000 0x00a02d     0x000101
    raw1394              0x0000000c  0x000000  0x000000 0x00a02d     0x000102
    
    This is necessary because the IIDC consortium interpreted the 1394
    specifications differently. They have been summoned by the 1394TA to
    change their numbering policy so that these entries are final and will
    not grow forever in number.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 7b49acb3339449f6dd04ec66448f89169bc12232
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 13:24:06 2005 -0500

    From Stefan Richter:
    
    In trunk/ohci1394.c, duplicate code has slipped in which sets
    max_packet_size to 512 and prints a log notice. See "Serial EEPROM
    Sanity check" further down in ohci_initialize(). Since the latter code
    is more appropriate, the former is deleted by the attached patch.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 7759ec8245724d36bda162842f611be1015aedef
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 13:00:14 2005 -0500

    This patch makes sure we check the return value of copy_to_user() in
    drivers/ieee1394/raw1394.c::raw1394_read() with the added bonus of
    silencing this warning:
    include/asm/uaccess.h: In function `raw1394_read':
    drivers/ieee1394/raw1394.c:446: warning: ignoring return value of `__copy_to_user', declared with attribute warn_unused_result
    
    I've submitted this before, but never got an ACK or NACK, and the patch is
    still relevant against latest Linus bk (2.6.10-rc2-bk11 atm).
    
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 0f190ca588b52cc04fef15b2999b8c24509352fd
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 12:30:46 2005 -0500

    Olaf Hering: Fix sw-suspend issue
    
    sw-suspend does not work with our kernel.
    khpsbpkt will die because down_interruptible returns -EINTR on suspend.
    As a result, hpsb packet delivery will not work anymore after resume.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 1465803818d2226292bf16aec8a1cdcf5dda7c37
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sun Jan 30 12:11:26 2005 -0500

    Christoph Hellwig: avoid obsolete scsi APIs in sbp2
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 8d4f441550d933c090d55a02aa7d305d34e5f02e
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Sun Jan 30 12:19:16 2005 +0100

    kbuild: Dont include absolute filenames in binaries
    
    The kbuild utilities are compiled with absolute patch names, so paths
    starting with $RPM_BUILD_ROOT would end up in the binaries.  To avoid
    this, remove all references to __FILE__ (directly and indirectly via
    assert()).
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 2299d0a383144e378c667046d4b5b4a932e1ad1f
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 12:16:19 2005 +0100

    kbuild: Nicer printout when Module.symvers is missing
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 38759db6a43d1b163f11870bea68c45856015051
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Sun Jan 30 12:11:31 2005 +0100

    kbuild: Warn when building external modules without modversions
    
    This adds a warning when building external modules (M= or SUBDIRS=
    syntax) and there is no Module.symvers in the object tree. A missing
    Module.symvers is a clear sign that the kernel tree itself was never
    compiled. The resulting modules will work, but no symbol version
    information will be attached to kernel symbols the module uses (because
    that information comes from Module.symvers), and so the module will be
    more unsafe.
    Futhermore the external module will not record what other modules it is
    depended on.
    
    The test works with CONFIG_MODVERSIONS enabled or disabled.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit a29c189ee3f3213cb2010f4d6c33207f5f36a298
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 12:05:47 2005 +0100

    kbuild: add '--extra=+f' to ctags in Makefile in order to search for file names
    
    From: John Kacur <jkacur@rogers.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 308feb10f92c669a497289d6b3b9898981f86455
Author: jkacur@rogers.com <jkacur@rogers.com>
Date:   Sun Jan 30 11:59:05 2005 +0100

    kbuild: (trivial) spelling fix in comment in Makefile
    
    From: John Kacur <jkacur@rogers.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3460808d1eea62e90cbbe35a5e00af12e72c1a9f
Merge: 0ef5dd9... 0ba69ca...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 01:10:48 2005 +0100

    Merge bk://linux-sam.bkbits.net/kbuild
    into mars.ravnborg.org:/home/sam/bk/kbuild

commit 0ef5dd902d6250e325707c302aca299254395580
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 01:04:53 2005 +0100

    kbuild: default value for INSTALL_PATH set to /boot
    
    Most architectures uses /boot for there kernel image, so let this be reflected
    by the kernel.
    If INSTALL_PATH shell variable is set then this will have effect.
    If INSTALL_PATH is set one the commanline to make like this:
    make INSTALL_PATH=/nfs/boot install
    then this will override both kbuild and shell variable.
    
    If an arch prefer another default this must be set in the arch Makefile
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 8dc4434601bf236cea7f220ce162ad7969d2569e
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 00:43:35 2005 +0100

    kbuild arch/i386: make install no longer check vmlinux
    
    make install is often executed as root or on a different mechine via NFS
    To avoid updating vmlinux due to directory changes or similar the install target
    for i386 no longer has vmlinux as a prerequisite.
    Now modules_install and install are aligned in this respect.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c4df7a0366781bb9fd01a198de1f55ccb27ad9a9
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jan 30 00:34:30 2005 +0100

    kbuild: Introdude KBUILD_NOCMDDEP
    
    When tossing around with different gcc compilers there is no way to tell kbuild
    to ignore the new name of the compiler. The new option KBUILD_NOCMDDEP tell
    kbuild not to check the commandline for changes.
    This should be used with care because the resulting kernel may become inconsistent
    if one part is build with 2.96, and another part build with 3.3.4.
    So use only when you know what you are doing.
    
    Syntax:
    make KBUILD_NOCMDDEP=1
    
    Original request for this feature came from hpa.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 28a4d0aa3461c278d72a7c0ad130492ff7606daf
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jan 29 23:28:37 2005 +0100

    kbuild: Makefile.lib - small cleanup
    
    Combine duplicate code in two smaller 'functions'
    
    Signed-off-by: Sam Ravnborg

commit 36c954a0603f7f7de9a4e291d6a96af56b7d5b13
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:28:42 2005 -0500

    fix nodemgr parsing subdirectories in unit directory and tiny bugfix in
    sbp2 unit directory parsing (for PowerFile)
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 03d5f222fbf4960dbef7047e500a9187e8543fe6
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:27:50 2005 -0500

    Fix GCC 3.4 compile error with inline keyword in function prototype.
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Steve Kinneberg <kberg@linux1394.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 90cca90ddc93976dddff9769396d2b6412374ad0
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:25:53 2005 -0500

    Use wmb() to make sure things get flushed before setting the wakup bit.
    
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Submitted-by: Keith Bengston <Keith.Bengston@csiro.au>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 6cb08ca8059785fcd55813c3b5182ce63d2a70c2
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:24:28 2005 -0500

    Fix buffer overflow in csr1212.c.
    
    Signed-off-by: Steve Kinneberg <kberg@linux13294.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 8ae4054aaa4e8d8aae7da89bce415292b67bab92
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:21:50 2005 -0500

    Fix bug where 4 times Extended ROM Leaf size would be read when parsing in csr1212.  Added NULL check for csr1212_rom_cache_malloc return value.
    
    Signed-off-by: Steve Kinneberg <kberg@linux1394.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 00349acac9d12546cfb0f72063cc57294e8f8d77
Author: Jody McIntyre <scjody@modernduck.com>
Date:   Sat Jan 29 05:16:50 2005 -0500

    Fix bugs generating and parsing ConfigROMs with Extended ROM entries.
    
    Signed-off-by: Steve Kinneberg <kberg@linux1394.org>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>

commit 165ff41660e43433cdbbff6b9e4dda65cf6980d8
Merge: 842ca9a... 427621d...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Jan 28 20:21:23 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit a7d684df523337e03b51d3edf7ee6506d6d9faaf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:16:10 2005 -0500

    [PATCH] SGI Seeq updates
    
     o Support for setting the MAC address
     o Make some sort of attempt at dealing with multicast in order to support
       IPv6 etc.  The Seeq 8003 was built in the assumption nobody was ever going
       to need multicast, it seems.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 021423c7877002b75b50d4ba96c44405ac89dacd
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:15:58 2005 -0500

    [PATCH] SB1250 driver updates
    
     o Fix initialization of internal sbmac eth1
     o Clean up comments
     o Add in new module parameter handling
     o Fix printing of device name before register_netdevice
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b636101550c5f13299da8a7a95506f3ab7583f6f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:15:46 2005 -0500

    [PATCH] S2IO syntax fixes
    
    Syntactic nitpicking - C wants a space between the "include" and "<" just
    gcc happens to be tollerant.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cd536792ab94441a49dee8358db1d6ac30228db1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:15:32 2005 -0500

    [PATCH] Meth driver updates
    
    General driver updates, now approaching reliability of some definition.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f3a359de423434dd9d7014643c3a7753d933cdf3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:12:42 2005 -0500

    [PATCH] Marvell MV-64340 driver upda
    
     o Momentum Ocelot 3 also features a MV-64340
     o Momentum Jaguar ATX does not need the special casing in the driver.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1f6d24c68dd9726ea83ebef94f4e8c74eb4657bc
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:12:28 2005 -0500

    [PATCH] Jazzsonic driver updates
    
     o Resurrect the Jazz SONIC driver after years of it not having been tested
     o Convert from Space.c initialization to module_init / platform device.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 427a4804db4e131909b39ef69956305ab436e6e6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:12:15 2005 -0500

    [PATCH] IOC3 driver updates
    
     o Fix build if CONFIG_SERIAL_8250 is disabled.
     o Add support for setting the MAC address via ifconfig
     o Generally try to pretend we're a better PCI citizen than the broken piece
       of silicon that the IOC3 is actually is.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 65e8007a46f978086f4f6f2c522f85eb7735966d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:09:27 2005 -0500

    [PATCH] Remove Baget network driver
    
    Remove the support for Baget, a Russian embedded system suffering from
    bitrot for way too long.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f71914a8d76198c0eecbd7531f670d6a2706123f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jan 27 14:09:14 2005 -0500

    [PATCH] Au1000 driver updates
    
     o mii-tool support
     o MAC address memcpy fix
     o VLAN support
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7dd35f81da3d200d31e3948a519cf60adfca5e17
Author: David T. Hollis <dhollis@davehollis.com>
Date:   Thu Jan 27 07:18:18 2005 -0500

    Move MII-related constants from b44/tg3 drivers to linux/mii.h.

commit 1be4935a0a481b5557cde122da6eeaed2acf2520
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu Jan 27 07:12:02 2005 -0500

    [PATCH] prism54: use NULL for pointer
    
    Use NULL instead of 0 for pointer:
    
    drivers/net/wireless/prism54/isl_ioctl.c:1753:16: warning: Using plain integer as NULL pointer
    drivers/net/wireless/prism54/isl_ioctl.c:1753:26: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 09c16a613c2d2663147635c2975db379e12026b9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 07:07:24 2005 -0500

    [PATCH] 3c503 (iomem + isa-ectomy)
    
    	switch to ioremap() and normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit de44788424279d16d9595d95c421917b782d1fd2
Merge: c4eadeb... 47f71d3...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jan 27 07:02:19 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/viro-isa-ectomy

commit 5994284b46d079eaca2744cc7bc8d034168c5b71
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:58:32 2005 -0500

    [PATCH] ibmlana part 2 (iomem annotations and isa-ectomy)
    
    	the usual switch to ioremap and normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d2bcafa375af895c1d145ba141a1555f93908761
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:58:20 2005 -0500

    [PATCH] ibmlana part 1 (netdev_priv())
    
    	switched to netdev_priv()
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2bb500586fccd45108b7e622c41375ebfecf51bd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:55:13 2005 -0500

    [PATCH] sk_mca - iomem and isa-ectomy
    
    usual isa-ectomy and iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 28a0f7b55febebafc5424e9bd748a1c20ffb291a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:54:59 2005 -0500

    [PATCH] sk_mca - netdev_priv()
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3ec358b75b52ddfa9060faf56a2606794cb53db6
Author: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>
Date:   Thu Jan 27 06:49:13 2005 -0500

    [PATCH] Add MODULE_VERSION to the 3c515 driver
    
    Add MODULE_VERSION to the 3c515 driver.
    
    Signed-off-by: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b2f340bfa01cee9eb5ff7a26f9fbce4fd078cf80
Author: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>
Date:   Thu Jan 27 06:49:01 2005 -0500

    [PATCH] Use netdev_priv in the 3c515 driver
    
    Use netdev_priv in the 3c515 driver.
    
    Signed-off-by: Steffen Klassert <klassert@mathematik.tu-chemnitz.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 536079e93dbe96e0a8c31fb71122b75f90b2b90e
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu Jan 27 06:20:35 2005 -0500

    [PATCH] sis900: chiprev i/o cleanups
    
    Chip revision is now a member of sis_priv structure
    Kill all calls to pci_read_config_byte but one
    Change the code to use sis_priv->chipset_rev
    
    Signed-off-by: Daniele Venzano <webvenza@libero.it>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3c4c9678d4ddebe713da94ada94eee6e7b42fe80
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu Jan 27 06:20:23 2005 -0500

    [PATCH] sis900: debugging output update
    
    Add some init debugging printk
    Use netif_msg macros before printing debug messages
    
    Signed-off-by: Daniele Venzano <webvenza@libero.it>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0f101f44af4bb52f8e10a0944055757adb64fe2b
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu Jan 27 06:20:11 2005 -0500

    [PATCH] sis900 printk audit
    
    Change priority of printk where appropriate
    Remove two cryptic and useless printk
    
    Signed-off-by: Daniele Venzano <webvenza@libero.it>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1e2ee3d116d1c56d5ccc3a0c7ff584ddfbe6b2b4
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu Jan 27 06:20:00 2005 -0500

    [PATCH] sis900: version bump; remove broken URL
    
    Version bump
    Remove broken link to documentation
    
    Signed-off-by: Daniele Venzano <webvenza@libero.it>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 730bae762d6b0547065ee0f8479babcd80280789
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu Jan 27 06:19:48 2005 -0500

    [PATCH] sis900: add infrastructure needed for standard netif messages
    
    Infrastructure needed for standard netif messages
     - add msg_level to sis900_private
     - define default msg level
     - set default value for sis900_debug
    Update module parameter description
    Ethtool support for debugging output level
    
    Signed-off-by: Daniele Venzano <webvenza@libero.it>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5e03b79d8a06f35794d7c86475e9af50ac97a84d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:15:07 2005 -0500

    [PATCH] ibmtr 2/2: ibmtr annotations - the rest
    
    The rest of annotations and cleanup: ->sram_virt abuse removed, we have
    separate ->sram_phys now (not remapped) and keep ->sram_virt an iomem pointer.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 08e39f6e9e689aa623b2cb6fdab4a845f5f95d61
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 27 06:14:55 2005 -0500

    [PATCH] ibmtr 1/2: iomem annotations - trivial part
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a9f76306cc345783fa2768c9ea020446a2d80903
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jan 27 05:55:00 2005 -0500

    [PATCH] pcnet32: 79c976 with fiber optic fix
    
    After testing this patch I agree that it should be applied.  The one
    change I made was to print the device name (ethN) instead of 'pcnet32'.
    Tested ia32.
    
    From: Guido Guenther <agx@sigxcpu.org>,
          Lars Munch <lars@segv.dk>
    
    Skip PHY selection on Allied Telesyn 2701FX, it looses the link otherwise.
    Fix up the AT 2700FX as well.
    
    Signed-Off-By: Guido Guenther <agx@sigxcpu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    signed-off-by: Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4c1b396d4f79cefea45177729e7dc6d150a233b6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Jan 27 05:53:46 2005 -0500

    [PATCH] net/cosa: replace schedule_timeout() with msleep()
    
    Hi,
    
    Description: Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected. Also uses the set_current_state() macro instead of direct
    assignment in a pair of spots. I am still concerned about those sleeps, as
    TASK_INTERRUPTIBLE() is used without any checking for signals. Hence I used
    msleep() for the longer delay. Perhaps the 30 jiffy delay has not been
    updated for the larger HZ values and thus could be changed to msleep(300).
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 42c06bbf8693ea9aff3893555e89e53a34cfdb42
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Jan 27 05:53:33 2005 -0500

    [PATCH] net/airo: replace schedule_timeout() with msleep()/ssleep()
    
    Hi,
    
    Description: Use msleep()/ssleep() instead of schedule_timeout() to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f18d36c636210e076be1345e01640a6201b46301
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Jan 27 05:53:21 2005 -0500

    [PATCH] net/cs89x0: replace schedule_timeout() with msleep()
    
    Hi,
    
    Description: The existing wait is in TASK_INTERRUPTIBLE, but does not check for
    signals (especially problemtic for a 30 msec wait!) as being a cause for
    schedule_timeout()s return. Use msleep() instead, to guarantee the task delays
    as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e1cc5cdd3b35b2a5137564265697750e6eb2b058
Merge: c4eadeb... 4706059...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jan 27 05:47:48 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 41072f5bc16dce47d7ddf4e99de181d24b5c3c8b
Merge: c4eadeb... 8c14bc9...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jan 27 05:30:09 2005 -0500

    Merge bk://dfarnsworth.bkbits.net/linux-2.5-mv643xx-enet
    into pobox.com:/garz/repo/netdev-2.6/mv643xx

commit dc1c3c59a9c8bbc15f7ccb26faec1739b580089e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 27 10:20:45 2005 +0100

    [ALSA] Removed file added by mistake
    
    Removed include/sound/version.h~

commit 8c14bc96eb9628846fdf2becc9d2a77fa7826a62
Merge: 98f9485... ae506b8...
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:46:30 2005 -0700

    Merge bk://dfarnsworth@bkbits.net/linux-2.5-mv643xx-enet
    into mvista.com:/x/bk/linux-2.5-mv643xx-enet

commit ae506b83f9094ea3aac3d5da3a519799d9e57b48
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:39:09 2005 -0700

    [netdrvr mv643xx] Big rename.
    
    Change MV64340 => MV643XX and mv64340 => mv643xx
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit a0e33a3446326a9e66fc78fa4621f897251b6db8
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:37:15 2005 -0700

    [netdrvr mv643xx] Rename MV_READ => mv_read and MV_WRITE => mv_write
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit a8f478fbeaeedcef2e9502aed42e147b8b2bf8cd
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:36:03 2005 -0700

    [netdrvr mv643xx] Additional whitespace cleanups, mostly changing spaces to tabs in comments

commit 0ccaf088e592427069be4ac8371f9d5b85a03ac6
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:31:54 2005 -0700

    [netdrvr mv643xx] Run mv643xx_eth.[ch] through scripts/Lindent
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 680ef5b1d31b9c88b4c5fad9235500c12f9ecdec
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:26:38 2005 -0700

    [netdrvr mv643xx] Add a function to detect at runtime whether a PHY is attached to
    the specified port, and use it to cause the probe routine to fail
    when there is no PHY.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 26d2d5c8084bfd0c04ec329038d1a3cf15db2919
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:16:27 2005 -0700

    [netdrvr mv643xx] This one liner removes a spurious left paren fixing an obvious syntax error
    in the #ifndef MV64340_NAPI case

commit bc50683bf8b460d626e9c6afbca9298d46da5db5
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:13:34 2005 -0700

    [netdrvr mv643xx] Add support for PHYs/boards that don't support autonegotiation.
    
    Signed-off-by: Brian Waite <brian@waitefamily.us>
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit d18ea29f9c9936221f16cd9de2d86a081f0449ec
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:12:17 2005 -0700

    [netdrvr mv643xx] With this patch, the driver now calls netif_carrier_off/netif_carrier_on
    on a link down/up condition.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit e4e53b4239c8df97f205e0da0f348138f46ac9d4
Author: Dale Farnsworth <dfarnsworth@mvista.com>
Date:   Wed Jan 26 22:10:48 2005 -0700

    [netdrvr mv643xx] This patch cleans up the handling of receive skb sizing.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 427621d00a60f107eb32f4ac122015c320984564
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Wed Jan 26 05:30:51 2005 -0600

    [CIFS] Add support for updating Windows NT times/dates (part 1)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit b4295fe14c43dd110eda439540caeef2755a8df4
Merge: cd5102c... 16854cd...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Jan 26 00:17:17 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-sound
    into suse.cz:/home/perex/bk/linux-sound/work

commit cd5102cd4bcf334319814c1cdf969658efd485df
Merge: 98f9485... 5c9b719...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Jan 26 00:03:03 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-2.5
    into suse.cz:/home/perex/bk/linux-sound/linux-sound

commit 16854cdb8958454007eb7abb2f65fae1c3da9318
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:52:17 2005 +0100

    [ALSA] replace schedule_timeout() with msleep()
    
    EMU8000 driver
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ea011a39f38ab36f245c0b059bb85d59261b76d9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:50:28 2005 +0100

    [ALSA] insert set_current_state() before schedule_timeout()
    
    Wavefront drivers
    Insert set_current_state() before schedule_timeout(). Without the
    insertion, schedule_timeout() returns immediately, resulting in an
    effective busy-wait.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 44a93f25be7fe16768bff5acddcb5841418411d9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:48:58 2005 +0100

    [ALSA] replace schedule_timeout() with msleep_interruptible()
    
    GUS Library
    Use msleep_interruptible() instead of custom wait code involving
    schedule_timeout() to guarantee the task delays as expected. This also
    removes a dependence on the value of HZ.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 611cd51c6d5e2dd60ed84e43a4eea63af6204d5c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:47:19 2005 +0100

    [ALSA] insert set_current_state() before schedule_timeout()
    
    GUS Library
    Insert set_current_state() before schedule_timeout(). Without the
    insertion, schedule_timeout() returns immediately.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 523b074fbf270ac88d702eb9385523c825b46114
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:41:00 2005 +0100

    [ALSA] replace schedule_timeout() with msleep()
    
    Digigram VX core
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1d6e1d354485f7ec609ac4ed410b9e447730c97b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:39:04 2005 +0100

    [ALSA] replace schedule_timeout() with msleep()
    
    RawMidi Midlevel
    Use msleep instead of schedule_timeout() to guarantee the task delays
    as expected. This also removes a dependence on the value of HZ.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3d6d10406ce297be9a0e4a376e6cec2573141616
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:37:18 2005 +0100

    [ALSA] Special AC97 patch for ASUS W1000/CMI9739 laptop
    
    AC97 Codec
    This patch fixes sound output on the ASUS W1000 laptop with the CMI9739
    chip. It wrongly reports that it has a SPDIF in, when in fact we wish to
    use the EAPD pin.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0f72cf4de60d2043401cad3f17da97405cc54ea8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:35:33 2005 +0100

    [ALSA] Warning doc about VIA82xx recording
    
    Documentation
    Add warning about the consequences of adjusting the 'Input Source Select'
    of VIA82xx.
    
    Signed-off-by: Ross Kendall Axe <ross.axe@blueyonder.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8c73f7367119bf94e4bdbe08079062681453e6d5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:33:42 2005 +0100

    [ALSA] fix usage of preprocessor directive inside macro
    
    HDA Intel driver
    gcc-2 complains about preprocessor directives inside a macro argument list
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b12621d6271a88a1deb30b14e4c48a3ef8afc209
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 25 22:32:04 2005 +0100

    [ALSA] add more Yamaha USB MIDI quirks
    
    USB generic driver
    add support for Yamaha UC-MX, UC-KX, CLP-175, SPX2000
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit a1fa96610f56fc74bdfcd4fa1bfe79adb8e5fe81
Merge: 2e15e3c... 98f9485...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Jan 23 20:26:19 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 8e16979a2d37ff708b49a30da1ab12c51baea966
Merge: 98f9485... 5af7fc0...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Sun Jan 23 21:09:37 2005 -0600

    Merge jfs@jfs.bkbits.net:linux-2.5
    into austin.ibm.com:/home/shaggy/bk/jfs-2.5

commit 5c9b7198845983bb068286d089254a8420d185e3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Jan 21 00:29:20 2005 +0100

    [ALSA] remove obsolete sound/core/ioctl32 directory
    
    The compatibility layer is integrated to ALSA midlevel code now.

commit 5b0bebdc9d29d411f15596681d01416f26a555a7
Merge: 8edee05... 1e8fff3...
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 23:47:16 2005 +0100

    Merge suse.cz:/home/perex/bk/linux-sound/linux-sound
    into suse.cz:/home/perex/bk/linux-sound/work

commit b5cd338bc8c801ebdf53f1b8af3408ee92e17c8d
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 20:17:51 2005 -0200

    [ATM] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 082f9ccd6801a6161a64664f16d3f112f1f8875c
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 20:16:19 2005 -0200

    [PPPOX] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e8fff3a030d863b39c781a692b83e6e8312e05a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:33:37 2005 +0100

    [ALSA] Use DEFINE_SPINLOCK(), DEFINE_RWLOCK() macros
    
    ALSA Core,PCM Midlevel,Timer Midlevel,ALSA sequencer
    ALSA<-OSS sequencer
    Replace spin/rwlock definitions with DEFINE_SPINLOCK() and DEFINE_RWLOCK()
    macros.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8a9cc563a5616da870102e5717dbbf15b0cf101b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:32:02 2005 +0100

    [ALSA] Remove snd-ioctl32 entry
    
    ALSA Core
    Remove the entry for snd-ioctl32.  The 32bit wrapper is built in the core
    module.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 575d48486c7bfdf48db26f683bad85203faf89b6
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:30:46 2005 +0100

    [ALSA] Export new register/unregister functions
    
    ALSA Core
    Export new register/unregister functions for compat control-ioctls.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8360da6403865165e5c306388455084e8c6cfd55
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:29:26 2005 +0100

    [ALSA] unlocked/compat_ioctl rewrite for OSS compatible drivers
    
    ALSA<-OSS emulation,ALSA<-OSS sequencer
    The ioctl handlers for OSS compatible drivers are rewritten using
    unlocked/compat_ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 90efff421cb0dbaef98e6b014bae38eaed0f0a40
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:28:06 2005 +0100

    [ALSA] unlocked/compat_ioctl rewrite for hwdep, rawmidi, timer and sequencer API
    
    HWDEP Midlevel,RawMidi Midlevel,Timer Midlevel,ALSA sequencer
    The ioctl handler for hwdep, rawmidi, timer and sequencer API are rewritten
    using unlocked/compat_ioctl.
    The 32bit wrapper is merged to the core module.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 575b149c787b408c03bdb47dc6088669929ecfe8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:26:43 2005 +0100

    [ALSA] unlocked/compat_ioctl rewrite for PCM API
    
    PCM Midlevel
    The ioctl handler for PCM API is rewritten using unlocked/compat_ioctl.
    The 32bit wrapper is merged to the core module.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9f25159b8b8c3edc8c8348dd12ffce187866c06b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:25:19 2005 +0100

    [ALSA] unlocked/compat_ioctl rewrite for control API
    
    Control Midlevel
    ioctl handler for control API is rewritten using unlocked/compat_ioctl.
    The 32bit wrapper is merged to the core module.
    
    Added a new register/unregister function for compat control ioctls.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7440c4f24be0200b1a8e91536c4eb6ea7e993e5d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:23:54 2005 +0100

    [ALSA] Add Intel HDA driver
    
    Documentation,PCI drivers,HDA generic driver,HDA Codec driver
    HDA Intel driver
    Added a new Intel High-Definition audio driver.
    The driver consists of two separate modules: the generic support
    module for HD codecs (snd-hda-codec), and the driver for Intel ICH6/7
    chipset (snd-hda-intel).  The snd-hda-intel was called formerly
    snd-azx in the ALSA 1.0.8 rlease.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e775f763b0631243ee752f42477d3377abd25d10
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:22:29 2005 +0100

    [ALSA] Enable HP jack sense for FSC Scenic-W
    
    AC97 Codec
    Enable 'Headphone Jack Sense' control on FSC Scenic-W as default, too.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a774032b7b25567a4d088398eacd7e89a79cdacd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:21:09 2005 +0100

    [ALSA] Add quirk for HP nc8000
    
    Intel8x0 driver
    Added ac97 quirk for HP nc8000.
    The list is sorted again.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 40a48eff3091da934b4adf153df0e12f2ebbaf24
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:19:48 2005 +0100

    [ALSA] Add quirk for HP pavilion ZV5030US
    
    ATIIXP driver
    Added ac97 quirk for HP Pavilion ZV5030US to bind the control with
    mute-LED.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8e42b42fc175e3e52e25b6c1115e15d8965aff8f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:18:30 2005 +0100

    [ALSA] Simplify the general ac97 volume/switch callback
    
    AC97 Codec
    Simplified the control callbacks of general AC97 volumes/switches.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6bfa9a93d342dbb7f0be26ff2b70e37107ad49f8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:17:15 2005 +0100

    [ALSA] Add missing inclusion of linux/device.h
    
    Digigram VX core,Digigram VX222 driver,Digigram VX Pocket driver
    Added the missing inclusion of <linux/device.h>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ef7eeb693e590be8d7087a909daeadd64342d962
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:15:52 2005 +0100

    [ALSA] Add workaround for buggy ATI IXP hardwares
    
    ATIIXP-modem driver
    Added a workaround for buggy ATI IXP hardwares which returns
    bogus DMA pointer register value.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 86f4e0e4e8e932d97c329c37a6bb389ac7445d5e
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:14:34 2005 +0100

    [ALSA] Add support for Chaintech 9CJS
    
    ICE1712 driver
    Added the support for Chaintech 9CJS by Delmaire Maxime.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4c0c0df1365f75cb00eee32162ec538ad279f739
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:13:15 2005 +0100

    [ALSA] AK4117 code - fixed cosmetic typos
    
    AK4117 receiver
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1e9d662d94cc9c530fc4229d87262d665bc1cb29
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:11:59 2005 +0100

    [ALSA] don't use broken legacy interfaces on M-Audio Quattro/Omnistudio
    
    USB generic driver
    Interfaces 0-2 of M-Audio Quattro/Omnistudio devices duplicate functionality
    of interfaces 3-5 and cause errors when used with those.  Add a quirk to
    tell the driver not to use them.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 56a42949a2e4ec741fae26dfe27f375cba1d2b5a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:10:41 2005 +0100

    [ALSA] Fix silent output on some machines with AD1981x codecs
    
    AC97 Codec
    Fixed the default state of 'Headphone Jack Sense' switch on AD1981x
    codecs.  Setting this on affects the output of some machines (e.g.
    Thindpads).
    
    The default value is set on only hardwares which are known to work.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 787b7befd17d69969544d00cc3d4bd903b8d8050
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:09:28 2005 +0100

    [ALSA] AC'97 Audio support for Intel ICH7
    
    Intel8x0 driver
    This patch adds the ICH7 AC'97 DID the the intel8x0.c AC'97 audio
    driver. This patch was build against 2.6.11-rc1.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4e0c4147c5788e74f535740bdd73c29f2ab838cc
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:08:09 2005 +0100

    [ALSA] Fix compilation on big-endian arch
    
    RME HDSP driver
    Fixed typo in the code for big-endian architectures.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c1d9569c4c321250d0ba8845d191d56ba6687b20
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:07:01 2005 +0100

    [ALSA] Show firmware loading state in proc file
    
    Digigram VX core
    Show the firmware loading state in proc file.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 68f448920f31c84f9ec45916d60e34e40ad0324a
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:05:33 2005 +0100

    [ALSA] Fix struct size mismatch
    
    IOCTL32 emulation
    Fixed the struct size mismatch - should work on SPARC64 now, too.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 80bc8a941da8e7b0cf9078e95be4b1827f5d81e9
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:04:23 2005 +0100

    [ALSA] Add missing FORWARD ioctl
    
    IOCTL32 emulation
    Added the missing FORWARD ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e33d0e3a0b866bcd3436f3ffc6897d0ae18736e3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:03:02 2005 +0100

    [ALSA] Fix struct alignment on PPC64
    
    IOCTL32 emulation
    Fixed the struct size mismatch (due to alignment) of
    snd_ctl_elem_value_t for PPC64.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1a56610d41eafdd51238dd3d3fac2ca436598ef1
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:01:42 2005 +0100

    [ALSA] fix typo
    
    Documentation
    
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 5661df8fde46287c676d0daf0e2b993acd653298
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 22:00:22 2005 +0100

    [ALSA] Fix typos in doc
    
    Documentation
    Fixed typos in the document by Kirill Smelkov <kirr@mns.spb.ru>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit eac5f14a085ae0e9127b7097b1b5bf35315f5eee
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jan 20 21:58:45 2005 +0100

    ALSA CVS update
    PCM Midlevel
    Sumary: Fix comment of snd_pcm_lib_malloc_pages()
    
    Fixed comment of snd_pcm_lib_malloc_pages() by
    Kirill Smelkov <kirr@mns.spb.ru>.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 591a13f81ca118f5772528e6093c252a0b02be74
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 17:21:48 2005 -0200

    [IRDA] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f0f85ba0cef3af46f90a6fb43a75ba4fbfc5757b
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 17:17:52 2005 -0200

    [LLC] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8afac2941643a1fc58f1c492436cdec719ae6421
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 17:09:34 2005 -0200

    [PF_KEY] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93f588ae11413ea758a3d5e7ccfeb20b6678be51
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:59:08 2005 -0200

    [X25] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8169743fe538f62f9a16d68223afa812fbdfcf2a
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:54:11 2005 -0200

    [NETLINK] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97a7279ee5d291117e1fd08e83a2a0045aab4c60
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:44:56 2005 -0200

    [ECONET] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8081e21f42a77f707f54a843508f31a41704ee49
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:41:35 2005 -0200

    [AF_PACKET] stop using sk_protinfo
    
    Required to introduce struct connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f78139ad36edf4951fffbf4d7b32780487839f9
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:36:07 2005 -0200

    [DECNET] Don't use sk_protinfo + private sock slab cache
    
    DecNET already uses a private sock slab cache, but initializes sk->sk_protinfo,
    pointing to (sk + 1), this is wrong because at sk_free time we call
    sk->sk_destruct, that by default points to sock_def_destruct, that does a kfree
    on sk->sk_protinfo, since it was initialized at net_proto_family->create() time
    (dn_create), but in decnet sk_protinfo was not kmalloced, it was allocated
    piggybacked to struct sock.
    
    This doesn't causes problems because decnet sets sk->sk_destruct to a custom
    function that doesn't calls kfree(sk->sk_protinfo), but to reach a long time
    goal of killing sk_protinfo lets just make DN_SK return sk + 1.
    
    I left merging dn_scp with dn_sock for later, as the current state suits my
    needs to introduce connection_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e70e486c19b70417708c4b58023eb6bc00345aa6
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:32:38 2005 -0200

    [APPLETALK] stop using sk_protinfo
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 142acf1ab7307d132e6cdee19f23c3f9a823d5a2
Author: Arnaldo Carvalho de Melo <acme@toy.ghostprotocols.net>
Date:   Thu Jan 20 16:25:41 2005 -0200

    [SOCK] make sk_alloc use kmalloc for non performance critical families
    
    With this we can have aggregate protocol specific struct proto_sock
    allocated for non performance critical protocols.
    
    We still check for slab == NULL && zero_it == 1 to allocate from the
    generic "sock" slab cache, but this will be removed when all the
    network families stop using sk_protinfo, when the generic "sock"
    slab cache will be removed.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2e15e3c248aefdabc75484bb7d3c2bdc0fc6fccc
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Thu Jan 20 09:37:57 2005 -0600

    [CIFS] misc cleanup - compare pointers to NULL not zero
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 1c85252cae75df0982144d1bf5650bbae3ac238b
Merge: a8bbaad... 36b963a...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Thu Jan 20 01:42:52 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 5af7fc019b55d4c5ed2b3c953e42a788bd96df82
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jan 20 02:46:30 2005 -0600

    JFS: replace schedule_timeout() with msleep()
    
    Use msleep() instead of schedule_timeout() to guarantee the task
    delays as expected. The current code uses TASK_INTERRUPTIBLE;
    however, it does not check for signals, so I do not think the
    change to msleep() is necessarily bad.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 48112d23b194ad43d88af31bf2e971f25d3f3380
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jan 20 02:22:50 2005 -0600

    JFS: add missing include
    
    This is why it's a good idea to compile & test before checking in
    the code.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e3b85b9117ee78704cf7c8a8fb792ec91887f2ef
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jan 20 02:14:19 2005 -0600

    JFS: fix livelock waiting for stale metapage
    
    Several waitors were keeping mp->count from going to zero, so we
    would never release the page.  Simplify the logic by doing a busy
    wait without locking the metapage.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit a8bbaadd3909bd65b057a2531728711a4ab2d6b9
Merge: 5a534e1... 8edee05...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Wed Jan 19 22:18:19 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 619c04b77f4d2d7c74fc08b5e8f5fdefe1f6467c
Merge: 11ab9af... b4188d2...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jan 17 15:43:40 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/8139too

commit 1f66c744dfffdfdb1cdd4a79637a93f05a5738e5
Merge: 11ab9af... a316e58...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jan 17 14:56:24 2005 -0500

    Merge http://typhoon.bkbits.net/typhoon-2.6
    into pobox.com:/garz/repo/netdev-2.6/typhoon

commit 47f71d341dd9eae080d0d9b070970fde1b293727
Merge: 11ab9af... c13729a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jan 17 14:54:29 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/viro-isa-ectomy

commit e0dea128873452dffa2427318682e0abf2e3411c
Merge: 11ab9af... 2c6b034...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jan 17 14:51:31 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/viro-iomap

commit 5a534e1dd9d16bbe5a24ab191b1f278d32891c16
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Mon Jan 17 08:08:33 2005 -0600

    [CIFS] Fix length check for short smbs in cifs demultiplexing and remove unneeded debug messages
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 411fcefe84b992ce687169b5ff65b80a9a8c4630
Merge: f53cc16... bd24a6b...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Jan 16 14:43:41 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit f53cc1668846416b4936b5b6f44da132f7c76d19
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Sun Jan 16 20:36:45 2005 -0600

    [CIFS] get rid of tcp peek usage on cifs socket. Makes more sense to read normally
    first four bytes off the socket (then read the rest of the frame) rather than peek
    first few bytes then read because we were having to retry the peek multiple times
    when peek would return less than four bytes and four bytes is the minimum we
    ever get.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 47169ed221991a3a7aa99cbc4aff4a4b0cbb08ab
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Sun Jan 16 20:29:15 2005 -0600

    [CIFS] remove old cifs_readdir routine
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit d2177c8f3317db48aac3de199d9c38219b604487
Merge: daa7a7a... 62343f7...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Fri Jan 14 01:10:47 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 2614496084de3d562df723dde14fb36aa0be51ca
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:26:21 2005 -0700

    [netdrvr mv643xx] This patch simplifies the mv64340_eth_set_rx_mode function without
    changing its behavior.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 306592dc1bc604e51f4f016bfac183687349e6d7
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:25:50 2005 -0700

    [netdrvr mv643xx] This patch makes the use of the MV64340_RX_QUEUE_FILL_ON_TASK config macro
    more consistent, though the macro remains undefined, since the feature still
    does not work properly.
    
    Signed-off-by: Steven J. Hill <sjhill1@rockwellcollins.com>
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 35f1125dc07c882b9d5b06e9a457e3c968755837
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:25:14 2005 -0700

    [netdrvr mv643xx] This patch adds support for passing additional parameters via the
    platform_device interface.  These additional parameters are:
            size of RX and TX descriptor rings
            port_config value
            port_config_extend value
            port_sdma_config value
            port_serial_control value
            PHY address                                                                                                                                             Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit a897ba9d26db72874e2d6b0e29f3a854ce244c47
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:24:38 2005 -0700

    [netdrvr mv643xx] This patch adds device driver model support to the mv643xx_eth driver.
    
    This is a change to the driver's programming interface.  Platform
    code must now pass in the address of the MV643xx ethernet registers
    and IRQ.  If firmware doesn't set the MAC address, platform code
    must also pass in the MAC address.
    
    Also, note that local MV_READ/MV_WRITE macros are used rather than              using global macros.  Keeping the macro names minimizes the patch size.         The names will be changed to mv_read/mv_write in a later cosmetic               cleanup patch.                                                                                                                                                  Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit c78c75bc8f09792b178b0c6e07ba28a52125162f
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:24:06 2005 -0700

    [netdrvr mv643xx] This patch replaces the use of the pci_map_* functions with the
    corresponding dma_map_* functions.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 05aecca3566e45298bbbb53c2b1b5c17b77fa8e3
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:23:29 2005 -0700

    [netdrvr mv643xx] This patch fixes the code that enables hardware checksum generation.
    The previous code has so many problems that it appears to never have
    worked 2.6.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 464c56a1e6f0fe48c8ed6f193d25cac2255e4375
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:22:36 2005 -0700

    [netdrvr mv643xx] This patch removes spin delays (count to 1000000, ugh) and instead waits
    with udelay or msleep for hardware flags to change.
    
    It also adds a spinlock to protect access to the MV64340_ETH_SMI_REG,
    which is shared across ports.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit c7c16640862208598c045971ed6f84f4843c4332
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Jan 14 01:21:59 2005 -0700

    [netdrvr mv643xx] This patch removes code that is redundant or useless.
    The biggest area is in pre-initializing the RX and TX descriptor
    rings, which only obfuscates the driver since the ring data is
    overwritten without being used.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>

commit 3fc5b3493d5bf39498e712c1ed7524abb6142090
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Jan 14 01:10:38 2005 -0600

    JFS: base static allocations on physical memory size
    
    On larger systems, performance is improved with a larger
    allocation of tlocks & tblocks.  Base the default size of these
    allocations on the physical memory size.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit daa7a7aded35064b08c1cf76f12cd6ac89c20592
Merge: 1d000fb... be84740...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Wed Jan 12 16:15:12 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 4706059ec7786dcbe14c4282f71ec642885e4cb0
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:10:49 2005 -0500

    [PATCH] net/ewrk3: replace schedule_timeout() with msleep_interruptible()
    
    Any comments would be, as always, appreciated.
    
    -Nish
    
    Description: Uses msleep() instead of schedule_timeout() to guarantee
    the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit c4c50774e7e6393c01ab4052e1d23fd197e7918b
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:10:32 2005 -0500

    [PATCH] net/tekram-sir: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout() to guarantee the
    task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 5b2b49f25769c19ed09bc772a0341d4ac8983e04
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:10:17 2005 -0500

    [PATCH] net/ns83820: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit adb45ee6651c64118c118cf9352408dd31b31976
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:10:05 2005 -0500

    [PATCH] net/ni65: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 6db0308849c3a5abcf5dd8cb80d511c7e74e37a8
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:09:55 2005 -0500

    [PATCH] net/sir_dev: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 8f677709d52e78adb3bfe9c545d22aa72c333cb3
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:09:44 2005 -0500

    [PATCH] net/xirc2ps_cs: replace Wait() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of Wait() to guarantee the task delays
    as expected. Remove definition of Wait().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit e7d1732a3805ac3674f9c172ff581187efca6331
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:09:33 2005 -0500

    [PATCH] net/ma600-sir: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit ec8df6414a389fae4610edabcf5177726c97324f
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:09:22 2005 -0500

    [PATCH] net/irtty-sir: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 5e6cfc1cdd7c45c1c72c88f8a28501f9101d5b02
Author: Domen Puncer <domen@coderock.org>
Date:   Tue Jan 11 14:09:11 2005 -0500

    [PATCH] net/act2001-sir: replace schedule_timeout() with msleep()
    
    Any comments would be appreciated.
    
    Description: Use msleep() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit 2ee7b51f5ed4d5980940ae4f7b090d4435890b01
Merge: 04a2b7d... b8e1282...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jan 11 14:06:24 2005 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/janitor

commit 1d000fb6654f51c2b51ae9a6e35cd72ec6137630
Merge: 147759c... 307bc76...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Jan 10 18:59:40 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 0ba69ca083c050d392e415fd8d359b294a72a0ca
Author: Keith Owens <kaos@ocs.com.au>
Date:   Mon Jan 10 19:32:45 2005 +0100

    kallsyms: gate page patch breaks module lookups
    
    >Your recent patch looks to break module kallsyms lookups....
    >It looks like if CONFIG_KALLSYMS_ALL is set then we never look up module
    >addresses.
    
    Separate lookups for kernel and modules when CONFIG_KALLSYMS_ALL=y.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 147759c18c5e850f25bbb258483dc86df0a203c6
Merge: fb3ce02... 819509c...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sun Jan 9 23:15:30 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit fb3ce02d803df28aa8ed579c7aa686caf7bbe093
Merge: 37d3495... 530f890...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sat Jan 8 16:20:07 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit a316e58f5fc80c76d055856a35aa2905e06782bf
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 15:25:03 2005 -0500

    Bump version and release date.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit 8ad136cb407005a181c69bb4a4598acfcb7a26f0
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 15:23:22 2005 -0500

    Version 03.001.008 of the Typhoon firmware, courtesy of 3Com.
    Fixes various crypto bugs on the 3CR990B family, among other
    issues.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit c6ebbb7e971f5f3f3784a82930b8019ad9feea23
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 15:22:08 2005 -0500

    Fixup the version reporting to match 3Com.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit c063385d5d7735b1b2c26a2da338f38d00605c0d
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 15:18:58 2005 -0500

    Use module_param() and add descriptions.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit d4b924d6993c1df74eae03834c90d4cef8975221
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 14:55:41 2005 -0500

    Teach typhoon to use port IO on machines that need it. It will attempt
    to use MMIO, but if that fails (or the user asks), it will fallback
    to port IO.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit 4256336f9a8ac4b6ec9abcddbc92133604f62d2a
Author: David Dillow <dave@thedillows.org>
Date:   Thu Jan 6 14:53:27 2005 -0500

    Enable bus mastering before saving our state, or we'll only be able
    to load the modules one time.
    
    Signed-off-by: David Dillow <dave@thedillows.org>

commit b8e1282cc8aa4695948de49a7e828cdfa02dd15b
Author: Domen Puncer <domen@coderock.org>
Date:   Thu Jan 6 12:00:35 2005 -0500

    [PATCH] arcnet: remove casts
    
    Remove casts of (void *) pointers.
    
     drivers/net/arcnet/arc-rawmode.c |    4 ++--
     drivers/net/arcnet/arc-rimi.c    |   14 +++++++-------
     drivers/net/arcnet/arcnet.c      |   30 +++++++++++++++---------------
     drivers/net/arcnet/com20020.c    |    6 +++---
     drivers/net/arcnet/com90io.c     |    4 ++--
     drivers/net/arcnet/com90xx.c     |    8 ++++----
     drivers/net/arcnet/rfc1051.c     |    8 ++++----
     drivers/net/arcnet/rfc1201.c     |   12 ++++++------
     8 files changed, 43 insertions(+), 43 deletions(-)
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c13729a1f3475f9fe7bb509fb644763d0b0291e2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:18:17 2005 -0500

    [PATCH] es3210 iomem annotions and isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 915cc7f5165ded7084810369c267765dac664741
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:18:06 2005 -0500

    [PATCH] ewrk3 iomem annotations + isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c49488ecd0cb4ca411455ef74ee947f23fa6f475
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:17:55 2005 -0500

    [PATCH] wd iomem annotations + isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 43b5aef9c005bacf1519846c9adf476733f5adf6
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:17:44 2005 -0500

    [PATCH] smc-ultra32 iomem annotations + isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c847093a3106a1c49808ef66baa8a66a6ad94b40
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:17:32 2005 -0500

    [PATCH] smc-ultra iomem annotations + isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 12e623c7fbf92e7107eff53e2b9e1ca57977ff39
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jan 6 11:17:20 2005 -0500

    [PATCH] smc-mca iomem annotations and isa-ectomy
    
    	switched to ioremap + normal iomem access primitives
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 37d349596d606e6a53b35f529cc1be770b96891f
Merge: de7e4c6... 1db608d...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Jan 4 23:06:36 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit de7e4c6179f58cb858ad7cca1006a9c7d1a4a53e
Author: Steve French <stevef@stevef95.austin.ibm.com>
Date:   Tue Jan 4 06:11:57 2005 -0600

    [CIFS] Fix default mode on cifs module parms in sysfs
    
    Pointed out by Domen Puncer
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 2553c7e192d3c16cb3025ee6e975ea89a212cdc8
Merge: 72e57cd... bfee58e...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Mon Jan 3 17:04:23 2005 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit bfee58e63018f73bae91fed7b97118e0433216aa
Author: Steve French <stevef@smfhome.smfdom>
Date:   Wed Dec 22 00:11:36 2004 -0600

    [CIFS] Fix whitespace
    
    Signed-off-by:  Steve French <sfrench@us.ibm.com>

commit 8f7f3b17a80cb1b45dbe2494466b57082ee10d54
Merge: d4e8a04... 87f3243...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Tue Dec 21 03:25:57 2004 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit d4e8a0447befec03b720b9992aaff0f28d458255
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Mon Dec 20 23:08:59 2004 -0600

    [CIFS] Enable reads over 64K by setting large read and write capability at SMB session negotiation
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 01369eaa10dddb437ec9aa690429b67bbc9f33c3
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Sat Dec 18 22:19:16 2004 -0600

    [CIFS] Fix set of mount option rsize so it can be set above negotiated buffer size.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit da9abdd782002b48ba6c3240dbddfdcbe501c04c
Merge: 6484567... 381a420...
Author: Steve French <cifs.adm@bkbits.net>
Date:   Sat Dec 18 05:01:29 2004 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into bkbits.net:/repos/c/cifs/linux-2.5cifs

commit 381a420f5b23cedd9e166e052a93a7f4237bd57c
Author: Steve French <sfrench@sambaltcdom.austin.ibm.com>
Date:   Sat Dec 18 04:01:31 2004 -0600

    check rc of copy_to_user (pointed out by John Cherry)
    fix wsize mount parm so it works to control writes
    allow reads bigger than 64K (although Samba does not handle them yet).
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit b4188d290c07ee07e631931a4afa48afacba46cc
Merge: d92539e... 57de9f3...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Nov 4 14:14:36 2004 -0500

    Merge pobox.com:/garz/repo/linux-2.6
    into pobox.com:/garz/repo/netdev-2.6/8139too

commit 57de9f3eec8df0f5130a7cda0b6b452bd6b3145a
Merge: 2ab0873... 6c05f48...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Oct 30 01:06:31 2004 -0400

    Merge pobox.com:/garz/repo/netdev-2.6/tmp
    into pobox.com:/garz/repo/netdev-2.6/8139too

commit 2ab08734710d28817485584ac5ae4e8d675e1daa
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Oct 30 01:05:22 2004 -0400

    [PATCH] rtl8139too.c: Fix missing pci_disable_dev
    
    Simple fix to make pci_enable/disable symetric and avoid the warning on
    module unload.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6c05f484e1d206f9d5bd434f201b7413106a7c82
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Oct 26 09:10:11 2004 -0400

    [PATCH] rtl8139too.c: Fix missing pci_disable_dev
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Simple fix to make pci_enable/disable symetric and avoid the warning on
    module unload.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0049693664c25c0e3cfdb8ad9c0c82a19e04e5b5
Merge: de8705b... a9586d2...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Oct 26 09:00:44 2004 -0400

    Hand-merge upstream pci_{save,restore}_state() stuff.

commit 2c6b034d6f0a9470953366d45d9162474c087be4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Oct 21 10:36:08 2004 -0400

    [PATCH] fealnx iomem annotations, switch to io{read,write}
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit bdada5c604673774b9a1ed71dee0e9b169a571b5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Oct 21 10:33:39 2004 -0400

    [PATCH] wireless iomem annotations and fixes, switch to io{read,write}
    
    hermes.c switched to ioread/iowrite from homegrown analogs, its users
    updated.  Fixed direct dereferencing of ioremapped memory in orinoco_plx.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit a9586d208ca9888a6039129203c27a1176278ce7
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Oct 15 11:25:35 2004 -0400

    [PATCH] 8139too: use netdev_priv
    
    Use netdev_priv where appropriate, and get rid of "can't happen anymore" assert's.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit d151e8a30d1c7fdc9f76425378bfcb61aa8fb4ae
Author: Rene Herman <rene.herman@keyaccess.nl>
Date:   Sat Aug 28 11:06:15 2004 -0400

    [PATCH] 8139too Interframe Gap Time
commit 9ee1c939d1cb936b1f98e8d81aeffab57bae46ab
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 17 12:48:29 2005 -0700

    Linux 2.6.12

commit dfd11c2e61d3c0c417d341866ed53c44933b65b4
Merge: 794f5bf... db3b584...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 17 12:35:26 2005 -0700

    Merge 'for-linus' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/axboe/linux-2.6-block

commit 794f5bfa77955c4455f6d72d8b0e2bee25f1ff0c
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 17 12:25:25 2005 -0700

    [PATCH] PCI: don't override drv->shutdown unconditionally
    
    There are many drivers that have been setting the generic driver
    model level shutdown callback, and pci thus must not override it.
    
    Without this patch we can have really bad data loss on various
    raid controllers.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit caf2857ac6e0ba2651e722f05d5f7d3ec8ef2615
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 17 11:36:36 2005 +0200

    [PATCH] timer exit cleanup
    
    Do all timer zapping in exit_itimers.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db3b5848ea6440968fcdd29b80514d0de044bb7c
Author: Kiyoshi Ueda  <k-ueda@ct.jp.nec.com>
Date:   Fri Jun 17 16:15:10 2005 +0200

    When cfq I/O scheduler is selected, get_request() in __make_request() calls
    __cfq_get_queue().  __cfq_get_queue() finds an existing queue (struct
    cfq_queue) of the current process for the device and returns it.  If it's not
    found, __cfq_get_queue() creates and returns a new one if __cfq_get_queue() is
    called with __GFP_WAIT flag, or __cfq_get_queue() returns NULL (this means that
    get_request() fails) if no __GFP_WAIT flag.
    
    On the other hand, in __make_request(), get_request() is called without
    __GFP_WAIT flag at the first time.  Thus, the get_request() fails when there is
    no existing queue, typically when it's called for the first I/O request of the
    process to the device.
    
    Though it will be followed by get_request_wait() for general case,
    __make_request() will just end the I/O with an error (EWOULDBLOCK) when the
    request was for read-ahead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Kiyoshi Ueda <k-ueda@ct.jp.nec.com>
    Signed-off-by: Jun'ichi Nomura <j-nomura@ce.jp.nec.com>

commit 97008082eacab047c189028202e055280f799ace
Merge: 043cf3f... 22f11c4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 13:40:39 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 22f11c4e662ef0bdd87f09370a76c83ed738d5fd
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu Jun 16 21:23:56 2005 +0100

    [PATCH] ARM: 2715/1: restore CPLD interrupts upon resume for Lubbock and Mainstone
    
    Patch from Nicolas Pitre
    
    Without this some devices fail to work again after a suspend event.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 043cf3fd20a22df5957c28888f4c8d41438f2140
Merge: c081474... 95220a2...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 13:22:23 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 95220a2ea334b5ff2168cc9bf31c0e08b29bae21
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:12 2005 +0100

    [PATCH] ARM: 2714/1: Fix the IB2 definitions for the Versatile platform
    
    Patch from Catalin Marinas
    
    The initial IB2 addresses did not depend on the IB2 base. This
    patch defines them as (VERSATILE_IB2_BASE + offset).
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit fea7722fd7b45c6957caed84251d95269319fe16
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:11 2005 +0100

    [PATCH] ARM: 2713/1: Fix the GPIO base for Integrator/CP
    
    Patch from Catalin Marinas
    
    The GPIO base for Integrator/CP is different from the
    Integrator/AP. This patch sets the correct value for
    INTEGRATOR_GPIO_BASE.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 90ef713b6368dcfe7a74bcc0026b998b4c44d5bc
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:11 2005 +0100

    [PATCH] ARM: 2712/1: Fix the RGB order for the Versatile CLCD
    
    Patch from Catalin Marinas
    
    The current red and blue colours on the Versatile CLCD are
    reversed when the 5:6:5 mode is used. The patch sets the proper
    bit in the SYS_CLCD register value.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit c081474c184b34136e09e1e335f41356a11c7b68
Merge: 58125f9... c374f12...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 09:53:48 2005 -0700

    Merge 'for-linus' branch of master.kernel.org:/pub/scm/linux/kernel/git/axboe/linux-2.6-block

commit 58125f95c62a44f12bb71c58ef70f0068d20c7a2
Author: Oliver Neukum <oliver@neukum.org>
Date:   Wed Jun 15 22:26:38 2005 -0700

    [PATCH] fix for kaweth broken by changes in the networking layer
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e41fb09b2fa15db095d3ee981299f488d7b48dfe
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 15 22:26:36 2005 -0700

    [PATCH] ALPS: fix enabling hardware tapping
    
    It looks like logic for enabling hardware tapping in ALPS driver was
    inverted and we enable it only if it was already enabled by BIOS or
    firmware.
    
    I have a confirmation from one user that the patch below fixes the problem
    for him and it might be beneficial if we could get it into 2.6.12.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5db92850d3ab72b830a0fe6e30eaec8462801408
Author: Daniel Jacobowitz <dan@debian.org>
Date:   Wed Jun 15 22:26:34 2005 -0700

    [PATCH] Fix large core dumps with a 32-bit off_t
    
    The ELF core dump code has one use of off_t when writing out segments.
    Some of the segments may be passed the 2GB limit of an off_t, even on a
    32-bit system, so it's important to use loff_t instead.  This fixes a
    corrupted core dump in the bigcore test in GDB's testsuite.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2ef79e1840ebbd0b5907e53c755efd5662112a1
Author: Alexandre Oliva <oliva@lsd.ic.unicamp.br>
Date:   Wed Jun 15 22:26:31 2005 -0700

    [PATCH] sbp2 slab corruption fix
    
    This fixed a problem that showed up in the Fedora development tree a few
    weeks before the Fedora Core 4 release, initially as slab corruption, later
    as hard crashes on boot up, when slab debugging was disabled for the
    release.  More details on the history at
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=158424
    
    The problem is caused by sbp2's use of scsi_host->hostdata[0] to hold a
    scsi_id, without explicitly requesting space for it.  Since hostdata is
    declared as a zero-sized array, we don't get any such space by default, so
    it must be explicitly requested.  The patch below implements just that.
    
    Signed-off-by: Alexandre Oliva <aoliva@redhat.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c374f127e4ff17a318b9ae95a5bf65f370c2d0b1
Author: Tejun Heo  <htejun@gmail.com>
Date:   Thu Jun 16 12:57:31 2005 +0200

     This patch fixes q->unplug_thresh condition check in
    __elv_add_request().  rq.count[READ] + rq.count[WRITE] can increase
    more than one if another thread has allocated a request after the
    current request is allocated or in_flight could have changed resulting
    in larger-than-one change of nrq, thus breaking the threshold
    mechanism.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 9c56187d3c345cc0e7a2f162b8c32543175d7bf7
Author: Tejun Heo  <htejun@gmail.com>
Date:   Thu Jun 16 12:56:15 2005 +0200

    This patch kills elevator_global_init() in elevator.c which does
    nothing.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit bcfff0b471a60df350338bcd727fc9b8a6aa54b2
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jun 15 20:51:14 2005 -0700

    [NETFILTER]: ipt_recent: last_pkts is an array of "unsigned long" not "u_int32_t"
    
    This fixes various crashes on 64-bit when using this module.
    
    Based upon a patch by Juergen Kreileder <jk@blackdown.de>.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    ACKed-by: Patrick McHardy <kaber@trash.net>

commit 1016888fb69662936b32ab767c7419a3be9a69d3
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 14 13:52:19 2005 -0700

    [PATCH] update ppc64 defconfig
    
    enable cpusets
    enable new lpfc and jsm drivers
    enable new dm-multipath
    leave new agp disabled
    disable rivafb, it does not handle the cards in G5 models (FX5200 as example)
    the new nvidiafb doesnt work on bigendian, yet
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4845f3333765b732aa2d7ea6d72fd03cfec4fbf3
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Jun 14 22:19:24 2005 +1000

    [PATCH] ppc64: update example configs
    
    Here is a patch to update the example configs in arch/ppc64/configs.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcf78d80a6c2de829ec08c8e663a3370e982d616
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Jun 14 09:56:20 2005 -0700

    [PATCH] usbusx2y: prevent oops & dead keyboard on usb unplugging while the device is being used
    
    Without this patch, some usb kobjects, which are parents to the usx2y's
    kobjects can be freed before the usx2y's.  This led to an oops in
    get_kobj_path_length() and a dead keyboard, when the usx2y's kobjects
    were freed.  The patch ensures the correct sequence.  Tested ok on
    kernel 2.6.12-rc2.
    
    Present in ALSA cvs
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efa93dbedd0e2eacf49ea6fff1fe4397d520cf61
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Jun 14 09:54:55 2005 -0700

    [PATCH] usbaudio: prevent oops & dead keyboard on usb unplugging while the device is being used
    
    Without this patch, some usb kobjects, which are parents to the usx2y's
    kobjects can be freed before the usx2y's.  This led to an oops in
    get_kobj_path_length() and a dead keyboard, when the usx2y's kobjects
    were freed.  The patch ensures the correct sequence.  Tested ok on
    kernel 2.6.12-rc2.
    
    Present in ALSA cvs
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a47696970bc8233818d370011e2fddae5cfce9f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 13 22:58:09 2005 -0700

    [PATCH] macmodes: needs a license
    
    Module needs a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92c6dc59b7c1ca514021502c7eef53b9f2c738fd
Author: Thomas Hood <jdthood@aglu.demon.nl>
Date:   Mon Jun 13 22:58:04 2005 -0700

    [PATCH] apm.c: ignore_normal_resume is set a bit too late
    
    This patch causes the ignore_normal_resume flag to be set slightly earlier,
    before there is a chance that the apm driver will receive the normal resume
    event from the BIOS.  (Addresses Debian bug #310865)
    
    Signed-off-by: Thomas Hood <jdthood@yahoo.co.uk>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 223230e78900e5f0be984f7697cb9bf172d71a35
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Mon Jun 13 22:58:00 2005 -0700

    [PATCH] i2o: Fix free of event memory in i2o_block_event()
    
    Fixed freeing of event memory in i2o_block_event()
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2c16499515aa044676a14b97a1b8a35f879152a
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Mon Jun 13 15:52:36 2005 -0700

    [PATCH] Typo in fbdev sysfs support, virtual_size
    
    It prints out x,x instead of x,y.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6df3cecbb95345981718b38d357c50bc3425420a
Author: Jan Kara <jack@suse.cz>
Date:   Mon Jun 13 15:52:32 2005 -0700

    [PATCH] cond_resched_lock() fix
    
    On one path, cond_resched_lock() fails to return true if it dropped the lock.
    We think this might be causing the crashes in JBD's log_do_checkpoint().
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f797f9cc5485b50c35c106b462e1bc432ec37f90
Author: Olof Johansson <olof@lixom.net>
Date:   Mon Jun 13 15:52:27 2005 -0700

    [PATCH] Fix PCI BAR size interpretation on 64-bit arches
    
    On 64-bit machines, PCI_BASE_ADDRESS_MEM_MASK and other mask constants
    passed to pci_size() are 64-bit (for example ~0x0fUL).  However, pci_size
    does comparisons between the u32 arguments and the mask, which will fail
    even though any result from pci_size is still just 32-bit.
    
    Changing the mask argument to u32 seems the obvious thing to do, since all
    arithmetic in the function is 32-bit and having a larger mask makes no
    sense.
    
    This triggered on a PPC64 system here where an adapter (VGA, as it
    happened) had a memory region base of 0xfe000000 and a sz of the same,
    matching the if (max == maxbase ...) test at the bottom of pci_size but
    failing the mask comparison.  Quite a corner case which I guess explains
    why we haven't seen it until now.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Acked-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3c77c67a443e631febf708bb0c376caede31657
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:18 2005 -0700

    [PATCH] uml: slirp and slip driver cleanups and fixes
    
    This patch merges a lot of duplicated code in the slip and slirp drivers,
    abstracts out the slip protocol, and makes the slip driver work in 2.6.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98fdffccea6cc3fe9dba32c0fcc310bcb5d71529
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:14 2005 -0700

    [PATCH] uml: use fork instead of clone
    
    Convert the boot-time host ptrace testing from clone to fork.  They were
    essentially doing fork anyway.  This cleans up the code a bit, and makes
    valgrind a bit happier about grinding it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36ca1195ad7f760a6af3814cb002bd3a3d4b4db1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:10 2005 -0700

    [PATCH] uml: build cleanups
    
    Fix a build failure when CONFIG_MODE_SKAS is disabled and make a Makefile
    comment fit in 80 columns.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8447f3f4659d91c2f11a1476522369c9d6ae6ada
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:04 2005 -0700

    [PATCH] uml: remove duplicate includes
    
    A few files include the same header twice.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 628c70da8f6c1d5a3bc3af8ca338f18ee3093438
Merge: cbd83da... a96aca8...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 18:49:44 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit a96aca88ac71f75e566981b554da44bfd0d111e8
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jun 13 18:27:13 2005 -0700

    [NETFILTER]: Advance seq-file position in exp_next_seq()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbd83da82b15292337ff2b71e619c9a3a95f6d80
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 17:51:55 2005 -0700

    Update DCO ("signoff") rules to 1.1
    
    This adds a clause that notes explicitly that the person doing the
    sign-off knows that the project (and his sign-off) is public and will
    possibly get archived and re-distributed.

commit 814d8ffd5009e13f1266759b583ef847c5350d77
Merge: 386bfcf... 1c2fb7f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 16:24:01 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 1c2fb7f93cb20621772bf304f3dba0849942e5db
Author: J. Simonetti <jeroen@simonetti.nl>
Date:   Mon Jun 13 15:19:03 2005 -0700

    [IPV4]: Sysctl configurable icmp error source address.
    
    This patch alows you to change the source address of icmp error
    messages. It applies cleanly to 2.6.11.11 and retains the default
    behaviour.
    
    In the old (default) behaviour icmp error messages are sent with the ip
    of the exiting interface.
    
    The new behaviour (when the sysctl variable is toggled on), it will send
    the message with the ip of the interface that received the packet that
    caused the icmp error. This is the behaviour network administrators will
    expect from a router. It makes debugging complicated network layouts
    much easier. Also, all 'vendor routers' I know of have the later
    behaviour.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a6ddb2a9c11fcc3e8d7517841d28c9ea206ddef
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Mon Jun 13 15:13:05 2005 -0700

    [SCTP] Fix incorrect setting of sk_bound_dev_if when binding/sending to a ipv6
    link local address.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cdac4e07748934e37e415437055ed591aed9eb21
Author: Neil Horman <nhorman@redhat.com>
Date:   Mon Jun 13 15:12:33 2005 -0700

    [SCTP] Add support for ip_nonlocal_bind sysctl & IP_FREEBIND socket option
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bca735bd0d5969497704a125b05344b92155172f
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Jun 13 15:11:57 2005 -0700

    [SCTP] Extend the info exported via /proc/net/sctp to support netstat for SCTP.
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fd9a65a76e883b7d16e72dde3f8bf20ebc1e82a
Author: Neil Horman <nhorman@redhat.com>
Date:   Mon Jun 13 15:11:24 2005 -0700

    [SCTP] Support SO_BINDTODEVICE socket option on incoming packets.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4243cac1e76228f7ba916d5df9e75a219352160a
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Jun 13 15:10:49 2005 -0700

    [SCTP]: Fix bug in restart of peeled-off associations.
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77bd91967a97e5b94ae36113efe1d9e4f68a716e
Author: Rémi Denis-Courmont <rdenis@simphalempin.com>
Date:   Mon Jun 13 15:01:34 2005 -0700

    [IPv6] Don't generate temporary for TUN devices
    
    Userland layer-2 tunneling devices allocated through the TUNTAP driver
    (drivers/net/tun.c) have a type of ARPHRD_NONE, and have no link-layer
    address. The kernel complains at regular interval when IPv6 Privacy
    extension are enabled because it can't find an hardware address :
    
    Dec 29 11:02:04 auguste kernel: __ipv6_regen_rndid(idev=cb3e0c00):
    cannot get EUI64 identifier; use random bytes.
    
    IPv6 Privacy extensions should probably be disabled on that sort of
    device. They won't work anyway. If userland wants a more usual
    Ethernet-ish interface with usual IPv6 autoconfiguration, it will use a
    TAP device with an emulated link-layer  and a random hardware address
    rather than a TUN device.
    
    As far as I could fine, TUN virtual device from TUNTAP is the very only
    sort of device using ARPHRD_NONE as kernel device type.
    
    Signed-off-by: Rémi Denis-Courmont <rdenis@simphalempin.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84427d533076a08137779b3182a71c37bf000b27
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Mon Jun 13 14:59:44 2005 -0700

    [IPV6]: Ensure to use icmpv6_socket in non-preemptive context.
    
    We saw following trace several times:
    
    |BUG: using smp_processor_id() in preemptible [00000001] code: httpd/30137
    |caller is icmpv6_send+0x23/0x540
    | [<c01ad63b>] smp_processor_id+0x9b/0xb8
    | [<c02993e7>] icmpv6_send+0x23/0x540
    
    This is because of icmpv6_socket, which is the only one user of
    smp_processor_id() in icmpv6_send(), AFAIK.
    
    Since it should be used in non-preemptive context,
    let's defer the dereference after disabling preemption
    (by icmpv6_xmit_lock()).
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 386bfcf5e8a3c34d92156c945c8db58a1e2f7c69
Merge: 980802e... a8fa3f0...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 14:47:47 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit a8fa3f0c59f8a1e1d89542cff0be5b057b684653
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Mon Jun 13 22:35:41 2005 +0100

    [PATCH] ARM: 2711/1: fix compilation on PXA targets with CONFIG_PM=n
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 979b6c135fc4d466a39d8e3ec05583e5ee30261a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 13 14:30:40 2005 -0700

    [NET]: Move the netdev list to vger.kernel.org.
    
    From: Ralf Baechle <ralf@linux-mips.org>
    
    There are archives of the old list at http://oss.sgi.com/archives/netdev
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6efd8455cff1979dd081daaa1ce3d3f1764863dc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 13 14:29:06 2005 -0700

    [IPV4]: Multipath modules need a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e7626486c3c4ce456b11a7944edf164ef76fc599
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 13 14:24:52 2005 -0700

    [TCP]: Adjust TCP mem order check to new alloc_large_system_hash
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 03722adce90a248d0bea77d390decbd05991e2d2
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Mon Jun 13 13:57:10 2005 -0700

    [NET]: linux/if_tr.h needs asm/byteorder.h
    
    <linux/if_tr.h> uses __be16, but does not directly include
    <asm/byteorder.h>.  Add this in, so that dhcp/net-tools token ring code
    can compile again.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 980802e311088fda56c16650589faa4597c695fb
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jun 13 11:14:01 2005 -0400

    [PATCH] NFS: Ensure that we revalidate the cached file length for llseek(SEEK_END)
    
    This fixes a data corruption error for mail delivery applications that
    expect to be able to do posix locking and then append writes on NFS.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c22fa3acbc2ef79ea57217643f6cd6d226963069
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 13 07:15:28 2005 -0700

    [PATCH] spin longer for ehci port reset completion
    
    This makes the EHCI driver spin a bit longer before concluding that the
    port reset failed.  "Obviously safe."
    
    It allows some devices to enumerate that previously didn't.  We've seen
    a bunch of these problem reports recently, this will make some go away.
    
    As reported by Michael Zapf <Michael.Zapf@uni-kassel.de>, some EHCI
    controllers seem to take forever to finish port resets and produce
    "port N reset error -110" type errors.  Spinning a bit longer helps.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0105338eb4e61e537ca34ae06921177cb6efcf0
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sat Jun 11 18:00:52 2005 +0100

    [PATCH] pwc bug fix
    
    The pwc chainsaw session left some setups not working.  There is a
    sanity check on compression buffers that simply isn't right any more as
    we never allocate one.
    
    This doesn't address the email and other changes.  I'll do those
    tomorrow if I get time, but it is the minimal fix for the code and basic
    feature set.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d5f7b4353dae4c7ee342c61303372fd996ca161
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Jun 11 09:45:30 2005 +1000

    [PATCH] radeonfb: don't blow up VGA console on load
    
    The current radeonfb memset's the framebuffer to 0 when loaded.  This
    removes occasional artifacts but has the nasty side effect that if you
    load radeonfb without framebuffer console, you destroy the VGA text
    buffer, font, etc...  radeon must not touch the framebuffer content when
    it doesn't "own" it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3315ede1bdf7bc706b59870df41b9cdb6e3995a
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 11:25:42 2005 +0200

    [PATCH] M68k: Mark Sun-3 NCR5380 SCSI broken
    
    M68k: Mark Sun-3 NCR5380 SCSI broken until NCR5380_abort() and
    NCR5380_bus_reset() are replaced with real new-style EH routines (the old EH
    SCSI constants were removed in 2.6.12-rc3).
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 707f919c643937e43a04e31d0502ecbf5a10445a
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 11:25:43 2005 +0200

    [PATCH] M68k: Update defconfigs
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a58e76f25432dc5e3e84d04c27bec03347ca365b
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 10:56:26 2005 +0200

    [PATCH] Remove obsolete HAVE_ARCH_GET_SIGNAL_TO_DELIVER?
    
    Now m68k no longer sets HAVE_ARCH_GET_SIGNAL_TO_DELIVER, can it be removed
    completely? Or may ARM26 still need it? Note that its usage was removed from
    kernel/signal.c about 2 months ago.
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 392a8b7efe069564bf7ed057103b1a3f41e55734
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 10:57:40 2005 +0200

    [PATCH] IrDA: IrDA: Fix CONFIG_VIA_FIR typo (double `those')
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb011b8e8eded247cb71cb6d10e47517aacbd542
Author: David Brownell <david-b@net.rmk.(none)>
Date:   Sun Jun 12 23:26:05 2005 +0100

    [PATCH] ARM: 2709/1: Systems with PCMCIA should also see IDE options (for CompactFlash memories)
    
    Patch from David Brownell
    
    The ARM generic Kconfig filters out IDE options ... except for
    an error prone ARMload of special cases.
    This adds one general case to the systems that will offer IDE options:
    kernels with PCMCIA support, which probably want to use IDE to access
    CompactFlash cards.  This might allow many (most?) of the other cases
    to disappear, for systems that only see IDE hardware through CF cards.
    Right now this one patch is used to gate access to CF cards, including
    MicroDrives, for both omap_cf and at91_cf drivers.
    
    Signed-off-by: David Brownell
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 27198d855abbfc82df69e81b6c8d2f333580114c
Merge: a7df849... f5d9b97...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 20:35:10 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6

commit a7df849c67f0a5248693e432d03f738e84d6826c
Merge: 90abb7b... 74e8ebc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 20:23:21 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6

commit 90abb7b5f3bd9271a455cd640a70c285b4fd0c89
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 09:37:21 2005 -0700

    ppc: remove two extraneous descriptors for the 405EP CPU
    
    The patch to add them keeps on getting applied, over and
    over again ;)
    
    Hopefully no more.

commit 74e8ebc55d85ca1acb3e73610965bea63cc39054
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Jun 10 19:27:51 2005 +1000

    [PATCH] remove bogus hack from radeon IRQ handler
    
    This removes a bogus hack from the radeon IRQ handler.
    There is a better fix from myself and benh in DRM CVS but I'll wait
    until 2.6.13-rc so it gets more testing.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit e98ded32f37a538b906d98059b3db71be36405a7
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Jun 10 18:47:38 2005 +1000

    [PATCH] drm add i945G pci id
    
    Add pci identifier for i945G chipset
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0086b5ec7834b78358dea3f713275a9ae2b229ec
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jun 10 14:19:02 2005 +1000

    [PATCH] ppc32: Fix nasty sleep/wakeup problem
    
    Despite all the care lately in making the powermac sleep/wakeup as
    robust as possible, there is still a nasty related to the use of cpufreq
    on PMU based machines.  Unfortunately, it affects paulus old powerbook
    so I have to fix it :)
    
    We didn't manage to understand what is precisely going on, it leads to
    memory corruption and might have to do with RAM not beeing properly
    refreshed when a cpufreq transition is done right before the sleep.
    
    The best workaround (and less intrusive at this point) we could come up
    with is included in this patch.  We basically do _not_ force a switch to
    high speed on suspend anymore (that is what is causing the problem) on
    those machines.  We still force a speed switch on wakeup (since we don't
    know what speed we are coming back from sleep at, and that seems to work
    fine).
    
    Since, during this short interval, the actual CPU speed might be
    incorrect, we also hack around by multiplying loops_per_jiffy by 2 (max
    speed factor on those machines) during early wakeup stage to make sure
    udelay's during that time aren't too short.
    
    For after 2.6.12, we'll change udelay implementation to use the CPU
    timebase (which is always constant) instead like we do on ppc64 and thus
    get rid of all those problems.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 243cd55e021baf28babdd88112ac03ae5cd4bb9c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 9 12:36:33 2005 -0700

    [PATCH] iseries_veth: Supress spurious WARN_ON() at module unload
    
    My patch from a few weeks back (now in mainline), called "Cleanup skbs to
    prevent unregister_netdevice() hanging", can cause our TX timeout code to
    fire on machines with lots of VLANs (because it takes > 2 seconds between
    when we stop the queues and when we're finished stopping the connections).
    
    When that happens the TX timeout code freaks out and does a WARN_ON()
    because as far as it's concerned there shouldn't be a TX timeout happening,
    which is fair enough.
    
    I have a "proper" fix for this, which is to a) do refcounting on
    connections and b) implement a proper ack timer so we don't keep unacked
    skbs lying around for ever.  But for 2.6.12 I propose just supressing the
    WARN_ON().  Users will still see the "NETDEV WATCHDOG" warning, but that's
    not nearly as bad as a WARN_ON() which users interpret as an Oops.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbdf1a23be1837b8bc5bcec096015ca99e00aa7
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Thu Jun 9 12:36:29 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04dc9ba882d224612f8db50fd60c8a45b843e77c
Merge: d80d6fc... 1e06276...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:37:56 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit d80d6fc08e111c411a349c4fa0c6d9bf41851087
Merge: 99fdb2f... 07c6d48...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:36:31 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 99fdb2fe523480a8748a5af18139bb1f7785c815
Merge: cf380ee... a2a6476...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:25:29 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 1e06276704c101bd1ae7b62879faaffcd7496a3e
Author: Narendra Sankar <nsankar@broadcom.com>
Date:   Fri May 6 12:00:05 2005 -0700

    [PATCH] PCI: MSI functionality broken on Serverworks GC chipset
    
    MSI functionality is broken on the GC_LE x86 chipset that Serverworks
    developed and that is being used in various platforms today. Broadcom is
    going to push out to the kernel MSI enabled Gigabit drivers (in the very
    near future), and we would like to make sure that MSI does not get
    enabled on any platforms using the GC_LE chipset (device id 0x17).
    Following the AMD 8131 example, I am including a patch to disable MSI
    functionality when a GCNB_LE is detected. Please let me know if there
    are any issues with this. This is a permanent fix for this chipset, as
    the hardware will not be updated.
    
    Signed-off-by: Narendra Sankar <nsankar@broadcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f5d9b97ee0d6d00a29bf881263510d74291fb862
Merge: 3079ca6... cf380ee...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 9 14:44:56 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 3079ca621e9e09f4593c20a9a2f24237c355f683
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 9 14:44:07 2005 -0700

    [CIFS] Fix cifs update of page cache. Write at correct offset when out of memory
    and add_to_page_cache fails.
    
    Thanks to Shaggy for pointing out the fix.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Shaggy <shaggy@us.ibm.com>

commit 07c6d48fd10a8eeae899e06876aa0b885a8e2a1b
Author: incent Sanders <vince@kyllikki.org>
Date:   Thu Jun 9 21:59:22 2005 +0100

    [PATCH] ARM: 2708/1: Fix hackkit CPU Frequency build faliure
    
    Patch from Vincent Sanders
    
    This fixes the "multiple definitions of cpufreq_get" build faliure on
    the hackkit SA1100 platform.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 7aa0b0d5ab5eed29a49fce55868456bca073d77e
Author: incent Sanders <vince@kyllikki.org>
Date:   Thu Jun 9 21:59:21 2005 +0100

    [PATCH] ARM: 2707/2: Fix badge4 CPU Frequency build faliure
    
    Patch from Vincent Sanders
    
    This fixes the "multiple definitions of cpufreq_get" build faliure on
    the Badge4 SA1100 platform.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit a2a64769d0d3cc0380b4b6ecdcb781a2f790a69e
Author: Christoph Lameter <clameter@sgi.com>
Date:   Thu Jun 9 12:29:00 2005 -0700

    [IA64] Fix race condition in the rt_sigprocmask fastcall
    
    current->blocked will be set to the value of current->thread_info->flags if the
    cmpxchg to update thread_info->flags fails. For performance reasons the store into
    current->blocked was placed in the cmpxchg loop. However, the cmpxchg overwrites the
    register holding the value to be stored. In the rare case of a retry the value of
    thread_info->flags will be written into current->blocked.
    
    The fix is to use another register so that the register containing the current->blocked
    value is not overwritten.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cf380ee7308db0f067ceb2ae8b852838788bf453
Merge: 1834cd9... 76854ce...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 10:44:48 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit 12035d64565ae7ecbc7fe906e7fcc8a4a71a3789
Author: Dave Neuer <dneuer@org.rmk.(none)>
Date:   Thu Jun 9 17:40:55 2005 +0100

    [PATCH] ARM: 2706/1: Fix compile on SA-based iPAQs and remove stale CREDITS info
    
    Patch from Dave Neuer
    
    This fixes the "multiple definitions of cpufreq_get" errors on
    StrongARM-based iPAQs.
    
    Signed-off-by: Dave Neuer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 1834cd9fd27763f4e55184e4138a19ba36620174
Merge: 6952df0... 4e71e47...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 09:04:11 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 4e71e47da3367e8df5994a17fb421ddeaa5025e3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 9 16:53:28 2005 +0100

    [PATCH] ARM: Remove zero-byte sized file
    
    Remove the remaining zero byte file left over from the Xscale
    fixes.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 76854ceac3ef3408ab9a50a2521147fb14779f58
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Thu Jun 2 10:34:11 2005 +0100

    [PATCH] USB: ftdi_sio: avoid losing received data in tty-ldisc
    
    ftdi_sio: Avoid losing bytes at tty-ldisc.
    
    This patch was originally developed by Daniel Smertnig.  I
    (Ian Abbott) made a few changes.  It has been tested by both
    Daniel and I, at least for raw, non-canonical receive data
    processing.
    
    Here is Daniel's original description of the patch:
    
    ===
    During a project in which I was using a FTDI 232BM to
    transmit data at relative high speeds (625kBit/s), I
    noticed a problem where data was lost even if flow
    control was enabled: The FTDI-Driver receives 512 Bytes
    of data over USB at a time, which consists of 8 64-Byte
    packets. Subtracting the 2 bytes of status information
    included in each packet this gives 496 "real" data
    bytes per read.
    
    This data is passed (indirectly, via the flip buffers)
    to the tty line discipline which takes care of
    throttling when there the free buffer space reaches
    TTY_THRESHOLD_THROTTLE (128). Because the FTDI driver
    processes up to 496 bytes at a time, throttling won't
    happen in time and the line discipline will discard the
    remaining bytes.
    
    To avoid this the patch passes data in 62-byte blocks
    to the tty layer and checks the available space in the
    ldisc-buffers. If there isn't enough free space,
    processing the rest of the data is delayed using a
    workqueue.
    
    Note: The original problem should be easily
    reproducible with a userspace program which does slow &
    small reads.
    ===
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Daniel Smertnig <daniel.smertnig@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9f793d2c77ec5818679e4747c554d9333cecf476
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Jun 6 13:54:59 2005 -0700

    [PATCH] USB: fix ub issues
    
    This smoothes two imperfections:
    - Increase number of LUNs per device from 4 to 9. The best solution
      would be to remove this limit altogether, but that has to wait until
      the time when more than 26 hosts are allowed.
    - Replace mdelay with msleep in a probing routine.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 03e49d40ea3436cae0fe43708f11584130ee4a0c
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon Jun 6 15:48:04 2005 -0400

    [PATCH] PCI Hotplug: fix CPCI reference counting bug
    
    Here's a patch that fixes up the pci_dev refcounting in the CPCI code.
    I've done some testing against it and it seems fine here.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6952df035509717bdc46194b2a3d6ffb9349f267
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Jun 6 15:56:03 2005 +0800

    [PATCH] sg traverse fix for __atapi_pio_bytes()
    
    Problem:
    Incorrect md5sum when using ATAPI PIO mode to verify a distro CD.
    
    Root cause:  sg traverse problem.
    In __atapi_pio_bytes(), if qc->cursg++ is increased and "goto
    next_page" is executed, then sg is not updated to the new qc->cursg
    and the old sg is overwritten with the new data.
    
    Changes:
    - Replace "goto next_page" with "goto next_sg" to make sg updated.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit e1dd23a0012c3929737798fda9fede0e783f4ff3
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Jun 8 13:02:25 2005 +0200

    [PATCH] sata_sil: Fix FIFO PCI Bus Arbitration kernel oops
    
    Correct this.
    
    diff --git a/drivers/scsi/sata_sil.c b/drivers/scsi/sata_sil.c

commit 5273a00d9c763108397658d440618f7ac3e40f83
Merge: ce10d97... 98e5640...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:36:31 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit ce10d979053379553757c3b178a138facaddff82
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 8 21:59:15 2005 +1000

    [PATCH] ppc64: Fix PER_LINUX32 behaviour
    
    This patch fixes some bugs in the ppc64 PER_LINUX32 implementation,
    noted by Juergen Kreileder:
    
    * uname(2) doesn't respect PER_LINUX32, it returns 'ppc64' instead of 'ppc'
    * Child processes of a PER_LINUX32 process don't inherit PER_LINUX32
    
    Along the way I took the opportunity to move things around so that
    sys_ppc32.c only has 32-bit syscall emulation functions and to remove
    the obsolete "fakeppc" command line option.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fee02f80e68abbcc45ed3c5dd5ed09d04a284791
Merge: 4f58802... ed7fce6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:22:16 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit 4f58802fae8a51d9e79454746584175c14f84519
Author: Lars Marowsky-Bree <lmb@suse.de>
Date:   Wed Jun 8 15:50:31 2005 -0700

    [PATCH] dm: Handle READA requests in dm-mpath.c
    
    READA errors failing with EWOULDBLOCK/EAGAIN do not constitute a valid
    reason for failing the path; this lead to erratic errors on DM multipath
    devices.  This error can be safely propagated upwards without failing the
    path.
    
    Acked-by: Kevin Corry <kevcorry@us.ibm.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05062d96a23ec0959ee5ea969f40813170c73c0e
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Wed Jun 8 15:50:20 2005 -0700

    [PATCH] ia64: fix floating-point preemption problem
    
    There've been reports of problems with CONFIG_PREEMPT=y and the high
    floating point partition.  This is caused by the possibility of preemption
    and rescheduling on a different processor while saving or restioirng the
    high partition.
    
    The only places where the FPU state is touched are in ptrace, in
    switch_to(), and where handling a floating-point exception.  In switch_to()
    preemption is off.  So it's only in trap.c and ptrace.c that we need to
    prevent preemption.
    
    Here is a patch that adds commentary to make the conditions clear, and adds
    appropriate preempt_{en,dis}able() calls to make it so.  In trap.c I use
    preempt_enable_no_resched(), as we're about to return to user space where
    the preemption flag will be checked anyway.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f829fd23c87918374bac0d90404fe12f0e788d52
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Wed Jun 8 15:50:00 2005 -0700

    [PATCH] ppc64 kprobes: remove spurious MSR_SE masking
    
    Remove spurious MSR_SE reset during kprobe processing.
    single_step_exception() already does it for us.  Reset it to be safe when
    executing the fault_handler.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63224d1e8b4cf87cc7420201a8cb3b44b9bf0b40
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Wed Jun 8 15:49:41 2005 -0700

    [PATCH] ppc64 kprobes: correct kprobe registration return values
    
    Add stricter checks during kprobe registration.  Return correct error value so
    insmod doesn't succeed.  Also printk reason for registration failure.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42442ed5744b03f5351a142649b8b4c97e6950ab
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 8 15:49:25 2005 -0700

    [PATCH] revert x86_64-use-the-e820-hole-to-map-the-iommu-agp-aperture
    
    Martin Bligh determined that this patch is causing his test box to not boot.
    Revert.
    
    Andi Kleen <ak@muc.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5754c9b649e414f1e3a3ea2ec15e42ed3e42eeb8
Author: Keith Owens <kaos@ocs.com.au>
Date:   Wed Jun 8 15:49:07 2005 -0700

    [PATCH] Stop arch/i386/kernel/vsyscall-note.o being rebuilt every time
    
    arch/i386/kernel/vsyscall-note.o is not listed as a target so its .cmd file
    is neither considered as a target nor is it read on the next build.  This
    causes vsyscall-note.o to be rebuilt every time that you run make, which
    causes vmlinux to be rebuilt every time.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8acd944ea511af02485b1709c07ac7aac12aa48
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Wed Jun 8 15:48:52 2005 -0700

    [PATCH] sparc32: silence access_ok() warnings
    
    The fact that access_ok() doesn't use some of its arguments trips some
    unused variable warnings.  This patch silences them permanently.
    
    Signed-off-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit beb9e1c3f32a0f878765c7c1142f91083739c5bd
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Wed Jun 8 15:48:42 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f96ddb4fb40961a8ebebf7a00bbfaad55aacbd2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:27 2005 -0700

    [PATCH] uml: clean up error path
    
    This cleans an error path which used to leak file descriptors by returning
    without trying to tidy up.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 501cb02b431fb88c7f157c46c8b54de59d1dd463
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:13 2005 -0700

    [PATCH] uml: fix strace -f
    
    It turns out that we need to check for pending signals when a newly forked
    process is run for the first time.  With strace -f, strace needs to know about
    the forked process before it gets going.  If it doesn't, then it ptraces some
    bogus values into its registers, and the process segfaults.  So, I added calls
    to interrupt_end, which does that, plus checks for reschedules.  There
    shouldn't be any of those, but x86 does the same thing, so I'm copying that
    behavior to be safe.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da00d9a5466558ccd9e7b7d04b13d7cb9160c876
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:01 2005 -0700

    [PATCH] uml: compile fixes for gcc 4
    
    This is a bunch of compile fixes provoked by building UML with gcc 4.  There
    are a bunch of signedness mismatches, a couple of uninitialized references,
    and a botched C99 structure initialization which had somehow gone unnoticed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3df59529ad1045da61698bb5dd8ebaa547aeb46f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:47:50 2005 -0700

    [PATCH] uml: make the emulated iomem driver work on 2.6
    
    This makes the minimal fixes needed to make the UML iomem driver work in 2.6.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a38133298fc678335a0229e97b6161a7ac6fec84
Merge: 97d26b8... 70aa488...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:06:15 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 98e56405521b74b4826f855d45ef7859f34548ff
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:11:19 2005 -0700

    [PKT_SCHED]: Fix numeric comparison in meta ematch
    
    This patch is brought to you by the department of applied stupidity.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1e284a4bd827db2288af9536664b44590e419eb
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:11:02 2005 -0700

    [PKT_SCHED]: Dump classification result for basic classifier
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4890062960cbc4d3cebdbd8261a68bc85efcf5d4
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:10:48 2005 -0700

    [PKT_SCHED]: Allow socket attributes to be matched on via meta ematch
    
    Adds meta collectors for all socket attributes that make sense
    to be filtered upon. Some of them are only useful for debugging
    but having them doesn't hurt.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b824979aeccbfd997e6e5dbe75c47d586b5a2923
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:10:22 2005 -0700

    [PKT_SCHED]: Fix typo in NET_EMATCH_STACK help text
    
    Spotted by Geert Uytterhoeven <geert@linux-m68k.org>.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e3876605450979fe52a1a03e7eb78a89bf59e76a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jun 8 14:56:01 2005 -0700

    [NET]: Fix sysctl net.core.dev_weight
    
    Changing the sysctl net.core.dev_weight has no effect because the weight
    of the backlog devices is set during initialization and never changed.
    
    This patch propagates any changes to the global value affected by sysctl
    to the per-cpu devices. It is done every time the packet handler
    function is run.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 699a411451a32cc111410f44f172b265f6d679c8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jun 8 14:55:42 2005 -0700

    [NET]: Allow controlling NAPI device weight with sysfs
    
    Simple interface to allow changing network device scheduling weight
    with sysfs. Please consider this for 2.6.12, since risk/impact is small.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8181b8c1f3a69fe5abcc51cb732eb512ccd1566a
Author: Gabor Fekete <gfekete@cc.jyu.fi>
Date:   Wed Jun 8 14:54:38 2005 -0700

    [IPV6]: Update parm.link in ip6ip6_tnl_change()
    
    Signed-off-by: Gabor Fekete <gfekete@cc.jyu.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed7fce6c13bdd802817e1988d67047d432e7e30b
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jun 8 14:15:52 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6d1cfbab4de64f2d0c5b0f81177ade0d75b69288
Author: Michael Chan <mchan@broadcom.com>
Date:   Wed Jun 8 14:13:14 2005 -0700

    [TG3]: Fix 5700/5701 DMA corruption on Apple G4.
    
    Fix 5700/5701 DMA write corruption on Apple G4 by detecting the Apple
    UniNorth PCI 1.5 chipset and adjusting the DMA write boundary to 16. DMA
    test fails to detect the problem with this chipset.
    
    Thanks to Manuel Perez Ayala for reporting the problem and helping to
    debug it.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70aa488cff83c965c9e1850f48d82b000d0d6c1c
Author: Keith Owens <kaos@sgi.com>
Date:   Fri May 27 23:09:00 2005 -0700

    [IA64] Extract correct break number for break.b
    
    break.b does not store the break number in cr.iim, instead it stores 0,
    which makes all break.b instructions look like BUG().  Extract the
    break number from the instruction itself.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 86ebacd360767f6a5cf9c8810977593dccf3f3da
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 8 12:12:48 2005 -0700

    [IA64] Update comment to describe modes set in default control register.
    
    Christian Hildner pointed out that the comment did not match what the
    code does in cpu_init() when we set up the default control register.
    Patch based on suggestions from Ken Chen.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 97d26b8042a6f14cc4a19e84e911a953363e3d69
Merge: 5131bf5... dcef1f6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 11:43:17 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 5131bf5db73529e972459060d8559f72e036fe53
Merge: 358c6ac... ff39bc7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 11:42:44 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 866ba633a81c1e179038f7527809d9513160a6f7
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Jun 6 02:04:00 2005 -0700

    [IA64] Module gp must point to valid memory
    
    Some bits of the kernel assume that gp always points to valid memory,
    in particular PHYSICAL_MODE_ENTER() assumes that both gp and sp are
    valid virtual addresses with associated physical pages.  The IA64
    module loader puts gp well past the end of the module, with no physical
    backing.  Offsets on gp are still valid, but physical mode addressing
    breaks for modules.  Ensure that gp always falls within the module
    body.  Also ensure that gp is 8 byte aligned.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ff39bc772ad18d8c7f9334926053b718d7932de0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 8 19:26:47 2005 +0100

    [PATCH] Serial: remove unused variable in sa1100 driver
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit dcef1f634657dabe7905af3ccda12cf7f0b6fcc1
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Wed Jun 8 19:00:47 2005 +0100

    [PATCH] ARM: 2664/2: add support for atomic ops on pre-ARMv6 SMP systems
    
    Patch from Nicolas Pitre
    
    Not that there might be many of them on the planet, but at least RMK
    apparently has one.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit aeabbbbe126f3d5e61e2db07629443cd10932bb2
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Wed Jun 8 19:00:16 2005 +0100

    [PATCH] ARM: 2705/1: fix writesw for misaligned source pointer
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 57cfa5e97ff60d909a7e0a5f6e4d0a49aa3e2aec
Author: Giorgio Padrin <giorgio@mandarinlogiq.org>
Date:   Wed Jun 8 19:00:15 2005 +0100

    [PATCH] ARM: 2703/1: pxa-regs.h: complete I2S GPIO alternate functions for PXA27x
    
    Patch from Giorgio Padrin
    
    The patch completes I2S GPIO alternate functions for PXA27x, adding I2S_SYSCLK.
    File: pxa-regs.h .
    
    Signed-off-by: Giorgio Padrin <giorgio@mandarinlogiq.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit ad597bd518559f59ede8d01262cdf4467e13282e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Jun 8 10:45:00 2005 -0700

    [IA64] Fill holes in FIXADDR_USER space with zero pages.
    
    This fixes an oops reported by Jason Baron.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 358c6ac0dd4ffa5e44d59d4008a2627aa2f02b6f
Author: Ananth N Mavinakayanahalli <amavin@redhat.com>
Date:   Wed Jun 8 15:33:43 2005 +1000

    [PATCH] ppc64 kprobes: don't eat dabr/iabr exceptions
    
    Kprobes was eating the hardware instruction and data address
    breakpoint exceptions.  This patch fixes it; kprobes doesn't use those
    exceptions at all and should ignore them.
    
    Signed-off-by: Ananth N Mavinakayanahalli <amavin@redhat.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7840e5e95c1a8622425f11454600a49b6c718886
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jun 8 15:12:00 2005 +1000

    [PATCH] ppc64: print negative numbers correctly in boot wrapper
    
    if num has a value of -1, accessing the digits[] array will fail and the
    format string will be printed in funny way, or not at all. This happens if
    one prints negative numbers.
    Just change the code to match lib/vsprintf.c
    asm/div64.h cant be used because u64 maps to u32 for this build.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 35d1bc90546d1f0af198886ae8062a550142d926
Merge: 1d6757f... f8f98a9...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 07:57:17 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-arm

commit f8f98a9335db4a7d6285b785180fad720bf22864
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 8 15:28:24 2005 +0100

    [PATCH] ARM: Fix Xscale copy_page implementation
    
    The ARM copypage changes in 2.6.12-rc4-git1 removed the preempt locking
    from the copypage functions which broke the XScale implementation.
    This patch fixes the locking on XScale and removes the now unneeded
    minicache code.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Checked-by: Richard Purdie

commit 1d6757fbff5bc86e94e59ab0d7bdd7e71351d839
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Jun 7 18:37:01 2005 -0400

    [PATCH] NFS: Fix lookup intent handling
    
    We should never apply a lookup intent to anything other than the last
    path component in an open(), create() or access() call.
    
    Introduce the helper nfs_lookup_check_intent() which always returns
    zero if LOOKUP_CONTINUE or LOOKUP_PARENT are set, and returns the
    intent flags if we're on the last component of the lookup.
    By doing so, we fix a bug in open(O_EXCL), where we may end up
    optimizing away a real lookup of the parent directory.
    
    Problem noticed by Linda Dunaphant <linda.dunaphant@ccur.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eba4f669d6ec9be4173bb2619e9b8500b3c36542
Merge: 93cffff... 66bb8bf...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 7 13:41:30 2005 -0700

    Merge of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart

commit 93cffffa19960464a52f9c78d9a6150270d23785
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Jun 7 13:22:18 2005 -0700

    [PATCH] PCI: do VIA IRQ fixup always, not just in PIC mode
    
    At least some VIA chipsets require the fixup even in IO-APIC mode.
    
    This was found and debugged with the patient assistance of Stian
    Jordet <liste@jordet.nu> on an Asus CUV266-DLS motherboard.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a86d1f4301fad4ff44c1f614c897000bc574ab2f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Jun 7 13:22:14 2005 -0700

    [PATCH] input: disable scroll feature on AT keyboards
    
    This patch disables the scroll feature on AT keyboards by default, because
    it causes the numbers of mouse devices to shift, breaking user setups.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad95d6098dd1e94a09d2a1fdf39fd8281fcd8958
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Tue Jun 7 13:22:09 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eda9937656e0b9879ca521140fe61cbc9788c398
Author: Matthew Dobson <colpatch@us.ibm.com>
Date:   Tue Jun 7 13:22:05 2005 -0700

    [PATCH] send_IPI_mask_sequence() warning fix
    
    In file included from arch/i386/kernel/smp.c:235:
    include/asm-i386/mach-numaq/mach_ipi.h:4: warning: `send_IPI_mask_sequence'
    declared inline after its definition
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66bb8bf8b235ba4d37fda14375827864977c6a3e
Author: David Mosberger <davidm@napali.hpl.hp.com>
Date:   Mon Apr 4 13:29:43 2005 -0700

    [PATCH] Replace check_bridge_mode() with (bridge->mode & AGSTAT_MODE_3_0).
    
    [AGPGART] Replace check_bridge_mode() with (bridge->mode & AGSTAT_MODE_3_0).
    
    As mentioned earlier, the current check_bridge_mode() code assumes
    that AGP bridges are PCI devices.  This isn't always true.  Definitely
    not for HP zx1 chipset and the same seems to be the case for SGI's AGP
    bridge.
    
    The patch below fixes the problem by picking up the AGP_MODE_3_0 bit
    from bridge->mode.  I feel like I may be missing something, since I
    can't see any reason why check_bridge_mode() wasn't doing that in the
    first place.  According to the AGP 3.0 specs, the AGP_MODE_3_0 bit is
    determined during the hardware reset and cannot be changed, so it
    seems to me it should be safe to pick it up from bridge->mode.
    
    With the patch applied, I can definitely use AGP acceleration both
    with AGP 2.0 and AGP 3.0 (one with an Nvidia card, the other with an
    ATI FireGL card).
    
    Unless someone spots a problem, please apply this patch so 3d
    acceleration can work on zx1 boxes again.
    
    This makes AGP work again on machines with an AGP bridge that isn't a
    PCI device.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 07eee78ea8ba2d0b7b20551c35a3e7dd158d50bb
Author: Keir Fraser <Keir.Fraser@cl.cam.ac.uk>
Date:   Wed Mar 30 13:17:04 2005 -0800

    [PATCH] AGP fix for Xen VMM
    
    When Linux is running on the Xen virtual machine monitor, physical
    addresses are virtualised and cannot be directly referenced by the AGP
    GART.  This patch fixes the GART driver for Xen by adding a layer of
    abstraction between physical addresses and 'GART addresses'.
    
    Architecture-specific functions are also defined for allocating and freeing
    the GATT.  Xen requires this to ensure that table really is contiguous from
    the point of view of the GART.
    
    These extra interface functions are defined as 'no-ops' for all existing
    architectures that use the GART driver.
    
    Signed-off-by: Keir Fraser <keir@xensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e29b545cb153f230fbd8ff4c19bc98ab950f9f5c
Author: Michael Werner <werner@mrcoffee.engr.sgi.com>
Date:   Sun Mar 27 22:08:42 2005 -0800

    [PATCH] sgi-agp: fixes a problem with accessing GART memory in sgi_tioca_insert_memory and sgi_tioca_remove_memory
    
    This patch fixes a problem with accessing GART memory in
    sgi_tioca_insert_memory and sgi_tioca_remove_memory.
    
     sgi-agp.c |   12 +++++++++---
     1 files changed, 9 insertions(+), 3 deletions(-)
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit d0de98fa16169562bd74913c6c9b3857f9065c79
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue May 31 19:50:49 2005 +0100

    [PATCH] i945G patch for agpgart
    
    Attached is a small patch for i945G support against 2.6.11.11.
    
    From: Alan Hourihane <alanh@fairlite.demon.co.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2bfe94905d3601774c6418c020ba830c118578b4
Merge: 26abd53... 3f5948f...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 7 11:29:43 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 3f5948fa2cbbda1261eec9a39ef3004b3caf73fb
Author: David Mosberger <davidm@napali.hpl.hp.com>
Date:   Mon Jun 6 15:50:09 2005 -0700

    [PATCH] Include <linux/config.h> before testing CONFIG_ACPI
    
    I'm not sure why this issue is suddenly showing, but without this
    patchlet, the zx1 config won't compile anymore (e.g., to see the
    compilation-error, look for "***" in [1]).
    
    [1] http://www.gelato.unsw.edu.au/kerncomp/results//2005-06-06-17-00/zx1_defconfig-log.html
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74262de5d15fe0cab9e6fe75655a502d3c90acca
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Mon Jun 6 15:50:08 2005 -0700

    [PATCH] ppc32: add <linux/compiler.h> to <asm/sigcontext.h>
    
    On ppc32, <asm/sigcontext.h> uses __user, but doesn't directly include
    <linux/compiler.h>.  This adds that in.  Without this, glibc will not
    compile.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef130126cc8794f748d7513735ecb4d3d99fa39e
Merge: 5065cc0... 15def7b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 16:59:55 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit 5065cc02ccf9212d31ecb7fcd63d734e242e64b1
Merge: 8f5bb04... fa04ae5...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 16:58:53 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 26abd53d8e9e51bbeea0b4772e8dffece3eeff38
Merge: ff89bf3... 8f5bb04...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Jun 6 15:42:07 2005 -0700

    auto merge with /home/aegl/GIT/linus

commit 15def7bfb6902aa2b2bc67059f26d696fb27c235
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 6 15:22:56 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ba27794197a18168b99ccecfb7b799f18b64426
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 6 15:16:20 2005 -0700

    [TG3] Fix link failure in 5701
    
    On some 5701 devices with older bootcode, the LED configuration bits in
    SRAM may be invalid with value zero. The fix is to check for invalid
    bits (0) and default to PHY 1 mode. Incorrect LED mode will lead to
    error in programming the PHY.
    
    Thanks to Grant Grundler for debugging the problem.
    
    >From Grant:
    | In May, 2004,  tg3 v3.4 changed how MAC_LED_CTRL (0x40c) was getting
    | programmed and how to determine what to program into LED_CTRL. The new
    | code trusted NIC_SRAM_DATA_CFG (0x00000b58) to indicate what to write
    | to LED_CTRL and MII EXT_CTRL registers. On "IOX Core Lan", SRAM was
    | saying MODE_MAC (0x0) and that doesn't work.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49cabf49abd7676d026a61baabf5aae9337a82be
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 6 15:15:17 2005 -0700

    [TG3]: Add TSO firmware license
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9beb1d587f690d5b2f9087f8f10c0ff9f6b66886
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Jun 6 15:14:35 2005 -0700

    [TG3]: Update pci.ids for BCM5752
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fa04ae5c09f3dfedbc923c2954a9a26a573833f1
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 6 15:07:19 2005 -0700

    [ETHTOOL]: Check correct pointer in ethtool_set_coalesce().
    
    It was checking the "GET" function pointer instead of
    the "SET" one.  Looks like a cut&paste error :-)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f5bb0438b86d1a5393176ceeec2836fd469edf8
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Mon Jun 6 14:46:32 2005 -0700

    [PATCH] binfmt_flat mmap flag fix
    
    Make sure that binfmt_flat passes the correct flags into do_mmap().  nommu's
    validate_mmap_request() will simple return -EINVAL if we try and pass it a
    flags value of zero.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d671a1cbf7c7a5c5562106d39eb7f830ae5273ae
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:14 2005 -0700

    [PATCH] namei fixes (19/19)
    
    __do_follow_link() passes potentially worng vfsmount to touch_atime().  It
    matters only in (currently impossible) case of symlink mounted on something,
    but it's trivial to fix and that actually makes more sense.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 634ee7017b31e46e28c0bd2cb488213331bfd39a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:13 2005 -0700

    [PATCH] namei fixes (18/19)
    
    Cosmetical cleanups - __follow_mount() calls in __link_path_walk() absorbed
    into do_lookup().
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58c465eba4d7ed307c4c7cb3382ba7ee565e8858
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:13 2005 -0700

    [PATCH] namei fixes (17/19)
    
    follow_mount() made void, reordered dput()/mntput() in it.
    
    follow_dotdot() switched from struct vfmount ** + struct dentry ** to
    struct nameidata *; callers updated.
    
    Equivalent transformation + fix for too-early-mntput() race.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39ca6d49759346d4710c759d443eec8048b27213
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:12 2005 -0700

    [PATCH] namei fixes (16/19)
    
    Conditional mntput() moved into __do_follow_link().  There it collapses with
    unconditional mntget() on the same sucker, closing another too-early-mntput()
    race.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9d29a29669f96903d9950bb881c2a393fd33849
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:11 2005 -0700

    [PATCH] namei fixes (15/19)
    
    Getting rid of sloppy logics:
    
    a) in do_follow_link() we have the wrong vfsmount dropped if our symlink
    had been mounted on something.  Currently it worls only because we never
    get such situation (modulo filesystem playing dirty tricks on us).  And
    it obfuscates already convoluted logics...
    
    b) same goes for open_namei().
    
    c) in __link_path_walk() we have another "it should never happen" sloppiness -
    out_dput: there does double-free on underlying vfsmount and leaks the covering
    one if we hit it just after crossing a mountpoint.  Again, wrong vfsmount
    getting dropped.
    
    d) another too-early-mntput() race - in do_follow_mount() we need to postpone
    conditional mntput(path->mnt) until after dput(path->dentry).  Again, this one
    happens only in it-currently-never-happens-unless-some-fs-plays-dirty
    scenario...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b7b9772e4c3d87e649d4c419d2487aacf1235aa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:10 2005 -0700

    [PATCH] namei fixes (14/19)
    
    shifted conditional mntput() into do_follow_link() - all callers were doing
    the same thing.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba7a4c1a76f56c607560f1676680ff491747bdae
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:08 2005 -0700

    [PATCH] namei fixes (13/19)
    
    In open_namei() exit_dput: we have mntput() done in the wrong order -
    if nd->mnt != path.mnt we end up doing
    	mntput(nd->mnt);
    	nd->mnt = path.mnt;
    	dput(nd->dentry);
    	mntput(nd->mnt);
    which drops nd->dentry too late.  Fixed by having path.mnt go first.
    That allows to switch O_NOFOLLOW under if (__follow_mount(...)) back
    to exit_dput, while we are at it.
    
    Fix for early-mntput() race + equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a15a3f6fc67d910f43098acec6e19d25a37d7cb9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:08 2005 -0700

    [PATCH] namei fixes (12/19)
    
    In open_namei() we take mntput(nd->mnt);nd->mnt=path.mnt; out of the if
    (__follow_mount(...)), making it conditional on nd->mnt != path.mnt instead.
    
    Then we shift the result downstream.
    
    Equivalent transformations.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f12dbfbb6286c725c283a169f8f05e89a86848b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:07 2005 -0700

    [PATCH] namei fixes (11/19)
    
    shifted conditional mntput() calls in __link_path_walk() downstream.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e13b210f6f7bdc44dfee0a9bbd633a32db0d6333
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:06 2005 -0700

    [PATCH] namei fixes (10/19)
    
    In open_namei(), __follow_down() loop turned into __follow_mount().
    Instead of
    	if we are on a mountpoint dentry
    		if O_NOFOLLOW checks fail
    			drop path.dentry
    			drop nd
    			return
    		do equivalent of follow_mount(&path.mnt, &path.dentry)
    		nd->mnt = path.mnt
    we do
    	if __follow_mount(path) had, indeed, traversed mountpoint
    		/* now both nd->mnt and path.mnt are pinned down */
    		if O_NOFOLLOW checks fail
    			drop path.dentry
    			drop path.mnt
    			drop nd
    			return
    		mntput(nd->mnt)
    		nd->mnt = path.mnt
    
    Now __follow_down() can be folded into follow_down() - no other callers left.
    We need to reorder dput()/mntput() there - same problem as in follow_mount().
    
    Equivalent transformation + fix for a bug in O_NOFOLLOW handling - we used to
    get -ELOOP if we had the same fs mounted on /foo and /bar, had something bound
    on /bar/baz and tried to open /foo/baz with O_NOFOLLOW.  And fix of
    too-early-mntput() race in follow_down()
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 463ffb2e9d39c2a3fd8c3c1d4a34e01f2078f972
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:05 2005 -0700

    [PATCH] namei fixes (9/19)
    
    New helper: __follow_mount(struct path *path).  Same as follow_mount(), except
    that we do *not* do mntput() after the first lookup_mnt().
    
    IOW, original path->mnt stays pinned down.  We also take care to do dput()
    before mntput() in the loop body (follow_mount() also needs that reordering,
    but that will be done later in the series).
    
    The following are equivalent, assuming that path.mnt == x:
    (1)
    	follow_mount(&path.mnt, &path.dentry)
    (2)
    	__follow_mount(&path);
    	if (path->mnt != x)
    		mntput(x);
    (3)
    	if (__follow_mount(&path))
    		mntput(x);
    
    Callers of follow_mount() in __link_path_walk() converted to (2).
    
    Equivalent transformation + fix for too-late-mntput() race in __follow_mount()
    loop.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d671d5e51400aab03c713a16ce3545aa81ad7b1c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:04 2005 -0700

    [PATCH] namei fixes (8/19)
    
    In open_namei() we never use path.mnt or path.dentry after exit: or ok:.
    Assignment of path.dentry in case of LAST_BIND is dead code and only
    obfuscates already convoluted function; assignment of path.mnt after
    __do_follow_link() can be moved down to the place where we set path.dentry.
    
    Obviously equivalent transformations, just to clean the air a bit in that
    region.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd4e91d3bca8d5527289f5984cf32e9fe6fb8293
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:03 2005 -0700

    [PATCH] namei fixes (7/19)
    
    The first argument of __do_follow_link() switched to struct path *
    (__do_follow_link(path->dentry, ...) -> __do_follow_link(path, ...)).
    
    All callers have the same calls of mntget() right before and dput()/mntput()
    right after __do_follow_link(); these calls have been moved inside.
    
    Obviously equivalent transformations.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 839d9f93c9f1623fb37234d464d739617879d97e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:02 2005 -0700

    [PATCH] namei fixes (6/19)
    
    mntget(path->mnt) in do_follow_link() moved down to right before the
    __do_follow_link() call and rigth after loop: resp.
    
    dput()+mntput() on non-ELOOP branch moved up to right after __do_follow_link()
    call.
    
    resulting
    loop:
    	mntget(path->mnt);
    	path_release(nd);
    	dput(path->mnt);
    	mntput(path->mnt);
    replaced with equivalent
    	dput(path->mnt);
    	path_release(nd);
    
    Equivalent transformations - the reason why we have that mntget() is that
    __do_follow_link() can drop a reference to nd->mnt and that's what holds
    path->mnt.  So that call can happen at any point prior to __do_follow_link()
    touching nd->mnt.  The rest is obvious.
    
    NOTE: current tree relies on symlinks *never* being mounted on anything.  It's
    not hard to get rid of that assumption (actually, that will come for free
    later in the series).  For now we are just not making the situation worse than
    it is.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1be4a0900be5d2c2fd9cd012e3a153e1ea47b96a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:01 2005 -0700

    [PATCH] namei fixes (5/19)
    
    fix for too early mntput() in open_namei() - we pin path.mnt down for the
    duration of __do_follow_link().  Otherwise we could get the fs where our
    symlink lived unmounted while we were in __do_follow_link().  That would end
    up with dentry of symlink staying pinned down through the fs shutdown.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d73ffe16b8baafae6e9249acee6b50c24099c6de
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:01 2005 -0700

    [PATCH] namei fixes (4/19)
    
    path.mnt in open_namei() set to mirror nd->mnt.
    
    nd->mnt is set in 3 places in that function - path_lookup() in the beginning,
    __follow_down() loop after do_last: and __do_follow_link() call after
    do_link:.
    
    We set path.mnt to nd->mnt after path_lookup() and __do_follow_link().  In
    __follow_down() loop we use &path.mnt instead of &nd->mnt and set nd->mnt to
    path.mnt immediately after that loop.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e7506e4dd9e40c189fcbec95d5dbc92f2e5926a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:00 2005 -0700

    [PATCH] namei fixes (3/19)
    
    Replaced struct dentry *dentry in namei with struct path path.  All uses of
    dentry replaced with path.dentry there.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f92b3bcec0fa2e2d775b589850097f9dc6b2de2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:35:59 2005 -0700

    [PATCH] namei fixes (2/19)
    
    All callers of do_follow_link() do mntget() right before it and
    dput()+mntput() right after.  These calls are moved inside do_follow_link()
    now.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90ebe5654febe3555a2516d51d3d251226d35fdb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:35:58 2005 -0700

    [PATCH] namei fixes
    
    OK, here comes a patch series that hopefully should close all
    too-early-mntput() races in fs/namei.c.  Entire area is convoluted as hell, so
    I'm splitting that series into _very_ small chunks.
    
    Patches alread in the tree close only (very wide) races in following symlinks
    (see "busy inodes after umount" thread some time ago).  Unfortunately, quite a
    few narrower races of the same nature were not closed.  Hopefully this should
    take care of all of them.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4481e8eea761857367162b0957277d5524fbea63
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Jun 6 13:35:57 2005 -0700

    [PATCH] ppc32: Fix incorrect CPU_FTR fixup usage for unified caches
    
    Runtime feature support for unified caches was testing a userland feature
    flag (PPC_FEATURE_UNIFIED_CACHE) instead of a cpu feature flag
    (CPU_FTR_SPLIT_ID_CACHE).  Luckily the current defined bit mask for cpu
    features and userland features do not overlap so this only causes an issue
    on machines with a unified cache, which is extremely rare on PPC today.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e2894e51d6407e47226a60c0d19bf384642c55a
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Mon Jun 6 13:35:56 2005 -0700

    [PATCH] h8300 build error fix
    
    h8300 was missing a few definitions.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3399ba5b70eccc918ea4ab2630cac68f5c8ff845
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Mon Jun 6 13:35:55 2005 -0700

    [PATCH] moxa: do not ignore input
    
    Stop using tty internal structure in mxser_receive_chars(), use
    tty_insert_flip_char(tty, ch flag); instead.
    
    Without this change driver ignores any rx'ed chars.
    
    Run tested.
    
    Cc: Alan Cox <alan@redhat.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a51171816826b074828fa96cb6ef60fc3b13631a
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Jun 6 13:35:54 2005 -0700

    [PATCH] broken fault_in_pages_readable call in generic_file_buffered_write()
    
    fault_in_pages_readable() is being passed an incorrect `end' address, which
    can result in writes accidentally faulting in pages which will not be affected
    by the write() call.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b68177ccd12866d9f19cafad212b861c9d02a8c
Merge: d0d2f2d... 7cef567...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Mon Jun 6 09:57:33 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 7cef5677ef3a8084f2588ce0a129dc95d65161f6
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 08:22:29 2005 -0700

    Linux 2.6.12-rc6
    
    Getting ready for the real release..

commit eae936e21bd726f9d9555f2262d439fbcd61dccf
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Jun 4 15:43:34 2005 -0700

    [PATCH] serial: update NEC VR4100 series serial support
    
    - Changed the return value of unknown type to NULL.
    
    - Deleted the NULL check of dev_id in siu_interrupt().
    
    - Deleted the NULL check of port->membase in siu_shutdown().
    
    - Added the NULL check of port->membase to siu_startup().
    
    - Removed early_uart_ops. Now using vr41xx_siu standerd one.
    
    - Changed KSEG1ADDR() in siu_console_setup() to ioremap().
    
    - When uart_add_one_port() failed, changed to set NULL to port->dev.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f26d583e41aedad8159acf9533fa287d7209dfbf
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Sat Jun 4 15:43:33 2005 -0700

    [PATCH] s390: deadlock in appldata
    
    The system might hang when using appldata_mem with high I/O traffic and a
    large number of devices.  The spinlocks bdev_lock and swaplock are acquired
    via calls to si_meminfo() and si_swapinfo() from a tasklet, i.e.  interrupt
    context, which can lead to a deadlock.  Replace tasklet with work queue.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 595bf2aacae96d0f87352a1ff5476b79e52e212f
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Jun 4 15:43:32 2005 -0700

    [PATCH] s390: in_interrupt vs. in_atomic
    
    The condition for no context in do_exception checks for hard and soft
    interrupts by using in_interrupt() but not for preemption.  This is bad for
    the users of __copy_from/to_user_inatomic because the fault handler might call
    schedule although the preemption count is != 0.  Use in_atomic() instead
    in_interrupt().
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5c3a6d8fe923b8780b9cd10e72344b8cf8518b5
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Jun 4 15:43:32 2005 -0700

    [PATCH] s390: uml ptrace fixes
    
    To make UML build and run on s390, I needed to do these two little
    changes:
    
    1) UML includes some of the subarch's (s390) headers. I had to
       change one of them with the following one-liner, to make this
       compile. AFAICS, this change doesn't break compilation of s390
       itself.
    
    2) UML needs to intercept syscalls via ptrace to invalidate the syscall,
       read syscall's parameters and write the result with the result of
       UML's syscall processing. Also, UML needs to make sure, that the host
       does no syscall restart processing. On i386 for example, this can be
       done by writing -1 to orig_eax on the 2nd syscall interception
       (orig_eax is the syscall number, which after the interception is used
       as a "interrupt was a syscall" flag only.
       Unfortunately, s390 holds syscall number and syscall result in gpr2 and
       its "interrupt was a syscall" flag (trap) is unreachable via ptrace.
       So I changed the host to set trap to -1, if the syscall number is changed
       to an invalid value on the first syscall interception.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 778959db97c7ed8eed4025916916b17a4629ce3d
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Jun 4 15:43:30 2005 -0700

    [PATCH] s390: ptrace peek and poke
    
    The special cases of peek and poke on acrs[15] and the fpc register are not
    handled correctly.  A poke on acrs[15] will clobber the 4 bytes after the
    access registers in the thread_info structure.  That happens to be the kernel
    stack pointer.  A poke on the fpc with an invalid value is not caught by the
    validity check.  On the next context switch the broken fpc value will cause a
    program check in the kernel.  Improving the checks in peek and poke fixes
    this.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 854715be73b221596c7127d4042e1120d4539e19
Author: Qu Fuping <fs@ercist.iscas.ac.cn>
Date:   Sat Jun 4 15:43:29 2005 -0700

    [PATCH] mpage_end_io_write() I/O error handling fix
    
    When fsync() runs wait_on_page_writeback_range() it only inspects pages which
    are actually under I/O (PAGECACHE_TAG_WRITEBACK).  If a page completed I/O
    prior to wait_on_page_writeback_range() looking at it, it is supposed to have
    recorded its I/O error state in the address_space.
    
    But mpage_mpage_end_io_write() forgot to set the address_space error flag in
    this case.
    
    Signed-off-by: Qu Fuping <fs@ercist.iscas.ac.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3045064054a93d303094cfb96d980cc3c82a64c
Merge: 8be3de3... 910313a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 4 08:18:39 2005 -0700

    Automatic merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 910313aa1db1b0c63ee9684bb4f35c17e7192f43
Merge: b9a6eaf... 462cee2...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 04:31:44 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch r8169-fix

commit 17d82fcc6a15887b7138d35802ab8fc5f249794f
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Jun 3 22:18:52 2005 +0100

    [PATCH] ARM: 2700/1: Disable IXP2000 IRQs at bootup
    
    Patch from Deepak Saxena
    
    The IXDP2800 bootloader does not disable IRQs before jumping into
    the kernel and this is causing the Grand Unified KGDB to crash
    the system when we do an early call to trap_init() and irq handlers
    have not yet been registered. This patch disables IRQs before we
    jump into the kernel.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 8be3de3fd8469154a2b3e18a4712032dac5b4a53
Author: Nathan Lynch <ntl@pobox.com>
Date:   Fri Jun 3 14:25:25 2005 -0500

    [PATCH] prom_find_machine_type typo breaks pSeries lpar boot
    
    A typo in prom_find_machine_type from Ben's recent patch "ppc64: Fix
    result code handling in prom_init" prevents pSeries LPAR systems from
    booting.
    
    Tested on a pSeries 570 and OpenPower 720 (both Power5 LPAR).
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8775420d2fbcfff866995471ea5f6130d14d121c
Author: Todd Poynor <tpoynor@com.rmk.(none)>
Date:   Fri Jun 3 20:52:27 2005 +0100

    [PATCH] ARM: 2691/1: PXA27x sleep fixes take 2
    
    Patch from Todd Poynor
    
    PXA27x sleep fixes:
    * set additional sleep/wakeup registers for Mainstone boards.
    * move CKEN=0 to pxa25x-specific code; that value is harmful on pxa27x.
    * save/restore additional registers, including some found necessary for
    C5 processors and/or newer blob versions.
    * enable future support of additional sleep modes for PXA27x (eg,
    standby, deep sleep).
    * split off cpu-specific sleep processing between pxa27x and pxa25x into
    separate files (partly in preparation for additional sleep modes).
    Includes fixes from David Burrage.
    
    Signed-off-by: Todd Poynor
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 718a30a5cf0a9142f716a49853bd4b4a25a8da1b
Author: Mike Frysinger <vapier@org.rmk.(none)>
Date:   Fri Jun 3 20:52:26 2005 +0100

    [PATCH] ARM: 2696/1: remove ';' in ELF_DATA define in asm-arm{,26}/elf.h
    
    Patch from Mike Frysinger
    
    the ELF_DATA define in both arm asm subdirs of linux/include/ contain a
    semicolon at the end.  this of course will cause any code that tries to use
    ELF_DATA in assignment or comparison to fail.  no other arch has a semicolon
    in their ELF_DATA defines.
    
    Signed-off-by: Mike Frysinger
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 105bb2698b54a838165947199f1c8be5c2e7d9bb
Author: Albrecht Dreß <albrecht.dress@com.rmk.(none)>
Date:   Fri Jun 3 20:52:26 2005 +0100

    [PATCH] ARM: 2694/1: [s3c2410/dma] release irq properly to fix kernel oops
    
    Patch from Albrecht Dreß
    
    Problem:
    When a module requests a DMA channel via the function s3c2410_dma_request(), this function requests the appropriate irq under the name of the client module. When the client module is unloaded, it calls s3c2410_dma_free() which does not free the irq. Consequently, when e.g. running "cat /proc/interrupts", the irq owner points to freed memory, leading to a kernel oops.
    File:
    linux/arch/arm/mach-s3c2410/dma.c
    Fix:
    trivial, below
    
    Signed-off-by: Albrecht Dreß
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 4ab5c01c7cc28f29d5cf5f2a591cb6f7bbece48e
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Jun 3 20:52:25 2005 +0100

    [PATCH] ARM: 2692/1: Fix compile warnings in include/asm-arm/arch-ixp2000/io.h
    
    Patch from Deepak Saxena
    
    This patch fixes the following warnings:
    include/asm/arch/io.h: In function `insw':
    include/asm/arch/io.h:78: warning: comparison of distinct pointer types
    lacks acast
    include/asm/arch/io.h:79: warning: comparison of distinct pointer types
    lacks acast
    include/asm/arch/io.h: In function `outsw':
    include/asm/arch/io.h:103: warning: comparison of distinct pointer types
    lacks a cast
    include/asm/arch/io.h:104: warning: comparison of distinct pointer types
    lacks a cast
    include/asm/arch/io.h: In function `inw':
    include/asm/arch/io.h:127: warning: comparison of distinct pointer types
    lacks a cast
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit ff89bf3bc0534aa03b5375aa906544d96911bad4
Author: Dean Nelson <dcn@sgi.com>
Date:   Fri Jun 3 05:25:00 2005 -0700

    [IA64] fix setting of sn_hub_info->shub_1_1_found
    
    Fix a bug in which shub_1_1_found is not being properly initialized or set,
    resulting in the improper setting of sn_hub_info->shub_1_1_found.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d8d088d25822b0199fdfb392085e1cf8a5914a97
Merge: b05a720... c92715b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 3 08:54:02 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6

commit b05a720b374ac6af05b2fd4c70bb2c61a9f461ca
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Jun 3 11:35:20 2005 +1000

    [PATCH] m68knommu: fix scheduling and race problems in idle loop
    
    Re-work the m68knommu specific idle code according to suggestions
    from Nick Piggin <nickpiggin@yahoo.com.au>.
    
    A couple of rules that we need to follow:
    
    1. Preempt should now disabled over idle routines. Should only be enabled
    to call schedule() then disabled again.
    
    3. When cpu_idle finds (need_resched() == 'true'), it should call schedule().
    It should not call schedule() otherwise.
    
    Also fix interrupt locking around the need_resched() and cpu stop state
    so that there is no race condition.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4d340cf869b2b63e1043eed72aa2eab6fa2cb2c
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Jun 3 08:01:35 2005 -0700

    [PATCH] USB: resolve Zaurus problem
    
    This "obvious" one-liner is needed to recognize Zaurus SL 6000;
    it just checks two GUIDs not just one.
    
    OSDL bugids #4512 and #4545 seem to be duplicates of this report.
    
    From: Gerald Skerbitz <gsker@tcfreenet.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c92715b3c22e94105a8fd9e4a23047d05c5077e7
Author: Nathan Lynch <ntl@pobox.com>
Date:   Thu Jun 2 17:15:09 2005 -0500

    [SCSI] fix slab corruption during ipr probe
    
    With CONFIG_DEBUG_SLAB=y I see slab corruption messages during boot on
    pSeries machines with IPR adapters with any 2.6.12-rc kernel.
    
    The change which seems to have introduced the problem is "SCSI: revamp
    target scanning routines" and may be found at:
    http://marc.theaimsgroup.com/?l=bk-commits-head&m=111093946426333&w=2
    
    In order to revert that in a 2.6.12-rc1 tree, I had to revert "target
    code updates to support scanned targets" first:
    http://marc.theaimsgroup.com/?l=bk-commits-head&m=111094132524649&w=2
    
    With both patches reverted, the corruption messages go away.
    
    ipr: IBM Power RAID SCSI Device Driver version: 2.0.13 (February 21,
    2005)
    ipr 0001:d0:01.0: Found IOA with IRQ: 167
    ipr 0001:d0:01.0: Starting IOA initialization sequence.
    ipr 0001:d0:01.0: Adapter firmware version: 020A005C
    ipr 0001:d0:01.0: IOA initialized.
    scsi0 : IBM 570B Storage Adapter
      Vendor: IBM       Model: VSBPD4E1  U4SCSI  Rev: 4770
      Type:   Enclosure                          ANSI SCSI revision: 02
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM       Model: VSBPD4E1  U4SCSI  Rev: 4770
      Type:   Enclosure                          ANSI SCSI revision: 02
    Slab corruption: start=c0000001e8de5268, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<c00000000029c3a0>](.scsi_target_dev_release+0x28/0x50)
    080: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6a
    Prev obj: start=c0000001e8de5050, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<0000000000000000>](0x0)
    000: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    010: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    Next obj: start=c0000001e8de5480, len=512
    Redzone: 0x170fc2a5/0x170fc2a5.
    Last user: [<c000000000228d7c>](.as_init_queue+0x5c/0x228)
    000: c0 00 00 01 e8 83 26 08 00 00 00 00 00 00 00 00
    010: 00 00 00 00 00 00 00 00 c0 00 00 01 e8 de 54 98
    Slab corruption: start=c0000001e8de5268, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<c00000000029c3a0>](.scsi_target_dev_release+0x28/0x50)
    080: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6a
    Prev obj: start=c0000001e8de5050, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<0000000000000000>](0x0)
    000: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    010: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    Next obj: start=c0000001e8de5480, len=512
    Redzone: 0x170fc2a5/0x170fc2a5.
    Last user: [<c000000000228d7c>](.as_init_queue+0x5c/0x228)
    000: c0 00 00 01 e8 83 26 08 00 00 00 00 00 00 00 00
    010: 00 00 00 00 00 00 00 00 c0 00 00 01 e8 de 54 98
    ...
    
    I did some digging and the problem seems to be a refcounting issue in
    __scsi_add_device.  The target gets freed in scsi_target_reap, and
    then __scsi_add_device tries to do another device_put on it.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 18e144d32cd3dae6953c385e4b376ef9688b61b0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri May 27 15:04:47 2005 -0700

    [SCSI] qla2xxx: fix bad locking during eh_abort
    
    
    Correct incorrect locking order in qla2xxx_eh_abort() handler which
    would case a hang during certain code-paths.
    
    With extra pieces to fix the irq state in the locks.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 39a66b8d22a36cfa1a48f7f59c6a4639d9c99653
Author: Craig Shelley <craig@microtron.org.uk>
Date:   Fri May 27 00:09:56 2005 +0100

    [PATCH] USB: CP2101 Add support for flow control
    
    Added support to get/set flow control line levels using TIOCMGET and
    TIOCMSET.
    Added support for RTSCTS hardware flow control.
    cp2101_get_config and cp2101_set_config modified to support long request
    strings, required for configuring flow control.
    
    Signed-off-by: Craig Shelley <craig@microtron.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 719df469cb51199316ae2a11c75a8046be34b899
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri May 6 00:55:56 2005 +0400

    [PATCH] USB: update urb documentation
    
    On Wed, May 04, 2005 at 01:37:30PM -0700, David Brownell wrote:
    > On Wednesday 04 May 2005 12:19 pm, Roman Kagan wrote:
    > > struct urb {
    > > 	/* private, usb core and host controller only fields in the urb */
    > > 	...
    > > 	struct list_head urb_list;	/* list pointer to all active urbs */
    > > 	...
    > > };
    > >
    > > Is it safe to use it for driver's purposes when the driver owns the urb,
    > > that is, starting from the completion routine until the urb is submitted
    > > with usb_submit_urb()?
    >
    > Right now, it should be.
    
    Great!  FWIW I've briefly tested a modified version of usbatm using
    the list head in struct urb instead of creating a wrapper struct, and I
    haven't seen any failures yet.  So I tend to believe that your "should
    be" actually means "is" :)
    
    > > If it is, can it be guaranteed in future, e.g.
    > > by moving the list head into the public section of struct urb?
    >
    > In fact I'm not sure why it ever got called "private" to usbcore/hcds.
    > I thought the idea was that it should be like urb->status, reserved for
    > whoever controls the URB.
    
    OK then how about the following (essentially documentation) patch?
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1724757e5ab5219b46876ac6e4e362a4b2dcfa86
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sat May 21 00:45:55 2005 -0700

    [PATCH] USB Storage: Add unusual_devs for Trumpion Voice Recorder
    
    The original entry of this patch was submitted by Filippo Bardelli
    <filibard@libero.it>, with cleanups and patch-ification by me.
    
    This corrects the subclass that the device reports.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 77ddecc3c047e4e9bd7332d3173def93ea2de1ad
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Wed May 18 13:12:49 2005 +0100

    [PATCH] USB: make MODALIAS code a bit smaller devices
    
    This patch makes the code to provide modalias in sysfs for usb devices
    56 bytes smaller in i386, while making it clear that the first part of
    the modalias string is the same no matter what the device class is.
    
    Signed-Off-By: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 58cfe9113e485f7e04bd0eac4fc4251b330af501
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Mon May 23 17:00:48 2005 -0700

    [PATCH] USB: add Option Card driver
    
    This patch adds a new driver for "Option" cards.  This is a GSM data card,
    controlled by three "serial ports" which are connected via an OHCI adapter,
    all located on an oversized PC-Card.  It's sold by several GSM service
    providers.
    
    Traditionally, this card has been accessed via the standard serial driver
    and appropriate vendor= and product= options.  However, testing has
    revealed several problems with this approach, including hung data transfers
    and lost data blocks when receiving.
    
    Therefore, I've written a separate driver.
    
    Signed-off-by: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4871d3be13ea2b33edc9ba6fbcc30fc047087be7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 2 22:18:12 2005 -0700

    [PATCH] USB: add Vernier devices to HID blacklist
    
    They aren't really HID devices.
    
    Damm microsoft HID driver, that thing has caused more companies to have
    to do this kind of hack...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dc1d1003e8309ef8e5153ce0c00cce76144abbdb
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 10 00:17:17 2005 -0500

    [PATCH] USB: hid-core: add Earthmate lt-20 productid to blacklist table
    
    This patch adds the DeLorme Earthmate lt-20 productid to the hid
    blacklist table.  This patch ensures the lt-20 can be claimed by the
    appropriate driver (cypress_m8).
    
    Adds the product id 0x200, of the DeLorme Earthmate lt-20, to the hid
    blacklist table.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5ce0482e18193a15223911515ee44373cffb35b8
Author: Ping Cheng <pingc@wacom.com>
Date:   Thu May 5 15:12:57 2005 -0700

    [PATCH] USB: add new wacom device to usb hid-core list
    
    - add Intuos3 and Cintiq 21UX
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d7771a33bf2b23fc6d0b9c133fb0c00670154f10
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 18:49:59 2005 +0200

    [PATCH] USB: remove drivers/usb/media/pwc/ChangeLog
    
    This patch removes the outdated ChangeLog file for this driver.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4800078d9ed4bd20b1b27f56e7b68cfa0d73038
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun May 1 16:05:40 2005 -0700

    [PATCH] USB: Support multiply-LUN devices in ub
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -urp -X dontdiff linux-2.6.12-rc3/drivers/block/ub.c linux-2.6.12-rc3-lem/drivers/block/ub.c

commit aa447acb9291518506a1aec644db47fa6c6e36eb
Merge: 3176046... 5ba0eac...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 2 17:39:49 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 5ba0eac6e0b7e2889649a1105d97c600595e2bb1
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Jun 2 16:48:05 2005 -0700

    [NET]: Fix HH_DATA_OFF.
    
    When the hardware header size is a multiple of HH_DATA_MOD, HH_DATA_OFF()
    incorrectly returns HH_DATA_MOD (instead of 0). This affects ieee80211 layer
    as 802.11 header is 32 bytes long.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b597ef4712c05c962640a655386a7f06cc1a1fbc
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 2 16:36:00 2005 -0700

    [NET]: Fix locking in shaper driver.
    
     o use a semaphore instead of an opencoded and racy lock
     o move locking out of shaper_kick and into the callers - most just
       released the lock before calling shaper_kick
     o remove in_interrupt() tests.  from ->close we can always block, from
       ->hard_start_xmit and timer context never
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 317604633eface11cb7452298fa44a34624633dc
Merge: 0fd56f6... d7aaf48...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 2 16:07:03 2005 -0700

    Merge of 'docs' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit d7aaf48128ec7fcefcee92ea22833afc1a80e268
Merge: decc6d0... 1e86d1c...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Thu Jun 2 18:43:09 2005 -0400

    Automatic merge of /spare/repo/linux-2.6/.git branch HEAD

commit decc6d0b68f27bbb8a0357fccf41936a3c196b03
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jun 2 18:42:33 2005 -0400

    libata: kernel-doc warning fixes

commit 0baab86b00cdf9785ac2bb2ce1ab63995b3866ca
Author: Edward Falk <efalk@google.com>
Date:   Thu Jun 2 18:17:13 2005 -0400

    libata: update inline source docs

commit d0d2f2df65ddea9a30ddd117f769bfff65d3fc56
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 2 15:12:36 2005 -0700

    [CIFS] Update cifs version number and fix whitespace
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 0fd56f67890acf7904c83e7de6cb71723eb1c962
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 14:04:00 2005 -0700

    [PATCH] drivers/net/hamradio/baycom_epp.c: cleanups
    
    The times when tricky goto's produced better codes are long gone.
    
    This patch should express the same in a better way.
    
    (Also fixes the final gcc-4.0 x86 compile error)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4eb2a93319d61923635c84a5f5e68965b14c754
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:03 2005 -0700

    [PATCH] ppc64: remove decr_overclock
    
    Now that we have HZ=1000 there is much less of a need for decr_overclock.
    Remove it.
    
    Leave spread_lpevents but move it into iSeries_setup.c.  We should look at
    making event spreading the default some day.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6dc2f0c7df6cefda5932ac8bcd9ca5ef45de36ee
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:02 2005 -0700

    [PATCH] ppc64: cleanup iseries runlight support
    
    The iseries has a bar graph on the front panel that shows how busy it is.
    The operating system sets and clears a bit in the CTRL register to control
    it.
    
    Instead of going to the complexity of using a thread info bit, just set and
    clear it in the idle loop.
    
    Also create two helper functions, ppc64_runlatch_on and ppc64_runlatch_off.
    
    Finally don't use the short form of the SPR defines.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79f1248962cfa1e11a5610e0349bc3515687516d
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:02 2005 -0700

    [PATCH] ppc64: cleanup SPR definitions
    
    There are a bunch of irrelevant SPR definitions in asm/processer.h.  Cut
    them down a bit, also add a DABR_TRANSLATION define which will be used
    shortly.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e3b11a9be6ac94bf4af81757b6a10e7e65b846f
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 2 14:02:01 2005 -0700

    [PATCH] ext3: fix list scanning in __cleanup_transaction
    
    Fix a bug in list scanning that can cause us to skip the last buffer on the
    checkpoint list (and hence fail to do any progress under some rather
    unfavorable conditions).
    
    The problem is we first do jh=next_jh and then test
    
    	} while (jh!=last_jh);
    
    Hence we skip the last buffer on the list (if it was not the only buffer on
    the list).  As we already do jh=next_jh; in the beginning of the loop we
    are safe to just remove the assignment in the end.  It can happen that 'jh'
    will be freed at the point we test jh != last_jh but that does not matter
    as we never *dereference* the pointer.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00ea81459c279f14a7b344320a71c94f60f88929
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 2 14:02:00 2005 -0700

    [PATCH] ext3: fix log_do_checkpoint() assertion failure
    
    Fix possible false assertion failure in log_do_checkpoint().  We might fail
    to detect that we actually made a progress when cleaning up the checkpoint
    lists if we don't retry after writing something to disk.  The patch was
    confirmed to fix observed assertion failures for several users.
    
    When we flushed some buffers we need to retry scanning the list.
    Otherwise we can fail to detect our progress.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 467ca22d3371f132ee225a5591a1ed0cd518cb3d
Merge: 1272567... 1e86d1c...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 2 14:42:23 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4fef0304eeaa4156db5625e3578f92ed94645a43
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 13:06:36 2005 -0700

    [IPV6]: Kill export of fl6_sock_lookup.
    
    There is no usage of this EXPORT_SYMBOL in the kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2c1aa54746bace5d03cc66521fbf3bb6fb2f916
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 2 13:04:07 2005 -0700

    [ATM]: [drivers] kill pointless NULL checks and casts before kfree()
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3087e1ff8d64da7b6b527e89d0c0864ab36294b8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Thu Jun 2 13:03:15 2005 -0700

    [ATM]: fix ATM makefile for out-of-source-tree builds
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64a6c7aa3836e357499d2e822388f30c11f13604
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 13:02:25 2005 -0700

    [IPVS]: remove net/ipv4/ipvs/ip_vs_proto_icmp.c
    
    ip_vs_proto_icmp.c was never finished.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e86d1c648508fd50e6c9960576b87906a7906ad
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jun 2 14:11:37 2005 +1000

    [PATCH] ppc64: Fix result code handling in prom_init
    
    prom_init(), the trampoline code that "talks" to Open Firmware during
    early boot, has various issues with managing OF result codes. Some of my
    recent fixups in fact made the problem worse on some platforms.
    
    This patch reworks it all. Tested on g5, Maple, POWER3 and POWER5.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0d6d71440a3a35c6fc2dde09f8e8d4d7bd44dda
Merge: 16a789c... d8caebd...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 19:17:59 2005 -0700

    Merge of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 16a789c11df5069576ef89f817348dbc6f3bd87e
Merge: 72a95d1... 7e29875...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 16:32:03 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6

commit d8caebd285a084ee1e4d484ce597865228614067
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 22:37:00 2005 -0700

    [IA64] fix compilation warning in sys32_epoll_wait()
    
    This gets rid of an unused variable `error' in sys_ia32.c:sys32_epoll_wait()
    
    Getting rid of this one makes parsing the output of the kernecomp
    autobuild easier --- searching for `Error' to find a problem kept
    hitting this one, even though it's only a warning.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b655913bf364603d17ad770dc4fb80e60555a255
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 22:34:00 2005 -0700

    [IA64] Cleanup compile warnings for ski config
    
    The attached patch cleans up a compilation warning when ACPI
    is turned off (i.e., when compiling for the Ski simulator).
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 12725675e26d52c39e856d341035b94bf7802458
Merge: af6f5e3... eff910a...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Wed Jun 1 15:02:37 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 72a95d14f5047d9efb1e82a9f0b9f230f06d6e3d
Merge: f9a2223... 3683983...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 13:21:58 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit f9a22239257561df80ef54fc8f31880e2fb2a27b
Merge: eff910a... 88314ee...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 13:20:35 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit eff910a91ac04ab1d9e210d4f721484af3b39c8d
Merge: a340ba1... 06299db...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:56:33 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit a340ba1071ccec7da5d5c689471ff8bc07fe022d
Merge: c10fccd... 4a4e578...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:56:10 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit c10fccddf00cb216349ce3171ce2e39d7c70371b
Merge: 5f64f73... bcc488a...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:55:46 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit 5f64f73957f6cae3222f97f2599199ee562f7f3f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 17:07:27 2005 +1000

    [PATCH] ppc32/ppc64: cleanup /proc/device-tree
    
    This cleans up the /proc/device-tree representation of the Open Firmware
    device-tree on ppc and ppc64.  It does the following things:
    
     - Workaround an issue in some Apple device-trees where a property may
       exist with the same name as a child node of the parent.  We now
       simply "drop" the property instead of creating duplicate entries in
       /proc with random result...
    
     - Do not try to chop off the "@0" at the end of a node name whose unit
       address is 0.  This is not useful, inconsistent, and the code was
       buggy and didn't always work anyway.
    
     - Do not create symlinks for the short name and unit address parts of a
       node.  These were never really used, bloated the memory footprint of
       the device-tree with useless struct proc_dir_entry and their matching
       dentry and inode cache bloat.
    
    This results in smaller code, smaller memory footprint, and a more
    accurate view of the tree presented to userland.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f93ea2349832c040bdf66dc7495aa87bfe3394b8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 17:02:22 2005 +1000

    [PATCH] ppc32: Apple device-tree bug fix
    
    This is the ppc32 patch equivalent to the just posted ppc64 one working
    around a bug in Apple device-trees regarding the "cpus" nodes.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44e4665cc9d856d15f04a012c78e4ab48f71290b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 14:54:25 2005 +1000

    [PATCH] ppc64: Fix a device-tree bug on Apple's
    
    Apple's Open Firmware has a funny bug when creating the /cpus nodes
    where it leaves a dangling '\0' character in the CPU name which ends up
    appearing in the full path of the node. This is bogus and
    confuses /proc/device-tree badly.
    
    This patch strips those bogus zero's from the node full path when
    reading the device-tree from Open Firmware. The "name" property is not
    modified and still contains the spurrious 0 (it basically contains 0
    tailing 0 instead of one) but that shouldn't be a problem.
    
    An equivalent patch for ppc32 will follow shortly
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88314ee73fd75eb32abdcb3119cd303c116d4500
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 31 19:13:52 2005 -0700

    [SPARC64]: Refine PCI strbuf ctx-based flush.
    
    The initial peek read PIO of the match register is just a waste.
    Just do the flush writes first, as that is more efficient.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 21e3024cbddb712f6a078bf4132d7682d3c4e35e
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed May 25 14:43:56 2005 -0700

    [PATCH] cpufreq-stats driver documentation
    
    Documentation for cpufreq stats.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 58f1df25403988b73d7129fcd2c4d4c24017f1af
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed May 25 14:46:50 2005 -0700

    [PATCH] cpufreq-stats driver updates
    
    Changes to the cpufreq stats driver:
    * Changes the way P-state transition table looks in /sysfs providing more
      clear output
    * Changes the time unit in the output from HZ to clock_t
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f94ea640a28230f82a4395c34e1290748a9f6586
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:52 2005 -0700

    [CPUFREQ] Typos.
    
    cpfureq developers cant spel.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 6778bae0f2f1d4af1b8bb876c992ea094ee958b4
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] longhaul - adjust transition latency.
    
    From patch by: Ken Staton <ken_staton@agilent.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1174631418fbb2c0c6946081b0b7d391f5d92861
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] Longhaul: Magic timer frobbing.
    
    As mandated by the spec, disable timer around transitions.
    
    From code by : Ken Staton <ken_staton@agilent.com
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3be6a48f3c8df1b2fbbe57face95a03d167bda1b
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] longhaul - disable PCI mastering around transition.
    
    The spec states that we have to do this, which is *horrid*.
    
    Based on code from: Ken Staton <ken_staton@agilent.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e131832ca7d3a3e5f9c7624bb310a7747dc2b57c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:50 2005 -0700

    [CPUFREQ] ondemand governor default sampling downfactor as 1
    
    [PATCH] [5/5] ondemand governor default sampling downfactor as 1
    
    Make default sampling downfactor 1.
    This works better with earlier auto downscaling change in ondemand governor.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c29f1403098135bdef75b190a5037db514701031
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:50 2005 -0700

    [CPUFREQ] ondemand governor automatic downscaling
    
    [PATCH] [4/5] ondemand governor automatic downscaling
    
    Here is a change of policy for the ondemand governor. The modification
    concerns the frequency downscaling. Instead of decreasing to a lower
    frequency when the CPU usage is under 20%, this new policy automatically
    scales to the optimal frequency. The optimal frequency being the lowest
    frequency which provides enough power to not trigger the upscaling policy.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 9c7d269b9b05440dd0fe92d96f4e5d7e73dd7238
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative governor idle_tick clean-up
    
    [PATCH] [3/5] ondemand,conservative governor idle_tick clean-up
    
    Ondemand and conservative governor clean-up, it factorises the idle ticks
    measurement.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 790d76fa979f55bfc49a6901bb911778949b582d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative governor store the idle ticks for all cpus
    
    [PATCH] [2/5] ondemand,conservative governor store the idle ticks for all cpus
    
    Ondemand, conservative governor did not store prev_cpu_idle_up into
    prev_cpu_idle_down for other CPUs than the current CPU.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit dac1c1a56279b4545a822ec7bc770003c233e546
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative minor bug-fix and cleanup
    
    [PATCH] [1/5] ondemand,conservative minor bug-fix and cleanup
    
    Attached patch fixes some minor issues with Alexander's patch and related
    cleanup in both ondemand and conservative governor.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1206aaac285904e3e3995eecbf4129b6555a8973
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:48 2005 -0700

    [CPUFREQ] Allow ondemand stepping to be changed by user.
    
    Adds support so that the cpufreq change stepping is no longer fixed at 5% and
    can be changed dynamically by the user
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c11420a616039e2181e4ecbffb4d125d39e6877d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:48 2005 -0700

    [CPUFREQ] Prevents un-necessary cpufreq changes if we are already at min/max
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3d5ee9e55d13de28d2fa58d6e13f2e4d3a5f8b1a
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] Add support to cpufreq_ondemand to ignore 'nice' cpu time
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b9170836d1aa4ded7cc1ac1cb8fbc7867061c98c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] Conservative cpufreq governer
    
    A new cpufreq module, based on the ondemand one with my additional patches
    just posted.  This one is more suitable for battery environments where its
    probably more appealing to have the cpu freq gracefully increase and decrease
    rather than flip between the min and max freq's.
    
    N.B. Bruno Ducrot pointed out that the amd64's "do have unacceptable latency
    between min and max freq transition, due to the step-by-step requirements
    (200MHz IIRC)"; so AMD64 users would probably benefit from this too.
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b53cc6ead046093477ec7a3354d620337101ea5b
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] fix up comment in cpufreq.h
    
    Fix up comment in cpufreq.h stating transition latency should be passed
    in microseconds -- it was decided long ago to switch to nanoseconds.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 065b807ca1f5bdbeb081e3cf75ac8de9be8ac212
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] dual-core powernow-k8
    
    With the release of the dual-core AMD Opterons last week,
    it's high time that cpufreq supported them.  The attached
    patch applies cleanly to 2.6.12-rc3 and updates powernow-k8
    to support the latest Athlon 64 and Opteron processors.
    
    Update the driver to version 1.40.0 and provide support
    for dual-core processors.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7f335d4ef2d50a693fad70b8fa053d0382f4a45c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] make cpufreq_gov_dbs static
    
    This patch makes a needlessly global and EXPORT_SYMBOL'ed struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c5d28fb297efaa97c4b90e36f9dff3066e7f2778
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] Recalibrate cpu_khz [2/2]
    
    Some cpufreq drivers (at that time, only powernow-k7) need to recalibrate the
    cpu_khz at runtime.
    
    Signed-off-by: Bruno Ducrot <ducrot@poupinou.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 91350ed49bf3613e243c2e216228cd4ae8f32516
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:45 2005 -0700

    [CPUFREQ] Recalibrate cpu_khz [1/2]
    
    We have to recalibrate cpu_khz in order to use the current FID instead the max
    FID since some BIOS do not put the processor at maximum frequency at POST.
    Also, some BIOS will change the processor frequency at our back after cpu_khz
    was calibrate.  Finally, this will fix a long standing bug when we do
    something like this:
    
    # rmmod powernow-k7
    # modprobe powernow-k7
    
    Signed-off-by: Bruno Ducrot <ducrot@poupinou.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit bf6fc9fd2d848d06b8f6c4caccef1dba9ef8c4c6
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:45 2005 -0700

    [CPUFREQ] AMD Elan SC520 cpufreq driver.
    
    From: Sean Young <sean@mess.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3310010818aa12145905faf97ffe3742acc842e2
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] Add warning comment about default governors.
    
    This comes up time and time again. Until its fixed, place this
    comment in the Kconfig which should stem the flow of resubmissions.
    
    Signed-off-by: Rob Weryk <rjweryk@uwo.ca>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 6f4095af6df7aa365ecf18473c8b05c5f6c38a78
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] speedstep-smi: it works on at least one P4M
    
    The speedstep-smi driver actually works on >=1 notebook with a
    Pentium 4-M CPU where all other cpufreq drivers fail. Therefore,
    allow speedstep-smi on P4Ms again, but warn users of likely failure
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 6fe711658fcf92d39d84c0b7e6332ed6625dc520
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] ondemand: trivial clean-ups
    
    Trivial ondemand governor clean-ups:
    - change from sampling_rate_in_HZ() to the official function
    usecs_to_jiffies().
    - use for_each_online_cpu() to instead of using "if (cpu_online(i))"
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8282864a96ef0a7b88ee9e4b357e08504131394d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:43 2005 -0700

    [CPUFREQ] speedstep-centrino: Pentium 4 - M (HT) support
    
    The Pentium 4 - Ms (HT) with CPUID 0xF34 and 0xF41 seem to support
    centrino-like enhanced speedstep; however, no "table" support is possible.
    Therefore, put NULL entries into speedstep-centrino.c
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 78ee998fd46ed4cc647ee442d2a5492f389ee27a
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:43 2005 -0700

    [CPUFREQ] cpufreq-core: reduce warning messages.
    
    cpufreq core is printing out messages at KERN_WARNING level that the core
    recovers from without intervention, and that the system administrator can
    do nothing about.  Patch below reduces the severity of these messages to
    debug.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7eb53d88230e23f83b2e20a78955e1412fa7bb26
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:42 2005 -0700

    [CPUFREQ] powernow-k7: don't print khz element of FSB.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 92bab26be5544d8b495389646490fcfdca6dbcf2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue May 31 20:43:57 2005 -0400

    libata: more docs updates

commit 36839836e8132731e0cadddce452423036a1d5b3
Author: Edgar E Iglesias <edgar@axis.com>
Date:   Tue May 31 17:08:05 2005 -0700

    [IPSEC]: Fix esp_decap_data size verification in esp4.
    
    Signed-off-by: Edgar E Iglesias <edgar@axis.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c963ad1d113790a8c723a178988b675868f3abe
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 31 16:57:59 2005 -0700

    [SPARC64]: Fix streaming buffer flushing on PCI and SBUS.
    
    Firstly, if the direction is TODEVICE, then dirty data in the
    streaming cache is impossible so we can elide the flush-flag
    synchronization in that case.
    
    Next, the context allocator is broken.  It is highly likely
    that contexts get used multiple times for different dma
    mappings, which confuses the strbuf flushing code and makes
    it run inefficiently.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 08e9cd1fc559c00bc05df3fc551efe3b87c57ee3
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:17:28 2005 -0700

    [PKT_SCHED]: Disable dsmark debugging messages by default
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 486b53e59ca8cd07d91ad88375c1c884b15cc9bd
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:16:52 2005 -0700

    [PKT_SCHED]: make dsmark try using pfifo instead of noop while grafting
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0451eb074eef30240c6c06dacf2911bee26831e1
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:15:58 2005 -0700

    [PKT_SCHED]: Fix dsmark to count ignored indices while walking
    
    Unused indices which are ignored while walking must still
    be counted to avoid dumping the same index twice.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e74d633dc5f56bf059f870370b2f36b021298652
Author: Goffredo Baroncelli <kreijack@inwind.it>
Date:   Tue May 31 14:39:31 2005 -0700

    [PATCH] UDF filesystem: array '__mon_yday' declared as not static
    
    in fs/udf/udftime.c the global array '__mon_yday' is not static, and it
    conflicts with the glibc one when the kernel is compiled as user mode.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97d3a00f77fa527886d53dd943017654ce142186
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 14:39:30 2005 -0700

    [PATCH] pcdp.c build fix
    
    In file included from drivers/firmware/pcdp.c:18:
    drivers/firmware/pcdp.h:48: error: field `addr' has incomplete type
    drivers/firmware/pcdp.c: In function `setup_serial_console':
    drivers/firmware/pcdp.c:27: error:  `ACPI_ADR_SPACE_SYSTEM_MEMORY' undeclared (first use in this  function)
    
    Cc: <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae92ef8a442421356950a0a8dfdc35e8e783000e
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue May 31 14:39:29 2005 -0700

    [PATCH] flush icache in correct context
    
    flush_icache_range() is used in two different situation - in binfmt_elf.c &
    co for user space mappings and module.c for kernel modules.  On m68k
    flush_icache_range() doesn't know which data to flush, as it has separate
    address spaces and the pointer argument can be valid in either address
    space.
    
    First I considered splitting flush_icache_range(), but this patch is
    simpler.  Setting the correct context gives flush_icache_range() enough
    information to flush the correct data.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f50734569c25c4e902bd3d0fb2e5bd93a200cc75
Author: Anton Blanchard <anton@samba.org>
Date:   Tue May 31 14:39:29 2005 -0700

    [PATCH] ppc64: allow timer based profiling on iseries
    
    We used to have an iseries specific profiler that used /proc/profile.  Now
    thats gone we can use the generic timer based stuff.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e214953295dd33fc62d43ac7ec91997afad75bb
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue May 31 14:39:28 2005 -0700

    [PATCH] h8300 sleep problem
    
    h8300 appears to sleep (halt) when need_resched IS set.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit adaa765d76f58b47e10a4760f2c0bc86de5479b9
Author: Alexander Nyberg <alexn@telia.com>
Date:   Tue May 31 14:39:27 2005 -0700

    [PATCH] acpi build fix: x86 setup.c
    
    This is a neverending story
    
    linux/acpi.h contains empty declarations for acpi_boot_init() &
    acpi_boot_table_init() but they are nested inside #ifdef CONFIG_ACPI.
    
    So we'll have to #ifdef in arch/i386/kernel/setup.c: setup_arch()
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c2be6a0fa186e2cb0cf14f41f20b08a5809a026
Author: Andi Kleen <ak@suse.de>
Date:   Tue May 31 14:39:26 2005 -0700

    [PATCH] x86_64 CONFIG_ACPI=n build fix
    
    Make CONFIG_X86_PM_TIMER dependent on CONFIG_ACPI
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d91640606c47551771a9b27664f249f4b176613
Author: Andi Kleen <ak@suse.de>
Date:   Tue May 31 14:39:26 2005 -0700

    [PATCH] x86_64: More fixes for compilation without CONFIG_ACPI
    
    Suggested by Alexander Nyberg
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af6f5e3247a68074e384ef93c0b4bce1b73c9d80
Merge: 7e29875... 2e3e80c...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Tue May 31 14:32:44 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit bcc488ab02254a6e60d749187a632dc3d642d4f8
Author: Scott Murray <scottm@somanetworks.com>
Date:   Fri May 27 16:48:52 2005 -0400

    [PATCH] PCI Hotplug: more CPCI updates
    
    Here is my third attempt at a patch to further update the CompactPCI
    hotplug driver infrastructure to address the pci_enable_device issue
    discussed on the list as well as a few other issues I discovered during
    some more testing.  This version addresses a few more issues pointed out
    by Prarit Bhargava.  Changes include:
    - cpci_enable_device and its recursive calling of pci_enable_device on
      new devices removed.
    - Use list_rwsem to avoid slot status change races between disable_slot
      and check_slots.
    - Fixed oopsing in cpci_hp_unregister_bus caused by calling list_del on
      a slot after calling pci_hp_deregister.
    - Removed kfree calls in cleanup_slots since release_slot will have
      done it already.
    - Reworked init_slots a bit to fix latch and adapter file updating on
      subsequent calls to cpci_hp_start.
    - Improved sanity checking in cpci_hp_register_controller.
    - Now shut things down correctly in cpci_hotplug_exit.
    - Switch to pci_get_slot instead of deprecated pci_find_slot.
    - A bunch of CodingStyle fixes.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af00f9811e0ccbd3db84ddc4cffb0da942653393
Author: Andy Currid <acurrid@nvidia.com>
Date:   Mon May 23 08:55:45 2005 -0700

    [PATCH] PCI: amd74xx patch for new NVIDIA device IDs
    
    Here's the 2.6 amd74xx patch for NVIDIA MCP51.
    
    Signed-off-by: Andy Currid <acurrid@nvidia.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2ac2610b26c9da72820443328ff2c56c7b8c87b8
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 27 16:08:14 2005 +0900

    [PATCH] PCI Hotplug: SHPCHP driver doesn't enable PERR and SERR properly
    
    Current shpchp driver doesn't seem to program command register to
    enable PERR and SERR properly. The following patch fixes this issue.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7a8cb869f31de525bc34095f51f8c8a43ffcb6a9
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon May 23 19:50:32 2005 +0900

    [PATCH] PCI Hotplug: shpchp driver doesn't program _HPP values properly
    
    Current shpchp driver doesn't seem to program _HPP values
    properly. The following patch fixes this issue.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 06299db3e7f857a4985cf70dc1a5049ec12482c1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: fix usb-serial generic initialization
    
    At module load time, if a generic device is found, the tty information
    for the device is not set up properly (as the tty structures aren't initialized
    yet.)  This can cause big problems for things like udev.  This patch fixes this.
    
    Thanks to Kay Sievers for the original patch for this problem.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47900743a56dc41a053107d64054aca3e1b42157
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue May 17 15:12:13 2005 +0100

    [PATCH] USB: ftdi_sio: new PID for ELV UM100
    
    ftdi_sio: Add PID for "ELV USB Module UM100".
    PID sent by Armin Laugher.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c6de2b64eb575a3f9326969ec5fcdc6032b38e42
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: add sl811_cs support
    
    This adds support for a CF-card USB Host adapter, the Ratoc REX-CFU1U, by
    wrapping a PCMCIA driver around the existing "sl811-hcd" platform driver.
    
    This CF card is especially useful for PDAs, which currently tend to have
    no other solution for USB host capability.
    
    From: Botond Botyanszki <boti@rocketmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1e9a47b62f7daf5a94fdd74a94dd4e076f44909a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: sl811-hcd fixes
    
    Various fixes to the sl811-hcd driver:
    
      * Fix small glitches that crept in during recent evolution of usbcore's hcd
        glue layer, coupling endpoint state records to usbcore and active urbs.
        (As noted by folk whose boards weren't stuck on 2.6.9 kernels...)
    
      * Cope with various system-specific issues:
          - Some configurations (e.g. a CF-card uses this chip) have iospace
            addresses for the two registers, rather than memory mapped ones.
          - Some configurations do interesting things with IRQs; maybe the
            line is shared, or it doesn't support level triggering.
          - Not all boards can drive the chip reset line in software.
    
      * Address a potential race during unlinking.
    
      * Tweak probe/remove section info to handle the case where this segment
        of a platform bus is hotpluggable (e.g. CF card).  (The basic problem
        is that CONFIG_HOTPLUG is global, which is wrong since not all busses
        can hotplug even on hotplug-friendly systems...)  Also export the
        driver, so that the CF driver can depend on it.
    
    Also removed some annoying end-of-line whitespace.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a4e5787e0b721021fe0a456ddc987a04cebfc8d
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Thu Apr 21 09:07:56 2005 +0000

    [PATCH] I2C: ALI1563 SMBus driver fix
    
    This patch fixes "grave" bugs in i2c-ali1563 driver. It seems on recent
    chipset revisions the HSTS_DONE is set only for block transfers, so we
    must detect the end of ordinary transaction other way. Also due to missing
    and mask, setting other transfer modes was not possible. Moreover the
    continous byte mode transfer uses DAT0 for command rather than CMD command.
    All those changes were tested with help of Chunhao Huang from Winbond.
    
    I'm willing to maintain the driver. Second patch adds me as maintainer
    if this is neccessary.
    
    Signed-Off-By: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2e3e80c2b75e3815a0160cbd23d4fdb767d66b35
Merge: 4e7c681... fffcc15...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 31 11:07:54 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit fffcc150a21853651ea890a605832c5cccbb6279
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 31 10:38:32 2005 -0700

    [IA64] Use "PER_CPU" form of EXPORT macro
    
    I was gently reminded that there are per-cpu forms of the EXPORT_SYMBOL macros.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4e7c6816d680d1945916db047a47847afe4b9b02
Author: Jens Axboe <axboe@suse.de>
Date:   Tue May 31 17:47:36 2005 +0200

    [PATCH] Relax idecd dma alignment check
    
    Only the address needs alignment of mask bits, length should work with
    a relaxed alignment check.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    
    [ This is take 2: make the length check be for 16-byte alignment, not
      just word alignment.  That should hopefully keep everybody happy,
      while still allowing CD writing with DMA ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05fda3b1d88ebac1fc866fc3ed5b7ef5a4672fa6
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue May 31 17:01:11 2005 +1000

    [PATCH] ppc64: actually call prom_send_capabilities
    
    When I sent in the patch adding the code for the kernel to tell the
    firmware about its capabilities on pSeries machines, I included the
    function to give the capabilities to firmware but somehow forgot the
    hunk that adds the call to the new function.  This patch adds the
    call.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cba632b737fc2de76934137b8dccf92d9fa4d19
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 19:49:12 2005 -0400

    libata: doc updates

commit 208d89843b7b03978d8e748b8b991c1be81c4f43
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 30 15:50:15 2005 -0700

    [IPV4]: Fix BUG() in 2.6.x, udp_poll(), fragments + CONFIG_HIGHMEM
    
    Steven Hand <Steven.Hand@cl.cam.ac.uk> wrote:
    >
    > Reconstructed forward trace:
    >
    >   net/ipv4/udp.c:1334   spin_lock_irq()
    >   net/ipv4/udp.c:1336   udp_checksum_complete()
    > net/core/skbuff.c:1069   skb_shinfo(skb)->nr_frags > 1
    > net/core/skbuff.c:1086   kunmap_skb_frag()
    > net/core/skbuff.h:1087   local_bh_enable()
    > kernel/softirq.c:0140   WARN_ON(irqs_disabled());
    
    The receive queue lock is never taken in IRQs (and should never be) so
    we can simply substitute bh for irq.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9bb7bc942d3da606f184ac6a4dfc7e4d470c831b
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon May 30 15:35:26 2005 -0700

    [NETFILTER]: Fix deadlock with ip_queue and tcp local input path.
    
    When we have ip_queue being used from LOCAL_IN, then we end up with a
    situation where the verdicts coming back from userspace traverse the TCP
    input path from syscall context.  While this seems to work most of the
    time, there's an ugly deadlock:
    
    syscall context is interrupted by the timer interrupt.  When the timer
    interrupt leaves, the timer softirq get's scheduled and calls
    tcp_delack_timer() and alike.  They themselves do bh_lock_sock(sk),
    which is already held from somewhere else -> boom.
    
    I've now tested the suggested solution by Patrick McHardy and Herbert Xu to
    simply use local_bh_{en,dis}able().
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 780a87f71841932db8dbb0f1eb9daf3a973a6bd6
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 15:41:05 2005 -0400

    libata: more doc updates
    
    Document recently-added ata_port_operations hooks.
    
    Fill several doc stubs in libata-core.c.

commit 07dd39b9f62e0532c6922459c3a26d54a07bc231
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 13:15:52 2005 -0400

    libata: minor DocBook update

commit 5e485b7975472ba4a408523deb6541e70c451842
Merge: d1102b5... acf0f10...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 22:39:38 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit acf0f100e95516e2ba5a3353c3b86dbcd159e3d1
Merge: 7915822... 1b62815...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun May 29 21:25:01 2005 -0700

    Merge of /home/davem/src/GIT/tg3-2.6/

commit d1102b59ca7b3a3c58912330a4ae38f549c8d569
Author: David S. Miller <davem@davemloft.net>
Date:   Sun May 29 20:28:25 2005 -0700

    [NET]: Use %lx for netdev->features sysfs formatting.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c94d3611be61e4cff33b311f1a626d93d1d3e92
Author: David S. Miller <davem@davemloft.net>
Date:   Sun May 29 20:28:01 2005 -0700

    [IPV6]: Clear up user copy warning in flowlabel code.
    
    We are intentionally ignoring the copy_to_user() value,
    make it clear to the compiler too.
    
    Noted by Jeff Garzik.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 69f6a0fafcdf0bfe85af182695d6d38f80f9d549
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Sun May 29 20:27:24 2005 -0700

    [NET]: Add ethtool support for NETIF_F_HW_CSUM.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37e20a66db02eff9adbeee043af990cca85d0034
Author: Pravin B. Shelar <pravins@calsoftinc.com>
Date:   Sun May 29 20:26:44 2005 -0700

    [IPV4]: Kill MULTIPATHHOLDROUTE flag.
    
    It cannot work properly, so just ignore it in drr
    and rr multipath algorithms just like the random
    multipath algorithm does.
    
    Suggested by Herbert Xu.
    
    Signed-off by: Pravin B. Shelar <pravins@calsoftinc.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 79165121bc09c209451487d977df910c4ff6fc94
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Sun May 29 20:24:30 2005 -0700

    [NET]: Add is_multicast_ether_addr() in include/linux/etherdevice.h
    
    This patch adds is_multicast_ether_addr() to go along with
    is_valid_ether_addr() and friends. It then changes
    is_valid_ether_addr() to use the new macro, and fixes up the comment
    on that function to move implementation details out of the API doco.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f937c6099858eee15fae14009dcbd05177fa91d
Author: Harald Welte <laforge@gnumonks.org>
Date:   Sun May 29 20:23:46 2005 -0700

    [IPV4]: Primary and secondary addresses
    
    Add an option to make secondary IP addresses get promoted
    when primary IP addresses are removed from the device.
    It defaults to off to preserve existing behavior.
    
    Signed-off-by: Harald Welte <laforge@gnumonks.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 79158229b09873ca296ac53de5c952488f944646
Merge: 7ce54e3... 7238cfb...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 19:30:03 2005 -0700

    Automatic merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 1b62815193f6c20c60958e5347751155833e3d35
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:59:49 2005 -0700

    [TG3]: Fix bug in tg3_load_firmware_cpu
    
    Add tg3_nvram_lock() and tg3_nvram_unlock() calls around tg3_halt_cpu().
    It is possible that the bootcode may be loading code from nvram during
    this call and stopping the cpu without getting the lock may cause
    uncompleted nvram data to be left in the nvram data register. Subsequent
    calls to read/write nvram data will fail.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4bc3927d284784b3f0bff05b4eed2242cc3e226
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:59:20 2005 -0700

    [TG3]: Add interrupt test
    
    This test uses the previously added tg3_test_interrupt() to perform the
    test.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c76949a6826fc11efcd6bb1abdca1ae02761071d
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:59 2005 -0700

    [TG3]: Add loopback test
    
    The test will loopback one packet in MAC loopback mode and verify the
    packet data.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7942e1dbd7252b480ed238096dca617189d293df
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:36 2005 -0700

    [TG3]: Add memory test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a71116d1f3b85a69fe3a3acec9223fefb4b1fc66
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:11 2005 -0700

    [TG3]: Add register test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 944d980ecaabe44616a9e2d50101ce774f517bb6
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:57:48 2005 -0700

    [TG3]: Add parameter to tg3_halt
    
    Add a reset kind parameter to tg3_halt() so that the RESET_KIND_SUSPEND
    parameter can be passed to tg3_halt() before doing offline tests.
    
    All other calls to tg3_halt() will use the RESET_KIND_SHUTDOWN
    parameter.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca43007a92662621e5819912fc31c346e3a2eed8
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:57:23 2005 -0700

    [TG3]: Add link test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 566f86adb336637d03900f53b886d879aa5f5d56
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:56:58 2005 -0700

    [TG3]: Add nvram test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4cafd3f533475c976879d85773735c004f09f576
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:56:34 2005 -0700

    [TG3]: Add basic selftest infrastructure
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ce54e3f428b33af714271140601c87b8bf2c544
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:16:48 2005 -0700

    [BRIDGE]: receive path optimization
    
    This improves the bridge local receive path by avoiding going
    through another softirq.  The bridge receive path is already being called
    from a netif_receive_skb() there is no point in going through another
    receiveq round trip.
    
    Recursion is limited because bridge can never be a port of a bridge
    so handle_bridge() always returns.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85967bb46dd1f8f2c49b85a313866c00ac0c9b59
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:15:55 2005 -0700

    [BRIDGE]: prevent bad forwarding table updates
    
    Avoid poisoning of the bridge forwarding table by frames that have been
    dropped by filtering. This prevents spoofed source addresses on hostile
    side of bridge from causing packet leakage, a small but possible security
    risk.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81d35307dd468b92fe8c58797abb13c62e3e64dd
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:15:17 2005 -0700

    [BRIDGE]: set features based on enslaved devices
    
    Make features of the bridge pseudo-device be a subset of the underlying
    devices.  Motivated by Xen and others who use bridging to do failover.
    
    Signed-off-by: Catalin BOIE <catab@umrella.ro>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81e8157583c559c27aac75c708d40a35f563d734
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:14:35 2005 -0700

    [BRIDGE]: make dev->features unsigned
    
    The features field in netdevice is really a bitmask, and bitmask's should
    be unsigned.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8a33ac435c43a1a404b2ec560ef1d1536710c36
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:13:47 2005 -0700

    [BRIDGE]: features change notification
    
    Resend of earlier patch (no changes) from Catalin used to provide
    device feature change notification.
    
    Signed-off-by: Catalin BOIE <catab@umbrella.ro>
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7238cfb3342078ad6d1dd06c7b567da428672476
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun May 29 14:48:20 2005 -0400

    libata: bump version

commit d582c4ea307873503a68d6d7ab72ee8599e032a9
Merge: 87507cf... aa8f0dc...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun May 29 14:24:57 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch use-after-unmap

commit 45b30105e7231b70bb855923dbca443ee3ba44c3
Merge: 6cf2b3f... 7d6064d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 10:40:13 2005 -0700

    Automatic merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/dtor/input

commit 7d6064d44bc79e328f2794ee7322ba2676511e2b
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 01:27:44 2005 -0500

    Input: Fix fast scrolling scancodes in atkbd.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6cf2b3fc9934a56ceeb393ea5d0149e0bebc80fa
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:15 2005 -0700

    [PATCH] ppc32: i8259 PIC should not be initialized if PCI is not configured
    
    Trying to initialize the i8259 PIC will not work if CONFIG_PCI is not
    enabled.  The kernel hangs if the initialization is tried.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9e4a005827ec0b33f0c61fec1634a5a3421decd
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:15 2005 -0700

    [PATCH] ppc32: Add soft reset to MPC834x
    
    This change allows mpc83xx_restart to issue a software reset.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff945023c6a455679165b14d298316e262ceeb1f
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:14 2005 -0700

    [PATCH] ppc32: MPC834x BCSR_SIZE too small for use in a BAT.
    
    The call to io_block_mapping was creating an invalid BAT entry because the
    value of BCSR_SIZE (32K) is too small to be used in a BAT (128K min).  This
    change removes the io_block_mapping call since these registers can easily
    be mapped using ioremap at the point of use.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92b4dc16257fef814ddf1c8d1d2a20f67f67ee4b
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:13 2005 -0700

    [PATCH] ppc32: Simplified load string emulation error checking
    
    The error checking for emulation of load string instructions was overly
    generous and would cause certain valid forms of the instructions to be
    treated as illegal.  We drop the range checking since the architecture
    allows this to be boundedly undefined.  Tests on CPUs that support these
    instructions appear not do cause illegal instruction traps on range errors
    and just allow the execution to occur.
    
    Thanks to Kim Phillips for debugging this and figuring out what real HW was
    doing.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91f9855a7afbb160ba1709bf342858732138abad
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:12 2005 -0700

    [PATCH] ppc32: Fix building MPC8555 CDS when CONFIG_PCI is disabled
    
    The patch that introduced support for the VIA chipset broke building if
    CONFIG_PCI is disabled.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6dbba77a9d4b47c60d60c4f07fa79b3ca93a1d5
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Sat May 28 15:52:09 2005 -0700

    [PATCH] ppc32: Support for 82xx PQII on-chip PCI bridge
    
    This patch adds on-chip PCI bridge support for the PQ2 family.  The
    incomplete existent code is updated with interrupt handling stuff and
    board-specific bits for 8272ADS and PQ2FADS; the related files were renamed
    (from m8260_pci to m82xx_pci) to be of more generic fashion.  This is
    tested with 8266ADS and 8272ADS, should work on PQ2FADS as well.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed36959621451da7195be83b87878b060ce64724
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:07 2005 -0700

    [PATCH] ppc32: Add VIA IDE support to MPC8555 CDS platform
    
    Add support for the VIA IDE controller that exists on the MPC8555 CDS
    system.  Updated the config for the system to enable support by default.
    
    Signed-off-by: Scott Hall <shall@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 252fcaed48fc5473b3fc3cafbf977244b0cbf670
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:06 2005 -0700

    [PATCH] ppc32: Fix some minor issues related to FSL Book-E KGDB support
    
    Some debug registers needed to be initialized early on to allow proper
    support for KGDB.  Additionally, we need to setup the
    ppc.md_early_serial_map function pointer on boards that have serial support
    for KGDB.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94b9f46d61904422c498bf4cf9a90cc14398d311
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:05 2005 -0700

    [PATCH] ppc32: Fix uImage make target to report success correctly
    
    The existing make rule when building a uImage would check to see if the
    image file existed to report 'is ready' or 'not made'.  However make
    appeared to compute the file list before the rule was executed.
    
    Signed-off-by: Chris Clark <cpclark@xmission.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e21683bb458c73c6fe87844202a64eac730995e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:04 2005 -0700

    [PATCH] uml: remove jail mode + other leftovers
    
    This var is currently useless, as it's apparent from reading the code. Until
    2.6.11 it was used in some code related to jail mode, in the same proc.:
    
            if(jail){
    		while(!reading) sched_yield();
    	}
    
    jail mode has been dropped, together with that use, so let's finish dropping
    this.
    
    Also, remove some other useless definitions I met.
    
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f767b02f35a3db5c1b1c6454992c070510cef07f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:03 2005 -0700

    [PATCH] uml: fixlet for arch_prctl_skas
    
    Fix it a bit (after some cross checking with "man arch_prctl"). There were:
    *) typos FS/GS and back
    *) FS in place of FS_BASE (and the same for GS)
    *) the procedure used put_user on &addr, where addr was the parameter (i.e.
    changed its param with put_user, completely useless) rather than interpreting
    addr as a pointer, as requested in this case (see the man page).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f28e8fa46625310102aea06fac61ba04c8b5b88
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:02 2005 -0700

    [PATCH] irq code: Add coherence test for PREEMPT_ACTIVE
    
    After porting this fixlet to UML:
    
    http://linux.bkbits.net:8080/linux-2.5/cset@41791ab52lfMuF2i3V-eTIGRBbDYKQ
    
    , I've also added a warning which should refuse compilation with insane values
    for PREEMPT_ACTIVE...  maybe we should simply move PREEMPT_ACTIVE out of
    architectures using GENERIC_IRQS.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37053cc84d51a790a6e5c3987665902cdab122a5
Author: Paul Mundt <lethal@Linux-SH.ORG>
Date:   Sat May 28 15:52:01 2005 -0700

    [PATCH] sh: PREEMPT_ACTIVE fix
    
    Port Paulus's ppc64 fix to sh:
    
      When the generic IRQ stuff went in, it seems that HARDIRQ_BITS got bumped
      from 9 (for ppc64) up to 12.  Consequently, the PREEMPT_ACTIVE bit is now
      within HARDIRQ_MASK, and I get in_interrupt() falsely returning true when
      PREEMPT_ACTIVE is set, and thus a BUG_ON tripping in arch/ppc64/mm/tlb.c.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit affac4bcbba617d7329b04c7882bc49a9826e12f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:00 2005 -0700

    [PATCH] uml: fix PREEMPT_ACTIVE
    
    This is a continuation for UML of:
    
    http://linux.bkbits.net:8080/linux-2.5/cset@41791ab52lfMuF2i3V-eTIGRBbDYKQ
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3461034d7d46455060c8476910be22b6b0fc313
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:00 2005 -0700

    [PATCH] uml: stack dump fix
    
    Copy (and adapt) to UML the stack code dumper used in i386 when
    CONFIG_FRAME_POINTER is enabled.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37fce857bec00d26d0e8251c909da2bd8736c949
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:59 2005 -0700

    [PATCH] uml: split CONFIG_FRAME_POINTER from DEBUG_INFO
    
    Until now, FRAME_POINTER was set = DEBUG_INFO for UML.  Change it to be the
    default way, so that it can be enabled alone (for instance to get better
    backtraces on crashes).  The call-trace dumper which uses the frame pointer is
    not yet in, I'm going to introduce it in a separate patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 567b56508f7367e161d6d861ef214a900ab45ce9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:58 2005 -0700

    [PATCH] uml: add MOD_LICENSE to random driver
    
    Add a MODULE_LICENSE("GPL") to the driver, remove some unused macros and add
    the GPL license (it's GPL-licensed anyway since it's a GPL-derivative, apart
    that Jeff Dike releases GPL software, in case anybody is wondering).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34a1a63e37ee8d60bdb842476d9337cdff5413d9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:57 2005 -0700

    [PATCH] uml: add modversions support
    
    Actually, the real support was added by some earlier patches.  Now we simply
    re-enable the config.  option.  I've actually tested it and it works well.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7590d3ec1cda7d504c25103bde0c9911f93810e9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:57 2005 -0700

    [PATCH] uml: remove unused code
    
    This removes two now unused files and a couple of unused functions.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92515da73a5df50db45111b8659ac463b4800236
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:56 2005 -0700

    [PATCH] uml: fix segfault on exit with CONFIG_GCOV
    
    We need to disable signals on exit in all cases, not just when rebooting.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0894e27e7999bdbad2e65734caa1d5de65e7d890
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:55 2005 -0700

    [PATCH] uml: single-space a help message
    
    One of the ubd driver help strings was bust.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2e4b972c99685d9d7b869c4bf8d8b258ff5b60c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:54 2005 -0700

    [PATCH] uml: remove 2_5compat.h
    
    Remove old useless header that was used in Ye Olde Times during 2.4->2.5
    porting to abstract differences.  It's definitions are no more used anyway, so
    let's finally kill it.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6770cb61ff6d557613a8382b28f9b0a919fb112f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:54 2005 -0700

    [PATCH] uml: turn off kmalloc always on a fatal signal
    
    We should turn off kmalloc when getting a fatal signal regardless of the mode
    we're in.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9e0d0696c9e86d4e40b23039feefb8c377cb524
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:53 2005 -0700

    [PATCH] uml: fix a couple of warnings
    
    Eliminate an unused variable warning in ptrace.c and a size mismatch warning
    by adding a cast to __pa.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 226d97ec3e47b54ecc13f6ea3c300dc6a1b290c3
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:52 2005 -0700

    [PATCH] dvb: Small cleanup
    
    Miscellaneous cleanup
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86360a3edeb6b7b6230dc13ef6835d2851409502
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:51 2005 -0700

    [PATCH] dvb: Fix 22k tone control
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f6da8f166228c1720d16216a9d82d630c58de57
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:51 2005 -0700

    [PATCH] dvb: Fix LNB power switching
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0eac3e486e1f246a9d59fee9251cc69e409cb58e
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:50 2005 -0700

    [PATCH] dvb: Remove unnecessary casts
    
    Cleanup unnecessary (and undesirable) casts, demodulator_priv is already a
    void*.  Suggestion from Andrew Morton
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 203fe8b3d1f5b1b527e86f6dbe5b75960acb7f4f
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:48 2005 -0700

    [PATCH] dvb: Fix Mini DiSEqC bug
    
    The bug was visible as a warning with gcc-3.4.4 (prerelease)
    
    Message:
    drivers/media/dvb/bt8xx/dst.c:1349: warning: initialization from
    incompatible pointer type.
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5212dd58e67e4b8009107d69a9de45dd2e687496
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 15:51:47 2005 -0700

    [PATCH] input: Fix fast scrolling scancodes in atkbd.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 346e399b2a3a01b323fa74a0937e2d855479833b
Author: Patrick McManus <mcmanus@ducksong.com>
Date:   Sat May 28 15:51:46 2005 -0700

    [PATCH] intelfb section fix
    
    On Nov 16 2004 a change to intelfbdrv.c was commited (as part of 0.9.2 it
    looks like) that added __initdata to all of the module param variables that
    seems to create the opportunity for an oops.
    
    I've recently been chasing an OOPS
    (http://marc.theaimsgroup.com/?l=linux-kernel&m=111552250920370&w=2) I
    created by reading every file on the /sys file system and I've traced it
    back to this code in the intelfbdrv.  Though I had root privs in my initial
    problem report, it turns out they are un-necessary to generate the oops -
    all you've got to do is "cat /sys/module/intelfb/parameters/mode" enough
    times and eventually it will oops.
    
    This is because sysfs automatically exports all module_param declarations
    to the sysfs file system..  which means those variables can be dynamically
    evaluated at any later time, which of course means marking them __initdata
    is a bad idea ;)..  when they happen to be char *'s it is an especially bad
    idea ;).
    
    Applying the patch below clears up the OOPS for me.
    
    Signed-off-by: Patrick McManus <mcmanus@ducksong.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1e4c8d3ee3300f363a52fd4cf3d90fdf5098f5a
Author: Pavel Machek <pavel@suse.cz>
Date:   Fri May 27 12:53:03 2005 -0700

    [PATCH] fix jumpy mouse cursor on console
    
    Do not send empty events to gpm.  (Keyboards are assumed to have scroll
    wheel these days, that makes them part-mouse.  That means typing on
    keyboard generates empty mouse events).
    
    From: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bd7f125e2f217c8aa3dff005ae291c81246c340
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri May 27 12:53:03 2005 -0700

    [PATCH] swsusp: ahd_dv_0 can't be stopped
    
    This driver wants to set PF_NOFREEZE.
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b16eeb47292597a8bf3ad53fdaf1f727f57bd8e4
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:53:02 2005 -0700

    [PATCH] ppc32: Fix cpufreq vs. sleep issue
    
    Recent kernels occasionally trigger a PMU timeout on some mac laptops,
    typically on wakeup from sleep.  This seem to be caused by either a too big
    latency caused by the cpufreq switch on wakeup from sleep or by an
    interrupt beeing lost due to the reset of the interrupt controller done
    during wakeup.
    
    This patch makes that code more robust by stopping PMU auto poll activity
    around cpufreq changes on machines that use the PMU for such changes (long
    latency switching involving a CPU hard reset and flush of all caches) and
    by removing the reset of the open pic interrupt controller on wakeup (that
    can cause the loss of an interrupt and Darwin doesn't do it, so it must not
    be necessary).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49f384b82b03416dd7e4fc77847a959fe3247362
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Fri May 27 12:53:01 2005 -0700

    [PATCH] x86: fix smp_num_siblings on buggy BIOSes
    
    This fixes 'smp_num_siblings' value on the systems with a buggy bios,
    which sets number of siblings to '2' even when HT is disabled.  (more
    details are at http://bugzilla.kernel.org/show_bug.cgi?id=4359)
    
    I am planning to do more cleanup in this area (like moving smp_num_siblings
    to per cpuinfo) shortly.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b60c1f6ffd88850079ae419aa933ab0eddbd5535
Author: John Hawkes <hawkes@sgi.com>
Date:   Fri May 27 12:53:00 2005 -0700

    [PATCH] drop note_interrupt() for per-CPU for proper scaling
    
    The "unhandled interrupts" catcher, note_interrupt(), increments a global
    desc->irq_count and grossly damages scaling of very large systems, e.g.,
    >192p ia64 Altix, because of this highly contented cacheline, especially
    for timer interrupts.  384p is severely crippled, and 512p is unuseable.
    
    All calls to note_interrupt() can be disabled by booting with "noirqdebug",
    but this disables the useful interrupt checking for all interrupts.
    
    I propose eliminating note_interrupt() for all per-CPU interrupts.  This
    was the behavior of linux-2.6.10 and earlier, but in 2.6.11 a code
    restructuring added a call to note_interrupt() for per-CPU interrupts.
    Besides, note_interrupt() is a bit racy for concurrent CPU calls anyway, as
    the desc->irq_count++ increment isn't atomic (which, if done, would make
    scaling even worse).
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70ffc71c5c42c8ac62d951e80d9799bd5764f2f5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri May 27 12:52:59 2005 -0700

    [PATCH] arch/i386/kernel/cpu/intel_cacheinfo.c: section fix
    
    num_cache_leaves is used in __devexit cache_remove_dev() and can therefore
    not be __devinit.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9db29258893b08a838e5ecfa4a0933c9c1f2e305
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 27 12:52:58 2005 -0700

    [PATCH] ppc64 iSeries: make virtual DVD-RAMs writable again
    
    It appears that another test has been added in the Uniform CDROM layer that
    must be passed before a DVD-RAM is considered writeable.  This patch
    implements an emulation of the needed packet command for the viocd driver.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ae250d175e1cbff82223ce2c07897c790c5b948
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:52:57 2005 -0700

    [PATCH] ppc32: Fix Alsa PowerMac driver on old machines
    
    The g5 support code broke some earlier models unfortunately as those bail
    out early from the detect function, before the point where I added the code
    to locate the PCI device for use with DMA allocations.
    
    This patch fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6649bc76a57523209a6b2ee4844c9078a4dd8bb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:52:56 2005 -0700

    [PATCH] ppc32: small cpufreq update
    
    This patch adds a missing attribute to pmac cpufreq so that
    "scaling_available_frequencies" works.  It also cleans up the duplicate
    definitions for low and high speed constants.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: John Clemens <clemej@alum.rpi.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5924b7d97430657fa07ebf1a208c7e8cf135ef3
Author: Oliver Korpilla <Oliver.Korpilla@gmx.de>
Date:   Fri May 27 12:52:55 2005 -0700

    [PATCH] x86_64: signal.c build fix
    
    For unspecified reasons, arch/x86_64/kernel/signal.c apparently needs
    ia32_unistd.h.
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcefb396c2af4d52fba48dc58b4021794b042046
Author: Dave Jones <davej@redhat.com>
Date:   Sat May 28 00:51:24 2005 -0400

    [PATCH] Fix up pwc driver compilation.
    
    The neutering of the pwc driver was incomplete. It still references
    some now-dead files..
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 409b7506759430f7c3841d425ca1f8a31eeadece
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:18 2005 -0500

    Input: synaptics - reduce verboseness of synaptics driver - there
           is no reason one driver should take 10 lines in dmesg.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b4ff99b60c5e17b1031deb20c9d7688ebe6c9659
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:10 2005 -0500

    Input: yet another model that does not play nicely when i8042 is
           put in MUX mode - Fujitsu Lifebook S6230
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 59311de3fb5f293b2e99d7f52e0ab5572759951d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:05 2005 -0500

    Input: automatically disable MUX mode on Toshiba Satellite P10
           because it interferes with ALPS touchpad detection and
           causes horrible death on reboot. Since P10 does not have
           external PS/2 ports MUX mode does not have any advantages
           over legacy mode anyway.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a07461ec0cffb105c7e7b7404520ea2c74129db0
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:00 2005 -0500

    Input: gunze - fix out-of-bound array access reported by Adrian Bunk.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f24949e8e0b9bed223ad9a435bf37e91ee8d0db7
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:49 2005 -0500

    Input: Fix button mapping in joydev - BTN_TRIGGER was being
           mapped twice, resulting in it being the last (instead
           of first) button on a joystick.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7741e9317137a7456baa9c09ad8308c80c23b8db
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:42 2005 -0500

    Input: Workaround for Sunrex K8561 IR Keyboard/Mouse. The mouse
           sends an incorrect ID and wasn't recognized.
    
    Reported-by: Stefan Seyfried <seife@suse.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 74af42bb729651855f78ea27498250724689130e
Author: Kurt Garloff <garloff@suse.de>
Date:   Sat May 28 02:11:38 2005 -0500

    Input: Avoid double unregistering of i8042 PnP driver. This can happen
           when no i8042 controller (not PnP, not legacy) is present.
    
    From: Kurt Garloff <garloff@suse.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5a72afc03ccc29458502cf032f5c34e5ee004ae7
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:11:32 2005 -0500

    Input: Tone down the severity of a printk() in i386/ia64 arch code
           for i386, it's printed on many machines and usually is not
           a cause for worry.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2673c836ab9a44b02d45ae5c1c44c03df138dba4
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:27 2005 -0500

    Input: Only write the CTR in i8042 resume function. Reading it is
           wrong, since it may (will) contain nonsensical data.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit be15692310ec0e93998d763931089cb21386a058
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:19 2005 -0500

    Input: Remove (now) unused variable in i8042.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 39fa58007a54b09c91cb7bf3ce3cfcc4957f92ff
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:16 2005 -0500

    Input: Add a missing KERN_INFO message designation, fix behavior
           when only a keyboard part of the controller is detected.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 668d1e6093110f7534e661e2ff43d54c74659b6d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat May 28 02:11:12 2005 -0500

    Input:
    This patch adds dummy gameport_register_port, gameport_unregister_port
    and gameport_set_phys functions to gameport.h for the case when a driver
    can't use gameport.
    
    This fixes the compilation of some OSS drivers with GAMEPORT=n without
    the need to #if inside every single driver.
    
    This patch also removes the non-working and now obsolete SOUND_GAMEPORT.
    
    This patch is also an alternative solution for ALSA drivers with similar
    problems (but #if's inside the drivers might have the advantage of
    saving some more bytes of gameport is not available).
    
    The only user-visible change is that for GAMEPORT=m the affected OSS
    drivers are now allowed to be built statically (but they won't have
    gameport support).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 271b74d0b886301f297407dd7ae11b99607f8089
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat May 28 02:11:06 2005 -0500

    Input: Fix a warning in psmouse-base.c
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 87507cfdd2cde397c9da8f6e7ec23b2b47ec53d6
Author: domen@coderock.org <domen@coderock.org>
Date:   Fri Apr 8 09:53:06 2005 +0200

    [PATCH] drivers/scsi/ahci: add #include req'd for the DMA_{64,32}BIT_MASK constants
    
    The previous patch did not compile cleanly on all architectures so
    here's a fixed one which #includes <linux/dma-mapping.h>.
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    
    diff -puN drivers/scsi/ahci.c~dma_mask-drivers_scsi_ahci drivers/scsi/ahci.c

commit 7003c05d77593f567e9940e68a944d846228fd7a
Author: domen@coderock.org <domen@coderock.org>
Date:   Fri Apr 8 09:53:09 2005 +0200

    [PATCH] drivers/scsi/sata_vsc: add #include req'd for DMA_32BIT_MASK constant
    
    The previous patch did not compile cleanly on all architectures so
    here's a fixed one which #includes <linux/dma-mapping.h>.
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    
    diff -puN drivers/scsi/sata_vsc.c~dma_mask-drivers_scsi_sata_vsc drivers/scsi/sata_vsc.c

commit b9a6eaffe7ff3d3481efa9fa353b2c6a02eda756
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Sun Apr 10 20:27:45 2005 +0200

    [PATCH] 3c574_cs: disable interrupts in el3_close
    
    3c574_cs forgets to disable interrupts during el3_close().
    fix it by doing what 3c59x does.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>

commit 254feb882a7c6e4e51416dff6a97d847fbbba551
Merge: 8aadff7... 66f5507...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 27 09:26:10 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/hch/xfs-2.6

commit 8aadff7dd519800ce7c0e7fb75dcd4438b373134
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri May 27 12:48:50 2005 +0200

    [PATCH] Note on ACPI build fix
    
    Even after the previous fix you can still set CONFIG_ACPI_BOOT
    indirectly even without CONFIG_ACPI by choosing CONFIG_PCI and
    CONFIG_PCI_MMCONFIG.
    
    That doesn't build very well either.
    
    This makes PCI_MMCONFIG depend on ACPI, fixing that hole.
    
    [ I guess in theory Kconfig could follow the whole chain of dependencies
      for things that get selected, but that sounds insanely complicated, so
      we'll just fix up these things by hand.  --Linus ]
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e11c3ce0a4ce3d30802babccb0e5f881778ccf1
Author: Len Brown <lenb@toshiba.hsd1.ma.comcast.net>
Date:   Fri May 27 04:53:27 2005 -0400

    [PATCH] ACPI build fix
    
    Fix 2.6.12 CONFIG_ACPI=n build regression.
    CONFIG_ACPI_BOOT shall be set only if CONFIG_ACPI.
    
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9920e91450ee9b373dd4924f79d287a267b8f6a3
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri May 27 12:27:05 2005 +0200

    [PATCH] Fixup VIA IRQ quirk
    
    quirk_via_irqpic can't be __devinit for swsuspend
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25be5e6ccc5c9cab77012fabbb72520f9b6e4618
Author: Len Brown <lenb@toshiba.hsd1.ma.comcast.net>
Date:   Fri May 27 04:21:50 2005 -0400

    [PATCH] VIA IRQ quirk
    
    Delete quirk_via_bridge(), restore quirk_via_irqpic() -- but now
    improved to be invoked upon device ENABLE, and now only for VIA devices
    -- not all devices behind VIA bridges.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2efe86b809d97debaaf9fcc13b041aedf15bd3d2
Author: Paul Jackson <pj@sgi.com>
Date:   Fri May 27 02:02:43 2005 -0700

    [PATCH] cpuset exit NULL dereference fix
    
    There is a race in the kernel cpuset code, between the code
    to handle notify_on_release, and the code to remove a cpuset.
    The notify_on_release code can end up trying to access a
    cpuset that has been removed.  In the most common case, this
    causes a NULL pointer dereference from the routine cpuset_path.
    However all manner of bad things are possible, in theory at least.
    
    The existing code decrements the cpuset use count, and if the
    count goes to zero, processes the notify_on_release request,
    if appropriate.  However, once the count goes to zero, unless we
    are holding the global cpuset_sem semaphore, there is nothing to
    stop another task from immediately removing the cpuset entirely,
    and recycling its memory.
    
    The obvious fix would be to always hold the cpuset_sem
    semaphore while decrementing the use count and dealing with
    notify_on_release.  However we don't want to force a global
    semaphore into the mainline task exit path, as that might create
    a scaling problem.
    
    The actual fix is almost as easy - since this is only an issue
    for cpusets using notify_on_release, which the top level big
    cpusets don't normally need to use, only take the cpuset_sem
    for cpusets using notify_on_release.
    
    This code has been run for hours without a hiccup, while running
    a cpuset create/destroy stress test that could crash the existing
    kernel in seconds.  This patch applies to the current -linus
    git kernel.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Simon Derr <simon.derr@bull.net>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88c1834633341bbb94e315433067496338bff4ad
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri May 27 13:40:53 2005 +0100

    [PATCH] remove non-cleanroom pwc driver compression
    
    The original pwc author raised some questions about the reverse
    engineering of the decompressor algorithms used in the pwc driver.
    Having done some detailed investigation it appears those concerns that
    clean room policy was not followed are reasonable.  I've also had a
    friendly discussion with Philips to ask their view on this.
    
    This removes the problem items of code which reduces the pwc
    functionality in the kernel a little but leaves all the framework for
    setup that will be needed for decompressors in user space (where they
    eventually belong).  This change set is designed to be the minimal risk
    change set given that 2.6.12 is hopefully close to hand, with a view to
    merging the much updated pwc code in 2.6.13 series kernels.
    
    Someone else can then redo the decompressors properly (clean room) in
    user space.
    
    Note that while its easy to say that it should have been caught earlier,
    but the violation was really only obvious to someone who had access to
    both the proprietary source and the 'GPL' source.

commit 5d9e4ea55ae19f9083b9c2c97cc912b823ee7ab4
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 27 07:36:17 2005 -0700

    ide-cd: revert DMA mask test change
    
    The change to require the DMA length to be only word-aligned was not
    safe.

commit 66f5507133f97088e553b1c8f8d341a0efd438f9
Author: Christoph Hellwig <hch@hera.kernel.org>
Date:   Fri May 27 01:17:08 2005 -0700

    [XFS] remove an over-zealous WARN_ON

commit b19312c4c8f3f84da57bba01d45549df1cf10dcd
Merge: d387039... 4ec5240...
Author: Christoph Hellwig <hch@hera.kernel.org>
Date:   Fri May 27 01:16:24 2005 -0700

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit aa8f0dc6c3dbf1cf3ff58f3e945c981be134814d
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 26 21:54:27 2005 -0400

    libata: Fix use-after-iounmap
    
    Jens Axboe pointed out that the iounmap() call in libata was occurring
    too early, and some drivers (ahci, probably others) were using ioremap'd
    memory after it had been unmapped.
    
    The patch should address that problem by way of improving the libata
    driver API:
    
    * move ->host_stop() call after all ->port_stop() calls have occurred.
    
    * create default helper function ata_host_stop(), and move iounmap()
    call there.
    
    * add ->host_stop_prewalk() hook, use it in sata_qstor.c (hi Mark).
    sata_qstor appears to require the host-stop-before-port-stop ordering
    that existed prior to applying the attached patch.

commit 462cee296476278acaa54c41925b3273e0e4dd40
Merge: 126fa4b... 4ec5240...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Thu May 26 21:40:25 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit d68b8622ccbee8a18e495ad1650c3306f2eeb0d6
Author: Roland McGrath <roland@redhat.com>
Date:   Thu May 26 15:21:13 2005 -0700

    [PATCH] i386: fix prevent_tail_call
    
    We fixed this bug before, but it didn't take.  It may have been the case
    that the problem was first noticed to occur in a CONFIG_REGPARM compile.
    But it's not regparm functions that need not to make tail calls, it's
    asmlinkage functions called with a user pt_regs frame on the stack
    supplying their arguments.  prevent_tail_call probably doesn't do anything
    at all in regparm functions (your argument registers are going to be
    clobbered, period).  It was a braino to conditionalize that definition in
    the first place.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ec5240ec367a592834385893200dd4fb369354c
Merge: f49809f... b6016b7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 13:54:33 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit b6016b767397258b58163494a869f8f1199e6897
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu May 26 13:03:09 2005 -0700

    [BNX2]: New Broadcom gigabit network driver.
    
    A new driver bnx2 for Broadcom bcm5706 is available.
    
    The patch also includes new 1000BASE-X advertisement bit definitions in
    mii.h
    
    Thanks to David Miller and Jeff Garzik for reviewing and their valuable
    feedback.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8b35d2a29ec3c93e3b9c1e70d649a77a214b1c1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu May 26 12:59:42 2005 -0700

    [TOKENRING]: net/802/tr.c: s/struct rif_cache_s/struct rif_cache/
    
    "_s" suffix is certainly of hungarian origin.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6b3365391c626206f6789354794a81a010cb7a1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu May 26 12:59:05 2005 -0700

    [TOKENRING]: be'ify trh_hdr, trllc, rif_cache_s
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92d63decc0b6a5d600f792fcf5f3ff9718c09a3d
Author: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
Date:   Thu May 26 12:58:04 2005 -0700

    From: Kazunori Miyazawa <kazunori@miyazawa.org>
    
    [XFRM] Call dst_check() with appropriate cookie
    
    This fixes infinite loop issue with IPv6 tunnel mode.
    
    Signed-off-by: Kazunori Miyazawa <kazunori@miyazawa.org>
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f872f0401d4b470990864fbf99c19130f25ad4d
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Thu May 26 12:56:59 2005 -0700

    [BONDING]: bonding using arp_ip_target may stay down with active path
    
    Correcting the list traversal makes the problem go away.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0dca51d362b8e4af6b0dbc9e54d1e5165341918a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:55:48 2005 -0700

    [PKT_SCHED] netem: allow random reordering (with fix)
    
    Here is a fixed up version of the reorder feature of netem.
    It is the same as the earlier patch plus with the bugfix from Julio merged in.
    Has expected backwards compatibility behaviour.
    
    Go ahead and merge this one, the TCP strangeness I was seeing was due
    to the reordering bug, and previous version of TSO patch.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f9f32ac65ee4a452a912a8440cebbc4dff73852
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:55:01 2005 -0700

    [PKT_SCHED] netem: use only inner qdisc -- no private skbuff queue
    
    Netem works better if there if packets are just queued in the inner discipline
    rather than having a separate delayed queue. Change to use the dequeue/requeue
    to peek like TBF does.
    
    By doing this potential qlen problems with the old method are avoided. The problems
    happened when the netem_run that moved packets from the inner discipline to the nested
    discipline failed (because inner queue was full). This happened in dequeue, so the
    effective qlen of the netem would be decreased (because of the drop), but there was
    no way to keep the outer qdisc (caller of netem dequeue) in sync.
    
    The problem window is still there since this patch doesn't address the issue of
    requeue failing in netem_dequeue, but that shouldn't happen since the sequence dequeue/requeue
    should always work.  Long term correct fix is to implement qdisc->peek in all the qdisc's
    to allow for this (needed by several other qdisc's as well).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0afb51e72855971dba83b3c6b70c547c2d1161fd
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:53:49 2005 -0700

    [PKT_SCHED]: netem: reinsert for duplication
    
    Handle duplication of packets in netem by re-inserting at top of qdisc tree.
    This avoid problems with qlen accounting with nested qdisc. This recursion
    requires no additional locking but will potentially increase stack depth.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f49809fe9b39e22b0f6f75c86295ce216ce3e374
Merge: cdbbde1... c1ef1f3...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 10:27:39 2005 -0700

    Automatic merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit d11cf326bd5e785cc5a3f5a3d3f4e3a5522f4fb7
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Sun May 22 17:47:00 2005 -0700

    [IA64] sys_mmap doesn't follow posix.1 when parameter len=0
    
    In IA64 kernel, sys_mmap calls do_mmap2 and do_mmap2 returns addr if
    len=0, which means the mmap sys call succeeds.
    
    Posix.1 says:
    The mmap() function shall fail if:
    [EINVAL] The value of len is zero.
    
    Here is a patch to fix it.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Acked-by: David Mosberger <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cdbbde14cb55dd10771ce79154f787322d88411b
Merge: 284e423... 32529e0...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 10:02:30 2005 -0700

    Merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 284e423811495f632a7a334b2b93caba07d4f778
Author: Marcello Maggioni <hayarms@gmail.com>
Date:   Thu May 26 15:47:35 2005 +0200

    [PATCH] timeout at boottime with NEC3500A (and possibly others) when inserted a CD in it
    
    From: Marcello Maggioni <hayarms@gmail.com>
    
    Problem: Some drives (NEC 3500, TDK 1616N, Mad-dog MD-16XDVD9, RICOH
    MP5163DA, Memorex DVD9 drive and IO-DATA's too for sure), if a
    CD/DVD is inserted into the tray when the system is booted and if
    before the OS bootup the BIOS checked for the presence of a bootable
    CD/DVD into the drive, during the IDE probe phase the drive may
    result busy and remain so for the next 25/30 seconds . This cause the
    drive to be skipped during the booting phase and not begin usable
    until the next reboot (if the reboot goes well and the drive doesn't
    timeout again).
    
    Solution: Rising the timeout time from 10 seconds to 35 seconds
    (during these 35 seconds every drive should wake up for sure
    according to the tests I've done).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 41bb4c43b34bcde7eb62cf19acdcf9f2eb13801d
Author: Stuart Hayes <Stuart_Hayes@dell.com>
Date:   Thu May 26 15:38:45 2005 +0200

    [PATCH] ide-scsi: kmap scatter/gather before doing PIO
    
    From: Stuart Hayes <Stuart_Hayes@dell.com>
    
    The system can panic with a null pointer dereference using ide-scsi if
    PIO is being done on scatter gather pages that are in high memory,
    because page_address() returns 0.  We are actually seeing this using a
    tape drive.  This patch will kmap_atomic() the pages before performing
    PIO.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 8604affde9d4f52f04342d6a37c77d95fa167e7a
Author: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>
Date:   Thu May 26 14:55:34 2005 +0200

    [PATCH] convert IDE device drivers to driver-model
    
    * add ide_bus_match() and export ide_bus_type
    * split ide_remove_driver_from_hwgroup() out of ide_unregister()
    * move device cleanup from ide_unregister() to drive_release_dev()
    * convert ide_driver_t->name to driver->name
    * convert ide_driver_t->{attach,cleanup} to driver->{probe,remove}
    * remove ide_driver_t->busy as ide_bus_type->subsys.rwsem
      protects against concurrent ->{probe,remove} calls
    * make ide_{un}register_driver() void as it cannot fail now
    * use driver_{un}register() directly, remove ide_{un}register_driver()
    * use device_register() instead of ata_attach(), remove ata_attach()
    * add proc_print_driver() and ide_drivers_show(), remove ide_drivers_op
    * fix ide_replace_subdriver() and move it to ide-proc.c
    * remove ide_driver_t->drives, ide_drives and drives_lock
    * remove ide_driver_t->drivers, drivers and drivers_lock
    * remove ide_drive_t->driver and DRIVER() macro
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>

commit 32529e0128923e42126b5d14e444c18295a452ba
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Thu May 26 03:49:42 2005 -0400

    [PATCH] libata: Fix zero sg_dma_len() on 64-bit platform
    
    When testing ATAPI PIO data transfer on the ppc64 platform,  __atapi_pio_bytes() got zero when
    sg_dma_len() is used. I checked the <asm-ppc64/scatterlish.h>, the struct scatterlist is defined as:
    
    struct scatterlist {
    	struct page *page;
    	unsigned int offset;
    	unsigned int length;
    
    	/* For TCE support */
    	u32 dma_address;
    	u32 dma_length;
    };
    
    #define sg_dma_address(sg)	((sg)->dma_address)
    #define sg_dma_len(sg)		((sg)->dma_length)
    
    So, if the scatterlist is not DMA mapped, sg_dma_len() will return zero on ppc64.
    The same problem should occur on the x86-64 platform.
    On the i386 platform, sg_dma_len() returns sg->length, that's why the problem does not occur on an i386.
    
    Changes:
    - Use sg->length if the scatterlist is not DMA mapped (yet).
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit c1ef1f351db70ad60c793b8218dd9f6739cfd66d
Merge: ad6a998... bef9c55...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Thu May 26 02:17:16 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit ad6a9984eec72f3a609a8685281740f5e5f466aa
Merge: 3877820... 562faf4...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:38 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch tlan

commit 38778204a1ad0d2c266f85170c2fb7d80ed43160
Merge: 8cf0d9d... 6da0f68...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:28 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch sis900

commit 8cf0d9d075916c9affa53a0cfa8d1b94c9e95fd7
Merge: 8a75e7d... b2e0852...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:14 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch veth

commit 8a75e7d644b373f86c8c2316392cb7374fc4e063
Merge: f5a702b... 05e08a2...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:06 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch qeth

commit f5a702b26a0cd6052f0bae2bc3f0548538d3909c
Merge: 5ea6f2c... c16ef1c...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:53 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch ns83820

commit 5ea6f2c33f0c8b126136dbf1776ffbc444772cd7
Merge: acb9695... 760f86d...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:38 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch natsemi

commit acb969560d5b42500697a8bcd1667ac824928383
Merge: ee03a68... 22c6d14...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:25 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch forcedeth

commit ee03a68c108cce4af3b4988cb1204e84d81f1243
Merge: 0c2fc10... 41480af...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:09:52 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch airo

commit 0c2fc10901e1b516526c92849ccd03327f119dbe
Merge: d20c507... e885b5e...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:07:51 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch atmel

commit bef9c558841604116704e10b3d9ff3dbf4939423
Merge: 3db602b... 4b463f7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 18:01:26 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 3db602bdcd52d8b7523cfb4fb705cea84dbe1617
Merge: d20c507... 4c3a53d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 17:56:57 2005 -0700

    Merge of 'new-ids' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 4c3a53d4108367f639e5e0fe9366dfd7679c5514
Author: Francisco Javier <ffelix@sshinf.com>
Date:   Wed May 25 19:29:37 2005 -0400

    [PATCH] sata_promise: add PCI ID for FastTrak TX2200 2-ports

commit 525a099771d348a25d12ef9c47aa8680c7317e35
Author: NAKAMURA Kenta <kenta@c.csce.kyushu-u.ac.jp>
Date:   Wed May 25 19:28:38 2005 -0400

    [PATCH] sata_sil: new ID 1002:437A for ATI IXP400

commit d20c507f28dbee33086e8212b98f9ddc5372cd81
Author: Colin Leroy <colin@colino.net>
Date:   Wed May 25 12:31:35 2005 -0700

    [PATCH] therm_adt746x: show correct sensor locations
    
    This patch shows the correct locations of the heat sensors present in iBook
    and PowerBooks G4, instead of displaying them as being on CPU and GPU
    (which is not always the case).
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8bacec09352b86bd389cc93a20008577fa14764
Author: Colin Leroy <colin@colino.net>
Date:   Wed May 25 12:31:34 2005 -0700

    [PATCH] Make sure therm_adt746x only handles known hardware
    
    This patch limits therm_adt746x to currently existing fan controllers in
    Apple laptops.  It may avoid problems with future hardware.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bf4fb820d7382318d178bd765c20028415466ab
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:31 2005 -0700

    [PATCH] IB: fix endianness of path record MTU field
    
    Make MTU field in SA PathRecord and MCMemberRecord a u8 rather than an enum
    to avoid complications with endianness.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 561e148ea972a6e8d2c8f7aecc658b3a64f7a6de
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:30 2005 -0700

    [PATCH] IB: fix potential ib_umad leak
    
    Free all unclaimed MAD receive buffers when userspace closes our file so we
    don't leak memory.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4f50f003dc568f6fc3904d451c562007bd09640
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:29 2005 -0700

    [PATCH] IB: allow NULL sa_query callbacks
    
    Check if a client passes a NULL callback into an SA query, and if so, never
    call back.  This fixes an oops if someone unloads ib_ipoib and ib_sa in
    rapid succession.  ib_ipoib does an MCMember delete with a NULL callback
    and 0 timeout on unload, which is usually fine since the delete completes
    successfully.  However, if ib_sa is unloaded immediately afterwards, the
    delete will be canceled and ib_sa will try to call the (now already
    unloaded) ib_ipoib module back with the cancel completion, which triggers
    the oops.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f60fdf613536402e3313c5019b3ae6060b2ae4a
Author: Alexander Nyberg <alexn@telia.com>
Date:   Wed May 25 12:31:28 2005 -0700

    [PATCH] x86_64: CONFIG_BUG=n fixes
    
    Fixes some !CONFIG_BUG warnings:
    include/asm/mmu_context.h: I funktion `switch_mm':
    include/asm/mmu_context.h:57: varning: implicit declaration of function `out_of_line_bug'
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dca79a046b93a81496bb30ca01177fb17f37ab72
Author: Neil Horman <nhorman@redhat.com>
Date:   Wed May 25 12:31:27 2005 -0700

    [PATCH] ipmi build fix
    
    It looks like the recent IPMI patches had some -mm-onlyisms.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Cc: Corey Minyard <minyard@acm.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5daf05fbf73fc199e7a93a818e504856d07c5586
Author: Gerd Knorr <kraxel@suse.de>
Date:   Wed May 25 12:31:26 2005 -0700

    [PATCH] v4l: bttv i2c oops fix
    
    Don't try to access the i2c bus if the register wasn't successful.
    
    Signed-off-by: Gerd Knorr <kraxel@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b463f785837f73bdd88ae3821bb7b69599010c9
Merge: 6df16d0... 384f1fc...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed May 25 14:58:04 2005 -0700

    Merge of /home/davem/src/GIT/linux-2.6/.git/

commit 1b981021e88c8c28dc6a22cb1a327d8dc9296473
Merge: 384f1fc... f6f3a48...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 14:01:50 2005 -0700

    Merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit f6f3a488e56783836a0b6ca9188719a1229f505c
Merge: a58eae6... dfa1b73...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:36 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch amd8111

commit a58eae6480f354595c3954534e1ab591dc3ef1bf
Merge: 09e6266... 1bcd315...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:25 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch pcnet32

commit 09e62666d8a6312426f96bf483cdb003bde556fe
Merge: 34812c9... ac79c82...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:15 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch ixgb

commit 34812c9e188b47b1d6c9fff8ba530e6f2365ebc4
Merge: d6d78f6... 2648345...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:03 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch e1000

commit d6d78f63cea62851806bf6ac40c6f53349de442b
Merge: a83d5cf... 042e2fb...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:56:55 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch e100

commit a83d5cf7a1d1dd22f3a8162b728a7e895192dda8
Merge: 2a24ab6... 9092f46...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:56:22 2005 -0400

    Merge of /spare/repo/netdev-2.6 branch misc-fixes

commit 384f1fcd2db8bc5a15f20f10793d8e1c82acd6c5
Author: Jens Axboe <axboe@suse.de>
Date:   Wed May 25 17:00:15 2005 +0200

    [PATCH] relax ide-cd dma restrictions
    
    This has been sitting for a while, and is causing lots of grief for
    people burning CDs.  It relaxes the dma restriction for ide-cd,
    requiring only the length to be 32-byte aligned, address should be fine
    at normal double word alignment.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e15850200437c60b969025500e466383ec51ed8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 25 09:49:13 2005 +0100

    [PATCH] Speedtouch resync after lost signal.
    
    There's a bigger Speedtouch update coming your way after 2.6.12 but in
    the meantime, let's at least make it automatically resync if the DSL
    signal is lost.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0e8e29100c9866878d43bbb40ca17e8fe429851
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed May 25 16:29:26 2005 +1000

    [PATCH] ppc64 iSeries: fix boot time setting
    
    For quite a while, there has existed a hypervisor bug on legacy iSeries
    which means that we do not get the boot time set in the kernel.  This
    patch works around that bug.  This was most noticable when the root
    partition needed to be checked at every boot as the kernel thought it
    was some time in 1905 until user mode reset the time correctly.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f80e5c911465743ccd3a328f992c7d8aaebf1e8
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed May 25 13:41:26 2005 +1000

    [PATCH] ppc64: fix initialisation of gettimeofday calculations
    
    On PPC64, we keep track of when we need to update jiffies (and the
    variables used to calculate the time of day) based on the time base.
    
    If the time base frequence is sufficiently high compared to the
    processor clock frequency, then it is possible for the time of day
    variables to be corrupted at the time of the first decrementer interrupt
    we take.  This became obvious on a legacy iSeries where the time base
    frequency is the same as the processor clock.
    
    This one line patch fixes the initialisation so that the time of day
    variables and the indicator we use to tell when updates are due are
    better synchronised.
    
    Signed-off-by:  Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a24ab628aa7b190be32f63dfb6d96f3fb61580a
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 24 20:31:20 2005 -0700

    Linux 2.6.12-rc5

commit d981289627a7e2d8ef62dfcaa11fb60da68f30c6
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 24 19:31:10 2005 -0700

    [PATCH] aic7xxx_osm build fix
    
    Fix a c99ism.
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 558ac33e094f3a47c74a3a66b19cd3616f183184
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 24 19:31:10 2005 -0700

    [PATCH] saa6752hs build fix
    
    For older gcc's.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cafdd8ba08935d9b161bb781851dc4c0e6f70427
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Tue May 24 19:31:09 2005 -0700

    [PATCH] try_to_unmap_cluster() passes out-of-bounds pte to pte_unmap()
    
    try_to_unmap_cluster() does:
            for (pte = pte_offset_map(pmd, address);
                            address < end; pte++, address += PAGE_SIZE) {
    		...
    	}
    
    	pte_unmap(pte);
    
    It may take a little staring to notice, but pte can actually fall off the
    end of the pte page in this iteration, which makes life difficult for
    kmap_atomic() and the users not expecting it to BUG().  Of course, we're
    somewhat lucky in that arithmetic elsewhere in the function guarantees that
    at least one iteration is made, lest this force larger rearrangements to be
    made.  This issue and patch also apply to non-mm mainline and with trivial
    adjustments, at least two related kernels.
    
    Discovered during internal testing at Oracle.
    
    Signed-off-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33880aaddbbab1ccf36f4457ed1090621f2e39a
Author: Kirill Korotaev <dev@sw.ru>
Date:   Tue May 24 19:29:47 2005 -0700

    [PATCH] sigkill priority fix
    
    If SIGKILL does not have priority, we cannot instantly kill task before it
    makes some unexpected job.  It can be critical, but we were unable to
    reproduce this easily until Heiko Carstens <Heiko.Carstens@de.ibm.com>
    reported this problem on LKML.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6431e6a28e8df423e1ebcda065e9ff086198d2c6
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Tue May 24 19:29:46 2005 -0700

    [PATCH] voyager_smp.c static inline fix
    
    This patch fixes a compile bug by moving a static inline function to the
    right place.  The body of a static inline function has to be declared
    before the use of this function.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6df16d0c35b9c0d3627f30c106e6142d3d12662b
Merge: 7e43c84... 816242d...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 24 18:08:07 2005 -0700

    Merge of davem@davemloft.net:/disk1/GIT/sparc-2.6/.git/

commit 7e43c84e3e5423ae72ae31e4cd7bbccfd1605194
Author: blaisorblade@yahoo.it <blaisorblade@yahoo.it>
Date:   Wed May 25 01:31:42 2005 +0200

    [PATCH] Cleanup DEFINE_WAIT
    
    Use LIST_HEAD_INIT rather than doing it by hand in DEFINE_WAIT.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9092f46b5aed4515d9a427d5dab3be1584851f07
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed May 18 13:41:33 2005 -0400

    [PATCH] tulip: add return to ULI526X clause in tulip_mdio_write
    
    The 'if' clause for ULI526X in tulip_mdio_write allows for
    spin_unlock_irqrestore to be called twice for tp->mii_lock.  I believe
    this is caused by the unintentional omission of a return at the end
    of that clause.  This patch adds that return.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 187a1a94d629621d1471b42308e63573b1150773
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Mon May 23 15:50:26 2005 -0700

    [PATCH] driver core: restore event order for device_add()
    
    As a result of the split of the kobject-registration and the
    corresponding hotplug event, the order of events for device_add() has
    changed. This restores the old order, cause it confused some userspace
    applications.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 816242da3735957bee99aeba40aa60c4f120a101
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 15:52:08 2005 -0700

    [SPARC64]: Add boot option to force UltraSPARC-III P-Cache on.
    
    Older UltraSPARC-III chips have a P-Cache bug that makes us disable it
    by default at boot time.
    
    However, this does hurt performance substantially, particularly with
    memcpy(), and the bug is _incredibly_ obscure.  I have never seen it
    triggered in practice, ever.
    
    So provide a "-P" boot option that forces the P-Cache on.  It taints
    the kernel, so if it does trigger and cause some data corruption or
    OOPS, we will find out in the logs that this option was on when it
    happened.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab3fc403633c38aef5ef48844f8e5dbfee7c34f8
Merge: f10d20c... d1faeae...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 23 14:57:14 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit d1faeaeb95a05275cf0c5b51b88f2fa833434625
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 14:00:44 2005 -0700

    [TG3]: Update driver version.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ded7340d9d9142807a1ef94ab9c51d13ab76a1c9
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 13:59:47 2005 -0700

    [TG3]: Increase TEST_BUFFER_SIZE to 8K.
    
    This makes the DMA bug workaround test more likely
    to find the problem on some systems.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 413f5431a5a27e44c6610de640e507e1e3c885f4
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 13:13:15 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 180e42503300629692b513daeb55a6bb0b51500c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 23 13:11:07 2005 -0700

    [IPV6]: Fix xfrm tunnel oops with large packets
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 205902ecc7bcb2a007ed27bb3518e8f70e5d113e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon May 23 13:09:19 2005 -0700

    [NET]: netdevice.h: be'ify packet_type
    
    Everybody does
    
    	struct packet_type foo_packet_type = {
    		.type = __constant_htons(ETH_P_FOO);
    	};
    
    5 introduced warnings will be properly fixed later.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8659255c599ba497bcfb8b4abc187d9e0951d99
Author: Xose Vazquez Perez <xose.vazquez@gmail.com>
Date:   Mon May 23 12:54:51 2005 -0700

    [TG3]: Add 5752M device ID.
    
    Add 0x1601 as 5752M, it's a 5752 but for mobile PCs.
    Stolen from Broadcom bcm5700-8.1.55 driver.
    
    Someone forgot to add it to tg3 ;-)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 82d1542c1df6b3a0105843deddebeff03068d1dc
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon May 23 12:53:14 2005 -0700

    [NET]: include/linux/if_tr.h clean-up
    
    I removed the ethernet definitions (which were commented out) and
    cleaned up the tabs.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>

commit deaf2622bdc74270381873c7936c91500c683853
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 12:45:26 2005 -0700

    [NET]: Kill stray reference to sock->passcred.
    
    That struct member was deleted, but a comment
    was not updated to reflect this.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15333038d577b0c0255c0f14a38d9e6895937453
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 23 12:36:25 2005 -0700

    [CRYPTO]: Only reschedule if !in_atomic()
    
    The netlink gfp_any() problem made me double-check the uses of in_softirq()
    in crypto/*.  It seems to me that we should be checking in_atomic() instead
    of in_softirq() in crypto_yield.  Otherwise people calling the crypto ops
    with spin locks held or preemption disabled will get burnt, right?
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 314324121f9b94b2ca657a494cf2b9cb0e4a28cc
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 12:03:06 2005 -0700

    [TCP]: Fix stretch ACK performance killer when doing ucopy.
    
    When we are doing ucopy, we try to defer the ACK generation to
    cleanup_rbuf().  This works most of the time very well, but if the
    ucopy prequeue is large, this ACKing behavior kills performance.
    
    With TSO, it is possible to fill the prequeue so large that by the
    time the ACK is sent and gets back to the sender, most of the window
    has emptied of data and performance suffers significantly.
    
    This behavior does help in some cases, so we should think about
    re-enabling this trick in the future, using some kind of limit in
    order to avoid the bug case.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f10d20c1f192aa90fc935207f22da32462e793ee
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 23 16:54:14 2005 +1000

    [PATCH] ppc64: Fix g5 hw timebase sync
    
    The hardware sync of the timebase on SMP G5s uses a black magic
    incantation to the i2c clock chip that was inspired from what Darwin
    does.
    
    However, this was an earlier version of Darwin that was ...  buggy !
    heh.  This causes the latest models to break though when starting SMP,
    so it's worth fixing.
    
    Here's a new version of the incantation based on careful transcription
    of the said incantations as found in the latest version of apple's
    temple.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e16fa6b9d2ad9467cf5bdf517e6b6f45e5867ad6
Author: Kumar Gala <galak@freescale.com>
Date:   Mon May 23 12:29:56 2005 -0500

    [PATCH] ppc32: Fix an off-by-one error in ipic_init
    
    There is an off-by-one error in the IPIC code that configures the
    external interrupts (Edge or Level Sensitive).
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1263cc67c09bc7f913a6877f3ba0427f0b76617e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 23 10:03:52 2005 +1000

    [PATCH] ppc64: Fix booting on latest G5 models
    
    The latest speedbumped Apple G5 models have a "bug" in the Open Firmware
    device tree that lacks the proper interrupt routing information for the
    northbridge i2c controller.  Apple's driver silently falls back into a
    sub-optimal "polled" mode (heh, maybe they didn't even notice the bug
    because of that :), our driver didn't properly check and crashes :(
    
    This patch fixes our driver to not crash, and adds code to the
    prom_init() OF trampoline code that detects the "bug" and adds the
    missing information back for this chipset revision.  This fixes booting
    and thermal control on these models.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5c44c2147a447f77e07fecdb087ae288e1f4e40
Author: Suparna Bhattacharya <suparna@in.ibm.com>
Date:   Sat May 21 16:33:36 2005 -0700

    [PATCH] fix for __generic_file_aio_read() to return 0 on EOF
    
    I came across the following problem while running ltp-aiodio testcases from
    ltp-full-20050405 on linux-2.6.12-rc3-mm3.  I tried running the tests with
    EXT3 as well as JFS filesystems.
    
    One or two fsx-linux testcases were hung after some time.  These testcases
    were hanging at wait_for_all_aios().
    
    Debugging shows that there were some iocbs which were not getting completed
    eventhough the last retry for those returned -EIOCBQUEUED.  Also all such
    pending iocbs represented READ operation.
    
    Further debugging revealed that all such iocbs hit EOF in the DIO layer.
    To be more precise, the "pos" from which they were trying to read was
    greater than the "size" of the file.  So the generic_file_direct_IO
    returned 0.
    
    This happens rarely as there is already a check in
    __generic_file_aio_read(), for whether "pos" < "size" before calling direct
    IO routine.
    
    >size = i_size_read(inode);
    >if (pos < size) {
    >	  retval = generic_file_direct_IO(READ, iocb,
    >                               iov, pos, nr_segs);
    
    But for READ, we are taking the inode->i_sem only in the DIO layer.  So it
    is possible that some other process can change the size of the file before
    we take the i_sem.  In such a case ( when "pos" > "size"), the
    __generic_file_aio_read() would return -EIOCBQUEUED even though there were
    no I/O requests submitted by the DIO layer.  This would cause the AIO layer
    to expect aio_complete() for THE iocb, which doesnot happen.  And thus the
    test hangs forever, waiting for an I/O completion, where there are no
    requests submitted at all.
    
    The following patch makes __generic_file_aio_read() return 0 (instead of
    returning -EIOCBQUEUED), on getting 0 from generic_file_direct_IO(), so
    that the AIO layer does the aio_complete().
    
    Testing:
    
    I have tested the patch on a SMP machine(with 2 Pentium 4 (HT)) running
    linux-2.6.12-rc3-mm3.  I ran the ltp-aiodio testcases and none of the
    fsx-linux tests hung.  Also the aio-stress tests ran without any problem.
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f359b74c80bc76c1f6c2cb8f2837882f2335ba0c
Author: Vladimir Saveliev <vs@namesys.com>
Date:   Sat May 21 16:33:34 2005 -0700

    [PATCH] reiserfs: max_key fix
    
    This patch fixes a bug introduced by Al Viro's patch: [patch 136/174]
    reiserfs endianness: clone struct reiserfs_key
    
    The problem is MAX_KEY and MAX_IN_CORE_KEY defined in this patch do not
    look equal from reiserfs comp_key's point of view.  This caused reiserfs'
    sanity check to complain.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1808caffaf448f0ad42ba04b25825fc170cf8e44
Merge: 3d15e4a... 912490d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat May 21 15:27:09 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-mmc.git

commit 3d15e4a32dfa3da45751356e5f47aa04b97370e0
Merge: 10f02d1... 857dde2...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat May 21 15:04:27 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 10f02d1c59e55f529140dda3a92f0099d748451c
Author: Samuel Thibault <samuel.thibault@labri.fr>
Date:   Sat May 21 17:50:15 2005 +0200

    [PATCH] spin_unlock_bh() and preempt_check_resched()
    
    In _spin_unlock_bh(lock):
    	do { \
    		_raw_spin_unlock(lock); \
    		preempt_enable(); \
    		local_bh_enable(); \
    		__release(lock); \
    	} while (0)
    
    there is no reason for using preempt_enable() instead of a simple
    preempt_enable_no_resched()
    
    Since we know bottom halves are disabled, preempt_schedule() will always
    return at once (preempt_count!=0), and hence preempt_check_resched() is
    useless here...
    
    This fixes it by using "preempt_enable_no_resched()" instead of the
    "preempt_enable()", and thus avoids the useless preempt_check_resched()
    just before re-enabling bottom halves.
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 857dde2e79082d2954ede7f10783addaae956777
Author: David Woodhouse <dwmw2@org.rmk.(none)>
Date:   Sat May 21 15:52:23 2005 +0100

    When we detect that a 16550 was in fact part of a NatSemi SuperIO chip
    with high-speed mode enabled, we switch it to high-speed mode so that
    baud_base becomes 921600. However, we also need to multiply the baud
    divisor by 8 at the same time, in case it's already in use as a console.
    
    Signed-off-by: David Woodhouse
    Acked-by: Tom Rini
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 912490db699d83cb3d03570b63df7448677a3f56
Author: Pierre Ossman <drzeus-list@cx.rmk.(none)>
Date:   Sat May 21 10:27:02 2005 +0100

    [PATCH] MMC: Proper MMC command classes support
    
    Defines for the different command classes as defined in the MMC and SD
    specifications.
    
    Removes the check for high command classes and instead checks that the
    command classes needed are present.
    Previous solution killed forward compatibility at no apparent gain.
    
    Signed-of-by: Pierre Ossman

commit 9636273dae265b9354b861b373cd43cd76a6d0fe
Merge: 2df9fa3... 2bf2c56...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 20 17:21:03 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6.git

commit 2df9fa36643f03b0462b170515c1e221c3709fa9
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:59 2005 -0700

    [PATCH] x86_64: i386/x86-64: Export cpu_core_map
    
    Needed for the powernow k8 driver for dual core support.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <mark.langsdorf@amd.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14d98cad82b78956957e95567b8b5fb38ec5859f
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:59 2005 -0700

    [PATCH] x86_64: Add option to disable timer check
    
    This works around the too fast timer seen on some ATI boards.
    
    I don't feel confident enough about it yet to enable it by default, but give
    users the option.
    
    Patch and debugging from Christopher Allen Wing <wingc@engin.umich.edu>, with
    minor tweaks (renamed the option and documented it)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 607a16858397829806c5a4db999ce6daf327f98c
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:58 2005 -0700

    [PATCH] x86_64: Fix 32bit system call restart
    
    The test case at
    http://cvs.sourceforge.net/viewcvs.py/posixtest/posixtestsuite/conforman
    ce/interfaces/clock_nanosleep/1-5.c fails if it runs as a 32bit process on
    x86_86 machines.
    
    The root cause is the sub 32bit process fails to restart the syscall after it
    is interrupted by a signal.
    
    The syscall number of sys_restart_syscall in table sys_call_table is
    __NR_restart_syscall (219) while it's __NR_ia32_restart_syscall
    (0) in ia32_sys_call_table. When regs->rax==(unsigned
    long)-ERESTART_RESTARTBLOCK, function do_signal doesn't distinguish if
    the process is 64bit or 32bit, and always sets restart syscall number
    as __NR_restart_syscall (219).
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4057923614e2868a865aa6c6e3bc53542c818d4d
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:57 2005 -0700

    [PATCH] i386: Fix race in iounmap
    
    We need to hold the vmlist_lock while doing change_page_attr, otherwise we
    could reset someone else's mapping.
    
    Requires previous patch to add __remove_vm_area
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7856dfeb23c16ef3d8dac8871b4d5b93c70b59b9
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:57 2005 -0700

    [PATCH] x86_64: Fixed guard page handling again in iounmap
    
    Caused oopses again.  Also fix potential mismatch in checking if
    change_page_attr was needed.
    
    To do it without races I needed to change mm/vmalloc.c to export a
    __remove_vm_area that does not take vmlist lock.
    
    Noticed by Terence Ripperda and based on a patch of his.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4d1fcf3a2ea89b6d6221fa8b4588c77aff50995
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:56 2005 -0700

    [PATCH] x86_64: Don't allow accesses below register frame in ptrace
    
    There was a "off by one quad word" error in there.  I don't think it is
    exploitable because it will only store into a unused area, but better to plug
    it.
    
    Found and fixed by John Blackwood
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b41e29398a873945d02e0009ce7e57608fdb4042
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:55 2005 -0700

    [PATCH] x86_64: 386/x86-64 Further AMD dual core fixes
    
    - Remove duplicated ifdef
    - Make core_id match what Intel uses
    - Initialize phys_proc_id correctly for non DC case
    - Handle non power of two core numbers.
    
    Fixes for both i386 and x86-64
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b39c4fab259b216148e705344a892c96efe1946d
Author: Paul Jackson <pj@sgi.com>
Date:   Fri May 20 13:59:15 2005 -0700

    [PATCH] cpusets+hotplug+preepmt broken
    
    This patch removes the entwining of cpusets and hotplug code in the "No
    more Mr.  Nice Guy" case of sched.c move_task_off_dead_cpu().
    
    Since the hotplug code is holding a spinlock at this point, we cannot take
    the cpuset semaphore, cpuset_sem, as would seem to be required either to
    update the tasks cpuset, or to scan up the nested cpuset chain, looking for
    the nearest cpuset ancestor that still has some CPUs that are online.  So
    we just punt and blast the tasks cpus_allowed with all bits allowed.
    
    This reverts these lines of code to what they were before the cpuset patch.
     And it updates the cpuset Doc file, to match.
    
    The one known alternative to this that seems to work came from Dinakar
    Guniguntala, and required the hotplug code to take the cpuset_sem semaphore
    much earlier in its processing.  So far as we know, the increased locking
    entanglement between cpusets and hot plug of this alternative approach is
    not worth doing in this case.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nathan Lynch <ntl@pobox.com>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2665f92ae67a2d086537979d317a6f3a5697c63
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Fri May 20 13:59:14 2005 -0700

    [PATCH] ppc32: fix CONFIG_TASK_SIZE handling on 44x
    
    This patch fixed CONFIG_TASK_SIZE handling on 44x.  Currently head_44x.S
    hardcodes 0x80000000, which breaks if user chooses to change TASK_SIZE
    (e.g.  for 3G user-space).  Tested on Ocotea in 3G/1G configuration.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f8cd80fb261177244c1479cfcad1387dbf3cd4b
Author: Kumar Gala <galak@freescale.com>
Date:   Fri May 20 13:59:13 2005 -0700

    [PATCH] ppc32: Fix platform device initialization of 8250 serial ports
    
    Initialization of 8250 serial ports that are platform devices require that
    at empty entry exists in the array of plat_serial8250_port.  With out an
    empty entry we can get some pretty random behavior.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84ddaa8c86fc12ee1c3509be5ff3464821535c17
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:12 2005 -0700

    [PATCH] uml: Change printf to printk in console driver
    
    From: Al Viro - we have error messages with KERN_ERR in them, so they
    should be printk-ed rather than printf-ed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12f49643bc44c428919b210148a930496827dd26
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:12 2005 -0700

    [PATCH] uml: fixrange_init 3-level page table support
    
    From: Al Viro - add three-level page table support to fixrange_init.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b9014c1da380384efe7752db38a0253a74d0238
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:11 2005 -0700

    [PATCH] uml: Remove ubd-mmap support
    
    Finally rip out the ubd-mmap code, which turned out to be broken by design.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b67a3c4cd380968bffe8efb681470acda42b441
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:10 2005 -0700

    [PATCH] uml: initrd cleanup
    
    The serial UML OS-abstraction layer patch (um/kernel dir).
    
    This moves all systemcalls from initrd_user.c file under os-Linux dir and join
    initrd_user.c and initrd_kern.c files in new file initrd.c
    
    Signed-off-by: Gennady Sharapov <Gennady.V.Sharapov@intel.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41a9cf8ebe08ccdd5799c175f9758f14617c0b0a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:10 2005 -0700

    [PATCH] uml: Export clear_user_*
    
    From: Oleg Drokin: This patch is needed to support kernel modules that want to
    use clear_user() (that is exported symbol on all other architectures).
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c00c31fc0f003363773121a0ac6f4e5b128e879
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:09 2005 -0700

    [PATCH] uml: multicast driver cleanup
    
    Byte-swapping of the port and IP address passed in to the multicast driver by
    the user used to happen in different places, which was a bug in itself.  The
    port also was swapped before being printk-ed, which led to a misleading
    message.  This patch moves the port swapping to the same place as the IP
    address swapping.  It also cleans up the error paths of mcast_open.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 060e352236ece3325a684c72817fbacdac597574
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:08 2005 -0700

    [PATCH] uml: Delay loop cleanups
    
    This patch cleans up the delay implementations a bit, makes the loops
    unoptimizable, and exports __udelay and __const_udelay.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13479d52c7a61a18900d7f36730b7d3b43723d97
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:08 2005 -0700

    [PATCH] uml: Page fault fixes
    
    Any access to a PROT_NONE page should segfault the process.  A JVM seems to do
    this on purpose.  Also, Al noticed some bogus code, which is now deleted.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9950c820e556e39cd26581826b5581a64fb641
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:07 2005 -0700

    [PATCH] uml: small fixes left over from rc4
    
    Some changes that I sent in didn't make 2.6.12-rc4 for some reason.  This
    adds them back.  We have
    	an x86_64 definition of TOP_ADDR
    	a reimplementation of the x86_64 csum_partial_copy_from_user
    	some syntax fixes in arch/um/kernel/ptrace.c
    	removal of a CFLAGS definition in the x86_64 Makefile
    	some include changes in the x86_64 ptrace.c and user-offsets.h
    	a syntax fix in elf-x86_64.h
    Also moved an include in the i386 and x86_64 Makefiles to make the symlinks
    work, and some small fixes from Al Viro.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46f4e1b7d5fa3ddf2486bf69716c404147e38ebf
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri May 20 13:59:06 2005 -0700

    [PATCH] packet driver permission checking fix
    
    If you tried to open a packet device first in read-only mode and then a
    second time in read-write mode, the second open succeeded even though the
    device was not correctly set up for writing.  If you then tried to write
    data to the device, the writes would fail with I/O errors.
    
    This patch prevents that problem by making the second open fail with
    -EBUSY.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bf2c568c878b9c0bbacac5c3210a6bd81856d21
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu May 19 21:30:13 2005 -0500

    [SCSI] aic7xxx: fix U160 mode
    
    The new period/dt setting routines don't get the coupling of these
    parameters correct.  This means that Domain Validation never gets DT
    set, and thus the drive gets restricted to U80.
    
    Fix this by restoring the couplings in the set routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fb3089dfb58bf07992252b42e77c6f35d45dff5e
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Tue May 17 21:09:52 2005 -0500

    [SCSI] aic7xxx: add back locking
    
    Tampering with the settings has to be done under the host lock ...
    slave_alloc isn't called under any lock, so this has to be done
    explicitly.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c7525233d2df39b95552f6f49c6b390a9c4d2e80
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Tue May 17 18:07:34 2005 -0500

    [SCSI] aic7xxx: make correct use of slave_alloc/destroy and remove the per device timer
    
    The allocation of all of our components should be done in slave alloc.
    Currently it's rather fancifully refcounted in the queuecommand
    callback.  This patch moves allocation and destroy to their correct
    places in slave_alloc/slave_destory.  Now we can guarantee that
    everywhere a device is requested, it's actually been allocated, so don't
    check for this anymore.
    
    Additionally, the per device busy timer was the only source of potential
    use after free.  It's been deleted because Linux does the correct thing
    with busy returns, so there's no need to implement a separate timer in
    the driver.
    
    Finally, implement code that forces all the device parameters to zero
    (i.e. async and narrow) in the slave alloc, inform the spi class of the
    bios recorded maximums and wait until slave configure before trying
    anything more adventurous.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e45ebcc661069bfb002c56dd942aedf43ba9239
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Tue May 17 00:06:08 2005 -0500

    [SCSI] aic7xxx: remove the completeq
    
    This should finish the spurious queue removal from aic7xxx (there are
    other queues that are probably unnecessary, but at least the major and
    obviously unnecessary ones are done with).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 38c29ce06d24691d6e6dd786175fcc54efd5995b
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Mon May 16 21:37:58 2005 -0500

    [SCSI] aic7xxx: remove the last vestiges of the runq
    
    This was rendered obsolete by the busyq removal; remove some of the last
    remnants of its presence.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 013791ee01754f83dbb4ccfd266381db74e120b5
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:52:39 2005 +0200

    [SCSI] aic7xxx: remove usage of obsolete typedefs
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7dfa0f2673c17334c5de75a449f7bc161c9bd2c0
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:54:12 2005 +0200

    [SCSI] remove dma_mask hacks
    
    pci_alloc_consistent is under 4G by default.  Also simplify the
    definition of bus_dmamap_t.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dedd831081052028f35aaf924ea3d6c55109074f
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:52:06 2005 +0200

    [SCSI] aic7xxx: remove Linux 2.4 ifdefs
    
    There's not much sense in sharing code anymore now that aic7xxx uses
    various transport class facilities.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c06716fe1cea97749668c83e8374b453fbd00823
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:51:13 2005 +0200

    [SCSI] aic7xxx: remove some DV leftovers
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e4e360c325c90f7830baaa2a27cd7a1f2bdeb6b0
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Mon May 16 16:39:38 2005 -0500

    [SCSI] remove aic7xxx busyq
    
    The aic7xxx driver has two spurious queues in it's linux glue code: the
    busyq which queues incoming commands to the driver and the completeq
    which queues finished commands before sending them back to the mid-layer
    
    This patch just removes the busyq and makes the aic finally return the
    correct status to get the mid-layer to manage its queueing, so a command
    is either committed to the sequencer or returned to the midlayer for
    requeue.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fad01ef88d2a27303757924c1fc013b31fe9a76b
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Sun May 8 16:00:15 2005 -0500

    [SCSI] correct aic7xxx period setting routines
    
    This is similar to the previous sym2 problem.  For Domain Validation to
    work we can't allow any period setting to turn wide on if it was
    previously off.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 62a8612972eaea804e1e42c63ee403cd4e14cc35
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Fri May 6 18:05:20 2005 -0500

    [SCSI] implement parameter limits in the SPI transport class
    
    There's a basic need not to have parameters go under or over certain
    values when doing domain validation.  The basic ones are
    
    max_offset, max_width and min_period
    
    This patch makes the transport class take and enforce these three
    limits.  Currently they can be set by the user, although they could
    obviously be read from the HBA's on-board NVRAM area during
    slave_configure (if it has one).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c7878f024705594ac455e501ad51e475a400d5d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 20 13:36:19 2005 -0700

    Remove some left-over empty files
    
    Hopefully the addition of -E to my applypatch script
    will mean that I won't have these kinds of leftovers
    in the future.

commit a228dfd5dc4b92288ea22d427b2bfc48ba5bb8b0
Author: David S. Miller <davem@davemloft.net>
Date:   Fri May 20 11:40:32 2005 -0700

    [SPARC64]: Fix bad performance side effect of strbuf timeout changes.
    
    The recent change to add a timeout to strbuf flushing had
    a negative performance impact.  The udelay()'s are too long,
    and they were done in the wrong order wrt. the register read
    checks.  Fix both, and things are happy again.
    
    There are more possible improvements in this area.  In fact,
    PCI streaming buffer flushing seems to be part of the bottleneck
    in network receive performance on my SunBlade1000 box.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37e0915b701281182cea9fc90e894d10addf134a
Author: Corey Minyard <minyard@acm.org>
Date:   Fri May 20 08:56:23 2005 +0200

    [PATCH] Add sysfs support for the IPMI device interface
    
    Add support for sysfs to the IPMI device interface.
    
    Clean-ups based on Dimitry Torokovs comment by Philipp Hahn.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Philipp Hahn <pmhahn@titan.lahn.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45fed46f5b98aaf439e9ef125992ec853cd98499
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:45:58 2005 +1000

    [PATCH] ppx32: Fix uninitialized variable in set_preferred_console
    
    This fixes an uninitialized variable warning in arch/ppc/kernel/setup.c,
    and this time gcc is actually right, there is a path that could result
    in offset being uninitialized.  Zero is a sane default in this instance.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72480ef863740c3dc301b0803c9ed6d10716aa11
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:50:55 2005 +1000

    [PATCH] ppc32: Fix __copy_tofrom_user return value
    
    Recently the __copy_tofrom_user routine was modified to avoid doing
    prefetches past the end of the source array.  However, in doing so we
    introduced a bug in that it now returns the wrong value for the number
    of bytes not copied when a fault is encountered.  This fixes it to
    return the correct number.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3207a80a6e11c7ceff7e46d5ec6bfcc03c14e729
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 17:15:00 2005 +1000

    [PATCH] ppc32: remove unused computation
    
    We are computing phys in the code below and never using.  This patch
    takes out the redundant computation.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c37a88c5b1195d4ac74d44a6413839b93df5af4
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:57:22 2005 +1000

    [PATCH] ppc32: don't call progress functions after boot
    
    On ppc32, the platform code can supply a "progress" function that is
    used to show progress through the boot.  These functions are usually
    in an init section and so can't be called after the init pages are
    freed.  Now that the cpu bringup code can be called after the system
    is booted (for hotplug cpu) we can get the situation where the
    progress function can be called after boot.  The simple fix is to set
    the progress function pointer to NULL when the init pages are freed,
    and that is what this patch does (note that all callers already check
    whether the function pointer is NULL before trying to call it).
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07ab67c8d0d7c1021343b7d5c045033d6bf7be69
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 22:43:37 2005 -0700

    Fix get_unmapped_area sanity tests
    
    As noted by Chris Wright, we need to do the full range of tests regardless
    of whether MAP_FIXED is set or not, so re-organize get_unmapped_area()
    slightly to do the sanity checks unconditionally.

commit 66e60f92518268f4d2a702a1c4ffbe1caacd6290
Merge: 804c64e... 4b40033...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 15:31:18 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git/

commit 804c64ea864d0a8ee13f3de0b74158a3e9c3166d
Merge: 49a4387... aa1c6a6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 15:29:23 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit aa1c6a6f7f0518b42994d02756a41cbfdcac1916
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 13:07:32 2005 -0700

    [NETLINK]: Defer socket destruction a bit
    
    In netlink_broadcast() we're sending shared skb's to netlink listeners
    when possible (saves some copying). This is OK, since we hold the only
    other reference to the skb.
    
    However, this implies that we must drop our reference on the skb, before
    allowing a receiving socket to disappear. Otherwise, the socket buffer
    accounting is disrupted.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 68acc024ea7391e03c2c695ba0b9fb31baa974bf
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 13:06:35 2005 -0700

    [NETLINK]: Move broadcast skb_orphan to the skb_get path.
    
    Cloned packets don't need the orphan call.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db61ecc3352d72513c1b07805bd6f760e30c001b
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 12:46:59 2005 -0700

    [NETLINK]: Fix race with recvmsg().
    
    This bug causes:
    
    assertion (!atomic_read(&sk->sk_rmem_alloc)) failed at net/netlink/af_netlink.c (122)
    
    What's happening is that:
    
    1) The skb is sent to socket 1.
    2) Someone does a recvmsg on socket 1 and drops the ref on the skb.
       Note that the rmalloc is not returned at this point since the
       skb is still referenced.
    3) The same skb is now sent to socket 2.
    
    This version of the fix resurrects the skb_orphan call that was moved
    out, last time we had 'shared-skb troubles'. It is practically a no-op
    in the common case, but still prevents the possible race with recvmsg.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1eda339e76a9aac05883c548028bf91aed734783
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Thu May 19 12:42:39 2005 -0700

    [PKT_SCHED]: Fixup simple action define.
    
    Make it consistent with other net/sched files
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31c26852cb2ac77f1d4acb37bcf31f165fd5eb68
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 19 12:39:49 2005 -0700

    [IPSEC]: Verify key payload in verify_one_algo
    
    We need to verify that the payload contains enough data so that
    attach_one_algo can copy alg_key_len bits from the payload.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9e9dead05b19e7f52c9aa00cd3a5b7ac4fcacf4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 19 12:39:04 2005 -0700

    [IPSEC]: Fixed alg_key_len usage in attach_one_algo
    
    The variable alg_key_len is in bits and not bytes.  The function
    attach_one_algo is currently using it as if it were in bytes.
    This causes it to read memory which may not be there.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8be58932ca596972e4953ae980d8bc286857cae8
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 19 12:36:33 2005 -0700

    [NETFILTER]: Do not be clever about SKB ownership in ip_ct_gather_frags().
    
    Just do an skb_orphan() and be done with it.
    Based upon discussions with Herbert Xu on netdev.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d9fa0f392b20b2b8e3df379c44194492a2446c6e
Author: Julian Anastasov <ja@ssi.bg>
Date:   Thu May 19 12:29:59 2005 -0700

    [IP_VS]: Remove extra __ip_vs_conn_put() for incoming ICMP.
    
    Remove extra __ip_vs_conn_put for incoming ICMP in direct routing
    mode. Mark de Vries reports that IPVS connections are not leaked anymore.
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e2987503dda95a5f80290bb8c06279009c2419e
Merge: b1a4569... 49a4387...
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu May 19 12:26:57 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit f81a0bffa116ea22149aa7cfb0b4ee09096d9d92
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 19 12:26:43 2005 -0700

    [AF_UNIX]: Use lookup_create().
    
    currently it opencodes it, but that's in the way of chaning the
    lookup_hash interface.
    
    I'd prefer to disallow modular af_unix over exporting lookup_create,
    but I'll leave that to you.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49a43876b935c811cfd29d8fe998a6912a1cc5c4
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Wed May 18 15:39:33 2005 -0700

    [PATCH] prevent NULL mmap in topdown model
    
    Prevent the topdown allocator from allocating mmap areas all the way
    down to address zero.
    
    We still allow a MAP_FIXED mapping of page 0 (needed for various things,
    ranging from Wine and DOSEMU to people who want to allow speculative
    loads off a NULL pointer).
    
    Tested by Chris Wright.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fdba6b085eb7068e9594cfa55ffe40466184b4d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed May 18 22:52:33 2005 -0700

    [IPV4/IPV6] Ensure all frag_list members have NULL sk
    
    Having frag_list members which holds wmem of an sk leads to nightmares
    with partially cloned frag skb's.  The reason is that once you unleash
    a skb with a frag_list that has individual sk ownerships into the stack
    you can never undo those ownerships safely as they may have been cloned
    by things like netfilter.  Since we have to undo them in order to make
    skb_linearize happy this approach leads to a dead-end.
    
    So let's go the other way and make this an invariant:
    
    	For any skb on a frag_list, skb->sk must be NULL.
    
    That is, the socket ownership always belongs to the head skb.
    It turns out that the implementation is actually pretty simple.
    
    The above invariant is actually violated in the following patch
    for a short duration inside ip_fragment.  This is OK because the
    offending frag_list member is either destroyed at the end of the
    slow path without being sent anywhere, or it is detached from
    the frag_list before being sent.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d48102007d068df7ba3055cdc1723e12db1ba30f
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed May 18 22:51:45 2005 -0700

    [XFRM]: skb_cow_data() does not set proper owner for new skbs.
    
    It looks like skb_cow_data() does not set
    proper owner for newly created skb.
    
    If we have several fragments for skb and some of them
    are shared(?) or cloned (like in async IPsec) there
    might be a situation when we require recreating skb and
    thus using skb_copy() for it.
    Newly created skb has neither a destructor nor a socket
    assotiated with it, which must be copied from the old skb.
    As far as I can see, current code sets destructor and socket
    for the first one skb only and uses truesize of the first skb
    only to increment sk_wmem_alloc value.
    
    If above "analysis" is correct then attached patch fixes that.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7383c22246cfccbe912541dd83103009ed2b537
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:50:53 2005 -0700

    [TG3]: In tg3_poll(), resample status_tag after doing work.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59e6b4343299373bc10dd131ab5142f53ddd838a
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:50:10 2005 -0700

    [TG3]: Refine DMA boundary setting.
    
    Extract DMA boundary bit selection into a seperate
    function, tg3_calc_dma_bndry().  Call this from
    tg3_test_dma().
    
    Make DMA test more reliable by using no DMA boundry
    setting during the test.  If the test passes, then
    use the setting we selected before the test.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Michael Chan <mchan@broadcom.com>

commit 15f9850d3c2d46f5851a424d2990a18b5bb5ebfd
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:49:26 2005 -0700

    [TG3]: Set minimal hw interrupt mitigation.
    
    Even though we do software interrupt mitigation
    via NAPI, it still helps to have some minimal
    hw assisted mitigation.
    
    This helps, particularly, on systems where register
    I/O overhead is much greater than the CPU horsepower.
    
    For example, it helps on NUMA systems.  In such cases
    the PIO overhead to disable interrupts for NAPI accounts
    for the majority of the packet processing cost.  The
    CPU is fast enough such that only a single packet is
    processed by each NAPI poll call.
    
    Thanks to Michael Chan for reviewing this patch.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fac9b83ea79aa3112ed245d9a4fc2a5c3ec2b7ec
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:46:34 2005 -0700

    [TG3]: Add tagged status support.
    
    When supported, use the TAGGED interrupt processing support
    the chip provides.  In this mode, instead of a "on/off" binary
    semaphore, an incrementing tag scheme is used to ACK interrupts.
    
    All MSI supporting chips support TAGGED mode, so the tg3_msi()
    interrupt handler uses it unconditionally.  This invariant is
    verified when MSI support is tested.
    
    Since we can invoke tg3_poll() multiple times per interrupt under
    high packet load, we fetch a new copy of the tag value in the
    status block right before we actually do the work.
    
    Also, because the tagged status tells the chip exactly which
    work we have processed, we can make two optimizations:
    
    1) tg3_restart_ints() need not check tg3_has_work()
    2) the tg3_timer() need not poke the chip 10 times per
       second to keep from losing interrupt events
    
    Based upon valuable feedback from Michael Chan <mchan@broadcom.com>
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe12e25ebdd195a57d3fd655061fd2525609b16b
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 17:09:06 2005 -0700

    [IA64] initialize spinlock pfm_alt_install_check
    
    I applied the penultimate version of the perfmon patch, which didn't have
    the initialization of the new spinlock that was added.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 05d3794aa8bd3b2c9f7920a05003c331cdeb75c5
Merge: 3012162... 0b405a0...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 18 16:37:46 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/

commit 3d620cd75588a37c7f5547e26e2a28b046c280f0
Merge: a1ecf7f... 3012162...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 16:28:52 2005 -0700

    Sync with Linus - rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit a1ecf7f6e65637ba4470405ad39794710dbf85d4
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 16:06:00 2005 -0700

    [IA64] alternate perfmon handler
    
    Patch from Charles Spirakis
    
    Some linux customers want to optimize their applications on the latest
    hardware but are not yet willing to upgrade to the latest kernel. This
    patch provides a way to plug in an alternate, basic, and GPL'ed PMU
    subsystem to help with their monitoring needs or for specialty work. It
    can also be used in case of serious unexpected bugs in perfmon. Mutual
    exclusion between the two subsystems is guaranteed, hence no conflict
    can arise from both subsystem being present.
    
    Acked-by: Stephane Eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 301216244b1e39c4346e56d38b079ca53d528580
Author: Stephen Tweedie <sct@redhat.com>
Date:   Wed May 18 11:47:17 2005 -0400

    [PATCH] Avoid console spam with ext3 aborted journal.
    
    Avoid console spam with ext3 aborted journal.
    
    ext3 usually reports error conditions that it detects in its environment.
    But when its journal gets aborted due to such errors, it can sometimes
    continue to report that condition forever, spamming the console to such
    an extent that the initial first cause of the journal abort can be lost.
    
    When the journal aborts, we put the filesystem into readonly mode.  Most
    subsequent filesystem operations will get rejected immediately by checks
    for MS_RDONLY either in the filesystem or in the VFS.  But some paths do
    not have such checks --- for example, if we continue to write to a file
    handle that was opened before the fs went readonly.  (We only check for
    the ROFS condition when the file is first opened.)  In these cases, we
    can continue to generate log errors similar to
    
    EXT3-fs error (device $DEV) in start_transaction: Journal has aborted
    
    for each subsequent write.
    
    There is really no point in generating these errors after the initial
    error has been fully reported.  Specifically, if we're starting a
    completely new filesystem operation, and the filesystem is *already*
    readonly (ie. the ext3 layer has already detected and handled the
    underlying jbd abort), and we see an EROFS error, then there is simply
    no point in reporting it again.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e72022e13d659bece2fc9cb2dd97afa67047dbca
Author: Stephen Tweedie <sct@redhat.com>
Date:   Wed May 18 11:22:31 2005 -0400

    [PATCH] Fix filp being passed through raw ioctl handler
    
    Don't pass meaningless file handles to block device ioctls.
    
    The recent raw IO ioctl-passthrough fix started passing the raw file
    handle into the block device ioctl handler.  That's unlikely to be
    useful, as the file handle is actually open on a character-mode raw
    device, not a block device, so dereferencing it is not going to yield
    useful results to a block device ioctl handler.
    
    Previously we just passed NULL; also not a value that can usefully
    be dereferenced, but at least if it does happen, we'll oops instead of
    silently pretending that the file is a block device, so NULL is the more
    defensive option here.  This patch reverts to that behaviour.
    
    Noticed by Al Viro.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b405a0f7e4d4d18fd1fe46ddf5ff465443036ab
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 12 12:06:27 2005 -0700

    [PATCH] Driver Core: remove driver model detach_state
    
    The driver model has a "detach_state" mechanism that:
    
     - Has never been used by any in-kernel drive;
     - Is superfluous, since driver remove() methods can do the same thing;
     - Became buggy when the suspend() parameter changed semantics and type;
     - Could self-deadlock when called from certain suspend contexts;
     - Is effectively wasted documentation, object code, and headspace.
    
    This removes that "detach_state" mechanism; net code shrink, as well
    as a per-device saving in the driver model and sysfs.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 82428b62aa6294ea640c7e920a9224ecaf46db65
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 9 08:07:00 2005 -0700

    [PATCH] Driver Core: pm diagnostics update, check for errors
    
    This patch includes various tweaks in the messaging that appears during
    system pm state transitions:
    
      * Warn about certain illegal calls in the device tree, like resuming
        child before parent or suspending parent before child.  This could
        happen easily enough through sysfs, or in some cases when drivers
        use device_pm_set_parent().
    
      * Be more consistent about dev_dbg() tracing ... do it for resume() and
        shutdown() too, and never if the driver doesn't have that method.
    
      * Say which type of system sleep state is being entered.
    
    Except for the warnings, these only affect debug messaging.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d1ded203adf16b42ca90e9041120ae465ca5c4a6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI: add MODALIAS to hotplug event for pci devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9888549e0507cc95d1d7ade1595c00ff8e902659
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI: add modalias sysfs file for pci devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c22610dadc0452b1273494f2b5157123c6cd60e1
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon May 9 17:36:27 2005 -0400

    [PATCH] PCI Hotplug: remove pci_visit_dev
    
    If my CPCI hotplug update patch is applied, then there are no longer any
    in tree users of the pci_visit_dev API, and it and its related code can be
    removed.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 43b7d7cfb157b5c8c5cc0933f4e96fd81adc81ca
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon May 9 17:31:50 2005 -0400

    [PATCH] PCI Hotplug: CPCI update
    
    [PATCH] CPCI: update
    
    I have finally done some work to update the CompactPCI hotplug driver to
    fix some of the outstanding issues in 2.6:
    - Added adapter and latch status ops so that those files will get created
      by the current PCI hotplug core.  This used to not be required, but
      seems to be now after some of the sysfs rework in the core.
    - Replaced slot list spinlock with a r/w semaphore to avoid any potential
      issues with sleeping.  This quiets all of the runtime warnings.
    - Reworked interrupt driven hot extraction handling to remove need for a
      polling operator for ENUM# status.  There are a lot of boards that only
      have an interrupt driven by ENUM#, so this lowers the bar to entry.
    - Replaced pci_visit_dev usage with better use of the PCI core functions.
      The new code is functionally equivalent to the previous code, but the
      use of pci_enable_device on insert needs to be investigated further, as
      I need to do some more testing to see if it is still necessary.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8b245e45f34280ec61e3c8d643d4613b9e0eb7a4
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Fri May 6 17:19:09 2005 -0700

    [PATCH] PCI Hotplug: get pciehp to work on the downstream port of a switch
    
    Here is the updated patch to get pciehp driver to work for downstream
    port of a switch and handle the difference in the offset value of PCI
    Express capability list item of different ports.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ee17fd93a5892c162b0a02d58cdfdb9c50cf8467
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI Hotplug: Fix echoing 1 to power file of enabled slot problem with SHPC driver
    
    Here is a patch to fix the problem of echoing 1 to "power" file
    to enabled slot causing the slot to power down, and echoing 0
    to disabled slot causing shpchp_disabled_slot() to be called
    twice. This problem was reported by kenji Kaneshige.
    
    Thanks,
    Dely
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b1a45695bde0204597957e448923f09ce271ca80
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 16:07:23 2005 -0500

    [CIFS] fix casts of unicode strings to match function definition
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 6872ec548970e9fb3ccd61013f84f9bb8b30fa9a
Author: Russ Anderson <rja@sgi.com>
Date:   Mon May 16 15:30:00 2005 -0700

    [IS64-SGI] Set Altix error handling features
    
    The 2.6 kernel has CPE error thresholding.
    This patch lets SAL know of this error handling feature.
    The changes are SN specific.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8eac3757158ccd9c6b43f44f228a5762fec33781
Author: Russ Anderson <rja@sgi.com>
Date:   Mon May 16 15:19:00 2005 -0700

    [IA64-SGI] Make Altix SAL call to POD reentrant
    
    Change the SAL call for POD mode to be reentrant.
    This change is SN specific.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bb68c12b40c3c745381d7ce61d7b2e371f157505
Author: Russ Anderson <rja@sgi.com>
Date:   Mon May 9 15:03:00 2005 -0700

    [IA64-SGI] cpe interrupts are not being enabled.
    
    acpi_request_vector() is called in ia64_mca_init() to get the cpe_vector.
    The problem is that acpi_request_vector() looks in platform_intr_list[] to
    get the vector, but platform_intr_list[] is not initialized with a valid
    vector until later (in sn_setup()).  Without a valid vector the code
    defaults to polling mode.
    
    This patch moves the call to acpi_request_vector() from ia64_mca_init()
    to ia64_mca_late_init(), which is after platform_intr_list[] is initialized.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 056b5033fb8d16095fb074fc910fad90186374f3
Author: Jesse Barnes <jesse.barnes@intel.com>
Date:   Mon May 9 14:52:00 2005 -0700

    [PATCH] update sn2 maintainer
    
    Now that I'm no longer at SGI and don't have access to Altix equipment,
    it's time to pass on the job of patch monkey to someone else.  Greg
    Edwards has foolishly^Wkindly volunteered for the job, so here's a
    patch to update the MAINTAINERS file with the appropriate information.
    
    Signed-off-by: Jesse Barnes <jesse.barnes@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 02a017a9f37ae6842e065da919b5952eb847e869
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Tue May 10 11:35:00 2005 -0700

    [IA64] Correct convert_to_non_syscall()
    
    convert_to_non_syscall() has the same problem that unwind_to_user()
    used to have.  Fix it likewise.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b2aeb9d565be5ef00fb9f921c6d2459c74d90cdf
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 13:16:18 2005 -0500

    [CIFS] Fix oops in cifs_unlink.  Caused in some cases when renaming over existing,
    newly created, file.
    
    Samba bugzilla: 2697
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 67594feb4b68074d8807f5566536e06db9130679
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 13:04:49 2005 -0500

    [CIFS] missing break needed to handle < when mount option "mapchars" specified
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit ff0d2f90fdc4b564d47a7c26b16de81a16cfa28e
Author: Christoph Lameter <christoph@lameter.com>
Date:   Tue May 17 08:48:16 2005 -0700

    [PATCH] fix memory scribble in arch/i386/pci/fixup.c
    
    The GET_INDEX() macro should use just the low three bits of the devfn,
    otherwise we have a memory scribble in pcie_rootport_aspm_quirk that
    overwrites ptype_all
    
    Fix it to be more careful about its arguments while at it.
    
    Acked by Dely Sy <dely.l.sy@intel.com>
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c41a5f50deab01aca11155154d7e6737b3a1d9f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue May 17 07:12:56 2005 -0700

    [PATCH] update CREDITS
    
    free agent
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19bbdf0e510471ecebb3fe09bd8b00773cc63b88
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue May 17 16:48:39 2005 +1000

    [PATCH] ppc32: enable use of early_param
    
    We need to call parse_early_param() early on to allow usage of
    early_param() for command line parsing.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0dac8082cbc2b234917ec53eb591b1ddbec80bb
Merge: bfd6859... ff96b3d...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 17 09:10:20 2005 -0700

    Merge with linus

commit ad542ef5b2296fa7a8518e6be67c4588b750d316
Merge: ff96b3d... f3ac91c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 17 08:55:00 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-2.6.git

commit f3ac91cf521be4637236d2dcb7ad4aa91f8865f0
Merge: 104e501... cdcca89...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Tue May 17 11:30:39 2005 -0400

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev.git

commit ff96b3d4b840e8aa126e0a60fd743417ffdee178
Merge: b82a96a... 360b52b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 17 08:11:04 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit b82a96a7f28b9939576bf79a817c7a238d784b47
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:49 2005 -0700

    [PATCH] dvb: budget-av: CI fixes
    
    - remove enable_ci, ci interface is assumed to be present if the saa7113
      is not found.
    - reduce the delay when checking for saa7113
    - clean up the cam reset according to specifications
    - turn off Vcc to the cam slot if cam is removed or fails reset
    - remove cam reset in ciintf_init
    - clean up printks (KERN_)
    - move gpio setting into saa7113_init
    - clean up unreadable frontend_init
    (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43f1a8f8c09aa1e368157039715812139a023d20
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:49 2005 -0700

    [PATCH] dvb: bt8xx: whitespace cleanup
    
    whitespace cleanup
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b98b79da032584b4c077568d28dde2d2fe226b54
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:47 2005 -0700

    [PATCH] dvb: DST: fixed CI debug output
    
    fixed CI debug output (Dominique Dumont)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42dc6617fe41ea65a94399821058353d0b12c0ab
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:47 2005 -0700

    [PATCH] dvb: DST: fix a bug in the module parameter
    
    fix a bug in the module parameter (Dominique Dumont)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df481ae59074756f1d0b2712d8b3fe8d04eb16c1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:45 2005 -0700

    [PATCH] dvb: bt8xx: updated documentation
    
    updated documentation (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a2cc1269b6c1404e6e882cee604d55c90927467
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:45 2005 -0700

    [PATCH] dvb: DST: misc. fixes
    
    removed unused module parameter session removed unnecesary delay for FTA cards
    (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b46dd4456f87fbad634d9a63d607fc54e4381cb4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:44 2005 -0700

    [PATCH] dvb: DST: fix for descrambling failure
    
    fix for descrambling failure (Dominique Dumont, Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8385e46fbf7c9b80008b915440f256ce88633eeb
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:43 2005 -0700

    [PATCH] dvb: DST: fixed tuning problem
    
    fixed a tuning problem for cards based on the old firmware (Steffen Motzer,
    Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ac699a4f991e84b4bcdc07d9dfa8e019cf6116
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:42 2005 -0700

    [PATCH] dvb: DST: add support for Twinhan 200103A
    
    add support for the old Twinhan 200103A card (Steffen Motzer)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50b215a05878ce9636dace6cd21f7e91ff005058
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:41 2005 -0700

    [PATCH] dvb: DST: reorganize Twinhan DST driver to support CI
    
    - reorganize Twinhan DST driver to support CI
    - add support for more cards
    (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daeb6aa40be55b0750aea92dea78b8ebc40ca9a8
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:40 2005 -0700

    [PATCH] dvb: bt8xx: update documentation
    
    update bt8xx documentation (Uwe Bugla)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdc53a6dbfea18e621dd23ed5cfb160837d7ce52
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:39 2005 -0700

    [PATCH] dvb: modified dvb_register_adapter() to avoid kmalloc/kfree
    
    Modified dvb_register_adapter() to avoid kmalloc/kfree.  Drivers have to embed
    struct dvb_adapter into their private data struct from now on.  (Andreas
    Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b3f5a57bf110b519b706365c86ada199075f34e
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:38 2005 -0700

    [PATCH] dvb: frontends: misc. minor cleanups
    
    misc. minor cleanups, select FW_LOADER and add a help text to DVB_OR51132
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d91b730dfb46fa889c9c7a67d8bd6596e2ac8b21
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:38 2005 -0700

    [PATCH] dvb: make needlessly global code static or drop it
    
    - make needlessly global code static
    - #if 0 the following unused global functions:
      - ttpci/av7110_hw.c: av7110_reset_arm
      - ttpci/av7110_hw.c: av7110_send_ci_cmd
    - frontends/mt352.[ch]: drop mt352_read
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e9e7226c13135063707a0c82766a2dd748f59e5
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:37 2005 -0700

    [PATCH] dvb: dvb-pll.h: prevent multiple inclusion
    
    added missing #ifndef and #define to inhibit multiple inclusions (Patrick
    Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71e3420111530273f2b26fabfac4d021c2a2b79f
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:36 2005 -0700

    [PATCH] dvb: tda10046: support for different firmware versions
    
    added support for different tda10046 firmware versions.  tested with v20, v21
    and v25.  (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dfb800f9d0391dee86d692142745415f5f65f81
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:35 2005 -0700

    [PATCH] dvb: tda1004x: allow N_I2C to be overridden by the card driver
    
    allow N_I2C to be overridden by the card driver (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd102c752c17636b2aec7977b377c41156ed19c1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:35 2005 -0700

    [PATCH] dvb: tda1004x: dont use bitfields
    
    use simple u8 instead of bitfields (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77b3bd0ccb2fae27e710b921f053ae16f34d70de
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:34 2005 -0700

    [PATCH] dvb: mt352: embed struct mt352_config in mt352_state
    
    copying the mt352_config-struct to mt352_state instead of storing just the
    pointer to it (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd22d5c093faf3b123af33a8a0059f583c6b8cae
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:33 2005 -0700

    [PATCH] dvb: ves1820: remove unnecessary msleep
    
    remove unnecessary msleep(10) in writereg (Tony Glader)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1471c4f67321c09359d6fa8eb5c72c2463db081
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:32 2005 -0700

    [PATCH] dvb: dib3000: add NULL pointer check
    
    prevent NULL pointer related Oopses (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8742700f13163ffa00cddce2a3c940b9ab2ab5a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:31 2005 -0700

    [PATCH] dvb: remove unnecessary casts in frontends
    
    remove unnecessary casts in frontends (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 591ad98db3be2cd596ac5e0cfba7b164c3bdfb52
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:31 2005 -0700

    [PATCH] dvb: stv0299: fix FE_DISHNETWORK_SEND_LEGACY_CMD
    
    fix the current stv0299 code that handles FE_DISHNETWORK_SEND_LEGACY_CMD.
    (supports the legacy SW21, SW44, and SW64 switches)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f5e02db4a39c36e68878a14fae1fe7ee6dd6fcf
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:30 2005 -0700

    [PATCH] dvb: tda1004x: formatting cleanups
    
    mostly formatting cleanups, no functional change (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a4a571124cdd04215e0f78bc53fe16bab58f32d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:29 2005 -0700

    [PATCH] dvb: nxt6000: support frontend status reads
    
    add support for read_ber, read_signal_strength and read_status (Greg Wickham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3165dcb300ff60e794909f02b1fd3a41908682ea
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:28 2005 -0700

    [PATCH] dvb: av7110: fix indentation
    
    fix indentation
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dbce49ea1c6885d07eb59d12889c059a868e6f5
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:28 2005 -0700

    [PATCH] dvb: av7110: fix comment
    
    fixed debugging instructions: av7110_debug -> debug (Oliver Endirss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ab3f08b28676d365f3fb8600ead325fd235711a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:27 2005 -0700

    [PATCH] dvb: av7110: fix NTSC/PAL switching
    
    fix NTSC -> PAL switching (std->id is a bitmap!) (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a65d3bb7177cbab1fca69dd97537766c2817b6b2
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:26 2005 -0700

    [PATCH] dvb: av7110: fix VIDEO_SET_DISPLAY_FORMAT
    
    VIDEO_SET_DISPLAY_FORMAT ioctl fixed:
    set videostate.display_format, not videostate.video_format (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59142330aaea9d870d795065d8b91e21d5e55254
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:25 2005 -0700

    [PATCH] dvb: dvb_net: handle IPv6 and LLC/SNAP
    
    handle IPv6 and LLC/SNAP (Bertrand Mazieres, Matthieu Castet, Johannes
    Stezenbach)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c53c70f6afa2d3f4d416d8c0e9a219c2f6b7cb6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:24 2005 -0700

    [PATCH] dvb: remove unnecessary casts in dvb-core
    
    remove unnecessary casts in dvb-core (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d4f2c2e15795b93fa4da7a7cfac5e82df51b1f1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:23 2005 -0700

    [PATCH] dvb: add support for KNC-1 cards
    
    Support KNC-1 Plus DVB-T and similar KNC-1 cards (Alexander Riedel)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6074b36715f036f56beb688f49a2a2fb5b28ad72
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:22 2005 -0700

    [PATCH] dvb: av7110: audio out fix
    
    Switch analog output of the Crystal sound chip to left/stereo/right mode.
    This will fix problems with some (most?) channels which do not encode
    2-channel audio correctly.  (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4f009a776c1db9b27346846b0db052e04a6d5ad
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:21 2005 -0700

    [PATCH] dvb: dvb_frontend: fix module param
    
    Remove incorrect "dvb_"-prefix from parameter description.  Error detected
    with section2text.rb, see autoparam patch.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2c62d81430e907b6599d4be43a7ee6f74d2bd69
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:20 2005 -0700

    [PATCH] dvb: saa7146: no need to initialize static/global variables to 0
    
    no need to initialize static/global variables to 0
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dfaebdaa2a14c7ca1fbbafff08992489087e7f1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:19 2005 -0700

    [PATCH] dvb: support for TT/Hauppauge Nexus-S Rev 2.3
    
    Support for TT/Hauppauge Nexus-S Rev 2.3 (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 958706c12d7e1b21ac46a8b3bc7eabb157b20bb7
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:19 2005 -0700

    [PATCH] dvb: flexcop: DiSeqC fix
    
    Fixed DiSeqC switching, which was wrongly taking over from skystar2.c.  Thanks
    to Joerg Riechardt for finding the bug and testing the Fix.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdc7800122da0b6b008aa9bdafc01e32b6a4576a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:18 2005 -0700

    [PATCH] dvb: flexcop: i2c read fixes
    
    rewrote the i2c-reading-part (no more ack-error ignoring, which was inherited
    from the skystar2-driver)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6ee197ccf4af454638c044706f0ba7ef6c1bb76
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:17 2005 -0700

    [PATCH] dvb: flexcop: readme update
    
    readme update
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59a7ad6c1ed3a058d375d2e679d73805e4f851ac
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:16 2005 -0700

    [PATCH] dvb: flexcop: fix module refcount handling
    
    Corrected the THIS_MODULE handling for the flexcop-stuff and dvb-usb which
    lead to oopses because of misorganized module dependencies.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4ee3fd469302884dda95e1f310d5ffcd9f5acf9
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:15 2005 -0700

    [PATCH] dvb: flexcop: use hw pid filter
    
    - enabled the HW PID by default for the PCI cards
    
    - correct the TS demux parsing when PID filter is enabled (and thus the
      timer IRQ)
    
    - rewrote the PID-filter and FULLTS control part in flexcop-hw-filter
      (thanks to Krzysztof Matula for pointing that out)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4853f16ad881194ec4c49f73287ef1999b2585ea
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:15 2005 -0700

    [PATCH] dvb: flexcop: fixed interrupt-sharing
    
    fixed interrupt-sharing and added a spinlock to the irq-callback
    (thanks to Pascal Riekenberg)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 778241313819e17de3bdf91523c724b4704402c6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:14 2005 -0700

    [PATCH] dvb: flexcop: fix MAC address reading
    
    read MAC address directly into dvb_adapter->proposed_mac
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ed8a31cb387b2ae3e4ca508f973931b61e6f6bd
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:13 2005 -0700

    [PATCH] dvb: flexcop: add acknowledgements
    
    add acknowledgements
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7635acd2d927578495c692056d0e7dabd06afc89
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:12 2005 -0700

    [PATCH] dvb: flexcop: fix USB transfer handling
    
    - driver receives many null TS packets (pid=0x1fff).  They occupy the
      limited USB bandwidth and this leads to loss of video packets.  Enabling the
      null packet filter fixes this.
    
    - packets that flexcop sends to USB have a 2 byte header that has to be
      removed.
    
    - sometimes a TS packet is split between different urbs.  These parts have
      to be combined in a temporary buffer.
    
    Signed-off-by: Vadim Catana <skystar@moldova.cc>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2add87a95068d6457d4e5824d0417d39007665a4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:10 2005 -0700

    [PATCH] dvb: b2c2/flexcop driver refactoring part 2: add modular Flexcop driver
    
    b2c2/flexcop driver refactoring to support PCI and USB based cards part 2: add
    modular Flexcop driver
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ec359729960f7896db8f642454e603d22519d20
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:06 2005 -0700

    [PATCH] dvb: b2c2/flexcop driver refactoring part 1: drop old b2c2-usb stuff
    
    b2c2/flexcop driver refactoring to support PCI and USB based cards, part 1:
    drop abandoned attempt to support USB devices
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6262d062a3fc803d1798365e745b39f4faa04b0e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:05 2005 -0700

    [PATCH] ieee1394: fix premature expiry of async packets
    
    Set the initial sendtime to be 10 seconds in the future, to avoid the packet
    timing out while it's still queued to be sent.  This fixes furthur "no tlabel
    match" problems caused by premature expiry.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74a01d11c92c06a0ceac88ca306d507a8186e7f6
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:05 2005 -0700

    [PATCH] ieee1394: fix cross_bound check for null ISO packets
    
    Fix cross_bound to not return 1 for zero-length regions.  Fixes regression
    when sending null ISO packets.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d98c5cd41d1932bb76a3945b4e8dea889224d87
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:04 2005 -0700

    [PATCH] ieee1394: single buffer fixes to video1394
    
    Apply and fixup patch from Markus Tavenrath <speedygoo@speedygoo.de> for
    video1394 to allow only a single buffer on receive and two buffers on
    transmit.  Tested with libdc1394 and dvconnect (libdv).
    
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2554bd2a68e2c3ca7f2b953fe2860a9e84a5579a
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:03 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/pcilynx.c: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() These patches include
    dma-mapping.h explicitly because it caused errors on some architectures
    otherwise.  See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for
    details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 616b859fbd0e59707a24612d5b5fec791156c822
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:01 2005 -0700

    [PATCH] ieee1394: remove NULL checks for kfree
    
    This patch removes redundant NULL pointer checks before kfree() in all of
    drivers/ieee1394/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ac485dc37b6336c5bf694f9933f43684fd1fd1e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:00 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/ieee1394_transactions.c: possible cleanups
    
    This patch contains the following possible cleanups:
    
    - #if 0 the following unused global functions:
      - hpsb_lock
      - hpsb_send_gasp
    
    - ieee1394_transactions.h: remove the stale hpsb_lock64 prototype
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f72cd138e6afc6d93a8e0aacb7e3160cf04d840b
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:53:59 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/pcilynx.c: remove dead options
    
    The options CONFIG_IEEE1394_PCILYNX_LOCALRAM and CONFIG_IEEE1394_PCILYNX_PORTS
    are not available for some time.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1446c7fb7610a7b417d8b2fadb6751f86ee833e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:53:59 2005 -0700

    [PATCH] ieee1394: feature removal notices
    
    drivers/ieee1394 feature removal notices: amdtp, cmp, legacy rawiso
    interface
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfaa9c94b13071c9b5f8578d0ae99acc76c60139
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Mon May 16 21:53:58 2005 -0700

    [PATCH] profile.c: `schedule' parsing fix
    
    profile=schedule parsing is not quite what it should be.  First, str[7] is
    'e', not ',', but then even if it did fall through, prof_on =
    SCHED_PROFILING would be clobbered inside if (get_option(...)) So a small
    amount of rearrangement is done in this patch to correct it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5418b6925c353c8286651b67fdb8559dd9e54e46
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon May 16 21:53:57 2005 -0700

    [PATCH] kill <asm/ioctl32.h>
    
    These days <linux/ioctl32.h> handles everything, no need for an asm
    header on just two architectures.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afbf510d47c4009f5d67ec3c0e0b45eb0441bca3
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon May 16 21:53:56 2005 -0700

    [PATCH] pcmcia/ds: handle any error code
    
    register_chrdev() can return errors (negative) other then -EBUSY, so check
    for any negative error code.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24d568ed1b97cb93c2a917cd90296655a8b661a6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon May 16 21:53:55 2005 -0700

    [PATCH] alpha/osf_sys: use helper functions to convert between tv and jiffies
    
    Use helper functions to convert between timeval structure and jiffies
    rather than custom logic.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3407c0fec3456325826c31792e77a80a6dec0e20
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon May 16 21:53:53 2005 -0700

    [PATCH] mips: add resource management to pmu
    
    This patch had added resource management to vr41xx's pmu.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c443d1b558b21520bd8fd6140b85cee0756becd
Author: Stephen Smalley <sds@epoch.ncsc.mil>
Date:   Mon May 16 21:53:52 2005 -0700

    [PATCH] selinux: fix avc_alloc_node() oom with no policy loaded
    
    This patch should fix the avc_alloc_node() oom condition that Andrew
    reported when no policy is loaded in SELinux.
    
    Prior to this patch, when no policy was loaded, the SELinux "security
    server" (policy engine) was only returning allowed decisions for the
    requested permissions for each access check.  This caused the cache to
    thrash when trying to use SELinux for real work with no policy loaded
    (typically, the no policy loaded state is only for bootstrapping to the
    point where we can load an initial policy).
    
    This patch changes the SELinux security server to return the complete
    allowed access vector at once, and then to reset the cache after the
    initial policy load to flush the initial cache state created during
    bootstrapping.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b81074800b98ac50b64d4c8d34e8abf0fda5e3d1
Author: Kirill Korotaev <dev@sw.ru>
Date:   Mon May 16 21:53:50 2005 -0700

    [PATCH] do_swap_page() can map random data if swap read fails
    
    There is a bug in do_swap_page(): when swap page happens to be unreadable,
    page filled with random data is mapped into user address space.  The fix is
    to check for PageUptodate and send SIGBUS in case of error.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c64610ba585fabb36be78782868277f3d9741a2e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 16 21:53:49 2005 -0700

    [PATCH] block_read_full_page() get_block() error handling fix
    
    If block_read_full_page() detects an error when running get_block() it will
    run SetPageError(), then it will zero out the block in pagecache and will mark
    the buffer_head uptodate.
    
    So at the end of readahead we end up with a non-uptodate pagecache page which
    is marked PageError.  But it has uptodate buffers.
    
    The pagefault code will run ClearPageError, will launch readpage a second time
    and block_read_full_page() will notice the uptodate buffers and will mark the
    page uptodate as well.  We end up with an uptodate, !PageError page full of
    zeros and the error is lost.
    
    (It seems a little odd that filemap_nopage() runs ClearPageError().  I guess
    all of this adds up to meaning that for each attempted access to the page, the
    pagefault handler will retry the I/O.  Which is good and bad.  If the app is
    ignoring SIGBUS for some reason we could get a lot of back-to-back I/O
    errors.)
    
    Fix it by not marking the pagecache buffer_head as uptodate if the attempt to
    map that buffer to a disk block failed.
    
    Credit-to: Qu Fuping <fs@ercist.iscas.ac.cn>
    
      For reporting the bug and identifying its source.
    
    Signed-off-by: Qu Fuping <fs@ercist.iscas.ac.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c0547ba8b3bbd8b26ae35e33ac17ff51f67f78c
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon May 16 21:53:47 2005 -0700

    [PATCH] add_preferred_console() build fix
    
    Move add_preferred_console out of CONFIG_PRINTK so serial console does the
    right thing.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f5bdb02ce06925e7fc5916125bdebc533d4299
Author: Rik van Riel <riel@redhat.com>
Date:   Mon May 16 21:53:46 2005 -0700

    [PATCH] Makefile include path ordering
    
    The arch Makefile may override the include path order, which is used by Xen
    (and UML?) to make sure include/asm-xen is searched before
    include/asm-i386.
    
    The Makefile change to 2.6.12-rc4 made the top Makefile always override the
    value specified by the arch Makefile.  This trivial patch makes the Xen
    kernel compile again.
    
    Signed-off-by: Rik van Riel <riel@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 631330afdf9d29fe84526653674e8e061389d8f6
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Mon May 16 21:53:45 2005 -0700

    [PATCH] fix Philips SAA7130/7134 TV dependency problem
    
    Solve a dependency-problem related to the SAA7130/7134 TV-card driver.  The
    driver won't compile with CRC32 disabled, so I added it to the select list.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1fc3990e2ffa14310cae89678c0b4ed1a3f094b
Author: Petr Vandrovec <vandrove@vc.cvut.cz>
Date:   Mon May 16 21:53:44 2005 -0700

    [PATCH] serial_cs device identification fix
    
    serial_cs's vendor/device identification got broken by Yum Rayan's change
    '[PATCH] serial_cs: Reduce stack usage in serial_event()' - it changed buf
    type from u_short* to char*, breaking device manufacturer & card number
    retrieval.  Due to this my modem stopped from being recognized as special
    case.
    
    Code will work much better if we'll rely on first_tuple's parser instead of
    doing parse ourselves.  Code also looks simpler after change.
    
    Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f167fb491725ca0be9df0d76b4b2dd862cdfe0b
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Mon May 16 21:53:43 2005 -0700

    [PATCH] spurious interrupt fix
    
    On my IA64 machine, after kernel 2.6.12-rc3 boots, an edge-triggered
    interrupt (IRQ 46) keeps triggered over and over again.  There is no IRQ 46
    interrupt action handler.  It has lots of impact on performance.
    
    Kernel 2.6.10 and its prior versions have no the problem.  Basically,
    kernel 2.6.10 will mask the spurious edge interrupt if the interrupt is
    triggered for the second time and its status includes
    IRQ_DISABLE|IRQ_PENDING.
    
    Originally, IA64 kernel has its own specific _irq_desc definitions in file
    arch/ia64/kernel/irq.c.  The definition initiates _irq_desc[irq].status to
    IRQ_DISABLE.  Since kernel 2.6.11, it was moved to architecture independent
    codes, i.e.  kernel/irq/handle.c, but kernel/irq/handle.c initiates
    _irq_desc[irq].status to 0 instead of IRQ_DISABLE.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7baeb6a5ccab2d472679a053e64a63ac423c3a42
Author: Peter Osterlund <petero2@telia.com>
Date:   Mon May 16 21:53:42 2005 -0700

    [PATCH] CDRW/DVD packet writing data corruption fix
    
    I found a bug in the packet writing driver that could cause data
    corruption.  The problem arised if the driver got a write request for a
    sector in a "zone" it was already working on.  In that case it was supposed
    to queue the write request until it was done processing earlier requests
    for the same zone, and instead work on some other zone in the mean time.
    However, if there was no other zone to work on, the driver would initiate
    two packet_data objects for the same zone, causing unpredictable things to
    happen.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0856009dbaf8eca2269d4129bb83940c0d95054
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 16 21:53:41 2005 -0700

    [PATCH] crypto: fix null encryption/compression
    
    null_encrypt() needs to copy the data in case src and dst are disjunct,
    null_compress() needs to copy the data in any case as far as I can tell.  I
    joined compress/decompress and encrypt/decrypt to avoid duplicating code.
    
    Without this patch ESP null_enc packets look like this:
    
    IP (tos 0x0, ttl  64, id 23130, offset 0, flags [DF], length: 128)
    10.0.0.1 > 10.0.0.2: ESP(spi=0x0f9ca149,seq=0x4)
    	0x0000:  4500 0080 5a5a 4000 4032 cbef 0a00 0001  E...ZZ@.@2......
    	0x0010:  0a00 0002 0f9c a149 0000 0004 0000 0000  .......I........
    	0x0020:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0030:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0040:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0050:  0000                                     ..
    
    IP (tos 0x0, ttl  64, id 256, offset 0, flags [DF], length: 128)
    10.0.0.2 > 10.0.0.1: ESP(spi=0x0e4f7b51,seq=0x2)
    	0x0000:  4500 0080 0100 4000 4032 254a 0a00 0002  E.....@.@2%J....
    	0x0010:  0a00 0001 0e4f 7b51 0000 0002 a8a8 a8a8  .....O{Q........
    	0x0020:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0030:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0040:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0050:  a8a8                                     ..
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba32311eb73f624a85a5fc2e043cda8e076f86ef
Author: McMullan, Jason <jason.mcmullan@timesys.com>
Date:   Mon May 16 21:53:40 2005 -0700

    [PATCH] swapout oops fix
    
    Fix OOPS when swapping on a device that doesn't have an unplug_io_fn defined
    (eg, ATA Over Ethernet)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59afda786a58f2e8f74a48f2af90534d76d5338d
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Mon May 16 21:53:39 2005 -0700

    [PATCH] s390: dasd set online failure
    
    dasd driver changes:
     - The feature check in dasd_generic_online returns an error if
       the devmap entry for the device is not yet available. Check
       for the feature after the device has been created.
     - Do symmetric registration/deregistration of cdev->handler.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53b21689ba567ad437e4d7917dd9da54a8d6fd5c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 16 21:53:38 2005 -0700

    [PATCH] drivers/input/keyboard/atkbd.c: fix off by one errors
    
    This patch fixes two possible off by one errors found by the Coverity
    checker (look at the period[i] and delay[j] in the two first unchanged
    lines).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a019225c797a1047470accee950d69cfe7c59c5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 16 21:53:37 2005 -0700

    [PATCH] mm/nommu.c: try to fix __vmalloc
    
    Linus changed the second argument of __vmalloc from int to unsigned int
    breaking the compilation for CONFIG_MMU=n configurations (since he only
    changed vmalloc.c but not nommu.c).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59db2e6ed080ac385f19b9f4329133d634215bfd
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:36 2005 -0700

    [PATCH] x86_64: Update defconfig
    
    Update defconfig
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18a2b6471277c9ffbaa14a0c87a11a075eb354bd
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:35 2005 -0700

    [PATCH] x86_64: Don't assume BSP has ID 0 in new smp bootup
    
    This patch removes the assumption that LAPIC entries contain the BSP as its
    first entry.  This is a slight improvement to the temporary fix submitted by
    Suresh Siddha.
    
    - Removes assumption that LAPIC entries contain BSP first.
    
    - Builds x86_acpiid_to_apicid[] and bios_cpu_apicid[] properly with BSP as
      first entry.
    
    - Made maxcpus=1 boot on these systems.  Since the parsing earlier in
      arch/x86_64/kernel/mpparse.c stopped after maxcpus entries, other entries
      were not processed, this causes kernel not to boot on these systems.
    
    TBD: x86_acpiid_to_apicid and bios_cpu_apicid[] seem to be exactly the
         same.  This could be removed, but might need more work to cleanup.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 751521149a05e308d863d01ced61080ce1a2ec99
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:34 2005 -0700

    [PATCH] x86_64: Collected NMI watchdog fixes.
    
    Collected NMI watchdog fixes.
    
    - Fix call of check_nmi_watchdog
    
    - Remove earlier move of check_nmi_watchdog to later.  It does not fix the
      race it was supposed to fix fully.
    
    - Remove unused P6 definitions
    
    - Add support for performance counter based watchdog on P4 systems.
    
      This allows to run it only once per second, which saves some CPU time.
      Previously it would run at 1000Hz, which was too much.
    
      Code ported from i386
    
      Make this the default on Intel systems.
    
    - Use check_nmi_watchdog with local APIC based nmi
    
    - Fix race in touch_nmi_watchdog
    
    - Fix bug that caused incorrect performance counters to be programmed in a
      few cases on K8.
    
    - Remove useless check for local APIC
    
    - Use local_t and per_cpu variables for per CPU data.
    
    - Keep other CPUs busy during check_nmi_watchdog to make sure they really
      tick when in lapic mode.
    
    - Only check CPUs that are actually online.
    
    - Various other fixes.
    
    - Fix fallback path when MSRs are unimplemented
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3c5f5e7eeaf7c68ecc1d37200cd1ade0b3da7b9
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:33 2005 -0700

    [PATCH] x86_64: Make vsyscall.c compile without CONFIG_SYSCTL
    
    Originally from Matt Tolentino
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 376ec33fcb246fdd7de1696d33739a0fd36f6537
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Mon May 16 21:53:32 2005 -0700

    [PATCH] x86_64: Fix OEM hpet check
    
    Use bitmap_zero instead of bitmap_empty to initialise cpu mask This makes it
    actually run reliable instead of relying on stack state.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b9ba4d5e23fcab24dd4d2e46dce11f5863869b4
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:31 2005 -0700

    [PATCH] x86_64: When checking vmalloc mappings don't use pte_page
    
    The PTEs can point to ioremap mappings too, and these are often outside
    mem_map.  The NUMA hash page lookup functions cannot handle out of bounds
    accesses properly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6b8d4778c04148729cc0b0dcd335a4411c44276
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:30 2005 -0700

    [PATCH] x86_64: Fix canonical checking for segment registers in ptrace
    
    Allowed user programs to set a non canonical segment base, which would cause
    oopses in the kernel later.
    
    Credit-to: Alexander Nyberg <alexn@dsv.su.se>
    
     For identifying and reporting this bug.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1099e8a18960693c04507bdd7b9403db70bfd97
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:29 2005 -0700

    [PATCH] x86_64: check if ptrace RIP is canonical
    
    This works around an AMD Erratum.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 312df5f1a1da780e084b328bcabb02a6dcd044c3
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:28 2005 -0700

    [PATCH] x86_64: Add pmtimer support
    
    There are unfortunately more and more multi processor Opteron systems which
    don't have HPET timer support in the southbridge.  This covers in particular
    Nvidia and VIA chipsets.  They also don't guarantee that the TSCs are
    synchronized between CPUs; and especially with MP powernow the systems are
    nearly unusable because the time gets very inconsistent between CPUs.
    
    The timer code for x86-64 was originally written under the assumption that we
    could fall back to the HPET timer on such systems.  But this doesn't work
    there.
    
    Another alternative is to use the ACPI PM timer as primary time source.  This
    patch does that.  The kernel only uses PM timer when there is no other choice
    because it has some disadvantages.
    
    Ported over from i386.  It should be faster than the i386 version because I
    dropped the "read three times" workaround, but is still considerable slower
    than HPET and also does not work together with vsyscalls which have to be
    disabled.
    
    Cc: <mark.langsdorf@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0af2be0b721997512191e981a051fcb070b87260
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:27 2005 -0700

    [PATCH] x86_64: Remove unique APIC/IO-APIC ID check
    
    It is unnecessary on modern Intel or AMD systems, and that is all we support
    on x86-64
    
    Also causes problems on various systems
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 622dcaf974668f7dee252fc6a8f9a2710c2070f4
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:26 2005 -0700

    [PATCH] x86_64: Don't print the internal k8c+ flag in /proc/cpuinfo
    
    It is not very useful to the user and more an kernel internal implementation
    detail.  So hide it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2942283e970b357c146ebdcbbcc0bdf5048615ff
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:26 2005 -0700

    [PATCH] x86_64: Remove x86_apicid field
    
    Remove x86_apicid field
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dda50e716dc9451f40eebfb2902c260e4f62cf34
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:25 2005 -0700

    [PATCH] x86_64: Update TSC sync algorithm
    
    The new TSC sync algorithm recently submitted did not work too well.
    
    The result was that some MP machines where the TSC came up of the BIOS very
    unsynchronized and that did not have HPET support were nearly unusable because
    the time would jump forwards and backwards between CPUs.
    
    After a lot of research ;-) and some more prototypes I ended up with just
    using the one from IA64 which looks best.  It has some internal self tuning
    that should adapt to changing interconnect latencies.  It holds up in my tests
    so far.
    
    I believe it was originally written by David Mosberger, I just ported it over
    to x86-64.  See the inline comment for a description.
    
    This cleans up the code because it uses smp_call_function for syncing instead
    of having custom hooks in SMP bootup.
    
    Please note that the cycle numbers it outputs are too optimistic because they
    do not take into account the latency of WRMSR and RDTSC, which can be hundreds
    of cycles.  It seems to be able to sync a dual Opteron to 200-300 cycles,
    which is probably good enough.
    
    There is a timing window during AP bootup where interrupts can see
    inconsistent time before the TSC is synced.  It is hard to avoid unfortunately
    because we can only do the TSC sync after some setup, and we need to enable
    interrupts before that.  I just ignored it for now.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93ef70a217637ade3f335303a112b22a134a1ec2
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:24 2005 -0700

    [PATCH] x86_64: Don't look up struct page pointer of physical address in iounmap
    
    It could be in a memory hole not mapped in mem_map and that causes the hash
    lookup to go off to nirvana.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f5ee8da005f50d9f46ae5a7edba9a9c2d37b32e
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:22 2005 -0700

    [PATCH] x86_64: Increase number of IO-APICs
    
    Needed by big systems and only costs a few K of memory.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a158608bf4c6260caf26089b00a000851e11357a
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:21 2005 -0700

    [PATCH] x86_64/i386: fix defaults for physical/core id in /proc/cpuinfo
    
    Last round hopefully of cpu_core_id changes hopefully fow now:
    
    - Always initialize cpu_core_id for all CPUs, even when no dual core setup
      is detected.  This prevents funny /proc/cpuinfo output
    
    - Do the same with phys_proc_id[] even when no HyperThreading - dito.
    
    - Use the CPU APIC-ID from CPUID 1 instead of the linux virtual CPU number
      to identify the core for AMD dual core setups.
    
    Patch for i386/x86-64.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 637716a3825e186555361574aa1fa3c0ebf8018b
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:20 2005 -0700

    [PATCH] x86_64: Add a guard page at the end of the 47bit address space
    
    This works around a bug in the AMD K8 CPUs.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ffdbb8d605be88b148f127ec86452f1364d4f0
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:19 2005 -0700

    [PATCH] x86_64: Readd missing tests in entry.S
    
    Cleans up the system exit call slightly and synchronizes with my tree again.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac6b931c44fd9988eaa821c339d54ba06b212412
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:19 2005 -0700

    [PATCH] x86_64: Reduce NMI watchdog stack usage
    
    NR_CPUs can be quite big these days.  kmalloc the per CPU array instead of
    putting it onto the stack
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7179906293ebdc333f14a03d3e58b03604848f3c
Author: Kirill Korotaev <dev@sw.ru>
Date:   Mon May 16 21:53:18 2005 -0700

    [PATCH] mm acct accounting fix
    
    This patch fixes mm->total_vm and mm->locked_vm acctounting in case when
    move_page_tables() fails inside move_vma().
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202d182a92c60416680e31baa697faa60b0882f5
Author: Bjorn Steinbrink <B.Steinbrink@gmx.de>
Date:   Mon May 16 21:53:17 2005 -0700

    [PATCH] mm: fix rss counter being incremented when unmapping
    
    This patch fixes a bug introduced by the "mm counter operations through
    macros" patch, which replaced a decrement operation in with an increment
    macro in try_to_unmap_one().
    
    Signed-off-by: Björn Steinbrink <B.Steinbrink@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a5febe9ffeecd1e78c5b505260ccc1ef18021b4
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon May 16 21:53:16 2005 -0700

    [PATCH] md: set the unplug_fn and issue_flush_fn for md devices *after* committed to creation
    
    We we set the too early, they may still be in place and possibly get called
    even though the array didn't get set up properly.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29ac8e056f2016a8404edc02749d095019aa1f82
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Mon May 16 21:53:15 2005 -0700

    [PATCH] md: fix splitting of md/linear request that cross a device boundary
    
    When a request crosses a boundary between devices, it needs to be split.
    But where we should calculate the amount of the request before the boundary
    to find the split-point, we care currently calculating the amount that is
    *after* the boundary !!!
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f332287bc3f2801ba43682fd79baf24dc8ac1ce
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon May 16 21:53:14 2005 -0700

    [PATCH] uml: change memcpy to memmove
    
    Replace one memcpy() call with overlapping source and dest arguments with
    one call to memmove(), to avoid data corruption.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02048817a70ad04dda5b30ad876c42a232229c99
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon May 16 21:53:14 2005 -0700

    [PATCH] uml: remove elf.h
    
    Actually remove elf.h in the tree.  The previous patch, due to a quilt
    bug/misuse, left it in the tree as a 0-length file, preventing the build to
    see it as missing and to generate a symlink in its place.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a123edab03ac39e08c2f9cb4fc1af07e099c68bc
Author: Peter Lundkvist <p.lundkvist@telia.com>
Date:   Mon May 16 21:53:12 2005 -0700

    [PATCH] Intel 6300ESB TCO timer support
    
    Additional i8xx_tco device support.
    
    Cc: David Hardeman <david@2gen.com>
    Cc: <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 643bdc6fc0e1928f39b4a3f486447024216ca50f
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Mon May 16 21:53:11 2005 -0700

    [PATCH] ide proc destroy error
    
    Kernel 2.6 has an ide proc destroy error. Run #modprobe ide-core and
    #rmmod ide-core, then kernel will dump stack information like below.
    
    **********Log******************
    Badness in remove_proc_entry at fs/proc/generic.c:693
    
    Call Trace:
     [<a0000001000117e0>] show_stack+0x80/0xa0
                                    sp=3De0000003e05dfbe0 =
    bsp=3De0000003e05d0ea8
     [<a0000001000120b0>] dump_stack+0x30/0x60
                                    sp=3De0000003e05dfdb0 =
    bsp=3De0000003e05d0e90
     [<a000000100183090>] remove_proc_entry+0x530/0x540
                                    sp=3De0000003e05dfdb0 =
    bsp=3De0000003e05d0e20
     [<a000000221cbd280>] proc_ide_destroy+0x120/0x140 [ide_core]
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0df0
     [<a000000221ca65f0>] cleanup_module+0x50/0xa0 [ide_core]
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0dd0
     [<a0000001000a9e10>] sys_delete_module+0x390/0x580
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0d50
     [<a00000010000af40>] ia64_ret_from_syscall+0x0/0x20
                                    sp=3De0000003e05dfe30 =
    bsp=3De0000003e05d0d50
     [<a000000000010640>] _stext+0xffffffff00010640/0x400
                                    sp=3De0000003e05e0000 =
    bsp=3De0000003e05d0d50
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64d13c00cf1f7c3d2c1ff449e2a0500ab568d319
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon May 16 21:53:09 2005 -0700

    [PATCH] fix impossible VmallocChunk
    
    VmallocTotal: 34359738367 kB
    VmallocUsed:    266288 kB
    VmallocChunk: 18014366299193295 kB
    is unsettling - x86_64 and some other architectures keep a separate address
    range for modules in vmalloc's vmlist, which /proc/meminfo should pass over.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit baae956100334ffbd101eea5eeea9a5ac9cf3abd
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:09 2005 -0700

    [PATCH] serio 'id' attributes
    
    move serio port's id attributes into separate subdirectory:
           ..devices/serioX/id_type  -> ..devices/serioX/id/type
           ..devices/serioX/id_proto -> ..devices/serioX/id/proto
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ff2c873ca11f9e6abffb004b908756b27597672
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:07 2005 -0700

    [PATCH] serport oops fix
    
    serport - avoid calling serio_interrupt or serio_write_wakeup on unregistered
    port.  Also fix memory leak which could happen if serport was left unused by
    moving serio allocation down to serport_ldisc_read.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3a5c73d5ecb40909db662c4d2ace497b25c5940
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:06 2005 -0700

    [PATCH] ALPS resume fix
    
    ALPS needs to be reset for detection to work reliably when reconnecting.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64b14d375263019753dd1405e4edd91a1715301d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 16 21:53:06 2005 -0700

    [PATCH] alps printk tidy
    
    Make the alps printk output look consistent.
    
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c3f2be423dafb9f914afe85e532e3fffd502fde
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:04 2005 -0700

    [PATCH] serio resume fix
    
    serio - do not attempt to immediately disconnect port if resume failed, let
    kseriod take care of it.  Otherwise we may attempt to unregister associated
    input devices which will generate hotplug events which are not handled well
    during swsusp.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 135255605d089202bec61b4a000ee762e9bc9d9c
Author: Pete Jewell <pete@phraxos.nildram.co.uk>
Date:   Mon May 16 21:53:03 2005 -0700

    [PATCH] Fix for bttv driver (v0.9.15) for Leadtek WinFast VC100 XP capture cards
    
    This is a tiny patch that fixes bttv-cards.c so that Leadtek WinFast VC100
    XP video capture cards work.  I've been advised to post it here after
    having already posted it to the v4l mailing list.
    
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 360b52b08972ada8fd4421e9a7bcbe1ea186c20e
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue May 10 06:45:10 2005 -0700

    [PATCH] USB: add modalias sysfs file for usb devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 25b6f08e3fa0d84e26a373a205cfdad208b54af7
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 10 17:09:52 2005 -0500

    [PATCH] USB: cypress_m8: add support for the DeLorme Earthmate lt-20
    
    This patch adds support for the DeLorme Earthmate lt-20 to the
    cypress_m8 driver.  The device was tested and found to be compatible
    with the cypress_m8 driver.  This is a resend with the complete patch
    which properly compiles.
    
    Adds support for the DeLorme Earthmate lt-20 to the cypress_m8 driver.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4756ae5b5234e08150ac089f7d989613948f00e5
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 9 17:23:51 2005 -0700

    [PATCH] USB: ehci suspend must stop timer
    
    Force the EHCI watchdog timer off during suspend, in case for some
    reason it was still running after the root hub suspended.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80615f81534109a22a732d0328d63ced4432824e
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 10 06:45:10 2005 -0700

    [PATCH] USB: usbnet driver fixes
    
    Updates to the usbnet driver:
    
     - Remove a warning when built with Zaurus support but not CDC Ethernet;
       just moves an #ifdef to cover more code
    
     - Two tweaks to the pseudo-MDLM support:
        * correctly handle _either_ of the two GUIDs
        * ignore a padding bit that doesn't seem necessary
    
     - Remove ID for one Motorola phone that uses the MDLM stuff.
    
    It also updates the Kconfig helptext to make it clearer that the "Zaurus"
    configuration option supports an increasing (sigh) family of nonstandard
    peripheral protocols.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 118326e940bdecef6c459d42ccf05256ba86daa7
Author: Peter Osterlund <petero2@telia.com>
Date:   Sat May 14 00:58:30 2005 -0700

    [PATCH] Fix root hole in pktcdvd
    
    ioctl_by_bdev may only be used INSIDE the kernel.  If the "arg" argument
    refers to memory that is accessed by put_user/get_user in the ioctl
    function, the memory needs to be in the kernel address space (that's the
    set_fs(KERNEL_DS) doing in the ioctl_by_bdev).  This works on i386 because
    even with set_fs(KERNEL_DS) the user space memory is still accessible with
    put_user/get_user.  That is not true for s390.  In short the ioctl
    implementation of the pktcdvd device driver is horribly broken.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68f66feb300423bb9ee5daecb1951af394425a38
Author: Stephen Tweedie <sct@redhat.com>
Date:   Fri May 13 23:31:19 2005 -0400

    [PATCH] Fix root hole in raw device
    
    [Patch] Fix raw device ioctl pass-through
    
    Raw character devices are supposed to pass ioctls through to the block
    devices they are bound to.  Unfortunately, they are using the wrong
    function for this: ioctl_by_bdev(), instead of blkdev_ioctl().
    
    ioctl_by_bdev() performs a set_fs(KERNEL_DS) before calling the ioctl,
    redirecting the user-space buffer access to the kernel address space.
    This is, needless to say, a bad thing.
    
    This was noticed first on s390, where raw IO was non-functioning.  The
    s390 driver config does not actually allow raw IO to be enabled, which
    was the first part of the problem.  Secondly, the s390 kernel address
    space is distinct from user, causing legal raw ioctls to fail.  I've
    reproduced this on a kernel built with 4G:4G split on x86, which fails
    in the same way (-EFAULT if the address does not exist kernel-side;
    returns success without actually populating the user buffer if it does.)
    
    The patch below fixes both the config and address-space problems.  It's
    based closely on a patch by Jan Glauber <jang@de.ibm.com>, which has
    been tested on s390 at IBM.  I've tested it on x86 4G:4G (split address
    space) and x86_64 (common address space).
    
    Kernel-address-space access has been assigned CAN-2005-1264.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a84a505956f5c795a9ab3d60d97b6b91a27aa571
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed May 11 00:10:44 2005 -0700

    [PATCH] fix Linux kernel ELF core dump privilege elevation
    
    As reported by Paul Starzetz <ihaquer@isec.pl>
    
    Reference: CAN-2005-1263
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d3f0fcec2d50a18a84c4f3dd7683206ed37ca009
Merge: 8711a1b... c8920ba...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 20:06:47 2005 -0700

    Automatic merge of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6.git

commit 8711a1b902e691c9b3bbd0d0624f836abe9641ca
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 16 23:36:22 2005 +0100

    [PATCH] ARM: Fix build error
    
    Mainline kernels don't have VECTORS_HIGH nor COPYPAGE_MINICACHE yet.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 768cbfbc5273bad91afe12b81471f563b288118a
Merge: 2a4a7e0... 05ab301...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 10:34:52 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 2a4a7e02e27b4f542473772d588f81759c209fb3
Merge: 85bcc13... bfd4e07...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 10:27:11 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit c8920ba041c8934b29370f5d62ab9ea8f147966b
Author: Daniel Andersen <daniel@linux-user.net>
Date:   Thu May 5 15:14:09 2005 -0700

    [PATCH] wireless: 3CRWE154G72 Kconfig help fix
    
    Version 2 of the 3com OfficeConnect 11g Cardbus Card aka 3CRWE154G72 is not
    supported by the prism54 project.  To stop confusion, the kernel
    documentation should state so as 3com made a good job hiding the version.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    
    diff -puN drivers/net/wireless/Kconfig~wireless-3crwe154g72-kconfig-help-fix drivers/net/wireless/Kconfig

commit c4cc26d3310a6614a20e32276228a5d44159fc9b
Author: Jiri Benc <jbenc@suse.cz>
Date:   Wed Apr 27 12:48:56 2005 +0200

    [PATCH] Typo in tulip driver
    
    This patch fixes a typo in tulip driver in 2.6.12-rc3.

commit 562faf469f35bf63c0b021550811280c81bdc52e
Author: James Harper <james.harper@bendigoit.com.au>
Date:   Thu May 5 15:14:18 2005 -0700

    [PATCH] fix PROMISC/bridging in TLAN driver
    
    This has been a problem for me for ages.  When using bridging, the driver
    is switched into promiscuous mode before the link init is complete.  The
    init complete routine then resets the promisc bit on the card so the kernel
    still thinks the card is in promiscuous mode but the card isn't.  doh.
    
    I think this bug only shows up in bridging when the bridge is started at
    boot time (or something else that sets promisc at the same time the card
    was started).  If promisc is enabled later it works.
    
    Here's a trivial (and hopefully correct) patch that works for me. It
    just calls the promisc/multicast setup routine after init.
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 99718699f5746cc365f3a9ab4769568a1da97635
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Thu Apr 14 11:20:32 2005 -0700

    [PATCH] {PATCH] Fix IBM EMAC driver ioctl bug
    
    Fix IBM EMAC driver ioctl bug.
    
    I found IBM EMAC driver bug.
    So mii-tool command print wrong status.
    
      # mii-tool
      eth0: 10 Mbit, half duplex, no link
      eth1: 10 Mbit, half duplex, no link
    
    I can get correct status on fixed kernel.
    
      # mii-tool
      eth0: negotiated 100baseTx-FD, link okZZ
      eth1: negotiated 100baseTx-FD, link ok
    
    Hiroaki Fuse
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>

commit c16ef1ceedff27c1b452724ca7f89b729651098f
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Wed Apr 6 11:17:59 2005 -0400

    [PATCH] ns83820 update
    
    Changes:
    - improved DAC ifdefs from Andi Kleen
    - removal of dead code from Adrian Bunk
    - fix half duplex collision behaviour

commit f7a3aae1723e7ffc9c4fcdb489365da7a3d81255
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] drivers/net/wireless enabled by wrong option
    
    	NET_WIRELESS is only a subset of the stuff in drivers/net/wireless;
    NET_RADIO is what covers all of them.
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 4b40033ef110b833986c1a1d958a951b695f9fbc
Author: Domen Puncer <domen@coderock.org>
Date:   Sun May 15 16:01:50 2005 -0700

    [SPARC]: Eliminate local MIN/MAX macros in drivers/sbus/char/aurora.c
    
    From: Christophe Lucas <clucas@rotomalug.org>
    
    min/max macros from kernel.h are safe, a lot of handcrafted MIN/MAX are
    not.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit cdcca89e1a90fa9112260bd6384f20fcc4280e21
Author: Brett Russ <russb@emc.com>
Date:   Mon Mar 28 15:10:27 2005 -0500

    [PATCH] libata: flush COMRESET set and clear
    
    Updated patch to fix erroneous flush of COMRESET set and missing flush
    of COMRESET clear.  Created a new routine scr_write_flush() to try to
    prevent this in the future.  Also, this patch is based on libata-2.6
    instead of the previous libata-dev-2.6 based patch.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    
    Index: libata-2.6/drivers/scsi/libata-core.c
    ===================================================================

commit 21b1ed74ee3667dcabcba92e486988ea9119a085
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Apr 29 17:34:59 2005 +0800

    [PATCH] libata: Prevent the interrupt handler from completing a command twice
    
    Problem:
       During the libata CD-ROM stress test, sometimes the "BUG: timeout
    without command" error is seen.
    
    Root cause:
      Unexpected interrupt occurs after the ata_qc_complete() is called,
    but before the SCSI error handler.  The interrupt handler is invoked
    before the SCSI error handler, and it clears the command by calling
    ata_qc_complete() again.  Later when the SCSI error handler is run,
    the ata_queued_cmd is already gone, causing the "BUG: timeout without
    command" error.
    
    Changes:
      - Use the ATA_QCFLAG_ACTIVE flag to prevent the interrupt handler
    from completing the command twice, before the scsi_error_handler.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit 15efa9bb2d4da7cd9feb1c67fcf3d9e0e1bd00c6
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed May 4 15:33:11 2005 -0700

    [PATCH] tlan: restore deleted module parameters.
    
    The module parameter values got lost in the conversion to the new module_param
    interface. This should fix it.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    
    Index: tlan/drivers/net/tlan.c
    ===================================================================

commit 6da0f685935e13458a2206ac872d0d3c67a52f65
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 30 13:52:49 2005 +0200

    [PATCH] SIS900 must select MII
    
    This patch fixes the following compile error caused by bk-netdev:
    
    <--  snip  -->
    
    ...
      LD      .tmp_vmlinux1
    drivers/built-in.o(.text+0x98528): In function `sis900_get_settings':
    : undefined reference to `mii_ethtool_gset'
    drivers/built-in.o(.text+0x98538): In function `sis900_set_settings':
    : undefined reference to `mii_ethtool_sset'
    drivers/built-in.o(.text+0x98517): In function `sis900_get_link':
    : undefined reference to `mii_link_ok'
    drivers/built-in.o(.text+0x98547): In function `sis900_nway_reset':
    : undefined reference to `mii_nway_restart'
    make: *** [.tmp_vmlinux1] Error 1
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Daniele Venzano <venza@brownhat.org>

commit 1bcd315362e215a72b56d1330bbf32f1c74eefb5
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Fri Apr 29 14:51:17 2005 -0700

    [PATCH] pcnet32: fix resource leak with loopback test
    
    When running the loopback test, resources are not properly released on
    completion.  This patch frees all transmit resources after running the
    loopback test.  Tested on ia32 and ppc64 hardware.
    
    Signed-off-by: Don Fry <brazilnut@us.ibm.com>

commit 41480af27a85d6008d9e11db8bc2730407c25e1d
Author: Dan Williams <dcbw@redhat.com>
Date:   Tue May 10 09:45:51 2005 -0400

    [PATCH] wireless/airo: WEXT and quality corrections
    
    This patch brings the airo driver into line with the current
    WEXT specification of signal quality.  It also fixes the values
    used to determine signal quality and level for MPI & PCMCIA 350
    cards.  It turns out that BSSListRid.rssi was actually in dBm
    for 350 series cards, and that we can use the normalized
    signal strength reported by the card as our "quality" value, on
    a scale of 0 - 100.  Since signal level values are in dBm for
    this driver, max_qual->level MUST be 0, as specified in the WEXT
    spec.  This patch also uses the IW_QUAL constants new in WEXT
    version 17.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>

commit 760f86d78d92f39e2ceb55b40f0885eb755c8c2f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Apr 16 16:24:16 2005 +1000

    [PATCH] Fw: [Bugme-new] [Bug 4482] New: natsemi: incorrect initialization of IPv6 Neighbor-discovery multicast
    
    On Wed, Apr 13, 2005 at 05:36:42PM +0000, Andrew Morton wrote:
    >            Summary: natsemi: incorrect initialization of IPv6 Neighbor-
    >                     discovery multicast
    
    I've got a pair of FA312 cards and this problem has bothered me
    for ages.  This has finally prompted me to do something about it :)
    
    Turns out that somebody wasn't following the documentation.  We were
    doing 16-bit writes to 32-bit registers which led to some addresses
    working and others not so lucky.
    
    This patch should fix the problem.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e885b5e83965c320e8eff1ec3ebfbf821b375568
Author: simon@thekelleys.org.uk <simon@thekelleys.org.uk>
Date:   Sat May 7 21:33:31 2005 +0100

    [PATCH] atmel wireless
    
    Below is a one-liner for the atmel wireless driver, just adding
    another card to the table.

commit 22c6d143f33f10721216a8cfa3a83f7edfc2bd4e
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Tue Apr 19 21:17:09 2005 +0200

    [PATCH] forcedeth: Update error handling
    
    Ayaz wrote an update to the error handling for forcedeth (which I
    modified heavily, thus all bugs are mine):
    The ERROR4 bit is not a fatal error, it just indicates a mismatch
    between the actual packet len and the len according to the 802.3 header.
    The patch adds proper handling.
    The patch also removes the code that drops all packets with RX_ERROR &
    (!RX_FRAMINGERR): ERROR4 errors are also not fatal.

commit b2e0852e1eee7c445b1789bef41204b64f981102
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 18:09:45 2005 +1000

    [PATCH] iseries_veth: Cleanup skbs to prevent unregister_netdevice() hanging
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver is badly behaved in that it will keep TX packets
    hanging around forever if they're not ACK'ed and the queue never fills up.
    
    This causes the unregister_netdevice code to wait forever when we try to take
    the device down, because there's still skbs around with references to our
    struct net_device.
    
    There's already code to cleanup any un-ACK'ed packets in veth_stop_connection()
    but it's being called after we unregister the net_device, which is too late.
    
    The fix is to rearrange the module exit function so that we cleanup any
    outstanding skbs and then unregister the driver.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit 41664c03f6c96a1f8a91714309b36f1b5ca85610
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:55:08 2005 +1000

    [PATCH] iseries_veth: Don't leak skbs in RX path
    
    Hi Andrew, Jeff,
    
    Under some strange circumstances the iseries_veth driver can leak skbs.
    
    Fix is simply to call dev_kfree_skb() in the right place.
    Fix up the comment as well.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit eb235aef724568ae15af831968000cf9a3974b26
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:53:18 2005 +1000

    [PATCH] iseries_veth: Set dev->trans_start so watchdog timer works right
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver doesn't set dev->trans_start in it's TX path. This
    will cause the net device watchdog timer to fire earlier than we want it to,
    which causes the driver to needlessly reset its connections to other LPARs.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit f27eff1ffd65236b8e421188f76ad1b0b94e06eb
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:47:27 2005 +1000

    [PATCH] iseries_veth: Don't send packets to LPARs which aren't up
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver has a logic bug which means it will erroneously
    send packets to LPARs for which we don't have a connection.
    
    This usually isn't a big problem because the Hypervisor call fails
    gracefully and we return, but if packets are TX'ed during the negotiation
    of the connection bad things might happen.
    
    Regardless, the right thing is to bail early if we know there's no
    connection.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit 05e08a2a297371564020f76d1bf8b3a931d5e1ed
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:39:09 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 10/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver related changes:
     - due to OSA hardware changes in TCP Segmentation Offload
       support we are able now to pack TSO packets too.
       This fits perfectly in design of qeth buffer handling and
       sending data respectively.
     - remove skb_realloc_headroom from the sending path since
       hard_header_len value provides enough headroom now.
     - device recovery behaviour improvement
     - bug fixed in Enhanced Device Driver Packing functionality
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 9a4558193662e933588ee53e0202c103a68c9366
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:38:28 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 9/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver changes:
     - Use sizeof(__u16) instead of '2' in qeth_fill_header.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit e23dd9cdd676323c95fab47dc55123ba18f7e1ff
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:38:11 2005 +0200

    [PATCH] s390: fakell for high speed token ring
    
    [patch 8/10] s390: fakell for high speed token ring.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    Implement fake-link-layer for high speed token ring. Without it
    token ring packages get leading ethernet headers, which confuses
    dhcp.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit d801145d910cc4a0fb418dda1dee227cec993cbd
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:37:53 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 7/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver changes:
     - Removed redundant code, use the same qeth_fill_buffer_frag
       for TSO path either
     - Using skb->frags solely is not correct since skb->data still
       points to the beginning of the whole data, even when it is
       a small portion we have to fill the qdio buffer with it.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 5e39f2933f6707fc824b5e419dcac8ced67a57b6
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:37:00 2005 +0200

    [PATCH] s390: enable iucv_send2way_xxx functions
    
    [patch 6/10] s390: enable iucv_send2way_xxx functions.
    
    From: Ursula Braun-Krahl <braunu@de.ibm.com>
    
    The SSL-Server of z/VM wants to use the iucv_send2way
    and iucv_send2way_array function. Enable them again.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 7394c928c849fe2ea5c20b6d73cbe7f220810d94
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:36:47 2005 +0200

    [PATCH] s390: ctc code cleanup
    
    [patch 5/10] s390: ctc code cleanup.
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
    
    ctc network driver changes:
     - Some code cleanup.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7f81947b46c3efacc084ac5033f3fed702e46532
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:36:22 2005 +0200

    [PATCH] s390: schedule_timeout cleanup in ctctty
    
    [patch 4/10] s390: schedule_timeout cleanup in ctctty.
    
    From: Domen Puncer <domen@coderock.org>
    
    Use msleep_interruptible() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b5f9d55b64a5c7193f8965c90ba62244ea3180b2
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:35:57 2005 +0200

    [PATCH] s390: set online race in the lcs driver
    
    [patch 3/10] s390: set online race in the lcs driver.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    There is a race between lcs_stopcard() and lcs_open_device() which
    can lead to the error 'lcs: Error in starting channel, rc=-16'.
    lcs_open_device() is invoked when 'ifconfig up' is called due to a
    hotplug event, which is caused by register_netdev(). In parallel
    lcs_stopcard() is executed. Both functions are sending lcs commands.
    The second invocation fails with -EBUSY (-16) as return value.
    Move invocation of register_netdev() after invocation of lcs_stopcard
    to avoid the race.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 109a260b66bfbab7ba9f985495791af21f910218
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:19:44 2005 +0200

    [PATCH] s390: multicast address registration in lcs
    
    [patch 2/10] s390: multicast address registration in lcs.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    When setting lcs devices online you can run into an endless loop,
    because the code that registers the multicast addresses uses
    list_for_each_entry instead of list_for_each_entry_safe.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 321de3c8cc12bdff073c23524aa1f6ed47cbeee4
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:17:46 2005 +0200

    [PATCH] s390: claw driver wiring
    
    [patch 1/10] s390: claw driver wiring.
    
    From: Andy Richter <richtera@us.ibm.com>
    
    claw network driver changes:
     - Add an entry to the drivers/s390/net Makefile to build the claw driver.
     - Add claw channel type to cu3088.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit f85bdb9ce9e130ce00f7a91523931fdd8f96f102
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu May 12 15:49:54 2005 -0400

    [PATCH] libata: stop setting sdev->host->max_sectors for lba48 drives
    
    Avoid changing sdev->host->max_sectors because it can prevent use of
    non-lba48 drives on other ports of the same adapter.
    
    Signed-off-by: Stuart Hayes <stuart_hayes@Dell.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 042e2fb70006f135469d546726451b7d14768980
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:20:14 2005 -0700

    [PATCH] e100: Driver version, white space, comments, device id
    
    Driver version, white space, comments.
    Also enabled ICH-7 support
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 962082b6df11fe8cabafd2971b07c914cd52ee2a
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:19:46 2005 -0700

    [PATCH] e100: Performance optimizations to e100 Tx Path
    
    Performance optimizations to e100 Tx Path
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 6bdacb1ad58bb6b772a4fc18f21684437bd5f439
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:54 2005 -0700

    [PATCH] e100: Fix Wake on lan related issues
    
    Fix Wake on lan related issues
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 0236ebb7ae85935b3b96eef7e8a4e203ea9958a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:42 2005 -0700

    [PATCH] e100: Synchronize interface link state with poll routine
    
    Synchronize interface link state with e100 poll routine
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 1f53367d5d75ba37f258f6e955d6fc24814051a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:20 2005 -0700

    [PATCH] e100: Render e100 NAPI state machine
    
    Render e100 NAPI state machine to be similar to the non-NAPI one.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 2acdb1e05c1a92e05ee710ed8f226a8f3183d5a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:16:58 2005 -0700

    [PATCH] e100: Execute tx_timeout task outside interrupt context
    
    Execute tx_timeout task outside the interrupt context
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit ac79c82e793bc2440c4765e5eb1b834d2c18edf2
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:05:32 2005 -0700

    [PATCH] ixgb: Driver version, white space, comments, device id
    
    Driver version, white space, comments, device id & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 37d16f823799918107440cb9e552b0709347f77c
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:05:12 2005 -0700

    [PATCH] ixgb: Fixed msec_delay in osdep to use msleep
    
    Fixed msec_delay in osdep to use msleep
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_osdep.h net-drivers-2.6/drivers/net/ixgb.new/ixgb_osdep.h

commit f404de1cd407c1f56fa478810c6c48e015d377bd
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:54 2005 -0700

    [PATCH] ixgb: Code optimization
    
    Code optimization
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit c2eba932b14718e34ac2609e35c6d41e032a2478
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:32 2005 -0700

    [PATCH] ixgb: Remove hook for suspend, no power management
    
    Remove hook for suspend. No power management in 10GbE Controllers
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 5e3c30deb21d0eb0da44830fb1c1fc7054e54229
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:07 2005 -0700

    [PATCH] ixgb: Support for ethtool -d
    
    ixgb support for ethtool -d
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_ethtool.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_ethtool.c

commit abf481d6af8670c89f33f354c6fbd9977b23cebc
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:03:32 2005 -0700

    [PATCH] ixgb: Fix EEPROM functions to be endian-aware
    
    Fix EEPROM functions to be endian-aware
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_ee.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_ee.c

commit 41639fed1b32dde4ea3d94242a89308435d341be
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:51:54 2005 -0700

    [PATCH] ixgb: Reset status in the Rx
    
    Reset status in the Rx descriptor prior to handing it to the controller.
    Leave three Rx descriptors unused
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 6dfbb6dd391139be9f1cd333877c6e2b03da4bba
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:56:40 2005 -0700

    [PATCH] ixgb: Mask RXO interrupt
    
    Disable RXO interrupt to decrease recovery time when system is overloaded with data
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 0c73f58636385a4d3dc68d0d0829d4c39d61b621
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:48:06 2005 -0700

    [PATCH] ixgb: Change RDT write bump size to 4
    
    Change RDT write bump size back to 4
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb.h net-drivers-2.6/drivers/net/ixgb.new/ixgb.h

commit 06c2f9ecb5b53f9d4fc1ef596da16683cc4af5ba
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:46:51 2005 -0700

    [PATCH] ixgb: Do not set the RS bit on context descriptors
    
    Don't set the RS bit on context descriptors, causes un-necessary bus activity
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 5633684d008b777ab169e8efcef39a898482f531
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:45:50 2005 -0700

    [PATCH] ixgb: Fix multi-cast packet count in statistics
    
    Fix multi-cast packet count in statistics
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 2648345fcbadfae8e7113112ff9402e465a184dc
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:46 2005 -0700

    [PATCH] e1000:Driver version,white space,comments,device id
    
    Driver version, white space, comments, device id & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_ethtool.c net-drivers-2.6/drivers/net/e1000.new/e1000_ethtool.c

commit 1125ecbc0a89db07bb4eb1ba892a23367c3bdeb5
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:25 2005 -0700

    [PATCH] e1000:Adjust flow control watermarks for Jumbo Frames
    
    Adjust flow control watermarks for Jumbo Frames
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 0e6ef3e02b6f07e37ba1c1abc059f8bee4e0847f
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:14 2005 -0700

    [PATCH] e1000:Fix Packet Buffer Allocation logic for 82547_rev_2
    
    Fix Packet Buffer Allocation logic for 82547_rev_2 controller
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 2d7edb923a823660b081bd4c660300ee19adca8d
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:43:52 2005 -0700

    [PATCH] e1000:82573 specific code & packet split code
    
    82573 specific code & packet split code
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000.h net-drivers-2.6/drivers/net/e1000.new/e1000.h

commit f0d11ed0b0650d2f93f56f65167c10a577c16c88
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:43:28 2005 -0700

    [PATCH] e1000: Modified e1000_clean: exit poll
    
    Modified e1000_clean:: exit poll if no Tx and work_done == 0
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit f1d2e4905eed4b13c3ba56ac6d30c283be996963
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:42:04 2005 -0700

    [PATCH] e1000:Removed redundant statement in e1000_clean_tx_irq
    
    Removed redundant statement in e1000_clean_tx_irq
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 97338bde27d97347bc83203d6ac5e93be1ebcd03
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:46 2005 -0700

    [PATCH] e1000: Implement a workaround for 82546 errata 10
    
    Implement 82546 errata 10 --  first Tx descriptor cannot have more than 2015 byte of data in it or it could hang the transmitter.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit a4cb847dac40577dd751a4deb4085ed080780679
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:28 2005 -0700

    [PATCH] e1000: e1000 stops working after resume
    
    e1000 stops working after resume, call pci_enable_device after pci_restore_state - Modified Andrew Morton's patch
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 6d9157577d926d2a83fe8d4914c0cc216deb5842
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:11 2005 -0700

    [PATCH] e1000:Fix computation of netdev stats from controller stats counters
    
    Fix computation of netdev stats from controller stats counters - from
    sfeldma@pobox.com
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 70b8f1e16a788eccdd36f39679774b1a08a6ba55
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:40:40 2005 -0700

    [PATCH] e1000: Dump information on Tx ring
    
    Dump information on Tx ring when 'NETDEV: Watchdog' condition is reached
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 2701234fc0372630457e3da14e36cde53c57d12e
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:40:28 2005 -0700

    [PATCH] e1000: Delay clean-up of last Tx packet
    
    Delay clean-up of last Tx packet to fix pre-mature writeback issue of Tx descriptors only when TSO is enabled
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 4e48a2b91d408357cb0747151d8db5368ac8f1d0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:53 2005 -0700

    [PATCH] e1000: Fix kernel panic with 82541 LOM
    
    Fix kernel panic with 82541 LOM when using a 100M cable
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 5de556249fde97493a4c79dbf8979ace0f76789f
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:30 2005 -0700

    [PATCH] e1000: Enable polling before enabling interrupts
    
    Enable polling before enabling interrupts -- avoids (in NAPI mode) entering the ISR and returning without doing any work because polling is not enabled. [romieu@fr.zoriel.com]
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit fa4f7ef3aaa6cee6b04ebe90266ee893e0b2ce07
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:13 2005 -0700

    [PATCH] e1000: MSI support for PCI-e adapters
    
    MSI support for PCI-e adapters
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000.h net-drivers-2.6/drivers/net/e1000.new/e1000.h

commit df25e164878836196ee93d1a5757867da6eac30e
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:38:43 2005 -0700

    [PATCH] e1000: Fix msec-delay definition to use msleep
    
    Fix msec-delay definition in e1000_osdep.h to use msleep
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_osdep.h net-drivers-2.6/drivers/net/e1000.new/e1000_osdep.h

commit e4eff7291c977308989b24fdfc7215a501302e6a
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:38:30 2005 -0700

    [PATCH] e1000: made loopback test robust
    
    Added enhanced functionality to the loopback diags to wrap the descriptor rings.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_ethtool.c net-drivers-2.6/drivers/net/e1000.new/e1000_ethtool.c

commit da369b01d49b34803265096eb92a2d6da61cf0d0
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu May 12 20:13:14 2005 -0400

      [PATCH] More ethtool support for sis900 and warning fix
    
      Add support to sis900 for the following ethtool ops:
            - get_link
            - get_settings
            - set_settings
            - nway_reset
    
      Signed-off-by: Daniele Venzano <webvenza@libero.it>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 126fa4b9ca5d9d7cb7d46f779ad3bd3631ca387c
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu May 12 20:09:17 2005 -0400

      [PATCH] r8169: incoming frame length check
    
      The size of the incoming frame is not correctly checked.
    
      The RxMaxSize register (0xDA) does not work as expected and incoming
      frames whose size exceeds the MTU actually end spanning multiple
      descriptors. The first Rx descriptor contains the size of the whole
      frame (or some garbage in its place). The driver does not expect
      something above the space allocated to the current skb and crashes
      loudly when it issues a skb_put.
    
      The fix contains two parts:
      - disable hardware Rx size filtering: so far it only proved to be able
        to trigger some new fancy errors;
      - drop multi-descriptors frame: as the driver allocates MTU sized Rx
        buffers, it provides an adequate filtering.
    
      As a bonus, wrong descriptors were not returned to the asic after their
      processing.
    
      Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2918c35d311263bc313b3da272783860ce573189
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Thu May 12 19:42:06 2005 -0400

    [PATCH] forcedeth: netpoll support

commit dfa1b73ffb414b64dc0452260132a090eb25bf52
Author: Liu Tao <liutao1980@gmail.com>
Date:   Thu May 12 19:40:38 2005 -0400

      [PATCH] drivers/net/amd8111e.c: fix NAPI interrupt in poll
    
      This patch makes the netif_rx_complete() and rx_interrupt_enable
      atomic when exiting the poll() method, so to avoid interrupt in poll.
      It also fixes the rx interrupt check logic in interrupt handler.
    
      Signed-off-by: Liu Tao <liutao1980@gmail.com>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bfd4e0709fb977e64e27d9255be6e7aeadf4fcd4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu May 12 19:27:14 2005 +0100

    [PATCH] ARM: 2678/1: S3C2440 - cpu fixes, hdiv divisors and nand dev name
    
    Patch from Ben Dooks
    
    Fix the setting of hdiv when set to divide-by-2. Thanks to
    Jeonghoon Yoon for pointing this out.
    Change name of the NAND device to "s3c2440-nand" as it
    is not similar enough to the "s3c2410-nand" device.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 4ad3a443c9238c8df68f4519049c3c8d80fe62c2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu May 12 19:27:13 2005 +0100

    [PATCH] ARM: 2677/1: S3C2440 - UPLL frequency doubled
    
    Patch from Ben Dooks
    
    S3C2440 UPLL is the same as the S3C2410 UPLL, it is only the
    MPLL which has an extra multiplication factor of 2 in the
    multiplier.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 9dabf9da18018b99a51334c2ef168019389ed5bf
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu May 12 19:27:13 2005 +0100

    [PATCH] ARM: 2676/1: S3C2440 - NAND register additions
    
    Patch from Ben Dooks
    
    Add the register definitions for the s3c2440 NAND controller
    to the s3c2410 NAND register definitions
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 70489c88d0b7e5820ac37a039a910bb396e2a4e3
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 12 19:27:12 2005 +0100

    [PATCH] ARM: 2680/1: refine TLS reg availability some more again
    
    Patch from Nicolas Pitre
    
    Not all ARMv6 processors implement the TLS register.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 104e50108c862b13da26850d4b469cc13418b66b
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Mar 27 08:50:38 2005 -0500

    [PATCH] typo fix in drivers/scsi/sata_svw.c comment
    
    Add missing brace.

commit 4dbc30fb27ac4e647e6efadb382ff7d38c3d368e
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 11 11:37:00 2005 -0700

    [SPARC64]: Add timeouts to streaming buffer synchronization.
    
    If some hardware error occurs and the flush flag never updates,
    we will hang forever in these routines.  Add a timeout, and
    print out a diagnostic if it is reached.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4fdee8e3b41239242a8f421a28736ef8e08ca55
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 11 11:34:32 2005 -0700

    [SUNSAB]: Defer register updates until transmitter is idle.
    
    The chip can emit garbage characters if we touch the
    settings while characters are going out.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bfd68594082d8384781c242aa72a7950b5cf51aa
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed May 4 06:42:00 2005 -0700

    [IA64] Avoid .spillpsp directive in handcoded assembly
    
    Some time ago, GAS was fixed to bring the .spillpsp directive in line
    with the Intel assembler manual (there was some disagreement as to
    whether or not there is a built-in 16-byte offset).  Unfortunately,
    there are two places in the kernel where this directive is used in
    handwritten assembly files and those of course relied on the "buggy"
    behavior.  As a result, when using a "fixed" assembler, the kernel
    picks up the UNaT bits from the wrong place (off by 16) and randomly
    sets NaT bits on the scratch registers.  This can be noticed easily by
    looking at a coredump and finding various scratch registers with
    unexpected NaT values.  The patch below fixes this by using the
    .spillsp directive instead, which works correctly no matter what
    assembler is in use.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d7def6c22dfa9f32b3d9e5546a7a6a90c644ff5f
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Tue May 10 19:01:35 2005 +0100

    [PATCH] ARM: 2666/1: i.MX pwm controller defines
    
    Patch from Sascha Hauer
    
    This patch adds the defines for the i.MX PWM controller
    
    Signed-off-by: Steven Scholz
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit fa4354359f800ef9d68ed644438efd45b559b443
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Tue May 10 17:36:29 2005 +0100

    [PATCH] ARM: 2663/2: I can't type
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 8d802d28c23122a57d7dddf4886b0486ca183d2d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 17:31:43 2005 +0100

    [PATCH] ARM: Add V6 aliasing cache flush
    
    Add cache flushing support for aliased V6 caches to
    flush_dcache_page.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 08ee4e4c5fd3fb0857eeb6a5a0ff66881432e8a3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 17:30:47 2005 +0100

    [PATCH] ARM: Use top_pmd for V6 copy/clear user_page
    
    Remove needless page table walking for v6 page operations.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d2bab05ac1f9a2f5ddcd2f3256237e5c47fc127f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 14:23:01 2005 +0100

    [PATCH] ARM: Move copy/clear user_page locking into implementation
    
    Move the locking for copy_user_page() and clear_user_page() into
    the implementations which require locking.  For simple memcpy/
    memset based implementations, the locking is extra overhead which
    is not necessary, and prevents preemption occuring.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c4e1f6f6bf82af89994a0ee760fc5e036c4d3c1f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 10:40:19 2005 +0100

    [PATCH] ARM: Add top_pmd, which points at the top-most page table
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a84f5770170232a48e753e02ee5f0f17ee17b791
Merge: 66302f2... 88d7bd8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon May 9 16:44:53 2005 -0700

    Merge with /home/aegl/GIT/linus

commit 05ab3014636ff60a319d37cdf37dca594b015eec
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 9 23:21:59 2005 +0100

    [PATCH] Serial: Add uart_insert_char()
    
    Add uart_insert_char(), which handles inserting characters into the
    flip buffer.  This helper function handles the correct semantics
    for handling overrun in addition to inserting normal characters.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 155bb14482cc567761c13b4efc064de400c55e18
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 9 20:52:51 2005 +0100

    [PATCH] ARM: Add inline functions to find the pmd from virtual address
    
    Add pmd_off() and pmd_off_k() to obtain the pmd pointer for a
    virtual address, and use them throughout the mm initialisation.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66302f211a21bb9439a2ae7f7b6a4c386bb10ecd
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Tue Apr 12 11:04:00 2005 -0700

    [IA64] fix "section mismatch" compile-time-error
    
    I noticed this typo when trying to compile a kernel which had
    CONFIG_HOTPLUG turned off.  In that case, __devinit is no longer a
    no-op and the compiler then detects a section-conflict.  Fix by using
    __devinitdata instead of __devinit.
    
    Same patch also submitted by Darren Williams to fix compilation error
    using sim_defconfig (which has CONFIG_HOTPLUG=n).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by:  Darren Williams <dsw@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 85bcc13072c54592596c5b41d40d1c6a18b04e19
Author: Pierre Ossman <drzeus-list@cx.rmk.(none)>
Date:   Sun May 8 19:35:27 2005 +0100

    [PATCH] MMC: wbsd update
    
    Updates to the wbsd driver.
    
    * Fix to handle DAT3 card detection.
    * Fixed bug which could cause large writes to stall in FIFO mode.
    * Plug 'n Play support. In most cases you need ACPI PNP for this to work.
    * Uses generic DMA API (ISA dependency removed).

commit 88d7bd8cb9eb8d64bf7997600b0d64f7834047c5
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 22:20:31 2005 -0700

    Linux v2.6.12-rc4

commit 2d58cc9a437f3833d242e9d1617ec9b4044e26f3
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:55 2005 -0700

    [PATCH] uml: x86_64 fixes
    
    This fixes some x86_64 bugs -
    
    - maybe_map returns -1 on error instead of 0, which is interpreted as
      physical address 0
    
    - removed an include of ipc.h, which isn't needed
    
    - fixed the calculation of signal frame location
    
    - the signal delivery code is now immune to the stack expansion check
    
    - added a missing include
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7e663dea7f0e22f3b2d07156c5e9d2e8656610
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:54 2005 -0700

    [PATCH] uml: Fix process exit race
    
    tt-mode closes switch_pipes in exit_thread_tt and kills processes in
    switch_to_tt, if the exit_state is EXIT_DEAD or EXIT_ZOMBIE.
    
    In very rare cases the exiting process can be scheduled out after having set
    exit_state and closed switch_pipes (from release_task it calls proc_pid_flush,
    which might sleep).  If this process is to be restarted, UML failes in
    switch_to_tt with:
    
       write of switch_pipe failed, err = 9
    
    We fix this by closing switch_pipes not in exit_thread_tt, but later in
    release_thread_tt.  Additionally, we set switch_pipe[0] = 0 after closing.
    switch_to_tt must not kill "from" process depending on its exit_state, but
    must kill it after release_thread was processed only, so it examines
    switch_pipe[0] for its decision.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8bd0220c1ac6273eda66e25d992654219f846b6
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:53 2005 -0700

    [PATCH] uml: S390 preparation, arch_align_stack
    
    Only x86 and x86_64 use arch_align_stack(), all other subarches have:
    
     #define arch_align_stack(x) (x)
    
    So, if this definition is found, UML's own arch_align_stack() should be
    skipped.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f3be588b51e809476cdecd4eaf6fd04670d9c36
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:52 2005 -0700

    [PATCH] uml: Use CONFIG variable for address space size
    
    tt/mem.c still uses hardcoded TOP for i386 instead of CONFIG_TOP_ADDR provided
    by subarch's Kconfig_XXXX, which would be right.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 675dffc914412a25d33bbc8baea30681c565c9c1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:51 2005 -0700

    [PATCH] uml: Turn literal numbers into symbolic constants
    
    So, there I was, looking at my own code, wondering what the magic setjmp
    return values did.  This patch turns the constants that are used to make
    requests of the initial thread into meaningful symbols.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37f02b63bdc55147a32cedf7831452efd5a72748
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:51 2005 -0700

    [PATCH] uml: Makefile cleanup
    
    This eliminates some stuff from arch/um/kernel/Makefile which refers to a
    file which has long since been deleted.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccfcd37cb694fc71ddf16fa7faa9e06811a26e5b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:50 2005 -0700

    [PATCH] uml: Eliminate unusable function
    
    Eliminate the non-inline version of switch_mm, which can't be used,
    considering the inline version in asm/mmu_context.h
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 804c2415c9182b95719cdf85913f6313f7ac042a
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:49 2005 -0700

    [PATCH] uml: S390 preparation, save an extra register
    
    s390 tt-mode needs to save not only syscall number, but an further register
    also.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82c1c11bdd92d94f8fd620a3ea6c894eba37d4ed
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:46 2005 -0700

    [PATCH] uml: S390 preparation, peekusr/pokeusr defined by subarch
    
    s390 needs to change some parts of arch/um/kernel/ptrace.c.  Thus, the code
    regarding PEEKUSER and POKEUSER are shifted to arch/um/sys-<subarch>/ptrace.c.
    
    Also s390 debug registers need to be updated, when singlestepping is switched
    on / off.  Thus, setting/resetting of singlestepping is centralized in the new
    function set_singlestep(), which also inserts the macro
    SUBARCH_SET_SINGLESTEP(mode), if defined.
    
    Finally, s390 has the "ieee_instruction_pointer" in its
    registers, which also is allowed to be read via
    
      ptrace( PTRACE_PEEKUSER, getpid(), PT_IEEE_IP, 0);
    
    To implement this feature, sys_ptrace inserts the macro
    SUBARCH_PTRACE_SPECIAL, if defined.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16c11163019879c0e1e69d3ec7d4574a80e9c77e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:45 2005 -0700

    [PATCH] uml: command line handling cleanup
    
    Command line handling cleanups - a couple of things made static and an
    unused declaration removed from header.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bef3e0a06c00bd44760361f84b08e30cd1bff0e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:44 2005 -0700

    [PATCH] uml: Remove include/asm-um/elf.h
    
    I accidentally included include/asm-um/elf.h as a real file in a previous
    patch.  This patch eliminates it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2a0f8b9301ca34034c4a2ec09a09ff4677e83dd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:43 2005 -0700

    [PATCH] uml: __deprecated makes build unnecessarily noisy
    
    Remove the __deprecated from verify_area_skas and verify_area_tt.  Since
    verify_area is itself marked __deprecated, and it is the only caller of
    these, then they don't need to be marked.  Marking them only makes the
    build noisier.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c184ca3681ee9ae0bb63cb591e1e16f42536415c
Author: Jiri Benc <jbenc@suse.cz>
Date:   Fri May 6 21:30:42 2005 -0700

    [PATCH] video/tuner: add VIDEO_G_FREQUENCY and freq range to VIDIOC_G_TUNER
    
    This patch adds a VIDIOC_G_FREQUENCY command to tuner-core.c and sets
    lowest and highest tunable frequencies in v4l2_tuner structure returned by
    VIDIOC_G_TUNER command.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e99d3438e4db1ef9e4cae5ad3946c76f4ffd268d
Author: Jiri Benc <jbenc@suse.cz>
Date:   Fri May 6 21:30:42 2005 -0700

    [PATCH] video/tuner: fix tuner->freq updating
    
    In VIDIOC_S_FREQUENCY command in tuner-core.c, t->freq is set to a new
    value before calling set_freq().  This is not necessary, as set_freq() sets
    t->freq itself.  Moreover, it causes problems with Philips tuners, as they
    need to take into consideration difference between previous and new
    frequency.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b272125273103458b9727df1868b81bae64f44cb
Author: Kumar Gala <galak@freescale.com>
Date:   Fri May 6 21:30:41 2005 -0700

    [PATCH] ppc32: Fix POWER3/POWER4 compiler error
    
    In separating out support for hardware floating point we missed the fact
    that both POWER3 and POWER4 have HW FP.  Enable CONFIG_PPC_FPU for POWER3
    and POWER4 fixes the issue.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7c2b704bd78aa3665fc24100bd2d4f5f8305d7a
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 17:41:03 2005 -0700

    [PATCH] ppc64: enable CONFIG_RTAS_PROC by default
    
    This patch enables CONFIG_RTAS_PROC by default on pSeries.  This will
    preserve /proc/ppc64/rtas/rmo_buffer, which is needed by librtas.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2411dd202e854d1f3be541135af8bb9872ea8b6
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri May 6 17:41:01 2005 -0700

    [PATCH] revert msdos partitioning fix
    
    This change from March 3rd causes the partition parsing code to ignore
    partitions which have a signature byte of zero.  Turns out that more people
    have such partitions than we expected, and their device numbering is coming up
    wrong in post-2.6.11 kernels.
    
    So revert the change while we think about the problem a bit more.
    
    Cc: Andries Brouwer <Andries.Brouwer@cwi.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cccf25087f1cb24344b2140ca319b4afe4cf79a8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat May 7 01:28:45 2005 +0200

    [PATCH] drivers/block/rd.c: rd_size shouldn't be static
    
    I somehow missed that there is external usage of rd_size on some
    architectures.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07342d623b8e1ac9501a36a0da55cbce1117aeaf
Merge: d4a1a73... e4862fe...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 16:46:40 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6.git

commit d4a1a7322c8c6b9899851f8358eb3842c67de6bc
Merge: 22490eb... f1690f3...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 15:41:11 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 22490eb80ceb4ac07ef36fff253904fb4adf57f2
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 15:39:23 2005 -0700

    Fix acpi_find_rsdp() - acpi_scan_rsdp takes length, not end
    
    Noticed by Jakub Jermar <jermar@itbs.cz>

commit e4862fedbc37a2c242824b100101f8e6e8488748
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri May 6 13:14:48 2005 -0500

    [SCSI] correct the sym2 period setting routines
    
    There's a slight bug in the routines in that if the period requires dt,
    then the routine will unconditionally set it.  DT may only be set if
    Wide is also set, so this turns back on the wide bit.
    
    For domain validation to work correctly, we need to observe the wide bit
    absolutely.
    
    Acked by: Matthew Wilcox <willy@debian.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 966dc11fcc48866a24d9b3fd16eeebb3f5e05931
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri May 6 05:25:00 2005 -0700

    [IA64] Fix stack placement when INIT hits in kernel mode.
    
    Without this patch, the stack is placed _below_ the current task
    structure, which is risky at best.
    
    Tony, I think this patch needs to go into 2.6.12, since it fixes a
    real bug.  Without it, INIT may case secondary errors, which would be
    most unpleasant.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b3214970abbe983cd89842ae24ea00e21bba79f6
Author: Jens Axboe <axboe@suse.de>
Date:   Fri May 6 08:37:44 2005 +0200

    [PATCH] fix alsa via82xx resume
    
    Trying software suspend on my workstation makes it crash on resume.  The
    problem is that via82xx marks the chip_init function as _devinit, but calls
    it on resume as well.
    
    Cc: <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c80a21cb1825e576ffff9df2302bf0fa1065ceb
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 16:28:56 2005 +1000

    [PATCH] ppc64: global interrupt queue cleanup
    
    Move the code to set global interrupt queue membership to xics.c,
    and remove no longer needed extern declarations.  Also call it on
    all cpus (even the boot cpu) to prepare for kexec.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: R Sharada <sharada@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3870398fafd4911bd84573b78be4b6b762f32b0
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri May 6 06:44:46 2005 -0700

    [XFS] Fix directory inodes ioctl compat code, minor code consistency cleanups
    
    SGI Modid: xfs-linux:xfs-kern:21810a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 68d1498c3a7e5223b587ad067111fbed12df52a1
Author: Russell Cattelan <cattelan@sgi.com>
Date:   Fri May 6 06:42:22 2005 -0700

    [XFS] Fix a bug in xfs_iomap for extent handling of write cases
    
    This may be the cause of several open PV's of incorrect
    delay flags being set and then tripping asserts.
    Do not return a delay alloc extent when the caller is asking to do a write.
    
    SGI Modid: xfs-linux:xfs-kern:189616a
    
    Signed-off-by: Russell Cattelan <cattelan@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit f1690f37a526d46aa4eb55e832346a531ba850dd
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri May 6 10:19:09 2005 +0100

    [PATCH] 8250_pci.c: add comment about enum sorting order
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2512809255d018744fe6c2f5e996c83769846c07
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:31:31 2005 +1000

    [PATCH] ppc64: remove explicit contig_page_data reference
    
    Trivial patch to remove our last direct reference to contig_page_data.
    This will make it just that much less hard to seperate NUMA and
    DISCONTIG.  Please forward on.  Against 2.6.12-rc1
    
    Signed-off-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b3447db2e02f01f94b4bcd8584caccdada6fa4a
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:25:55 2005 +1000

    [PATCH] ppc64: remove unused arch/ppc64/boot/start.c
    
    start.c is not referenced in the arch/ppc64/boot/Makefile
    
    compile tested with the defconfig.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af4d4b34106b6e520e6b13350831b170d8bca117
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:27:17 2005 +1000

    [PATCH] ppc64: remove asm/bootinfo.h include
    
    The defines in bootinfo.h are not used, so the include can be removed.
    According to Ben, birecs are not used on ppc64:
    
      on ppc64, we made the decision of enforcing the presence of an
      OF device-tree and either an OF-like client interface or a kexec
      like flattened tree.
      so if your bootloader want to say things to the kernel,
      it can do so by adding properties to the device-tree
    
    compile-tested with defconfig
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e2afc1ddd2a22b290bc334c0deffdd6dcdebc80
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 13:35:04 2005 +1000

    [PATCH] ppc64: fix reloc_offset comment
    
    The code in reloc_offset is actually subtracting the address in the link
    register from the address calculated by the linker.  Perhaps the
    extended mnemonic `sub' replaced an original `subf' and the comment just
    did not get updated.
    
            bl      1f
    1:      mflr    r3
            LOADADDR(r4,1b)
            sub     r3,r4,r3
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3892c5fa9455670466f9f5518b3b7ef12ef3ccd6
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 13:29:34 2005 +1000

    [PATCH] ppc64: fix prom.c compile warning
    
    The code in unflatten_device_tree knows that get_property is written to
    only return with lenp equal to 1 when also returning a valid pointer.
    The gcc 3.3.3 compiler is not able to prove this to itself, so it warns
    about a possible uninitialized pointer dereference:
    
     .../arch/ppc64/kernel/prom.c: In function `unflatten_device_tree':
     .../arch/ppc64/kernel/prom.c:828:
     warning: `p' might be used uninitialized in this function
    
    Unless it is desired to rework the interaction between the two
    functions, this will keep the existing behavior but quiet the compiler.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6741f3a7f9922391cd02b3ca1329e669497dc22f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Fri May 6 12:10:04 2005 +1000

    [PATCH] arch/ppc64: Replace custom MIN macro
    
    Replace a custom MIN() macro with the min() macro from kernel.h
    This patch removes 4 lines of redundant code.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6f0b0d016a254ff583fec26f2c9e21c1ae2fdf3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:22 2005 -0700

    [PATCH] drivers/scsi/sym53c416.c: fix a wrong check
    
    The Coverity checker found that this for loop was wrong.
    
    This patch changes it to what seems to be intended.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f59154c53fac0bfee52393247beadf0474770351
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:21 2005 -0700

    [PATCH] fs/udf/udftime.c: fix off by one error
    
    This patch fixes an off by one error found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 252795264df50a6c9eee604d29989854d5558139
Author: walter harms <wharms@bfs.de>
Date:   Thu May 5 16:16:20 2005 -0700

    [PATCH] documentation for strncpy()
    
    this clarifies the documentation on the behavier of strncpy().
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebe8b54134314cc31331f6e26f42276cd947d1df
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:19 2005 -0700

    [PATCH] correctly name the Shell sort
    
    As per http://www.nist.gov/dads/HTML/shellsort.html, this should be
    referred to as a Shell sort.  Shell-Metzner is a misnomer.
    
    Signed-off-by: Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d28c2bc8d192f606a4eb831978722107b20a9405
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:19 2005 -0700

    [PATCH] fix lib/sort regression test
    
    The regression test in lib/sort.c is currently worthless because the array
    that is generated for sorting will be all zeros.  This patch fixes things
    so that the array that is generated will contain unsorted integers (that
    are not all identical) as was probably intended.
    
    Signed-off-by Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cad359c68455d6870d053184bbb0ae208e207eef
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:18 2005 -0700

    [PATCH] fix NCR53C9x.c compile warning
    
    drivers/scsi/NCR53C9x.c: In function `esp_do_data':
    drivers/scsi/NCR53C9x.c:1838: warning: unused variable `flags'
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4713741955736210511a5959bf13e92f8598dacd
Author: Kianusch Sayah Karadji <kianusch@sk-tech.net>
Date:   Thu May 5 16:16:17 2005 -0700

    [PATCH] x86: geode support fixes
    
    - Changed Name/defines from "Geode GX" to "Geode GX1" for clarification
    
    - Dropped "-march=i586" in favor of "-march=i486"
    
    - Dopped X86_OOSTORE support for Geode GX1
    
    Signed-off-by: Kianusch Sayah Karadji <kianusch@sk-tech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02c30a84e6298b6b20a56f0896ac80b47839e134
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:16:16 2005 -0700

    [PATCH] update Ross Biro bouncing email address
    
    Ross moved.  Remove the bad email address so people will find the correct
    one in ./CREDITS.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 125947f2ab8c45417feaa4a8800e89529ca4612f
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:15 2005 -0700

    [PATCH] CodingStyle: trivial whitespace fixups
    
    When I do a "diff -Nur arch/i386 arch/x86_64" to see what is different between these two
    architectures, I see some differences due to whitespace issues only. The attached patch removes
    some of the noise by fixing up the following files:
    - arch/i386/boot/bootsect.S
    - arch/i386/boot/video.S
    - arch/x86_64/boot/bootsect.S
    
    Signed-off-by: Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 845d34318f8acb0d92d18ccc72ef6db4c7baeaea
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:14 2005 -0700

    [PATCH] Spelling cleanups in shrinker code
    
    Just a few small cleanups to make this coherent english.
    
    Signed-Off-By:  Martin Hicks <mort@wildopensource.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fba478b1719c39ea67f15c6158ff4993933e9d18
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:13 2005 -0700

    [PATCH] ixj* - compile warning cleanup
    
    compile warning cleanup - suggested by Adrian Bunk; remove unmaintained rcs
    char strings from source and handle the occurrences of their use, make sure
    kernel-userspace issues taken care of; break out into separate patch
    
    Signed-off-by: Stephen Biggs <yrgrknmxpzlk@gawab.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d67554895982f04d458e14c81b7b9843429719c
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:16:13 2005 -0700

    [PATCH] fix up a comment still refering to verify_area
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3677209239ed71d2654e73eecfab1dbec2af11a9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:16:12 2005 -0700

    [PATCH] comments on locking of task->comm
    
    Add some comments about task->comm, to explain what it is near its definition
    and provide some important pointers to its uses.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 291c4a75ce7632ee5c565359fb875ba0597f76be
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu May 5 16:16:11 2005 -0700

    [PATCH] reiserfs: use NULL instead of 0
    
    Use NULL instead of 0 for pointer (sparse warning):
    fs/reiserfs/namei.c:611:50: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a27e951f1e9362411eba81e724fafca20f1b0563
Author: maximilian attems <janitor@sternwelten.at>
Date:   Thu May 5 16:16:10 2005 -0700

    [PATCH] cyrix: eliminate bad section references
    
    Fix cyrix section references:
     convert __initdata to __devinitdata.
    
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 00000379
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 00000399
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003b3
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003b9
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003bf
    R_386_32          .init.data
    
    Signed-of-by: maximilian attems <janitor@sternwelten.at>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75c96f85845a6707b0f9916cb263cb3584f7d48f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:09 2005 -0700

    [PATCH] make some things static
    
    This patch makes some needlessly global identifiers static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Arjan van de Ven <arjanv@infradead.org>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e198d94dd0c3ec7f6138229e2e412c2c6268c38
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:09 2005 -0700

    [PATCH] device-mapper: Some missing statics
    
    This patch makes some needlessly global code static.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1daa40b638891a62e1be40f78d752c500265362
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:08 2005 -0700

    [PATCH] device-mapper dm-emc: Fix a memset
    
    The dm emc hardware handler code memset the hardware handler structure to zero
    AFTER it had initialized the structure's spinlock field.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Dave Olien <dmo@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c557308e1f4b6f7d6144a06e8f98c467814f3aed
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:07 2005 -0700

    [PATCH] device-mapper multipath: Use private workqueue
    
    dm-mpath.c needs to use a private workqueue (like other dm targets already do)
    to avoid interfering with users of the default workqueue.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b84b0287a8ba618568a8bc9ac8847ac332abe90d
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:06 2005 -0700

    [PATCH] device-mapper: tidy dm_suspend
    
    Tidy dm_suspend.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 354e007121de546e50b5592c2557575117435522
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:05 2005 -0700

    [PATCH] device-mapper: handle __lock_fs error
    
    Handle error from __lock_fs()
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfbe03f6d09fcebf85ae2a2cbb4ceee9b0985e67
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:04 2005 -0700

    [PATCH] device-mapper: let freeze_bdev return error
    
    Allow freeze_bdev() to return an error.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dcee8064bd36c547b45514dfd33df4c12695428
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:04 2005 -0700

    [PATCH] device-mapper: __unlock_fs void
    
    Make __unlock_fs() void.
    
    From: Christoph Hellwig <hch@lst.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1782a3b0a15d9ac497a8f47931c4536bfe8d18e
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:03 2005 -0700

    [PATCH] device-mapper: store bdev while frozen
    
    Store the struct block_device while device is frozen, saving us one call to
    bdget_disk().
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d17d7fa44dbe1f12031773e27eda9e939024a037
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:16:02 2005 -0700

    [PATCH] revert ext3-writepages-support-for-writeback-mode
    
    This had a fatal lock ranking bug: we do journal_start outside
    mpage_writepages()'s lock_page().
    
    Revert the whole thing, think again.
    
    Credit-to: Jan Kara <jack@suse.cz>
    
    For identifying the bug.
    
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecffdde68ebefa1aa24411a91b12ae649f71f71c
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu May 5 16:16:01 2005 -0700

    [PATCH] orinoco MAINTAINERS update
    
    Add mailing list addresses for Orinoco and update its homepage.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Cc: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc9d53af37deeb830252f03c62724078d943686c
Author: Manu Abraham <manu@kromtek.com>
Date:   Thu May 5 16:16:01 2005 -0700

    [PATCH] bttv: fix dst i2c read/write timeout failure.
    
    Attached is a patch to bttv which fixes the following problems.
    
    Affected cards and problems:
    ~~~~~~~~~~~~~~~~~~~~~~~~
    o VP-1020 (200103A) Tuning problems, device detection.
    o VP-1020 (DST-MOT) Errors during tuning, device detection fails in a while.
    o VP-1030 (DST-CI) Tuning sometimes fails after CI commands.
    o VP-2031 (DCT-CI) Tuning problems
    
    The timeout happens before the actual timeout occured in the MCU
    on the board, and hence the problems.
    
    Changes: (bttv-i2c.diff)
    ~~~~~~~~~~~~~~~~~~~~~~~~
    o Changed the custom wait queue to wait_event_interruptible_timeout()
          - Suggestion by Johannes Stezenbach.
    
    o Fixed the wait queue timeout problem
          - This fixes the timeout problem on various cards.
          - This problem was visible as many
              * Cannot tune to channels, when signal levels are very low.
              * app_info does not work in some conditions for CI based cards
          - Smaller values worked good for newer cards, but the older cards
    suffered, settled down to the worst case values that could happen in any
    eventuality.
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ef41634def0fcb0def3e3c90220c651ca478cb3
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:59 2005 -0700

    [PATCH] remove do_sync parameter from __invalidate_device
    
    The only caller that ever sets it can call fsync_bdev itself easily.  Also
    update some comments.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91bb52416854dfd581efe6e2a0aca8dc655f043e
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:59 2005 -0700

    [PATCH] remove outdated comments from filemap.c
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b76ffd5d9f12ba850fc988188f55056204ad4e2
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:58 2005 -0700

    [PATCH] DAC960: add support for Mylex AcceleRAID 4/5/600
    
    This patch adds support for a new class of DAC960 controllers.  It's based
    on the GPLed idac320 driver from IBM for Linux 2.4.18.  That driver is a
    fork of the 2.4.18 version of DAC960 that adds support for this new type of
    controllers (internally called "GEM Series"), that differ from other DAC960
    V2 firmware controllers only in the register offsets and removes support
    for all others.
    
    This patch instead integrates support for these controllers into the DAC960
    driver.
    
    Thanks to Anders Norrbring for pointing me to the idac320 driver and
    testing this patch.
    
    No Signed-Off: line because all code is either copy & pasted from IBM's
    idac320 driver or support for other controllers in the 2.6 DAC960 driver.
    
    Note: the really odd formating matches the rest of the DAC960 driver.
    
    Cc: Dave Olien <dmo@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c835a388968f5437491e3fe6e9b0332bc3c52e0e
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu May 5 16:15:57 2005 -0700

    [PATCH] pcmcia: yenta TI: align irq of func1 to func0 if INTRTIE is set
    
    Make sure that if the INTRTIE bit is set both functions of the cardbus
    bridge use the same IRQ before doing any probing...
    
    [ yes i hate the TI bridges for the fact that they are very flexible
      so that so many BIOS vendors get it wrong. ]
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c35e66a4216c99fe94868ed3f714bd2708d0032a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu May 5 16:15:56 2005 -0700

    [PATCH] pcmcia: enable 32-bit memory windows on pd6729
    
    Enable 32-bit memory windows on pd6729 PCI-PCMCIA bridges.
    
    Signed-off-by: Jarkko Raja <jar@pcuf.fi>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a4c9c93c2fb5d09259136531d3e8e70fdcd6027
Author: Frederic CAND <frederic.cand@anevia.com>
Date:   Thu May 5 16:15:52 2005 -0700

    [PATCH] saa6752hs: resolutions handling
    
    This patch handles the VIDIOC_S_FMT and VIDIOC_G_FMT ioctls for the
    saa6752hs.
    
    As only 4 preset video formats are supported (SIF, 1/2D1, 2/3D1, D1), we
    compute to which the asked resolution is the nearest and apply it.
    
    Signed-off-by: Frederic Cand <frederic.cand@anevia.com>
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac5f34c028a043405de087e43699195ab3974dbf
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Thu May 5 16:15:52 2005 -0700

    [PATCH] Update dontdiff
    
    Additions to the dontdiff list.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfc1e148542f6f4951fd59e32c14a7368356db9d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:15:51 2005 -0700

    [PATCH] remove BK documentation
    
    There's no longer a reason to document the obsolete BK usage.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d769a66970a947613f7c638c362f237583bd141b
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:50 2005 -0700

    [PATCH] uninline tty_paranoia_check()
    
    Has lots of callsites.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b0c4bed77041bf64e26b502cd2a767e355c3342
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:15:49 2005 -0700

    [PATCH] drivers/ide/pci/sis5513.c: section fixes
    
    These three functions are referenced from the __devinitdata
    sis5513_chipset.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7e4e85337060354f8b860cc38066725559313a4
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Thu May 5 16:15:49 2005 -0700

    [PATCH] setitimer timer expires too early
    
    It seems that the code responsible for this is in kernel/itimer.c:126:
    
    	p->signal->real_timer.expires = jiffies + interval;
    	add_timer(&p->signal->real_timer);
    
    If you request an interval of, lets say 900 usecs, the interval given by
    timeval_to_jiffies will be 1.
    
    If you request this when we are half-way between two timer ticks, the
    interval will only give 400 usecs.
    
    If we want to guarantee that we never ever give intervals less than
    requested, the simple solution would be to change that to:
    
    	p->signal->real_timer.expires = jiffies + interval + 1;
    
    This however will produce pathological cases, like having a idle system
    being requested 1 ms timeouts will give systematically 2 ms timeouts,
    whereas currently it simply gives a few usecs less than 1 ms.
    
    The complex (and more computationally expensive) solution would be to
    check the gettimeofday time, and compute the correct number of jiffies.
    This way, if we request a 300 usecs timer 200 usecs inside the timer
    tick, we can wait just one tick, but not if we are 800 usecs inside the
    tick. This would also mean that we would have to lock preemption during
    these computations to avoid races, etc.
    
    I've searched the archives but couldn't find this particular issue being
    discussed before.
    
    Attached is a patch to do the simple solution, in case anybody thinks
    that it should be used.
    
    Signed-Off-By: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0fbd5fc09b20f7ba7bc8c80be33e39925bb38e1
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:48 2005 -0700

    [PATCH] __block_write_full_page() simplification
    
    The `last_bh' logic probably isn't worth much.  In those situations where only
    the front part of the page is being written out we will save some looping but
    in the vastly more common case of an all-page writeout if just adds more code.
    
    Nick Piggin <nickpiggin@yahoo.com.au>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05937baae9fc27b64bcd4378da7d2b14edf7931c
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:47 2005 -0700

    [PATCH] __block_write_full_page speedup
    
    Remove all those get_bh()'s and put_bh()'s by extending lock_page() to cover
    the troublesome regions.
    
    (get_bh() and put_bh() happen every time whereas contention on a page's lock
    in there happens basically never).
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad576e63e0c8b274a8558b8e05a6d0526e804dc0
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu May 5 16:15:46 2005 -0700

    [PATCH] __block_write_full_page race fix
    
    When running
    	fsstress -v -d $DIR/tmp -n 1000 -p 1000 -l 2
    on an ext2 filesystem with 1024 byte block size, on SMP i386 with 4096 byte
    page size over loopback to an image file on a tmpfs filesystem, I would
    very quickly hit
    	BUG_ON(!buffer_async_write(bh));
    in fs/buffer.c:end_buffer_async_write
    
    It seems that more than one request would be submitted for a given bh
    at a time.
    
    What would happen is the following:
    2 threads doing __mpage_writepages on the same page.
    Thread 1 - lock the page first, and enter __block_write_full_page.
    Thread 1 - (eg.) mark_buffer_async_write on the first 2 buffers.
    Thread 1 - set page writeback, unlock page.
    Thread 2 - lock page, wait on page writeback
    Thread 1 - submit_bh on the first 2 buffers.
    => both requests complete, none of the page buffers are async_write,
       end_page_writeback is called.
    Thread 2 - wakes up. enters __block_write_full_page.
    Thread 2 - mark_buffer_async_write on (eg.) the last buffer
    Thread 1 - finds the last buffer has async_write set, submit_bh on that.
    Thread 2 - submit_bh on the last buffer.
    => oops.
    
    So change __block_write_full_page to explicitly keep track of the last bh
    we need to issue, so we don't touch anything after issuing the last
    request.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3ddbdc6267c32223035ea9bb8456a2d86f65ba1
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu May 5 16:15:45 2005 -0700

    [PATCH] fix race in __block_prepare_write
    
    Fix a race where __block_prepare_write can leak out an in-flight read
    against a bh if get_block returns an error.  This can lead to the page
    becoming unlocked while the buffer is locked and the read still in flight.
    __mpage_writepage BUGs on this condition.
    
    BUG sighted on a 2-way Itanium2 system with 16K PAGE_SIZE running
    
    	fsstress -v -d $DIR/tmp -n 1000 -p 1000 -l 2
    
    where $DIR is a new ext2 filesystem with 4K blocks that is quite
    small (causing get_block to fail often with -ENOSPC).
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c8fad1829cc33e903500b41d989fa50ab196378
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu May 5 16:15:44 2005 -0700

    [PATCH] 3c59x: only put the device into D3 when we're actually using WOL
    
    During a warm boot the device is in D3 and has troubles coming out of it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1922163c8dfe717c089bdcc18ade4a65350a09c8
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Thu May 5 16:15:43 2005 -0700

    [PATCH] patch-kernel: support non-incremental 2.6.x.y 'stable' patches
    
    Add better support for (non-incremental) 2.6.x.y patches; If an ending
    version number if not specified, the script automatically increments the
    SUBLEVEL (x in 2.6.x.y) until no more patch files are found; however,
    EXTRAVERSION (y in 2.6.x.y) is never automatically incremented but must be
    specified fully.
    
    patch-kernel does not normally support reverse patching, but does so when
    applying EXTRAVERSION (x.y) patches, so that moving from 2.6.11.y to
    2.6.11.z is easy and handled by the script (reverse 2.6.11.y and apply
    2.6.11.z).
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64f562c6df3cfc5d1b2b4bdbcb7951457df9c237
Author: Ananth N Mavinakayanahalli <amavin@redhat.com>
Date:   Thu May 5 16:15:42 2005 -0700

    [PATCH] kprobes: Allow multiple kprobes at the same address
    
    Allow registration of multiple kprobes at an address in an architecture
    agnostic way.  Corresponding handlers will be invoked in a sequence.  But,
    a kprobe and a jprobe can't (yet) co-exist at the same address.
    
    Signed-off-by: Ananth N Mavinakayanahalli <amavin@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04dea5f93231204cc3ca0ab793ce76dbb10c86ba
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu May 5 16:15:41 2005 -0700

    [PATCH] Kprobes: Oops! in unregister_kprobe()
    
    kernel oops!  when unregister_kprobe() is called on a non-registered
    kprobe.  This patch fixes the above problem by checking if the probe exists
    before unregistering.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b9e2cac8a56e197d0a9e06268db4c8652d23dd5
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu May 5 16:15:40 2005 -0700

    [PATCH] Kprobes: Incorrect handling of probes on ret/lret instruction
    
    Kprobes could not handle the insertion of a probe on the ret/lret
    instruction and used to oops after single stepping since kprobes was
    modifying eip/rip incorrectly.  Adjustment of eip/rip is not required after
    single stepping in case of ret/lret instruction, because eip/rip points to
    the correct location after execution of the ret/lret instruction.  This
    patch fixes the above problem.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a0a64e6c917b2ccc311cf978cc9d7eef7b31c47
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:40 2005 -0700

    [PATCH] uml: header and code cleanup
    
    Remove some definitions and declarations from arch/um/include/skas_ptrace.h,
    as they have moved to arch/um/include/sysdep/skas_ptrace.h
    
    Also, remove PTRACE_SIGPENDING support in UML at all.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c5131a501e9e8549f74d807c37fde76008ef95a
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:39 2005 -0700

    [PATCH] uml: remove a dangling symlink
    
    UML: remove no longer needed arch-signal.h
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51a6b0c59a6170fc6a40221ef9b261b82856d315
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:38 2005 -0700

    [PATCH] uml: s390 preparation, sighandler interface abstraction
    
    s390 passes parameters in registers.  So the only safe way to find out the
    address of signal context, error-address and error-type (trap_no), which are
    passed to signal handlers as parameters, is to declare these parameters.
    
    So I inserted an subarch-specific macro which holds the declaration of
    parameters for signal handlers.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fd861b682785f650114f4df53060d1be7fedecd
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:37 2005 -0700

    [PATCH] uml: s390 preparation, delay moved to arch
    
    s390 has fast read access to realtime clock (nanosecond resolution).  So it
    makes sense to have an arch-specific implementation not only of __delay, but
    __udelay also.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d37c6d52fce13008f20344790a81a6a5a0003b3
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:36 2005 -0700

    [PATCH] uml: s390 preparation, checksumming done in arch code
    
    Checksum handling largely depends on the subarch.
    
    Thus, I renamed i386 arch_csum_partial in arch/um/sys-i386/checksum.S back to
    csum_partial, removed csum_partial from arch/um/kernel/checksum.c and shifted
    EXPORT_SYMBOL(csum_partial) to arch/um/sys-i386/ksyms.c.
    
    Then, csum_partial_copy_to and csum_partial_copy_from were shifted from
    arch/um/kernel/checksum.c to arch/um/include/sysdep-i386/checksum.h and
    inserted in the calling functions csum_partial_copy_from_user() and
    csum_and_copy_to_user().
    
    Now, arch/um/kernel/checksum.c is empty and removed.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c52ac046757deebc514483e407dca39a9c774aa3
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:36 2005 -0700

    [PATCH] uml: s390 preparation, linkage.h inherited from host
    
    This patch replaces the contents of include/asm-um/linkage.h
    by
        #include "asm/arch/linkage.h"
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbc35cc73f2edd6e39d7e814dbb6eddad6294665
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:35 2005 -0700

    [PATCH] uml: s390 preparation, elf.h
    
    This patch make elh.h a symlink to the new arch-specific include files of the
    form elf-<subarch>.h, as in the same way already is done for some other
    includes.  Also moves Elf-stuff from archparam-<subarch>.h and elf.h to the
    new elf-<subarch>.h files.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51a141104a37369be2822f423ed4444aa34d26a2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:34 2005 -0700

    [PATCH] uml: hostfs failed mount handling
    
    This cleans up the error handling and fixes a crash if a hostfs mount fails.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0b8d32020681535700e7bd4dac29ecf25d944ae
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:33 2005 -0700

    [PATCH] uml: inclusion cleanup
    
    The completion cleanup got rid of some semaphores, but didn't remove the
    inclusion of asm/semaphore.h from xterm_kern.c.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ba491759fd74bfadf656c55a3695e98b6074439
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:33 2005 -0700

    [PATCH] uml: tidy Makefile.rules
    
    Just some breaking of some overly-long lines.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd2ee4a30cc0775d8b54e5b958613361a7cacfec
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:32 2005 -0700

    [PATCH] uml: Fix SIGWINCH relaying
    
    This makes SIGWINCH work again, and fixes a couple of SIGWINCH-associated
    crashes.  First, the sigio thread disables SIGWINCH because all hell breaks
    loose if it ever gets one and tries to call the signal handling code.  Second,
    there was a problem with deferencing tty structs after they were freed.  The
    SIGWINCH support for a tty wasn't being turned off or freed after the tty went
    away.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c578455a3eccf4dd7bd111e77129c301d6d67914
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:31 2005 -0700

    [PATCH] uml: S390 preparation, abstract host page fault data
    
    This patch removes the arch-specific fault/trap-infos from thread and
    skas-regs.
    
    It adds a new struct faultinfo, that is arch-specific defined in
    sysdep/faultinfo.h.
    
    The structure is inserted in thread.arch and thread.regs.skas and
    thread.regs.tt
    
    Now, segv and other trap-handlers can copy the contents from regs.X.faultinfo
    to thread.arch.faultinfo with one simple assignment.
    
    Also, the number of macros necessary is reduced to
    
    FAULT_ADDRESS(struct faultinfo)
        extracts the faulting address from faultinfo
    
    FAULT_WRITE(struct faultinfo)
        extracts the "is_write" flag
    
    SEGV_IS_FIXABLE(struct faultinfo)
        is true for the fixable segvs, i.e. (TRAP == 14)
        on i386
    
    UPT_FAULTINFO(regs)
        result is (struct faultinfo *) to the faultinfo
        in regs->skas.faultinfo
    
    GET_FAULTINFO_FROM_SC(struct faultinfo, struct sigcontext *)
        copies the relevant parts of the sigcontext to
        struct faultinfo.
    
    On SIGSEGV, call user_signal() instead of handle_segv(), if the architecture
    provides the information needed in PTRACE_FAULTINFO, or if PTRACE_FAULTINFO is
    missing, because segv-stub will provide the info.
    
    The benefit of the change is, that in case of a non-fixable SIGSEGV, we can
    give user processes a SIGSEGV, instead of possibly looping on pagefault
    handling.
    
    Since handle_segv() sikked arch_fixup() implicitly by passing ip==0 to segv(),
    I changed segv() to call arch_fixup() only, if !is_user.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea66e8a3b6c4760e8fbf59b1becb6bd8e3dd5376
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:30 2005 -0700

    [PATCH] uml: fix a ptrace call
    
    This fixes write_ldt_entry to treat userspace_pid as an array.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd7aab9c1a4705ed45fe01a7ff108ce9823b0830
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:29 2005 -0700

    [PATCH] uml: finish cross-build support
    
    O=... builds support.  Very easy, actually.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04fe392378c818fb60bd817495ecb266d2cebe68
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:28 2005 -0700

    [PATCH] uml: fix missing subdir in x86_64
    
    make distclean et.al.  are missing arch/um/sys-x86_64/utils; fixed the same
    way we have it done for sys-i386 counterpart.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da998a2aecd3f15eca5385e1122610890039c4df
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:27 2005 -0700

    [PATCH] uml: cross-build support : mk_task and mk_constants
    
    helpers in arch/um/util (mk_task and mk_constants) converted.  That's it -
    none of the helpers depends on build and target being the same architecture
    anymore.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b8b611e9a4725ae558af4fa48cf7d9e2193e7ed
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:26 2005 -0700

    [PATCH] uml: cross-build support : mk_thread
    
    mk_thread converted
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a31769ed3ee82198fd530cb1d79ee9c7f8eeb1d1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:25 2005 -0700

    [PATCH] uml: cross-build support : kernel_offsets
    
    The next group of helpers is a bit trickier - they want the constants similar
    to those in user-offsets.h, but we need target sc.h for it.  So we can't put
    that into user-offsets (sc.h depends on it) and need the second generated
    header for that stuff (kernel-offsets.h.  BFD...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bae32d395b532959703462c21248fbeb9894e95
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:25 2005 -0700

    [PATCH] uml: cross-build support: mk_sc
    
    Ditto for mk_sc
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cd3bc1c810c83fb8955035675165a644e0c9a84
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:24 2005 -0700

    [PATCH] uml: cross-build support : mk_ptregs
    
    mk_ptregs converted.  Nothing new here, it's the same situation as with
    mk_user_constants.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d0b9dc9be3919e9979eac59fd12e8f82b098325
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:23 2005 -0700

    [PATCH] uml: start cross-build support : mk_user_constants
    
    Beginning of cross-build fixes.  Instead of expecting that mk_user_constants
    (compiled and executed on the build box) will see the sizeof, etc.  for target
    box, we do what every architecture already does for asm-offsets.  Namely, have
    user-offsets.c compiled *for* *target* into user-offsets.s and sed it into the
    header with relevant constants.  We don't need to reinvent any wheels - all
    tools are already there.
    
    This patch deals with mk_user_constants.  It doesn't assume any relationship
    between target and build environment anymore - we pick all defines we need
    from user-offsets.h.  Later patches will deal with the rest of mk_...  helpers
    in the same way.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcddd72e3e2565f8b838ae71a3e716a67f616160
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:22 2005 -0700

    [PATCH] uml: use variables rather than symlinks in dependencies
    
    Use explicit os-...  in make dependencies instead of playing with symlinks
    (symlink in question is still created - it's needed for other things; however,
    there's no reason to complicate ordering here).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03f81dc50caf6360aa5343264fed8868e22d9058
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 5 16:15:19 2005 -0700

    [PATCH] uml: include the linker script rather than symlink it
    
    Make vmlinux.lds.S include appopriate script instead of playing games with
    symlinks.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 776cfebb430c7b22c208b1b17add97f354d97cab
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:18 2005 -0700

    [PATCH] uml kbuild: avoid useless rebuilds
    
    - Fix some problems with usage of $(targets) (sometimes missing, sometimes
      used badly) that trigger partial rebuilds when doing a rebuild.
    
    - At that purpose, also factor out some common code for symlinks creation.
    
    - Fix a x86-64 build warning, caused by -L/usr/lib, which is anyway useless,
      and invalid in the x86-64 case.
    
    Tested on x86_64 and x86.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c28130b5c9e8f0b153436d3dae39482e5a70af1
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:17 2005 -0700

    [PATCH] x86_64: make string func definition work as intended
    
    In include/asm-x86_64/string.h there are such comments:
    
    /* Use C out of line version for memcmp */
    #define memcmp __builtin_memcmp
    int memcmp(const void * cs,const void * ct,size_t count);
    
    This would mean that if the compiler does not decide to use __builtin_memcmp,
    it emits a call to memcmp to be satisfied by the C out-of-line version in
    lib/string.c.  What happens is that after preprocessing, in lib/string.i you
    may find the definition of "__builtin_strcmp".
    
    Actually, by accident, in the object you will find the definition of strcmp
    and such (maybe a trick intended to redirect calls to __builtin_memcmp to the
    default memcmp when the definition is not expanded); however, this particular
    case is not a documented feature as far as I can see.
    
    Also, the EXPORT_SYMBOL does not work, so it's duplicated in the arch.
    
    I simply added some #undef to lib/string.c and removed the (now duplicated)
    exports in x86-64 and UML/x86_64 subarchs (the second ones are introduced by
    another patch I just posted for -mm).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23352fc252495fdc072b3bd29f57c4c6b7a6bd83
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:16 2005 -0700

    [PATCH] uml: kludgy compilation fixes for x86-64 subarch modules support
    
    These are some trivial fixes for the x86-64 subarch module support.  The only
    potential problem is that I have to modify arch/x86_64/kernel/module.c, to
    avoid copying the whole of it.
    
    I can't use it verbatim because it depends on a special vmalloc-like area for
    modules, which for now (maybe that's to fix, I guess not) UML/x86-64 has not.
    I went the easy way and reused the i386 vmalloc()-based allocator.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7fe8781749bf2de2ca03147a1691244a7d93ec7
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:15 2005 -0700

    [PATCH] uml: obvious compile fixes for x86-64 Subarch and x86 regression fixes
    
    This patch does some totally trivial compilation fixes.  It also restores the
    debugregs manipulation, which was commented out simply because it doesn't
    compile on x86_64 (we haven't yet implemented there debugregs handling).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f8d419e291f7f7f7f3ffd4f0ba00834621690c8
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Thu May 5 16:15:13 2005 -0700

    [PATCH] ppc64: pgtable.h and other header cleanups
    
    This patch started as simply removing a few never-used macros from
    asm-ppc64/pgtable.h, then kind of grew.  It now makes a bunch of
    cleanups to the ppc64 low-level header files (with corresponding
    changes to .c files where necessary) such as:
    	- Abolishing never-used macros
    	- Eliminating multiple #defines with the same purpose
    	- Removing pointless macros (cases where just expanding the
    macro everywhere turns out clearer and more sensible)
    	- Removing some cases where macros which could be defined in
    terms of each other weren't
    	- Moving imalloc() related definitions from pgtable.h to their
    own header file (imalloc.h)
    	- Re-arranging headers to group things more logically
    	- Moving all VSID allocation related things to mmu.h, instead
    of being split between mmu.h and mmu_context.h
    	- Removing some reserved space for flags from the PMD - we're
    not using it.
    	- Fix some bugs which broke compile with STRICT_MM_TYPECHECKS.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e685752de107201432a055f7c45c396a5b04dc17
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:15:12 2005 -0700

    [PATCH] ppc64: add missing Kconfig help text
    
    There's no help text for CONFIG_DEBUG_STACKOVERFLOW - add one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d12e522ba13ce718b7ec32b75803dece8adb072
Author: Anton Blanchard <anton@samba.org>
Date:   Thu May 5 16:15:11 2005 -0700

    [PATCH] ppc64: remove hidden -fno-omit-frame-pointer for schedule.c
    
    While looking at code generated by gcc4.0 I noticed some functions still
    had frame pointers, even after we stopped ppc64 from defining
    CONFIG_FRAME_POINTER.  It turns out kernel/Makefile hardwires
    -fno-omit-frame-pointer on when compiling schedule.c.
    
    Create CONFIG_SCHED_NO_NO_OMIT_FRAME_POINTER and define it on architectures
    that dont require frame pointers in sched.c code.
    
    (akpm: blame me for the name)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 696c2b9f97c2439e9fb299650041ec750df46865
Author: Kumar Gala <galak@freescale.com>
Date:   Thu May 5 16:15:10 2005 -0700

    [PATCH] ppc32: Simplified PPC core revision report
    
    We can identify new Freescale PPC cores by the fact that the MSB of the PVR
    is set.  If we are a new Freescale core the decode of major/minor revision
    numbers is simplified so we dont have to add new case checks for a every
    new Freescale core.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 075d6eb16d273dab7b7b4b83fcee8bce4ee387ed
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 5 16:15:09 2005 -0700

    [PATCH] ppc32: platform-specific functions missing from kallsyms.
    
    The PPC32 kernel puts platform-specific functions into separate sections so
    that unneeded parts of it can be freed when we've booted and actually
    worked out what we're running on today.
    
    This makes kallsyms ignore those functions, because they're not between
    _[se]text or _[se]inittext.  Rather than teaching kallsyms about the
    various pmac/chrp/etc sections, this patch adds '_[se]extratext' markers
    for kallsyms.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit becf3aec2608d6807a58d0677661cb23c388d67f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 5 16:15:08 2005 -0700

    [PATCH] Add CXT48 to modem black list in ac97
    
    The following patch works around the misdetection of the CXT48 codec as a
    modem by the OSS ac97 driver.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60d300c02fe2e0be9bb02904361e41e0307264b2
Author: Stuart Brady <sdbrady@ntlworld.com>
Date:   Thu May 5 16:15:07 2005 -0700

    [PATCH] include/linux/soundcard.h: endianness fix
    
    Fixes for big-endian systems in soundcard.h and awe_voice.h
    
    This patch fixes the AFMT_S16_NE (include/linux/soundcard.h) and AWE_PATCH
    (awe_voice.h) macros on big-endian systems.
    
    It also moves _PATCHKEY into a new file, patchkey.h, in order to remove a
    duplicate definition of it from awe_voice.h.
    
    Signed-off-by: Stuart Brady <sdbrady@ntlworld.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42d77c70177b2f7535766bce938d965fd863f0fd
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:06 2005 -0700

    [PATCH] interwave needs isa pnp
    
    Fix bug #4509
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3437c5df6f9c00b6a9b7dcb7a30c5e3e1e5de189
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Thu May 5 16:15:05 2005 -0700

    [PATCH] intel8x0: fix for Intel AC'97 audio driver
    
    This patch fixes a typo in the Intel AC'97 audio driver intel8x0.c for
    Intel ESB2.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: <tiwai@suse.de>
    Cc: <perex@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e422fd2c965ad1b0e4eadaabd0adb77e8a93e74e
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Thu May 5 16:15:04 2005 -0700

    [PATCH] avoid -ENOMEM due reclaimable slab caches
    
    This makes sure that reclaimable buffer headers and reclaimable inodes
    are accounted properly during the overcommit checks.
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f48d9663f19afb88ac0e45b825da523180f1f9c0
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu May 5 16:15:03 2005 -0700

    [PATCH] x86 stack initialisation fix
    
    The recent change fix-crash-in-entrys-restore_all.patch
    
     	childregs->esp = esp;
    
     	p->thread.esp = (unsigned long) childregs;
    -	p->thread.esp0 = (unsigned long) (childregs+1);
    +	p->thread.esp0 = (unsigned long) (childregs+1) - 8;
    
     	p->thread.eip = (unsigned long) ret_from_fork;
    
    introduces an inconsistency between esp and esp0 before the task is run the
    first time.  esp0 is no longer the actual start of the stack, but 8 bytes
    off.
    
    This shows itself clearly in a scenario when a ptracer that is set to also
    ptrace eventual children traces program1 which then clones thread1.  Now
    the ptracer wants to modify the registers of thread1.  The x86 ptrace
    implementation bases it's knowledge about saved user-space registers upon
    p->thread.esp0.  But this will be a few bytes off causing certain writes to
    the kernel stack to overwrite a saved kernel function address making the
    kernel when actually running thread1 jump out into user-space.  Very
    spectacular.
    
    The testcase I've used is:
    /* start with strace -f ./a.out */
    #include <pthread.h>
    #include <stdio.h>
    
    void *do_thread(void *p)
    {
    	for (;;);
    }
    
    int main()
    {
    	pthread_t one;
    	pthread_create(&one, NULL, &do_thread, NULL);
    	for (;;);
    	return 0;
    }
    
    So, my solution is to instead of just adjusting esp0 that creates an
    inconsitent state I adjust where the user-space registers are saved with -8
    bytes.  This gives us the wanted extra bytes on the start of the stack and
    esp0 is now correct.  This solves the issues I saw from the original
    testcase from Mateusz Berezecki and has survived testing here.  I think
    this should go into -mm a round or two first however as there might be some
    cruft around depending on pt_regs lying on the start of the stack.  That
    however would have broken with the first change too!
    
    It's actually a 2-line diff but I had to move the comment of why the -8 bytes
    are there a few lines up. Thanks to Zwane for helping me with this.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47c297529bd23d93d2a088d9620bb220763e9cb1
Merge: fd4e5f2... 7cc1712...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:23:24 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit fd4e5f29f7354c3e3edaa03d37a7bf83b0cbae36
Merge: 4adb181... b6d31e8...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:22:23 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 4adb18173aba217a7ce7f261427914d1350c4e18
Merge: 3b9fa09... 41e46d6...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:06:47 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 41e46d6ab0ca1908bff4e77ad9eeb6bf7afeb5c0
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 5 23:24:45 2005 +0100

    [PATCH] ARM: 2665/1: kill warnings in entry-armv.S
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 4b0e07a5566a4e3f141e52c1f17e683e4a5bba91
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 5 23:24:45 2005 +0100

    [PATCH] ARM: 2663/1: straightify TLS register emulation a bit more
    
    Patch from Nicolas Pitre
    
    This better express things, and should cover RMK's weird SMP toys.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 3b9fa0931dd86a1fe5507311ee8031650f5d0e8c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu May 5 15:09:46 2005 -0700

    [PATCH] Kconfig i18n support
    
    This patch adds i18n support for make *config, allowing users to have the
    config process in their own language.
    
    No printk was harmed in the process, don't worry, so all the bug reports,
    kernel messages, etc, remain in english, just the user tools to configure
    the kernel are internationalized.
    
    Users not interested in translations can just unset the related LANG,
    LC_ALL, etc env variables and have the config process in plain english,
    something like:
    
    LANG= make menuconfig
    
    is enough for having the whole config process in english. Or just don't
    install any translation file.
    
    Translations for brazilian portuguese are being done by a team of
    volunteers at:
    
    http://www.visionflex.inf.br/kernel_ptbr/pmwiki.php/Principal/Traducoes
    
    To start the translation process:
    
      make update-po-config
    
      This will generate the pot template named scripts/kconfig/linux.pot,
      copy it to, say, ~/es.po, to start the translation for spanish.
    
    To test your translation, as root issue this command:
    
      msgfmt -o /usr/share/locale/es/LC_MESSAGES/linux.mo ~/es.po
    
      Replace "es" with your language code.
    
      Then execute, for instance:
    
      make menuconfig
    
    The current patch doesn't use any optimization to reduce the size of the
    generated .mo file, it is possible to use the config option as a key, but
    this doesn't prevent the current patch from being used or the translations
    done under the current scheme to be in any way lost if we chose to do any
    kind of keying.
    
    Thanks to Fabricio Vaccari for starting the pt_BR (brazilian portuguese)
    translation effort, Thiago Maciera for helping me with the gconf.cc (QT
    frontent) i18n coding and to all the volunteers that are already working on
    the first translation, to pt_BR.
    
    I left the question on whether to ship the translations with the stock kernel
    sources to be discussed here, please share your suggestions.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 7cc1712b8a778c8077048969848857895d242009
Author: Coywolf Qi Hunt <coywolf@lovecn.org>
Date:   Thu May 5 14:53:01 2005 -0700

    [SPARC]: Remove legacy stuff from cpu_idle().
    
    Currently sparc and sparc64's UP cpu_idle() checks current pid. This
    is old time legacy. Now it's paranoia.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6d31e80f0d6a722bf85b3a7090df473fc545980
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 5 14:46:21 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6de8ad1fae8385eca4bf288e7a6ea2664ce0458
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu May 5 14:42:41 2005 -0700

    [TG3]: Ignore tg3_stop_block() errors.
    
    tg3_stop_block() errors can be safely ignored since tg3_chip_reset()
    always follows tg3_stop_block() calls.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3b7d6be54f919556148946adb4ece91820ad210
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 5 14:40:20 2005 -0700

    [TG3]: Elide tg3_stop_block messages when such events are normal.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 60d530655334369b62f260296a5ed1646a9529f0
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu May 5 14:30:15 2005 -0700

    [IPV4]: multipath_wrandom.c GPF fixes
    
    multipath_wrandom needs to use GFP_ATOMIC.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8edf72ebce06d52e855438ec18fe20dea7a4cc04
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 14:27:56 2005 -0700

    [SPARC64]: Kill useless __pte_alloc_one_kernel indirection
    
    warning: untested, but it there's not too much chance for screwups
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ef4e9a8db6c65de7c7f4bc013d62b0d73f50dce
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 14:25:59 2005 -0700

    [ATALK]: Add alloc_ltalkdev().
    
    this matches the API used by other link layer like ethernet or token
    ring.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 949bf797595fc99d4cadf9a294fe6fd32a4474e6
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun May 1 18:58:15 2005 -0500

    [SCSI] fix command retries in spi_transport class
    
    The premise is that domain validation is likely to trigger errors which
    it wants to know about, so the only time it should be retrying them is
    when it gets a unit attention (likely as the result of a previous bus or
    device reset).  Ironically, the previous coding retried three times in
    all cases except those of unit attention.  The attached fixes this to do
    the right thing.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 476e19cfa131e2b6eedc4017b627cdc4ca419ffb
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu May 5 13:35:15 2005 -0700

    [IPV6]: Fix OOPS when using IPV6_ADDRFORM
    
    This causes sk->sk_prot to change, which makes the socket
    release free the sock into the wrong SLAB cache.  Fix this
    by introducing sk_prot_creator so that we always remember
    where the sock came from.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f403b7f452e4347f6af14c1f3c47bce758eb6337
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:40 2005 -0700

    [XFS] Cleanup use of loff_t vs xfs_off_t in the core code.
    
    SGI Modid: xfs-linux:xfs-kern:22378a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 24e17b5fb99d4d1b47fe0847a3a801e36d431ff6
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:20 2005 -0700

    [XFS] Use the right offset when ensuring a delayed allocate conversion has covered the offset originally requested.  Can cause data corruption when multiple processes are performing writeout on different areas of the same file.  Quite difficult to hit though.
    
    SGI Modid: xfs-linux:xfs-kern:22377a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 775bf6c99a4ebde13bdb8dfa528ed241483b49ef
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:01 2005 -0700

    [XFS] Do not do delalloc conversion on pages beyond EOF ever, not just sometimes
    
    SGI Modid: xfs-linux:xfs-kern:22376a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 18e0a926ad7c5ab4ef05334230671c6975dac26b
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:32:18 2005 -0700

    [XFS] remove noisy printk at vnode trace allocation
    
    SGI Modid: xfs-linux:xfs-kern:191625a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 3ba0815a4b0709ef5e7b481067573d10806bbe2c
Author: Daniel Moore <dxm@sgi.com>
Date:   Thu May 5 13:31:34 2005 -0700

    [XFS] stop background sync from waiting for in-use inodes
    
    SGI Modid: xfs-linux:xfs-kern:191586a
    
    Signed-off-by: Daniel Moore <dxm@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 3f243766660da3df4a75ea1892c310d6080646c8
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:30:34 2005 -0700

    [XFS] Disable the combination of XFS direct IO and AIO until the IO completion
    handling for unwritten extents can be moved out of interrupt context.
    
    SGI Modid: xfs-linux:xfs-kern:22343a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit abd0cf7aeaaf8a15d9777e65606b6076868b6186
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:30:13 2005 -0700

    [XFS] Resolve an issue with xfsbufd not getting along with swsusp.
    
    SGI Modid: xfs-linux:xfs-kern:22342a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 764433b7f1cf5d7b5e27ceb4f5546042e1f4acc7
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:29:17 2005 -0700

    [XFS] Fix up warnings
    
    SGI Modid: xfs-linux:xfs-kern:191411a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 1f443ad70d3afa6bc74019ade2d664eadd7d505a
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:28:29 2005 -0700

    [XFS] Allow initial XFS delayed allocation size to be increased beyond 64KB.
    
    SGI Modid: xfs-linux:xfs-kern:22261a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 5fcbab355e1528545671a5221666ef640b8250c8
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Thu May 5 13:27:19 2005 -0700

    [XFS] Add ATTR_NOLOCK for xfs_setattr to indicate that XFS_IOLOCK is held
    
    SGI Modid: xfs-linux:xfs-kern:190711a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 9effd8e62570c6e47b91734770e6122002c33ed5
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:26:18 2005 -0700

    [XFS] Enable XFS_VNODE_TRACE
    
    SGI Modid: xfs-linux:xfs-kern:190725a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 31b084aef3f088962f56c100b31bb8479c5dd769
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:25:00 2005 -0700

    [XFS] Fix up uses of nlink_t incorrectly restricting us to 2^16 links for some platforms
    
    SGI Modid: xfs-linux:xfs-kern:22032a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit de20614b351e4d4d23af0a105baa8fd2d7cd4f26
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:24:13 2005 -0700

    [XFS] Block mount attempts for filesystems with version 1 directories.
    
    SGI Modid: xfs-linux:xfs-kern:21937a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 71bce256bf2e2aaddf54a2f4ac216329c74be3ad
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:23:27 2005 -0700

    [XFS] Move the XFS inode to the front of its hash list on a cache hit
    
    SGI Modid: xfs-linux:xfs-kern:21915a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 25ae3f59b10dbd5e2b9b192ecc90ea935cc23e68
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Thu May 5 13:13:29 2005 -0700

    [DECNET]: Fix build after C99 netlink initializer change.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7e68bbf405a45d6e7c5b8fc384ff1ba20dd7aa4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 14:49:01 2005 +0100

    [PATCH] ARM: select PCI, ISA and ISA_DMA
    
    Rather than using a long "depends on..." and "default y" lines for
    these options, use select instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 53d7ad1ea3acb4a626edec179aa52e72ea216647
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 14:06:31 2005 +0100

    ARM: Add missed imxfb include file
    
    This file got missed in the commit of patch 2661/1 thanks to a buggy
    script.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bfd4bda097f8758d28e632ff2035e25577f6b060
Merge: 488f2ea... b2d84f0...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 5 13:59:37 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4f7a18124c1a44858fb74a1c4234015009952959
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 13:11:00 2005 +0100

    [PATCH] ARM: Fix kernel stack offset calculations
    
    Various places in the ARM kernel implicitly assumed that kernel
    stacks are always 8K due to hard coded constants.  Replace these
    constants with definitions.
    
    Correct the allowable range of kernel stack pointer values within
    the allocation.  Arrange for the entire kernel stack to be zeroed,
    not just the upper 4K if CONFIG_DEBUG_STACK_USAGE is set.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2d84f078a8be40f5ae3b4d2ac001e2a7f45fe4f
Author: Roman Kagan <rkagan@mail.ru>
Date:   Wed Apr 13 21:40:17 2005 +0400

    [PATCH] drivers/base/bus.c: fix iteration in driver_detach()
    
    With 2.6.11 and 2.6.12-rc2 (and perhaps a few versions before) usb
    drivers for multi-interface devices, which do
    usb_driver_release_interface() in their disconnect(), make rmmod hang.
    
    It turns out to be due to a bug in drivers/base/bus.c:driver_detach(),
    that iterates over the list of attached devices with
    list_for_each_safe() under an assumption that device_release_driver()
    only releases the current device, while it may also call
    device_release_driver() for other devices on the same list.
    
    The following patch fixes it.  Please consider applying.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 177a4324944478f2799ce4ede2797cb0f602f274
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Sat Feb 26 13:38:51 2005 +0100

    [PATCH] Hotplug: Make dev->bus checking consistent
    
    Earlier in the same function dev->bus is checked before dereferenced,
    make consistent although I honestly don't know if dev->bus could
    ever be NULL
    
    Found by the Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 897f5ab2cd733a77a2279268262919caa8154b9d
Merge: 1d42a0e... b48fc7b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 19:52:45 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit 1d42a0ecf478962e8aede355a0be41365c117ff0
Merge: 836eeed... 6b6bf51...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 14:23:14 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6.git/

commit b48fc7bb3868abffc89ce70d4baf324574338d8e
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:05:00 2005 -0700

    [IA64-SGI] convert some sn SAL_CALLs to ia64_sal_oemcall calls
    
    Convert some sn SAL_CALLs to ia64_sal_oemcall calls so that they can be
    called by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9b48b46678989b67cd00658ea88964163eaab616
Author: Dean Nelson <dcn@sgi.com>
Date:   Tue Mar 22 16:00:00 2005 -0700

    [IA64-SGI] move nodepda pointer out of pda
    
    Remove the p_nodepda and p_subnodepda pointers from the pda_s structure.
    And then define a new per-cpu pointer to the nodepda and export it so
    that it can be accessed by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 836eeed6cea8ca8138e9deff7571857923541604
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Wed May 4 08:07:16 2005 +0300

    [PATCH] i810fb: fix __initdata access
    
    [hv]sync[12] are __initdata, causing mplayer to oops with the previous i810fb fix.
    
    My fault, this fixes it. Sorry.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b75d8ba5ea96e174dc2674e01d87ce0d382ee44
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:22 2005 +0100

    [PATCH] ipmi iomem annotations and fixes
    
    annotated, a bunch of direct dereferencing replaced with readb().
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1ecb4c3a9e33cc8b93ac9cb046b535b72a15f68
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:12 2005 +0100

    [PATCH] asm/signal.h unification
    
    New file - asm-generic/signal.h.  Contains declarations of
    __sighandler_t, __sigrestore_t, SIG_DFL, SIG_IGN, SIG_ERR and default
    definitions of SIG_BLOCK, SIG_UNBLOCK and SIG_SETMASK.
    
    asm-*/signal.h switched to including it.  The only exception is
    asm-parisc/signal.h that wants its own declaration of __sighandler_t;
    that one is left as-is.
    
    asm-ppc64/signal.h required one more thing - unlike everybody else it
    used __sigrestorer_t instead of usual __sigrestore_t.  PPC64 switched to
    common spelling.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0555985d046348b39e44ff1da2719d73409d7981
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:02 2005 +0100

    [PATCH] sonypi trivial user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56c3b7d788c21eecf5641020fcf8e4e15d0c5eb0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:52 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 4 (irda)
    
     * net/irda/irda_device.c::irda_setup_dma() made conditional on
       ISA_DMA_API (it uses helpers in question and irda is usable on
       platforms that don't have them at all - think of USB IRDA, for
       example).
     * irda drivers that depend on ISA DMA marked as dependent on
       ISA_DMA_API
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a553260618d88c4790daec7975c88f3db1080b5b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:42 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 3
    
    Drivers that expect ISA DMA API are marked as such in Kconfig.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbacd5213a03b262bb17a826b166900e8b168ac
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:32 2005 +0100

    [PATCH] ISA_DMA Kconfig fixes - part 2 (parport_pc)
    
    Part of parport_pc that uses ISA DMA helpers made conditional on
    CONFIG_ISA_DMA_API.  As the result, driver got usable for boxen that do
    not have ISA DMA stuff and have normal PCI parport card stuck into
    them - these never use DMA anyway.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cae841b13f23ccdf7e38b2400b5cf57deb57ccf
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:22 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 1
    
    A bunch of drivers use ISA DMA helpers or their equivalents for
    platforms that have ISA with different DMA controller (a lot of ARM
    boxen).  Currently there is no way to put such dependency in Kconfig -
    CONFIG_ISA is not it (e.g.  it is not set on platforms that have no ISA
    slots, but have on-board devices that pretend to be ISA ones).
    
    New symbol added - ISA_DMA_API.  Set when we have functional
    enable_dma()/set_dma_mode()/etc.  set of helpers.  Next patches in the
    series will add missing dependencies for drivers that need them.
    
    I'm very carefully staying the hell out of the recurring flamefest on
    what exactly CONFIG_ISA would mean in ideal world - added symbol has a
    well-defined meaning and for now I really want to treat it as completely
    independent from the mess around CONFIG_ISA.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b52523aff51e3b245e6ec8887e3fcf190da4711
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:01 2005 +0100

    [PATCH] mbcs trivial user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c51f196b658fa1920c84b0752a55ed251d22d52
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:38:51 2005 +0100

    [PATCH] sparc NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b6bf51081a27e80334e7ebe2993ae1d046a3222
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed May 4 09:11:49 2005 -0500

    JFS: Endian errors
    
    Thanks sparse!
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e6600d800fead3e895f16bf9b426578a6301af44
Merge: a1d4ebd... 3cb4a4f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:08:43 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit a1d4ebdbb3806e9d2c37f32a043ec54f4534977c
Merge: 742b0c9... 0e57c71...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:08:10 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/

commit 742b0c905d970fd60893cce14a3c68b523504bc4
Merge: 235bd61... 9171078...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:07:22 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6.git/

commit 235bd6140dad7c08261abdc1f8056485c5344a74
Merge: 41832a0... 6a800d4...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:06:38 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 9171078ab5a0bbb516029cfc61378e0350a7b30d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 15:53:08 2005 +0200

    [PATCH] PCI: drivers/pci/pci.c: remove pci_dac_set_dma_mask
    
    pci_dac_set_dma_mask is currently completely unused.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b308240b49ff5a1bddc6e10513c2c83f37a0bc78
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Thu Apr 28 18:08:53 2005 -0700

    [PATCH] PCI Hotplug: fix pciehp regression
    
    I fogot to remove the code that freed the memory in cleanup_slots().
    Here is the new patch, which I have also taken care of the comment
    by Eike to remove the cast in hotplug_slot->private.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eaae4b3a84a3781543a32bcaf0a33306ae915574
Author: Steven Cole <elenstev@mesatop.com>
Date:   Tue May 3 18:38:30 2005 -0600

    [PATCH] PCI: Spelling fixes for drivers/pci.
    
    Here are some spelling corrections for drivers/pci.
    
    CONTROLER -> CONTROLLER
    Regisetr -> Register
    harware -> hardware
    inital -> initial
    Initilize -> Initialize
    funtion -> function
    funciton -> function
    occured -> occurred
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3aa8c4febf74b1f23bd9fc329321af6d531fe4dd
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Thu Apr 21 10:49:06 2005 +0000

    [PATCH] PCI: Rapid Hance quirk
    
    This patch just adds Intel's Hance Rapid south bridge IDs to ICH4 region quirk.
    Patch was successfuly tested by Chunhao Huang from Winbond.
    
    Signed-Off-By: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 034ecc724cc6ba662d0b2b5a1e11e7e66a768596
Author: Rolf Eike Beer <eike-hotplug@sf-tec.de>
Date:   Mon Apr 11 15:01:54 2005 +0200

    [PATCH] PCI Hotplug ibmphp_pci.c: Fix masking out needed information too early
    
    here is the patch that fixes the bug introduced by my previous patch which
    already went into 2.6.12-rc2 and is likely to cause trouble is someone hits
    one the else case here by accident.
    
    Using the &= operation before the if statement destroys the information the
    if asks for so we always go into the else branch.
    
    Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8958177224622411b9979eabb5610e30b06034b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: Add pci shutdown ability
    
    Now pci drivers can know when the system is going down without having to
    add a reboot notifier event.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4c0619add8c3a8b28e7fae8b15cc7b62de2f8148
Author: ssant@in.ibm.com <ssant@in.ibm.com>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: fix up word-aligned 16-bit PCI config access through sysfs
    
    This patch adds the possibility to do word-aligned 16-bit atomic PCI
    configuration space accesses via the sysfs PCI interface. As a result, problems
    with Emulex LFPC on IBM PowerPC64 are fixed.
    
    Patch is present in SLES 9 SP1.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc56b9e01190b9f1ad6b7c5c694b61bfe34c7aa5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: Clean up a lot of sparse "Should it be static?" warnings.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 92df516e6264f9caff4be49718926d6884fa50ed
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Apr 5 23:49:49 2005 +0200

    [PATCH] PCI: fix stale PCI pm docs
    
    This fixes u32 vs. pm_message_t confusion in documentation, and
    removes references to no-longer-existing (*save_state), too. With
    exception of USB (I hope David will fix/apply my patch), this should
    fix last piece of this confusion... famous last words.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a3ea7fbac12fdb2d70c90bb36f81afa3c66e18f4
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Tue Mar 29 19:08:48 2005 +0100

    [PATCH] PCI: update PCI documentation for pci_get_slot() depreciation
    
    pci_find_slot() doesn't work on multiple-domain boxes so pci_get_slot()
    should be used instead.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ceb43744cd48a20212e2179e0c7ff2f450a3c97e
Author: Kenji Kaneshige <kaneshige.kenji@soft.fujitsu.com>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: 'is_enabled' flag should be set/cleared when the device is actually enabled/disabled
    
    I think 'is_enabled' flag in pci_dev structure should be set/cleared
    when the device actually enabled/disabled. Especially about
    pci_enable_device(), it can be failed. By this change, we will also
    get the possibility of refering 'is_enabled' flag from the functions
    called through pci_enable_device()/pci_disable_device().
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e57c7166675a86293f150d5ef7779edd629fe2a
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:28 2005 -0400

    [PATCH] aoe: update version number to 10
    
    update version number to 10
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4613ed277ab8a41640434181898ef4649cc7301e
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:25 2005 -0400

    [PATCH] aoe: add firmware version to info in sysfs
    
    add firmware version to info in sysfs
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 93d489fc56f819d8805d80ae83cbafc5e5719804
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:22 2005 -0400

    [PATCH] aoe: allow multiple aoe devices to have the same mac
    
    allow multiple aoe devices to have the same mac
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -u b/drivers/block/aoe/aoedev.c b/drivers/block/aoe/aoedev.c

commit 67d9f84786cc4fd42cb40c9474c248eadaff15c6
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:18 2005 -0400

    [PATCH] aoe: update the documentation to mention aoetools
    
    update the documentation to mention aoetools
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c59a24dc512952cb434b34a66c3792555159fa36
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:13 2005 -0400

    [PATCH] aoe: aoe-stat should work for built-in as well as module
    
    aoe-stat should work for built-in as well as module
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -uprN a/Documentation/aoe/status.sh b/Documentation/aoe/status.sh

commit 03c41c434775c52092d17a5031ad8ebaaf555bc4
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:03 2005 -0400

    [PATCH] aoe: improve allowed interfaces configuration
    
    improve allowed interfaces configuration
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -uprN a/Documentation/aoe/aoe.txt b/Documentation/aoe/aoe.txt

commit 3cb4a4f739cccdf0642fa7e3a087e0b8425ff67b
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 3 17:02:20 2005 -0500

    [PATCH] USB cypress_m8: update kernel driver with current source
    
    Fixed problem where setting or retreiving the serial config would fail
    with EPIPE.  Removed CRTS toggling so the driver behaves more like other
    usbserial adapters.  Issued new interval of 1ms instead of the default
    bInterval.  As a result, transfer speed has been substantially
    increased.  From avg. 850bps to avg. 3300bps.  Also added new module
    parameter 'interval' to tweak the interval in case this change causes
    problems for someone.  Cleaned up code and formatting issues so source
    is more readable.  Replaced the C++ style comments.  Various other code
    cleanups.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 093cf723b2b06d774929ea07982f6a466ff22314
Author: Steven Cole <elenstev@mesatop.com>
Date:   Tue May 3 19:07:24 2005 -0600

    [PATCH] USB: Spelling fixes for drivers/usb.
    
    Here are some spelling corrections for drivers/usb.
    
    cancelation -> cancellation
    succesful -> successful
    cancelation -> cancellation
    decriptor -> descriptor
    Initalize -> Initialize
    wierd -> weird
    Protocoll -> Protocol
    occured -> occurred
    successfull -> successful
    Procesing -> Processing
    devide -> divide
    Isochronuous -> Isochronous
    noticable -> noticeable
    Basicly -> Basically
    transfering -> transferring
    intialize -> initialize
    Incomming -> Incoming
    additionnal -> additional
    asume -> assume
    Unfortunatly -> Unfortunately
    retreive -> retrieve
    tranceiver -> transceiver
    Compatiblity -> Compatibility
    Incorprated -> Incorporated
    existance -> existence
    Ununsual -> Unusual
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7b1cbebaa7ced7a2029cc5b50eab60c79b24cc10
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon May 2 23:54:28 2005 -0700

    [PATCH] USB: unusual_devs entry for Minolta Dimage Z10
    
    This patch adds an unusual_devs entry for the Minolta Dimage Z10.
    Originally reported by Vilisas <vilisas@xxx.lt>
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8af60be9a71d2c636cd800deab63a9fadf3aee96
Author: Vivian Bregier <Vivian.Bregier@imag.fr>
Date:   Tue May 3 02:16:34 2005 +0200

    [PATCH] USB: unusual_devs.h: atmel snd1 storage
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e54f91d8d770c5a48da10a5c9c314c1c926536b
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Apr 29 16:09:44 2005 +0100

    [PATCH] USB: ftdi_sio redundant macro removal
    
    [ftdi_sio] Replaced redundant INTERFACE_A and INTERFACE_B macros with
    the equivalent PIT_SIOA and PIT_SIOB macros.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f92872cc8085b9e65a8ec07aed106ce5d24f60b
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Apr 29 16:06:14 2005 +0100

    [PATCH] USB: VID/PID updates for ftdi_sio driver
    
    Some VID/PID updates for the ftdi_sio driver:
    
    * The "Gude Analog- und Digitalsysteme GmbH" entries were missing from
      the "combined" table.
    * Replaced FTDI_8U232AM_ALT_ALT_PID with 3 PIDs for devices from
      4n-galaxy.de.
    * Removed redundant FTDI_RM_VID and renamed FTDI_RMCANVIEW_PID to
      FTDI_RM_CANVIEW_PID.
    * Added VID/PID for serial converter in Mobility Electronics EasiDock
      USB 200 (mentioned by Gregory Schmitt).
    * Added PID for Active Robots USB comms board (mentioned by John Koch).
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -ur a/drivers/usb/serial/ftdi_sio.c b/drivers/usb/serial/ftdi_sio.c

commit b9ab0746a53b9cd5c64e179a1c13952f0ae80e64
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Mon May 2 22:47:55 2005 +0200

    [PATCH] USB: new usbnet device id
    
    On Thu, Apr 14, 2005 at 11:06:21PM +0400, Sergey Vlasov wrote:
    > http://thread.gmane.org/gmane.linux.usb.devel/32977
    >
    > (see "[PATCH] N/3 cdc acm errors").
    >
    > You also need this driver core fix:
    >
    > http://thread.gmane.org/gmane.linux.usb.devel/33132
    
    I reproduced the same oops while trying to execute at+mode=99, it would
    be nice to get these fix merged since I believe it's still needed to
    connect the laptop over gprs (something I didn't test yet).
    
    This further patch will allow you to connect via usbnet, Greg could you
    apply? Thanks!
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3b86b2028c4de998978baae780edfc36995bebc5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Apr 25 21:46:29 2005 -0700

    [PATCH] USB: add a driver for the AirPrime CDMA Wireless PC card.
    
    Easier than trying to use the generic usb-serial driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56c1e26d75008d39f1067f453719857a81109d9f
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Apr 9 09:00:29 2005 -0700

    [PATCH] USB: ehci power fixes
    
    Miscellaneous updates for EHCI.
    
     - Mostly updates the power switching on EHCI controllers.  One routine
       centralizes the "power on/off all ports" logic, and the capability to
       do that is reported more correctly.
    
     - Courtesy Colin Leroy, a patch to always power up ports after resumes
       which didn't keep a USB device suspended.  The reset-everything logic
       powers down those ports (on some hardware) so something needs to turn
       them back on.
    
     - Minor tweaks/bugfixes for the debug port support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e2e66446e08a7a365a59e25bbc8dd320ab3da0a6
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Apr 25 21:46:29 2005 -0700

    [PATCH] USB Storage: fix compile error
    
    This patch fixes a compiler error caused by a missing prototype.  It should
    apply directly to Greg Kroah-Hartman's usb-2.6.git tree.
    
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6a800d456a81a9046634bcd26d868fd537f0c9ae
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 22:17:18 2005 -0700

    [IPV6]: net/addrconf.h needs to include linux/in6.h earlier
    
    Else the in6_addr layout is not known for struct
    prefix_info.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 41832a08feca695158e15a6e58c26b224a7bfae2
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 3 22:05:43 2005 -0700

    [SPARC64]: Disable IRQ forwarding.
    
    There is some race whereby IRQs get stuck, the IRQ status
    is pending but no processor actually handles the IRQ vector
    and thus the interrupt.
    
    This is a temporary workaround.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cee2824f85414c98fff4004e335a6bc4072c8809
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 3 22:04:36 2005 -0700

    [SPARC64]: Fix goal_cpu tracking in retarget_one_irq().
    
    We would never advance the goal_cpu counter like we
    should, so all IRQs would go to a single processor.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8800cea62025a5209d110c5fa5990429239d6eee
Merge: 84e48b6... 14d50e7...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 3 17:24:08 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit 14d50e78f947d340066ee0465dd892ad1d9162c0
Author: J Hadi Salim <hadi@cyberus.ca>
Date:   Tue May 3 16:29:13 2005 -0700

    [PKT_SCHED]: Action repeat
    
    Long standing bug.
    Policy to repeat an action never worked.
    
    Signed-off-by: J Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4b07b7b3693228c7b848c00a9d4bbb49506a45f
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 3 16:27:44 2005 -0700

    [IA64] Update arch/ia64/configs/tiger_defconfig
    
    Kristen did most of the checking, bring this up to -rc2.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit aabc9761b69f1bfa30a78f7005be95cc9cc06175
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 16:27:10 2005 -0700

    [IPSEC]: Store idev entries
    
    I found a bug that stopped IPsec/IPv6 from working.  About
    a month ago IPv6 started using rt6i_idev->dev on the cached socket dst
    entries.  If the cached socket dst entry is IPsec, then rt6i_idev will
    be NULL.
    
    Since we want to look at the rt6i_idev of the original route in this
    case, the easiest fix is to store rt6i_idev in the IPsec dst entry just
    as we do for a number of other IPv6 route attributes.  Unfortunately
    this means that we need some new code to handle the references to
    rt6i_idev.  That's why this patch is bigger than it would otherwise be.
    
    I've also done the same thing for IPv4 since it is conceivable that
    once these idev attributes start getting used for accounting, we
    probably need to dereference them for IPv4 IPsec entries too.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5d75cd6b10ddad2f375b61092754474ad78aec7
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:57 2005 -0700

    [PKT_SCHED]: netetm: adjust parent qlen when duplicating
    
    Fix qlen underrun when doing duplication with netem. If netem is used
    as leaf discipline, then the parent needs to be tweaked when packets
    are duplicated.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 771018e76aaa6474be20a53c20458bcae8b00485
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:32 2005 -0700

    [PKT_SCHED]: netetm: make qdisc friendly to outer disciplines
    
    Netem currently dumps packets into the queue when timer expires. This
    patch makes work by self-clocking (more like TBF).  It fixes a bug
    when 0 delay is requested (only doing loss or duplication).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cbe1d46d69f9e2c49f284fe0e9aee3387bd2c71
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:03 2005 -0700

    [PKT_SCHED]: netetm: trap infinite loop hange on qlen underflow
    
    Due to bugs in netem (fixed by later patches), it is possible to get qdisc
    qlen to go negative. If this happens the CPU ends up spinning forever
    in qdisc_run(). So add a BUG_ON() to trap it.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a71f62edc935fbdc346c5b16bea19f1480d29635
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 3 16:21:45 2005 -0700

    [IA64] Fix two warnings introduced by perfmon patches.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bd96535b81ad09d7593cc75093534acb984d3dc9
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 16:21:37 2005 -0700

    [NETFILTER]: Drop conntrack reference in ip_dev_loopback_xmit()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4f8ab00cf3599ecb8110c0a838cd15d013b79e5
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 16:20:39 2005 -0700

    [NETFILTER]: Fix nf_debug_ip_local_deliver()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cacaddf57ed4d5ca994e9a7e2bd5558061f5d89d
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Tue May 3 16:18:52 2005 -0700

    [NET]: Disable queueing when carrier is lost.
    
    Some network drivers call netif_stop_queue() when detecting loss of
    carrier. This leads to packets being queued up at the qdisc level for
    an unbound period of time. In order to prevent this effect, the core
    networking stack will now cease to queue packets for any device, that
    is operationally down (i.e. the queue is flushed and disabled).
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f4821e7b93fe72e89b8ff393bd8e705bd178aa5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 3 16:15:59 2005 -0700

    [XFRM/RTNETLINK]: Decrement qlen properly in {xfrm_,rt}netlink_rcv().
    
    If we free up a partially processed packet because it's
    skb->len dropped to zero, we need to decrement qlen because
    we are dropping out of the top-level loop so it will do
    the decrement for us.
    
    Spotted by Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a5a70b75d93b26e14c0c5e759099d602a480b9e2
Author: stephane eranian <eranian@hpl.hp.com>
Date:   Mon Apr 18 11:42:00 2005 -0700

    [IA64] another perfmon fix (take2)
    
    - pfm_context_load(): change return value from EINVAL to EBUSY
      when context is already loaded.
    
    - pfm_check_task_state(): pass test if context state is MASKED.
      It is safe to give access on PFM_CTX_MASKED because the PMU
      state (PMD) is stable and saved in software state.
      This helps multiplexing programs such as the example given
      in libpfm-3.1.
    
    Signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8df5a500a3e97f7811cdce0f553ca1917ccd4220
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Mon Apr 11 13:45:00 2005 -0700

    [IA64] perfmon & PAL_HALT again
    
    The pmu_active test is based on the values of PSR.up. THIS IS THE PROBLEM as
    it does not take into account the lazy restore logic which is as follow (simplified):
    
    context switch out:
    	save PMDs
    	clear psr.up
    	release ownership
    
    context switch in:
    	if (ctx->last_cpu == smp_processor_id() && ctx->cpu_activation == cpu_activation) {
    		set psr.up
    		return
    	}
    	restore PMD
    	restore PMC
    	ctx->last_cpu   = smp_processor_id();
    	ctx->activation = ++cpu_activation;
    	set psr.up
    
    The key here is that on context switch out, we clear psr.up and on context switch in
    we check if nobody else used the PMU on that processor since last time we came. In
    that case, we assume the PMD/PMC are ours and we simply reactivate.
    
    The Caliper problem is that between the moment we context switch out and the moment we
    come back, nobody effectively used the PMU BUT the processor went idle. Normally this
    would have no incidence but PAL_HALT does alter the PMU registers.  In default_idle(),
    the test on psr.up is not strong enough to cover this case and we go into PAL which
    trashed the PMU resgisters. When we come back we falsely assume that this is our state
    yet it is corrupted. Very nasty indeed.
    
    To avoid the problem it is necessary to forbid going to PAL_HALT as soon as perfmon
    installs some valid state in the PMU registers. This happens with an application
    attaches a context to a thread or CPU. It is not enough to check the psr/dcr bits.
    Hence I propose the attached patch. It adds a callback in process.c to modify the
    condition to enter PAL on idle. Basically, now it is conditional to pal_halt=1 AND
    perfmon saying it is okay.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 09e14305982efc2f3b509d3c50ef5dcbff64a998
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 3 15:30:05 2005 -0700

    [NETLINK]: Fix infinite loops in synchronous netlink changes.
    
    The qlen should continue to decrement, even if we
    pop partially processed SKBs back onto the receive queue.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84e48b6d64fdc29586bc7d9329f986cdae591a80
Merge: 52292c9... 48af721...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 3 15:27:24 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 48af7215405215e81e72aba1ae8031ca2fea840c
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Tue May 3 22:57:56 2005 +0100

    [PATCH] ARM: 2662/1: missing "default y" for CONFIG_HAS_TLS_REG
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit a493820df65909d344824499937c939150559ace
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Tue May 3 22:57:56 2005 +0100

    [PATCH] ARM: 2661/1: imxfb include
    
    Patch from Sascha Hauer
    
    This patch adds the missing include files for the i.MX framebuffer
    driver.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 2a0a6ebee1d68552152ae8d4aeda91d806995dec
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:55:09 2005 -0700

    [NETLINK]: Synchronous message processing.
    
    Let's recap the problem.  The current asynchronous netlink kernel
    message processing is vulnerable to these attacks:
    
    1) Hit and run: Attacker sends one or more messages and then exits
    before they're processed.  This may confuse/disable the next netlink
    user that gets the netlink address of the attacker since it may
    receive the responses to the attacker's messages.
    
    Proposed solutions:
    
    a) Synchronous processing.
    b) Stream mode socket.
    c) Restrict/prohibit binding.
    
    2) Starvation: Because various netlink rcv functions were written
    to not return until all messages have been processed on a socket,
    it is possible for these functions to execute for an arbitrarily
    long period of time.  If this is successfully exploited it could
    also be used to hold rtnl forever.
    
    Proposed solutions:
    
    a) Synchronous processing.
    b) Stream mode socket.
    
    Firstly let's cross off solution c).  It only solves the first
    problem and it has user-visible impacts.  In particular, it'll
    break user space applications that expect to bind or communicate
    with specific netlink addresses (pid's).
    
    So we're left with a choice of synchronous processing versus
    SOCK_STREAM for netlink.
    
    For the moment I'm sticking with the synchronous approach as
    suggested by Alexey since it's simpler and I'd rather spend
    my time working on other things.
    
    However, it does have a number of deficiencies compared to the
    stream mode solution:
    
    1) User-space to user-space netlink communication is still vulnerable.
    
    2) Inefficient use of resources.  This is especially true for rtnetlink
    since the lock is shared with other users such as networking drivers.
    The latter could hold the rtnl while communicating with hardware which
    causes the rtnetlink user to wait when it could be doing other things.
    
    3) It is still possible to DoS all netlink users by flooding the kernel
    netlink receive queue.  The attacker simply fills the receive socket
    with a single netlink message that fills up the entire queue.  The
    attacker then continues to call sendmsg with the same message in a loop.
    
    Point 3) can be countered by retransmissions in user-space code, however
    it is pretty messy.
    
    In light of these problems (in particular, point 3), we should implement
    stream mode netlink at some point.  In the mean time, here is a patch
    that implements synchronous processing.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96c36023434b7b6824b1da72a6b7b1ca61d7310c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:43:27 2005 -0700

    [NETLINK]: cb_lock does not needs ref count on sk
    
    Here is a little optimisation for the cb_lock used by netlink_dump.
    While fixing that race earlier, I noticed that the reference count
    held by cb_lock is completely useless.  The reason is that in order
    to obtain the protection of the reference count, you have to take
    the cb_lock.  But the only way to take the cb_lock is through
    dereferencing the socket.
    
    That is, you must already possess a reference count on the socket
    before you can take advantage of the reference count held by cb_lock.
    As a corollary, we can remve the reference count held by the cb_lock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9dfa277f88388a94993b121db46b80df66f48d9e
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:41:18 2005 -0700

    [PKT_SCHED]: Fix range in PSCHED_TDIFF_SAFE to 0..bound
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 033d899904792d3501b7dd469495ca9138424ec3
Author: Asim Shankar <asimshankar@gmail.com>
Date:   Tue May 3 14:39:33 2005 -0700

    [PKT_SCHED]: HTB: Drop packet when direct queue is full
    
    htb_enqueue(): Free skb and return NET_XMIT_DROP if a packet is
    destined for the direct_queue but the direct_queue is full. (Before
    this: erroneously returned NET_XMIT_SUCCESS even though the packet was
    not enqueued)
    
    Signed-off-by: Asim Shankar <asimshankar@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96edf83c4e284c08584f97623f7c7f029759459e
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue May 3 14:38:09 2005 -0700

    [PPP]: remove redundant NULL pointer checks before kfree & vfree
    
    kfree() and vfree() can both deal with NULL pointers. This patch removes
    redundant NULL pointer checks from the ppp code in drivers/net/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3924c70dd3bddc28b99ccd1688bd281bad1a9be
Author: Folkert van Heusden <folkert@vanheusden.com>
Date:   Tue May 3 14:36:45 2005 -0700

    [TCP]: Optimize check in port-allocation code, v6 version.
    
    Signed-off-by: Folkert van Heusden <folkert@vanheusden.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b2531bdc54e19717de5cb161d57e5ee0a7725ff
Author: Folkert van Heusden <folkert@vanheusden.com>
Date:   Tue May 3 14:36:08 2005 -0700

    [TCP]: Optimize check in port-allocation code.
    
    Signed-off-by: Folkert van Heusden <folkert@vanheusden.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20cc6befa23bb993cf4a4c58becb1dd99e7fc927
Author: Lucas Correia Villa Real <lucasvr@gobolinux.org>
Date:   Tue May 3 14:34:20 2005 -0700

    [PKT_SCHED]: fix typo on Kconfig
    
    This is a trivial fix for a typo on Kconfig, where the Generic Random Early
    Detection algorithm is abbreviated as RED instead of GRED.
    
    Signed-off-by: Lucas Correia Villa Real <lucasvr@gobolinux.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a5d362120a61a719095443194cc2d5e9a7027dd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue May 3 14:33:27 2005 -0700

    [WAN]: kfree of NULL pointer is valid
    
    kfree(0) is perfectly valid, checking pointers for NULL before calling
    kfree() on them is redundant. The patch below cleans away a few such
    redundant checks (and while I was around some of those bits I couldn't
    stop myself from making a few tiny whitespace changes as well).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Acked-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db46edc6d3b66bf708a8f23a9aa89f63a49ebe33
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:29:39 2005 -0700

    [RTNETLINK] Cleanup rtnetlink_link tables
    
    Converts remaining rtnetlink_link tables to use c99 designated
    initializers to make greping a little bit easier.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f90a0a74b864fdc46737614f03b8868f4f31e3bf
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:29:00 2005 -0700

    [RTNETLINK] Fix & cleanup rtm_min/rtm_max
    
    Converts rtm_min and rtm_max arrays to use c99 designated
    initializers for easier insertion of new message families.
    RTM_GETMULTICAST and RTM_GETANYCAST did not have the minimal
    message size specified which means that the netlink message
    was parsed for routing attributes starting from the header.
    Adds the proper minimal message sizes for these messages
    (netlink header + common rtnetlink header) to fix this issue.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d775fc09f16f4b88cd0373006b112c4772589778
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:27:35 2005 -0700

    [RTNETLINK] Fix RTM_MAX to represent the maximum valid message type
    
    RTM_MAX is currently set to the maximum reserverd message type plus one
    thus being the cause of two bugs for new types being assigned a) given the
    new family registers only the NEW command in its reserved block the array
    size for per family entries is calculated one entry short and b) given the
    new family registers all commands RTM_MAX would point to the first entry
    of the block following this one and the rtnetlink receive path would accept
    a message type for a nonexisting family.
    
    This patch changes RTM_MAX to point to the maximum valid message type
    by aligning it to the start of the next block and subtracting one.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 492b558b3191319cbc859a9e025bc354d336c261
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:26:40 2005 -0700

    [XFRM]: Cleanup xfrm_msg_min and xfrm_dispatch
    
    Converts xfrm_msg_min and xfrm_dispatch to use c99 designated
    initializers to make greping a little bit easier. Also replaces
    two hardcoded message type with meaningful names.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 526bdb80a23b2e10ed4ccc3fcf309c9118d892d6
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:26:01 2005 -0700

    [XFRM]: Prevent off-by-one access to xfrm_dispatch
    
    Makes the type > XFRM_MSG_MAX check behave correctly to
    protect access to xfrm_dispatch.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4553eddae592b948c9695c9a0002169b0cab6fc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:25:13 2005 -0700

    [IPV6]: Include ipv6.h for ipv6_addr_set
    
    This patch includes net/ipv6.h from addrconf.h since it needs
    ipv6_addr_set.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 679a87382433cf12a28f07a7d5c240f30f0daa08
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:24:36 2005 -0700

    [IPV6]: Fix raw socket checksums with IPsec
    
    I made a mistake in my last patch to the raw socket checksum code.
    I used the value of inet->cork.length as the length of the payload.
    While this works with normal packets, it breaks down when IPsec is
    present since the cork length includes the extension header length.
    
    So here is a patch to fix the length calculations.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31da185d8162ae0f30a13ed945f1f4d28d158133
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:23:50 2005 -0700

    [NETFILTER]: Don't checksum CHECKSUM_UNNECESSARY skbs in TCP connection tracking
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b43309578477ff3271945d4efb920f558a309b4a
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:23:13 2005 -0700

    [NETFILTER]: Missing owner-field initialization in iptable_raw
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 012914dad25bd5cacf88af4429eecda62a06020d
Author: Russ Anderson <rja@sgi.com>
Date:   Sat Apr 23 00:08:00 2005 -0700

    [patch] MCA recovery module undefined symbol fix
    
    The patch "MCA recovery improvements" added do_exit to mca_drv.c.
    That's fine when the mca recovery code is built in the kernel
    (CONFIG_IA64_MCA_RECOVERY=y) but breaks building the mca recovery
    code as a module (CONFIG_IA64_MCA_RECOVERY=m).
    
    Most users are currently building this as a module, as loading
    and unloading the module provides a very convenient way to turn
    on/off error recovery.
    
    This patch exports do_exit, so mca_drv.c can build as a module.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3ea8b477b4b9d3e75b5e9b8aea41259f45031823
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 11 21:20:00 2005 -0700

    [IA64] altix: fix TIOCA dmamap list_add
    
    Correct a bug where tioca_dma_mapped() is putting tioca dma map structs
    on the wrong list.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 32709d8ae67356559839a9a9e4b26f79134e45a6
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Apr 8 14:23:00 2005 -0700

    [IA64] SAL to OS callbacks cannot call sleeping
    
    When SAL calls back into the OS, the OS code is running with preempt
    disabled so it cannot call sleeping functions.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b1b901c2029aa0fd8aa4ac5f04f31648ae2358b4
Author: Russ Anderson <rja@sgi.com>
Date:   Wed Apr 6 00:07:00 2005 -0700

    [IA64] MCA recovery improvements
    
    Jack Steiner uncovered some opportunities for improvement in
    the MCA recovery code.
    
      1) Set bsp to save registers on the kernel stack.
      2) Disable interrupts while in the MCA recovery code.
      3) Change the way the user process is killed, to avoid
         a panic in schedule.
    
    Testing shows that these changes make the recovery code much
    more reliable with the 2.6.12 kernel.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 446b8831f5acf2076fa58a66286789eb84f3df2c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 5 17:47:00 2005 -0700

    [IA64] fix ia64 syscall auditing
    
    Attached is a patch against David's audit.17 kernel that adds checks
    for the TIF_SYSCALL_AUDIT thread flag to the ia64 system call and
    signal handling code paths.  The patch enables auditing of system
    calls set up via fsys_bubble_down, as well as ensuring that
    audit_syscall_exit() is called on return from sigreturn.
    
    Neglecting to check for TIF_SYSCALL_AUDIT at these points results in
    incorrect information in audit_context, causing frequent system panics
    when system call auditing is enabled on an ia64 system.
    
    I have tested this patch and have seen no problems with it.
    
    [Original patch from Amy Griffis ported to current kernel by David Woodhouse]
    
    From: Amy Griffis <amy.griffis@hp.com>
    From: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7d5f9c0f10255000ca007fb03773c6b825c2b9ce
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Wed Mar 30 21:40:00 2005 -0700

    [IA64] reduce cacheline bouncing in cpu_idle_wait
    
    Andi noted that during normal runtime cpu_idle_map is bounced around a lot,
    and occassionally at a higher frequency than the timer interrupt wakeup
    which we normally exit pm_idle from.  So switch to a percpu variable.
    
    I didn't move things to the slow path because it would involve adding
    scheduler code to wakeup the idle thread on the cpus we're waiting for.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit de7548d0e202263bb6bfd7574a7889e85a691937
Author: Mike Habeck <habeck@sgi.com>
Date:   Fri Mar 25 19:34:00 2005 -0700

    [IA64-SGI] Altix only: Fix for sn_dma_flush
    
    The following patch fixes a bug in the SGI Altix sn_dma_flush code.
    sn_dma_flush is broken in 2.6.  The code isn't waiting for the DMA
    data to be flushed out of the PIC ASIC. This patch is based off the
    linux-ia64-test-2.6.12 tree
    
    Signed-off-by: Mike Habeck <habeck@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bb0fc085457cf6a865b8232b0cefab3a7819df44
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Thu Mar 24 22:58:00 2005 -0700

    [IA64] use common pxm function
    
    This patch simplifies a couple places where we search for _PXM
    values in ACPI namespace.  Thanks,
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c0b12422e5e1d041026dd27074de17d2d7e32c4e
Author: Colin Ngam <cngam@sgi.com>
Date:   Fri Mar 18 16:38:00 2005 -0700

    [IA64-SGI] Altix only: Register Error Interrupt
    
    The following patch ensures that the correct error interrupt handling
    routine is initialized.  This patch is based on the 2.6.12 ia64 release tree.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3a7d555bfc4d4631d9118fb4d0ed7ab62cc2ca1c
Author: Dean Nelson <dcn@sgi.com>
Date:   Mon Apr 4 13:14:00 2005 -0700

    [IA64-SGI] convert AMO address found in XPC's reserved page
    
    This patch detects the existence of an uncached physical AMO address setup
    by EFI's XPBOOT (SGI) and converts it to an uncached virtual AMO address.
    Depends on a patch submitted on 23 March 2005 with the subject of:
        [PATCH 2/3] SGI Altix cross partition functionality (2nd revision)
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a2d974da0afe659cff98913184a97c0ee686d02b
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 20:50:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality [3/3]
    
    This patch contains the cross partition pseudo-ethernet driver (XPNET)
    functional support module.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 89eb8eb927e324366c3ac0458998aaf9953fc5cd
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:50:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality [2/3]
    
    This patch contains the communication module (XPC) for cross partition
    communication on a partitioned SGI Altix.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 21223a9e78050919499d3d9039170e608eb939cc
Author: Tony Luck <aegl@agluck-lia64.sc.intel.com>
Date:   Tue May 3 12:25:50 2005 -0700

    [IA64] manually apply changes to arch/ia64/sn/kernel/Makefile
    
    cg-patch couldn't apply the patch to Makefile, and my dumb script
    rushed on and ran cg-commit without this change.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b0d82bd5df874f7dadbeced1b0163473387da37c
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:46:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality (2nd
    This patch contains the shim module (XP) which interfaces between the
    communication module (XPC) and the functional support modules (like XPNET).
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7fbd2a5337b2aa91266abbded97330f909904fd5
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:11:00 2005 -0700

    [IA64-SGI] Add some needed externs currently not defined
    
    Add some needed externs currently not defined.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 21e37283909c12e300ab87c20f5addc878cda9f9
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:08:00 2005 -0700

    [IA64-SGI] Define some additional SHub1 and Shub2 register symbols
    
    Define some additional SHub1 and SHub2 register symbols.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7223a93a5321f84337647aef62ef947afd8df41a
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:00:00 2005 -0700

    [IA64] Export node_online_map and node_possible_map
    
    Export node_online_map and node_possible_map so that kernel modules can use
    the nodemask macros, like, for_each_node() and for_each_online_node().
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2e34f07ff0c944399a6456e2d91cf0ca1d9a497c
Author: Dean Nelson <dcn@sgi.com>
Date:   Mon Mar 21 19:41:00 2005 -0700

    [PATCH] move cnodeid_to_nasid_table out of pda
    Another step in the effort to eliminate the SN pda structure.
    This patch moves the cnodeid_to_nasid_table field out of the pda,
    making it a standalone per-cpu data item, and exports it so it can
    be accessed by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ce0a3956b32650e229b68964c4400bbdc5ad3ca1
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 19:41:00 2005 -0700

    [IA64-SGI] Altix patch to add bricktype knowledge to tiocx
    
    Here is a patch to enable the SGI tiocx bus driver to distingush between
    FPGA-attached h/w and non-FPGA-attached h/w.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ae40aae9b9b8e336714ebb3f16410da6e69d6ac8
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 4 13:23:00 2005 -0700

    [IA64-SGI] Altix patch to fix missing Kconfig dependency.
    
    This is a one-liner to make the mbcs driver depend on SGI_TIOCX in the
    drivers/char/Kconfig file.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c2d1d65ad441c8abe624bdb1c2cff2e47c8c1ee1
Author: Bruce Losure <blosure@sgi.com>
Date:   Thu Mar 24 12:28:00 2005 -0700

    [IA64-SGI] Altix only: Remove hubdev SAL call
    
    Hi Tony,
    
    This patch against ia64-test-2.6.12 fixes a bug where the tiocx code
    was inadvertently un-doing some address modifications done in earlier
    fixup code.    This patch just removes the offending code.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2074615a13a4f250e0a4e3f6ec8e3733b950a783
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri Feb 18 19:09:00 2005 -0700

    [IA64] use fc.i for fluch_icache_range()
    
    This is a small patch to switch fluch_icache_range() to use fc.i
    instead of fc.  This would save time on processors which can establish
    i-cache coherency without flushing the cache-line out to memory (not
    that any current processors do).  On existing processors, fc.i behaves
    like fc.  The only caveat is that very old assemblers may not know
    about fc.i yet.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 43cc67251882f60c796c8729cefc0e05b550976c
Author: Jes Sorensen <jes@wildopensource.com>
Date:   Thu Feb 17 09:41:00 2005 -0700

    [IA64-SGI] cleanup shubio.h
    
    This patch cleans up include/asm/sn/shubio.h by removing a ton of
    whitespaces and running it through Lindent, reducing it's size by almost
    30KB. No actual content has been changed.
    
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6adc4cc0eead0c1897d7f1416d749c8e7c91e0bc
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Wed Feb 16 16:38:00 2005 -0700

    [IA64-SGI] remove unused sn header files
    
    This patch makes Jes' patch (which also contains the removal of fetchop.h) a
    bit smaller, and removes two other unused files at the same time, sndrv.h and
    sn_fru.h.
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9df6f705c0934a49d0f0a3468a5b5044c8aec4f1
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri Mar 25 00:16:00 2005 -0700

    [IA64] fix typos caught by new assembler
    
    Patch below fixes 3 trivial typos which are caught by the new
    assembler (v2.169.90).  Please apply.
    
    [Note: fix to memcpy that was also part of this patch was separately
     applied from patches by H.J. and Andreas ... so the delta here only
     has the other two fixes. -Tony]
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 512f64295f2f0049515dcc4e97c1f1ae0df9629c
Author: Andreas Schwab <schwab@suse.de>
Date:   Tue Apr 26 23:00:00 2005 -0700

    [IA64] Fix memcpy_mck.S for current binutils
    
    The current ia64 assembler complains about mismatching .proc/.endp pairs.
    (Same patch also sent by H.J. Lu)
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7a9bdd8842d0847f3b15068550a3632a2d259057
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Tue Apr 5 18:05:00 2005 -0700

    [IA64] Add config SCHED_SMT
    
    Now that we have MC/MT detection patches in, appended patch allows us to
    configure MT scheduler optimizations. For now, we will this option off
    by default.
    
    There is some discussion going on lkml about setting up sched-domains
    which are absolutely needed (like for example, we shouldn't setup SMT domain
    for non MT processors). Once that patch goes in, we can enable this option by
    default.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 52292c9b8c16aa9024a65aaeeca434bb8fec7d24
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue May 3 15:34:58 2005 +1000

    [PATCH] ppc64: fix gcc 4.0 vs CONFIG_ALTIVEC
    
    gcc-4.0 generates altivec code implicitly when -mcpu indicates an
    altivec capable CPU which is not suitable for the kernel.  However, we
    used to set -mcpu=970 when CONFIG_ALTIVEC was set because a gcc-3.x bug
    prevented from using -maltivec along with -mcpu=power4, thus prevented
    building the RAID6 altivec code.
    
    This patch fixes all of this by testing for the gcc version.  If 4.0 or
    later, just normally use -mcpu=power4 and let the RAID6 code add
    -maltivec to the few files it needs to be compiled with altivec support.
    For 3.x, we still use -mcpu=970 to work around the above problem, which
    is fine as 3.x will never implicitly generate altivec code.
    
    The Makefile hackery may not be the most lovely, I welcome anybody more
    skilled than me to improve it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 488f2eaca1b0831a5a5e6a66e33bad2cdeff7238
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 3 14:11:02 2005 +0100

    [AUDIT] Log correct syscall args for i386 processes on x86_64
    
    The i386 syscall ABI uses different registers. Log those instead of the
    x86_64 ones.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0dd8e06bdaa0a97e706ee1a489a1f6176c4ddc64
Author: Chris Wright <chrisw@osdl.org>
Date:   Tue May 3 14:01:15 2005 +0100

    [PATCH] add new audit data to last skb
    
    When adding more formatted audit data to an skb for delivery to userspace,
    the kernel will attempt to reuse an skb that has spare room.  However, if
    the audit message has already been fragmented to multiple skb's, the search
    for spare room in the skb uses the head of the list.  This will corrupt the
    audit message with trailing bytes being placed midway through the stream.
    Fix is to look at the end of the list.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eca02b0c1dc1da374216128157747d8ed994e5ef
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:23:56 2005 +0100

    [PATCH] ARM: Cleanup kmalloc in cyber2000fb
    
    We use one kmalloc to allocate two structures needlessly.
    Combine these two structures into one.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1f9c381fa3e0b9b9042e310c69df87eaf9b46ea4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:22:19 2005 +0100

    [PATCH] ARM: Clean up commenting/spacing for Integrator
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5c3073e691b56dabbdec60dda4258b4e50d64872
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:20:29 2005 +0100

    [PATCH] ARM: cleanup vmalloc start/offset macros
    
    VMALLOC_START and VMALLOC_OFFSET are common between all ARM
    machine classes.  Move them into include/asm-arm/pgtable.h,
    but allow a machine class to override them if required.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5cd0c3442021fbf39c7152b341a952aa24054be9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:18:46 2005 +0100

    [PATCH] ARM: decompressor: use platform debug macros
    
    Rather than duplicate the assembly for debug macros in the
    decompressor head.S, use asm/arch/debug-macros.S instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 27b030d58c8e72fc7a95187a791bd9406e350f02
Merge: 79d20b1... 6628465...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 3 08:14:09 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 79d20b14a0d651f15b0ef9a22b6cf12d284a6d38
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue May 3 07:54:51 2005 +0100

    [AUDIT] Update UML audit-syscall-{entry,exit} calls to new prototypes
    
    This patch is for -mm only.  It should probably be included in git-audit,
    and should be forwarded to Linus iff git-audit is.
    
    It updates the audit-syscall-{entry,exit} calls to current -mm.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6628465e33ca694bd8fd5c3cf4eb7ff9177bc694
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:13 2005 -0600

    [PATCH] JFS: Don't allocate extents that overlap existing extents
    
    Modify xtSearch so that it returns the next allocated block when the
    requested block is unmapped.  This can be used to make sure we don't
    create a new extent that overlaps the next one.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c6278295d6482edaaaef5faa64b18f17b3319b7
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:08 2005 -0600

    [PATCH] JFS: Write journal sync points more often
    
    This patch adds jfs_syncpt, which calls lmLogSync to write sync points
    to the journal both in jfs_sync_fs and when sync barrier processing
    completes.
    
    lmLogSync accomplishes two things:  1) it pushes logged-but-dirty
    metadata pages to disk, and 2) it writes a sync record to the journal
    so that jfs_fsck doesn't need to replay more transactions than is
    necessary.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fab479bebb96b1b4888bdae9b42e1fa9c5d3f38
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:02 2005 -0600

    [PATCH] JFS: Support page sizes greater than 4K
    
    jfs has never worked on architecutures where the page size was not 4K.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc5798d9a7b656550533a5c0177dba17d4ef4990
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:57 2005 -0600

    [PATCH] JFS: Changes for larger page size
    
    JFS code has always assumed a page size of 4K.  This patch fixes the
    non-pagecache uses of pages to deal with larger pages.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2e83707edbe6a2520591141421d26a87414a1b9
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:51 2005 -0600

    [PATCH] JFS: Simplify creation of new iag
    
    JFS was creating a new IAG (inode aggregate group) in one address
    space, and afterwards, accessing it from another.  This could lead to
    complications when cache pages contain more than one page of jfs
    metadata.  This patch causes the IAG to be initialized in the same
    address space that it is subsequently accessed with.
    
    This also elimitates an I/O, but IAG's aren't created too often.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66f3131f547ef3cc864810974e0757617e60a837
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:46 2005 -0600

    [PATCH] JFS: reduce number of synchronous transactions
    
    Use an inline pxd list rather than an xad list in the xadlock.
    When the number of extents being modified can fit with the xadlock,
    a transaction can be committed asynchronously.  Using a list of
    pxd's instead of xad's allows us to fit 4 extents, rather than 2.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac09f698f1cda91e890fb75f4cb38253d60ff017
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 16:25:10 2005 +1000

    [PATCH] cpufreq annoying warning fix
    
    The cpufreq core patch I sent earlier got only half-applied.  I added a
    flag to let the low level driver disable an annoying warning on
    suspend/resume that is normal on ppc, but the "resume" part of it wasn't
    applied.
    
    This just adds back that missing bit.  The original patch also reworked
    the resume() function to avoid nesting too many if () statements along
    the way I did the suspend() one, but I didn't include that in the patch
    below.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e521dca64e0f82d844928c5ee88d82fdced50cbe
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 16:12:00 2005 +1000

    [PATCH] ppc32: Fix might_sleep() warning with clock spreading
    
    The clock spreading disable/enable code was called to late/early during
    the suspend/resume code on some laptops and would trigger a
    might_sleep() warning due to the down() call in the low level i2c code.
    
    This fixes it by calling those functions earlier/later when interrupts
    are still enabled.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6995f17a5ab3c3fd4df2e5b107d08cff1db3fa41
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 14:45:12 2005 +1000

    [PATCH] ppc32: More fixlet for pmac sound
    
    As Al Viro noticed, my previous fix missed one instance of "device" in
    the driver local debug code. Harmless unless you tweak the #define's in
    there but still work fixing.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0f539755b8df3db81715d9c7fb67ba375f0330f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 19:43:54 2005 -0700

    [PATCH] ppc32: Fix sleep on old 101 PowerBook
    
    A typo in the machine table incorrectly mark the 101 PowerBook as
    needing explicit callback from the video driver to enable sleep mode. I
    did not implement that mecanism for chipsest older than r128, so we need
    to mark this machine as always beeing able to sleep for now.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7eb8073ecc8251530ebbd9be29cc33e54d37bdc2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 18:54:23 2005 -0700

    [PATCH] ppc32: Small build fix for alsa powermac
    
    My newer iMac mini driver doesn't build with verbose debug enabled.
    
    This fixes it, and removes an erroneous error printk (since it's normal
    on some machine to not find some gpios on the "first try").
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15fd56867b6b94dc829d880bc078428eb41859c8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 18:22:34 2005 -0700

    [PATCH] ppc32: Workaround a cache flush issue on sleep
    
    We are experiencing a problem when flushing the CPU caches before sleep
    on some laptop models using the 750FX CPU rev 1.X. While I haven't been
    able to figure out a proper explanation for what's going on, I do have a
    workaround that seem to work reliably and allows those machine to sleep
    and wakeup properly again.
    
    I'll re-update that code if/when I ever find exactly what is happening
    with those CPU revisions.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69b528936b702d4c13ffa0d14215a029dc754e50
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Sun May 1 14:47:15 2005 -0500

    [SCSI] call correct scsi_done function in scsi_dispatch_cmd
    
    scsi_dispatch_cmd currently calls scsi_done when the device is in the
    SDEV_DEL state, but at this point the command has not had a timer added
    to it (this is done a couple lines down) so scsi_done just returns and
    the command is lost. The attached patch made against 2.6.12-rc3 calls
    __scsi_done in this case so the comamnd will be returned upwards.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7da21a02b3587157bd43910ea6d4c76661228ebb
Author: Jens Axboe <axboe@suse.de>
Date:   Sun May 1 12:12:52 2005 -0700

    [PATCH] Avoid unnecessary ide-cd cache flushes
    
    Only issue a cdrom cache flush if we've done write to the drive.  The
    ->media_written() flag keeps track of that.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76530da1a9e8ce05963b1f49a098eddc6ec6c534
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] sound/oss/sonicvibes.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c207e769297946a0adec45225c6999f1299dde3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/input/joystick/spaceorb.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dec63bab860cc60cc444faa0ac459f1b53545ff
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/pnp/pnpacpi/rsparser.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 390725c36d220f5ca0c13b8927ac9c758ae1e4ad
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/video/radeonfb.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e3e98d1dcf944b999757b769d910f2b506ca5b9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:29 2005 -0700

    [PATCH] drivers/pnp/pnpbios/rsparser.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 408b664a7d394a5e4315fbd14aca49b042cb2b08
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:29 2005 -0700

    [PATCH] make lots of things static
    
    Another large rollup of various patches from Adrian which make things static
    where they were needlessly exported.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c31403a1f5a761599df38bcc2d6ba94f24320c33
Author: Cosmin Nicolaescu <can29@bandersnatch.cs.drexel.edu>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] Documentation: remove super-{nr, max} to reflect fs/super.c
    
    The patch updates the documentation for /proc.  super-nr and super-max have
    been dropped from the kernel since 2.4.9 due to minor numbering issues.
    This change was not documented in the documentation.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd4a3244941ed74fffc24b64857977270e6f64e2
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] docbook: Tell users to install xmlto, not stylesheets
    
    We have at least two users which were confused by these messages, myself
    included.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fa35166c540073a2c6e450683c776f68e8b5569
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] DocBook: fix html link
    
    The start page for each book has changed from book1.html to index.html.
    Update our generated links acocrdingly.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2948e57d94bd2d2fb6d4e89d89f0bd0ddaee0513
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] Docbook: use custom stylesheet
    
    With the custom stylesheet, functions are rendered using ANSI-C syntax and
    xmlto is a bit quieter.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b0c2d989cc60db1767481386ca912e99807eddb
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] DocBook: Use xmlto to process the DocBook files.
    
    xmlto uses standared XSLT templates to generate manpages, (x)html pages, and
    XML FO files which can be processed with passivetex.  This is much faster than
    using jadetex for everything.  This patch also reduces the number of
    kernel-specific scripts that are needed to generate documentation.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac9296f95228f50d112e6caec3b461fd816de084
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] DocBook: remove obsolete templates
    
    As the author of tulip-user and via-audio docbooks, I can say that they are
    out of date and should be deleted.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c73894c1e1160296552d8713e88bc76eac43beba
Author: Rich Walker <rw@shadow.org.uk>
Date:   Sun May 1 08:59:26 2005 -0700

    [PATCH] DocBook: use <informalexample> for examples
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67be2dd1bace0ec7ce2dbc1bba3f8df3d7be597e
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:26 2005 -0700

    [PATCH] DocBook: fix some descriptions
    
    Some KernelDoc descriptions are updated to match the current code.
    No code changes.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6013d5445f9a6d0b28090027868f455c5012d1cc
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] DocBook: fix <void/> xml tag
    
    This fix is needed to create valid XML.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4dc3b16ba18c0f967ad100c52fa65b01a4f76ff0
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] DocBook: changes and extensions to the kernel documentation
    
    I have recompiled Linux kernel 2.6.11.5 documentation for me and our
    university students again.  The documentation could be extended for more
    sources which are equipped by structured comments for recent 2.6 kernels.  I
    have tried to proceed with that task.  I have done that more times from 2.6.0
    time and it gets boring to do same changes again and again.  Linux kernel
    compiles after changes for i386 and ARM targets.  I have added references to
    some more files into kernel-api book, I have added some section names as well.
     So please, check that changes do not break something and that categories are
    not too much skewed.
    
    I have changed kernel-doc to accept "fastcall" and "asmlinkage" words reserved
    by kernel convention.  Most of the other changes are modifications in the
    comments to make kernel-doc happy, accept some parameters description and do
    not bail out on errors.  Changed <pid> to @pid in the description, moved some
    #ifdef before comments to correct function to comments bindings, etc.
    
    You can see result of the modified documentation build at
      http://cmp.felk.cvut.cz/~pisa/linux/lkdb-2.6.11.tar.gz
    
    Some more sources are ready to be included into kernel-doc generated
    documentation.  Sources has been added into kernel-api for now.  Some more
    section names added and probably some more chaos introduced as result of quick
    cleanup work.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 333f981720d619e2038b980a55ad01b10580eb9f
Author: Richard Drummond <evilrich@rcdrummond.net>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] Clean-up and bug fix for tdfxfb framebuffer size detection
    
    Attached is a patch against 2.6.11.7 which tidies up the tdfxfb framebuffer
    size detection code a little and fixes the broken support for Voodoo4/5
    cards.  (I haven't tested this on a Voodoo5, however, because I don't have
    the hardware).
    
    Signed-off-by: Richard Drummond <evilrich@rcdrummond.net>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fbe9cafff72799700713e6a9d5a4ec7191e8d19
Author: Richard Drummond <evilrich@rcdrummond.net>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] Better PLL frequency matching for tdfxfb driver
    
    Improve the PLL frequency matching in the tdfxfb driver.  Instead of
    requiring 64260 iterations to obtain the closest supported PLL frequency,
    this code does it with the same degree of accuracy in at most 768
    iterations.
    
    Signed-off-by: Richard Drummond <evilrich@rcdrummond.net>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c2f891cb64b0b9c8d389da97c221ee4288f1307
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] imxfb: Add Freescale i.MX framebuffer driver
    
    This patch adds support for the framebuffer on the freescale i.MX SOC
    architecture.  The driver has been tested on the mx1ads board, the pimx1 board
    and another custom board with different displays.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db9f1d9daa2f775a0f7d1a0d2ca4722c1da50158
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] i810fb: Fix default monitor sync timings
    
    - Increase error message verbosity with respect to monitor timings.
    
    - Fix default sync timings
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14c6f52f607edd79e2969548c69ec311defdc17d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] intelfb: Remove intelfbdrv.h
    
    Ingo Oeser noticed that all that intelfbdrv.h contains are prototypes for
    static functions - and such prototypes don't belong into header files.
    
    This patch therefore removes drivers/video/intelfb/intelfbdrv.h and moves the
    prototypes to intelfbdrv.c .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 306958e8e8d150b3e8bf13f66f3a6e9be7ee75ff
Author: Adrian Bunk <bunk@fs.tum.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] fbcon: Fix check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f76be80d96f60adfc91f2acf22b146ce0e3072f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] fbdev: edid.h cleanups
    
    This patch removes some completely unused code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 917bb0771aa077f62a3de75028a45f243d3954a8
Author: Antonino A. Daplas <adaplas@hotpop.com>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] nvidiafb: ioremap and i2c fixes
    
    - Add 'vram' option to specify amount of video RAM to remap
    - Limit remap size to 64 MIB
    - Use info->screen_size for remapped RAM
    - Fix misplaced label in failure path
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7149437669f79b497830e643a2b13d26a017b038
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] fbdev: Batch cmap changes at driver level
    
    This patch adds to the fbdev interface a set_cmap callback that allow the
    driver to "batch" palette changes.  This is useful for drivers like
    radeonfb which might require lenghtly workarounds on palette accesses, thus
    allowing to factor out those workarounds efficiently.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b052d8bb3ad9108489e7475868e14372774ca08
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] Altix ioc4 serial - Arm the read timeout timer before the first read
    
    Arm the read timeout timer before the first read.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68985e486b708671a7c7d0b4de6d94a1547d1351
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - small uart setup mods
    
    Small mods for setting up the uart - parity, flow control
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cb2875f8d7e392982229094ad3b6d2f213f48da
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - set a better timeout/threshold
    
    Set the timeout and threshold to better values.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 149733d4e274ce1add3399cabdb243116ebfdf79
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - set hfc from ioctl
    
    Allow hardware flow control to be set from an ioctl.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10e92060295ded7b8feac1ee57bb2135ea9ac207
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] saa7134: Add OEM version of already supported card
    
    Add device table support for the LR214WF card.
    
    The driver will say it's a FlyTV, simply because the name strings are
    stored with the card design data, not the device ID data.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe55c452368af263a9beec38ed29f6be85280524
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] ext3: remove unnecessary race then retry in ext3_get_block
    
    The extra race-with-truncate-then-retry logic around
    ext3_get_block_handle(), which was inherited from ext2, becomes unecessary
    for ext3, since we have already obtained the ei->truncate_sem in
    ext3_get_block_handle() before calling ext3_alloc_branch().  The
    ei->truncate_sem is already there to block concurrent truncate and block
    allocation on the same inode.  So the inode's indirect addressing tree
    won't be changed after we grab that semaphore.
    
    We could, after get the semaphore, re-verify the branch is up-to-date or
    not.  If it has been changed, then get the updated branch.  If we still
    need block allocation, we will have a safe version of the branch to work
    with in the ext3_find_goal()/ext3_splice_branch().
    
    The code becomes more readable after remove those retry logic.  The patch
    also clean up some gotos in ext3_get_block_handle() to make it more
    readable.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faf8b24968ce6392ea68d9afc7de1ffbc38c1f6c
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] v4l: msp3400 update
    
    msp3400 update: Fix and enable "simpler" mode, some other minor fixes.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9990d744bea7d28e83c420e2c9d524c7a8a2d136
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] dvb: cx22702 frontend driver update
    
    update cx22702 fe driver, add support for using the dvb pll lib, enable
    cx22702 support in cx88-dvb.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1622c3fcf4c1c6c8267938f366ecd2a348d67d93
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] cx88-dvb oops fix
    
    Fixup error path, without that one the driver kills the machine by oopsing
    in the IRQ handler in case the frontend initialization fails.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8e08a8466c4ac5f61b4bdb6338fd97eedb9c9e8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] reiserfs endianness: sanitize reiserfs_key union
    
    Since we only access reiserfs_key ->u.k_offset_v2 guts in four helper
    functions, we are free to sanitize those, as long as
    
    - layout of the structure is unchanged (it's on-disk object)
    
    - behaviour of these helpers is same as before.
    
    Patch kills the mess with endianness-dependent bitfields and replaces them
    with a single __le64.  Helpers are switched to straightforward shift/and/or.
    
    Benefits:
    
    - exact same definitions for little- and big-endian architectures; no ifdefs
      in sight.
    
    - generate the same code on little-endian and improved on big-endian.
    
    - doesn't rely on lousy bitfields handling in gcc codegenerator.
    
    - happens to be standard C (unsigned long long is not a valid type for a
      bitfield; it's a gccism and not well-implemented one, at that).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b9f5829e6e3af44f20c681e26524c637d4f82ff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] reiserfs endianness: comp_short_keys() cleanup
    
    comp_short_keys() massaged into sane form, which kills the last place where
    pointer to in_core_key (or any object containing such) would be cast to or
    from something else.  At that point we are free to change layout of
    in_core_key - nothing depends on it anymore.
    
    So we drop the mess with union in there and simply use (unconditional) __u64
    k_offset and __u8 k_type instead; places using in_core_key switched to those.
    That gives _far_ better code than current mess - on all platforms.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8cc936f6295bba23513a49d858ea82f64982faf
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:18 2005 -0700

    [PATCH] reiserfs endianness: fix endianness bugs
    
    fixes for a couple of bugs exposed by the above: le32_to_cpu() used on 16bit
    value and missing conversion in comparison of host- and little-endian values.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e8962be915bacc1d70e4849a075041838d60a3f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:18 2005 -0700

    [PATCH] reiserfs endianness: annotate little-endian objects
    
    little-endian objects annotated as such; again, obviously no changes of
    resulting code, we only replace __u16 with __le16, etc.  in relevant places.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a3a16f2ef6f335286e2b2bf8284b0ab4ff38ec0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] reiserfs endianness: clone struct reiserfs_key
    
    struct reiserfs_key cloned; (currently) identical struct in_core_key added.
    Places that expect host-endian data in reiserfs_key switched to in_core_key.
    Basically, we get annotation of reiserfs_key users and keep the resulting tree
    obviously equivalent to original.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d46aa455dd5457fdbebad17db4ff4df655cbfbae
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] autofs4: bump version number
    
    Bump autofs4 version so we know what's going on.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a9720ce73c9247e5262922d65e90444ea75eb50
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] autofs4: tree race fix
    
    For tree mount maps, a call to chdir or chroot, to a directory above the
    moint point directories at a certain time during the expire results in the
    expire incorrectly thinking the tree is not busy.  This patch adds a check
    to see if the filesystem above the tree mount points is busy and also locks
    the filesystem during the tree mount expire to prevent the race.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4dcd00b18118d174c4b8d838c11f437f0af3c20c
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] autofs4: wait order fix
    
    It's possible for an event wait request to arive before the event
    requestor.  If this happens the daemon never gets notified and autofs
    hangs.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 945b092011c6af71a0107be96e119c8c08776f3f
Author: Colin Leroy <colin@colino.net>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] hfs, hfsplus: don't leak s_fs_info and fix an oops
    
    This patch fixes the leak of sb->s_fs_info in both the HFS and HFS+
    modules.  In addition to this, it fixes an oops happening when trying to
    mount a non-hfsplus filesystem using hfsplus.  This patch is from Roman
    Zippel, based off patches sent by myself.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 954d3e95369cf73b4bc1e570729f68264a0e6fe0
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] aio: optimize io_submit_one()
    
    This patch optimizes io_submit_one to call aio_run_iocb() directly if
    ctx->run_list is empty.  When the list is empty, the operation of adding to
    the list, then call to __aio_run_iocbs() is unnecessary because these
    operations are done in one atomic step.  ctx->run_list always has only one
    element in this case.  This optimization speeds up industry standard db
    transaction processing benchmark by 0.2%.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 644d3a088a3b862ed0b57c286cf58a6bd338ce08
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: clean up debug code
    
    Clean up code that was previously used for debug purpose.  Remove aio_run,
    aio_wakeups, iocb->ki_queued and iocb->ki_kicked.  Also clean up unused
    variable count in __aio_run_iocbs() and debug code in read_events().
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bf69b2a06090c01c27f25ea5cd1440f7bf9256f
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: ring wrapping simplification
    
    Since the tail pointer in aio_ring structure never wrap ring size more than
    once, so a simple compare is sufficient to wrap the index around.  This avoid
    a more expensive mod operation.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 212079cf4ee99e492a57b817e796825d423a30bb
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: remove superfluous kiocb member initialization
    
    This patch removes superfluous kiocb member initialization in the AIO
    allocation and deallocation path.  For example, in really_put_req(),
    right before kiocb is returned to slab, 5 variables are reset to NULL.
    The same variables will be initialized at the kiocb allocation time,
    so why bother reset them knowing that they will be set to valid data
    at alloc time?  Another example: ki_retry is initialized in __aio_get_req,
    but is initialized again in io_submit_one.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efcd5e3ab089496865571d22443dd3f514dae60c
Author: Emanuele Giaquinta <emanuele.giaquinta@gmail.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] Makefile: fix for compatibility with *emacs ctags
    
    I've noticed that, starting from linux-2.6.12-rc1, in the top Makefile the
    "cmd_tags" variable has been changed in a way incompatible with *emacs
    ctags.  Since the "--extra" option exists only in "exuberant ctags", it
    should be included in the CTAGSF shell variable.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16f31113a614a35acc2da64f4ae39ab0ed7e194f
Author: Yum Rayan <yum.rayan@gmail.com>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] serial_cs: Reduce stack usage in serial_event()
    
    This patch reduces the stack usage of the function serial_event() in
    serial_cs from 2212 to 228.  I used a patched version of gcc 3.4.3 on i386
    with -fno-unit-at-a-time disabled.
    
    This patch is only compile tested.
    
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Yum Rayan <yum.rayan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbcf31ba68c92b23ac3f874c4d516bacd5d7518a
Author: Roland Dreier <roland@topspin.com>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] fix include order in mthca_memfree.c
    
    Fix order of #include lines in mthca_memfree.c
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ed20e1ad521b5f5df61bf6559ae60738e393741
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] convert that currently tests _NSIG directly to use valid_signal()
    
    Convert most of the current code that uses _NSIG directly to instead use
    valid_signal().  This avoids gcc -W warnings and off-by-one errors.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5bdd883a189243541e7a132385580703b049102
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:13 2005 -0700

    [PATCH] new valid_signal() function
    
    This patch adds a new function valid_signal() that tests if its argument is
    a valid signal number.
    
    The reasons for adding this new function are:
    
    - some code currently testing _NSIG directly has off-by-one errors.
      Using this function instead avoids such errors.
    
    - some code currently tests unsigned signal numbers for <0 which is
      pointless and generates warnings when building with gcc -W.  Using this
      function instead avoids such warnings.
    
    I considered various places to add this function but eventually settled on
    include/linux/signal.h as the most logical place for it.  If there's some
    reason this is a bad choice then please let me know (hints as to a better
    location are then welcome of course).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c72d46d98e4eb16f1a1b38eba94cc3aa8022cfa
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Sun May 1 08:59:13 2005 -0700

    [PATCH] Fix Tpm driver -- Maintainers entry
    
    This patch adds the maintainers entry.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d87e14c236d6c4cab66d87cf0bc1e0f0375d308
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] consolidate sys_shmat
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 434498d5323445b59167fd7aa5633b74ebbce901
Author: Andreas Schwab <schwab@suse.de>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] sn_console: make sal_console_uart static again
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 882fe011a92fa4fc31ca6cc95b279f7e4e52935c
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] ipmi: fix a deadlock
    
    Correct an issue with the IPMI message layer taking a lock and calling
    lower layer driver.  If an error occrues at the lower layer the lock can be
    taken again causing a deadlock.  The lock is released before calling the
    lower layer.
    
    Signed-off-by: David Griego <dgriego@mvista.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dbf68f97d585265eaadd15aea308efd9ae39d34
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:11 2005 -0700

    [PATCH] ipmi: enable interrupts on the BT driver
    
    Enable interrupts for a BT interface.  There is a specific register that
    needs to be set up to enable interrupts that also must be modified to clear
    the irq.
    
    Also, don't reset the BMC on a BT interface.  That's probably not a good
    idea as the BMC may be performing other important functions and a reset
    should only be a last resort.  Also, that register is also used to
    enable/disable interrupts to the BT; modifying it may screw up the
    interrupts.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec26d79f4f5822283e0bffa44a542fd13c5146e4
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:11 2005 -0700

    [PATCH] ipmi: fix watchdog so the device can be reopened on an unexpected close
    
    If there is an unexpected close, still allow the watchdog interface to be
    re-opened on the IPMI watchdog.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35bc37a0e0979a091bcf5d9161ffe935b3aa998c
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] IPMI: fix for handling bad ACPI data
    
    If the ACPI register bit width is zero (an invalid value) assume it is the
    default spacing.  This avoids some coredumps on invalid data and makes some
    systems work that have broken ACPI data.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9206880198589670dfc33feb9d2e903c3492701f
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] IPMI: fix for handling bad IPMI DMI data
    
    Ignore the bottom bit of the base address from the DMI data.  It is
    supposed to be set to 1 if it is I/O space.  Few systems do this, but this
    enables the ones that do set it to work properly.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5717ffbe16815db229a66fee824c2190cb306734
Author: aquynh@gmail.com <aquynh@gmail.com>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] dontdiff file sorted in alphabet order
    
    Documentation/dontdiff is a little messy.  Here is a patch to sort the
    content of that file in alphabetical
    
    Signed-off-by: Nguyen Anh Quynh <aquynh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f9f974a64dc3de554aa1977bf108334436e47b
Author: Edward Shishkin <edward@namesys.com>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] reiserfs: journal_init fix
    
    This fixes segmentation fault when specifying bad journal device via
    a mount option.
    
    Don't pass a zero pointer to bdevname() if filp_open() returns error.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 439bd3708792e31057db424d1165473122d531a3
Author: Nicolas Boichat <nicolas@boichat.ch>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] Leadtek Winfast remote controls
    
    Add missing button codes for the Leadtek Winfast remote controls.
    
    Signed-off-by: Nicolas Boichat <nicolas@boichat.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f78fc874f42f63a460bcebc2aeb98db526280d1c
Author: Vinay K Nallamothu <vinay.nallamothu@gsecone.com>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] __attribute__ placement fixes
    
    The variable attributes "packed" and "align" when used with struct, should
    have the following order:
    
    struct ... {...} __attribute__((packed)) var;
    
    This patch fixes few instances where the variable and attributes are placed
    the other way around and had no effect.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e49332bd12e92da2df6d002f857ec62675ba2648
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] misc verify_area cleanups
    
    There were still a few comments left refering to verify_area, and two
    functions, verify_area_skas & verify_area_tt that just wrap corresponding
    access_ok_skas & access_ok_tt functions, just like verify_area does for
    access_ok - deprecate those.
    
    There was also a few places that still used verify_area in commented-out
    code, fix those up to use access_ok.
    
    After applying this one there should not be anything left but finally
    removing verify_area completely, which will happen after a kernel release
    or two.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a71c1ab50a2a0f4dd9834bf5a917a2f064535c6b
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] consolidate SIGEV_PAD_SIZE
    
    Discussing with Matthew Wilcox some of his outstanding patches lead me to
    this patch (among others).
    
    The preamble in struct sigevent can be expressed independently of the
    architecture.
    
    Also use __ARCH_SI_PREAMBLE_SIZE on ia64.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 696f9486d0207d499391004f5bc9bd7c0e6ae82f
Author: Joel Becker <Joel.Becker@oracle.com>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] hangcheck-timer: Update to 0.9.0.
    
    I recently realized that the in-kernel copy of hangcheck-timer was quite
    stale.  Here's the latest.  It adds support for s390, ppc64, and ia64 too.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a40920b42ae232fac514cc4a1eb92996114af340
Author: Bill Nottingham <notting@redhat.com>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] vgacon: set vc_hi_font_mask correctly
    
    When allocating a new VC with vgacon_init(), the font is shared across all
    the VGA consoles.  However, the font mask was always set to the default
    value of zero in visual_init(), even if we were using 512 character fonts
    at the time.
    
    Moreover, code in vgacon.c:vga_do_font_op() didn't reset the mask if the
    console driver thinks it's already in 512 character mode.  This means that
    to *fix* it, you'd actually have to take the console out of 512 character
    mode and then set it back.
    
    The attached sets vc_hi_font_mask in vgacon_init() for any new consoles
    opened if the vgacon driver is already in 512 character mode, solving this.
    
    This bug goes back to 2.4.18 at least, probably earlier.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 127144df4ce817ad648af15a3983c8d52aacf670
Author: Jan Kara <jack@suse.cz>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] Fix rewriting on a full reiserfs filesystem
    
    Allow rewriting of a file and extending a file upto the end of the
    allocated block on a full filesystem.
    
    From: Chris Mason <mason@suse.com>
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40be0c28b33ff0821594a3fa7126354dfe6eccd1
Author: Lars Marowsky-Bree <lmb@suse.de>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] nbd: Don't create all MAX_NBD devices by default all the time
    
    This patches adds the "nbds_max" parameter to the nbd kernel module, which
    limits the number of nbds allocated.  Previously, always all 128 entries
    were allocated unconditionally, which used to waste resources and
    needlessly flood the hotplug system with events.  (Defaults to 16 now.)
    
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4750e2c0c59e0c84c6c036b3d96ebd88365ae7ee
Author: Joe Korty <joe.korty@ccur.com>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] add EOWNERDEAD and ENOTRECOVERABLE version 2
    
    Add EOWNERDEAD and ENOTRECOVERABLE to all architectures.  This is to
    support the upcoming patches for robust mutexes.
    
    We normally don't reserve parts of the name/number space for external
    patches, but robust mutexes are sufficiently popular and important to
    justify it in this case.
    
    Signed-off-by: Joe Korty <joe.korty@ccur.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1181c1f923c349acaa01bca40fe600584f265132
Author: Jens Axboe <axboe@suse.de>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] noop-iosched: kill O(N) merge scan
    
    Profiling hit rates on merging shows that the last merge hint works
    extremely well for most work loads.  So lets kill the linear merge scan in
    noop-iosched, so it provides O(1) run time for any operation.
    
    Testing credits go to Ken Chen from Intel.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41f11a4fa378201e902892130b11d78cf7cf8e10
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] kallsyms C_SYMBOL_PREFIX support
    
    kallsyms does not consider SYMBOL_PREFIX of C.  Consequently it does not
    work on architectures using that prefix character (h8300, v850).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c9e7376bed151d1655c12d2d5f5cc96bfb83dbd
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] LifeView FlyTV Platinum FM: GPIO usage
    
    This is take two of a patch that should have appeared two days ago, before
    yesterday's "remote control" patch for the same card.
    
    This patch sets unconnected GPIO to Output to keep them from floating (just
    good driver writing practice, being nice to the chip), and uses GPIO16 to
    switch TV vs.  FM - this pin switches inputs onto the tuner, as well as the
    audio output from the tuner into the 7135 SIF input.  Consequently, FM
    radio support is being un-commented because it's now working (sort of, see
    below).
    
    These two patches get the card almost fully operational; there appears to
    be a bug in tda8290.c remaining that puts an offset onto the tuned
    frequency in FM radio mode.  We're investigating.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c8b971ebb21dc33271c38d17fd58b8072009dc5
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] LifeView FlyTV Platinum FM: Remote Control support
    
    Subject says it ...  this card's IR microcontroller design and attachment
    are compatible to the company's previous designs, so the patch was as
    simple as it gets.
    DESC
    LifeView FlyTV Platinum FM: GPIO usage
    EDESC
    From: Peter Missel <peter.missel@onlinehome.de>
    
    This is take two of a patch that should have appeared two days ago, before
    yesterday's "remote control" patch for the same card.
    
    This patch sets unconnected GPIO to Output to keep them from floating (just
    good driver writing practice, being nice to the chip), and uses GPIO16 to
    switch TV vs.  FM - this pin switches inputs onto the tuner, as well as the
    audio output from the tuner into the 7135 SIF input.  Consequently, FM
    radio support is being un-commented because it's now working (sort of, see
    below).
    
    These two patches get the card almost fully operational; there appears to
    be a bug in tda8290.c remaining that puts an offset onto the tuned
    frequency in FM radio mode.  We're investigating.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a3bb3017383fbb6fe56431d17f60bd0d50f0717
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] reiserfs: make resize option auto-get new device size
    
    It's trivial for the resize option to auto-get the underlying device size,
    while it's harder for the user.  I've copied the code from jfs.
    
    Since of the different reiserfs option parser (which does not use the
    superior match_token used by almost every other filesystem), I've had to
    use the "resize=auto" and not "resize" option to specify this behaviour.
    Changing the option parser to the kernel one wouldn't be bad but I've no
    time to do this cleanup in this moment.
    
    Btw, the mount(8) man page should be updated to include this option.  Cc
    the relevant people, please (I hope I cc'ed the right people).
    
    Cc: <reiserfs-dev@namesys.com>
    Cc: <reiserfs-list@namesys.com>
    Cc: <mtk-manpages@gmx.net>
    Cc: Alex Zarochentsev <zam@namesys.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a83f1fe27f7252a2b73b4f22066e92bf99bd595b
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] Update RCU documentation
    
    Update the RCU documentation to allow for the new synchronize_rcu() and
    synchronize_sched() primitives.  Fix a few other nits as well.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbd568a3e61a7decb8a754ad952aaa5b5c82e9e5
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:04 2005 -0700

    [PATCH] Change synchronize_kernel to _rcu and _sched
    
    This patch changes calls to synchronize_kernel(), deprecated in the earlier
    "Deprecate synchronize_kernel, GPL replacement" patch to instead call the new
    synchronize_rcu() and synchronize_sched() APIs.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b06e818985d139fd9e82c28297f7744e1b484e1
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:04 2005 -0700

    [PATCH] Deprecate synchronize_kernel, GPL replacement
    
    The synchronize_kernel() primitive is used for quite a few different purposes:
    waiting for RCU readers, waiting for NMIs, waiting for interrupts, and so on.
    This makes RCU code harder to read, since synchronize_kernel() might or might
    not have matching rcu_read_lock()s.  This patch creates a new
    synchronize_rcu() that is to be used for RCU readers and a new
    synchronize_sched() that is used for the rest.  These two new primitives
    currently have the same implementation, but this is might well change with
    additional real-time support.  Both new primitives are GPL-only, the old
    primitive is deprecated.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 512345be2549308b8ae8e85a3ff7f6d56a38e5f6
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] Add deprecated_for_modules
    
    Add a deprecated_for_modules macro that allows symbols to be deprecated only
    when used by modules, as suggested by Andrew Morton some months back.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66cf8f1443301a1d5bc9c21709e4264e6919a3e1
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] kernel/rcupdate.c: make the exports EXPORT_SYMBOL_GPL
    
    The gpl exports need to be put back.  Moving them to GPL -- but in a
    measured manner, as I proposed on this list some months ago -- is fine.
    Changing these particular exports precipitously is most definitely -not-
    fine.  Here is my earlier proposal:
    
    	http://marc.theaimsgroup.com/?l=linux-kernel&m=110520930301813&w=2
    
    See below for a patch that puts the exports back, along with an updated
    version of my earlier patch that starts the process of moving them to GPL.
    I will also be following this message with RFC patches that introduce two
    (EXPORT_SYMBOL_GPL) interfaces to replace synchronize_kernel(), which then
    becomes deprecated.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f246315e1ab96c40978777d1e159820ecca45aa8
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] procfs: Fix hardlink counts for /proc/<PID>/task
    
    The current logic assumes that a /proc/<PID>/task directory should have a
    hardlink count of 3, probably counting ".", "..", and a directory for a
    single child task.
    
    It's fairly obvious that this doesn't work out correctly when a PID has
    more than one child task, which is quite often the case.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcf88e1163623e8e8ef2ba7feface9c826a890c9
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] procfs: Fix hardlink counts
    
    The pid directories in /proc/ currently return the wrong hardlink count - 3,
    when there are actually 4 : ".", "..", "fd", and "task".
    
    This is easy to notice using find(1):
    	cd /proc/<pid>
    	find
    
    In the output, you'll see a message similar to:
    
    find: WARNING: Hard link count is wrong for .: this may be a bug in your
    filesystem driver.  Automatically turning on find's -noleaf option.
    Earlier results may have failed to include directories that should have
    been searched.
    
    http://bugs.gentoo.org/show_bug.cgi?id=86031
    
    I also noticed that CONFIG_SECURITY can add a 5th: attr, and performed a
    similar fix on the task directories too.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f261b5f0dccd53ed3a9a95b55c36e24a698a92a
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sun May 1 08:59:02 2005 -0700

    [PATCH] move SA_xxx defines to linux/signal.h
    
    The attached patch moves the IRQ-related SA_xxx flags (namely, SA_PROBE,
    SA_SAMPLE_RANDOM and SA_SHIRQ) from all the arch-specific headers to
    linux/signal.h.  This looks like a left-over after the irq-handling code
    was consolidated.  The code was moved to kernel/irq/*, but the flags are
    still left per-arch.
    
    Right now, adding a new IRQ flag to the arch-specific header, like this
    patch does:
    http://cvs.sourceforge.net/viewcvs.py/*checkout*/alsa/alsa-driver/utils/patches/pcsp-kernel-2.6.10-03.diff?rev=1.1
    no longer works, it breaks the compilation for all other arches, unless you
    add that flag to all the other arch-specific headers too.  So I think such
    a clean-up makes sense.
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d59745ce3e7aa13856bca16d3bcbb95041775ff6
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:02 2005 -0700

    [PATCH] clean up kernel messages
    
    Arrange for all kernel printks to be no-ops.  Only available if
    CONFIG_EMBEDDED.
    
    This patch saves about 375k on my laptop config and nearly 100k on minimal
    configs.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd7619d6bf36564cf54ff7218ef54e558a741913
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:01 2005 -0700

    [PATCH] Exterminate PAGE_BUG
    
    Remove PAGE_BUG - repalce it with BUG and BUG_ON.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8538a7aa5527d02c7191ac5da124efadf6a2827
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:01 2005 -0700

    [PATCH] remove all kernel BUGs
    
    This patch eliminates all kernel BUGs, trims about 35k off the typical
    kernel, and makes the system slightly faster.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e43379f10b42194b8a6e1de342cfb44463c0f6da
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] nice and rt-prio rlimits
    
    Add a pair of rlimits for allowing non-root tasks to raise nice and rt
    priorities. Defaults to traditional behavior. Originally written by
    Chris Wright.
    
    The patch implements a simple rlimit ceiling for the RT (and nice) priorities
    a task can set.  The rlimit defaults to 0, meaning no change in behavior by
    default.  A value of 50 means RT priority levels 1-50 are allowed.  A value of
    100 means all 99 privilege levels from 1 to 99 are allowed.  CAP_SYS_NICE is
    blanket permission.
    
    (akpm: see http://www.uwsg.iu.edu/hypermail/linux/kernel/0503.1/1921.html for
    tips on integrating this with PAM).
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fc1427a01a9df3605e219c6de0c59c4639209a1
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] s390: cio documentation
    
    Synchronize documentation with current interface.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af6c8eed14a0c14791e2fbb4c7726755c1a637ca
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] s390: remove ioctl32 from crypto driver
    
    The ioctl32_conversion routines will be deprecated: Remove them from the
    crypto driver.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4beb37097b20b61054b15c56848e4ffcef093819
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: remove ioctl32 from dasdcmb
    
    The ioctl32_conversion routines will be deprecated: Remove them from dasd_cmb
    and handle the three cmb ioctls like all other dasd ioctls.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec5883abebb2e249ea8d318cb58fb4b2c269cf10
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: don't pad cdl blocks for write requests
    
    The first blocks on a cdl formatted dasd device are smaller than the blocksize
    of the device.  Read requests are padded with a 'e5' pattern.  Write requests
    should not pad the (user) buffer with 'e5' because a write request is not
    allowed to modify the buffer.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ed93c827eea181d87ce078cd1d671128c030b5a
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: enable write barriers in the dasd driver
    
    The DASD device driver never reorders the I/O requests and relies on the
    hardware to write all data to nonvolatile storage before signaling a
    successful write.  Hence, the only thing we have to do to support write
    barriers is to set the queue ordered flag.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f24acd4503270ed4c842c8fef0b71105285e0a06
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: dasd readonly attribute
    
    The independent read-only flags in devmap, dasd_device and gendisk are not
    kept in sync.  Use one bit per feature in the dasd driver and keep that bit in
    sync with the gendisk bit.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f0641ef74eaa71ed9aa9d19c4b741c2143d752
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: allow longer debug feature names
    
    The current limitation of 16 characters of the debug feature names turned out
    to be insufficient.  Increase it to 64 characters.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15439d74f621ff8252b53136d259781148e6e768
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: cmm guest sender id
    
    An arbitrary guest must not be allowed to trigger cmm actions.  Only one
    specific guest namely the one that serves as the resource monitor may send cmm
    messages.  Add a parameter that allows to specify the guest that may send
    messages.  z/VMs resource manager has the name 'VMRMSVM' which is the default.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b642ede47969d4180b0922d982777fe64379228
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: default storage key
    
    Provide an easy way to define a non-zero storage key at compile time.  This is
    useful for debugging purposes.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9e3735359ac2d74ee61c6f1e5724f4a6db570bf
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: fix memory holes and cleanup setup_arch
    
    The memory setup didn't take care of memory holes and this makes the memory
    management think there would be more memory available than there is in
    reality.  That causes the OOM killer to kill processes even if there is enough
    memory left that can be written to the swap space.
    
    The patch fixes this by using free_area_init_node with an array of memory
    holes instead of free_area_init.  Further the patch cleans up the code in
    setup.c by splitting setup_arch into smaller pieces.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b7e0706620e3947dc1685dfdbc1413404afb545
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: idle timer setup
    
    Fix overflow in calculation of the new tod value in stop_hz_timer and fix
    wrong virtual timer list idle time in case the virtual timer is already
    expired in stop_cpu_timer.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2c6678c858c5e54d95b996754adfb319cf65735
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: regenerate defconfig
    
    Regenerate the default configuration for s390.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c49be99ede1e3685a9817a564b4b1678d48e1b9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] uml ubd: handle readonly status
    
    Use the set_disk_ro() API when the backing file is read-only, to mark the disk
    read-only, during the ->open().  The current hack does not work when doing a
    mount -o remount.
    
    Also, mark explicitly the code paths which should no more be triggerable (I've
    removed the WARN_ON(1) things).  They should actually become BUG()s probably
    but I'll avoid that since I'm not so sure the change works so well.  I gave it
    only some limited testing.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acef2e55d2a1b59bb5610cacc546c1d1b5de2dc9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml: commentary about forking flag
    
    Add some commentary about UML internals, for a strange trick.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffa0aea681a5f3c8aecbb86f1cfd3486043805de
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml - hostfs: avoid buffers
    
    Use this:
    	.set_page_dirty = __set_page_dirty_nobuffers,
    
    We already dropped the inclusion of <linux/buffer_head.h>, and we don't have a
    backing block device for this FS.
    
    "Without having looked at it, I'm sure that hostfs does not use buffer_heads.
    So setting your ->set_page_dirty a_op to point at __set_page_dirty_nobuffers()
    is a reasonable thing to do - it'll provide a slight speedup."
    
    This speedup is one less spinlock held and one less conditional branch, which
    isn't bad.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b97b77cca627b2e3e6d0015e2e14b1d1c12de0c8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml: redo console locking
    
    Fix some console locking problems (including scheduling in atomic) and various
    reorderings and cleanup in that code.  Not yet ready for 2.6.12 probably.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80f9507886076de0cadfdf2b87701e68156829c2
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: fix syscall table by including $(SUBARCH)'s one, for x86-64
    
    Reuse asm-x86-64/unistd.h to build our syscall table, like x86-64 already
    does.
    
    Like for i386, we must add some #defines for all the (right!) changes UML does
    to x86-64 syscall table.
    
    Note: I noted a bogus:
    	[ __NR_sched_yield ] = (syscall_handler_t *) yield,
    
    while doing this patch (which could only be a workaround for some strange bug,
    but I would ignore this possibility).  I'm changing this without notice.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddcd6b175793839e51fdd55debb670a9f512c448
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: quick fix syscall table for x86_64
    
    Fix the moved syscall table for the x86_64 SUBARCH:
    
    - redirect __NR_chown and such to versions aware of 32-bit UIDs,
    
    - avoid the useless hack for sys_nfsservctl,
    
    - use sys_sendfile64 in the table rather than sys_sendfile.
    
    - __NR_uselib is sys_ni_syscall on x86_64 (which does not support A.OUT).
    
    - __NR_getrlimit is sys_getrlimit, not sys_old_getrlimit
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e7b83ffc67e15791d9bf8b2a18e4f5fd0eb69b8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: fix syscall table by including $(SUBARCH)'s one, for i386
    
    Split the i386 entry.S files into entry.S and syscall_table.S which is
    included in the previous one (so actually there is no difference between them)
    and use the syscall_table.S in the UML build, instead of tracking by hand the
    syscall table changes (which is inherently error-prone).
    
    We must only insert the right #defines to inject the changes we need from the
    i386 syscall table (for instance some different function names); also, we
    don't implement some i386 syscalls, as ioperm(), nor some TLS-related ones
    (yet to provide).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9c527163d31da9f616e989a90429729525c5233
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: move va_copy conditional def
    
    GCC 2.95 uses __va_copy instead of va_copy.  Handle it inside compiler.h
    instead of in a casual file, and avoid the risk that this breaks with a newer
    compiler (which it could do).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c16993d9009b4311f0e6088af38844eabc8b5e5b
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: inline empty proc
    
    Cleanup: make an inline of this empty proc.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c45166be3cc666ce88fe623ad79276c943e74eff
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: support AES i586 crypto driver
    
    We want to make possible, for the user, to enable the i586 AES implementation.
    This requires a restructure.
    
    - Add a CONFIG_UML_X86 to notify that we are building a UML for i386.
    
    - Rename CONFIG_64_BIT to CONFIG_64BIT as is used for all other archs
    
    - Tell crypto/Kconfig that UML_X86 is as good as X86
    
    - Tell it that it must exclude not X86_64 but 64BIT, which will give the
      same results.
    
    - Tell kbuild to descend down into arch/i386/crypto/ to build what's needed.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b05d85a87d9711f5f5f2eb05c79038d5d5ff1f44
Author: Rob Landley <rob@landley.net>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: workaround old problematic sed behaviour
    
    Old versions of sed from 1998 (predating the first release of gcc 2.95, but
    still in use by debian stable) don't understand the single-line version of the
    sed append command.  Since newer versions of sed still understand the...
    ahem, "vintage" form of the command, change our code to use that.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Acked-by: Ian McDonald <imcdnzl@gmail.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6aec3072833283a5e2ecf07318bd383a67321657
Author: Andree Leidenfrost <aleidenf@bigpond.net.au>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: fix handling of no fpx_regs
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Fix the error path, which is triggered when the processor misses the fpx
    regs (i.e.  the "fxsr" cpuinfo feature).  For instance by VIA C3 Samuel2.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e7a4f69e4ed328aa09ce48601073052557fa85d
Author: blaisorblade@yahoo.it <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: add nfsd syscall when nfsd is modular
    
    This trick is useless, because sys_ni.c will handle this problem by itself,
    like it does even on UML for other syscalls.
    
    Also, it does not provide the NFSD syscall when NFSD is compiled as a
    module, which is a big problem.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92eac95287d75f220a8bbef6646f51a6497c4b4c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: fix oops related to exception table
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Prevent the kernel from oopsing during the extable sorting, as it can do
    now, because the extable is in the readonly section of the binary.
    
    Jeff says: The exception table turned RO in 2.6.11-rc3-mm1 for some reason.
    Moving it causes it to land in the writable data section of the binary.
    
    Paolo says: This patch fixes a oops on startup, which can be easily
    triggered by compiling with CONFIG_MODE_TT disabled, and STATIC_LINK either
    disabled or enabled.  The resulting kernel will always Oops on startup,
    after printing this simple output:
    
    I've verified, by binary search on the BitKeeper repository (synced up as
    of 2.6.12-rc2), starting from the range 2.6.11-2.6.12-rc1, that this bug
    shows up on BitKeeper revisions in the range [@1.1994.11.168,+inf), i.e.
    starting from this:
    
    [PATCH] lib/sort: Replace insertion sort in exception tables
    
    Since UML does not use the exception table, it's likely that insertion sort
    didn't happen to write anything on the table.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31df7b7fc6182b6c4e5c3b77084d0c026b3ac613
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] hp100: fix card names
    
    Those cards really need A in their names. Otherwise it is pretty hard
    to find anything about them on the net.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 429e9c5eeb66fc272c15568849ad0b23689a4a06
Author: Alexander Nyberg <alexn@telia.com>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] x86_64: saved_command_line overflow fix
    
    This strcpy can run off the end of saved_command_line, and we don't need it any more anyway.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8059b2a292d59b6d94f9e3af93bf711f161c9476
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] x86-64: Handle empty E820 regions correctly
    
    Brings sanitize_e820_map() in x86-64 in sync with that of i386.
    
    x86_64 version was missing the changes from this patch.
    http://linux.bkbits.net:8080/linux-2.6/cset@3e5e4083Y3HevldZl5KCy94V4DcZww?nav=index.html|src/|src/arch|src/arch/i386|src/arch/i386/kernel|related/arch/i386/kernel/setup.c
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad6714230f2269d5d7db2cd1900fe7bfc7aa76dc
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] Linux 2.6.x VM86 interrupt emulation fixes
    
    Patch solves VM86 interrupt emulation deadlock on SMP systems.  The VM86
    interrupt emulation has been heavily tested and works well on UP systems
    after last update, but it seems to deadlock when we have used it on SMP/HT
    boxes now.
    
    It seems, that disable_irq() cannot be called from interrupts, because it
    waits until disabled interrupt handler finishes
    (/kernel/irq/manage.c:synchronize_irq():while(IRQ_INPROGRESS);).  This
    blocks one CPU after another.  Solved by use disable_irq_nosync.
    
    There is the second problem.  If IRQ source is fast, it is possible, that
    interrupt is sometimes processed and re-enabled by the second CPU, before
    it is disabled by the first one, but negative IRQ disable depths are not
    allowed.  The spinlocking and disabling IRQs over call to
    disable_irq_nosync/enable_irq is the only solution found reliable till now.
    
    Signed-off-by: Michal Sojka <sojkam1@control.felk.cvut.cz>
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9ba70535dc12d9eb57d466a2ecd749e16eca866
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] Increase number of e820 entries hard limit from 32 to 128
    
    The specifications that talk about E820 map doesn't have an upper limit on
    the number of e820 entries.  But, today's kernel has a hard limit of 32.
    With increase in memory size, we are seeing the number of E820 entries
    reaching close to 32.  Patch below bumps the number upto 128.
    
    The patch changes the location of EDDBUF in zero-page (as it comes after E820).
    As, EDDBUF is not used by boot loaders, this patch should not have any effect
    on bootloader-setup code interface.
    
    Patch covers both i386 and x86-64.
    
    Tested on:
    * grub booting bzImage
    * lilo booting bzImage with EDID info enabled
    * pxeboot of bzImage
    
    Side-effect:
    bss increases by ~ 2K and init.data increases by ~7.5K
    on all systems, due to increase in size of static arrays.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be9e68703c53fece406bc2e40976a5cfe2a8e77f
Author: Andi Kleen <ak@suse.de>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] x86_64: interrupt handling fix
    
    - Initialize workmask correctly on interrupt signal handling
    
    - Readd missing cli's in the interrupt return path.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c3b73b6f50a47601b1897deb9c6b4b5ecadf591
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] cpuid x87 bit on AMD falsely marked as PNI
    
    http://bugme.osdl.org/show_bug.cgi?id=4426
    
    vendor_id       : AuthenticAMD
    cpu family      : 6
    model           : 10
    model name      : AMD Athlon(tm) XP
    stepping        : 0
    cpu MHz         : 2204.807
    <snipped>
    cpuid level     : 1
    wp              : yes
    flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov
    pat pse36 mmx fxsr sse pni syscall mmxext 3dnowext 3dnow
    bogomips        : 4358.14
    
    We're marking bit 0 of extended function 0x80000001 cpuid as PNI support on
    AMD processors, when it actually denotes x87 FPU present.  Patch for i386
    and x86_64 below.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f1b381825411fd3d5c8323dd1be77438e19e192
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] hda_intel: Intel ESB2 support
    
    This adds the Intel ESB2 HD Audio DID to the hda_intel.c audio driver.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d24a439a6b2280357d62fb30a73350cf253bdb7
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] irq and pci_ids for Intel ICH7DH & ICH7-M DH
    
    This patch adds the Intel ICH7DH and ICH7-M DH DID's to the irq.c and
    pci_ids.h files.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35492df5ae0f36f717448b2aea908d3a8891d1c4
Author: john stultz <johnstul@us.ibm.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] i386: fix hpet for systems that don't support legacy replacement
    
    Currently the i386 HPET code assumes the entire HPET implementation from
    the spec is present.  This breaks on boxes that do not implement the
    optional legacy timer replacement functionality portion of the spec.
    
    This patch, which is very similar to my x86-64 patch for the same issue,
    fixes the problem allowing i386 systems that cannot use the HPET for the
    timer interrupt and RTC to still use the HPET as a time source.  I've
    tested this patch on a system systems without HPET, with HPET but without
    legacy timer replacement, as well as HPET with legacy timer replacement.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b7abc6fdcaf103f15e06c518ef0aec02a9c00e7
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] CPUID bug and inconsistency fix
    
    The recent support for K8 multicore was misported from x86-64 to i386, due
    to an unnecessary inconsistency between the CPUID code.  Sure, there is are
    no x86-64 VIA chips yet, but it should happen eventually.
    
    This patch fixes the i386 bug as well as makes x86-64 match i386 in the
    handing of the CPUID array.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6954ba2e8d344a07e066737827116eb7bc0fdcd
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] Enable write combining for server works LE rev > 6
    
    Enable write combining for server works LE rev > 6 per
    http://www.ussg.iu.edu/hypermail/linux/kernel/0104.3/1007.html
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48c88211a65bc30f030fe228bda30fda870deb90
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] x86: entry.S trap return fixes
    
    do_debug() and do_int3() return void.
    
    This patch fixes the CONFIG_KPROBES variant of do_int3() to return void too
    and adjusts entry.S accordingly.
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f7c354159b87dfbd9900f597d48d18755a9d16
Author: Jaya Kumar <jayalk@intworks.biz>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] x86 reboot: Add reboot fixup for gx1/cs5530a
    
    This patch by Jaya Kumar introduces a generic infrastructure to deal with
    x86 chipsets with nonstandard reset sequences, and adds support for the
    Geode gx1/cs5530a chipset.
    
    Signed-off-by: Jaya Kumar <jayalk@intworks.biz>
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67701ae9767534534d3710664037dfde2cc04935
Author: Jack F Vogel <jfv@bluesong.net>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] check nmi watchdog is broken
    
    A bug against an xSeries system showed up recently noting that the
    check_nmi_watchdog() test was failing.
    
    I have been investigating it and discovered in both i386 and x86_64 the
    recent change to the routine to use the cpu_callin_map has uncovered a
    problem.  Prior to that change, on an SMP box, the test was trivally
    passing because all cpu's were found to not yet be online, but now with the
    callin_map they are discovered, it goes on to test the counter and they
    have not yet begun to increment, so it announces a CPU is stuck and bails
    out.
    
    On all the systems I have access to test, the announcement of failure is
    also bougs...  by the time you can login and check /proc/interrupts, the
    NMI count is happily incrementing on all CPUs.  Its just that the test is
    being done too early.
    
    I have tried moving the call to the test around a bit, and it was always
    too early.  I finally hit on this proposed solution, it delays the routine
    via a late_initcall(), seems like the right solution to me.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd51f666fa591294bd7462447512666e61c56ea0
Author: H. J. Lu <hjl@lucon.org>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] i386/x86_64 segment register access update
    
    The new i386/x86_64 assemblers no longer accept instructions for moving
    between a segment register and a 32bit memory location, i.e.,
    
            movl (%eax),%ds
            movl %ds,(%eax)
    
    To generate instructions for moving between a segment register and a
    16bit memory location without the 16bit operand size prefix, 0x66,
    
            mov (%eax),%ds
            mov %ds,(%eax)
    
    should be used. It will work with both new and old assemblers. The
    assembler starting from 2.16.90.0.1 will also support
    
            movw (%eax),%ds
            movw %ds,(%eax)
    
    without the 0x66 prefix. I am enclosing patches for 2.4 and 2.6 kernels
    here. The resulting kernel binaries should be unchanged as before, with
    old and new assemblers, if gcc never generates memory access for
    
                   unsigned gsindex;
                   asm volatile("movl %%gs,%0" : "=g" (gsindex));
    
    If gcc does generate memory access for the code above, the upper bits
    in gsindex are undefined and the new assembler doesn't allow it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5b63d78f1e75f6c6f04862dfb2f2a4aeffafd4c
Author: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] fix i386 memcpy
    
    This patch shortens non-constant memcpy() by two bytes and fixes spurious
    out-of-line constant memcpy().
    
    # size vmlinux.org vmlinux
       text    data     bss     dec     hex filename
    3954591 1553426  236544 5744561  57a7b1 vmlinux.org
    3952615 1553426  236544 5742585  579ff9 vmlinux
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d637413f3f05b41f678f8004225b33b62274183f
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] ppc64: reverse prediction on spinlock busy loop code
    
    On our raw spinlocks, we currently have an attempt at the lock, and if we do
    not get it we enter a spin loop.  This spinloop will likely continue for
    awhile, and we pridict likely.
    
    Shouldn't we predict that we will get out of the loop so our next instructions
    are already prefetched.  Even when we miss because the lock is still held, it
    won't matter since we are waiting anyways.
    
    I did a couple quick benchmarks, but the results are inconclusive.
    
    	16-way 690 running specjbb with original code
    	# ./specjbb 3000 16 1 1 19 30 120
    	    ...
    	Valid run, Score is 59282
    
    	16-way 690 running specjbb with unlikely code
    	# ./specjbb 3000 16 1 1 19 30 120
    	    ...
    	Valid run, Score is 59541
    
    I saw a smaller increase on a JS20 (~1.6%)
    
    	JS20 specjbb w/ original code
    	# ./specjbb 400 2 1 1 19 30 120
    	   ...
    	Valid run, Score is 20460
    
    	JS20 specjbb w/ unlikely code
    	# ./specjbb 400 2 1 1 19 30 120
    	   ...
    	Valid run, Score is 20803
    
    Anton said:
    
    Mispredicting the spinlock busy loop also means we slow down the rate at which
    we do the loads which can be good for heavily contended locks.
    
    Note: There are some gcc issues with our default build and branch prediction,
    but a CONFIG_POWER4_ONLY build should emit them correctly.  I'm working with
    Alan Modra on it now.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d59dd4620fb8d6422555a9e2b82a707718e68327
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] use smp_mb/wmb/rmb where possible
    
    Replace a number of memory barriers with smp_ variants.  This means we won't
    take the unnecessary hit on UP machines.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d8d4d42f2d00eb65262b49f4edd4cf7ef4eb6fc
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] ppc64: use smp_mb and smp_wmb
    
    Use smp_mb and smp_wmb. In particular smp_wmb is lighter weight than wmb.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eeb24de431ac8c80fd13a2c479cd0eb51b70484e
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: enforce medium thread priority in hypervisor calls
    
    Calls into the hypervisor do not raise the thread priority.  Ensure we are
    running at medium priority upon entry to the hypervisor.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4005e4f661a9ec8d91720a6b570865d060afcaf
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: firmware workaround
    
    Recent gcc 4.0 testing uncovered a firmware issue.  Some properties are larger
    than 31 bytes and due to gcc 4.0s better stack allocation this overflow ran
    over non volatile register storage.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b88e927e8c38f4053680a3098325142017a37f0
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: remove unnecessary include
    
    We no longer use any ppcdebug stuff in a.out.h, so remove the define.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f95a5ae99eb8209ad8d9faeaada00600bd8027
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] ppc64: noexec fixes
    
    There were a few issues with the ppc64 noexec support:
    
    The 64bit ABI has a non executable stack by default.  At the moment 64bit apps
    require a PT_GNU_STACK section in order to have a non executable stack.
    
    Disable the read implies exec workaround on the 64bit ABI.  The 64bit
    toolchain has never had problems with incorrect mmap permissions (the 32bit
    has, thats why we need to retain the workaround).
    
    With these fixes as well as a gcc fix from Alan Modra (that was recently
    committed) 64bit apps work as expected.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d03853d566fb32c6bb8cab4bf2ecf53e692f001c
Author: Olof Johansson <olof@lixom.net>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] PPC64: Remove hot busy-wait loop in __hash_page
    
    It turns out that our current __hash_page code will do a very hot busy-wait
    loop waiting on _PAGE_BUSY to be cleared.  It even does ldarx/stdcx in the
    loop, which will bounce reservations around like crazy if there's more than
    one CPU spinning on the same PTE (or even another PTE in the same
    reservation granule).  The end result is that each fault takes longer when
    there's contention, which in turn increases the chance of another thread
    hitting the same fault and also piling up.  Not pretty.
    
    There's two options here:
    1. Do an out-of-line busy loop a'la spinlocks with just loads (no
       reserves)
    2. Just bail and refault if needed.
    
    (2) makes sense here: If the PTE is busy, chances are it's in flux anyway
    and the other code path making a change might just be ready to hash it.
    
    This fixes a stampede seen on a large-ish system where a multithreaded
    HPC app faults in the same text pages on several cpus at the same time.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66faf9845a05905d75da380767e93455f3e6d620
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] ppc64: tell firmware about kernel capabilities
    
    On pSeries systems, according to the platform architecture specs, we are
    supposed to be supplying a structure to firmware that tells firmware about
    our capabilities, such as which version of the data structures that
    describe available memory we are expecting to see.  The way we end up
    having to supply this data structure is a bit gross, since it was designed
    for AIX and doesn't suit us very well.  This patch adds the code to supply
    this data structure to the firmware.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58366af5861eee1479426380e3c91ecb334c301d
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: update to use the new 4L headers
    
    This patch converts ppc64 to use the generic pgtable-nopud.h instead of the
    "fixup" header.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0339ad77c4a06fa8529db17c91f790058e18b65b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: nvram cleanups
    
    - Fix
    
      arch/ppc64/kernel/nvram.c:342: warning: `part' might be used uninitialized in this function
    
    - Various codingstyle tweaks.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc3ec7503e693e05c01d85b664482d0f694429ab
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: Fix irq parsing on powermac
    
    When I tried Ben's patches to the powermac sound driver on my G5, I found
    that it was taking enormous numbers of sound DMA transmit interrupts.  This
    turned out to be because it was incorrectly configured as level-sensitive
    instead of edge-sensitive, which in turn was because the code that parses
    the interrupt tree that Open Firmware gives us was incorrectly assigning
    another device the same irq number as the sound DMA transmit interrupt
    (i.e.  1).
    
    This patch fixes the problem, in a somewhat quick and dirty way for now,
    but one which will work for all the machines we currently run on.
    Ultimately Ben and I want to do something more general and robust, but this
    should go in for 2.6.12.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb78cb72201985ae9269b723c82ea0f892048b9e
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: remove unused argument to create_slbe
    
    Remove vsid argument to create_slbe, since it's no longer used.
    
    Spotted by R Sharada.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b29f9d13e3cf0fe86bf7f82a3399c9e3caf58e5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc64: add PT_NOTE section to vDSO
    
    This patch from Roland adds a PT_NOTE section to both 32 and 64 bits vDSOs
    to expose the kernel version to glibc, thus avoiding a uname syscall on
    every launch.  This is equivalent to the patches Roland posted already for
    x86 and x86-64.
    
    Note: the 64 bits .note is actually using the 32 bits format.  This is
    normal.  The ELF spec specifies a different format for 64 bits .note, but
    for some reason, this was never properly implemented, the core dumps for
    example are all using 32 bits format .note, and binutils cannot even read a
    64 bits format .note.  Talking to our toolchain folks, they think we'd
    rather stick to 32 bits format .note everywhere and get the spec fixed some
    day ...
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 085e6fc96bcf239cab8adc600aab2452d75590b1
Author: Colin Leroy <colin@colino.net>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] pmac: save master volume on sleep
    
    Ben's patch that shutdowns master switch and restores it after resume
    ("pmac: Improve sleep code of tumbler driver") isn't enough here on an
    iBook (snapper chip).
    
    The master switch is correctly saved and restored, but somehow
    tumbler_put_master_volume() gets called just after
    tumbler_set_master_volume() and sets mix->master_vol[*] to 0.  So, on
    resuming, the master switch is reenabled, but the volume is set to 0.
    
    Here's a patch that also saves and restores master_vol.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f7b49d042abfbda71f41b8aff6e1bf7685c1f00
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc32: add sound support for Mac Mini
    
    This patch applies on top of my previous g5 related sound patches and adds
    support for the Mac Mini to the PowerMac Alsa driver.
    
    However, I haven't found any kind of HW support for volume control on this
    machine.  If it exist, it's well hidden.  That means that you probably want
    to make sure you use software with the ability to do soft volume control,
    or use Alsa 0.9 pre-release with the softvol plugin.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4be8dc7ff69182610b40a078b9815bcdf27e0c49
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc64: improve g5 sound headphone mute
    
    This patch fixes a couple more issues with the management of the GPIOs
    dealing with headphone and line out mute on the G5.  It should fix the
    remaining problems of people not getting any sound out of the headphone
    jack.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bdacf88ebd7969fecbbf4c5b388cc094871222e
Author: Dan Malek <dan@embeddededge.com>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: workaround for spurious IRQs on PQ2
    
    There is a problem with large amounts of spurious IRQs on PowerPC 82xx
    systems.
    
    The problem is corrected by adding sync at the end of cpm2_mask_and_ack.
    This may be needed on 8xx as well but has not yet been confirmed.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Dan Malek <dan@embeddedalley.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5812a77e5803468a5033be91af978be0f7a17d9
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: Fix address checking on lmw/stmw align exception
    
    The handling of misaligned load/store multiple instructions did not check
    to see if the address was ok to access before using __{get,put}_user().
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20cc8aff258eea5a2339107605ebea949fa6ecf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: Fix a sleep issues on some laptops
    
    Some earlier models of aluminium powerbooks and ibook G4s have a clock chip
    that requires some tweaking before and after sleep.  It seems that without
    that magic incantation to disable and re-enable clock spreading, RAM isn't
    properly refreshed during sleep.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 146a4b3bdfb5641bfbf975e29680b482b8b343ba
Author: Andreas Jaggi <andreas.jaggi@waterwave.ch>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] macintosh/adbhid.c: adb buttons support for aluminium PowerBook G4
    
    This patch adds support for the special adb buttons of the aluminium
    PowerBook G4.
    
    Signed-off-by: Andreas Jaggi <andreas.jaggi@waterwave.ch>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 616299afcebfb2228f45a95aac7e63704c3733fc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] ppc32: Fix IDE related crash on wakeup
    
    I noticed an occasional crash on wakeup from sleep on my powerbook
    (strangly never happened before, probably timing related) that appears to
    be due to a dangling interrupt while the chip is put to sleep and beeing
    reset on wakeup.
    
    This patch fixes is by disabling the irq in the ide pmac driver while
    asleep and only re-enable it after the chip has been fully reset.  This is
    safe to do so as the interrupt of these apple IDE cells is never shared.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a497aa20e5ea54fdee474192d6dc138b4832fc9e
Author: Chris Elston <chris.elston@radstone.co.uk>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] ppc32: add rtc hooks in PPC7D platform file
    
    This patch adds the hooks into the PPC7D platforms file to support the DS1337
    RTC device as the clock device for the PPC7D board.
    
    Signed-off-by: Chris Elston <chris.elston@radstone.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 630710e3f72b6a324a525f6e5db3f7985d0fc4a2
Author: Chris Elston <chris.elston@radstone.co.uk>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: fix for misreported SDRAM size on Radstone PPC7D platform
    
    This patch fixes the SDRAM output from /proc/cpuinfo.  The previous code
    assumed that there was only one bank of SDRAM, and that the size in the memory
    configuration register was the total size.
    
    Signed-off-by: Chris Elston <chris.elston@radstone.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 443a848cd30eb5bb5c1038e6371d83404775dcfc
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: refactor FPU exception handling
    
    Moved common FPU exception handling code out of head.S so it can be used by
    several of the sub-architectures that might of a full PowerPC FPU.
    
    Also, uses new CONFIG_PPC_FPU define to fix alignment exception handling
    for floating point load/store instructions to only occur if we have a
    hardware FPU.
    
    Signed-off-by: Jason McMullan <jason.mcmullan@timesys.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1c55dea0bb2df94aa2b01b0871cb02f2e206676
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: Fix errata for some G3 CPUs
    
    Some G3 CPUs can crash in funny way if a store from an FPU register
    instruction is executed on a register that has never been initialized since
    power on.  This patch fixes it by making sure all FP registers have been
    properly initialized at kernel boot and when waking from sleep.  It also makes
    the code that decides wether HID0_BTIC and HID0_DPM are allowed on a given CPU
    smarter (it can actually _clear_ them now if they are not allowed instead of
    just setting them when they are allowed in case the firmware got them wrong)
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b207a290ea7dc83dba02e40b81cc8a29415a9c60
Author: James Morris <jmorris@redhat.com>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] SELinux: add finer grained permissions to Netlink audit processing
    
    This patch provides finer grained permissions for the audit family of
    Netlink sockets under SELinux.
    
    1.  We need a way to differentiate between privileged and unprivileged
       reads of kernel data maintained by the audit subsystem.  The AUDIT_GET
       operation is unprivileged: it returns the current status of the audit
       subsystem (e.g.  whether it's enabled etc.).  The AUDIT_LIST operation
       however returns a list of the current audit ruleset, which is considered
       privileged by the audit folk.  To deal with this, a new SELinux
       permission has been implemented and applied to the operation:
       nlmsg_readpriv, which can be allocated to appropriately privileged
       domains.  Unprivileged domains would only be allocated nlmsg_read.
    
    2.  There is a requirement for certain domains to generate audit events
       from userspace.  These events need to be collected by the kernel,
       collated and transmitted sequentially back to the audit daemon.  An
       example is user level login, an auditable event under CAPP, where
       login-related domains generate AUDIT_USER messages via PAM which are
       relayed back to auditd via the kernel.  To prevent handing out
       nlmsg_write permissions to such domains, a new permission has been
       added, nlmsg_relay, which is intended for this type of purpose: data is
       passed via the kernel back to userspace but no privileged information is
       written to the kernel.
    
    Also, AUDIT_LOGIN messages are now valid only for kernel->user messaging,
    so this value has been removed from the SELinux nlmsgtab (which is only
    used to check user->kernel messages).
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6af963f1d6789ef20abca5696cd52a758b396e52
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] SELinux: cleanup ipc_has_perm
    
    This patch removes the sclass argument from ipc_has_perm in the SELinux
    module, as it can be obtained from the ipc security structure.  The use of
    a separate argument was a legacy of the older precondition function
    handling in SELinux and is obsolete.  Please apply.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de7d5a3b6c9ff8429bf046c36b56d3192b75c3da
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] drop_buffers() oops fix
    
    In rare situations, drop_buffers() can be called for a page which has buffers,
    but no ->mapping (it was truncated, but the buffers were left behind because
    ext3 was still fiddling with them).
    
    But if there was an I/O error in a buffer_head, drop_buffers() will try to get
    at the address_space and will oops.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 552fca4cbe552520d85b21e839f289c880fa48d2
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] mpage_writepages() page locking fix
    
    When ->writepage() returns WRITEPAGE_ACTIVATE, the page is still locked.
    Explicitly unlock the page in mpage_writepages().
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97e2bde47f886a317909c8a8f9bd2fcd8ce2f0b0
Author: Manfred Spraul <manfred@dbl.q-ag.de>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] add kmalloc_node, inline cleanup
    
    The patch makes the following function calls available to allocate memory
    on a specific node without changing the basic operation of the slab
    allocator:
    
     kmem_cache_alloc_node(kmem_cache_t *cachep, unsigned int flags, int node);
     kmalloc_node(size_t size, unsigned int flags, int node);
    
    in a similar way to the existing node-blind functions:
    
     kmem_cache_alloc(kmem_cache_t *cachep, unsigned int flags);
     kmalloc(size, flags);
    
    kmem_cache_alloc_node was changed to pass flags and the node information
    through the existing layers of the slab allocator (which lead to some minor
    rearrangements).  The functions at the lowest layer (kmem_getpages,
    cache_grow) are already node aware.  Also __alloc_percpu can call
    kmalloc_node now.
    
    Performance measurements (using the pageset localization patch) yields:
    
    w/o patches:
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.27  100       484.2736     12.02      1.97   Wed Mar 30 20:50:43 2005
      100    25170.83   91       251.7083     23.12    150.10   Wed Mar 30 20:51:06 2005
      200    34601.66   84       173.0083     33.64    294.14   Wed Mar 30 20:51:40 2005
      300    37154.47   86       123.8482     46.99    436.56   Wed Mar 30 20:52:28 2005
      400    39839.82   80        99.5995     58.43    580.46   Wed Mar 30 20:53:27 2005
      500    40036.32   79        80.0726     72.68    728.60   Wed Mar 30 20:54:40 2005
      600    44074.21   79        73.4570     79.23    872.10   Wed Mar 30 20:55:59 2005
      700    44016.60   78        62.8809     92.56   1015.84   Wed Mar 30 20:57:32 2005
      800    40411.05   80        50.5138    115.22   1161.13   Wed Mar 30 20:59:28 2005
      900    42298.56   79        46.9984    123.83   1303.42   Wed Mar 30 21:01:33 2005
     1000    40955.05   80        40.9551    142.11   1441.92   Wed Mar 30 21:03:55 2005
    
    with pageset localization and slab API patches:
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.19  100       484.1930     12.02      1.98   Wed Mar 30 21:10:18 2005
      100    27428.25   92       274.2825     21.22    149.79   Wed Mar 30 21:10:40 2005
      200    37228.94   86       186.1447     31.27    293.49   Wed Mar 30 21:11:12 2005
      300    41725.42   85       139.0847     41.84    434.10   Wed Mar 30 21:11:54 2005
      400    43032.22   82       107.5805     54.10    582.06   Wed Mar 30 21:12:48 2005
      500    42211.23   83        84.4225     68.94    722.61   Wed Mar 30 21:13:58 2005
      600    40084.49   82        66.8075     87.12    873.11   Wed Mar 30 21:15:25 2005
      700    44169.30   79        63.0990     92.24   1008.77   Wed Mar 30 21:16:58 2005
      800    43097.94   79        53.8724    108.03   1155.88   Wed Mar 30 21:18:47 2005
      900    41846.75   79        46.4964    125.17   1303.38   Wed Mar 30 21:20:52 2005
     1000    40247.85   79        40.2478    144.60   1442.21   Wed Mar 30 21:23:17 2005
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd1d5afca8d3bda7ff9db773fc08e648d2503dc6
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] sync_page() smp_mb() comment
    
    The smp_mb() is becaus sync_page() doesn't have PG_locked while it accesses
    page_mapping(page).  The comments in the patch (the entire patch is the
    addition of this comment) try to explain further how and why smp_mb() is
    used.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93ea1d0a12623dc1a693642b5758261f35f9bf96
Author: Chris Wright <chrisw@osdl.org>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] RLIMIT_MEMLOCK checking fix
    
    Always use page counts when doing RLIMIT_MEMLOCK checking to avoid possible
    overflow.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edfbe2b0038723e5699ab22695ccd62b5542a5c1
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] count bounce buffer pages in vmstat
    
    This is a patch for counting the number of pages for bounce buffers.  It's
    shown in /proc/vmstat.
    
    Currently, the number of bounce pages are not counted anywhere.  So, if
    there are many bounce pages, it seems that there are leaked pages.  And
    it's difficult for a user to imagine the usage of bounce pages.  So, it's
    meaningful to show # of bouce pages.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2054606ad6dd6fee559fe790f190b15ed9355237
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] doc: Locking update
    
    Make the Locking document truer.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd53b714d32a29bdf33009f812e295667e92b930
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] mm: use __GFP_NOMEMALLOC
    
    Use the new __GFP_NOMEMALLOC to simplify the previous handling of
    PF_MEMALLOC.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20a77776c24800d1e40a73f520cfcb32239568a9
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] mempool: simplify alloc
    
    Mempool is pretty clever.  Looks too clever for its own good :) It
    shouldn't really know so much about page reclaim internals.
    
    - don't guess about what effective page reclaim might involve.
    
    - don't randomly flush out all dirty data if some unlikely thing
      happens (alloc returns NULL). page reclaim can (sort of :P) handle
      it.
    
    I think the main motivation is trying to avoid pool->lock at all costs.
    However the first allocation is attempted with __GFP_WAIT cleared, so it
    will be 'can_try_harder' if it hits the page allocator.  So if allocation
    still fails, then we can probably afford to hit the pool->lock - and what's
    the alternative?  Try page reclaim and hit zone->lru_lock?
    
    A nice upshot is that we don't need to do any fancy memory barriers or do
    (intentionally) racy access to pool-> fields outside the lock.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b84a35be0285229b0a8a5e2e04d79360c5b75562
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mempool: NOMEMALLOC and NORETRY
    
    Mempools have 2 problems.
    
    The first is that mempool_alloc can possibly get stuck in __alloc_pages
    when they should opt to fail, and take an element from their reserved pool.
    
    The second is that it will happily eat emergency PF_MEMALLOC reserves
    instead of going to their reserved pools.
    
    Fix the first by passing __GFP_NORETRY in the allocation calls in
    mempool_alloc.  Fix the second by introducing a __GFP_MEMPOOL flag which
    directs the page allocator not to allocate from the reserve pool.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e30f272a93ec9c1d5c305c5040dfaebc880499d
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mm: pcp use non powers of 2 for batch size
    
    Jack Steiner reported this to have fixed his problem (bad colouring):
    "The patches fix both problems that I found - bad
     coloring & excessive pages in pagesets."
    
    In most workloads this is not likely to be such a pronounced problem,
    however it should help corner cases.  And avoiding powers of 2 in these
    types of memory operations is always a good idea.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81b4082dc7666e2bc5ec229d8e837f3bafb96883
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mm: rmap.c cleanup
    
    mm/rmap.c:page_referenced_one() and mm/rmap.c:try_to_unmap_one() contain
    identical code that
    
     - takes mm->page_table_lock;
    
     - drills through page tables;
    
     - checks that correct pte is reached.
    
    Coalesce this into page_check_address()
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 119f657c72fc07d6fd28c61de59cfba1566970a9
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] RLIMIT_AS checking fix
    
    Address bug #4508: there's potential for wraparound in the various places
    where we perform RLIMIT_AS checking.
    
    (I'm a bit worried about acct_stack_growth().  Are we sure that vma->vm_mm is
    always equal to current->mm?  If not, then we're comparing some other
    process's total_vm with the calling process's rlimits).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f021e9210185b46e41ec3a0e78ec1621e168eacb
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] generic_file_buffered_write fixes
    
    Anton Altaparmakov <aia21@cam.ac.uk> points out:
    
    - It calls fault_in_pages_readable() which is completely bogus if @nr_segs >
      1.  It needs to be replaced by a to be written
      "fault_in_pages_readable_iovec()".
    
    - It increments @buf even in the iovec case thus @buf can point to random
      memory really quickly (in the iovec case) and then it calls
      fault_in_pages_readable() on this random memory.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69aa3f71580990f39e387d96ed1001d2f5fb04b1
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] ultrastor build fix
    
    Fix a typo.
    
    James Bottomley <James.Bottomley@SteelEye.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8e6993178344eb348f60f05b16d9dc30db3b9cf
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild: Set NOSTDINC_FLAGS late to speed up compile (a little)
    
    Move definition of NOSTDINC_FLAGS below inclusion of arch Makefile, so
    any arch specific settings to $(CC) takes effect before looking up the
    compiler include directory.
    
    The previous solution that replaced ':=' with '=' caused gcc to be
    invoked one additional time for each directory visited.
    
    This decreases kernel compile time with 0.1 second (3.6 -> 3.5 seconds) when
    running make on a fully built kernel
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3d9ae4b98f6d28481d4d4b768d860a2cfb5805d
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild/ppc: tell when uimage was not built
    
    Tom Rini said:
      Note that there is still a trivial'ish change to make.  When mkimage
      doesn't exist on the host we should say "uImage not made" or
      something similar.
    
    So I did like Tom asked.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cacb3da620a4a93f3a77e1d2c8c06bb3c74bcb0
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild/i386: re-introduce dependency on vmlinux for install target, and add kernel_install
    
    Removing the dependency on vmlinux for the install target raised a few
    complaints, so instead a new target i added: kernel_install.
    
    kernel_install will install the kernel just like the ordinary install target.
    The only difference is that install has a dependency on vmlinux,
    kernel_install does not. Therefore kernel_install is the best choice
    when accessing the kernel over a NFS mount or as another user.
    
    kernel_install is similar to modules_install in the fact that neither does
    a full kernel compile before performing the install.
    In this way they are good for root use. Also added back the
    dependency on vmlinux for the install target so peoples scripts are no
    longer broken.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d651f3332340c232ff66b7f5bab66cb8903859f
Merge: 49e7dc5... 4774e22...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 30 15:42:33 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 4774e2260cf25c54f2188dd0407676e3af6f1f23
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 23:32:38 2005 +0100

    [PATCH] ARM: IntegratorCP: Fix CLCD MUX selection values
    
    The documentation on these values seems to be rather wrong.
    These values have been determined by mere trial and error.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ed562ab12733ab75437b3390427d41fce9da83c3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 23:28:47 2005 +0100

    [PATCH] ARM: IntegratorCP: 16bpp is RGB565 not RGB555
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1ddb8a16aa0e60e7fdc48b1f532cf43e692f8fae
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 22:39:51 2005 +0100

    [PATCH] ARM: AMBA CLCD: program palette for pseudocolor visuals
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 49e7dc54cd4cbdb439ecc4e06214b0ca1a1a72b4
Merge: 9ea1f8f... bb9bffc...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 30 13:34:21 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 9ea1f8f505f6f770bd593e689960ac4f893509b2
Author: Steve French <smfrench@austin.rr.com>
Date:   Sat Apr 30 11:10:58 2005 -0700

    [PATCH] cifs: Update cifs todo list
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68575476718ed1c6d6ddafeec8310b109e7a7a7f
Author: Steve French <smfrench@austin.rr.com>
Date:   Sat Apr 30 11:10:57 2005 -0700

    [PATCH] cifs: append \* properly on ASCII servers
    
    For older servers which do not support Unicode
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9747dd6fa98f2983f4dd09cd6dad1fa3d2a4c5f2
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 30 10:01:40 2005 -0700

    [PATCH] ppc64: fix 32-bit signal frame back link
    
    When the kernel creates a signal frame on the user stack, it puts the
    old stack pointer value at the beginning so that the signal frame is
    linked into the chain of stack frames like any other frame.
    Unfortunately, for 32-bit processes we are writing the old stack
    pointer as a 64-bit value rather than a 32-bit value, and the process
    sees that as a null pointer, since it only looks at the first 32 bits,
    which are zero since ppc is bigendian and the stack pointer is below
    4GB.  This bug is in SLES9 and RHEL4 too, hence the ccs.
    
    This patch fixes the bug by making the signal code write the old stack
    pointer as a u32 instead of an unsigned long.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb9bffcbef6166cf03385fbcde97c27bc1a5e689
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 13:26:06 2005 +0100

    [PATCH] ARM: PXA I2C: add platform device
    
    Add the PXA I2C platform device.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d5aa207e46ff7ee838683a7d95ecf46fe42a9a56
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 12:19:28 2005 +0100

    [PATCH] ARM: RTC: allow driver methods to return error
    
    Allow RTC drivers to return error codes from their read_time
    or read_alarm methods.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 54e0f520e7d94b865e0f5465db976dcc5ffe7190
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 30 07:07:04 2005 +0100

    netlink audit warning fix
    
    scumbags!
    
    net/netlink/af_netlink.c: In function `netlink_sendmsg':
    net/netlink/af_netlink.c:908: warning: implicit declaration of function `audit_get_loginuid'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a6ad57fb4b5e9d68553f4440377b99f75588fa88
Merge: dd96a8e... 587897f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 15:08:34 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit dd96a8e056e7b3e480197ff2cdf106b46455d779
Merge: a879cbb... 53e173f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 15:06:00 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 587897f51fac04988de497a553215fdf41e6d5f6
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Fri Apr 29 22:46:40 2005 +0100

    [PATCH] ARM: 2654/1: i.MX UART initialization sets and honors UFCR value
    
    Patch from Sascha Hauer
    
    This patch adds UCFR_RFDIV setting into i.MX serial driver.
    This is required, if loader does not fully agree with Linux kernel
    about UART setup manner. Linux only blindly expected some values until
    now. This should enable to use even serial ports not recognized by
    boot-loader as for example third UART found in the bluethoot module.
    Patch also enables to detect original setup baudrate in more cases.
    
    Signed-off-by: Pavel Pisa
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 53e173f62c318e65e6ae13524b04c5cf38c1bc3c
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Apr 29 22:13:57 2005 +0100

    [PATCH] ARM: 2660/2: fix ixdp2800 boot and pci init
    
    Patch from Lennert Buytenhek
    
    The IXDP2800 is an evalution platform for the IXP2800 processor that
    has two IXP2800s connected to the same PCI bus.  This is problematic
    as both CPUs will try to configure the PCI bus as they boot linux.
    Contrary to on the other IXP2000 platforms, the boot loader on the
    IXDP2800 doesn't configure the PCI bus properly, so we do want the
    linux instance on one of the CPUs to do that.
    Making one of the CPUs ignore the PCI bus (and thus act like a pure
    PCI slave device) is not an option because there is a 82559 NIC on
    the PCI bus for each of the CPUs.
    The chosen solution is to have the master CPU configure the PCI bus
    while the slave is kept in a quiescent state, and then to have the
    slave CPU scan the PCI bus (without assigning resources) while the
    master is kept in a quiescent state.  After this ritual, the master
    deletes the slave NIC from its PCI device list, the slave deletes
    the master NIC from its device list, and (almost) all is well.
    There's still one little problem: each of the CPUs has a 1G SDRAM
    BAR, but the IXP2000 only has 512M of outbound PCI memory window.
    We solve this by hand-assigning the master and slave SDRAM BARs to
    a location outside each of the IXP's outbound PCI windows, and by
    having the rest of the BARs autoconfigured in the outbound PCI
    windows, in the range [e0000000..ffffffff], so that there is a 1:1
    pci:phys mapping between them.
    Even with this patch, a number of issues still remain -- just imagine
    what happens if one of the CPUs is rebooted, by watchdog or by hand,
    but the other one isn't.  But those issues are not easily fixable
    given the strange PCI layout of this board and the behavior of the
    boot loader shipped with the platform.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit ca315159dfa80a2bfc7d917a717a7ee8d771bdf9
Author: George G. Davis <gdavis@mvista.com>
Date:   Fri Apr 29 22:08:35 2005 +0100

    [PATCH] ARM: 2656/1: Access permission bits are wrong for kernel XIP sections on ARMv6
    
    Patch from George G. Davis
    
    This patch is required for kernel XIP support on ARMv6 machines.  It ensures that the access permission bits for kernel XIP section descriptors are APX=1 and AP[1:0]=01, which is Kernel read-only/User no access permissions.  Prior to this change, kernel XIP section descriptor access permissions were set to Kernel no access/User no access on ARMv6 machines and the kernel would therefore hang upon entry to userspace when set_fs(USER_DS) was executed.
    
    Signed-off-by: Steve Longerbeam
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 05f9869bf20e11bcb9b64b9ebd6a9cf89d6b71ba
Author: Olav Kongas <ok@ee.rmk.(none)>
Date:   Fri Apr 29 22:08:34 2005 +0100

    [PATCH] ARM: 2649/1: Fix 'sparse -Wbitwise' warnings from MMIO macros
    
    Patch from Olav Kongas
    
    On ARM, the outX() and writeX() families of macros take the
    result of cpu_to_leYY(), which is of restricted type __leYY,
    and feed it to __raw_writeX(), which expect an argument of
    unrestricted type. This results in 'sparse -Wbitwise'
    warnings about incorrect types in assignments. Analogous
    type mismatch warnings are issued for inX() and readX()
    counterparts. The below patch resolves these warnings by
    adding forced typecasts.
    
    Signed-off-by: Olav Kongas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 2d2669b62984b8d76b05a6a045390a3250317d21
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Fri Apr 29 22:08:33 2005 +0100

    [PATCH] ARM: 2651/3: kernel helpers for NPTL support
    
    Patch from Nicolas Pitre
    
    This patch entirely reworks the kernel assistance for NPTL on ARM.
    In particular this provides an efficient way to retrieve the TLS
    value and perform atomic operations without any instruction emulation
    nor special system call.  This even allows for pre ARMv6 binaries to
    be forward compatible with SMP systems without any penalty.
    The problematic and performance critical operations are performed
    through segment of kernel provided user code reachable from user space
    at a fixed address in kernel memory.  Those fixed entry points are
    within the vector page so we basically get it for free as no extra
    memory page is required and nothing else may be mapped at that
    location anyway.
    This is different from (but doesn't preclude) a full blown VDSO
    implementation, however a VDSO would prevent some assembly tricks with
    constants that allows for efficient branching to those code segments.
    And since those code segments only use a few cycles before returning to
    user code, the overhead of a VDSO far call would add a significant
    overhead to such minimalistic operations.
    The ARM_NR_set_tls syscall also changed number.  This is done for two
    reasons:
    1) this patch changes the way the TLS value was previously meant to be
       retrieved, therefore we ensure whatever library using the old way
       gets fixed (they only exist in private tree at the moment since the
       NPTL work is still progressing).
    2) the previous number was allocated in a range causing an undefined
       instruction trap on kernels not supporting that syscall and it was
       determined that allocating it in a range returning -ENOSYS would be
       much nicer for libraries trying to determine if the feature is
       present or not.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 3a1e501511a1e2c665c566939047794dcf86466b
Author: George G. Davis <gdavis@mvista.com>
Date:   Fri Apr 29 22:08:33 2005 +0100

    [PATCH] ARM: 2655/1: ARM1136 SWP instruction abort handler fix
    
    Patch from George G. Davis
    
    As noted in http://www.arm.com/linux/patch-2.6.9-arm1.gz, the "Faulty SWP instruction on 1136 doesn't set bit 11 in DFSR." So the v6_early_abort handler does not report the correct rd/wr direction for the SWP instruction which may result in SEGVS or hangs. In order to work around this problem, this patch merely updates the fix contained in the ARM Ltd. patch to use the macroised abort handler fixups.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 458a83fa43e83505f9401783ce9ed41b5a8b5591
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Apr 29 21:58:16 2005 +0100

    [PATCH] ARM: 2659/1: do not assign PCI I/O address zero on IXP2000
    
    Patch from Lennert Buytenhek
    
    Assigning the address zero to a PCI device BAR causes some part of the
    PCI subsystem to believe that resource allocation for that BAR failed
    due to resource conflicts, which will make attempts to enable the
    device fail.  Work around this by assigning I/O addresses starting
    from 00010000.
    While we're at it, make the PCI I/O resource end at 0001ffff, since we
    only have 64k of outbound I/O window on the IXP2000, and we don't do
    bank switching.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit ae36bf5861e1091dd337f0b475e043ab07d4a937
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Apr 29 21:58:15 2005 +0100

    [PATCH] ARM: 2658/1: start ixp2000 pci memory resource at 0xe0000000
    
    Patch from Lennert Buytenhek
    
    On the IXDP2800, the bootloader does an awful job of configuring
    the PCI bus, so we make linux reconfigure everything.  Having a 1:1
    pci:phys address mapping generally simplifies everything, so try to
    allocate PCI addresses from the [e0000000..ffffffff] range, which is
    the physical address range of the outbound PCI window on the IXP2000.
    This does not affect any of the other IXP2000 platforms since they
    all use their bootloader's PCI resource assignment.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit 8443b165f13d21214e5d5495eee7c3bf7f2456bf
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Apr 29 21:58:15 2005 +0100

    [PATCH] ARM: 2657/1: export ixp2000_pci_config_addr
    
    Patch from Lennert Buytenhek
    
    Export ixp2000_pci_config_addr, to be used by the IXDP2800 platform
    setup code to coordinate booting the master and slave NPU.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> <rmk+kernel@arm.linux.org.uk>

commit a879cbbb34cbecfa9707fbb6e5a00c503ac1ecb9
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 09:38:44 2005 -0700

    x86: make traps on 'iret' be debuggable in user space
    
    This makes a trap on the 'iret' that returns us to user space
    cause a nice clean SIGSEGV, instead of just a hard (and silent)
    exit.
    
    That way a debugger can actually try to see what happened, and
    we also properly notify everybody who might be interested about
    us being gone.
    
    This loses the error code, but tells the debugger what happened
    with ILL_BADSTK in the siginfo.

commit c06fec5022ebe014af876da2df4a0eee836e97c8
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 09:37:07 2005 -0700

    Remove bogus BUG() in kernel/exit.c
    
    It's old sanity checking that may have been useful for debugging, but
    is just bogus these days.
    
    Noticed by Mattia Belletti.

commit 456be6cd90dbbb9b0ea01d56932d56d110d51cf7
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri Apr 29 17:30:07 2005 +0100

    [AUDIT] LOGIN message credentials
    
    Attached is a new patch that solves the issue of getting valid credentials
    into the LOGIN message. The current code was assuming that the audit context
    had already been copied. This is not always the case for LOGIN messages.
    
    To solve the problem, the patch passes the task struct to the function that
    emits the message where it can get valid credentials.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 37509e749dc2072e667db806ef24b9e897f61b8a
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Apr 29 17:19:14 2005 +0100

    [AUDIT] Requeue messages at head of queue, up to audit_backlog
    
    If netlink_unicast() fails, requeue the skb back at the head of the queue
    it just came from, instead of the tail. And do so unless we've exceeded
    the audit_backlog limit; not according to some other arbitrary limit.
    
    From: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c94c257c88c517f251da273a15c654224c7b6e21
Author: Serge Hallyn <serue@us.ibm.com>
Date:   Fri Apr 29 16:27:17 2005 +0100

    Add audit uid to netlink credentials
    
    Most audit control messages are sent over netlink.In order to properly
    log the identity of the sender of audit control messages, we would like
    to add the loginuid to the netlink_creds structure, as per the attached
    patch.
    
    Signed-off-by: Serge Hallyn <serue@us.ibm.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 85c8721ff3bc96b702427a440616079e8daf8a2f
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 16:23:29 2005 +0100

    audit: update pointer to userspace tools, remove emacs mode tags

commit 67eb81e1686f44bcf8f005b296213fd2c21b4719
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Apr 29 16:13:35 2005 +0100

    mips: warning fix audit_arch()
    
    arch/mips/kernel/ptrace.c:305: warning: function declaration isn't a prototype
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3ac3ed555bec5b1f92bb22cb94823a0e99d0f320
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Fri Apr 29 16:12:55 2005 +0100

    [PATCH] fix ia64 syscall auditing
    
    Attached is a patch against David's audit.17 kernel that adds checks
    for the TIF_SYSCALL_AUDIT thread flag to the ia64 system call and
    signal handling code paths.The patch enables auditing of system
    calls set up via fsys_bubble_down, as well as ensuring that
    audit_syscall_exit() is called on return from sigreturn.
    
    Neglecting to check for TIF_SYSCALL_AUDIT at these points results in
    incorrect information in audit_context, causing frequent system panics
    when system call auditing is enabled on an ia64 system.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c7fcb0ee74ef4cfdea02befacb55945c93641e44
Author: Peter Martuccelli <peterm@redhat.com>
Date:   Fri Apr 29 16:10:24 2005 +0100

    [AUDIT] Avoid using %*.*s format strings.
    
    They don't seem to work correctly (investigation ongoing), but we don't
    actually need to do it anyway.
    
    Patch from Peter Martuccelli <peterm@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d812ddbb89e323d054a7d073466225966c8350c8
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri Apr 29 16:09:52 2005 +0100

    [AUDIT] Fix signedness of 'serial' in various routines.
    
    Attached is a patch that corrects a signed/unsigned warning. I also noticed
    that we needlessly init serial to 0. That only needs to occur if the kernel
    was compiled without the audit system.
    
    -Steve Grubb
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2fd6f58ba6efc82ea2c9c2630f7ff5ed9eeaf34a
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 16:08:28 2005 +0100

    [AUDIT] Don't allow ptrace to fool auditing, log arch of audited syscalls.
    
    We were calling ptrace_notify() after auditing the syscall and arguments,
    but the debugger could have _changed_ them before the syscall was actually
    invoked. Reorder the calls to fix that.
    
    While we're touching ever call to audit_syscall_entry(), we also make it
    take an extra argument: the architecture of the syscall which was made,
    because some architectures allow more than one type of syscall.
    
    Also add an explicit success/failure flag to audit_syscall_exit(), for
    the benefit of architectures which return that in a condition register
    rather than only returning a single register.
    
    Change type of syscall return value to 'long' not 'int'.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ea3834d9fb348fb1144ad3affea22df933eaf62e
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Fri Apr 29 16:00:17 2005 +0100

    namei: add audit_inode to all branches in path_lookup
    
    Main change is in path_lookup: added a goto to do audit_inode
    instead of return statement, when emul_lookup_dentry for root
    is successful.The existing code does audit_inode only when
    lookup is done in normal root or cwd.
    
    Other changes: Some lookup routines are returning zero on success,
    and some are returning zero on failure. I documented the related
    function signatures in this code path, so that one can glance over
    abstract functions without understanding the entire code.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 81b7854d52d35ed2353dd47033ae630d18322a2d
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Apr 29 15:59:11 2005 +0100

    audit_log_untrustedstring() warning fix
    
    kernel/audit.c: In function `audit_log_untrustedstring':
    kernel/audit.c:736: warning: comparison is always false due to limited range of data type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 83c7d09173fdb6b06b109e65895392db3e49ac9c
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 15:54:44 2005 +0100

    AUDIT: Avoid log pollution by untrusted strings.
    
    We log strings from userspace, such as arguments to open(). These could
    be formatted to contain \n followed by fake audit log entries. Provide
    a function for logging such strings, which gives a hex dump when the
    string contains anything but basic printable ASCII characters. Use it
    for logging filenames.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 42d4dc3f4e1ec1396371aac89d0dccfdd977191b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Apr 29 07:40:12 2005 -0700

    [PATCH] Add suspend method to cpufreq core
    
    In order to properly fix some issues with cpufreq vs. sleep on
    PowerBooks, I had to add a suspend callback to the pmac_cpufreq driver.
    I must force a switch to full speed before sleep and I switch back to
    previous speed on resume.
    
    I also added a driver flag to disable the warnings in suspend/resume
    since it is expected in this case to have different speed (and I want it
    to fixup the jiffies properly).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c60c390620e0abb60d4ae8c43583714bda27763f
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Apr 28 22:47:29 2005 -0700

    [PATCH] x86_64: fix PT_NOTE addition to IA32 vDSO
    
    The addition of the PT_NOTE didn't take in the x86_64 version of the i386
    vDSO, because I forgot the linker script bit in that copy.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cb766ae629c70d53040f85de73db0583eadb233
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:11 2005 -0700

    [PATCH] cifs: Do not sleep interruptible after socket connect failure
    
    .. since it can be due to pending kill.
    
    Update readme information to better describe cifs umount
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31ca3bc3c569f9fe02aae6974ac3a9126f14902f
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:11 2005 -0700

    [PATCH] cifs: Do not init smb requests or block when sending requests
    
    if cifsd thread is no longer running to demultixplex responses.
    
    Do not send FindClose request when FindFirst failed without reaching end
    of search.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57337e42f1393941d59d5154eed27a63988ff2be
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: handle termination of cifs oplockd kernel thread
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11aa0149d0e49ee1791735ec4ae3079b27b9a68e
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: Fix mapping of EMLINK case
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd63499cbe37e53e6cc084c8a35d911a4613c797
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: Handle case of multiple trans2 responses for one SMB request (part 2 of 2)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 275cde1a1f3880601509c851d72c82bb8d3ee67c
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: cleanup various long lines
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4eb295d38b57f4d4b956942a48887eb252d97c6
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Handle multiple response transact2 part 1 of 2
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46810cbf3d951c1ce8ce3311639996ad43ca4ed1
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Ease memory pressure, do not use large buffers in byte range lock requests.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79944bf71352f33f984ac3973b159b5c2cee139d
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: missing semicolon from previous fix
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67010fbc6ff889aaf86592bc148d705c5b9e1a27
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Better handle errors on second socket recv message call
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09d1db5c6131232f764046160c29118cd4e5e646
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: improve check for search entry going beyond end of SMB transact
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 966ca9234754ece58870075972ef103e354de075
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: Fix caching problem
    
    pointed out by Dave Stahl and Vince Negri in which cifs can update the
    last modify time on a server modified file without invalidating the
    local cached data due to an intervening readdir.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 433dc24f24b409fb130f638aa85470a0eb666206
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: remove cifs_kcalloc and check for NULL return on kcalloc in session initialization
    
    Suggested by: Adrian Bunk and Dave Miller
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 099a58f681ed951434574ec39bdfe87055bafe73
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Missing initialization for largeBuf flag left out of previous changeset
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8643e1b5253a6a51da5574a55a2f9148e255cfd
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Do not use large smb buffers in response path
    
    unless response is larger than 256 bytes.  This cuts more than 1/3 of
    the large memory allocations that cifs does and should be a huge help to
    memory pressure under stress.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c81156dd217818c143a09b6a744e797a04571e99
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: cleanup of ifdefs usage so it is more consistent
    
    And fix to not needlessly send new POSIX QFSInfo when server does not
    explicitly claim support for the new protocol extensions.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f28ac91b0541a49d5bc7bfb9f0efd5289a7dd181
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: CIFS ioctl needed by umount.cifs utility
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 848f3fce45d2ba93e10b5e9d65bcae0d9269ad0d
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Do not interpret oplock break responses as responses to an unrelated command
    
    .. even if the multiplex ids match.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0724714fd49aeec1383b94807174de7e96021bf
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: Fix PPC64 compile error
    
    .. and do not double endian convert the special characters whem mounted
    with mapchars mount parm.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 737b758c965a9b223ac1243ab38d9e507ac86c64
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: character mapping of special characters (part 3 of 3)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c91d362f1e1ebbd4513adb68fc79d552c11e2c0
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: finish up of special character mapping capable unicode conversion routine part 2 of 3
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d14537f103bf746ca766f739f9f5a5bf7a8b4806
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: remove a few redundant null pointer checks, and cleanup misc source formatting
    
    Mostly suggested by Jesper Juhl
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a0b48245a135cd132e747815854e3999967f8a7
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: Add new mount parm mapchars
    
    For handling seven special characters that shells use for filenames.
    
    This first parts implements conversions from Unicode.
    
    Signed-off-by: Steve French
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbe0476fa6a76b01b79e7c117963d45ed0a28758
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: fix rare oops in cifs_close
    
    Protect access to cifs file list in cifs_close path
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad009ac96509e005d9978d0ae9e9ec4d63ad2990
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: Fix multiuser packet signing to use the right sequence number and mac session key
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c67593a03129967eae8939c4899767182eb6d6cd
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Enable ioctl support in POSIX extensions to handle lsattr
    
    remove sparse warnings, unnecessary pad in QueryFileInfo and redundant
    function define.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75cf6bdc52d86ca815f1129529e43f0d904b18d5
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Gracefully turn off serverino (when serverino is enabled on mount)
    
    Old servers such as NT4 do not support this level of FindFirst (and
    retry with a lower infolevel)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f654bac2227adc5c6956405290eeb4f81f09e9ff
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: add support for chattr/lsattr in new CIFS POSIX extensions
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1da0c78b32abe122a959d2a57ba3d41563d8e39f
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Only send POSIX ACL calls to server if server claims to support that capability bit
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2604f6da1afb56fae5930b58349e43a2b0345933
Merge: 18c8baf... 0f7ad45...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 28 16:09:57 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 18c8baff8fe151ea02e00047afc369ee31939e9b
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Apr 28 15:17:19 2005 -0700

    [PATCH] Fix error recovery path for arch_setup_additional_pages
    
    If arch_setup_additional_pages fails, the error path will do some double-frees.
    This fixes it.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bec0039f4ac8d707d7afe7739cc2e7004447e38
Author: Olaf Rempel <razzor@kopf-tisch.de>
Date:   Thu Apr 28 12:16:08 2005 -0700

    [NET]: /proc/net/stat/* header cleanup
    
    Signed-off-by: Olaf Rempel <razzor@kopf-tisch.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b3c63ac7cb5e2e6680727045aa35c2e5f1bace7
Author: Nicolas Dichtel <nicolas.dichtel@6wind.com>
Date:   Thu Apr 28 12:14:37 2005 -0700

    [PKT_SCHED]: Fix range in psched_tod_diff() to 0..bound
    
    Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89c8b3a11086a2a43ac4240116da77b707f37fbf
Author: Dave Jones <davej@redhat.com>
Date:   Thu Apr 28 12:11:49 2005 -0700

    [IPV6]: Incorrect permissions on route flush sysctl
    
    On Mon, Apr 25, 2005 at 12:01:13PM -0400, Dave Jones wrote:
     > This has been brought up before.. http://lkml.org/lkml/2000/1/21/116
     > but didnt seem to get resolved.  This morning I got someone
     > file a bugzilla about it breaking sysctl(8).
    
    And here's its ipv6 counterpart.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e3e0360b711568fb8ba5973accf51d51e746abc
Author: Dave Jones <davej@redhat.com>
Date:   Thu Apr 28 12:11:03 2005 -0700

    [IPV4]: Incorrect permissions on route flush sysctl
    
    This has been brought up before.. http://lkml.org/lkml/2000/1/21/116
    but didnt seem to get resolved.  This morning I got someone
    file a bugzilla about it breaking sysctl(8).
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4eb701dfc618491c9b97377df6e61de36dfc39ce
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Apr 28 12:02:04 2005 -0700

    [SCTP] Fix SCTP sendbuffer accouting.
    
    - Include chunk and skb sizes in sendbuffer accounting.
    - 2 policies are supported. 0: per socket accouting, 1: per association
      accounting
    
    DaveM: I've made the default per-socket.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 594ccc14dfe4d61b476491758425a1c2ca4ec71b
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Thu Apr 28 12:00:23 2005 -0700

    [SCTP] Replace incorrect use of dev_alloc_skb with alloc_skb in sctp_packet_transmit().
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e6bc34f86e450ff14c4817902d66aa9c786bc06
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Apr 28 11:59:49 2005 -0700

    [SCTP] Fix bug in sctp_init() error handling code.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9b9e10f180fa63b55b93412edf0ab9648675646
Author: Brian Haley <Brian.Haley@hp.com>
Date:   Thu Apr 28 11:59:16 2005 -0700

    [SCTP] Use ipv6_addr_any() rather than ipv6_addr_type() in sctp_v6_is_any().
    
    Signed-off-by: Brian Haley <Brian.Haley@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 047a2428a14216a83980ed26b6a59b3ca40a1fb0
Author: Jerome Forissier <jerome.forissier@hp.com>
Date:   Thu Apr 28 11:58:43 2005 -0700

    [SCTP] Implement Sec 2.41 of SCTP Implementers guide.
    
    - Fixed sctp_vtag_verify_either() to comply with impguide 2.41 B) and C).
    - Make sure vtag is reflected when T-bit is set in SHUTDOWN-COMPLETE sent
      due to an OOTB SHUTDOWN-ACK and in ABORT sent due to an OOTB packet.
    - Do not set T-Bit in ABORT chunk in response to INIT.
    - Fixed some comments to reflect the new meaning of the T-Bit.
    
    Signed-off-by: Jerome Forissier <jerome.forissier@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 173372162ddbd414cc471c1a3a52ad7ea279aaf4
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Thu Apr 28 11:57:54 2005 -0700

    [SCTP] Fix SCTP_ASSOCINFO getsockopt for 1-1 style
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4d0ee983ec01e59a77e157ab702246f397b2a2b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Apr 28 11:33:20 2005 -0700

    [TG3]: Set SA_SAMPLE_RANDOM in request_irq() calls.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9acf6597c533f3d5c991f730c6a1be296679018e
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Thu Apr 28 08:13:58 2005 -0700

    [PATCH] time interpolator: Fix settimeofday inaccuracy
    
    settimeofday will set the time a little bit too early on systems using
    time interpolation since it subtracts the current interpolator offset
    from the time. This used to be necessary with the code in 2.6.9 and earlier
    but the new code resets the time interpolator after setting the time.
    Thus the time is set too early and gettimeofday will return a time slightly
    before the time specified with settimeofday if invoked immeditely after
    settimeofday.
    
    This removes the obsolete subtraction of the time interpolator offset
    and makes settimeofday set the time accurately.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7ad450394560a6b6c72115e04bf7afd6230e70
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:46:15 2005 +0100

    [PATCH] ARM: AMBA CLCD: X resolutions must be multiples of 16
    
    We ignore the bottom 4 bits of the X resolution, so we should
    round X resolutions up to the nearest multiple of 16.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 82235e9170f19fa327361ee82a76618e60f2db47
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:43:52 2005 +0100

    [PATCH] ARM: Fix AMBA CLCD fb driver for 32bpp
    
    We were supporting 24bpp.  However, the pixel organisation in
    memory was 0RGB, so it was 24bpp in 32bit words.  This means
    we're actually supporting 32bpp and not 24bpp.
    
    Also, add a check to ensure that we don't exceed the available
    framebuffer when changing display resolutions.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c4d12b98ead8bb2437f656c17e7ef065fa160e13
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:38:19 2005 +0100

    [PATCH] ARM: Fix AMBA CLCD fb driver for 1bpp/STN mono panels
    
    Fix the AMBA CLCD framebuffer driver for 1bpp modes and STN
    monochrome LCD panels.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bdceb6a0162274934386f19f3ea5a9d44feb0b20
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Apr 27 18:04:45 2005 -0700

    [PATCH] ppc64: Fix return value of some vDSO calls
    
    The ppc vDSO would not properly clear the return value for some calls,
    which will be a problem when interfacing those calls with glibc. This
    should be fixed before 2.6.12 is released (as it is the first kernel
    with the ppc vDSO) so that we don't have to play with symbol versioning
    and ugly workarounds.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fc3e624ad7278604628c598e92aa77c67064166
Author: David Howells <dhowells@redhat.com>
Date:   Wed Apr 27 15:39:03 2005 -0700

    [PATCH] NFS4: Don't use __user with compat_uptr_t
    
    The attached patch removes __user from compat_uptr_t types in the NFS4 mount
    32-bit->64-bit compatibility structures.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea3f4eaca09de1bcc80e922e56a6dabba5882f56
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Apr 27 18:19:55 2005 +0100

    [PATCH] ARM: Add further explaination for clk_get()
    
    clk_get() comments can be confusing.  Add extra explaination of
    the dev and id parameters to ensure correct usage.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc67b16ecaf6ebde04096030c268adddade023f1
Merge: e8108c9... 2d29306...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Apr 27 10:05:42 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit 036d618434516103adb4d36db28a57968d2f2e7b
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Apr 26 22:54:58 2005 -0700

    [SCSI] aacraid: Fix adapter open error
    
    This fixes an error on the device open code that allows a non-existent
    device to be opened causing later panic problems.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e8108c98dd6d65613fa0ec9d2300f89c48d554bf
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Tue Apr 26 13:09:35 2005 -0700

    [PATCH] PC300 pci_enable_device fix
    
    Call pci_enable_device() before looking at IRQ and resources,
    and pci_disable_device() when shutting the interface down.
    
    The driver requires this fix or the "pci=routeirq" workaround
    on 2.6.10 and later kernels.
    
    Reported and tested by Artur Lipowski.
    
    From: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efa545791ff439d778f79d02255d59ff1f7ea0fc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 11:26:53 2005 -0700

    [PATCH] ppc64: trivial user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5330e9273e2b3e372b01bb1cb75be4364f02db78
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 11:26:53 2005 -0700

    [PATCH] size_t portability fixes - drivers/usb
    
    size_t is zu, ssize_t is zd...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d29306b231a1a0e7a70166c10e4c0f917b21334
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Apr 26 09:04:31 2005 -0700

    [IA64] re-enable preempt before page allocation for pgtable quicklist
    
    This is a fix to the pgtable_quicklist code.  There is a GFP_KERNEL
    allocation in pgtable_quicklist_alloc(), which spews the usual warnings
    if the kernel is under heavy VM pressure and the reclaim code is
    invoked.  re-enable preempt before we allocate the new page.
    
    This patch is against 2.6.12-rc2-mm2
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by:  Tony Luck <tony.luck@intel.com>

commit 97af11286d68e359f61579214ca7a7b4433fe458
Merge: 1e14c33... 2b49aba...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 09:02:40 2005 -0700

    Automatic merge of kernel.org:/home/rmk/linux-2.6-serial.git

commit 1e14c33fe2e3409d9f34041859af52be6e4723af
Merge: 766f2fa... bce495d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 08:58:22 2005 -0700

    Automatic merge of kernel.org:/home/rmk/linux-2.6-rmk.git

commit 766f2fa170e65948053b06c6106c8dc8526c3e14
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:43 2005 -0700

    [PATCH] qla trivial iomem annotation
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9be80c0f0f61e8c0572d7c9d73b3ef839754a953
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] oprofile trivial user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 993fb38b1c0cd1a56d15aa99b337c780a538baa8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] amd64 rt_sigframe user annotation
    
    ->pretcode in struct rt_sigframe is a userland pointer (and already
    treated as such by code using that field).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f73832fd8fc42dd7cc73487147f5d5b8f8d2cf0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] drivers/scsi NULL noise removal
    
    NULL noise in sbus scsi drivers got missed
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f815e8182b94f8fb5913b66454b40b484a2f70cc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] imsttfb missing iomem annotations
    
    write_reg_le32() and read_reg_le32() expect iomem pointers...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66768eb26c471091dc4ea1ed59b4bab7edc3d7bd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] ppc-opc NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d3e8fe662c31d614f809d0131e134e2692d6a68
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] savagefb iomem annotations
    
    trivial iomem annotations + memset() replaced with memset_io() in a
    place that deals with ioremapped area.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9727d04aa6d58e131128b4178e742c423480d476
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] pegasus NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b76be681f8b296c00f707220b9891934d5d74778
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] tpm 64bit fixes (size_t)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf381ca3c4a2410cea9615e205bc41bd4275e1e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:40 2005 -0700

    [PATCH] fix SND_POWERMAC dependencies
    
    This beast is pmac-only; moreover, it won't build on other
    subarchitectures.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b49abac5855aff9b42cf2cdb5376ac805bebd86
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:37:45 2005 +0100

    [PATCH] Serial: Convert 8250_hp300 to use serial8250_{un,}register_port
    
    Convert 8250_hp300 to use serial8250_register_port() and
    serial8250_unregister_port().
    
    Tested by Kars de Jong, 4/4/2005.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a9604b863c854e5bee409157aabb35b6ce8ecd3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:32:00 2005 +0100

    [PATCH] Serial: Move error path processing inline
    
    With unlikely() there's no need for the error path to
    use gotos.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 45849282bfd7543253761cbf7db96151b05e5ed1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:29:44 2005 +0100

    [PATCH] Serial: Ensure error paths are marked with unlikely()
    
    Ensure ARM serial driver error paths are marked with the
    unlikely() compiler hint.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 99805f47dd0ede2e96f2c62c588a0d906811ed6d
Merge: a134220... 9719b0c...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 07:22:55 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit bce495d865829d7a1d8102a834d3e3af32616567
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:21:02 2005 +0100

    [PATCH] ARM: make entry*.S includes more logical
    
    Move common includes to entry-header, and file specific includes
    to the relevant file.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f4dc9a4cf26278f5b608d6e4bd16e7b27ddcf1a5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:20:34 2005 +0100

    [PATCH] ARM: Remove single-use user save/restore macros
    
    Assembly macros are pointless if they're only used once.  Move
    them inline.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cf88b417f9b1365c5aeeffa5c41208be68adfd76
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:20:12 2005 +0100

    [PATCH] ARM: remove PT_TRACESYS
    
    PT_TRACESYS is unused, remove it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit acaca3c91536491119e97d428c1da935f411cc9a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:19:48 2005 +0100

    [PATCH] ARM: Remove SVC_MODE definition
    
    SVC_MODE reflects the MODE_SVC definition in asm/ptrace.h.  Use
    the asm/ptrace.h definition instead, and remove SVC_MODE.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e0f9f4a622cec66d09a5d9339f048877c665cec3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:19:24 2005 +0100

    [PATCH] ARM: Use __NR_SYSCALL_BASE and __ARM_NR_BASE in asm code
    
    Don't define our own local constants, but use those already defined
    in asm/unistd.h instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a1342206e192709a405485dbe2e647d5c4005d20
Merge: b453257... 5523662...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 07:19:05 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 925c8a1a8cb9d7a33a8e39516d7fb679030553fc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:18:59 2005 +0100

    [PATCH] ARM: pt_regs offsets
    
    Generate pt_regs S_xx offsets from the structure itself instead
    of #defining them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1ec42c0c97186fadc48810ccaf2dc573cd957ea1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:18:26 2005 +0100

    [PATCH] ARM: Remove argument for disable_irq/enable_irq
    
    Since we do not require a register for these operations, we can
    remove this unnecessary argument.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7933523dc75823342dbd70a27760a82a5302baf4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:17:42 2005 +0100

    [PATCH] ARM: remove some entry initialisation asm code
    
    Convert the trivial vector entry initialisation code to C code.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5523662c4cd585b892811d7bb3e25d9a787e19b3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 21:40:39 2005 -0700

    [NET]: kill gratitious includes of major.h
    
    	A lot of places in there are including major.h for no reason
    whatsoever.  Removed.  And yes, it still builds.
    
    	The history of that stuff is often amusing.  E.g. for net/core/sock.c
    the story looks so, as far as I've been able to reconstruct it: we used to
    need major.h in net/socket.c circa 1.1.early.  In 1.1.13 that need had
    disappeared, along with register_chrdev(SOCKET_MAJOR, "socket", &net_fops)
    in sock_init().  Include had not.  When 1.2 -> 1.3 reorg of net/* had moved
    a lot of stuff from net/socket.c to net/core/sock.c, this crap had followed...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 088dd3a45fdb8fb726cd50575856562c4f6f1c3e
Author: James Morris <jmorris@redhat.com>
Date:   Mon Apr 25 21:39:29 2005 -0700

    [TCP]: Trivial tcp_data_queue() cleanup
    
    This patch removes a superfluous intialization from tcp_data_queue().
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b453257f057b834fdf9f4a6ad6133598b79bd982
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:13 2005 -0700

    [PATCH] kill gratitious includes of major.h under net/*
    
    A lot of places in there are including major.h for no reason whatsoever.
    Removed.  And yes, it still builds.
    
    The history of that stuff is often amusing.  E.g.  for net/core/sock.c
    the story looks so, as far as I've been able to reconstruct it: we used
    to need major.h in net/socket.c circa 1.1.early.  In 1.1.13 that need
    had disappeared, along with register_chrdev(SOCKET_MAJOR, "socket",
    &net_fops) in sock_init().  Include had not.  When 1.2 -> 1.3 reorg of
    net/* had moved a lot of stuff from net/socket.c to net/core/sock.c,
    this crap had followed...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94f2f715771d0aa5554451d1e2a920f11b8be3fe
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] isofs includes sanitized
    
    fs/isofs includes trimmed down to something resembling sanity.
    
    Kernel-only parts of linux/iso_fs.h and entire linux/iso_fs_{sb,i}.h
    moved to fs/isofs/isofs.h.
    
    A lot of useless #include in fs/isofs/*.c killed.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7366d36cb967d7a3ac324c789a8b718e61d01b31
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] ppc annotations: i2c-mpc
    
    Usual iomem annotations and NULL noise removal.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c6e75999000ebc942526466dbd0de37bfac73a4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] ppc annotations: mpsc
    
    Usual iomem annotations + NULL noise removal.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab2fd30b668b1687a9ca9e9ea0b60145deeafe84
Merge: 25ee7e3... 2fac6f3...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 25 16:19:32 2005 -0700

    Automated merge of kernel.org:/home/rmk/linux-2.6-rmk.git

commit 2fac6f3fec2303649e9cd572255776cb93d3f888
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Apr 25 23:40:05 2005 +0100

    [PATCH] ARM: 2653/1: Fix memset and memzero macro double-reference of parameters
    
    Patch from Deepak Saxena
    
    The current memset() and memzero() macros on ARM reference the
    incoming parameters more than once and this can cause uninted
    side-effects. The issue was found while debugging SCTP protocol
    and with the specific usage of memzero(skb_put(skb,size),size).
    This call would call skb_put(skb,size) twice leading to badness.
    The fixed version copies the incoming parameters into local
    variables and uses those instead.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 41130d37a449dbff3593c8585a102d5e9173eea7
Author: Jeff Lackey <jlackey@net.rmk.(none)>
Date:   Mon Apr 25 23:38:55 2005 +0100

    [PATCH] ARM: 2650/1: PXA27x sleep - workaround Errata 39 & 50 (Patch 2667)
    
    Patch from Jeff Lackey
    
    This patch updates arch/arm/mach-pxa/sleep.S to support
    the PXA270 CPU.  It works around Errata 39 & 50 from the
    Intel(R) PXA27x Processor Family Specification Update.
    
    Signed-off-by: Jeff Lackey
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 04237dddd14375fce1df4bfb1be92a35aa1c247f
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:17:17 2005 -0700

    [TG3]: Fix tg3_restart_ints()
    
    tg3_restart_ints() is called to re-enable interrupts after tg3_poll()
    has finished all the work. It calls tg3_cond_int() to force an interrupt
    if the status block updated bit is set. The updated bit will be set if
    there is a new status block update sometime during tg3_poll() and it can
    be very often. The worst part is that even if all the work has been
    processed, the updated bit remains set and an interrupt will be forced
    unnecessarily.
    
    The fix is to call tg3_has_work() instead to determine if new work is
    posted before forcing an interrupt. The way to force an interrupt is
    also changed to use "coalesce_now" instead of "SETINT". The former is
    generally a safer way to force the interrupt.
    
    Also deleted the first parameter to tg3_has_work() which is unused.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52f6d697dc0f2c039e8413e780b0f45ddf8161fc
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:14:32 2005 -0700

    [TG3]: Refresh hw index in tg3_rx()
    
    This patch refreshes the hw rx producer in tg3_rx() so that additional
    work posted by the hardware can be processed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 483ba50bd41d14d5325d6cd9935de86a982d08a2
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:14:03 2005 -0700

    [TG3]: Fix bug in tg3_rx()
    
    This patch fixes a bug that causes tg3_has_work() to always return 1.
    
    rx work is determined by comparing tp->rx_rcb_ptr with the current hw
    producer index. The hw producer index is modulo the ring size, but tp-
    >rx_rcb_ptr is a free running counter that goes up beyond the ring size.
    After the ring wraps around once, tg3_has_work() will always return 1.
    
    The fix is to always do modulo arithmetic on tp->rx_rcb_ptr.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eec99e345e0568767009341ac35fb5a499301499
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 23:13:15 2005 +0100

    [PATCH] ARM: 2645/1: Adds IIS definitions for the S3C2400
    
    Patch from Lucas Correia Villa Real
    
    Adds IISFCON definitions for the S3C2400 at
    include/asm-arm/arch-s3c2400/regs-iis.h.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bd7b170201149fd82bc3212cb570a7a7386463a4
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 23:12:50 2005 +0100

    [PATCH] ARM: 2644/1: Adds S3C2400 support to uncompress.h
    
    Patch from Lucas Correia Villa Real
    
    The S3C2400 doesn't have a cpuid information stored anywhere. This patch adds
    support to the S3C2400 at include/asm-arm/arch-s3c2400/uncompress.h by
    initializing the cpuid variable to the S3C2410, as they share the same
    routine. The GSTATUS1 pin is then used only if not compiling for the S3C2400.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 605036cf8443b9172b24954dc1fd218e2049f91b
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Mon Apr 25 13:31:04 2005 -0700

    From: jbarnes@sgi.com
    
    [IA64] fix ia64 Kconfig to allow CONFIG_PM on sn2
    
    This probably should have been fixed when I fixed up the generic build for
    discontig+numa machines, but oh well.
    
    CONFIG_PM is allowable for generic builds but not for sn2 builds, which
    doesn't make much sense, and in fact breaks the build if recent ACPI bits are
    added to the tree.  It looks like the only arch that needs to prevent
    CONFIG_PM stuff is the ski simulator (though those options could probably use
    some cleanup as well), so remove the big conditional and replace it with a
    simple test for IA64_HP_SIM instead.
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fc626b278a05a0fe3eb9abd1733120f2f400cbcd
Author: Greg Howard <ghoward@sgi.com>
Date:   Mon Apr 25 13:29:46 2005 -0700

    [IA64-SGI] snsc_event.c new file
    
    Forgot the "bk new" to add this file. Part of the patch
    from Greg Howard
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 67639deb099c6085acc447c1b7d6a17792dedad0
Author: Greg Howard <ghoward@sgi.com>
Date:   Mon Apr 25 13:28:52 2005 -0700

    [IA64] Altix system controller event handling
    
    The following is an update of the patch I sent yesterday
    (3/9/05) incorporating suggestions from Christoph Hellwig and
    Andreas Schwab.  It allows Altix and Altix-like systems to
    handle environmental events generated by the system controllers,
    and should apply on top of Jack Steiner's patch of 3/1/05 ("New
    chipset support for SN platform") and Mark Goodwin's patch of
    3/8/05 ("Altix SN topology support for new chipsets and pci
    topology").
    
    Signed-off-by: Greg Howard <ghoward@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b9e41d7fb62ae26adee84c18048037214ce5d866
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon Apr 25 13:27:48 2005 -0700

    [IA64] iosapic.c: typo ... s/spin_unlock_irq/spin_unlock/
    
    vector sharing patch had a typo ... mismatched spin_lock() with
    a spin_unlock_irq().  Fix from Kenji Kaneshige.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e1ed81ab7a34fc0f92f2e200825bdb6d86d6c8ef
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:27:12 2005 -0700

    [IA64] print "siblings" before {physical,core,thread} id
    
    Rohit and Suresh changed their mind about the order to print things
    in /proc/cpuinfo, but didn't include the change in the version of
    the patch they sent to me.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 24eeb568aeeaee771b9f0a6fd6f5d01040a887da
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon Apr 25 13:26:23 2005 -0700

    [IA64] vector sharing (Large I/O system support)
    
    Current ia64 linux cannot handle greater than 184 interrupt sources
    because of the lack of vectors. The following patch enables ia64 linux
    to handle greater than 184 interrupt sources by allowing the same
    vector number to be shared by multiple IOSAPIC's RTEs. The design of
    this patch is besed on "Intel(R) Itanium(R) Processor Family Interrupt
    Architecture Guide".
    
    Even if you don't have a large I/O system, you can see the behavior of
    vector sharing by changing IOSAPIC_LAST_DEVICE_VECTOR to fewer value.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e927ecb05e1ce4bbb1e10f57008c94994e2160f5
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Mon Apr 25 13:25:06 2005 -0700

    [IA64] multi-core/multi-thread identification
    
    Version 3 - rediffed to apply on top of Ashok's hotplug cpu
    patch.  /proc/cpuinfo output in step with x86.
    
    This is an updated MC/MT identification patch based on the
    previous discussions on list.
    
    Add the Multi-core and Multi-threading detection for IPF.
      - Add new core and threading related fields in /proc/cpuinfo.
    		Physical id
    		Core id
    		Thread id
    		Siblings
      - setup the cpu_core_map and cpu_sibling_map appropriately
      - Handles Hot plug CPU
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Gordon Jin <gordon.jin@intel.com>
    Signed-off-by: Rohit Seth <rohit.seth@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6118ec847e8e35393efc0f88394c2f5dd48c3313
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Apr 25 13:23:47 2005 -0700

    [IA64] __copy_user breaks on unaligned src
    
    memcpy_mck.S::__copy_user breaks in the prefetch code under these conditions :-
    
    * src is unaligned and
    * dst is near the end of a page and
    * the page after dst is unmapped.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f0a8d3c9ec1f82d2a41faa6c46b8db7bd5b1eb8d
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:22:44 2005 -0700

    [IA64] Need to handle lfetch in "no_context" case.
    
    Thanks to Mark for tracking down this one.  Users of __copy_from_user_inatomic()
    will be sad if we don't handle lfetch faults for the "no_context" case.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0985ea8f2db87d32b0b750229889e55fed7458ef
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:21:54 2005 -0700

    [IA64-SGI] Altix SN add support for slots in geoid_t locator
    
    This patch against ia64-test-2.6.12 is needed for forthcoming
    Altix chipsets. It renames geoid_any_t to geoid_common_t and
    splits the 8bit 'slab' field into two 4bit fields for 'slab'
    and 'slot'. Similar changes in the Altix SAL will retain backward
    compatibility for old kernels.
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a37d98f6a98254c05315e0bbf45c4602942d14b1
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 13:20:38 2005 -0700

    [IA64] fix syscall-optimization goof
    
    Sadly, I goofed in this syscall-tuning patch:
    
    ChangeSet 1.1966.1.40 2005/01/22 13:31:05 davidm@hpl.hp.com
      [IA64] Improve ia64_leave_syscall() for McKinley-type cores.
    
      Optimize ia64_leave_syscall() a bit better for McKinley-type cores.
      The patch looks big, but that's mostly due to renaming r16/r17 to r2/r3.
      Good for a 13 cycle improvement.
    
    The problem is that the size of the physical stacked registers was
    loaded into the wrong register (r3 instead of r17).  Since r17 by
    coincidence always had the value 1, this had the effect of turning
    rse_clear_invalid into a no-op.  That poses the risk of leaking kernel
    state back to user-land and is hence not acceptable.
    
    The fix below is simple, but unfortunately it costs us about 28 cycles
    in syscall overhead. ;-(
    
    Unfortunately, there isn't much we can do about that since those
    registers have to be cleared one way or another.
    
    	--david
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 93a07d0a0e7b013ee73fb39d4edb07b47288912e
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Apr 25 13:19:52 2005 -0700

    [IA64-SGI] Shub2 BTE support - BTE recovery code
    
    patch 2:
    	Shub2 BTE recovery code will be implemented in SAL.
    	Define the SAL interface.
    	Modify bte_error to call SAL for shub2.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 95ff439a517835aa2bdf725fafbb025a63984289
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Apr 25 13:19:11 2005 -0700

    [IA64-SGI] Add new MMR definitions/Modify BTE initialiation&copy.
    
    patch 1:
    	Add new MMR definitions.
    	Modify BTE initialiation.
    	Modify BTE copy.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4628d7cada7a19166ba8fe57f5ef0f0009694e1e
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 13:18:02 2005 -0700

    [IA64-SGI] disable TIOCA GART TLB prefetching
    
    Patch to disable SGI TIOCA GART TLB prefetching due to hw bug.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e96c9b4779e651a7469bea677be3a08f70be399e
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:16:59 2005 -0700

    [IA64] MAX_PGT_FREES_PER_PASS must be 'L' to avoid warning
    
    'min' is very picky about types of arguments, make it happy
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c411cb56586915350e4cdb6f228e9da2adba3285
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:16:16 2005 -0700

    [IA64] fix: warning: `ql_size' might be used uninitialized
    
    Oops.  Should have caught this before I checked it in.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 5f6602a101993592b437b801c401443bec65d0cf
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon Apr 25 13:14:36 2005 -0700

    [IA64] sba_iommu bug fixes
    
       This fixes a couple of bugs in the zx1/sx1000 sba_iommu.  These are
    all pretty low likelihood of hitting.  The first problem is a simple off
    by one, deep in the sba_alloc_range() error path.  Surrounding that was
    a lock ordering problem that could have potentially deadlocked with the
    order the locks are grabbed in sba_unmap_single().  I moved the resource
    locking into sba_search_bitmap() to prevent this.  Finally, there's a
    potential race between unmapping pdir entries and marking incoming DMA
    pages clean.  If you see any oddities, please let me know, but I've
    tested it pretty thoroughly here.  Tony, please apply.  Thanks,
    
    BTW, many of the options in this driver not on by default are becoming
    more and more broken.  I'll be working on some patches to clean them
    out, but I wanted to get this bug fix out first.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fde740e4dd4a05ca8957490d468fa9b2770f5bd6
Author: Robin Holt <holt@sgi.com>
Date:   Mon Apr 25 13:13:16 2005 -0700

    [IA64] Percpu quicklist for combined allocator for pgd/pmd/pte.
    
    This patch introduces using the quicklists for pgd, pmd, and pte levels
    by combining the alloc and free functions into a common set of routines.
    This greatly simplifies the reading of this header file.
    
    This patch is simple but necessary for large numa configurations.
    It simply ensures that only pages from the local node are added to a
    cpus quicklist.  This prevents the trapping of pages on a remote nodes
    quicklist by starting a process, touching a large number of pages to
    fill pmd and pte entries, migrating to another node, and then unmapping
    or exiting.  With those conditions, the pages get trapped and if the
    machine has more than 100 nodes of the same size, the calculation of
    the pgtable high water mark will be larger than any single node so page
    table cache flushing will never occur.
    
    I ran lmbench lat_proc fork and lat_proc exec on a zx1 with and without
    this patch and did not notice any change.
    
    On an sn2 machine, there was a slight improvement which is possibly
    due to pages from other nodes trapped on the test node before starting
    the run.  I did not investigate further.
    
    This patch shrinks the quicklist based upon free memory on the node
    instead of the high/low water marks.  I have written it to enable
    preemption periodically and recalculate the amount to shrink every time
    we have freed enough pages that the quicklist size should have grown.
    I rescan the nodes zones each pass because other processess may be
    draining node memory at the same time as we are adding.
    
    Signed-off-by: Robin Holt <holt@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ff3eb55ed97db3f12964beeffe3d34602d295367
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 13:12:02 2005 -0700

    [IA64-SGI]
    
    Missed the "bk new" for this file in the last commit.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c1298c5c7e5763a3b2fd4a9535d474ff6e54cd53
Author: Aaron Young <ayoung@sgi.com>
Date:   Mon Apr 25 13:11:14 2005 -0700

    [IA64-SGI] Altix: enable poweroff
    
    This patch adds the necessary "hook" to allow SGI/SN
    machines to perform a system power off upon a
    'init 0', 'halt -p', 'poweroff' or 'shutdown -h'.
    
    The "hook" is to set the pm_power_off callback
    to ia64_sn_power_down(). pm_power_off is checked
    in machine_power_off()/do_poweroff() and, if set, is executed.
    ia64_sn_power_down() is a function already present (but not
    used currently) in the sn kernel.
    ia64_sn_power_down() makes a SAL call to execute the
    power off.
    
    Signed-off-by: Aaron Young <ayoung@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e1e19747ecce9117610b8f3b57a3e95734230319
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 13:09:41 2005 -0700

    [IA64-SGI] Bus driver for the CX port of SGI's TIO chip.
    
    This patch is to provide CX port infrastructure for SGI TIO-based
    h/w.   Also a 'core services' driver for SGI FPGA-based h/w.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4944930ab748942e41ea4dc313fcb0946aee3f17
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Mon Apr 25 13:08:30 2005 -0700

    [IA64] perfmon: make pfm_sysctl a global, and other cleanup
    
    - make pfm_sysctl a global such that it is possible
      to enable/disable debug printk in sampling formats
      using PFM_DEBUG.
    
    - remove unused pfm_debug_var variable
    
    - fix a bug in pfm_handle_work where an BUG_ON() could
      be triggered. There is a path where pfm_handle_work()
      can be called with interrupts enabled, i.e., when
      TIF_NEED_RESCHED is set. The fix correct the masking
      and unmasking of interrupts in pfm_handle_work() such
      that we restore the interrupt mask as it was upon entry.
    
    signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 658b32cad9ae087bd34f35a925fd75b76d663d4e
Author: Colin Ngam <cngam@sgi.com>
Date:   Mon Apr 25 13:07:00 2005 -0700

    [IA64-SGI] support variable length nasids in shub2
    
    This patch enables our TIO IO chipset to support variable length nasids in
    Shub2 chipset.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit be539c73b54dcc9f54fb2c2b70e204c93b616c9b
Author: Colin Ngam <cngam@sgi.com>
Date:   Mon Apr 25 13:06:28 2005 -0700

    [IA64-SGI] Shub2 provides an addition of 2 External Interrupt events.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f1e2a1c8a1fe16db5f4a7c0c1551d6e1b97dcbb2
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:05:08 2005 -0700

    [IA64-SGI] Altix SN topology fix potential infinite loop
    
    Fix infinite loop if sn_hwperf_location_to_bpos() fails.
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4a5c13c7eb0d55bfd2cf3100c55f1e3d8df37576
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:04:22 2005 -0700

    [IA64-SGI] Altix SN topology support for new chipsets and pci topology
    
    please accept this patch to the Altix SN platform topology export
    interface to support new chipsets and to export PCI topology.
    
    This follows on top of Jack Steiner's patch dated March 1st
    ("New chipset support for SN platform").
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 30325d17715302a60c9afdaacaafaeb056b7e880
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 13:03:16 2005 -0700

    [IA64] speed up syscall path a bit more
    
    Recently I noticed that clearing ar.ssd/ar.csd right before srlz.d is
    causing significant stalling in the syscall path.  The patch below
    fixes that by moving the register-writes after srlz.d.  On a Madison,
    this drops break-based getpid() from 241 to 226 cycles (-15 cycles).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cbdbf00aaf0addd391259f94aaa8e7dc1bfc9081
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Apr 25 12:15:01 2005 -0700

    [PKT_SCHED]: Eliminate unnecessary includes in simple.c
    
    Noted by Al Viro.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b31e5b1bb53b99dfd5e890aa07e943aff114ae1c
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Apr 25 12:01:07 2005 -0700

    [NETFILTER]: Drop conntrack reference when packet leaves IP
    
    In the event a raw socket is created for sending purposes only, the creator
    never bothers to check the socket's receive queue.  But we continue to
    add skbs to its queue until it fills up.
    
    Unfortunately, if ip_conntrack is loaded on the box, each skb we add to the
    queue potentially holds a reference to a conntrack.  If the user attempts
    to unload ip_conntrack, we will spin around forever since the queued skbs
    are pinned.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f649a3bfd1b0ad8872312ed1c223d69b74406e1f
Author: Yasuyuki Kozakai <yasuyuki.kozkaai@toshiba.co.jp>
Date:   Mon Apr 25 12:00:04 2005 -0700

    [NETFILTER]: Fix truncated sequence numbers in FTP helper
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozkaai@toshiba.co.jp>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e8d1cb2f280aa53e1c75c8b5fcbf80b3481d0caa
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Apr 25 11:45:26 2005 -0700

    [IA64] Tighten up unw_unwind_to_user check
    
    Detect user space by the unwind frame with predicate PRED_USER_STACK
    set, instead of a user space IP.  Tighten up the last ditch check for
    running off the top of the kernel stack.
    
    Based on a suggestion by David Mosberger, reworked to fit the current
    tree.  This survives my stress test which used to break 2.6.9 kernels.
    Unlike 2.6.11, the stress test now unwinds to the correct point, so
    gdb can get the user space registers.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8297511530b0d2a281c796e738683951a59a020c
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 11:44:02 2005 -0700

    [IA64] add missing cpu_relax() in ITC syncing code
    
    Call cpu_relax() in busy-waiting loops of the ITC-syncing code.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bf1cf98fa941fea5e630e341db4a294d531aaa3e
Author: Jack Steiner <steiner@sgi.com>
Date:   Mon Apr 25 11:42:39 2005 -0700

    [IA64-SGI] Change SAL call request code for SN systems
    
    Change the value of the SAL call number for a new SAL request. The
    initial implementation in the PROM did not match what the OS expected.
    Since the OS can run on PROMs that do not implement the new call,
    changing the call number avoids the issue. New PROMs will implement
    the new call number. (This avoids problems with the 4.05 PROM).
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9c90bdde77f7b7a42f7ebb900275d459ce2bac05
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:35:54 2005 -0700

    [IA64-SGI] altix: tioca chip driver (agp)
    
    Provide a driver for the altix TIOCA AGP chipset.  An agpgart backend will
    be provided as a separate patch.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9b08ebd167a3f3812131a54512f92c3c6738ad03
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:32:16 2005 -0700

    [IA64-SGI] sn2-move-pci-headers.patch
    
    Move a couple of headers out of arch/ia64/sn/include/pci and into
    include/asm-ia64/sn.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e955d82543fea76b02aa243b182e782f71bda82c
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:26:03 2005 -0700

    [IA64-SGI] sn2-pci-dma-abstraction.patch
    
    Provide an abstraction of the altix pci dma runtime layer so that multiple
    pci-based bridges can be supported.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b7ebcc108a1754a1d044b49c0acf977a7e86ae71
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 18:40:31 2005 +0100

    [PATCH] ARM: 2641/1: Adds S3C2400_SPPIN_nCS to arch-s3c2410/regs-spi.h
    
    Patch from Lucas Correia Villa Real
    
    Adds a define to the SPI Card Select bit on the S3C2400 into
    include/asm-arm/arch-s3c2410/regs-spi.h
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a3342421363642d03b2ae3ecd27e3041de043e99
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 18:36:50 2005 +0100

    [PATCH] ARM: 2640/1: Adds DRAM/BANKSIZE_MASK definitions for S3C2400
    
    Patch from Lucas Correia Villa Real
    
    Adds DRAM refresh definitions and sets the BANKSIZE_MASK for the S3C2400 on
    include/asm-arm/arch-s3c2400/regs-mem.h
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 25ee7e3832951cf5896b194f6cd929a44863f419
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Apr 25 08:18:14 2005 -0700

    [PATCH] fs/aio.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Benjamin LaHaise <bcrl@kvack.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 056de2fa12febe02597f971eb6ea8f2cc9c9b06e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:59 2005 -0700

    [PATCH] ppc user annotations: debug_setconetext(2)
    
    3rd argument of sys_debug_setcontext() is also a userland pointer.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc074a8a32bc12e19436b087f01f4a4700e9b9c0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: mv643xx_eth
    
    void * __iomem replaced with intended void __iomem *.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91de1fff2d431fec1162333a1e4fad9a53cd5b9e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc sparse annotations: emulate_string_inst()
    
    replaced declaration of EA from u32 to unsigned long - this beast is
    used only to cast it to (userland) pointer and proper integer type for
    that is unsigned long.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d01daf72f0a238c5ccfba7bf82999e384927412e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: pmac_low_i2c
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba724a373a7184dce869e8adb79a0a03d91fbdd8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: ebony_setup_pcix()
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92a11f9e7cb876e6cf9080e4a1642142cb9221b2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:57 2005 -0700

    [PATCH] ppc iomem annotations: ->io_base_virt
    
    * ->io_base_virt in struct pci_controller is iomem pointer.  Marked as such.
      Most of the places that used it are already annotated to expect iomem.
    * places that did gratitious (and wrong) casts a-la
    	isa_io_base = (unsigned long)ioremap(...);
    	hose->io_base_virt = (void *)isa_io_base;
      turned into
    	hose->io_base_virt = ioremap(...);
    	isa_io_base = (unsigned long)hose->io_base_virt;
    * pci_bus_io_base() annotated as returning iomem pointer.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9090e001f28de4bccae232f1b78e78fad5132ecb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:57 2005 -0700

    [PATCH] ppc user annotations: sigcontext
    
    sigcontext.regs is a userland pointer
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf025109e879294f4c6aecf94de1e7b592a9fb07
Merge: edec231... 9a59c18...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 25 07:42:22 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit 9a59c1860d01b3dea9ab01d5cefb9d5c52042e6d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Apr 24 21:04:02 2005 -0700

    [SPARC64]: Fix SMP build.
    
    Kill build failures in the SMP+!PREEMPT case introduced
    by Al Viro's spinlock.h changes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24dc6ead53f8fcae4b1908c4ea3fea75ee844a6d
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:46:49 2005 -0700

    [SPARC]: dump_stack for sparc
    
    Bob Breuer wrote a patch to add dump_stack for sparc. Supposedly, this
    was applied, but it doesn't exist in 2.6.11.
    
    This is the same patch, rediffed against 2.6.11.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 205a7edad99d68d57dfcbf9bdda1a6fb7c33169e
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:46:00 2005 -0700

    [SPARC]: Fix mxcc warning
    
    Peter Jones uncovered this one while we were debugging the framebuffer
    issues. There are some references to -1 in the mxcc asm code, which
    should be 0xffffffff.
    
    This patch gets rid of the -1s.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 962bd5604bf8a4d31d9204e7daf260ea93084bc0
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:45:06 2005 -0700

    [SPARC]: More sparc32 ksyms cleanups
    
    The sparc32 ksyms is missing a few more symbols, these are primarily
    related to SMP, and will be needed as SMP gets beaten back into
    functionality.
    
    Specifically, add __cpu_data (PER_CPU), cpu_online_map, and
    phys_cpu_present_map.
    
    This patch assumes that the earlier "linux-2.6.11-sparc-fixksyms.patch"
    is applied, otherwise, it will apply with fuzz.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f1dee7ea250bfef433fc46fd69a52b73349b24de
Author: Bob Breuer <breuerr@mc.net>
Date:   Sun Apr 24 20:42:45 2005 -0700

    [SPARC]: Enable sun logo on sparc32
    
    This enables the sun linux logo to be selected on sparc32.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77a6a22f697bbc59cd434ff999dc34162e240f16
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:41:45 2005 -0700

    [SPARC]: Missing sparc32 ksyms
    
    This patch adds some missing sparc32 ksyms that are needed.
    Specifically, ___rw_read_enter, ___rw_read_exit, ___rw_write_enter, and
    sys_close.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ee7c15294985e4e722959fd4482df60cefd2cc8
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:39:15 2005 -0700

    [SPARC]: TCX Framebuffer fixes
    
    Using the same logic as the other framebuffer fixes committed in 2.6.11,
    this is a set of fixes to make TCX functional on the console again. Adds
    the tcx_pan_display function, sets the
    all->info.var.{red,green,blue}.length values to 8, and runs fb_set_cmap.
    Also looks for the correct SUNW,tcx prom value.
    
    This patch just slipped through the cracks.
    
    Originally by: Georg Chini <georg.chini@triaton-webhosting.com>
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a271c241a6036d4d583d0f47a02ba5f18b8b92b5
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:38:02 2005 -0700

    [SPARC]: Stop-A printk cleanup
    
    This patch is incredibly trivial, but it does resolve some of the user
    confusion as to what "L1-A" actually is.
    
    Clarify printk message to refer to Stop-A (L1-A).
    
    Gentoo has a virtually identical patch in their kernel sources.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 10158286e7b5347dce2285895c95419b9f6f8b63
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:35:20 2005 -0700

    [SPARC]: module version cleanups
    
    Minor cleanups for sparc specific drivers (sunbmac, sunqe, sunlance,
    sunhme, esp) so that they have a full module version definition that is
    consistent with other upstream drivers.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit edec231a8a652384cb6d61e648338aa5155f2b72
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sun Apr 24 20:22:28 2005 -0700

    [IPV6]: export inet6_sock_nr
    
    Please apply, SCTP/DCCP needs this when INET_REFCNT_DEBUG
    is set.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5c13fafd6548fe36b8fe9285c1912fcf96379f4
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sun Apr 24 20:19:54 2005 -0700

    [PKT_SCHED]: improve hashing performance of cls_fw
    
    Calculate hashtable size to fit into a page instead of a hardcoded
    256 buckets hash table. Results in a 1024 buckets hashtable on
    most systems.
    
    Replace old naive extract-8-lsb-bits algorithm with a better
    algorithm xor'ing 3 or 4 bit fields at the size of the hashtable
    array index in order to improve distribution if the majority of
    the lower bits are unused while keeping zero collision behaviour
    for the most common use case.
    
    Thanks to Wang Jian <lark@linux.net.cn> for bringing this issue
    to attention and to Eran Mann <emann@mrv.com> for the initial
    idea for this new algorithm.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d3d077cd4f1154e63a9858e47fe3fb1ad0c03e5
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Apr 24 20:16:19 2005 -0700

    [SELINUX]: Fix ipv6_skip_exthdr() invocation causing OOPS.
    
    The SELinux hooks invoke ipv6_skip_exthdr() with an incorrect
    length final argument.  However, the length argument turns out
    to be superfluous.
    
    I was just reading ipv6_skip_exthdr and it occured to me that we can
    get rid of len altogether.  The only place where len is used is to
    check whether the skb has two bytes for ipv6_opt_hdr.  This check
    is done by skb_header_pointer/skb_copy_bits anyway.
    
    Now it might appear that we've made the code slower by deferring
    the check to skb_copy_bits.  However, this check should not trigger
    in the common case so this is OK.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa77d26961fa4ecb11fe4209578dcd62ad15819d
Author: Ben Greear <greearb@candelatech.com>
Date:   Sun Apr 24 20:13:19 2005 -0700

    [NET]: Document ->hard_start_xmit() locking in netdevices.txt
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af191367a752625b9f05a25a9a76c727b9b17cab
Author: Ben Greear <greearb@candelatech.com>
Date:   Sun Apr 24 20:12:36 2005 -0700

    [NET]: Document ->hard_start_xmit() locking in comments.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db7530797992bb2be703f9f3cc69b1a578f812f8
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sun Apr 24 20:10:16 2005 -0700

    [PKT_SCHED]: Introduce simple actions.
    
    And provide an example simply action in order to
    demonstrate usage.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac6910e189471e6b46ecea59e7620b083329ad4f
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 24 20:06:16 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 758d11bf096ada9d38fc690c2efe5e4661685bfc
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Apr 24 19:14:36 2005 -0700

    [ATM]: ENI155P error handling fix
    
    From: Panagiotis Issaris <takis@lumumba.luc.ac.be>
    
    In the ENI155P device driver in six possible failure cases the requested
    irq is not being released.
    
    In three of the above possible failure cases additionally there seems to
    be a memory leak.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5ac99a648b8c61d0c7f1c32a8ab7f1dca0123d2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Apr 24 19:12:33 2005 -0700

    [TCP]: skb pcount with MTU discovery
    
    The problem is that when doing MTU discovery, the too-large segments in
    the write queue will be calculated as having a pcount of >1.  When
    tcp_write_xmit() is trying to send, tcp_snd_test() fails the cwnd test
    when pcount > cwnd.
    
    The segments are eventually transmitted one at a time by keepalive, but
    this can take a long time.
    
    This patch checks if TSO is enabled when setting pcount.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 158a0e45b69254a9ee4d7795e3b98d8c959fb799
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Apr 24 18:59:30 2005 -0700

    [SLIP]: Remove redundant NULL pointer checks prior to kfree
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18900829f32443658ca4d4793c01621c75d551c1
Author: chas williams <chas@cmf.nrl.navy.mil>
Date:   Sun Apr 24 18:58:15 2005 -0700

    [ATM]: [fore200e] pci doesn't use global board list; use pci_register_driver()
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e5695f0800f8450d9a48efb1424918d18093b00b
Author: chas williams <chas@cmf.nrl.navy.mil>
Date:   Sun Apr 24 18:55:35 2005 -0700

    [ATM]: [he] Use the DMA_32BIT_MASK constant from dma-mapping.h
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 56cb515628e6a831bb76783f282a71f7285dad33
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sun Apr 24 18:53:06 2005 -0700

    [AX25] Introduce ax25_type_trans
    
    Replacing the open coded equivalents and making ax25 look more like
    a linux network protocol, i.e. more similar to inet.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3b2d59d1fc86cc7217f165100a939907802dc67c
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Apr 24 18:42:39 2005 -0700

    [NETFILTER]: Ignore PSH on SYN/ACK in TCP connection tracking
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e281e3ac2b6c294d672034909883e7bb9e649ac7
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Apr 24 18:41:38 2005 -0700

    [NETFILTER]: Fix NAT sequence number adjustment
    
    The NAT changes in 2.6.11 changed the position where helpers
    are called and perform packet mangling. Before 2.6.11, a NAT
    helper was called before the packet was NATed and had its
    sequence number adjusted. Since 2.6.11, the helpers get packets
    with already adjusted sequence numbers.
    
    This breaks sequence number adjustment, adjust_tcp_sequence()
    needs the original sequence number to determine whether
    a packet was a retransmission and to store it for further
    corrections. It can't be reconstructed without more information
    than available, so this patch restores the old order by
    calling helpers from a new conntrack hook two priorities
    below ip_conntrack_confirm() and adjusting the sequence number
    from a new NAT hook one priority below ip_conntrack_confirm().
    
    Tracked down by Phil Oester <kernel@linuxace.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e293ada7d6aaee43dd56a8077b83577dd108667
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: pmac_smp.c
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2178f199b341cc3e3ac86be50a54b0d8d8a132f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: chrp
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28a6815979b4eff29956549d62f72582a81f041e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: pmac_time.c
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef0299bf8e868c09bff13e6f3c4fc9b835f60471
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:36 2005 -0700

    [PATCH] mostek bogus sparse annotations fixed
    
    void * __iomem foo is not a pointer to iomem - it's an iomem variable
    containing void *.  A pile of such guys in arch/sparc64/kernel/time.c,
    drivers/sbus/char/rtc.c and include/asm-sparc64/mostek.h turned into
    intended void __iomem *.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdca124a1bcc7e624f6b887c6f26153f40ee43ee
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:36 2005 -0700

    [PATCH] missing include in mthca
    
    Missing include - usual portability problems...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 461790f79028ee9bfc3dd9d9afccc7e264aff9c7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] broken dependency for floppy on ARM
    
    (!ARCH_S390 && !M68K && !IA64 && !UML) is obviously always true on ARM.
    
    Intended behaviour for ARM is "absent unless we are on RiscPC or
    EBSA285".  So what we want is added && !ARM in the first term - without
    it the last part (|| ARCH_RPC || ARCH_EBSA285, that is) doesn't do
    anything.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a62e7cef1aef9f98bddd92b8f9f8f3c2fb25037b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] missing include in hisax
    
    Missing include, breaks at least on arm.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3106dbcd914d8dac4b89f52d8d51ec93526cbb95
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] __get_unaligned() turned into macro
    
    Turns __get_unaligned() and __put_unaligned into macros.  That is
    definitely safe; leaving them as inlines breaks on e.g.  alpha [try to
    build ncpfs there and you'll get unresolved symbols since we end up
    getting __get_unaligned() not inlined].
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5a48daddc88fa0467a6ba371fcff0710781bf11
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] broken dependency for I2C_MPC
    
    All boards dealt with by I2C_MPC are 32bit.  Moreover, driver simply
    won't build on ppc64 - it uses ppc32-only types all over the place.
    Dependency fixed - it's PPC32, not PPC.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3b9ab1a6da339312bb23747693805fa63e2ffd0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] missing dependency on sparc64
    
    CONFIG_HW_CONSOLE selects vt.c; without the stuff pulled by CONFIG_VT it
    will not build.  Normally we get both in drivers/char/Kconfig and there
    HW_CONSOLE depends on VT.  sparc64 does not pull drivers/char/Kconfig
    and has that sutff in arch/sparc64/Kconfig instead.  However, it forgets
    to add the same dependency.  As the result, turning VT off [which is
    possible] will end up with broken build.  For no good reason...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa732f556896836e88cd662ee7a664c4db6d080d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] msnd_pinnacle GFP fix
    
    Dumb typo - __get_free_page() takes gfp mask (in this case -
    GFP_KERNEL), not the page size...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01424961e621737c638e489b6a0b5e6602b02612
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] mempolicy.c GFP fix
    
    zonelist_policy() forgot to mask non-zone bits from gfp when comparing
    zone number with policy_zone.
    
    ACKed-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc86120a85ebf553180946e8854d1993f074e9f5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] SCSI GFP fixes
    
    Somebody forgot that | has higher priority than ?:.  As the result,
    allocation is done with bogus flags - instead of GFP_ATOMIC + possibly
    GFP_DMA we always get GFP_DMA and no GFP_ATOMIC.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9719b0c298bd6a4a608843dc989a5f94cd0a7c13
Author: Patrick Boettcher <patrick.boettcher@desy.de>
Date:   Sat Apr 23 13:16:15 2005 -0700

    [PATCH] USB: Fix for ati_remote
    
    when stealing code from ati_remote for a GPL-driver of my usbradio (because of
    its neat usb int transfers) I found out, that the inbuf is freed twice.
    
    I don't have the ati-remote, so I don't know it is a problem at all, but it
    looks strange to me anyway. Also I don't know if it has been fixed already in
    newer kernel versions.
    
    
    From: Patrick Boettcher <patrick.boettcher@desy.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f3fae6ed6aafe71826e03876ad3d4e1d3f238ec8
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Apr 22 15:07:02 2005 -0700

    [PATCH] USB: better usbnet zaurus/mdlm/... fix
    
    This is a somewhat more comprehensive fix for the problem of devices
    like the newer Zaurii ... or in this case some Motorola cell phones.
    
    To recap, the problem's root cause is that these devices aren't using
    standard USB class specifications for their network links, and so far
    we've had to add lots of device-specific driver entries.  The vendor
    fix abuses the CDC MDLM descriptors (they _could_ have conformed to
    the spec, but didn't) and defines a "Belcarra firmware" pseudo-class.
    
    This patch recognizes that pseudo-class by the GUIDs in those descriptors,
    and handles the devices that just use the Zaurus framing.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ea13c9c0e40d24c5f45a3a6bee8a2a39bfb1df4
Author: David Hollis <dhollis@davehollis.com>
Date:   Fri Apr 22 15:07:02 2005 -0700

    [PATCH] usbnet: Convert ASIX code to use new status infrastructure
    
    Modify the ASIX USB Ethernet code to make use of the new status
    infrastructure in usbnet.
    
    Additionally, add a link_reset() handler to the struct usbnet
    structure to provide a generic means for a driver to perform link
    reset tasks such as a determining link speed and setting
    device flags accordingly.
    
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fb3b4ebc0be618dbcc2326482a83c920d51af7de
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: MODALIAS change for bcdDevice
    
    The patch below adjusts the MODALIAS generated by the usb hotplug
    function to match the proposed change to scripts/mod/file2alias.c.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b19dcd9341a81ff6e04fcec396f77eeb91570584
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: scripts/mod/file2alias.c: handle numeric ranges for USB bcdDevice
    
    Another attempt at that...
    
    The attached patch fixes the longstanding problem with USB bcdDevice
    numeric ranges incorrectly converted into patterns for MODULE_ALIAS
    generation.  Previously it put both the lower and the upper limits into
    the pattern, dlXdhY, making it impossible to fnmatch against except for
    a few special cases, like dl*dh* or dlXdhX.
    
    The patch makes it generate multiple MODULE_ALIAS lines covering the
    whole range with fnmatch-able patterns.  E.g. for a range between 0x0001
    and 0x8345 it gives the following patterns:
    
    000[1-9]
    00[1-9]*
    0[1-9]*
    [1-7]*
    8[0-2]*
    83[0-3]*
    834[0-5]
    
    Since bcdDevice is 2 bytes wide = 4 digits in hex representation, the
    max no. of patters is 2 * 4 - 1 = 7.
    
    The values are BCD (binary-coded decimals) and not hex, so patterns
    using a dash seem to be safe regardless of locale collation order.
    
    The patch changes bcdDevice part of the alias from dlXdhY to dZ, but
    this shouldn't have big compatibility issues because fnmatch()-based
    modprobing hasn't yet been widely used.  Besides, the most common (and
    almost the only working) case of dl*dh* becomes d* and thus continues to
    work.
    
    The patch is against 2.6.12-rc2, applies to -mm3 with an offset.  The
    matching patch to fix the MODALIAS environment variable now generated by
    the usb hotplug function follows.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2e0a6b8cd27375089f8356e7f1ce2319059696eb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: drivers/usb/net/zd1201.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2c47e7f37830cc83e7c77f0d5b7d4ac15105475b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/media/pwc/: make code static
    
    This patch makes needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7107627b04b46bce8212e6a6811add5eb8bcb476
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/media/sn9c102_core.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be5e3383a95446e933be198d3025df10a072794b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/input/usbkbd.c: make a function static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cef11127ea59cc5ac8fb956c355727999c6796dc
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: new SiS device id
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 35ecc486a3f1811b85b7b22196b8b7422d713b51
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: fix up the HP49G+ Calculator USB Serial driver
    
    Fix compiler warnings, and remove unneeded #includes
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 36045fb77cb8b4043063ea54067907a1afd317b4
Author: Arthur Huillet <arthur.huillet@agoctrl.org>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: add HP49G+ Calculator USB Serial support
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 35f4a0c4416b4fd789f94328dc5940e79e1507b0
Author: Sven Anderson <sven@anderson.de>
Date:   Fri Apr 22 15:06:58 2005 -0700

    [PATCH] USB: clean up all iPod models in unusual_devs.h
    
    Phil Dibowitz wrote:
    > 1. You're adding product IDs 1202, 1203, 1204, and 1205. 1203 was
    > already there, but you remove it, OK, but 1205 is already there, so
    > you'll need to fix that.
    
    I was not removing 1203, it's just the extension of the bcd range. You are
    right about 1205, as I wrote, it was a patch against 2.6.11.7. Attached is
    a patch against 2.6.12-rc2.
    
    > 2. I'm OK with the full bcd range if Apple is changing it on firmware
    > revs... fine, but it's bcd, not hex... 0x9999 =)
    
    I just copied from other entries. There're a lot 0xffffs in unusual_dev.h,
    so I assumed it is correct. I changed it to 0x9999.
    
    > 3. It's rather obnoxious to take the original submitter's credit away.
    
    I didn't remove it, I changed it to "based on...". Because I changed
    something (the range) in his entry, I thought it is the best to take the
    responsibility but keep the origin. Anyway, in the new patch I did it in a
    different way.
    
    > 4. Your /proc/bus/usb/devices shows 1204, but I see no evidence 1202 is
    > really an iPod.
    
    I don't have an old iPod mini, but you find a lot of evidence here:
    
    http://www.google.com/search?q=0x1202+ipod
    
    Especially this one:
    
    http://www.qbik.ch/usb/devices/showdescr.php?id=2737
    
    > It also looks like 1205's entry is getting mangled, but I haven't
    > attempted to apply the patch, so I'm not sure.
    
    No, the patch was ok, but I agree it looks strange. It's not very
    readable, because I cannot tell diff to work blockwise instead of
    linewise. Because of the similarity of the entries, diff splits and merges
    them. Anyway, the new patch "looks" better. ;-)
    
    Signed-off-by: Sven Anderson <sven-linux@anderson.de>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 275cfdf412aee2367883b6cd764e06c07bd37a79
Author: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
Date:   Fri Apr 22 15:06:58 2005 -0700

    [PATCH] USB: compilation failure on usb/image/microtek.c
    
    maybe typo?
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit df6c6804ce1d383c878ab071bce8125125d96abc
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Apr 22 14:46:24 2005 -0700

    [IA64] Fix build errors for !HOTPLUG case.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b8d8b883e6f029e99c35c88f853501740e322131
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Apr 22 14:44:40 2005 -0700

    [IA64] cpu hotplug: return offlined cpus to SAL
    
    This patch is required to support cpu removal for IPF systems. Existing code
    just fakes the real offline by keeping it run the idle thread, and polling
    for the bit to re-appear in the cpu_state to get out of the idle loop.
    
    For the cpu-offline to work correctly, we need to pass control of this CPU
    back to SAL so it can continue in the boot-rendez mode. This gives the
    SAL control to not pick this cpu as the monarch processor for global MCA
    events, and addition does not wait for this cpu to checkin with SAL
    for global MCA events as well. The handoff is implemented as documented in
    SAL specification section 3.2.5.1 "OS_BOOT_RENDEZ to SAL return State"
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7130667107cd3ab9d6802b69bab63c7d22f20bd4
Author: Arun Sharma <arun.sharma@intel.com>
Date:   Fri Apr 22 13:06:47 2005 -0700

    [IA64] ia32_signal.c: erroneous use of memset/memcpy
    
    Found by Alexander Nyberg, improved by Bjorn Helgaas.
    
    - Fix the incorrect argument to sizeof()
    - looks like memcpy() code pass was dervived from code that used
      copy_from_user().  But in this case we are doing to kernel space
      to kernel space copy, so memcpy is the right routine, but it
      doesn't return an error code.
    
    Signed-off-by: Arun Sharma <arun.sharma@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit efab7739d99eae948971140b2aa3dddf7f72c900
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri Apr 22 10:22:07 2005 -0700

    [PATCH] x86_64: fix new out of line put_user()
    
    The labels after the last put_user patch were misplaced so
    exceptions on the real mov instructions would not be handled.
    
    Noted by Brian Gerst <bgerst@didntduck.org>

commit 21b7ef0c6c62a14bc8e1c8c0af4e1f0ba3a56d66
Merge: 5c5d281... b179fb8...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 22 10:18:06 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit b179fb8ca57590eeb0a5d6c8dc99f91773f09c73
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 22:18:03 2005 -0700

    [SPARC64]: In sunsab driver, make sure to set the uart timeout.
    
    This breaks serial consoles badly.  Thanks to Eric Brower
    for tracking down the problem.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 623f41eb923d7f34888cbd9e4f50a7b1a79d0ae5
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 22:06:13 2005 -0700

    [SPARC64]: In sunsu driver, make sure to fully init chip for kbd/ms
    
    We were forgetting to call sunsu_change_speed().  The reason
    that replugging in the mouse cable "fixes things" is that
    causes a BREAK interrupt which in turn caused a call to
    sunsu_change_speed() which would get the chip setup properly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b4bca26c0160f48b4eb04f21d31a229832732013
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Apr 21 21:42:34 2005 -0700

    [SPARC]: Provide generic ioctls in Sparc RTC driver.
    
    Provide support for drivers/char/rtc.c ioctls in the
    Mostek rtc driver as well as the Sparc specific RTCGET
    and RTCSET.
    
    This allows userspace to be much less messy.  Currently
    util-linux and other spots jump through hoops trying
    various ioctl variants until it hits the right one whatever
    driver actually being used supports.
    
    Eventually all of this should move over to the genrtc.c
    driver, but not today...
    
    While we are here, fix up the register types for sparse.
    
    Thanks to Frans Pop for helping point out this issue.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7be828e03969ea7f922f299acb8daa0d8ce7006
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 21:41:33 2005 -0700

    [SPARC64]: Provide a pgprot_noncached() implementation.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c5d281a93e9816966b6131ccec19519dab0e103
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 21 20:12:32 2005 -0700

    [XFRM]: Fix existence lookup in xfrm_state_find
    
    Use 'daddr' instead of &tmpl->id.daddr, since the latter
    might be zero.  Also, only perform the lookup when
    tmpl->id.spi is non-zero.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7938109fff944e0117976a39946d99d2b0b0250d
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:13:59 2005 -0700

    [TG3]: Add msi test
    
    Add MSI test for chips that support MSI. If MSI test fails, it will
    switch back to INTx mode and will print a message asking the user to
    report the failure.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88b06bc26b87cf0490b0e3faea7fefc7549dd75d
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:13:25 2005 -0700

    [TG3]: Add msi support
    
    Add MSI support for 5751 C0 and 5752.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c8594b48b00a98d12477355e944e165a5f64cd5
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:12:46 2005 -0700

    [TG3]: Fix bug in tg3_set_eeprom()
    
    Fix a bug in tg3_set_eeprom() when the length is less than 4 and the
    offset is not 4-byte aligned.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6af301be3c129adbc8a7c8ffb76e62533ad9575
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:12:05 2005 -0700

    [TG3]: Add nvram lock-out support for 5752 TPM
    
    Add support for the NVRAM lock-out feature for TPM in 5752. If lock-out
    is enabled, certain NVRAM registers cannot be written to.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 361b4ac29bc651c7612d4bf21434ae6fe06b78e4
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:11:21 2005 -0700

    [TG3]: Add nvram detection for 5752
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e7d83bc96d59013792e5546e7832668d3adbce7
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:10:36 2005 -0700

    [TG3]: Add GPIO3 for 5752
    
    Add bit definitions for the new GPIO3 in 5752. GPIO3 must be driven as
    output when it is unused.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff645bec523819fa4d28d7e0de7d998e3edb0c57
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:09:53 2005 -0700

    [TG3]: Workaround 5752 A0 chip ID
    
    The 5752 A0 chip ID is wrong in hardware. The simplest way to workaround
    it is to change it to the correct value in tp->pci_chip_rev_id. This
    way, it is easier to check for the ASIC_REV_5752 in the rest of the
    driver.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c6bda1a89c148f3a28edc09a76dac9bff57d8ee
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:09:08 2005 -0700

    [TG3]: Fix tg3_set_power_state()
    
    Fix tg3_set_power_state to drive GPIOs properly based on the
    TG3_FLAG_EEPROM_WRITE_PROTECT flag. Some delays are also added after D0
    and D3 power state changes.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 314fba348e1f64a30b53d3cff5d96872424e8498
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:07:04 2005 -0700

    [TG3]: Setup proper GPIO settings
    
    Setup proper GPIO settings in tp->grc_local_ctrl before calling
    tg3_set_power() state in tg3_get_invariants() and after chip reset.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d0c41ef89dad9008edf1c3c0022721ebad39999
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:06:20 2005 -0700

    [TG3]: Split tg3_phy_probe into 2 functions
    
    Split the 1st half of tg3_phy_probe() into tg3_get_eeprom_hw_cfg() so
    that the TG3_FLAG_EEPROM_WRITE_PROT can be determined before calling
    tg3_set_power_state() in tg3_get_invariants(). This will allow
    tg3_set_power_state() to drive the GPIOs correctly based on the config.
    information in eeprom.
    
    On the 5752, there are no pull-up resistors on the GPIO pins and it is
    necessary to drive the unused GPIOs as output.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85e94cedc44d1c2c1663b5b18f703ca5e7316e59
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:05:28 2005 -0700

    [TG3]: Minor 5752 fixes
    
    Some minor 5752 fixes mostly for correctness and add 5752 PHY ID.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 053d78000be4906fac6446ad517ca3897dc6cd84
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:03:52 2005 -0700

    [TG3]: add support for bcm5752 rev a1
    
    Replace existing ASIC_REV_5752 definition with ASIC_REV_5752_A0,
    and add definition for ASIC_REV_5752_A1. Then, add ASIC_REV_5752_A1
    to check for setting TG3_FLG2_5750_PLUS in tg3_get_invariants.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1b440c568e28186956ef765c69ab124401088663
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:03:18 2005 -0700

    [TG3]: check TG3_FLG2_5750_PLUS flag to set TG3_FLG2_5705_PLUS flag
    
    Use check of TG3_FLG2_5750_PLUS in tg3_get_invariants to set
    TG3_FLG2_5705_PLUS flag.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb7064dc09ff90015ddc7d818dd8fefb8ca5b936
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:02:41 2005 -0700

    [TG3]: use TG3_FLG2_57{05,50}_PLUS flags in tg3_get_invariants
    
    Rewrite checks in tg3_get_invariants to use TG3_FLG2_5705_PLUS and
    TG3_FLG2_5750_PLUS flags.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 863925f59e5425e4af6996b9c50857c766940176
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:02:04 2005 -0700

    [TG3]: more use of TG3_FLG2_5705_PLUS flag
    
    Rewrite of a couple of troublesome multi-way if statements to use
    TG3_FLG2_5705_PLUS flag.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbf46853c8db75f98bd005dc545aca0703063d4b
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:01:29 2005 -0700

    [TG3]: use new TG3_FLG2_5750_PLUS flag
    
    Replace a number of two-way if statements checking for 5750, and/or
    5752 to reference the newly-defined TG3_FLG2_5750_PLUS flag instead.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6708e5cc103ba045fca035b4d8df236ca31fb8bc
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:00:52 2005 -0700

    [TG3]: define TG3_FLG2_5750_PLUS flag
    
    Define TG3_FLG2_5750_PLUS flag and set it in tg3_get_invariants for
    ASIC_REV_5750 or ASIC_REV_5752.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fcf026936c613fc6ca4685677a461100d87eec81
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:00:02 2005 -0700

    [TG3]: use TG3_FLG2_5705_PLUS instead of multi-way if's
    
    Replace a number of three-way if statements checking for 5705, 5750,
    and 5752 to reference the equivalent TG3_FLG2_5705_PLUS flag instead.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e9017a7d9b949aea638eeba67d34affaa145f14
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:58:56 2005 -0700

    [TG3]: add bcm5752 entry to pci_ids.h
    
    Add proper entry for bcm5752 PCI ID to pci_ids.h, and use it in tg3.
    I did this separately in case patches like this (i.e. new PCI IDs)
    need to come from more "official" sources.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af2bcd97b570f39da94103f80f67433dab515049
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:57:50 2005 -0700

    [TG3]: add bcm5752 to tg3_pci_tbl
    
    Add hard-coded definition of bcm5752 PCI ID to tg3_pci_tbl.
    Next patch will change entry to use pci_ids.h-based definition.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2052da946096590035438626afbc7f329d2549d8
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:56:08 2005 -0700

    [TG3]: add basic bcm5752 support
    
    Add ASIC_REV_5752 definition.
    
    Track-down all references to ASIC_REV_5750 and mirror them with
    references to the newly defined ASIC_REV_5752.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebc37b611616ad46dce7d590b15ad655aa50213a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 21 16:48:26 2005 -0700

    [ATM]: net/atm/resources.c: remove __free_atm_dev
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29c4be51e3fd52205d848248d38924941f22ca0e
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu Apr 21 16:46:56 2005 -0700

    [AX25]: make ax25_queue_xmit a net_device parameter
    
    I.e. not using skb->dev as a way to pass the parameter used to fill...
    skb->dev :-)
    
    Also to get the _type_trans open coded sequence grouped, next changesets
    will introduce ax25_type_trans.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 208a6dfbd651f3a16c635678a731b419d3d9646f
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Apr 21 16:44:57 2005 -0700

    [ATM]: sk_atm() conversion missed subtle change of vcc
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 26095455ac2943edb0852aba1ff8f8026aabe07b
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 21 16:43:02 2005 -0700

    [NET]: Add missing newline for skb_*_panic
    
    While we're at it, lets also replace KERN_INFO by KERN_EMERG to
    make sure the user gets to see it.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1cff94c6fecdc54d6f022ae5a22888f8272804a1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Apr 21 16:20:35 2005 -0700

    [PATCH] fix subarch breakage in amd dual core updates
    
    The patch to arch/i386/kernel/cpu/amd.c relies on the variable
    cpu_core_id which is defined in i386/kernel/smpboot.c.  This means it is
    only present if CONFIG_X86_SMP is defined, not CONFIG_SMP (alternative
    SMP harnesses won't have it, which is why it breaks voyager).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62b56faa43a7e672e659d14f38f553ed8b40ea70
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] Fix tgafb.c compile failure
    
    The untested patch below should fix this compile error.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4ec0f23c878f761cf33f3cbb66c66d6c05931ba
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] Fix non-legacy ISO receive regression
    
    Fix non-legacy multichannel ISO receive, broken by Parag Wardukar's
    allocation fix.  Multichannel ISO receive still sucks; it should be possible
    to use both legacy and non-legacy modes at the same time, but with this
    patch, things are no worse than they were in 2.6.11 and allocation is
    still done at the correct time.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfe547ab872951949a1a2fcc5cedbedad27a2fe5
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] ohci1394: tlabels misprinted in DBGMSG
    
    - Print the correct value in the DBGMSG in dma_rcv_tasklet().
      See OHCI 1.1 section 8.7, page 103 ff.
    - Print tlabels as %d everywhere.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d134db051134c38ae6bf36034403c7da7f0e3da
Merge: 40b7bc0... 821376b...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 21 14:02:34 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit bd6ae2f6d61da0f90c6b66e9a4ab6c53ef8c159a
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Thu Apr 21 16:14:31 2005 -0400

    [SCSI] zfcp: fix compile error
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3a73e8c7715cdf53c24b602bfca15ec54d7c989b
Author: Nate Dailey <nhdailey@verizon.net>
Date:   Thu Apr 21 16:14:05 2005 -0400

    [SCSI] drivers/scsi/sr_ioctl.c: check for failed allocation
    
    I noticed a case in sr_ioctl.c's sr_get_mcn where a buffer is
    allocated, but the pointer isn't checked for null.
    
    Signed-off-by: Nate Dailey <nate.dailey@stratus.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0bdcd78ea2342ad1a9c79cac99eefcfd0b3f1c2b
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Apr 21 16:13:39 2005 -0400

    [SCSI] aic7xxx: remove inquiry sniffing leftovers
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c97a12a29b49ad4432927eac076fd5e3dedece6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Thu Apr 21 16:13:36 2005 -0400

    [SCSI] qla2xxx: remove a transport #include
    
    Make transport-functions structure non-static.  Replace #include of
    scsi_transport.h with a forward declaration.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 40b7bc062cdacb3883bb0f94eb122b8336af5b36
Author: Richard Henderson <rth@twiddle.net>
Date:   Thu Apr 21 11:28:26 2005 -0700

    [PATCH] alpha: key management syscalls
    
    Allocate syscall numbers for add_key, request_key, keyctl.

commit 821376bf15e692941f9235f13a14987009fd0b10
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Thu Apr 21 11:07:59 2005 -0700

    [IA64] fix fls()
    
    The ia64-version of fls() never worked as intended (the bitnumbering
    was off by 1 and fls(0) was undefined).  This patch fixes the problem
    by using a popcnt-based fls(), which on McKinley-derived cores is
    slightly faster than both ia64_fls() and generic_fls().  The resulting
    code, however, is bigger (7-8 bundles instead of about 3 bundles).
    Also switch ia64_popcnt() to __builtin_popcountl() for GCC v3.4 or
    newer since the compiler can predicate that and schedule it better.
    
    Thanks to Simon Derr and Matt Mackall for tracking down this bug.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d8470b7c13e11c18cf14a7e3180f0b00e715e4f0
Author: Karsten Keil <kkeil@suse.de>
Date:   Thu Apr 21 08:30:30 2005 -0700

    [PATCH] fix for ISDN ippp filtering
    
    We do not longer use DLT_LINUX_SLL for activ/pass filters but
    DLT_PPP_WITHDIRECTION witch need 1 as outbound flag.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a6fd752a50af92765853879f4a11cc0cfcd0320
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu Apr 21 07:59:51 2005 -0700

    [PATCH] x86_64: Bug in new out of line put_user()
    
    The new out of line put_user() assembly on x86_64 changes %rcx without
    telling GCC about it causing things like:
    
    http://bugme.osdl.org/show_bug.cgi?id=4515
    
    See to it that %rcx is not changed (made it consistent with get_user()).
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: ak@suse.de
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d9c5d94d39a09d9b112613f0bfdb9af0e6dc253
Merge: 858eaca... 489ec5f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 21 07:36:42 2005 -0700

    Merge rsync://rsync.kernel.org/pub/linux/kernel/people/davem/sparc-2.6.git

commit 858eaca169ed5e7b1b14eebb889323e75a02af0e
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Apr 21 07:35:45 2005 -0700

    [PATCH] Fix aic7xxx_osm.c compile with older gcc's
    
    My version of gcc doesn't warn about this error (declaration in the
    middle of a set of statements).
    
    The fix is simple (this also corrects return code; for init functions it
    should be zero or error).

commit 489ec5f5d59b306e4ccc505eac417526adedb438
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Apr 20 17:12:41 2005 -0700

    [SPARC64]: sparc64 preempt + smp
    
    PREEMPT+SMP support - see if it looks sane...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2755a80f40e5794ddc20e00f781af9d6320fafb
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Apr 20 16:24:21 2005 -0700

    Linux v2.6.12-rc3
    
    Releasing this will also make "git" the official source control
    thing. Here's to hoping for the best.

commit 4d78b6c78ae6d87e4c1c8072f42efa716f04afb9
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:48:59 2005 -0700

    [IPSEC]: COW skb header in UDP decap
    
    The following patch just makes the header part of the skb writeable.
    This is needed since we modify the IP headers just a few lines below.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7f905f0f6d49ed8c1aa4566c31f0383a0ba0c9d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:44:17 2005 -0700

    [ATALK]: Add missing dev_hold() to atrtr_create().
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88a66858253c57334a519a77187234867bc8605c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Apr 19 22:41:54 2005 -0700

    [SOCK]: on failure free the sock from the right place
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c2b3328f74800bb370d08bb3a4255d5fe833e94
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Apr 19 22:39:42 2005 -0700

    [NET]: skbuff: remove old NET_CALLER macro
    
    Here is a revised alternative that uses BUG_ON/WARN_ON
    (as suggested by Herbert Xu) to eliminate NET_CALLER.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 98f245e797a01611d6734c7d192240f1361439d3
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Apr 19 22:37:04 2005 -0700

    [RTNETLINK]: Add comma to final entry in link_rtnetlink_table
    
    Noticed by Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 240eed95eb55b43a3daadbf0cd7298f44eaa737c
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Apr 19 22:35:07 2005 -0700

    [RTNETLINK]: Protocol family wildcard dumping for routing rules
    
    Be kind to userspace and don't force them to hardcode protocol
    families just to have it changed again once we support routing
    rules for more than one protocol family.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3320da8906d8a7277ef54fd1b3646f85354cb66a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:32:22 2005 -0700

    [IPV6]: Replace bogus instances of inet->recverr
    
    While looking at this problem I noticed that IPv6 was sometimes
    looking at inet->recverr which is bogus.  Here is a patch to
    correct that and use np->recverr.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 357b40a18b04c699da1d45608436e9b76b50e251
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:30:14 2005 -0700

    [IPV6]: IPV6_CHECKSUM socket option can corrupt kernel memory
    
    So here is a patch that introduces skb_store_bits -- the opposite of
    skb_copy_bits, and uses them to read/write the csum field in rawv6.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd92833a52b972aafacced959f4a3f7541936a9b
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Apr 19 22:27:09 2005 -0700

    [IPV6]: Fix a branch prediction
    
    From: Tushar Gohad <tgohad@mvista.com>
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4d541106bc5d0a2134aaf9e8735eee3c70b0db2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 20:46:37 2005 -0700

    [NET]: Shave sizeof(ptr) bytes off dst_entry
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 561bbe3235da614562fb26bb14042af684971a2d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:23 2005 -0700

    [PATCH] freepgt: remove FIRST_USER_ADDRESS hack
    
    Once all the MMU architectures define FIRST_USER_ADDRESS, remove hack from
    mmap.c which derived it from FIRST_USER_PGD_NR.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d455a3696c72283923e6870e9e4fe1daa861d7cd
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:23 2005 -0700

    [PATCH] freepgt: arch FIRST_USER_ADDRESS 0
    
    Replace misleading definition of FIRST_USER_PGD_NR 0 by definition of
    FIRST_USER_ADDRESS 0 in all the MMU architectures beyond arm and arm26.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdfb82fff33cf3b1a367a427e5d89a012dc568b1
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:22 2005 -0700

    [PATCH] freepgt: arm26 FIRST_USER_ADDRESS PAGE_SIZE
    
    ARM26 define FIRST_USER_ADDRESS as PAGE_SIZE (beyond the machine vectors when
    they are mapped low), and use that definition in place of locally defined
    MIN_MAP_ADDR.  Previously, ARM26 permitted user mappings at 0 if the machine
    vectors were mapped high; but that's inconsistent with ARM, and
    FIRST_USER_ADDRESS would then have to be determined at runtime.  Let's fix it
    at PAGE_SIZE throughout the architecture.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6119be0bba10e7e7b1e5650a87812fa2fd8d3a60
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:21 2005 -0700

    [PATCH] freepgt: arm FIRST_USER_ADDRESS PAGE_SIZE
    
    ARM define FIRST_USER_ADDRESS as PAGE_SIZE (beyond the machine vectors when
    they are mapped low), and use that definition in place of locally defined
    MIN_MAP_ADDR.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8462e201756dd3bbe7e542106fc6fd6fe059cee2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:20 2005 -0700

    [PATCH] freepgt: sys_mincore ignore FIRST_USER_PGD_NR
    
    Remove use of FIRST_USER_PGD_NR from sys_mincore: it's inconsistent (no other
    syscall refers to it), unnecessary (sys_mincore loops over vmas further down)
    and incorrect (misses user addresses in ARM's first pgd).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2cdef8c847b480529b7e26991926aab4be008e6
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:19 2005 -0700

    [PATCH] freepgt: free_pgtables from FIRST_USER_ADDRESS
    
    The patches to free_pgtables by vma left problems on any architectures which
    leave some user address page table entries unencapsulated by vma.  Andi has
    fixed the 32-bit vDSO on x86_64 to use a vma.  Now fix arm (and arm26), whose
    first PAGE_SIZE is reserved (perhaps) for machine vectors.
    
    Our calls to free_pgtables must not touch that area, and exit_mmap's
    BUG_ON(nr_ptes) must allow that arm's get_pgd_slow may (or may not) have
    allocated an extra page table, which its free_pgd_slow would free later.
    
    FIRST_USER_PGD_NR has misled me and others: until all the arches define
    FIRST_USER_ADDRESS instead, a hack in mmap.c to derive one from t'other.  This
    patch fixes the bugs, the remaining patches just clean it up.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 021740dc30d184e3b0fa7679936e65a56090c425
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:18 2005 -0700

    [PATCH] freepgt: hugetlb area is clean
    
    Once we're strict about clearing away page tables, hugetlb_prefault can assume
    there are no page tables left within its range.  Since the other arches
    continue if !pte_none here, let i386 do the same.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 146425a316fb937fbdcac018b34a23c67d12214b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:18 2005 -0700

    [PATCH] freepgt: mpnt to vma cleanup
    
    While dabbling here in mmap.c, clean up mysterious "mpnt"s to "vma"s.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f6c99c11ae63ce887686f3e51c412cc4d8d8a7d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:17 2005 -0700

    [PATCH] freepgt: remove arch pgd_addr_end
    
    ia64 and sparc64 hurriedly had to introduce their own variants of
    pgd_addr_end, to leapfrog over the holes in their virtual address spaces which
    the final clear_page_range suddenly presented when converted from pgd_index to
    pgd_addr_end.  But now that free_pgtables respects the vma list, those holes
    are never presented, and the arch variants can go.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bf5ee95648c694bac4d13529563c230cd4fe5f2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:16 2005 -0700

    [PATCH] freepgt: hugetlb_free_pgd_range
    
    ia64 and ppc64 had hugetlb_free_pgtables functions which were no longer being
    called, and it wasn't obvious what to do about them.
    
    The ppc64 case turns out to be easy: the associated tables are noted elsewhere
    and freed later, safe to either skip its hugetlb areas or go through the
    motions of freeing nothing.  Since ia64 does need a special case, restore to
    ppc64 the special case of skipping them.
    
    The ia64 hugetlb case has been broken since pgd_addr_end went in, though it
    probably appeared to work okay if you just had one such area; in fact it's
    been broken much longer if you consider a long munmap spanning from another
    region into the hugetlb region.
    
    In the ia64 hugetlb region, more virtual address bits are available than in
    the other regions, yet the page tables are structured the same way: the page
    at the bottom is larger.  Here we need to scale down each addr before passing
    it to the standard free_pgd_range.  Was about to write a hugely_scaled_down
    macro, but found htlbpage_to_page already exists for just this purpose.  Fixed
    off-by-one in ia64 is_hugepage_only_range.
    
    Uninline free_pgd_range to make it available to ia64.  Make sure the
    vma-gathering loop in free_pgtables cannot join a hugepage_only_range to any
    other (safe to join huges?  probably but don't bother).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee39b37b23da0b6ec53a8ebe90ff41c016f8ae27
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:15 2005 -0700

    [PATCH] freepgt: remove MM_VM_SIZE(mm)
    
    There's only one usage of MM_VM_SIZE(mm) left, and it's a troublesome macro
    because mm doesn't contain the (32-bit emulation?) info needed.  But it too is
    only needed because we ignore the end from the vma list.
    
    We could make flush_pgtables return that end, or unmap_vmas.  Choose the
    latter, since it's a natural fit with unmap_mapping_range_vma needing to know
    its restart addr.  This does make more than minimal change, but if unmap_vmas
    had returned the end before, this is how we'd have done it, rather than
    storing the break_addr in zap_details.
    
    unmap_vmas used to return count of vmas scanned, but that's just debug which
    hasn't been useful in a while; and if we want the map_count 0 on exit check
    back, it can easily come from the final remove_vm_struct loop.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0da382c92626ad1d7f4b7527d19b80104d67a83
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:15 2005 -0700

    [PATCH] freepgt: free_pgtables use vma list
    
    Recent woes with some arches needing their own pgd_addr_end macro; and 4-level
    clear_page_range regression since 2.6.10's clear_page_tables; and its
    long-standing well-known inefficiency in searching throughout the higher-level
    page tables for those few entries to clear and free: all can be blamed on
    ignoring the list of vmas when we free page tables.
    
    Replace exit_mmap's clear_page_range of the total user address space by
    free_pgtables operating on the mm's vma list; unmap_region use it in the same
    way, giving floor and ceiling beyond which it may not free tables.  This
    brings lmbench fork/exec/sh numbers back to 2.6.10 (unless preempt is enabled,
    in which case latency fixes spoil unmap_vmas throughput).
    
    Beware: the do_mmap_pgoff driver failure case must now use unmap_region
    instead of zap_page_range, since a page table might have been allocated, and
    can only be freed while it is touched by some vma.
    
    Move free_pgtables from mmap.c to memory.c, where its lower levels are adapted
    from the clear_page_range levels.  (Most of free_pgtables' old code was
    actually for a non-existent case, prev not properly set up, dating from before
    hch gave us split_vma.) Pass mmu_gather** in the public interfaces, since we
    might want to add latency lockdrops later; but no attempt to do so yet, going
    by vma should itself reduce latency.
    
    But what if is_hugepage_only_range?  Those ia64 and ppc64 cases need careful
    examination: put that off until a later patch of the series.
    
    What of x86_64's 32bit vdso page __map_syscall32 maps outside any vma?
    
    And the range to sparc64's flush_tlb_pgtables?  It's less clear to me now that
    we need to do more than is done here - every PMD_SIZE ever occupied will be
    flushed, do we really have to flush every PGDIR_SIZE ever partially occupied?
    A shame to complicate it unnecessarily.
    
    Special thanks to David Miller for time spent repairing my ceilings.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f6c6fc505560465be0964eb4da1b6ca97bd3951
Merge: c3c6619... f0e035f...
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 13:14:28 2005 -0700

    Merge with kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/
    
    for 13 driver core, sysfs, and debugfs fixes.

commit c3c661932cd53582c5b03692b99649300977248a
Merge: c79bea0... a4b3836...
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 13:12:03 2005 -0700

    Merge with kernel.org:/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/
    
    for 11 aoe bugfix patches.

commit c79bea07ec4d3ef087962699fe8b2f6dc5ca7754
Merge: a9e4820... 1d66c64...
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 07:31:40 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6.git/

commit a9e4820c4c170b3df0d2185f7b4130b0b2daed2c
Merge: c0698f2... e838a0d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 07:28:57 2005 -0700

    Merge with Greg's USB tree at kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/
    
    Yah, it does work to merge. Knock wood.

commit a4b38364093bf2094ff858ad45f490521bb87984
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:22 2005 -0700

    [PATCH] aoe 12/12: send outgoing packets in order
    
    I can't use list.h, since sk_buff doesn't have a list_head but instead
    has two struct sk_buff pointers, and I want to avoid any extra memory
    allocation.
    
    send outgoing packets in order
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0c6f0e7920f39b28bdbe5f134f3e592542332d87
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:22 2005 -0700

    [PATCH] aoe 11/12: add support for disk statistics
    
    add support for disk statistics
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e3b7df65e089f143b9228472b80fb96c495fb634
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:21 2005 -0700

    [PATCH] aoe 9/12: add note about the need for deadlock-free sk_buff allocation
    
    add note about the need for deadlock-free sk_buff allocation
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d098840e37468fdd0143d8bcfe86bc53627bf96e
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:20 2005 -0700

    [PATCH] aoe 8/12: document env var for specifying number
    
    document env var for specifying number of partitions per dev
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 63e9cc5d6fbe8b58ea1ee96439d356cbf726fbc0
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:20 2005 -0700

    [PATCH] aoe 6/12: Alexey Dobriyan sparse cleanup
    
    Alexey Dobriyan sparse cleanup
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 03347936afcba990525736ae39daa13f643eac5f
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:19 2005 -0700

    [PATCH] aoe 5/12: don't try to free null bufpool
    
    don't try to free null bufpool
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fa83c2ddd4293bd8bcaeeaf14bfdbf2fbe810420
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:19 2005 -0700

    [PATCH] aoe 4/12: handle distros that have a udev rules
    
    handle distros that have a udev rules file instead of dir
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b68650fd3f31d47426a2b1c6cfad904880258423
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:18 2005 -0700

    [PATCH] aoe 3/12: update driver version to 6
    
    update driver version to 6
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 32465c650670c7499548d70fdeed57fab44ee679
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:18 2005 -0700

    [PATCH] aoe 2/12: allow multiple aoe devices with same MAC
    
    allow multiple aoe devices with same MAC addr
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fc458dcda27c6d26cb11ef9ee9c1c3599711be94
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:17 2005 -0700

    [PATCH] aoe 1/12: remove too-low cap on minor number
    
    remove too-low cap on minor number
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f0e035f4b6940aae6836500b642029c289ed4535
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:37 2005 -0700

    [PATCH] kobject/hotplug split - net bridge
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    We need to do it ourselves now.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 089d42b013675b028a499c61bac59954067dc668
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:37 2005 -0700

    [PATCH] kobject/hotplug split - usb cris
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    We need to do it ourselves now.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e57cd73e2e844a3da25cc6b420674c81bbe1b387
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:36 2005 -0700

    [PATCH] kobject/hotplug split - devices core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b41148c0d8d2fa0c36cebd9ba3ee4cfc0dc7cb9a
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:36 2005 -0700

    [PATCH] kobject/hotplug split - block core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0700f56bbca56bc930aab717bc5086336991441f
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:35 2005 -0700

    [PATCH] kobject/hotplug split - class core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 18c3d5271b472c096adfc856e107c79f6fd30d7d
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:34 2005 -0700

    [PATCH] kobject/hotplug split - kobject add/remove
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    The user should do it itself if it has finished populating the device
    directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7b558637b0efc6ab3f3ca08f0b9cc0191665e9db
Author: Michal Ostrowski <mostrows@speakeasy.net>
Date:   Mon Apr 18 21:57:34 2005 -0700

    [PATCH] debugfs: fix !debugfs prototypes
    
    - Fix prototypes for debugfs functions (in configurations where
      debugfs is disabled).
    
    Signed-off-by: Michal Ostrowski <mostrows@speakeasy.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a7a76cefc4b12bb6508afa4c77f11c2752cc365d
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Apr 18 21:57:33 2005 -0700

    [PATCH] debugfs: Reduce <linux/debugfs.h> dependencies
    
    The current <linux/debugfs.h> include file is a little fragile in that
    it is not self-contained and hence may cause compile warnings or
    errors depending on the files included before it, the kernel config
    and the architecture.  This patch makes things a little more robust by:
    
     - including <linux/types.h> to get definitions of u32, mode_t, and so on.
     - forward declaring struct file_operations.
     - including <linux/err.h> when CONFIG_DEBUG_FS is not set
    
    The last change is particularly useful, as a kernel developer is
    likely to build with debugfs always enabled and never see the build
    breakage cased if debugfs is disabled.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1694145854a309bebd12a5cce63c9b398304e3bb
Author: Steven Cole <elenstev@mesatop.com>
Date:   Mon Apr 18 21:57:33 2005 -0700

    [PATCH] 2.6.12-rc1-mm3 Fix ver_linux script for no udev utils.
    
    Without the attached patch, the ver_linux script gives
    the following if udev utils are not present.
    
    ./scripts/ver_linux: line 90: udevinfo: command not found
    
    The patch causes ver_linux to be silent in the case of
    no udevinfo command.
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46ea0d6c26de431a39c744f7ad63b30bfc800c1e
Author: Robert Schwebel <r.schwebel@pengutronix.de>
Date:   Mon Apr 18 21:57:32 2005 -0700

    [PATCH] export platform_add_devices
    
    platform_add_devices can be used from within modules, so it should be
    exported.  This can for example happen if you have hotpluggable firmware in
    an FPGA on a system on chip processor; in our case the FPGA is probed for
    devices and the FPGA base code registers the devices it has found with the
    kernel.
    
    (akpm: I think this is reasonable from a licensing POV: it's unlikely that
    anyone would be interested in merging such specialised modules into mainline,
    and it's a GPL export).
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 31e5abe9a6dab1ed3a5c30352bdb001353146318
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:32 2005 -0700

    [PATCH] sysfs: add sysfs_chmod_file()
    
    sysfs: allow changing the permissions for already created attributes
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6897089c5f7989603ccb9c696050470ba1dbd262
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:31 2005 -0700

    [PATCH] add TIMEOUT to firmware_class hotplug event
    
    On Tue, 2005-03-15 at 09:25 +0100, Hannes Reinecke wrote:
    > The current implementation of the firmware class breaks a fundamental
    > assumption in udevd: that the physical device can be initialised fully
    > prior to executing the next event for that device.
    
    Here we add a TIMEOUT value to the hotplug environment of the firmware
    requesting event. I will adapt udevd not to wait for anything else, if
    it finds a TIMEOUT key.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f31e42221c7deae4527136ce0dd73990d8bc1d1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Apr 18 21:57:30 2005 -0700

    [PATCH] kref: add link to original documentation to the kref documentation.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c11c52046eb0f7252574bad161db53d0345ea50
Author: minyard@acm.org <minyard@acm.org>
Date:   Mon Apr 18 21:57:30 2005 -0700

    [PATCH] kref: add documentation
    
    Add some documentation for krefs.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d66c64c3cee10a465cd3f8bd9191bbeb718f650
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 18 21:16:59 2005 -0700

    [PATCH] I2C: Fix incorrect sysfs file permissions in it87 and via686a drivers
    
    The it87 and via686a hardware monitoring drivers each create a sysfs
    file named "alarms" in R/W mode, while they should really create it in
    read-only mode. Since we don't provide a store function for these files,
    write attempts to these files will do something undefined (I guess) and
    bad (I am sure). My own try resulted in a locked terminal (where I
    attempted the write) and a 100% CPU load until next reboot.
    
    As a side note, wouldn't it make sense to check, when creating sysfs
    files, that readable files have a non-NULL show method, and writable
    files have a non-NULL store method? I know drivers are not supposed to
    do stupid things, but there is already a BUG_ON for several conditions
    in sysfs_create_file, so maybe we could add two more?
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86b5ac878d4a63c772d03c5017b72cc799a8f2f2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 18 21:16:58 2005 -0700

    [PATCH] I2C: via686a cleanups
    
    Here comes a small cleanup patch for the via686a driver. I noticed the
    following two non-fatal problems:
    
    1* The device parent is explicitely set, but it's not needed because the
    i2c core will do as the client is registered.
    
    2* snprintf is used where strlcpy would suffice.
    
    Fixing them brings the via686a driver in line with what other similar
    drivers do.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 05985715756b8667cb35a3e05e1668bb8afe3298
Author: johnpol@2ka.mipt.ru <johnpol@2ka.mipt.ru>
Date:   Mon Apr 18 21:16:57 2005 -0700

    [PATCH] w1_smem: w1 ID is only 8 bytes long.
    
    w1 ID is only 8 bytes long.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8523ff45672a5c9209ab7459142e37e7cd393e6c
Author: johnpol@2ka.mipt.ru <johnpol@2ka.mipt.ru>
Date:   Mon Apr 18 21:16:57 2005 -0700

    [PATCH] w1: real fix for big endian machines.
    
    Real fix for big endian machines - crc must be calculated
    using little endian byte order.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c0698f2f6e4839ce9463ce731c892993215ea067
Merge: cb62402... 7f907d7...
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Mon Apr 18 20:55:09 2005 -0500

    fully merge up to scsi-misc-2.6

commit e838a0d4d5260bce452c96914a6e86b217c53c55
Author: Viktor A. Danilov <__die@mail.ru>
Date:   Mon Apr 18 17:39:35 2005 -0700

    [PATCH] USB: fix AIPTEK input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    
    PROBLEM: aiptek input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    REASON: `dev` - field not filled...
    SOLUTION: in linux/drivers/usb/input/aiptek.c write
    	aiptek->inputdev.dev = &intf->dev;
    before calling
    	input_register_device(&aiptek->inputdev);
    
    From: "Viktor A. Danilov" <__die@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/input/aiptek.c
    ===================================================================

commit 6cdee106e7571751ecc0e9f96606322f88b64a8d
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:34 2005 -0700

    [PATCH] usb gadget: ethernet/rndis updates
    
    Updates to the Ethernet/RNDIS gadget driver (mostly for RNDIS):
    
      - Fix brown-paper bag goof with RNDIS packet TX ... the wrong length
        field got set, so Windows would ignore data packets it received.
    
      - More consistent handling of CDC output filters (but not yet hooking
        things up so RNDIS uses the mechanism).
    
      - Zerocopy RX for RNDIS packets too (saving CPU cycles).
    
      - Use the pre-allocated interrupt/status request and buffer, rather
        than allocating and freeing one of each every few seconds (which
        could fail).
    
      - Some more "sparse" tweaks, making both dual-speed and single-speed
        configurations happier.
    
      - RNDIS speeds are reported in units of 100bps, not bps.
    
    Plus two minor cleanups (whitespace, messaging).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1bc3c9e1e44c2059fe2ffa6ff70ad0a925d7b05f
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Apr 18 17:39:34 2005 -0700

    [PATCH] USB: kfree cleanup for drivers/usb/* - no need to check for NULL
    
    Get rid of a bunch of redundant NULL pointer checks in drivers/usb/*,
    there's no need to check a pointer for NULL before calling kfree() on it.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/class/audio.c
    ===================================================================

commit 6fd19f4b55f7fd1c9d8650bd7f8df2c81b69c5ca
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Apr 18 17:39:33 2005 -0700

    [PATCH] usb: kfree() cleanups in drivers/usb/core/devio.c
    
    Checking for NULL before calling kfree() is redundant. This patch removes
    these redundant checks and also makes a few tiny whitespace changes.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit acbb36f116243bed515357264ecbb6ff9c6d2a5b
Author: Peter Favrholdt <pfavr@mip.sdu.dk>
Date:   Mon Apr 18 17:39:32 2005 -0700

    [PATCH] USB: pl2303 new vendor/model ids
    
    Please accept the attached patch which adds the vendorid 0x0745 and
    modelid 0x0001 (ID 0745:0001) "Syntech Information Co., Ltd."
    
    The device is an USB IR cradle for a barcode scanner (CPT-8001C) from
    Cipherlab.
    
    
    From: Peter Favrholdt <pfavr@mip.sdu.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -u kernel-source-2.6.11/drivers/usb/serial/pl2303.c ../kernel-source-2.6.11/drivers/usb/serial/pl2303.c

commit 97bb13ec5bc156352cca8af90080597e04299a73
Author: Flavio Leitner <fbl@conectiva.com.br>
Date:   Mon Apr 18 17:39:31 2005 -0700

    [PATCH] pl2303 - status line
    
    I'm attaching a patch to fix status when using Siemens X65
    mobile. This mobile use first byte instead of normal UART_STATE
    byte.
    
    
    From: Flavio Leitner <fbl@conectiva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/serial/pl2303.c
    ===================================================================

commit 6fdd8e8e33730a2abc886113bd0b6c4343f63cc9
Author: Flavio Leitner <fbl@conectiva.com.br>
Date:   Mon Apr 18 17:39:31 2005 -0700

    [PATCH] pl2303 - unplug device.
    
    It's possible to unplug usb device and do tiocmset() and tiocmget() without
    valid interface in pl2303 module.
    
    The patch below check this and return -ENODEV if interface was removed.
    
    From: Flavio Leitner <fbl@conectiva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -purN linux-05-04-11/drivers/usb/serial/pl2303.c linux-05-04-11.usb/drivers/usb/serial/pl2303.c

commit 8835f6657316162a8937d3f26ccd8f5886ba3845
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 18 17:39:30 2005 -0700

    [PATCH] USB: USB API documentation modification
    
    In response to complaints about excessive latency in the uhci-hcd driver
    I'm planning to convert it to a top-half/bottom-half design.  It turns out
    that to do this, the USB API has to be modified slightly since the driver
    will not be able to meet one of the guarantees in the current API.  This
    patch changes some kerneldoc, specifying the weaker guarantee.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e4987639a774d08b69c1c58774f3430f6083d4f
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:30 2005 -0700

    [PATCH] USB: OHCI on Compaq Aramada 7400
    
    This adds a quirk to the OHCI driver that lets it work with an old
    Compaq implementation.  It also removes some needless strings from
    the non-debug version of the driver.
    
    Signed-off-by: Chris Clayton <chris_clayton@f1internet.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a2fe20129e2d87dc5c4e5c850b41b5b0b47cfd08
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:29 2005 -0700

    [PATCH] USB: usbnet and zaurus zl-5600
    
    Hmm, another case of a Zaurus ROM not telling the expected conformance lie;
    this patch handles the lies told by the SL5600.
    
    From: bender647@gmail.com
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ab7c34c90797b9df52720720ab5d5e9edd05114
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Mon Apr 18 17:39:28 2005 -0700

    [PATCH] USB: new SIS device id
    
    the attached patch adds another USB device ID to the list. Seems the
    device is known under multiple IDs.
    
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d6427cf7ea5dc75be26074a573b25d5906c992bd
Author: felix@derklecks.de <felix@derklecks.de>
Date:   Mon Apr 18 17:39:28 2005 -0700

    [PATCH] USB Storage unusual_dev.h 07c4:a10b Datafab Systems, Inc.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/storage/unusual_devs.h
    ===================================================================

commit e4334fa4c5cb62f26d7e9a0a581126bcbe0dedcf
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon Apr 18 17:39:27 2005 -0700

    [PATCH] Fix GO_SLOW delay
    
    This patch changes the delay for the US_FL_GO_SLOW patch from 110us to 125.
    Some delays need this extra delay includign Jan De Luyck's drive which spawned
    the original increase from 110 to 110us. 125 is a microframe, so this delay
    seems to make sense more than just be a random delay (thanks to David Brownell
    for pointing that out after my original patch).
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/storage/transport.c
    ===================================================================

commit 403a98176a5866217eb12ca6bb283e635ced2dd0
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Apr 18 17:39:27 2005 -0700

    [PATCH] USB: usbnet printk warning fix
    
    On ppc64:
    
    drivers/usb/net/usbnet.c: In function `skb_return':
    drivers/usb/net/usbnet.c:429: warning: int format, different type arg (arg 3)
    drivers/usb/net/usbnet.c:429: warning: int format, different type arg (arg 3)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN drivers/usb/net/usbnet.c~usbnet-printk-warning-fix drivers/usb/net/usbnet.c

commit 668a9541a56af5ebb3ad0babdc2cd73511c9e1e9
Author: Christopher Li <chrisl@vmware.com>
Date:   Mon Apr 18 17:39:26 2005 -0700

    [PATCH] USB: bug fix in usbdevfs
    
    I am sorry that the last patch about 32 bit compat ioctl on
    64 bit kernel actually breaks the usbdevfs. That is on the current
    BK tree. I am retarded.
    
    Here is the patch to fix it. Tested with USB hard disk and webcam
    in both 32bit compatible mode and native 64bit mode.
    
    Again, sorry about that.
    
    
    From: Christopher Li <chrisl@vmware.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a81e7ecca369afee0b07b4758d8c32542ffc587a
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:25 2005 -0700

    [PATCH] USB: revert "fix" to usb_set_interface()
    
    This reverts a recent change to usb_set_interface().  The change worked
    around a quirk in certain devices, but doing this in usbcore creates
    needless regressions for other devices.  More appropriate fixes won't
    put such handling in usbcore.
    
    Basically it's tricky to do a full software reset of USB device state, since
    the devices don't all act the same.  This adds a note to the kerneldoc for
    the usb_reset_configuration() call to highlight the quirk this was working
    around:  endpoint data toggles not being reset.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 45f23f189ca66d98b1f8b7f3d30a194d3188039d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Apr 18 17:39:25 2005 -0700

    [PATCH] USB: usb/digi_acceleport: correct wait-queue state
    
    First patch incorrectly changed state of the wait-queue usage to
    TASK_UNINTERRUPTIBLE. Reverted to TASK_INTERRUPTIBLE.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6d5e8254bf488a40b7ae2faafbffa232ab19d541
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Apr 18 17:39:24 2005 -0700

    [PATCH] USB: fix up some sparse warnings about static functions that aren't static.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/core/usb.h
    ===================================================================

commit ba9d35fb01852e195f2a4ca975fdcd6578b52c78
Author: Pavel Machek <pavel@suse.cz>
Date:   Mon Apr 18 17:39:24 2005 -0700

    [PATCH] USB: fix up remaining pm_message_t usages
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a5d3e98dd31abcecbf4533b81866d440cc0f106
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:23 2005 -0700

    [PATCH] USB: hcd suspend uses pm_message_t
    
    This patch includes minor "sparse -Wbitwise" updates for the PCI based
    HCDs.  Almost all of them involve just changing the second parameter of the
    suspend() method to a pm_message_t ...  the others relate to how the EHCI
    code walks in-memory data structures.  (There's a minor bug fixed there too
    ...  affecting the big-endian sysfs async schedule dump.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/core/hcd.h
    ===================================================================

commit 27d72e8572336d9f4e17a12ac924cb5223a5758d
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:22 2005 -0700

    [PATCH] usb suspend updates (interface suspend)
    
    This is the first of a few installments of PM API updates to match the
    recent switch to "pm_message_t".  This installment primarily affects
    USB device drivers (for USB interfaces), and it changes the handful of
    drivers which currently implement suspend methods:
    
        - <linux/usb.h> and usbcore, signature change
    
        - Some drivers only changed the signature, net effect this just
          shuts up "sparse -Wbitwise":
    	* hid-core
    	* stir4200
    
        - Two network drivers did that, and also grew slightly more
          featureful suspend code ... they now properly shut down
          their activities.  (As should stir4200...)
    	* pegasus
    	* usbnet
    
    Note that the Wake-On-Lan (WOL) support in pegasus doesn't yet work; looks
    to me like it's missing a request to turn it on, vs just configuring it.
    The ASIX code in usbnet also has WOL hooks that are ready to use; untested.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/net/irda/stir4200.c
    ===================================================================

commit c6053ecffb895f6c0e0ec9c1d298e35cffc1f7a6
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:22 2005 -0700

    [PATCH] usb resume fixes
    
    This has a variety of updates to the shared suspend/resume code for
    PCI based USB host controllers.
    
        - Cope with pm_message_t replacing the target system state.
          This is actually a loss of functionality; PCI D1 and D2
          states will no longer be used, and it's no longer knowable
          that D3cold is on the way so power will be lost.
    
        - Most importantly, some of the resume paths are reworked and
          cleaned up.  They're now an exact mirror of suspend paths,
          and more care is taken to ensure the hardware is reactivated
          before the hardware re-enables interrupts.
    
    Plus comment and diagnostic cleanups; there are some nasty cases here
    especially combined with swsusp, now they're somewhat commented.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN drivers/usb/core/hcd-pci.c~usb-resume-fixes drivers/usb/core/hcd-pci.c

commit 84d79cb8db2811140c911df7ce3e3354cfa018c4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Apr 18 17:39:21 2005 -0700

    [PATCH] USB: usb_cdc build fix
    
    With older gcc's:
    
    In file included from drivers/usb/class/cdc-acm.c:63:
    include/linux/usb_cdc.h:117: field `bDetailData' has incomplete type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN include/linux/usb_cdc.h~usb_cdc-build-fix include/linux/usb_cdc.h

commit 115c1ce524869309e4bddcfc3dd112ac76b92def
Author: Larry Battraw <lbattraw@insightbb.com>
Date:   Mon Apr 18 17:39:20 2005 -0700

    [PATCH] USB: visor Tapwave Zodiac support patch
    
    Here's a tiny patch to add support for the Tapwave Zodiac (for
    2.6.11.6).  I've been meaning to send it in for a while but kept
    upgrading my kernel and losing the changes :-)  I own the device and it
    works fine with the latest pilot-link beta.
    
    From: Larry Battraw <lbattraw@insightbb.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ac21e9ff08db3d6fac41d356c77fcb531c2e03e1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Apr 18 17:39:20 2005 -0700

    [PATCH] USB: add new visor id for Treo 650
    
    Thanks to Jamieson Becker <jamie@jamiebecker.com> for the info
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Naur -X dontdiff-osdl tmp/linux-2.6.12-rc2/drivers/usb/serial/visor.h linux-2.6/drivers/usb/serial/visor.h

commit 7f907d7486f2519c2ff1493bfbcdc36dcacd85b7
Merge: 0ba4da0... 7a55fd0...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 18 16:25:10 2005 -0700

    Merge with master.kernel.org:/home/rmk/linux-2.6-rmk.git
    
    This adds the missing arch/arm/lib/bitops.h file.

commit 0ba4da03cc84f54b2574e1abcdaa18ef8456a9fb
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Apr 18 15:13:15 2005 -0700

    [PATCH] sparc64: Fix stat
    
    Like Alpha, sparc64's struct stat was defined before we had the
    nanosecond et al.  fields added.  So like Alpha I have to cons up a
    struct stat64 to get this stuff.  I'll work on the glibc bits soon.
    
    Also, we were forgetting to fill in the nanosecond fields in the sparc
    compat stat64 syscalls.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a55fd0bb31eb369149b89fdf9e0c7bc73486ee1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Apr 18 22:50:01 2005 +0100

    [PATCH] ARM: Add missing new file for bitops patch
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0b2cad2f30d0353f2576b1a2207c0792ba713157
Merge: 238628e... 686579d...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 18 14:25:40 2005 -0700

    Merge SCSI tree from James Bottomley.
    
    Done with "git-pull-script rsync://www.parisc-linux.org/~jejb/scsi-rc-fixes-2.6.git"
    together with an automated content merge.

commit cb624029cab62e5415287d15b2ec907b8f322ff5
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 17 18:03:20 2005 -0500

    aic7xxx: convert to SPI transport class Domain Validation
    
    Now that we export all the parameters, this is easy to do.
    It also means that we can dump about 2000 lines of code that
    were dedicated to doing this internally.
    
    Additionally, this removes all the aic7xxx driver abuse
    of SCSI timers which were embedded in the DV routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 92d161c373b45be158b73a162bedebb5293a73d3
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 17 16:59:33 2005 -0500

    aic7xxx: add support for the SPI transport class
    
    This is just a simplistic patch to export all of the
    aic7xxx internal transport parameters via the SPI
    transport class.  It doesn't actually alter the way the
    driver works at all.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7aaef27bafdfa10351726a1d383bdde33422072c
Author: James Bottomley  <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 17 16:32:42 2005 -0500

    qla2xxx: fix compiler warning in qla_attr.c
    
      CC [M]  drivers/scsi/qla2xxx/qla_attr.o
    drivers/scsi/qla2xxx/qla_attr.c: In function `qla2x00_sysfs_write_fw_dump':
    drivers/scsi/qla2xxx/qla_attr.c:65: warning: implicit declaration of function `vfree'
    drivers/scsi/qla2xxx/qla_attr.c:83: warning: implicit declaration of function `vmalloc'
    drivers/scsi/qla2xxx/qla_attr.c:83: warning: cast to pointer from integer of different size
    
    Also remove spurious inclusion of linux/version.h
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dea3101e0a5c897d2c9351a7444e139db9f40247
Author: James Bottomley  <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 17 16:05:31 2005 -0500

    lpfc: add Emulex FC driver version 8.0.28
    
    From: 	James.Smart@Emulex.Com
    
    Modified for kernel import and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e8790415e91964096f862a58cacb55d2bc9a817
Author: Arjan Bunk <bunk@stusta.de>
Date:   Sun Apr 17 15:28:39 2005 -0500

    [PATCH] drivers/scsi/gdth.c: cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global functions static
    - remove one more kernel 2.2 #ifdef
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit be7db055dd7261522557046370f49160728e3847
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 17 15:26:13 2005 -0500

    [PATCH] remove old scsi data direction macros
    
    these have been wrappers for the generic dma direction bits since 2.5.x.
    This patch converts the few remaining drivers and removes the macros.
    
    Arjan noticed there's some hunk in here that shouldn't.  Updated patch
    below:
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 80e2ca3dcb1043420ac4b06de8eed3d6fedaddda
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:16:47 2005 -0500

    [PATCH] qla2xxx: update version to 8.00.02b5-k
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d6e957bf866537f0d842eb83997ea4db1b09168f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:14:51 2005 -0500

    [PATCH] qla2xxx: remove sale revision notes file
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6721d2c809f4537ae01757a2297f2ced338826c1
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:13:01 2005 -0500

    [PATCH] qla2xxx: remove /proc interface
    
    Remove /proc support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 83021920e733aa706926046b6ab61912c0d63943
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:10:41 2005 -0500

    [PATCH] qla2xxx: cleanup DMA mappings...
    
      Don't use cmd->request->nr_hw_segments as it may not be initialized
      (SG_IO in particular bypasses anything that initializes this and just
      uses scsi_do_req to insert a scsi_request directly on the head of the
      queue) and a bogus value here can trip up the checks to make sure that
      the number of segments will fit in the queue ring buffer, resulting in
      commands that are never completed.
    
      Fix up several issues with PCI DMA mapping and failure to check return
      values on the mappings.
    
      Make the check for space in the ring buffer happen after the DMA mapping
      is done since any checks done before the mapping has taken place are
      bogus.
    
      Doug Ledford <dledford@redhat.com>.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bdf796210e01145fd77bbb3ae644d04f982b6c3b
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:06:53 2005 -0500

    [PATCH] qla2xxx: remove lun discovery codes...
    
    Remove internal lun discovery routines and support
    structures.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8482e118afa0cb4321ab3d30b1100d27d63130c0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:04:54 2005 -0500

    [PATCH] qla2xxx: add remote port codes...
    
    Add initial support for FC remote port infrastructure.
    
         o Use fc_remote_port...() registration and block/unlock
           functions.
         o Consolidate 'attribute' (fc-remote/sysfs) helpers into
           new qla_attr.c file.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f4f051ebb40e74ad0ba02d2cb3a6c16b0393472b
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:02:26 2005 -0500

    [PATCH] qla2xxx: remove internal queuing...
    
    Remove internal command queuing from the driver.  As is, this
    driver cannot tolerate cable-pulls as I/Os will begin to fail
    by the upper layers.
    
         o Should be used in conjuction with the
           11-fc_rport_adds_2.diff patch.
         o Removes qla_listops.h file -- no longer needed.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c46f2ffb9e7fce7208c2639790e1ade42e00b146
Merge: c2a9331... f59114b...
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Mon Apr 18 13:45:00 2005 -0500

    merge by hand (scsi_device.h)

commit 238628edb6cd427454fb54994e2605e191bfc26a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Apr 18 10:58:36 2005 -0700

    [PATCH] sched: fix signed comparisons of long long
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a9947bf7a3a14d2107cb9a27279fc8f463370a9
Author: David Howells <dhowells@redhat.com>
Date:   Mon Apr 18 10:54:51 2005 -0700

    [PATCH] Add 32-bit compatibility for NFSv4 mount
    
    This adds 32-bit compatibility for mounting an NFSv4 mount on a 64-bit
    kernel (such as happens with PPC64).
    
    The problem is that the mount data for the NFS4 mount process includes
    auxilliary data pointers, probably because the NFS4 mount data may
    conceivably exceed PAGE_SIZE in size - thus breaking against the hard
    limit imposed by sys_mount().
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 219f0817038cabc722968e914490adf6b686499e
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Apr 18 10:47:35 2005 -0700

    [PATCH] SELinux: fix deadlock on dcache lock
    
    This fixes a deadlock on the dcache lock detected during testing at IBM
    by moving the logging of the current executable information from the
    SELinux avc_audit function to audit_log_exit (via an audit_log_task_info
    helper) for processing upon syscall exit.
    
    For consistency, the patch also removes the logging of other
    task-related information from avc_audit, deferring handling to
    audit_log_exit instead.
    
    This allows simplification of the avc_audit code, allows the exe
    information to be obtained more reliably, always includes the comm
    information (useful for scripts), and avoids including bogus task
    information for checks performed from irq or softirq.
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by:  James Morris <jmorris@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 865108d13801d39ec038bdc82b5bec5e1eaffa9d
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Mon Apr 18 10:47:34 2005 -0700

    [PATCH] M68k: Update defconfigs for 2.6.12-rc2
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4575ceb1d31d9fabc2314410f1645748284c95a9
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Mon Apr 18 10:47:33 2005 -0700

    [PATCH] M68k: Update defconfigs for 2.6.11
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f59114b7b5dc677bbd7cc7e26a5fcb3572a3445c
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 17 15:00:23 2005 -0500

    [PATCH] scsi: scsi_send_eh_cmnd() cleanup
    
    This patch makes scsi_send_eh_cmnd() use sdev and shost instead of
    referencing them through scmd-> everytime.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 06f81ea8ca09b880cadf101d7e23b500e9c164bc
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 17 14:57:29 2005 -0500

    [PATCH] scsi: remove volatile from scsi data
    
    This patch removes volatile qualifier from scsi_device->device_busy,
    Scsi_Host->host_busy and ->host_failed as the volatile qualifiers
    don't serve any purpose now.  While at it, convert those fields from
    unsigned short to unsigned int as suggested by Christoph.
    
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bf341919dbc1fbcbb565fb3224c840760ebd9f85
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Tue Apr 12 17:49:09 2005 -0500

    scsi: add DID_REQUEUE to the error handling
    
    We have a DID_IMM_RETRY to require a retry at once, but we could do with
    a DID_REQUEUE to instruct the mid-layer to treat this command in the
    same manner as QUEUE_FULL or BUSY (i.e. halt the submission until
    another command returns ... or the queue pressure builds if there are no
    outstanding commands).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f71d9bc025b02a8cbc2be83b0226a7043a507a5
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 10 23:04:28 2005 -0500

    zfcp: add point-2-point support
    
    From: Andreas Herrmann <aherrman@de.ibm.com>
    
    This patch mainly introduces support for point-2-point
    topology.
    
    From: Heiko Carstens <heiko.carstens@de.ibm.com>
    From: Maxim Shchetynin <maxim@de.ibm.com>
    From: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f4c2c15b930b23edaa633b09fe3f4c01b4ecce9f
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 10 22:29:42 2005 -0500

    [PATCH] Convert i2o to compat_ioctl
    
    Also broken design in its compat handlers - CONFIG_COMPAT doesn't
    mean that there should be no native ioctls.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    
    Reworked with comments from Markus Lidel by:
    Christoph Hellwig <hch@infradead.org>
    
    Rejections fixed and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2bc474c3646efba67bdc83b7fc7d8ee7562e0106
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 10 22:19:25 2005 -0500

    [PATCH] kill old EH constants
    
    Fix up two drivers that incorrectly were using the old return values for
    their new-style EH methods and kill off scsi_obsolete.h that defined the
    constants.  The initio driver has all these constansts defined locally
    and uses them internally, I'll fix that up some time later.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c6295cdf656de63d6d1123def71daba6cd91939c
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 3 14:59:11 2005 -0500

    [PATCH] scsi: remove meaningless scsi_cmnd->serial_number_at_timeout field
    
    scsi_cmnd->serial_number_at_timeout doesn't serve any purpose
    anymore.  All serial_number == serial_number_at_timeout tests
    are always true in abort callbacks.  Kill the field.  Also, as
    ->pid always equals ->serial_number and ->serial_number
    doesn't have any special meaning anymore, update comments
    above ->serial_number accordingly.  Once we remove all uses of
    this field from all lldd's, this field should go.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d3a933dc9851e74581f9f4c8e703e77901ae8d01
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 3 14:55:06 2005 -0500

    [PATCH] scsi: remove unused scsi_cmnd->internal_timeout field
    
    scsi_cmnd->internal_timeout field doesn't have any meaning
    anymore.  Kill the field.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit db9dff366ba78085d0323364fadbf09bec0e77ee
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 3 14:53:59 2005 -0500

    [PATCH] remove outdated print_* functions
    
    We have the scsi_print_* functions in the proper namespace for a long
    time now and there weren't a lot users left.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b6651129cc27d56a9cbefcb5f713cea7706fd6b7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 3 14:52:44 2005 -0500

    [PATCH] consolidate timeout defintions in scsi.h
    
    Adapted from a patch in SuSE's kernel SRPM.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 15e8869943060780b79b242851b0692286fc7d18
Author: Chris Wedgwood <cw@f00f.org>
Date:   Mon Apr 18 08:01:30 2005 -0700

    [PATCH] x86: fix acpi compile without CONFIG_ACPI_BUS
    
    The recent acpi boot patch breaks for me: acpi_fadt needs CONFIG_ACPI_BUS.
    
    Signed-off-By: Chris Wedgwood <cw@f00f.org>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c7d3b3a6b6aaeded9d9e5c5111dbcc65b0b0f91
Author: Jurij Smakov <jurij@wooyd.org>
Date:   Sun Apr 17 18:03:12 2005 -0700

    [PATCH] sparc64: Fix copy_sigingo_to_user32()
    
    The compat routine to copy over this data structure was not
    handling SI_POLL correctly, breaking various fcntl() variants
    in compat tasks.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dadeafdfc8da8c27e5a68e0706b9856eaac89391
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:11 2005 -0700

    [PATCH] sparc64: Reduce ptrace cache flushing
    
    We were flushing the D-cache excessively for ptrace() processing
    and this makes debugging threads so slow as to be totally unusable.
    
    All process page accesses via ptrace() go via access_process_vm().
    This routine, for each process page, uses get_user_pages().  That
    in turn does a flush_dcache_page() on the child pages before we
    copy in/out the ptrace request data.
    
    Therefore, all we need to do after the data movement is:
    
    1) Flush the D-cache pages if the kernel maps the page to a different
       color than userspace does.
    2) If we wrote to the page, we need to flush the I-cache on older cpus.
    
    Previously we just flushed the entire cache at the end of a ptrace()
    request, and that was beyond stupid.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb65b9619b756793d824df7501c895a2c2871f40
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:11 2005 -0700

    [PATCH] sparc: Fix PTRACE_CONT bogosity
    
    SunOS aparently had this weird PTRACE_CONT semantic which
    we copied.  If the addr argument is something other than
    1, it sets the process program counter to whatever that
    value is.
    
    This is different from every other Linux architecture, which
    don't do anything with the addr and data args.
    
    This difference in particular breaks the Linux native GDB support
    for fork and vfork tracing on sparc and sparc64.
    
    There is no interest in running SunOS binaries using this weird
    PTRACE_CONT behavior, so just delete it so we behave like other
    platforms do.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 961f8bc9fc91c39a3fe169f3b6d3df1b096769d3
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:10 2005 -0700

    [PATCH] sparc64: use message queue compat syscalls
    
    A couple message queue system call entries for compat tasks
    were not using the necessary compat_sys_*() functions, causing
    some glibc test cases to fail.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9546f59e90d6ec1b65952c547302e0678e3a5ac
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:09 2005 -0700

    [PATCH] sparc64: Do not flush dcache for ZERO_PAGE.
    
    This case actually can get exercised a lot during an ELF
    coredump of a process which contains a lot of non-COW'd
    anonymous pages.  GDB has this test case which in partiaular
    creates near terabyte process full of ZERO_PAGEes.  It takes
    forever to just walk through the page tables because of
    all of these spurious cache flushes on sparc64.
    
    With this change it takes only a second or so.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4e884a311893b476893739901bed382cd62b4fe
Merge: ce1dc02... cc56449...
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 17 14:47:24 2005 -0700

    Merge with master.kernel.org:/home/rmk/linux-2.6-rmk.git - ARM changes
    
    First ever true git merge. Let's see if it actually works.

commit ce1dc02f76432a46db149241e015a4f782974623
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 17 13:30:46 2005 -0700

    Fix up some file mode differences due to the new git world order.

commit 1d4d5b325315f064e8cd4efaefbe50cdda0357c7
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Apr 17 10:57:20 2005 -0700

    [PATCH] revert fs/char_dev.c CONFIG_BASE_FULL change
    
    This reverts a fs/char_dev.c patch that was merged into BK on March 3.
    
    The problem is that it breaks things ... __register_chrdev_region() has
    a block of code, commented "temporary" for over two years now, which
    fails rudely during PCMCIA initialization or other register_chrdev()
    calls, because it doesn't "degrade to linked list".  This keeps whole
    subsystems from working.
    
    A real fix to that "temporary" code should be possible, using some better
    scheme to allocate major numbers, but it's not something I want to spend
    time on just now.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc56449f53ba45646c6f0a2edf77c4acb342caed
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 16:28:31 2005 +0100

    [PATCH] ARM: fix debug macros
    
    Fix debug EBSA285 and RiscPC debugging macros to detect whether the
    MMU is enabled.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 684f970e2fd2dc0eb8292500903f54f1ebda0e75
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:51:02 2005 +0100

    [PATCH] ARM: bitops
    
    Convert ARM bitop assembly to a macro.  All bitops follow the same
    format, so it's silly duplicating the code when only one or two
    instructions are different.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 652a12ef98d16ccd1ee5cdf2c832ce5411ed3262
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:50:36 2005 +0100

    [PATCH] ARM: showregs
    
    Fix show_regs() to provide a backtrace.  Provide a new __show_regs()
    function which implements the common subset of show_regs() and die().
    Add prototypes to asm-arm/system.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 58c02ec4701c94c671a41e1e5d50c582e859851f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:40:46 2005 +0100

    [PATCH] ARM: h3600_irda_set_speed arguments
    
    h3600_irda_set_speed() had the wrong type for the "speed" argument.
    Fix this.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 336eb02b9171d132a9abe575317fee4cca965af4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:36:55 2005 +0100

    [PATCH] ARM: footbridge rtc init
    
    The footbridge ISA RTC was being initialised before we had setup the
    kernel timer.  This caused a divide by zero error when the current
    time of day is set.  Resolve this by initialising the RTC after
    the kernel timer has been initialised.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 686579d95d48c713bdb7008cc76af8398219e687
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Tue Apr 12 17:49:09 2005 -0500

    scsi: add DID_REQUEUE to the error handling
    
    We have a DID_IMM_RETRY to require a retry at once, but we could do with
    a DID_REQUEUE to instruct the mid-layer to treat this command in the
    same manner as QUEUE_FULL or BUSY (i.e. halt the submission until
    another command returns ... or the queue pressure builds if there are no
    outstanding commands).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 91bbfbda8d41f834c70c47d6f8c95245c90019e5
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 10 23:04:28 2005 -0500

    zfcp: add point-2-point support
    
    From: Andreas Herrmann <aherrman@de.ibm.com>
    
    This patch mainly introduces support for point-2-point
    topology.
    
    From: Heiko Carstens <heiko.carstens@de.ibm.com>
    From: Maxim Shchetynin <maxim@de.ibm.com>
    From: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 83363ea074504f9005e28cd6209923637bb74de5
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 10 22:29:42 2005 -0500

    [PATCH] Convert i2o to compat_ioctl
    
    Also broken design in its compat handlers - CONFIG_COMPAT doesn't
    mean that there should be no native ioctls.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    
    Reworked with comments from Markus Lidel by:
    Christoph Hellwig <hch@infradead.org>
    
    Rejections fixed and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0db7157ca47e21c7623a59e710b807ad06fce161
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 10 22:19:25 2005 -0500

    [PATCH] kill old EH constants
    
    Fix up two drivers that incorrectly were using the old return values for
    their new-style EH methods and kill off scsi_obsolete.h that defined the
    constants.  The initio driver has all these constansts defined locally
    and uses them internally, I'll fix that up some time later.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 84011ae88da62a20b3ae7b48e2ae3b1ef0fc810a
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 3 14:59:11 2005 -0500

    [PATCH] scsi: remove meaningless scsi_cmnd->serial_number_at_timeout field
    
    scsi_cmnd->serial_number_at_timeout doesn't serve any purpose
    anymore.  All serial_number == serial_number_at_timeout tests
    are always true in abort callbacks.  Kill the field.  Also, as
    ->pid always equals ->serial_number and ->serial_number
    doesn't have any special meaning anymore, update comments
    above ->serial_number accordingly.  Once we remove all uses of
    this field from all lldd's, this field should go.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 97665e9c22991401dc56968619c6b8b9c09f3268
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 3 14:55:06 2005 -0500

    [PATCH] scsi: remove unused scsi_cmnd->internal_timeout field
    
    scsi_cmnd->internal_timeout field doesn't have any meaning
    anymore.  Kill the field.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1409277c4aad2e87ad27b2b8a6901ce78eaf8081
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 3 14:53:59 2005 -0500

    [PATCH] remove outdated print_* functions
    
    We have the scsi_print_* functions in the proper namespace for a long
    time now and there weren't a lot users left.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0890d74f295be849032fd4390ee00422dfda83b1
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Apr 3 14:52:44 2005 -0500

    [PATCH] consolidate timeout defintions in scsi.h
    
    Adapted from a patch in SuSE's kernel SRPM.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c2a9331c62216e222a08de8dd58559367fef0af6
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Tue Apr 12 16:38:09 2005 -0500

    updates for CFQ oops fix
    
    - add a comment to the device structure that the device_busy field
      is now protected by the request_queue->queue_lock
    - null out sdev->request_queue after the queue is released to trap
      any (and there shouldn't be any) use after the queue is freed.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 152587deb8903c0edf483a5b889f975bc6bea7e0
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Apr 12 16:22:06 2005 -0500

    [PATCH] fix NMI lockup with CFQ scheduler
    
    The current problem seen is that the queue lock is actually in the
    SCSI device structure, so when that structure is freed on device
    release, we go boom if the queue tries to access the lock again.
    
    The fix here is to move the lock from the scsi_device to the queue.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 56fece20086ebe32bce2c0d74ceadd516b56baae
Author: James Bottomley <jejb@titanic.il.SteelEye.com>
Date:   Sun Apr 3 03:57:48 2005 -0600

    [PATCH] finally fix 53c700 to use the generic iomem infrastructure
    
    This driver has had it's own different infrastructure for doing this for
    ages, but it's time it used the common one.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e183b06bf0be6c525867476df186d20f8f1efe54
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Sat Apr 2 13:57:17 2005 -0600

    [PATCH] zfcp: convert to compat_ioctl
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cb59e840838193957a84ad22f7e1465a06a7c10c
Author: Douglas Gilbert <dougg@torque.net>
Date:   Sat Apr 2 13:51:23 2005 -0600

    [PATCH] sg.c: update
    
    The attachment combines the most recent patch from
    Yum Rayan <yum.rayan@gmail.com> (to reduce sg stack
    usage), Adrian Bunk <bunk@stusta.de> (to fix check
    after use) and me (fix elapsed time calculation
    (duration) on ia64 machines).
    
    I have modified the patch from Yum Rayan so kmalloc()
    in sg_read() is only called for the (rare) code paths
    that need them.
    
    Changelog:
       - reduce stack usage in sg_ioctl() and sg_read()
       - fix check after use in sg_mmap()
       - hold duration internally in milliseconds and
         check current time later than held time
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a757e64cfa400391041ed7953f0290c34a820c93
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:42 2005 -0700

    [PATCH] md: remove a number of misleading calls to MD_BUG
    
    The conditions that cause these calls to MD_BUG are not kernel bugs, just
    oddities in what userspace is asking for.
    
    Also convert analyze_sbs to return void, and the value it returned was
    always 0.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d28446fe2d87ea344c14741c39962dcc7aee5c78
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:41 2005 -0700

    [PATCH] md: close a small race in md thread deregistration
    
    There is a tiny race when de-registering an MD thread, in that the thread
    could disappear before it is set a SIGKILL, causing send_sig to have
    problems.
    
    This is most easily closed by holding tasklist_lock between enabling the
    thread to exit (setting ->run to NULL) and telling it to exit.
    
    (akpm: ick.  Needs to use kthread API and stop using signals)
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 187a27845a9dc1c3da3995e24625ccf2e7a346aa
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:26:40 2005 -0700

    [PATCH] fbdev MAINTAINERS update
    
    This patch does the long overdue updates to MAINTAINERS file for aty128fb
    and radeonfb.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23907eb8c22e39bcf3d7e7a35a2db1e416157adb
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat Apr 16 15:26:39 2005 -0700

    [PATCH] serial: fix comments in 8250.c
    
    Fix the formatting of some comments in 8250.c, and add a note that the
    register_serial / unregister_serial shouldn't be used in new code.
    
    We do this here in preference to adding to linux/serial.h, since that is used
    by a number of non-8250 drivers which pretend to be 8250.  It is not known
    whether it would be appropriate to do so.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c907132d534c10b4f34a60383c8384403cb424a4
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:38 2005 -0700

    [PATCH] nfsd4: fix struct file leak
    
    We were failing to close on an error path, resulting in a leak of struct files
    which could take a v4 server down fairly quickly....  So call
    nfs4_close_delegation instead of just open-coding parts of it.
    
    Simplify the cleanup on delegation failure while we're at it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1ee4f22f21d74bc3ca63b95ca5b63d3a8620527
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:38 2005 -0700

    [PATCH] nfsd4: callback create rpc client returns
    
    rpc_create_clnt and friends return errors, not NULL, on failure.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e416052f1462801ca857c7536288bac0621615e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:37 2005 -0700

    [PATCH] nfsd: clear signals before exiting the nfsd() thread
    
    Fixes the error "RPC: failed to contact portmap (errno -512)." when the server
    later tries to unregister from the portmapper.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d13df84ff7f3f3e26a9643c1d3cbf94cef9b5b59
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:26:36 2005 -0700

    [PATCH] jbd dirty buffer leak fix
    
    This fixes the lots-of-fsx-linux-instances-cause-a-slow-leak bug.
    
    It's been there since 2.6.6, caused by:
    
    ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.5/2.6.5-mm4/broken-out/jbd-move-locked-buffers.patch
    
    That patch moves under-writeout ordered-data buffers onto a separate journal
    list during commit.  It took out the old code which was based on a single
    list.
    
    The old code (necessarily) had logic which would restart I/O against buffers
    which had been redirtied while they were on the committing transaction's
    t_sync_datalist list.  The new code only writes buffers once, ignoring
    redirtyings by a later transaction, which is good.
    
    But over on the truncate side of things, in journal_unmap_buffer(), we're
    treating buffers on the t_locked_list as inviolable things which belong to the
    committing transaction, and we just leave them alone during concurrent
    truncate-vs-commit.
    
    The net effect is that when truncate tries to invalidate a page whose buffers
    are on t_locked_list and have been redirtied, journal_unmap_buffer() just
    leaves those buffers alone.  truncate will remove the page from its mapping
    and we end up with an anonymous clean page with dirty buffers, which is an
    illegal state for a page.  The JBD commit will not clean those buffers as they
    are removed from t_locked_list.  The VM (try_to_free_buffers) cannot reclaim
    these pages.
    
    The patch teaches journal_unmap_buffer() about buffers which are on the
    committing transaction's t_locked_list.  These buffers have been written and
    I/O has completed.  We can take them off the transaction and undirty them
    within the context of journal_invalidatepage()->journal_unmap_buffer().
    
    Acked-by: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19272d4385126c2ac369c9f6137a27a08aee50d1
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:35 2005 -0700

    [PATCH] drivers/infiniband/hw/mthca/mthca_main.c: remove an unused label
    
    Correct unwinding in error path of mthca_init_icm().
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68a3c21203b73696769dfdceb68d2d7f5d3c20a0
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:34 2005 -0700

    [PATCH] IB/mthca: add support for new MT25204 HCA
    
    Decouple table of HCA features from exact HCA device type.  Add a current FW
    version field so we can warn when someone is using old FW.  Add support for
    new MT25204 HCA.
    
    Remove the warning about mem-free support, since it should be pretty solid at
    this point.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08aeb14e5f6c28878266b01c87cc5ce31101afa8
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:34 2005 -0700

    [PATCH] IB/mthca: map context for RDMA responder in mem-free mode
    
    Fix RDMA in mem-free mode: we need to make sure that the RDMA context memory
    is mapped for the HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddf841f052fa218547c86169d1074968eca8c503
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:33 2005 -0700

    [PATCH] IB/mthca: update receive queue initialization for new HCAs
    
    Update initialization of receive queue to match new documentation.  This
    change is required to support new MT25204 HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d10ddbf6d7f6699c386d1f41bf542189de32b6be
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:32 2005 -0700

    [PATCH] IB/mthca: encapsulate mem-free check into mthca_is_memfree()
    
    Clean up mem-free mode support by introducing mthca_is_memfree() function,
    which encapsulates the logic of deciding if a device is mem-free.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bd6228eed52ef188ebe46865ccff72da936c968
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:31 2005 -0700

    [PATCH] IB/mthca: tweaks to mthca_cmd.c
    
    Minor tweaks to firmware command handling: kill off an unused get of a value,
    and add a little more info to debug output.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f5fdca1ca9d1659b920827e5cf6dbad20e5391
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:30 2005 -0700

    [PATCH] IB/mthca: add fast memory region implementation
    
    Implement fast memory regions (FMRs), where the driver writes directly into
    the HCA's translation tables rather than requiring a firmware command.  For
    Tavor, MTTs for FMR are separate from regular MTTs, and are reserved at driver
    initialization.  This is done to limit the amount of virtual memory needed to
    map the MTTs.  For Arbel, there's no such limitation, and all MTTs and MPTs
    may be used for FMR or for regular MR.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0a9d25cdcd511dd523357bc902979220dc72a2e
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:30 2005 -0700

    [PATCH] IB/mthca: split MR key munging routines
    
    Split Tavor and Arbel/mem-free index<->hw key munging routines, so that FMR
    implementation can call correct implementation without testing HCA type (which
    it already knows).
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fabd9fb7bdc935f121e6950a2c4eff971dd4c75
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:29 2005 -0700

    [PATCH] IB/mthca: add mthca_table_find() function
    
    Add mthca_table_find() function, which returns the lowmem address of an entry
    in a mem-free HCA's context tables.  This will be used by the FMR
    implementation.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8ca06f674ab5d7853d7de892c09bdc4c1bfb069
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:28 2005 -0700

    [PATCH] IB/mthca: add SYNC_TPT firmware command
    
    Add code for SYNC_TPT firmware command, which will be used by FMR
    implementation.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef416a33acbd2d68a58ea1ffdc13c674e53bc78f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:27 2005 -0700

    [PATCH] IB/mthca: add mthca_write64_raw() for writing to MTT table directly
    
    Add mthca_write64_raw() function, which will be used to write FMR entries that
    are in ioremapped PCI memory.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9095e208d84c349193fa19245cd5a8bc1a9774b8
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:26 2005 -0700

    [PATCH] IB/mthca: encapsulate MTT buddy allocator
    
    Encapsulate the buddy allocator used for MTT segments.  This cleans up the
    code and also gets us ready to add FMR support.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8df8a34de60f8e51c87e5c145679f1a896133199
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:26 2005 -0700

    [PATCH] IB/mthca: allow address handle creation in interrupt context
    
    Make address handle verbs usable from interrupt context.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a4443a699347cb5ac442491421ce7cd7a12e3e2
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:25 2005 -0700

    [PATCH] IB/mthca: fill in opcode field for send completions
    
    Fill in missing fields in send completions.
    
    Signed-off-by: Itamar Rabenstein <itamar@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44ea66879d5638cfed5b5ecf628badfd8ec26f36
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:24 2005 -0700

    [PATCH] IB/mthca: fix MTT allocation in mem-free mode
    
    Fix bug in MTT allocation in mem-free mode.
    
    I misunderstood the MTT size value returned by the firmware -- it is really
    the size of a single MTT entry, since mem-free mode does not segment the MTT
    as the original firmware did.  This meant that our MTT addresses ended up
    being off by a factor of 8.  This meant that our MTT allocations might
    overlap, and so we could overwrite and corrupt earlier memory regions when
    writing new MTT entries.
    
    We fix this by always using our 64-byte MTT segment size.  This allows some
    simplification of the code as well, since there's no reason to put the MTT
    segment size in a variable -- we can always use our enum value directly.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddb934e0eead2feadc7467b1f7bf9c81aa241232
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:23 2005 -0700

    [PATCH] IB/mthca: implement RDMA/atomic operations for mem-free mode
    
    Add code to support RDMA and atomic send work requests in mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b87dcfbacee9c57b39738f43f32834f02ec302d5
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:22 2005 -0700

    [PATCH] IB/mthca: fix format of CQ number for CQ events
    
    CQ numbers are only 24 bits, so only print 6 hex digits and mask off reserved
    part when reporting a CQ event.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b635fa215192a02e58e8e30d5d927435aa108192
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:21 2005 -0700

    [PATCH] IB/mthca: only free doorbell records in mem-free mode
    
    On error path, only free doorbell records if we're in mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ad81174edfc22528b845a27620db7542c1ce9a6
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:21 2005 -0700

    [PATCH] IB/mthca: print assigned IRQ when interrupt test fails
    
    Print IRQ number when NOP command interrupt test fails to help debugging.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2714eb5a4fb2b461b452fb8a2f65c8caacdd12d5
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:20 2005 -0700

    [PATCH] IB/mthca: release mutex on doorbell alloc error path
    
    Release mutex on error return path from mthca_alloc_db().
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55645e9b0ae202f9bd58e68eb141d7594163935f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:19 2005 -0700

    [PATCH] IB/mthca: fix MR allocation error path
    
    Fix error handling in MR allocation for mem-free mode: mthca_free must get an
    MR index, not a key.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85665c9816a2b38866e03c019bf5c2e47eb9fb04
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:18 2005 -0700

    [PATCH] IB/mthca: allocate correct number of doorbell pages
    
    Doorbell record pages are allocated in HCA page size chunks (always 4096
    bytes), so we need to divide by 4096 and not PAGE_SIZE when figuring out how
    many pages we'll need space for.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e464b2a6c2c297702205ab725fd82489550a7893
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:17 2005 -0700

    [PATCH] IB/mthca: clean up mthca_dereg_mr()
    
    It's cleaner to kfree mthca_mr, and not rely on the fact that ib_mr is the
    first field in mthca_mr.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72c30290bea3a24e2ab56c7a51af47012f7465a4
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:16 2005 -0700

    [PATCH] IB/mthca: allow unaligned memory regions
    
    The first buffer of a memory region is not required to be page-aligned, so
    don't return an error if it's not.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fba231754eef768f6ca83900b726ecf4bc9dc5f
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:16 2005 -0700

    [PATCH] IB/mthca: fix posting sends with immediate data
    
    When posting a work request with immediate data, put the immediate data in the
    immediate data field of the hardware's work request (rather than overwriting
    the flags field).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17ead2f5cc81c4658e7b495014c2c6856a6f6b88
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:15 2005 -0700

    [PATCH] IB/mthca: fix calculation of RDB shift
    
    Fix calculation of rdb_shift by using original number of QPs, not
    their slot in profile[] (which will be rearranged when we sort it).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf2daf3feae982db9804df3d4b8ec20fa7d6d41
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:14 2005 -0700

    [PATCH] IB/mthca: fill in more device query fields
    
    Implement more of the device_query method in mthca.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86562a139182bb19c984347f9625b61f3e6f7815
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:13 2005 -0700

    [PATCH] IB/mthca: map MPT/MTT context in mem-free mode
    
    In mem-free mode, when allocating memory regions, make sure that the HCA has
    context memory mapped to cover the virtual space used for the MPT and MTTs
    being used.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79b61dceafce696d72661d23a02393566b1899ab
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:12 2005 -0700

    [PATCH] IB: Remove incorrect comments
    
    Eliminate unneeded and misleading comments
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0df3bb131f789f5929f7a239869e9945e4a5a734
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:11 2005 -0700

    [PATCH] IB: Fix user MAD registrations with class 0
    
    Fix handling of MAD agent registrations with mgmt_class == 0.  In this case
    ib_umad should pass a NULL registration request to the MAD core rather than a
    request with mgmt_class set to 0.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20aa65699c4112733770100b7f0cce4ad046405e
Author: Libor Michalek <libor@topspin.com>
Date:   Sat Apr 16 15:26:11 2005 -0700

    [PATCH] IB: Trivial FMR printk cleanup
    
    Add missing newline in printk.
    
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de0d9641c4f164009b62ecc342f9776d44e78b6a
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:10 2005 -0700

    [PATCH] IB: Fix FMR pool crash
    
    Mask bits correctly from jhash result in ib_fmr_hash() so that the
    computed bucket index is within our hash table.  This fixes an SDP
    crash.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfe7cc7e816224b002f6887b2a82cba677f27344
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:09 2005 -0700

    [PATCH] IB: remove unneeded includes
    
    Eliminate no longer needed include files
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24239aff4e25cba2d068b2c6b8e739257351c15d
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Apr 16 15:26:08 2005 -0700

    [PATCH] IB: Keep MAD work completion valid
    
    Replace the *wc field in ib_mad_recv_wc from pointing to a structure on the
    stack to one allocated with the received MAD buffer.  This allows a client to
    access the *wc field after their receive completion handler has returned.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1ed8dab9486ecc109b74d3941051155cb07a05a
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:07 2005 -0700

    [PATCH] IPoIB: document conversion to debugfs
    
    Update IPoIB documentation now that multicast debugging files have moved from
    ipoibdebugfs to debugfs.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9adec1a808603698bd7ff47f3883bd7cd1383f90
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:07 2005 -0700

    [PATCH] IPoIB: convert to debugfs
    
    Convert IPoIB to use debugfs instead of its own custom debugging filesystem.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ded99cbbbfef2cef537d717ad61d2f77f4dfd6
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:06 2005 -0700

    [PATCH] IPoIB: fix static rate calculation
    
    Correct and simplify calculation of static rate.  We need to round up the
    quotient of (local_rate - path_rate) / path_rate.  To round up we add
    (path_rate - 1) to the numerator, so the quotient simplifies to (local_rate -
    1) / path_rate.
    
    No idea how I came up with the old formula.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62241eb497721be7640e5d9330e60f4a88a4db46
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:05 2005 -0700

    [PATCH] IPoIB: set skb->mac.raw on receive
    
    Set skb->mac.raw on receive.  This fixes crashes when this is
    dereferenced, for example by netfilter or when PF_PACKET is used.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48a5346b315183ce482df0909234faf97fa41611
Author: Horms <horms@verge.net.au>
Date:   Sat Apr 16 15:26:03 2005 -0700

    [PATCH] Maintainers list update: linux-net -> netdev
    
    Use netdev as the mailing list contact instead of the mostly dead linux-net
    list.
    
    Signed-off-by: Horms <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5960f3a63394c091b17682aed3bd8fdd994a1b93
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat Apr 16 15:26:02 2005 -0700

    [PATCH] arm: fix floppy disk dependencies
    
    Both the RiscPC and (optionally) EBSA285 have floppy disk support.  Allow this
    option to be selected on these ARM platforms again.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c46ada700568897165409e618ed584683838b49
Author: Coywolf Qi Hunt <coywolf@lovecn.org>
Date:   Sat Apr 16 15:26:01 2005 -0700

    [PATCH] reparent_to_init cleanup
    
    This patch hides reparent_to_init().  reparent_to_init() should only be
    called by daemonize().
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f4cfacecd522849dac254f87273525eeca33d1d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 16 15:26:00 2005 -0700

    [PATCH] MAINTAINERS: remove obsolete ACP/MWAVE MODEM entry
    
    Both maintainer email addresses are bouncing and the web address is no
    longer valid.
    
    Seems to be a good time to remove the entry.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b45c3bb1247ba84e4123c46abe64adf84e03aaf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 16 15:25:59 2005 -0700

    [PATCH] let SOUND_AD1889 depend on PCI
    
    Compiling SOUND_AD1889 with PCI=n results in the following compile
    error:
    
    sound/built-in.o(.text+0x24f0c): In function `ad1889_remove':
    : undefined reference to `pci_release_region'
    
    This patch adds the missing dependency on PCI.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a8488965dc4c42a4a1f84cab907c7d6c5cf1563
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:25:59 2005 -0700

    [PATCH] cpuset: remove function attribute const
    
    gcc-4 warns with
    include/linux/cpuset.h:21: warning: type qualifiers ignored on function
    return type
    
    cpuset_cpus_allowed is declared with const
    extern const cpumask_t cpuset_cpus_allowed(const struct task_struct *p);
    
    First const should be __attribute__((const)), but the gcc manual
    explains that:
    
    "Note that a function that has pointer arguments and examines the data
    pointed to must not be declared const. Likewise, a function that calls a
    non-const function usually must not be const. It does not make sense for
    a const function to return void."
    
    The following patch remove const from the function declaration.
    
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b52402c783d8c16b11f146a244bb21086a94bf84
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Apr 16 15:25:58 2005 -0700

    [PATCH] pci enumeration on ixp2000: overflow in kernel/resource.c
    
    IXP2000 (ARM-based) platforms use a separate 'struct resource' for PCI MEM
    space.  Resource allocation for PCI BARs always fails because the 'root'
    resource (the IXP2000 PCI MEM resource) always has the entire address space
    (00000000-ffffffff) free, and find_resource() calculates the size of that
    range as ffffffff-00000000+1=0, so all allocations fail because it thinks
    there is no space.
    
    (akpm: pls. double-check)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe4b334f8bcdf5359771666d5002b293212e4d3f
Author: Colin Leroy <colin@colino.net>
Date:   Sat Apr 16 15:25:57 2005 -0700

    [PATCH] CREDITS update
    
    Update Colin's credits entry.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cfb7161cd0d0eb467f87e4afe29c94d693948c7
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Sat Apr 16 15:25:56 2005 -0700

    [PATCH] Add dontdiff file
    
    Add a current 'dontdiff' file for use with 'diff -X dontdiff'.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e95ce279fa611226a1ab0dff1c237c080b51b60
Author: Matt Mackall <mpm@selenic.com>
Date:   Sat Apr 16 15:25:56 2005 -0700

    [PATCH] update maintainer for /dev/random
    
    Ted has agreed to let me take over as maintainer of /dev/random and
    friends.  I've gone ahead and added a line to his entry in CREDITS.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d390493b11e1fc790e3840ed191a0f88e3a54ba7
Author: Magnus Damm <damm@opensource.se>
Date:   Sat Apr 16 15:25:55 2005 -0700

    [PATCH] opl3sa2: MODULE_PARM_DESC
    
    opl3sa2: Fix "irq"-parameter name typo for parameter description.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dae409a27788774adb810f7cdb771ba7cce7af8a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Apr 16 15:25:54 2005 -0700

    [PATCH] add Big Endian variants of ioread/iowrite
    
    In the new io infrastructure, all of our operators are expecting the
    underlying device to be little endian (because the PCI bus, their main
    consumer, is LE).
    
    However, there are a fair few devices and busses in the world that are
    actually Big Endian.  There's even evidence that some of these BE bus and
    chip types are attached to LE systems.  Thus, there's a need for a BE
    equivalent of our io{read,write}{16,32} operations.
    
    The attached patch adds this as io{read,write}{16,32}be.  When it's in,
    I'll add the first consume (the 53c700 SCSI chip driver).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c41f5eb3b8feb8772561f0e34cfee4de1fa433ec
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:53 2005 -0700

    [PATCH] efi: eliminate bad section references
    
    Randy please double check especially this one.
    there may be a better solution.
    
    Fix efi section references:
     remove __initdata for struct efi efi_phys
     and struct efi_memory_map memmap
    
    Error: ./arch/i386/kernel/efi.o .text refers to 000000d3 R_386_32
    .init.data
    Error: ./arch/i386/kernel/efi.o .text refers to 000000ff R_386_32
    .init.data
    
    efi_memmap_walk (which is not __init nor static)
    accesses both efi_phys and memmap.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fca44804508d544b0b9d9d85279e5eea778e4e32
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:52 2005 -0700

    [PATCH] hd: eliminate bad section references
    
    Fix hd section references:
    make parse_hd_setup() __init
    
    Error: ./drivers/ide/legacy/hd.o .text refers to 00000943 R_386_PC32
    .init.text
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffbe5523a8e7f808681007aaea282da9a316a699
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:51 2005 -0700

    [PATCH] pnpbios: eliminate bad section references
    
    one of the last buildcheck errors on i386, thanks Randy again for double
    checking.
    
    Fix pnpbios section references:
    make dmi_system_id pnpbios_dmi_table __initdata
    
    Error: ./drivers/pnp/pnpbios/core.o .data refers to 00000100 R_386_32
    .init.text
    Error: ./drivers/pnp/pnpbios/core.o .data refers to 0000012c R_386_32
    .init.text
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1ba0dab261c1941fdf0db28868eaf459aaea089
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sat Apr 16 15:25:51 2005 -0700

    [PATCH] Fix comment in list.h that refers to nonexistent API
    
    The hlist_for_each_entry_rcu() comment block refers to a nonexistent
    hlist_add_rcu() API, needs to change to hlist_add_head_rcu().
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29504ff3be784372c4e2f7e31681a3e0292c4d9a
Author: Daniel McNeil <daniel@osdl.org>
Date:   Sat Apr 16 15:25:50 2005 -0700

    [PATCH] Direct IO async short read fix
    
    The direct I/O code is mapping the read request to the file system block.  If
    the file size was not on a block boundary, the result would show the the read
    reading past EOF.  This was only happening for the AIO case.  The non-AIO case
    truncates the result to match file size (in direct_io_worker).  This patch
    does the same thing for the AIO case, it truncates the result to match the
    file size if the read reads past EOF.
    
    When I/O completes the result can be truncated to match the file size
    without using i_size_read(), thus the aio result now matches the number of
    bytes read to the end of file.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f08ad02379530e1c970d3d104343b9907b4d1b4
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sat Apr 16 15:25:49 2005 -0700

    [PATCH] undo do_readv_writev() behavior change
    
    Bugme bug 4326: http://bugme.osdl.org/show_bug.cgi?id=4326 reports:
    
    executing the systemcall readv with Bad argument
    ->len == -1) it gives out error EFAULT instead of EINVAL
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22a685d09bb98810670ac0fb02c2138bdbf038cc
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:48 2005 -0700

    [PATCH] officially deprecate register_ioctl32_conversion
    
    These have been deprecated since ->compat_ioctl when in, thus only a short
    deprecation period.  There's four users left: i2o_config, s390/z90crypy,
    s390/dasd and s390/zfcp and for the first two patches are about to be
    submitted to get rid of it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cae60feb6709dea4cb94da93d4d2ea039aee59d
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:47 2005 -0700

    [PATCH] kill #ifndef HAVE_ARCH_GET_SIGNAL_TO_DELIVER in signal.c
    
    Now that no architectures defines HAVE_ARCH_GET_SIGNAL_TO_DELIVER anymore
    this can go away.  It was a transitional hack only.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e821d94d34af23a31a16ead78e8b685b750c8c3d
Author: Niu YaWei <niu@clusterfs.com>
Date:   Sat Apr 16 15:25:47 2005 -0700

    [PATCH] quota: possible bug in quota format v2 support
    
    Don't put root block of quota tree to the free list (when quota file is
    completely empty).  That should not actually happen anyway (somebody should
    get accounted for the filesystem root and so quota file should never be
    empty) but better prevent it here than solve magical quota file
    corruption.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31e7ad6ac919761f0486f7781b02ff3ab54b6ef1
Author: Jan Kara <jack@suse.cz>
Date:   Sat Apr 16 15:25:46 2005 -0700

    [PATCH] quota: fix possible oops on quotaoff
    
    Remove dquot structures from quota file on quotaon - quota code does not
    expect them to be there.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e072c6f2af57fb8ad9e0f29bfff3f79edf7bdd55
Author: Bernard Blackham <bernard@blackham.com.au>
Date:   Sat Apr 16 15:25:45 2005 -0700

    [PATCH] ext2 corruption - regression between 2.6.9 and 2.6.10
    
    Whilst trying to stress test a Promise SX8 card, we stumbled across
    some nasty filesystem corruption in ext2. Our tests involved
    creating an ext2 partition, mounting, running several concurrent
    fsx's over it, umounting, and fsck'ing, all scripted[1]. The fsck
    would always return with errors.
    
    This regression was traced back to a change between 2.6.9 and
    2.6.10, which moves the functionality of ext2_put_inode into
    ext2_clear_inode.  The attached patch reverses this change, and
    eliminated the source of corruption.
    
    Mingming Cao <cmm@us.ibm.com> said:
    
    I think his patch for ext2 is correct.  The corruption on ext3 is not the same
    issue he saw on ext2.  I believe that's the race between discard reservation
    and reservation in-use that we already fixed it in 2.6.12- rc1.
    
    For the problem related to ext2, at the time when we design reservation for
    ext3, we decide we only need to discard the reservation at the last file
    close, so we have ext3_discard_reservation on iput_final- >ext3_clear_inode.
    
    The ext2 handle discard preallocation differently at that time, it discard the
    preallocation at each iput(), not in input_final(), so we think it's
    unnecessary to thrash it so frequently, and the right thing to do, as we did
    for ext3 reservation, discard preallocation on last iput().  So we moved the
    ext2_discard_preallocation from ext2_put_inode(0 to ext2_clear_inode.
    
    Since ext2 preallocation is doing pre-allocation on disk, so it is possible
    that at the unmount time, someone is still hold the reference of the inode, so
    the preallocation for a file is not discard yet, so we still mark those blocks
    allocated on disk, while they are not actually in the inode's block map, so
    fsck will catch/fix that error later.
    
    This is not a issue for ext3, as ext3 reservation(pre-allocation) is done in
    memory.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 614a7d6a76b7fb37bb399047eb3ccf86cafbf60d
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:44 2005 -0700

    [PATCH] fix up newly added jsm driver
    
     - plug various leaks and use after frees in the remove and
       initialization failure path (some still left)
     - remove useless global list of boards and use pci_set_drvdata instead
     - unobsfucate init path by merging functions together
     - kill various totally useless state variables
     - .. probably more I forgot
    
    Note that the tty part still generates lots of sparse warnings and there's
    still a totally useless layer of function pointer indirections, but maybe
    someone else will fix that bit up.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a299738283a654544c75167d190d9e87b77e5fb7
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sat Apr 16 15:25:43 2005 -0700

    [PATCH] use cheaper elv_queue_empty when unplug a device
    
    In function __generic_unplug_device(), kernel can use a cheaper function
    elv_queue_empty() instead of more expensive elv_next_request to find
    whether the queue is empty or not.  blk_run_queue can also made conditional
    on whether queue's emptiness before calling request_fn().
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 975e046cc06005bafe0c5ce81d55a1b1eb84f5a1
Author: Bert Wesarg <wesarg@informatik.uni-halle.de>
Date:   Sat Apr 16 15:25:43 2005 -0700

    [PATCH] fix module_param_string() calls
    
    This patch fix 3 calls to module_param_string() in
    driver/media/video/tuner-core.c and drivers/media/video/tda9887.c.  In all
    three places, the len and the perm parameter was switched.
    
    Signed-off-by: Bert Wesarg <wesarg@informatik.uni-halle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31143a12044caa3521edafd736e3bc18c098d2fd
Author: Bert Wesarg <wesarg@informatik.uni-halle.de>
Date:   Sat Apr 16 15:25:42 2005 -0700

    [PATCH] kernel/param.c: don't use .max when .num is NULL in param_array_set()
    
    there seems to be a bug, at least for me, in kernel/param.c for arrays with
    .num == NULL.  If .num == NULL, the function param_array_set() uses &.max
    for the call to param_array(), wich alters the .max value to the number of
    arguments.  The result is, you can't set more array arguments as the last
    time you set the parameter.
    
    example:
    
    # a module 'example' with
    # static int array[10] = { 0, };
    # module_param_array(array, int, NULL, 0644);
    
    $ insmod example.ko array=1,2,3
    $ cat /sys/module/example/parameters/array
    1,2,3
    $ echo "4,3,2,1" > /sys/module/example/parameters/array
    $ dmesg | tail -n 1
    kernel: array: can take only 3 arguments
    
    Signed-off-by: Bert Wesarg <wesarg@informatik.uni-halle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc9c9ab22d5650977c417ef2032d02f455011b23
Author: Bharath Ramesh <bramesh@vt.edu>
Date:   Sat Apr 16 15:25:41 2005 -0700

    [PATCH] AYSNC IO using singals other than SIGIO
    
    A question on sigwaitinfo based IO mechanism in multithreaded applications.
    
    I am trying to use RT signals to notify me of IO events using RT signals
    instead of SIGIO in a multithreaded applications.  I noticed that there was
    some discussion on lkml during november 1999 with the subject of the
    discussion as "Signal driven IO".  In the thread I noticed that RT signals
    were being delivered to the worker thread.  I am running 2.6.10 kernel and
    I am trying to use the very same mechanism and I find that only SIGIO being
    propogated to the worker threads and RT signals only being propogated to
    the main thread and not the worker threads where I actually want them to be
    propogated too.  On further inspection I found that the following patch
    which I have attached solves the problem.
    
    I am not sure if this is a bug or feature in the kernel.
    
    
    Roland McGrath <roland@redhat.com> said:
    
    This relates only to fcntl F_SETSIG, which is a Linux extension.  So there is
    no POSIX issue.  When changing various things like the normal SIGIO signalling
    to do group signals, I was concerned strictly with the POSIX semantics and
    generally avoided touching things in the domain of Linux inventions.  That's
    why I didn't change this when I changed the call right next to it.  There is
    no reason I can see that F_SETSIG-requested signals shouldn't use a group
    signal like normal SIGIO does.  I'm happy to ACK this patch, there is nothing
    wrong with its change to the semantics in my book.  But neither POSIX nor I
    care a whit what F_SETSIG does.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a534f93b371e8e6e87ae302757365f0f583e06b
Author: Jens Axboe <axboe@suse.de>
Date:   Sat Apr 16 15:25:40 2005 -0700

    [PATCH] possible use-after-free of bio
    
    There is a possibility that a bio will be accessed after it has been freed
    on SCSI.  It happens if you submit a bio with BIO_SYNC marked and the
    auto-unplugging kicks the request_fn, SCSI re-enables interrupts in-between
    so if the request completes between the add_request() in __make_request()
    and the bio_sync() call, we could be looking at a dead bio.  It's a slim
    race, but it has been triggered in the Real World.
    
    So assign bio_sync() to a local variable instead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c340d80f66faaea3522812d0d8c91d6a1b48a22
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Apr 16 15:25:39 2005 -0700

    [PATCH] uml: fix compilation for __CHOOSE_MODE addition
    
    I had added the __CHOOSE_MODE syntax to fix some warnings with newer GCC's
    in the uml-fix-cond-expr-as-lvalues-warning patch.
    
    Here is the update from the version I sent to make it work also when only
    one mode (TT or SKAS) is enabled.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43117a08280e40be43e181c51cce296ef4b4c7e5
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Sat Apr 16 15:25:39 2005 -0700

    [PATCH] swsusp: SMP fix
    
    Fix some smp_processor_id-in-preemptible warnings
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf2049f983eb47f9463d3dd54abd82e3e58846f9
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:38 2005 -0700

    [PATCH] fix few remaining u32 vs. pm_message_t problems
    
    This fixes remaining u32 vs.  pm_message_t confusions in -rc2-mm3.  [There
    are usb changes, too; they went to Greg on his request.]
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bfffd97ef913045080861d1898286ac8975c22a
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:37 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in rest of the tree
    
    This fixes u32 vs.  pm_message_t confusion in remaining places.  Fortunately
    there's few of them.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bfd354b1b9c2f4faee121892bdfbc1490b51ab5
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:36 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in driver/video
    
    This fixes u32 vs.  pm_message_t confusion in drivers/video.  Should change no
    code.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0370affeec3e751412e917aab931d8ba52680578
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:35 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/
    
    -rc2-mm1 still contains few places where u32 and pm_message_t.  This fixes
    drivers/serial [should change no code].
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4ffad5b77f17bd8ad2a220d6eb0278bc07a5a17
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:34 2005 -0700

    [PATCH] power/video.txt: update documentation with more systems
    
    This updates video.txt documentation with information about few more
    systems.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1c42851b006398dda77a068275e8741e33761f1
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:34 2005 -0700

    [PATCH] u32 vs. pm_message_t in ppc and radeon
    
    This fixes pm_message_t vs.  u32 confusion in ppc and aty (I *hope* that's
    basically radeon code...).  I was not able to test most of these, but I'm
    not really changing anything, so it should be okay.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f4927c1b505eb4e679ab506bf7626af6258e6b6
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:33 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in PCI, PCIE
    
    This fixes drivers/pci (mostly pcie stuff).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f45139044db870835b53a0fea41da2e04c3958d0
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:32 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/macintosh
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case as Russel King pointed out.  Here are fixes for
    drivers/macintosh.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b9c33a7d6b9f1a72b2dc63bb6b8f055203d9bcb
Author: Pavel Machek <pavel@suse.cz>
Date:   Sat Apr 16 15:25:31 2005 -0700

    [PATCH] Fix u32 vs. pm_message_t in x86-64
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case...  Here are fixes x86-64.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2d53566a757c8d12246d8daf8c5a2f21a0c4293
Author: Pavel Machek <pavel@suse.cz>
Date:   Sat Apr 16 15:25:30 2005 -0700

    [PATCH] fix pm_message_t vs. u32 in alsa
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case as Russel King pointed out.  This fixes last few
    bits in alsa.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5378ca8c0ab684bd9339dc6827dd5a042f9e6fc
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:29 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/mmc,mtd,scsi
    
    This fixes u32 vs.  pm_message_t in drivers/mmc, drivers/mtd and
    drivers/scsi.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d189f729829369edb2e797e9a6ebc2b01b359d0
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:28 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/message
    
    This fixes u32 vs. pm_message_t in drivers/message.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a291068991c4d0cc4c2bd533094422bf417c86dd
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:27 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/media
    
    Here are fixes for drivers/media.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bf28030f3683f69669d08cb5b32bc46db3d22ae
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:26 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in pcmcia
    
    This fixes u32 vs. pm_message_t in pcmcia.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05adc3b7458e97a1d0180828000207a403083389
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:25 2005 -0700

    [PATCH] u32 vs. pm_message_t fixes for drivers/net
    
    This fixes remaining u32s in drivers/ net.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fd416c14c583ee6ff1e2b17ab05e7e02e170e4c
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:24 2005 -0700

    [PATCH] Fix u32 vs. pm_message_t in drivers/char
    
    Here are fixes for drivers/char.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 438510f6f079e94df294936b5bd8a7fd679cd1c9
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:24 2005 -0700

    [PATCH] pm_message_t: more fixes in common and i386
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately
    that turned out not to be the case as Russel King pointed out.  Here are
    fixes for Documentation and common code (mainly system devices).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ad74c1581c9a27582945ca01ffdb88fc774171
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Sat Apr 16 15:25:21 2005 -0700

    [PATCH] h8300 header update
    
    - page.h: fix build error
    - unistd.h: _syscall macro cleanup.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d31ddaa1722793228b364e87b6c589023b348798
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sat Apr 16 15:25:20 2005 -0700

    [PATCH] x86, x86_64: dual core proc-cpuinfo and sibling-map fix
    
    - broken sibling_map setup in x86_64
    
    - grouping all the core and HT related cpuinfo fields.
      We are reasonably sure that adding new cpuinfo fields after "siblings" field,
      will not cause any app failure. Thats because today's /proc/cpuinfo
      format is completely different on x86, x86_64 and we haven't heard of any
      x86 app breakage because of this issue. Grouping these fields will
      result in more or less common format on all architectures (ia64, x86 and
      x86_64) and will cause less confusion.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8ab26fe5bfeef43bdcde5182ca051ae0647607e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:19 2005 -0700

    [PATCH] x86_64: Switch SMP bootup over to new CPU hotplug state machine
    
    This will allow hotplug CPU in the future and in general cleans up a lot of
    crufty code.  It also should plug some races that the old hackish way
    introduces.  Remove one old race workaround in NMI watchdog setup that is not
    needed anymore.
    
    I removed the old total sum of bogomips reporting code.  The brag value of
    BogoMips has been greatly devalued in the last years on the open market.
    
    Real CPU hotplug will need some more work, but the infrastructure for it is
    there now.
    
    One drawback: the new TSC sync algorithm is less accurate than before.  The
    old way of zeroing TSCs is too intrusive to do later.  Instead the TSC of the
    BP is duplicated now, which is less accurate.
    
    akpm:
    
    - sync_tsc_bp_init seems to have the sense of `init' inverted.
    
    - SPIN_LOCK_UNLOCKED is deprecated - use DEFINE_SPINLOCK.
    
    Cc: <rusty@rustcorp.com.au>
    Cc: <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebfcaa96fccc01301a577c5c56a5f00543cf167e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:18 2005 -0700

    [PATCH] x86_64: Rename the extended cpuid level field
    
    It was confusingly named.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    DESC
    x86_64: Switch SMP bootup over to new CPU hotplug state machine
    EDESC
    From: "Andi Kleen" <ak@suse.de>
    
    This will allow hotplug CPU in the future and in general cleans up a lot of
    crufty code.  It also should plug some races that the old hackish way
    introduces.  Remove one old race workaround in NMI watchdog setup that is not
    needed anymore.
    
    I removed the old total sum of bogomips reporting code.  The brag value of
    BogoMips has been greatly devalued in the last years on the open market.
    
    Real CPU hotplug will need some more work, but the infrastructure for it is
    there now.
    
    One drawback: the new TSC sync algorithm is less accurate than before.  The
    old way of zeroing TSCs is too intrusive to do later.  Instead the TSC of the
    BP is duplicated now, which is less accurate.
    
    Cc: <rusty@rustcorp.com.au>
    Cc: <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 229992446b12fbc755825b6a9f38fc6a273e1f19
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:17 2005 -0700

    [PATCH] x86_64: Add acpi_skip_timer_override option
    
    Add acpi_skip_timer_override option.  It was missing previously.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a65800243742480b4b594b619b759749a3cfef4
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:17 2005 -0700

    [PATCH] x86_64: Rewrite exception stack backtracing
    
    Exceptions and hardware interrupts can, to a certain degree, nest, so when
    attempting to follow the sequence of stacks used in order to dump their
    contents this has to be accounted for.  Also, IST stacks have their tops
    stored in the TSS, so there's no need to add the stack size to get to their
    ends.
    
    Minor changes from AK.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 635186447d0e6f3b35895fda993a266a1315d2a7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:16 2005 -0700

    [PATCH] x86_64: Final support for AMD dual core
    
    Clean up the code greatly.  Now uses the infrastructure from the Intel dual
    core patch Should fix a final bug noticed by Tyan of not detecting the nodes
    correctly in some corner cases.
    
    Patch for x86-64 and i386
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dd9d514846cdca1dcef2e4fce666d85e199e844
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:15 2005 -0700

    [PATCH] x86_64: add support for Intel dual-core detection and displaying
    
    Appended patch adds the support for Intel dual-core detection and displaying
    the core related information in /proc/cpuinfo.
    
    It adds two new fields "core id" and "cpu cores" to x86 /proc/cpuinfo and the
    "core id" field for x86_64("cpu cores" field is already present in x86_64).
    
    Number of processor cores in a die is detected using cpuid(4) and this is
    documented in IA-32 Intel Architecture Software Developer's Manual (vol 2a)
    (http://developer.intel.com/design/pentium4/manuals/index_new.htm#sdm_vol2a)
    
    This patch also adds cpu_core_map similar to cpu_sibling_map.
    
    Slightly hacked by AK.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2ea2750fbe56867bc8e0eb595115b14195a3e5e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:14 2005 -0700

    [PATCH] x86_64: Remove duplicated syscall entry.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daeeafecf029a05a304fa299706b3ecc90e16175
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:13 2005 -0700

    [PATCH] x86_64: Keep only a single debug notifier chain
    
    Calling a notifier three times in the debug handler does not make much sense,
    because a debugger can figure out the various conditions by itself.  Remove
    the additional calls to DIE_DEBUG and DIE_DEBUGSTEP completely.
    
    This matches what i386 does now.
    
    This also makes sure interrupts are always still disabled when calling a
    debugger, which prevents:
    
    BUG: using smp_processor_id() in preemptible [00000001] code: tpopf/1470
    caller is post_kprobe_handler+0x9/0x70
    
    Call Trace:<ffffffff8024f10f>{smp_processor_id+191} <ffffffff80120e69>{post_kpro
    be_handler+9}
    <ffffffff80120f7a>{kprobe_exceptions_notify+58}
    <ffffffff80144fc0>{notifier_call_chain+32} <ffffffff80110daf>{do_debug+335}
    <ffffffff8010f513>{debug+127}  <EOE>
    
    on preemptible debug kernels with kprobes when single stepping in user space.
    
    This was probably a bug even on non preempt kernels, this function was
    supposed to be running with interrupts off according to a comment there.
    
    Note to third part debugger maintainers: please double check your debugger can
    still single step.
    
    Cc: <prasanna@in.ibm.com>
    Cc: <jbeulich@novell.com>
    Cc: <kaos@sgi.com>
    Cc: <jim.houston@ccur.com>
    Cc: <jfv@bluesong.net>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ece90303ec7e2e8d8610eb03ee7648755dd8efe7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:13 2005 -0700

    [PATCH] x86_64: Use the e820 hole to map the IOMMU/AGP aperture
    
    This might save memory on some Opteron systems without AGP bridge.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1e9778203b15b86bc2219e87478d3be9acce735
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:12 2005 -0700

    [PATCH] x86_64: Port over e820 gap detection from i386
    
    Look for gaps in the e820 memory map to put PCI resources in.
    
    This hopefully fixes problems with the PCI code assigning 32bit BARs MMIO
    resources which are >32bit.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf94b62f7005805be0a3ba02c624cb8cd3595bac
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sat Apr 16 15:25:11 2005 -0700

    [PATCH] x86_64-always-use-cpuid-80000008-to-figure-out-mtrr fix
    
    We need to use the size_and_mask in set_mtrr_var_ranges(which is called
    while programming MTRR's for AP's
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f2c958ad51fed18b23558e2047b98dfa752e689
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:10 2005 -0700

    [PATCH] x86_64: Always use CPUID 80000008 to figure out MTRR address space size
    
    It doesn't make sense to only do this only for AMD K8.
    
    This would support future CPUs with extended address spaces properly.
    
    For i386 and x86-64
    
    Cc: <davej@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0de53bbc2118c754ee923516122d91add288582
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:10 2005 -0700

    [PATCH] x86_64: Remove excessive stack allocation in MCE code with large NR_CPUS
    
    Remove excessive stack allocation in MCE code with large NR_CPUS
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94ad84740fb3fe6c2112e60bc71a256c2815479d
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:09 2005 -0700

    [PATCH] x86_64: Use the extended RIP MSR for machine check reporting if available.
    
    They are rumoured to be much more reliable than the RIP in the stack frame on
    P4s.
    
    This is a borderline case because the code is very simple.  Please note there
    are no plans to add support for all the MCE register MSRs.
    
    Cc: <venkatesh.pallipadi@intel.com>
    Cc: <racing.guo@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c1734090ebcd31e479798b3af4c260ae09bf3a4
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:08 2005 -0700

    [PATCH] x86_64: Correct wrong comment in local.h
    
    local_t is actually a win over atomic_t because it does not need lock
    prefixes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72e76be2fedb4db320a4855d870f731c1242a9d3
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:07 2005 -0700

    [PATCH] x86_64: Don't assume future AMD CPUs have K8 compatible performance counters
    
    The NMI watchdog code did this incorrectly
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a848f632f86f1602094e6172cdc05c048042d7a
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:06 2005 -0700

    [PATCH] x86_64: Make kernel math errors a die() now
    
    There were no reports about the previous warning for FPU exceptions in the
    kernel, so make it a die() now.
    
    Also improve the error messages slightly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c29601e9c1e7893d1755364e350c9188bd56d69f
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:05 2005 -0700

    [PATCH] x86_64: Support constantly ticking TSCs
    
    On Intel Noconas the TSC ticks with a constant frequency.  Don't scale the
    factor used by udelay when cpufreq changes the frequency.
    
    This generalizes an earlier patch by Intel for this.
    
    Cc: <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc37db4d8cb376bb67c6357c50d707ced3d71c39
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:05 2005 -0700

    [PATCH] x86_64: Remove unused macro in preempt support
    
    Remove unused macro in preempt support
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdd219cd1f9e657aead247dfa1ecfdeb37efdf70
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:04 2005 -0700

    [PATCH] x86_64: Fix a small missing schedule race
    
    Could lead to a lost reschedule event when the process already rescheduled on
    exception exit, and needs it again while still being in the kernel.  Unlikely
    case though.
    
    Also remove one redundant cli in another entry.S path.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fefb0d17599d63e9d30c23bcbe2d4e06477cd55
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:03 2005 -0700

    [PATCH] x86_64: Regularize exception stack handling
    
    This fixes various issues in the return path for "paranoid"
    handlers (= running on a private exception stack that act like NMIs).
    
    Generalize previous hack to switch back to process stack for
    scheduling/signal handling purposes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11b854b2f10f398f9a18c65e202853f929dd3185
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:02 2005 -0700

    [PATCH] x86_64: Call do_notify_resume unconditionally in entry.S
    
    This removes some unnecessary code in the assembly files.
    
    Matches i386 behaviour.
    
    In addition don't clear the work check mask after work has been done.
    This fixes some theoretical signal/other event losses.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36c1104e309fe93375e67cdbdb2a980f23965f3b
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:01 2005 -0700

    [PATCH] x86_64: Minor microoptimization in syscall entry slow path
    
    Minor microoptimization in syscall entry slow path
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d61915da63e2ef03d9034e3b2ec7d8cca55d7584
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:00 2005 -0700

    [PATCH] x86_64: Fix interaction of single stepping with debuggers
    
    Ported from i386/Linus
    
    Fix another TF corner case.  Need to do the special TF handling for all
    signals to make debuggers happy
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b957591fee753101f289615abab1c54ff7b1d29d
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:00 2005 -0700

    [PATCH] x86_64: Dump stack and prevent recursion on early fault
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1290ec93e5da4a748ca4758a00b580283e06596
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:59 2005 -0700

    [PATCH] x86_64: Use a common function to find code segment bases
    
    To avoid some code duplication.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e502cdd63de666832b3b65017bb607c22d2868de
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:58 2005 -0700

    [PATCH] x86_64: Handle programs that set TF in user space using popf while single stepping
    
    Ported from i386/Linus
    
    Still won't handle other TF changing instructions like IRET or LAHF.
    
    Prefix handling must be double checked...
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be61bff789fe44bfb6d9282d8f7eccc860bdcfb6
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:57 2005 -0700

    [PATCH] x86_64: Some fixes for single step handling
    
    Ported from i386/Linus
    
    Be more careful with TF handling to fix some copy protection codes in Wine
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa85b9af5bdae1f8b84d80367324e4410c3f0674
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:56 2005 -0700

    [PATCH] x86_64: clean up ptrace single-stepping
    
    Ported from i386 (originally from Linus)
    
    clean up ptrace single-stepping, make PT_DTRACE exact.
    
      (This makes the naming of "DTRACE" purely historical, since
      on x86 it now means "single step in progress").
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6d9a5d81c6159ad651b5c6bb9223d14e33d8033
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:56 2005 -0700

    [PATCH] x86_64: Make IRDA devices are not really ISA devices not depend on CONFIG_ISA
    
    This allows to use them on x86-64
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e01441051dda3bb01c455b6e20bce6d00563d82
Author: Andi Kleen <ak@muc.de>
Date:   Sat Apr 16 15:24:55 2005 -0700

    [PATCH] x86_64: Use a VMA for the 32bit vsyscall
    
    Use a real VMA to map the 32bit vsyscall page
    
    This interacts better with Hugh's upcomming VMA walk optimization
    Also removes some ugly special cases.
    
    Code roughly modelled after the ppc64 vdso version from Ben Herrenschmidt.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35faa71484287fc150b8498cd5acae59ad17a356
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:24:54 2005 -0700

    [PATCH] x86_64 show_stack(): call touch_nmi_watchdog
    
    I had strange NMI watchdog timeouts running sysrq-T across 9600-baud serial.
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90660ec3c3e3f463a3cc7005213345b6c9ecfab9
Author: Jason Davis <jason@rightthere.net>
Date:   Sat Apr 16 15:24:53 2005 -0700

    [PATCH] x86_64 genapic update
    
    x86_64 genapic mechanism should be aware of machines that use physical APIC
    mode regardless of how many clusters/processors are detected.
    
    ACPI 3.0 FADT makes this determination very simple by providing a feature
    flag "force_apic_physical_destination_mode" to state whether the machine
    unconditionally uses physical APIC mode.
    
    Unisys' next generation x86_64 ES7000 will need to utilize this FADT
    feature flag in order to boot the x86_64 kernel in the correct APIC mode.
    This patch has been tested on both x86_64 commodity and ES7000 boxes.
    
    Signed-off-by: Jason Davis <jason.davis@unisys.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 107ce721abddbd876aa6203ac982821e405400e9
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:52 2005 -0700

    [PATCH] x86_64: disable interrupts during SMP bogomips checking
    
    Port over a i386 kludge from rusty to x86-64
    
    I don't think it is a full solution, but the upcomming smp bootup rewrite
    will solve it.
    
    This fixes BUGs at bootup on bigger x86-64 systems.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f18de453eb52dae49bc512ccfa638d9a0f153771
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:51 2005 -0700

    [PATCH] x86-64: Fix BUG()
    
    Use the correct file name in BUG()
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db4686812835a497d6f5de1e6cf6e8010a3fc0c7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:51 2005 -0700

    [PATCH] x86-64/i386: Revert cpuinfo siblings behaviour back to 2.6.10
    
    Only display physical id/siblings when there are siblings or dual core.
    
    In 2.6.11 I accidentially broke it and it was always displaying these
    fields But for compatibility to all these /proc parsers around it is better
    to do it in the old way again.
    
    Noticed by Suresh Siddha
    
    Cc: <Suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e09b8c0b2006f5e6b543f7458b684d6ebd99e271
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:50 2005 -0700

    [PATCH] x86-64: i386 vDSO: add PT_NOTE segment
    
    Use the i386 PT_NOTE segment in x86_64 as well.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c97db4a0a7d4d5be8c64a8d649a4425ee195b05c
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:48 2005 -0700

    [PATCH] i386 vDSO: add PT_NOTE segment
    
    This patch adds an ELF note to the vDSO giving the LINUX_VERSION_CODE
    value.  Having this in the vDSO lets the dynamic linker avoid the `uname'
    syscall it now always does at startup to ascertain the kernel ABI
    available.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecd02dddd1d5bfc2141cbd0e205a53fb9d849c9e
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:46 2005 -0700

    [PATCH] i386: Use loaddebug macro consistently
    
    This moves the macro loaddebug from asm-i386/suspend.h to
    asm-i386/processor.h, which is the place that makes sense for it to be
    defined, removes the extra copy of the same macro in
    arch/i386/kernel/process.c, and makes arch/i386/kernel/signal.c use the
    macro in place of its expansion.
    
    This is a purely cosmetic cleanup for the normal i386 kernel.  However, it
    is handy for Xen to be able to just redefine the loaddebug macro once
    instead of also changing the signal.c code.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0a70b57f909647d79e0cc30772a0664fbf9830a
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:45 2005 -0700

    [PATCH] i2c-i801: I2C patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the i2c-i801.c and Kconfig files for
    I2C support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 680d32357a0235fbadfba8e52dd40e80f55b6b05
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:45 2005 -0700

    [PATCH] ahci: AHCI mode SATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the ahci.c file for AHCI mode SATA
    support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: <linux-scsi@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c368ca4ef471aa8e82ee1de7086cb7ef5053cb95
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:44 2005 -0700

    [PATCH] ata_piix: IDE mode SATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the ata_piix.c and quirks.c file for
    IDE mode SATA support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4c8ea948aa21527d502e87227b2f1d951bc506d
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:43 2005 -0700

    [PATCH] intel8x0: AC'97 audio patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the intel8x0.c file for AC'97 audio
    support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d69332b875efb52ea5276d5638ce572fcd7375f2
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:42 2005 -0700

    [PATCH] piix: IDE PATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the piix.c file for IDE PATA support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e285f8091b4ae9972f812400dc8b4b40ee779010
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:41 2005 -0700

    [PATCH] irq and pci_ids: patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the irq.c and pci_ids.h files.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48bb35831bb0344abc9aecb39467fd006b2f5d7d
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:41 2005 -0700

    [PATCH] mips: remove #include <linux/audit.h> two times
    
    This patch removes #include <linux/audit.h>.  Because it includes it two
    times.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5dfa9c1b4f5d399a2800d8486ca188988900db87
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:40 2005 -0700

    [PATCH] mips: update VR41xx CPU-PCI bridge support
    
    This patch updates NEC VR4100 series CPU-PCI bridge support.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bfa437cf137fc653b286c110d849ff1ad2aee2b
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:39 2005 -0700

    [PATCH] mips: remove obsolete VR41xx RTC function from vr41xx.h
    
    This patch had removed obsolete VR41xx RTC function from vr41xx.h .  I
    forgot to put this change in "update VR41xx RTC support".
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e63f8f439de010b6227c0c9c6f56e2c44dbe5dae
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Sat Apr 16 15:24:38 2005 -0700

    [PATCH] ppc64: no prefetch for NULL pointers
    
    For prefetches of NULL (as when walking a short linked list), PPC64 will in
    some cases take a performance hit.  The hardware needs to do the TLB walk,
    and said walk will always miss, which means (up to) two L2 misses as
    penalty.  This seems to hurt overall performance, so for NULL pointers skip
    the prefetch alltogether.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89e09f5ebba4bcde9852e4be4af536d5b691f20a
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Apr 16 15:24:37 2005 -0700

    [PATCH] ppc64: remove -fno-omit-frame-pointer
    
    During some code inspection using gcc 4.0 I noticed a stack frame was being
    created for a number of functions that didnt require it.  For example:
    
    c0000000000df944 <._spin_unlock>:
    c0000000000df944:       fb e1 ff f0     std     r31,-16(r1)
    c0000000000df948:       f8 21 ff c1     stdu    r1,-64(r1)
    c0000000000df94c:       7c 3f 0b 78     mr      r31,r1
    c0000000000df950:       7c 20 04 ac     lwsync
    c0000000000df954:       e8 21 00 00     ld      r1,0(r1)
    c0000000000df958:       38 00 00 00     li      r0,0
    c0000000000df95c:       90 03 00 00     stw     r0,0(r3)
    c0000000000df960:       eb e1 ff f0     ld      r31,-16(r1)
    c0000000000df964:       4e 80 00 20     blr
    
    It turns out we are adding -fno-omit-frame-pointer to ppc64 which is
    causing the above behaviour.  Removing that flag results in much better
    code:
    
    c0000000000d5b30 <._spin_unlock>:
    c0000000000d5b30:       7c 20 04 ac     lwsync
    c0000000000d5b34:       38 00 00 00     li      r0,0
    c0000000000d5b38:       90 03 00 00     stw     r0,0(r3)
    c0000000000d5b3c:       4e 80 00 20     blr
    
    We dont require a frame pointer to debug on ppc64, so remove it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50bfb2e0329d45dd46fdc34f70cdaabe2d8a1dc7
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:37 2005 -0700

    [PATCH] ppc64: remove bogus f50 hack in prom.c
    
    The code that parses the OF device tree contains an old bogus hack which
    was killed a long time ago on ppc32, but survived in ppc64.  It was
    supposed to help with a problem on the f50 which is ...  a 32 bits machine
    :) Additionally, that hack is causing problems, so let's just get rid of
    it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 187335a4ec72c9bc7f3f168d6858a41fcfb63302
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:36 2005 -0700

    [PATCH] ppc64: Detect altivec via firmware on unknown CPUs
    
    This patch adds detection of the Altivec capability of the CPU via the
    firmware in addition to the cpu table.  This allows newer CPUs that aren't
    in the table to still have working altivec support in the kernel.
    
    It also fixes a problem where if a CPU isn't recognized as having altivec
    features, and takes an altivec unavailable exception due to userland
    issuing altivec instructions, the kernel would happily enable it and
    context switch the registers ...  but not all of them (it would basically
    forget vrsave).  With this patch, the kernel will refuse to enable altivec
    when the feature isn't detected for the CPU (SIGILL).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 547ee84cea37696d25c93306e909378a87db2f66
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:35 2005 -0700

    [PATCH] ppc64: Improve mapping of vDSO
    
    This patch reworks the way the ppc64 is mapped in user memory by the kernel
    to make it more robust against possible collisions with executable
    segments.  Instead of just whacking a VMA at 1Mb, I now use
    get_unmapped_area() with a hint, and I moved the mapping of the vDSO to
    after the mapping of the various ELF segments and of the interpreter, so
    that conflicts get caught properly (it still has to be before
    create_elf_tables since the later will fill the AT_SYSINFO_EHDR with the
    proper address).
    
    While I was at it, I also changed the 32 and 64 bits vDSO's to link at
    their "natural" address of 1Mb instead of 0.  This is the address where
    they are normally mapped in absence of conflict.  By doing so, it should be
    possible to properly prelink one it's been verified to work on glibc.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa89c5092eddcbcb425a1416f85906e3cc519793
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:34 2005 -0700

    [PATCH] ppc64: fix export of wrong symbol
    
    In arch/ppc64/kernel/ppc_ksyms.c, we are still exporting
    flush_icache_range, but that has been changed to be an inline in
    include/asm-ppc64/cacheflush.h which calls __flush_icache_range (defined in
    arch/ppc64/kernel/misc.S).
    
    This patch changes the export to __flush_icache_range, thus allowing
    modules to use the inline flush_icache_range.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfbacdc1a0b568dfa69fb2c1b39b608074001083
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:33 2005 -0700

    [PATCH] ppc64: Fix semantics of __ioremap
    
    This patch fixes ppc64 __ioremap() so that it stops adding implicitely
    _PAGE_GUARDED when the cache is not writeback, and instead, let the callers
    provide the flag they want here.  This allows things like framebuffers to
    explicitely request a non-cacheable and non-guarded mapping which is more
    efficient for that type of memory without side effects.  The patch also
    fixes all current callers to add _PAGE_GUARDED except btext, which is fine
    without it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bbd827750e630003896c96d0212962276ee5d91
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:32 2005 -0700

    [PATCH] ppc64: very basic desktop g5 sound support
    
    This patch hacks the current PowerMac Alsa driver to add some basic support
    of analog sound output to some desktop G5s.  It has severe limitations
    though:
    
     - Only 44100Khz 16 bits
     - Only work on G5 models using a TAS3004 analog code, that is early
       single CPU desktops and all dual CPU desktops at this date, but none
       of the more recent ones like iMac G5.
     - It does analog only, no digital/SPDIF support at all, no native
       AC3 support
    
    Better support would require a complete rewrite of the driver (which I am
    working on, but don't hold your breath), to properly support the diversity
    of apple sound HW setup, including dual codecs, several i2s busses, all the
    new codecs used in the new machines, proper clock switching with digital,
    etc etc etc...
    
    This patch applies on top of the other PowerMac sound patches I posted in
    the past couple of days (new powerbook support and sleep fixes).
    
    Note: This is a FAQ entry for PowerMac sound support with TI codecs: They
    have a feature called "DRC" which is automatically enabled for the internal
    speaker (at least when auto mute control is enabled) which will cause your
    sound to fade out to nothing after half a second of playback if you don't
    set a proper "DRC Range" in the mixer.  So if you have a problem like that,
    check alsamixer and raise your DRC Range to something reasonable.
    
    Note2: This patch will also add auto-mute of the speaker when line-out jack
    is used on some earlier desktop G4s (and on the G5) in addition to the
    headphone jack.  If that behaviour isn't what you want, just disable
    auto-muting and use the manual mute controls in alsamixer.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20af5f59797796d28b701f5d337e47c8a142eb2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:32 2005 -0700

    [PATCH] pmac: Improve sleep code of tumbler driver
    
    This patch improves the behaviour of the "tumbler/snapper" driver used on
    newer PowerMacs during sleep.  It properly set the HW mutes to shut down
    amplifiers and does an analog shutdown of the codec.  That might improve
    power consumption during sleep on a number of machines.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b75550e1bc6b3b2c80b628e68628fca015634071
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:31 2005 -0700

    [PATCH] pmac: sound support for latest laptops
    
    This patch hacks the current Alsa snd-powermac driver to add support for
    recent machine models with the tas3004 chip, that is basically new laptop
    models.  The Mac Mini is _NOT_ yet supported by this patch (soon soon ...).
     The G5s (iMac or Desktop) will need the rewritten sound driver on which
    I'm working on (I _might_ get a hack for analog only on some G5s on the
    current driver, but no promise).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16b817579fb61050f1abcc0e81089974328a9c27
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:30 2005 -0700

    [PATCH] ppc32: MV643XX ethernet is an option for Pegasos
    
    This patch allows Kconfig to build the MV643xx ethernet driver on Pegasos
    (CONFIG_PPC_MULTIPLATFORM) and adds what I think is a missing fix from
    Dale's batch, that is remove SA_INTERRUPT and add SA_SHIRQ in there as the
    interrupt is shared if I understand things correctly.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8f6098d5b0e9755c79d05e30b185a6e964fd3fa
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:29 2005 -0700

    [PATCH] ppc32: fix compilation error in arch/ppc/syslib/open_pic_defs.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/syslib/open_pic.c:36: error: static declaration of âOpenPICâ follows non-static declaration
    arch/ppc/syslib/open_pic_defs.h:175: error: previous declaration of âOpenPICâ was here
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd2c169e6a2d15dce3f526b1e2f97e843f8f5787
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:28 2005 -0700

    [PATCH] ppc32: fix compilation error in include/asm/prom.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/syslib/prom_init.c:120: error: static declaration of âprom_display_pathsâ follows non-static declaration
    include/asm/prom.h:17: error: previous declaration of âprom_display_pathsâ was here
    arch/ppc/syslib/prom_init.c:122: error: static declaration of âprom_num_displaysâ follows non-static declaration
    include/asm/prom.h:18: error: previous declaration of âprom_num_displaysâ was here
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51e6606491a0f5deaba52fb00c0374b9cb612f98
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:28 2005 -0700

    [PATCH] ppc32: fix compilation error in arch/ppc/kernel/time.c
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/kernel/time.c:92: error: static declaration of âtime_offsetâ
    follows non-static declaration
    include/linux/timex.h:236: error: previous declaration of âtime_offsetâ
    was here
    
    The following patch solves it (time_offset is declared in timer.c).
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ce3a719bc5772bc84ab6f50ef505da6992778ff
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:27 2005 -0700

    [PATCH] ppc32: fix compilation error in include/asm-m68k/setup.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    include/asm-m68k/setup.h:365: error: array type has incomplete element
    type
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b625a2b85221821b6831a387ee23ff7d93ffb7d1
Author: Leigh Brown <leigh@solinno.co.uk>
Date:   Sat Apr 16 15:24:26 2005 -0700

    [PATCH] ppc32: Make the Powerstack II Pro4000 boot again
    
    This patch restores the original behaviour of prep_pcibios_fixup() to only
    call prep_pib_init() on machines with an openpic.  This allows the
    Powerstack II Pro4000 to boot again.
    
    Signed-off-by: Leigh Brown <leigh@solinno.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef2f3253f061cbb86da25411a6e6e6a69a84b6ac
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Sat Apr 16 15:24:25 2005 -0700

    [PATCH] ppc32: Fix building 32bit kernel for 64bit machines
    
    When building a ppc32 MULTIPLATFORM kernel for a 64bit pmac, we try and
    build certain files or use certain functions that make no sense in that
    context.  This catches the last of these.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54095a6ec7b11a008c07c5016b025206a051f560
Author: Giovambattista Pulcini <gpulcini@swintel.it>
Date:   Sat Apr 16 15:24:24 2005 -0700

    [PATCH] ppc32: Fix a problem with NTP on !(chrp||gemini)
    
    The following problem was found by Giovambattista Pulcini
    <gpulcini@swintel.it>, who also provided a partial patch, and this has been
    verified by our time guru Gabriel Paubert <paubert@iram.es>.
    
    The problem is that in do_settimeofday() we always set time_state to
    TIME_ERROR and except on two platforms, never re-set it.  This meant that
    ntp_gettime() and ntp_adjtime() always returned TIME_ERROR, incorrectly.
    Based on Gabriel's analysis, time_state is used for leap-second processing,
    and ppc shouldn't be mucking with it.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd16230a05751af5a221a1f1c988bb519fd66679
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Sat Apr 16 15:24:23 2005 -0700

    [PATCH] ppc32: Fix mpc8xx watchdog
    
    The CONFIG_8xx_WDT option got broken in the generic hardirq update as ppc32
    had its own different request_irq that worked when other arches used
    setup_irq.  This is the trivial fix for the problem.
    
    From: Carsten Juttner <carjay@gmx.net>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f50b153b1966230e78034d5ab1641ca4bb5db56d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:22 2005 -0700

    [PATCH] ppc32: Support 36-bit physical addressing on e500
    
    To add support for 36-bit physical addressing on e500 the following changes
    have been made.  The changes are generalized to support any physical address
    size larger than 32-bits:
    
    * Allow FSL Book-E parts to use a 64-bit PTE, it is 44-bits of pfn, 20-bits
      of flags.
    
    * Introduced new CPU feature (CPU_FTR_BIG_PHYS) to allow runtime handling of
      updating hardware register (SPRN_MAS7) which holds the upper 32-bits of
      physical address that will be written into the TLB.  This is useful since
      not all e500 cores support 36-bit physical addressing.
    
    * Currently have a pass through implementation of fixup_bigphys_addr
    
    * Moved _PAGE_DIRTY in the 64-bit PTE case to free room for three additional
      storage attributes that may exist in future FSL Book-E cores and updated
      fault handler to copy these bits into the hardware TLBs.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b464fce5edc08a825907e9d48a2d2f1af0393fef
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:21 2005 -0700

    [PATCH] ppc32: Allow adjust of pfn offset in pte
    
    Allow the pfn to be offset by more than just PAGE_SHIFT in the pte.  Today,
    PAGE_SHIFT tends to allow us to have 12-bits of flags in the pte.  In the
    future if we have a larger pte we can allocate more bits for flags by
    offsetting the pfn even further.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a85f6d4aca822acdb49d27c44519cd6514b06a1d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:21 2005 -0700

    [PATCH] ppc32: make usage of CONFIG_PTE_64BIT & CONFIG_PHYS_64BIT consistent
    
    CONFIG_PTE_64BIT & CONFIG_PHYS_64BIT are not currently consistently used in
    the code base.  Fixed up the usage such that CONFIG_PTE_64BIT is used when we
    have a 64-bit PTE regardless of physical address width.  CONFIG_PHYS_64BIT is
    used if the physical address width is larger than 32-bits, regardless of PTE
    size.
    
    These changes required a few sub-arch specific ifdef's to be fixed and the
    introduction of a physical address format string.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a1e335085ead05da08f791340f58b493126894d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:20 2005 -0700

    [PATCH] ppc32: Fix pte_update for 64-bit PTEs
    
    While the existing pte_update code handled atomically modifying a 64-bit PTE,
    it did not return all 64-bits of the PTE before it was modified.  This causes
    problems in some places that expect the full PTE to be returned, like
    ptep_get_and_clear().
    
    Created a new pte_update function that is conditional on CONFIG_PTE_64BIT.  It
    atomically reads the low PTE word which all PTE flags are required to be in
    and returns a premodified full 64-bit PTE.
    
    Since we now have an explicit 64-bit PTE version of pte_update we can also
    remove the hack that existed to get the low PTE word regardless of size.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c541b4406a68e74d94ddb667c69d9e03bce8681
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:19 2005 -0700

    [PATCH] ppc32: Fix AGP and sleep again
    
    My previous patch that added sleep support for uninorth-agp and some AGP
    "off" stuff in radeonfb and aty128fb is breaking some configs.  More
    specifically, it has problems with rage128 setups since the DRI code for
    these in X doesn't properly re-enable AGP on wakeup or console switch
    (unlike the radeon DRM).
    
    This patch fixes the problem for pmac once for all by using a different
    approach.  The AGP driver "registers" special suspend/resume callbacks with
    some arch code that the fbdev's can later on call to suspend and resume
    AGP, making sure it's resumed back in the same state it was when suspended.
     This is platform specific for now.  It would be too complicated to try to
    do a generic implementation of this at this point due to all sort of weird
    things going on with AGP on other architectures.  We'll re-work that whole
    problem cleanly once we finally merge fbdev's and DRI.
    
    In the meantime, please apply this patch which brings back some r128 based
    laptops into working condition as far as system sleep is concerned.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a648b9ec09f32606fe0f27fb9d095311cf968ca
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:18 2005 -0700

    [PATCH] ppc32: Fix cpufreq problems
    
    This patch updates the PowerMac cpufreq driver.  It depends on the addition
    of the suspend() method (my previous patch) and on the new flag I defined
    to silence some warnings that are normal for us.
    
    It fixes various issues related to cpufreq on pmac, including some crashes
    on some models when sleeping the machine while in low speed, proper voltage
    control on some newer machines, and adds voltage control on 750FX based G3
    laptops.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c26e03b2db4b66d79bfb774628c1fc9b458b943
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:17 2005 -0700

    [PATCH] ppc32: fix single-stepping of emulated instructions
    
    On ppc, we emulate instructions that cause alignment exceptions.  If we are
    single-stepping an instruction and it causes an alignment exception, we
    will currently do the next instruction as well before taking the
    single-step exception.  This patch fixes that, so we take the single-step
    exception after emulating the instruction.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e378cc16b0d3c1610857c4444345907020e03ece
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:17 2005 -0700

    [PATCH] ppc32: oops on kernel altivec assist exceptions
    
    If we should happen to get an altivec assist exception while executing in
    the kernel, we will currently try to handle it and fail, and end up oopsing
    with (apparently) a segfault.  (An altivec assist exception occurs for
    floating-point altivec instructions with denormalized inputs or outputs if
    the altivec unit is in java mode.)
    
    This patch checks explicitly if we are in user mode and prints a useful
    message if not.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6460b4cceba0181308042c8d8794eb679bfa22e5
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:16 2005 -0700

    [PATCH] ppc32: improve timebase sync for SMP
    
    Currently the procedure in the ppc32 kernel that synchronizes the timebase
    registers across an SMP powermac system does so by setting both timebases
    to zero.  That is OK at boot but causes problems if done later.  So that we
    can do hotplug CPU on these machines, this patch changes the code so it
    reads the timebase from one CPU and transfers the value to the other CPU.
    (Hotplug CPU is needed for sleep (aka suspend to RAM) to work.)
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35b535d9cc8dce79c3b72f47c4417c3159d7a8c9
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Apr 16 15:24:15 2005 -0700

    [PATCH] ppc32: ppc4xx_pic - add acknowledge when enabling level-sensitive IRQ
    
    This patch adds interrupt acknowledge to the PPC4xx PIC enable_irq
    implementation for level-sensitive IRQ sources.  This helps in cases when
    enable/disable_irq is used in interrupt handlers for hardware, which
    requires IRQ acknowledge to be issued from non-interrupt context (e.g.
    when actual ACK in device needs an I2C transaction).  For such strange
    hardware, interrupt handler disables IRQ and defers actual ACK to some
    other context.  When this happens, IRQ is enabled again.  For
    level-sensitive sources we get spurious triggering right after IRQ is
    enabled.  This patch fixes this.
    
    Suggested by Tolunay Orkun <listmember@orkun.us>.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16acbc624e2b7b750570cb672341d05a816051f4
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:14 2005 -0700

    [PATCH] ppc32: fix bogosity in process-freezing code
    
    The code that went into arch/ppc/kernel/signal.c recently to handle process
    freezing seems to contain a dubious assumption: that a process that calls
    do_signal when PF_FREEZE is set will have entered the kernel because of a
    system call.  This patch removes that assumption.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c9b79429c83a404a04908be65baa9d97836bbb6
Author: James Morris <jmorris@redhat.com>
Date:   Sat Apr 16 15:24:13 2005 -0700

    [PATCH] SELinux: add support for NETLINK_KOBJECT_UEVENT
    
    This patch adds SELinux support for the KOBJECT_UEVENT Netlink family, so
    that SELinux can apply finer grained controls to it.  For example, security
    policy for hald can be locked down to the KOBJECT_UEVENT Netlink family
    only.  Currently, this family simply defaults to the default Netlink socket
    class.
    
    Note that some new permission definitions are added to sync with changes in
    the core userspace policy package, which auto-generates header files.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e5c6bc0a600c49e5922591ad41ff41987f54eb4
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Sat Apr 16 15:24:11 2005 -0700

    [PATCH] irda_device() oops fix
    
    Acked-by: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6775cab98b89b2caa10dce4b07e2c81999e45517
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Apr 16 15:24:10 2005 -0700

    [PATCH] Fix dst_destroy() race
    
    When we are not the real parent of the dst (e.g., when we're xfrm_dst and
    the child is an rtentry), it may already be on the GC list.
    
    In fact the current code is buggy to, we need to check dst->flags before
    the dec as dst may no longer be valid afterwards.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a27805127aee1e7e62854bcf9ca8c355c23b73e
Author: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
Date:   Sat Apr 16 15:24:09 2005 -0700

    [PATCH] net: don't call kmem_cache_create with a spinlock held
    
    This fixes the warning reported by Marcel Holtmann (Thanks!).
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f3786dc8b1d6229dbe76e364323f0d787e7a0ea
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Apr 16 15:24:09 2005 -0700

    [PATCH] Fix linux/atalk.h header
    
    This recently got changed to include a lot of kernel internal stuff in the
    non-__KERNEL__ area of the header, which isn't so kosher and breaks libc
    builds.
    
    The fix is pretty simple.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c4c402d6caba5d938ffbbb49961659ecac709d4
Author: Martin Hicks <mort@sgi.com>
Date:   Sat Apr 16 15:24:08 2005 -0700

    [PATCH] meminfo: add Cached underflow check
    
    Working on some code lately I've been getting huge values for "Cached".
    The cause is that get_page_cache_size() is an approximate value, and for a
    sufficiently small returned value of get_page_cache_size() the value
    underflows.
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76c3073a888ae7f4790a146784bb5c34fc24b9d2
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:24:07 2005 -0700

    [PATCH] end_buffer_write_sync() avoid pointless assignments
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 323aca6c0bda611d0f31b3234d9fe291d31a9207
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:24:06 2005 -0700

    [PATCH] vmscan: pageout(): remove unneeded test
    
    )
    
    
    
    We only call pageout() for dirty pages, so this test is redundant.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79befd0c08c4766f8fa27e37ac2a70e40840a56a
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Sat Apr 16 15:24:05 2005 -0700

    [PATCH] oom-killer disable for iscsi/lvm2/multipath userland critical sections
    
    iscsi/lvm2/multipath needs guaranteed protection from the oom-killer, so
    make the magical value of -17 in /proc/<pid>/oom_adj defeat the oom-killer
    altogether.
    
    (akpm: we still need to document oom_adj and friends in
    Documentation/filesystems/proc.txt!)
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d345734267dbec642f4e34a9d392d2fd85b5fa9b
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Sat Apr 16 15:24:05 2005 -0700

    [PATCH] filemap_getpage can block when MAP_NONBLOCK specified
    
    We will return NULL from filemap_getpage when a page does not exist in the
    page cache and MAP_NONBLOCK is specified, here:
    
    	page = find_get_page(mapping, pgoff);
    	if (!page) {
    		if (nonblock)
    			return NULL;
    		goto no_cached_page;
    	}
    
    But we forget to do so when the page in the cache is not uptodate.  The
    following could result in a blocking call:
    
    	/*
    	 * Ok, found a page in the page cache, now we need to check
    	 * that it's up-to-date.
    	 */
    	if (!PageUptodate(page))
    		goto page_not_uptodate;
    
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41aac24f8fb5a21ff3d0f6f56f85fad3cf0e88a9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 16 15:24:04 2005 -0700

    [PATCH] r128_state.c: break missing in switch statement
    
    drm: fix r128_state.c switch statements..  in drivers/char/drm/r128_state.c
    (linux-2.6.12-rc2), some breaks are missing in the switch statement.  See
    trivial fix below.
    
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 388c69789a2a2e50965e805e3e641418082b352c
Author: James Morris <jmorris@redhat.com>
Date:   Sat Apr 16 15:24:03 2005 -0700

    [PATCH] SELinux: fix bug in Netlink message type detection
    
    This patch fixes a bug in the SELinux Netlink message type detection code,
    where the wrong constant was being used in a case statement.  The incorrect
    value is not valid for this class of object so it would not have been
    reached, and fallen through to a default handler for all Netlink messages.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1db7fc75a410d9a15cbc58a9b073a688669c6d42
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:24:02 2005 -0700

    [PATCH] fix Bug 4395: modprobe bttv freezes the computer
    
    )
    
    
    From: Johannes Stezenbach <js@linuxtv.org>
    
    Fix http://bugme.osdl.org/show_bug.cgi?id=4395.
    
    Patch by Manu Abraham and Gerd Knorr:
    
    Remove redundant bttv_reset_audio() which caused the computer to freeze
    with some bt8xx based DVB cards when loading the bttv driver.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51410d3c53d85da0f24277f9580cbec1260ffc8f
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Apr 16 15:24:01 2005 -0700

    [PATCH] Fix get_compat_sigevent()
    
    I have no idea how a bug like this lasted so long.  Anyways, obvious
    memset()'ing of incorrect pointer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5df240826c90afdc7956f55a004ea6b702df9203
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sat Apr 16 15:24:01 2005 -0700

    [PATCH] fix crash in entry.S restore_all
    
    Fix the access-above-bottom-of-stack crash.
    
    1. Allows to preserve the valueable optimization
    
    2. Works for NMIs
    
    3.  Doesn't care whether or not there are more of the like instances
       where the stack is left empty.
    
    4. Seems to work for me without the crashes:)
    
    (akpm: this is still under discussion, although I _think_ it's OK.  You might
    want to hold off)
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e493073d8d053429fbb42331b57a95dd0d61cadb
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:24:00 2005 -0700

    [PATCH] Fix acl Oops
    
    )
    
    
    From: Andreas Gruenbacher <agruen@suse.de>
    
    ext[23]_get_acl will return an error when reading the attribute fails or
    out-of-memory occurs.  Catch this case.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81ddef77bb774e771db8588b937665cd38f40cee
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Apr 16 15:23:59 2005 -0700

    [PATCH] re-export cancel_rearming_delayed_workqueue
    
    This was unexported by Arjan because we have no current users.
    
    However, during a conversion from tasklets to workqueues of the parisc led
    functions, we ran across a case where this was needed.  In particular, the
    open coded equivalent of cancel_rearming_delayed_workqueue was implemented
    incorrectly, which is, I think, all the evidence necessary that this is a
    useful API.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ffb7146f0aa9c0070cda3d8701b0a89e34913d1
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sat Apr 16 15:23:58 2005 -0700

    [PATCH] crypto: call zlib end functions on deflate exit path
    
    In the deflate_[compress|uncompress|pcompress] functions we call the
    zlib_[in|de]flateReset function at the beginning.  This is OK.  But when we
    unload the deflate module we don't call zlib_[in|de]flateEnd to free all
    the zlib internal data.  It looks like a bug for me.  Please, consider the
    attached patch.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d42ce812b8a32adddeee3a692005f82f95ff15a3
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:23:57 2005 -0700

    [PATCH] arm: add comment about max_low_pfn/max_pfn
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    Oddly, max_low_pfn/max_pfn end up being the number of pages in the system,
    rather than the maximum PFN on ARM.  This doesn't seem to cause any problems,
    so just add a note about it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a228aaa879c119c9fb9b9d7e062ac13cb1a9079
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:23:57 2005 -0700

    [PATCH] arm: add comment about dma_supported()
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    The ARM dma_supported() is rather basic, and I don't think it takes into
    account everything that it should do (eg, whether the mask agrees with what
    we'd return for GFP_DMA allocations).  Note this.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7aa52f5128b06d1df9b2ee65c06d401af27da0a4
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:23:56 2005 -0700

    [PATCH] arm: fix help text for ixdp465
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    For some reason, this help text was missed when the file was last audited
    by the documentation referencing folk.  Fix this incorrect documentation
    reference.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d137c24e9f433e37ffd10b3d5f418157589a8d2
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 16 15:23:55 2005 -0700

    [PATCH] arm: fix SIGBUS handling
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    ARM wasn't raising a SIGBUS with a siginfo structure.  Fix
    __do_user_fault() to allow us to use it for SIGBUS conditions, and arrange
    for the sigbus path to use this.
    
    We need to prevent the siginfo code being called if we do not have a user
    space context to call it, so consolidate the "user_mode()" tests.
    
    Thanks to Ian Campbell who spotted this oversight.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit baaa2c512dc1c47e3afeb9d558c5323c9240bd21
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:23:54 2005 -0700

    [PATCH] Avoid deadlock in sync_page_io by using GFP_NOIO
    
    ..as sync_page_io can be called on the write-out path.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d38eadb7a97f265f7b3a9e8a30df358c3a546c8
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Sat Apr 16 15:23:53 2005 -0700

    [PATCH] mmtimer build fix
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
