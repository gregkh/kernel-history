commit 79d434c124a19852558e23a30d219c83c9a05eb2
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Thu Jan 8 06:57:32 2004 -0800

    Linux 2.6.1

commit 89257cbd1dc1ec853d535ea56db0d82a13da40c5
Merge: f7a1132... 8cf2a48...
Author: Nathan Scott <nathans@lips.borg.umn.edu>
Date:   Thu Jan 8 04:19:08 2004 -0600

    Merge bk://linux.bkbits.net/linux-2.5
    into lips.borg.umn.edu:/export/music/bkroot/xfs-linux-2.6

commit f7a1132cffbdf99ef1bd270e9b77f928697780a3
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 19:46:52 2004 -0800

    Fix subtle fork() race that Ingo noticed.
    
    We must not mark the process TASK_STOPPED early, because
    that might allow a signal to wake it up before we actually
    got to the "wake_up_forked_process()" state. Total confusion
    would happen.
    
    Make wake_up_forked_process() verify the new world order.

commit f6fd6a01cb2eabd8110c15307dcb9fe5fce019e4
Merge: 18041d8... e33e876...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 15:03:39 2004 -0800

    Merge bk://linux-dj.bkbits.net/agpgart
    into home.osdl.org:/home/torvalds/v2.5/linux

commit e33e8761ca518f47e8fb575769f043a1b5567ef7
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jan 8 13:25:36 2004 +0000

    [AGPGART] Duh, is_r200 is a function, not a variable.
    Spotted by Andreas Henriksson <andreas@scream.fjortis.info>

commit 3115b7080c9f03e28c82af7eae0bd8f9a278fc77
Author: Dave Jones <davej@redhat.com>
Date:   Wed Jan 7 14:53:58 2004 +0000

    [AGPGART] Add support for Radeon IGP345M to ATI GART driver.
    Also consolidate a bunch of convoluted if's into a single
    "is this an r200 or r300" function.

commit 18041d8016263eae093de2b479ccd9e113492eec
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 06:21:44 2004 -0800

    Linux 2.6.1-rc3

commit 7731282b01ca4722bdaad212cdeb38a070364fe1
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jan 7 05:56:59 2004 -0800

    [PATCH] ppc64: Add missing section definition
    
    From: Anton Blanchard <anton@samba.org>
    
    For a laugh we moved the BSS and our world exploded. Turns out we zero
    from __bss_start to _end. Add __bss_stop to our section definitions so
    we can use it instead.

commit 81d2e766100b6bc311be63a961422956aecf6ce4
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jan 7 05:56:50 2004 -0800

    [PATCH] /proc/ppc64 and /proc/iSeries fixes from Linas Vepstas
    
    From: Anton Blanchard <anton@samba.org>
    
    Linas Vepstas has audited the ppc64 proc code and found a number of issues.

commit 1a6100caae4257b3992e1e747340bf49de1e8c38
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 05:47:04 2004 -0800

    Don't relocate non-allocated regions in modules.
    
    This fixes loading of modules compiled with debugging on
    some platforms.
    
    From Rusty.

commit e32c91c0019ec6e2a706de712ed16b9d96f4e203
Merge: b957561... d5991ce...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 02:31:18 2004 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit b9575611ae5c8f422367ee0f46f1547ccf650c2c
Merge: 957ac61... 03eec28...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 02:29:12 2004 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 03eec28be7a2088aa45e55105b142e9f4c7813d1
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 02:26:41 2004 -0800

    Fix silly mremap test.
    
    Get off the drugs, Linus.

commit a94273a1dbb8fa311afd2e341da0b5842e41af10
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Jan 7 02:00:08 2004 -0800

    Fix ttpci bogus use of floating point by casting the
    constant expression properly.

commit d5991ced12962a31a7f4354a8e23fd13823a8639
Author: Ville Nuorvala <vnourval@tcs.hut.fi>
Date:   Tue Jan 6 20:17:51 2004 -0800

    [IPV6]: Autoconfig link-local address on ip6-ip6 tunnel device.

commit 9e91e1c7f50f884876ceef1a45c95acd1c878756
Author: Andi Kleen <ak@suse.de>
Date:   Tue Jan 6 20:17:13 2004 -0800

    [COMPAT]: Handle SO_TIMESTAMP cmsgs.

commit 957ac61653451a792f0cf2ec97642b8423e60035
Author: Matthew Wilcox <willy@debian.org>
Date:   Tue Jan 6 20:10:46 2004 -0800

    [SPARC32]: Use drivers/block/Kconfig

commit 439f31ed8d9684453d2a99d4a7275ed5c2e4194a
Merge: 3434a16... b42edee...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Jan 6 19:19:15 2004 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.6
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit f74381cd9ba7c80d54920bfb3e67021c2016a4da
Merge: 3434a16... 31d2270...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Jan 6 19:13:20 2004 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.6
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.6

commit 3434a16eeb959c35762b82997847d9af816102fa
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Jan 6 18:35:15 2004 -0800

    [PATCH] don't clear i_sb
    
    From: Christoph Hellwig <hch@lst.de>
    
    JFS currently clears i_sb in some error pathes which can make the
    core kernel OOPS because it may never be NULL.  Noticed because some
    IBM people try to "fix" the core kernel for it now..

commit c1e4ed23d2d7d7c142852000af00ba561e11039a
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 6 15:52:48 2004 -0800

    [PATCH] ia32 sched_clock() deadlock fix
    
    From: Ingo Molnar <mingo@elte.hu>,
    
    Voyager is getting odd deadlocks due to the taking of xtime_lock() in
    sched_clock()->get_jiffies_64().
    
    I had this patch queued up to fix a different deadlock, which occurs when we
    relax the requirement that TSC's be synchronised across CPUs.  But it will
    fix James' deadlock too.

commit c358e2192145ed6ca5e6ffca542ea68d8068767d
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 6 15:52:39 2004 -0800

    [PATCH] dvb: firmware fixes
    
    From: Michael Hunold <hunold@convergence.de>
    
    - move around sp887x firmware file entry to be close to sp887x selection
    
    - fix a bunch of filenames to point to /usr/lib/hotplug/firmware/ rather
      then /etc/dvb
    
    - fix the av7110 firmware config entry for "make allyesconfig"

commit 65916a24d6664768e2fe05a5680e6d725e8d4261
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 6 15:52:30 2004 -0800

    [PATCH] JFS fix for NFS on little-endian systems
    
    From: Dave Kleikamp <shaggy@austin.ibm.com>
    
    After Jose debugged the problem down to the routine jfs_get_parent, we
    were able to find the problem.  I believe it only affects users of
    NFS-exported JFS file systems on big-endian hardware.
    
    The problem was a missing le32_to_cpu macro.  The patch also fixes a
    return code to be more consistent other implementations of get_parent.

commit b7e72582299522b431332a555546e4297296e867
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 6 15:52:21 2004 -0800

    [PATCH] fix sysfs oops
    
    From: Greg KH <greg@kroah.com>
    
    This fixes an oops when a kobject is unregistered before it's child is.
    The usb-serial devices show this bug very easily (yank out a device
    while its port is opened...)
    
    Patch was originally written by Mike Gorse <mgorse@mgorse.dhs.org>

commit dc8d3e6090b5f715d59dc478f08a6aa706eee774
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 6 15:52:12 2004 -0800

    [PATCH] MSI build fixes
    
    Add missing NR_VECTORS definition to visws and pc9800.  Also, make MSI
    support dependent on CONFIG_X86_IO_APIC, as it won't build without IOAPIC
    support.

commit 0e00c9efc00ceda5eb83c7799a49d9a22e6c3ed4
Merge: 3115b70... 0c8ad9d...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Jan 6 15:44:53 2004 -0800

    Merge bk://linux-dj.bkbits.net/agpgart
    into home.osdl.org:/home/torvalds/v2.5/linux

commit b42edee99e13e94ad82445ef70dccf0b7e7b68ff
Author: Mitsuru Kanda <mk@linux-ipv6.org>
Date:   Tue Jan 6 06:26:30 2004 -0800

    Fix my PGP fingerprint in the CREDITS file.

commit 5cc3937bea76b5d2fe032c4290680aa0d1baf6bf
Author: Martin Devera <devik@cdi.cz>
Date:   Tue Jan 6 06:19:46 2004 -0800

    [NET]: Make sure that class selected by priority is a leaf in HTB scheduler.

commit cd4eb2e9407321888234cceabd957d3168c724d9
Author: James Morris <jmorris@redhat.com>
Date:   Tue Jan 6 05:42:12 2004 -0800

    [NETFILTER]: Add SELINUX priority values for ipv4/ipv6, approved by Harald Welte.

commit 239f727a99fb0569bdcee5cf0fb9716cd2d457dc
Merge: 0c8ad9d... 53b78d2...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Jan 6 05:09:37 2004 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.6
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit 31d227033b15ce4a7ac0451d11e737b74d7dd40a
Merge: 0c8ad9d... 6952db3...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Jan 6 05:05:40 2004 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.6
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.6

commit 0c8ad9d059408e60916b8c974e1f20655c2b1810
Author: Adam Belay <ambx1@neo.rr.com>
Date:   Tue Jan 6 04:08:21 2004 -0800

    [PATCH] Fix PnP BIOS call
    
    The recent escd fix I have made corrects a thinko in the PnPBIOS code and it
    turns out that faults from calling /proc/pnp/bus/escd were probably not caused
    by BIOS bugs.

commit b3b8b64c477127787a8c81b7a587a6c322e1dc95
Merge: 67215df... 45db906...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Jan 6 03:47:08 2004 -0800

    Merge home.osdl.org:/home/torvalds/v2.5/kconfig
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 45db90633b0b9c9f8a5df9899187fbfc2e9deb44
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jan 6 03:46:12 2004 -0800

    [PATCH] qconf fix
    
    Sometimes a menuconfig item is shown twice, so hide the other item.

commit 550fcfc195905fd3a99fa249757c678ac734acc7
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jan 6 03:46:03 2004 -0800

    [PATCH] gconf startup fixes
    
    Let gconf find it's glade file, even it's started with an absolute path
    and check srcdir so it also works if it's compiled outside of the tree.

commit cf2c4a429483a68475bbcce9a9364eb883aaf5b7
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jan 6 03:45:55 2004 -0800

    [PATCH] gconf compile warning fixes
    
    gconf compile warning fixes (by Buddy Lucas <b.lucas@ohra.nl>)

commit 46bd8fd806b94c01bdcf655d84ce6127b4aaf9ea
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jan 6 03:45:46 2004 -0800

    [PATCH] fix gconf segfault problem
    
    fix gconf segfault problem (by Romain Lievin <roms@tilp.info>)

commit 839e4302dd100cf332be321e4ad71a612981c87a
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jan 6 03:45:38 2004 -0800

    [PATCH] generate an error if writing of kernel config failed
    
    generate an error if writing of kernel config failed

commit 8cf2a48198f8d95e51ab6f679f1e51123e10d278
Merge: 67215df... 260d14a...
Author: Nathan Scott <nathans@lips.borg.umn.edu>
Date:   Tue Jan 6 03:35:22 2004 -0600

    Merge bk://linux.bkbits.net/linux-2.5
    into lips.borg.umn.edu:/export/music/bkroot/xfs-linux-2.6

commit 260d14a7f1c36f01e3d5d54e52926574770510b1
Merge: 2e8100d... e1bf9b9...
Author: Nathan Scott <nathans@sgi.com>
Date:   Wed Jan 7 14:38:37 2004 +1100

    Merge nathans@xfs.org:/export/hose/bkroot/xfs-linux-2.6
    into sgi.com:/source2/xfs-linux-2.6

commit 2e8100dd0d1194c72da872d123476415cdf553d8
Merge: f73e9f0... 572544d...
Author: Nathan Scott <nathans@sgi.com>
Date:   Wed Jan 7 14:08:04 2004 +1100

    Merge sgi.com:/source2/linux-2.6 into sgi.com:/source2/xfs-linux-2.6

commit 6fe1cef693f6bc85435c249b68a2a367795f3148
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:11:11 2004 +0000

    [AGPGART] printk level changes for amd64

commit e1bf9b9c891a938b1a7875715f218d923dcf7f4d
Merge: f73e9f0... a0fb043...
Author: Nathan Scott <nathans@lips.borg.umn.edu>
Date:   Mon Jan 5 11:26:01 2004 -0600

    Merge bk://linux.bkbits.net/linux-2.5
    into lips.borg.umn.edu:/export/music/bkroot/xfs-linux-2.6

commit 67215df9a8abf1e090b567fd2f4b550d1079ac3c
Author: Bartlomiej Zolnierkiewicz <b.zolnierkiewicz@elka.pw.edu.pl>
Date:   Mon Jan 5 05:39:29 2004 -0800

    [PATCH] fix oopses on rmmod in some OSS drivers
    
    Fix for oops on rmmod caused by *_remove() function marked as __devinit
    (and thus discarded after module initialization - if CONFIG_MODULES=y
    and CONFIG_HOTPLUG is not set).
    This patch changes __devinit to __devexit and adds __devexit_p() where
    pointer to such function is used.
    
    The only exception is au1000, where au1000_remove() is called from
    cleanup_au1000() function - __devinit is jest removed there.

commit 00c45815e8572e763089b7f0faa9f3ecf625038e
Author: Bartlomiej Zolnierkiewicz <b.zolnierkiewicz@elka.pw.edu.pl>
Date:   Mon Jan 5 05:39:20 2004 -0800

    [PATCH] remove dead and broken DISK_RECOVERY_TIME support
    
    It was also removed in 2.4.23.

commit 26e36b9c7aa987819d23e50f0558570ba23abf63
Author: Bartlomiej Zolnierkiewicz <b.zolnierkiewicz@elka.pw.edu.pl>
Date:   Mon Jan 5 05:39:11 2004 -0800

    [PATCH] ide-tape.c: stop abusing rq->flags
    
    Use rq->cmd[0] instead of rq->flags for storing special request flags.
    
    Per Jens' suggestion.  Tested by Stef van der Made <svdmade@planet.nl>.

commit 662247b383f21d394bc7b1ed8f4a94de64c0ff16
Author: Bartlomiej Zolnierkiewicz <b.zolnierkiewicz@elka.pw.edu.pl>
Date:   Mon Jan 5 05:39:01 2004 -0800

    [PATCH] cmd640.c: fix PCI type1 access
    
    Revert wrong changes introduced in 2.4.21.
    
    From: Stefan Talpalaru <stefantalpalaru@yahoo.com>,
          Ingo Kilian <ikilian@web.de>.

commit 6c37521f14c97485bcc225a10ce585f1e856d062
Author: Andi Kleen <ak@muc.de>
Date:   Mon Jan 5 05:38:52 2004 -0800

    [PATCH] Fix interrupt routing problem on x86-64
    
    The MSI port to x86-64 added an interrupt routing bug that makes the
    kernel not boot anymore on some machines.
    
    Fix that.

commit 53b78d22d516fa23f50f250cfaf6057f1824c6bc
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Jan 5 04:33:31 2004 -0800

    [NET]: Un-deprecate skb_linearize(), we can re-deprecate in 2.7.x

commit 6952db3d03d803b89fabf9d562684ef262675be9
Author: Keith M. Wesolowski <wesolows@foobazco.org>
Date:   Mon Jan 5 04:27:02 2004 -0800

    [SPARC32]: Fix BUG on swapout on srmmu systems.
    
    This fixes BUG-on-swapout for srmmu-based systems.  The problem is
    caused by kmap_atomic_to_page being fed an aliased (pagetable) address
    and returning bogons.  This also adjusts the pkmap and fixmap base
    addresses so they cannot overlap.

commit ef06b19295898ec6dea4e82effd6e09e31fcb4ac
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Mon Jan 5 04:03:28 2004 -0800

    [IRDA]: Fix locking in the ircomm-shutdown path.

commit cdd56702d6800194618b7de0545157ed8ca0b229
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Jan 5 03:54:41 2004 -0800

    [NET]: In dev_kfree_skb_any() use dev_kfree_skb_irq() if irqs_disabled().
    
    With help from Jeff Garzik and others.

commit 0754d23ed378b5c9fe52f522cb91784f66664102
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Jan 5 03:41:17 2004 -0800

    Linux 2.6.1-rc2

commit a5869527e64a323165a166d2965bfa8b4080f5e2
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Jan 4 22:33:55 2004 -0800

    [SPARC64]: Export sys_close for solaris emulation.

commit 5791f19c7c2e48fadd4bedbe44fd644394b3974d
Author: Matthew Wilcox <willy@debian.org>
Date:   Sun Jan 4 22:11:25 2004 -0800

    [SPARC64]: Use drivers/block/Kconfig.

commit 020f3fbba3f2e65b9a44406c2e08089e3181f490
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Jan 4 22:10:25 2004 -0800

    [SPARC]: Add placeholder asm-{sparc,sparc64}/setup.h so MTD builds.

commit 37257fe8b729127599bf41deb9c65c18e626fd79
Author: Ciaran McCreesh <ciaranm@gentoo.org>
Date:   Sun Jan 4 21:00:05 2004 -0800

    [SPARC64]: Fix CONFIG_DRM_FFB=y build.

commit ead7297a236119ce4d36bbc599036ca4602dd148
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jan 4 20:58:57 2004 -0800

    [NET]: Fix multiple eth0 mixed PCI/ISA init.
    
    This patch for 2.6 fixes the problem found by Zoltan Farkas
    with mixed PCI/ISA and a non-modular config.  The problem is the old_netdev
    ISA probing isn't skipping eth0 which already got assigned by the PCI
    initialization.

commit 5d61282c5a7d9c8cd4cb8751643adcbfe5b71674
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jan 4 20:57:39 2004 -0800

    [DECNET]: Better way to prevent decnet module unload.

commit f205f6ffbe5aa223f8d1bd801aa5974aeb290d28
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jan 4 20:56:58 2004 -0800

    [AF_PACKET]: Convert to seq_file.

commit ba628267e7c7b3411ed7e01fd89f3bcd0b548f3c
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Jan 4 19:27:49 2004 -0800

    [SPARC64]: Fix sun_uflash MTD driver build.

commit 5d65805989856b0f3ddd4e512e0dad1cfa0a330d
Author: David Dillow <dave@thedillows.org>
Date:   Sun Jan 4 19:23:47 2004 -0800

    [SUNZILOG]: Register the correct number of ports, ignore keyb/mouse lines.

commit 233c458eccc2d0eb42c55e17fa624ff35cdff6ad
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Jan 4 19:08:54 2004 -0800

    [SPARC]: Add missing MODULE_LICENSE tags to various Sparc driver.

commit 259cf59f8d249c126d42e55cc12c51eaf0cdf07e
Merge: 48818fe... b8645a8...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Jan 4 19:03:45 2004 -0800

    Merge centrino speedstep duplicate patches

commit b8645a8e13908d9260b52825d259a5828794e0de
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:44:26 2004 +0000

    [CPUFREQ] Missing .owner entry in speedstep-smi driver.

commit cecc998af61ce186c71542604fd6d95ddd399f00
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:43:47 2004 +0000

    [CPUFREQ] Typo fix in drivers/cpufreq/Kconfig

commit b20d4ea87d8ee4c9463f7c91a222661325458e97
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:42:37 2004 +0000

    [CPUFREQ] do not leak memory in powernow-k8
    From Pavel Machek

commit b5e6a0c59498c45cb3f53762f20ba8daeeae239c
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:35:23 2004 +0000

    [CPUFREQ] Do something about "cpufreq: change failed"

commit c5611bd12ac36eabb00b43b1c79e1ad95852eaf5
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:33:27 2004 +0000

    [CPUFREQ] use latency in nanoseconds
    sometimes nanoseconds are used, sometimes microseconds, sometimes even something else.

commit ed576c7d77c74af7044c3a0a5056c79530e4daf8
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:32:08 2004 +0000

    [CPUFREQ] remove unneeded #ifdefs in include/linux/cpufreq.h

commit f162ed116075cc88f447e069807338ce7513a974
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:31:40 2004 +0000

    [CPUFREQ] Detect CPU speed without relying on cpu_khz

commit b8030f2601b2231c7a5187058395d474a296f3a4
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:30:48 2004 +0000

    [CPUFREQ] Support for 533 MHz FSB in speedstep driver.

commit 878a23b145647f51ee1eb66fe1f52a3d1c30e202
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:19:13 2004 +0000

    [CPUFREQ] Disable smi_detect_freqs() call on systems which do not support it [BUG #1422]
    Dominik Brodowski.

commit a0e211b52eec19526e4caa79220cec22a37785ee
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:18:10 2004 +0000

    [CPUFREQ] speedstep hcakers cnat spel.

commit ec7ba58eebbe4df72e551b2200b3c212c2fda522
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:17:20 2004 +0000

    [CPUFREQ] Disable debug output in speedstep-smi driver

commit 9dcb3bd61b8bf49741a32fcad73e56d2c7dcb0f6
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jan 5 18:16:28 2004 +0000

    [CPUFREQ] on P4s no TSC adjustment is necessary
    From Dominik Brodowski

commit 48818fe15745470d76a3768eef93569ded9c9fa5
Merge: 93bc467... 70faa19...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Jan 4 18:18:21 2004 -0800

    Merge bk://linux-dj.bkbits.net/agpgart
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 70faa195d4e1b6cddcc5c88987be1273eb8cab24
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Jan 4 17:41:13 2004 -0800

    Don't allow mremap of zero-sized areas.

commit e37d5b228334c3939b0447201a1870eb92a804ee
Merge: fa751d5... 45b38a5...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Jan 4 02:37:38 2004 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 45b38a5014e339fa293a85c498c54b339b7408e5
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Jan 4 20:51:41 2004 +0000

    [ARM] Report more detail when unable to resolve module relocations.

commit 054143a01939aad3438a23195043f566c2f04477
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Jan 4 20:06:39 2004 +0000

    [ARM] Kill dma-isa.c warning.

commit 039a1776ea51f31f355cf65aaf3a2d47fe45f849
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Jan 4 17:29:23 2004 +0000

    [ARM] Fix cachepolicy=<foo>
    
    On ARM, it is possible to configure the desired cache policy in
    the page tables.  Unfortunately, we haven't been updating the
    protection_map nor PAGE_KERNEL, so this option doesn't change
    the behaviour of the majority of mappings.  This cset corrects
    this oversight.

commit 883aef799e07b809e19e2287c6bb462959706153
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Jan 4 16:49:04 2004 +0000

    [ARM] Fix more gcc3 build errors.

commit fa751d5c198cc0ff8efc7df04550fce45862b354
Merge: 0ef0686... 11f9635...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Jan 4 02:34:20 2004 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 0ef06869c48fb9ba88d08e6c27baf5d7eab4df93
Author: Amit Gurdasani <amitg@edu.rmk.(none)>
Date:   Sun Jan 4 16:28:39 2004 +0000

    [SERIAL] EISA ID for PnP modem
    
    Patch from: Amit Gurdasani
    
    I have a PROLiNK 1456VH internal Rockwell-based ISA PnP K56flex fax modem
    whose EISA ID seems not to be known to 8250_pnp.c. The ID is AEI0250 as
    reported in /sys/devices/pnp1/01:01/01:01.00/id and adding this into the
    pnp_dev_table[] allows the device to be found and enabled properly by the
    8250 serial driver.

commit 11f963511c5a94c5969fdbb5e6f4da2190592d6f
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sat Jan 3 02:25:13 2004 -0800

    Fix IDE "PIO WRITE wait for ready" test under extreme interrupt load.
    
    From Daniel Tram Lux: under extreme irq load on an underpowered CPU,
    the timeout loop may not make any progress, and decide that a timeout
    occurred before it has actually tested the status register.
    
    The minimal fix for now is to just have a final test _after_ the timeout
    to remove the problem. The real fix would likely be to not have irqs
    enabled between reading the status and the timeout.

commit 75416a9887f3bcf74810364f6b4fb46fd80781f4
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Fri Jan 2 19:36:52 2004 +0000

    [SERIAL] Remove old RSA resource handlign.
    
    The resource handling left in autoconfig() is plainly wrong, since
    we've already claimed the necessary resources prior to calling
    autoconfig().  Therefore, we remove the superfluous code from
    autoconfig().

commit e3483eaf4656e15f62057c0b6612a6c458eef762
Author: Rene Herman <rene.herman@nl.rmk.(none)>
Date:   Fri Jan 2 19:25:32 2004 +0000

    [SERIAL] add PnP ID to 8250_pnp.c
    
    Patch from: Rene Herman
    
    This patch adds the PnP ID for the E-Tech CyberBULLET PC56RVP.

commit a5c43a751629855dde22a3b7b44f55546b4fcb01
Author: Andi Kleen <ak@muc.de>
Date:   Fri Jan 2 04:57:06 2004 -0800

    [PATCH] Fix memset on x86-64
    
    The memset for C stepping K8 was broken. This broke mainly CONFIG_SLAB_DEBUG
    because memset(...., 0, ...) still worked correctly.
    
    Thanks to Manfred Spraul for giving me the right cue.

commit 951fc9df9558ee5ae01cef7255b1a33078a7653c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Dec 31 20:28:44 2003 -0800

    [NET]: Do type checking in {udp,inet6,raw6,inet}_sk().

commit 12173d801dbbe1950befa35386f584c2841de6a6
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Dec 31 20:27:45 2003 -0800

    [IPV6]: Kill obsolete functions (ip6_frag_xmit() and ip6_build_xmit()).

commit f73e9f0fd7930926b4a3445d9350350675b4fcaa
Author: Andi Kleen <ak@muc.de>
Date:   Wed Dec 31 19:41:03 2003 -0800

    [PATCH] X86-64 merge
    
    At least one of them is critical. It fixes an path in the IOMMU that
    I broke with the ealier "fullflush" workaround.
    
     - Check for ~/bin/installkernel like i386 (M. Bligh)
     - Implement 32bit RTC_IRQ_SET correctly (Lutz Vieweg)
     - Disable some useless printks in 32bit emulation
     - Warning fixes for mixed C99 style declarations/statements.
     - Sync lAPIC power management with i386
     - Use topology sysfs like i386
     - Fix some serious bugs in the MCE handler. ECC should
       be decoded correctly now.
     - Add oops=panic option to panic on Oopses.
     - Fix hackish code in head.S
     - Add missing options in IOMMU
     - Fix _syscall6 (Olaf Hering)
     - Remove broken ACPI locking code. Port IA64 C version.
     - Make safe_smp_processor_id() more reliable
     - Read HPET in vsyscall code
     - Add workaround for BIOS that corrupt 64bit registers in HLT
     - Fix unaligned access in bitops.h
     - Remove broken ntp drift correction code for now
     - i386 merge in SCI setup
     - Fix wrong offset in callin.h (Jim Houston)
     - Minor comment fixes

commit b68e2749023c874ae894e13666770ce60cd762b6
Merge: 0caf7f8... a662cb8...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Dec 31 19:32:18 2003 -0800

    Merge http://lia64.bkbits.net/to-linus-2.5
    into home.osdl.org:/home/torvalds/v2.5/linux

commit a662cb8bba9f7dd2cec7d15289ad5d6484c7c996
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:25:32 2003 -0800

    [PATCH] DVB: Fix memory usage of ttpci driver
    
     - do not allocate firmware buffer if firmware is compiled into the
       driver.  Saves 220KB vmem (Andreas Oberritter)

commit 6455aafe6d4d453b9fc94a6a223563d52d0c316d
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:25:24 2003 -0800

    [PATCH] DVB: Revamp of the TTUSB-DEC driver
    
     - Alter hotplug firmware naming to fit in with dvb standard.
     - Use the hotplug firmware loader for 2.6 kernels instead of compiling
       the firmware into the module.
     - Integrate frontend into ttusb_dec module and remove pseudo-i2c bits,
       move ttusb_dec header into source file.
     - Rudimentary section filter support (enough for scan).

commit 6569e964a477d71c4602f8a568eb71d99890d623
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:25:13 2003 -0800

    [PATCH] DVB: Add static firmware compilation again
    
     - add Kconfig magic to select a firmware that can be compiled into the
       driver
     - add some hooks to av7110 to compile a firmware into the driver again

commit e68b286ab3a7b8028cff1624541b12b4ce1be61b
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:25:04 2003 -0800

    [PATCH] DVB: Fixes for frontend drivers
    
     - ves1820: increase mdelay from 30 to 50 to be more reliable with bad
       reception quality (Andreas Oberritter)
     - dst: remove AUTO_INVERSION for capabilities, allow params
       dst_type_flags and dst_type to have multiple values for multiple
       cards in one machine (Jamie Honan)

commit d07c7afd71da175921b769c5748d43015922b8c4
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:24:56 2003 -0800

    [PATCH] DVB: Fix feed list handling bugs in demux
    
     - corrected handling of feed lists (Andres Oberritter)

commit 950422ae55e2bbdf449106a9ea76aae3895af073
Author: Michael Hunold <hunold@linuxtv.org>
Date:   Wed Dec 31 19:24:46 2003 -0800

    [PATCH] DVB: Update documentation and credits
    
     - add new documentation for getting bt8xx based DVB cards runnig
     - extend contributors list
     - change various email addresses in header files

commit f55c77c4bd9d1303321ea95bf47bd3652c8f9378
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Wed Dec 31 19:07:05 2003 -0800

    Remove dead files
    
    Noted by Keith Owens.

commit 0caf7f8509e7138494cef31f06b4c36c73d7e763
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:34:35 2003 -0800

    ia64: Update defconfig.

commit 8b735f7c7c5b17e50335531cb9812bd02a8ba2b5
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:33:55 2003 -0800

    ia64: Rename efi_get_time() in the simulator's firmware-emulator to avoid
    	name-clash with declaration of routine of the same name in
    	<linux/efi.h>.

commit fd00a34e898eb8e8f26b5adf7d3a50da597f314f
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:29:50 2003 -0800

    ia64: Merge patch by Arun Sharma: hook up lots of ia32 syscalls.

commit 77ab58e58cf247892b525612054569b5646fe14d
Merge: 4da120f... 30ee59d...
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:27:20 2003 -0800

    Merge tiger.hpl.hp.com:/data1/bk/vanilla/linux-2.5
    into tiger.hpl.hp.com:/data1/bk/lia64/to-linus-2.5

commit 30ee59d7b2df6b6798a320b4dcff8c9022734130
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:23:38 2003 -0800

    ia64: fix perfmon bug causing lost samples
    
    	Patch from Stephane: Fix a bug in perfmon_default_smpl.c by
    	which we would systematically lose one sample at every buffer
    	overflow.

commit 2be2f0aeafc9f8687a9239e8685b3e1e81cae120
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:21:34 2003 -0800

    ia64: Remove the old ia64_ni_syscall()/sys32_ni_syscall() routines which
    	are overly verbose and replace them with calls to sys_ni_syscall().

commit aca8b603ee5e39f4e55ada964ec03564ddc33017
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:18:59 2003 -0800

    ia64: Allow system-call number to be changed during system-call tracing
    	(both for native and x86 system call tracing).  This is needed
    	by recent versions of strace and UML likes to do that, too.

commit 2c2c4c6ee11c7523d2206a7baa94468e823726a2
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 31 07:15:39 2003 -0800

    ia64: Rearrange ia64_do_signal() such that it is possible for a debugger to
    	cancel system-call restart.

commit 4da120fa5e227572a9bd42ab34f340ef6c4494b3
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Wed Dec 31 00:41:45 2003 -0800

    [PATCH] Fix "echo -n 3 > /sys/.../power/state"
    
    Fix what seems to be a typo preventing .../power/state from working.

commit 1affb93bce6823ef6e1e66bc99cb75bda312eada
Author: James Bottomley <james.bottomley@steeleye.com>
Date:   Tue Dec 30 23:26:09 2003 -0800

    [PATCH] MSI broke voyager build
    
    The x86 build depends on NR_VECTORS being defined.
    
    This symbol, however, was put only into mach-default/irq_vectors.h
    
    The attached patch adds it to voyager too.

commit 00ecacba3d0c9de12c390b714f023aaa9aeff9b6
Merge: cdd7785... f0cb1c0...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 19:24:42 2003 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit f0cb1c029abcca714601e67a266a942437c66d00
Merge: a077e99... 27d56db...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Tue Dec 30 18:45:23 2003 -0800

    Merge davem@nuts.ninka.net:/disk1/davem/BK/tg3-2.6
    into kernel.bkbits.net:/home/davem/tg3-2.6

commit cdd7785031af00ace6d5ae8a2fb605ede0737606
Author: Jeroen Vreeken <pe1rxq@amsat.org>
Date:   Tue Dec 30 18:37:20 2003 -0800

    [AX25]: Missing spin_unlock() and recvmsg reported dst instead of src.

commit 693519c0599461372ead5b292db7ebae9be37165
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Tue Dec 30 18:36:04 2003 -0800

    [NET]: Fix comment type in skbuff.h

commit 07ee3fcf0719ab693248f3da7e632edf765d6c62
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Tue Dec 30 18:35:44 2003 -0800

    [BRIDGE]: Fix build with vlan disabled, spurious ifdef.

commit f685645bf49cef710761c0d8a58fd0cda6bc1919
Merge: a077e99... 6bb0092...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 30 18:19:13 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/netleak-2.5
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit 45f4d49a7c915a397013cd4b3fcdbb65e62b1417
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Tue Dec 30 09:10:09 2003 -0800

    ia64: Fix a ptrace-bug that caused "strace -f" to crash the inferior
          process.  The root-cause of the problem was that ptrace() tried
          to copy the portion of the register backing store that landed on
          the kernel stack back to users-space, but the resulting state
          was inconsistent if the inferior process was in the middle of a
          system-call (as would always be the case for strace).
    
          The solution is to avoid all needless copying and to instead
          ensure that when accessing a memory location that may belong to
          a thread's register-backing store, we attach to that particular
          thread, rather than the thread identified by the PID argument.
          If the thread happens to be unattachable, we fall back to using
          the thread identified by the PID argument.  This should have the
          desired effect if the thread has terminated already and if the
          thread is running while ptrace() is trying to access its state,
          all bets are off anyhow and there are no coherency guarantees.
          In other words, this should be doing the right thing under all
          circumstances.
    
          The patch also fixes the case where PT_AR_BSP and/or PT_CFM are
          written while the inferior process is in the middle of a system
          call.  This makes arguments passed to GDB inferior calls come
          out right.
    
          The patch was tested with strace -f and the GDB testsuite, which
          showed no regressions compared to the previous version of the
          kernel.

commit a077e99d64d9d1d7aa046424e4a4388de9bcfc5b
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 06:24:31 2003 -0800

    Remove generated files from revision control

commit 4992a7cea88c8b96482140a61442cc64646617e6
Merge: 768d786... f6fb237...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Tue Dec 30 05:31:15 2003 -0800

    Merge davem@nuts.ninka.net:/disk1/davem/BK/sparc-2.6
    into kernel.bkbits.net:/home/davem/sparc-2.6

commit 768d7861d0ae0fdc468a098d1744d617f1b59caf
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 30 05:27:50 2003 -0800

    [SPARC64]: Update defconfig.

commit 2e9862e374da4230ef3ae51d91d287d4a974e42f
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 30 05:26:44 2003 -0800

    [MEDIA]: ttusb_dec.c needs linux/init.h

commit f6fb237ba312292c39dd6a9fb5c6a0fbdc40b2f7
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 04:44:13 2003 -0800

    Linux 2.6.1-rc1

commit f921eab8357c57c363d2b250ac9350361a585e9b
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 04:43:45 2003 -0800

    Make IDE DRQ and READY timeouts longer
    
    The old 50ms / 30ms timeouts apparently weren't sufficient
    with some disks.

commit faa3b867d8f19d0a8d551696b2b635fc3c58cfdd
Merge: be907e4... 8e99292...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 30 01:33:46 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.6
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.6

commit be907e4960755592d7960dc0bfb072a9431e5e1c
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 01:00:38 2003 -0800

    [PATCH] call_usermodehelper retval fix
    
    The reworked firmware loader in the DVB patches needs the fix to the
    call_usermodehelper() return value.
    
    From: Rusty Russell <rusty@rustcorp.com.au>
    
    MODULE_ALIAS_BLOCK() and MODULE_ALIAS_CHAR() define aliases of form
    "XXX-<major>-<minor>", so we should probe for modules using this form.
    Unfortunately in 2.4, block aliases were "XXX-<major>" and char aliases
    were of both forms.
    
    Ideally, all modules would now be using MODULE_ALIAS() macros to define
    their aliases, and the old configuration files wouldn't matter as much.
    Unfortunately, this hasn't happened, so we make request_module() return the
    exit status of modprobe, and then do fallback when probing for char and
    block devices.
    
    (Kudos to Chris Wright, I stole his kernel_thread flags).

commit 6a429be87c98decee3e4f22e218168365fe7fd19
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 01:00:28 2003 -0800

    [PATCH] strip out PCI cruft from i82365 driver
    
    From: David Hinds <dhinds@sonic.net>
    
    This removes dead PCI-related code from the i82365 driver.

commit d3444889c746b4861b5ef4c8aca1b06821f33d97
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 01:00:18 2003 -0800

    [PATCH] reduce kernel stack usage in PCMCIA CIS parsing
    
    From: David Hinds <dhinds@sonic.net>
    
    This changes the PCMCIA CIS parsing code to use kmalloc() rather than
    allocating some data structures on the kernel stack.

commit 75c71254324ada89861ab3c81facef278ef50bdc
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 01:00:07 2003 -0800

    [PATCH] fix for 16-bit PCMCIA interrupt selection
    
    From: David Hinds <dhinds@sonic.net>
    
    This fixes interrupt allocation for 16-bit PCMCIA cards, so that on systems
    supporting ISA bus interrupts, if all ISA interrupts are unavailable, we'll
    fall back on sharing the bridge PCI interrupt.

commit 9a639403db629e3d0b109d978ca4769e57678c22
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:58 2003 -0800

    [PATCH] pcnet_cs driver bug fix / update
    
    From: David Hinds <dhinds@sonic.net>
    
    This fixes half/full duplex selection for certain NE2000 compatible PCMCIA
    cards.

commit 593263571cef20cc3870bb98fd77686c03bf0231
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:47 2003 -0800

    [PATCH] fix yenta printk logging levels
    
    From: David Hinds <dhinds@sonic.net>
    
    This just sets missing logging levels for printk's in yenta_socket.

commit b06c2bc52e1d36ea854b9b45e39ac7816cc21290
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:37 2003 -0800

    [PATCH] dhinds is not 2.6 PCMCIA maintainer
    
    From: David Hinds <dhinds@sonic.net>
    
    I have not been actively maintaining PCMCIA for 2.6; I tried asking the
    more active developers to see if someone would step into the job but they
    were not willing to do so at this time.  I'll still submit patches from
    time to time.
    
    (David has a ./CREDITS entry, of course).
    
    We should really put in Russell King here, but I'll let him do that
    himself.

commit 856b46ae8cfad51a6443690653689ad8fb606447
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:27 2003 -0800

    [PATCH] PPC32: Fix the mkprep util to work correctly on Solaris 8
    
    From: Tom Rini <trini@kernel.crashing.org>
          Peter Wahl <PeterWahl@web.de>
    
    PPC32: Fix the mkprep util to work correctly on Solaris 8.
    
    - There is a very odd problem with the alignment of dword_t values
      which causes this program to not work correctly when compiled on
      Solaris 8.  The workaround is not use a pointer and to memcpy the
      values instead.

commit c2192641959e0454cda5171f1df58d521f89bf47
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:17 2003 -0800

    [PATCH] PPC32: Fix compilation of ppc_ksyms.c on !CONFIG_PPC_STD_MMU
    
    From: Tom Rini <trini@kernel.crashing.org>
    
    Fix compilation of arch/ppc/kernel/ppc_ksyms.c on !CONFIG_PPC_STD_MMU
    
    'mol_trampoline' is only defined on CONFIG_PPC_STD_MMU.  Therefore this file
    will not compile on !CONFIG_PPC_STD_MMU without this change.

commit 710d2b9de6fff655abb696ac1e7b6909de3f2b49
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:59:07 2003 -0800

    [PATCH] ppc: netboot build fixes
    
    From: Tom Rini <trini@kernel.crashing.org>
    
    The following patch fixes the 'znetboot' and 'znetbootrd' targets so that
    they work again.
    
    - Update the comments to reflect how things work with the correct
      usages now.
    
    - Fix the znetboot / znetbootrd targets.  We now always set end-y,
      and use this to figure out what image will be tftpboot'ed.

commit 6bac5cc7cdfd349710bc7b7cf59147b0dc42f2f4
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Dec 30 00:58:57 2003 -0800

    [PATCH] Fix booting on a number of Motorola PPC32 machines
    
    From: Tom Rini <trini@kernel.crashing.org>
    
    Currently a number of Motorola PPC32 machine will not boot, as the final
    zImage isn't built correctly for them.

commit e378d578d50239c45d2f5f16eb8950df7e46488f
Merge: cf3f977... d027a95...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 00:08:22 2003 -0800

    Merge bk://firebox.phunnypharm.org:4040
    into home.osdl.org:/home/torvalds/v2.5/linux

commit d027a95f37ec012ca4c8d5e42419c8eb7338dbbf
Merge: b2e9556... 09fa6bc...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Tue Dec 30 00:06:58 2003 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit cf3f977ad3870acf039c2d1098cfec86a8974c99
Merge: 443473e... 313c01d...
Author: Ben Collins <bcollins@debian.org>
Date:   Tue Dec 30 02:56:48 2003 -0500

    Merge http://linux.bkbits.net/linux-2.5
    into debian.org:/usr/src/kernel/linux-2.6

commit b2e95563794f81a3b2ccbeffcb59af1090fa00ef
Merge: 9323e05... 1d0990a...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 23:51:30 2003 -0800

    Merge home.osdl.org:/home/torvalds/v2.5/linux
    into home.osdl.org:/home/torvalds/v2.5/akpm

commit 1d0990ac31a9f7d9bca74dd5e8c846a7314a34d6
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:53 2003 -0800

    [PATCH] parisc /proc/interrupts uninitialised var
    
    From: James Bottomley <James.Bottomley@SteelEye.com>
    
    The compiler justly complains in this:
    
    	        unsigned int regnr = *(loff_t *) v, i;
    
    	        if (regnr == 0) {
    	                seq_puts(p, "     ");
    	#ifdef CONFIG_SMP
    	                for (i = 0; i < NR_CPUS; i++)
    	#endif
    	                        seq_printf(p, "      CPU%02d ", i);
    
    That i is uninitialised if CONFIG_SMP is not set.

commit 2fbe64960376e3672c8d39753685ba372d200a38
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:45 2003 -0800

    [PATCH] readahead: multiple performance fixes
    
    From: Ram Pai <linuxram@us.ibm.com>
    
    I have enclosed a patch that fixes a bunch of performance bugs in the
    readahead code.
    
    Below is a brief summary of the problems noticed and the proposed fixes
    with some results:
    
     Problem 1:  Readahead code closes the readahead window and goes into
     slowread path, if a file is accessed the first time at an offset
     notequal to zero.  In the case of databases(especially in db2), a file
     may not be accessed at offset 0 the first time though the i/o's are
     sequential.
    
     Fix to Problem 1:
              min = get_min_readahead(ra);
             orig_next_size = ra-next_size;
    
     -       if (ra-next_size == 0 && offset == 0) {
     +       if (ra-next_size == 0) {
    
    ------------------------------------------------------------------------
    
     ------------------------------------------------------------------------
     Problem 2: After fixing Problem, the readahead window still does not
     open up the first time, if all the pages requested are already in the
     page cache. This time the window closes because of pagecache hits
     instead of misses. To fix this we put in these changes.
    
     -               check_ra_success(ra, ra-size, actual, orig_next_size);
     +               if(!first_access) {
     +                       check_ra_success(ra, ra-size, actual, orig_next_size);
     +               }
    
     ------------------------------------------------------------------------
    
     ------------------------------------------------------------------------
     Problem 3: In the case of large random reads, the readahead window is
     read in, the moment there is a hit in the active window. And it turns
     out that in most of the cases the readahead window gets scrapped,
     because the next large random read does not even touch any of the pages
     in that readahead window. We fixed this by introducing lazy readahead.
     Basically we wait till the last page in the active window gets a hit.
     And once the last page is hit, the readahead window is then read in.
     This fix gave a tremendous boost in the performance.
     To fix this the changes we put in were:
    
                     /*
                      * This read request is within the current window.  It is time
                      * to submit I/O for the ahead window while the application is
                      * crunching through the current window.
                      */
     -               if (ra-ahead_start == 0) {
     +               if (ra-ahead_start == 0 && offset == (ra-start + ra-size -1)) {
    
     ------------------------------------------------------------------------
    
     ------------------------------------------------------------------------
     Problem 4:
           If the request page does not fall in the active window and is not
    the  first page of the read ahead window, we scrap both the active
    window and the readahaed window and read in the active window. But it
    turns out that we read in a lot of pages in the active window based on
    the size of the 'projected readahead window size' (the next_size
    variable). And we end up using part of the active window and waste the
    remaining. We put  in a fix where we read in just as many pages in the
    active window based on the number of pages used in the recent past.
     Again this gave us another big boost in performance and ended up
    beating the performance of aio patch on a DSS workload.
    
     The fix to this is:
                      * ahead window and get some I/O underway for the new
                      * current window.
                      */
     +               if (!first_access && preoffset = ra-start &&
     +                               preoffset < (ra-start + ra-size)) {
     +                       ra-size = preoffset - ra-start + 2;
     +               } else {
     +                       ra-size = ra-next_size;
    
     ------------------------------------------------------------------------
    
     ------------------------------------------------------------------------
     Problem 5:
     With all the above fixes there is very low chance that the readahead
     window shall close.  But however if it does, we found that the slow
     read  path is really slow.  Any loss of sequentiality in the slow read
     path is penalized heavily by closing the window back to zero. So we
     fixed this  by decreasing the window size by one anytime we loose
     sequentiality and  increasing in by 1 if we didn't.
    
                     if (offset != ra-prev_page + 1) {
     -                       ra-size = 0;            /* Not sequential */
     +                       ra-size = ra-size?ra-size-1:0; /*Notsequential */
    
     ------------------------------------------------------------------------
    
    With the above set of fixes we got about 28% improvement in DSS workload
    which is about 5% more than what we got with the suparna's aio patch.
    
    This patch compared equivalent to suparna's aio patch with aio-stress
    run.
    
    It fared better than aio patch for large random io.
    
    We are yet to run a bunch of other benchmarks to evaluate this patch.
    We would like to get your inputs on this patch and any suggestions you
    may have to improve it. I have enclosed a patch with all these changes
    along with some changes to the comments that reflect the new behaviour.
    NOTE: the above patch reverts suparna's aio patch.

commit 56d7e6f454f68438b28ced680c87e59d4fb94f28
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:36 2003 -0800

    [PATCH] Fix 2.6.0's broken documentation references
    
    From: Hans Ulrich Niedermann <linux-kernel@n-dimensional.de>
    
    I've noted that 2.6.0 contains broken references to documentation.
    
    I got sufficiently annoyed chasing doc files in the wrong place
    that I wrote a script to check the references to documentation
    files.
    
    Some documentation files have moved (e.g.  Documentation/modules.txt to
    Documentation/kbuild/modules.txt).  I adapted the references with a script.

commit 4e2e30bb7317cea88f24684c89291eaf0f6141fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:26 2003 -0800

    [PATCH] reiserfs_rename ctime update
    
    From: Nikita Danilov <Nikita@Namesys.COM>
    
    This patches reiserfs_rename.  It adds ctime update of renamed object.  It
    also fixes calculation of maximal possible transaction size during rename.
    
    Thanks to Alex Adriaanse <alex_a@caltech.edu> for finding this.

commit a8007b5b37ba41ef0e2edaa7db430447cda124ef
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:18 2003 -0800

    [PATCH] reiserfs commit_max_age mount option
    
    From: Nikita Danilov <Nikita@Namesys.COM>
    
    Add "commit" reiserfs mount option to override maximal transaction age.
    Usage:
    
    mount -treiserfs -ocommit=<time-in-seconds> /device /mountpoint
    
    Submitted by Hugang <hugang@soulinfo.com>.

commit f37b1ef8d974cc4a9defdd4c97ca3bb13e60c502
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:09 2003 -0800

    [PATCH] Fix reiserfs handling of `silent' option.
    
    From: Nikita Danilov <Nikita@Namesys.COM>
    
    Patch to teach fs/reiserfs/super.c:reiserfs_fill_super() to respect @silent
    parameter and to not issue any output if @silent is set.
    
    Also remove some trailing white spaces, while we are here.

commit 0eeebbed01208b963488842e7c4f0a809b09c9d3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:49:00 2003 -0800

    [PATCH] CONFIG_GAMEPORT documentation
    
    From: Muli Ben-Yehuda <mulix@mulix.org>
    
    It's messy, and needs describing.

commit 31fae3b50efdcc1a36d6d7b98ed7683a307b708d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:52 2003 -0800

    [PATCH] Typo: 2.6.0 docs about kbuild.
    
    From: BlaisorBlade <blaisorblade_spam@yahoo.it>
    
    This fixes a "typo" for Kconfig-language docs.

commit c3f4656118a78c1c294e0b4d338ac946265a822b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:44 2003 -0800

    [PATCH] shrink_slab acounts for seeks incorrectly
    
    wli points out that shrink_slab inverts the sense of shrinker->seeks: those
    caches which require more seeks to reestablish an object are shrunk harder.
    That's wrong - they should be shrunk less.
    
    So fix that up, but scaling the result so that the patch is actually a no-op
    at this time, because all caches use DEFAULT_SEEKS (2).

commit 4be16e54c9f261283606da017428b9051e591d67
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:35 2003 -0800

    [PATCH] log_buf_len_setup() irq fix
    
    log_buf_len_setup() is called on the start_kernel->parse_args() path.  It
    must not enable interrupts.

commit e6b1fdb7d9b18c4b0d3f458b8ce2cad69515bab5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:27 2003 -0800

    [PATCH] fix pci_update_resource() / IORESOURCE_UNSET on PPC
    
    From: Harald Welte <laforge@gnumonks.org>
    
    [disclaimer:  This was posted on the linuxppc list before, BenH asked me=20
     to re-post it to lkml]
    
    The prism54 (http://prism54.org) driver for my cardbus adapter works
    with 2.4.x, but not 2.6.x on a Titanium G4 Powerbook IV.
    
    On 2.6.x the error message was
    PCI:0001:02:00.0 Resource 0 [00000000-00001fff] is unassigned
    
    After investigating differences in the PCI code of 2.4.x and 2.6.x, i
    noticed that 2.4.x/arc/ppc/kernel/pci.c:pcibios_update_resource()
    contained a couple of lines that unset the IORESOURCE_UNSET bitflag.
    
    In 2.6.x, this is handled by the generic PCI core in
    drivers/pci/setup-res.c:pci_update_resource() code.  However, the code
    is missing the 'res->flags &=3D ~IORESOURCE_UNSET' part.
    
    The below fix re-adds that section from 2.4.x.=20
    
    I'm not sure wether this belongs into the arch-independent PCI api.
    Anyway, on PPC it seems to be needed for certain cardbus devices.
    
    Any comments welcome.

commit 61179b289c82c0d2095c51af71fb19b75f9ca258
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:19 2003 -0800

    [PATCH] (workaround): avoid raid1 crash during resync with qlogic controllers
    
    qlogic's 16k maximum I/O size bites again.  Neil says:
    
     The problems we fixed were all to do with normal IO.  This one is resync
     IO.
    
     The problem here is that raid1 always does resync in RESYNC_BLOCK_SIZE
     (=64k) IOs and if the device doesn't cope - tough.
    
     The simple fix is to #define RESYNC_BLOCK_SIZE to PAGE_SIZE in md/raid1.c
    
     The better fix is to rewrite the raid1 resync code to use bio_add_page.
    
     This means we have to build the read request and the write requests at the
     same time, and then when a bio_add_page fails, we back-out the last page
     from the bios that have one too many, and then do the read followed by the
     writes.
    
     I have some code the nearly does this, but I haven't got it actually
     working yet and I am on leave until mid January.
    
     I would recommend doing
    
     fs/drivers/md/raid1.c:
     -#define RESYNC_BLOCK_SIZE (64*1024)
     +#define RESYNC_BLOCK_SIZE PAGE_SIZE
    
     for now.

commit 88351d384113772a62b799a613aa7a97b4a8ddd6
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:11 2003 -0800

    [PATCH] Remove iso9660 check for sbsector < 660Mb
    
    From: Jon Burgess <mplayer@jburgess.uklinux.net>
    
    The iso9660 filesystem code checks that the "sbsector" option is
    positioned within the first 660Mb of the disk.
    
    Today the iso9660 filesystem is used on DVD's which are much bigger than
    660Mb and this check prevents the sbsector option being used to specify
    the location of the superblock of multisession DVD's.
    
    With this check removed I can mount the second session on a DVD-R by
    specifying the sbsector, even though the  firmware on that drive returns
    bogus data for the TOC.
    
    If an invalid large sector number is entered then a "request beyond end
    of device" error is reported elsewhere in the block code, but appears to
    do no damage.

commit 9bfed7259c8ac09ad4676ec7489b71f4d4343cd2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:48:02 2003 -0800

    [PATCH] ALI ircc vendor update (add support for newer chipset) to FIR driver
    
    From: Alan Cox <alan@redhat.com>
    
    Change by Clear Zhang of ALI

commit 189fd4bc31dd2c6111525c3ce90f52c3bc7bb259
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:53 2003 -0800

    [PATCH] Fix static build of drivers/mtd/chips/jedec_probe.c
    
    From: Bernardo Innocenti <bernie@develer.com>
    
    It needs init.h

commit 21c77d06beea1913ab6c2674709e6bbf3c24f3a8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:45 2003 -0800

    [PATCH] SubmittingDrivers update
    
    From: Steven Cole <elenstev@mesatop.com>

commit eb372d22cb6676e7f00a33889774b094392342a2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:37 2003 -0800

    [PATCH] hugepage pagetable freeing fix
    
    From: "Seth, Rohit" <rohit.seth@intel.com>
    
    We recently covered a bug in mm/mmap.c on IA-64.  While unmapping a address
    space, unmap_region calls free_pgtables to possibly free the pages that are
    used for page tables.  Currently no distinction is made between freeing a
    region that is mapped by normal pages vs the pages that are mapped by
    hugepages.  Architecture specific code needs to handle cases where PTEs
    corresponding to a region that is mapped by hugepages is properly getting
    unmapped.  Attached please find a patch that makes the required changes in
    generic part of kernel.  We will need to send a separate IA-64 patch to use
    this new semantics.  Currently, so not to disturb the PPC (as that is the
    only arch that had ARCH_HAS_HUGEPAGE_ONLY_RANGE defined) we are mapping back
    the definition of new function hugetlb_free_pgtables to free_pgtables.

commit 17095c0720d64ca64d090bb4ac553c79dc9c4778
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:28 2003 -0800

    [PATCH] Check for preemption in kunmap_atomic()
    
    From: Joe Korty <joe.korty@ccur.com>
    
    We need to check whether preemption is needed after reenabling preemption
    in kunmap_atomic().

commit 655da9eb72e2e638ccb0666897675b444effd3fe
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:20 2003 -0800

    [PATCH] Fix another dm and bio problem
    
    From: Mark Haverkamp <markh@osdl.org>
    
    This fixes a problem similar to the patch I submitted on 11/20
    
    http://marc.theaimsgroup.com/?l=linux-kernel&m=106936439707962&w=2
    
    In this case, though, the result is an:
    
    "Incorrect number of segments after building list" message.
    
    The macro __BVEC_START assumes a bi_idx of zero when the dm code can
    submit a bio with a non-zero bi_idx.
    The code has been tested on an 8 way / 8gb OSDL STP machine with a 197G
    lvm volume running dbt2 test.

commit 06004ee5b76dac0106a5fd3d9371f92983145909
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:12 2003 -0800

    [PATCH] Small copy-paste typo in floppy.c
    
    From: Juergen Quade <quade@hsnr.de>
    
    I just hit a copy-paste typo in floppy.c.

commit 25ceff8cfa0858e505d34b1b7a244bf254ff8540
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:47:04 2003 -0800

    [PATCH] ppdev MODULES_ALIAS
    
    From: Jim Radford <radford@indigita.com>
    
    I finally took the time to figure our why my parallel port wasn't
    working...  here's the patch.

commit 0f821f9d7f0ed17f11602c9a93bed09186560ee9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:56 2003 -0800

    [PATCH] change two annoying messages from framebuffer drivers
    
    From: Michael Hunold <hunold@convergence.de>
    
    the Linux-on-a-CD system Knoppix has nearly all framebuffer drivers for
    2.4.23 compiled in. Additionally, it surpresses most kernel messages by
    lowering the kernel log level.
    
    Two framebuffer drivers (clgenfb.c and hgafb.c), however, use KERN_ERR
    to say that their particular card has *not* been found which is very
    annoying.
    
    Especially the clgenfb.c driver simply says on bootup:
      >  Couldn't find PCI device
    which can really confuse newbie users.
    
    I've already send a patch that fixes this for 2.4 -- Marcelo and Geert
    Uytterhoeven have already ack'ed it.
    
    The same change should be done for 2.6, too IMHO.
    
    The appended patch replaces two KERN_ERR with KERN_INFO and additionally
    makes the cirrusfb.c message more descriptive.

commit bef7c38feb058eec2296a974aacbee8ca3cb735f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:47 2003 -0800

    [PATCH] add SpeedStep zero-page usage documentation
    
    From: "Randy.Dunlap" <rddunlap@osdl.org>
    
    Add Intel SpeedStep zero-page memory usage doc.

commit dce29666ec7a9d6f4d65671da90731a9b1c3e136
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:39 2003 -0800

    [PATCH] H8/300 bitops.h update
    
    From: Yoshinori Sato <ysato@users.sourceforge.jp>
    
    * using generic_ffs
    * optimized code

commit 7764b6ded24705e972415683b234cb720ea1861d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:31 2003 -0800

    [PATCH] Fix memleak on execve failure
    
    From: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>
    
    I found linux-2.6.0-test11 leaks memory when execve fails.  I've also
    checked the bitkeeper tree and the problem seems to be unchanged.
    
    The attached patch is a partial backout of bitkeeper rev.  1.87 of
    fs/exec.c.  I guess the original change was a simple mistake.
    (free_arg_pages() is a NOP when CONFIG_MMU is defined).

commit ab49402d9f61b9a2b9c483be669e81c3f89cce8b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:23 2003 -0800

    [PATCH] lib/inflate.c fix
    
    From: "H. Peter Anvin" <hpa@zytor.com>
    
    This patch fixes the "non-terminating inflate" problem that Russell King
    complained about on LKML earlier today.
    
    I chose to use "goto" much like zlib does, in order to not require
    setjmp/longjmp inside the kernel.  It's a bit ugly, but it also lets each
    function chose how it needs to be terminated on error, which is a good
    thing.

commit 0a33358cf289e024b7e67436f8539f1348aed238
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:14 2003 -0800

    [PATCH] FAT: Use just printk() instead of unneeded fat_fs_panic()
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    - uses just printk() instead of unneeded fat_fs_panic()
    - removes the debug printk
    - less verbose on error path
    - uses correct a error number on error path

commit 26b885870f5c67d704cfa40a65a6379db7c2182f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:46:05 2003 -0800

    [PATCH] FAT: empty path by fat_striptail_len returns the -ENOENT
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    If path length became zero by fat_striptail_len(), this returns the -ENOENT
    as empty path.

commit 86b94f842fe3886c96ae7a3201d5cfc04dea6b53
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:57 2003 -0800

    [PATCH] FAT: misc cleanups/fixes
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    fatfs misc cleanups/fixes.

commit 2d5acefc5f25e56639b020ea2a749a220736dc6e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:48 2003 -0800

    [PATCH] FAT: Add count of clusters check in fat_fill_super() (7/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    This adds the check of count of clusters.  And if it's too big, fat driver
    can't handle it.  So doesn't recognize this as fatfs.

commit d97a51101ac90aa64cde14ffb5fe2827a7cf60c8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:40 2003 -0800

    [PATCH] FAT: Fix ->prev_free of fat (6/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    The -1 was documented as "there is no hint", so this patch uses -1 instead
    of 0 for FAT32 fsinfo.

commit 5af71cb20c14200ed1b594204b609b7eabcbb949
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:31 2003 -0800

    [PATCH] FAT: include/linux/msdos_fs.h cleanup
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    include/linux/msdos_fs.h cleanup

commit 002a7d6ea19d06cc4998567a947c212d3e71b600
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:23 2003 -0800

    [PATCH] FAT: trivial printk format fix (4/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    Fix printk format

commit 8d15d343efdff545174e9da9893f6f00683304f3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:15 2003 -0800

    [PATCH] FAT: add readv/writev support to FAT (3/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    For atomicity write, adds readv/writev support to FAT.

commit e8f2950f6de20ccfe8a836814cf94229c78aa3bb
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:45:07 2003 -0800

    [PATCH] FAT: Fix the tailing dots on the utf8 path (2/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
          Michal Rokos <m.rokos@sh.cvut.cz>
    
    The problem is: even if vfat_striptail_len() counts len of name without
    trailing dots and sets len to the correct value, utf8_mbstowcs() doesn't
    care about len and takes whole name.  So dirs and files with dots can be
    created on vfat fs.

commit f17963eefbd34f92d4901dc5eef197cdc43242ed
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:58 2003 -0800

    [PATCH] FAT: More relax FATFS validity tests (1/10)
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
          Yokota Hiroshi <yokota@netlab.is.tsukuba.ac.jp>
    
    This patch is required for my 640MB Optical disk.  Because MS windows 95/ME
    based FAT filesystem disk formatter generetes wrong super bloacks.

commit 83a3e44d9cc777f8f90c69f734997191e372f20b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:50 2003 -0800

    [PATCH] init/main.c trivial cleanups
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    - remove unused "rows" and "cols"
    - change the 2 variable to static

commit e8640dfabe3ed889e16f6861a217c6ebe6710880
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:42 2003 -0800

    [PATCH] relax check of page/bh state on I/O error
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    Suppress a buffer_error() warning which occurs when a page which previously
    had an I/O error gets its buffers stripped.

commit f9a7b4adf54e44cf6859c1860283253fa7a098ac
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:33 2003 -0800

    [PATCH] Put fixmaps into /proc/pid/maps via a pseudo-vma
    
    From: David Mosberger <davidm@napali.hpl.hp.com>
    
    This patch makes /proc/PID/maps report the range from FIXADDR_USER_START to
    FIXADDR_USER_END as a final pseudo-vma.  This is consistent with the notion
    that reading /proc/PID/maps tells you about every page containing data that
    the process can in fact access, and with things such as ptrace allowing
    access to this memory.  Without this, userland tools that want to look at all
    of a process's accessible pages need special-case knowledge about things such
    as the vsyscall DSO page.  With this change, existing code that iterates over
    the /proc/PID/maps lines will cover those pages like any other.  For example,
    this lets gdb's "gcore" command synthesize a core file from a live process
    that contains the vsyscall DSO page as a real core dump would, using its
    existing generic iterator code and no new special cases.

commit 8976f5f698c3c7cbe4097458b15870c2197e6299
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:25 2003 -0800

    [PATCH] Fix double logical operator drivers/char/sx.c
    
    From: "Josef 'Jeff' Sipek" <jeffpc@optonline.net>
    
    Simple clean up patch to remove double logical operators.

commit 4179237544af4e8ecaffa7529bcd859c1bc503cc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:17 2003 -0800

    [PATCH] Fix es7000 compile
    
    From: "Martin J. Bligh" <mbligh@aracnet.com>

commit 4f97aa5a6fb11820043712a2c57c2d27871e83c5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:09 2003 -0800

    [PATCH] Fix via686a/KX133 TSC failure
    
    From: Chris Bajumpaa <cbajumpa@or8.net>
    
    This patch fixes a problem with the TSC failing on via686a/KX133
    motherboards either reverting to using the pit or deadlocking the machine
    alltogether under heavy load.  (Specifically Abit KA7/KA7-100).
    
    Message from the log:
    Dec 18 18:20:37 grinder kernel: Losing too many ticks!
    Dec 18 18:20:37 grinder kernel: TSC cannot be used as a timesource. (Are
    you running with SpeedStep?)
    Dec 18 18:20:37 grinder kernel: Falling back to a sane timesource.
    
    The snippet of code that was missing from timer_tsc.c comes from
    timer_pit.c.

commit 3116a3ac0c905548f523b51f2620688f3912ebda
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:44:00 2003 -0800

    [PATCH] make gconfig warning removal
    
    From: "Maciej Soltysiak" <solt@dns.toxicfilms.tv>
    
    make gconfig causes this:
    
    scripts/kconfig/gconf.c: In function `on_treeview1_button_press_event':
    scripts/kconfig/gconf.c:1175: warning: passing arg 1 of
    `gtk_widget_grab_focus' from incompatible pointer type

commit 09fa6bcea48db8d55e9789585773cf367a899a75
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Mon Dec 29 23:43:58 2003 -0800

    [NET]: Missing sysctl strategy entries in net/{core,ipv6,appletalk}

commit 548b4535edc6a1e4ce4c56d8dba7435b879f8de9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:52 2003 -0800

    [PATCH] fatfs: fix printk storm during I/O errors
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    The fatfs was ignoring the I/O error on two points. If I/O error
    happen while checking a free block entries, this checks the all
    entries, and reports an I/O error on each entry.
    
    This problem became cause of the disk full by syslogd.

commit 992d50d5c1bdb2978834a08a90a75f77c5fec3df
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:44 2003 -0800

    [PATCH] ./README typo fix
    
    From: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 2dd851e376dc3838c7ab4054b9276908c6edcade
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:36 2003 -0800

    [PATCH] Fix Summit EBDA parsing
    
    From: Matthew Dobson <colpatch@us.ibm.com>
    
    The code to parse the EBDA (Extended BIOS Data Area) for Summit boxen is
    broken because it does not handle Lookout boxen (external boxes full of
    additional PCI slots).  This patch cleans up some ugliness in
    arch/i386/kernel/summit.c as well as fixing the code to handle Lookout boxen
    and various other configurations of PCI buses.  Without this, Summit PCI bus
    to node mappings are totally hosed with Lookout boxen attatched.  This patch
    depends upon the GENERICARCH fix.

commit 5cc7f3293fb691cb8c99b6e8f7c9564feaf2f4ed
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:28 2003 -0800

    [PATCH] Fix X86_GENERICARCH & NUMA compile error
    
    From: Matthew Dobson <colpatch@us.ibm.com>
    
    Trying to build a kernel with both CONFIG_X86_GENERICARCH and
    CONFIG_NUMA on results in a compile error.  This patch fixes that build
    problem by adding a config option for NUMA on Summit which is used to
    correctly conditionally compile arch/i386/kernel/summit.c and properly
    ifdef the function calls used in generic code.  Please apply.
    
    Running make -j24 bzImage
    arch/i386/mach-generic/built-in.o: In function `mps_oem_check':
    arch/i386/mach-generic/built-in.o(.text+0x3ce): undefined reference to
    `setup_summit'
    arch/i386/mach-generic/built-in.o: In function `acpi_madt_oem_check':
    arch/i386/mach-generic/built-in.o(.text+0x468): undefined reference to
    `setup_summit'
    make: *** [.tmp_vmlinux1] Error 1

commit dbc58779006997148920182615b5e4c593f6cfb7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:19 2003 -0800

    [PATCH] isdn/eicon/eicon_mod.c build fix
    
    From: Adrian Bunk <bunk@fs.tum.de>
    
      CC [M]  drivers/isdn/eicon/eicon_mod.o
    drivers/isdn/eicon/eicon_mod.c: In function `eicon_exit':
    drivers/isdn/eicon/eicon_mod.c:1362: warning: implicit declaration of
    function `mca_mark_as_unused'

commit 236446415d197960007e8d5b17e62c86a6280f08
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:11 2003 -0800

    [PATCH] Add signal state inheritance control to SELinux
    
    From: Stephen Smalley <sds@epoch.ncsc.mil>
    
    This patch against 2.6.0 adds a control to the SELinux module over the
    inheritance of signal-related state upon security context transitions in
    order to protect the new security context.  If the permission is not
    granted by the policy for a given pair of contexts, then transitions
    between them will clear itimers, flush all pending signals, forcibly
    flush signal handlers, and unblock all signals.  Roland McGrath provided
    input and feedback on the patch.
    Please apply, or let James Morris and me know if you'd like this to be
    resubmitted later.  Thanks.

commit e606758e59f0a821b1db8387f1199931d4cd307f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:43:03 2003 -0800

    [PATCH] Remove use of nameidata by selinux_inode_permission
    
    From: Stephen Smalley <sds@epoch.ncsc.mil>
    
    This patch removes the use of nameidata by selinux_inode_permission, as this
    appears to be unsafe in certain cases (e.g.  path_walk call from
    rpc_lookup_parent), leading to an Oops if d_path is subsequently called by
    avc_audit on the (mnt,dentry) pair to generate a pathname for an audit
    message.
    
    The change does not affect the ability of SELinux to perform its permission
    check (which only requires the inode), only the set of information that is
    available for audit messages.  We'll investigate better approaches for the
    SELinux audit generation in the future.

commit 38181ac4b92c29575c5c5fcce8cf9fcf76785ed1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:55 2003 -0800

    [PATCH] Reduce SELinux check on KDSKBENT/SENT ioctls
    
    From: Stephen Smalley <sds@epoch.ncsc.mil>
    
    This patch reduces the full capability check in the SELinux module for the
    KDSKBENT/SENT ioctls to only check the corresponding SELinux permission,
    avoiding a change to the Linux permissions model for these operations.

commit f1f4662e222e469de9b5bbd77fbaa025236a5746
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:46 2003 -0800

    [PATCH] Fix SELinux build for "make O=..."
    
    From: Stephen Smalley <sds@epoch.ncsc.mil>
    
    This patch fixes the SELinux build for "make O=..." by removing the use of
    -include and eliminating the global.h file, adding appropriate individual
    #include's to the various files in the security/selinux/ss subdirectory.
    The compilation error was reported by Sam Ravnborg and again by Adrian
    Bunk.

commit dfe31ddae13b9344045bc6a31f0d13cb4308b8f2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:38 2003 -0800

    [PATCH] dvb Kconfig fix
    
    From: Michael Hunold <hunold@convergence.de>
    
    > Thomas Meyer <tantalus@gmx.ch> wrote:
    >>there seems to be a problem with a DVB driver.
    >>Dec 29 17:15:30 jupiter kernel: dvb_ttpci: Unknown symbol request_firmware
    
    The dvb-ttpci/av7110 driver needs the firmware_class stuff to work now.
    
    IMHO the appropriate fix is to let the driver automatically select the
    firmware loader via Kconfig's SELECT facility.
    
    The dvb-ttusb-dec driver should behave like this, too.  (It currently
    depends on the FW_LOADER, which is not "the right thing" (tm))

commit d6f86a2d04595972ec4f295040260c47397f89f4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:30 2003 -0800

    [PATCH] dvb: Add DVB documentation
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    Add some valuable documentation about the DVB subsystem, the supported cards,
    a faq, ...

commit 313606d9d839efafcb5ca1ae193b61782f37b754
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:21 2003 -0800

    [PATCH] dvb: Firmware_class update
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    Use a kernel thread instead of schedule_work() when waiting for the firmware
    upload to happen

commit 82b7e321fd71c4a8f9da2c5a63f3b4d7f5f8343f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:13 2003 -0800

    [PATCH] dvb: Cleanup patch to remove 2.4 crud
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    remove various LINUX_VERSION_CODE code paths
    
    fix compile bug in new bt8xx/Makefile

commit 016b74ef1f1095980944631fb75f07c626bd684d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:42:04 2003 -0800

    [PATCH] dvb: Update TTUSB DEC driver
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    add support for the DEC3000-s (Alex Woods)
    
    use the hotplug firmware loader for 2.6 kernels instead of compiling the
    firmware into the module (Alex Woods)

commit 40c837656ee0d9bc30d78022af0fb375ac8235ea
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:56 2003 -0800

    [PATCH] dvb: Add firmware loading support to av7110 driver
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    use new firmware_class firmware loading facilities in dvb-ttpci/av7110 driver

commit e7375f375e708d07bfda0c3c50296902e5a560e1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:48 2003 -0800

    [PATCH] dvb: Update av7110 driver
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    av7110: follow changes in saa7146_core regarding saa7146_set_gpio() and
    saa7146_wait_for_debi_done() function
    
    av7110: increased I2C speed to 275 kHz, follow introduction of
    SAA7146_I2C_SHORT_DELAY flag to speed up I2C access
    
    budget: make budget-ci use this gpio function and the new wait_...()
    function, this fixes
    BORROWED_FROM_AV7110_H_BUT_REALLY_BELONGS_IN_SAA7146_DEFS_H remark
    
    budget: use alternative values for BRS setup on budget cards (by Rober
    Schlabbach)
    
    budget: remote control table should be filled completely.  at least populate
    the entries that come with the standard Hauppauge RC (Jamie Honan)
    
    ttpci-eeprom: add proper MODULE_LICENSE("GPL") so we don't taint the kernel
    anymore

commit e82f2130c084f8625b4215469054339c815e0cab
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:39 2003 -0800

    [PATCH] dvb: Update DVB frontend drivers
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    alps_tdmb7, cx24110: use correct delay values, don't divide by HZ when using
    dvb_delay(), found by Artur Skawina
    
    alps_tdmb7: set FE_HAS_LOCK only when all low-order bits are valid
    
    mt312: patch for the mt312 module, targeting the VP310: reduced heat,
    implement "auto" inversion mode, remove debugging verbosity, add module
    parameter for debugging (Augusto Cardoso)
    
    nxt6000: code review and beautification, use per i2c-adapater void pointer
    for private data in nxt_attach() / nxt_detach, fix frontend private data
    handling.  patch by Mikael Rosbacke <rosbacke at nada.kth.se>
    
    sp887x: firmware loader implementation contributed by Martin Stubbs, C99
    comile fixes by Wolfgang Thiel
    
    stv0299: Added new module parameter to choose between BER and UCBLOCKs error
    monitoring since the STV0299 can't do both at once, Added modifications based
    on the recommended settings in the SU1278 datasheet.
    
    tda1004x: remove FE_CAN_INVERSION_AUTO
    
    ves1820:completed nokia board support, increased some delays to get constant
    results,set default pwm value to 0x48 for boards which don't have an eeprom
    (by Andreas Oberritter)

commit 6aa4eec683908e908383f4a9a08a768ac1218994
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:31 2003 -0800

    [PATCH] dvb: Update DVB core
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    add a parameter to dvb_filter_pes2ts function to specify whether the packet
    is a payload unit start or not.
    
    new section demux code by emard
    
    change license GPL -> LGPL for dvb_ringbuffer, like all other DVB core files
    
    fix rare crash on invalid packets, patch by Asier Aguirre
    
    i2c: copy the data variable as well on register client so that detach sees it.

commit 5e32009d84eaa2fb95851da83604e80569966a71
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:22 2003 -0800

    [PATCH] dvb: Update Skystar2 DVB driver
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    Complete revamp of the original driver: code beautification + linux coding
    sytle, full diseqc support, hardware filtering support, support for different
    card revisions and lots of other stuff.

commit 6779cf64fda3add239fbdd634ec8d25d4a8856cb
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:14 2003 -0800

    [PATCH] dvb: Add new dvb bt8xx driver
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    new DVB driver for bt878 based "budget" DVB cards (Nebula, Pinnacle PCTV,
    Twinhan DST)

commit 7b1e171bfe382eba0c1422428d84c2b76b9fb952
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:41:05 2003 -0800

    [PATCH] dvb: Update saa7146 capture core
    
    From: Michael Hunold <hunold@linuxtv.org>
    
    fix a bunch of race conditions and locking bugs in video and vbi capture
    code on device closure
    
    use vmalloc_32() instead of vmalloc() in saa7146_vmalloc_build_pgtable().
    this makes sure that the pagetable is in lowmem kernel memory
    
    i2c timeout fix by Gerd Knorr
    
    SAA7146_I2C_SHORT_DELAY flag to speed up I2C access by Oliver Endriss
    
    move saa7146_set_gpio() from saa7146_vv to saa7146_core, it's needed by DVB
    budget drivers
    
    add "new" saa7146_wait_for_debi_done() function, remove other versions from
    av7110 and budget.ci
    
    make budget-ci use this gpio function and the new wait_...() function,
    
    make saa7146_pgtable_build_single() deliver a return code, make sanity
    checks of the arguments
    
    sanitize enabling of video input pins and i2c pins, use some default
    values, so the hardware is always in a sane state
    
    remove SAA7146_EXT_SWAP_ODD_EVEN flag + handling, fix the hardware
    initialization instead
    
    change minimal picture size to 48x32 just like other drivers
    
    set up arbitrition control for video dma3 correctly
    
    remove unnecessary code for capture to framebuffer memory, it's handled in
    the generic code

commit c9a94895dcfe2848fb77e4088e4c10f44889027a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:40:56 2003 -0800

    [PATCH] dvb: av7110 firmware removal patch
    
    From: Michael Hunold <hunold@convergence.de>
    
    Remove av7110 firmware

commit 6d0ce49d1c6caa61f873679dae7befee40ecc604
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:40:47 2003 -0800

    [PATCH] Fix ext3 space accounting bug on ENOSPC
    
    From: Jan Kara <jack@suse.cz>
    
    Fix en error exit path so that we correctly unaccount for quota-related space
    reservations on ENOSPC.

commit 2f45861daa9112475dc79678bcb019e5d4845cd6
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:40:39 2003 -0800

    [PATCH] psmouse warning fix
    
    Fix a warning on 64-bit machines.

commit 1e9c0d3b5a713687eb6c693bae8a3bee10c0fbe3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:40:31 2003 -0800

    [PATCH] fix non-ia32 `make rpm'
    
    From: "Zhu, Yi" <yi.zhu@intel.com>
    
    The "make rpm" rule in top Makefile isn't aware of the enviorment ARCH.  For
    example, people issue "make ARCH=ia64" to compile the ia64 kernel on i386
    platform for cross compilation.  This works pretty well now.  But if one uses
    "make rpm ARCH=ia64", it will fail.  Because current rpm rule in Makefile and
    mkspec are not aware of ARCH.

commit f2cf31606193fcbfccdfe6c99b599eaa48b36dab
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 23:40:23 2003 -0800

    [PATCH] ia32 jiffy wrapping fixes
    
    From: john stultz <johnstul@us.ibm.com>
    
    Converts all uses of jiffies to jiffies_64 in x86 time sources to avoid
    jiffies overflow problems.
    
    (Contributions from Tim Schmielau <tim@physik3.uni-rostock.de>)

commit ea114baca8640d270dc64dd801fe43903ed00303
Author: Matthew Wilcox <willy@debian.org>
Date:   Mon Dec 29 23:40:14 2003 -0800

    [PATCH] fix make config help
    
    fgets puts a \n in the buffer before the terminating \0.

commit 9323e05910634427922251bf7e512024670fdee2
Merge: a585b00... 82a6055...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 22:56:13 2003 -0800

    Merge bk://linuxusb.bkbits.net/i2c-devel-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit a585b0071f02e7ffc7188d5ae6053a0a8f117c27
Merge: 313d935... 313c01d...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 22:51:24 2003 -0800

    Merge bk://linux-scsi.bkbits.net/scsi-for-linus-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 313d93523758395262407d06b22011a69ef4320d
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Tue Dec 30 03:38:15 2003 -0600

    Megaraid compile fix

commit 7f43e27277168f1eb4bf08ce326afb357dccfcc9
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Dec 29 22:46:55 2003 -0800

    [TCP]: Make tcp_sk() do type checking.

commit a632875f1d94a901fe026191935c5b4337e51e1c
Author: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
Date:   Mon Dec 29 22:41:42 2003 -0800

    [NET]: Uninline {lock,release}_sock().

commit 0775247b867dba97ce51a766a8abed97d165ff9c
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Tue Dec 30 00:22:48 2003 -0600

    Make aic7xxx -Werror conditional on make flag WARNINGS_BECOME_ERRORS
    
    This should ensure it doesn't ordinarily break the builds, but will error out if the
    builder requests it to.

commit c21e8b9222807579fa86c115783a493f570dddf1
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Tue Dec 30 00:13:16 2003 -0600

    Update aic79xx to 1.3.11, aic7xxx to 6.2.36
    
    From: "Justin T. Gibbs" <gibbs@scsiguy.com>

commit 8e9929230c37ed5ce8bc64f37221cdb0d647eb31
Author: Ciaran McCreesh <ciaranm@gentoo.org>
Date:   Mon Dec 29 21:39:46 2003 -0800

    [SPARC64]: Fix broken _PAGE_SZHUGE defines for 512K and 64K.

commit 19774a6dc654c1e197e0a8d7976067f64eff8643
Merge: 313c01d... 0b38c67...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 21:27:12 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.6
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit a047e289f98f3f679139d21a9e72f397dc4cef07
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Mon Dec 29 23:24:55 2003 -0600

    [PATCH] Updated osst driver for 2.6.x
    
    From: Willem Riede <wrlk@riede.org>
    
    Brings 2.6.x version of osst up to par with the 2.4.y version.
    Except for the /proc changes
    Tested against released 2.6.0 kernel.
    
    Changes from what's in the kernel tree today:
    
    - Fixes bug that files shorter than one 32K frame don't get written.
    - Fix a memory alloc/free mismatch that could have made your kernel unstable after rmmod osst.
    - Fix a number of tape (re)positioning bugs around filemarks that affected Amanda, Arkeia and
      Storix backup software.
    - Rationalize module parameters.
    - Fix time-out skipping to EOD
    - Write FM+EOD+Header-update when file write terminated by ioctl
    - Follow standard Unix behavior for read at EOD (return zero bytes read twice then error)
    - Implement SETBLK ioctl (allowed before first write only)

commit 0f535a6aed3ba369f653b56f9d9f9e21ebf5e9f9
Author: Kai Mkisara <kai.makisara@kolumbus.fi>
Date:   Mon Dec 29 23:17:13 2003 -0600

    [PATCH] Add char_devs to st
    This patch adds support for cdevs to the st driver. The changes are based on
    Doug Gilbert's corresponding changes to the sg driver. Using cdevs brings the
    following advantanges:
    - support for many drives, currently the maximum is set to 128; the minor
      number assignment is explained in the patch to Documentation/scsi/README.st
    - the tape devices appear in /sys/cdev/major/st*, as an example here are
      the entries for the first drive (4 modes, rewind and non-rewind
      devices):
      /sys/cdev/major/st0m0   /sys/cdev/major/st0m1   /sys/cdev/major/st0m2
      /sys/cdev/major/st0m3
      /sys/cdev/major/st0m0n  /sys/cdev/major/st0m1n  /sys/cdev/major/st0m2n
      /sys/cdev/major/st0m3n

commit ae1092b76bd9685c98fdee5e36d2c8b635864dd5
Merge: bfd3fcf... 9dbd5c7...
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Mon Dec 29 22:58:20 2003 -0600

    Merge raven.il.steeleye.com:/home/jejb/BK/scsi-tmp-2.7
    into raven.il.steeleye.com:/home/jejb/BK/scsi-for-linus-2.6

commit 443473ed8fc19d189c71484b54023d02e78d6513
Author: Ben Collins <bcollins@debian.org>
Date:   Mon Dec 29 23:50:16 2003 -0500

    video1394.c:
      [IEEE1394]
      Patch from Damien Douxchamps to fix video1394 when image size is less than
      page size.

commit 3cb2872a75bf575af0edcb4d983ecebccf12ab58
Author: Ben Collins <bcollins@debian.org>
Date:   Mon Dec 29 23:34:47 2003 -0500

    MAINTAINERS:
      [IEEE1394]: Update maintainer info

commit 82a6055f40bee08bcbf2f7bd9901b1e1c91f11da
Merge: 313c01d... a5764c4...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 29 20:19:45 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit a5764c434af035c51c1184f136585144163c02ad
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Dec 29 20:10:39 2003 -0800

    [PATCH] I2C: lm83 driver updates
    
    Here is a patch for the lm83 driver, to be applied on top of your
    pending patches stack. What it does:
    * Remove limit initialisation by the driver. This is a backport from
      CVS.
    * A few whitespace changes inspired by my recent porting of the lm90
      driver.

commit 66c82e8099987add16008f3a3e4b5de3e0dbeaae
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Dec 29 20:10:24 2003 -0800

    [PATCH] I2C: velleman typo
    
    This patch replaces "K9000" with "K8000" everywhere (5 occurences) since
    it seems that the "K9000" was a typo in the first place. It also rewords
    the i2c-velleman doc. I have fixed it in our CVS repository too, and
    have been sending a similar patch to Marcelo for Linux 2.4.

commit c2ce36c1a3eaf51113ccd3e571bbca5a319123af
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Dec 29 20:10:08 2003 -0800

    [PATCH] I2C: Fix SCx200 dependancies
    
    The following patch fixes incorrect dependencies (as far as I can see)
    for the SCx200 modules. A similar patch (with even more fixes) is also
    needed for Linux 2.4, and will be part of my next wave to Marcelo. Note
    that I don't have the necessary hardware to actually test anything, but
    a quick look at the code doesn't leave much place for doubt IMHO.

commit fc5f46ffb85ca659c023cd28bc32092710ba90ff
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Dec 29 20:09:49 2003 -0800

    [PATCH] I2C: remove bus scan logic from i2c chip drivers
    
    This patch drops bus scan from i2c-algo-ite and i2c-ibm_iic. It also
    removes the incomplete and broken SLO_IO stuff from i2c-algo-ite.

commit e1b9575fc414f3568ddcd53242bc9663ba367c2a
Merge: b7b6a18... 8685b02...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 29 20:03:33 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/i2c-2.6
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit d412a4c3b997e313bf90dd7088216efd918ddaf2
Merge: bfd3fcf... 9403099...
Author: Ben Collins <bcollins@debian.org>
Date:   Mon Dec 29 22:58:10 2003 -0500

    Merge http://linux.bkbits.net/linux-2.5
    into debian.org:/usr/src/kernel/linux-2.6

commit 313c01d3e3fdc0c780e0445a6019e44edba5420c
Author: Matthew Wilcox <willy@debian.org>
Date:   Mon Dec 29 18:24:24 2003 -0800

    [PATCH] PA-RISC update for 2.6.0
    
    Highlights:
    
     - Switch to generic ioctl32 handling
     - Use the new *_defconfig mechanism
     - Use drivers/Kconfig
     - Big signal cleanups and support for restartable syscalls

commit bfd3fcff8e5dca44ec53075af9d61d308b451a9c
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 11:21:51 2003 -0800

    [SPARC32]: Fix build after show_interrupts() changes.

commit 1beb4f52521b9639b363f6eb1e9ce51466e755a1
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 09:15:52 2003 -0800

    [SPARC64]: Fix build after show_interrupts() changes.

commit 27d56db8e1c44a0c3ae56bf81c93601b8f24e1b0
Merge: e36a9e2... 898e7d5...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 09:05:05 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/tg3work-2.5
    into nuts.ninka.net:/disk1/davem/BK/tg3-2.6

commit 0b38c67667bb2163c910c897faa2d3e535e7a63b
Merge: 2c663d3... c869560...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 08:56:31 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/net-2.6.1
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit 2c663d3f5e9fbc0914aedfb3b5182757438ee077
Merge: e36a9e2... dd7862a...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 08:54:48 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.6
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit 1979c59933fe60b91280f40ebbf7e69dcf1cbd3f
Merge: e36a9e2... 4371c63...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 29 08:50:44 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.6
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.6

commit e36a9e24d801036ebaa76d36cd271b80d84955b4
Merge: e56b865... e40cca9...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 06:11:09 2003 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.5
    into home.osdl.org:/home/torvalds/v2.5/linux

commit e40cca9ee5e446e299bc525fb42dcd3b9efea314
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Mon Dec 29 14:05:40 2003 -0500

    [netdrvr e100] remove __devinit markers, fixing oops

commit 068ff4a2a2b410074f40e0f17de8f9963f1322e8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 13:00:49 2003 -0500

    [netdrvr 8139too] Don't hold the lock across pci_set_power_state() - it can sleep

commit 4a493b70b50b77664842c7810f4ff1050f999df9
Author: Daniele Venzano <webvenza@libero.it>
Date:   Mon Dec 29 12:59:18 2003 -0500

    [netdrvr sis900] add suspend/resume support
    
    The attached patch adds support for suspend/resume to the sis900 driver.
    With this patch on resume the NIC is fully configured and operational,
    before a module reload was needed because of the complete lack of
    suspend/resume callbacks.
    
    I added two functions, sis900_suspend and sis900_resume, with their
    pointers in struct pci_driver. A vector of 16 u32 was then needed to the
    to keep PCI data during suspend. I added it in struct sis900_private.
    I updated the revision number to reflect my changes.
    Looking at the code I also killed three typos.
    
    The patch doesn't touch any other code.
    
    Since I don't know anything on ethernet drivers the rule 'works for me'
    is fully valid.

commit e56b865f202897f2dbdc173a6e4a0719f6b5a564
Merge: 3a450ae... 5069356...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 06:09:43 2003 -0800

    Merge ia64 conflicts

commit 5069356cefe907402c94c8f1e199f2c6447fed3c
Merge: c41a3ca... 5e0bfb8...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 06:03:24 2003 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-serial
    into home.osdl.org:/home/torvalds/v2.5/linux

commit c41a3ca5f5ff1ab6be6895b92b699fc74c5f09ec
Merge: 7300a7e... 0bbe34b...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Mon Dec 29 06:01:32 2003 -0800

    Merge bk://kernel.bkbits.net/davem/net-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 7300a7e969db9e0e6d3d4bfcee74ae80abb91ebe
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:56:04 2003 -0800

    [PATCH] dm: dm_table_event() sleep on spinlock bug
    
    From: Joe Thornber <thornber@sistina.com>
    
    You can no longer call dm_table_event() from interrupt context.

commit 5762bd47ab2f7e39063c073d31a6bd1e8ed8732f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:56 2003 -0800

    [PATCH] dm: set io restriction defaults
    
    From: Joe Thornber <thornber@sistina.com>
    
    Make sure that a target has a sensible set of default io restrictions.

commit 07525f192d2b5293332a9af55c827a1f3c34f8c5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:48 2003 -0800

    [PATCH] dm: make v4 of the ioctl interface the default
    
    From: Joe Thornber <thornber@sistina.com>
    
    Make the version-4 ioctl interface the default kernel configuration option.
    If you have out of date tools you will need to use the v1 interface.

commit 938e284b157cea808f24b1ed5009ee50b0794eb5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:40 2003 -0800

    [PATCH] dm: remove dynamic table resizing
    
    From: Joe Thornber <thornber@sistina.com>
    
    The dm table size is always known in advance, so we can specify it in
    dm_table_create(), rather than relying on dynamic resizing.

commit ecb24581780ad0432cdcf7c121f6d4b3537357ef
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:33 2003 -0800

    [PATCH] dm: fix block device resizing
    
    From: Joe Thornber <thornber@sistina.com>
    
    When setting the size of a Device-Mapper device in the gendisk entry, also
    try to set the size of the corresponding block_device entry's inode.  This is
    necessary to allow online device/filesystem resizing to work correctly.
    [Kevin Corry]

commit fe08f9d519c6453858d473f0ebedb70ab7aaa10b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:25 2003 -0800

    [PATCH] name_to_dev_t() fix
    
    From: viro@parcelfarce.linux.theplanet.co.uk
    
    When we register disks, we mangle the disk names that contain slashes (e.g.
    cciss/c0d0) replacing them with '!' in corresponding sysfs names.  So
    name_to_dev_t() should mangle the name in the same way before looking for it
    in /sys/block.

commit f2d652b1738b87ac062394ed055472afc77a0660
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:17 2003 -0800

    [PATCH] Kernel Locking Documentation update
    
    From: Rusty Russell <rusty@rustcorp.com.au>
    
    Entirely revised, and largely rewritten.  Has a continuing example now, which
    I think makes things clearer.  Also covers Read Copy Update.  This version
    further deprecates rwlock_t, shuffles sections for better organization.

commit 8f6f7260a6f31e68159de1d966b17778538151b8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:09 2003 -0800

    [PATCH] VIA audio fixes
    
    From: Alan Cox <alan@redhat.com>
    
    VIA audio had a fix from 2.4 missing so any user could spam the system log. Also
    include a fix for a bug which is pending 2.4 fixing too and causes a bogus
    warning to be displayed on close of audio file handle.

commit d26133064bd43fb2fa2215ac4a882169d7412ecd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:55:01 2003 -0800

    [PATCH] cycx_drv warning fix
    
    From: Alan Cox <alan@redhat.com>
    
    Type errors, just fixes a warning

commit 3947d3ad5889b7dc41f4e096ed33066708321af1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:53 2003 -0800

    [PATCH] SCC warning fix
    
    From: Alan Cox <alan@redhat.com>
    
    Just a warning fix and behaviour tidy. Changing the kiss.mintime variable isn't
    going to work as its exposed to user space

commit 991b02df70146332bfe492139da940f28c50c6b5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:46 2003 -0800

    [PATCH] update sn2 MAINTAINERS file entry
    
    From: jbarnes@sgi.com (Jesse Barnes)
    
    Just a quick patch to fix MAINTAINERS for sn2.

commit b61db7f23201e3d270dc079e669a683f7ad31414
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:37 2003 -0800

    [PATCH] Winbond w83627hf driver
    
    From: Pdraig Brady <P@draigBrady.com>
    
    Watchdog driver for the Winbond w83627hf which is on the last 3 motherboards
    I got here for test (tyan, advantech, force).

commit 995fa64b43819bda40faffc42083fe9575d6a969
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:29 2003 -0800

    [PATCH] Fix ioctl related warnings in userspace
    
    From: Johannes Stezenbach <js@convergence.de>
    
    the patch below removes warnings like:
    
      warning: signed and unsigned type in conditional expression
    
    when compiling userspace applications against a glibc built with 2.6 kernel
    headers (like on Debian unstable).

commit 8299fdeb461e6021ea4498d87cad056612b86841
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:21 2003 -0800

    [PATCH] Rename legacy_bus to platform_bus
    
    From: Jeff Garzik <jgarzik@pobox.com>
    
    I've seen this patch floating around.  Not sure the origin, but it's
    surfaced on lkml and also when I was poking around handhelds.org CVS for
    iPAQ patches:  on non-PCs, particularly system-on-chip devices but not
    just there, you have a custom "platform bus" that is the root of pretty
    much all other devices and buses.
    
    It's something I wanted to make sure people didn't forget; to make sure
    the legacy_bus didn't get "legacied out of existence."  ;-)

commit 99365bd4725d431255ff4bdd51fb3dca60c47322
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:13 2003 -0800

    [PATCH] synchronize use of mm->core_waiters
    
    From: Roland McGrath <roland@redhat.com>
    
    I believe I have identified a failure mode that Linus saw a couple weeks
    back when tracking down some other fork/exit sorts of races.  We saw this
    come up on rare occasions with the RHEL3 kernel's backport of the new code
    (while trying to track down other race failure modes we have yet to fix, sigh).
    
    I am talking about the following scenario:
    
    > Btw, even with the fix, doing a "while : ; ./crash t 10 ; done" will
    > eventually result in a stuck process:
    >
    > 	 1415 tty1     D      0:00 ./crash
    >
    > This is some kind of deadlock: most of the fifty threads are in "D"
    > state, with a trace something like
    >
    > 	 [<c011fbe3>] schedule+0x360/0x7f8
    > 	 [<c0120539>] wait_for_completion+0xd4/0x1c3
    > 	 [<c0128c9e>] do_exit+0x627/0x6a4
    > 	 [<c0128ddd>] do_group_exit+0x3d/0x177
    > 	 [<c0130c13>] dequeue_signal+0x2d/0x84
    > 	 [<c0133911>] get_signal_to_deliver+0x390/0x575
    > 	 [<c010a541>] do_signal+0x6c/0xf1
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c013d50f>] do_futex+0x6d/0x7d
    > 	 [<c013d635>] sys_futex+0x116/0x12f
    > 	 [<c010a601>] do_notify_resume+0x3b/0x3d
    > 	 [<c010a82e>] work_notifysig+0x13/0x15
    >
    > except for one that is trying to core-dump:
    >
    > 	 [<c0120539>] wait_for_completion+0xd4/0x1c3
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c02101aa>] rwsem_wake+0x86/0x12d
    > 	 [<c01738af>] coredump_wait+0xa8/0xaa
    > 	 [<c0173a26>] do_coredump+0x175/0x26c
    >
    > and three that are just doing a regular "exit()" system call:
    >
    > 	 [<c011fbe3>] schedule+0x360/0x7f8
    > 	 [<c011e19a>] recalc_task_prio+0x90/0x1aa
    > 	 [<c0120539>] wait_for_completion+0xd4/0x1c3
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c01200be>] default_wake_function+0x0/0x12
    > 	 [<c0210207>] rwsem_wake+0xe3/0x12d
    > 	 [<c0128c9e>] do_exit+0x627/0x6a4
    > 	 [<c0128d4d>] next_thread+0x0/0x53
    > 	 [<c010a7e3>] syscall_call+0x7/0xb
    >
    > However, the rest of the system is totally unaffected by this deadlock:
    > it's only deadlocked withing the thread group itself, nobody else cares.
    
    What happens here is a race between an exiting thread checking
    mm->core_waiters in __exit_mm, and the thread taking the core-dump signal
    (in coredump_wait) examining the first thread's ->mm pointer and
    incrementing mm->core_waiters to account for it.  There is no
    synchronization at all in __exit_mm's use of mm->core_waiters.  If the
    coredump_wait thread reads tsk->mm when tsk is in __exit_mm between
    checking mm->core_waiters and clearing tsk->mm, then it will increment
    mm->core_waiters and the total count will later exceed the number of
    threads that will ever decrement it and synchronize.  Hence it blocks forever.
    
    The following patch fixes the problem by using mm->mmap_sem in __exit_mm.
    The read lock must be held around checking mm->core_waiters and clearing
    tsk->mm so that coredump_wait (which gets the write lock) cannot come in
    between and do bogus bookkeeping.

commit dc942a21e4c8fd1cbc135ad3ca35178c6217c77a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:54:05 2003 -0800

    [PATCH] DAC960 request queue per disk
    
    From: Dave Olien <dmo@osdl.org>
    
    Here's a patch that changes the DAC960 driver from having one request
    queue for ALL disks on the controller, to having a request queue for
    each logical disk.  This turns out to make little difference for deadline
    scheduler, nor for AS scheduler under light IO load.  But under AS
    scheduler with heavy IO, it makes about a 40% difference on dbt2
    workload.  Here are the measured numbers:
    
    The 2.6.0-test11-D kernel version includes this mutli-queue patch to the
    DAC960 driver.
    
    For non-cached dbt2 workload  (heavy IO load)
    
    Scheduler	kernel/driver	NOTPM(bigger is better)
    AS		2.6.0-test11-D  1598
    AS		2.6.0-test11     973
    deadline	2.6.0-test11    1640
    deadline	2.6.0-test11-D  1645
    
    For cached dbt2 workload (lighter IO load)
    
    AS		2.6.0-test11-D  4993
    AS		2.6.-test6-mm4  4976, 4890, 4972
    deadline	2.6.0-test11-D  4998
    
    Can this be included in 2.6.0?  I know it's not a "critical patch"
    in the sense that something won't work without it.  On the other hand,
    the change is isolated to a driver.

commit dd5a4db6dc90f5dc72c2f4dc38e7880a28d58433
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:57 2003 -0800

    [PATCH] fix userspace compiles with nbd.h
    
    From: Paul Clements <Paul.Clements@SteelEye.com>
    
    A previous "cleanup" on the nbd.h header file broke userspace compiles.
    I've added an #ifdef __KERNEL__ so that userspace doesn't need to worry
    about the nbd_device structure, which is only used in-kernel. The patch
    allows me to compile my nbd tools with the 2.6 nbd.h.

commit fe8bbcd3b5a0daa344f98024463f253b11d71b52
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:49 2003 -0800

    [PATCH] isdn_ppp_ccp.c uses uninitialized spinlock
    
    From: Tonnerre Anklin <thunder@keepsake.ch>
    
    This spinlock was used uninitialized. Gave me a lot of warnings.

commit d71abcafd0e7b40c3ced606ab2aea26f3f81006a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:42 2003 -0800

    [PATCH] nr_slab accounting fix
    
    From: Manfred Spraul <manfred@colorfullife.com>
    
    if alloc_slabmgmt fails, then kmem_freepages() calls sub_page_state(),
    altough nr_slab was not yet increased.  The attached patch fixes that by
    moving the inc_page_state into kmem_getpages().

commit 6788a95d126c6ebdda753ecfc77764f96f123c3a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:33 2003 -0800

    [PATCH] More MODULE_ALIASes
    
    From: Rusty Russell <rusty@rustcorp.com.au>
          Steve Youngs, Stephen Hemminger
    
    Three more MODULE_ALIASes.  Trivial, but useful if people want things
    to "just work" in 2.6.0.

commit e85132b27178b4a791e2f075bb298eaa1d9dfeba
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:25 2003 -0800

    [PATCH] struct_cpy compilation warning
    
    From: Ingo Molnar <mingo@elte.hu>
    
    i've attached a minor fix for the 2.6.1 timeframe - we clearly meant
    __struct_cpy_bug().  Newest versions of gcc warn about this.

commit 1cdf0eef0da7e893a3b7adafd907d97fcc79d317
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:17 2003 -0800

    [PATCH] slab reclaim accounting fix
    
    From: Manfred Spraul <manfred@colorfullife.com>
    
    slab_reclaim_pages is increased even if get_free_pages fails.  The attached
    patch moves the update to the correct position.

commit 162bc7d1275721eeee98e2321f3ec03b57ac56fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:09 2003 -0800

    [PATCH] fix outdated comment in jiffies.h
    
    From: Tim Schmielau <tim@physik3.uni-rostock.de>

commit a4b05bb1936d15d0dd7ee482b7ce7dd4766a6988
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:53:02 2003 -0800

    [PATCH] Allow unimap change on non fg console
    
    From: Kurt Garloff <garloff@suse.de>
    
    The comment in front of vt_ioctl() reads
    /*
     * We handle the console-specific ioctl's here.  We allow the
     * capability to modify any console, not just the fg_console.=20
     */
    
    Unfortunately, this does not apply to PIO_UNIMAPCLR, nor
    GIO_/PIO_UNIMAP. They always operate on the current foreground
    console, which is inconsistent at least. For most ioctls, the
    comment is applicable.
    
    It also causes problems, as setfont can't do the full job on
    the non-fg consoles. (OK, our setfont is slightly changed to
    even try it ... as you know.)
    
    The attached patch does fix this.
    
    I have a similar patch for 2.4, but it never got merged :-(
    because not many people seem to care and I submitted in the middle
    of the 2.4 series ...
    It has been in UnitedLinux/SUSE kernels for ages, though.

commit e86ff3c7f47b6aa3eb59fd7b1b6a4f9e3a1e5c76
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:55 2003 -0800

    [PATCH] Clear dirty bits etc on compound frees
    
    From: "Martin J. Bligh" <mbligh@aracnet.com>,
          Guillaume Morin <guillaume@morinfr.org>
    
    We need to clear the software dirty bit on the tail pages of a compound page
    when freeing it up.
    
    The tail pages can become dirtied by mmap'ing /dev/mem, and writing into
    any clustered page group (that a driver might have created or whatever).
    
    Plus it's better to run all these pages through the free_pages_check checks
    anyway.

commit 3182fe922bfe643b496950feb9e037d237125954
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:48 2003 -0800

    [PATCH] list_empty_careful() documentation.
    
    From: Ingo Molnar <mingo@elte.hu>
    
    I'd also suggest the following patch below, to clarify the use of
    unsynchronized list_empty().  list_empty_careful() can only be safe in the
    very specific case of "one-shot" list entries which might be removed by
    another CPU.  (but nothing else can happen to them and this is their only
    final state.) list_empty_careful() is otherwise completely unsynchronized
    on both the compiler and CPU level and is not 'SMP safe' in any way.

commit c13bb4092eaad8ab8aeee575d97dafa8dab0c915
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:38 2003 -0800

    [PATCH] MAINTAINERS vger.rutgers.edu
    
    From: Geert Uytterhoeven <geert@linux-m68k.org>
    
    Mailing lists at vger.rutgers.edu are obsolete, use vger.kernel.org
    instead.

commit 0eea20401e724ec0a64a5ee149bc1fa8c5945cae
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:31 2003 -0800

    [PATCH] more correct get_compat_timespec interface
    
    From: Joe Korty <joe.korty@ccur.com>
    
    The API for get_compat_timespec / put_compat_timespec is incorrect, it
    forces a caller with const args to (incorrectly) cast.  The posix message
    queue patch is one such caller.

commit 0f4e98bc3c6c9979ee5a12e64a9eb8dea2d4d086
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:23 2003 -0800

    [PATCH] dvb i2c timeout fix
    
    From: Gerd Knorr <kraxel@bytesex.org>
    
    Below is a ObviouslyCorrect[tm] patch which fixes the i2c bus timeout
    handling in the saa7146 driver.

commit 524e63d2931ea85a81c29d6cebea700cdbb311d7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:15 2003 -0800

    [PATCH] JBD: b_committed_data locking fix
    
    The locking rules say that b_committed_data is covered by
    jbd_lock_bh_state(), so implement that during the start of commit, while
    throwing away unused shadow buffers.
    
    I don't expect that there is really a race here, but them's the rules.

commit 7e3989bb735eee7301e5134c656f8a0c7c96122f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:07 2003 -0800

    [PATCH] O_DIRECT memory leak fix
    
    From: Badari Pulavarty <pbadari@us.ibm.com>
    
    I found the problem with O_DIRECT memory leak.
    
    The problem is, when we are doing DIO read and crossed the end of file - we
    don't release referencess on all the pages we got from get_user_pages().
    (since it is a success case).
    
    The fix is to call dio_cleanup() even for sucess cases.

commit 0363994f284650185044e53988106e4cd4f4a152
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:52:00 2003 -0800

    [PATCH] fix ELF exec with huge bss
    
    From: Roland McGrath <roland@redhat.com>
    
    The following test program will crash every time if dynamically linked.
    I think this bites all 32-bit platforms, including 32-bit executables on
    64-bit platforms that support them (and could in theory bite 64-bit
    platforms with bss sizes beyond the bounds of comprehension).
    
    	volatile char hugebss[1080000000];
    	main() { printf("%p..%p\n", &hugebss[0], &hugebss[sizeof hugebss]);
    	 system("cat /proc/$PPID/maps");
    	 hugebss[sizeof hugebss - 1] = 1;
    	 return 23;
    	}
    
    The problem is that the kernel maps ld.so at 0x40000000 or some such place,
    before it maps the bss.  Here the bss is so large that it overlaps and
    clobbers that mapping.  I've changed it to map the bss before it loads the
    interpreter, so that part of the address space is reserved before ld.so's
    mapping (which doesn't really care where it goes) is done.
    
    This patch also adds error checking to the bss setup (and interpreter's bss
    setup).  With the aforementioned change but no error checking, "ulimit -v
    65536; ./hugebss" will crash in the store after the `system' call, because
    the kernel will have failed to allocate the bss and ignored the error, so
    the program runs without those pages being mapped at all.  With this change
    it dies with a SIGKILL as for a failure to set up stack pages.  It might be
    even better to try to detect the case earlier so that execve can return an
    error before it has wiped out the address space.  But that seems like it
    would always be fragile and miss some corner cases, so I did not try to add
    such complexity.

commit 709087ca16882297c6e553c25c77dfd9b720009a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:51 2003 -0800

    [PATCH] Erronous use of tick_usec in do_gettimeofday
    
    From: Joe Korty <joe.korty@ccur.com>
    
    do_gettimeofday() is using tick_usec which is defined in terms of USER_HZ
    not HZ.

commit c5b971d7f92c431a9bdaa0fab87445cf5d17ce97
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:44 2003 -0800

    [PATCH] md: set ra_pages for raid0/raid5 devices properly.
    
    From: NeilBrown <neilb@cse.unsw.edu.au>
    
    stripe to be effective.  This patch sets ra_pages
    appropriately.

commit 59165b4f9aa231aec02ad5a7430cceffda7f8733
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:35 2003 -0800

    [PATCH] md: Limit max_sectors on md when merge_bvec_fn defined on underlying device.
    
    From: NeilBrown <neilb@cse.unsw.edu.au>
    
    As no md personalities honour the merge_bvec_fn of underlying devices,
    we must make sure never to submit a bio larger than 1 page when a
    merge_bvec_fn is defined.
    
    raid5 already does this (it never submits bios larger than one page).
    With this patch, all other raid personalities limit their
    max_sectors when a merge_bvec_fn is present.

commit 0b0a866dc6e8791677a9e038649f3030481ed24b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:28 2003 -0800

    [PATCH] BINFMT_ELF=m is not an option
    
    From: glee@gnupilgrims.org
    
    I think Adrian had forgotten to update the help text.

commit db84a8205be93ec4f643f8df90f991336ee5f257
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:19 2003 -0800

    [PATCH] Ext3+quota deadlock fix
    
    From: Jan Kara <jack@ucw.cz>
    
    here's patch which should fix deadlock with quotas+ext3 reported in 2.4
    (the same problem existed in 2.6 but nobody found it).

commit b0d8c56240fd1a5dd4ceedd0d0e996d15ff01833
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:12 2003 -0800

    [PATCH] Fix possible oops in vfs_quota_sync()
    
    From: Jan Kara <jack@ucw.cz>
    
    I'm sending you a fix of possible Oops in vfs_quota_sync().  Actually
    nobody has run into that I found it when I was looking through the code.

commit 155717ab35a9be1c28cf651a24d242b6ca95363e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:51:05 2003 -0800

    [PATCH] sis comparison / assignment operator fix
    
    From: Geoffrey Lee <glee@gnupilgrims.org>
    
    This fixes what seems to be an obvious = vs == bug in the init301.c sis
    file.

commit 695716f5e61236afddd377fae29914463432f29f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:56 2003 -0800

    [PATCH] remove mm->swap_address
    
    From: William Lee Irwin III <wli@holomorphy.com>
    
    This field is 100% unused. This patch removes it.

commit 3b35cbe505c9c58c401d47a909350d1f516e70b8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:49 2003 -0800

    [PATCH] Fix 32bit siginfo problems on x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    32bit siginfo would sometimes get passed incorrectly on x86-64. This
    change fixes the conversion function to be a bit dumber, but more
    correct.

commit 53b3aa6c85c03e2a0d740f5258d9ec508dabd727
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:40 2003 -0800

    [PATCH] Don't panic in mpparse on x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    Merge i386 fix. Don't panic in MP table parsing when the table is bad.

commit ca981c9faddc0d86fb21d1f55fb2c1847a8ca4e8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:32 2003 -0800

    [PATCH] Signal fixes for x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    Merge signal race fixes from i386 to x86-64.
    
    Fix a bug in system call restart, noted by John Blackwood.

commit 2988d8dd689f844b76f40df2117e257368096dea
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:23 2003 -0800

    [PATCH] Merge i386 fix for page fault to x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    Merge the i386 fix for the page fault from Linus to x86-64
    (I'm not actually sure what it fixes, but if it's good for 32bit
    it is likely good for 64bit too)

commit cf79a124355bbf9c6a367ca03540d4854be055e0
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:16 2003 -0800

    [PATCH] Add more paranoid checking in x86-64 prefetch checker
    
    From: Andi Kleen <ak@muc.de>
    
    Make sure we never access anything in kernel mapping while
    doing the prefetch workaround checks on x86-64.
    
    Originally suggested by Jamie Lockier.

commit 8f0f4aaa6d653ff750922b28075db1edeaae7ac9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:08 2003 -0800

    [PATCH] Fix 32bit truncate on x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    Another potential data corruption fix.
    
    The 32bit truncate64 on x86-64 did silently truncate
    offsets >32bit. That broke mysql for example. Fix that.
    
    From Chris Wilson

commit 3959fde87627ae0ff60f093fa8c2f8e5dce39e1e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:50:00 2003 -0800

    [PATCH] Fix sysrq-t on x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    From Badari Pulavarty
    
    Without this sysrq-t shows the same backtrace for all processes on x86-64

commit 2393a309510e1b606057b08da23d62085b48c6fd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:52 2003 -0800

    [PATCH] Fix CPUID compilation on x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    A lot of people have run into this: the x86-64 cpuid driver didn't
    compile as module.
    
    Using a kludge suggested by Sam Ravnsborg.

commit f2059100b50774d36e94d2cb633c3a6edbe921a9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:45 2003 -0800

    [PATCH] Critical x86-64 IOMMU fixes for 2.6.0
    
    From: Andi Kleen <ak@muc.de>
    
    Please consider applying this patch, I would consider it critical for x86-64.
    
    The 2.6.0 x86-64 IOMMU code unfortunately had a few problems, leading
    to non booting systems and in a few cases to data corruption.
    
    It fixes a two serious bugs in handling special kinds of scatter gather
    lists in pci_map_sg.
    
    AGP was completely broken with IOMMU because of a wrong #ifdef.
    Fix that.
    
    One TLB flush optimization I did a long time ago seems to break on
    some 3ware boards (who require IOMMU because they don't support 64bit
    addresses).  The breakage lead to data corruption. This patch diables
    the optimization for now and fixes a potential SMP race in the flush
    code too. The TLB flush is done in a slower, but more reliable way
    now too.
    
    This patch fixes them. Please consider applying, because some of these
    problems hit quite many people.
    
    This also disables the IOMMU_DEBUG in the defconfig. A lot of people
    were using the IOMMU when they didn't need to, which multiplied the
    problems.
    
    IOMMU merge is disabled for now. This was an experimental optimization
    which helped with some block devices, but for production it seems to
    be better to disable it for now because there are some questionable
    corner cases when the IOMMU aperture fragments. The same is done
    for IOMMU SAC force, which was related to that.
    
    i386 has quite broken semantics for pci_alloc_consistent(). It uses
    the standard device DMA mask instead of the consistent mask. Make us
    bug-to-bug compatible here. This fixes problems with some sound
    drivers that don't support full 32bit addressing.

commit b14a4258a69ee74c226097e0ed36f1b3ae6bbcfc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:36 2003 -0800

    [PATCH] Add a.out support for x86-64
    
    From: Andi Kleen <ak@muc.de>
    
    Add 32bit a.out support for x86-64.
    
    Not exactly an important bug fix, but maybe it will help someone.  This
    should increase the current 98% compatibility to i386 to perhaps 98.1% @)
    
    I tested an old a.out SuSE 4.2 installation in chroot and it worked.  It
    also ran some very old linux binaries from '92 found on ftp.funet.fi.  The
    only program that didn't was the SuSE a.out GNU emacs, but I was too lazy
    to track that down.  Core dumps are not supported.

commit dce807770035b3b6d06f6d9317a336cf21a7b26a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:29 2003 -0800

    [PATCH] statfs64 fix
    
    From: Andi Kleen <ak@muc.de>
    
    It fixes the statfs64 emulation on x86-64.  The problem is that x86-64
    needs an __attribute__((aligned)) on the compat_statfs64 structure.  The
    conclusion last time this was discussed was that the structure should be
    duplicated.
    
    Essentially it is the old shared structure copied to every user and x86-64
    uses __attribute__((packed)).

commit 85734c4777ef9ea13f46fcc5d666b4e662197878
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:20 2003 -0800

    [PATCH] dm and bounce buffer panic fix
    
    From: Mark Haverkamp <markh@osdl.org>
    
    About three weeks ago markw at osdl posted a mail about a panic that he
    was seeing:
    
    http://marc.theaimsgroup.com/?l=linux-kernel&m=106737176716474&w=2
    
    I believe what is happening, is that the dm __clone_and_map function is
    generating bio structures with the bi_idx field non-zero.  When
    __blk_queue_bounce creates a new bio with bounce pages, it sets the bi_idx
    field to 0 rather than the bi_idx of the original.  This causes trouble since
    bv_page pointers will be dereferenced later that are zero.  The following
    uses the original bio structure's bi_idx in the new bio structure and in
    copy_to_high_bio_irq and bounce_end_io.
    
    This has cleared up the panic when using the volume.
    
    (acked by Joe Thornber)

commit 9907e7365cfaad37e83a31fa275b9841cf6da279
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:13 2003 -0800

    [PATCH] ext3: bd_claim for journal device
    
    From: Neil Brown <neilb@cse.unsw.edu.au>
    
    Change ext3 to run bd_claim() against external journal devices. It is
    significant only for those who have ext3 journals on a separate device, and
    gets exclusive access to that device.

commit 1fcec52f54d69cfb15f6838ec76596205e6fde10
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:49:05 2003 -0800

    [PATCH] remove include recursion from linux/pagemap.h
    
    From: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    
    pagemap.h, do not include thyself.

commit 1b6f967a995808eccfe7d92c10d5e0d349b498a8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:57 2003 -0800

    [PATCH] remove lock_kernel() from proc_bus_pci_lseek()
    
    Remove pointless lock_kernel(), replace with the standard-but-still-odd
    i_sem-based lseek locking.

commit 4617516d73ac9e5526046202f9c690e64b923f61
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:49 2003 -0800

    [PATCH] fix oops in proc_kill_inodes()
    
    proc_kill_inodes() walks the s_files list, playing with ->f_dentry.
    
    But there is a window in which __fput() will leave a file on that list with a
    null f_dentry and f_vfsmnt.
    
    I'm not sure it was ever confirmed that this fixed the reported oops, but it
    seems much better to set those fields to null _after_ removing the filp from
    the list.
    
    (Actually, there's no need to null those pointers out at all.  But whatever;
    it caught a bug).

commit d2c585d3dd5787bb24c0eb1c01890a9e51c1534f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:41 2003 -0800

    [PATCH] pagefault accounting fix
    
    From: William Lee Irwin III <wli@holomorphy.com>
    
    Our accounting of minor faults versus major faults is currently quite wrong.
    
    To fix it up we need to propagate the actual fault type back to the
    higher-level code.  Repurpose the currently-unused third arg to ->nopage
    for this.

commit 282ed0030c6f27691a59ebadd206f96a056a4ceb
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:33 2003 -0800

    [PATCH] Remove CLONE_FILES from init kernel thread creation
    
    From: James Morris <jmorris@redhat.com>
    
    The patch below removes the CLONE_FILES flag from the kernel_thread() call
    which starts init.
    
    This is to prevent other kernel threads from sharing file descriptors
    opened by init (try 'lsof /dev/initctl' on a 2.6 system :-).
    
    The reason this patch is being proposed is so that usermode helper apps
    launched via kernel threads (e.g. modprobe, hotplug) do not then inherit
    any such file descriptors.  This is not a problem in itself so far (other
    than being messy), but it is a problem for SELinux, which will otherwise
    need to grant access to /dev/initctl by modprobe and hotplug, a somewhat
    undesirable scenario.
    
    As far as I can tell, there is no reason why init needs to be spawned with
    CLONE_FILES.  Please let me know if there are any objections to the
    change, which I would like to propose for 2.6.0+ as a cleanup.

commit 125a4634c6d1bdf5a785ef59153324cbb844043c
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:24 2003 -0800

    [PATCH] Add support for SGI's IOC4 chipset
    
    From: Aniket Malatpure <aniket@sgi.com>
    
    Adds support for the IOC4 IDE part.

commit 409c7f3a52208b88197a87231bee8ea50c91630d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:16 2003 -0800

    [PATCH] new /proc/irq cpumask format; consolidate cpumask display and input code
    
    From: Paul Jackson <pj@sgi.com>
    
    This patch is a followup to one from Bill Irwin.  On Nov
    17, he had consolidated the half-dozen chunks of code
    that displayed cpumasks in /proc/irq/prof_cpu_mask and
    /proc/irq/<pid>/smp_affinity into a single routine, which he
    called format_cpumask().
    
    I believe that Andrew Morton has accepted Bill's patch into
    his 2.6.0-test10-mm1 patch set as the "format_cpumask" patch.
    I hope that the following patch will replace Bill's patch.
    I look forward to Bill's feedback on this patch.
    
    The following patch carries Bill's work further:
    
     1) It also consolidates the input side (write syscalls).
     2) It adapts a new format, same on input and output.
     3) The core routines work for any multi-word bitmask,
        not just cpumasks.
     4) The core routines avoid overrunning their output
        buffers.
    
    Note esp. for David Mosberger:
    
        The small patch I sent you and the linux-ia64 list
        yesterday entitled: "check user access ok writing
        /proc/irq/<pid>/smp_affinity" for arch ia64 only is
        _separate_ from the following patch.  Neither presumes the
        other.  However, they do collide on one line.  Last one in
        is a Monkey's Uncle and will need an updated patch from me
        (or otherwise need to resolve the one obvious collision).
    
    Details of the following patch:
    
    Both the display and input of cpumasks on 9 arch's are
    consolidated into a single pair of routines, which use the
    same format for input and output, as recommended by Tony
    Luck.  The two common routines work on any multi-word bitmask
    (array of unsigned longs).  A pair of trivial inline wrappers
    cpumask_snprintf() and cpumask_parse() hide this generality
    for the common case of cpumask input and output.
    
    My real motivation for consolidating this code will become
    visible later - when I seek to add a nodemask_t that resembles
    cpumask_t (just a different length).  These common underlying
    routines will be used there as well, following up on a suggestion
    of Christoph Hellwig that I investigate implementing nodemask_t
    as an ADT sharing infrastructure with cpumask_t.  However, I
    believe that this patch stands on its own merit, consolidating
    a couple hundred lines of duplicated code, and making the
    cpumask display format usable on very large systems.
    
    There are two exceptions to the consolidation - the alpha and
    sparc64 arch's manipulate bare unsigned longs, not cpumask_t's,
    on input (write syscall), and do stuff that was more funky than
    I could make sense of.  So the input side of these two arch's
    was left as-is.  I'd welcome someone with access to either of
    these systems to provide additional patches.
    
    The new format consists of multiple 32 bit words, separated by
    commas, displayed and input in hex.  The following comment from
    this patch describes this format further:
    
    * The ascii representation of multi-word bit masks displays each
    * 32bit word in hex (not zero filled), and for masks longer than
    * one word, uses a comma separator between words.  Words are
    * displayed in big-endian order most significant first.  And hex
    * digits within a word are also in big-endian order, of course.
    *
    * Examples:
    *   A mask with just bit 0 set displays as "1".
    *   A mask with just bit 127 set displays as "80000000,0,0,0".
    *   A mask with just bit 64 set displays as "1,0,0".
    *   A mask with bits 0, 1, 2, 4, 8, 16, 32 and 64 set displays
    *     as "1,1,10117".  The first "1" is for bit 64, the second
    *     for bit 32, the third for bit 16, and so forth, to the
    *     "7", which is for bits 2, 1 and 0.
    *   A mask with bits 32 through 39 set displays as "ff,0".
    
    The essential reason for adding the comma breaks was to make
    the long masks from our (SGI's) big 512 CPU systems parsable by
    humans.  An unbroken string of 128 hex digits is pretty difficult
    to read.  For those who are compiling systems with CONFIG_NR_CPUS
    of 32 or less, there should be no visible change in format.
    
    There are of course a thousand possible output formats that
    meet similar criteria.  If someone wants to lobby for and seek
    consensus behind another such format, that's fine.  Now that
    the format is consolidated into a single pair of routines,
    it should be easy to adapt whatever we choose.
    
    Internally, the display routine uses snprintf to track the
    remaining space in its output buffer, to avoid the risk of
    overrunning it.
    
    A new file, lib/mask.c, is added to the lib directory, to
    hold the two common routines.  I anticipate adding a few more
    common routines for generic support of multi-word bit masks to
    lib/mask.c, in subsequent patches that will add a nodemask_t
    type as an ADT sharing implementation with cpumask_t.

commit 89832108da4bcc2763a69c75d5795768d0424a6b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:48:07 2003 -0800

    [PATCH] cpumask.h reorg
    
    From: Paul Jackson <pj@sgi.com>
    
    Push the cpumask implementation from linux/cpumask.h into asm/cpumask.h, so
    that ia64 can do special things without breaking sparc64.
    
    1) Each arch has its own include/asm-<arch>/cpumask.h file
    
    2) That arch-specific header file can include <asm-generic/cpumask.h>,
       if it wants to make use of the generic cpumask implementation.
    
    3) Using code should continue to include linux/cpumask.h, which
       in turn includes asm/cpumask.h.  Some common implementation
       independent cpumask related items, such as the cpu_online_map,
       are declared directly in linux/cpumask.h.

commit adf9a351f27edbaf434ab450f8c09e784ca1cf78
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:59 2003 -0800

    [PATCH] Add lib/parser.c kernel-doc
    
    From: Will Dyson <will_dyson@pobox.com>
    
    Add documentation and comments to lib/parser.c and include/linux/parser.h

commit cb8d8fe991409fd5c017e35c68274e2967451247
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:51 2003 -0800

    [PATCH] IDE capability elevation fix
    
    From: Alan Cox <alan@redhat.com>
    
    Capability elevation bug in 2.6.0 IDE. Long fixed in 2.4.x, trivial to cure

commit 90c6dd7743e91d6aae22e9209c65ea73757c18d9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:43 2003 -0800

    [PATCH] IDE MMIO fix
    
    From: Alan Cox <alan@redhat.com>
    
    IDE core code had the mmio==2 (ioremap) mode supported but two small changes
    had been missed for ide-dma.c.  Without this fix mmio IDE controllers bomb if
    you have plenty of memory as it uses request_mem_region on an ioremap return.

commit 22f4d9f1c0a1cf3766a99a873d8dacc921c4cbfa
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:35 2003 -0800

    [PATCH] Can't disable IDE DMA
    
    From: Peter Chubb <peterc@gelato.unsw.edu.au>
    
    If you try to disable IDE DMA from Kconfig, you'll end up with an undefined
    symbol, ide_hwif_setup_dma().
    
    The attached rather ugly patch fixes the problem by defining a dummy
    function.

commit c1f0e6533b58a7ec48d91b195e9f07dae52071f7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:28 2003 -0800

    [PATCH] PIIX5 Doesn't work on IA64
    
    From: Peter Chubb <peterc@gelato.unsw.edu.au>
    
    The PIIX5 IDE controller on I2000 IA64 boxen using the 460GX chipset will
    hang on startup if an ordinary harddrive is plugged into it (it seems to
    workj for the LSI120 and the CDROM drives).
    
    This is because the 460GX chipset contains a PCI expanssion bridge that
    works like the 450NX PXB, and has the same PCI ID (but a later revision).
    The PIIX driver, to work around interactions between PIIX4 and the 450NX
    PXB, tries to disable DMA.
    
    Unfortunately, the way it tries to disable DMA doesn't work, and the higher
    layers think that DMA is still on, and so timeout waiting for DMA, and then
    hang on bootup.
    
    A simple workaround is to tighten the check for the buggy chipset, as in
    the attached patch.  However, someone with more time (and who actually
    *understands* the IDE subsystem) needs to fix the real bug as well.

commit 8179c97ef4e7728ce124ed48d065b46d9673035b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:20 2003 -0800

    [PATCH] ide-tape update
    
    From: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>,
          Stuart Hayes <stuart_hayes@dell.com>
    
    - Check drive's write protect bit, try to return appropriate
      errors when attempting to write a write-protected tape.
    
    - Moved "idetape_read_position" call in idetape_chrdev_open
      after the "wait_ready" call.
    
    - Added IDETAPE_MEDIUM_PRESENT flag so driver would know
      not to rewind tape after ejecting it.
    
    - Fixed bug with ide_abort_pipeline (it was deleting stages
      from tape->next_stage to end, instead of from
      new_last_stage->next (tape->next_stage was set to NULL
      by idetape_discard_read_pipeline before calling!).
    
    - Made improvements to idetape_wait_ready.
    
    - Added a few comments here and there.
    
    - Made MTOFFL unlock tape drive door before attempting to eject.
    
    - Added fixes to get Seagate STT3401A Travan working:
      Handle drives that don't support 0-length reads/writes increased timeout
      (retension takes ~10 minutes before irq is returned).
      Fixed request mode page packet command byte 3.
    
    Also remove code depending on NO_LONGER_REQUIRED to match 2.4.x (me).

commit 14209d06cdeff3e3497ecb2a720a6f11d393bad5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:12 2003 -0800

    [PATCH] Minor bug fixes to the compat layer
    
    From: Arun Sharma <arun.sharma@intel.com>
    
    - Several instances where we were using pid_t instead of uid_t
    
    - If the caller passed a NULL `oldact' pointer into sys_sigprocmask then
      don't try to write the old sigmask there.

commit 413393076d7b90e7862abc3bc74c8c81149e0714
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:47:04 2003 -0800

    [PATCH] watchdog write() return value fixes
    
    From: gleb@nbase.co.il (Gleb Natapov)
    
    There is inconsistency in fops->write() implementation in different
    watchdog drivers.  Some of them return number of bytes written while others
    return 1.
    
    I think the correct implementation should always return number of bytes
    written (we examine all the buffer after all) otherwise "echo V >
    /dev/watchdog" doesn't work as expected (it doesn't stop watchdog).

commit a7380b60b3bf457322551168f97c845257f544dd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:56 2003 -0800

    [PATCH] missing padding in cpio_mkfile in usr/gen_init_cpio.c
    
    From: Olaf Hering <olh@suse.de>
    
    We need to update `offset' here so that the subsequent push_pad() (which
    uses `offset') will do the right thing.

commit a5c9613f0b9a0a29db804c6194989f3b87ca361a
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:48 2003 -0800

    [PATCH] document elevator= parameter
    
    From: Valdis.Kletnieks@vt.edu
    
    Nick wrote a nice as-iosched.txt file, but apparently nobody updated the
    kernel-parameters.txt file...

commit ce2da20ec7cdbac75c2c61fba73b67036f0c7f33
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:40 2003 -0800

    [PATCH] support centrino 1GHz
    
    From: Jeremy Fitzhardinge <jeremy@goop.org>
    
    I've been getting quite a lot of people mailing me about this CPU.  It
    seems Toshiba has released a machine with it.  It would be nice if this
    patch gets into a kernel soonish.  It's very low-impact.

commit a77ef2294a9cec742ff6bd2ea1673b63888ff3f2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:31 2003 -0800

    [PATCH] Intel 440gx PCI IDs
    
    - Add missing PCI ID
    
    - Forward-port IRQ routing workaround from 2.4.

commit ab6b18103ac0d34902fa4c9503067c2cb1074b72
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:23 2003 -0800

    [PATCH] seq_file version of /proc/interrupts
    
    From: corbet@lwn.net (Jonathan Corbet)
    
    This converts all architectures' /proc/interrupts implementation over to
    seq_file.  We need this for SMP machines with ridiculous numbers of CPUs and
    if you convert one arch, you have to convert them all...

commit b031787ee72fdcd2b69cd046628b887973309e7f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:16 2003 -0800

    [PATCH] eicon/ and hardware/eicon/ drivers using the same symbols
    
    From: Adrian Bunk <bunk@fs.tum.de>
    
    The legacy eicon driver in drivers/isdn/eicon is the old one and will be
    removed as soon as all features went to the new driver.  Anyway this old
    driver was never meant to be non-module.

commit 54f47272ef269a56271c92ac1ace5b2d5c04da27
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:07 2003 -0800

    [PATCH] fix SOUND_CMPCI Configure help entry
    
    From: Adrian Bunk <bunk@fs.tum.de>
    
    the issue below is only a minor documentation fix, but it has confused
    me when configuring a kernel for such a card.

commit 2d0014c7dfca379b3ffcce8b7fc6014d1360e6fd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:46:00 2003 -0800

    [PATCH] find_busiest_queue() commentary fix
    
    From: Ingo Molnar <mingo@elte.hu>
    
    Clarify a comment in the CPU scheduler.

commit 22565897da1265120070ed8d7f534bddd37f1a69
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:53 2003 -0800

    [PATCH] use alloc_percpu in percpu_counters
    
    From: Martin Hicks <mort@wildopensource.com>
    
    Once NR_CPUS exceeds about 300 ext2 and ext3 will not compile, because the
    percpu counters in the superblocks are so huge that they cannot be kmalloced.
    
    Fix this by converting the percpu_counter mechanism to use alloc_percpu()
    rather than an NR_CPUS-sized array.

commit 55e8b1a195a813abfb91fae221c481c0fa77b55f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:44 2003 -0800

    [PATCH] lockless semop
    
    From: Manfred Spraul <manfred@colorfullife.com>
    
    attached is the lockless semop patch. I did another test run with
    idle=poll on an pentium III, and it remained unchanged: 99.9% direct
    fast path, 0.1% race with wakeup against writing the final result code:
    
    http://khack.osdl.org/stp/282936/environment/proc/slabinfo
    
    That means there is no immediate need to add the two-stage
    implementation to finish_wait.
    
    It reduces the spinlock operations on the semaphore array spinlock by 1/3.

commit 1af764e128e94b1f3c1c4e4f38259898149cf527
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:37 2003 -0800

    [PATCH] Fix writev atomicity on pipe/fifo
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    Current writev() of pipe/fifo can be interleaved with data from other
    processes doing writes even when the requests size is <= PIPE_BUF.  These
    writes should in fact be atomic.
    
    The readv() side is also supported for same behavior with read().  And it
    is faster.
    
    readv/writev version of bw_pipe in LMbench
    
    2.6.0-test9-bk12
    hirofumi@devron (i686-pc-linux-gnu)[1010]$ ./bw_pipe -m 4096 -M 5
    Pipe bandwidth: 45.53 MB/sec
    hirofumi@devron (i686-pc-linux-gnu)[1009]$ ./bw_pipe -m 1024 -M 5
    Pipe bandwidth: 20.08 MB/sec
    
    2.6.0-test9-bk12 + patch
    hirofumi@devron (i686-pc-linux-gnu)[1001]$ ./bw_pipe -m 4096 -M 5
    Pipe bandwidth: 65.98 MB/sec
    hirofumi@devron (i686-pc-linux-gnu)[1002]$ ./bw_pipe -m 1024 -M 5
    Pipe bandwidth: 32.19 MB/sec

commit ed109bc5c733275283b4dbb040e9a83c81921a4d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:30 2003 -0800

    [PATCH] optimize ia32 memmove
    
    From: Manfred Spraul <manfred@colorfullife.com>
    
    The memmove implementation of i386 is not optimized: it uses movsb, which is
    far slower than movsd.  The optimization is trivial: if dest is less than
    source, then call memcpy().  markw tried it on a 4xXeon with dbt2, it saved
    around 300 million cpu ticks in cache_flusharray():
    
    oprofile, GLOBAL_POWER_EVENTS, count 100k
    Before:
    c0144ed1 <cache_flusharray>: /* cache_flusharray total:  21823  0.0165 */
         6 4.5e-06 :c0144f8e:       cmp    %esi,%ebx
        11 8.3e-06 :c0144f90:       jae    c0144f9e <cache_flusharray+0xcd>
         3 2.3e-06 :c0144f92:       mov    %ebx,%edi
      7305  0.0055 :c0144f94:       repz movsb %ds:(%esi),%es:(%edi)
       201 1.5e-04 :c0144f96:       add    $0x10,%esp
    
    After:
    c0144f1d <cache_flusharray>: /* cache_flusharray total:  17959  0.0136 */
      1270 9.6e-04 :c0144f1d:       push   %ebp
    [snip]
         6 4.6e-06 :c0144fdc:       cmp    %esi,%ebx
        13 9.9e-06 :c0144fde:       jae    c0145000 <cache_flusharray+0xe3>
         2 1.5e-06 :c0144fe0:       mov    %edx,%eax
         1 7.6e-07 :c0144fe2:       mov    %ebx,%edi
        11 8.4e-06 :c0144fe4:       shr    $0x2,%eax
         1 7.6e-07 :c0144fe7:       mov    %eax,%ecx
      4129  0.0031 :c0144fe9:       repz movsl %ds:(%esi),%es:(%edi)
       261 2.0e-04 :c0144feb:       test   $0x2,%dl
        27 2.1e-05 :c0144fee:       je     c0144ff2 <cache_flusharray+0xd5>
                   :c0144ff0:       movsw  %ds:(%esi),%es:(%edi)
        95 7.2e-05 :c0144ff2:       test   $0x1,%dl
        96 7.3e-05 :c0144ff5:       je     c0144ff8 <cache_flusharray+0xdb>
                   :c0144ff7:       movsb  %ds:(%esi),%es:(%edi)
       121 9.2e-05 :c0144ff8:       add    $0x1c,%esp

commit e2c3c9e216d884075e00c50f7a84b5a78cdd64fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:21 2003 -0800

    [PATCH] Use NODES_SHIFT to calculate ZONE_SHIFT
    
    From: jbarnes@sgi.com (Jesse Barnes)
    
    Now that we have a proper NODES_SHIFT value, we need to use it to define
    ZONE_SHIFT otherwise we'll spill over 8 bits if we have more than 85 nodes.

commit e403669ebf740531b20b7e3a70fb16de1c6a3683
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:14 2003 -0800

    [PATCH] Fix for more than 256 CPUs
    
    From: Paul Jackson <pj@sgi.com>
    
    The patch is needed to build NR_CPUS > 256.
    
    Without this fix, you get compile errors:
        include/linux/cpumask.h: In function `next_online_cpu':
        include/linux/cpumask.h:56: structure has no member named `val'

commit 6caf4668db2f0dcccf78ec8f3383a8b17c3dc0f4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:45:05 2003 -0800

    [PATCH] ia32 WP test cleanup
    
    From: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    
    Make the test unconditional - we can always run it now we have fixmap
    support.

commit 3f3a43781b570754071255349fc9ab9957aba483
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:58 2003 -0800

    [PATCH] Restore /proc/pid/maps formatting
    
    The seq_file conversion of /proc/pid/maps caused altered behaviour with
    respect to 2.4.22.  Before the conversion, spaces and tabs in filenames were
    displayed verbatim.  After the conversion they are escaped as \040, etc.
    
    Also, if the mmapped file has been unlinked the output appears as
    
    40017000-40018000 rw-p 00000000 03:02 1425800    /home/akpm/foo\040(deleted)
    
    instead of
    
    40017000-40018000 rw-p 00000000 03:02 1425800    /home/akpm/foo (deleted)
    
    This could break applications which parse /proc/pid/maps (one person has
    reported this).
    
    The patch restores the 2.4.20 behaviour.

commit e5d9d44e1f8a0c387ae5ef43e902e1ffe39107ce
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:50 2003 -0800

    [PATCH] Get modpost to work properly with vmlinux in a different directory
    
    From: "Bryan O'Sullivan" <bos@pathscale.com>
    
    The current version of modpost breaks if invoked from outside the build
    tree.  This patch fixes that, and simplifies the code a bit while it's at
    it.

commit 67fbc53420040fa77de4190c14e37863f307f6c8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:41 2003 -0800

    [PATCH] Be verbose about the ia32 time source
    
    From: john stultz <johnstul@us.ibm.com>
    
    The patch arranges for each timesource type to have a name, and uses that to
    tell the user which timesource is in use at bootup time.

commit 9c8c94922e75afa04ee2d623e27b8ed0dd0ae8f3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:34 2003 -0800

    [PATCH] vmscan: reset refill_counter after refilling the inactive list
    
    zone->refill_counter is only there to provide decent levels of work batching:
    don't call refill_inactive_zone() just for a couple of pages.
    
    But the logic in there allows it to build up to huge values and it can
    overflow (go negative) which will disable refilling altogether until it wraps
    positive again.
    
    Just reset it to zero whenever we decide to do some refilling.

commit 6f2220203d88732a4b04599e8513f6e10fcc9660
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:25 2003 -0800

    [PATCH] serial console registration bugfix
    
    From: Bjorn Helgaas <bjorn.helgaas@hp.com>
    
    uart_set_options() can dereference a null pointer.  This happens if you
    specify a console that hasn't previously been setup by early_serial_setup().
    
    For example, on ia64, the HCDP typically tells us about line 0, so we calls
    early_serial_setup() for it.  If the user specifies "console=ttyS3", we
    machine-check when trying to follow the uninitialized port->ops pointer.
    
    It's not entirely clear to me whether we should return 0 or -ENODEV or
    something.  The advantage of returning zero is that if the user specifies
    "console=ttyS0" and we just lack the HCDP, the console doesn't work as early
    as usual, but it does start working after the serial driver detects the port
    (though the baud/parity/etc from the command line are lost).  Returning
    -ENODEV seems to prevent it from ever working.

commit 783faefab8d8c5eadc6e3538999b0a407617998d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:18 2003 -0800

    [PATCH] Fix sysenter disabling in vm86 mode
    
    From: Brian Gerst <bgerst@didntduck.org>
    
    The current code disables sysenter when first entering vm86 mode, but does
    not disable it again when coming back to a vm86 task after a task switch.

commit ffd0cf49cd09ff1ef6495691d3dc076151454f14
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:10 2003 -0800

    [PATCH] Add `gcc -Os' config option
    
    From: Adrian Bunk <bunk@fs.tum.de>
    
    Allow the kernel to be built with `-Os'.
    
    It requires CONFIG_EMBEDDED.  This is to make it "hard to get at" because
    one gcc version (3.2.x I think) from RH9 generates crashy kernels with this
    option set.

commit a93fabd3f90062015859589ee8bf249a1d76a99b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:44:02 2003 -0800

    [PATCH] Fix proc_pid_lookup vs exit race
    
    From: Manfred Spraul <manfred@colorfullife.com>
    
    Fixes a race between proc_pid_lookup and sys_exit.
    
    - The inodes and dentries for /proc/<pid>/whatever are cached in the dentry
      cache.  d_revalidate is used to protect against stale data: d_revalidate
      returns invalid if the task exited.
    
      Additionally, sys_exit flushes the dentries for the task that died -
      otherwise the dentries would stay around until they arrive at the end of
      the LRU, which could take some time.  But there is one race:
    
      - proc_pid_lookup finds a task and prepares new dentries for it. It must
        drop all locks for that operation.
      - the process exits, and the /proc/ dentries are flushed. Nothing
        happens, because they are not yet in the hash tables.
      - proc_pid_lookup adds the task to the dentry cache.
    
      Result: dentry of a dead task in the hash tables.
    
      The patch fixes that problem by flushing again if proc_pid_lookup notices
      that the thread exited while it created the dentry.  The patch should go
      in, but it's not critical.
    
    
    - task->proc_dentry must be the dentry of /proc/<pid>.  That way sys_exit
      can flush the whole subtree at exit time.  proc_task_lookup is a direct
      copy of proc_pid_lookup and handles /proc/<>/task/<pid>.  It contains the
      lines that set task->proc_dentry.  This is bogus, and must be removed.
    
      This hunk is much more critical, because creates a de-facto dentry leak
      (they are recovered after flushing real dentries from the cache).

commit 0f3edb4c7b851a3e2893e64bb695b84b98e0a416
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:54 2003 -0800

    [PATCH] Fix init_i82365 sysfs ordering oops
    
    From: Russell King <rmk@arm.linux.org.uk>
    
    This oops has been caused by the need to register the class before
    registering any objects against it.  Unfortunately, the class needs
    to be registered asynchronously in a separate thread to avoid driver
    model deadlock with yenta with cardbus cards inserted or standard
    PCMCIA cards not being detected correctly due to a race.
    
    I think the only real solution is to remove the class_device_create_file
    calls from all socket drivers.  This is just a simple commenting out of
    the calls, and should be suitable for the remainder of the -test kernels.
    
    Due to the number of cases that we're encountering with PCMCIA, I'm
    beginning to wonder if the driver model could be fixed to be more kind
    to PCMCIA by avoiding some of these ordering dependencies.  None of this
    would be a problem if the driver model would allow PCI device drivers to
    register PCI devices while their probe or remove functions were executing.

commit 4e1c704a69ded8179cc30e87a630c76d70906da1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:47 2003 -0800

    [PATCH] NSL config fixes
    
    From: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    - use "select" instead of "depend"
    
    - remove the unused SMB_NLS
    
    - remove unneeded "default y" of CONFIG_NLS
    
    - revert to postion of nls menu (middle of filessytem menus is strange)
    
    - fix "#ifdef CONFIG_NLS" on UDF (should this add new one to Kconfig?)

commit 6f5bd3c517102652489075696413cc507fec7508
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:38 2003 -0800

    [PATCH] Fix dcache and icache bloat with deep directories
    
    This fixes the recently-reported "fsstress memory leak" problem.  It has been
    there since November 2002.
    
    shrink_dcache() has a heuristic to prevent the dcache (and hence icache) from
    getting shrunk too far: it refuses to allow the dcache to shrink below
    2*nr_used.
    
    Problem is, _all_ non-leaf dentries (directories) count as used.  So when you
    have really deep directory hierarchies (fsstress creates these), nr_used is
    really high, and there is no upper bound to the amount of pinned dcache.
    
    The patch just rips out the heuristic.  This means that dcache (and hence
    icache (and hence pagecache)) will be shrunk more aggressively.  This could
    be a problem, and tons of testing is needed - a new heuristic may be needed.
    
    However I am not able to reproduce the problem which cause me to add this
    heuristic in the first place:
    
       Simple testcase: run a huge `dd' while running a concurrent `watch -n1
       cat /proc/meminfo'.  The program text for `cat' gets loaded from disk once
       per second.

commit a61f972905be2166f726097dd4571c3cb8456a91
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:31 2003 -0800

    [PATCH] cmpci.c: remove pointless set_fs()
    
    It is doing a set_fs(KERNEL_DS) for no obvious reason.
    
    Spotted by margitsw@t-online.de (Margit Schubert-While)

commit 9e77aa68d4fa3034805dcc61e887d52a93b5395c
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:22 2003 -0800

    [PATCH] ext3 scheduling latency fix
    
    Sometimes kjournald has to refile a huge number of buffers, because someone
    else wrote them out beforehand - they are all clean.
    
    This happens under a lock and scheduling latencies of 88 milliseconds on a
    2.7GHx CPU were observed.
    
    The patch forward-ports a little bit of the 2.4 low-latency patch to fix this
    problem.
    
    Worst-case on ext3 is now sub-half-millisecond, except for when the RCU
    dentry reaping softirq cuts in :(

commit c5427c6878eb984c334984e40f35501c986d7e3f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:15 2003 -0800

    [PATCH] make name_to_dev_t __init
    
    It calls __init functions anyway.

commit 40ea9a64ebf1f7bd62da177824e61ada5505896b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:43:08 2003 -0800

    [PATCH] Use __GFP_REPEAT for cdrom buffer
    
    The cdrom driver does an order-4 allocation and the open will fail if that
    allocation does not succeed.  This happened to me on an unstressed 900MB
    machine.
    
    So add the __GFP_REPEAT flag in there - this will cause the page allocator to
    keep on freeing pages until the allocation succeeds.
    
    It can in theory livelock but in practice I expect it is OK: the user should
    just stop running dbench or whatever it is which is gobbling all the memory
    and the mount/open will then succeed.

commit 4d1ba80c02e0938e8cba50d27cd00a43d0609d83
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:58 2003 -0800

    [PATCH] scale the initial value of min_free_kbytes
    
    This tunable refers to the amount of free memory which the VM will attempt to
    sustain.  It is mainly needed for atomic allocations (eg, networking
    receive).
    
    It is currently hardwired to 1024k, which is far too large for small machines
    and too small for large machines.
    
    Rework it to be 128k on tiny machines and 16M on huge machines.

commit e44db7e2a54d1d00c6984908693f1eaf9bc95641
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:51 2003 -0800

    [PATCH] sqrt() fixes
    
    It turns out that the int_sqrt() function in oom_kill.c gets it wrong.
    
    But fb_sqrt() in fbmon.c gets its math right.  Move that function into
    lib/int_sqrt.c, and consolidate.
    
    (oom_kill.c fix from Thomas Schlichter <schlicht@uni-mannheim.de>)

commit 9b1ace8b89ebd4220c09f97e097b5e4547d7f746
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:42 2003 -0800

    [PATCH] compat_ioctl for i2c
    
    From: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    
    I needed those for the G5 on ppc64, so here they are, I was only
    able to test the SMBUS stuff though.

commit c596442acc26c3195a69ff63a3f8e6bb12ac4a7d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:34 2003 -0800

    [PATCH] EFI support for ia32
    
    From: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
    
    Attached is a patch that enables EFI boot-up support in ia32 kernels.
    
    In order to continue to determine whether the kernel should initialize using
    EFI tables, I've temporarily added a check on the LOADER_TYPE boot parameter.
     Although I haven't requested that elilo be assigned an id for this yet, I've
    used this to determine whether the kernel should use the EFI initialization
    path as well as a check to see if the EFI_SYSTAB boot parameter contains
    anything.  If someone has a better suggestion for determining this, I'm
    open...
    
    This patch also uses the existing ioremapping functions to map the efi tables
    into kernel virtual address space.  I've added an option such that I could
    use Dave Hansen's boot_ioremap() before paging_init().  After paging_init, I
    then remap the efi memmap using bt_ioremap for use later.  This has
    eliminated the need for several functions...thanks for the suggestions and
    thanks for your help Dave.  Still this could use a look-see.

commit f036d4ea5fa7757f833ccc098e6e7cfa4d6c446f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:23 2003 -0800

    [PATCH] ia32 Message Signalled Interrupt support
    
    From: long <tlnguyen@snoqualmie.dp.intel.com>
    
    
    Add support for Message Signalled Interrupt delivery on ia32.
    
    With a fix from Zwane Mwaikambo <zwane@arm.linux.org.uk>

commit 82b699a633699c6e25fe4423ecc86fd097f04114
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:15 2003 -0800

    [PATCH] futex uninlining
    
               text    data     bss     dec     hex filename
    Before:    4674    1040    4100    9814    2656 kernel/futex.o
    After:     4098    1176    4100    9374    249e kernel/futex.o

commit 4b66a41d7cd49f7742badabc5978732318c1e8a7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:07 2003 -0800

    [PATCH] make /proc/tty/driver/ S_IRUSR | S_IXUSR for root only
    
    From: Chris Wright <chrisw@osdl.org>
    
    Fix for CAN-2003-0461: /proc/tty/driver/serial in Linux 2.4.x reveals the
    exact number of characters used in serial links, which could allow local
    users to obtain potentially sensitive information such as the length of
    passwords.

commit ce3323db5b92fafc52824e1cffa228008299fa7d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:42:00 2003 -0800

    [PATCH] fix suid leak in /proc
    
    From: Chris Wright <chrisw@osdl.org>
    
    Fix for CAN-2003-0501: The /proc filesystem in Linux allows local users to
    obtain sensitive information by opening various entries in /proc/self
    before executing a setuid program, which causes the program to fail to
    change the ownership and permissions of those entries.

commit d585d2c0fc122ef86335d29698e27066740d33fd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:41:51 2003 -0800

    [PATCH] fix unsigned issue with env_end - env_start
    
    From: Chris Wright <chrisw@osdl.org>
    
    Fix for CAN-2003-0462:  A race condition in the way env_start and
    env_end pointers are initialized in the execve system call and used in
    fs/proc/base.c on Linux 2.4 allows local users to cause a denial of
    service (crash).

commit 02c541ec8ffa92178a93e74f1c77963d73772454
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:41:43 2003 -0800

    [PATCH] use new steal_locks helper
    
    From: Chris Wright <chrisw@osdl.org>
    
    Use the new steal_locks helper to steal the locks from the old files struct
    left from unshare_files() when the new unshared struct files gets used.

commit 088f5d7244de8d4ad0418c2ae7167fd9fe8efd31
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:41:34 2003 -0800

    [PATCH] add steal_locks helper
    
    From: Chris Wright <chrisw@osdl.org>
    
    Add steal_locks helper for use in conjunction with unshare_files to make
    sure POSIX file lock semantics aren't broken due to unshare_files.

commit 04e9bcb4d10643da38b434492fb75dd10e0ceba8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:41:27 2003 -0800

    [PATCH] use new unshare_files helper
    
    From: Chris Wright <chrisw@osdl.org>
    
    Use unshare_files during binary loading to eliminate potential leak of
    the binary's fd installed during execve().  As is, this breaks
    binfmt_som.c

commit 02cda956de0b28eeb2f65185e9800191fced01c4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 29 05:41:18 2003 -0800

    [PATCH] unshare_files
    
    From: Chris Wright <chrisw@osdl.org>
    
    Introduce unshare_files as a helper for use during execve to eliminate
    potential leak of the execve'd binary's fd.

commit 940309965898ef836ef98bab2794bc8db0ab6ff2
Merge: 88891ed... d911e85...
Author: Ben Collins <bcollins@debian.org>
Date:   Mon Dec 29 06:32:11 2003 -0500

    Merge http://linux.bkbits.net/linux-2.5
    into debian.org:/usr/src/kernel/linux-2.6

commit dd7862a29f567b9447cd6198cc643fc94f4f388c
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Mon Dec 29 01:52:28 2003 -0800

    [BRIDGE]: Always copy and save the vlan header in bridge-nf.

commit 2831834d0a34da8fe9a2f9ede28b1b2338ecc21c
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Mon Dec 29 01:47:00 2003 -0800

    [BRIDGE]: Fix loopback over bridge port.
    
    When sending a broadcast from a Linux bridge over a bridge port,
    net/ipv4/ip_output.c::ip_dev_loopback_xmit() will send the packet back
    to the bridge port. Currently, the bridge code will intercept this
    loopback packet and try to bridge it. This is not right, the loopback
    packet doesn't even have an Ethernet header. This loopback packet is
    intended for the bridge port and should not be stolen by the bridge code.
    The patch below fixes this by adding a check in __handle_bridge().
    It also changes br_netfilter.c by only doing the paranoid checks of
    br_nf_post_routing() when CONFIG_NETFILTER_DEBUG is set. I think the
    loopback fix will get rid of any skbuffs matching those paranoid checks.
    
    The patch also introduces/removes some whitespace in br_netfilter.c.

commit 4371c6315c857bad4243857b89e8a92f6451c0c1
Author: Keith M. Wesolowski <wesolows@foobazco.org>
Date:   Mon Dec 29 01:02:05 2003 -0800

    [SPARC]: Fix serial console selection.
    
    Add a generic add_preferred_console() to printk.c so that other
    platforms, such as MIPS for example, can sanely fix this problem
    as well.

commit babdc53e17ee4439167f49d3ea52b5d9ece3b10f
Author: Keith M. Wesolowski <wesolows@foobazco.org>
Date:   Mon Dec 29 00:48:41 2003 -0800

    [SPARC32]: Enable KALLSYMS.

commit 3a8d53478ed24a2d2df794986f7f1aab8e6c36b7
Merge: 42c1faa... 30ca6c0...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 23:20:28 2003 -0800

    Merge bk://kernel.bkbits.net/davem/compat-aio-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 30ca6c0b3942f3eef57a6f6e14c7c9d2042a771e
Merge: 88891ed... faee017...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Sun Dec 28 23:09:42 2003 -0800

    Merge davem@nuts.ninka.net:/disk1/davem/BK/compat-aio-2.5
    into kernel.bkbits.net:/home/davem/compat-aio-2.5

commit 42c1faa254aeedd1ca8c37a86607a7e920e3e668
Merge: 0b170e1... f23e037...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 22:54:29 2003 -0800

    Merge bk://bk.arm.linux.org.uk/linux-2.6-exp
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 0b170e19d1015fbaa053976c24b7e819cccd145f
Merge: 3a61329... 9ade043...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 22:44:52 2003 -0800

    Merge bk://kernel.bkbits.net/davem/sparc-2.5
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 0bbe34be0ab6299af94d37bf8b94a77153feb2d8
Merge: 88891ed... b1dd647...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Sun Dec 28 22:38:53 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.6
    into nuts.ninka.net:/disk1/davem/BK/net-2.6

commit 9ade0432d9fd1165aa82883ae2815369660b5a2b
Merge: 88891ed... ad2188e...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 22:37:14 2003 -0800

    Merge bk://linuxusb.bkbits.net/usb-devel-2.6
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 3a6132946096440ac7a6eb5af5fc9bd6df0a7ade
Merge: f2a39c2... 88891ed...
Author: David S. Miller <davem@kernel.bkbits.net>
Date:   Sun Dec 28 22:28:59 2003 -0800

    Merge davem@nuts.ninka.net:/disk1/davem/BK/sparc-2.5
    into kernel.bkbits.net:/home/davem/sparc-2.5

commit f2a39c2b9c814cfe2d77143ae9b76c88a663ae2a
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun Dec 28 21:16:58 2003 -0800

    [SPARC]: Get sun4c functional again in 2.6.0
    
    Move some elements of task_struct into thread_info so that
    these elements are locked into the TLB in the trap handlers
    and thus will not cause a watchdog reset.

commit 88891ed3ada078c1b74c8d53612a277223f88d13
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 21:11:19 2003 -0800

    Fix ATA 64-bit divides with CONFIG_LBD.
    
    Use "sector_div()" to do the division, that's what it
    exists for.

commit 361d16e262b19fb1b95a4b1f9464938293cc8636
Merge: e2990ed... e241138...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Sun Dec 28 21:06:51 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit 3a450ae439727ef6a091345394448a80b0e78e50
Author: Tony Luck <tony.luck@intel.com>
Date:   Sun Dec 28 20:32:37 2003 -0800

    [PATCH] ia64: clean up MCA TLB error recovery code
    
    While backporting to 2.4 I noticed a few bits
    of fluff that I'd introduced into 2.6.  Clean
    up the mess.

commit ad2188e30e958f2d646d5a25d79893c27a2d019a
Author: Arnaud Quette <arnaud.quette@mgeups.com>
Date:   Sun Dec 28 20:31:36 2003 -0800

    [PATCH] USB: disable hiddev support for MGE UPS
    
    following my recent posts on libusb-devel and hidups, here's
    a patch to disable hiddev support for MGE UPSs. It only
    declares VID/PID as QUIRK_IGNORE in hid-core's blacklist.
    This simply prevent hiddev to be loaded when plugging
    an MGE UPS.

commit 4606bd17f424e43c4c54344cccbb168561c45362
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Dec 28 20:30:55 2003 -0800

    [PATCH] USB: let USB_{PEGASUS,USBNET} depend on NET_ETHERNET
    
    Adrian Bunk wrote:
    > I observed the following small problem in 2.6:
    >
    > - MII depends on NET_ETHERNET
    > - USB_PEGASUS and USB_USBNET select MII, but they depend only on NET
    >
    > The patch below lets USB_PEGASUS and USB_USBNET depend on NET_ETHERNET
    > instead of NET to fix this issue.
    
    Actually how about this one instead?  The PEGASUS bit is the same.
    The difference is that MII (and CRC32) are only attributed to the
    driver code that needs those ... AX8817X needs both, ZAURUS just
    needs CRC32.  The core (which should eventually become a separate
    module) shouldn't depend on those modules at all.
    
    Also both CDCETHER and AX8817X are marked as non-experimental;
    I recall Dave Hollis submitted a patch to do that for AX8817X,
    and CDCETHER now seems to have gotten enough success reports too.

commit f0c8e2a33a06909bf4dce86e56e7696c74b24d8d
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Dec 28 20:30:34 2003 -0800

    [PATCH] ia64: Avoid double clear of CMC/CPE records
    
    Credit to Ben Woodard <ben@zork.net>.

commit 3b99c1c4f8dffeabe416d2d308692bc52d46d10e
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Dec 28 20:29:37 2003 -0800

    [PATCH] USB: ethernet gadget supports goku_udc
    
    This patch just adds TC86c001 (goku) UDC support to
    the "ether.c" gadget driver.  This hardware supports
    a full speed CDC Ethernet interface.

commit 4a0764a0564b5dd6eb1bd9ce12846efecad8396c
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Dec 28 20:29:21 2003 -0800

    [PATCH] USB: gadget zero updates
    
    Small updates:
    
       - support TC86c001 (goku_udc) controller
       - simplify the per-controller configuration
       - add two vendor requests to test control-OUT
       - some minor fixes

commit df4dfbbd847540a2f1ad0e0923c8b14c1d9ea45f
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Dec 28 20:29:03 2003 -0800

    [PATCH] USB: <linux/usb_gadget.h> doc updates
    
    As more people have been using this API, the need for some
    clarifications has (no surprise!) came up.
    
    Most significant is the halt processing, needed to make
    Alan's "File Storage Gadget" (mass storage class, talks
    to usb-storage and Windows) handle fault cases cleanly.
    Gadget drivers can't halt IN endpoints until the FIFO is
    emptied by the host ...  virtually no hardware tries to
    sequence the DATA and STALL packets by itself.

commit bfe27d15733b7b310b2c35288c2829ceda786d4f
Author: Arun Sharma <arun.sharma@intel.com>
Date:   Sun Dec 28 20:27:53 2003 -0800

    [PATCH] ia64: ia32 sigaltstack() fix
    
    The attached patch fixes a bug introduced by the earlier patch to
    handle the differences between ia32 and ia64 in the definition of
    MINSIGSTKSZ.

commit d4768d25be2931605a6fbb1d94479ba14e0e4c58
Author: Jack Steiner <steiner@sgi.com>
Date:   Sun Dec 28 20:22:57 2003 -0800

    [PATCH] ia64: fix ia64_ctx.lock deadlock
    
    I hit a deadlock involving the ia64_ctx.lock. The lock
    may be taken in interrupt context to process an IPI from smp_flush_tlb_mm.

commit d3d1e308df35ec17ae92cf4e032e252b86f322ad
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Sun Dec 28 20:21:02 2003 -0800

    [PATCH] USB: Stop hiddev generating empty events
    
    hiddev is mistakenly returning empty hiddev_event structures for report
    events. According to Documentation/usb/hiddev.txt, report events are
    only sent when HIDDEV_FLAG_REPORT and HIDDEV_FLAG_UREF are both set.
    Currently, report events from hid cause hiddev to generate empty
    hiddev_event events when HIDDEV_FLAG_UREF is not set.

commit e241138a007c7ab8fbc35bec219cbae541d92b40
Merge: 7629bad... a76a8a3...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 20:19:41 2003 -0800

    Merge bk://gkernel.bkbits.net/libata-2.5
    into home.osdl.org:/home/torvalds/v2.5/linux

commit a76a8a35b2c15ecaf68e1283c3e1bdc3cfa95165
Merge: d75f0d8... dbf8623...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Mon Dec 29 04:51:57 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/libata-2.5

commit 7629bad26a5c48985cc4a8b8bf3a3159f5523f63
Merge: 8a2e73e... 4c538d4...
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 20:19:04 2003 -0800

    Merge bk://gkernel.bkbits.net/net-drivers-2.5
    into home.osdl.org:/home/torvalds/v2.5/linux

commit 8a2e73e176231b2d49241e226cdb37ffa52b9b71
Merge: 7e223b7... dbf8623...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Mon Dec 29 04:54:19 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/net-drivers-2.5

commit 4f28b187b5f742437ef25d4f3b6d2da672d681fd
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Sun Dec 28 20:17:36 2003 -0800

    ia64: hugepage_free_pgtables() bug-fix
    
    	When there are two huge page mappings, like the two in the example
    	below, first one at the end of PGDIR_SIZE, and second one starts at
    	next PGDIR_SIZE (64GB with 16K page size):
    
    	8000000ff0000000-8000001000000000 rw-s
    	8000001000000000-8000001010000000 rw-s
    
    	Unmapping the first vma would trick free_pgtable to think it
    	can remove one set of pgd indexed at 0x400, and it went ahead
    	purge the entire pmd/pte that are still in use by the second
    	mapping. Now any subsequent access to pmd/pte for the second
    	active mapping will trigger the bug.  We've seen hard kernel
    	hang on some platform, some other platform will generate MCA,
    	plus all kinds of unpleasant result.

commit 4c538d4e3386262348f56190960f599c12ffc0ab
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun Dec 28 20:13:21 2003 -0800

    [PATCH] Watchdog update
    
    Kconfig:
       Reflect new watchdog Documentation directory.
    
    [USB] hid blacklist addition:
       Add the Berkshire Products USB PC Watchdog to the hid blacklist.
       This to avoid problems with USB-Disconnects when the card feels it
       should reboot...

commit a59205e09bbeff082392b58fc7822ff8c252e6c0
Merge: f71d289... 53f87a8...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Sun Dec 28 19:58:49 2003 -0800

    Merge kroah.com:/home/linux/BK/bleed-2.5
    into kroah.com:/home/linux/BK/usb-new_drivers-2.6

commit dbf8623b33dbfc22e510262b28d238c0c04b2fd8
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 19:34:17 2003 -0800

    Don't print out I/O error warnings for non-filesystem requests.
    
    The errors will be reported by the code that started the request,
    and printing out "sector numbers" for special requests makes no
    sense.

commit d911e854b34e866aeee22df9338026a0a11e664f
Merge: fe6705c... af17e3f...
Author: Ben Collins <bcollins@debian.org>
Date:   Sun Dec 28 21:55:16 2003 -0500

    Merge http://linux.bkbits.net/linux-2.5
    into debian.org:/usr/src/kernel/linux-2.6

commit f71d28992475725f9939d771180fa2a70f3df5d3
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Dec 28 18:23:53 2003 -0800

    [PATCH] Fix context switch accounting
    
    Noted by Nick Piggin, fix based on a patch by Linus.
    
    I've done some additional cleanups: fixed a compilation warning on UP
    and cleaned up the goto pick_next_task code.  Moved the 'unlikely' to
    the test as a whole.
    
    I've tested this patch and the context-switch stats look OK.

commit 5326c5351ab2a972767c45bb860915646424eec6
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 18:20:31 2003 -0800

    Turn off UHCI interrupts at initialization.
    
    The BIOS may have left the USB controller in some strange
    state, and we want to fully initialize it before we are
    ready to handle interrupts.

commit 396b282f7b5df3bfc9fbbfcfe4bc6119d57040c8
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 18:19:06 2003 -0800

    Release the mmap semaphore in the legacy 80386 "verify_area()"
    if an error happens.

commit d924c951e6a59d0a4db68412d04703856ca208c2
Author: Linus Torvalds <torvalds@home.osdl.org>
Date:   Sun Dec 28 18:18:11 2003 -0800

    Add support for checking before-the-fact whether an IRQ is
    already registered or not. The x86 PCI layer wants this for
    its availability testing.
    
    Doing a request_irq()/free_irq() pair to check this condition
    like we used to do can lock the machine if the irq happens to
    be screaming.

commit f23e0372be4716ee554e0120c3edb51aa0771d42
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Wed Dec 24 22:52:51 2003 +0000

    [ARM] Fix a small typo in SA1100 time.h

commit 65ba65151c0348d5451bbe565a9ff05d455e2933
Author: Christopher Hoover <ch@com.rmk.(none)>
Date:   Wed Dec 24 19:20:08 2003 +0000

    [ARM PATCH] 1720/1: SA-1111 IRQ fix (for OHCI USB HC)
    
    Patch from Christopher Hoover
    
    dev->irq and dev->skpcr_mask aren't initialized.  this makes the sa-1111 bus glue for the ohci driver fail.

commit 7e03417aaff90479c993ca622b080a1466c87877
Author: Peter Teichmann <mail@de.rmk.(none)>
Date:   Wed Dec 24 19:06:24 2003 +0000

    [ARM PATCH] 1718/1: vidc.c: remove vidc_mksound, add external reference clock
    
    Patch from Peter Teichmann
    
    vidc_mksound causes the kernel to crash badly when executed. As it does not do anything useful I did not take the time to find out why, but removed it.
    
    The vidc does have an external reference clock that is used to generate 44100/20050/10025kHz sample rates. The code is changed in a way that it uses that reference clock that can better approximate the desired clock.
    
    If we can approximate the desired rate to more than 1/256 accuracy, we return the desired rate instead of the real rate. This is to assist using some programs that for instance believe they need exacly 8kHz which we can not have, but we can have 8.018kHz which is pretty close so that nobody would notice the difference.

commit 5e0bfb8295c48578a4b91511e9dc49f8e352da18
Author: Christopher Hoover <ch@com.rmk.(none)>
Date:   Wed Dec 24 18:58:02 2003 +0000

    [ARM PATCH] 1724/1: Fix name of ttySA0 and ttySA1 under devfs
    
    Patch from Christopher Hoover
    
    ttySA[01] show up as <NULL>[01] under devfs.
    
    
    
    this makes init/getty et al very unhappy.

commit b2570560eab47fb526a7619c72c963bdf6c69297
Author: Woody Suwalski <woody@org.rmk.(none)>
Date:   Wed Dec 24 18:47:02 2003 +0000

    [ARM PATCH] 1737/1: GNU assembler 2.12.90.0.1 on Debian aborts on "'" character
    
    Patch from Woody Suwalski
    
    GNU assembler 2.12.90.0.1 on Debian aborts on "'" character in the arch/arm/lib/div64.S file (in comments).
    
    
    
    Hence I have converted them into accepted English format ;-)
    
    
    
    Woody

commit fdadef65b1977dcab9354d51a60e1c52688ffd28
Author: Woody Suwalski <woody@org.rmk.(none)>
Date:   Wed Dec 24 18:42:19 2003 +0000

    [ARM PATCH] 1736/1: Here is a working config file: the hard disk, ethernet, serial and sound are working OK, no modules.
    
    Patch from Woody Suwalski
    
    Here is a working config file: the hard disk, ethernet, serial and sound are working OK, no modules support, no initrd support.

commit b1dd647f63c7fc5c64463c04cd8ab468f732bf97
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Dec 24 03:44:11 2003 -0800

    [IPV6]: Do not update MTU by invalid value in RA message.
    
    Noticed by HIroaki Kago <kago@jp.fujitsu.com>

commit 8bef6ab3c727a37106ebf920a83571fc91158a38
Author: James Morris <jmorris@redhat.com>
Date:   Wed Dec 24 03:42:49 2003 -0800

    [CRYPTO]: Allow tcrypt module to be unloaded.

commit 66b3eb964611c2eadc3a97e3c9c77ec527b321e8
Author: Erlend Aasland <erlend-a@ux.his.no>
Date:   Wed Dec 24 03:42:21 2003 -0800

    [CRYPTO]: Clean up tcrypt module, part 2

commit 91f70b006cf2f9a42a0f531876f51af2b4e32987
Author: Kartikey Mahendra Bhatt <kartik_me@hotmail.com>
Date:   Wed Dec 24 03:39:48 2003 -0800

    [CRYPTO]: Clean up tcrypt module, part 1

commit 2b14075e9a9d56cb2d0da6d968e604b370cb11cc
Author: Jeroen Vreeken <pe1rxq@amsat.org>
Date:   Wed Dec 24 03:37:18 2003 -0800

    [NET]: AX25, netrom, and rose bug fixes for 2.6.0
    
    - Fix socket locking in ax25
    - Fix waitqueue handling bug in ax25
    - Use sock_orphan in ax25
    - Fix waitqueue handling bug in netrom and rose too
    - Fix raw socket behavior in ax25

commit d049a43dcf06a3e155f5496aade5184755a288c4
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Wed Dec 24 03:32:34 2003 -0800

    [BRIDGE]: Add 4 sysctl entries for bridge netfilter behavioral control:
    bridge-nf-call-arptables - pass or don't pass bridged ARP traffic to
    arptables' FORWARD chain.
    bridge-nf-call-iptables - pass or don't pass bridged IPv4 traffic to
    iptables' chains.
    bridge-nf-filter-vlan-tagged - pass or don't pass bridged vlan-tagged
    ARP/IP traffic to arptables/iptables.

commit e2990ed5656c6beab21f519aa94bcb34e0aa9c62
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Wed Dec 24 03:30:55 2003 -0800

    Cset exclude: wesolows@foobazco.org|ChangeSet|20031222074047|57357

commit dd0f9acc248e5a678334e62ceaf14a91e0ab4d5a
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Dec 24 03:26:59 2003 -0800

    [NET]: Fix mis-spellings in net/core/neighbour.c

commit 3bfe2f9b21d880d0ee13300882db56171ac80a5f
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Dec 24 03:22:33 2003 -0800

    [PKT_SCHED]: Remove backlog accounting from TBF, pass limit to default inner bfifo qdisc only.

commit 974f80e9b691dd40ee2a95df593bf0f7570d1c73
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Dec 24 03:17:22 2003 -0800

    [PKT_SCHED]: Fix module refcount and mem leaks in classful qdiscs.
    
    Create common routine, tcf_destroy(), that does all the work properly
    in one centralized place.

commit 334cac5329202514e8f72b925f90044264873b8f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Dec 24 03:14:14 2003 -0800

    [AF_PACKET]: Drop SKB route of packets queued to userspace.

commit af17e3f316879491ed63e3bfa1b690c0b42352f6
Author: Ben Collins <bcollins@debian.org>
Date:   Wed Dec 24 00:17:28 2003 -0500

    Many files:
    IEEE-1394 Sync with r1088
    
    - Cleanup Kconfig so that ieee1394 core doesn't require PCI.
    
    - Some function renames to make things consistent.
    
    - Fixup ISO API so that packet-per-buffer and irq-interval work
      correctly.
    
    - Get rid of host list and use driver model for handling host ref count
      and host accounting.
    
    - Get rid of packet semaphore.
    
    - Move bus registration into core ieee1394 initialization.
    
    - Get rid of ancient unused data_be (big-endian) flag in packet struct.
    
    - Fix recursive use of bus_for_each_dev() in nodemgr.
    
    - Revert changes to oui.db. This file is verbatim from IEEE, so if any
      changes should be made, register them with the IEEE database and keep
      this one pristine.
    
    - Fix PCILynx so that it checks for errors on calls to copy_from_user().
    
    - Add ARM API handlers to raw1394.
    
    - Cleanup sbp2's packet sending to accomodate for a case where a packet
      was free'd while sbp2 was waiting on it.

commit 2ec3880a8ad18165d7c65a3560a3059e8200b77a
Author: Keith M. Wesolowski <wesolows@foobazco.org>
Date:   Tue Dec 23 07:45:36 2003 -0800

    [SPARC32]: Add myself as maintainer.

commit c775f9790d16c2304c73e706727163b4412ce108
Author: Christopher Hoover <ch@com.rmk.(none)>
Date:   Mon Dec 22 16:49:55 2003 +0000

    [ARM PATCH] 1726/1: Add additional constants  to km_type enum to match other platforms.
    
    Patch from Christopher Hoover
    
    Add additional constants to km_type enum to match other platforms.
    
    
    
    (I've forgotten what doesn't compile w/o this.)

commit 08f1006716fc4ad88461cfee203357451702e565
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Mon Dec 22 16:13:12 2003 +0000

    [ARM PATCH] 1729/1: workaround for PXA timer delay problem
    
    Patch from Nicolas Pitre
    
    ... as discussed on linux-arm-kernel.

commit fa7bfcb77d9556642bcb06d7c523f63aedadd10b
Author: Deepak Saxena <dsaxena@com.rmk.(none)>
Date:   Mon Dec 22 16:01:37 2003 +0000

    [ARM PATCH] 1732/1: Fix put_unaligned type in BE mode
    
    Patch from Deepak Saxena
    
    put_unaligned is defined as __put_unaligned_be() but we're missing the "__" at the beggining.

commit 8f080d96b90faf20e214cc15766f2531748b006b
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Mon Dec 22 15:09:13 2003 +0000

    [ARM] Add new timer/clock/statfs/tgkill/utimes/fadvise syscalls.

commit 7266355c6a09ea5b95012520a4ea23896aa417ac
Merge: 67e9bb6... f579313...
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Dec 21 21:08:33 2003 +0000

    [ARM] Merge current 2.6 into experimental tree.

commit f5793133f9126b7b3a9b554a23e61b3e366e7287
Author: Dave Hylands <dhylands@com.rmk.(none)>
Date:   Sun Dec 21 20:26:29 2003 +0000

    [ARM] Fix minor bug in bitwise expression.
    
    Patch from Dave Hylands.
    
    The integrator code should have tested bits in INTEGRATOR_SC_VALID_INT
    but instead it performed a logical AND.

commit 6a32f36f5e267dea95a5a96400b08cb7a99b9a8e
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Sun Dec 21 19:51:30 2003 +0000

    [ARM] Ensure that /proc/uptime returns sensible figures.
    
    When we set xtime at boot from the RTC, we weren't setting the
    monotonic time offset.  This had the effect of making the uptime
    rather large.
    
    We get around this problem by using the do_settimeofday() to set
    the current time.  do_settimeofday() knows about this issue, and
    will apply the appropriate correction to the monotonic time offset
    for us.

commit 8a1a312196d279ccc0547e6f7cb30c1960d27a91
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Dec 21 08:18:26 2003 -0800

    [IPV6]: Build fix and dst entry leak in neighbour discovery.
    - NPRINTK2 will not compile if ND_DEBUG set to 3
    - Missing dst_release in ndisc_send_rs if skb allocation fails.

commit 898e7d5a3eb61f00b39b7c316984cb1b5bc2b9b6
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Sun Dec 21 08:04:42 2003 -0800

    [TG3]: Update version and reldate.

commit f86c2638631746f4618aa777bfa96fea460b797a
Author: Franois Romieu <romieu@fr.zoreil.com>
Date:   Sun Dec 21 07:52:11 2003 -0800

    [TG3]: Fix bogus return value in tg3_init_one().

commit 6bb00924ba40500eb0aec83c89a09a19570ce395
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Sun Dec 21 07:43:54 2003 -0800

    [BRIDGE NETFILTER]: IPV6 needs the skb->nf_bridge leak fix as well.

commit 19ae224219e30ecbfab0a893dc4db1d68578badb
Author: Keith M. Wesolowski <wesolows@foobazco.org>
Date:   Sun Dec 21 07:40:47 2003 -0800

    [sparc] Fix display errors on HIGHMEM and Zilog addresses.

commit 9dbd5c7d00c254d0076f8c5ebee6e15fa11d12f3
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Sat Dec 20 21:44:45 2003 -0600

    More Initio 9100u fixes
    
    From: 	Mike Christie <mikenc@us.ibm.com>

commit 888d96aee9c98a1662df16f319c320dad3b47960
Merge: d4e7797... 67e9bb6...
Author: James Bottomley <jejb@raven.il.steeleye.com>
Date:   Sat Dec 20 21:13:18 2003 -0600

    Merge ssh://mulgrave-w/BK/scsi-misc-2.7
    into raven.il.steeleye.com:/home/jejb/BK/scsi-misc-2.7

commit 7e223b726833ab6d6d1733b3602523e629b3034a
Author: Adrian Bunk <bunk@fs.tum.de>
Date:   Sat Dec 20 13:18:24 2003 -0500

    [PATCH] fix some dependencies for TMS380TR=m
    
    Hi Jeff,
    
    similar to the 2.4 patch (originally by Rik) I sent, the trivial
    patch below fixes some dependencies for TMS380TR=m .
    
    Please apply
    Adrian

commit d4e77973c770c90213adf110102191a8ca159024
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Sat Dec 20 03:10:54 2003 -0600

    [v2] aha152x cmnd->device oops
    
    Juergen E. Fischer <fischer@linux-buechse.de>
    
    On Wed, Oct 29, 2003 at 12:10:17 -0600, James Bottomley wrote:
    > On Wed, 2003-10-29 at 11:56, Juergen E. Fischer wrote:
    > > Why not?  It's a new command after all and if the initialization is
    > > done correctly (ie. ->device is setup) it works the way it is now.
    >
    > The usual reason is that ACA emulation is turned around in interrupt
    > context, so new memory allocations should be avoided if they can be.
    
    ok, attached patch does it that way and also fixes two other problems I
    noticed:
    
    1. unloading the module with two controllers present didn't work,
    2. there was a race in is_complete.

commit d87af2076ffff2ee176f619a44c1a88b1f2e2971
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Dec 19 22:23:30 2003 -0800

    [PATCH] ia64: Convert cmc deadlock avoidance patch from 2.4 to 2.6

commit d75f0d82e8febdf8e9c9b6c5bc8b784d49bd3bce
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Fri Dec 19 10:42:46 2003 -0500

    [libata] some cleanups suggested by Christoph
    
    * s/Scsi_Cmnd/struct scsi_cmnd/
    * remove incorrect FIXME comments related to checking return values
      of certain SCSI mid layer functions.

commit d1df9cdc57b50c9a12ae26af65b8251b26e53270
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Dec 19 00:18:47 2003 -0800

    [PATCH] ia64: enable recovery from TLB errors
    
    Here's the updated version of the MCA TLB recovery patch.

commit d273c362558e20fa78f4dc2ec6c9b9d25a9638f3
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Dec 19 00:11:57 2003 -0800

    [PATCH] ia64: fix deadlock in ia64_mca_cmc_int_caller()
    
    smp_call_function() must not be called from interrupt context (can
    deadlock on tasklist_lock).  Use keventd to call smp_call_function().

commit 2d9b03913018b0319876a5840e790911a47e46f3
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Dec 19 00:10:05 2003 -0800

    [PATCH] ia64: sync pal/sal/salinfo/mca with 2.4 code
    
    Forward port the recent changes to pal.h, sal.h, mca.h, salinfo.c and
    mca.c from 2.4.23-rc2 to 2.6.0-test9.
    
    This converts 2.6 to use salinfo instead of printing CMC/CPE/MCA/INIT
    records in the kernel.  It makes the two kernel versions as close
    together as possible.

commit 79bff944d2e3b62601388ef17338e733dda9478e
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Thu Dec 18 23:40:20 2003 -0800

    [PATCH] ia64: sn2 defconfig file
    
    As promised, here's a patch to add an sn2 defconfig file to get people
    started with 2.6 kernels.  I even turned on CONFIG_IA64_SGI_SIM support
    to make Jack happy :)

commit d9adb3fa3bbeaecb0e3f59234436b3974f007232
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Thu Dec 18 23:35:51 2003 -0800

    [PATCH] ia64: initialize bootmem maps in reverse order
    
    The arch-independent bootmem code now requires that arches initialize
    their bootmem maps in reverse order (in particular, from high to low
    addesses), otherwise alloc_bootmem_pages_low() won't work.  This change
    makes the ia64 code do just that, so that machines without an IOMMU can
    allocate their bounce buffers in low memory at early boot.  It also adds
    a sanity check to the early init code to make sure that each node has a
    local data area, because if they don't, many things will break later on
    and may be hard to track down.

commit e6d4485d09ded65b392f94feddd15ae3126d30fd
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Dec 18 23:20:29 2003 -0800

    [PATCH] ia64: Prevent SAL calls from being preempted
    
    (SAL_CALL_REENTRANT): Disable preemption around the SAL call to
    make sure we don't get rescheduled on a different CPU.

commit a1796f45a2bdaccc63cb87b8648a34dc86f0823b
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Dec 18 23:19:55 2003 -0800

    [PATCH] ia64: Force generic and hp kernels to use 16MB granules
    
    This forces the granule size to 16MB for HP zx1 and generic
    kernels.  HP sx1000 machines require this.

commit dd9ff44a5ac08f611e79ec6daac9f4ddbeab0fca
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Dec 18 23:18:47 2003 -0800

    [PATCH] ia64: Remove unused ACPI functions.
    
    Remove unused functions:
        acpi_get_prt()
        acpi_get_interrupt_model()
        acpi_get_addr_space()

commit c1331eff50f79887d4237d0af067461774a562c1
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Dec 18 23:17:48 2003 -0800

    [PATCH] ia64: Remove extraneous printks (we get the same information from ACPI).
    
    (iosapic_init): Remove extraneous printk.
    (pci_acpi_scan_root): Remove extraneous printk.

commit 48af811dbcee868089536bf309f5f854586a3698
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Dec 18 23:16:43 2003 -0800

    [PATCH] ia64: Fix PCI root bridge resources to handle prior allocations.
    
    (alloc_resources):  Use insert_resource(), not request_resource(), to
    allocate PCI root bridge windows.  This fixes the problem
    where root bridge window allocation fails because an early
    driver (like VGA) has already allocated things.

commit d668b16a4d1154484e0376b0720516b10d24421a
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Thu Dec 18 23:15:20 2003 -0800

    [PATCH] ia64: make NODES_SHIFT a little biggger
    
    Make NODES_SHIFT larger to accomodate 256 node machines.

commit 92818099956fdc014e6e936d03d540905ad57374
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Thu Dec 18 23:14:29 2003 -0800

    [PATCH] ia64: update sn2 MAINTAINERS file entry

commit 221e33ad448f3714525d8390d8d339bf200de1a0
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Thu Dec 18 23:13:48 2003 -0800

    [PATCH] ia64: make cpu_to_node_map unsigned
    
    This small fix is needed for machines with more than 128 nodes.

commit ea361e05a2a4f75a96a5fc09e057c0635647b67b
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Dec 18 23:09:49 2003 -0800

    [PATCH] ia64: prevent buffer-overrun in acpi_numa_memory_affinity_init()
    
    The code in acpi_numa_memory_affinity_init that sorts the node_memblk
    can overrun the array & clobber the memory that follows the end of the
    array. The error will be seen only on systems that fill the
    node_memblk array and only if SAL doesnt sort the entries in the SRAT.

commit dab0e71abab281925eb9e71942903541ff3de640
Author: Douglas Gilbert <dougg@torque.net>
Date:   Fri Dec 19 01:06:56 2003 -0500

    [PATCH] sg Bugfixes
    
       When detecting a locked sg device (O_EXCL) return
       -EBUSY (rather than 0) from sg_open()

commit f0567a75709552b8d86e392d28d69c0799352a24
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Fri Dec 19 00:53:55 2003 -0500

    SCSI: Fix tmscsim driver
    
    From: 	Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Acked by: Kurt Garloff <kurt@garloff.de

commit 94484ab0dad8400de76de083a78f5eb5aa908f72
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Fri Dec 19 00:42:24 2003 -0500

    Fix another sg mismerge

commit b7b6a182a0eb625eeb842d4763a3d5fa9849c98a
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Thu Dec 18 19:49:32 2003 -0800

    [PATCH] I2C: removed #include <linux/i2c.h> from sa1100_stork.c as it's not needed.
    
    Thanks to Jean Delvare <khali@linux-fr.org> for pointing it out.

commit ecd77a504d55a92fd705af76b2d1cda35bb7c133
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Thu Dec 18 19:48:09 2003 -0800

    [PATCH] ia64: enable out-of-tree compilation for IA64

commit 8685b02d0acd0ebed19b91b6f16049f3fdc98777
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Thu Dec 18 19:37:00 2003 -0800

    [PATCH] I2C: make i2c-piix4 fix optional
    
    On Thu, Dec 18, 2003 at 10:26:40AM -0800, Greg KH wrote:

commit 53a013856ba25d857910fae8672bacd17f48f4ea
Merge: 67e9bb6... ac1b535...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Thu Dec 18 19:12:49 2003 -0800

    Merge bk://linuxusb@linuxusb.bkbits.net/i2c-2.6
    into kroah.com:/home/greg/linux/BK/i2c-2.6

commit 53f87a8f8e88d69a961d79c1f15c1022cbac869d
Author: Bill Marr <marr@flex.com>
Date:   Thu Dec 18 19:11:27 2003 -0800

    [PATCH] Status Query On My MCT-U232 Patch
    
    Brief Patch Description:
    
    Fix a problem in the 'mct_u232' driver whereby output data gets held up in the
    USB/RS-232 adapter for RS-232 devices which don't assert the 'CTS' signal.
    
    Background:
    
    The Belkin F5U109 is a 9-pin USB/RS-232 adapter that is supported by the
    existing 'mct_u232' kernel module. Recently, I've been testing it under the
    2.4.22 (Slackware 9.1) kernel and the 2.6.0-test9 kernel.
    
    I've connected a Garmin 'GPS35 TracPak' GPS receiver (RS-232 interface) and an
    ordinary RS-232 external modem to my PC's USB port via the Belkin F5U109
    adapter.
    
    Problem:
    
    Although _reads_ from either of the RS-232 devices mentioned above work fine
    via the Belkin adapter, _writes_ to the GPS receiver are not being seen by
    the GPS. Writes to the modem, however, work perfectly.
    
    Aside: The 'Linux USB Users' archives show that at least one other person
    (circa May 2002) had the exact same problem I'm having, but it sounds like no
    solution was ever determined because the person in question just bought a
    different USB/RS-232 adapter.
    
    Investigation:
    
    Using the 'seyon' terminal emulator in Linux and a crude hardware RS-232
    "breakout box" that I hacked together, I've determined that the problem is
    related to the RTS/CTS RS-232 hardware handshaking.
    
    After further investigation, I've concluded that RS-232 devices which do not
    assert the 'Clear To Send' ('CTS') signal prevent the Belkin F5U109 adapter
    from transmitting data to the RS-232 device when the current (version 1.1)
    'mct_u232' module is used. The data gets "queued up" (up to a point -- 16
    bytes, I think) in the adapter but never transmitted.
    
    Since this GPS receiver works perfectly (reads and writes) when connected to a
    PC running W98se using the same Belkin adapter and the Belkin-supplied
    Windows driver, the Linux driver became suspect.
    
    After some testing with SniffUSB, I found that the Windows driver sends a
    couple of unique undocumented USB 'device requests' that the Linux driver
    does not. As it turns out, the second of those 2 requests is critical in
    making the adapter transmit data to a device which doesn't assert 'CTS'.
    
    For completeness, the Windows driver in use was determined from the 'Device
    Manager', 'Driver File Details' page:
    
     U2SPORT.VXD
     Provider: Magic Control Technology
     File version: 1.21P.0104 for Win98/Me
    
    Solution:
    
    My patch adds the 2 missing USB 'device request' commands right after a
    baud-change command. This mimics the operation of the W98 driver.
    
    Unfortunately, after much testing, I found no other operation (besides a
    baud-change request) under Windows that triggers either of these 2 'device
    request' commands. This makes it impossible to fully document the behavior of
    these requests, but I've made entries for them alongside the others in the
    'mct_u232.h' file.
    
    Purely for clarity, the patch also modifies various comments in 'mct_u232.h',
    mostly to reflect proper sizes of the various 'USB Device Request' fields per
    the USB 1.1 specification.
    
    The patch also updates the version number of the driver, corrects a minor
    typographical error, and documents a difference in the length of the data in
    a 'baud rate change' command for certain adapters which use a coded baud-rate
    rather than the conventional RS-232 baud rate divisor.
    
    I've provided (tested) patches for both the 2.4.22 and the 2.6.0-test9
    kernels.
    
    Please note that the changes to 'mct_u232.h' apply to both 2.4.22 and
    2.6.0-test9 since that file has not changed between those kernel releases.
    Nevertheless, I've included that (same) portion of the patch in both
    attachments for simplicity.
    
    Bill Marr

commit ac1b535d321147942a0ad1a95f2e3f199fdbbbc3
Author: Mark D. Studebaker <mds@paradyne.com>
Date:   Thu Dec 18 18:47:09 2003 -0800

    [PATCH] I2C: fix amd756 byte writes
    
    This fixes byte writes (used by the eeprom driver) in the i2c-amd756
    driver.  It is similar to recent fixes for the i2c-amd8111 and
    i2c-nforce2 drivers.
    
    Tested by me.

commit fe6705c3dcd2b3b924e81576a4f732b5352da344
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:36:09 2003 -0800

    [PATCH]  Input: synaptics protocol discovery
    
    If Synaptics fails to activate or if disabled by psmouse_proto option try
    other extended protocols as some touchpads may support them.

commit 07f0aef8a569e0bc58a934834a6b60febe3bdf26
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:35:52 2003 -0800

    [PATCH]  Input: remove synaptics config option
    
    Remove Synaptics config option.  Since mousedev was fixed with regard to
    touchpads generating absolute events there should no troubles for users
    migrating from older kernel or different hardware so we can have it always
    compiled in.

commit c948129dd11035b467d3fa0d1ab34d995a41e4ea
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:35:36 2003 -0800

    [PATCH]  Input: add serio_[un]register_port_delayed to fix deadlock
    
    Add serio_[un]register_port_delayed to allow delayed execution of
    register/unregister code (via kseriod) when it is not clear whether
    serio_sem has been taken or not.  Use in i8042.c to avoid deadlock

commit c5a678919ece744da109eb2dd825c8cb41673f6d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:35:20 2003 -0800

    [PATCH]  Input: psmouse fixes
    
    - Remove psmouse_pm_callback since i8042 now has its own resume
      handler which will issue reconnect request
    - Do not close/open serio port in psmouse_reconnect since i8042
      should restore ports to the proper state before calling reconnect

commit bfb0d97d4f11d2922f584d905df4fc40a1ff201b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:35:03 2003 -0800

    [PATCH]  Input: add atkbd reconnect method
    
    Add reconnect method to atkbd to restore keyboard state after suspend (to
    be called from i8042 resume function)

commit 25b78b8f4d2b74904ef959c8634e83cea06d4b8b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:34:47 2003 -0800

    [PATCH]  Input: implement resume methods
    
    - Implement resume methods using serio_reconnect facility
    - Register i8042 with sysfs
    - Register i8042 with older PM scheme to restore keyboard
      and mouse for APM users
    - Convert parameter handling to the new style
    - Unregister port not only when there is no free IRQ but
      also if the port fails to activate.

commit c0fbf5b63f0dc25938f7012bcf9cc54aa4eeb494
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:34:30 2003 -0800

    [PATCH]  Input: add psmouse_proto parameter
    
    New parameter psmouse_proto to replace psmouse_noext.  Allows to specify
    highest PS/2 protocol extension that kernel has permission to negotiate
    (bare|imps|exps).  psmouse_noext marked as deprecated and emits a warning
    when used.  parameter parsing converted to the new scheme.

commit 0f40c9947348940bb39ed32b8fce426ed1072689
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:34:14 2003 -0800

    [PATCH]  input: fix atkbd_softrepeat
    
    Fix atkbd_softrepeat kernel command line parameter.

commit 46716383b5fa993159475b73e656d93b8b336897
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Thu Dec 18 05:33:58 2003 -0800

    [PATCH]  Fixes for keyboard 2.4 compatibility
    
    I have two patches I'd like to get tested by a wider audience before
    sending them to Linus for the 2.6 tree.
    
    The first one fixes an issue in current 2.6-test with AT keyboard repeat
    rate setting, the second one makes setkeycodes/getkeycodes work the same
    as 2.4, so that people can keep their setups. It also fixes japanese and
    korean key handling.

commit f5af7c4ce2fb4b29b84c8a1515526f44ca36a28a
Author: Arief Mulya Utama <arief_m_utama@telkomsel.co.id>
Date:   Thu Dec 18 05:33:41 2003 -0800

    [PATCH]  psmouse pm resume fix
    
    I just want to share a little change that I've did to psmouse_pm_callback()
    which without this, my synaptics touchpad would prevent my laptop (IBM
    Thinkpad T30) from suspending.

commit 39e00ca1ac443d1d251edc35a8f936a63793083a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:33:25 2003 -0800

    [PATCH]  Input: unregister i8042 port when writing to control register fails
    
    I think that if we can't write to the control register it's not less critical
    than not having a free IRQ so we better unregister port in this case as well.
    
    Also logging moved a bit.

commit 75dcd3a42ae61e2f8725bdd2321d2a958efea792
Author: Peter Osterlund <petero2@telia.com>
Date:   Thu Dec 18 05:33:09 2003 -0800

    [PATCH]  synaptics powerpro fix
    
    Made the packet checking code less strict, so that the driver works also for
    touchpads that don't strictly follow the synaptics absolute protocol.
    Problem reported by Anders Kaseorg using a PowerPro C 3:16 laptop.

commit 2b07066d6087a9866124a0d149c300a218d3bf8e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:32:52 2003 -0800

    [PATCH]  Synaptics: use serio_reconnect
    
    Input/Synaptics:
      1. Support for pass-through port moved from Synaptics driver to psmouse
         itself, it is cleaner and should allow using it in other drivers if
         needed.
      2. The driver makes use of new reconnect functionality in serio. It will
         try to keep the same input device after resume or when it resets itself.
      3. If mouse is disconnected or other mouse plugged in while sleeping the
         driver should correctly recognize that and create a new serio/input
         device.

commit 5ef1bd1eae81aaae6d8438e10832519a33cc0a8b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:32:36 2003 -0800

    [PATCH]  serio: reconnect facility
    
    Input: serio_reconnect added. Similar to serio_rescan but gives driver
           a chance to re-initialize keeping the same input device.

commit 7822f6534c1c8609bacb3b202da5d4163dec4d00
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:32:19 2003 -0800

    [PATCH]  Synaptics: code cleanup
    
    Input: Synaptics code cleanup and credit update.

commit 35028d967da501b22a56ec1539805627b7fe05a9
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:32:03 2003 -0800

    [PATCH]  Add black list to handler<->device matching
    
    Input: Introduce an optional blacklist field in input_handler structure.
           When loading a new device or a new handler try to match device
           against handler's black list before doing match on required
           attributes.
           This allows to get rid of "surprises" in connect functions, IMO
           connect should only fail when it physically can not connect, not
           because it decides it does not like device.

commit 94b49086bcdff836f86cb0dabc30a018af10672e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:31:47 2003 -0800

    [PATCH]  serio: possible race between port removal and kseriod
    
    Input: There is a possibility that serio might get deleted while there
           are outstanding events involving that serio waiting for kseriod
           to process them. Invalidate them so kseriod thread will just
           drop dead events.

commit 9c3faa99bb13924e38e1c3250e518e722edf7984
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Thu Dec 18 05:27:27 2003 -0800

    [PATCH]  serio: rename serio_[un]register_slave_port to __serio_[un]register_port
    
    Input: rename serio_{register|unregister}_slave_port to
           __serio_{register|unregister}_port to better follow
           locked/lockless naming convention

commit 3def89c78ffaa6d887577ed1a05ebc22cb80a313
Merge: 67e9bb6... 5473668...
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Thu Dec 18 11:09:04 2003 +0000

    Merge flint.arm.linux.org.uk:/usr/src/bk/linux-2.6
    into flint.arm.linux.org.uk:/usr/src/bk/linux-2.6-serial

commit 081a9ddb969c87c890a7b86724dd9ec0d79441ef
Merge: aee7093... 67e9bb6...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Thu Dec 18 00:51:09 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/netleakwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/netleak-2.5

commit 2af01b24e03a4b05f74bf9cdf7c69e1e5f4f2317
Merge: cbdac83... 67e9bb6...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Wed Dec 17 23:19:01 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit 93bc467d274f39059e2d15f93d53e89e1a00aae6
Merge: 3cdecff... 67e9bb6...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Thu Dec 18 04:57:24 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit c33ccf2d4471c4325933434679d9bdd0a96b0bfa
Merge: 67e9bb6... d37f196...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Thu Dec 18 04:48:51 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/cpufreq

commit 572544de970f11403f278103823b90288fec690e
Author: Nathan Scott <nathans@bruce.melbourne.sgi.com>
Date:   Thu Dec 18 09:20:30 2003 +1100

    [XFS] Update XFS documentation.

commit d0642c692cf89e7029df19ad1c2e8016ac9ff749
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Dec 18 09:11:26 2003 +1100

    [XFS] Fix a possible bio-leak on I/O submission, in a case where no I/O was required.
    
    SGI Modid: 2.5.x-xfs:slinx:163119a

commit 364c4073a09edbb796b0db3e6a46386e83094fcf
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Dec 18 07:27:23 2003 +1100

    [XFS] Add the noikeep mount option, make ikeep the default for now.
    
    SGI Modid: 2.5.x-xfs:slinx:162621a

commit 7c9186f9079765d4e991fd9970013c6f7a5c26ba
Merge: 845937b... 67e9bb6...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Wed Dec 17 14:55:22 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/libata-2.5

commit cbdac83467c7d1439e515d70c2c46627c04460ad
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Wed Dec 17 07:05:20 2003 -0800

    [SPARC64]: On Sabre, only access PCI controller config space specially.

commit 7ef760b4f988b326794d9156c47d2a20131a7fc1
Merge: 948a7a8... 67e9bb6...
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 17 06:48:35 2003 -0800

    Merge tiger.hpl.hp.com:/data1/bk/vanilla/linux-2.5
    into tiger.hpl.hp.com:/data1/bk/lia64/to-linus-2.5

commit 79359ab7e4d4be26542ebee1404293e48535499f
Merge: 0e70f99... 85c54ac...
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 08:24:28 2003 -0500

    Merge ssh://linux-scsi@linux-scsi.bkbits.net/scsi-misc-2.7
    into mulgrave.(none):/home/jejb/BK/scsi-misc-2.7

commit 85c54ac9a89d984c51b66ba22f546dd317a4783b
Author: Mike Christie <mikenc@us.ibm.com>
Date:   Wed Dec 17 08:01:42 2003 -0500

    [PATCH] [RFC]  fix compile erros in ini9100 driver
    
    The attached patch fixes the compile errors from the DMA and scsi_cmnd
    next usage. It has been tested on bugzilla here:
    http://bugzilla.kernel.org/show_bug.cgi?id=213
    
    I was not sure about the variable casting in the driver, but this is how
    the qlogicisp driver did it. The driver also still needs to be converted
    to the new error handling.

commit be99781143be16163bb858a3e4d9433fb57ecb2a
Author: Christoph Hellwig <hch@infradead.org>
Date:   Wed Dec 17 08:00:23 2003 -0500

    [PATCH] aacraid updates for new probing APIs
    
    On Wed, Nov 19, 2003 at 12:48:28PM +0000, Christoph Hellwig wrote:
    > On Tue, Nov 18, 2003 at 01:29:22PM -0800, Mark Haverkamp wrote:
    > > > +	pci_set_master(pdev);
    > > > +	pci_set_dma_mask(pdev, 0xFFFFFFFFULL);
    > >
    > > I've been told that the return value of this should be checked as it is
    > > possible for it to fail.
    >
    > Indeed.  This patches objective was to convert aacraid to the new-style
    > probing, not to fix bugs, but I'll add the fix to the next revision of
    > the patch anyway.
    
    Ok here's a new patch.  Updates:
    
      - check pci_set_dma_mask return value
      - fix leak in the HBA remove path
      - fix leak in probe_one failure case
      - remove unused list of hosts
      - avoid scsi.h usage all over driver
      - mention the updates in the README file

commit 9cd56c73479002b2cb2040091991de71692eddc1
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Dec 17 07:59:01 2003 -0500

    [PATCH] convert inia100 to new probing API
    
    Hi Doug,
    
    you've been the last who touched inia100.c, so I may assume you
    actually have the hardware?  I've updated the driver to the new
    pci probing and scsi host registration code and it would be cool
    if someone could test it so we could merge it into early 2.6.

commit 652490f0e248deb0365e00c9853bb3c06d04f4c3
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 07:55:36 2003 -0500

    sg: fix hch/dougg mismerge
    
    Need to remove access_count from new seq_file code

commit 4efe9c82e143c42b0d7fd293c41cc75530201108
Merge: 67122b7... be0c3c3...
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 07:41:29 2003 -0500

    Resolve hch/dougg patches

commit be0c3c3420795175b2034e23e8708934d10df158
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 07:36:47 2003 -0500

    sg: char_devs + seq_file lk2.6.0t9
    
    From: 	Douglas Gilbert <dougg@torque.net>
    
    This is an updated patch for the sg driver that takes into
    account Patrick LaVarre's fix for negative reserved buffer
    sizes found in lk 2.6.0-test9.
    
    So it has the same changelog to the patch I sent on 2003/10/11:
         - add "struct cdev" [char_devs] objects to increase
           maximum number of sg devices from 256 to 8192
         - use seq_file interface for /proc/scsi/sg/*
           pseudo files
         - sysfs symlinks between the sysfs scsi device and the
           corresponding sg cdev node (and vice versa)
    
    An edited "tree" output showing an example of these symlinks
    was included in my previous post.
    
    As noted in another thread, st (and osst) may need "cdevs"
    and sysfs symlinks so SCSI tape devices have sysfs visibility
    in lk 2.6 .
    
    Also if both st and sg had sysfs visibility then Patrick
    Mansfield's scsi_id program could be made to work for tape
    drives (enclosures, tape robots, etc) by following these
    symlinks.

commit 845937ba4b3b806e78d19f2d4ad82ffddede39df
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Wed Dec 17 07:35:44 2003 -0500

    [libata promise] fix another ugly bug
    
    For the SX4, only one Host DMA (local DIMM) engine is on the hardware,
    while there is an ATA engine for each SATA port.  This means that
    Host DMA transactions must be queued.  When previously fixing this problem
    (the driver had previously assumed an HDMA engine per port), I stored
    the HDMA packet queue in a per-port data structure.
    
    This was incorrect:  this patch changes it to correctly use a
    per-host data structure, not a per-port structure.

commit 67122b7dbce6f1909c3aa09341fdddccb9a80171
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 06:51:03 2003 -0500

    [PATCH] MPT Fusion driver 2.05.00.05 update
    
    From: 	Moore, Eric Dean <emoore@lsil.com>
    
    2.05.00.05 changes
    * error handling fixes, e.g. use of host_lock
    
    2.05.00.04 changes
    * removed __init from mptscsih_setup
    * removed __init from get_setup_token
    * changed copyright from 2002 to 2003
    * added new mailto, and removed Pam.Delaney
    * added some fix for 32bit emulation when unloading mptctl module

commit a20480b82a026e4c0c7fd7c188b02fdcc356779d
Author: Rask Ingemann Lambertsen <rask@sygehus.dk>
Date:   Wed Dec 17 05:39:41 2003 -0500

    [PATCH] aha1740.c: Allow level triggered interrupts to be shared
    
    Hi.
    
    The patch below (against 2.6.0-test8) makes it possible to share the
    interrupt when the aha1740 is configured for a level triggered interrupt.
    It appears to work fine on my i486 EISA box with an AHA-1742A and an NE3200
    Ethernet board sharing an irq. Comments, please.

commit f36d0268d82e853187221b3a75fc981947186840
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Dec 17 05:34:03 2003 -0500

    [PATCH] sym 2.1.18f
    
    From: 	Matthew Wilcox <willy@debian.org>
    
    2.1.18f:
     - Rewrite the Kconfig help
     - Always honour CONFIG_SCSI_SYM53C8XX_IOMAPPED.  Alpha people used to
       have it forced off, Sparc people used to have it forced on.  (Thanks
       to Dann Frazier for testing on Alpha)
     - Simplify the NVRAM handling a bit.
     - SYM_OPT_NO_BUS_MEMORY_MAPPING is never set.
     - Remove PCI DMA abstraction.  (Christoph Hellwig)
     - Redo SCSI midlayer registration and unregistration to allow module
       load/unload to work.  Now copes with scsi_add_host() failing.  (Thanks
       to Brian King for testing)
     - Replace bcmp() with memcmp().
     - Change the MAINTAINER entry to myself.

commit 1182b13fb851e6cddaac613a8026525963966cd2
Author: Andi Kleen <ak@muc.de>
Date:   Wed Dec 17 05:28:37 2003 -0500

    [PATCH] Mark Ninja SCSI driver as !64BIT
    
    Ninjas don't seem to like 64bit. The driver spew out so many
    integer/pointer mismatch warnings that I gave up.
    
    Mark it as !64BIT
    
    -Andi

commit 54ef28775baf3ce7765434e442e15da9d88f0fc5
Author: Andi Kleen <ak@muc.de>
Date:   Wed Dec 17 05:28:10 2003 -0500

    [PATCH] Mark aha152x as ISA and !64BIT driver II
    
    On Tue, Oct 07, 2003 at 07:33:23PM +0200, Andi Kleen wrote:
    >
    > aha152x seems to be not 64bit safe and spews out warnings on x86-64.
    > As I think it's a ISA only driver anyways I just marked it as
    > ISA only and !64BIT for Alpha's sake.
    
    
    Matthew Wilcox pointed out that it was already marked ISA only.
    I actually ment to change another driver, but looking at the source of one
    it seems to be 64bit unclean too.
    
    As there are 64bit architectures that have ISA slots (like old Alphas)
    I think this patch is still appropiate.
    
    -Andi

commit 0639064849016964d62819b9f5a4a3df10c92411
Author: Andi Kleen <ak@muc.de>
Date:   Wed Dec 17 05:27:45 2003 -0500

    [PATCH] Mark correct aha152x driver (PCMCIA) as !64BIT
    
    As Matthew Wilcox pointed out - the ISA aha152x driver was already marked
    as ISA only, so couldn't have been enabled on x86-64.
    
    The warning I saw was actually for the PCMCIA aha152x driver.
    
    Mark that one as !64BIT

commit b423334b9ca27c82d7c85913b4c3dc3d346268b5
Author: Andi Kleen <ak@muc.de>
Date:   Wed Dec 17 05:26:20 2003 -0500

    [PATCH] Fix 64bit warnings in BusLogic driver
    
    During a make allyesconfig on x86-64 I noticed several integer/pointer
    mismatch warnings in the bus logic driver.

commit 316a3aaa366ec024dd58a1ad4680dfe98205910a
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Dec 17 05:25:00 2003 -0500

    [PATCH] buslogic: use EH, remove some dup. docs
    
    patch_name:	buslogic_ehupdate_v3.patch
    patch_version:	2003-10-02.14:10:32
    author:		Randy.Dunlap <rddunlap@osdl.org>
    description:	update BusLogic driver to use current SCSI
    		  error handling model;
    		remove duplicate doc comments -- use
    		  Documentation/scsi/BusLogic.txt only;
    product:	Linux
    product_versions: 2.6.0-test6
    diffstat:	=
     Documentation/scsi/BusLogic.txt |    2
     drivers/scsi/BusLogic.c         |  229 ++--------------------------------------
     2 files changed, 16 insertions(+), 215 deletions(-)

commit 1e13404b53d6daad932cfce0be8fb8c78147e650
Author: Patrick Mansfield <patmans@us.ibm.com>
Date:   Wed Dec 17 05:23:23 2003 -0500

    [PATCH] consolidate and log scsi command on send and completion
    
    Consolidate and nicely log the scsi_device and scsi command before sending
    and after completing a command to an adapter driver.

commit 97f97ad2634e82855479699cc038a5837cb019df
Author: Douglas Gilbert <dougg@torque.net>
Date:   Wed Dec 17 04:57:52 2003 -0500

    [PATCH] scsi_debug lk 2.6.0t6
    
    This small patch adds a "release" method to the "pseudo_0"
    device to stop the noise when the scsi_debug module is
    loaded.
    
    Another annoyance that I was unable to get to the bottom
    of was during "rmmod scsi_debug" **:
      Synchronizing SCSI cache for disk sda: <4>FAILED
        status = 0, message = 00, host = 1, driver = 00
    That is a DID_NO_CONNECT error. So the LLD host is
    being shut down before the sd driver gets a chance to
    send through a SYNCHRONIZE CACHE command. If the user
    instigates a rmmod (as distinct from the hardware
    saying the host/device is gone), shouldn't a window
    be left open for such a flushing type command. This
    problem seems to have appeared recently.
    
    
    ** "echo -1 > add_host" in scsi_debug's driver directory
       (i.e. remove a host) also causes the same error so the
       problem is not perculiar to rmmod.

commit 426acead9b236b26bb02bec4749ccc86ef3c2c9c
Author: Randy Dunlap <rddunlap@osdl.org>
Date:   Wed Dec 17 04:54:39 2003 -0500

    [PATCH] cpqfcTSinit cleanup
    
    patch_name:	drivers_clean.patch
    patch_version:	2003-09-09.17:01:58
    author:		Randy.Dunlap <rddunlap@osdl.org>
    description:	fix to remove these warnings:
      drivers/scsi/cpqfcTSinit.c:1583: warning: unused variable `timeout'
      drivers/scsi/cpqfcTSinit.c:1584: warning: unused variable `retries'
      drivers/scsi/cpqfcTSinit.c:1585: warning: unused variable `scsi_cdb'
      drivers/scsi/cpqfcTSinit.c:471: warning: `my_ioctl_done' defined but not used
    product:	Linux
    product_versions: 2.6.0-test6
    changelog:	ifdef around my_ioctl_done();
    		write a new, smaller version of cpqfcTS_TargetDeviceReset(),
    		but keep the previous version for future updates;
    maintainer:	Chase Maupin (support@compaq.com)
    diffstat:	=
     drivers/scsi/cpqfcTSinit.c |   17 +++++++++++++----
     1 files changed, 13 insertions(+), 4 deletions(-)

commit 8e21f6b0edf30ec615094fd9942701035ea9921b
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Wed Dec 17 00:06:50 2003 -0800

    [PATCH] I2C: lm75 chip driver conversion routine fixes
    
    This patch is based on the lm_sensors project CVS, from revisions 1.45 and 1.1
    of lm75.c and lm75.h, respectively.
    
    The patch fixes the conversion routines (according to datasheet) and moves
    them into a header file - as these conversions can be used by several drivers
    which emulate LM75s as subclients.  Also, temps are now reported in 1/1000 C
    in sysfs as per documentation.

commit dcf4f5fbc64c94c28ffcd701c7f004d5c21909c9
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Wed Dec 17 00:06:23 2003 -0800

    [PATCH] I2C: remove initialization of limits by lm75 driver
    
    This patch is from the lm_sensors project CVS, from this revision:
    
    	1.44 (mds) remove initialization of limits by driver
    
    It is better to set these limits by a combination of /etc/sensors.conf
    and 'sensors -s'; "mechanism not policy."

commit 9059d1bf3b9797366cd6ff4ad6ae81faf82bcc1e
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Wed Dec 17 00:04:29 2003 -0800

    [PATCH] I2C: remove initialization of limits by w83781d driver
    
    This patch is from the lm_sensors project CVS, from this revision:
    
    	1.111 (mds) remove initialization of limits by driver
    
    It is better to set these limits by a combination of /etc/sensors.conf
    and 'sensors -s'; "mechanism not policy." And what's not to like about
    a patch that removes 163 lines?

commit 995d2aa2f08a20552b88a95ccd3b97cfc1261032
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Wed Dec 17 00:04:10 2003 -0800

    [PATCH] I2C: improve chip detection in w83781d.c driver
    
    This patch improves chip detection.  It was forward ported from the
    lm_sensors project CVS, from these revisions:
    
    	1.104 (Khali) Enhance chip detection (stricter).
    	1.108 (Khali) Fix W83627HF detection.

commit 8e7b8263696016c311e10bfa241e3f0c59895672
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Dec 16 23:52:23 2003 -0800

    [PATCH] I2C: restore support for AMD8111 in i2c-amd756 driver
    
    This patch restores support for the AMD8111 in the i2c-amd756 driver.
    
    Credits go to Philip Pokorny for the original patch. I tweaked it a bit.
    
    This isn't a bug fix and can be delayed until after 2.6.0 if you want.

commit f6b03e39ef77bfeea6c304ee5dc79c881dc50669
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Dec 16 23:44:31 2003 -0800

    [PATCH] I2C: fix i2c-amd8111 driver.
    
    This patch fixes i2c_smbus_write_byte() being broken for i2c-amd8111.
    This causes trouble when that module is used together with eeprom (which
    is also in 2.6). We have had no report so far, but the problem is
    similar to the one addressed by a recent patch to i2c-nforce2.
    
    Credits go to Hans-Frieder Vogt for finding and fixing the problem. Mark
    D. Studebaker found and fixed the original problem in i2c-nforce2.
    
    This is a serious bug fix, and I believe you shouldn't wait too long
    before applying it.

commit 2533fe7fde196c749c0ae2d378c0de3c46d10dc5
Merge: 0e70f99... 3c5e441...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Tue Dec 16 23:29:37 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit aee70930db378de7eedb1658c51c3be8cdaea35c
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Tue Dec 16 20:08:33 2003 -0800

    [BRIDGE NETFILTER]: Fix leaks and crashes in SKB handling.
    
    - Missing nf bridge info put in ip_copy_metadata()
    - Do not store nf bridge private info in the SKB control block,
      parts of IPv4 use that area too and this causes corruption.

commit a0fb04373006195c58251adec65d8e064259fa84
Merge: 314dc15... 572544d...
Author: Nathan Scott <nathans@lips.borg.umn.edu>
Date:   Tue Dec 16 12:55:55 2003 -0600

    Merge bk://linux.bkbits.net/linux-2.5
    into lips.borg.umn.edu:/export/music/bkroot/xfs-linux-2.6

commit 351244417be343ca4762e658807d18c2c69b5c50
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Tue Dec 16 09:44:54 2003 -0500

    [libata] update new geometry code for 2.6.x specifics not present in 2.4

commit b67b6758e0e84e14995f600a7b440dfd9eac58f5
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Tue Dec 16 09:17:46 2003 -0500

    [libata] move geometry code to libata-scsi

commit 7f117c41a19dbb1cebb617addf30601b4e8d0745
Author: Michael E. Brown <michael_e_brown@dell.com>
Date:   Tue Dec 16 09:17:00 2003 -0500

    [libata] fake geometry for partition tables / setups that need such

commit 3c5e441205be21a89cec22aa8b320ba3e25f1d0d
Merge: 3f69168... e1b2a08...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 15 18:57:56 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit 1a11f106e8e3b1070e9457090790840574ad9b63
Merge: 3f69168... 9616878...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 15 18:33:54 2003 -0800

    merge

commit 948a7a8a46270add8101f8298d94c5a679a07b7f
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Mon Dec 15 17:17:33 2003 -0800

    ia64: Bring export of spin-lock contention-routines in sync with
    	this change:  Jim Wilson says that gcc v3.3 also supports
    	marking ar.pfs as clobbered, so use ia64_spinlock_contention()
    	for any GCC with v3.3 or newer.

commit 3cdecffe5561dd49cc2b203dc1475e43f87fbbe8
Merge: 2fa72d2... 056ffaa...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Tue Dec 16 01:02:35 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit d37f196fe462b21e5b7f0b8b5af3f625ef642794
Merge: 056ffaa... f6f4ffa...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Tue Dec 16 00:38:50 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/cpufreq

commit 69169351f63e1deacf39a65651b4d7daa496cf4b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Dec 15 14:56:37 2003 -0500

    [PATCH] Fwd: Re: Atmel - possible SKB leak?
    
    Jeff,
    
    Atmel driver in 2.6.0-test11 is leaking SKBs if card gets disassociated
    from an AP when it's about to transfer packet. Simon (atmel maintainer)
    is OK with the patch. Given the fact that we are leaking memory I think
    it may be beneficial to push it to Linus (if you like the patch).
    
    Dmitry
    
    ===================================================================
    
    
    ChangeSet@1.1517, 2003-12-11 01:44:56-05:00, dtor_core@ameritech.net
      NET: atmel - do not leak SKBs when dropping packets
    
    
     atmel.c |    6 ++++--
     1 files changed, 4 insertions(+), 2 deletions(-)
    
    
    ===================================================================

commit a5b0287268e3bbf10049255a5f2427ba2c557b12
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Dec 15 14:52:31 2003 -0500

    [PATCH] Re: Deadlock in 3c574_cs.c (fwd)
    
    Patch looks fine to me, thanks.   I've queued up the below.
    
    
    From: Ville Nuorvala <vnuorval@tcs.hut.fi>
    
    I've experienced random lockups witch become almost certain under heavy
    loads, like when doing ping6 -f. The culprit seems to be the 3c574_cs
    driver, which locks lp->window_lock twice when calling update_stats() from
    el3_interrupt().
    
    
    
     drivers/net/pcmcia/3c574_cs.c |   15 +++++++++------
     1 files changed, 9 insertions(+), 6 deletions(-)

commit 39ceafe357193b5d3c11af4a35e0de06a03b68dd
Merge: e90b21e... e1f936a...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Mon Dec 15 14:27:51 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/net-drivers-2.5

commit e90b21e263b75d9071f66d46df7c7714a14f17ce
Author: Alexander Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Mon Dec 15 14:16:23 2003 -0500

    [netdrvr bonding] use destructor to properly free net device
    
    (required because of driver's use of rtnl_lock/unlock)

commit 3296c87237f7648ede1c45c2412ed7a2237db970
Merge: 079af95... 3f69168...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 15 06:15:26 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit 9616878a7025435c6e88f9c6f45280ff8f115789
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Dec 14 21:38:28 2003 -0800

    [PATCH] USB: <linux/usb_ch9.h> new descriptor codes, types
    
    This patch adds definitions:
    
      - New "video" class, for video cameras and more complicated devices;
    
      - New "Interface association" descriptor type, used by video class,
        along with two other assigned desciptor type codes (OTG, "debug")
        listed in the same ECN to the USB 2.0 spec;
    
      - Type declarations for "Interface association" and OTG descriptors.
    
    It also replaces three copies of USB_DT_CS_* declarations in audio
    support with one in <linux/usb_ch9.h>, and uses the newly exposed
    symbol in "usbnet".  (Near as I can tell, the convention for those
    "class specific" descriptor types started with audio, and was then
    adopted by several other class specifications.)

commit 079af958c342dfa6b4e2b88b15b4d6a9fff92acf
Merge: 916dbe8... e220fdf...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Sat Dec 13 22:45:29 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit 916dbe8904d3829f1e42685473ade686d7b12e09
Merge: e286c8f... 14c5d2d...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Sat Dec 13 06:38:39 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit 54736684018d5e4ccdeb22f3613b7c1a5ebf91e4
Author: Tom Rini <trini@org.rmk.(none)>
Date:   Fri Dec 12 19:37:15 2003 +0000

    [SERIAL] Fix a problem with 8250 UARTs on PPC
    
    Patch from Tom Rini.
    
    If we don't change the divisor, we don't want to change what we claim
    as the uart clock either.  Without this I don't get a usable serial
    console on my Motorola Sandpoint.

commit 066a6b209fe94e7b8dc673facce0f054292e7630
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Fri Dec 12 09:04:41 2003 -0800

    ia64: Fix compiler warning in intrinsics.h.

commit 7b126b1991c15ace52e2ed48b13d2a7263b63461
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Fri Dec 12 08:56:49 2003 -0800

    ia64: Fix ivt overflow that occurred when turning on
    	CONFIG_DISABLE_VHPT.

commit eabbeb612bdc1dbc5159c13d77b2b4519179206e
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Fri Dec 12 08:04:17 2003 -0800

    ia64: Fix bug discovered by Bill Nottingham & Jakub Jelinek where
    	put_user() arguments with function-calls would cause the
    	macro to return unexpected values.  Fixed by avoiding macro
    	argument evaluation while r8/r9 are in use for exception-handling
    	purposes.  Also, consolidated access-macros so that GCC and
    	Intel compiler use 90% the same code.

commit 3b32b7615237a3cd7c23e401da147ca61fb6076f
Merge: 1c00c05... a2c72fa...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Fri Dec 12 05:37:40 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.5
    into nuts.ninka.net:/disk1/davem/BK/net-2.5

commit 2fa72d28f55baa95d7f2f27f38e267cd506ce6d4
Author: Dave Jones <davej@redhat.com>
Date:   Fri Dec 12 13:00:43 2003 +0000

    [AGPGART] Remove duplicate programming of AGP command register.
    We do this in agp_device_command() which gets called below, so we
    remove the explicit pci_write_config_dword()
    
    Spotted by Bjorn Helgaas.

commit 7885c113f3f3c80ec3bc212beb41e15fe3efd813
Merge: a2c72fa... 070c4e6...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Thu Dec 11 23:00:03 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/usb-new_drivers-2.6

commit 070c4e6f277ca49b0ae5bcbb77c065c73af5085a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Dec 11 22:36:36 2003 -0800

    [PATCH] USB: usb driver binding fixes
    
    There are problems lurking in the driver binding code for usb,
    with highlights being disagreements about:
    
        (a) locks: usb bus writelock v. BKL v. driver->serialize
        (b) driver: interface.driver v. interface.dev.driver
    
    Fixing those is going to take multiple patches, and I thought
    I'd start out with a small one that's relatively simple.  This:
    
        - Cleans up locking.
    
            * Updates comments and kerneldoc to reflect that the
              usb bus writelock is what protects against conflicts
              when binding/unbinding drivers to devices.
    
            * Removes driver->serialize ... not needed, since
              it's only gotten when the bus writelock is held.
    
            * Removes incorrect "must have BKL" comments, and one
              bit of code that tried to use BKL not the writelock.
    
        - Removes inconsistencies about what driver is bound to the
          interface ... for now "interface.driver" is "the truth".
    
            * usb_probe_interface() will no longer clobber bindings
              established with usb_driver_claim_interface().
    
            * usb_driver_release_interface() calls device_release_driver()
              for bindings established with probe(), so the driver model
              updates (sysfs etc) are done as expected.
    
            * usb_unbind_interface() doesn't usb_driver_release_interface(),
              since release() should eventually _always_ call unbind()
              (indirectly through device_release_driver).
    
    Essentially there are two driver binding models in USB today,
    and this patch makes them start to cooperate properly:
    
       - probe()/disconnect(), used by most drivers.  This goes
         through the driver model core.
    
       - claim()/release(), used by CDC drivers (ACM, Ethernet)
         and audio to claim extra interfaces and by usbfs since it
         can't come in through probe().  Bypasses driver model.
    
    That interface.driver pointer can be removed by changing the
    claim()/release() code to use the driver model calls added
    for that purpose:  device_{bind,release}_driver().  I didn't
    do that in this patch, since it'll have side effects like
    extra disconnect() calls that drivers will need to handle.
    
    A separate usbfs patch is needed to fix its driver binding;
    mostly just to use the right lock, but those changes were
    more extensive and uncovered other issues.  (Like, I think,
    some that Duncan has been noticing ...)

commit 7c374cf1fe968d1f5d51b1194b6b0f39a07b6858
Author: Petko Manolov <petkan@nucleusys.com>
Date:   Thu Dec 11 22:33:47 2003 -0800

    [PATCH] USB: pegasus driver update
    
      another vendor/deviceID added;
      HAS_HOME_PNA flag for ADM8511 devices - that should
      make HomePNA users happy;

commit dc01021ffee2a08a97d4a0764b7460929c81d967
Author: David T. Hollis <dhollis@davehollis.com>
Date:   Thu Dec 11 22:31:42 2003 -0800

    [PATCH] USB: Mark AX8817x usbnet driver as non-experimental
    
    Trivial patch to remove the Experimental mark on the AX8817x driver
    portion of usbnet.  The driver seems to have made the rounds enough and
    is working quite well.

commit 75ee7f6dc24c750a2d48b85a24652f8c00bd4ee3
Author: Nemosoft Unv. <nemosoft@smcc.demon.nl>
Date:   Thu Dec 11 22:13:03 2003 -0800

    [PATCH] USB: PWC 8.12 driver update
    
    Attached you will find patches that will bring the Philips Webcam driver
    (PWC) up to version 8.12. The most important new feature is support for
    the motorized pan & tilt feature of the new Logitech QuickCam
    Orbit/Sphere, which I don't think is in the stores yet (at least it's
    not on Logitech's website), but should be there soon. In addition, the
    documentation in the kernel about the cams is updated.

commit 81c36114922f1e2187ca2187591ad1369cc09d23
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Thu Dec 11 21:11:36 2003 -0800

    [PATCH] USB: add support for Sony UX50 device to visor driver
    
    Thanks to Ralf Dietrich <ralle@envicon.de> for the information.

commit 09776353dfc6a82da4b1afc3a03717e58dfead80
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 11 19:57:12 2003 -0800

    [PATCH] USB: Allow configuration #0
    
    This patch helped Jon Wilson.  It allows devices to have a configuration
    numbered 0, in spite of the standard convention that config #0 really
    means unconfigured.

commit 41d75b5badbe0ca3dc452ad218f702bcfb4709eb
Author: Thomas Chen <tchen@on-go.com>
Date:   Thu Dec 11 19:03:38 2003 -0800

    [PATCH] USB: fix bug when errors happen in ioedgeport driver

commit dca5d14a1875ec3ece94f734c63ad58cf84f2cdd
Author: Thomas Chen <tchen@on-go.com>
Date:   Thu Dec 11 18:31:35 2003 -0800

    [PATCH] USB: fix io_edgeport driver alignment issues.

commit ab2fc239768383144194c3e1c1b96df7d442ae52
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Thu Dec 11 18:02:24 2003 -0800

    [PATCH] USB: add support for another pl2303 device
    
    Info came from John Zhuge <john.zhuge@troposnetworks.com>

commit 6a9f43677454e0ff8b5e2daeb61354b629800336
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Dec 11 17:35:24 2003 -0800

    [PATCH] USB: don't send any MODE SENSE commands to usb mass storage devices
    
    This patch basically eliminates the use of MODE_SENSE or MODE_SENSE_10 for
    direct-access USB storage devices.  That $&%*! command has caused us more
    trouble than all the others combined, and after more than a year we still
    don't have a good way of handling/using them.
    
    I constantly get complaints about devices which don't work because of the
    way 2.5/6 uses MODE_SENSE and MODE_SENSE_10 -- this patch will greatly
    increase compatiblity with devices.  As with the patch to limit transfer
    sizes, I'd like to see this applied as soon as possible.
    
    Matt
    
    > ----- Forwarded message from Patrick Mansfield <patmans@us.ibm.com> -----
    >
    > Date: Thu, 20 Nov 2003 08:28:27 -0800
    > From: Patrick Mansfield <patmans@us.ibm.com>
    > Subject: [PATCH] don't send any MODE SENSE commands to usb mass storage devices
    > To: mdharm-scsi@one-eyed-alien.net
    
    Matthew -
    
    Is this patch in your queue? I don't see it in Linus' tree yet.
    
    Don't send any MODE SENSE commands to usb mass storage devices.

commit 1c00c05b487d4098fe1846bbb9baf8c2776edb1b
Author: Alexander Viro <aviro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu Dec 11 08:35:18 2003 -0800

    [NET]: Fix missing netdev unregister/free in netrom and rose protocols.
    
    Also, fix a object size vs. pointer size thinko.

commit ee7895f33956e28fb5571b9ff28bdcae0d8c08c3
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 11 01:37:17 2003 -0800

    [PATCH] USB storage: Unusual_devs.h addition
    
    This patch adds to unusual_devs.h an entry reported by Andries Brouwer and
    it moves another entry to the correct position in the numerical ordering.

commit e0747c61acd44d45482fbf22c5ffb3d58522abed
Author: Davide Andrian <_nessuno_@katamail.com>
Date:   Thu Dec 11 01:33:53 2003 -0800

    [PATCH] USB storage: Medion 6047 Digital Camera
    
    ...a patch for the "Medion 6047 Digital Camera"
    
    
    
    *** a/drivers/usb/storage/unusual_devs.h	Sun Nov 23 22:31:51 2003

commit 76f63a39c66d74c90aa3ead4df3542ab358c69f1
Author: Martin Berentsen <berentsen@sent5.uni-duisburg.de>
Date:   Thu Dec 11 01:07:51 2003 -0800

    [PATCH] USB storage: Minolta Dimage S414 usb patch
    
    here I submitt you the vendor/id patch for the
    Minolta Dimage S414 Camera,
    which runs fine with the usb under linux.
    
    cat /proc/bus/usb/device ->

commit 409f256ebad7b498f4e5a6ae3064a775dc907a57
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 11 01:06:32 2003 -0800

    [PATCH] USB storage: Another unusual_devs.h update
    
    On Thu, 20 Nov 2003, Stefan J. Betz wrote:
    
    > Hello People,
    >
    > i have some Mitsumi USB Floppy Drive with the following Data:
    > Manufactur: Mitsumi
    > Typ       : D353FUE
    >
    > When i plug this Device into my Linux Box (Kernel 2.6.0-test9), i get
    > the following messages in my Syslog:
    >
    > Nov 20 22:17:57 mobileone kernel: hub 1-0:1.0: new USB device on port 1, assigned address 2
    > Nov 20 22:17:57 mobileone kernel: usb-storage: This device (03ee,6901,0100 S 04 P 00) has unneeded SubClass and Protocol entries in unusual_devs.h
    > Nov 20 22:17:57 mobileone kernel:    Please send a copy of this message to <linux-usb-devel@lists.sourceforge.net>
    > Nov 20 22:17:57 mobileone kernel: scsi2 : SCSI emulation for USB Mass Storage devices
    > Nov 20 22:17:57 mobileone kernel:   Vendor: MITSUMI   Model: USB FDD           Rev: 1039
    > Nov 20 22:17:57 mobileone kernel:   Type:   Direct-Access                      ANSI SCSI revision: 02
    > Nov 20 22:17:57 mobileone kernel: Attached scsi generic sg2 at scsi2, channel 0, id 0, lun 0,  type 0
    
    > I that is enough information to Support that drive (or how can i use ist
    > today?)
    >
    > Greeting Betz Stefan
    
    Thank you for sending this in.  The usb-storage driver will be updated
    sometime after 2.6.0-final is released.
    
    Alan Stern

commit 2f937bad653289d13470d075c0de529a0a51d553
Author: Alexander Oltu <alexander@all-2.com>
Date:   Thu Dec 11 00:35:03 2003 -0800

    [PATCH] USB storage: patch for unusual_devs.h
    
    I send a patch and copy of /proc/bus/usb/devices for my 5`25 external
    USB enclosure. I don't know exactly manufacturer of this device, but
    model is CD-509.
    It will be nice if it helps somebody else.
    
    
    T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12  MxCh= 2
    B:  Alloc= 93/900 us (10%), #Int=  1, #Iso=  0
    D:  Ver= 1.00 Cls=09(hub  ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
    P:  Vendor=0000 ProdID=0000 Rev= 0.00
    S:  Product=USB UHCI Root Hub
    S:  SerialNumber=14a0
    C:* #Ifs= 1 Cfg#= 1 Atr=40 MxPwr=  0mA
    I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
    E:  Ad=81(I) Atr=03(Int.) MxPS=   8 Ivl=255ms
    T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  2 Spd=1.5 MxCh= 0
    D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
    P:  Vendor=045e ProdID=0040 Rev= 3.00
    S:  Manufacturer=Microsoft
    S:  Product=Microsoft 3-Button Mouse with IntelliEye(TM)
    C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=100mA
    I:  If#= 0 Alt= 0 #EPs= 1 Cls=03(HID  ) Sub=01 Prot=02 Driver=usbmouse
    E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=10ms
    T:  Bus=01 Lev=01 Prnt=01 Port=01 Cnt=02 Dev#= 15 Spd=12  MxCh= 0
    D:  Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
    P:  Vendor=05e3 ProdID=0701 Rev= 0.02
    S:  Product=USB TO IDE
    C:* #Ifs= 1 Cfg#= 1 Atr=c0 MxPwr= 96mA
    I:  If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage
    E:  Ad=81(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=02(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms

commit 3942c9a13e64fbcbd6fde816d51be23dc3a4f755
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Dec 11 00:25:56 2003 -0800

    [PATCH] USB Storage: freecom dvd-rw fx-50 usb-ide patch

commit e286c8f8f62d8456af1279d91936d68670d40506
Author: Eric Brower <ebrower@usa.net>
Date:   Thu Dec 11 00:25:42 2003 -0800

    [SPARC64]: SUNW,lombus device has nonstandard ebus child regs too.

commit 969cf19dc9a326c4428dc31c38a4c497fb0742bc
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 11 00:24:48 2003 -0800

    [PATCH] USB storage: unusual_devs.h entry revision
    
    Here is another update for unusual_devs.h in both 2.6 and 2.4.  No
    urgency.
    
    
    On Wed, 12 Nov 2003, Aris Basic wrote:
    
    > Device Sony Memory Stick Reader MSAC-US1
    > usb-storage: This device (054c,002d,0100 S 04 P 01) has unneeded SubClass and Protocol entries in unusual_devs.h
    >    Please send a copy of this message to <linux-usb-devel@lists.sourceforge.net>
    
    Thanks for sending this in.

commit 3a9e46f83791195d2c34fc2517418a5164be9aef
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 10 20:22:16 2003 -0800

    ia64: Based on patch by Jerome Marchand: Add ia64-optimized
    	atomic_dec_and_lock().  Actually, this could be the generic
    	version for any platform that has cmpxchg().

commit 59c0e851c64e66a873753be32d03140a70c74460
Author: Martin Pool <mbp@samba.org>
Date:   Wed Dec 10 19:55:55 2003 -0800

    [PATCH] USB storage: add unusual storage device entry for Minolta DiMAGE
    
    Yes, it seems to work OK on the 7i with this updated patch.  I don't
    have a 7 or 7Hi to try, but everything on the web seems to say the USB
    firmware works the same way.

commit a3f206d0d6edd60dda141d37985ef471c4854e81
Author: Stephane Galles <stephane.galles@free.fr>
Date:   Wed Dec 10 19:51:43 2003 -0800

    [PATCH] USB storage: patch for Kyocera S5 camera
    
    I've seen some entries in 2.4.22 and 2.6.0 unusual_devs.h
    for Kyocera Finecam S3 et S4 cameras and I own a Finecam S5
    that does not work out of the box either
    (here is the beast : http://www.yashica.com/digital/finecams5/finecams5.html)
    
    so I found the unusual_devs.h entry and submitted it some month
    ago at http://www.qbik.ch/usb/devices/showdev.php?id=1626
    for the 2.4 kernels
    
    I thought It would be nice to have the whole Finecam family
    in Unusual_devs.h for 2.6.0
    
    The patch for the 2.6.0-test9 is attached with this mail
    
    It differs from the entry I submitted at www.qbik.ch
    as I used the new SC/PR_DEVICE flags and got rid of the
    IGNORE_SER flag from 2.4
    
    Do you want a patch for 2.4 too ? If so, I should test my
    old 2.4 entry with the lastest 2.4 Kernels, coz on a daily
    basis I use a 2.4.20, which is rather old. Moreover, I could
    used the SC/PR_DEVICE flags too for 2.4.22 (keeping the IGNORE_SER flag
    though)
    
    
    By the way, several entries with the running patch :
    
    /proc/bus/usb/devices :
    
    T:  Bus=03 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  2 Spd=12  MxCh= 0
    D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
    P:  Vendor=0482 ProdID=0103 Rev= 1.00
    C:* #Ifs= 1 Cfg#= 1 Atr=c0 MxPwr=  2mA
    I:  If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage
    E:  Ad=81(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=02(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    I:  If#= 0 Alt= 1 #EPs= 3 Cls=ff(vend.) Sub=06 Prot=50 Driver=usb-storage
    E:  Ad=81(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=02(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=83(I) Atr=03(Int.) MxPS=   8 Ivl=32ms

commit cb2d682734cab4abf8633dc5e045b238e7ffc82b
Author: Fabrizio Fellini <fello@libero.it>
Date:   Wed Dec 10 19:48:40 2003 -0800

    [PATCH] USB storage: patch for Fujifilm EX-20

commit 24a5b266c21c93a1f0ef0dc866a13de8d3f720d6
Author: Per Winkvist <per.winkvist@uk.com>
Date:   Wed Dec 10 19:43:15 2003 -0800

    [PATCH] USB storage: Make Pentax Optio S4 work
    
    The change below is needed to get the S4 camera working.
    Tested with both Optio S/S4

commit 087eb30dc606768605540dab265c4edd3ee9f050
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 10 01:34:27 2003 -0800

    ia64: Switch places for the gate pages and the guard page.  This improves
    	backwards-compatibility with older (broken) versions of GCC which
    	recognize a signal-handler only if it is in the address range
    	from 0xa000000000000100. to 0xa000000000020000.

commit ab8be1d0bd6a98a830f9e27aa1060ef67ff8d4fd
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Wed Dec 10 01:29:05 2003 -0800

    ia64: Jim Wilson says that gcc v3.3 also supports marking ar.pfs as
    	clobbered, so use ia64_spinlock_contention() for any GCC with
    	v3.3 or newer.

commit 968285776e2fb3ab452b5478b2c023f4adaca043
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Dec 9 23:57:22 2003 -0800

    [BLUETOOTH]: Put MODULE_ALIAS_NETPROTO for PF_BLUETOOTH in af_bluetooth.c

commit 694382d6fb097cfd399cb9d6f163c13f90a23a7f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Dec 9 22:50:56 2003 -0800

    [ROSE]: Fix use after free in socket destruction.

commit e68ee0245f1764f7eaffb4c9103862a1418218fa
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Dec 9 22:41:41 2003 -0800

    [PPPOE]: Add missing MODULE_ALIAS_NETPROTO.

commit 6ae7421f2792114ab952c55a3a5b4390c4f96ad9
Merge: 00bd610... 8cc86c0...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 9 08:49:18 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/sparcwork-2.5
    into nuts.ninka.net:/disk1/davem/BK/sparc-2.5

commit daa4e722fb7633a7db05a9a2ef4cac59228159f4
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Dec 9 02:05:06 2003 -0800

    [PATCH] USB: usb_hcd_unlink_urb() test for list membership
    
    This is a minor cleanup that replaces a test for non-null urb->hcpriv
    with "is the urb on this list".  HCDs don't need to use hcpriv in that
    way, and in general this is a safer way to test that.  (AIO does much
    the same thing in its kiocb cancelation paths.)

commit f6470813fc83d247bd7b91fbd261d5dc9f16d9b4
Author: Oliver Neukum <oliver@neukum.org>
Date:   Tue Dec 9 01:48:19 2003 -0800

    [PATCH] USB: sleeping problems in cyberjack driver
    
    this driver has locking problems. Here's the first round of fixes
    for the obvious cases.
    
    - it makes clear differences between completion handlers and task context
    - it fixes cases of sleeping in interrupt

commit 81377879fec5133fd37cbc0bf3f6957e9c445752
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 8 20:10:22 2003 -0800

    [PATCH] USB storage: remove the raw_bulk.c and raw_bulk.h files as they are no longer needed.

commit 343f4be5136012a42777308e5bf11026d3cb9365
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:48:52 2003 -0800

    [PATCH] USB storage: Add comments explaining new s-g usage
    
    On Sun, 30 Nov 2003, Matthew Dharm wrote:
    > I'm going to pass this one along to Greg, but I think some places in this
    > could really use some better comments.  Especially the way you use a single
    > buffer inside the loop -- it took me a few minutes to figure out how your
    > logic to refresh the buffer with new data worked.
    >
    > I'm also wondering if the access_xfer_buf() function could use some more
    > header comments, stating why this is needed (i.e. spelling out the
    > kmap()-isms).
    
    Okay, here it is.  This patch basically just adds comments.  Each routine
    that uses the new scatter-gather function gets a brief explanation of
    what's going on, and access_xfer_buf() itself gets detailed comments
    saying what it's doing and why it's necessary.  You may even want to cut
    some of it back; I was pretty verbose.

commit 15a600075d707013f409d4cb92e8cea0023bf251
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:47:26 2003 -0800

    [PATCH] USB storage: Remove unneeded raw_bulk.[ch] files, change Makefile
    
    As a result of the last round of changes, the raw_bulk source files aren't
    needed any more.  They can be deleted and the Makefile changed
    accordingly.

commit fb56d31d240d27eb57d153e9b02cafcc60edabab
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:46:03 2003 -0800

    [PATCH] USB storage: Convert sddr55 to use the new s-g routines
    
    This patch changes the sddr55 driver to make it use the new scatter-gather
    routines.  It has not been tested, but perhaps Andries Brouwer will be
    able to try it out.

commit 0ab5aead0c34237c989aee1c14967e8f723fd812
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:44:56 2003 -0800

    [PATCH] USB storage: Update scatter-gather handling in the shuttle-usbat
    
    This patch updates the shuttle_usbat driver to use the new scatter-gather
    transfer routines.  The small set of changes needed speaks well for the
    original organization of the code.
    
    This has not been tested.

commit 5151c5360d3adc99b41c89b6cd893efee787a16f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:43:57 2003 -0800

    [PATCH] USB storage: Update scatter-gather handling in the isd200 driver
    
    This patch fixes the scatter-gather handling in isd200, replacing an
    incorrect routine there with calls to the new routine added in the
    previous patch.  It also removes a couple of places where the driver
    returned data for commands that shouldn't get any (TEST-UNIT-READY and
    START-STOP).
    
    This has not been tested.

commit 2505f3dfa8532fa4f02a58168837224f4a02a82e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:43:14 2003 -0800

    [PATCH] USB storage: Another utility scatter-gather routine
    
    This patch adds a small utility routine for storing data in a transfer
    buffer.  The next patch uses this routine quite a bit in the isd200
    driver.

commit 313b9054b638e128f517d5b4aa60d60de8a3228e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:42:45 2003 -0800

    [PATCH] USB storage: Convert jumpshot to use the new s-g routines
    
    This patch converts the jumpshot driver to use the new scatter-gather
    routines.  It has not been tested.

commit e3d1bd2c8affbcc23ac057c018658d9bdfe700de
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 19:42:16 2003 -0800

    [PATCH] USB storage: Convert datafab to use the new s-g routines
    
    This patch updates the datafab driver to the new scatter-gather handling,
    which makes it safe for systems with >1GByte of memory.
    It has been tested by Eduard Hasenleithner.

commit 18f49e88b65eaa95269c1c7c315965ccfb6c5f81
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Dec 8 17:54:51 2003 -0800

    [PATCH] USB: fix up compiler warning in usblp driver caused by previous patches.

commit 4c15dcb4cca6f08e9d4e725840fcfc4bc5c9b82c
Author: Oliver Neukum <oliver@neukum.org>
Date:   Mon Dec 8 17:53:57 2003 -0800

    [PATCH] USB: further cleanup in usblp
    
    somebody built his own version of be16_to_cpu(). Such things affect
    maintainability.

commit 06819dfe35fbeb88342e47bc54bc6e108f05dd16
Author: Oliver Neukum <oliver@neukum.org>
Date:   Mon Dec 8 17:53:21 2003 -0800

    [PATCH] USB: fix error return codes in usblp
    
    this fixes the questionable error return codes Paulo noticed
    in usblp. I hope I really got all cases now.

commit 1b159720df86dd16022c67643c055bd122a67600
Author: Xose Vazquez Perez <xose@wanadoo.es>
Date:   Mon Dec 8 05:54:23 2003 -0800

    [TG3]: Add new device IDs.

commit b3fa3588e8f60d7c1f5edabeb1669e1376ce27ac
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:45:52 2003 -0800

    [PATCH] USB storage: Change sddr09 to use the new s-g access routine
    
    This patch updates the sddr09 driver to use the new scatter-gather access
    routine.  After installing it, the user who experienced memory access
    violations says everything is now working properly.

commit f3badfb7299d073cfabbbee7ae3646eedfbe858f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:45:21 2003 -0800

    [PATCH] USB storage: Fix scatter-gather buffer access in usb-storage core
    
    This patch adds a routine to protocol.c that correctly transfers data to
    or from a scatter-gather buffer.  According to Jens Axboe, we've been
    using page_address() incorrectly -- it's necessary to use kmap() instead
    -- and in fact it doesn't give the desired result when the buffers are
    located in high memory.  This could affect anyone using a system with 1 GB
    or more of RAM, and one user has already reported such a problem (as you
    know).
    
    The three fixup routines in protocol.c and usb.c have been changed to use
    the new s-g access routine.  When similar adjustments have been made to
    all the subdrivers, we will be able to eliminate the raw_bulk.c source
    file entirely.

commit 7ab39894eca93717122e49bbaadfba4cb540bf5d
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:45:04 2003 -0800

    [PATCH] USB storage: Remove dead code from debug.c
    
    This patch removes an uncalled subroutine from debug.c.  I only noticed it
    when tracking down scatter-gather usage; there didn't seem to be any
    reason to repair it since it wasn't being used anywhere.

commit 8d93f69f742742136566a5961b6d9d9c337234c5
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:44:49 2003 -0800

    [PATCH] USB storage: Enhance sddr09 to work with 64 MB SmartMedia cards
    
    This patch was written by Andries Brouwer.  It adds to sddr09 the ability
    to use 64 MB SmartMedia cards.  I have added a few minor alterations to
    make it fit in with my sequence of other patches.

commit a01e2e63b02f4b9ae5a57c5c4f003826bb75b2e1
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:44:31 2003 -0800

    [PATCH] USB storage: Remove unneeded scatter-gather operations in sddr09
    
    This patch removes some unnecessary scatter-gather code from the sddr09
    driver.  In its place a single smaller buffer is re-used each time through
    an I/O loop, as opposed to transferring all the data at once.
    
    Andries Brouwer kindly tested this and suggested some improvements to get
    it working right.

commit 50de380180064eea8edbd78b73c7c362d16adf0d
Author: Peter Chubb <peter@chubb.wattle.id.au>
Date:   Mon Dec 8 01:37:01 2003 -0800

    [PATCH] ia64: make perfmon CONFIG_PREEMPT-safe again
    
    Here's a  fix for non-preemption safety in perfmon.c.
    
    I haven't tried it while running a preemption stress test, but this
    allows q-syscollect to work.

commit 422cbad199e8de456b3f8a0f18f8ae62da661c2e
Author: Henning Meier-Geinitz <henning@meier-geinitz.de>
Date:   Mon Dec 8 01:25:34 2003 -0800

    [PATCH] USB scanner driver: new device ids
    
    Added vendor/product ids for Epson, Genius, Microtek, Plustek,
    Reflecta, and Visioneer scanners. Removed ids for HP PSC devices as
    these are supported by the hpoj userspace driver.

commit 94ef3b63f4cdfca0222d55821f34eaa2a97b7ba8
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 01:08:03 2003 -0800

    [PATCH] USB: Fix khubd synchronization
    
    It improves synchronization with hub_irq() and guarantees that the hub
    disconnect() routine doesn't exit until the URB's completion routine has
    finished.

commit 74636bf5ed5360969ffb30fa8f33ca64d5423073
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Dec 8 00:54:38 2003 -0800

    [PATCH] USB: khubd optimization
    
    It changes spin_lock_save() to spin_lock() within the completion routine
    and list_del()/INIT_LIST_HEAD() to list_del_init().  It's nothing more
    than a minor optimization.

commit c134be2850be47cf06ce5f9db29d9c4245426b00
Merge: 5d568a1... 8255b24...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Sun Dec 7 03:58:53 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/net-drivers-2.5

commit f143781b80af91dc3bdd8fee6c570edb8a763910
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Fri Dec 5 03:41:06 2003 -0500

    [libata promise] Properly initialize DIMM, on SX4
    
    On-board DIMM should be sized and initialized by the driver.  Previously,
    a single DIMM size was simply (and incorrectly) assumed, and
    initialization was presumed to have been done by the card's BIOS.
    
    Contributed by Promise, updated by David Milburn @ Red Hat.

commit 5d568a16d35c27bcb249aedc15fbf371717f682a
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Fri Dec 5 03:21:27 2003 -0500

    [netdrvr pcnet32] fix oops on unload
    
    Driver was calling pci_unregister_driver for each _device_, and then
    again at the end of the module unload routine.  Remove the call that's
    inside the loop, pci_unregister_driver should only be called once.
    
    Caught by Don Fry (and many others)

commit dbdb6f6ff5b31ee4e0b6e85a6fd54ef4b5007e70
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Fri Dec 5 03:10:58 2003 -0500

    [libata] fix use-after-free
    
    Fixes oops some were seeing on module unload.
    
    Caught by Jon Burgess.

commit ed63f425decb95181769f31e11aec76814cfbe49
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Dec 4 19:14:07 2003 -0800

    [PATCH] USB: ohci, fix iso "bad entry" bug + misc
    
    A while back there were some reports of ohci reporting a "bad entry"
    diagnostic, mostly with ISO transfers, which were mysterious until
    I recently found an easy way to reproduce it.
    
    This patch:
    
      - Fixes at least one cause of that "bad entry" diagnostic by
        waiting for INTR_WDH before completing ED unlink processing.
        (Else URB unlinking could free TDs on the donelist, so the
        WDH processing would see those entries as "bad".)
    
      - Merges the patch from Darwin Rambo <drambo@broadcom.com>,
        coping with CPUs that can't do 16 bit accesses (MIPS).
    
      - Renames a function as start_ed_unlink(), matching its role.
    
      - Fixes minor debug output issues, including a FIXME to tell
        more info about TDs on the periodic schedule.  And adding
        some missing newlines (makes this patch seem big).
    
    Nobody's complained much about that "bad entry" issue lately, but
    if necessary that part would be particularly easy to split out.
    
    Please merge to the next kernel that gets USB patches.

commit 1fca60c08ddb5fa33b52ad3fb8a600558d7bdfa2
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 4 19:07:06 2003 -0800

    [PATCH] USB storage: Fix logic error in raw_bulk.c:us_copy_to_sgbuf()
    
    This patch fixes a simple logic error in the routine that copies data from
    a driver buffer to a scatter-gather user buffer.

commit af62566fe1293f03b7847d30d350491d8c43f8c2
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 4 19:06:53 2003 -0800

    [PATCH] USB storage: Issue CBI clear_halt and fix BBB residue
    
    This patch does 2 things (bad, I know -- but they're both pretty small
    and pretty obscure).
    
    The CBI specification states in section 2.4.3.1.3 that
    
    	... the host shall also issue Clear Feature for Endpoint Halt
    	to the Bulk In pipe if the device reports that the Data In
    	command block has Failed.
    
    along with a note in section 2.5.3 that Data Out commands should work
    analogously.  This patch does that, along with cleaning up the status
    detection logic a little.
    
    For Bulk-only transfers we currently ignore the dResidue field in the CSW,
    except for reporting it (without byte-swapping!) in a debug message.  The
    patch uses it to compute the residue value returned to the SCSI layer.
    Note that the Bulk-only spec allows devices to transfer more data than
    they actually use (i.e., they may add padding or ignore stuff) and then
    inform the host of this by means of the dResidue value.  The logic used is
    simple: our reported residue is the larger of what the device claims and
    what we didn't transfer, except that it can't be larger than the total
    transfer length.

commit 78dd3042258c73c096ff214be6865cb3a373de78
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Dec 4 19:06:34 2003 -0800

    [PATCH] USB storage: Command failure codes for sddr09 driver
    
    This patch updates the sdd09 subdriver to make it return Command Failure
    with appropriate sense data (rather than Tranport Error) when:
    
    	a MODE-SENSE command requests an unsupported page;
    
    	a CDB includes an unrecognized command code.
    
    This should help prevent confusion and excessive retrying by the SCSI
    drivers.

commit 16c7cc306e6359d0051ef18968daa94829e3986b
Author: Ahmon Dancy <dancy@dancysoft.com>
Date:   Thu Dec 4 18:58:30 2003 -0800

    [PATCH] USB: add TIOCMIWAIT support to pl2303 driver

commit be9f10e76ef414419fc791aa2cf55d88e7dbe912
Merge: 3a0e461... d2df046...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Thu Dec 4 15:46:07 2003 -0500

    Merge http://typhoon.bkbits.net/typhoon-2.5
    into redhat.com:/spare/repo/net-drivers-2.5

commit d0d2d872830a73dad4545c972a90802fef11b873
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Dec 3 23:14:51 2003 -0800

    [PATCH] USB: fix comment in usblp
    
    I know Linus is not taking cleanups at this point, but perhaps
    you can delete it in your tree. Seems like someone (Oliver?)
    fixed all the garbage in old printer.c, so the comment is not
    needed anymore.
    
    I reviewed changes, and usblp.c looks correct. I'm doing backport
    to 2.4 for Fedora right now.

commit 65dacb234de77c6e6e27d30d7ae693740bc747be
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Dec 3 23:11:34 2003 -0800

    [PATCH] USB: change cdc-acm to do RX URB processing in a tasklet
    
    Just for cdc-acm, it pushes RX URB processing into a tasklet;
    and has minor cleanups.
    
    I cc'd Vojtech since he's this driver's maintainer.  If this
    checks out, usb-serial will need similar changes.
    
    
    p.s. the issue is a WARN_ON that tells us:
    
       >> [<c012046c>] local_bh_enable+0x8c/0x90
       >> [<f8991452>] ppp_asynctty_receive+0x62/0xb0 [ppp_async]
       >> [<c02144f3>] flush_to_ldisc+0xa3/0x120
       >> [<f891f20f>] acm_read_bulk+0xbf/0x140 [cdc_acm]
       >> [<c02684c9>] usb_hcd_giveback_urb+0x29/0x50
       >> [<c027670c>] dl_done_list+0x11c/0x130
       >> [<c0277075>] ohci_irq+0x85/0x170
       >> [<c0268526>] usb_hcd_irq+0x36/0x60
       >> [<c010aeba>] handle_IRQ_event+0x3a/0x70
       >> [<c010b227>] do_IRQ+0x97/0x140
       >> [<c0109624>] common_interrupt+0x18/0x20

commit b69a6df34f2e2576eab20665fe12917bb2b7e937
Merge: e6a9ee2... 29515e2...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Wed Dec 3 23:00:41 2003 -0800

    Merge bk://linuxusb@linuxusb.bkbits.net/usb-devel-2.6
    into kroah.com:/home/greg/linux/BK/usb-new_drivers-2.6

commit eb9ab68e6fe73133172a253bc9ee660bd6cfcace
Author: Jakub Jelnek <jakub@redhat.com>
Date:   Wed Dec 3 22:53:04 2003 -0800

    [PATCH] ia64: fix typo in vmlinux.lds.S
    
    The security init section was incorrectly using PAGE_OFFSET instead of
    LOAD_OFFSET.

commit e1b2a0802dbe12fc1ae6cbfcc6e33e641bae77b9
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 22:26:44 2003 -0800

    [PATCH] I2C: it87 and via686a alarms
    
    > it87 and via686a violate the sysfs standard by having "alarm" instead
    > of "alarms", would you please fix in your next patch?
    
    I'm not the only one allowed to send patches to Greg, you know ;)
    Anyway, here we go. Greg, here is a patch that corrects the standard
    violation reported by Mark. Tested to compile.
    
    (It also removes a useless comment in it87.c.)

commit c54949bcdb72e7948655a08370ad4a83b775d6b3
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:53:58 2003 -0800

    [PATCH] I2C: add KT600 support to i2c-viapro driver
    
    This patch adds support for the KT600 to the i2c-viapro driver. It was
    confirmed to work by Lou, lm-sensors at fixit dot nospammail dot net in
    this post:
    http://archives.andrew.net.au/lm-sensors/msg05299.html

commit c49c73219ee1b3c72d708f57c57b7ac1648c5b65
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:53:39 2003 -0800

    [PATCH] I2C: add Serverworks CSB6 support to i2c-piix4
    
    This patch adds support for the Serverworks CSB6 to i2c-piix4 driver. It
    was confirmed to work by lasirona at yahoo dot com in support ticket
    #1424:
    http://secure.netroedge.com/~lm78/readticket.cgi?ticket=1424

commit 608f0ea9d99a6ca229932a9db7f48f133666f31c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:53:21 2003 -0800

    [PATCH] I2C: fix author of i2c-savage4.c driver
    
    This patch rehabilitates Alexander Wold as the author of the i2c-savage4
    driver. For some reason, his name was not mentioned anywhere in the
    first place.
    
    The change was requested by Alexander Wold himself.

commit a624762907963274ecb069ab6065c65b849c4c6f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:43:05 2003 -0800

    [PATCH] I2C: make I2C chipset drivers use temp_hyst[1-3]
    
    Summary of the changes:
    adm1021.c: No changes, that chipset uses a real min/max model.
    eeeprom.c: No changes (obviously).
    it87.c:    Remove buggy comments (obviously taken from via686a) about
               max and min temperature limits being over and hyst. This
               isn't the case for this driver (min/max model).
    lm75.c:    Simple sysfs file name change (temp_min to temp_hyst).
    lm78.c:    Simple sysfs file name change (temp_min to temp_hyst).
    lm85.c:    No changes needed (min/max model).
    via686a.c: Rename functions and macros from min/max to hyst/over, what
               it really is. Remove unnecessary comments. Rename sysfs
               files from temp_min[1-3] to temp_hyst[1-3].
    w83781d.c: Rename variables from temp_min* to temp_hyst* (needed so
               that the macros keep working). Update macro calls
               accordingly. Fix writing temp to max and hyst being
               swapped.
    
    Additional remarks:
    
    The lm75 and lm78 having a single temperature channel, there is no
    number appended to the file names. Shouldn't a "1" be appended in this
    case? I think it would make it easier for the future library to catch
    all the files.
    
    I made sure the drivers would still compile after the changes, but did
    not test them otherwise (no working 2.6.0 kernel here, and not all the
    hardware anyway).

commit 0fb8d0165b57c89aec9af289b873fdd1ed3a3c4b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:41:40 2003 -0800

    [PATCH] I2C: sysfs interface documentation
    
    1* No more current hysteresis value. I don't think we ever saw a chip
       which monitors current, and if we ever do, I would be very, very
       surprised if it would have an hysteresis value.
    2* Temperature input and max can have 4 values. [from the previous
       patch]
    3* Split temperature min and hysteresis into two separate files.
    4* New file temp_crit. [from previous patch]
    
    The new file temp_crit is subject to change later as we decide more
    precisely how we want to handle values that are common to more than one
    temperature channels.

commit fe77c2b7597447b60ead43300e1c1afd74339065
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 21:35:42 2003 -0800

    [PATCH] I2C: Fix i2c-algo-bit for adapers that cannot read SCL back
    
    Here follows a patch to i2c-algo-bit.c as found in linux-2.6.0-test9,
    with two fixes for adapters that cannot read SCL back. Althouth real
    adapters should be able to read SCL back, there are some that
    cannot, for example the ADM1032 evaluation board I am using. Such
    adapters where supposed to be already supported, but I found a probable
    bug and improved support.
    
    These changes were applied to our i2c CVS repository two weeks ago and
    have been reviewed by Mark D. Studebaker.
    
    List of changes:
    
    * Fix sclhi() for adapters that do not have getscl().
    * Enable bit_test for adapters that do not have getscl().
    * Mostly rewrite test_bus(), cleaner and probably faster.

commit c01b753b50ddd04f570a859dd7ef9f4522b07328
Merge: e6a9ee2... 09b256d...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Wed Dec 3 19:34:59 2003 -0800

    Merge bk://linuxusb@linuxusb.bkbits.net/i2c-devel-2.6
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit d2df046f668479701ae7f34e11c16cab502eec4d
Author: Alexander Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Wed Dec 3 12:45:13 2003 -0500

    [netdrvr] remove manual driver poisoning of net_device
    
    Such poisoning can cause oopses either because the refcount is not
    zero when the poisoning occurs, or due to kernel debugging options
    being enabled.

commit 09b256d381e7a59424f27944c236406d51a2f1b5
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 08:44:29 2003 -0800

    [PATCH] I2C: i2c documentation (2 of 2)
    
    This is a patch to writing-clients. The current version in Linux 2.6
    still mentions the old module reference counting mechanism. The patch
    brings it to the same version we have in i2c CVS, where that section has
    been updated.

commit e8d89ff61ad71fe07f5ec8da71dccda93cabd967
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Dec 3 08:43:55 2003 -0800

    [PATCH] I2C: i2c documentation (1 of 2)
    
    This is the document I wrote (and you reviewed) about porting client
    drivers to Linux 2.6. The retained name is "porting-clients" (in line
    with writing-clients). I won't commit it to i2c/lm_sensors2 CVS, since
    that document is of no use outside of the 2.6 kernel (and I'm bored
    keeping files in sync).

commit 29515e26ff7fafd965b5486d77c7ef7e17ca0676
Merge: 4d878fe... ed5a94a...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Tue Dec 2 23:59:19 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/usb-new_drivers-2.6

commit 361a2e90f57965e0d0e8c097f776d46b52b5a6e6
Merge: 4d878fe... 573f2ce...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Tue Dec 2 23:36:44 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit c869560d4b2defc32d99374cdbef22a2f2cb07f0
Merge: 32b7129... 4d878fe...
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 2 05:02:03 2003 -0800

    Merge nuts.ninka.net:/disk1/davem/BK/network-2.5
    into nuts.ninka.net:/disk1/davem/BK/net-2.5

commit f7e27448b6a37bc9da4911f58b0bac556b5f2ff5
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Tue Dec 2 03:42:50 2003 -0800

    [TG3]: Update to latest non-5705 TSO firmware.

commit 32b71296b247fb444467a00b4c653bfab2200b7f
Author: jlut@cs.hut.fi <jlut@cs.hut.fi>
Date:   Tue Dec 2 00:38:42 2003 -0800

    [IPV6]: Neighbour discovery bypasses netfilter.

commit 8662a8291af8db959a9358d6b705cac117f373ca
Author: Pavlin Radoslavov <pavlin@icir.org>
Date:   Tue Dec 2 00:28:17 2003 -0800

    [RTNETLINK]: Add RTPROT_XORP.

commit dfd87ee1d4a83b8a2958e75f175eda112a1613fe
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 1 10:35:21 2003 -0800

    [TG3]: Update version and release date.

commit 5ef3c85e583b3bd1586b4fcfb992cc8d39c13e7e
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 1 10:34:45 2003 -0800

    [TG3]: Clear on-chip stats/status block after resetting flow-through queues.
    
    On systems where the config cycles might take a long time, we
    can end up with the ASF firmware using the FTQs before we get
    to resetting them.

commit 1a8eb4dc3a843f30f516df296407e3d963fde46b
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 1 10:34:13 2003 -0800

    [TG3]: Do not set RX_MODE_KEEP_VLAN_TAG when ASF is enabled.

commit 6cd132beee0b2265d6e30fffa7b055a95de49020
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Mon Dec 1 10:33:45 2003 -0800

    [TG3]: Do not drop existing GRC_MODE_HOST_STACKUP when writing to GRC_MODE.

commit 54dd6c88f80e2faa33d9a1d0658684201e9acbce
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Dec 1 09:32:03 2003 -0800

    [NETFILTER]: Trivial -- Get rid of warnings in netfilter if /proc is not configured on.

commit 00bd610de48c0d1082dff4b310d4b38142d163e3
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Dec 1 08:59:40 2003 -0800

    [SPARC]: Get kbd/mouse working again with sunzilog serial.

commit 4fe5604fa18e86a3171038b836fe45cb25524403
Author: Paul Jackson <pj@sgi.com>
Date:   Sun Nov 30 21:13:14 2003 -0800

    [PATCH] ia64: fix samp_affinity user-space accesses
    
    Here is a new improved patch for verifying user access to string
    passed in to kernel on write to /proc/irq/<pid>/smp_affinity.
    
    The access_ok() but missing __get_user() on each byte earlier patch
    has been replaced with a copy_from_user().
    
    I have built it and verified that it handles write requests
    as before, on an ia64 system (well - you can no longer pass
    more than 14 spaces after the 'R' - tough).

commit 5fac4115c45ec89f23f536e548a3fca334e9ac55
Merge: e689bf5... 1c251ad...
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Sun Nov 30 11:41:23 2003 -0500

    Merge redhat.com:/spare/repo/linux-2.5
    into redhat.com:/spare/repo/libata-2.5

commit b83290ea44e269d28fe8791f328153771a6416a7
Merge: 06477bc... e689bf5...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Sun Nov 30 12:25:58 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit 06477bc3a1029448a17ff03d4318648d4a74cf88
Author: Dave Jones <davej@redhat.com>
Date:   Sun Nov 30 12:18:36 2003 +0000

    [AGPGART] Merge missing chunk of NVIDIA nForce agpgart driver.
    This bit has been in the 2.4 driver since it appeared, but I dropped
    it (partly deliberatly), and then forgot all about it.
    Turns out that some systems really need this stuff, as their BIOS hasn't
    set up the IORRs.
    
    http://bugme.osdl.org/show_bug.cgi?id=1521

commit 1c251ad4d5cebd4815eddfa4449c6e48713adf61
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Sun Nov 30 01:56:06 2003 -0500

    [libata] use sg_dma_xxx macros
    
    Fixes build on some platforms, fixes issues on others.

commit 60b95251032ff12ce322231a8165e8176078832e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Nov 29 04:46:30 2003 -0800

    [SCTP]: Fix sm.h/sctp.h header include loop.

commit 322d91002c9bad2357cda419d9571a59bff2b328
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Nov 29 04:45:43 2003 -0800

    [SPARC]: When sun4c OOPSes, do not watchdog reset by accident.

commit 202ca737b132b513e2112e48e6361c6eaa52e549
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Nov 29 04:42:29 2003 -0800

    [NETFILTER]: Sanitize ip_ct_tcp_timeout_close_wait value, from 2.4.x

commit 7e693e32414241474a420fa18138d1f1e3130dfd
Author: Hirofumi Ogawa <hirofumi@mail.parknet.co.jp>
Date:   Sat Nov 29 04:40:06 2003 -0800

    [TCP]: Fix OOPS when seeking in /proc/net/tcp.
    
    Forgotten initialization of st->state in tcp_seq_start().

commit 33bb7ddaa0f0eb90b79850f367419f05c021507b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Nov 29 04:24:48 2003 -0800

    [XFRM]: Check whether a dst is still valid before adding it to a bundle.

commit 3a0e4612a442985dcd5d36d9797427cfae4aaa0d
Merge: e689bf5... 9b37fb9...
Author: Dave Dillow <typhoon.adm@hostme.bitkeeper.com>
Date:   Wed Nov 26 05:14:55 2003 -0800

    Merge bk://linux.bkbits.net/linux-2.5
    into hostme.bitkeeper.com:/repos/t/typhoon/typhoon-2.5

commit b6248157d5db3eb41d3e2ce213f0fbdc6fb2f596
Author: Jeff Garzik <jgarzik@redhat.com>
Date:   Wed Nov 26 06:12:26 2003 -0500

    [libata] Fix PDC20621: we only have one Host DMA engine, not one per port
    
    Whoops.  So, we need to queue HDMA transactions internally.

commit 4c365135c9708ca78345df61a8f480594d20fc47
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Wed Nov 26 01:44:58 2003 -0800

    [SPARC64]: Update defconfig.

commit fffbcba3323d6f150029b6bbc82af23847a271a7
Author: Ben Collins <bcollins@debian.org>
Date:   Wed Nov 26 01:43:51 2003 -0800

    [SPARC64]: Fix kernel-debug config option dependencies.

commit 1f6dc81c1ed49b16e21723a708f530b2af44ad02
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Nov 26 01:31:26 2003 -0800

    [XFRM]: Handle device down/unregister events.
    
    This patch makes us prune all bundles containing devices being shut down
    or removed.  It also merges two existing functions that walk bundles
    looking for things to delete.

commit 2f1622620b3b79e054c21fb5b1fe7594eefcdd4d
Author: Hideaki Yoshifuji <yoshfuji@linux-ipv6.org>
Date:   Wed Nov 26 01:24:51 2003 -0800

    [IPV6]: Fix ipv4 mapped address calculation in udpv6_sendmsg().

commit 589bb6c273d50defd626c9990557abed368b02d4
Author: David Mosberger <davidm@tiger.hpl.hp.com>
Date:   Tue Nov 25 23:03:24 2003 -0800

    ia64: Fix a bug in sigtramp() which corrupted ar.rnat when unwinding
    	across a signal trampoline (in user space).  Reported by
    	Laurent Morichetti.

commit 9b37fb9bcfb8da78980375b592360614003f0703
Author: David Dillow <dave@thedillows.org>
Date:   Tue Nov 25 14:34:56 2003 -0500

    Bug fixes:
    * Avoid short timeouts when waiting for a reset
    * Fix issue with loading runtime image on newer versions of the sleep image
    * Fix link status reporting

commit f6f4ffa602ac375ca74e39be7d4a5844cbb1e71d
Merge: a3d93eb... 1040d42...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Mon Nov 24 10:32:29 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/cpufreq

commit 5fde0e6ea54096219d680e32d083eb023f862b7c
Merge: 1fb13dc... a3d93eb...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Mon Nov 24 10:01:02 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit 1fb13dc1b2806a56e99435dff596fd2f2d01836c
Author: Dave Jones <davej@redhat.com>
Date:   Fri Nov 21 12:38:12 2003 +0000

    [AGPGART] Mask memory after allocation
    We missed a few cases where we need to do this.
    Fix from Alan Hourihane.

commit 1040d42e914c82be50086517d783e93e4489f149
Author: Dave Jones <davej@redhat.com>
Date:   Fri Nov 21 02:18:24 2003 +0000

    [CPUFREQ] Fix rounding in longhaul.
    The FSB guessing screwed up sometimes.
    If cpu_mhz was greater than the guess we returned zero.

commit b8123db4325864d36a15bacf5d582352c99b376e
Merge: 44cb023... d990de2...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Wed Nov 19 20:08:54 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit d990de214828f2a71b629a4cc99d3db059a6cbf1
Author: Dave Jones <davej@redhat.com>
Date:   Wed Nov 19 20:06:27 2003 +0000

    [AGPGART] Fix MAX_HAMMER_GARTS off by one.
    James Jones spotted that on an 8-way hammer, we would print the
    'too many northbridges'. We should abort at 1 > max, not at max.

commit 491e2425351818390c601a1b537a316b6487ac2a
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Tue Nov 18 17:27:12 2003 +0000

    [ARM] Correct flush_user_cache_range comments.

commit 87f6e9b62dc36990ec4f4fdc02197006d8c5b2cc
Author: Russell King <rmk@flint.arm.linux.org.uk>
Date:   Tue Nov 18 14:43:05 2003 +0000

    [ARM] Remove unnecessary head-integrator.o object.
    
    Integrator boot loaders pass all the relevant information to the
    kernel, there is no need to add code to provide this information.

commit 578e42d79c567b1e26bca26b1681bb4772e172a5
Author: Dave Jones <davej@redhat.com>
Date:   Mon Nov 17 14:21:50 2003 +0000

    [CPUFREQ] Use different attack with the Powernow-K7 bad bios problems.
    Remove dupes by using a webpage instead of flooding me with lots of
    similar emails.

commit faee0178edbc1b11523b2ce39eec8c1d5d0f3e12
Author: David S. Miller <davem@nuts.ninka.net>
Date:   Thu Nov 13 00:44:06 2003 -0800

    [SPARC64]: Add in compat AIO syscall support.

commit 4da4a4c8c0e6d93d376bd34685accfec8a3150ae
Author: Thomas Spatzier <tspat@de.ibm.com>
Date:   Thu Nov 13 00:39:42 2003 -0800

    [S390]: Add in compat AIO syscall support.

commit 624dec48e3b6b74447ebe3e6cf535cc3f98625da
Author: Thomas Spatzier <tspat@de.ibm.com>
Date:   Thu Nov 13 00:38:48 2003 -0800

    [COMPAT]: Add support for AIO system calls, with help from Arun Sharma (arun.sharma@intel.com).

commit 6cd8ae1ff24a55ab5c346b94cec72f5db357a21a
Author: Dave Jones <davej@redhat.com>
Date:   Mon Nov 10 16:39:16 2003 +0000

    [AGPGART] Fix two nasty bugs in the K8 AGP support:
    From Andi.
    
    - Don't kill AGP in the IOMMU code (Badari Pulavarty)
    - Do checking for overlapping aperture/pci resource correctly
    (thanks to Arjan van de Ven for noticing)

commit df8ce55492e7713b223deb5582a6aae907cb6ff7
Author: Dave Jones <davej@redhat.com>
Date:   Mon Nov 10 16:28:09 2003 +0000

    [CPUFREQ] Abort if there is a failure in aquiring "ownership" of the SMI speedstep interface.
    
    From Dominik Brodowski

commit 912aea6b5bf3f4e948f28bdccacf33a5af5512fe
Author: Dave Jones <davej@redhat.com>
Date:   Mon Nov 10 16:26:27 2003 +0000

    [CPUFREQ] Fix powernow-k8 policy usage.
    As the powernow-k8 driver uses the ->target and not the
    ->setpolicy callback, cpufreq_policy->policy is always zero. Checking for it
    in the powernow-k8 driver always returned "false". So we can easily remove
    this invalid check (and the #warning added to denote this).
    
    From Dominik Brodowski

commit cf97bb26fd85e8dad314904dd70ef79433e274ed
Merge: a9c055a... bd88c79...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Mon Nov 10 16:19:12 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit ed5a94a43c82b6fae70551fe9b24b25f96bfc217
Merge: 90d0999... 2417e1a...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Sat Nov 8 20:56:41 2003 -0800

    Merge greg@deskfan:linux/BK/usb-new_drivers-2.6
    into kroah.com:/home/greg/linux/BK/usb-new_drivers-2.6

commit 573f2ce2c6e7dfc61a8c5be624d2cf329f69ddda
Merge: 90d0999... 7cbfaf4...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Sat Nov 8 20:33:41 2003 -0800

    Merge greg@deskfan:linux/BK/i2c-new_drivers-2.6
    into kroah.com:/home/greg/linux/BK/i2c-new_drivers-2.6

commit bd88c79ffe32678d07db16a9c79d5e592a52ab09
Merge: b4a427f... d4933c4...
Author: Dave Jones <davej@delerium.codemonkey.org.uk>
Date:   Tue Nov 4 23:45:48 2003 +0000

    Merge delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into delerium.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit 2417e1a8d122229d9635f4efe5eb54d676b58fdb
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Oct 27 21:48:54 2003 -0800

    [PATCH] USB: add support for Protego devices to ftdi_sio driver

commit 31cfeb55e909a3a9c6a8337f32d11a4775697bdd
Merge: a1e10d3... e2f3adb...
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Mon Oct 27 18:52:51 2003 -0800

    Merge kroah.com:/home/greg/linux/BK/bleed-2.5
    into kroah.com:/home/greg/linux/BK/usb-new_drivers-2.6

commit d4933c49c7bfde0255a0d8e86ba2d22d8e37f299
Merge: 3961260... 31a9ecd...
Author: Dave Jones <davej@wopr.codemonkey.org.uk>
Date:   Mon Oct 27 22:05:21 2003 +0000

    Merge wopr.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/bk-linus
    into wopr.codemonkey.org.uk:/mnt/nfs/sepia/bar/src/kernel/2.6/trees/agpgart

commit 31a9ecd01931dfe60af9fa6dfbde4a44be715fe8
Author: Dave Jones <davej@redhat.com>
Date:   Mon Oct 27 20:38:53 2003 +0000

    [AGPGART] Fix return check on request_mem_region()
    Do things the way every other user of this function does.
    Spotted by Arjan with a suitably pedantic gcc.

commit c7b42d9a2411018b11d45fe03716d0968c429120
Author: Dave Jones <davej@redhat.com>
Date:   Mon Oct 27 20:33:42 2003 +0000

    [AGPGART] Handle multiple AMD64 AGP bridges correctly on UP.
    We only care about the first bridge in UP, but we still tried to continue..

commit b053c0700b4232a7e3d774dd8e9f6bb95999fc26
Author: Dave Jones <davej@redhat.com>
Date:   Mon Oct 27 19:21:31 2003 +0000

    [CPUFREQ] Add support for 1GHz Centrino speedstep
    From: Youichi Aso <aso@granite.phys.s.u-tokyo.ac.jp>

commit e2f3adb2446e72ab2ee549a4c13369fea7979a53
Author: David T. Hollis <dhollis@davehollis.com>
Date:   Thu Oct 23 03:03:54 2003 -0700

    [PATCH] USB: ax8817x additional ethtool support in usbnet
    
    * Provide operational link testing via ethtool
    * Provide get/set features via ethtool.

commit eb912d25ab0d4ad640c0085d5e930b21edb58772
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Oct 23 03:03:25 2003 -0700

    [PATCH] USB: usbcore, better heuristic for choosing configs
    
    Until now, the Linux-USB core has always chosen the first device
    configuration, even when there was a choice.  In 2.4 kernels,
    device driver probe() routines were allowed to override that
    initial policy decisions.  But 2.6 kernels can't do that from
    probe() routines, causing problems with some CDC-ACM modems
    where the first config uses MSFT-proprietary protocols.
    
    This patch switches to a smarter heuristic:  Linux now prefers
    standard interface classes when there's a choice.  So those
    CDC-ACM modems don't need a "write bConfigurationValue in sysfs"
    step when they are connected; they act just like on 2.4 kernels.
    (And sysfs can still be used to handle any problem cases.)

commit 9cc4e8555d134d1e3c9b06394da782fe45341c9c
Author: Alexander Schulz <alex@de.rmk.(none)>
Date:   Tue Oct 21 23:59:02 2003 +0100

    [ARM PATCH] 1693/1: Shark: new defconfig
    
    Patch from Alexander Schulz
    
    This patch updates the defconfig file for the Shark

commit cf1a1e3c2e3e5d54fe594b2606fa6de64829df72
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Wed Oct 15 22:22:46 2003 -0700

    [PATCH] USB: 64bit fixups for legousbtower driver

commit 3eb64c826dca8c735e202769fb063b9a74100e89
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Tue Oct 14 23:17:28 2003 +0100

    [ARM PATCH] 1678/1: correct and better do_div() implementation for ARM
    
    Patch from Nicolas Pitre
    
    Here's a rewrite of the ARM do_div() implementation.  It is much
    faster and smarter than the current code, and it also takes
    advantage of ARMv5+ instructions when target processor allows it.
    
    The current code also deserves to be killed ASAP since it overflows
    and fails to compute correct values in many cases.  For example:
    
    	u64 n = 2200000001;
    	u32 x = 2200000000;
    	u32 r = do_div(n, x);
    
    This currently returns n = 41 and r = 46829569 which is obviously bad.
    
    Another failing example is n=15000000000000000000 and x=3000000000.

commit 24d4f462d8a9d811fd56f94d58670bd14e228442
Author: Marc Singer <elf@com.rmk.(none)>
Date:   Tue Oct 14 23:00:43 2003 +0100

    [ARM] Add ARMv4T cache support for decompressor
    
    Patch from Marc Singer
    
    Add generic ARMv4T ID entry, remove ARM920 specific ID cache type
    entry.

commit 7cbfaf48b474cee00249dce0303df148e0703763
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Oct 8 23:40:07 2003 -0700

    [PATCH] I2C: Add lm83 chip driver

commit a6de029ba00f06b5f50ef5aefffa6b3aee2213a8
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Wed Oct 8 20:46:05 2003 -0700

    [PATCH] USB: give legotower driver a real USB minor, and remove unneeded ioctl function.

commit eb0ebaf6b13899af8f1a19671745f7dd49852f56
Author: Greg Kroah-Hartman <greg@kroah.com>
Date:   Wed Oct 8 20:45:51 2003 -0700

    [PATCH] USB: fix up formatting problems in the legotower driver
    
    Basically fixed up spaces to tabs problems.

commit 4a62274db8a69fa061efc866416466e31b0d3acf
Author: David Glance <david@csse.uwa.edu.au>
Date:   Wed Oct 8 20:45:31 2003 -0700

    [PATCH] USB: Add Lego USB Infrared Tower driver

commit 95f530f9dd58a73681c5efbae8433e86eecd1304
Author: Luca Risolia <luca@libero.it>
Date:   Wed Oct 8 20:39:57 2003 -0700

    [PATCH] USB: add W996[87]CF driver
