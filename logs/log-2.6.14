commit 741b2252a5e14d6c60a913c77a6099abe73a854a
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 27 17:02:08 2005 -0700

    Linux v2.6.14
    
    "Better late than never"

commit cdada08eb26e7cc57bb423e51e6e70fd5450a0b5
Merge: 9273214... 2ad4106...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 27 16:58:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit 927321440976d0781a252eefe686ae6b0f236ae2
Author: Dave Jones <davej@redhat.com>
Date:   Thu Oct 27 16:16:25 2005 -0700

    [PATCH] cpufreq: SMP fix for conservative governor
    
    Don't try to access not-present CPUs.  Conservative governor will always
    oops on SMP without this fix.
    
    Fixes http://bugzilla.kernel.org/show_bug.cgi?id=4781
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79b95a454bb5c1d9b7287d1016a70885ba3f346c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 27 16:28:39 2005 -0700

    Revert "x86-64: Avoid unnecessary double bouncing for swiotlb"
    
    Commit id 6142891a0c0209c91aa4a98f725de0d6e2ed4918
    
    Andi Kleen reports that it seems to break things for some people,
    and since it's purely a small optimization, revert it for now.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ad41065d9fe518759b695fc2640cf9c07261dd2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Oct 27 18:47:46 2005 +1000

    [TCP]: Clear stale pred_flags when snd_wnd changes
    
    This bug is responsible for causing the infamous "Treason uncloaked"
    messages that's been popping up everywhere since the printk was added.
    It has usually been blamed on foreign operating systems.  However,
    some of those reports implicate Linux as both systems are running
    Linux or the TCP connection is going across the loopback interface.
    
    In fact, there really is a bug in the Linux TCP header prediction code
    that's been there since at least 2.1.8.  This bug was tracked down with
    help from Dale Blount.
    
    The effect of this bug ranges from harmless "Treason uncloaked"
    messages to hung/aborted TCP connections.  The details of the bug
    and fix is as follows.
    
    When snd_wnd is updated, we only update pred_flags if
    tcp_fast_path_check succeeds.  When it fails (for example,
    when our rcvbuf is used up), we will leave pred_flags with
    an out-of-date snd_wnd value.
    
    When the out-of-date pred_flags happens to match the next incoming
    packet we will again hit the fast path and use the current snd_wnd
    which will be wrong.
    
    In the case of the treason messages, it just happens that the snd_wnd
    cached in pred_flags is zero while tp->snd_wnd is non-zero.  Therefore
    when a zero-window packet comes in we incorrectly conclude that the
    window is non-zero.
    
    In fact if the peer continues to send us zero-window pure ACKs we
    will continue making the same mistake.  It's only when the peer
    transmits a zero-window packet with data attached that we get a
    chance to snap out of it.  This is what triggers the treason
    message at the next retransmit timeout.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 72ab373a5688a78cbdaf3bf96012e597d5399bb7
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Oct 27 03:16:42 2005 -0700

    [PATCH] Yet more posix-cpu-timer fixes
    
    This just makes sure that a thread's expiry times can't get reset after
    it clears them in do_exit.
    
    This is what allowed us to re-introduce the stricter BUG_ON() check in
    a362f463a6d316d14daed0f817e151835ce97ff7.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a362f463a6d316d14daed0f817e151835ce97ff7
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 27 09:07:33 2005 -0700

    Revert "remove false BUG_ON() from run_posix_cpu_timers()"
    
    This reverts commit 3de463c7d9d58f8cf3395268230cb20a4c15bffa.
    
    Roland has another patch that allows us to leave the BUG_ON() in place
    by just making sure that the condition it tests for really is always
    true.
    
    That goes in next.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a4ed937aa44acdeb8c6ba671509dc7b54b09d3a
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Wed Oct 26 20:26:53 2005 +0400

    [PATCH] Fix cpu timers expiration time
    
    There's a silly off-by-one error in the code that updates the expiration
    of posix CPU timers, causing them to not be properly updated when they
    hit exactly on their expiration time (which should be the normal case).
    
    This causes them to then fire immediately again, and only _then_ get
    properly updated.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e02fd44056dd8077b49b4bd92c5799a75e89cd65
Merge: dd41bf9... 551f8f0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 26 14:02:49 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit dd41bf916609ae9d2d3ffbb56cfe0a6edd7d1e07
Merge: 70ab81c... 7edc24c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 26 14:01:57 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 70ab81c2ed3d1323e7d6805bf59cbb570dff7937
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 26 11:23:06 2005 -0700

    posix cpu timers: fix timer ordering
    
    Pointed out by Oleg Nesterov, who has been walking over the code
    forwards and backwards.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0917bd912d3708c50e1df1b5e1648d0547108a3
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Wed Oct 26 11:05:25 2005 +0100

    [PATCH] fix radeon_cp_init_ring_buffer()
    
    I've seen similar failure on alpha.
    
    Obviously, someone forgot to convert sg->handle stuff for
    PCI gart case.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bcde03d41d2264edb4ea3c47cb27da1e2609e48
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Oct 26 01:59:03 2005 -0700

    [PATCH] svcsock timestamp fix
    
    Convert nanoseconds to microseconds correctly.
    
    Spotted by Steve Dickson <SteveD@redhat.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94c1d3184523efa7109472eb393cee6e954c5d75
Author: Peter Wainwright <peter.wainwright@hpa-rp.org.uk>
Date:   Wed Oct 26 01:59:02 2005 -0700

    [PATCH] Fix HFS+ to free up the space when a file is deleted.
    
    fsck_hfs reveals lots of temporary files accumulating in the hidden
    directory "\000\000\000HFS+ Private Data".  According to the HFS+
    documentation these are files which are unlinked while in use.  However,
    there may be a bug in the Linux hfsplus implementation which causes this to
    happen even when the files are not in use.  It looks like the "opencnt"
    field is never initialized as (I think) it should be in hfsplus_read_inode.
     This means that a file can appear to be still in use when in fact it has
    been closed.  This patch seems to fix it for me.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35848e048f55368f132e28e7f3278ce2d2347f6c
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Oct 26 01:59:01 2005 -0700

    [PATCH] kill massive wireless-related log spam
    
    Although this message is having the intended effect of causing wireless
    driver maintainers to upgrade their code, I never should have merged this
    patch in its present form.  Leading to tons of bug reports and unhappy
    users.
    
    Some wireless apps poll for statistics regularly, which leads to a printk()
    every single time they ask for stats.  That's a little bit _too_ much of a
    reminder that the driver is using an old API.
    
    Change this to printing out the message once, per kernel boot.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb32051532fed727de0d513a9a578b54c0b7ea5a
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Oct 26 01:59:01 2005 -0700

    [PATCH] export cpu_online_map
    
    With CONFIG_SMP=n:
    
    *** Warning: "cpu_online_map" [drivers/firmware/dcdbas.ko] undefined!
    
    due to set_cpus_allowed().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 958d24df82e021704437da0789c47fcf581e4b85
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Oct 26 01:59:00 2005 -0700

    [PATCH] ppc64: Fix wrong register mapping in mpic driver
    
    The mpic interrupt controller driver (used on G5 and early pSeries among
    others) has a bug where it doesn't get the right virtual address for the
    timer registers.  It causes the driver to poke at the MMIO space of
    whatever has been mapped just next to it (ouch !) when initializing and
    causes boot failures on some IBM machines.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c6fe9465941df04a1ad8f009bd6d95b20072a58
Author: Magnus Damm <magnus@valinux.co.jp>
Date:   Wed Oct 26 01:58:59 2005 -0700

    [PATCH] NUMA: broken per cpu pageset counters
    
    The NUMA counters in struct per_cpu_pageset (linux/mmzone.h) are never
    cleared today.  This works ok for CPU 0 on NUMA machines because
    boot_pageset[] is already zero, but for other CPU:s this results in
    uninitialized counters.
    
    Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8712e553562bbbed9b3a99370f08e9bc25908a76
Author: Neil Brown <neilb@suse.de>
Date:   Wed Oct 26 01:58:58 2005 -0700

    [PATCH] md: make sure mdthreads will always respond to kthread_stop
    
    There are still a couple of cases where md threads (the resync/recovery
    thread) is not interruptible since the change to use kthreads.  All places
    there it tests "signal_pending", it should also test kthread_should_stop,
    as with this patch.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7edc24c4d1924e79d3853a8d7563bcce73f31e5d
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Oct 26 15:04:21 2005 +0100

    [ARM] 3032/1: sparse: complains about generic_fls() prototype in asm-arm/bitops.h
    
    Patch from Ian Campbell
    
    Sparse complains about the definition of generic_fls in asm-arm/bitops.h:
      CHECK   /home/icampbell/devel/kernel/2.6/arch/arm/mach-pxa/viper.c
    include2/asm/bitops.h:350:34: error: marked inline, but without a definition
    
    The definition is unnecessary since linux/bitops.h defines generic_fls before including asm/bitops.h and asm/bitops.h should not be included directly. There are still some places where asm/bitops.h is directly included, but I think that code should be fixed. I was a little wary of the patch for this reason but lubbock, mainstone and assabet all build OK and so do my in house boards...
    
    ARM is the only arch with the generic_fls prototype in this way.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6693e74a16ef563960764bd963f1048392135c3c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 25 20:40:09 2005 -0700

    PCI: be more verbose about resource quirks
    
    When reserving an PCI quirk, note that in the kernel bootup messages.
    
    Also, parse the strange PIIX4 device resources - they should get their
    own PCI resource quirks, but for now just print out what it finds to
    verify that the code does the right thing.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ed688a7162ff8d28d7cf98b34a1f825e4c2c2ac
Author: Jochen Friedrich <jochen@scram.de>
Date:   Sun Oct 23 10:33:52 2005 +0200

    [LLC]: Strip RIF flag from source MAC address
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 5ac660ee1334b401450280cd282113b2c18398f5
Author: Jochen Friedrich <jochen@scram.de>
Date:   Sun Oct 23 10:31:45 2005 +0200

    [TR]: Preserve RIF flag even for 2 byte RIF fields.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 4ea6a8046bb49d43c950898f0cb4e1994ef6c89d
Author: Yan Zheng <yanzheng@21cn.com>
Date:   Mon Oct 24 19:55:23 2005 +0800

    [IPV6]: Fix refcnt of struct ip6_flowlabel
    
    Signed-off-by: Yan Zheng <yanzheng@21cn.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 444d1d9bb5b724f03344c9317bc01d54a9b39073
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Oct 25 11:00:56 2005 -0700

    [PATCH] qlogic lockup fix
    
    If qla2x00_probe_one()'s call to qla2x00_iospace_config() fails, we call
    qla2x00_free_device() to clean up.  But because ha->dpc_pid hasn't been set
    yet, qla2x00_free_device() tries to stop a kernel thread which hasn't started
    yet.  It does wait_for_completion() against an uninitialised completion struct
    and the kernel hangs up.
    
    Fix it by initialising ha->dpc_pid a bit earlier.
    
    Cc: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0db9ae4a79381a5a3d272ccb51851c48c4bcbb6d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Oct 24 23:05:58 2005 -0700

    [PATCH] alpha: atomic dependency fix
    
    My alpha build is exploding because asm/atomic.h now needs smb_mb(), which is
    over in the (not included) system.h.
    
    I fear what will happen if I include system.h into atomic.h, so let's put the
    barriers into their own header file.
    
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c34e152a494c0de8d920b70163d95235a51f4120
Author: Pavel Machek <pavel@suse.cz>
Date:   Mon Oct 24 22:30:10 2005 +0100

    [ARM] fix sharp zaurus c-3000 compile failure without CONFIG_FB_PXA
    
    This fixes compile problem when CONFIG_FB_PXA is not set.
    
      LD      .tmp_vmlinux1
    arch/arm/mach-pxa/built-in.o(.text+0x1d74): In function
    `spitz_get_hsync_len':
    : undefined reference to `pxafb_get_hsync_time'
    make: *** [.tmp_vmlinux1] Error 1
    3.46user 0.46system 5.10 (0m5.106s) elapsed 77.01%CPU
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 551f8f0e87becb415c522adccab524a7a05ca83a
Author: Justin Chen <justin.chen@hp.com>
Date:   Mon Oct 24 22:16:38 2005 +0100

    [SERIAL] new hp diva console port
    
    Add the new ID 0x132a and configure the new PCI Diva console port.  This
    device supports only 1 single console UART.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit add7b58e7558dd2894f3c17ca8574099fcba5c15
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Oct 24 22:11:57 2005 +0100

    [SERIAL] support the Exsys EX-4055 4S four-port card
    
    Tested by Wolfgang Denk with this device:
    
        00:0f.0 Network controller: PLX Technology, Inc. PCI <-> IOBus Bridge (rev 01)
            Subsystem: Exsys EX-4055 4S(16C550) RS-232
            Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B-
            Status: Cap- 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
            Interrupt: pin A routed to IRQ 10
            Region 0: Memory at 80100000 (32-bit, non-prefetchable) [size=128]
            Region 1: I/O ports at 7080 [size=128]
            Region 2: I/O ports at 7400 [size=32]
    
        00:0f.0 Class 0280: 10b5:9050 (rev 01)
            Subsystem: d84d:4055
    
    Results with this patch:
    
        Serial: 8250/16550 driver $Revision: 1.90 $ 32 ports, IRQ sharing enabled
        ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
        PCI: Found IRQ 10 for device 0000:00:0f.0
        ttyS4 at I/O 0x7400 (irq = 10) is a 16550A
        ttyS5 at I/O 0x7408 (irq = 10) is a 16550A
        ttyS6 at I/O 0x7410 (irq = 10) is a 16550A
        ttyS7 at I/O 0x7418 (irq = 10) is a 16550A
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c14e2cfc18659c6ca67c2e10417c432eb978d976
Author: James Simmons <jsimmons@infradead.org>
Date:   Mon Oct 24 21:46:21 2005 +0100

    [PATCH] Return the line length via sysfs for fbdev
    
    This small patch returns the stride/line length of the framebuffer via
    sysfs.
    
    Signed-off-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5c5d8fe32a4b9b14363c6031061e98e26da59a2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Oct 24 18:16:50 2005 +0200

    [PATCH] ALSA: Fix Oops of suspend/resume with generic drivers
    
    The patch fixes Oops from sound drivers using generic platform device
    but have no suspend/resume callbacks.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ded9493ec4a566977ed68b65158eba280e61e5
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Mon Oct 24 17:49:34 2005 +0200

    [PATCH] uml: fix compile failure for TT mode
    
    Without this patch, uml compile fails with:
    
      LD      .tmp_vmlinux1
    arch/um/kernel/built-in.o: In function `config_gdb_cb':
    arch/um/kernel/tt/gdb.c:129: undefined reference to `TASK_EXTERN_PID'
    
    Tested on i386, but fix needed on x86_64 too AFAICS.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a69ac4a78d8bd9e1ec478bd7297d4f047fcd44a8
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Oct 24 18:29:58 2005 +0400

    [PATCH] posix-timers: fix posix_cpu_timer_set() vs run_posix_cpu_timers() race
    
    This might be harmless, but looks like a race from code inspection (I
    was unable to trigger it).  I must admit, I don't understand why we
    can't return TIMER_RETRY after 'spin_unlock(&p->sighand->siglock)'
    without doing bump_cpu_timer(), but this is what original code does.
    
    posix_cpu_timer_set:
    
    	read_lock(&tasklist_lock);
    
    	spin_lock(&p->sighand->siglock);
    	list_del_init(&timer->it.cpu.entry);
    	spin_unlock(&p->sighand->siglock);
    
    We are probaly deleting the timer from run_posix_cpu_timers's 'firing'
    local list_head while run_posix_cpu_timers() does list_for_each_safe.
    
    Various bad things can happen, for example we can just delete this timer
    so that list_for_each() will not notice it and run_posix_cpu_timers()
    will not reset '->firing' flag. In that case,
    
    	....
    
    	if (timer->it.cpu.firing) {
    		read_unlock(&tasklist_lock);
    		timer->it.cpu.firing = -1;
    		return TIMER_RETRY;
    	}
    
    sys_timer_settime() goes to 'retry:', calls posix_cpu_timer_set() again,
    it returns TIMER_RETRY ...
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca531a0a5e01e5122f67cb6aca8fcbfc70e18e0b
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Oct 24 14:36:28 2005 +0400

    [PATCH] posix-timers: exit path cleanup
    
    No need to rebalance when task exited
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3de463c7d9d58f8cf3395268230cb20a4c15bffa
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Oct 24 14:34:03 2005 +0400

    [PATCH] posix-timers: remove false BUG_ON() from run_posix_cpu_timers()
    
    do_exit() clears ->it_##clock##_expires, but nothing prevents
    another cpu to attach the timer to exiting process after that.
    
    After exit_notify() does 'write_unlock_irq(&tasklist_lock)' and
    before do_exit() calls 'schedule() local timer interrupt can find
    tsk->exit_state != 0. If that state was EXIT_DEAD (or another cpu
    does sys_wait4) interrupted task has ->signal == NULL.
    
    At this moment exiting task has no pending cpu timers, they were cleaned
    up in __exit_signal()->posix_cpu_timers_exit{,_group}(), so we can just
    return from irq.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 108150ea78003044e41150c75259447b2c0953b6
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Oct 23 20:25:39 2005 +0400

    [PATCH] posix-timers: fix cleanup_timers() and run_posix_cpu_timers() races
    
    1. cleanup_timers() sets timer->task = NULL under tasklist + ->sighand locks.
       That means that this code in posix_cpu_timer_del() and posix_cpu_timer_set()
    
       		lock_timer(timer);
    		if (timer->task == NULL)
    			return;
    		read_lock(tasklist);
    		put_task_struct(timer->task)
    
       is racy. With this patch timer->task modified and accounted only under
       timer->it_lock. Sadly, this means that dead task_struct won't be freed
       until timer deleted or armed.
    
    2. run_posix_cpu_timers() collects expired timers into local list under
       tasklist + ->sighand again. That means that posix_cpu_timer_del()
       should check timer->it.cpu.firing under these locks too.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9e358fd04190a59e605c2963a15e014139a707
Merge: 75eeec2... 055787e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 23 17:13:14 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit 75eeec2f3fd9e8a16777219ebf1bf8395845faa7
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sun Oct 23 12:57:19 2005 -0700

    [PATCH] ib: mthca: Always re-arm EQs in mthca_tavor_interrupt()
    
    We should always re-arm an event queue's interrupt in
    mthca_tavor_interrupt() if the corresponding bit is set in the event cause
    register (ECR), even if we didn't find any entries in the EQ.  If we don't,
    then there's a window where we miss an EQ entry and then get stuck because
    we don't get another EQ event.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d3b35914aa54232b27e6a2b57d84092aadc5e86
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Oct 23 12:57:18 2005 -0700

    [PATCH] inotify/idr leak fix
    
    Fix a bug which was reported and diagnosed by
    Stefan Jones <stefan.jones@churchillrandoms.co.uk>
    
    IDR trees include a cache of idr_layer objects.  There's no way to destroy
    this cache, so when we discard an overall idr tree we end up leaking some
    memory.
    
    Add and use idr_destroy() for this.  v9fs and infiniband also need to use
    idr_destroy() to avoid leaks.
    
    Or, we make the cache global, like radix_tree_preload().  Which is probably
    better.  Later.
    
    Cc: Eric Van Hensbergen <ericvh@ericvh.myip.org>
    Cc: Roland Dreier <rolandd@cisco.com>
    Cc: Robert Love <rml@novell.com>
    Cc: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0fef676bbd75e711711ed3ff5bebb7bfd1bdb00
Author: Mike Krufky <mkrufky@linuxtv.org>
Date:   Sun Oct 23 12:57:17 2005 -0700

    [PATCH] Kconfig: saa7134-dvb should not select cx22702
    
    On 2005-05-01, Gerd Knorr sent in a patch to add cx22702 to cx88-dvb:
    
     [PATCH] dvb: cx22702 frontend driver update
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=9990d744bea7d28e83c420e2c9d524c7a8a2d136
    
    ...but as we can see, the Kconfig portion of his patch was incorrectly
    applied to saa7134-dvb instead of cx88-dvb.
    
    On 2005-06-24, Adrian bunk fixed cx88-dvb:
    
     [PATCH] VIDEO_CX88_DVB must select DVB_CX22702
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=d6988588e13616587aa879c2e0bd7cd811705e5d
    
    ...but we never removed the original patch from Gerd.
    
    This patch sets things straight:
    
    saa7134-dvb should not select cx22702
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20c19e4179884d7e843314071e2dfb1ea7b0afcd
Author: Davi Arnaut <davi.arnaut@gmail.com>
Date:   Sun Oct 23 12:57:16 2005 -0700

    [PATCH] SELinux: handle sel_make_bools() failure in selinuxfs
    
    This patch fixes error handling in sel_make_bools(), where currently we'd
    get a memory leak via security_get_bools() and try to kfree() the wrong
    pointer if called again.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 282c1f5eba150d0b156ffa9e6b064f1d92f8315f
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sun Oct 23 12:57:15 2005 -0700

    [PATCH] selinux: Fix NULL deref in policydb_destroy
    
    This patch fixes a possible NULL dereference in policydb_destroy, where
    p->type_attr_map can be NULL if policydb_destroy is called to clean up a
    partially loaded policy upon an error during policy load.  Please apply.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8766ce41018a0cb80fbe0ce7dbf747f357c752da
Author: Kostik Belousov <konstantin.belousov@zoral.com.ua>
Date:   Sun Oct 23 12:57:13 2005 -0700

    [PATCH] aio syscalls are not checked by lsm
    
    Another case of missing call to security_file_permission: aio functions
    (namely, io_submit) does not check credentials with security modules.
    
    Below is the simple patch to the problem.  It seems that it is enough to
    check for rights at the request submission time.
    
    Signed-off-by: Kostik Belousov <kostikbel@gmail.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a991304496bdaec09f497d1eb5d9dcf2f94b7d5d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Oct 23 12:57:11 2005 -0700

    [PATCH] kernel-parameters cleanup
    
    Fix typos & trailing whitespace.
    Add blank lines in a few places.
    Remove "AM53C974=" option:  driver does not exist.
    Restrict to < 80 columns in most places (but don't split formatted
      command-line arguments).
    Add a few option arguments for completeness.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4196c3af25d98204216a5d6c37ad2cb303a1f2bf
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 23 16:31:16 2005 -0700

    cardbus: limit IO windows to 256 bytes
    
    That's what we've always historically done, and bigger windows seem to
    confuse some cardbus bridges. Or something.
    
    Alan reports that this makes the ThinkPad 600x series work properly
    again: the 4kB IO window for some reason made IDE DMA not work, which
    makes IDE painfully slow even if it works after DMA timeouts.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9092b20803e4b3b3a480592794a73030f17370b3
Merge: e80eda9... 49636bb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 23 10:10:37 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit e80eda94d3eaf1d12cfc97878eff77cd679dabc9
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 23 10:02:50 2005 -0700

    Posix timers: limit number of timers firing at once
    
    Bursty timers aren't good for anybody, very much including latency for
    other programs when we trigger lots of timers in interrupt context.  So
    set a random limit, after which we'll handle the rest on the next timer
    tick.
    
    Noted by Oleg Nesterov <oleg@tv-sign.ru>
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49636bb12892786e4a7b207b37ca7b0c5ca1cae0
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Oct 23 17:18:00 2005 +1000

    [NEIGH] Fix timer leak in neigh_changeaddr
    
    neigh_changeaddr attempts to delete neighbour timers without setting
    nud_state.  This doesn't work because the timer may have already fired
    when we acquire the write lock in neigh_changeaddr.  The result is that
    the timer may keep firing for quite a while until the entry reaches
    NEIGH_FAILED.
    
    It should be setting the nud_state straight away so that if the timer
    has already fired it can simply exit once we relinquish the lock.
    
    In fact, this whole function is simply duplicating the logic in
    neigh_ifdown which in turn is already doing the right thing when
    it comes to deleting timers and setting nud_state.
    
    So all we have to do is take that code out and put it into a common
    function and make both neigh_changeaddr and neigh_ifdown call it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 6fb9974f49f7a6032118c5b6caa6e08e7097913e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Oct 23 16:37:48 2005 +1000

    [NEIGH] Fix add_timer race in neigh_add_timer
    
    neigh_add_timer cannot use add_timer unconditionally.  The reason is that
    by the time it has obtained the write lock someone else (e.g., neigh_update)
    could have already added a new timer.
    
    So it should only use mod_timer and deal with its return value accordingly.
    
    This bug would have led to rare neighbour cache entry leaks.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 203755029e063066ecc4cf5eee1110ab946c2d88
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Oct 23 16:11:39 2005 +1000

    [NEIGH] Print stack trace in neigh_add_timer
    
    Stack traces are very helpful in determining the exact nature of a bug.
    So let's print a stack trace when the timer is added twice.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit d475f3f47a0427dfee483cecf9a7e9109e991423
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Fri Oct 21 22:06:15 2005 +0400

    [PATCH] alpha: additional smp barriers
    
    As stated in Documentation/atomic_ops.txt, atomic functions
    returning values must have the memory barriers both before and after
    the operation.
    
    Thanks to DaveM for pointing that out.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4595f251058609d97a5d792de08c34a7956af816
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Oct 14 21:29:56 2005 +0100

    [AX.25]: Fix signed char bug
    
    On architectures where the char type defaults to unsigned some of the
    arithmetic in the AX.25 stack to fail, resulting in some packets being dropped
    on receive.
    
    Credits for tracking this down and the original patch to
    Bob Brose N0QBJ <linuxhams@n0qbj-11.ampr.org>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit c98d80edc827277c28f88d662a7d6e9affa7e12f
Author: Julian Anastasov <ja@ssi.bg>
Date:   Sat Oct 22 13:39:21 2005 +0300

    [SK_BUFF]: ipvs_property field must be copied
    
    IPVS used flag NFC_IPVS_PROPERTY in nfcache but as now nfcache was removed the
    new flag 'ipvs_property' still needs to be copied. This patch should be
    included in 2.6.14.
    
    Further comments from Harald Welte:
    
    Sorry, seems like the bug was introduced by me.
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 63172cb3d5ef762dcb60a292bc7f016b85cf6e1f
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Oct 21 16:56:08 2005 -0700

    [PATCH] typo fix in last cpufreq powernow patch
    
    Not sure how it slipped by, but here's a trivial typo fix for powernow.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    [ It's "nurter" backwards.. Maybe we have a hillbilly The Shining fan? ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25f407f0b668f5e4ebd5d13e1fb4306ba6427ead
Author: Roland McGrath <roland@redhat.com>
Date:   Fri Oct 21 15:03:29 2005 -0700

    [PATCH] Call exit_itimers from do_exit, not __exit_signal
    
    When I originally moved exit_itimers into __exit_signal, that was the only
    place where we could reliably know it was the last thread in the group
    dying, without races.  Since then we've gotten the signal_struct.live
    counter, and do_exit can reliably do group-wide cleanup work.
    
    This patch moves the call to do_exit, where it's made without locks.  This
    avoids the deadlock issues that the old __exit_signal code's comment talks
    about, and the one that Oleg found recently with process CPU timers.
    
    [ This replaces e03d13e985d48ac4885382c9e3b1510c78bd047f, which is why
      it was just reverted. ]
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9465bee863bc4c6cf1566c12d6f92a8133e3da5c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 21 15:36:00 2005 -0700

    Revert "Fix cpu timers exit deadlock and races"
    
    Revert commit e03d13e985d48ac4885382c9e3b1510c78bd047f, to be replaced
    by a much nicer fix from Roland.

commit 0213df74315bbab9ccaa73146f3e11972ea6de46
Author: Dave Jones <davej@redhat.com>
Date:   Fri Oct 21 17:21:03 2005 -0400

    [PATCH] cpufreq: fix pending powernow timer stuck condition
    
    AMD recently discovered that on some hardware, there is a race condition
    possible when a C-state change request goes onto the bus at the same
    time as a P-state change request.
    
    Both requests happen, but the southbridge hardware only acknowledges the
    C-state change.  The PowerNow! driver is then stuck in a loop, waiting
    for the P-state change acknowledgement.  The driver eventually times
    out, but can no longer perform P-state changes.
    
    It turns out the solution is to resend the P-state change, which the
    southbridge will acknowledge normally.
    
    Thanks to Johannes Winkelmann for reporting this and testing the fix.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3078fcc1d18c7235b034dc889642c5300959fa20
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Oct 21 13:41:19 2005 +1000

    [PATCH] ppc64: Fix typo bug in iSeries hash code
    
    This fixes a stupid typo bug in the iSeries hash table code.
    
    When we place a hash PTE in the secondary bucket, instead of setting the
    SECONDARY flag bit, as we should, we (redundantly) set the VALID flag.
    
    This was introduced with the patch abolishing bitfields from the hash
    table code.  Mea culpa, oops.  It hasn't been noticed until now because
    in practice we don't hit the secondary bucket terribly often.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c86c83bf4e7fa1ef0d625e297607dc5d0d94dd4
Merge: cffc7b3... d185663...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 21 12:23:07 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit cffc7b38a23960d5f83b0aec5e67f189a6ae8062
Merge: e29971f... b2cc99f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 21 12:22:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit e29971f9a4ca08c3c31b98be96c293ef9f7dcc32
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 20 23:49:00 2005 +0100

    [PATCH] drm: another mga bug
    
    The wrong state emission routines were being called for G550, and
    consistent maps weren't correctly mapped...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d96551541a8f5521dcc8c634a18d42a3d349ec9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Oct 21 14:12:51 2005 +1000

    [PATCH] ppc64: Fix pages marked dirty abusively
    
    While working on 64K pages, I found this little buglet in our
    update_mmu_cache() implementation.
    
    The code calls __hash_page() passing it an "access" parameter (the type
    of access that triggers the hash) containing the bits _PAGE_RW and
    _PAGE_USER of the linux PTE.  The latter is useless in this case and the
    former is wrong.  In fact, if we have a writeable PTE and we pass
    _PAGE_RW to hash_page(), it will set _PAGE_DIRTY (since we track dirty
    that way, by hash faulting !dirty) which is not what we want.
    
    In fact, the correct fix is to always pass 0. That means that only
    read-only or already dirty read write PTEs will be preloaded. The
    (hopefully rare) case of a non dirty read write PTE can't be preloaded
    this way, it will have to fault in hash_page on the actual access.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1c7e111934b6375baf07a970d6c890d18d7e34f
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Oct 21 22:39:36 2005 +1000

    [PATCH] ppc64: Fix typo in time calculations
    
    This fixes a typo in the div128_by_32 function used in the timekeeping
    calculations on ppc64.  If you look at the code it's quite obvious
    that we need (rb + c) rather than (rb + b).  The "b" is clearly just a
    typo.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 024358eeafd44ecffd0e7a1002ef3ccc1d0acd4d
Author: Eric Moore <Eric.Moore@lsil.com>
Date:   Fri Oct 21 20:56:36 2005 +0200

    [PATCH] mptsas: fix phy identifiers
    
    This fixes handling of the phy identifiers in mptsas.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    [ split it a pre-2.6.14 portion from Eric's bigger patch ]
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d18566376055046fca0b51ad536f1778ef34966a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Oct 21 10:17:37 2005 +0100

    [ARM] Fix Integrator IM/PD-1 support
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7fe8785e4198ad6b5dfd4a76c44c97e9b4463534
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 20 23:21:20 2005 +0100

    [ARM] 3028/1: S3C2410 - add DCLK mask definitions
    
    Patch from Ben Dooks
    
    From: Guillaume Gourat <guillaume.gourat@nexvision.fr>
    
    Add MASK definitions for DCLK0 and DCLK1
    
    Signed-off-by: Guillaume Gourat <guillaume.gourat@nexvision.fr>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b048dbf4d428c89f219efc2eddf2771f13500503
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 20 23:21:19 2005 +0100

    [ARM] 3027/1: BAST - reduce NAND timings slightly
    
    Patch from Ben Dooks
    
    The current Simtec BAST nand area timings are a little
    too slow to be obtained by a 2410 running at 266MHz,
    so reduce the timings slightly to bring them into the
    acceptable range.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a7ce8edc8232da51dc3a804ec9c734019d115b40
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 20 23:21:18 2005 +0100

    [ARM] 3026/1: S3C2410 - avoid possible overflow in pll calculations
    
    Patch from Ben Dooks
    
    Avoid the possiblity that if the board is using
    a 16.9334 or higher crystal with a high PLL
    multiplier, then the pll value could overflow
    the capability of an int.
    
    Also fix the value types of the intermediate
    variables to unsigned int.
    
    Rewrite of patch from Guillaume Gourat
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2640b420a806c91f6b8799314ca96bb88a246d2
Author: Matt Reimer <mreimer@vpop.net>
Date:   Thu Oct 20 23:21:18 2005 +0100

    [ARM] 3025/1: Add I2S platform device for PXA
    
    Patch from Matt Reimer
    
    Adds an I2S platform_device for PXA. I2S is used to interface
    with sound chips on systems like iPAQ h1910/h2200/hx4700 and
    Asus 716.
    
    Signed-off-by: Matt Reimer <mreimer@vpop.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2cc99f04c5a732c793519aca61a20f719b50db4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Oct 20 17:13:13 2005 -0200

    [TCP] Allow len == skb->len in tcp_fragment
    
    It is legitimate to call tcp_fragment with len == skb->len since
    that is done for FIN packets and the FIN flag counts as one byte.
    So we should only check for the len > skb->len case.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 49c5bfaffe8ae6e6440dc4bf78b03800960d93f5
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Oct 18 12:03:28 2005 +1000

    [DCCP]: Clear the IPCB area
    
    Turns out the problem has nothing to do with use-after-free or double-free.
    It's just that we're not clearing the CB area and DCCP unlike TCP uses a CB
    format that's incompatible with IP.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Ian McDonald <imcdnzl@gmail.com>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit ffa29347dfbc158d1f47f5925324a6f5713659c1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Oct 16 21:08:46 2005 +1000

    [DCCP]: Make dccp_write_xmit always free the packet
    
    icmp_send doesn't use skb->sk at all so even if skb->sk has already
    been freed it can't cause crash there (it would've crashed somewhere
    else first, e.g., ip_queue_xmit).
    
    I found a double-free on an skb that could explain this though.
    dccp_sendmsg and dccp_write_xmit are a little confused as to what
    should free the packet when something goes wrong.  Sometimes they
    both go for the ball and end up in each other's way.
    
    This patch makes dccp_write_xmit always free the packet no matter
    what.  This makes sense since dccp_transmit_skb which in turn comes
    from the fact that ip_queue_xmit always frees the packet.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit fda0fd6c5b722cc48e904e0daafedca275d332af
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Oct 14 16:38:49 2005 +1000

    [DCCP]: Use skb_set_owner_w in dccp_transmit_skb when skb->sk is NULL
    
    David S. Miller <davem@davemloft.net> wrote:
    > One thing you can probably do for this bug is to mark data packets
    > explicitly somehow, perhaps in the SKB control block DCCP already
    > uses for other data.  Put some boolean in there, set it true for
    > data packets.  Then change the test in dccp_transmit_skb() as
    > appropriate to test the boolean flag instead of "skb_cloned(skb)".
    
    I agree.  In fact we already have that flag, it's called skb->sk.
    So here is patch to test that instead of skb_cloned().
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Ian McDonald <imcdnzl@gmail.com>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit ac9b9c667c2e1194e22ebe0a441ae1c37aaa9b90
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Oct 20 16:24:28 2005 +0100

    [PATCH] Fix handling spurious page fault for hugetlb region
    
    This reverts commit 3359b54c8c07338f3a863d1109b42eebccdcf379 and
    replaces it with a cleaner version that is purely based on page table
    operations, so that the synchronization between inode size and hugetlb
    mappings becomes moot.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93918e9afc76717176e9e114e79cdbb602a45ae8
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 19 23:23:05 2005 -0700

    Linux v2.6.14-rc5
    
    The -rc4 release was supposed to be the last -rc, but here goes.  The
    RCU fixes and the swiotlb changes need an -rc for final testing.

commit 450da6ca97185830315d21c06e46e232618e0fa6
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Oct 18 22:45:17 2005 +0100

    [PATCH] build fix for uml/amd64
    
    	Missing half of the [PATCH] uml: Fix sysrq-r support for skas mode
    We need to remove these (UPT_[DEFG]S) from the read side as well as the
    write one - otherwise it simply won't build.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 461a0ffbec1bcea896bd5daf1a98a18232a1e9c7
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Wed Oct 19 08:22:13 2005 -0400

    [PATCH] scsi_error thread exits in TASK_INTERRUPTIBLE state.
    
    Found in the -rt patch set.  The scsi_error thread likely will be in the
    TASK_INTERRUPTIBLE state upon exit.  This patch fixes this bug.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf3f81b3f755fe3fced2aaac5cb3ecb4b541f41c
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Oct 20 08:34:56 2005 +1000

    [PATCH] ppc64: update defconfigs
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26baeba8ddfb23bb295807ebc387c98f47f60fd9
Merge: 281dd25... 67c5587...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 19 23:12:03 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 281dd25cdc0d6903929b79183816d151ea626341
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Wed Oct 19 15:52:18 2005 -0700

    [PATCH] swiotlb: make sure initial DMA allocations really are in DMA memory
    
    This introduces a limit parameter to the core bootmem allocator; The new
    parameter indicates that physical memory allocated by the bootmem
    allocator should be within the requested limit.
    
    We also introduce alloc_bootmem_low_pages_limit, alloc_bootmem_node_limit,
    alloc_bootmem_low_pages_node_limit apis, but alloc_bootmem_low_pages_limit
    is the only api used for swiotlb.
    
    The existing alloc_bootmem_low_pages() api could instead have been
    changed and made to pass right limit to the core allocator.  But that
    would make the patch more intrusive for 2.6.14, as other arches use
    alloc_bootmem_low_pages().  We may be done that post 2.6.14 as a
    cleanup.
    
    With this, swiotlb gets memory within 4G for both x86_64 and ia64
    arches.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Ravikiran G Thirumalai <kiran@scalex86.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51b190b304bbeb1090ba20b0623d39917fa62997
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Wed Oct 19 22:45:14 2005 -0700

    [PATCH] `unaligned access' in acpi get_root_bridge_busnr()
    
    In drivers/acpi/glue.c the address of an integer is cast to the address of
    an unsigned long.  This breaks on systems where a long is larger than an
    int --- for a start the int can be misaligned; for a second the assignment
    through the pointer will overwrite part of the next variable.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Acked-by: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11909d64389c24b409e20f0eeafdc262e0a55788
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Oct 19 21:23:51 2005 -0700

    [PATCH] fix MGA DRM regression before 2.6.14
    
    I've gotten a report on lkml, of a possible regression in the MGA DRM in
    2.6.14-rc4 (since -rc1), I haven't been able to reproduce it here, but I've
    figured out some possible issues in the mga code that were definitely
    wrong, some of these are from DRM CVS, the main fix is the agp enable bit
    on the old code path still used by everyone.....
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1209d049bbc3df66650f8417637be4f7b57b604
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Oct 19 21:23:51 2005 -0700

    [PATCH] Threads shouldn't inherit PF_NOFREEZE
    
    The PF_NOFREEZE process flag should not be inherited when a thread is
    forked.  This patch (as585) removes the flag from the child.
    
    This problem is starting to show up more and more as drivers turn to the
    kthread API instead of using kernel_thread().  As a result, their kernel
    threads are now children of the kthread worker instead of modprobe, and
    they inherit the PF_NOFREEZE flag.  This can cause problems during system
    suspend; the kernel threads are not getting frozen as they ought to be.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9b25fabfddf142b5af8268692701d386cf37e4f
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Wed Oct 19 21:23:49 2005 -0700

    [PATCH] Export RCS_TAR_IGNORE for rpm targets
    
    The variable RCS_TAR_IGNORE is used in scripts/packaging/Makefile, but not
    exported from the main Makefile, so it's never used.
    
    This results in the rpm targets being very unhappy in quilted trees.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Acked-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83bcbf8dad86c217ef70b4b4d53811422bb79dfa
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Oct 19 21:23:49 2005 -0700

    [PATCH] ppc64: Fix error in vDSO 32 bits date
    
    The implementation of __kernel_gettimeofday() in the 32 bits vDSO has a
    small bug (a typo actually) that will cause it to lose 1 bit of precision.
    Not terribly bad but worth fixing.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6985c43f39b3d799999c390099c56ebbee27d4f4
Author: Neil Brown <neilb@suse.de>
Date:   Wed Oct 19 21:23:47 2005 -0700

    [PATCH] Three one-liners in md.c
    
    The main problem fixes is that in certain situations stopping md arrays may
    take longer than you expect, or may require multiple attempts.  This would
    only happen when resync/recovery is happening.
    
    This patch fixes three vaguely related bugs.
    
    1/ The recent change to use kthreads got the setting of the
       process name wrong.  This fixes it.
    2/ The recent change to use kthreads lost the ability for
       md threads to be signalled with SIG_KILL.  This restores that.
    3/ There is a long standing bug in that if:
        - An array needs recovery (onto a hot-spare) and
        - The recovery is being blocked because some other array being
           recovered shares a physical device and
        - The recovery thread is killed with SIG_KILL
       Then the recovery will appear to have completed with no IO being
       done, which can cause data corruption.
       This patch makes sure that incomplete recovery will be treated as
       incomplete.
    
    Note that any kernel affected by bug 2 will not suffer the problem of bug
    3, as the signal can never be delivered.  Thus the current 2.6.14-rc
    kernels are not susceptible to data corruption.  Note also that if arrays
    are shutdown (with "mdadm -S" or "raidstop") then the problem doesn't
    occur.  It only happens if a SIGKILL is independently delivered as done by
    'init' when shutting down.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a9949d7ac9e2bc51939f27b184be6e1bd99004e
Author: Andy Wingo <wingo@pobox.com>
Date:   Wed Oct 19 21:23:46 2005 -0700

    [PATCH] raw1394: fix locking in the presence of SMP and interrupts
    
    Changes all spinlocks that can be held during an irq handler to disable
    interrupts while the lock is held.  Changes spin_[un]lock_irq to use the
    irqsave/irqrestore variants for robustness and readability.
    
    In raw1394.c:handle_iso_listen(), don't grab host_info_lock at all -- we're
    not accessing host_info_list or host_count, and holding this lock while
    trying to tasklet_kill the iso tasklet this can cause an ABBA deadlock if
    ohci:dma_rcv_tasklet is running and tries to grab host_info_lock in
    raw1394.c:receive_iso.  Test program attached reliably deadlocks all SMP
    machines I have been able to test without this patch.
    
    Signed-off-by: Andy Wingo <wingo@pobox.com>
    Acked-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c367c21c93ccdaf7e1e124891633d89f9ae77f54
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Oct 19 21:23:44 2005 -0700

    [PATCH] orinoco: limit message rate
    
    Brice Goglin <Brice.Goglin@ens-lyon.org> reports a printk storm from this
    driver.  Fix.
    
    Acked-by: David Gibson <hermes@gibson.dropbear.id.au>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c59827d1da9bcd6970800d4f8a031b5859e8b4c
Author: Hugh Dickins <hugh@veritas.com>
Date:   Wed Oct 19 21:23:43 2005 -0700

    [PATCH] mm: hugetlb truncation fixes
    
    hugetlbfs allows truncation of its files (should it?), but hugetlb.c often
    forgets that: crashes and misaccounting ensue.
    
    copy_hugetlb_page_range better grab the src page_table_lock since we don't
    want to guess what happens if concurrently truncated.  unmap_hugepage_range
    rss accounting must not assume the full range was mapped.  follow_hugetlb_page
    must guard with page_table_lock and be prepared to exit early.
    
    Restyle copy_hugetlb_page_range with a for loop like the others there.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e03d13e985d48ac4885382c9e3b1510c78bd047f
Author: Roland McGrath <roland@redhat.com>
Date:   Wed Oct 19 22:21:23 2005 -0700

    [PATCH] Fix cpu timers exit deadlock and races
    
    Oleg Nesterov reported an SMP deadlock.  If there is a running timer
    tracking a different process's CPU time clock when the process owning
    the timer exits, we deadlock on tasklist_lock in posix_cpu_timer_del via
    exit_itimers.
    
    That code was using tasklist_lock to check for a race with __exit_signal
    being called on the timer-target task and clearing its ->signal.
    However, there is actually no such race.  __exit_signal will have called
    posix_cpu_timers_exit and posix_cpu_timers_exit_group before it does
    that.  Those will clear those k_itimer's association with the dying
    task, so posix_cpu_timer_del will return early and never reach the code
    in question.
    
    In addition, posix_cpu_timer_del called from exit_itimers during execve
    or directly from timer_delete in the process owning the timer can race
    with an exiting timer-target task to cause a double put on timer-target
    task struct.  Make sure we always access cpu_timers lists with sighand
    lock held.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67c5587ad4047041e4fb137628076388ede05281
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Oct 19 23:00:56 2005 +0100

    [ARM] 3024/1: Add cpu_v6_proc_fin
    
    Patch from Tony Lindgren
    
    Machine restart calls cpu_proc_fin() to clean and disable
    cache, and turn off interrupts. This patch adds proper
    cpu_v6_proc_fin.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3359b54c8c07338f3a863d1109b42eebccdcf379
Author: Seth, Rohit <rohit.seth@intel.com>
Date:   Tue Oct 18 14:15:12 2005 -0700

    [PATCH] Handle spurious page fault for hugetlb region
    
    The hugetlb pages are currently pre-faulted.  At the time of mmap of
    hugepages, we populate the new PTEs.  It is possible that HW has already
    cached some of the unused PTEs internally.  These stale entries never
    get a chance to be purged in existing control flow.
    
    This patch extends the check in page fault code for hugepages.  Check if
    a faulted address falls with in size for the hugetlb file backing it.
    We return VM_FAULT_MINOR for these cases (assuming that the arch
    specific page-faulting code purges the stale entry for the archs that
    need it).
    
    Signed-off-by: Rohit Seth <rohit.seth@intel.com>
    
    [ This is apparently arguably an ia64 port bug. But the code won't
      hurt, and for now it fixes a real problem on some ia64 machines ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 055787e447a6cf50aa1cc42f7d3b07f08223dd9b
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Wed Oct 19 08:22:13 2005 -0400

    [SCSI] scsi_error thread exits in TASK_INTERRUPTIBLE state.
    
    Found in the -rt patch set.  The scsi_error thread likely will be in the
    TASK_INTERRUPTIBLE state upon exit.  This patch fixes this bug.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d1972efaf24e56c06b43c40c364f9377763c2e13
Author: Paul Schulz <pschulz01@gmail.com>
Date:   Tue Oct 18 19:40:32 2005 +0100

    [ARM] 3023/1: pxa-regs: Typo in ARM pxa register definitions.
    
    Patch from Paul Schulz
    
    The following trivial patch is to fix what looks like a typo in the PXA register
    definitions. The correction comes directly from the definition in the
    Intel Documentation.
    
     http://www.intel.com/design/pca/applicationsprocessors/manuals/278693.htm
     Intel(R) PXA 255 Processor - Developers Manual - Jan 2004 - Page 12-33
    
    Neither 'UDCCS_IO_ROF' or 'UDCCS_IO_DME' are currently used elseware
    in the main code (from grep of tree)... The current definitions have been
    in the code since at lease 2.4.7.
    
    Signed-off-by: Paul Schulz <paul@mawsonlakes.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bb7e257ef8d8ba43cab356aa1cc1b20d0106d45f
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Tue Oct 18 15:59:52 2005 +0800

    [PATCH] vesafb: Fix display corruption on display blank
    
    Reported by: Bob Tracy <rct@gherkin.frus.com>
    
     "...I've got a Toshiba notebook (730XCDT -- Pentium 150MMX) for which
      I'm using the Vesa FB driver.  When the machine has been idle for some
      time and the driver attempts to powerdown the display, rather than the
      display going blank, it goes gray with several strange lines.  When I
      hit the "shift" key or other-wise wake up the display, the old video
      state is not fully restored..."
    
    vesafb recently added a blank method which has only 2 states, powerup and
    powerdown.  The powerdown state is used for all blanking levels, but in his
    case, powerdown does not work correctly for higher levels of display
    powersaving. Thus, for intermediate power levels, use software blanking,
    and use only hardware blanking for an explicit powerdown.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d846a92e4ec26112fbe41c4e45ddd9119cd74cda
Merge: ace7c76... 251b928...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 18 08:41:06 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit ace7c769378b9fb2f1fd2c60c04ba3591a6a5af5
Merge: 1e65174... c1542cb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 18 08:40:46 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 1e65174a3378494608e8ed7f8c74d658be9a0fb2
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 18 08:26:15 2005 -0700

    Add some basic .gitignore files
    
    This still leaves driver and architecture-specific subdirectories alone,
    but gets rid of the bulk of the "generic" generated files that we should
    ignore.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 251b928cdff5f12e7da8f56e8933e2b58ba08456
Author: Kenneth Tan <chong.yin.tan@intel.com>
Date:   Tue Oct 18 07:53:35 2005 +0100

    [ARM] 3021/1: Interrupt 0 bug fix for ixp4xx
    
    Patch from Kenneth Tan
    
    The get_irqnr_and_base subroutine of ixp4xx does not take interrupt 0 condition into account properly. We should not perform "subs" here. The Z flag will be set when interrupt 0 occur, which resulting "movne r1, sp" in the caller routine (irq_handler) not being executed.
    
    When interrupt 0 occur:
    o if CONFIG_CPU_IXP46X is not set, "subs" will set the Z flag and return
    o if CONFIG_CPU_IXP46X is set, codes in upper interrupt handling will be trigerred. But since this is not supper interrupt, the "cmp" in the upper interrupt handling portion will set the Z flag and return
    
    Signed-off-by: Kenneth Tan <chong.yin.tan@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ad1b472bea1bbcd8dc7fd92f6952d8b2d8355edb
Author: Kenneth Tan <chong.yin.tan@intel.com>
Date:   Tue Oct 18 07:51:35 2005 +0100

    [ARM] 3020/1: Fixes typo error CONFIG_CPU_IXP465, which should be CONFIG_CPU_IXP46X
    
    Patch from Kenneth Tan
    
    The cpu_is_ixp465 macro in include/asm-arm/arch-ixp4xx/hardware.h is always returning 0 because #ifdef CONFIG_CPU_IXP465 is always false.
    
    Signed-off-by: Kenneth Tan <chong.yin.tan@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9b15c6c4e22cbb381373fac3bee8cacb811147a9
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Oct 18 07:51:34 2005 +0100

    [ARM] 3019/1: fix wrong comments
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c086f282c01d7e5a887c3f7b190520538267f12e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Oct 18 07:51:34 2005 +0100

    [ARM] 3018/1: S3C2410 - check de-referenced device is really a platform device
    
    Patch from Ben Dooks
    
    Check that the device we are looking at is really
    a platform device before trying to cast it to one
    to find out the platform bus number.
    
    Thanks to RMK for pointing this out.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 39ca371c45b04cd50d0974030ae051906fc516b6
Author: Mark Rustad <MRustad@mac.com>
Date:   Mon Oct 17 16:43:34 2005 -0700

    [PATCH] kbuild: Eliminate build error when KALLSYMS not defined
    
    The following build error happens with 2.6.14-rc4 when CONFIG_KALLSYMS is
    not defined.  The error message in a fragment of the output was:
    
      CC      arch/i386/lib/usercopy.o
      AR      arch/i386/lib/lib.a
    /bin/sh: line 1: +@: command not found
    make[3]: warning: jobserver unavailable: using -j1.  Add `+' to parent make rule.
      CHK     include/linux/compile.h
    
    Signed-off-by: Mark Rustad <mrustad@mac.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4faa5285283fad081443e3612ca426a311bb6c7e
Author: Zach Brown <zach.brown@oracle.com>
Date:   Mon Oct 17 16:43:33 2005 -0700

    [PATCH] aio: revert lock_kiocb()
    
    lock_kiocb() was introduced to serialize retrying and cancellation.  In the
    process of doing so it tried to sleep waiting for KIF_LOCKED while holding
    the ctx_lock spinlock.  Recent fixes have ensured that multiple concurrent
    retries won't be attempted for a given iocb.  Cancel has other problems and
    has no significant in-tree users that have been complaining about it.  So
    for the immediate future we'll revert sleeping with the lock held and will
    address proper cancellation and retry serialization in the future.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Acked-by: Benjamin LaHaise <bcrl@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7507ed91e093b9e4e218e41ebfdce05458258fc
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Oct 17 16:43:32 2005 -0700

    [PATCH] uniput - fix crash on SMP
    
    Only signal completion after marking request slot as free, otherwise other
    processor can free request structure before we finish using it.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cc9eeef9a9567acdfc2f6943f24381bf460f008
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Oct 17 16:43:31 2005 -0700

    [PATCH] Fix /proc/acpi/events around suspend
    
    Fix -EIO on /proc/acpi/events after suspends.  This actually breaks
    suspending by power button in many setups.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ac0b9c1927228a38a71216536176af8811a435a
Author: Stephan Brodkorb <stephan-linuxdev@brodkorb.com>
Date:   Mon Oct 17 16:43:30 2005 -0700

    [PATCH] n_r3964 mod_timer() fix
    
    Since Revision 1.10 was released the n_r3964 module wasn't able to receive any
    data.  The reason for that behavior is because there were some wrong calls of
    mod_timer(...) in the function receive_char (...).  This patch should fix this
    problem and was successfully tested with talking to some kuka industrial
    robots.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b65574fec5db1211bce7fc8bec7a2b32486e0670
Author: David McCullough <davidm@snapgear.com>
Date:   Mon Oct 17 16:43:29 2005 -0700

    [PATCH] output of /proc/maps on nommu systems is incomplete
    
    Currently you do not get all the map entries on nommu systems because the
    start function doesn't index into the list using the value of "pos".
    
    Signed-off-by: David McCullough <davidm@snapgear.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ee832dbc6770135ec8d63296af0a4374557bb79
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Mon Oct 17 20:01:21 2005 +0200

    [PATCH] rcu: keep rcu callback event counter
    
    This makes call_rcu() keep track of how many events there are on the RCU
    list, and cause a reschedule event when the list gets too long.
    
    This helps keep RCU event lists down.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc675230a9ca17010694bc8bd3c69ca9adf2efef
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Oct 17 13:01:57 2005 -0400

    [PATCH] Fix and clean up quirk_intel_ide_combined() configuration
    
    This change makes quirk_intel_ide_combined() dependent on the precise
    conditions under which it is needed:
    
    * IDE is built in
    * IDE SATA option is not set
    * ata_piix or ahci drivers are enabled
    
    This fixes an issue where some modular configurations would not cause
    the quirk to be enabled.
    
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47d6b08334a43fafa61a587f721fa21ef65d81be
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Oct 17 18:49:42 2005 +0400

    [PATCH] posix-timers: fix task accounting
    
    Make sure we release the task struct properly when releasing pending
    timers.
    
    release_task() does write_lock_irq(&tasklist_lock), so it can't race
    with run_posix_cpu_timers() on any cpu.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ce969171d5187f7621be68c0ebbc7fb02ec53f1
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Mon Oct 17 06:03:23 2005 -0400

    [PATCH] NFS: Fix Oopsable/unnecessary i_count manipulations in nfs_wait_on_inode()
    
    Oopsable since nfs_wait_on_inode() can get called as part of iput_final().
    
    Unnecessary since the caller had better be damned sure that the inode won't
    disappear from underneath it anyway.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3c52da33ce95747b1bff86cce716d4f1397f14a
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Mon Oct 17 06:02:00 2005 -0400

    [PATCH] NFS: Fix cache consistency races
    
    If the data cache has been marked as potentially invalid by nfs_refresh_inode,
    we should invalidate it rather than assume that changes are due to our own
    activity.
    
    Also ensure that we always start with a valid cache before declaring it
    to be protected by a delegation.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13b58ee51802a45d2b8853ffe0003d9fa768195c
Author: Christian Krause <chkr@plauener.de>
Date:   Mon Oct 17 14:30:48 2005 -0700

    [PATCH] USB: fix bug in handling of highspeed usb HID devices
    
    During the development of an USB device I found a bug in the handling of
    Highspeed HID devices in the kernel.
    
    What happened?
    
    Highspeed HID devices are correctly recognized and enumerated by the
    kernel. But even if usbhid kernel module is loaded, no HID reports are
    received by the kernel.
    
    The output of the hardware USB analyzer told me that the host doesn't
    even poll for interrupt IN transfers (even the "interrupt in" USB
    transfer are polled by the host).
    
    After some debugging in hid-core.c I've found the reason.
    
    In case of a highspeed device, the endpoint interval is re-calculated in
    driver/usb/input/hid-core.c:
    
    line 1669:
                 /* handle potential highspeed HID correctly */
                 interval = endpoint->bInterval;
                 if (dev->speed == USB_SPEED_HIGH)
                       interval = 1 << (interval - 1);
    
    Basically this calculation is correct (refer to USB 2.0 spec, 9.6.6).
    This new calculated value of "interval" is used as input for
    usb_fill_int_urb:
    
    line 1685:
    
                usb_fill_int_urb(hid->urbin, dev, pipe, hid->inbuf, 0,
                       hid_irq_in, hid, interval);
    
    Unfortunately the same calculation as above is done a second time in
    usb_fill_int_urb in the file include/linux/usb.h:
    
    line 933:
            if (dev->speed == USB_SPEED_HIGH)
                    urb->interval = 1 << (interval - 1);
            else
                    urb->interval = interval;
    
    This means, that if the endpoint descriptor (of a high speed device)
    specifies e.g. bInterval = 7, the urb->interval gets the value:
    
    hid-core.c: interval = 1 << (7-1) = 0x40 = 64
    urb->interval = 1 << (interval -1) = 1 << (63) = integer overflow
    
    Because of this the value of urb->interval is sometimes negative and is
    rejected in core/urb.c:
    line 353:
                    /* too small? */
                    if (urb->interval <= 0)
                            return -EINVAL;
    
    The conclusion is, that the recalculaton of the interval (which is
    necessary for highspeed) should not be made twice, because this is
    simply wrong. ;-)
    
    Re-calculation in usb_fill_int_urb makes more sense, because it is the
    most general approach. So it would make sense to remove it from
    hid-core.c.
    
    Because in hid-core.c the interval variable is only used for calling
    usb_fill_int_urb, it is no problem to remove the highspeed
    re-calculation in this file.
    
    Signed-off-by: Christian Krause <chkr@plauener.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9b765decfb49ddc105d303d491e1bee9769436f
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Mon Oct 17 14:30:43 2005 -0700

    [PATCH] isp116x-hcd: fix handling of short transfers
    
    Increased use of scatter-gather by usb-storage driver after 2.6.13 has
    exposed a buggy codepath in isp116x-hcd, which was probably never
    visited before: bug happened only for those urbs, for which
    URB_SHORT_NOT_OK was set AND short transfer occurred.
    
    The fix attached was tested in 2 ways: (a) it fixed failing
    initialization of a flash drive with an embedded hub; (b) the fix was
    tested with 'usbtest' against a modified g_zero driver (on top of
    net2280), which generated short bulk IN transfers of various lengths
    including multiples and non-multiples of max_packet_length.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16192896ea8e03d18d4228023500607b00df49e6
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Oct 17 15:40:52 2005 +0200

    [SCSI] mptsas: fix phy identifiers
    
    This patch from Eric fixes handling of the phy identifiers in mptsas.
    I've split it up from his bigger patch as it should go into 2.6.14
    still.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f4fd20bf31376f29e4edde6596e3972198877309
Author: Karl Magnus Kolstoe <Karl.Kolsto@uib.no>
Date:   Mon Oct 17 10:05:42 2005 +0200

    [SCSI] 2.6.13.3; add Pioneer DRM-624x to drivers/scsi/scsi_devinfo.c
    
    The patch below should make the Pioneer DRM-624X automatically
    be set up with all 6 "drives". (6 slot SCSI CD changer)
    
    Signed-off-by: Karl Magnus Kolstoe <karl.kolsto@uib.no>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2cc78eb52bc1ae89f0a4fa5a00eb998dffde4a9f
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 17 09:10:15 2005 -0700

    Increase default RCU batching sharply
    
    Dipankar made RCU limit the batch size to improve latency, but that
    approach is unworkable: it can cause the RCU queues to grow without
    bounds, since the batch limiter ended up limiting the callbacks.
    
    So make the limit much higher, and start planning on instead limiting
    the batch size by doing RCU callbacks more often if the queue looks like
    it might be growing too long.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de21eb63add932c61e018d20a760dcaed8c3e40c
Author: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
Date:   Sun Oct 16 20:29:25 2005 -0700

    [PATCH] fix black/white-only svideo input in vpx3220 decoder
    
    Fix the fact that the svideo input will only give input in black/white in
    some circumstances.  Reason is that in the PCI controller driver (zr36067),
    after setting input, we reset norm, which overwrites the input register
    with the default.  This patch makes it always set the correct value for the
    input when changing norm.
    
    Signed-off-by: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b3acc21d7677787ef456d17574a084a1c1193ae
Author: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
Date:   Sun Oct 16 20:29:24 2005 -0700

    [PATCH] fix vpx3220 offset issue in SECAM
    
    Fix bug #5404 in kernel bugzilla.
    
    It basically updates the vpx3220 initialization tables with some newer
    values that we've had in CVS for a while (and that, for some reason, never
    ended up in the kernel...  must've gotten lost).  Those fix a ~16 pixels
    noise at the top of the picture in at least SECAM, although (now that I
    think about it) PAL was probably affected, also.
    
    Signed-off-by: Ronald S. Bultje <rbultje@ronald.bitfreak.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0aec4867dca149e2049e8439b76bd82ad9dac52c
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Sun Oct 16 20:29:22 2005 -0700

    [PATCH] SVGATextMode fix
    
    Fix bug 5441.
    
    I didn't know about messy programs like svgatextmode...  Couldn't this be
    integrated in some linux/drivers/video/console/svgacon.c ?...  So because
    of the existence of the svgatextmode program, the kernel is not supposed to
    touch to CRT_OVERFLOW/SYNC_END/DISP/DISP_END/OFFSET ?
    
    Disabling the check in vgacon_resize() might help indeed, but I'm really
    not sure whether it will work for any chipset: in my patch, CRT registers
    are set at each console switch, since stty rows/cols apply to consoles
    separately...
    
    The attached solution is to keep the test, but if it fails, we assume that
    the caller knows what it does (i.e.  it is svgatextmode) and then disable
    any further call to vgacon_doresize.  Svgatextmode is usually used to
    _expand_ the display, not to shrink it.  And it is harmless in the case of
    a too big stty rows/cols: the display will just be cropped.  I tested it on
    my laptop, and it works fine with svgatextmode.
    
    A better solution would be that svgatextmode explicitely tells the kernel
    not to care about video timing, but for this an interface needs be defined
    and svgatextmode be patched.
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b24d18aa743dad0c42918157c5d717686269d3a8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Oct 16 20:29:20 2005 -0700

    [PATCH] list: add missing rcu_dereference on first element
    
    It seems that all the list_*_rcu primitives are missing a memory barrier
    on the very first dereference.  For example,
    
    #define list_for_each_rcu(pos, head) \
    	for (pos = (head)->next; prefetch(pos->next), pos != (head); \
    		pos = rcu_dereference(pos->next))
    
    It will go something like:
    
    	pos = (head)->next
    
    	prefetch(pos->next)
    
    	pos != (head)
    
    	do stuff
    
    We're missing a barrier here.
    
    	pos = rcu_dereference(pos->next)
    
    		fetch pos->next
    
    		barrier given by rcu_dereference(pos->next)
    
    		store pos
    
    Without the missing barrier, the pos->next value may turn out to be stale.
    In fact, if "do stuff" were also dereferencing pos and relying on
    list_for_each_rcu to provide the barrier then it may also break.
    
    So here is a patch to make sure that we have a barrier for the first
    element in the list.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d80636a0d5f056ffc26472d05b6027a7a9f6e1c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 16 17:36:06 2005 -0700

    Fix memory ordering bug in page reclaim
    
    As noticed by Nick Piggin, we need to make sure that we check the page
    count before we check for PageDirty, since the dirty check is only valid
    if the count implies that we're the only possible ones holding the page.
    
    We always did do this, but the code needs a read-memory-barrier to make
    sure that the orderign is also honored by the CPU.
    
    (The writer side is ordered due to the atomic decrement and test on the
    page count, see the discussion on linux-kernel)
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c72ce81870ded9365f4bc5caa98ef1591dd18dd
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Oct 14 11:23:27 2005 -0400

    [SCSI] Fix leak of Scsi_Cmnds
    
    When a request is deferred in scsi_init_io because the sg table could not
    be allocated, the associated scsi_cmnd is not released and the request is
    not marked with REQ_DONTPREP.  When the command is retried, if
    scsi_prep_fn decides to kill it then the scsi_cmnd will never be released.
    
    This patch (as573) changes scsi_init_io so that it calls scsi_put_command
    before deferring a request.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d16794f6ac8d9b50f62e02a6e6175ae1a30d0ccd
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Oct 5 13:50:08 2005 -0400

    [SCSI] FW: [PATCH] for Deadlock in transport_fc
    
    Cannot call fc_rport_terminate() under the host lock, so drop the
    lock.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7a9366e46c167930f8bd9e378a3656861c5a41b6
Author: Salyzyn, Mark <mark_salyzyn@adaptec.com>
Date:   Wed Oct 5 12:58:38 2005 -0400

    [SCSI] Fix aacraid regression
    
    Juan was kind enough to linger on site, and work on a production
    machine, to try the parameter to make the system stable. He discovered
    that reducing the maximum transfer size issued to the adapter to 128KB
    stabilized his system. This is related to an earlier change for the
    2.6.13 tree resulting from Martin Drab's testing where the transfer size
    was reduced from 4G to 256KB; we needed to go still further in scaling
    back the request size.
    
    Here is the patch that tames this regression.
    
    Signed-off-by: Mark Salyzyn <aacraid@adaptec.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f566a576bca09de85bf477fc0ab2c8c96405b77b
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Oct 2 17:15:29 2005 -0700

    [SCSI] NCR5380: fix undefined preprocessor identifier
    
    Fix 12 undefined preprocessor identifier warnings (4 each in 3 driver builds):
    drivers/scsi/NCR5380.c:2744:16: warning: undefined preprocessor identifier 'NDEBUG_ABORT'
    drivers/scsi/NCR5380.c:2744:16: warning: "NDEBUG_ABORT" is not defined
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 688ce17b8599abc548b406c00e4d18ae0dec954f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Oct 16 00:17:33 2005 -0700

    [PATCH]: highest_possible_processor_id() has to be a macro
    
    	... otherwise, things like alpha and sparc64 break and break
    badly.  They define cpu_possible_map to something else in smp.h
    *AFTER* having included cpumask.h.
    
    	If that puppy is a macro, expansion will happen at the actual
    caller, when we'd already seen #define cpu_possible_map ... and we will
    get the right thing used.
    
    	As an inline helper it will be tokenized before we get to that
    define and that's it; no matter what we define later, it won't affect
    anything.  We get modules with dependency on cpu_possible_map instead
    of the right symbol (phys_cpu_present_map in case of sparc64), or outright
    link errors if they are built-in.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6850cce8f0fcb0e16b981f13cb9c69618bbdaf1
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Oct 15 16:15:38 2005 -0700

    [NETFILTER]: Fix ip6_table.c build with NETFILTER_DEBUG enabled.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c1542cbc50d19565006633827532ab9f96c92cea
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Oct 15 10:43:35 2005 +0100

    [SERIAL] Add SupraExpress 56i support
    
    The modem is said to work with belows addition to pnp_dev_table[]:
    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=296011
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7a3ca7d2b5ec31b2cfa594b961d77e68075e33c7
Author: Randall Nortman <linuxkernellist@wonderclown.com>
Date:   Fri Oct 14 17:21:50 2005 -0700

    [PATCH] usbserial: Regression in USB generic serial driver
    
    Kernel version 2.6.13 introduced a regression in the generic USB
    serial converter driver (usbserial.o, drivers/usb/serial/generic.c).
    The bug manifests, as far as I can tell, whenever you attempt to write
    to the device -- the write will never complete (write() returns 0, or
    blocks).
    
    Signed-off-by: Randall Nortman <oss@wonderclown.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8cc5756dee3c2a4c56a7f089291f5ae0232747f
Merge: bf7c7de... b4d1b82...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 14 17:17:04 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit bf7c7decb9752a3cb644b435cb354c8948606680
Merge: 9e04099... 04f03bf...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 14 17:16:55 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 9e04099cb90dce6a34b4cbc6b4a0d4e4cc4c5680
Merge: 757e010... 4148949...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Oct 14 17:16:35 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 757e0108473787f470294ce77bf703fedddfce7d
Author: Kolli, Neela Syam <Neela.Kolli@engenio.com>
Date:   Fri Oct 14 15:59:13 2005 -0700

    [PATCH] megaraid maintainers entry
    
    I am taking over all Megaraid SCSI drivers.  Here is the patch for the
    MAINTENERS file.
    
    Signed-off-by: Neela Syam Kolli <Neela.Kolli@engenio.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d656901bca2e19057ca7a6e48bc56dec9ca7003e
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Fri Oct 14 15:59:12 2005 -0700

    [PATCH] sh-sci.c sci_start_tx error
    
    Argument does not agree.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63c6764ce4c650245a41a95a2235207d25ca4fde
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Fri Oct 14 15:59:11 2005 -0700

    [PATCH] nommu build error fix
    
    "proc_smaps_operations" is not defined in case of "CONFIG_MMU=n".
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d1f87a728a5ddd9ee0418e14a12e5cb0372fad1
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Oct 14 15:59:11 2005 -0700

    [PATCH] Dallas's 1-wire bus compile error
    
    drivers/built-in.o: In function `w1_alloc_dev': undefined reference to `netlink_kernel_create'
    drivers/built-in.o: In function `w1_alloc_dev': undefined reference to `sock_release'
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e7734d3ca24302a513e69dd24a560c34047c038
Author: Mark Haverkamp <markh@osdl.org>
Date:   Fri Oct 14 15:59:10 2005 -0700

    [PATCH] aacraid: host_lock not released fix
    
    While doing some testing of error cases I ran into this bug.  In some cases
    the reset handler can exit with the host_lock still held.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1350843cf0fa46e2f633c78b335777aac3d054b2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Oct 14 15:59:09 2005 -0700

    [PATCH] ppc64: Fix G5 model in /proc/cpuinfo
    
    Andreas Schwab spotted that recent kernels broke reporting of the PowerMac
    machine model in /proc/cpuinfo.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a90933fb4e7b85587e5cbdf863deeb16695c19bd
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Fri Oct 14 15:59:07 2005 -0700

    [PATCH] m32r: Fix smp.c for preempt kernel
    
    This patch fixes the following BUG message of arch/m32r/smp.c for
    CONFIG_DEBUG_PREEMPT:
    
    BUG: using smp_processor_id() in preemptible
    
    This message is displayed by an smp_processor_id() execution during
    kernel's preemptible-state.
    
    Signed-off-by: Hitoshi Yamamoto <hitoshiy@isl.melco.co.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6593b58cfb54138781c5cd88f605e2ae663301b0
Author: Matteo Croce <3297627799@wind.it>
Date:   Fri Oct 14 15:59:06 2005 -0700

    [PATCH] wireless/airo: Build fix
    
    The aironet PCI driver has a build dependency on ISA that prevent the
    driver to compile on systems that doesn't support ISA, like x86_64.  The
    driver really doesn't depend on ISA, it does some ISA stuff in the
    initialization code, since the driver supports both ISA and PCI cards.  So
    the driver should depend on ISA_DMA_API to build on all systems, and this
    will not hurt PCI at all.
    
    Signed-off-by: Matteo Croce <3297627799@wind.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e26148d934762b61133a64b6862f870624ff617d
Author: Tim Schmielau <tim@physik3.uni-rostock.de>
Date:   Fri Oct 14 15:59:05 2005 -0700

    [PATCH] Fix copy-and-paste error in BSD accounting
    
    Fix copy and paste error in jiffies_to_AHZ conversion which leads to wrong
    BSD accounting information on alpha and ia64 when
    CONFIG_BSD_PROCESS_ACCT_V3 is turned on.
    
    Also update comment to match reorganised header files.
    
    Signed-off-by: Tim Schmielau <tim@physik3.uni-rostock.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1ac046d7b297186f755fb213589b539426e1406
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Oct 14 15:59:04 2005 -0700

    [PATCH] radio-cadet: check request_region() return value correctly
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6ecf7ed3131961e5aeedb0efd217afa0808798f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Oct 14 15:59:03 2005 -0700

    [PATCH] Add missing export of getnstimeofday()
    
    Adds the missing EXPORT_SYMBOL_GPL for getnstimeofday() when
    CONFIG_TIME_INTERPOLATION isn't set.  Needed by drivers/char/mmtimer.c
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65d406ace3b44e042807d3f9a2e71088818e80f2
Author: Pavel Machek <pavel@suse.cz>
Date:   Fri Oct 14 15:59:03 2005 -0700

    [PATCH] zaurus: fix dependencies on collie keyboard
    
    This fixes depenencies of collie keyboard.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4846d0172dd7fb6a77843644caa6d9a8909225b9
Author: Pavel Machek <pavel@ucw.cz>
Date:   Fri Oct 14 15:59:02 2005 -0700

    [PATCH] zaurus: fix soc_common.c
    
    This fixes wrong comments, non-working debug subsystem, and some
    potentially dangerous macros.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6edb7467be2195e7eeb6844e37668253af216100
Author: Pavel Machek <pavel@ucw.cz>
Date:   Fri Oct 14 15:59:01 2005 -0700

    [PATCH] zaurus: fix compilation with cpufreq disabled
    
    This fixes compilation with CPU_FREQ disabled.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43d2c4ca385b02ab7a604aa09a9da36f1668bee6
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Oct 14 15:59:00 2005 -0700

    [PATCH] mips: fix build error in TANBAC TB0226
    
    arch/mips/pci/fixup-tb0226.c: In function `pcibios_map_irq':
    arch/mips/pci/fixup-tb0226.c:31: warning: implicit declaration of function `vr41xx_set_irq_trigger'
    arch/mips/pci/fixup-tb0226.c:32: error: `TRIGGER_LEVEL' undeclared (first use in this function)
    arch/mips/pci/fixup-tb0226.c:32: error: (Each undeclared identifier is reported only once
    arch/mips/pci/fixup-tb0226.c:32: error: for each function it appears in.)
    arch/mips/pci/fixup-tb0226.c:33: error: `SIGNAL_THROUGH' undeclared (first use in this function)
    arch/mips/pci/fixup-tb0226.c:34: warning: implicit declaration of function `vr41xx_set_irq_level'
    arch/mips/pci/fixup-tb0226.c:34: error: `LEVEL_LOW' undeclared (first use in this function)
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4d1b825785847cddee6d104113da913f2ca8efb
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Oct 14 15:26:08 2005 -0700

    [SPARC64]: Fix powering off on SMP.
    
    Doing a "SUNW,stop-self" firmware call on the other cpus is not the
    correct thing to do when dropping into the firmware for a halt,
    reboot, or power-off.
    
    For now, just do nothing to quiet the other cpus, as the system should
    be quiescent enough.  Later we may decide to implement smp_send_stop()
    like the other SMP platforms do.
    
    Based upon a report from Christopher Zimmermann.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f75884d28a6eae5a422d0454b982da3842f777af
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Oct 14 13:44:32 2005 -0700

    [QLOGICPTI]: Handle INQUIRY response sniffing correctly.
    
    These days, in 2.6.x, even INQUIRY commands are sent using
    scatter gather lists.
    
    Bug reported by Tom 'spot' Callaway.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 414894938b88c1ad2e9cea6502ceccefb30605c4
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 14 16:07:28 2005 +0100

    [ARM] 3014/1: Spitz keyboard: Correct the right shift key
    
    Patch from Richard Purdie
    
    Correct the right shift key entry in the spitz keyboard driver.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 72023b63cc512d2d7c2a31c6bc1be497eafbd834
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 14 16:07:27 2005 +0100

    [ARM] 3013/1: Spitz: Fix compile errors
    
    Patch from Richard Purdie
    
    Remove a couple of lines of accidently added code causing compile
    errors.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 10f92eb7c6b4e8069c2defd2ad23b74f31f8962d
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 14 16:07:26 2005 +0100

    [ARM] 3012/1: Corgi/Spitz LCD: Use bus_find_device to locate pxafb - fix compile error
    
    Patch from Richard Purdie
    
    Update corgi_lcd to use bus_find_device to locate the pxafb device
    hence fixing a compile error.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb38c569e5ecf9e922e66963b6da2751b4f13d81
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 14 16:07:25 2005 +0100

    [ARM] 3011/1: pxafb: Add ability to set device parent + fix spitz compile error
    
    Patch from Richard Purdie
    
    Add a function to allow machines to set the parent of the pxa
    framebuffer device. This means the power up/down sequence can be
    controlled where required by the machine.
    
    Update spitz to use the new function, fixing a compile error.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 04f03bf7dbd04c15c30d91c6a277f6970cc4ef14
Author: Baris Cicek <baris@nerd.com.tr>
Date:   Fri Oct 14 14:32:40 2005 +0100

    [SERIAL] Add SupraExpress 336i Sp ASVD modem ID
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb90d681ae439e525de9de519508ac9041342321
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Oct 14 12:49:15 2005 +0100

    [ARM] 2980/1: Fix L7200 core.c compile
    
    Patch from Deepak Saxena
    
    This patch fixes L7200 so that it builds in 2.6.latest. I do not
    have the hardware so don't know if it actually still works, but
    the changes are fairly trivial. I am not even sure if anyone
    still maintains, uses, or cares about this machine type.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6205d158d16d2619bf30f0aff47a8e09b07106e9
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Oct 14 12:24:24 2005 +0100

    [ARM] 3009/1: S3C2410 - io.h offsets too large for LDRH/STRH
    
    Patch from Ben Dooks
    
    The __inwc/__outwc calls are capable of creating
    LDRH and STRH instructions with offsets over 8bits
    as GCC does not have a constraint for an 8bit
    offset.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 688cb30bdc3e398d97682a6a58f825821ee838c2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Oct 13 22:15:24 2005 -0700

    [SPARC64]: Eliminate PCI IOMMU dma mapping size limit.
    
    The hairy fast allocator in the sparc64 PCI IOMMU code
    has a hard limit of 256 pages.  Certain devices can
    exceed this when performing very large I/Os.
    
    So replace with a more simple allocator, based largely
    upon the arch/ppc64/kernel/iommu.c code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 51e8513615ed8202b22ba9a43b0c7376ea4f6868
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Oct 13 21:10:08 2005 -0700

    [SPARC64]: Consolidate common PCI IOMMU init code.
    
    All the PCI controller drivers were doing the same thing
    setting up the IOMMU software state, put it all in one spot.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3384a04ed42c583755226374e1ff6a53db7f27c3
Merge: 046d20b... 74e52aa...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 13 16:10:54 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 046d20b73960b7a2474b6d5e920d54c3fd7c23fe
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Oct 13 14:42:24 2005 -0700

    [TCP]: Ratelimit debugging warning.
    
    Better safe than sorry.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb0d6041143fae63410c5622fef96862e6b20933
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Oct 13 14:42:04 2005 -0700

    [CONNECTOR]: Update documentation to match reality.
    
    Updated documentation to reflect 2.6.14 netlink changes
    about socket options, multicasting and group number.
    Please concider for 2.6.14.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 34cb711ba922f53cca45443b8c3c1078873cf599
Author: Andi Kleen <ak@suse.de>
Date:   Thu Oct 13 14:41:44 2005 -0700

    [NET]: Disable NET_SCH_CLK_CPU for SMP x86 hosts
    
    Opterons with frequency scaling have fully unsynchronized TSCs
    running at different frequencies, so using TSCs there is not a good idea.
    Also some other x86 boxes have this problem. gettimeofday should be good
    enough, so just disable it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8923c6b852d3a97c1faad0566e38fca330375a7
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Oct 13 14:41:23 2005 -0700

    [NETFILTER]: Fix OOPSes on machines with discontiguous cpu numbering.
    
    Original patch by Harald Welte, with feedback from Herbert Xu
    and testing by Sbastien Bernard.
    
    EBTABLES, ARP tables, and IP/IP6 tables all assume that cpus
    are numbered linearly.  That is not necessarily true.
    
    This patch fixes that up by calculating the largest possible
    cpu number, and allocating enough per-cpu structure space given
    that.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 13b1f64c16e2eb96a021b49cf3986528046ba3dc
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Oct 13 22:04:37 2005 +0100

    [ARM] 3008/1: the exception table is not read-only
    
    Patch from Nicolas Pitre
    
    ... and therefore should not live in the .text section.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 50688ea9ed6fe154058c065bc7dc60980533a2c8
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 13 22:04:36 2005 +0100

    [ARM] 3007/1: BAST - add CONFIG_ISA to build
    
    Patch from Ben Dooks
    
    The Simtec EB2410ITX (BAST) has a PC/104 slot, and
    therefore we should enable CONFIG_ISA to allow the
    drivers for ISA peripherals to be selected
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c931488cc4619eecfe68a2f046b5898fddc2f904
Merge: aac372d... 3a8f675...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 13 09:59:32 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 3a8f675c40ba2d04e4fff6710db3da763436269f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 13 16:46:35 2005 +0100

    [ARM] 3006/1: S3C2410 - arch/arm/mach-s3c2410 sparse fixes
    
    Patch from Ben Dooks
    
    Remove an unused variable from s3c2410.c and
    ensure that items not needed to be exported from
    s3c2440.c are declared static.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9153bd75f25ff3170f07fb9ac1fb0e718afc6fce
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Oct 13 16:46:35 2005 +0100

    [ARM] 3005/1: S3C2440 - add definition for s3c2440_set_dsc() call in hardware.h
    
    Patch from Ben Dooks
    
    include/asm-arm/arch-s3c2410/hardware.h was missing
    the definition for s3c2440_set_dsc()
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit aac372de6bde03168b833b4db1346a2c34a016c6
Merge: 02d31ed... c9c1083...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 12 19:08:10 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 02d31ed258434b29eb0e3a10f5ede6eecd46b6ba
Merge: 1b66e9f... 9ff5c59...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 12 19:07:59 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 1b66e9fe8523cc239b6bea8443a860f50aeb2a83
Merge: 67d2b48... 9621904...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 12 19:07:38 2005 -0700

    Merge branch 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 67d2b48e20bfc82f8fdb5410c28564b8b058fcab
Merge: d8e998c... 875521d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Oct 12 19:07:19 2005 -0700

    Merge branch 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 9ff5c59ce278c37bca22fbf98076d199bcaf9845
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Oct 12 15:59:39 2005 -0700

    [TCP]: Add code to help track down "BUG at net/ipv4/tcp_output.c:438!"
    
    This is the second report of this bug.  Unfortunately the first
    reporter hasn't been able to reproduce it since to provide more
    debugging info.
    
    So let's apply this patch for 2.6.14 to
    
    1) Make this non-fatal.
    2) Provide the info we need to track it down.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit afb997c6163b33292d31a09d6aa5cbb03ffa5bf1
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 15:12:21 2005 -0700

    [NETPOLL]: wrong return for null netpoll_poll_lock()
    
    When netpoll is not being used, the macro that
    defines the removed routing netpoll_poll_lock
    defines the return as zero, but the real
    routine returns a `void *`
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab4060e858e36129f9319ef0fa055347ad60e1d5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Oct 12 15:10:01 2005 -0700

    [BRIDGE]: fix race on bridge del if
    
    This fixes the RCU race on bridge delete interface.  Basically,
    the network device has to be detached from the bridge in the first
    step (pre-RCU), rather than later. At that point, no more bridge traffic
    will come in, and the other code will not think that network device
    is part of a bridge.
    
    This should also fix the XEN test problems.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9c10830740df1b5e7848d6fbb68c93a73e8f7cd
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Oct 12 12:22:46 2005 -0700

    [SPARC64]: Fix boot failures on SunBlade-150
    
    The sequence to move over to the Linux trap tables from
    the firmware ones needs to be more air tight.  It turns
    out that to be %100 safe we do need to be able to translate
    OBP mappings in our TLB miss handlers early.
    
    In order not to eat up a lot of kernel image memory with
    static page tables, just use the translations array in
    the OBP TLB miss handlers.  That solves the bulk of the
    problem.
    
    Furthermore, to make sure the OBP TLB miss path will work
    even before the fixed MMU globals are loaded, explicitly
    load %g1 to TLB_SFSR at the beginning of the i-TLB and
    d-TLB miss handlers.
    
    To ease the OBP TLB miss walking of the prom_trans[] array,
    we sort it then delete all of the non-OBP entries in there
    (for example, there are entries for the kernel image itself
    which we're not interested in at all).
    
    We also save about 32K of kernel image size with this change.
    Not a bad side effect :-)
    
    There are still some reasons why trampoline.S can't use the
    setup_trap_table() yet.  The most noteworthy are:
    
    1) OBP boots secondary processors with non-bias'd stack for
       some reason.  This is easily fixed by using a small bootup
       stack in the kernel image explicitly for this purpose.
    
    2) Doing a firmware call via the normal C call prom_set_trap_table()
       goes through the whole OBP enter/exit sequence that saves and
       restores OBP and Linux kernel state in the MMUs.  This path
       unfortunately does a "flush %g6" while loading up the OBP locked
       TLB entries for the firmware call.
    
       If we setup the %g6 in the trampoline.S code properly, that
       is in the PAGE_OFFSET linear mapping, but we're not on the
       kernel trap table yet so those addresses won't translate properly.
    
       One idea is to do a by-hand firmware call like we do in the
       early bootup code and elsewhere here in trampoline.S  But this
       fails as well, as aparently the secondary processors are not
       booted with OBP's special locked TLB entries loaded.  These
       are necessary for the firwmare to processes TLB misses correctly
       up until the point where we take over the trap table.
    
    This does need to be resolved at some point.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a451e28c7642830d8b066e5a13de46934151ce3a
Author: Liam Girdwood <Liam.Girdwood@wolfsonmicro.com>
Date:   Wed Oct 12 19:58:12 2005 +0100

    [ARM] 3003/1: SSP channel map register updates for pxa2xx
    
    Patch from Liam Girdwood
    
    This patch updates the pxa2xx channel map registers definitions in
    pxa-regs.h
    
    Changes:-
      o Added description for SSP2 registers
      o Added definitions for SSP3 registers
    
    Signed-off-by:Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6158b4a5647624ceb90074bfcc248ea3152c906
Author: Lothar Wassmann <LW@KARO-electronics.de>
Date:   Wed Oct 12 19:58:11 2005 +0100

    [ARM] 3002/1: Wrong parameter to uart_update_timeout() in drivers/serial/pxa.c
    
    Patch from Lothar Wassmann
    
    The function serial_pxa_set_termios() is calling uart_update_timeout()
    with the baud rate divisor as third parameter, while
    uart_update_timeout() expects the baud rate in this place.
    This results in a bogus port->timeout which is proportional to the
    baud rate.
    
    Signed-off-by: Lothar Wassmann <LW@KARO-electronics.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6ec5e7f3656f0397b7e8b39a7dcc77937d187596
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 19:58:10 2005 +0100

    [ARM] 2978/1: nwfpe - clean up sparse errors
    
    Patch from Ben Dooks
    
    The NWFPE is producing a number of errors from sparse
    due to not defining a number of functions in the
    header files.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 737d0bb7701cdebb661e4db0236071a7df977777
Author: George G. Davis <davis_g@mvista.com>
Date:   Wed Oct 12 19:58:10 2005 +0100

    [ARM] 2969/1: miscellaneous whitespace cleanup
    
    Patch from George G. Davis
    
    Fix leading, trailing and other miscellaneous whitespace issues
    in arch/arm/kernel/alignment.c.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cd26f45bfca4d4fa5ddfe21613d2da46f1acb821
Author: George G. Davis <davis_g@mvista.com>
Date:   Wed Oct 12 19:58:09 2005 +0100

    [ARM] 2970/1: Use -mtune=arm1136j-s when building for CPU_V6 targets
    
    Patch from George G. Davis
    
    When building for CPU_V6 targets, we should use -mtune=arm1136j-s rather
    than -mtune=strongarm but fall back to the later in case someone is
    using an older toolchain (although they should really upgrade instead).
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ceca629e0b4858d6b8bff260dab2e947d31aca56
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Wed Oct 12 19:58:08 2005 +0100

    [ARM] 2971/1: i.MX uart handle rts irq
    
    Patch from Sascha Hauer
    
    handle rts interrupt
    
    Signed-off-by: Giancarlo Formicuccia <giancarlo.formicuccia@gmail.com>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9f693d7b149a74bac301ee47136359294cffed25
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 19:58:07 2005 +0100

    [ARM] 2979/2: S3C2410 - add static to non-exported machine items
    
    Patch from Ben Dooks
    
    Do not export items that are not needed by symbol name
    elsewhere
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a7b1bbbc89194deba8cde02200f08b3840c9daa2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 19:58:07 2005 +0100

    [ARM] 2977/1: armksyms.c - make items in export table static
    
    Patch from Ben Dooks
    
    The items in the export table do not need to be
    exported elsehwere, so quash the sparse warning
    by making the symbol for the table entry static.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 17efa644f624a521e4a6c6a4641d39d227a9b24a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 19:58:06 2005 +0100

    [ARM] 2976/1: S3C2410: add static to functions in serial driver
    
    Patch from Ben Dooks
    
    The s3c2410 serial driver is missing static declerations
    on several functions that are not exported, and have no
    need of being exported outside the driver
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0eea3c0b6cb356bc8e515084f831cac7e3d5131c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Oct 12 19:58:05 2005 +0100

    [ARM] 2975/1: S3C2410: time.c missing include of cpu.h
    
    Patch from Ben Dooks
    
    arch/arm/mach-s3c2410/time.c is missing include
    of cpu.h, causing the declaration of the timer
    struct (s3c24xx_timer) to be flagged as missing
    the declaration.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 60ac133aac9e07b94f2cb6bf571bf8aef69248c3
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Oct 12 19:51:24 2005 +0100

    [ARM] 2974/1: fix ARM710 swi bug workaround
    
    Patch from Nicolas Pitre
    
    Either no one is using an ARM710 with recent kernels, or all ARM710s
    still in use are not afflicted by this swi bug.  Nevertheless, the code
    to work around the ARM710 swi bug is itself currently buggy since it
    uses r8 as a pointer to S_PC while in fact it holds the spsr content
    these days. Fix that, and simplify the code as well.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d8e998c58a870770905495a1d45ebf7285b5b1c5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Oct 12 14:22:50 2005 +1000

    [PATCH] ppc32: Tell userland about lack of standard TB
    
    Glibc is about to get some new high precision timer stuff that relies on
    the standard timebase of the PPC architecture.
    
    However, some (rare & old) CPUs do not have such timebase and it is a
    bit annoying to have your stuff just crash because you are running on
    the wrong CPU...
    
    This exposes to userland a CPU feature bit that tells that the current
    processor doesn't have a standard timebase.  It's negative logic so that
    glibc will still "just work" on older kernels (it will just be unhappy
    on those old CPUs but that doesn't really matter as distro tend to
    update glibc & kernel at the same time).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbd27b8ced4b1888c93f69b4dd108a69ac4d733f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Oct 12 11:39:33 2005 +1000

    [PATCH] ppc32: Fix timekeeping
    
    Interestingly enough, ppc32 had broken timekeeping for ages...  It
    worked, but probably drifted a bit more than could be explained by the
    actual bad precision of the timebase calibration.  We discovered that
    recently when somebody figured out that the common code was using
    CLOCK_TICK_RATE to correct the timekeeing, and ppc32 had a completely
    bogus value for it.
    
    This patch turns it into something saner.  Probably not as good as doing
    something based on the actual timebase frequency precision but I'll
    leave that sort of math to others.  This at least makes it better for
    the common HZ values.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d624ea474a3ddf3a0702d9b47e428ce1f8488a6
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Tue Oct 11 21:01:01 2005 +0200

    [PATCH] uml: compile-time fix recent patch
    
    Give an empty definition for clear_can_do_skas() when it is not needed.
    Thanks to Junichi Uekawa <dancer@netfort.gr.jp> for reporting the
    breakage and providing a fix (I re-fixed it in an IMHO cleaner way).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91acb21f084aa244f26839406ae7ed8aa3668058
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Oct 10 23:10:32 2005 -0400

    [PATCH] uml: revert block driver use of host AIO
    
    The patch to use host AIO support that I submitted early after 2.6.13 exposed
    some problems in the block driver.  I have fixes for these, but am not
    comfortable putting them into 2.6.14 at this late date.  So, this patch reverts
    the use of host AIO.
    
    I will resubmit the original patch, plus fixes to the driver after 2.6.14
    in order to get a reasonable amount of testing before they're exposed to
    the general public.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da64c6ee6bb71bfb3f09d9bb89ce1aa4b1ee7e89
Merge: f5154a9... b1b510a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 11 16:39:24 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit b1b510aa284af1908d5d369d52f7dae16aaabd71
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Oct 11 15:45:16 2005 -0700

    [SPARC64]: Fix net booting on Ultra5
    
    We were not doing alignment properly when remapping the kernel image.
    
    What we want is a 4MB aligned physical address to map at KERNBASE.
    Mistakedly we were 4MB aligning the virtual address where the kernel
    initially sits, that's wrong.
    
    Instead, we should PAGE align the virtual address, then 4MB align the
    physical address result the prom gives to us.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 74e52aa561d5bb973075c2015133546b42cdc290
Merge: f5154a9... 96f339c...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Oct 11 15:08:48 2005 -0700

    Pull mbcs-init-sn-check into release branch

commit f5154a98a1931641f0448f6512294a15279110d7
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Oct 11 19:16:26 2005 +0100

    [PATCH] Don't map the same page too much
    
    Refuse to install a page into a mapping if the mapping count is already
    ridiculously large.
    
    You probably cannot trigger this on 32-bit architectures, but on a
    64-bit setup we should protect against it.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9149ccfa3571eaa4a4b444777d67fc4ed3ebcf27
Author: Peter Bergner <bergner@vnet.ibm.com>
Date:   Tue Oct 11 09:28:24 2005 -0700

    [PATCH] ppc64: Add R_PPC64_TOC16 module reloc
    
    Newer gcc's are generating this relocation, so the module loader needs to
    handle it.
    
    Signed-off-by: Peter Bergner <bergner@vnet.ibm.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3089792f6ee38cdc9e254a7cb2f8c8d7f38c20d
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 11 09:28:24 2005 -0700

    [PATCH] V4L: Enable s-video input on DViCO FusionHDTV5 Lite
    
    * bttv-cards.c:
    - Enable S-Video input on DViCO FusionHDTV5 Lite
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9de11aab1c8fd87da7e1fb435ce0ff26bacd7909
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Tue Oct 11 08:29:09 2005 -0700

    [PATCH] m32r: trap handler code for illegal traps
    
    This patch prevents illegal traps from causing m32r kernel's infinite loop
    execution.
    
    Signed-off-by: Naoto Sugai <sugai@isl.melco.co.jp>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6de505173e24e76bb33a2595312e0c2b44d49e58
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Oct 11 08:29:08 2005 -0700

    [PATCH] binfmt_elf bss padding fix
    
    Nir Tzachar <tzachar@cs.bgu.ac.il> points out that if an ELF file specifies a
    zero-length bss at a whacky address, we cannot load that binary because
    padzero() tries to zero out the end of the page at the whacky address, and
    that may not be writeable.
    
    See also http://bugzilla.kernel.org/show_bug.cgi?id=5411
    
    So teach load_elf_binary() to skip the bss settng altogether if the elf file
    has a zero-length bss segment.
    
    Cc: Roland McGrath <roland@redhat.com>
    Cc: Daniel Jacobowitz <dan@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0c111c631e7ab4abd68920debd44259160812ef
Author: Paolo Galtieri <pgaltieri@mvista.com>
Date:   Tue Oct 11 08:29:07 2005 -0700

    [PATCH] ppc highmem fix
    
    I've noticed that the calculations for seg_size and nr_segs in
    __dma_sync_page_highmem() (arch/ppc/kernel/dma-mapping.c) are wrong.  The
    incorrect calculations can result in either an oops or a panic when running
    fsck depending on the size of the partition.
    
    The problem with the seg_size calculation is that it can result in a
    negative number if size is offset > size.  The problem with the nr_segs
    caculation is returns the wrong number of segments, e.g.  it returns 1 when
    size is 200 and offset is 4095, when it should return 2 or more.
    
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bef40032992320dd25a266fc166bfb8fa3f2f59
Author: Suzuki <suzuki@in.ibm.com>
Date:   Tue Oct 11 08:29:06 2005 -0700

    [PATCH] madvise: Avoid returning error code -EBADF for anonymous mappings
    
    Revert this recent correctness change: Douglas Crosher <dcrosher@scieneer.com>
    reported that it broke an existing application, and that madvise() works
    without error on anonymous mappings on Solaris.
    
    This means that madvise() will remain non-standards-compliant: we should
    return -EBADF for all requests against non-file-backed vma's, but Linux only
    does this for MADV_WILLNEED requests.
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22c1ea44f0d33eda532883858b6cdabc5f265b66
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Tue Oct 11 08:29:05 2005 -0700

    [PATCH] nfsacl: Solaris VxFS compatibility fix
    
    Here is a compatibility fix between Linux and Solaris when used with VxFS
    filesystems: Solaris usually accepts acl entries in any order, but with
    VxFS it replies with NFSERR_INVAL when it sees a four-entry acl that is not
    in canonical form.  It may also fail with other non-canonical acls -- I
    can't tell, because that case never triggers: We only send non-canonical
    acls when we fake up an ACL_MASK entry.
    
    Instead of adding fake ACL_MASK entries at the end, inserting them in the
    correct position makes Solaris+VxFS happy.  The Linux client and server
    sides don't care about entry order.  The three-entry-acl special case in
    which we need a fake ACL_MASK entry was handled in xdr_nfsace_encode.  The
    patch moves this into nfsacl_encode.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19cba8abd6ca09527c194864ae651db65cbacfe1
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Tue Oct 11 08:29:03 2005 -0700

    [PATCH] v9fs: remove additional buffer allocation from v9fs_file_read and v9fs_file_write
    
    v9fs_file_read and v9fs_file_write use kmalloc to allocate buffers as big
    as the data buffer received as parameter.  kmalloc cannot be used to
    allocate buffers bigger than 128K, so reading/writing data in chunks bigger
    than 128k fails.
    
    This patch reorganizes v9fs_file_read and v9fs_file_write to allocate only
    buffers as big as the maximum data that can be sent in one 9P message.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad6ce87e5bd4440a6ce9aa9f8cda795b9e902eff
Author: Abhay Salunke <Abhay_Salunke@dell.com>
Date:   Tue Oct 11 08:29:02 2005 -0700

    [PATCH] dell_rbu: changes in packet update mechanism
    
    In the current dell_rbu code ver 2.0 the packet update mechanism makes the
    user app dump every individual packet in to the driver.
    
    This adds in efficiency as every packet update makes the
    /sys/class/firmware/dell_rbu/loading and data files to disappear and reappear
    again.  Thus the user app needs to wait for the files to reappear to dump
    another packet.  This slows down the packet update tremendously in case of
    large number of packets.  I am submitting a new patch for dell_rbu which will
    change the way we do packet updates;
    
    In the new method the user app will create a new single file which has already
    packetized the rbu image and all the packets are now staged in this file.
    
    This driver also creates a new entry in
    /sys/devices/platform/dell_rbu/packet_size ; the user needs to echo the packet
    size here before downloading the packet file.
    
    The user should do the following:
    
     create one single file which has all the packets stacked together.
     echo the packet size in to /sys/devices/platform/dell_rbu/packet_size.
     echo 1 > /sys/class/firmware/dell_rbu/loading
     cat the packetfile > /sys/class/firmware/dell_rbu/data
     echo 0 > /sys/class/firmware/dell_rbu/loading
    
    The driver takes the file which came through /sys/class/firmware/dell_rbu/data
    and takes chunks of paket_size data from it and place in contiguous memory.
    
    This makes packet update process very efficient and fast.  As all the packet
    update happens in one single operation.  The user can still read back the
    downloaded file from /sys/devices/platform/dell_rbu/data.
    
    Signed-off-by: Abhay Salunke <abhay_salunke@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4314bf496bb7bb9acd754aeb319c30869bc8d76
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Oct 11 08:29:00 2005 -0700

    [PATCH] ppc64: Fix PCI hotplug
    
    pSeries_irq_bus_setup is marked __devinit but references s7a_workaround
    which is marked __initdata.
    
    Depending on who got the memory for s7a_workaround (and if the value was
    now positive), it was possible for PCI hotplugged devices to have 3
    subtracted from their interrupt number.  This would happen randomly and
    caused me much confusion :)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5945b4f605d1479d5b44252a2c691168c5d38d6
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Tue Oct 11 08:28:59 2005 -0700

    [PATCH] s390: ccw device reconnect oops.
    
    Search for a disconnect ccw_device on the ccw bus rather than on the css
    bus (was a typo in patch I did for the klist conversion).  A cast to an
    embedding ccw_device from an embedded device in a struct subchannel will
    lead us to oopses.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9621904012de3c8d0d4e2904dcc7170b3012119e
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Oct 11 01:52:39 2005 -0400

    sata_nv: Fixed bug introduced by 0.08's MCP51 and MCP55 support.

commit 875521ddccfa90d519cf31dfc8aa472f7f6325bb
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Oct 11 01:38:35 2005 -0400

    e100: revert CPU cycle saver microcode, it causes severe problems
    for certain NICs
    
    Reverting 685fac63f5ca6c5ca06bab641e1a32bbf9287e89:
    > [PATCH] e100: CPU cycle saver microcode
    >
    >
    > Add cpu cycle saver microcode to 8086:{1209/1229} other than ICH devices.
    >
    > Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    > Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    > Signed-off-by: John Ronciak <john.ronciak@intel.com>
    > Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit eeb2b8560676e454ad37ee30b49bc7d897edc9be
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Mon Oct 10 21:25:23 2005 -0700

    [TWSK]: Grab the module refcount for timewait sockets
    
    This is required to avoid unloading a module that has active timewait
    sockets, such as DCCP.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2a9bc9bb4d3a4570a8a48aadf071b91e657adb89
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Mon Oct 10 21:25:00 2005 -0700

    [DCCP]: Transition from PARTOPEN to OPEN when receiving DATA packets
    
    Noticed by Andrea Bittau, that provided a patch that was modified to
    not transition from RESPOND to OPEN when receiving DATA packets.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 777b25a2fea7129222eb11fba55c0a67982383ff
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Mon Oct 10 21:24:20 2005 -0700

    [CCID]: Check if ccid is NULL in the hc_[tr]x_exit functions
    
    For consistency with ccid_exit and to fix a bug when
    IP_DCCP_UNLOAD_HACK is enabled as the control sock is not associated
    to any CCID.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 061cb4a0ec34a6e3069d5a1b3c547e55a71498c5
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Mon Oct 10 21:23:46 2005 -0700

    [NETFILTER] ctnetlink: add support to change protocol info
    
    This patch add support to change the state of the private protocol
    information via conntrack_netlink.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 339231537506846cb232a2f0cc4a2c662b2d5b07
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Mon Oct 10 21:23:28 2005 -0700

    [NETFILTER] ctnetlink: allow userspace to change TCP state
    
    This patch adds the ability of changing the state a TCP connection. I know
    that this must be used with care but it's required to provide a complete
    conntrack creation via conntrack_netlink. So I'll document this aspect on
    the upcoming docs.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a051a8f7306476af0a74370ad56e793cb6c43bf7
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 21:21:10 2005 -0700

    [NETFILTER]: Use only 32bit counters for CONNTRACK_ACCT
    
    Initially we used 64bit counters for conntrack-based accounting, since we
    had no event mechanism to tell userspace that our counters are about to
    overflow.  With nfnetlink_conntrack, we now have such a event mechanism and
    thus can save 16bytes per connection.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4875b049b2e6401a6e1fae90b7f09e20a636fcf
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 10 21:11:34 2005 -0700

    [IPSEC] Fix block size/MTU bugs in ESP
    
    This patch fixes the following bugs in ESP:
    
    * Fix transport mode MTU overestimate.  This means that the inner MTU
      is smaller than it needs be.  Worse yet, given an input MTU which
      is a multiple of 4 it will always produce an estimate which is not
      a multiple of 4.
    
      For example, given a standard ESP/3DES/MD5 transform and an MTU of
      1500, the resulting MTU for transport mode is 1462 when it should
      be 1464.
    
      The reason for this is because IP header lengths are always a multiple
      of 4 for IPv4 and 8 for IPv6.
    
    * Ensure that the block size is at least 4.  This is required by RFC2406
      and corresponds to what the esp_output function does.  At the moment
      this only affects crypto_null as its block size is 1.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a02a64223eddb410712b015fb3342c9a316ab70b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 10 21:11:08 2005 -0700

    [IPSEC]: Use ALIGN macro in ESP
    
    This patch uses the macro ALIGN in all the applicable spots for ESP.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 08eb8f124f990aa476589d1f7810f7ec7f259c08
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Oct 10 21:02:26 2005 -0700

    [SPARC32]: Revert IOMAP change eb98129eec7fa605f0407dfd92d40ee8ddf5cd9a
    
    Breakage noted by Al Viro.
    
    It breaks non-PCI builds, it's probably better to have a more
    direct implementation on sparc32, and which driver actually
    needs this is still questionable.
    
    We can resolve this in 2.6.15
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1c73b78e3706bd3c336d4730a01dd4081dfb7ee
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Mon Oct 10 20:55:49 2005 -0700

    [NETFILTER] ctnetlink: add one nesting level for TCP state
    
    To keep consistency, the TCP private protocol information is nested
    attributes under CTA_PROTOINFO_TCP. This way the sequence of attributes to
    access the TCP state information looks like here below:
    
    CTA_PROTOINFO
    CTA_PROTOINFO_TCP
    CTA_PROTOINFO_TCP_STATE
    
    instead of:
    
    CTA_PROTOINFO
    CTA_PROTOINFO_TCP_STATE
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5bbc243aafff9ad653dc7a9fa7bcaf0b4631355a
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:54:01 2005 -0700

    [NETFILTER]: Add missing include to ip_conntrack_tuple.h
    
    Without this #include, __be16 is not defined and userspace programs
    will break.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a1bcc3f26885b0a8bf04799551de2e9574ccbda1
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Mon Oct 10 20:53:16 2005 -0700

    [NETFILTER] ctnetlink: ICMP ID is not mandatory
    
    The ID is only required by ICMP type 8 (echo), so it's not
    mandatory for all sort of ICMP connections. This patch makes
    mandatory only the type and the code for ICMP netlink messages.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d000eaf7720cb12cd03cd3d55f71be44357d27a9
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:52:51 2005 -0700

    [NETFILTER] conntrack_netlink: Fix endian issue with status from userspace
    
    When we send "status" from userspace, we forget to convert the endianness.
    This patch adds the reqired conversion.  Thanks to Pablo Neira for
    discovering this.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3a91d037a2575040f9b6a483f60c407a3d80368
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:52:36 2005 -0700

    [NETFILTER] nat: remove bogus structure member
    
    When 'rustynat' was merged in 2.6.12, the use of the "helper" pointer of
    struct ipt_nat_info was obsoleted, but the pointer not removed from the
    struct.
    
    This patch removes the pointer, thereby yet again shrinking struct
    ip_conntrack.
    
    Discovered-by: Rusty Russell <rusty@netfilter.org>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebe0bbf06c9e03613bdcb6b5a704595a9344b7ff
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:52:19 2005 -0700

    [NETFILTER] nfnetlink: use highest bit of nfa_type to indicate nested TLV
    
    As Henrik Nordstrom pointed out, all our efforts with "split endian" (i.e.
    host byte order tags, net byte order values) are useless, unless a parser
    can determine whether an attribute is nested or not.
    
    This patch steals the highest bit of nfattr.nfa_type to indicate whether
    the data payload contains a nested nfattr (1) or not (0).
    
    This will break userspace compatibility, but luckily no kernel with
    nfnetlink was released so far.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f40863cec87464f3f4ec3a6c00e3fda3bbb0c91b
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:51:53 2005 -0700

    [NETFILTER] ipt_ULOG: Mark ipt_ULOG as OBSOLETE
    
    Similar to nfnetlink_queue and ip_queue, we mark ipt_ULOG as obsolete.
    This should have been part of the original nfnetlink_log merge, but
    I somehow missed it.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85d9b05d9b1edad9a2630584754720a957ab0a2a
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Oct 10 20:47:42 2005 -0700

    [NETFILTER] PPTP helper: Add missing Kconfig dependency
    
    PPTP should not be selectable without conntrack enabled
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b8df110fea555d5088bba67f446c2435104405be
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Oct 10 20:43:22 2005 -0700

    [SPARC64]: Fix oops on runlevel change with serial console.
    
    Incorrect uart_write_wakeup() calls cause reference to a
    NULL tty pointer in sunsab and sunzilog serial drivers.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 907a42617970a159361f17ef9a63f04d276995ab
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 18:19:19 2005 -0700

    Linux v2.6.14-rc4

commit 3c92c2ba33cd7d666c5f83cc32aa590e794e91b0
Author: Andi Kleen <ak@suse.de>
Date:   Tue Oct 11 01:28:33 2005 +0200

    [PATCH] i386: Don't discard upper 32bits of HWCR on K8
    
    Need to use long long, not long when RMWing a MSR. I think
    it's harmless right now, but still should be better fixed
    if AMD adds any bits in the upper 32bit of HWCR.
    
    Bug was introduced with the TLB flush filter fix for i386
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 421c7ce6d001fce28b1fa8fdd2e7ded0ed8a0ad5
Author: Andi Kleen <ak@suse.de>
Date:   Mon Oct 10 22:32:45 2005 +0200

    [PATCH] x86_64: Allocate cpu local data for all possible CPUs
    
    CPU hotplug fills up the possible map to NR_CPUs, but it did that after
    setting up per CPU data. This lead to CPU data not getting allocated
    for all possible CPUs, which lead to various side effects.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af74c3a61d24ab42c04052ddd2343de972a1cc07
Merge: d7dd8a7... 5d8e1b1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 16:32:32 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit d7dd8a72ab8d305fbe1c4bb571e0633eba3a8d23
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 16:31:30 2005 -0700

    Use the new "kill_proc_info_as_uid()" for USB disconnect too
    
    All the same issues - we can't just save the pointer to the thread, we
    must save the pid/uid/euid combination.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46113830a18847cff8da73005e57bc49c2f95a56
Author: Harald Welte <laforge@gnumonks.org>
Date:   Mon Oct 10 19:44:29 2005 +0200

    [PATCH] Fix signal sending in usbdevio on async URB completion
    
    If a process issues an URB from userspace and (starts to) terminate
    before the URB comes back, we run into the issue described above.  This
    is because the urb saves a pointer to "current" when it is posted to the
    device, but there's no guarantee that this pointer is still valid
    afterwards.
    
    In fact, there are three separate issues:
    
    1) the pointer to "current" can become invalid, since the task could be
       completely gone when the URB completion comes back from the device.
    
    2) Even if the saved task pointer is still pointing to a valid task_struct,
       task_struct->sighand could have gone meanwhile.
    
    3) Even if the process is perfectly fine, permissions may have changed,
       and we can no longer send it a signal.
    
    So what we do instead, is to save the PID and uid's of the process, and
    introduce a new kill_proc_info_as_uid() function.
    
    Signed-off-by: Harald Welte <laforge@gnumonks.org>
    [ Fixed up types and added symbol exports ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d8e1b181c4ad63e6ca90d51287b31afd400d2eb
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Oct 10 16:12:13 2005 -0700

    [SPARC64]: Fix Ultra5, Ultra60, et al. boot failures.
    
    On the boot processor, we need to do the move onto the Linux trap
    table a little bit differently else we'll take unhandlable faults in
    the firmware address space.
    
    Previously we would do the following:
    
    1) Disable PSTATE_IE in %pstate.
    2) Set %tba by hand to sparc64_ttable_tl0
    3) Initialize alternate, mmu, and interrupt global
       trap registers.
    4) Call prom_set_traptable()
    
    That doesn't work very well actually with the way we boot the kernel
    VM these days.  It worked by luck on many systems because the firmware
    accesses for the prom_set_traptable() call happened to be loaded into
    the TLB already, something we cannot assume.
    
    So the new scheme is this:
    
    1) Clear PSTATE_IE in %pstate and set %pil to 15
    2) Call prom_set_traptable()
    3) Initialize alternate, mmu, and interrupt global
       trap registers.
    
    and this works quite well.  This sequence has been moved into a
    callable function in assembler named setup-trap_table().  The idea is
    that eventually trampoline.S can use this code as well.  That isn't
    possible currently due to some complications, but eventually we should
    be able to do it.
    
    Thanks to Meelis Roos for the Ultra5 boot failure report.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 094804c5a132f04c12dd4902ee15c64362e5c1af
Author: Andi Kleen <ak@suse.de>
Date:   Tue Oct 11 01:03:39 2005 +0200

    [PATCH] x86_64: Fix change_page_attr cache flushing
    
    Noticed by Terence Ripperda
    
    Undo wrong change in global_flush_tlb. We need to flush the caches in all
    cases, not just when pages were reverted. This was a bogus optimization
    added earlier, but it was wrong.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f96c3bbe91117402f13119ce9e609db9087ed58f
Merge: ec384d2... 585f545...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 10:39:26 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-ucb

commit ec384d297c2c47611cae835284fe970073d41783
Merge: d347f37... 71e2b2e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 10:39:14 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 71e2b2ecc1c44cb4f2f3e68827af8b90246becac
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Mon Oct 10 18:24:09 2005 +0100

    [ARM] 2968/1: defconfig for the ARM Collie platform
    
    Patch from Vincent Sanders
    
    Add a defconfig for the ARM Collie platform
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 36e5ea67590707a069ce3bcc179b38cdabebcfdd
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Mon Oct 10 18:24:08 2005 +0100

    [ARM] 2967/1: defconfig for the ARM Corgi platform
    
    Patch from Vincent Sanders
    
    Add a defconfig for the ARM Corgi Zarus platform
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b0bdc7be78931dfbfaec8bd0da44a5f4e158ca8f
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Mon Oct 10 18:24:07 2005 +0100

    [ARM] 2966/1: defconfig for the ARM Poodle platform
    
    Patch from Vincent Sanders
    
    Add a defconfig for the ARM Poodle Zarus platform
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 86b324874f571297237c0c940bfe7e5f0f9ca5d2
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Mon Oct 10 18:24:06 2005 +0100

    [ARM] 2965/1: defconfig for the ARM Spitz platform
    
    Patch from Vincent Sanders
    
    Add a defconfig for the ARM Spitz Zarus platform
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 585f54575d832506bbe9b5a2f435f37b81efc849
Author: Nicolas Pitre <nico@cam.org>
Date:   Mon Oct 10 18:22:17 2005 +0100

    [ARM] 2956/1: fix the "Fix gcc4 build errors in ucb1x00-core.c"
    
    Patch from Nicolas Pitre
    
    drivers/mfd/ucb1x00-core.c: In function 'ucb1x00_probe':
    drivers/mfd/ucb1x00-core.c:482: error: 'ucb1x00_class' undeclared (first use in this function)
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d347f372273c2b3d86a66e2e1c94c790c208e166
Author: Markus F.X.J. Oberhumer <markus@oberhumer.com>
Date:   Sun Oct 9 18:54:23 2005 +0200

    [PATCH] i386: fix stack alignment for signal handlers
    
    This fixes the setup of the alignment of the signal frame, so that all
    signal handlers are run with a properly aligned stack frame.
    
    The current code "over-aligns" the stack pointer so that the stack frame
    is effectively always mis-aligned by 4 bytes.  But what we really want
    is that on function entry ((sp + 4) & 15) == 0, which matches what would
    happen if the stack were aligned before a "call" instruction.
    
    Signed-off-by: Markus F.X.J. Oberhumer <markus@oberhumer.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 867f8b4e47a17c5d68c98dc6eee12739c4490056
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Oct 9 10:37:47 2005 +1000

    [PATCH] ide: Workaround PM problem
    
    The logic in ide_do_request() doesn't guarantee that both drives will be
    serviced after a call.  It may "forget" to service one in some
    circumstances, including when one of the drive is suspended (it will
    eventually fail to service the slave when the master is suspended for
    example).  This prevents the wakeup requests that gets queued on wakeup
    from sleep from beeing serviced in some cases when 2 drives are sharing
    an IDE bus.
    
    The problem is deep enough in the way this code works (and there are
    probably a few other problematic but rare corner cases) and fixing it
    would require some major rethinking of the way IDE decides which channel
    to service.  This is not 2.6.14 material.  However, in the meantime,
    Bart has accepted this simple workaround that will fix the crash on
    wakeup from sleep since this specific corner case is actually hitting
    users to get into 2.6.14.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cc956e12aedfdc6baf6312bc36a6b5a71af3c9d
Author: Tom Zanussi <zanussi@us.ibm.com>
Date:   Sun Oct 9 10:41:32 2005 -0500

    [PATCH] relayfs: fix bogus param value in call to vmap
    
    The third param in this call to vmap shouldn't be GFP_KERNEL, which
    makes no sense, but rather VM_MAP.  Thanks to Al Viro for spotting
    this.
    
    Signed-off-by: Tom Zanussi <zanussi@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb1b74e097db51a213600e8c776db754d7056e6a
Merge: 50f72b5... 7dead80...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 10 08:38:52 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 50f72b57946d565db74fae71bac23f3f319311c8
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sun Oct 9 16:11:44 2005 -0400

    [PATCH] uml: fix x86_64 with !CONFIG_FRAME_POINTER
    
    UML/x86_64 doesn't run when built with frame pointers disabled.  There
    was an implicit frame pointer assumption in the stub segfault handler.
    With frame pointers disabled, UML dies on handling its first page fault.
    
    The container-of part of this is from Paolo Giarrusso <blaisorblade@yahoo.it>.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dd083255ddcfa87751fa8e32f61a9547a15a541
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sun Oct 9 21:19:40 2005 +0200

    [PATCH] x86_64: Set up safe page tables during resume
    
    The following patch makes swsusp avoid the possible temporary corruption
    of page translation tables during resume on x86-64.  This is achieved by
    creating a copy of the relevant page tables that will not be modified by
    swsusp and can be safely used by it on resume.
    
    The problem is that during resume on x86-64 swsusp may temporarily
    corrupt the page tables used for the direct mapping of RAM.  If that
    happens, a page fault occurs and cannot be handled properly, which leads
    to the solid hang of the affected system.  This leads to the loss of the
    system's state from before suspend and may result in the loss of data or
    the corruption of filesystems, so it is a serious issue.  Also, it
    appears to happen quite often (for me, as often as 50% of the time).
    
    The problem is related to the fact that (at least) one of the PMD
    entries used in the direct memory mapping (starting at PAGE_OFFSET)
    points to a page table the physical address of which is much greater
    than the physical address of the PMD entry itself.  Moreover,
    unfortunately, the physical address of the page table before suspend
    (i.e.  the one stored in the suspend image) happens to be different to
    the physical address of the corresponding page table used during resume
    (i.e.  the one that is valid right before swsusp_arch_resume() in
    arch/x86_64/kernel/suspend_asm.S is executed).  Thus while the image is
    restored, the "offending" PMD entry gets overwritten, so it does not
    point to the right physical address any more (i.e.  there's no page
    table at the address pointed to by it, because it points to the address
    the page table has been at during suspend).  Consequently, if the PMD
    entry is used later on, and it _is_ used in the process of copying the
    image pages, a page fault occurs, but it cannot be handled in the normal
    way and the system hangs.
    
    In principle we can call create_resume_mapping() from
    swsusp_arch_resume() (ie.  from suspend_asm.S), but then the memory
    allocations in create_resume_mapping(), resume_pud_mapping(), and
    resume_pmd_mapping() must be made carefully so that we use _only_
    NosaveFree pages in them (the other pages are overwritten by the loop in
    swsusp_arch_resume()).  Additionally, we are in atomic context at that
    time, so we cannot use GFP_KERNEL.  Moreover, if one of the allocations
    fails, we should free all of the allocated pages, so we need to trace
    them somehow.
    
    All of this is done in the appended patch, except that the functions
    populating the page tables are located in arch/x86_64/kernel/suspend.c
    rather than in init.c.  It may be done in a more elegan way in the
    future, with the help of some swsusp patches that are in the works now.
    
    [AK: move some externs into headers, renamed a function]
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52a2d3e45e06012a662f627177729d3196ba8903
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:53 2005 +0200

    [PATCH] uml: cleanup whitespace for COW driver
    
    Fix whitespace - I split this off the previous patch for easier review.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 028c0cc16e429ae24d9b8aacc64f4438bdfac0cc
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:45 2005 +0200

    [PATCH] uml: cleanup byte order macros for COW driver
    
    After restoring the existing code, make it work also when included in
    kernelspace code (which isn't currently the case, but at least this will prevent
    people from "fixing" it as just happened).
    Whitespace is fixed in next patch - it cluttered the diff too much.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 855ec613ca7e1953d96d7ea81af90392678788f5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:35 2005 +0200

    [PATCH] uml: restore include breakage, breaking binary format of COW driver
    
    Commit 44456d37b59d8e541936ed26d8b6e08d27e88ac1, between 2.6.13-rc3 and -rc4,
    was a "nice cleanup" which broke something. Revert the offending part.
    
    It broke because:
    a) because this part doesn't fall under the description
    b) the author didn't know what he was doing here
    c) the author didn't try to compile the existing code and see that it worked
       perfectly.
    d) the author didn't ask us what was happening
    e) you didn't either, and somebody there should have learned that UML is a bit
       different.
    
    In fact, UML is special in linking to host libc and using its includes.
    
    In particular, since host includes always define both __BIG_ENDIAN and
    __LITTLE_ENDIAN, ntohll() macros started thinking to be in a big-endian world;
    and on-disk compatibility was broken.
    
    Many thanks go to Nix for reporting the problem and correctly diagnosing an
    endianness problem.
    
    Btw, this patch restores the previous code, which worked; but the definitions
    would be uncorrect if used in kernelspace files.
    
    Next patch addresses that.
    
    Cc: Nix <nix@esperi.org.uk>, Olaf Hering <olh@suse.de>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54a8a2220c936a47840c9a3d74910c5a56fae2ed
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:26 2005 +0200

    [PATCH] uml: allow building .s/.i/.lst files from userspace files
    
    For files which need to include glibc headers (i.e. userspace files), we
    specified the correct flags only for .o, not for .s/.lst/.i. Fix this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e3d862e5c341c59b673c9cadd64210ca03cb41e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:18 2005 +0200

    [PATCH] uml: add mode=skas0 as a synonym of skas0
    
    Too many people were confused by skas0 and tried using "mode=skas0". And after
    all, they are right - accept this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cd10daa0c7fc1410e1c0d685cbc9622c769eb16
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Oct 9 21:37:05 2005 +0200

    [PATCH] Uml: hide commands when not being verbose
    
    Add a missing $(Q) to a "ln" invocation.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 220ec0291130a932b32b2c66a10e9c5019dab702
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Mon Oct 10 11:13:17 2005 -0400

    [PATCH] pcmcia: fix task state at pccard thread exit
    
    The pccardd thread has a race in it that it can shutdown in the
    TASK_INTERRUPTIBLE state.
    
    Make sure we mark ourselves runnable again as we remove ourselves from
    the wait queue.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dead80cbee3259e3a9f25bfc65c8dc769a19e0e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Oct 10 10:20:07 2005 +0100

    [ARM] 2964/1: S3C2410 - serial: add .owner to driver
    
    Patch from Ben Dooks
    
    Initialise the driver's .owner field so that
    the device driver can be referenced to the
    module that owns it
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cdfc8f5079fdd18f6cb8097aa4235704d1155ec5
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Oct 10 10:20:06 2005 +0100

    [ARM] 2963/1: S3C2410 - add .owner field to device_driver
    
    Patch from Ben Dooks
    
    Add initialisation of .owner field so that
    the device driver can be referenced to the
    module that owns it.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7c3989885cfd37d237eca97832b712a7ffbbf40c
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Oct 10 10:20:06 2005 +0100

    [ARM] 2962/1: scoop: Allow GPIO pin suspend state to be specified
    
    Patch from Richard Purdie
    
    Allow the GPIO pin suspend states to be specified for SCOOP devices.
    This is needed for correct operation on the spitz platform.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1036260e93a907a0143efa31bf05be1f3271eb90
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Oct 10 10:17:45 2005 +0100

    [ARM] 2961/1: corgi: Add missing include
    
    Patch from Richard Purdie
    
    Add a missing include from corgi.c
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 97b8e00e8538c9eb23983545d665ffd7052ccedb
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Oct 10 10:17:44 2005 +0100

    [ARM] 2960/1: collie: Add missing scoop call parameters
    
    Patch from Richard Purdie
    
    Add some missing parameters from the scoop calls on collie.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 19da83f632d235fff9f94671d2e2cf87d27a2446
Author: George G. Davis <davis_g@mvista.com>
Date:   Mon Oct 10 10:17:44 2005 +0100

    [ARM] 2959/1: Add test for invalid LDRD/STRD Rd cases in ARM alignment handler
    
    Patch from George G. Davis
    
    Add test for invalid LDRD/STRD Rd cases in ARM alignment handler
    and restore SWP printk KERN_ERR.
    
    Signed-off-by: Steve Longerbeam <slongerbeam@mvista.com>
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 79d13b62ef9da84d3ba551caac42d6107e57208f
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Oct 10 10:17:43 2005 +0100

    [ARM] 2958/1: fix definition in imx-regs.h
    
    Patch from Sascha Hauer
    
    Fix PD7_AF_UART2_DTR definition
    
    Signed-off-by: Giancarlo Formicuccia <gformicuccia@atinno.com>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 86371d071bc38a181984b01d323b6172a4b7bb1f
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Oct 10 10:17:42 2005 +0100

    [ARM] 2957/1: imx UART Error handling
    
    Patch from Sascha Hauer
    
    Fix error path in imx_startup.
    
    Signed-off-by: Giancarlo Formicuccia <gformicuccia@atinno.com>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce80cc14810fbd78fa70c15c7e16a0b26d462fc6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Oct 10 09:48:10 2005 +0100

    [ARM] Update mach-types
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2e457ef667158840c1be511f5d10dd42c6dbbe46
Author: Sven Hartge <hartge@ds9.argh.org>
Date:   Sat Oct 8 21:12:04 2005 -0700

    [SPARC64]: Fix compile error in irq.c
    
    irq.c is missing the inclusion of asm/io.h, which causes
    readb() and writeb() the be undefined.
    
    Signed-off-by: Sven Hartge <hartge@ds9.argh.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd0fc66fb33cd610bc1a5db8a5e232d34879b4d7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Oct 7 07:46:04 2005 +0100

    [PATCH] gfp flags annotations - part 1
    
     - added typedef unsigned int __nocast gfp_t;
    
     - replaced __nocast uses for gfp flags with gfp_t - it gives exactly
       the same warnings as far as sparse is concerned, doesn't change
       generated code (from gcc point of view we replaced unsigned int with
       typedef) and documents what's going on far better.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b0e77bd144203a507eb191f7117d2c5004ea1de
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Oct 7 19:41:34 2005 +0200

    [PATCH] scsi_ioctl: only warn for rejected commands
    
    We should not be warning about commands that we allow, even if they are
    unknown. So move the if-root-allow check up a notch.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8aa19ad84c38cd50bfc0560646efe1c9ca83d925
Merge: 58a2c32... a25f175...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 8 14:59:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa

commit 58a2c3221e3c78ea6c71148eb84d4170358981fb
Merge: dcbd39a... 195331d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 8 14:58:25 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog

commit dcbd39a1f1073b10debdb965fccc0ab806d59780
Merge: 582fd48... 4f55cd1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 8 14:57:46 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 582fd487611baa06b07665978429192390c29b8f
Merge: 7ab501d... ba63993...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 8 14:57:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 7ab501db8cb6659efdf04034e0de6b44c059a51b
Author: David Howells <dhowells@redhat.com>
Date:   Fri Oct 7 16:41:24 2005 +0100

    [PATCH] Keys: Possessor permissions should be additive
    
    This patch makes the possessor permissions on a key additive with
    user/group/other permissions on the same key.
    
    This permits extra rights to be granted to the possessor of a key without
    taking away any rights conferred by them owning the key or having common group
    membership.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 468ed2b0c85ec4310b429e60358213b6d077289e
Author: David Howells <dhowells@redhat.com>
Date:   Fri Oct 7 15:07:38 2005 +0100

    [PATCH] Keys: Split key permissions checking into a .c file
    
    The attached patch splits key permissions checking out of key-ui.h and
    moves it into a .c file.  It's quite large and called quite a lot, and
    it's about to get bigger with the addition of LSM support for keys...
    
    key_any_permission() is also discarded as it's no longer used.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1a9badcf6ecad9975240d94514721cb93932151
Author: David Howells <dhowells@redhat.com>
Date:   Fri Oct 7 15:04:52 2005 +0100

    [PATCH] Keys: Add request-key process documentation
    
    The attached patch adds documentation for the process by which request-key
    works, including how it permits helper processes to gain access to the
    requestor's keyrings.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74fd92c511bd4a0771ac0faaaef38bb1be3a29f6
Author: David Howells <dhowells@redhat.com>
Date:   Fri Oct 7 15:01:09 2005 +0100

    [PATCH] key: plug request_key_auth memleak
    
    Plug request_key_auth memleak.  This can be triggered by unprivileged
    users, so is local DoS.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2059b2e0b209a0674c21f78337bb158d3ccb22b
Author: David Vrabel <dvrabel@cantab.net>
Date:   Fri Oct 7 14:43:22 2005 +0100

    [PATCH] yenta: fix build if YENTA && !CARDBUS
    
    (struct pcmcia_socket).tune_bridge only exists if CONFIG_CARDBUS is set
    but building yenta_socket without CardBus is valid.
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 788e05a67c343fa22f2ae1d3ca264e7f15c25eaf
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Fri Oct 7 17:46:19 2005 +0400

    [PATCH] fix do_coredump() vs SIGSTOP race
    
    Let's suppose we have 2 threads in thread group:
    	A - does coredump
    	B - has pending SIGSTOP
    
    thread A						thread B
    
    do_coredump:						get_signal_to_deliver:
    
      lock(->sighand)
      ->signal->flags = SIGNAL_GROUP_EXIT
      unlock(->sighand)
    
    							lock(->sighand)
    							signr = dequeue_signal()
    								->signal->flags |= SIGNAL_STOP_DEQUEUED
    								return SIGSTOP;
    
    							do_signal_stop:
    							    unlock(->sighand)
    
      coredump_wait:
    
          zap_threads:
              lock(tasklist_lock)
              send SIGKILL to B
                  // signal_wake_up() does nothing
              unlock(tasklist_lock)
    
    							    lock(tasklist_lock)
    							    lock(->sighand)
    							    re-check sig->flags & SIGNAL_STOP_DEQUEUED, yes
    							    set_current_state(TASK_STOPPED);
    							    finish_stop:
    							        schedule();
    							            // ->state == TASK_STOPPED
    
          wait_for_completion(&startup_done)
             // waits for complete() from B,
             // ->state == TASK_UNINTERRUPTIBLE
    
    We can't wake up 'B' in any way:
    
    	SIGCONT will be ignored because handle_stop_signal() sees
    	->signal->flags & SIGNAL_GROUP_EXIT.
    
    	sys_kill(SIGKILL)->__group_complete_signal() will choose
    	uninterruptible 'A', so it can't help.
    
    	sys_tkill(B, SIGKILL) will be ignored by specific_send_sig_info()
    	because B already has pending SIGKILL.
    
    This scenario is not possbile if 'A' does do_group_exit(), because
    it sets sig->flags = SIGNAL_GROUP_EXIT and delivers SIGKILL to
    subthreads atomically, holding both tasklist_lock and sighand->lock.
    That means that do_signal_stop() will notice !SIGNAL_STOP_DEQUEUED
    after re-locking ->sighand. And it is not possible to any other
    thread to re-add SIGNAL_STOP_DEQUEUED later, because dequeue_signal()
    can only return SIGKILL.
    
    I think it is better to change do_coredump() to do sigaddset(SIGKILL)
    and signal_wake_up() under sighand->lock, but this patch is much
    simpler.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f55cd105c38af4aa157804729d694f864fbc78a
Author: Jean-Denis Boyer <jdboyer@mediatrix.com>
Date:   Fri Oct 7 13:44:35 2005 -0700

    [ATM]: [br2684] if we free the skb, we should return 0
    
    From: "Jean-Denis Boyer" <jdboyer@mediatrix.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba6399334dd8a75bd295de26496196c720abae0a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Oct 7 13:30:49 2005 -0700

    [SPARC64]: Fix userland FPU state corruption.
    
    We need to use stricter memory barriers around the block
    load and store instructions we use to save and restore the
    FPU register file.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d85c3553df5e24cb3117385f0a17e1cc0436d148
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Fri Oct 7 13:05:56 2005 -0700

    [SPARC]: Fix p9100 framebuffer in 2.6
    
    The attached patch fixes the p9100 framebuffer so that text is viewable
    (not black on black, like it was before the patch). The linux logo
    displays for a very short period of time, then is replaced by a grey
    box. This leads me to believe that this framebuffer would have problems
    in X, but since there hasn't been a weitek driver for X in several
    millennia, this isn't something that I can confirm or deny.
    
    But this patch does get color console working on my SPARCbook 3TX.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a25f175c2f6962c38cdbacfc4b66b297f4fb54b2
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Oct 5 13:23:19 2005 +0200

    [ALSA] usb-audio: add MIDI quirk for Hercules DJ Console
    
    USB generic driver
    Add a quirk entry for the external MIDI ports of the
    Windows Edition of the Hercules DJ Console.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 9c9565f709f28c12dadfe74b31f2c86ffd75f71e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Oct 5 13:02:38 2005 +0200

    [ALSA] usb-audio: add another ID for Hercules DJ Console
    
    USB generic driver
    Add a mixer quirk entry for the Hercules DJ Console (Windows Edition)
    that uses a different USB product ID.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 4d060fd16946d767ee903804c6769a26d7da7ab2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Oct 4 13:50:44 2005 +0200

    [ALSA] ali5451 - Don't build non-existing modem PCM
    
    ALI5451 driver
    Don't build the modem PCM if the corresponding codec isn't detected.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b150869369adafb7cc0cf65ea500f9f3c4bbf857
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Oct 4 13:49:32 2005 +0200

    [ALSA] emu10k1 - Fix handling of ac97_chip=2
    
    EMU10K1/EMU10K2 driver
    Fixed the handling of ac97_chip=2 capability type.
    The error occurs in snd_ac97_mixer(), not in snd_ac97_bus().
    Also, release the unnecessary ac97_bus object in the error path.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 315e3bd717068624ce888f3d045a168acefc6ce8
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue Oct 4 08:42:10 2005 +0200

    [ALSA] korg1212: fix typo
    
    KORG1212 driver
    Add a missing comma that made the stateName array one entry too short.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f12aa40c9d76af5add413731d30565327219c41f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 30 16:56:59 2005 +0200

    [ALSA] emu10k1 - Fix loading of SBLive Game board
    
    EMU10K1/EMU10K2 driver
    Fixed the error at loading SBLive Game board (and possible other models).
    The PCI SSIDs of this board conflicts with SB Live 5.1 Platinum, which has
    no AC97 chip.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c66186e1c966e7e115a86af55597c05c5512014b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 29 13:49:44 2005 +0200

    [ALSA] via82xx - dxs_support entry for an ASUS mobo
    
    VIA82xx driver
    Addded a dxs_support entry for an ASUS mobo.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 35451088f445955fe460a38b25b97c263ff35033
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 29 13:25:14 2005 +0200

    [ALSA] Fix confliction of capture controls on ALC880 test model
    
    HDA Codec driver
    Fixed the confliction of capture controls on ALC880 'test' model.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 92447f3f1a1c1af418eb1dfee85a7685d9b9a3ef
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Sep 29 13:20:45 2005 +0200

    [ALSA] fix HD audio ALC882 lfe (un)mute
    
    HDA Codec driver
    Mark the ALC882 'LFE Playback Switch' as an input, like the other
    playback switch settings.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1c1fa8b69e6d538bcc1e58791938b31a2354ee65
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Sep 29 13:18:41 2005 +0200

    [ALSA] fix alc880_test_mixer typo
    
    HDA Codec driver
    Fix a typo (cut & paste) in the alc880_test_mixer structure.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a7175aab3f5cffe3c79575e56dfcfe87a41a74c7
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Sep 29 13:13:38 2005 +0200

    [ALSA] fix HD audio ALC260 mono (un)mute
    
    HDA Codec driver
    The ALC260 'Mono Playback Switch' is marked as an output in
    patch_realtek.c. It actually does not work unless it is marked as an
    input. Go figure... This was tested and confirmed on an HP xw4300.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d31cbbfd80a84696847913b7486a998481038663
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 26 09:59:57 2005 +0200

    [ALSA] usb-audio: increase max buffer size
    
    USB generic driver
    Increase the maximum PCM buffer size to 1 MB.  The USB driver doesn't
    have any inherent buffer size limit, and big multichannel interfaces
    may benefit from this.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 31ab9523ed3773d5de7c07b3b6c4c00ddb06045e
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 26 08:55:01 2005 +0200

    [ALSA] usb-audio: add another ID for the TerraTec PHASE26
    
    USB generic driver
    There is another revision of the PHASE26 with a different product ID;
    add a quirk entry for that, too.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f542fda8f8cd0cc0e4bffef42b27c7dc59cd07d3
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue Sep 20 09:06:36 2005 +0200

    [ALSA] usb-audio: add more Yamaha USB MIDI devices
    
    USB generic driver
    Add quirk entries for four unknown Yamaha USB MIDI devices.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 1e8bdcaf82268ac713cbbaffc14801147be42ae7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 19 15:21:17 2005 +0200

    [ALSA] Add iBook 1.33GHz support
    
    PPC PMAC driver
    Added the support of iBook 1.33GHz.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5a2a68f5a1dab785d60a4575f48af5b15ab6328d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 19 12:24:00 2005 +0200

    [ALSA] usb-audio: add Roland RD-700SX support
    
    USB generic driver
    Add a quirk entry for the Roland RD-700SX.
    This should work for the RD-300SX, too.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit db99055f8d8eb54d9da55293a11b82e9d53ca80d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 16 19:07:52 2005 +0200

    [ALSA] via82xx - Add a dxs whitelist entry
    
    VIA82xx driver
    Added a dxs whitelist entry for an ECS mobo.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 90b66e833261618e11d71a35f2488a7d664a4566
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Sep 16 18:50:53 2005 +0200

    [ALSA] clean suspend/resume calls for ac97_bus_type
    
    AC97 Codec
    A single call to the driver suspend/resume method for each device is
    enough. The level and SUSPEND_*/RESUME_* arguments are deprecated and
    said to be removed eventually anyway (no other subsystem are using them
    anymore except platform devices).
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 72e75de2df9a7116d0afbcd5810b2a8fd4bf7559
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Sep 16 18:49:22 2005 +0200

    [ALSA] remove redundent assignment to the ac97 device structure
    
    AC97 Codec
    Don't use dev.platform_data to store a reference to the containing
    ac97_t structure.  Such assignment is redundent since we can deduce the
    ac97_t structure location from the contained device structure.  This
    sets platform_data free for other purposes.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3a91e95969b84a56c7fef15ba25a5f6a17dd94b2
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Sep 16 18:46:36 2005 +0200

    [ALSA] remove bogus match method for ac97_bus
    
    AC97 Codec
    The bus_id is initialized with a generic identifier string which is not
    really useful for proper driver matching.  Let the driver decide what it
    needs via its probe method instead.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 460dc98afc6db255344a06c8da1196e2a2744758
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Sep 16 16:56:01 2005 +0200

    [ALSA] usb-audio: ignore Hercules DJ Console mixer errors
    
    USB generic driver
    Add a quirk entry for the Hercules DJ Console to ignore timeouts on
    some mixer control transfers.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 1dcee12591320d79e4fc5bcdc4aa8a2522b7afdb
Author: Dirk Opfer <Dirk@Opfer-Online.de>
Date:   Wed Sep 14 20:52:25 2005 +0200

    [ALSA] Fix pm_message_t in PXA2XX-AC97 driver
    
    ARM PXA2XX driver
    Fix pm_message_t in PXA2XX-AC97 driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e8dede5a136bd7ef36d1779ea173cfd504dff0cb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Sep 13 11:28:53 2005 +0200

    [ALSA] hda-intel - Disable DMA position auto-correction
    
    HDA Intel driver
    Disable the auto-correction of DMA position temporarily.
    It doesn't work as expected yet...
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 84802f0df3425ae0f9987af0d35ea19910479ec0
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Tue Sep 13 11:25:54 2005 +0200

    [ALSA] hda-codec - 'empty' generic mfg-only codec
    
    HDA generic driver
    This creates 'empty' hda generic for unknown MFG-only codecs.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 27bcaa693c866b9bccf94ee5b60eaf705e90c341
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Tue Sep 13 11:23:13 2005 +0200

    [ALSA] no templated index for si3036 modem controls
    
    AC97 Codec
    No index is templated for si3036 modem controls.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0444e2aca9ac89f571f0bb7781d12818719e4baf
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Tue Sep 13 11:21:30 2005 +0200

    [ALSA] no templated index for mc97 controls
    
    AC97 Codec
    No index is templated for mdoem controls.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 06f619ccb3319759c2acf91c7ca02b6b1d9ed343
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Mon Sep 12 11:47:04 2005 +0200

    [ALSA] snd_opl3sa2: add missing pnp_unregister_driver() calls
    
    OPL3SA2 driver
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0f21ba7cc3320d33459ecb3f538f1a42040c29cd
Author: Eric Kinzie <ekinzie@cmf.nrl.navy.mil>
Date:   Thu Oct 6 22:19:28 2005 -0700

    [ATM]: add support for LECS addresses learned from network
    
    From: Eric Kinzie <ekinzie@cmf.nrl.navy.mil>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb98129eec7fa605f0407dfd92d40ee8ddf5cd9a
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Thu Oct 6 22:14:59 2005 -0700

    [SPARC32]: Enable generic IOMAP.
    
    This helps some PCI stuff build.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 829841146878e082613a49581ae252c071057c23
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 21:54:21 2005 -0700

    Avoid 'names_cache' memory leak with CONFIG_AUDITSYSCALL
    
    The nameidata "last.name" is always allocated with "__getname()", and
    should always be free'd with "__putname()".
    
    Using "putname()" without the underscores will leak memory, because the
    allocation will have been hidden from the AUDITSYSCALL code.
    
    Arguably the real bug is that the AUDITSYSCALL code is really broken,
    but in the meantime this fixes the problem people see.
    
    Reported by Robert Derr, patch by Rick Lindsley.
    
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20c9c825b12fcb8526a29cf20a17a5a3fc581726
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Thu Oct 6 21:37:01 2005 -0700

    [SCTP] Fix SCTP socket options to work with 32-bit apps on 64-bit kernels.
    
    Adds alignment attribute to a few structures used with SCTP socket
    options so that the sizes and offsets remain the same when built using
    either 32 or 64 bit tools.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5fe467ee9787007dd9b263eb42dde3742deb743b
Author: Ivan Skytte Jorgensen <isj-sctp@i1.dk>
Date:   Thu Oct 6 21:36:17 2005 -0700

    [SCTP] Fix sctp_get{pl}addrs() API to work with 32-bit apps on 64-bit kernels.
    
    The old socket options are marked with a _OLD suffix so that the
    existing 32-bit apps on 32-bit kernels do not break.
    
    Signed-off-by: Ivan Skytte Jorgensen <isj-sctp@i1.dk>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2256c13b992b09f1f9563c26457aa048da2865df
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Oct 6 20:43:54 2005 -0700

    [SPARC64]: Probe for power device on ISA bus too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit edb4a3534adbaf90768d67da35f0bfeac4767db6
Merge: b954cbc... 76e677e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 15:37:09 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 76e677e25dd3d8af77d0b3810eacaacaf2f93f2f
Author: Bryan Sutula <Bryan.Sutula@hp.com>
Date:   Wed Oct 5 11:02:06 2005 -0600

    [IA64] Avoid kernel hang during CMC interrupt storm
    
    I've noticed a kernel hang during a storm of CMC interrupts, which was
    tracked down to the continual execution of the interrupt handler.
    
    There's code in the CMC handler that's supposed to disable CMC
    interrupts and switch to polling mode when it sees a bunch of CMCs.
    Because disabling CMCs across all CPUs isn't safe in interrupt context,
    the disable is done with a schedule_work().  But with continual CMC
    interrupts, the schedule_work() never gets executed.
    
    The following patch immediately disables CMC interrupts for the current
    CPU.  This then allows (at least) one CPU to ignore CMC interrupts,
    execute the schedule_work() code, and disable CMC interrupts on the rest
    of the CPUs.
    
    Acked-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Bryan Sutula <Bryan.Sutula@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b954cbcb1a121ad23892a006af5a9616d5265512
Merge: 5cd9a60... a448a28...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 15:01:11 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-ucb

commit 5cd9a60cc63f2308cab457ea847a06f044362792
Merge: 9aec247... e03eb52...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 15:00:53 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 9aec247d3b213f3c29cfba921cf11deb1ed513cd
Merge: dce32c7... 3a867b3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 14:16:19 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit dce32c781b1c026863a254fe8123dd78c59ad984
Merge: c075814... 9ad98c5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Oct 6 14:16:07 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit a448a28589a6640736b8af1f2f57616c10bb37d5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Oct 6 13:09:42 2005 +0100

    [MFD] Fix gcc4 build errors in ucb1x00-core.c
    
    drivers/mfd/ucb1x00-core.c:555: error: static declaration of 'ucb1x00_class' follows non-static declaration
    drivers/mfd/ucb1x00.h:109: error: previous declaration of 'ucb1x00_class' was here
    
    Since ucb1x00_class isn't used by anything, remove the extern
    declaration and the symbol export.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9ad98c5b4461e7dfa3754963200993a68825eab4
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Oct 5 15:12:00 2005 -0700

    [SPARC64]: Fix initrd when net booting.
    
    By allocating early memory for the firmware page tables, we
    can write over the beginning of the initrd image.
    
    So what we do now is:
    
    1) Read in firmware translations table while still on the
       firmware's trap table.
    2) Switch to Linux trap table.
    3) Init bootmem.
    4) Build firmware page tables using __alloc_bootmem().
    
    And this keeps the initrd from being clobbered.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e03eb5272b670e5002463c95fdc023410ba18484
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Oct 5 23:06:36 2005 +0100

    [ARM] 2954/1: Allow D and I cache and branch prediction disabling for ARMv6
    
    Patch from Catalin Marinas
    
    There is no reason to not allow these config options. They are useful when
    the hardware has problems.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 782c3fd470abddf2525e34cf3131215a8f95e834
Author: Martin Habets <errandir_news@mph.eclipse.co.uk>
Date:   Wed Oct 5 12:21:36 2005 -0700

    [SPARC]: Remove some duplicated sparc32 config items
    
    Remove some duplicated items due to the inclusion of the general
    drivers/Kconfig file. These are now taken from drivers/char/Kconfig,
    and can be turned off there as well (which is desirable sometimes).
    
    Signed-off-by: Martin Habets <errandir_news@mph.eclipse.co.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a867b36c3234673e61f883ebc11ad18f80a176f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Oct 5 12:16:04 2005 -0700

    [AX.25]: Fix packet socket crash
    
    Since changeset 98a82febb6340466824c3a453738d4fbd05db81a AX.25 is passing
    received IP and ARP packets to the stack through netif_rx() but we don't
    set the skb->mac.raw to right value which may result in a crash with
    applications that use a packet socket.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77d8d7a6848c81084f413e1ec4982123a56e2ccb
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Oct 5 12:15:12 2005 -0700

    [IPSEC]: Document that policy direction is derived from the index.
    
    Here is a patch that adds a helper called xfrm_policy_id2dir to
    document the fact that the policy direction can be and is derived
    from the index.
    
    This is based on a patch by YOSHIFUJI Hideaki and 210313105@suda.edu.cn.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 140e26fcd559f6988e5a9056385eecade19d9b49
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed Oct 5 12:11:41 2005 -0700

    [IPV6]: Fix NS handing for proxy/anycast address
    
    Timer set up by pneigh_enqueue() ended up calling ndisc_rcv()
    via pndisc_redo(), which clears LOCALLY_ENQUEUED flag in
    NEIGH_CB(skb) and NS was queued again.
    Let's call ndisc_recv_ns() directly to avoid the loop.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 42a39450f830c57432fd4e5644fa81f41ce7156d
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Oct 5 12:09:31 2005 -0700

    [TCP]: BIC coding bug in Linux 2.6.13
    
    Missing parenthesis in causes BIC to be slow in increasing congestion
    window.
    
    Spotted by Injong Rhee.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fab10fe37ad8dc4388fc444c89ef5aefe906354f
Author: Yan Zheng <yanzheng@21cn.com>
Date:   Wed Oct 5 12:08:13 2005 -0700

    [MCAST] ipv6: Fix address size in grec_size
    
    Signed-Off-By: Yan Zheng <yanzheng@21cn.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Acked-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0758146adbe39514e75ac860ce7e49f865c2297
Author: Dave Jones <davej@redhat.com>
Date:   Mon Oct 3 15:02:20 2005 -0400

    [PATCH] Fix drm 'debug' sysfs permissions
    
    Just enables some extra printk's, but still..  Only the sysadmin should
    be able to do that.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23cb8c297eb939b25e5a628dc9e8a71b17f1c44e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Oct 5 17:43:40 2005 +1000

    [PATCH] ppc: Fix timekeeping with HZ=250 on some Mac models
    
    Older Macs which uses the VIA chip timers to calibrate the timebase used
    some code that wouldn't work if HZ wasn't divisible by 100...
    
    This fixes it at least for 250.  Not totally perfect but should be
    enough for now (so it at least works with the default value which is now
    250).
    
    There is still a potential issue with the core using CLOCK_TICK_RATE to
    maintain xtime and CLOCK_TICK_RATE value on ppc32 is pure crap, but that
    is a different problem, this patch at least brings us back to our
    previous situation.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 329d4dd72e5c3393a0c7aeebf3e62df77b196d71
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Oct 5 08:36:02 2005 +0100

    [PATCH] fix the breakage in sparc headers
    
    If we switch extern inline to static inline, we'd better switch the
    pre-declarations we use to say that these puppies have
    __attribute_const__ on them.
    
    Otherwise we get extern declaration followed by static inline one.
    Which makes gcc unhappy, and for a good reason...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83fa3400ebcba307a60909824a251be984eb9567
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:45:35 2005 -0700

    [XFRM]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in xfrm code:
    net/xfrm/xfrm_policy.c:232:47: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d2aef668920e8d93b77f145f8f647f62abe75db
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:45:14 2005 -0700

    [TEXTSEARCH]: fix sparse gfp nocast warnings
    
    Fix nocast sparse warnings:
    include/linux/textsearch.h:165:57: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd13a285b79ba77416b96ee10f49097f4aaf48c5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:44:45 2005 -0700

    [RPC]: fix sparse gfp nocast warnings
    
    Fix nocast sparse warnings:
    net/rxrpc/call.c:2013:25: warning: implicit cast to nocast type
    net/rxrpc/connection.c:538:46: warning: implicit cast to nocast type
    net/sunrpc/sched.c:730:36: warning: implicit cast to nocast type
    net/sunrpc/sched.c:734:56: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00fa02334540ec795934737cd6e6ef8db2560731
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:43:04 2005 -0700

    [AF_KEY]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in net/key code:
    net/key/af_key.c:195:27: warning: implicit cast to nocast type
    net/key/af_key.c:1439:28: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6f4fafccfa66f0530587ac3c11bb8fd0b8fe8ab
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:42:42 2005 -0700

    [NETFILTER]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in nfnetlink code:
    net/netfilter/nfnetlink.c:204:43: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8eea00a44d9f493869f8d30b72e3ed18475be556
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:42:15 2005 -0700

    [IPVS]: fix sparse gfp nocast warnings
    
    From: Randy Dunlap <rdunlap@xenotime.net>
    
    Fix implicit nocast warnings in ip_vs code:
    net/ipv4/ipvs/ip_vs_app.c:631:54: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4a19a56e38442e434b8809915d756469f1e89a2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:41:48 2005 -0700

    [DECNET]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in decnet code:
    net/decnet/af_decnet.c:458:40: warning: implicit cast to nocast type
    net/decnet/dn_nsp_out.c:125:35: warning: implicit cast to nocast type
    net/decnet/dn_nsp_out.c:219:29: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 17b698856328a42d5874ac87640e2cd84a824eef
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:41:16 2005 -0700

    [CONNECTOR]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in connector code:
    drivers/connector/connector.c:102:24: warning: implicit cast to nocast type
    drivers/connector/connector.c:114:45: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit de54f3907d2f5d8e25cfafe513811f146b250dee
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:39:41 2005 -0700

    [BONDING]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in bonding code:
    drivers/net/bonding/bond_main.c:1302:49: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b5b3f3d826ea87c224c66de9c95c09e7f110ecd
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 22:38:44 2005 -0700

    [ATM]: fix sparse gfp nocast warnings
    
    Fix implicit nocast warnings in atm code:
    net/atm/atm_misc.c:35:44: warning: implicit cast to nocast type
    drivers/atm/fore200e.c:183:33: warning: implicit cast to nocast type
    
    Also use kzalloc() instead of kmalloc().
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9bc39bec87ee3e35897fe27441e979e7c208f624
Author: Pavel Roskin <proski@gnu.org>
Date:   Tue Oct 4 21:33:10 2005 -0400

    [PATCH] orinoco: Information leakage due to incorrect padding
    
    The orinoco driver can send uninitialized data exposing random pieces of
    the system memory.  This happens because data is not padded with zeroes
    when its length needs to be increased.
    
    Reported by Meder Kydyraliev <meder@o0o.nu>
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bb77c03cf40fec911c4ce9610b8207bf0050a5fd
Merge: ce12467... aba7a22...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 4 16:55:43 2005 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit ce12467d44d7394731ec9e91e032d50b04e502f6
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Tue Oct 4 16:32:38 2005 -0700

    [PATCH] Fix broken IXP4xx GPIO macro
    
    Macro ended up backwards during one of cleanups. Found by Alessandro Zummo.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5181ab06ddca8071b4eb54ac2c314f7d24825d4
Author: Horst H. von Brand <vonbrand@inf.utfsm.cl>
Date:   Tue Oct 4 15:58:56 2005 -0700

    [NETFILTER]: Fix Kconfig typo
    
    Signed-off-by: Horst H. von Brand <vonbrand@inf.utfsm.cl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 50165d8b1d915422343079f79a878a0f7572feaa
Merge: 944d264... c2f4808...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 4 15:57:53 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 944d2647dded12e2b05ad8ebc020644bb1997ce1
Author: Andi Kleen <ak@suse.de>
Date:   Wed Oct 5 00:21:39 2005 +0200

    [PATCH] x86_64: Drop global bit from early low mappings
    
    Drop global bit from early low mappings
    
    Suggested by Linus, originally also proposed by Suresh.
    
    This fixes a race condition with early start of udev, originally
    tracked down by Suresh B. Siddha. The problem was that switching
    to the user space VM would not clear the global low mappings
    for the beginning of memory, which lead to memory corruption.
    
    Drop the global bits.
    
    The kernel mapping stays global because it should stay constant.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d2553612fa329979e6423a5f2410fd7be5aa902
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Oct 4 15:55:51 2005 -0700

    [INET]: Shrink struct inet_ehash_bucket on 32 bits UP
    
    No need to align struct inet_ehash_bucket on a 8 bytes boundary.
    
    On 32 bits Uniprocessor, that's a waste of 4 bytes per struct (50 %)
    
    On other platforms, the attribute is useless, natual alignement is already 8.
    
    platform     | Size before | Size after patch
    -------------+-------------+------------------
    32 bits, UP  |         8   |     4
    32 bits, SMP |         8   |     8
    64 bits, UP  |         8   |     8
    64 bits, SMP |        16   |    16
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0835ae0f27c0bfde67613d189ef6c537e004a6de
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Oct 4 15:23:20 2005 -0700

    [SPARC64]: Replace cheetah+ code patching with variables.
    
    Instead of code patching to handle the page size fields in
    the context registers, just use variables from which we get
    the proper values.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2f480869fa7559fa3532e415e3e3ec49339f208
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Oct 4 23:17:53 2005 +0100

    [ARM] 2952/1: fix a register clobber list
    
    Patch from Nicolas Pitre
    
    If gcc decides to assign lr to %0 we're screwed.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 74f8849496b73d2ae4f9c53f61bf59e063ceed88
Author: Nicolas Pitre <nico@cam.org>
Date:   Tue Oct 4 23:17:52 2005 +0100

    [ARM] 2951/1: fix wrong comment
    
    Patch from Nicolas Pitre
    
    The cmpxchg emulation syscall needs write access.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0a5b0aa8a331f4346b4b02bc653107304a6abdc5
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Tue Oct 4 23:17:52 2005 +0100

    [ARM] 2950/1: i.MX gpio setup function
    
    Patch from Sascha Hauer
    
    Current implementation of imx_gpio_mode does not allow to
    configure all alternate routing possibilities of the i.MX. With
    this patch every bit in the gpio setup registers has a
    corresponding bit in the gpio_mode parameter, so every routing
    should be possible now.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d78795b6930956fb66238d4d26242482d4a31470
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Tue Oct 4 23:17:51 2005 +0100

    [ARM] 2949/1: Hynix h720x Run mode
    
    Patch from Sascha Hauer
    
    After coming out of idle mode the h720x goes into slow mode. Switch
    it back to run mode.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f6e63cfb5cfcccca510672155b90dd39bf45a35f
Merge: fad1c45... e6308be...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 4 13:55:22 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit fad1c45c939bb246a488be1fa06f539e85b80545
Author: Allan Graves <allan.graves@oracle.com>
Date:   Tue Oct 4 14:53:52 2005 -0400

    [PATCH] uml: Fix sysrq-r support for skas mode
    
    The old code had the IP and SP coming from the registers in the thread
    struct, which are completely wrong since those are the userspace
    registers.  This fixes that by pulling the correct values from the
    jmp_buf in which the kernel state of each thread is stored.
    
    Signed-off-by: Allan Graves <allan.graves@oracle.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71dc036247573e377703233af289019f4aa3176e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue Oct 4 14:53:49 2005 -0400

    [PATCH] UML - Fix Al's build tidying
    
    Al's build tidying missed one bit from me - without this UML doesn't boot.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2b513dfbb04d7c94cca145172cfeb91f7683e54
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Oct 4 17:48:44 2005 +0100

    [PATCH] bfs iget() abuses
    
    bfs_fill_super() walks the inode table to get the bitmap of free inodes
    and collect stats.  It has no business using iget() for that - it's a
    lot of extra work, extra icache pollution and more complex code.
    Switched to walking the damn thing directly.
    
    Note: that also allows to kill ->i_dsk_ino in there - separate patch if
    Tigran can confirm that this field can be zero only for deleted inodes
    (i.e.  something that could only be found during that scan and not by
    normal lookups).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce0fe7e70a0ad11097a3773e9f3f0de3d859edf0
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Oct 4 17:43:06 2005 +0100

    [PATCH] bfs endianness annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25e2d79f527b7abce624f30516f3167195b69a2e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Oct 4 17:40:44 2005 +0100

    [PATCH] bogus kfree() in ibmtr
    
    On several failure exits in ibmtr we end up doing kfree() on dev->priv,
    with dev allocated by alloc_trdev() and ->priv never reassigned.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 433992361ce95a1da76b76c9c24d4c957b058aff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Oct 4 17:36:04 2005 +0100

    [PATCH] missing include in megaraid_sas
    
    megaraid_sas depends on arch-specific indirect includes pulling
    fs.h in; on alpha they do not.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6308be85afee685347fa3440bed10faaa5d6c1a
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Tue Oct 4 13:01:58 2005 -0700

    [IPV4]: fib_trie root-node expansion
    
    The patch below introduces special thresholds to keep root node in the trie
    large. This gives a flatter tree at the cost of a modest memory increase.
    Overall it seems to be gain and this was also proposed by one the authors
    of the paper in recent a seminar.
    
    Main table after loading 123 k routes.
    
    	Aver depth:     3.30
    	Max depth:      9
            Root-node size  12 bits
            Total size: 4044  kB
    
    With the patch:
    	Aver depth:     2.78
    	Max depth:      8
            Root-node size  15 bits
            Total size: 4150  kB
    
    An increase of 8-10% was seen in forwading performance for an rDoS attack.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87bf9c97b4b3af8dec7b2b79cdfe7bfc0a0a03b2
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Oct 4 13:00:39 2005 -0700

    [IPV6]: Fix infinite loop in udp_v6_get_port().
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96f339c6b95344942fe5fce012ff4f2a3b2cb80d
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Wed Sep 28 17:05:19 2005 -0500

    [IA64] mbcs_init() should give up unless running on sn2
    
    CONFIG_SGI_MBCS is enabled in generic kernels, but the driver may
    oops some other platforms.  Check whether we are running on sn2
    and bail out if we are not before doing anything dangerous.
    
    Acked-by: Bruce Losure <blosure@americas.sgi.com>
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit dd7205ed0f022a2a5e60eb7404e6c9f49d2301c3
Merge: 43d0b13... c394e45...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 4 09:34:00 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit 43d0b1376dc7abc29411fa31f50fe7cfb68afcd3
Merge: 832f8f0... fdc657c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Oct 4 08:11:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit c394e458b69632902d65f9e2f39df79314f72908
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Oct 4 13:08:53 2005 +0100

    NTFS: Fix a 64-bitness bug where a left-shift could overflow a 32-bit variable
          which we now cast to 64-bit first (fs/ntfs/mft.c::map_mft_record_page().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 18efefa9355119b4f6d9b73b074ebbf9882c37c3
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Oct 4 13:06:00 2005 +0100

    NTFS: Fix a stupid bug in __ntfs_bitmap_set_bits_in_run() which caused the
          count to become negative and hence we had a wild memset() scribbling
          all over the system's ram.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 832f8f0378ff1566f2a222352c7ad5df3f8d0d9d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Oct 4 00:41:22 2005 -0700

    [PATCH] sungem: fix gfp flags type
    
    Fix nocast sparse warnings in sungen:
    drivers/net/sungem.h:1040:45: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 81c58732277654a51bb52832e1bc74234bb977bc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Oct 3 21:24:36 2005 -0700

    [PATCH] ns83820: fix gfp flags type
    
    Fix implicit nocast warnings in ns83820 code, including __nocast:
    drivers/net/ns83820.c:603:46: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f36a29d5672c7698ffe55c7c05107ae77fa698cc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Oct 3 21:24:45 2005 -0700

    [PATCH] ieee80211: fix gfp flags type
    
    Fix implicit nocast warnings in ieee80211 code, including __nocast:
    net/ieee80211/ieee80211_tx.c:215:9: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 67974231d4354fe26aaa39a3153b5c0945b94858
Author: Ion Badulescu <ionut@badula.org>
Date:   Mon Oct 3 22:31:36 2005 -0400

    [netdrvr starfire] fix highmem and broken firmware issues
    
    Unfortunately, [your patch] might address the crash but doesn't address
    the real problem. It turns out that the problem is one of padding
    (the firmware cksum engine works only on 32-bit chunks, yuck), so
    the special casing for length == 1 wasn't sufficient anyway.
    
    This patch addresses the issue, as well the other issue of i386 +
    CONFIG_HIGHMEM being broken. It is pretty much the same workaround
    that Adaptec themselves used in their Windows driver. I have yet to
    check if it fixes the problem when the skb is non-linear, but this
    patch _will_ solve the problem for 99% of the users out there (those
    not using sendfile).
    
    Signed-off-by: Ion Badulescu <ionut@badula.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 32fa2bfcf882f8901ca206e33b0d8975cc8e89a2
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Sat Sep 10 00:14:05 2005 +1000

    [PATCH] net/Kconfig: convert pocket_adapter ISA to PARPORT
    
    This patch changes pocket and parallel adaptors to depend on PARPORT
    instead of ISA in order to get the option in newer SuperIO based systems.
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 49a9db07abd4ac89693dbd4dcd92fcd1f30ece00
Author: Wade Farnsworth <wfarnsworth@mvista.com>
Date:   Mon Oct 3 22:21:33 2005 -0400

    [PATCH] emac: add support for platform-specific unsupported PHY features
    
    This patch adds support to the ibm_emac driver for platform-specific
    unsupported PHY features.
    
    The patch attempts to determine the highest speed and duplex when
    autonegotiation is unsupported.
    
    Signed-off-by: Wade Farnsworth <wfarnsworth@mvista.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 32b5bfab9a09b19ea9a7d902b249ebf311fd2999
Author: Philippe De Muyter <phdm@macqel.be>
Date:   Thu Sep 22 11:09:44 2005 +0200

    [PATCH] tulip DC21143 rev 48 10Mbit HDX fix
    
    The patch below is necessary to allow my Digital DS21143 Tulip rev 48
    ethernet interface to work in a 10Mbit Half Duplex network.  Without
    it, the driver keeps retrying other modes in an endless loop.  It seems
    like someone already had the same problem with a rev 65 board :)
    
    Signed-off-by: Philippe De Muyter <phdm@macqel.be>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 217df670d9a4da036d68b22500ac06128811d5c8
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Mon Sep 26 16:11:50 2005 -0700

    [PATCH] fix bonding crash, remove old ABI support
    
    David S. Miller <davem@davemloft.net> wrote:
    >I think removing support for older ifenslave binaries is
    >the least painful solution to this problem.
    
    	This patch removes backwards compatibility for old ifenslave
    binaries (ifenslave prior to verison 1.0.0).
    
    	I did not similarly modify ifenslave itself; with sysfs on the
    horizon, I don't see that as being worthwhile.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9123e0d78990246304fe681167b8d8097f1e02d7
Author: Ursula Braun <braunu@de.ibm.com>
Date:   Fri Sep 30 10:17:24 2005 +0200

    [PATCH] s390: qeth driver fixes
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
    From: Frank Pavlic <pavlic@de.ibm.com>
    	minor qeth fixes:
    	- free old skb in qeth_realloc_headroom after duplicating skb
    	- disable IPV6 support for Hipersockets devices
    	- call ccw_device_set_offline on every channel regardless
    	  of the return value of the prior ccw_device_set_offline calls
    	- allocate qdio structures in DMA-area
    	- schedule recovery of appropriate card
    	  when cable has been inserted again.
    	- add missing initialization of card->lock
    	- write sequence number in skb->cb for SNA protocol which
    	  requires strictly serialized packets.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    
    diffstat:
     qeth.h      |    2 ++
     qeth_main.c |   37 +++++++++++++++++--------------------
     2 files changed, 19 insertions(+), 20 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bb53d6d0e70cd0749a7844efc62cefeb24b134b6
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Mon Oct 3 22:03:28 2005 -0400

    [netdrvr] fix smc91c92_cs multicast bug
    
    The smc91c92_cs multicast does not work
    if the count of multicast address is 1.
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8cb6108baee9dcd1dc96f476fe217d6a6b53c994
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Oct 2 22:41:09 2005 -0700

    [PATCH] ieee80211: fix gfp flags type
    
    Fix implicit nocast warnings in ieee80211 code:
    net/ieee80211/ieee80211_tx.c:215:9: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0a1c80f1115b9a1aacf00a312a532ceef49dfa1b
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Oct 2 22:42:11 2005 -0700

    [PATCH] ns83820: fix gfp flags type
    
    Fix implicit nocast warnings in ns83820 code:
    drivers/net/ns83820.c:603:46: warning: implicit cast to nocast type
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c2681dd8c71c8fb4ca530f94536550fcd843aae4
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Oct 3 12:03:13 2005 -0700

    [PATCH] skge: set mac address oops with bonding
    
    Skge driver was bringing link up/down when changing mac
    address.  This doesn't work in the bonding environment, and is
    more effort than needed.
    
    Fixes-bug: http://bugzilla.kernel.org/show_bug.cgi?id=5271
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fdc657c66678551c7987dc23a78ae1a26251276f
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Oct 3 17:37:27 2005 -0700

    [SUNSU]: Fix bogus locking in sunsu_change_mouse_baud()
    
    The lock is not held when calling this function, so we
    shouldn't drop then reacquire it.
    
    Based upon a report from Jim MacBaine.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3115624eda34d0f4e673fc6bcea36b7ad701ee33
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Oct 3 17:37:02 2005 -0700

    [SPARC]: "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed39f731ab2e77e58122232f6e27333331d7793d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Oct 3 16:25:23 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ce312467edc270fcbd8a699efabb37ce1802b98
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Oct 3 16:07:30 2005 -0700

    [IPV4]: Update icmp sysctl docs and disable broadcast ECHO/TIMESTAMP by default
    
    It's not a good idea to be smurf'able by default.
    The few people who need this can turn it on.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e56a40bb36f1f73b4eac2ffe267c5357811e321
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 3 14:36:32 2005 -0700

    [IPV4]: Get rid of bogus __in_put_dev in pktgen
    
    This patch gets rid of a bogus __in_dev_put() in pktgen.c.  This was
    spotted by Suzanne Wood.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e5ed639913eea3e4783a550291775ab78dd84966
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 3 14:35:55 2005 -0700

    [IPV4]: Replace __in_dev_get with __in_dev_get_rcu/rtnl
    
    The following patch renames __in_dev_get() to __in_dev_get_rtnl() and
    introduces __in_dev_get_rcu() to cover the second case.
    
    1) RCU with refcnt should use in_dev_get().
    2) RCU without refcnt should use __in_dev_get_rcu().
    3) All others must hold RTNL and use __in_dev_get_rtnl().
    
    There is one exception in net/ipv4/route.c which is in fact a pre-existing
    race condition.  I've marked it as such so that we remember to fix it.
    
    This patch is based on suggestions and prior work by Suzanne Wood and
    Paul McKenney.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a5e7c210fefd2454c757a3542e41063407ca7108
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Oct 3 14:21:58 2005 -0700

    [IPV6]: Fix leak added by udp connect dst caching fix.
    
    Based upon a patch from Mitsuru KANDA <mk@linux-ipv6.org>
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f36d6ab182a5c68e92ea3e85821dde9d29bfe284
Author: Yan Zheng <yanzheng@21cn.com>
Date:   Mon Oct 3 14:19:15 2005 -0700

    [IPV6]: Fix ipv6 fragment ID selection at slow path
    
    Signed-Off-By: Yan Zheng <yanzheng@21cn.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 444fc8fc3a1f926fa224655b8950bd853368c1a3
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 3 14:18:10 2005 -0700

    [IPV4]: Fix "Proxy ARP seems broken"
    
    Meelis Roos <mroos@linux.ee> wrote:
    > RK> My firewall setup relies on proxyarp working.  However, with 2.6.14-rc3,
    > RK> it appears to be completely broken.  The firewall is 212.18.232.186,
    >
    > Same here with some kernel between 14-rc2 and 14-rc3 - no reposnse to
    > ARP on a proxyarp gateway. Sorry, no exact revison and no more debugging
    > yet since it'a a production gateway.
    
    The breakage is caused by the change to use the CB area for flagging
    whether a packet has been queued due to proxy_delay.  This area gets
    cleared every time arp_rcv gets called.  Unfortunately packets delayed
    due to proxy_delay also go through arp_rcv when they are reprocessed.
    
    In fact, I can't think of a reason why delayed proxy packets should go
    through netfilter again at all.  So the easiest solution is to bypass
    that and go straight to arp_process.
    
    This is essentially what would've happened before netfilter support
    was added to ARP.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 496a22b08fa326bf17c11eb900e0505aa9da3506
Author: Russell King <rmk+kernel@arm.linux.org.uk>
Date:   Mon Oct 3 14:16:34 2005 -0700

    [NET]: Fix "sysctl_net.c:36: error: 'core_table' undeclared here"
    
    During the build for ARM machine type "fortunet", this error occurred:
    
      CC      net/sysctl_net.o
    net/sysctl_net.c:36: error: 'core_table' undeclared here (not in a function)
    
    It appears that the following configuration settings cause this error
    due to a missing include:
    CONFIG_SYSCTL=y
    CONFIG_NET=y
    # CONFIG_INET is not set
    
    core_table appears to be declared in net/sock.h.  if CONFIG_INET were
    defined, net/sock.h would have been included via:
      sysctl_net.c -> net/ip.h -> linux/ip.h -> net/sock.h
    
    so include it directly.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81c3d5470ecc70564eb9209946730fe2be93ad06
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Mon Oct 3 14:13:38 2005 -0700

    [INET]: speedup inet (tcp/dccp) lookups
    
    Arnaldo and I agreed it could be applied now, because I have other
    pending patches depending on this one (Thank you Arnaldo)
    
    (The other important patch moves skc_refcnt in a separate cache line,
    so that the SMP/NUMA performance doesnt suffer from cache line ping pongs)
    
    1) First some performance data :
    --------------------------------
    
    tcp_v4_rcv() wastes a *lot* of time in __inet_lookup_established()
    
    The most time critical code is :
    
    sk_for_each(sk, node, &head->chain) {
         if (INET_MATCH(sk, acookie, saddr, daddr, ports, dif))
             goto hit; /* You sunk my battleship! */
    }
    
    The sk_for_each() does use prefetch() hints but only the begining of
    "struct sock" is prefetched.
    
    As INET_MATCH first comparison uses inet_sk(__sk)->daddr, wich is far
    away from the begining of "struct sock", it has to bring into CPU
    cache cold cache line. Each iteration has to use at least 2 cache
    lines.
    
    This can be problematic if some chains are very long.
    
    2) The goal
    -----------
    
    The idea I had is to change things so that INET_MATCH() may return
    FALSE in 99% of cases only using the data already in the CPU cache,
    using one cache line per iteration.
    
    3) Description of the patch
    ---------------------------
    
    Adds a new 'unsigned int skc_hash' field in 'struct sock_common',
    filling a 32 bits hole on 64 bits platform.
    
    struct sock_common {
    	unsigned short		skc_family;
    	volatile unsigned char	skc_state;
    	unsigned char		skc_reuse;
    	int			skc_bound_dev_if;
    	struct hlist_node	skc_node;
    	struct hlist_node	skc_bind_node;
    	atomic_t		skc_refcnt;
    +	unsigned int		skc_hash;
    	struct proto		*skc_prot;
    };
    
    Store in this 32 bits field the full hash, not masked by (ehash_size -
    1) Using this full hash as the first comparison done in INET_MATCH
    permits us immediatly skip the element without touching a second cache
    line in case of a miss.
    
    Suppress the sk_hashent/tw_hashent fields since skc_hash (aliased to
    sk_hash and tw_hash) already contains the slot number if we mask with
    (ehash_size - 1)
    
    File include/net/inet_hashtables.h
    
    64 bits platforms :
    #define INET_MATCH(__sk, __hash, __cookie, __saddr, __daddr, __ports, __dif)\
         (((__sk)->sk_hash == (__hash))
         ((*((__u64 *)&(inet_sk(__sk)->daddr)))== (__cookie))   &&  \
         ((*((__u32 *)&(inet_sk(__sk)->dport))) == (__ports))   &&  \
         (!((__sk)->sk_bound_dev_if) || ((__sk)->sk_bound_dev_if == (__dif))))
    
    32bits platforms:
    #define TCP_IPV4_MATCH(__sk, __hash, __cookie, __saddr, __daddr, __ports, __dif)\
         (((__sk)->sk_hash == (__hash))                 &&  \
         (inet_sk(__sk)->daddr          == (__saddr))   &&  \
         (inet_sk(__sk)->rcv_saddr      == (__daddr))   &&  \
         (!((__sk)->sk_bound_dev_if) || ((__sk)->sk_bound_dev_if == (__dif))))
    
    
    - Adds a prefetch(head->chain.first) in
    __inet_lookup_established()/__tcp_v4_check_established() and
    __inet6_lookup_established()/__tcp_v6_check_established() and
    __dccp_v4_check_established() to bring into cache the first element of the
    list, before the {read|write}_lock(&head->lock);
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Acked-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 399de50bbbb2501a6db43daaa8a2dafbc9bcfe0c
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Oct 3 14:02:39 2005 -0700

    [TG3]: Refine AMD K8 write-reorder chipset test.
    
    Test for VIA K8T800 north bridge instead of AMD K8 HyperTransport
    bridge based on new information from Andi Kleen. The AMD
    HyperTransport interface is not responsible for PCI transactions
    and so the re-ordering is more likely done by the VIA north bridge.
    This code is subject to change if we get more information from AMD
    or VIA.
    
    PCI Express devices are excluded from doing the read flush since all
    chipsets in the write_reorder list are PCI chipsets.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a232f76732e11c91c2215d3a43cf9ebc7f939939
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Oct 3 14:01:37 2005 -0700

    [CASSINI]: Convert to ethtool_ops
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 325ed8239309cb29f10ea58c5a668058ead11479
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Oct 3 13:57:23 2005 -0700

    [NET]: Fix packet timestamping.
    
    I've found the problem in general.  It affects any 64-bit
    architecture.  The problem occurs when you change the system time.
    
    Suppose that when you boot your system clock is forward by a day.
    This gets recorded down in skb_tv_base.  You then wind the clock back
    by a day.  From that point onwards the offset will be negative which
    essentially overflows the 32-bit variables they're stored in.
    
    In fact, why don't we just store the real time stamp in those 32-bit
    variables? After all, we're not going to overflow for quite a while
    yet.
    
    When we do overflow, we'll need a better solution of course.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ddea7be0ec8d1374f0b483a81566ed56ec9f3905
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Mon Oct 3 10:36:28 2005 -0700

    [PATCH] x86_64: Fix numa node topology detection for srat based x86_64 boxes
    
    2.6.14-rc2 does not assign cpus to proper nodeids on our em64t numa boxen.
    Our boxes use acpi srat for parsing the numa information.
    
    srat_detect_node() used phys_proc_id[] to get to the cpu's local apic id,
    but phys_proc_id[] represents the cpu<->initial_apic_id mapping.  The
    following patch fixes this problem.  Now apicid_to_node[] is properly
    indexed with the local apic id.
    
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Acked-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d6322b4659216fff76619d3b4088eecbdfa46d5
Merge: d6b9acc... 51c928c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Oct 3 08:07:10 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit d6b9acc0c6c4a7c5d484d15271a5274656d0864f
Author: Paul Jackson <pj@sgi.com>
Date:   Mon Oct 3 00:29:10 2005 -0700

    [PATCH] Document patch subject line better
    
    Improve explanation of the Subject line fields in
    Documentation/SubmittingPatches Canonical Patch Format.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51c928c34fa7cff38df584ad01de988805877dba
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Oct 1 09:38:05 2005 -0500

    [SCSI] Legacy MegaRAID: Fix READ CAPACITY
    
    Some Legacy megaraid cards can't actually cope with the scatter/gather
    version of the READ CAPACITY command (which is what we now send them
    since altering all SCSI internal I/O to go via the block layer).  Fix
    this (and a few other broken megaraid driver assumptions) by sending
    the non-sg version of the command if the sg list only has a single
    element.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c77054e518d9163578cfcad09826d7b959f95ece
Merge: 75f8426... 2c3a054...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Oct 2 18:28:32 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 75f8426c17bc091260a6f7536ba10767596e15eb
Author: Paul Jackson <pj@sgi.com>
Date:   Sun Oct 2 18:01:42 2005 -0700

    [PATCH] Document from line in patch format
    
    Document more details of patch format such as the "from" line
    and the "---" marker line, and provide more references for
    patch guidelines.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c3a0540999ac9bd7147fb98833224a58cdaf217
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Sun Oct 2 22:34:35 2005 +0100

    [ARM] 2943/1: Clear the exclusive monitor in v6_early_abort
    
    Patch from Catalin Marinas
    
    Data abort caused by ldrex/strex can leave the exclusive monitor in an
    unpredictable state. It is recommended that a clrex/strex is performed to
    clear this state.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d70ddac1bf3a8b102996588010ca87018c3a4a04
Author: Richard Henderson <rth@twiddle.net>
Date:   Sun Oct 2 12:49:52 2005 -0700

    [PATCH] alpha: fix kernel alignment traps
    
    Pass in the pointer to the on-stack registers rather than using them
    directly as the arguments.
    
    Ivan noticed that I missed a spot when purging the registers as first
    stack parameter idiom.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97af50f60ff1202b0dd9ce481d4cf98c6a578bec
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Oct 2 15:22:35 2005 -0500

    [SCSI] aic7xxx/aic79xx: fix module removal path not to panic
    
    In these drivers, scsi_remove_host() is called too late, at the point
    it is called, the driver has already shut down too far to accept any
    I/O that the shutdown might generate.  Any generated I/O actually
    triggers a panic.
    
    Fix this by calling scsi_remove_host() as early as possible and not
    calling scsi_host_put() until just before we kfree the ahc_softc.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9e70592fcd87c90e9e98090d66cb79f39d740d4a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Oct 2 12:59:49 2005 -0500

    [SCSI] fix potential panic with proc on module removal
    
    There's a problem in our host release in that it calls
    scsi_proc_hostdir_rm(). However, if you hold a reference to the host as
    you remove the module, the host template (which proc uses) will be freed
    and the system will panic when the host device is finally released.
    
    Fix this by moving scsi_proc_hostdir_rm() to where it should be: in
    scsi_remove_host().
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 487fd4eb1445407c9760af08b0b34c3f4cdb4afc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Oct 2 18:12:03 2005 +0100

    [ARM] Fix init printk for EBSA110 network driver, and link timer
    
    Arrange for the initialisation printks to happen after we've
    registered the network interface, so we know what name the
    device is.  Also, check the link every 500ms (and use
    msecs_to_jiffies.)
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0e3a64e2162f971180bf1fdd91c263dbdfcfd385
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Oct 2 18:02:25 2005 +0100

    [ARM] Fix EBSA110 network driver link detection
    
    EBSA110 link detection didn't read the register - it wrote it.  Oops.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b620cc2cd80393b9a0f9a76806cb7f9e91671dac
Merge: 036bfdc... 31f919c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 1 17:02:13 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 036bfdcb0dfa39fc1ff5ded196b5fd92f1bb9ea8
Author: Sven Henkel <shenkel@gmail.com>
Date:   Sun Oct 2 08:30:33 2005 +1000

    [PATCH] ppc32: Add new iBook 12" to PowerMac models table
    
    This adds the new iBook G4 (manufactured after July 2005) to the
    PowerMac models table.  The model name (PowerBook6,7) is taken from a
    12" iBook, I don't know if it also matches the 14" version.  The patch
    applies to a vanilla 2.6.13.2 kernel.
    
    Signed-off-by: Sven Henkel <shenkel@gmail.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14bfd1ff94f519a59b1e88e682819332d7e98171
Author: Sven Henkel <shenkel@gmail.com>
Date:   Sun Oct 2 08:29:18 2005 +1000

    [PATCH] pmac/radeonfb: Add suspend support for M11 chip in new iBook 12"
    
    This adds suspend support for the Radeon M11 chip in 12" iBooks
    manufactured after July 2005.  I don't know if the new 14" iBooks also
    have that chip, so they might also be supported.
    
    The chip identifies itself as "RV350 NV" (pci id 0x4e56), revision 0x80.
    Apple calls it "Snowy", xfree86 names it "ATI FireGL Mobility T2 (M11)
    NV (AGP)".  So, we seem to be lucky here: The suspend-code for the M10
    (which also is a "RV350 NV") works flawless for that chip.
    
    Signed-off-by: Sven Henkel <shenkel@gmail.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31f919c3296a30427b18458b13c308513a62c3b9
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Sat Oct 1 22:56:34 2005 +0100

    [ARM] 2945/1: ARM fortunet fails to build because of missing include
    
    Patch from Vincent Sanders
    
    When building the fortunet ARM platform it fails to compile because of
    missing include.
    
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9f4426dde2be352aabc326539eccc726cea2d98c
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Sat Oct 1 22:56:34 2005 +0100

    [ARM] 2944/1: GCC 4 mx1ads serial driver compile fix
    
    Patch from Vincent Sanders
    
    When building the mx1ads ARM platforms the serial driver fails to compile
    with GCC 4.01 due to extern/static ambiguity.
    
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14bf01bb0599c89fc7f426d20353b76e12555308
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Oct 1 11:04:18 2005 -0700

    Fix inequality comparison against "task->state"
    
    We should always use bitmask ops, rather than depend on some ordering of
    the different states.  With the TASK_NONINTERACTIVE flag, the inequality
    doesn't really work.
    
    Oleg Nesterov argues (likely correctly) that this test is unnecessary in
    the first place.  However, the minimal fix for now is to at least make
    it work in the presense of TASK_NONINTERACTIVE.  Waiting for consensus
    from Roland & co on potential bigger cleanups.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd2e54b35bd70d11c160ded4834e2378e915356e
Author: Diego Calleja <diegocg@gmail.com>
Date:   Sat Oct 1 17:00:48 2005 +0200

    [PATCH] trivial #if -> #ifdef
    
    Use '#ifdef' consistently on __KERNEL__.  This was reported as bug #5340
    (isn't easier to send a fix than report the bug?!)
    
    Signed-off-by: Diego Calleja <diegocg@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d8ab6ad6edf0e8709da9ad24e3f023503f76cee
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Sat Oct 1 13:14:17 2005 -0400

    [PATCH] ppc64: fix up()/down() usage for kprobe_mutex
    
    The incorrect kprobe_mutex usage on x86_64 had percolated to ppc64 too.
    First noticed by Yanmin Zhang.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 702c96d55059b4a8e5b1eb112ee3b1804708a1bd
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Sep 30 16:20:22 2005 -0700

    [PATCH] ARM: Fix IXP2000 serial port resource range. For real this time.
    
    Serial port only needs 32 bytes of resource space but we are currently
    asking for 64K.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    [ diff went missing first time due to corrupted patch ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0e837d9182d7903bde3ebafbd1d0d68c6d32d43
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri Sep 30 16:54:02 2005 -0700

    [PATCH] r8169: tone down the r8169 driver
    
    Tone down the r8169 driver
    
    As an alternative, people can use the boot time 'debug' option and/or use
    'ethtool -s ethX msglvl xyz'.  The different messages are listed at:
    http://www.zoreil.com/~romieu/r8169/doc/msglvl.txt
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9487e48a34d7ad606f40a76080475a522a27cff
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Oct 1 09:21:25 2005 +1000

    [PATCH] pmac: fix cpufreq for old tipb 550Mhz
    
    The old 550Mhz titanium powerbook can switch to a lower frequency
    (500Mhz). A user has been repeately reporting overtemp conditions on his
    machine at high speed so this simple patch adds support to PowerMac
    cpufreq for this machine. The difference in frequency isn't big but seem
    enough to fix that user's problems. The patch has been around for some
    time now and doesn't seem to cause any problem, so I suppose it could go
    in now.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Alain RICHARD <alain.richard@equation.fr>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69d37960b578be0a69383bd71d06c1fcfb86e8b9
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Sep 30 16:20:22 2005 -0700

    [PATCH] Fix IXP2000 serial port resource range
    
    Serial port only needs 32 bytes of resource space but we are currently
    asking for 64K.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c9426e8a59461688bb451e006456987b198e4c0
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 14:17:35 2005 -0700

    Linux v2.6.14-rc3

commit aba7a22f291c13448177b28e0e3d01260ed04fbe
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Sep 30 13:55:50 2005 -0700

    [IB] mthca: Fix memory leak on device close
    
    Remember to free the multicast group context memory table.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 85cc5135ace4c8b75d7b4e1ea9fe15a7fcbd1516
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Fri Sep 30 11:59:22 2005 -0700

    [PATCH] x86_64 early numa init fix
    
    The tests Alok carried out on Petr's box confirmed that cpu_to_node[BP] is
    not setup early enough by numa_init_array due to the x86_64 changes in
    2.6.14-rc*, and unfortunately set wrongly by the work around code in
    numa_init_array().  cpu_to_node[0] gets set with 1 early and later gets set
    properly to 0 during identify_cpu() when all cpus are brought up, but
    confusing the numa slab in the process.
    
    Here is a quick fix for this.  The right fix obviously is to have
    cpu_to_node[bsp] setup early for numa_init_array().  The following patch
    will fix the problem now, and the code can stay on even when
    cpu_to_node{BP] gets fixed early correctly.
    
    Thanks to Petr for access to his box.
    
    Signed off by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6a045a5b89037ae87c8c1bc84403f1d498e52a1
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Fri Sep 30 11:59:21 2005 -0700

    [PATCH] x86_64: fix the BP node_to_cpumask
    
    Fix the BP node_to_cpumask.  2.6.14-rc* broke the boot cpu bit as the
    cpu_to_node(0) is now not setup early enough for numa_init_array.
    cpu_to_node[] is setup much later at srat_detect_node on acpi srat based
    em64t machines.  This seems like a problem on amd machines too, Tested on
    em64t though.  /sys/devices/system/node/node0/cpumap shows up sanely after
    this patch.
    
    Signed off by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dd960d66bc12b6b206e63104636514e5da0ddb7
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Fri Sep 30 11:59:20 2005 -0700

    [PATCH] utilization of kprobe_mutex is incorrect on x86_64
    
    The up()/down() orders are incorrect in arch/x86_64/kprobes.c file.
    kprobe_mutext is used to protect the free kprobe instruction slot list.
    arch_prepare_kprobe applies for a slot from the free list, and
    arch_remove_kprobe returns a slot to the free list.  The incorrect up()/down()
    orders to operate on kprobe_mutex fail to protect the free list.  If 2 threads
    try to get/return kprobe instruction slot at the same time, the free slot list
    might be broken, or a free slot might be applied by 2 threads.
    
    Signed-off-by: Yanmin Zhang <Yanmin.zhang@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32e7a04faa29f50f65e06d43a9029bb607743e76
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:19 2005 -0700

    [PATCH] ohci1394: less noise in dmesg
    
    less noise in dmesg
    
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f31c9cf3bd6bc1f3e29807ba59d0c7d711385a06
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:18 2005 -0700

    [PATCH] ieee1394: delete legacy module aliases
    
    amdtp, dv1394, raw1394, video1394:
    
    Delete legacy module aliases.  The macros did not work and the aliases are not
    needed nowadays.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ae3d0d4ae4131563d9eb55859f4fa5bd39059bd
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:18 2005 -0700

    [PATCH] eth1394: workaround limitation in rawiso routines
    
    Work around limitation in rawiso routines.  Required with 1394b cards on
    architectures where PAGE_SIZE is 4096.  Based on a previous patch by Ben
    Collins.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 998150c3d3cf049da7596875f6fdc253db089a9a
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:17 2005 -0700

    [PATCH] ieee1394: remove superfluous include in csr1212
    
    Remove superfluous include.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3256cc13983da2cfe45c17788e4f5b379695404e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:16 2005 -0700

    [PATCH] ieee1394: trivial edits of a few comments
    
    trivial edits of a few comments
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63bea35036540c0e8a309aef9bc37a9acfb520ae
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:10 2005 -0700

    [PATCH] ieee1394: use time_before()
    
    Use of time_before() macro, defined at linux/jiffies.h, which deal with
    wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db2fd664f8ac3664dfd94d624c0a871bee937bd5
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:09 2005 -0700

    [PATCH] ieee1394: fix for debug output
    
    Fix debug code so it prints the correct speed (was defaulting to 100, so
    anything > 400 showed only 100).
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@debian.org>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e31a127c2f99b9cb9abc99a1ec22b75194890800
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:09 2005 -0700

    [PATCH] ieee1394: skip unnecessary pause when scanning config ROMs
    
    Skip a superfluous pause that occured when the config ROM of a node was
    scanned unsuccessfully.  This also occurs if a node without link wrongly
    enables its "link active" self ID flag.  A GWCTech 6-port hub does this.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 328699bf0ff4d35a9932ce279441f955e78a890e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:08 2005 -0700

    [PATCH] ieee1394: reorder activities after bus reset (fixes device detection)
    
    Units were not detected if the local IRM performed a bus reset.  ("The root
    node is not cycle master capable; selecting a new root node and resetting...",
    often seen with iPods and other SBP-2 devices).  Rearrange the order of IRM
    duties and node scanning.  TODO: Audit the ROM caching and parsing code for
    underlying issues.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bab359a5009f330b12a4ed09a57d3d2ac6b3483
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:07 2005 -0700

    [PATCH] sbp2: default to serialize_io=1
    
    Set serialize_io=1 by default.  This is safer and required by seemingly more
    and more hardware.  It causes little or no performance loss for S400 devices.
    Performance of S800 1394b devices may drop by 25...30%.  Therefore make the
    parameter's description and dmesg message clearer about performance impact.
    
    Update description of the max_speed parameter too.  IEEE1394_SPEED_MAX is
    currently S800.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abd559b1052e28d8b9c28aabde241f18fa89090b
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:06 2005 -0700

    [PATCH] sbp2: fix deadlocks and delays on device removal/rmmod
    
    Fixes for deadlocks of the ieee1394 and scsi subsystems and long delays in
    futile error recovery attempts when SBP-2 devices are removed or drivers are
    unloaded.
    
     - Complete commands quickly with DID_NO_CONNECT if the 1394 node is gone or if
       the 1394 low-level driver was unloaded.
     - Skip unnecessary work in the eh_abort_handler and eh_device_reset_handler if
       the node or 1394 low-level driver is gone.
     - Let scsi's high-level shut down gracefully when sbp2 is being unloaded or
       detached from the 1394 unit. A call to scsi_remove_device is added for this
       purpose, which requires us to store a scsi_device pointer.
     - scsi_device pointer is obtained from slave_alloc hook and cleared by
       slave_destroy. This avoids usage of the pointer after the scsi device was
       deleted e.g. by the user via scsi_mod's sysfs interface.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 105d7b38b08f85c9abc3fd31e5cfa7ee4cf0a402
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Fri Sep 30 11:59:04 2005 -0700

    [PATCH] MAINTAINERS: sbp2 driver is not orphaned.
    
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d38e24e260daf11365efd4ed621235fe9c0ba7ee
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Fri Sep 30 11:59:04 2005 -0700

    [PATCH] ioc4_serial: Remove bogus error message
    
    This change removes a bogus error message from the IOC4 serial driver
    interrupt handler.
    
    This error message is bogus for two reasons.  First, it can never occur
    given that current code takes care to initialize IOC4 in such a way that
    these "unknown" interrupts could never occur.  Second, this code fails to
    take into account that other drivers can share the IOC4 interrupt mechanism
    through SA_SHIRQ, and thus this driver is not in-fact "all-knowing".
    
    Finally, this error message triggers every time some "unknown" interrupt
    occurs -- it's not rate limited or repetition limited in any way, thereby
    effectively denying use of the console device.  Given its bogosity in the
    first place, it's best to just get rid of it entirely.
    
    Acked-by: Pat Gefre <pfg@sgi.com>
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd190d066b7ded8c44b2b67dd0a14bed01525d3c
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 30 11:59:02 2005 -0700

    [PATCH] fuse: check O_DIRECT
    
    Check O_DIRECT and return -EINVAL error in open.  dentry_open() also checks
    this but only after the open method is called.  This patch optimizes away
    the unnecessary upcalls in this case.
    
    It could be a correctness issue too: if filesystem has open() with side
    effect, then it should fail before doing the open, not after.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daa35edc0a967d1f77c2e2c1346f57d04371487a
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Sep 30 11:59:01 2005 -0700

    [PATCH] uml: remove empty hostfs_truncate method
    
    Calling truncate() on hostfs spits a kernel warning "Something isn't
    implemented here", but it still works fine.
    
    Indeed, hostfs i_op->truncate doesn't do anything.  But hostfs_setattr() ->
    set_attr() correctly detects ATTR_SIZE and calls truncate() on the host.  So
    we should be safe (using ftruncate() may be better, in case the file is
    unlinked on the host, but we aren't sure to have the file open for writing,
    and reopening it would cause the same races; plus nobody should expect UML to
    be so careful).
    
    So, the warning is wrong, because the current implementation is working.  Al,
    am I correct, and can the warning be therefore dropped?
    
    CC: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd948057357db5febfe64cf7a9ef11d7e347ffec
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Sep 30 11:59:00 2005 -0700

    [PATCH] uml: revert "run mconsole "sysrq" in process context"
    
    Revert commit 12ebcd73e40e09f0dfddf89e465cc0541e0ff8b1, i.e.  [PATCH] uml: run
    mconsole "sysrq" in process context on request from Jeff Dike.
    
    a) sysrq may be run when the scheduler is non-functioning
    
    b) the warning I wanted to fix actually came from the fault handler run in
       atomic context.  But I fixed that not to take the semaphore in a separate
       patch.
    
    c) the fault handler is run because of a fault, and that fault was
       unaffected by this patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8923648c125421b0fcb240cde607e2748d099ab8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Sep 30 11:59:00 2005 -0700

    [PATCH] uml: clear SKAS0/3 flags when running in TT mode
    
    SEGV_MAYBE_FIXABLE tests ptrace_faultinfo, and depends on it being 1 only in
    SKAS3 mode, while currently when running with mode=tt it will be 1 anyway.
    Fix this, and do the same for proc_mm.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be662a18b7763496a052d489206af9ca2c2e1ac2
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Fri Sep 30 11:58:59 2005 -0700

    [PATCH] uml: fix page faults in SKAS3 mode.
    
    I hadn't been running a SKAS3 host when testing the "uml: fix hang in TT mode
    on fault" patch (commit 546fe1cbf91d4d62e3849517c31a2327c992e5c5), and I
    didn't think enough to the missing trap_no in SKAS3 mode.
    
    In fact, the resulting kernel doesn't work at all in SKAS3 mode.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79dfa4a5a2eea5035de793b1633031750fe8d3ff
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Fri Sep 30 11:58:58 2005 -0700

    [PATCH] v4l: DViCO FusionHDTV5 Lite GPIO Fix
    
    GPIO fix for the composite and tv mute states of bt8xx card #135: DViCO
    FusionHDTV5 Lite.  Without this patch, selecting one of these states could
    produce unexpected behavior.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d96c4e7bb039ae16c9b7e6809feb4fcfc45fcc87
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 30 11:58:57 2005 -0700

    [PATCH] x86: hw_irq.h warning fix
    
    include/asm/hw_irq.h:70: warning: `struct hw_interrupt_type' declared inside parameter list
    include/asm/hw_irq.h:70: warning: its scope is only this definition or declaration, which is probably not what you want
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 353fb07e2043d2df12dddf4e2c39552d0ab9b026
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Sep 30 11:58:56 2005 -0700

    [PATCH] aio: avoid extra aio_{read,write} call when ki_left == 0
    
    Recently aio_p{read,write} changed to perform retries internally rather
    than returning -EIOCBRETRY.  This inadvertantly resulted in always calling
    aio_{read,write} with ki_left at 0 which would in turn immediately return
    0.  Harmless, but we can avoid this call by checking in the caller.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 897f15fb587fd2772b9e7ff6ec0265057f3c3975
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Sep 30 11:58:55 2005 -0700

    [PATCH] aio: remove unlocked task_list test and resulting race
    
    Only one of the run or kick path is supposed to put an iocb on the run
    list.  If both of them do it than one of them can end up referencing a
    freed iocb.  The kick path could delete the task_list item from the wait
    queue before getting the ctx_lock and putting the iocb on the run list.
    The run path was testing the task_list item outside the lock so that it
    could catch ki_retry methods that return -EIOCBRETRY *without* putting the
    iocb on a wait queue and promising to call kick_iocb.  This unlocked check
    could then race with the kick path to cause both to try and put the iocb on
    the run list.
    
    The patch stops the run path from testing task_list by requring that any
    ki_retry that returns -EIOCBRETRY *must* guarantee that kick_iocb() will be
    called in the future.  aio_p{read,write}, the only in-tree -EIOCBRETRY
    users, are updated.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 998765e5588b197737d457e16f72832d8036190f
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Sep 30 11:58:54 2005 -0700

    [PATCH] aio: lock around kiocbTryKick()
    
    Only one of the run or kick path is supposed to put an iocb on the run
    list.  If both of them do it than one of them can end up referencing a
    freed iocb.  The kick patch could set the Kicked bit before acquiring the
    ctx_lock and putting the iocb on the run list.  The run path, while holding
    the ctx_lock, could see this partial kick and mistake it for a kick that
    was deferred while it was doing work with the run_list NULLed out.  It
    would then race with the kick thread to add the iocb to the run list.
    
    This patch moves the kick setting under the ctx_lock so that only one of
    the kick or run path queues the iocb on the run list, as intended.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e3254c4e2927c117044a02acf5f5b56e1373053
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 12:38:27 2005 -0700

    Revert "x86-64: Reverse order of bootmem lists"
    
    As requested by Thomas Gleixner <tglx@linutronix.de>:
    
      "5d3d0f7704ed0bc7eaca0501eeae3e5da1ea6c87 breaks a couple of ARM
       boards, which depend on the historical bootmem allocation order.
       There is a cleaner solution around to remove the pgdat list
       completely, but this is a topic for post 2.6.14
    
       Andi signalled ACK already."
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13402580021a52e49c6d1068ff28ade4d5a175f1
Author: James Morris <jmorris@namei.org>
Date:   Fri Sep 30 14:24:34 2005 -0400

    [PATCH] SELinux - fix SCTP socket bug and general IP protocol handling
    
    The following patch updates the way SELinux classifies and handles IP
    based protocols.
    
    Currently, IP sockets are classified by SELinux as being either TCP, UDP
    or 'Raw', the latter being a default for IP socket that is not TCP or UDP.
    
    The classification code is out of date and uses only the socket type
    parameter to socket(2) to determine the class of IP socket.  So, any
    socket created with SOCK_STREAM will be classified by SELinux as TCP, and
    SOCK_DGRAM as UDP.  Also, other socket types such as SOCK_SEQPACKET and
    SOCK_DCCP are currently ignored by SELinux, which classifies them as
    generic sockets, which means they don't even get basic IP level checking.
    
    This patch changes the SELinux IP socket classification logic, so that
    only an IPPROTO_IP protocol value passed to socket(2) classify the socket
    as TCP or UDP.  The patch also drops the check for SOCK_RAW and converts
    it into a default, so that socket types like SOCK_DCCP and SOCK_SEQPACKET
    are classified as SECCLASS_RAWIP_SOCKET (instead of generic sockets).
    
    Note that protocol-specific support for SCTP, DCCP etc. is not addressed
    here, we're just getting these protocols checked at the IP layer.
    
    This fixes a reported problem where SCTP sockets were being recognized as
    generic SELinux sockets yet still being passed in one case to an IP level
    check, which then fails for generic sockets.
    
    It will also fix bugs where any SOCK_STREAM socket is classified as TCP or
    any SOCK_DGRAM socket is classified as UDP.
    
    This patch also unifies the way IP sockets classes are determined in
    selinux_socket_bind(), so we use the already calculated value instead of
    trying to recalculate it.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b33fa1f3c3ec05e54e73f06c4578948c55d89ef6
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Oct 1 02:34:42 2005 +1000

    [PATCH] i386: include linux/irq.h rather than asm/hw_irq.h
    
    I need the following patch to compile -git8 here, otherwise these
    files fail to compile (asm/hw_irq.h needs definitions from
    linux/irq.h and that file provides the required include ordering).
    
    I did not do a full audit, though there looks to be many other
    places that should get the same treatment, if this is  the right
    way to do it.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03cdc0c304e1c068d49adc32264f07af76253e4c
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Sep 29 21:39:32 2005 +0200

    [PATCH] usb/core/hcd-pci.c: don't free_irq() on suspend
    
    the free_irq() in USB suspend breaks resume on some setups where USB
    (ohci/ehci) shares the interrupt with an other device.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1294b118cb53fb14515666e2b218ad5ab40318c1
Author: Kirill Korotaev <dev@sw.ru>
Date:   Fri Sep 30 10:32:19 2005 +0400

    [PATCH] x86_64: Add missing () around arguments of pte_index macro
    
    x86-64: Add missing () around arguments of pte_index macro
    
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 794fb8370db3d5f26592b9b45d69aeca2f583efb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 05:09:34 2005 +0100

    [PATCH] useless includes of linux/irq.h (arch/ppc)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4a7c77fcb8c0ef16e7193fb8cab2654282bbfab
Merge: a36f496... 017fb98...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 08:43:13 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit a36f4961952214bdfc396e035a047268ac48c5c3
Merge: a3ca066... a4199b0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 08:42:52 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit a3ca066efb18524bf3f07137a8f8ff434022c4f2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 04:20:57 2005 +0100

    [PATCH] missing qualifiers in readb() et.al. on ppc
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66df3bbf0701b7408a1067c4b819aceee2686bba
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 04:19:43 2005 +0100

    [PATCH] volatile unsigned short f(...) doesn't make sense
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c215a16a4ad620b612b51495cbb99dbbb59bb585
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:36:50 2005 +0100

    [PATCH] bogus BUILD_BUG_ON() in bpa_iommu
    
    BUILD_BUG_ON(1) is asking for trouble (and getting it) when used in that
    manner - dead code elimination happens after we parse it and invalid
    type is invalid type, dead code or not.
    
    It might be version-dependent, but at least 4.0.1 refuses to accept
    that.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4735885701d7c24ed54f35f5102d32b3aabee55e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:29:05 2005 +0100

    [PATCH] uml get_user() NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eacaa1f5aa4a41a48349f55abcd9258506943e76
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:26:43 2005 +0100

    [PATCH] cpuset crapectomy
    
    Switched cpuset_common_file_read() to simple_read_from_buffer(), killed
    a bunch of useless (and not quite correct - e.g.  min(size_t,ssize_t))
    code.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46d7031ecb8a8360b0022abd8014f38cc1197166
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:21:45 2005 +0100

    [PATCH] cassini annotations and fixes
    
     - __user annotations
     - NULL noise removal
     - C99 initializers
     - s/u32/pm_message_t/ in ->suspend()
     - removal of bogus casts in iounmap() arguments
     - if_mii() instead of open-coded variant
    
    Remains to be done: ethtool conversion.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ba1fd96666170338dc732480b35b7a83cd164b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:16:43 2005 +0100

    [PATCH] useless linux/irq.h includes (arch/um)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 192eaa28ba7b44485e521df7ba7a2ccbc4cc4d13
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 30 03:15:08 2005 +0100

    [PATCH] missing ERR_PTR in 9fs
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dd465cac8d3ba18a9840d032f6604147269c031
Merge: a2218ca... 217874f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 08:39:56 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit a2218cac0aacecbecebd3cabc43cc8a4a09cecbb
Merge: a44fe13... 411b67b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 30 08:38:46 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/chrisw/lsm-2.6

commit 217874feed0d3a6543a6b7127782f4a08bffd731
Author: Gen FUKATSU <fukatsu.gen@jp.panasonic.com>
Date:   Fri Sep 30 16:09:17 2005 +0100

    [ARM] 2940/1: Fix BTB entry flush in arch/arm/mm/cache-v6.S
    
    Patch from Gen FUKATSU
    
    Invalidate BTB entry instruction flushes two instruction
    at a time. Therefore this instruction should be done four
    times after invalidate instruction cache line.
    
    Signed-off-by: Gen FUKATSU <fukatsu.gen@jp.panasonic.com>
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a06f5466c4576dcbf838a50a87903b0082774da7
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Fri Sep 30 16:07:05 2005 +0100

    [ARM] 2942/1: Fix the warning in arch/arm/common/gic.c
    
    Patch from Catalin Marinas
    
    The warning is caused by the gic_set_cpu() function being defined but not
    used if CONFIG_SMP is not defined.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 481467d6fa4489aa42321a067e78bad26349488f
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Fri Sep 30 16:07:04 2005 +0100

    [ARM] 2939/1: Fix compilation error in arch/arm/mm/flush.c
    
    Patch from Catalin Marinas
    
    When CONFIG_CPU_CACHE_VIPT is defined, the flush_pfn_alias() function is
    implicitely declared and it later conflicts with its actual definition.
    This patch moves the function definition to the beginning of the file.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a4199b0b9aa540a27935251de788cd0f5f5a87aa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 19:49:17 2005 -0700

    [CASSINI]: sparse annotations and fixes
    
    - __user annotations
    - NULL noise removal
    - C99 initializers
    - s/u32/pm_message_t/ in ->suspend()
    - removal of bogus casts in iounmap() arguments
    - if_mii() instead of open-coded variant
    
    Remains to be done: ethtool conversion.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d30c1718b8baf9a3bb1b81d78afc1e667863477
Author: Horms <horms@verge.net.au>
Date:   Thu Sep 29 19:47:06 2005 -0700

    [IPVS]: Add netdev and me as maintainer contacts
    
    Signed-off-by: Horms <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 017fb98e70351e9fb5635c299c4d1c50e2f8b823
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 29 19:26:51 2005 -0700

    [RADEON]: Fix unaligned I/O port access during probe.
    
    The driver does a readl() on DEVICE_ID which is 2-byte aligned and
    2-bytes in size.  It's doing this read just to flush write buffers.
    
    Create IN16() and OUT16() macros, and use the former to do this I/O
    load.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 717463d806a53380a691eeb0136a4b750a9f9ae0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 29 18:50:34 2005 -0700

    [SPARC64]: Fix several bugs in flush_ptrace_access().
    
    1) Use cpudata cache line sizes, not magic constants.
    2) Align start address in cheetah case so we do not get
       unaligned address traps.  (pgrep was good at triggering
       this, via /proc/${pid}/cmdline accesses)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4cb29d18129fb425c6202ab535c3fc1856391b99
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 29 18:05:28 2005 -0700

    [SPARC64]: Kill arch/sparc64/prom/memory.c
    
    No longer used.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 13edad7a5cef1c952459742482482a6b05e1a8a1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 29 17:58:26 2005 -0700

    [SPARC64]: Rewrite convoluted physical memory probing.
    
    Delete all of the code working with sp_banks[] and replace
    with clean acquisition and sorting of physical memory
    parameters from the firmware.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 75b895c15b3ea2a3cd5c8e8f3c62e4598ef4d2ba
Author: Scott Talbert <scott.talbert@lmco.com>
Date:   Thu Sep 29 17:31:30 2005 -0700

    [ATM]: [lec] reset retry counter when new arp issued
    
    From: Scott Talbert <scott.talbert@lmco.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4a7097fcc431ab2ccf509d8342831873138c814a
Author: Scott Talbert <scott.talbert@lmco.com>
Date:   Thu Sep 29 17:30:54 2005 -0700

    [ATM]: [lec] attempt to support cisco failover
    
    From: Scott Talbert <scott.talbert@lmco.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 09e9ec87111ba818d8171262b15ba4c357eb1d27
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Thu Sep 29 17:17:15 2005 -0700

    [TCP]: Don't over-clamp window in tcp_clamp_window()
    
    From: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    
    Handle better the case where the sender sends full sized
    frames initially, then moves to a mode where it trickles
    out small amounts of data at a time.
    
    This known problem is even mentioned in the comments
    above tcp_grow_window() in tcp_input.c, specifically:
    
    ...
     * The scheme does not work when sender sends good segments opening
     * window and then starts to feed us spagetti. But it should work
     * in common situations. Otherwise, we have to rely on queue collapsing.
    ...
    
    When the sender gives full sized frames, the "struct sk_buff" overhead
    from each packet is small.  So we'll advertize a larger window.
    If the sender moves to a mode where small segments are sent, this
    ratio becomes tilted to the other extreme and we start overrunning
    the socket buffer space.
    
    tcp_clamp_window() tries to address this, but it's clamping of
    tp->window_clamp is a wee bit too aggressive for this particular case.
    
    Fix confirmed by Ion Badulescu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 01ff367e62f0474e4d39aa5812cbe2a30d96e1e9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 29 17:07:20 2005 -0700

    [TCP]: Revert 6b251858d377196b8cea20e65cae60f584a42735
    
    But retain the comment fix.
    
    Alexey Kuznetsov has explained the situation as follows:
    
    --------------------
    
    I think the fix is incorrect. Look, the RFC function init_cwnd(mss) is
    not continuous: f.e. for mss=1095 it needs initial window 1095*4, but
    for mss=1096 it is 1096*3. We do not know exactly what mss sender used
    for calculations. If we advertised 1096 (and calculate initial window
    3*1096), the sender could limit it to some value < 1096 and then it
    will need window his_mss*4 > 3*1096 to send initial burst.
    
    See?
    
    So, the honest function for inital rcv_wnd derived from
    tcp_init_cwnd() is:
    
    	init_rcv_wnd(mss)=
    	  min { init_cwnd(mss1)*mss1 for mss1 <= mss }
    
    It is something sort of:
    
    	if (mss < 1096)
    		return mss*4;
    	if (mss < 1096*2)
    		return 1096*4;
    	return mss*2;
    
    (I just scrablled a graph of piece of paper, it is difficult to see or
    to explain without this)
    
    I selected it differently giving more window than it is strictly
    required.  Initial receive window must be large enough to allow sender
    following to the rfc (or just setting initial cwnd to 2) to send
    initial burst.  But besides that it is arbitrary, so I decided to give
    slack space of one segment.
    
    Actually, the logic was:
    
    If mss is low/normal (<=ethernet), set window to receive more than
    initial burst allowed by rfc under the worst conditions
    i.e. mss*4. This gives slack space of 1 segment for ethernet frames.
    
    For msses slighlty more than ethernet frame, take 3. Try to give slack
    space of 1 frame again.
    
    If mss is huge, force 2*mss. No slack space.
    
    Value 1460*3 is really confusing. Minimal one is 1096*2, but besides
    that it is an arbitrary value. It was meant to be ~4096. 1460*3 is
    just the magic number from RFC, 1460*3 = 1095*4 is the magic :-), so
    that I guess hands typed this themselves.
    
    --------------------
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dce79affd5d04e9cbabe35016eda55213b9b36f6
Author: Daniel Jacobowitz <drow@false.org>
Date:   Fri Sep 30 00:17:35 2005 +0100

    [ARM] 2941/1: Fix running legacy binaries from a soft-float root filesystem with CONFIG_IWMMXT.
    
    Patch from Daniel Jacobowitz
    
    Thread flags are inherited on fork().  In order for a binary which has
    the iWMMXt coprocessor enabled to run a binary which needs the FPA
    emulation, we need to explicitly clear TIF_USING_IWMMXT if we are not
    going to set it.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a44fe13eab664ac488ced0845d9885b019bd24c5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Sep 30 08:25:17 2005 +1000

    [PATCH] Fix ppc64 smu driver locking
    
    The SMU driver has a small mistake in the locking of the interrupt code,
    if polled access and interrupt access race, interrupt may take a lock
    and return without releasing it. This fixes it. With that patch, the
    driver is rock solid with my experimental thermal control (which bangs
    it pretty hard) racing with real time clock and cpufreq handling.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 411b67b4b6a4dd1e0292a6a58dd753978179d173
Author: Kostik Belousov <kostikbel@gmail.com>
Date:   Wed Sep 28 18:21:28 2005 +0300

    [PATCH] readv/writev syscalls are not checked by lsm
    
    it seems that readv(2)/writev(2) syscalls do not call
    file_permission callback. Looks like this is overlook.
    
    I have filled the issue into redhat bugzilla as
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=169433
    and got the recommendation to post this on lsm mailing list.
    
    The following trivial patch solves the problem.
    
    Signed-off-by: Kostik Belousov <kostikbel@gmail.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 7644143cd6f7e029f3a8ea64f5fb0ab33ec39f72
Author: Mike Waychison <mikew@google.com>
Date:   Fri Sep 30 00:01:27 2005 +0200

    [PATCH] x86_64: Fix mce_log
    
    The attempt to fixup the lockless mce log buffer introduced an infinite loop
    when trying to find a free entry.
    
    And:
    
    Using rcu_dereference() to load mcelog.next doesn't seem to be sufficient
    enough to ensure that mcelog.next is loaded each time around the loop in
    mce_log().  Instead, use an explicit rmb() to ensure that the compiler gets it
    right.
    
    AK: turned the smp_wmbs into true wmbs to make sure they are not
    reordered by the compiler on UP.
    
    Signed-off-by: Mike Waychison <mikew@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d318d774789657c37a5e994a4a2cf59d4879ae7
Author: Andi Kleen <ak@suse.de>
Date:   Thu Sep 29 22:05:55 2005 +0200

    [PATCH] Fix up TLB flush filter disabling
    
    I checked with AMD and they requested to only disable it for family 15.
    Also disable it for i386 too. And some style fixes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5acbc5cb507e6c381b70093b1081854708e82b16
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Sep 29 14:54:42 2005 -0700

    [PATCH] Fix task state testing properly in do_signal_stop()
    
    Any tests using < TASK_STOPPED or the like are left over from the time
    when the TASK_ZOMBIE and TASK_DEAD bits were in the same word, and it
    served to check for "stopped or dead".  I think this one in
    do_signal_stop is the only such case.  It has been buggy ever since
    exit_state was separated, and isn't testing the exit_state value.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a8342d233a39ee582e9f7260e12d2f5fd194a05
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 29 15:18:21 2005 -0700

    Revert task flag re-ordering, add comments
    
    Roland points out that the flags end up having non-obvious dependencies
    elsewhere, so revert aa55a08687059aa169d10a313c41f238c2070488 and add
    some comments about why things are as they are.
    
    We'll just have to fix up the broken comparisons. Roland has a patch.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa55a08687059aa169d10a313c41f238c2070488
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Thu Sep 29 19:58:53 2005 +0400

    [PATCH] fix TASK_STOPPED vs TASK_NONINTERACTIVE interaction
    
    do_signal_stop:
    
    	for_each_thread(t) {
    		if (t->state < TASK_STOPPED)
    			++sig->group_stop_count;
    	}
    
    However, TASK_NONINTERACTIVE > TASK_STOPPED, so this loop will not
    count TASK_INTERRUPTIBLE | TASK_NONINTERACTIVE threads.
    
    See also wait_task_stopped(), which checks ->state > TASK_STOPPED.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    
    [ We really probably should always use the appropriate bitmasks to test
      task states, not do it like this. Using something like
    
    	#define TASK_RUNNABLE (TASK_RUNNING | TASK_INTERRUPTIBLE | \
    				TASK_UNINTERRUPTIBLE | TASK_NONINTERACTIVE)
    
      and then doing "if (task->state & TASK_RUNNABLE)" or similar. But the
      ordering of the task states is historical, and keeping the ordering
      does make sense regardless. ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20fd6508c565df04a6b5816f17e03b04d4f924d
Merge: b38708f... f04da5d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 29 09:00:04 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit b38708fca9cc60d8a073a67c3b366116e38011c5
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Sep 28 18:07:01 2005 -0700

    [PATCH] Fix thinko in previous ARM 2917/1 patch
    
    Previous patch accidently add IXDP425 mach entry when IXDP465 is configured.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb693d2994eb762b2201aead31066265ab0be20b
Merge: 6dec3cf... 01d40f2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 29 08:56:47 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 6dec3cf5cdb600f39b9eac3349f6bf50eab87731
Merge: 82810a9... 705747a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 29 08:55:43 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 82810a906f8734ae6503ea11436a7164d2f86f2e
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Sep 28 16:42:54 2005 -0700

    [PATCH] Fix ixp4xx MTD driver module build
    
    Missing ';' breaks module build.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe984bba30a29398578da3d8c0503fa39e84b838
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Sep 29 05:24:38 2005 +0800

    [PATCH] s3c2410fb: Minor warning fix
    
    The function s3c2410fb_activate_var does not return
    a value, therefore it should be declared void.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 375726d7ed08bd8cf2fe3cfe6b164ffb37fa7e90
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Thu Sep 29 05:19:51 2005 +0800

    [PATCH] intelfb: Fix regression (blank display) from ioremap patch
    
    - Workaround for the ioremap patch that produces a blank display on some
      chipsets
    - Make hwcursor = 0 the default.  The hardware cursor does not work with all
      hardware.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2846dfa4aa1bbbf3f9977d67566952d7f621009
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:42:27 2005 +0100

    [PATCH] mv64x60_wdt __user annotations and cleanups
    
     - use nonseekable_open() instead of messing with
    
    	if (*ppos != file->f_pos)
    		return -EISPIPE
    
       in ->write() (->read is NULL).
    
     - trivial __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae8aed0314064da3002879fedc2d262c72865a17
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:37:34 2005 +0100

    [PATCH] saa6588 __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be88ec74cb48d1f60d0c0f059843f846f4481d87
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:36:10 2005 +0100

    [PATCH] i810-i2c iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7625d6e49cb4fd94be7576d85422c33003101b7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:34:30 2005 +0100

    [PATCH] mv64x60 iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fcdfcd90526c8c5c2bd117fd3713f8f0f1a46a8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:31:14 2005 +0100

    [PATCH] ppc32 ld.script fix for building on ppc64
    
    In arch/ppc/boot/ld.script we need OUTPUT_ARCH(powerpc:common) for the
    same reasons why we need it in vmlinux.lds.S; when we build on ppc64
    box, we need to be explicit about the target.
    
    See http://linus.bkbits.net:8080/linux-2.5/cset@1.1784.8.10 for the
    corresponding fix in vmlinux.lds.S.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea8a918eb71b503be13b861dbe18b93932fd6b62
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:17:49 2005 +0100

    [PATCH] ppc64 get_user annotations
    
    long is not uintptr_t, unsigned long is.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c28144763a7dcdceb2c16a5ac9c8e0022d547d28
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:16:02 2005 +0100

    [PATCH] s390 signal annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cc13a5442901835192ba47427f0f4e4d525d935
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:12:13 2005 +0100

    [PATCH] ia64 basic __user annotations
    
     - document places where we pass kernel address to low-level primitive
       that deals with kernel/user addresses
     - uintptr_t is unsigned long, not long
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 272cd2b71d478371e0a5bf2c76a1e50cbf178698
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:10:01 2005 +0100

    [PATCH] arm/rpc iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ad4f86b60b649fd7428265c08d73a3bd360c81b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:09:02 2005 +0100

    [PATCH] arm/versatile iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 775b048d09c85d87a65a7ccd9c4f9372953a5d95
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 29 00:07:29 2005 +0100

    [PATCH] cyblafb: portability fixes, sanitized work with pointers
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Knut Petersen <Knut_Petersen@t-online.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87e0f3dbd3693bc4583474ab191cbdd5e3d9d0fa
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Sep 29 00:05:58 2005 +0100

    [PATCH] n_r3964: drop bogus fmt casts
    
     - print pointers with %p
     - casting pointer structure field to int and printing it with %d...
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 666002218d59db271e5c1ede1d80227170c51987
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 28 22:32:57 2005 +0100

    [PATCH] proc_mkdir() should be used to create procfs directories
    
    A bunch of create_proc_dir_entry() calls creating directories had crept
    in since the last sweep; converted to proc_mkdir().
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecba97d4aacf4e80c56eb73e39af0369cb8539a4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 28 22:27:23 2005 +0100

    [PATCH] uml makefiles sanitized
    
    UML makefiles sanitized:
     - number of generated headers reduced to 2 (from user-offsets.c and
       kernel-offsets.c resp.).  The rest is made constant and simply
       includes those two.
     - mk_... helpers are gone now that we don't need to generate these
       headers
     - arch/um/include2 removed since everything under arch/um/include/sysdep
       is constant now and symlink can point straight to source tree.
     - dependencies seriously simplified.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 195331d7c9813fe7f1a93c09afa2c7dcdf2790a8
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Sep 29 16:22:30 2005 +0200

    [WATCHDOG] pcwd_pci.c add debug module_param
    
    Add debugging code for the pcwd_pci driver.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit a0800f6da7c4590d49ae513d9d5ee8b1ad203b82
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Sep 29 16:21:50 2005 +0200

    [WATCHDOG] pcwd_pci.c control status + boot-code clean-up
    
    * Clean-up control status code (use control status defines +
      change pcipcwd_clear_status)
    * Clean-up boot-code (move card info to pcipcwd_show_card_info() )
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit fc611a1a50caa04bae82ed3c1fc6505132f8343f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 29 11:15:51 2005 +0100

    [ARM] Don't include mach-types.h unnecessarily
    
    It's pointless to include mach-types.h if you're not going to use
    anything from it.  These references were removed as a result of:
    
    grep -lr 'asm/mach-types\.h' . | xargs grep -L 'machine_is_\|MACH_TYPE_\|MACHINE_START\|machine_type'
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d0877904470c149c6553f1309cfed6c90d67cf91
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 29 11:12:52 2005 +0100

    [ARM] Don't include asm/arch/hardware.h directly
    
    Since asm/hardware.h's only reason for existing is to include
    asm/arch/hardware.h, it's completely pointless to include both.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit eb9181a2f85d46cdbbd3cb18b4541f8ab2df0933
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 29 09:49:25 2005 +0100

    [ARM] Fix warning in arch/arm/mach-pxa/generic.c
    
    Fix
     arch/arm/mach-pxa/generic.c:242: warning: 'struct i2c_pxa_platform_data' declared inside parameter list
    caused by missing asm/arch/i2c.h include.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca5da7106214e03f5302ca630bd38a9145b27391
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 29 09:44:54 2005 +0100

    [ARM] pxafb: Remove #if DEBUG, convert DPRINTK to pr_debug
    
    Fix warning:
     drivers/video/pxafb.h:119:5: warning: "DEBUG" is not defined
    by removing the whole
     #if DEBUG
     #define DPRINTK(fmt, args...) printk...etc...
     #else
     #define DPRINTK(fmt, args...)
     #endif
    stuff - we have pr_debug() for this.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 01d40f28b125e0a9aa0ec24642be67fc4c5dfaff
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 22:37:53 2005 -0700

    [NET]: Fix reversed logic in eth_type_trans().
    
    I got the second compare_eth_addr() test reversed, oops.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed3ffaf7b5e0262cb860f106a6632933671cc88f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 21:48:25 2005 -0700

    [SPARC64]: Solidify check in cheetah_check_main_memory().
    
    Need to make sure the address is below high_memory before
    passing it to kern_addr_valid().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 10147570f9eaff3920f0c67bad7244c2eb958d4f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 21:46:43 2005 -0700

    [SPARC64]: Kill all external references to sp_banks[]
    
    Thus, we can mark sp_banks[] static in arch/sparc64/mm/init.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0836a0eb4073c3e0a09c5965833b9dec19f5abc7
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 21:38:08 2005 -0700

    [SPARC64]: Move phys_base, kern_{base,size}, and sp_banks[] init to paging_init
    
    Also, move prom_probe_memory() into arch/sparc64/mm/init.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 801ab3c731e77324c055769491711e620100dbfb
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 21:31:25 2005 -0700

    [SPARC]: Declare paging_init() in asm/pgtable.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit efdc1e2083e04cc70721d55803889b346c1a3de2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 21:06:47 2005 -0700

    [SPARC64]: Simplify user fault fixup handling.
    
    Instead of doing byte-at-a-time user accesses to figure
    out where the fault occurred, read the saved fault_address
    from the current thread structure.
    
    For the sake of defensive programming, if the fault_address
    does not fall into the user buffer range, simply assume the
    whole area faulted.  This will cause the fixup for
    copy_from_user() to clear the entire kernel side buffer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5fd29752f09cabff582f65c0ce35518db4c64937
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 20:41:45 2005 -0700

    [SPARC64]: Fix fault handling in unaligned trap handler.
    
    We were not calling kernel_mna_trap_fault() correctly.
    Instead of being fancy, just return 0 vs. -EFAULT from
    the assembler stubs, and handle that return value as
    appropriate.
    
    Create an "__retl_efault" stub for assembler exception
    table entries and use it where possible.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cf14af0a740fb7e9f94a203b5a989beb875d58f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 20:21:11 2005 -0700

    [SPARC64]: Convert to use generic exception table support.
    
    The funny "range" exception table entries we had were only
    used by the compat layer socketcall assembly, and it wasn't
    even needed there.
    
    For free we now get proper exception table sorting and fast
    binary searching.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d70ed6075f15bdbb0548d162394bf10332769c88
Author: Roland Dreier <rolandd@cisco.com>
Date:   Wed Sep 28 19:56:57 2005 -0700

    [IPoIB] Rename IPoIB's path_lookup() to avoid name clashes
    
    Rename IPoIB driver's path_lookup() to ipoib_path_lookup() to avoid a
    clashes with the kernel global path_lookup().  We don't hit this with
    the current kernel source, but some external patches seem to trigger
    this, and it's cleaner to avoid clashing with global names anyway.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    refs/heads/for-linus

commit 705747ab87c96f1b4b8e73ba617c323d9087f6ac
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 16:48:40 2005 -0700

    [SPARC64]: Fix bug in unaligned load endianness swapping
    
    The in-memory value was being swapped, not the value we
    loaded into the register.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 735631a9196db42631b8817892605ee72e13a58b
Author: Martin Whitaker <atm@martin-whitaker.co.uk>
Date:   Wed Sep 28 16:35:22 2005 -0700

    [ATM]: fix bug in atm address list handling
    
    From: Martin Whitaker <atm@martin-whitaker.co.uk>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>

commit 9301e320e98ff19a0e48881b038d0c24ca76e6c0
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Wed Sep 28 16:35:01 2005 -0700

    [ATM]: track and close listen sockets when sigd exits
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>

commit e2c4b72158a9f1286df41dee478e774f1b94e93a
Author: Roman Kagan <rkagan@mail.ru>
Date:   Wed Sep 28 16:34:24 2005 -0700

    [ATM]: net/atm/ioctl.c: autoload pppoatm and br2684
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>

commit 6b251858d377196b8cea20e65cae60f584a42735
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 28 16:31:48 2005 -0700

    [TCP]: Fix init_cwnd calculations in tcp_select_initial_window()
    
    Match it up to what RFC2414 really specifies.
    Noticed by Rick Jones.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 54bb5675a6e966a58755ac44e3407f8ec2272b82
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed Sep 28 19:29:59 2005 +0200

    [PATCH] pcmcia: only start up nonstatic sockets if both mem and io are available
    
    Only start up nonstatic sockets if both IO and MEM resources are available.
    Thanks to Russell King and Matthew Wilcox for tracking this down.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 1146bc743e074760ef0dd08b3457f35a68069a54
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed Sep 28 19:28:37 2005 +0200

    [PATCH] pcmcia: allow one port excludes
    
    Allow for excluding only one port in /etc/pcmcia/config.otps
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 664cceb0093b755739e56572b836a99104ee8a75
Author: David Howells <dhowells@redhat.com>
Date:   Wed Sep 28 17:03:15 2005 +0100

    [PATCH] Keys: Add possessor permissions to keys [try #3]
    
    The attached patch adds extra permission grants to keys for the possessor of a
    key in addition to the owner, group and other permissions bits. This makes
    SUID binaries easier to support without going as far as labelling keys and key
    targets using the LSM facilities.
    
    This patch adds a second "pointer type" to key structures (struct key_ref *)
    that can have the bottom bit of the address set to indicate the possession of
    a key. This is propagated through searches from the keyring to the discovered
    key. It has been made a separate type so that the compiler can spot attempts
    to dereference a potentially incorrect pointer.
    
    The "possession" attribute can't be attached to a key structure directly as
    it's not an intrinsic property of a key.
    
    Pointers to keys have been replaced with struct key_ref *'s wherever
    possession information needs to be passed through.
    
    This does assume that the bottom bit of the pointer will always be zero on
    return from kmem_cache_alloc().
    
    The key reference type has been made into a typedef so that at least it can be
    located in the sources, even though it's basically a pointer to an undefined
    type. I've also renamed the accessor functions to be more useful, and all
    reference variables should now end in "_ref".
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5134fc15b643dc36eb9aa77e4318b886844a9ac5
Author: Paul Jackson <pj@sgi.com>
Date:   Wed Sep 28 06:42:24 2005 -0700

    [PATCH] cpuset read past eof memory leak fix
    
    Don't leak a page of memory if user reads a cpuset file past eof.
    
    Signed-off-by: KUROSAWA Takahiro <kurosawa@valinux.co.jp>
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dd3c1df95fb29e9227f16ccd7d786d129e2b34d
Merge: 5c38230... a1c337a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 28 07:47:55 2005 -0700

    Merge branch 'for-linus' from master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit 5c382300876f2337f7b945c159ffcaf285f296ea
Author: Alok N Kataria <alokk@calsoftinc.com>
Date:   Tue Sep 27 21:45:46 2005 -0700

    [PATCH] kmalloc_node IRQ safety fix
    
    In kmalloc_node we are checking if the allocation is for the same node when
    interrupts are "on".  This may lead to an allocation on another node than
    intended.
    
    This patch just shifts the check for the current node in __cache_alloc_node
    when interrupts are disabled.
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f9578b70a9f112bfb541e1d5ab486a376e64503
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Sep 27 21:45:45 2005 -0700

    [PATCH] ppc64: More hugepage fixes
    
    My previous patch fixing invalidation of huge PTEs wasn't good enough, we
    still had an issue if a PTE invalidation batch contained both small and
    large pages.  This patch fixes this by making sure the batch is flushed if
    the page size fed to it changes.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 485ef69edefd7fc7f351c94d0d77b3ed8a242f7b
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Tue Sep 27 21:45:45 2005 -0700

    [PATCH] device-mapper: Fix queue_if_no_path initialisation
    
    When creating a multipath device, if the queue_if_no_path parameter is
    specified it gets ignored.
    
    While the queue_if_no_path variable is correctly set to 1, the
    saved_queue_if_no_path gets set to 0.  When the device is subsequently made
    live (resumed), the saved value (0) always overwrites the live value (1) so
    the option *always* gets turned off.
    
    The fix adds a parameter to the queue_if_no_path() function to indicate
    whether the previous value should be preserved or not - if not, as when the
    device is being set up, the saved value is set to the new value (1).
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 269fd2a6f84828fd96218d164dace8c413fa5c03
Author: goggin, edward <egoggin@emc.com>
Date:   Tue Sep 27 21:45:44 2005 -0700

    [PATCH] device-mapper: Trigger an event when a table is deleted
    
    If anything is waiting on a device's table when the device is removed, we
    must first wake it up so it will release its reference.  Otherwise the
    table's reference count will not drop to zero and the table will not get
    removed.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7347c20c410c300be0db4c132945fd02e54110
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Sep 27 21:45:43 2005 -0700

    [PATCH] swsusp: avoid problems if there are too many pages to save
    
    The following patch makes swsusp avoid problems during resume if there are
    too many pages to save on suspend.  It adds a constant that allows us to
    verify if we are going to save too many pages and implements the check
    (this is done as early as we can tell that the check will trigger, which is
    in swsusp_alloc()).
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f65a4d10c8a4eb9f919cf416e5dcd720b7d20f50
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Sep 27 21:45:41 2005 -0700

    [PATCH] orinoco: Fix flood of kernel log with stupid WE warnings
    
    Latest wireless extensions moved a field from netdev -> wireless_handlers.
    The WE core will now printk a warning on every call to get_wireless_stats()
    on a driver that still uses the old field.  This patch fixes orinoco.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3ca80935100af47f226be439cb266378dab7bf7
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 27 21:45:38 2005 -0700

    [PATCH] ppc64: Add missing barrier() in kexec code
    
    Mikey and I were testing kexec and hit a lockup.  It turns out gcc 4.0
    optimises the kexec_prepare_cpus loop so we avoid reloading paca.hw_cpu_id.
     A gcc barrier() fixes the problem.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed90fb4a19956cece996eb1d26534f592918730e
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Sep 27 21:45:37 2005 -0700

    [PATCH] cpuset maintainers
    
    Specify the cpuset maintainers.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Simon Derr <simon.derr@bull.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c132b5fe6579ed4b4892c02fe6c05f7e3afc579
Author: john stultz <johnstul@us.ibm.com>
Date:   Tue Sep 27 21:45:36 2005 -0700

    [PATCH] x86-64: Fix bad assumption that dualcore cpus have synced TSCs
    
    This should resolve the issue seen in bugme bug #5105, where it is assumed
    that dualcore x86_64 systems have synced TSCs.  This is not the case, and
    alternate timesources should be used instead.
    
    For more details, see:
    http://bugzilla.kernel.org/show_bug.cgi?id=5105
    
    Andi's earlier concerns that the TSCs should be synced on dualcore systems
    have been resolved by confirmation from AMD folks that they can be
    unsynced.
    
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9d014afc3609e3094fd06176380ed057edd4a1b
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 27 21:45:35 2005 -0700

    [PATCH] Add IPMI poweroff control to sysfs
    
    Put the IPMI poweroff_powercycle parameter into sysfs.  This field is
    dynamically settable and is valuable to have in sysfs.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4208b9a9538baabad197276076bc1d4f52d42b9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Sep 27 21:45:35 2005 -0700

    [PATCH] ppc: fix stupid thinko in oprofile fix
    
    I did something stupid in my oprofile fix, here's the obvious fix:
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f36462f078403c1859a7e58177b28e01b3a179e4
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Sep 27 21:45:34 2005 -0700

    [PATCH] Ignore trailing whitespace on kernel parameters correctly
    
    Dave Jones says:
    
    ... if the modprobe.conf has trailing whitespace, modules fail to load
    with the following helpful message..
    
    	snd_intel8x0: Unknown parameter `'
    
    Previous version truncated last argument.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3306dd5f7eb2e699f36a4a313fca4b48b18d5e1
Author: Davide Libenzi <davidel@xmailserver.org>
Date:   Tue Sep 27 21:45:33 2005 -0700

    [PATCH] epoll: handle timeout overflow
    
    Handle the timeout upper boundary for epoll.
    
    Signed-off-by: Davide Libenzi <davidel@xmailserver.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2d613799af915da1fd78463ba8ec5086a0d6f92
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Sep 27 21:45:32 2005 -0700

    [PATCH] swsusp: prevent possible memory leak
    
    Prevent swsusp from leaking some memory in case of an error in
    read_pagedir().  It also prevents the BUG_ON() from triggering if there's
    an error while reading swap.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 254b54771cc4c00002f796be65d2885191dca9dc
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Sep 27 21:45:31 2005 -0700

    [PATCH] swsusp: remove wrong code from data_free
    
    The following patch removes some wrong code from the data_free() function
    in swsusp.
    
    This function could only be called if there's an error while writing the
    suspend image to swap, so it is not triggered easily.  However, if
    triggered, it would probably corrupt some memory.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 249a6771afcdfaca0ac178f63343aff2c4dc2853
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 27 21:45:30 2005 -0700

    [PATCH] pktcdvd: MAINTAINERS record
    
    Add a MAINTAINERS entry for the pktcdvd driver.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88bdcc5d5e9a7ea280f99262f48b70aba9d949bf
Author: Jon Burgess <jburgess@uklinux.net>
Date:   Tue Sep 27 21:45:26 2005 -0700

    [PATCH] dvb: fix NULL pointer dereference when loading the budget-av module
    
    Ralph Metzler wrote:
    > AFAIR, there is a bug in tda10021.c in tda10021_readreg() which
    > references state->frontend.dvb->num
    > This is fatal if the frontend is not at the probed address and thus
    > not yet registered (no dvb entry set yet -> NULL pointer ...).
    
    The attached patch should get rid of the oops.
    
    Signed-off-by: Jon Burgess <jburgess@uklinux.net>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b8dd17762194ec77066d339e0b2866b0c66b715
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Tue Sep 27 21:45:24 2005 -0700

    [PATCH] v9fs: fix races in fid allocation
    
    Fid management cleanup.  The patch attempts to fix the races in dentry's
    fid management.
    
    Dentries don't keep the opened fids anymore, they are moved to the file
    structs.  Ideally there should be no more than one fid with fidcreate equal
    to zero in the dentry's list of fids.
    
    v9fs_fid_create initializes the important fields (fid, fidcreated) before
    v9fs_fid is added to the list.  v9fs_fid_lookup returns only fids that are
    not created by v9fs_create.  v9fs_fid_get_created returns the fid created
    by the same process by v9fs_create (if any) and removes it from dentry's
    list
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc7b5fd6b0d3beb41f9e5e3a94dd1eadf52209f3
Author: Chris Sykes <chris@sigsegv.plus.com>
Date:   Tue Sep 27 21:45:23 2005 -0700

    [PATCH] Fix ext3_new_inode() failure paths
    
    Fix failure paths in ext3_new_inode() and clean up duplicated code: -
    DQUOT_DROP() was not being called if ext3_init_security() failed.
    
    Signed-off-by: Chris Sykes <chris@sigsegv.plus.com>
    Cc: Stephen Smalley <sds@epoch.ncsc.mil>
    Cc: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ed6c2fb34a1fb493caec8a9644d05bb880a6923
Author: Chris Sykes <chris@sigsegv.plus.com>
Date:   Tue Sep 27 21:45:22 2005 -0700

    [PATCH] Fix ext2_new_inode() failure paths
    
    Fix failure paths in ext2_new_inode() and clean up duplicated code: -
    DQUOT_DROP() was not being called if ext2_init_security() failed.
    
    Signed-off-by: Chris Sykes <chris@sigsegv.plus.com>
    Cc: Stephen Smalley <sds@epoch.ncsc.mil>
    Cc: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee4e52719ce474af339f4b81ece2ce9ecf920dfd
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 27 21:45:21 2005 -0700

    [PATCH] fuse: check reserved node ID values
    
    This patch checks reserved node ID values returned by lookup and creation
    operations.  In case one of the reserved values is sent, return -EIO.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 909021ea7a8f4ef13af54935b87b03a20906e08a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 27 21:45:20 2005 -0700

    [PATCH] fuse: add required version info
    
    Add information about required version of the userspace library/utilities
    to Documentation/Changes.  Also add pointer to this and to FUSE
    documentation from Kconfig.
    
    Thanks to Anton Altaparmakov for the reminder.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b1f3124618b54cf125dea3a074b9cf469117723
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue Sep 27 21:45:18 2005 -0700

    [PATCH] mm: move_pte to remap ZERO_PAGE
    
    Move the ZERO_PAGE remapping complexity to the move_pte macro in
    asm-generic, have it conditionally depend on
    __HAVE_ARCH_MULTIPLE_ZERO_PAGE, which gets defined for MIPS.
    
    For architectures without __HAVE_ARCH_MULTIPLE_ZERO_PAGE, move_pte becomes
    a noop.
    
    From: Hugh Dickins <hugh@veritas.com>
    
    Fix nasty little bug we've missed in Nick's mremap move ZERO_PAGE patch.
    The "pte" at that point may be a swap entry or a pte_file entry: we must
    check pte_present before perhaps corrupting such an entry.
    
    Patch below against 2.6.14-rc2-mm1, but the same bug is in 2.6.14-rc2's
    mm/mremap.c, and more dangerous there since it's affecting all arches: I
    think the safest course is to send Nick's patch and Yoichi's build fix and
    this fix (build tested) on to Linus - so only MIPS can be affected.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2212bc7db13268bef0799d9ff4b2e511c284885
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 27 22:50:06 2005 -0700

    [SPARC64]: Add missing IDs for newer cpus.
    
    Also, the us3_cpufreq driver can work on Ultra-IV and IV+.
    They use the SAFARI bus register to control the clock divider
    just like Ultra-III and III+ do.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f16af555cc46a724507da371fbac94b430c93315
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 27 22:37:08 2005 -0700

    [SPARC64]: Add defines for 32MB/256MB PTE page size on Ultra-IV+.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64233bffbb50f12e576c61d1698a573c8033004a
Author: Oliver Dawid <oliver@helios.de>
Date:   Tue Sep 27 16:11:29 2005 -0700

    [APPLETALK]: Fix broadcast bug.
    
    From: Oliver Dawid <oliver@helios.de>
    
    we found a bug in net/appletalk/ddp.c concerning broadcast packets. In
    kernel 2.4 it was working fine. The bug first occured 4 years ago when
    switching to new SNAP layer handling. This bug can be splitted up into a
    sending(1) and reception(2) problem:
    
    Sending(1)
    In kernel 2.4 broadcast packets were sent to a matching ethernet device
    and atalk_rcv() was called to receive it as "loopback" (so loopback
    packets were shortcutted and handled in DDP layer).
    
    When switching to the new SNAP structure, this shortcut was removed and
    the loopback packet was send to SNAP layer. The author forgot to replace
    the remote device pointer by the loopback device pointer before sending
    the packet to SNAP layer (by calling ddp_dl->request() ) therfor the
    packet was not sent back by underlying layers to ddp's atalk_rcv().
    
    Reception(2)
    In atalk_rcv() a packet received by this loopback mechanism contains now
    the (rigth) loopback device pointer (in Kernel 2.4 it was the (wrong)
    remote ethernet device pointer) and therefor no matching socket will be
    found to deliver this packet to. Because a broadcast packet should be
    send to the first matching socket (as it is done in many other protocols
    (?)), we removed the network comparison in broadcast case.
    
    Below you will find a patch to correct this bug. Its diffed to kernel
    2.6.14-rc1
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba645c16026ed733a51f904df34756f61bc155fc
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Sep 27 16:03:05 2005 -0700

    [NET]: Slightly optimize ethernet address comparison.
    
    We know the thing is at least 2-byte aligned, so take
    advantage of that instead of invoking memcmp() which
    results in truly horrifically inefficient code because
    it can't assume anything about alignment.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2fab35d78f32fc107e1af4b1ec23f557fa20d911
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 27 15:59:43 2005 -0700

    [NET]: Fix GCC4 compile error: sysctl in linux/if_ether.h
    
    The following is generated when compiling a
    recent (2.6.14-rc2-git5) kernel configured for
    ARM, with GCC4.
    
      CC      init/main.o
    In file included from include/linux/netdevice.h:29,
                     from include/net/sock.h:48,
                     from init/main.c:50:
    include/linux/if_ether.h:114: error: array type has incomplete element type
    
    It seems that if CONFIG_SYSCTL is not set, then
    the compiler will throw an error due to the definition
    of the ether_table[] array
    
    Attached is a solution to the problem
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 520d1b830a93086c1f9e969d98f7ef01f0356493
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 27 15:45:15 2005 -0700

    [ROSE]: fix typo (regeistration)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a83cd2cc90bd9390cf03cd40bba204d9ed520633
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 27 15:44:36 2005 -0700

    [ROSE]: check rose_ndevs earlier
    
    * Don't bother with proto registering if rose_ndevs is bad.
    * Make escape structure more coherent.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70ff3b66d79c5110e533f3f2aea1a5b2fc5f8d90
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 27 15:43:46 2005 -0700

    [ROSE]: return sane -E* from rose_proto_init()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3c4ed652e8f2c348ebdd3f2e45664a0e238ee52
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 27 15:42:58 2005 -0700

    [ROSE]: do proto_unregister() on exit paths
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1f26dac32057baaf67d10b45c6b5277db862911d
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Sep 27 15:24:13 2005 -0700

    [NET]: Add Sun Cassini driver.
    
    Written by Adrian Sun (asun@darksunrising.com).
    Ported to 2.6.x by Tom 'spot' Callaway <tcallawa@redhat.com>.
    Further cleaned up and integrated by David S. Miller
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a79af59efd20990473d579b1d8d70bb120f0920c
Author: Frank Filz <ffilzlnx@us.ibm.com>
Date:   Tue Sep 27 15:23:38 2005 -0700

    [NET]: Fix module reference counts for loadable protocol modules
    
    I have been experimenting with loadable protocol modules, and ran into
    several issues with module reference counting.
    
    The first issue was that __module_get failed at the BUG_ON check at
    the top of the routine (checking that my module reference count was
    not zero) when I created the first socket. When sk_alloc() is called,
    my module reference count was still 0. When I looked at why sctp
    didn't have this problem, I discovered that sctp creates a control
    socket during module init (when the module ref count is not 0), which
    keeps the reference count non-zero. This section has been updated to
    address the point Stephen raised about checking the return value of
    try_module_get().
    
    The next problem arose when my socket init routine returned an error.
    This resulted in my module reference count being decremented below 0.
    My socket ops->release routine was also being called. The issue here
    is that sock_release() calls the ops->release routine and decrements
    the ref count if sock->ops is not NULL. Since the socket probably
    didn't get correctly initialized, this should not be done, so we will
    set sock->ops to NULL because we will not call try_module_get().
    
    While searching for another bug, I also noticed that sys_accept() has
    a possibility of doing a module_put() when it did not do an
    __module_get so I re-ordered the call to security_socket_accept().
    
    Signed-off-by: Frank Filz <ffilzlnx@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9356b8fc07dc126cd91d2b12f314d760ab48996e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 27 15:23:16 2005 -0700

    [NET]: Reorder some hot fields of struct net_device
    
    Place them on separate cache lines in SMP to lower memory bouncing
    between multiple CPU accessing the device.
    
         - One part is mostly used on receive path (including
           eth_type_trans()) (poll_list, poll, quota, weight, last_rx,
           dev_addr, broadcast)
    
         - One part is mostly used on queue transmit path (qdisc)
          (queue_lock, qdisc, qdisc_sleeping, qdisc_list, tx_queue_len)
    
         - One part is mostly used on xmit path (device)
          (xmit_lock, xmit_lock_owner, priv, hard_start_xmit, trans_start)
    
    'features' is placed outside of these hot points, in a location that
    may be shared by all cpus (because mostly read)
    
    name_hlist is moved close to name[IFNAMSIZ] to speedup __dev_get_by_name()
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2d7ceece08ad940d0ceac98ab1b5a3b82dfc2a0a
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 27 15:22:58 2005 -0700

    [NET]: Prefetch dev->qdisc_lock in dev_queue_xmit()
    
    We know the lock is going to be taken.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc8dfcb93970ad7139c976356bfc99d7e251deaf
Author: Daniel Phillips <phillips@istop.com>
Date:   Tue Sep 27 15:22:35 2005 -0700

    [NET]: Use non-recursive algorithm in skb_copy_datagram_iovec()
    
    Use iteration instead of recursion.  Fraglists within fraglists
    should never occur, so we BUG check this.
    
    Signed-off-by: Daniel Phillips <phillips@istop.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a1c337afaf4ec4d4eabc75a5e1170d03161de4e1
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Tue Sep 27 13:54:44 2005 -0700

    [IB] mthca: fix hw_ver value returned from mthca_query_device
    
    The IB spec defines the field to be 32 bits, not 16 bits.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 95001ee9256df846e374f116c92ca8e0beec1527
Merge: 63906e4... 0dc4610...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 27 13:33:25 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 63906e41fe70fe8a376c5887429448272a0ee7d4
Merge: 5917583... c8a6c29...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 27 13:32:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 59175839783287d3b03f18460bb3539c69300837
Author: Krzysztof Benedyczak <golbi@mat.uni.torun.pl>
Date:   Tue Sep 27 22:21:36 2005 +0200

    [PATCH] Make POSIX message queue sys_mq_open() honor umask
    
    We ignored umask when creating new queues via mq_open (when creating
    with open() on mqueue fs it is ok of course).  According to the
    specification this a bug.  This trivial patch fixes this.
    
    Signed-off-by: Krzysztof Benedyczak <golbi@mat.uni.torun.pl>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8a6c2963982c68475f409aeee21aa80b923cb9c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 27 12:13:38 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f9804ddbeec2ea709255830a8822bfb4e7584f6a
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Sep 27 12:13:10 2005 -0700

    [TG3]: misc. fixes
    
    Fix interrupt test handler by adding check for IRQ assertion in
    PCI_STATE register in addition to the status block updated bit.
    
    Add test for valid ethernet address in tg3_set_mac_addr().
    
    Add tg3_bus_string() to setup the PCI bus speed/width string for all
    PCI/PCIX/PCI Express devices. This is used to print the bus type
    during init_one().
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c94e39418ab6eccf863581f4e0d847da0080b2d3
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Sep 27 12:12:42 2005 -0700

    [TG3]: 5780 PHY fixes
    
    Fix 5780 PHY related problems:
    
    1. MAC_RX_MODE reset must be done before setting up the MAC_MODE
       register on 5705_PLUS chips or the chip will stop receiving after
       a while. The MAC_RX_MODE reset is needed to prevent intermittently
       losing the first receive packet on serdes chips.
    
    2. Skip MAC loopback test on 5780 because of hardware errata. Normal
       traffic including PHY loopback is not affected by the errata.
    
    3. PHY loopback fails intermittently on 5708S and this is fixed by
       putting the PHY in loopback mode first before programming the MAC
       mode register. A MAC_RX_MODE reset is also added.
    
    4. Return -EINVAL in tg3_nway_reset() if device is in TBI mode. Allow
       nway_reset if 5780S is in parallel detect mode.
    
    5. Add missing PHY IDs in KNOWN_PHY_ID() macro.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 667347f1ca7e099f6833551f194cf2bcc778871b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 27 12:07:44 2005 -0700

    [NEIGH]: Add debugging check when adding timers.
    
    If we double-add a neighbour entry timer, which should be
    impossible but has been reported, dump the current state of
    the entry so that we can debug this.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f02b16bea2d8411b21a531fc381e066985895387
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Sep 26 21:12:26 2005 -0700

    [IB] mthca: Round up number of slots in HCA context memory table
    
    When allocating a table for mem-free HCA context, don't assume that
    obj_size * nobj is an even multiple of MTHCA_TABLE_CHUNK_SIZE.  In
    particular, make sure we allocate at least one slot even if the table
    is smaller than MTHCA_TABLE_CHUNK_SIZE.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 5c1f4cac6ff75a4a602bae960a054ed3df7e9765
Merge: c6a519d... 56e9b26...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 26 18:33:26 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit c6a519d2aac024d8ca5658bddd78af474b274e4b
Merge: bf0cbb3... 819ccc8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 26 18:32:48 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit bf0cbb3e4264e9d6493af757f63d4b0527d21eab
Merge: 0b15569... 4fb7edc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 26 18:31:36 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/brodo/pcmcia-fixes-2.6

commit 0b1556945475e8529328edf98ff0d201ed133edb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 07:49:27 2005 +0100

    [PATCH] missing dependency on arm O= builds
    
    	arm maketools needs include/asm-arm in place in the build tree.
    On normal builds it's always there, of course, but on O= it's created
    (by generic code) too late - when we get to asm-offset.h.
    
    	We used to get away with that by accident - creation of
    include/asm-arm/arch symlink creates include/asm-arm and it happened
    to go before maketools.  However, we did not have such dependency,
    so that luck didn't last - now maketools is picked first and we are screwed.
    
    	Both the symlink and maketools are prerequisites of the same
    target (archprepare).  This fix is obvious - make the latter explicitly
    depend on the former and be done with that.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a880948b2b88c05af9a471ca5c52883e64d3f7b8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 06:19:28 2005 +0100

    [PATCH] m32r: more basic __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c74dbac71419cdeaca8cd637ee666d6947961695
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 06:19:28 2005 +0100

    [PATCH] m32r: set CHECKFLAGS properly
    
    We do _not_ need "sparse" in sparse arguments ;-)
    
    What we do need is __BIG_ENDIAN__; right now unconditional, when m32r
    starts using CPU_LITTLE_ENDIAN, we'll need to adjust.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24558a0f7a00fccd19a6e6502956463f056ce90e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 06:19:28 2005 +0100

    [PATCH] m32r: missing __iomem in ioremap() declaration
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce3a161e693388aaa66d43d26156053311a39b7d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 05:49:44 2005 +0100

    [PATCH] useless includes of linux/irq.h in arch/i386
    
    	Most of these guys are simply not needed (pulled by other stuff
    via asm-i386/hardirq.h).  One that is not entirely useless is hilarious -
    arch/i386/oprofile/nmi_timer_int.c includes linux/irq.h... as a way to
    get linux/errno.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7625d483a454cbc8090c5d304eea0847210d6b99
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 26 05:25:59 2005 +0100

    [PATCH] missing asm/irq.h (cs89x0)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dc461069879b45a2d5333bd16990f8080a318fd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 26 16:12:18 2005 -0700

    [SPARC64]: Do not do TLB pre-filling any more.
    
    In order to do it correctly on UltraSPARC-III+ and later we'd
    need to add some complicated code to set the TAG access extension
    register before loading the TLB.
    
    Since this optimization gives questionable gains, it's best to
    just remove it for now instead of adding the fix for Ultra-III+
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5bd50a9533533d7b9ac3469fa679b2368e7e26c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 26 16:06:03 2005 -0700

    [SPARC64]: Simplify Spitfire D-cache page flush.
    
    It tries to batch up the tag loads and comparisons, and
    then the stores.  And this is just complicated instead
    of efficient.
    
    Also, make the symbol of the Cheetah version more grepable.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1640a2c385a860ef25be4a8d18a528c4b6f02bd6
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Sep 20 12:57:11 2005 -0700

    [SCSI] aacraid: remove aac_insert_entry
    
    Received from Mark Salyzyn from Adaptec.
    
    High Priority Queues have *never* been used in the entire history of the
    aac based adapters. Associated with this, aac_insert_entry can be
    removed, SavedIrql can be removed & padding variable can be removed.
    With the movement of SavedIrql out & replaced with an automatic variable
    qflags, the locking can be refined somewhat. The sparse warnings did not
    catch the need for byte swapping in the 'dprintk' debugging print
    macros, so fixed this up when this code was moved outside of the now
    refined locking.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 63a70eeaafe0e17e7f45cba495cb457d06070419
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Sep 20 12:57:04 2005 -0700

    [SCSI] aacraid: fib size math fix
    
    Received from Mark Salyzyn from Adaptec.
    
    The size of the command packet's scatter gather list maximum size was
    miscalculated in the low range leading to the driver initialization
    limiting the maximum i/o size that could go to the Adapter. There were
    no negative operational side effects resulting from this bad math, only
    a subtle limit in performance of the Adapter at the top end of the
    range.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9203344cb8ecc554a1d36eae6661235ed422cf59
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Sep 20 12:56:50 2005 -0700

    [SCSI] aacraid: initialization timeout
    
    Received from Mark Salyzyn from Adaptec.
    
    In the rare instances where the adapter, or the motherboard, is
    misbehaving; driver initialization or shutdown becomes problematic. By
    introducing a 3 minute timeout on the first interrupt driven command
    during initialization, or the issuance of the adapter shutdown command
    during driver unload, we can resolve the lockup problems induced by
    common (but rare) hardware misbehaviors.
    
    The timeout during initialization, should it occur, is accompanied by a
    message presented to the console and the logs indicating that the user
    should inspect and resolve problems with interrupt routing.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 08efb7b6116927c8b6e0af5064448e3aa13300e6
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Sep 20 12:56:36 2005 -0700

    [SCSI] aacraid: error return checking
    
    This patch adds some additional error return checking and error return
    value propagation during initialization. Also, the deprecation of
    pci_module_init with pci_register_driver along with the change in return
    values.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 131256cf203d0df62014dda8453a70cb6af0d0bb
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Sep 26 13:04:56 2005 -0700

    [SCSI] aacraid: handle AIF hotplug events (update)
    
    Received from Mark Salyzyn from Adaptec.
    
    Hotplug sniffs the AIFs (events) from the adapter and if a container
    change resulting in the device going offline (container zero), online
    (container zero completed) or changing capacity (morph) it will take
    actions by calling the appropriate API.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2f130980d14cb938226011875ca5224cd46dc1f9
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Sep 26 13:02:15 2005 -0700

    [SCSI] aacraid: aacraid: AIF preallocation (update)
    
    Recevied from Mark Salyzyn from Adaptec.
    
    Aif pre-allocation is used to pull the kmalloc outside of the locks.
    
    Applies to the scsi-misc-2.6 git tree.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7a8cf29d69e077dfe90e327859201fd9b75a47ce
Author: Mark Haverkamp <markh@osdl.org>
Date:   Thu Sep 22 09:15:24 2005 -0700

    [SCSI] aacraid: Greater than 2TB capacity support
    
    Received from Mark Salyzyn from Adaptec.
    
    There are a few adapters that are capable of creating devices with this large
    of a capacity, but now that we have the large fib support in, the management
    applications will be capable of generating them.  The problem is, once they are
    created, the driver will not be able to access the devices correctly without
    this patch.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c4a3e0a529ab3e65223e81681c7c6b1bc188fa58
Author: Bagalkote, Sreenivas <Sreenivas.Bagalkote@engenio.com>
Date:   Tue Sep 20 17:46:58 2005 -0400

    [SCSI] MegaRAID SAS RAID: new driver
    
    Signed-off-by: Sreenivas Bagalkote <Sreenivas.Bagalkote@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 56e9b263242ca80a70abd8831343b268315c27dc
Merge: 188bab3... 8420e1b...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 26 15:29:31 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/llc-2.6

commit 188bab3ae0ed164bc18f98be932512d777dd038b
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Sep 26 15:25:11 2005 -0700

    [NETFILTER]: Fix invalid module autoloading by splitting iptable_nat
    
    When you've enabled conntrack and NAT as a module (standard case in all
    distributions), and you've also enabled the new conntrack netlink
    interface, loading ip_conntrack_netlink.ko will auto-load iptable_nat.ko.
    This causes a huge performance penalty, since for every packet you iterate
    the nat code, even if you don't want it.
    
    This patch splits iptable_nat.ko into the NAT core (ip_nat.ko) and the
    iptables frontend (iptable_nat.ko).  Threfore, ip_conntrack_netlink.ko will
    only pull ip_nat.ko, but not the frontend.  ip_nat.ko will "only" allocate
    some resources, but not affect runtime performance.
    
    This separation is also a nice step in anticipation of new packet filters
    (nf-hipac, ipset, pkttables) being able to use the NAT core.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b85daee0e497c8fe7c4dc3531674ede645b37cdf
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 26 15:23:58 2005 -0700

    [AF_PACKET]: Remove bogus checks added to packet_sendmsg().
    
    These broke existing apps, and the checks are superfluous
    as the values being verified aren't even used.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c62dba9011b93fd88fde929848582b2a98309878
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Sep 26 15:10:16 2005 -0700

    [IPV6]: Fix [Bug 5306] Oops on IPv6 route lookup
    
    > Steps to reproduce:
    > 1. Boot Linux, do NOT setup any IPv6 routes
    > 2. ip route get 2001::1 (or any unroutable address)
    
    Well caught.  We never set rt6i_idev on ip6_null_entry.
    This patch should make the problem go away.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit acd042bb2de50d4e6fb969281a00cc8b8b71e46d
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Sep 26 15:06:50 2005 -0700

    [CONNECTOR]: async connector mode.
    
    If input message rate from userspace is too high, do not drop them,
    but try to deliver using work queue allocation.
    
    Failing there is some kind of congestion control.
    
    It also removes warn_on on this condition, which scares people.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9d717a7b413f227ebb2d61d9c118335f7292137
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon Sep 26 14:28:02 2005 -0700

    [NET]: Make sure ctl buffer is aligned properly in sys_sendmsg().
    
    It's on the stack and declared as "unsigned char[]", but pointers
    and similar can be in here thus we need to give it an explicit
    alignment attribute.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 63c47c286d062d93e0501d60797274c84a587e97
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Sep 26 13:01:03 2005 -0700

    [IB] uverbs: Close some exploitable races
    
    Al Viro pointed out that the current IB userspace verbs interface
    allows userspace to cause mischief by closing file descriptors before
    we're ready, or issuing the same command twice at the same time.  This
    patch closes those races, and fixes other obvious problems such as a
    module reference leak.
    
    Some other interface bogosities will require an ABI change to fix
    properly, so I'm deferring those fixes until 2.6.15.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 819ccc86a43739e0cf443b6d6641a8722869be01
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Mon Sep 26 19:52:57 2005 +0100

    [ARM] 2936/1: ixp4xx default config fixes
    
    Patch from Vincent Sanders
    
    A recent patch which made IXP4xx mach_desc's depend on config options
    had the effect of not building the kernel for several machines it
    possibly could be, this patch updates the default config to ensure all
    possible machines are built for by default.
    
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6132f9e146150473f803323dc8064a5506e33952
Author: David Vrabel <dvrabel@arcom.com>
Date:   Mon Sep 26 19:52:56 2005 +0100

    [ARM] 2935/1: ixp4xx: fix warnings in ixp4xx_set_irq_type
    
    Patch from David Vrabel
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44dd823b00fa64bf01e53557d28555011f122a88
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Sep 26 09:42:09 2005 -0700

    [IB] mthca: Fix off by one bug in mthca_map_cmd
    
    The loop in mthca_map_cmd() would fill one entry past the end of the
    mailbox buffer before calling the firmware command.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f7ed3a5971da98acdc506bdbdef25cfe51c334a2
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Sep 26 09:29:33 2005 -0700

    [IB] mthca: fix off by one in clr_int calculation
    
    We should use the first word of the clear interrupt register if
    the bit we're after is < 32, not < 31.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 018771f435388f22f388eb8658c652086fb3633e
Author: Roland Dreier <rolandd@cisco.com>
Date:   Wed Sep 21 21:40:12 2005 -0700

    [IB] mthca: Fix doorbell record resource leak
    
    If we allocate a bunch of doorbell records and then free them, we'll
    end up with completely empty pages, which we then free.  However, when
    we come back to allocate more doorbell pages, we have to reallocate
    those empty pages rather than always trying to take a slot that we've
    never used.  If we don't, we eventually use up every slot and fail to
    allocate a doorbell record, even though we have plenty of free space.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e2fcc61ef0d654887b651bd99ffcb52f7344b836
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 26 17:02:41 2005 +0100

    NTFS: Re-fix sparse warnings in a more correct way, i.e. don't use an enum with
          different types in it but #define the two constants instead.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit cbf8fd9f5aa5164e05cb04d4a34fcbe82f60beeb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Sep 26 15:30:20 2005 +0100

    [ARM] Remove SA_IRQNOMASK
    
    SA_IRQNOMASK is unused, remove it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4fb7edce52e5b6cf41e3375822d74a27f0b6f2dd
Author: Kars de Jong <jongk@linux-m68k.org>
Date:   Sun Sep 25 14:39:46 2005 +0200

    [PATCH] pcmcia: fix cross-platform issues with pcmcia module aliases
    
    - Added a missing TO_NATIVE call to scripts/mod/file2alias.c:do_pcmcia_entry()
    - Add an alignment attribute to struct pcmcia_device_no to solve an alignment
      issue seen when cross-compiling on x86 for m68k.
    
    Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 2570b746484cfddf4b7b4715dbb69d53d5284f4d
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Sat Sep 17 11:17:56 2005 +0200

    [PATCH] pcmcia: update ID for NinjaATA
    
    Christian Zoz reported there are multiple NinjaATA devices all sharing the
    second product ID string, but not the first one.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit f9cb8b71e7d6c858b1afe665fd0a09169fdf4390
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Sat Sep 24 23:12:46 2005 -0700

    [PATCH] yenta: more ENE bridges
    
    Adds better support for the CB-710, CB-712, CB-720 and CB-722 bridges from EnE
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit a42f0dc4376fc574980864f890d1527894719cde
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Sat Sep 24 23:12:44 2005 -0700

    [PATCH] pcmcia: new IDs for serial_cs
    
    Add new ID to serial_cs.c; the CIS fimware override is available by the
    manufacturer at http://www.sierrawireless.com .  Remember to name the CIS
    binary SW_7xx_SER.cis and to put it into /lib/firmware/
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 6c1a10dba92cbacb58563f5eacf93807125b488a
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Tue Sep 20 14:12:17 2005 -0700

    [PATCH] yenta: add support for more TI bridges
    
    Support some more TI cardbus bridges.  most of them are multifunction
    devices which adds 1394 controllers, smartcard readers etc.  this could
    also help with the various problems with the XX21 controllers seen on the
    linux-pcmcia list.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 81000808b636b75a0ff5ef86c28f24fc6f5151eb
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Sat Sep 24 23:12:40 2005 -0700

    [PATCH] pcmcia: fix Kconfig dependency
    
    TCIC depends on ISA.  It is used with ISA-bus system only.
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 8e5d17ebe41eb98a538ef13aad36da5136701aab
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed Sep 7 16:00:28 2005 -0700

    [PATCH] yenta: tiny cleanup
    
    pci_set_power_state is not needed, as we call pci_enable_device() somewhere
    else.  Also, the resource we write to PCI_BASE_ADDRESS_0 needs to be converted
    to bus-centric view first.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit a413c09094e4df714c274690928dcf8125daf7e8
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Wed Aug 24 17:03:23 2005 +0200

    [PATCH] yenta: don't mess with bridge control register
    
    In interrupt probing (both ISA and PCI) the bridge control register is used
    to change interrupt routing to ISA or PCI by changing bit 7.  But this bit
    only controls the routing of card functional interrupts, not the CSC
    interrupts which are used for interrupt probing.
    
    A bad side effect of messing with this register in yenta_probe_irq() is
    that it can lead to irq storms if a card is inserted and already powered by
    the BIOS.
    
    Usage in yenta_sock_init() and yenta_config_init() seem to be fishy as well.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 8c3520d4eb3b1bbf2e45fbae8dcfb8db06d5e775
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Sun Aug 21 22:29:26 2005 -0700

    [PATCH] yenta: auto-tune EnE bridges for CardBus cards
    
    Echo Audio cardbus products are known to be incompatible with EnE bridges.
    in order to maybe solve the problem a EnE specific test bit has to be set,
    another cleared...but other setups have a good chance to break when just
    forcing the bits.  so do the whole thingy automatically.
    
    The patch adds a hook in cb_alloc() that allows special tuning for the
    different chipsets.  for ene just match the Echo products and set/clear the
    test bits, defaults to do the same thing as w/o the patch to not break
    working setups.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit e8c2cd99a3933d93413910bc93cbd5b53177110b
Merge: 5a8c0cc... 8ddec74...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 26 10:50:29 2005 +0100

    Merge branch 'master' of /home/src/linux-2.6/

commit 5a8c0cc32bb6e029cd9c36f655c6b0955b0d9967
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 26 10:48:54 2005 +0100

    NTFS: More $LogFile handling fixes: when chkdsk has been run, it can leave the
          restart pages in the journal without multi sector transfer protection
          fixups (i.e. the update sequence array is empty and in fact does not
          exist).
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 838bf9675a3d1ede01408aa105357b9ab43faf1b
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 26 10:45:46 2005 +0100

    NTFS: Fix the definition of the CHKD ntfs record magic.  It had an off by
          two error causing it to be CHKB instead of CHKD.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 80dc0d6b44ce0f01df58d8899e46612690ed7d81
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 26 00:32:17 2005 -0700

    [SPARC64]: Probe D/I/E-cache config and use.
    
    At boot time, determine the D-cache, I-cache and E-cache size and
    line-size.  Use them in cache flushes when appropriate.
    
    This change was motivated by discovering that the D-cache on
    UltraSparc-IIIi and later are 64K not 32K, and the flushes done by the
    Cheetah error handlers were assuming a 32K size.
    
    There are still some pieces of code that are hard coding things and
    will need to be fixed up at some point.
    
    While we're here, fix the D-cache and I-cache parity error handlers
    to run with interrupts disabled, and when the trap occurs at trap
    level > 1 log the event via a counter displayed in /proc/cpuinfo.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 56425306517ef28a9b480161cdb96d182172bc1d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Sep 25 16:46:57 2005 -0700

    [SPARC64]: Add CONFIG_DEBUG_PAGEALLOC support.
    
    The trick is that we do the kernel linear mapping TLB miss starting
    with an instruction sequence like this:
    
    	ba,pt		%xcc, kvmap_load
    	 xor		%g2, %g4, %g5
    
    succeeded by an instruction sequence which performs a full page table
    walk starting at swapper_pg_dir.
    
    We first take over the trap table from the firmware.  Then, using this
    constant PTE generation for the linear mapping area above, we build
    the kernel page tables for the linear mapping.
    
    After this is setup, we patch that branch above into a "nop", which
    will cause TLB misses to fall through to the full page table walk.
    
    With this, the page unmapping for CONFIG_DEBUG_PAGEALLOC is trivial.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe8b2304e54552cea113318e2f66c45628130fdc
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Sep 25 23:10:33 2005 +0200

    [SCSI] sas: fix remote phy removal
    
    Brown paperbag bug:  sas_rphy_delete was ordered completely
    wrong.  Fix it up to be the same order as sas_phy_delete or
    fc_rport_terminate and fix rphy objects that leaked after module
    removal.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5b58745203f16ab83e50f4a015eea84c416d9279
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Sep 25 23:04:48 2005 +0100

    [ARM] 2934/1: Anubis - fix VA offsets for CPLD registers
    
    Patch from Ben Dooks
    
    The VA addresses of the Anubis CPLD registers
    confoict with the addresses for the ISA space
    maps used by the rest of the s3c2410 architecture
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f04da5def8c460b1b52d3142da827ab01efa3a15
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Sep 25 23:02:49 2005 +0100

    [ARM] 2933/1: S3C2410 - fix serial port warnings
    
    Patch from Ben Dooks
    
    Fix the following warnings produced from
    drivers/char/s3c2410.c.
    drivers/serial/s3c2410.c:757: warning: 'clk' may be used uninitialized
    drivers/serial/s3c2410.c:756: warning: 'clksrc' may be used uninitialized
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44550322cb601ac3f882e7438bbeec971fa1b1a3
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Tue Sep 20 13:32:11 2005 -0700

    [SCSI] qla2xxx: fix remote port timeout with qla2xxx driver
    
    This patch fixes a hole in the rport unblock handling when processing
    fabric events via the ADISC/PLOGI device state machine.  Original code
    would not properly 'unblock' the port upon the port reloging into the
    fabric.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f3a20242db2597312c50abc11f1e747c5d2326a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Sep 22 20:33:28 2005 -0500

    [SCSI] allow REPORT LUN scanning even for LUN 0 PQ of 3
    
    Currently we just ignore the device, which means there are a few
    arrays out there that we don't find.
    
    This patch updates the scsi_report_lun_scan() to take a target instead
    of a device so it can be called on a return of
    SCSI_SCAN_TARGET_PRESENT, which is what a PQ 3 device returns.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 49bfd8db4a39ea14fb3780b162012b4b3611fce8
Author: adam radford <aradford@gmail.com>
Date:   Wed Sep 21 17:20:14 2005 -0700

    [SCSI] 3ware 9000: Add support for 9550SX controllers
    
    Signed-off-by: Adam Radford <linuxraid@amcc.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 52f26deb7c67d5f34910660200b925c1a2b8df8c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Sep 24 23:06:14 2005 -0700

    [SPARC64]: Fix mask formation in tomatillo_wsync_handler()
    
    "1" needs to be "1UL", this is a 64-bit mask we're creating.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ddec7460d2f5db3ac35812c03676b1473d1d668
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Sep 24 16:56:08 2005 -0700

    [NETFILTER] ip_conntrack: Update event cache when status changes
    
    The GRE, SCTP and TCP protocol helpers did not call
    ip_conntrack_event_cache() when updating ct->status.  This patch adds
    the respective calls.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8689c07e47e928f8e329f667df8cf697a37425dd
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 24 16:55:17 2005 -0700

    [IRDA]: *irttp cleanup
    
    * Remove useless comment.
    * Remove useless assertions.
    * Remove useless comparison.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15166fadb0308496bbff50c08ed5fe6a18d5cc4f
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 24 16:54:50 2005 -0700

    [IRDA]: Fix memory leak in irttp_init()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 45fc3b11f1d419ed6c636e5ca84472d9805f520e
Author: Amos Waterland <apw@us.ibm.com>
Date:   Sat Sep 24 16:53:16 2005 -0700

    [NET]: Protect neigh_stat_seq_fops by CONFIG_PROC_FS
    
    From: Amos Waterland <apw@us.ibm.com>
    
    If CONFIG_PROC_FS is not selected, the compiler emits this warning:
    
     net/core/neighbour.c:64: warning: `neigh_stat_seq_fops' defined but not used
    
    Which is correct, because neigh_stat_seq_fops is in fact only
    initialized and used by code that is protected by CONFIG_PROC_FS.  So
    this patch fixes that up.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d67b24c40f81823abe5c1eb808bba1038969142b
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Sep 24 16:52:03 2005 -0700

    [NETFILTER]: Fix ip[6]t_NFQUEUE Kconfig dependency
    
    We have to introduce a separate Kconfig menu entry for the NFQUEUE targets.
    They cannot "just" depend on nfnetlink_queue, since nfnetlink_queue could
    be linked into the kernel, whereas iptables can be a module.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef6bd6eb90ad72ee8ee7ba8b271f27102e9a90c1
Merge: 2e55b57... 6b9ea42...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 24 13:50:35 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-ucb

commit 2e55b57a6000ff05f6aadcddf204ecb42749a332
Merge: f50c028... f993724...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 24 13:49:37 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit f50c02831d833a27321388bc595a3c376ae941e4
Merge: ff13f98... d2f6074...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 24 13:49:01 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit ff13f98b97cb6c5a2d201dfa4db0a2fd0b4d9d50
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Sep 24 02:02:29 2005 -0500

    [PATCH] Input: check switch bitmap when matching handlers
    
    The wwitch bitmap was added to input_device_id structure and we should
    check it when matching handlers and input devices.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2f607484f8210cf19b1730dee26d426a5a770a5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Sep 24 10:42:06 2005 +0100

    [ARM] Fix compiler warnings for memcpy_toio/memcpy_fromio/memset_io
    
    Add 'volatile' to the __iomem pointers for these functions as
    per x86.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6b9ea4213e3a9c9b8de29a001a2b8d8799cbc1c9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Sep 24 10:24:37 2005 +0100

    [MFD] Fix "bious one-bit signed bitfield" errors
    
    ucb1x00-ts declared a couple of one-bit 'int' bitfields.
    Make them unsigned.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f993724210744a9b07cf5496808828c4da6ab6df
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Sep 24 10:12:47 2005 +0100

    [SERIAL] Remove unused variable in clps711x.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 87e807b6c461bbd449496a4c3ab78ab164a4ba97
Merge: 2ead1aa... 536f809...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 23 16:44:52 2005 -0700

    Merge branch 'upstream' from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 2ead1aa6f14ed542af0c9e2302a51ea02128f587
Merge: 7f28f39... c886861...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 23 16:44:01 2005 -0700

    Merge branch 'upstream-fixes' from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit c8868611389aa28e0e5e0d63f468727781eac68c
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Sep 23 09:08:30 2005 -0700

    [PATCH] skge: fix Yukon-Lite A0 workaround
    
    This is one of those workarounds sucked over from sk98lin driver.
    The skge driver needs to detect the Yukon-Lite A0 chip properly,
    and turn of Rx FIFO Flush.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 536f8098026bde1368bbfcbcb9682a7637b73df2
Merge: e86ee66... 3fd07d3...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Sep 23 19:03:21 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 7f28f394bd68e58bf3938c67bbeca7825b4687b8
Merge: dbdb904... 7339432...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 23 14:01:52 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 73394322a4bf4108847ba3c2eee33a81b1b44450
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Sep 23 21:49:58 2005 +0100

    [ARM] Fix context switch with ARMv6 + TLS
    
    We accidentally corrupted the TLS value when clearing out the ARMv6
    exclusive monitor.  Avoid doing so.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dbdb90450059e17e8e005ebd3ce0a1fd6008a0c8
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 23 13:24:10 2005 -0700

    [PATCH] revert oversized kmalloc check
    
    As davem points out, this wasn't such a great idea.  There may be some code
    which does:
    
    	size = 1024*1024;
    	while (kmalloc(size, ...) == 0)
    		size /= 2;
    
    which will now explode.
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86513e726b494796175b6c4fdd705797f01b0ca2
Author: Harald Welte <laforge@netfilter.org>
Date:   Fri Sep 23 13:24:10 2005 -0700

    [PATCH] documentation: sparse no longer uses bk, but git
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7c965084392e23a3494f0247c75795360a3fa0d
Author: Hironobu Ishii <hishii@soft.fujitsu.com>
Date:   Fri Sep 23 13:24:08 2005 -0700

    [PATCH] ipmi_msghandler: inconsistent spin_lock usage
    
    I found an inconsistent spin_lock usage in ipmi_smi_msg_received.
    
    Signed-off-by: Hironobu Ishii <hishii@soft.fujitsu.com>
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67b108131df1230bad20a7279a8897de123d690b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Sep 23 13:24:07 2005 -0700

    [PATCH] ppc64: Fix huge pages MMU mapping bug
    
    Current kernel has a couple of sneaky bugs in the ppc64 hugetlb code that
    cause huge pages to be potentially left stale in the hash table and TLBs
    (improperly invalidated), with all the nasty consequences that can have.
    
    One is that we forgot to set the "secondary" bit in the hash PTEs when
    hashing a huge page in the secondary bucket (fortunately very rare).
    
    The other one is on non-LPAR machines (like Apple G5s), flush_hash_range()
    which is used to flush a batch of PTEs simply did not work for huge pages.
    Historically, our huge page code didn't batch, but this was changed without
    fixing this routine.  This patch fixes both.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2601c2e278863cd48c01bce1377b4c9747893025
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 23 13:24:06 2005 -0700

    [PATCH] atyfb c99 fix
    
    - fix this:
    
      drivers/video/aty/xlinit.c: In function `atyfb_xl_init':
      drivers/video/aty/xlinit.c:256: warning: ISO C90 forbids mixed declarations and code
    
    - repair some kooky coding style
    
    - Use ARRAY_SIZE()
    
    Cc: Tom 'spot' Callaway <tcallawa@redhat.com>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3b5f0d43863402b03b3af9a7eaec0037a823374
Author: Karsten Keil <kkeil@suse.de>
Date:   Fri Sep 23 13:24:05 2005 -0700

    [PATCH] hisax: remove URB_ASYNC_UNLINK
    
    usb_unlink_urb is always async now, so URB_ASYNC_UNLINK was removed from
    core USB and we must do as well.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 188a1eafa03aaa5e5fe6f53e637e704cd2c31c7c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 23 13:22:21 2005 -0700

    Make sure SIGKILL gets proper respect
    
    Bhavesh P. Davda <bhavesh@avaya.com> noticed that SIGKILL wouldn't
    properly kill a process under just the right cicumstances: a stopped
    task that already had another signal queued would get the SIGKILL
    queued onto the shared queue, and there it would remain until SIGCONT.
    
    This simplifies the signal acceptance logic, and fixes the bug in the
    process.
    
    Losely based on an earlier patch by Bhavesh.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 898cf0ecb7959db97d71cbce19685ce73a28d47c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Sep 23 11:59:44 2005 -0700

    [SPARC64]: Mark functions called by paging_init() as __init.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c9ea5db001142a96fec8fed0f92f26892a1b6ac
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Sep 23 11:54:43 2005 -0700

    [SPARC64]: Kill unused variable in setup_arch()
    
    'highest_paddr' is set, but never actually used.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ede1327ea4ca8019ec6df24b3e837def091c26b8
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Aug 30 20:10:14 2005 -0700

    [PATCH] cifs: Add support for suspend
    
    cifsd had been preventing software suspend from completing.
    
    Signed-off-by: Pavel Machek <pavel@suse.de>
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12f44f46bc9c6dc79255e661b085797af395d8da
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Thu Sep 22 21:06:31 2005 -0700

    [PATCH] pci: fixup parent subordinate busnr
    
    I believe the change that broke things is introduction of
    pci_fixup_parent_subordinate_busnr().
    
    The patch here does two things:
    - hunk #1 should fix the problems you've seen when you boot without
      additional "pci" kernel options;
    - hunk #2 supposedly fixes boot with "pci=assign-busses" option which
      otherwise hangs Acer TM81xx machines as reported.
    
    Please try this with and without "pci=assign-busses". If it boots,
    I'd like to see 'lspci -vvx' for both cases.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfab08c097df5f6a60dd07f0f8c78c54e725780b
Merge: eb0e007... 438282d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 23 07:40:53 2005 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit 715dc636b64b57aee7aee7e8b5bf4f5267a6df48
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Fri Sep 23 11:24:28 2005 +0100

    NTFS: Change ntfs_cluster_free() to require a write locked runlist on entry
          since we otherwise get into a lock reversal deadlock if a read locked
          runlist is passed in. In the process also change it to take an ntfs
          inode instead of a vfs inode as parameter.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 9389d79fbf9a0167ff2de87e8796c6bb803219bf
Author: Paul Gortmaker <p_gortmaker@yahoo.com>
Date:   Fri Sep 23 05:18:45 2005 -0400

    [PATCH] 8390 Tx fix for non i386 machines
    
    While this is true, E8390_CMD is zero on i386, and thus there should be no
    effect for these machines.  Machines like Mac, Amiga etc. which use Alan's
    clever register mapping may have a non-zero E8390_CMD and result in bogus
    "transmitter busy" type messages from this bug.
    
    Fixes BUG# 3991.

commit eb0e0076878a4f9e8e6e7e524ded0d6f7d4a6130
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Thu Sep 22 23:48:38 2005 -0700

    [SCTP]: Fix SCTP_SHUTDOWN notifications.
    
    Fix to allow SCTP_SHUTDOWN notifications to be received on 1-1 style
    SCTP SOCK_STREAM sockets.
    
    Add SCTP_SHUTDOWN notification to the receive queue before updating
    the state of the association.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1dfbab59498d6f227c91988bab6c71af049a5333
Author: Harald Welte <laforge@netfilter.org>
Date:   Thu Sep 22 23:46:57 2005 -0700

    [NETFILTER] Fix conntrack event cache deadlock/oops
    
    This patch fixes a number of bugs.  It cannot be reasonably split up in
    multiple fixes, since all bugs interact with each other and affect the same
    function:
    
    Bug #1:
    The event cache code cannot be called while a lock is held.  Therefore, the
    call to ip_conntrack_event_cache() within ip_ct_refresh_acct() needs to be
    moved outside of the locked section.  This fixes a number of 2.6.14-rcX
    oops and deadlock reports.
    
    Bug #2:
    We used to call ct_add_counters() for unconfirmed connections without
    holding a lock.  Since the add operations are not atomic, we could race
    with another CPU.
    
    Bug #3:
    ip_ct_refresh_acct() lost REFRESH events in some cases where refresh
    (and the corresponding event) are desired, but no accounting shall be
    performed.  Both, evenst and accounting implicitly depended on the skb
    parameter bein non-null.   We now re-introduce a non-accounting
    "ip_ct_refresh()" variant to explicitly state the desired behaviour.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a82b748930fce0dab22c64075c38c830ae116904
Author: Harald Welte <laforge@netfilter.org>
Date:   Thu Sep 22 23:45:44 2005 -0700

    [NETFILTER] remove unneeded structure definition from conntrack helper
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 67497205b12e3cb408259cc09b50c3a9d12cd935
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Sep 22 23:45:24 2005 -0700

    [NETFILTER] Fix sparse endian warnings in pptp helper
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ae5d253adcc467b1c52b512bbca9419eb438409
Author: Harald Welte <laforge@netfilter.org>
Date:   Thu Sep 22 23:44:58 2005 -0700

    [NETFILTER] fix DEBUG statement in PPTP helper
    
    As noted by Alexey Dobriyan, the DEBUGP statement prints the wrong
    callID.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2a7bc3c94cbca32d3d6e03e7d5a71662f591d28a
Author: Vlad Drukker <vlad@storewiz.com>
Date:   Thu Sep 22 23:35:34 2005 -0700

    [BRIDGE]: TSO fix in br_dev_queue_push_xmit
    
    Signed-off-by: Vlad Drukker <vlad@storewiz.com>
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83ca28befc43e93849e79c564cda10e39d983e75
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 22 23:32:56 2005 -0700

    [TCP]: Adjust Reno SACK estimate in tcp_fragment
    
    Since the introduction of TSO pcount a year ago, it has been possible
    for tcp_fragment() to cause packets_out to decrease.  Prior to that,
    tcp_retrans_try_collapse() was the only way for that to happen on the
    retransmission path.
    
    When this happens with Reno, it is possible for sasked_out to become
    invalid because it is only an estimate and not tied to any particular
    packet on the retransmission queue.
    
    Therefore we need to adjust sacked_out as well as left_out in the Reno
    case.  The following patch does exactly that.
    
    This bug is pretty difficult to trigger in practice though since you
    need a SACKless peer with a retransmission that occurs just as the
    cached MTU value expires.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e484585ec3ee66cd07a627d3a9e2364640a3807f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:29 2005 -0700

    [PATCH] Add dm-snapshot tutorial in Documentation
    
    I've recently discovered the real functionality of device-mapper snapshots,
    and since they are not well known, I've decided to write some docs for
    them.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10d2c46f9408d404bffef89d5052953a3b1d9288
Author: Nick Wilson <njw@osdl.org>
Date:   Thu Sep 22 21:44:28 2005 -0700

    [PATCH] NFS: fix client oops when debugging is on
    
    nfs_readpage_release() causes an oops while accessing a file with NFS
    debugging turned on (echo 32767 > /proc/sys/sunrpc/nfs_debug) and a kernel
    built with CONFIG_DEBUG_SLAB.
    
    This patch moves the debugging statement above nfs_release_request() to
    avoid accessing freed memory.
    
    Signed-off-by: Nick Wilson <njw@osdl.org>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7b3a4359b25311fb5894c8809478a2df6bed480
Author: Rob Landley <rob@landley.net>
Date:   Thu Sep 22 21:44:27 2005 -0700

    [PATCH] Fix bd_claim() error code.
    
    Problem: In some circumstances, bd_claim() is returning the wrong error
    code.
    
    If we try to swapon an unused block device that isn't swap formatted, we
    get -EINVAL.  But if that same block device is already mounted, we instead
    get -EBUSY, even though it still isn't a valid swap device.
    
    This issue came up on the busybox list trying to get the error message
    from "swapon -a" right.  If a swap device is already enabled, we get -EBUSY,
    and we shouldn't report this as an error.  But we can't distinguish the two
    -EBUSY conditions, which are very different errors.
    
    In the code, bd_claim() returns either 0 or -EBUSY, but in this case busy
    means "somebody other than sys_swapon has already claimed this", and
    _that_ means this block device can't be a valid swap device.  So return
    -EINVAL there.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bdac5d1ed892da54b6b2069e50a47b3aa39460f
Author: Glauber de Oliveira Costa <gocosta@br.ibm.com>
Date:   Thu Sep 22 21:44:26 2005 -0700

    [PATCH] ext3: EXT3_DEBUG build fixes
    
    Fix some warnings and a build error when EXT3_DEBUG is enabled.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f65d9bea8692d7343e4636763f291408f025834f
Author: Clemens Buchacher <drizzd@aon.at>
Date:   Thu Sep 22 21:44:24 2005 -0700

    [PATCH] oss: don't concatenate __FUNCTION__ with strings
    
    It's deprecated. Use "%s", __FUNCTION__ instead.
    
    Signed-off-by: Clemens Buchacher <drizzd@aon.at>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 288a60cf4d7cc35f84f46cd8ffd0b34f9d8e7346
Author: Chris Zankel <czankel@tensilica.com>
Date:   Thu Sep 22 21:44:23 2005 -0700

    [PATCH] xtensa: remove io_remap_page_range and minor clean-ups
    
    Remove io_remap_page_range() from all of Linux 2.6.x (as requested and
    suggested by Randy Dunlap) and minor clean-ups.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fac97ae0b1a206e2952baf1f9eb46305d673adc6
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:22 2005 -0700

    [PATCH] uml: replace printk with "stack-friendly" printf - to report console failure
    
    User get *a lot* confused when consoles don't work but we don't report
    anything.  And, as reported in the comment, using printk to report "your
    console doesn't work" isn't likely to go that far.
    
    Fix the problem on the base of this: stack consumption by host printf().  Use
    kernel sprintf() and os_write_file, using a wild guess that one page will be
    enough for the message, to preallocate the buffer with kmalloc().
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79ae2cb856ed6a8c48f455d52d5ed5960c671e67
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:21 2005 -0700

    [PATCH] uml: use GFP_ATOMIC for allocations under spinlocks.
    
    setup_initial_poll is only called with sigio_lock() held, so use appropriate
    allocation.
    
    Also, parse_chan() can also be called when holding a spinlock (see line_open()
     -> parse_chan_pair()).
    
    I have sporadic problems (spinlock taken twice, with spinlock debugging on UP)
    which could be caused by a sequence like "take spinlock, alloc and go to
    sleep, take again the spinlock in the other thread".
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46db4a42dd1190a311c2fb45106dfd0842c65a94
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:20 2005 -0700

    [PATCH] uml: Fix GFP_ flags usage
    
    GFP_ATOMIC | GFP_KERNEL is meaningless and won't work.  Actually it never
    worked, even in 2.4.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fea03cb40a15e3c6647c0927300202e062e6792a
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:20 2005 -0700

    [PATCH] uml: avoid fixing faults while atomic
    
    Following i386, we should maybe refuse trying to fault in pages when we're
    doing atomic operations, because to handle the fault we could need to take
    already taken spinlocks.
    
    Also, if we're doing an atomic operation (in the sense of in_atomic()) we're
    surely in kernel mode and we're surely going to handle adequately the failed
    fault, so it's safe to behave this way.
    
    Currently, on UML SMP is rarely used, and we don't support PREEMPT, so this is
    unlikely to create problems right now, but it might in the future.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12ebcd73e40e09f0dfddf89e465cc0541e0ff8b1
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:19 2005 -0700

    [PATCH] uml: run mconsole "sysrq" in process context
    
    Things are breaking horribly with sysrq called in interrupt context.  I want
    to try to fix it, but probably this is simpler.  To tell the truth, sysrq is
    normally run in interrupt context, so there shouldn't be any problem.
    
    There's also a warning from the fault handler because it's run in atomic
    context (I have a patch for that, only I deferred it).  This is why I'm doing
    this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc36abf34e13aabbe06cdd060c434b3cdd80e7da
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:18 2005 -0700

    [PATCH] uml: fix condition in tlb flush
    
    Avoid setting w = 0 twice.  Spotted this (trivial) thing which is needed for
    another patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 546fe1cbf91d4d62e3849517c31a2327c992e5c5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:16 2005 -0700

    [PATCH] uml: fix hang in TT mode on fault
    
    The current code doesn't handle well general protection faults on the host -
    it thinks that cr2 is always the address of a page fault.  While actually, on
    general protection faults, that address is not accessible, so we'd better
    assume we couldn't satisfy the fault.  Currently instead we think we've fixed
    it, so we go back, retry the instruction and fault again endlessly.
    
    This leads to the kernel hanging when doing copy_from_user(dest, -1, ...) in
    TT mode, since reading *(-1) causes a GFP, and we don't support kernel
    preemption.
    
    Thanks to Luo Xin for testing UML with LTP and reporting the failures he got.
    
    Cc: Luo Xin <luothing@sina.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69e1e688f5698287b45fbff22a01de91b20804cd
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:15 2005 -0700

    [PATCH] uml: don't redundantly mark pte as newpage in pte_modify
    
    pte_modify marks a page as needing flush, which is redundant because the
    resulting PTE is still set with set_pte, which already handles that.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8bfb94c58238666df0d6856861d18f0f52fc752
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:14 2005 -0700

    [PATCH] strlcat: use for uml umid.c
    
    Simplify the code by using strlcat() instead of strncat() and manual
    appending.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a02d6c051cf3c214aab38e4330b4bcec5f6e3f8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Sep 22 21:44:12 2005 -0700

    [PATCH] uml: don't remove umid files in conflict case
    
    Only remove the UML pidfile and management socket if we created them.
    Currently in case two UMLs are started with the same umid, the second will
    remove the first's ones.
    
    Probably we should also panic() at that point, not sure however.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8686bcd0a5f5e3f599ed9f1028ec9e449e7b87e3
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Sep 22 21:44:11 2005 -0700

    [PATCH] swsusp: fix comments
    
    Fix comments in swsusp.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eafb42707b21beb42bba4eae7b742f837ee9d2e0
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Thu Sep 22 21:44:10 2005 -0700

    [PATCH] __kmalloc: Generate BUG if size requested is too large.
    
    I had an issue on ia64 where I got a bug in kernel/workqueue because
    kzalloc returned a NULL pointer due to the task structure getting too big
    for the slab allocator.  Usually these cases are caught by the kmalloc
    macro in include/linux/slab.h.
    
    Compilation will fail if a too big value is passed to kmalloc.
    
    However, kzalloc uses __kmalloc which has no check for that.  This patch
    makes __kmalloc bug if a too large entity is requested.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cdc82ee1ae36c1ae4631fc3a782faeb0b90df38
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Sep 22 21:44:09 2005 -0700

    [PATCH] mesh scsi: fix error handling
    
    The PowerMac mesh SCSI driver had some missing error handling which would
    trigger warnings due to lack of handling of return value from
    scsi_add_host.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98b4f5929ce5e616d0d0e13c71baf50083ab7397
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Thu Sep 22 21:44:08 2005 -0700

    [PATCH] atiixp_modem printk fixes
    
    Correctly identify atiixp_modem in its error messages.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3fc4cc17ac4dbadab0ba0d5c8233d3b18170d4a
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Sep 22 21:44:07 2005 -0700

    [PATCH] corrections to top-level README
    
    Corrections to the recent top-level README changes.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0365ba7fb1fa94a41289d6a3d36b4d95960e56cc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Sep 22 21:44:06 2005 -0700

    [PATCH] ppc64: SMU driver update & i2c support
    
    The SMU is the "system controller" chip used by Apple recent G5 machines
    including the iMac G5.  It drives things like fans, i2c busses, real time
    clock, etc...
    
    The current kernel contains a very crude driver that doesn't do much more
    than reading the real time clock synchronously.  This is a completely
    rewritten driver that provides interrupt based command queuing, a userland
    interface, and an i2c/smbus driver for accessing the devices hanging off
    the SMU i2c busses like temperature sensors.  This driver is a basic block
    for upcoming work on thermal control for those machines, among others.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jean Delvare <khali@linux-fr.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f329075fb1dbd6845db03e9bb8252024fdbea1f
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Sep 22 21:44:05 2005 -0700

    [PATCH] ppc64: Fix 64bit ptrace DABR support
    
    Fix my stupid bug in the 64bit version of PTRACE_SET_DEBUGREG.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f951da3757cf46444a6ea52e97b8aa9400fe761a
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Sep 22 21:44:05 2005 -0700

    [PATCH] ppc64: Fix build with iommu debug enabled
    
    Fix build when iommu debug is enabled.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 586a90eb4c0b512df766e08a7718af7c6b9b2dcf
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Sep 22 21:44:04 2005 -0700

    [PATCH] ppc64: Fix LPAR regression
    
    The recent iommu fix broke booting on some POWER4 and POWER5 LPAR boxes.
    
    It looks like we have been calling the non LPAR iommu_dev_setup on LPAR
    machines for a while. The recent iommu fix caused that code path to
    fail.
    
    It looks like we just need to hook up the devices iommu_table to the
    parents one, so do that instead of calling iommu_dev_setup_pSeries and
    crossing the streams.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 275abf5b06676ca057cf3e15f0d027eafcb204a0
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Thu Sep 22 21:44:03 2005 -0700

    [PATCH] ext3: ext3_show_options fix
    
    EXT3_MOUNT_DATA_FLAGS is not a boolean. This fixes it.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff69416e6323fe9d38c42a06ebdefeb58bbe9336
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Thu Sep 22 21:44:02 2005 -0700

    [PATCH] slab: fix handling of pages from foreign NUMA nodes
    
    The numa slab allocator may allocate pages from foreign nodes onto the
    lists for a particular node if a node runs out of memory.  Inspecting the
    slab->nodeid field will not reflect that the page is now in use for the
    slabs of another node.
    
    This patch fixes that issue by adding a node field to free_block so that
    the caller can indicate which node currently uses a slab.
    
    Also removes the check for the current node from kmalloc_cache_node since
    the process may shift later to another node which may lead to an allocation
    on another node than intended.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57487f4376e16558ccbe45a5b41d8cb5192309a4
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Thu Sep 22 21:44:01 2005 -0700

    [PATCH] swsusp: do not trigger BUG_ON() if there is not enough memory
    
    The following patch makes swsusp avoid triggering the BUG_ON() in
    swsusp_suspend() if there is not enough memory for suspend.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c87b74c72d42f7272aa4bf8f17c73bb53774eee
Author: Robert Love <rml@novell.com>
Date:   Thu Sep 22 21:44:00 2005 -0700

    [PATCH] hdaps: small update.
    
    - Handle dmi_system_check() elegantly, now that my bugfix is upstream.
    
    - Add support for the X41 and R52.
    
    - Cleanup some comments do I do not have to keep updating them with each
      new whitelisted laptop.
    
    Signed-off-by: Robert Love <rml@novell.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 609725f87709724218047a1049913ed233f79d3c
Author: Keir Fraser <Keir.Fraser@cl.cam.ac.uk>
Date:   Thu Sep 22 21:43:59 2005 -0700

    [PATCH] Fix mmap() of /dev/hpet
    
    The address passed to io_remap_pfn_range() in hpet_mmap() does not need to
    be converted using __pa(): it is already a physical address.  This bug was
    found and the patch suggested by Clay Harris.
    
    I introduced this particular bug when making io_remap_pfn_range changes a
    few months ago.  In fact mmap()ing /dev/hpet has *never* previously worked:
    before my changes __pa() was being executed on an ioremap()ed virtual
    address, which is also invalid.
    
    Signed-off-by: Keir Fraser <keir@xensource.com>
    Cc: Robert Picco <Robert.Picco@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7243cc05bafdda4c4de77cba00cf87666bd237f7
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Thu Sep 22 21:43:58 2005 -0700

    [PATCH] slab: alpha inlining fix
    
    It is essential that index_of() be inlined.  But alpha undoes the gcc
    inlining hackery and index_of() ends up out-of-line.  So fiddle with things
    to make that function inline again.
    
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b3c86a7452df8608c32a1c1f19c0cc0723c145f
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Thu Sep 22 21:43:57 2005 -0700

    [PATCH] alpha: fix kernel panic during SysRq-b
    
    acquire_console_sem() does BUG() in interrupt context now, as in the case
    of SysRq-b.
    
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 720b9429e8f41f7c4ee9df293403650905042035
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Sep 22 21:43:56 2005 -0700

    [PATCH] SOFTWARE_SUSPEND needs HOTPLUG_CPU on SMP
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 244bc050d5c9431682b7d834aff92e663fe88bb2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Sep 22 21:43:55 2005 -0700

    [PATCH] ppc32: fix build with oprofile
    
    Current -git tree doesn't build when enabling oprofile on a non-bookE CPU
    (like on a PowerMac for example).  While there is no performance counter
    support for these CPUs implemented yet, it's still nice to be able to use
    the timer based sampling, and that got broken.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66c81f0059b57e18aad43a5b0d330102c237cd72
Author: Grant Coady <grant_lkml@dodo.com.au>
Date:   Thu Sep 22 21:43:54 2005 -0700

    [PATCH] DEBUG redefined in drivers/mtd/devices/docecc.c
    
    Fix namespace clash:
    
    drivers/mtd/devices/docecc.c:43:1: warning: "DEBUG" redefined
    In file included from drivers/mtd/devices/docecc.c:40:
    include/linux/mtd/mtd.h:219:1: warning: this is the location of the previous definition
    
    Signed-off-by: Grant Coady <gcoady@gmail.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1e70a262d5cb5a02d2fc171e0178197849482d4
Author: Bernd Petrovitsch <bernd@firmix.at>
Date:   Thu Sep 22 21:43:53 2005 -0700

    [PATCH] Rename vprintk define in bttpvp.h
    
    Rename the (apparently) bttv intern #define vprintk to verbprintk to
    resolve a name clash.
    
    Reason: vprintk() is defined in include/linux/kernel.h similar to printk
    but with a va_list argument.
    
    (akpm: I changed it to bttv_printk)
    
    Cc: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f71626a461e7d4af099ca71830ea530e96c22e11
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Thu Sep 22 21:43:53 2005 -0700

    [PATCH] v9fs: don't free root dentry & inode if error occurs in v9fs_get_sb
    
    If error occurs while in v9fs_get_sb after it calles sget, the dentry object
    of the root and its inode may be freed twice -- once while handling the error
    in v9fs_get_sb, and second time when v9fs_get_sb calles deactivate_super
    (which in turn calls v9fs_kill_super)
    
    The patch removes the unnecessary code that frees the root dentry and its
    inode.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1f9d8d23fef301ba0c0b4983e0aa947168e1c37
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Thu Sep 22 21:43:52 2005 -0700

    [PATCH] v9fs: replace strlen on newly allocated by __getname buffers to PATH_MAX
    
    v9fs_vfs_readlink allocates space for the link using __getname and
    errorneously uses strlen on the newly allocated buffer to check if the buffer
    passed by the user is bigger than the one returned by __getname.
    
    The patch replaces the strlen usage to PATH_MAX, which is the actual size of
    the buffers returned by __getname.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8e63bff521f0387fb4f4e486dede0e78dca8f41
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Thu Sep 22 21:43:51 2005 -0700

    [PATCH] v9fs: make copy of the transport prototype instead of using it directly
    
    When a new session is created it uses a template object of the specified
    transport type to instantiate its own copy.  The code for the making a copy of
    the template object was lost, and the object itself is attached to the v9fs
    session.  This leads to many sessions using the same transport instead of
    having their own copy.
    
    The patch puts back the code that makes a copy of the template object.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b067676234715051cbde87083c36c8ea83f77b8
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Thu Sep 22 21:43:50 2005 -0700

    [PATCH] v9fs: allocate the Rwalk qid array from the right conv buffer
    
    When v9fs_deserealize_fcall deserializes a Rwalk message, it incorrectly
    allocates space for the qid array in the source instead of the destination
    buffer.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d06a8fb130085c9f61e4c1a40445163087ecf89f
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Thu Sep 22 21:43:48 2005 -0700

    [PATCH] v9fs: make conv functions to check for conv buffer overflow
    
    buf_check_size function checks if the conv buffer has enough space for the
    performed operation, but it doesn't return the result back to the calling
    function, only logs an error in the log.
    
    The report-back-error functionality was lost when buf_check_size was
    converted from macro to inline function. The return in the macro used to
    exit from the functions that include it, after the conversion it just exits
    from the inline function itself.
    
    The patch makes buf_check_size to return flag and all functions that use
    it check if they should perform the operation, or exit.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89559a6119e9779c732fdc7aef5e175bf090dd69
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu Sep 22 21:43:47 2005 -0700

    [PATCH] Update maintainers list with the kprobes maintainers
    
    This patch updates the maintainers list with kprobes maintainers.
    
    Signed-of-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88d10bbaaec38856f913313b6c0858d9e9b7a066
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Thu Sep 22 21:43:46 2005 -0700

    [PATCH] suspend: cleanup calling of power off methods.
    
    In the lead up to 2.6.13 I fixed a large number of reboot problems by
    making the calling conventions consistent.  Despite checking and double
    checking my work it appears I missed an obvious one.
    
    The S4 suspend code for PM_DISK_PLATFORM was also calling device_shutdown
    without setting system_state, and was not calling the appropriate
    reboot_notifier.
    
    This patch fixes the bug by replacing the call of device_suspend with
    kernel_poweroff_prepare.
    
    Various forms of this failure have been fixed and tracked for a while.
    
    Thanks for tracking this down go to: Alexey Starikovskiy, Meelis Roos
    <mroos@linux.ee>, Nigel Cunningham <ncunningham@cyclades.com>, Pierre
    Ossman <drzeus-list@drzeus.cx>
    
    History of this bug is at:
    http://bugme.osdl.org/show_bug.cgi?id=4320
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4c94330e3395ae87451bded2840a25d04f27902
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Thu Sep 22 21:43:45 2005 -0700

    [PATCH] reboot: comment and factor the main reboot functions
    
    In the lead up to 2.6.13 I fixed a large number of reboot problems by
    making the calling conventions consistent.  Despite checking and double
    checking my work it appears I missed an obvious one.
    
    This first patch simply refactors the reboot routines so all of the
    preparation for various kinds of reboots are in their own functions.
    Making it very hard to get the various kinds of reboot out of sync.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0678e5feaab8b359b18858e8532bb6017edb112b
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Sep 22 21:43:44 2005 -0700

    [PATCH] proc_task_root_link c99 fix
    
    fs/proc/base.c: In function `proc_task_root_link':
    fs/proc/base.c:364: warning: ISO C90 forbids mixed declarations and code
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8201c61065f3b5a4fe2fde1db1c817e288916be
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 20:31:29 2005 -0700

    [SPARC64]: Fix comment typo in head.S
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bff06d552240ba7f5b49482a4865871d7bc03dc2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 20:11:33 2005 -0700

    [SPARC64]: Rewrite bootup sequence.
    
    Instead of all of this cpu-specific code to remap the kernel
    to the correct location, use portable firmware calls to do
    this instead.
    
    What we do now is the following in position independant
    assembler:
    
    	chosen_node = prom_finddevice("/chosen");
    	prom_mmu_ihandle_cache = prom_getint(chosen_node, "mmu");
    	vaddr = 4MB_ALIGN(current_text_addr());
    	prom_translate(vaddr, &paddr_high, &paddr_low, &mode);
    	prom_boot_mapping_mode = mode;
    	prom_boot_mapping_phys_high = paddr_high;
    	prom_boot_mapping_phys_low = paddr_low;
    	prom_map(-1, 8 * 1024 * 1024, KERNBASE, paddr_low);
    
    and that replaces the massive amount of by-hand TLB probing and
    programming we used to do here.
    
    The new code should also handle properly the case where the kernel
    is mapped at the correct address already (think: future kexec
    support).
    
    Consequently, the bulk of remap_kernel() dies as does the entirety
    of arch/sparc64/prom/map.S
    
    We try to share some strings in the PROM library with the ones used
    at bootup, and while we're here mark input strings to oplib.h routines
    with "const" when appropriate.
    
    There are many more simplifications now possible.  For one thing, we
    can consolidate the two copies we now have of a lot of cpu setup code
    sitting in head.S and trampoline.S.
    
    This is a significant step towards CONFIG_DEBUG_PAGEALLOC support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e53897e2fb48526a62116ef8e72d7441d5ee8752
Merge: 3fd07d3... 4881e2c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 22 16:23:04 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 4881e2cd25d2d9cf9fca263caff3a0ce732d7d6b
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Tue Sep 20 16:34:41 2005 +0900

    [IA64] MCA recovery verify pfn_valid
    
    Verify the pfn is valid before calling pfn_to_page(),
    and cut isolation message if nothing was done.
    
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Acked-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 20bb86852a6b7d9ca8c48ff921ff3904038959cf
Author: Keith Owens <kaos@sgi.com>
Date:   Thu Sep 22 18:49:15 2005 +1000

    [IA64] Wire in the MCA/INIT handler stacks
    
    Wire the MCA/INIT handler stacks into DTR[2] and track them in
    IA64_KR(CURRENT_STACK).  This gives the MCA/INIT handler stacks the
    same TLB status as normal kernel stacks.  Reload the old CURRENT_STACK
    data on return from OS to SAL.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 40fd3533c93f0062b6d1d8540961ef70fc8ab750
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 13:03:36 2005 -0700

    [SPARC64]: Kill readjust_prom_translations()
    
    Testing shows that the prom_unmap() calls do absolutely
    nothing.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83a78d9ba792660418d692fd6737871aefdbff36
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Mon Sep 19 09:36:12 2005 +1000

    [IA64] Fix simscsi for new SCSI midlayer
    
    The sd driver now uses scsi_execute_req() for almost everything.
    scsi_execute_req() converts requests into scatterlists.
    
    Fix the HP SCSI disk simulator to understand scatterlists for
    more commands.
    
    Without this patch the current kernel will not boot on the simulator
    (the disks are always detected as having no sectors, and so cannot be
    mounted).
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3fd07d3bf0077dcc0f5a33d2eb1938ea050da8da
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Sep 21 23:54:58 2005 -0500

    [PATCH] ppc32: Fix configuration of PCI IO space on MPC85xx platform
    
    For platforms that don't have PCI IO at 0 the outbound window
    registers were not being properly configured.
    
    Signed-off-by: Andrew Klossner <andrew@cesa.opbu.xerox.com>
    Signed-off-by: Kumar K. Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fc084eaffe0a9a82a0c94da9ee9f7060ade8b04
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Sep 22 00:49:51 2005 -0700

    [PATCH] USB: Update Documentation/usb/URB.txt
    
    This patch (as564) updates Documentation/usb/URB.txt, bringing it roughly
    up to the current level.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6c88834b2c6635df9d17695feb50c835bc8efc6
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu Sep 22 00:49:45 2005 -0700

    [PATCH] ub: Comment out unconditional stall clear
    
    This code appears to be more trouble than it's worth, considering that
    no normal users reload drivers. So, we comment it for now. It is not
    removed outright for the benefit of hackers (that is, myself).
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a8c1e2910daaff7590173e9d4ca07153e8a3517
Author: David Hollis <dhollis@davehollis.com>
Date:   Thu Sep 22 00:49:39 2005 -0700

    [PATCH] USB: Add Novatel CDMA Wireless PC card IDs to airprime
    
    USB: Add device id's for Novatel Wireless CDMA wireless PC card.
         The Novatel CDMA card behaves the same as the AirPrime by providing
         a USB serial port.
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b27c73dcab61826e5f1228d69d56f469b0abfc05
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Sep 22 00:49:33 2005 -0700

    [PATCH] usb/serial/option.c: Increase input buffer size
    
    The card sometimes sends >2000 bytes in one single chunk. Ouch.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a85a46f2c38def5150251816890393803fdae7d0
Author: Kevin Vigor <kevin@realmsys.com>
Date:   Thu Sep 22 00:49:24 2005 -0700

    [PATCH] USB: fix pegasus driver
    
    Addresses some small bugs in the pegasus ethernet-over-USB driver.
    Specifically, malformed long packets from the adapter could cause a kernel
    panic; the interrupt interval calculation was inappropriate for high-speed
    devices; the return code from read_mii_word was tested incorrectly; and
    failure to unlink outstanding URBs before freeing them could lead to kernel
    panics when unloading the driver.
    
    Signed-off-by: Kevin Vigor <kevin@realmsys.com>
    Cc: Petko Manolov <petkan@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b2e790a4d73d729d936cc42f3b08af34f8ea5c6
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Sep 22 00:49:07 2005 -0700

    [PATCH] USB: sl811-hcd minor fixes
    
    Three minor sl811-hcd fixes:
    
     - Elminate memory leak on one (rare) disable/shutdown path.
    
     - For periodic transfers that don't need to be scheduled, update
       urb->start_frame to represent the transfer phase correctly.
    
     - Report the (single) port as removable, by default.
    
    Since no drivers yet use start_frame or that part of the hub descriptor,
    only that leak is likely to ever matter.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    
     drivers/usb/host/sl811-hcd.c |   16 ++++++++++++++--
     1 file changed, 14 insertions(+), 2 deletions(-)

commit 2ba08e825e5a666f540bff15e9977725675e8de6
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 22 00:48:58 2005 -0700

    [PATCH] USB: fix pxa2xx_udc compile warnings
    
    This patch fixes several types in the PXA25x udc driver and hence fixes
    several compiler warnings.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72a755fce0243d4168a6153813a1b533b05a7d72
Author: Peter Favrholdt <pfavr@how.dk>
Date:   Thu Sep 22 00:48:49 2005 -0700

    [PATCH] USB: ftdi_sio: allow baud rate to be changed without raising RTS and DTR
    
    I'm using a 2 port USB RS232 dongle to connect to a serial-IR cradle for
    a bar code reader). Detecting the baudrate of the serial-IR involves
    keeping DTR low while changing baudrate.
    
    This works using normal 16550A serial ports as well as the FTDI driver
    version 1.4.0 (Linux 2.6.8) but stopped working with the change to
    "ensure RTS and DTR are raised when changing baudrate" introduced in
    version 1.4.1 (Linux 2.6.9).
    
    The attached patch fixes this, so RTS and DTR is only raised when
    changing baudrate iff the previous baudrate was B0.
    
    Signed-off-by: Peter Favrholdt <pfavr@how.dk>
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6137383bda844a433d65e027502df7b20ba45c2
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Sep 22 00:48:40 2005 -0700

    [PATCH] USB: more device IDs for Option card driver
    
    Added support for HUAWEI E600 and Audiovox AirCard
    
    User reports say that these devices work without driver modification.
    
    Signed-off-by: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64bd84538ac7f8ba3080eda4d92c66a8441cc6cc
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu Sep 22 00:48:29 2005 -0700

    [PATCH] ub: fix burning cds
    
    This patch fixes a few problems with ub and cleans up a couple of things:
    
     - Bump UB_MAX_REQ_SG, this allows to burn CDs
     - Drop initialization of urb.transfer_flags,
       now that URB_UNLINK_ASYNC is gone
     - Add forgotten processing of stalls at GetMaxLUN
     - Remove a few more P3-tagged printks whose time has come
     - Correct comment about ZIP-100
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    
     drivers/block/ub.c |   53 +++++++++++++++++++++++++++--------------------------
     1 file changed, 27 insertions(+), 26 deletions(-)

commit 02fe75a9ad797b4f8ccf1ee8e49833b77cc30c6a
Author: Linda Xie <lxiep@us.ibm.com>
Date:   Thu Sep 22 00:48:24 2005 -0700

    [PATCH] PCI Hotplug: Fix buffer overrun in rpadlpar_sysfs.c
    
    Signed-off-by: Linda Xie <lxie@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c6de9295d28a4fc868b2c09f23e318e3e7b9b6b
Author: Amos Waterland <apw@us.ibm.com>
Date:   Thu Sep 22 00:48:19 2005 -0700

    [PATCH] fix drivers/pci/probe.c warning
    
    This function expects an unsigned 32-bit type as its third argument:
    
     static u32 pci_size(u32 base, u32 maxbase, u32 mask)
    
    However, given these definitions:
    
     #define PCI_BASE_ADDRESS_MEM_MASK (~0x0fUL)
     #define PCI_ROM_ADDRESS_MASK (~0x7ffUL)
    
    these two calls in drivers/pci/probe.c are problematic for architectures
    for which a UL is not equivalent to a u32:
    
     sz = pci_size(l, sz, PCI_BASE_ADDRESS_MEM_MASK);
     sz = pci_size(l, sz, PCI_ROM_ADDRESS_MASK);
    
    Hence the below compile warning when building for ARCH=ppc64:
    
     drivers/pci/probe.c: In function `pci_read_bases':
     /.../probe.c:168: warning: large integer implicitly truncated to unsigned type
     /.../probe.c:218: warning: large integer implicitly truncated to unsigned type
    
    Here is a simple fix.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 656da9da3745abcbbbdca598745d04c6de2c8843
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Thu Sep 22 00:48:11 2005 -0700

    [PATCH] PCI: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1029d6b58adc3225911c56af26895871dd2ea8cf
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Sep 22 00:48:02 2005 -0700

    [PATCH] PCI: remove unused "scratch"
    
    Unused variable.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dba28010b27ab56d2c4cec5f361e0947295addfd
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Sep 22 00:47:46 2005 -0700

    [PATCH] I2C: remove me from the MAINTAINERS file for i2c
    
    Remove my name from the I2C maintainer, Jean is more than capable of
    handling it all now.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e51377dc412df9d4933c4fd1a147b5b560abe10
Author: Bill Nottingham <notting@redhat.com>
Date:   Thu Sep 22 00:47:36 2005 -0700

    [PATCH] fix class symlinks in sysfs
    
    The class symlinks in sysfs don't properly handle changing device names.
    
    To demonstrate, rename your network device from eth0 to eth1. Your
    pci (or usb, or whatever) device will still have a 'net:eth0' link,
    except now it points to /sys/class/net/eth1.
    
    The attached patch makes sure the class symlink name changes when
    the class device name changes. It isn't 100% correct, it should be
    using sysfs_rename_link. Unfortunately, sysfs_rename_link doesn't exist.
    
    Signed-off-by: Bill Nottingham <notting@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d305ef5d2a4e77bfa66160513f4a7494126a506b
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Sep 22 00:47:24 2005 -0700

    [PATCH] driver core: add helper device_is_registered()
    
    add the helper and use it instead of open coding the klist_node_attached() check
    (which is a layering violation IMHO)
    
    idea by Alan Stern.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c898c7f2f286b204fefc5dddb568f755d195d0c
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu Sep 22 00:47:11 2005 -0700

    [PATCH] Driver Core: fis bus rescan devices race
    
    bus_rescan_devices_helper() does not hold the dev->sem when it checks for
    !dev->driver().  device_attach() holds the sem, but calls again
    device_bind_driver() even when dev->driver is set.
    
    What happens is that a first device_attach() call (module insertion time)
    is on the way binding the device to a driver.  Another thread calls
    bus_rescan_devices().  Now when bus_rescan_devices_helper() checks for
    dev->driver it is still NULL 'cos the the prior device_attach() is not yet
    finished.  But as soon as the first one releases the dev->sem the second
    device_attach() tries to rebind the already bound device again.
    device_bind_driver() does this blindly which leads to a corrupt
    driver->klist_devices list (the device links itself, the head points to the
    device).  Later a call to device_release_driver() sets dev->driver to NULL
    and breaks the link it has to itself on knode_driver.  Rmmoding the driver
    later calls driver_detach() which leads to an endless loop 'cos the list
    head in klist_devices still points to the device.  And since dev->driver is
    NULL it's stuck with the same device forever.  Boom.  And rmmod hangs.
    
    Very easy to reproduce with new-style pcmcia and a 16bit card.  Just loop
    modprobe <pcmcia-modules> ;cardctl eject; rmmod <card driver, pcmcia
    modules>.
    
    Easiest fix is to check if the device is already bound to a driver in
    device_bind_driver().  This avoids the double binding.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91fbc6edfa7086b5fcdb74ea82ab747104541f1f
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 22 13:26:44 2005 +0100

    NTFS: Fix sparse warnings that have crept in over time.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8420e1b541fe92aee1d8d4d25d9e33eaca756a7b
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 08:29:08 2005 -0300

    [LLC]: fix llc_ui_recvmsg, making it behave like tcp_recvmsg
    
    In fact it is an exact copy of the parts that makes sense to LLC :-)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit d389424e00f9097cd24b3df4ca0ab7221f140eeb
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 07:57:21 2005 -0300

    [LLC]: Fix the accept path
    
    Borrowing the structure of TCP/IP for this. On the receive of new connections I
    was bh_lock_socking the _new_ sock, not the listening one, duh, now it survives
    the ssh connections storm I've been using to test this specific bug.
    
    Also fixes send side skb sock accounting.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 2928c19e1086e2f1e90d05931437ab6f1e4cfdc8
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 05:14:33 2005 -0300

    [LLC]: Fix sparse warnings
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 2bdb3cb265830aee823444d115a8a84eca2b934e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 01:08:57 2005 -0700

    [SPARC64]: Remove unnecessary paging_init() cruft.
    
    Because we don't access the PAGE_OFFSET linear mappings
    any longer before we take over the trap table from the
    firmware, we don't need to load dummy mappings there
    into the TLB and we don't need the bootmap_base hack
    any longer either.
    
    While we are here, check for a larger than 8MB kernel
    and halt the boot with an error message.  We know that
    doesn't work, so instead of failing mysteriously we
    should let the user know exactly what's wrong.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0519d8fbabc4eb215a8263f29143ccd86c328157
Author: Jochen Friedrich <jochen@scram.de>
Date:   Thu Sep 22 04:51:56 2005 -0300

    [TR]: Set correct frame type for SNAP packets
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 096f0eb1dff326ddebfedeb128fb48d5b7ca75e1
Author: Jochen Friedrich <jochen@scram.de>
Date:   Thu Sep 22 04:48:46 2005 -0300

    [LLC]: Fix llc_fixup_skb() bug
    
    llc_fixup_skb() had a bug dropping 3 bytes packets (like UA frames). Token ring
    doesn't pad these frames.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 5564af21ae7900889c5151e5b16bd42cdda11a77
Author: Jochen Friedrich <jochen@scram.de>
Date:   Thu Sep 22 04:46:44 2005 -0300

    [LLC]: Fix for Bugzilla ticket #5157
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 5085b4a5492f4f8bd32d0cc5b1cad4bf522c2e1a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 00:45:41 2005 -0700

    [SPARC64]: Do not allocate OBP page tables using bootmem
    
    Just allocate them physically starting from the end of
    the kernel image.  This incredibly simplifies our MM
    bootstrap in that we don't need any mappings in the linear
    PAGE_OFFSET area working in order to bootstrap ourselves and
    take over the trap table from the firmware.
    
    Many further simplifications are possible now, and this also
    sets the stage for CONFIG_DEBUG_PAGEALLOC support.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf309e3fb863b7a245b91f816193957f6daf786f
Author: Jochen Friedrich <jochen@scram.de>
Date:   Thu Sep 22 04:44:55 2005 -0300

    [LLC]: Fix for Bugzilla ticket #5156
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 6e2144b76840be09924de1626e2dcd7b315f75b3
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:43:05 2005 -0300

    [LLC]: Use refcounting with struct llc_sap
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 04e4223f44b89e50f275cb6b95a58ebe2c4909be
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:40:59 2005 -0300

    [LLC]: Do better struct sock accounting on skbs
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit afdbe35787ea3390af0f1dd38b3dd9d8a8d313e7
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:37:07 2005 -0300

    [LLC]: Use sk_wait_data
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 249ff1c6d35fd32ca945967c3f0b948210a96baa
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:32:10 2005 -0300

    [LLC]: Use some more likely/unlikely
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 590232a7150674b2036291eaefce085f3f9659c8
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:30:44 2005 -0300

    [LLC]: Add sysctl support for the LLC timeouts
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 54fb7f25f19a4539d3ec012e410439913650dc06
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:26:14 2005 -0300

    [LLC]: Use the sk_wait_event primitive
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit b35bd11019ed1084a36632f1c1d936244d9cfb5b
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:22:39 2005 -0300

    [LLC]: Convert llc_ui_wait_for_ functions to use prepare_to_wait/finish_wait
    
    And make it look more like the similar routines in the TCP/IP source code.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 72b1ad4a7e239a2224e87194654acba56fc477d4
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:19:52 2005 -0300

    [LLC]: Remove unused functions from llc_c_ev.c
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 405599bd98b01d648becb020efb503abf19f9c9f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 22 00:12:35 2005 -0700

    [SPARC64]: Break up inherit_prom_mappings() into it's constituent parts.
    
    This thing was just a huge monolithic mess, so chop it up.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9441fc3375a6637a81bc1635c5e12da4dc7acc6
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 04:09:45 2005 -0300

    [LLC]: Use const in llc_c_ev.c
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit af426d327c38bcb8cbb87c60134d42d2e93b20cc
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:59:22 2005 -0300

    [LLC]: Help the compiler with likely/unlikely, saving some more bytes
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 0eb8017242cb7e8b18af4751b03646436b8f90e3
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:57:55 2005 -0300

    [LLC]: Mark llc_find_next_offset as __init, saving some more bytes
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 5a770c0262262e96979fe05d5c2fa1d1f409dbdc
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:56:26 2005 -0300

    [LLC]: Update comments for llc_ui_bind and llc_ui_autobind to match new behaviour
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 774ccb4f64020dad40d38efa63685220e1f245cc
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:53:35 2005 -0300

    [LLC]: Remove unneeded temp net_device variables
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit e0dd55190ff8c6485a721c9473ded92d03c0fe01
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:50:15 2005 -0300

    [LLC]: introduce llc_conn_tmr_common_cb, to avoid code duplication
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 838a75dae05d59b7d7894c299508ae3d7dea9630
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:44:23 2005 -0300

    [LLC]: Remove unneeded f_bit variables
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit bdcc66cca89cc2e97e93054d139b2e9a2b2ec1a7
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:38:15 2005 -0300

    [LLC]: Simplify llc_c_ac code, removing unneeded assignments to variables
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 1d67e6501b8dba54ef8dcabebe2ad049b8ad0d67
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Sep 22 03:27:56 2005 -0300

    [LLC]: Make llc_frame_alloc take a net_device as an argument
    
    So as to set the newly created sk_buff ->dev member with it, that way we stop
    using dev_base->next, that is the wrong thing to do, as there may well be
    several interfaces being used with LLC. This was not such a big problem after
    all as most of the users of llc_alloc_frame were setting the correct dev, but
    this way code is reduced.
    
    This also fixes another bug in llc_station_ac_send_null_dsap_xid_c, that was
    not setting the skb->dev field.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit b206fc4c0997ee858bc3ed35f157d7c3cda54cfd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 21 22:31:13 2005 -0700

    [SPARC64]: Do not allocate prom translations using bootmem.
    
    Use __initdata instead.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ac4f5ebaa496a23ab4a148c9864d7e30a6c6cd3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 21 21:49:32 2005 -0700

    [SPARC64]: Remove ktlb.S instruction patching.
    
    This was kind of ugly, and actually buggy.  The bug was that
    we didn't handle a machine with memory starting > 4GB.  If
    the 'prompmd' was allocated in physical memory > 4GB we'd
    croak because the obp_iaddr_patch and obp_daddr_patch things
    only supported a 32-bit physical address.
    
    So fix this by just loading the appropriate values from two
    variables in the kernel image, which is locked into the TLB
    and thus accesses to them can't cause a recursive TLB miss.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e86ee6682b649183c11013a98be02f25e9ae399d
Author: Andy Currid <ACurrid@nvidia.com>
Date:   Mon Sep 19 06:17:52 2005 -0700

    [PATCH] Add NVIDIA device ID in sata_nv
    
    Signed-off-by: Andy Currid <acurrid@nvidia.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0b50f81d5a63428f131ff20596f4e3d473e5b94f
Author: Tommy Christensen <tommy.christensen@tpack.net>
Date:   Wed Sep 21 12:13:57 2005 -0700

    [PATCH] r8169: call proper VLAN receive function
    
    vlan_hwaccel_rx should be used when in interrupt context.
    
    Fixes bug  http://bugzilla.kernel.org/show_bug.cgi?id=5284
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Cc: Francois Romieu <romieu@fr.zoreil.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 383181ac7e59542ff47e2b81f7e4c40aba39b30b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Sep 19 15:37:16 2005 -0700

    [PATCH] skge: check length from PHY
    
    Cleanup receive buffer allocation and management,
    Add more error handling checks from PHY and bump version.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c3f8be961808313a502c67d59e2b7f930477faf3
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Sep 19 15:37:34 2005 -0700

    [PATCH] skge: expand ethtool debug register dump
    
    Expand the returned data for ethtool debug access to include
    all of the mapped PCI area; except for the small set of registers
    that are for diagnostic RAM access. Access to those registers
    will hang the system.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 059deb693ec191e563ec69533d24f3feff0b78cd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 21 19:23:48 2005 -0700

    [SPARC64]: Kill SZ_BITS define from dtlb_backend.S
    
    This is just a replica of the existing _PAGE_SZBITS,
    and thus unnecessary.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 552709d5aee9145f325bf07348fb299e84b2e5b3
Author: Jason R. Martin <nsxfreddy@gmail.com>
Date:   Wed Sep 21 14:18:04 2005 -0500

    [PATCH] bonding: Fix link monitor capability check (was skge: set mac address oops with bonding)
    
    Fix bond_enslave link monitoring warning to check use_carrier status
    and ethtool_ops in addition to do_ioctl.  This version checks ethtool_ops
    as well as do_ioctl, and also uses the per-bond params.use_carrier
    instead of the global use_carrier.
    
    Signed-off-by: Jason R. Martin <nsxfreddy@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2a7e2990340a1c42321d79dc99755683ea5a1026
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 21 18:50:51 2005 -0700

    [SPARC64]: Move kernel TLB miss handling into a seperate file.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit efb0372bbaf5b829ff8c39db372779928af542a7
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:40:49 2005 +0200

    [PATCH] uml: fix compile warning after consolidation patch
    
    The header declaring this function wasn't included, so the function declaration
    was totally bogus wrt. the proto - even if this wasn't going to fail at all.
    
    It was so bad that the compile warning I got was "control reaches end of
    non-void function", i.e. missing return. Actually, this has been there for ages,
    the consolidation patch just added the warning which was needed to clean it up.
    Nice. Really.
    
    Cc: Allan Graves <allan.graves@gmail.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a46c9047642d70f5619e4a14129d74dd1f6ea74f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:40:29 2005 +0200

    [PATCH] uml: comment about cast build fix
    
    Explain why the casting we do to silence this warning is indeed safe.
    
    It is because the field we're casting from, though being 64-bit wide, was filled
    with a pointer in first place by ourselves.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae756df8ddd00a30bb3bdf6774b514c096dda4a4
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:40:10 2005 +0200

    [PATCH] uml: readd removed unistd.h inclusion
    
    Readd this header (deleted in 60d339f6fe0831060600c62418b71a62ad26c281). A
    warning is spit out here about undeclared getpgrp().
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41c79dc3825545d9aa2d5e5b1a99f8faabf51455
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:39:47 2005 +0200

    [PATCH] uml: fix bogus HOST_ELF_CLASS symbol name
    
    Even if with a bit of misunderstanding, Al fixed this in commit
    95608261dae863bc43292e6fbd946a3abd3aa49f.
    
    Well, the symbol was intended to come from userspace (it exists there on normal
    host), but since some hosts may miss that, using the kernel one is just as fine.
    However, rename it to be named consistently with the rest.
    
    Actually, he missed converting ELFCLASS32 to coming from kernel headers. For
    consistence, add ELFCLASS64 too.
    
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd7481047882eaa0a692a545d5f8419612ece1b0
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:39:32 2005 +0200

    [PATCH] uml: Fix conflict between libc and ipv6
    
    gcc is now complaining during link on some hosts - fix it as for other things.
    Reported by Antoine Martin <antoine@nagafix.co.uk>.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e5cb35a60c8792ffc3ba89ea66ebdd3c2f01cb1
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:39:14 2005 +0200

    [PATCH] uml: fix uname output on 32-bit binary on 64-bit host
    
    Translate uname output taken from the host if needed.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36decba90b184a25b7f77fb7df1612125cc41ac5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:38:57 2005 +0200

    [PATCH] uml: fix modify_ldt - missing break in switch
    
    I am a lamer :-(. Luckily, Luo Xin performed LTP testing and found this failure.
    Btw, the fact that the patch in which I introduced this was merged shows that:
    
    a) I'm really trusted by people
    b) sometimes they're wrong about point a).
    c) lack of time for reviewers.
    
    CC: Luo Xin <luothing@sina.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76629ac154aacfec8883954c3ff9871905d2fb8e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:38:33 2005 +0200

    [PATCH] uml: remove verify_area_{tt,skas}
    
    When removing verify_area, verify_area_{tt,skas} were forgotten.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 676067cfeaa16f6f338e067e83ce4733b41c0b24
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:38:09 2005 +0200

    [PATCH] Remove unused var from asm/futex.h
    
    As recently done by Russell King for ARM, commit
    4732efbeb997189d9f9b04708dc26bf8613ed721 introduces a generic asm/futex.h copied
    along most arches, which includes a "-ENOSYS support" to be changed if needed.
    However, it includes an unused var (taken from the "real" version) which GCC
    warns about.
    
    Remove it from all arches having that file version (i.e. same GIT id).
    $ git-diff-tree -r HEAD
    and
    $ git-ls-tree  -r HEAD include/|grep 9feff4ce1424bc390608326240be369eb13aa648
    
    may be more interesting than looking at the patch itself, to make sure I've
    just copied the arm header to all other archs having the original dummy version
    of this file.
    
    Cc: Jakub Jelinek <jakub@redhat.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c51179fb0c77ad91df5825f8f7eb670da97e137e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 18:37:14 2005 +0200

    [PATCH] uml: adapt asm/futex.h to our arch
    
    Follow up to 4732efbeb997189d9f9b04708dc26bf8613ed721 - uml must just reuse
    as-is the backing architecture support. There is a micro-fixup is needed for the
    included file, which won't affect i386 behaviour at all.
    
    I've not tested compilation on x86_64, only on x86, but the code is almost the
    same except the culprit test, so everything should be ok on x86_64 too.
    
    Cc: Jakub Jelinek <jakub@redhat.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f62378fcfc9c13a57b0b69dbd43336a4df8155a5
Merge: a418500... 6a1ced5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 21 14:30:37 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 68ce1eb54056e4fad6e73968e958b926d28cb0dd
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Sep 21 09:46:54 2005 -0700

    [SCSI] lpfc build fix
    
    gcc-2.95.x doesn't do anonymous unions.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6a1ced59b3ac5d1088f597fd0613a724cdf19e2c
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Sep 21 22:14:05 2005 +0100

    [ARM] 2932/1: Avoid the "noreturn" warning in arch/arm/kernel/traps.c
    
    Patch from Catalin Marinas
    
    This patch prevents the "noreturn function does return" warning in the
    __bug() function in arch/arm/kernel/traps.c
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a418500b42c5c54f3f9d68036950c701740a2765
Merge: 62a36c4... f2065e4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 21 13:21:35 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit f2065e4242e5078d53c521b973c5cd4eae91eca2
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Sep 21 12:33:09 2005 -0700

    [IB] Fix RMPP receive length calculation
    
    Based on simplification idea from Sean Hefty <sean.hefty@intel.com>
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 972d512a17c1bb7c4b784a9da2ca75745fcc6989
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Wed Sep 21 12:31:26 2005 -0700

    [IB] Add MAD data field size definitions
    
    Clean up code by using enums instead of hard-coded magic numbers.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 62a36c43c898d45efcfe3376ea1da6a9a182e1ad
Author: Stephane Kardas <stephane.kardas@certa.ssi.gouv.fr>
Date:   Wed Sep 21 09:55:45 2005 -0700

    [PATCH] fat: fix adate
    
    During a forensic analysis on the fat file system, I found than the result for
    the last access date on this file system was different between the stat
    command and the istat command (package tct-utils).
    
    The istat command display a true date (the right windows date) but the stat
    primitive (so stat, find, ls command) displays a wrong date.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89d7cbf73e1a85241eb42339f6cb7a429fec178c
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Sep 21 09:55:44 2005 -0700

    [PATCH] update URL for HPET spec.
    
    Correct URL for HPET spec.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7980cbbb30bf044e6f40912a3f6456204ddfc27e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Wed Sep 21 09:55:43 2005 -0700

    [PATCH] Adds sys_set_mempolicy() in include/linux/syscalls.h
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b1ac9ab15c1fc1e0b73d887a0c0cafe92991f97
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 21 09:55:41 2005 -0700

    [PATCH] skge: add maintainer
    
    Add MAINTAINER record for Andrew ;-)
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f91648dcb0685d58aa046b25c69ce0d5f284f8c
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Sep 21 09:55:40 2005 -0700

    [PATCH] fixup Documentation/DocBook/kernel-hacking.tmpl
    
    __FUNCTION__ is the prefered kernel idiom, __func__ is not supported by gcc
    2.95 (we actually map __FUNCTION__ to __func__ for more recent compilers,
    but it should never be used directly)
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e2cff42cfac27c25202648c5c89f9171e5bc085
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 09:55:39 2005 -0700

    [PATCH] mm: add a note about partially hardcoded VM_* flags
    
    Hugh made me note this line for permission checking in mprotect():
    
    		if ((newflags & ~(newflags >> 4)) & 0xf) {
    
    after figuring out what's that about, I decided it's nasty enough.  Btw
    Hugh itself didn't like the 0xf.
    
    We can safely change it to VM_READ|VM_WRITE|VM_EXEC because we never change
    VM_SHARED, so no need to check that.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e871b6c8f1f4fda41e51ef86147facecac3be9f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 09:55:38 2005 -0700

    [PATCH] mm: update stale comment for removal of page->list
    
    Update comment for the 2.6.6-rc1 conversion from page->list and
    address_space->{clean,dirty,locked}_pages to radix tree tagging and ->lru.
    
    I've mostly avoided to mention page lists (at least I've shortened the
    comment).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f875a1a6650edce859bd21051a22e1c27ac7ea63
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 09:55:37 2005 -0700

    [PATCH] README update from the stone age
    
    We have no options which the user can set in the Makefile.  Only the
    EXTRAVERSION, which is also useful in place of the "backup modules"
    suggestion.
    
    We don't have configuration options in the top Makefile.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f10df6860498c7f52db4f00ff00a1ba334bcfea0
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Sep 21 09:55:37 2005 -0700

    [PATCH] fix locking comment in unmap_region()
    
    That comment is plain wrong (we even take the pagetable lock inside
    unmap_region()).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b20f6da20d874a58becc7a08b130c4382ea7325
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Wed Sep 21 09:55:35 2005 -0700

    [PATCH] Fix I2O config-osm init to return proper error
    
    We currently unregister the config-osm driver if initialization of the
    legacy ioctl() handlers failed but still return success.  We should be
    returning -EBUSY in this case.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Cc: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40da47e1159b89f2df5c718d2d5e269ced72b541
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Sep 21 09:55:34 2005 -0700

    [PATCH] ppc64: Build zImage.vmode for G5
    
    zImage.vmode was recently added.  It's a version of zImage in which the ELF
    note section used by open firmware indicates that it requires a virtual
    mode instance of OF instead of real mode.  This allows it to work with
    Apple OF, and thus is directly bootable (or netbootable) from OF command
    line.  (Unfortunately, pSeries OF sort-of requires real mode and Apple OF
    sort-of requires virtual mode, and both tend to be unhappy if no notes
    section specifies the mode at all).
    
    However, we forgot to add zImage.vmode to the default G5 build. This
    fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbcc6bee9e5bf45ec35e87a4e0755dff09fe25d4
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Sep 21 09:55:33 2005 -0700

    [PATCH] remove blkdev_scsi_issue_flush_fn again
    
    This function was removed a while ago, but crept in again via a recent
    scsi merge.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bc2a3bb86688ffca691ba2ad30a2d5dcba774cf
Author: Anton Blanchard <anton@samba.org>
Date:   Wed Sep 21 09:55:33 2005 -0700

    [PATCH] ppc64: Fix issue with non zero boot cpu
    
    The new version of the flattened device tree passes the boot cpuid in the
    header instead of via a linux,boot-cpu property.
    
    We need to update the in kernel OF parsing code to do this, otherwise
    machines with a non zero boot cpuid fail to come up.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6dbf42ee36d4f9ffc2a93877c19937c81974124
Author: Mike Miller <mike.miller@hp.com>
Date:   Wed Sep 21 09:55:32 2005 -0700

    [PATCH] cciss: busy_initializing bug fix
    
    This patch fixes the problem Bjorn reported.  The busy_initializing flag
    should have cleared before going into the for loop.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c2822ccb1f8cc96fc006aa82e68e1944290014a
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Sep 21 09:55:31 2005 -0700

    [PATCH] PPC64: Fix boot for some pre-POWER4 systems
    
    Some RS64 systems (such as F80) have non-python host bridges with EADS.
    However, they have two EADS with 4 buses each under them, so the old logic
    that assumed no more than 7 busses per PHB failed miserably.
    
    Big thanks to Olaf Hering for helping me test this, he's got one of the few
    machines that broke from the previous logic.
    
    Also, to be a bit smarter at detecting the need for a PHB-level IOMMU table
    by checking for the presence of an ISA bus.  Only PHBs with ISA bridges
    should need the PHB-level table.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Cc: Anton Blanchard <anton@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31f6d9d628739c097964b8dbae939ea997da94a3
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Sep 21 09:55:30 2005 -0700

    [PATCH] Add printk_clock()
    
    ia64's sched_clock() accesses per-cpu data which isn't set up at boot time.
    Hence ia64 cannot use printk timestamping, because printk() will crash in
    sched_clock().
    
    So make printk() use printk_clock(), defaulting to sched_clock(), overrideable
    by the architecture via attribute(weak).
    
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66dcca062847bcd261ebb3ac96d51101f31a8630
Author: Sripathi Kodi <sripathik@in.ibm.com>
Date:   Mon Sep 19 18:26:12 2005 -0500

    [PATCH] Fix invisible threads problem
    
    When the main thread of a thread group has done pthread_exit() and died,
    the other threads are still happily running, but will not be visible
    under /proc because their leader is no longer accessible.
    
    This fixes the access control so that we can see the sub-threads again.
    
    Signed-off-by: Sripathi Kodi <sripathik@in.ibm.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d79e743e9fcf03f521300a970eb1ab69641910ba
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Sep 21 14:14:22 2005 +1000

    [PATCH] ppc64: Fix PCI flags when using OF device tree
    
    My code to set up the PCI tree from the Open Firmware device tree was
    setting IORESOURCE_* flags on the resources for the devices, but not
    the PCI_BASE_ADDRESS_* flags.  This meant that some drivers
    misbehaved, and /proc/pci showed the wrong types for the resources.
    This fixes it.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fe9f798ba3cf7c939e638b78f46975e79039978
Merge: 76abf3e... a131430...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 21 07:53:38 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 76abf3e71c5a4d315ec95e23e5aedd15fbfcd6df
Merge: d90d439... 7957aed...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 21 07:53:05 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit a131430c200f6bda313bf5d0a8e238c41afdfe0a
Author: Christopher Zimmermann <madroach@zakweb.de>
Date:   Wed Sep 21 00:41:22 2005 -0700

    [SPARC] cs4231: Fix SBUS support in this driver.
    
    From: Christopher Zimmermann <madroach@zakweb.de>
    
    This patch enables SBus support for the cs4231 sound driver.
    It is tested on an Ultra2. Capture and playback both work.
    I experienced lags and crashes using certain threaded
    players like ogg123 and mp3blaster, while the former is
    lagging far more. This behavior may be specific to SMP
    systems. It is reproducable using the dummy sound card
    driver. Sox works flawlessly.
    
    Setting up the calculation of ptr in snd_cs4231_playback_pointer
    was a bit strange. I got it to work by not incrementing the
    [pc]_periods_sent counter when starting DMA the first time
    in cs4231_dma_trigger. Therefore this dummy thing.
    
    [ I did some minor cleanups -DaveM ]
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1a3e64aa480101d11d8cac94ca57fd8bbe2536b7
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Wed Sep 21 00:29:16 2005 -0700

    [ATYFB]: Fix build with CONFIG_FB_ATY_GENERIC_LCD disabled.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7957aed72b104f7528da484f292442c6f3a131a1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 21 00:19:46 2005 -0700

    [TCP]: Set default congestion control correctly for incoming connections.
    
    Patch from Joel Sing to fix the default congestion control algorithm
    for incoming connections. If a new congestion control handler is added
    (via module), it should become the default for new
    connections. Instead, the incoming connections use reno. The cause is
    incorrect initialisation causes the tcp_init_congestion_control()
    function to return after the initial if test fails.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Ian McDonald <imcdnzl@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 78c6671a88313fd3c4364dc46e8c8186612616b8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 21 00:15:39 2005 -0700

    [FIB_TRIE]: message cleanup
    
    Cleanup the printk's in fib_trie:
    	* Convert a couple of places in the dump code to BUG_ON
    	* Put log level's on each message
    The version message really needed the message since it leaks out
    on the pretty Fedora bootup.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fb375fb9b93b7d822debc6a734052337ccfdb1f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Sep 21 00:11:37 2005 -0700

    [AF_PACKET]: Allow for > 8 byte hardware addresses.
    
    The convention is that longer addresses will simply extend
    the hardeware address byte arrays at the end of sockaddr_ll and
    packet_mreq.
    
    In making this change a small information leak was also closed.
    The code only initializes the hardware address bytes that are
    used, but all of struct sockaddr_ll was copied to userspace.
    Now we just copy sockaddr_ll to the last byte of the hardware
    address used.
    
    For error checking larger structures than our internal
    maximums continue to be allowed but an error is signaled if we can
    not fit the hardware address into our internal structure.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d90d4392b395083a7d295b7cdf0edfd849d4c2a3
Merge: 6d67e34... 71eea47...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 20 17:38:51 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit 6d67e34de5a378de2f461137944c5d931283d557
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Wed Sep 21 07:32:49 2005 +0800

    [PATCH] fbdev: Fix reversed back and front porches
    
    In fbdev perspective, the frontporch is the lower/right margin and the
    backporch is the upper/left margin.
    
    Correct.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a482425f45e695a2e2821b32a887865f016fbf9
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Wed Sep 21 07:30:21 2005 +0800

    [PATCH] nvidiafb: Fix absence of cursor in nvidiafb
    
    A recent change in nvidiafb caused nvidiafb_cursor to always return -ENXIO
    instead of using the soft_cursor.  This will happen if the parameter "hwcur"
    is not set, which happens to be the default.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9f7baf4d695dbe3028d40ca374c1d11499eaee6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Sep 20 21:01:13 2005 +0100

    [ARM] Fix pcf8583 to build
    
    Seems that the Acorn RTC driver missed an update.  Fix it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 438282d85de2c8f8c5183fdf55140e51a0b18670
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Sep 20 14:58:11 2005 -0500

    JFS: don't dereference tlck->ip from txUpdateMap
    
    The inode pointer may no longer be valid
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 729b4f7de68191478b20fab19a6d0c6b8c4380c9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 20 12:18:38 2005 -0700

    [SPARC64]: Verify vmalloc TLB misses more strictly.
    
    Arrange the modules, OBP, and vmalloc areas such that a range
    verification can be done quite minimally.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 71eea47d853bb0ce0c6befe11b3e08111263170f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Tue Sep 20 10:54:48 2005 -0700

    [PATCH] IB/mthca: Fix device removal memory leak
    
    Clean up QP table array on device removal.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8d2cae0651502028bf64844508ab18528bbd65c2
Author: Roland Dreier <rolandd@cisco.com>
Date:   Tue Sep 20 10:52:04 2005 -0700

    [PATCH] IPoIB: Don't flush workqueue from within workqueue
    
    ipoib_mcast_restart_task() is always called from within the
    single-threaded IPoIB workqueue, so flushing the workqueue from within
    the function can lead to a recursion overflow.  But since we're
    running in a single-threaded workqueue, we're already synchronized
    against other items in the workqueue, so just get rid of the flush in
    ipoib_mcast_restart_task().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 840ff6a4f6174d7fe19c206b5f36ff64123a2f45
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Sep 20 17:52:13 2005 +0100

    [ARM] Prevent deadlock in page fault handler
    
    As per x86, we may deadlock while trying to get the mmap semaphore.
    Implement the same fix, which allows (eg) recursive faults to cause
    an oops instead of deadlocking.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5fe10ab19046d84f3fd243436cbd5fa01019e809
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 20 17:24:33 2005 +0100

    [ARM] 2928/1: S3C2410 - make machine init code static
    
    Patch from Ben Dooks
    
    This code is not being exported, declare it static
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c90eef84b8f5c7416cb99ab6907896f2dd392b4d
Merge: 9600c11... eed8b2d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 20 08:54:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit 9600c11ba3602be161cd376f1460f3de561fc299
Merge: 676d55a... 13e1e1f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 20 08:50:49 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit 9d0fd1eb8a3c19f3ede5418540b3c9f64fac4b86
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 20 16:45:20 2005 +0100

    [ARM] 2927/1: .arch.info - postfix section with .init for `make buildcheck`
    
    Patch from Ben Dooks
    
    The `make buildcheck` is erroneously reporting that the .arch.info
    list is referencing items in the .init section as it is not itself
    postfixed with .init
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 02b7dd1244aab9267ae4078e1ad6a2fdaabeb6ed
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 20 16:35:03 2005 +0100

    [ARM] 2926/1: .proc.info - postfix section with .init for `make buildcheck`
    
    Patch from Ben Dooks
    
    The `make buildcheck` is erroneously reporting that the .proc.info
    list is referencing items in the .init section as it is not itself
    postfixed with .init
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bfe6815e0465035d013b2b676444376fe2b3716e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 20 16:25:12 2005 +0100

    [ARM] 2925/3: earlyparam - postfix section with .init for `make buildcheck`
    
    Patch from Ben Dooks
    
    The `make buildcheck` is erroneously reporting that the earlyparam
    list is referencing items in the .init section as it is not itself
    postfixed with .init
    Also, as per rmk's suggestion, rename the __early_param to
    .early_param to bring it into line with everything else
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 58dd48a6575d3ba86ba659eb8c6fc23246783fba
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Tue Sep 20 16:21:42 2005 +0100

    [ARM] 2922/1: compile fix for shark
    
    Patch from Vincent Sanders
    
    Shark platform fails to build with gcc 4 because of a bad lvalue assignement
    
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9506057fca54464f3291b62156e6cd907c4cbc95
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Sep 20 16:20:49 2005 +0100

    [ARM] 2924/3: taglist - postfix section with .init for `make buildcheck`
    
    Patch from Ben Dooks
    
    The `make buildcheck` is erroneously reporting that the taglist
    is referencing items in the .init section as it is not itself
    postfixed with .init
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit eed8b2dee7cff46dd4bf5b82dc53465d229162ba
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Tue Sep 20 14:19:30 2005 +0100

    NTFS: More runlist handling fixes from Richard Russon and myself.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 6a9b490d5fd7f23c5bcd75f970e01633ad3136e3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 19 20:11:57 2005 -0700

    [SPARC64]: Move DCACHE_ALIASING_POSSIBLE define to asm/page.h
    
    This showed that arch/sparc64/kernel/ptrace.c was not getting
    the define properly, and thus the code protected by this ifdef
    was never actually compiled before.  So fix that too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 676d55ae30ea3b688f0386f70553489f25f24d55
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 19 20:00:41 2005 -0700

    Linux v2.6.14-rc2
    
    Avast, ye scurvy land-lubbers! Time to try out a new release.
    
    Arrr!

commit e0487992ce1dd7ae7da9c6aabdb19570bb95432b
Author: Ed L. Cashin <ecashin@coraid.com>
Date:   Mon Sep 19 19:57:36 2005 -0700

    [BYTEORDER]: Document alignment and byteorder macros
    
    This patch comments the fact that although passing le64_to_cpup et
    al. is within the intended use of the byteorder macros, using
    get_unaligned is the recommended way to go.
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff171d8f66a7fe1a000e610e9de11224749f9a22
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Sep 19 19:56:06 2005 -0700

    [SPARC64]: Handle little-endian unaligned loads/stores correctly.
    
    Because we use byte loads/stores to cons up the value
    in and out of registers, we can't expect the ASI endianness
    setting to take care of this for us.  So do it by hand.
    
    This case is triggered by drivers/block/aoe/aoecmd.c in the
    ataid_complete() function where it goes:
    
    		/* word 100: number lba48 sectors */
    		ssize = le64_to_cpup((__le64 *) &id[100<<1]);
    
    This &id[100<<1] address is 4 byte, rather than 8 byte aligned,
    thus triggering the unaligned exception.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f805fbdaacf4367ce566743a665622387768ac0d
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 19 19:54:29 2005 -0700

    Make fsnotify possibly work better for the inode removal case
    
    Checking i_nlink is dubious, but the alternatives look even
    less appetizing.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 875bd5ab01bc0b760fd4e97838931cd2e7456cbd
Merge: 6d1cfe3... e14c3ca...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 19 18:46:11 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 6d1cfe3f1752f17e297df60c8bcc6cd6e0a58449
Author: Mark J Cox <mjc@redhat.com>
Date:   Mon Sep 19 17:55:30 2005 -0700

    [PATCH] raw_sendmsg DoS on 2.6
    
    Fix unchecked __get_user that could be tricked into generating a
    memory read on an arbitrary address.  The result of the read is not
    returned directly but you may be able to divine some information about
    it, or use the read to cause a crash on some architectures by reading
    hardware state.  CAN-2004-2492.
    
    Fix from Al Viro, ack from Dave Miller.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e14c3caf605dfd29bd1aac3097e39db94afc9f07
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Sep 19 18:18:38 2005 -0700

    [TCP]: Handle SACK'd packets properly in tcp_fragment().
    
    The problem is that we're now calling tcp_fragment() in a context
    where the packets might be marked as SACKED_ACKED or SACKED_RETRANS.
    This was not possible before as you never retransmitted packets that
    are so marked.
    
    Because of this, we need to adjust sacked_out and retrans_out in
    tcp_fragment().  This is exactly what the following patch does.
    
    We also need to preserve the SACKED_ACKED/SACKED_RETRANS marking
    if they exist.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3c3f8f25c177e4f9e4e00bcc1b90b28b1be37937
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Sep 19 15:41:28 2005 -0700

    [8021Q]: Add endian annotations.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2cf655cd65888e9fed0803d77e9e4f7d1db674cc
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Mon Sep 19 15:39:32 2005 -0700

    [WAN] hdlc_cisco: Fix regression introduced by skb->tail changes.
    
    The following commit breaks cisco mode with my WAN drivers:
    author	David S. Miller <davem@davemloft.net>
    	Tue, 28 Jun 2005 22:25:31 +0000 (15:25 -0700)
    commit	689be43945e9ca7dd704522e55af1b8a73a994d3
    
    "[NET]: Remove gratuitous use of skb->tail in network drivers."
    
    The following patch fixes it - please apply (cisco_hard_header does
    skb_push(4 bytes)).
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8922bc93aa78a202c2b68b2de19b71329cb321e1
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Sep 19 15:35:57 2005 -0700

    [NETFILTER]: Export ip_nat_port_{nfattr_to_range,range_to_nfattr}
    
    Those exports are needed by the PPTP helper following in the next
    couple of changes.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a41bc00234a0a2ccaa99a194341ae108ae17ddc8
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Sep 19 15:35:31 2005 -0700

    [NETFILTER]: Rename misnamed function
    
    Both __ip_conntrack_expect_find and ip_conntrack_expect_find_get take
    a reference to the expectation, the difference is that callers of
    __ip_conntrack_expect_find must hold ip_conntrack_lock.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e674d0f38de6109b59dbe30fba8b296a03229b8e
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Mon Sep 19 15:34:40 2005 -0700

    [NETFILTER] ip6tables: remove duplicate code
    
    Some IPv6 matches have very similar loops to find IPv6 extension header
    and we can unify them. This patch introduces ipv6_find_hdr() to do it.
    I just checked that it can find the target headers in the packet which has
    dst,hbh,rt,frag,ah,esp headers.
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 926b50f92a30090da2c1a8675de954c2d9b09732
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Sep 19 15:33:08 2005 -0700

    [NETFILTER]: Add new PPTP conntrack and NAT helper
    
    This new "version 3" PPTP conntrack/nat helper is finally ready for
    mainline inclusion.  Special thanks to lots of last-minute bugfixing
    by Patric McHardy.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 772cb712b1373d335ef2874ea357ec681edc754b
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Mon Sep 19 15:31:18 2005 -0700

    [IPV4]: fib_trie RCU refinements
    
    * This patch is from Paul McKenney's RCU reviewing.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d25cd6cc2528e4af12ab18e84fe95ed78f3f21a
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Mon Sep 19 15:29:52 2005 -0700

    [IPV4]: fib_trie tnode stats refinements
    
    * Prints the route tnode and set the stats level deepth as before.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eff4c654b1a4a5e5493fbdc3affa6dd48765c085
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Mon Sep 19 13:51:01 2005 -0700

    [PATCH] IB: Fix data length for RMPP SA sends
    
    We need to subtract off the header length from our payload
    length when sending multi-packet SA messages.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 13e1e1f08c1c098c7574c1fa72bd8c67792dc89b
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon Sep 19 16:56:17 2005 +0200

    [SCSI] zfcp: add additional fc_host attributes
    
    this patch adds some fc host attributes and removes its equivalents
    from the zfcp_adapter structure and zfcp specific sysfs subtree.
    
    Furthermore it removes superfluous calls to fc_remort_port_delete when
    an adapter is set offline because rports will be removed by
    fc_remove_host anyway.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit aef4a983090fa590481a86d9690dc3fa6bb121fa
Author: Maxim Shchetynin <maxim@de.ibm.com>
Date:   Tue Sep 13 21:51:16 2005 +0200

    [SCSI] zfcp: provide support for NPIV
    
    N_Port ID Virtualization (NPIV) allows a single FCP port to appear as
    multiple, distinct ports providing separate port identification. NPIV
    is supported by FC HBAs on System z9. zfcp was adapted to support this
    new feature.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8a36e4532ea10471f0a8605207d071361d7be2c3
Author: Maxim Shchetynin <maxim@de.ibm.com>
Date:   Tue Sep 13 21:50:38 2005 +0200

    [SCSI] zfcp: enhancement of zfcp debug features
    
    Debug features (DBFs) els_dbf, cmd_dbf and abt_dbf were removed and
    san_dbf, hba_dbf and scsi_dbf were introduced. The erp_dbf did not
    change.
    The new traces improve debugging of problems with zfcp, scsi-stack,
    multipath and hardware in the SAN. san_dbf traces things like ELS and
    CT commands, hba_dbf saves HBA specific information of requests, and
    scsi_dbf saves FCP and SCSI specific information of requests. Common
    to all new DBFs is that they provide a so called structured view. This
    significantly improves readability of the traces.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 810f1e3ea5cc0a812816af97020a27c73441f8e9
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Tue Sep 13 21:49:52 2005 +0200

    [SCSI] zfcp: shorten eh_bus_reset and eh_host_reset handlers
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 77eb1699c76177af2f3d65c8ae7934cf304e0254
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Tue Sep 13 21:48:33 2005 +0200

    [SCSI] zfcp: remove function zfcp_fsf_req_wait_and_cleanup
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 059c97d0434834d291eff94669ca2dd3eaac9d28
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Tue Sep 13 21:47:52 2005 +0200

    [SCSI] zfcp: remove union zfcp_req_data, use unit refcount for FCP commands
    
    o union zfcp_req_data removed
    o increment unit refcount when processing FCP commands
     (This fixes a theoretical race: When all scsi commands of a unit
      are aborted and the scsi_device is removed then the unit could be
      removed before all fsf_requests of that unit are completely processed.)
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3734d24b2e8d85796de70c13705cfb7cbb1d77df
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Tue Sep 13 21:47:11 2005 +0200

    [SCSI] zfcp: fix race conditions when accessing erp_action lists
    
    o always use locking when changing erp_action lists,
    o avoid escalation to ERP_ACTION_REOPEN_PORT_FORCED if erp_action is
      still in use for ERP_ACTION_REOPEN_PORT
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e0fc15bef0e8c6b5abad6e10cfe3d42e278ae8e8
Author: Moore, Eric Dean <Eric.Moore@lsil.com>
Date:   Thu Sep 15 13:17:14 2005 -0600

    [SCSI] fusion SAS support (mptsas driver) minor fix
    
    On Thursday, September 15, 2005 6:22 AM, Christoph Hellwig wrote:
    > Looks good to me, except for the spurious scsi_print_command prototype
    > in mptscsih.h.
    
    The attached patch addresses that concern.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 466544d8898fc87ed6e2e62ac14af7c50ab7a1a4
Author: Moore, Eric Dean <Eric.Moore@lsil.com>
Date:   Wed Sep 14 18:09:10 2005 -0600

    [SCSI] fusion SAS support (mptsas driver) updates
    
    Summary of Changes:
    * splitting mpt_interrupt per Christophs suggestion
    about a month ago
    * rename ScsiCfgData to SpiCfgData structure,
    then move all the raid related info into
    new structure called RaidCfgData.  This is
    done because SAS supports RAID, as well as SPI,
    so the raid stuff should be seperate.
    * incorrect timeout calculation for cntdn
    inside WaitForDoorbellAck and WaitForDoortbellInt
    * add support for interpreting SAS Log Info
    * Increase Event Log Size from 0xA to 0x32
    * Fix bug in mptsas/mptfc/mptspi - when controller
    has Initiator Mode Disabled, and only running in
    TargetMode, the mptctl would panic when loading.
    The fix is to return 0, instead of -ENODEV, in
    SCSI LLD respective probe routines
    * Fix bug in mptlan.c - driver will panic if
    there is host reset, due to dev being set to
    zero in mpt_lan_ioc_reset
    * Fix's for SPI - Echo Buffer
    * Several fix's in mptscsih_io_done - FCP Response
    info, RESIDUAL_MISMATCH, Data Underrun, etc.
    * Cleanup Error Handling - EH handlers,
    mptscsih_flush_cmds, and zeroing out ScsiLookup
    from mptscsih_qcmd
    * Cleanup asyn event handling from
    mptscsih -> mptscsih_event_process.  Also
    added support for SAS Persistent Table Full,
    an asyn event
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0c33b27deb93178f10778b3d2669af1674793cef
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Sep 9 16:27:19 2005 +0200

    [SCSI] fusion SAS support (mptsas driver)
    
    Adds the actual mptsas driver, based upon the LSI driver with new work
    for SAS transport class integration from Eric Moore and me.
    
    This obviously depends on the SAS transport class.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 82ffb67164064752a56669511545316075b41e1d
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Sep 9 16:25:54 2005 +0200

    [SCSI] fusion core changes for SAS support
    
     - various bits for SAS support from the LSI driver.
     - use the device private data for the fusion target private data.
       this should be using the midlayer target data framework, but we
       can't move over to that until fusion has been switched to the
       generic DV code
     - use target ID and channel from the fusion target private data,
       because those in scsi_device will be different for mptsas
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 997a51ae373df6484cdd4a5fc61a9c9bec82cd68
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Sep 19 18:55:51 2005 +0400

    [PATCH] Alpha: ISA IRQs fixup for dp264
    
    Basically, this extends original dp264 fixup to all dp264 variations.
    Here is one minor change: mask out bits 4-7 of a value assigned by SRM,
    because
    - newer consoles report ISA IRQs with offset 0xe0;
    - even if console IRQ value is bogus, we'll have a value < 16
      so it should be harmless as it won't clash with native IRQs.
    
    Particularly this fixes USB interrupt problem on xp1000 and es40.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Acked-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6577ae51cf52f5fb0e4a85e673dd7bf2d0074e3e
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Sep 19 09:17:56 2005 -0700

    [PATCH] IB/mthca: Don't try to set srq->last for userspace SRQs
    
    Userspace SRQs don't have a buffer allocated for them in the kernel, so
    it doesn't make sense to set srq->last during initialization.  In fact,
    this can crash trying to follow a nonexistent buffer pointer.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 3ed7a4704beb66a155acd67b78b7e9a5674d55fb
Author: James Bottomley <jejb@titanic.(none)>
Date:   Mon Sep 19 09:50:04 2005 -0500

    [SCSI] Fix thread termination for the SCSI error handle
    
    From: 	Alan Stern <stern@rowland.harvard.edu>
    
    This patch (as561) fixes the error handler's thread-exit code.  The
    kthread_stop call won't wake the thread from a down_interruptible, so
    the patch gets rid of the semaphore and simply does
    
            set_current_state(TASK_INTERRUPTIBLE);
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    
    Modified to simplify the termination loop and correct the sleep condition.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 939647ee308e0ad924e776657704c7bedd498664
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Sep 18 15:05:20 2005 -0500

    [SCSI] fix oops on usb storage device disconnect
    
    We fix the oops by enforcing the host state model.  There have also
    been two extra states added: SHOST_CANCEL_RECOVERY and
    SHOST_DEL_RECOVERY so we can take the model through host removal while
    the recovery thread is active.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 044a500e46742d39d22f1781cfb64ba93b463e39
Merge: f6098cf... 6c0741f...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 19 09:47:49 2005 +0100

    Merge branch 'master' of /home/src/linux-2.6/

commit f6098cf449b81c14a51e48dd22ae47d03126a1de
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 19 09:41:39 2005 +0100

    NTFS: Fix ntfs_{read,write}page() to cope with concurrent truncates better.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 4e64c88693fde1b1cbaa4cfecad43a0c3fad354e
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 19 09:38:41 2005 +0100

    NTFS: Fix handling of compressed directories that I broke in earlier changeset.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 5c9f6de3b80ca46000bd1b63d892820f9ee32138
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 19 09:33:40 2005 +0100

    NTFS: Fix various bugs in the runlist merging code.  (Based on libntfs
          changes by Richard Russon.)
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 3853194c2e174cee4da093c67bd54cbf9a38559a
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sun Sep 18 14:00:17 2005 -0700

    [PATCH] IB/mthca: Fix posting work requests to shared receive queues
    
    The error handling paths in mthca_tavor_post_srq_recv() and
    mthca_arbel_post_srq_recv() are quite bogus, the result of a
    screwed up merge.  Fix them so they work as intended.
    
    Pointed out by Michael S. Tsirkin <mst@mellanox.co.il>
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c915033fc62d7186d243d89f88782d6be33fd8f6
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sun Sep 18 13:52:06 2005 -0700

    [PATCH] IB/mthca: Initialize eq->nent before we use it
    
    In mthca_create_eq(), we call get_eqe() before setting eq->nent.  This
    is wrong, because get_eqe() uses eq->nent.  Fix this, and clean up the
    code a little while we're at it.  (We got lucky with the current code,
    because eq->nent was cleared to 0, which get_eqe() made happen to do
    the right thing)
    
    Pointed out by Michael S. Tsirkin <mst@mellanox.co.il>
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ce5b65cc9626feac0d4ffb96f798407e50c45575
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sun Sep 18 13:47:53 2005 -0700

    [PATCH] IPoIB: Fix SA client retransmission strategy
    
    We got a little mixed up with what the backoff member holds in the
    IPoIB multicast group structure: sometimes it was used as a number of
    seconds, and sometimes it was used as a number of jiffies.  Fix the
    code so that backoff is always in seconds.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d6cff021e24515255b296d399ec517a68bf2ed08
Author: Roland Dreier <rolandd@cisco.com>
Date:   Tue Sep 13 10:41:03 2005 -0700

    [PATCH] IB/mthca: fix posting of first work request
    
    Fix posting first WQE for mem-free HCAs: we need to link to previous
    WQE even in that case.  While we're at it, simplify code for
    Tavor-mode HCAs.  We don't really need the conditional test there
    either; we can similarly always link to the previous WQE.
    
    Based on Michael S. Tsirkin's analogous fix for userspace libmthca.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit bb4a7f0da75ce9f3e933880428d39b2aa1f16961
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Sep 12 14:08:51 2005 -0700

    [PATCH] IB/mthca: assign ACK timeout field correctly
    
    The hardware reads the ACK timeout field from the most significant 5
    bits of struct mthca_qp_path's ackto field, not the least significant
    bits.  This fix has the driver put the timeout in the right place.
    Without this, we get a timeout that is 2^8 times too small.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 51574e0398a2d93cbf7f26e36b673cd919062268
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Sep 12 09:52:28 2005 -0700

    [PATCH] IPoIB: fix module removal race
    
    Since ipoib uses queue_delayed_work to run flush task on port state events,
    it must flush scheduled work after unregistering the event handler.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6c0741fbdee5bd0f8ed13ac287c4ab18e8ba7d83
Merge: 628f87f... 118ec0b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 18 15:31:20 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 118ec0b3e02e7d22cf27b9f5a2836fa6f395b61a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 18 22:16:41 2005 +0100

    [ARM] Fix warning in arch/arm/mach-sa1100/generic.c
    
    Fix:
    
    arch/arm/mach-sa1100/generic.c:224: warning: 'struct mcp_plat_data' declared inside parameter list
    
    caused by mussing structure and function declaration.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 63150fcf73dbfb752a850a5e2fe3aed570154433
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 18 21:49:29 2005 +0100

    [ARM] Fix warning in arch/arm/kernel/semaphore.c
    
    Newer binutils complains:
    /tmp/cc07pbI9.s:146: Warning: ignoring changed section type for .sched.text
    
    Fix this warning by adding %progbits to the .section.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a64358db1253b35d508a411e80a3ad23b859ec88
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jul 26 10:27:10 2005 -0400

    [SCSI] SCSI scanning and removal fixes
    
    This patch (as545) fixes the list traversals in __scsi_remove_target and
    scsi_forget_host.  In each case the existing code list_for_each_entry_safe
    in an _unsafe_ manner, because the list was not protected from outside
    modification while the iteration was running.
    
    The new scsi_forget_host routine takes the moderately controversial step
    of iterating over devices for removal rather than iterating over targets.
    This makes more sense to me because the current scheme treats targets as
    second-class citizens, created and removed on demand, rather than as
    objects corresponding to actual hardware.  (Also I couldn't figure out any
    safe way to iterate over the target list, since it's not so easy to tell
    when a target has already been removed.)
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e0a200894efa33ea1ac9957717ae151afa02bb6f
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Sun Sep 18 21:11:56 2005 +0100

    [ARM] 2917/1: Make IXP4xx mach_desc's depend on config options
    
    Patch from Deepak Saxena
    
    Building a kernel for IXDP425 currently includes the machine descriptors
    for IXDP465 and PRPMC1100 even if those machines are not configured.
    This means we can build a kernel that boots on those machines even
    though the machine_is_xxx() macro will always return 0 and other bits
    such as PCI won't be compiled in. This can lead to many wasted hours
    wondering what you have done to your kernel to make it randomly crash
    thus requireing large quantities of beer to be consumed. While I am
    all for consumption of large quantities of beer, there are better
    reasons to do so then stupid kernel bugs.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7f8c0fd78dccaf30e60cb4303bd7a21c7d9e6da3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 18 21:11:08 2005 +0100

    [ARM] Fix warning in asm/futex.h
    
    The recently added futex.h contains an unused variable, which gcc
    naturally warns about.  Remove this unused variable.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 628f87f3d585bd0c2b0e39df039585d7a5831cc9
Author: Harald Welte <laforge@netfilter.org>
Date:   Sun Sep 18 00:33:02 2005 -0700

    [NETFILTER]: Solve Kconfig dependency problem
    
    As suggested by Roman Zippel.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 987905ded3d19c196dae25cac46c569cac9594b8
Author: Mitsuru KANDA <mk@linux-ipv6.org>
Date:   Sun Sep 18 00:30:08 2005 -0700

    [IPV6]: Check connect(2) status for IPv6 UDP socket (Re: xfrm_lookup)
    
    I think we should cache the per-socket route(dst_entry) only when the
    IPv6 UDP socket is connect(2)'ed.
    (which is same as IPv4 UDP send behavior)
    
    Signed-off-by: Mitsuru KANDA <mk@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 40abc27066c49b2c13c817154d438431b0303b96
Author: Florin Malita <fmalita@gmail.com>
Date:   Sun Sep 18 00:24:12 2005 -0700

    [BOND]: Fix bond_init() error path handling.
    
    From: Florin Malita <fmalita@gmail.com>
    
    bond_init() is not releasing rtnl_sem after register_netdevice() and before
    calling unregister_netdevice() (from bond_free_all()) in the exception
    path.  As the device registration is not completed (dev->reg_state ==
    NETREG_REGISTERING), the call to unregister_netdevice() triggers
    BUG_ON(dev->reg_state != NETREG_REGISTERED).
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88f964db6ef728982734356bf4c406270ea29c1d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Sep 18 00:19:32 2005 -0700

    [DCCP]: Introduce CCID getsockopt for the CCIDs
    
    Allocation for the optnames is similar to the DCCP options, with a
    range for rx and tx half connection CCIDs.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 561713cf475de1f671cc89c437927ec008a20209
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Sep 18 00:18:52 2005 -0700

    [DCCP]: Don't use necessarily the same CCID for tx and rx
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65299d6c3cfb49cc3eee4fc483e7edd23ea7b2ed
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Sep 18 00:18:32 2005 -0700

    [CCID3]: Introduce include/linux/tfrc.h
    
    Moving the TFRC sender and receiver variables to separate structs, so
    that we can copy these structs to userspace thru getsockopt,
    dccp_diag, etc.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ae31c3399d17b1f7bc1742724f70476b5417744f
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Sep 18 00:17:51 2005 -0700

    [DCCP]: Move the ack vector code to net/dccp/ackvec.[ch]
    
    Isolating it, that will be used when we introduce a CCID2 (TCP-Like)
    implementation.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 21f130a2370ba837cdfc5204ebe52e7c664fec3d
Merge: bc5e8fd... c58ec93...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Sep 18 00:17:10 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit bc5e8fdfc622b03acf5ac974a1b8b26da6511c99
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 17 15:41:04 2005 -0700

    x86-64/smp: fix random SIGSEGV issues
    
    They seem to have been due to AMD errata 63/122; the fix is to disable
    TLB flush filtering in SMP configurations.
    
    Confirmed to fix the problem by Andrew Walrond <andrew@walrond.org>
    
    [ Let's see if we'll have a better fix eventually, this is the Q&D
      "let's get this fixed and out there" version ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61ffcafafb3d985e1ab8463be0187b421614775c
Author: Karsten Keil <kkeil@suse.de>
Date:   Sat Sep 17 23:52:42 2005 +0200

    [PATCH] Fix ST 5481 USB driver
    
    The old driver was not fully adapted to new USB ABI and does not
    work.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b95be99d52ce4f9db9ff0bd5f10e9e2066da6d2e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Sep 15 13:52:51 2005 -0400

    [SCSI] fix oops in scsi_release_buffers()
    
    I found one other thing that needs to be fixed.  The call to
    scsi_release_buffers in scsi_unprep_request causes an oops, because the
    sgtable has already been freed in scsi_io_completion.  The following patch
    is needed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 27b2f6792f3b482e4636818c7efaf4c43fef32a3
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Fri Sep 16 19:28:20 2005 -0700

    [PATCH] qla2xxx: Use dword accessors for PCI_ROM_ADDRESS
    
    PCI_ROM_ADDRESS is a 32 bit register and as such should be accessed using
    pci_bus_{read,write}_config_dword().  A recent audit of drivers/ turned up
    several cases of byte- and word-sized accesses.  The harmful ones were fixed
    by Linus directly.  This patches up one of the remaining
    harmless-but-still-wrong cases caught in the dragnet.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Cc: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06c6d271f41ffa20f2dadc9bfe100a89f7f1dd1d
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Fri Sep 16 19:28:19 2005 -0700

    [PATCH] shpchp: Use dword accessors for PCI_ROM_ADDRESS
    
    PCI_ROM_ADDRESS is a 32 bit register and as such should be accessed using
    pci_bus_{read,write}_config_dword().  A recent audit of drivers/ turned up
    several cases of byte- and word-sized accesses.  The harmful ones were fixed
    by Linus directly.  This patches up one of the remaining
    harmless-but-still-wrong cases caught in the dragnet.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Cc: <kristen.c.accardi@intel.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2fa4f4ad8ddf4b9fac344f1da7a25d4868f08f5
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Fri Sep 16 19:28:18 2005 -0700

    [PATCH] pciehp: Use dword accessors for PCI_ROM_ADDRESS
    
    PCI_ROM_ADDRESS is a 32 bit register and as such should be accessed
    using pci_bus_{read,write}_config_dword(). A recent audit of drivers/
    turned up several cases of byte- and word-sized accesses. The harmful
    ones were fixed by Linus directly. This patches up one of the remaining
    harmless-but-still-wrong cases caught in the dragnet.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Cc: <kristen.c.accardi@intel.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d648daca1170945600756b31866d0362a67f2aae
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Fri Sep 16 19:28:17 2005 -0700

    [PATCH] ibmphp: Use dword accessors for PCI_ROM_ADDRESS
    
    PCI_ROM_ADDRESS is a 32 bit register and as such should be accessed using
    pci_bus_{read,write}_config_dword().  A recent audit of drivers/ turned up
    several cases of byte- and word-sized accesses.  The harmful ones were fixed
    by Linus directly.  This patches up one of the remaining
    harmless-but-still-wrong cases caught in the dragnet.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef0f6a437f92fbd96c725086555b37b29371e107
Author: Timothy Thelin <Timothy.Thelin@wdc.com>
Date:   Fri Sep 16 19:28:16 2005 -0700

    [PATCH] ide: fix null request pointer for taskfile ioctl
    
    When doing ioctl HDIO_DRIVE_TASKFILE, the ide_task_t's request pointer is
    never set, but flagged_taskfile and do_rw_taskfile pass it as a parameter
    to the prehandler.  The kernel will oops taskfile pio-out commands because
    of this (taskfile pio-in doesn't use a prehandler).  This fix sets the
    request pointer at the time the request is created to stop this oops.
    
    Signed-off-by: Timothy Thelin <timothy.thelin@wdc.com>
    Cc: "Bartlomiej Zolnierkiewicz" <bzolnier@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9564df1ff3c61f41bdc54283715417ccdfb6782b
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Sep 16 19:28:15 2005 -0700

    [PATCH] fix pf request handling
    
    Here's the patch from
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4853
    
    It is a feeble attempt at fixing the request handling in pf, it is totally
    foobar right now.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef402268f7c9ab1872cafa1e638eb78a75b7c18f
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Fri Sep 16 19:28:13 2005 -0700

    [PATCH] FAT: miss-sync issues on sync mount (miss-sync on write)
    
    This patch fixes miss-sync issue on write() system call.  This updates
    inode attrs flags, mtime and ctime on every comit_write call, due to
    locking.
    
    Signed-off-by: Hiroyuki Machida <machida@sm.sony.co.jp>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fb3a53860cee2aaaf81186c451b7da0b95b45c1
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 16 19:28:13 2005 -0700

    [PATCH] files: fix preemption issues
    
    With the new fdtable locking rules, you have to protect fdtable with either
    ->file_lock or rcu_read_lock/unlock().  There are some places where we
    aren't doing either.  This patch fixes those places.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af4e5a218e18ad588d60a4f9d6f8fb5db1a32587
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Fri Sep 16 19:28:11 2005 -0700

    [PATCH] CodingStyle: memory allocation
    
    This patch adds a new chapter on memory allocation to
    Documentation/CodingStyle.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f647e08a55d2c88c4e7ab17a0a8e3fcf568fbc65
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 16 19:28:10 2005 -0700

    [PATCH] joystick-vs-x.org fix
    
    Fix http://bugzilla.kernel.org/show_bug.cgi?id=5241
    
    2.6.13 broke compilation of the xorg tree, which apprarently insists on
    including that file.
    
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a464adeb7e8f1cd65ca911e20a7c02e452dc2c17
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Sep 16 19:28:09 2005 -0700

    [PATCH] Add smp_mb__after_clear_bit() to unlock_kiocb()
    
    Add smp_mb__after_clear_bit() to unlock_kiocb()
    
    AIO's use of wait_on_bit_lock()/wake_up_bit() forgot to add a barrier
    between clearing its lock bit and calling wake_up_bit() so wake_up_bit()'s
    unlocked waitqueue_active() can race.  This puts AIO's use in line with the
    others and the comment above wake_up_bit().
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Acked-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ac2120d90273c590cf7662f03d103519101685b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Sep 16 19:28:08 2005 -0700

    [PATCH] i2c: kill an unused i2c_adapter struct member
    
    Kill an unused member of the i2c_adapter structure.  This additionally
    fixes a potential bug, because <linux/i2c.h> doesn't include
    <linux/config.h>, so different files including <linux/i2c.h> could see a
    different definition of the i2c_adapter structure, depending on them
    including <linux/config.h> (or other header files themselves including
    <linux/config.h>) before <linux/i2c.h>, or not.
    
    Credits go to Jrn Engel for pointing me to the problem.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 393ad299658d8464149820363ee09bdf3fd45566
Author: Robert Love <rml@novell.com>
Date:   Fri Sep 16 19:28:07 2005 -0700

    [PATCH] hdaps driver update
    
    - Remove the relative input device
    - Add an absolute input device
    - Misc. cleanup and bug fixing
    
    The patch is sizable due to the cleanup from removing the relative input
    device (net -112 lines).
    
    Signed-off-by: Robert Love <rml@novell.com>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53d2be79d5981b7efc8c5ec1169613bba95bde20
Author: Davide Libenzi <davidel@xmailserver.org>
Date:   Fri Sep 16 19:28:06 2005 -0700

    [PATCH] epoll: fix delayed initialization bug
    
    Al found a potential problem in epoll_create(), where the
    file->private_data member was set after fd_install().  This is obviously
    wrong since another thread might do a close() on that fd# before we set the
    file->private_data member.  This goes over 2.6.13 and passes a few basic
    tests I've done here.
    
    (akpm: snuck in a kzalloc() cleanup too)
    
    Signed-off-by: Davide Libenzi <davidel@xmailserver.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dda8577fb5a00507e5aea737833190a10516b257
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 16 19:28:05 2005 -0700

    [PATCH] dell_rbu tidy
    
    Whitespace standardisation.
    
    Cc: Abhay Salunke <Abhay_Salunke@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e61c0e336f3931842f09e6709d76146bfd81184e
Author: Abhay Salunke <Abhay_Salunke@dell.com>
Date:   Fri Sep 16 19:28:04 2005 -0700

    [PATCH] dell_rbu: enhancements and fixes
    
    BUG fixes:
    
      The driver used to allocate memory with spinlock held which has been
      fixed in this patch.
    
      The driver was printing the entire buffer when it received a invalid
      entry in image_type.  The fix is to only print a warning message and not
      the buffer.
    
    Usability enhancements:
    
      It is possible that due to user error the /sys/class/firmware/dell_rbu
      entries might be missing, this can happen if the user does the following
    
    	echo 1 > /sys/class/firmware/dell_rbu/loading
    	echo 0 > /sys/class/firmware/dell_rbu/loading
    
      This will make the entries in /sys/class/firmware/ to disappear and the
      only way get them back was bby unloading and loading the driver.
    
      This patch makes the user recreate these entries by echoing init in to
      image_type.
    
    This patch has been tested with Libsmbios and Dell OpenManage.
    
    Signed-off-by: Abhay Salunke <Abhay_Salunke@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3013449243adc3421b507696e5d247a3d292ee0c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:28:03 2005 -0700

    [PATCH] uml: UML/i386 cmpxchg fix
    
    Using native cmpxchg offers a slight performance improvement in uml/i386.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2030c0fd3db3332378f95f479c286181e3920644
Author: Michael Kerrisk <mtk-lkml@gmx.net>
Date:   Fri Sep 16 19:28:02 2005 -0700

    [PATCH] PR_GET_DUMPABLE returns incorrect info
    
    2.6.13 incorporated Alan Cox's patch for /proc/sys/fs/suid_dumpable (one
    version of this patch can be found here
    http://marc.theaimsgroup.com/?l=linux-kernel&m=109647550421014&w=2 ).
    
    This patch also made corresponding changes in kernel/sys.c to change the
    prctl() PR_SET_DUMPABLE operation so that the permitted range of 'arg2' was
    modified from 0..1 to 0..2.
    
    However, a corresponding change was not made for PR_GET_DUMPABLE: if the
    dumpable flag is non-zero, then PR_GET_DUMPABLE always returns 1, so that
    the caller can't determine the true setting of this flag.
    
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afeda2c24e74cbddde376e06fdd82c215f9cb637
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Fri Sep 16 19:28:01 2005 -0700

    [PATCH] relayfs documentation typo
    
    Small typo in relayfs documentation.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 514ccd4e6c414d8064d53235f7fc09fc02ec2078
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Fri Sep 16 19:28:00 2005 -0700

    [PATCH] ppc32: Add ppc_sys descriptions for PowerQUICC I devices
    
    Added ppc_sys device and system definitions for PowerQUICC I devices.  This
    will allow drivers for PQI to be proper platform device drivers.  Currently
    sys section contains only MPC885 and MPC866.  Identification should be done
    with identify_ppc_sys_by_name call, with board-specific "name" string
    passed, since PQI do not have any register that could identify the SOC.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0faf3d3d08bb20d803ba090a1bc1ffedaea6ced6
Author: Thomas Maguin <T.Maguin@web.de>
Date:   Fri Sep 16 19:27:58 2005 -0700

    [PATCH] scsi_ioctl: Add WRITE_LONG_2 as write safe command
    
    Add WRITE_LONG_2 as write safe commands, which which allows normal users to
    make a c1-, c2- and cu-scan (so called cxscan) with readcd on
    cxscan-capable cd/dvd-writers
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a70ce8a4b1c9d39e0a180173728a8d102274631
Author: Anton Blanchard <anton@samba.org>
Date:   Fri Sep 16 19:27:58 2005 -0700

    [PATCH] ppc64: build fix
    
    I forgot to include siginfo.h when I added data breakpoint support.  We
    must include it in a round-a-bout way in mainline.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9afa57b04ca08ff061e54787e3becf5c40283149
Author: Serge Hallyn <serue@us.ibm.com>
Date:   Fri Sep 16 19:27:57 2005 -0700

    [PATCH] seclvl: use securityfs (fix)
    
    That should be -EINVAL for both.
    
    Signed-off-by: Serge Hallyn <serue@us.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d15c5749eb81dee94d40fe12584ca8461858b4cb
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 16 19:27:56 2005 -0700

    [PATCH] seclvl-use-securityfs tidy
    
    We don't put braces around single statements, thanks.
    
    Cc: Serge Hallyn <serue@us.ibm.com>
    Cc: James Morris <jmorris@namei.org>
    Cc: Chris Wright <chrisw@osdl.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73a0b538ee573a76cba59cdc9f177a71776d4678
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 16 19:27:55 2005 -0700

    [PATCH] x86_64: desc.h-needs smp.h
    
    include/asm/desc.h: In function `load_LDT':
    include/asm/desc.h:209: warning: implicit declaration of function `get_cpu'
    include/asm/desc.h:211: warning: implicit declaration of function `put_cpu'
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3519f91942f2b43942400348c16d63fe9327f04
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Fri Sep 16 19:27:54 2005 -0700

    [PATCH] fix mm/Kconfig spelling
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9491ac835829e6a34e2bbaa8adad261c71bf990
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 16 19:27:54 2005 -0700

    [PATCH] x86_64: e820.c needs module.h
    
    For EXPORT_SYMBOL.
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e36d394deb1b59d004ab057e0b5c505ffc5d8c0a
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 16 19:27:53 2005 -0700

    [PATCH] Fix up some pm_message_t types
    
    Fix up some pm_message_t types
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f87b1e6e6050c0afe8b4afc279121f99043dc54
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:52 2005 -0700

    [PATCH] uml: remove include of asm/elf.h
    
    asm/elf.h is bad on x86_64, and i386 doesn't need it any more after Al's
    cleanup.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2867ace6751adc20bb37cfb09478510c49110b27
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:51 2005 -0700

    [PATCH] uml: return a real error code
    
    do_aio used to return -1 on error instead of errno.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 114069f7384c15a7a9f8d3e333caf4d470dfe520
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:51 2005 -0700

    [PATCH] uml: merge mem_user.c and mem.c
    
    The serial UML OS-abstraction layer patch (um/kernel dir).
    
    This joins mem_user.c and mem.c files.
    
    Signed-off-by: Gennady Sharapov <Gennady.V.Sharapov@intel.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f80bc85c587e8fdeecece4f294a47eca4922ea2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:50 2005 -0700

    [PATCH] uml: move libc code out of mem_user.c and tempfile.c
    
    The serial UML OS-abstraction layer patch (um/kernel dir).
    
    This moves all system calls from mem_user.c and tempfile.c files under
    os-Linux dir.
    
    Signed-off-by: Gennady Sharapov <Gennady.V.Sharapov@intel.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4fd310e163477236a241580b3b8c29aee65f4cc
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:49 2005 -0700

    [PATCH] uml: preserve errno in error paths
    
    The poster child for this patch is the third tuntap_user hunk.  When an ioctl
    fails, it properly closes the opened file descriptor and returns.  However,
    the close resets errno to 0, and the 'return errno' that follows returns 0
    rather than the value that ioctl set.  This caused the caller to believe that
    the device open succeeded and had opened file descriptor 0, which caused no
    end of interesting behavior.
    
    The rest of this patch is a pass through the UML sources looking for places
    where errno could be reset before being passed back out.  A common culprit is
    printk, which could call write, being called before errno is returned.
    
    In some cases, where the code ends up being much smaller, I just deleted the
    printk.
    
    There was another case where a caller of run_helper looked at errno after a
    failure, rather than the return value of run_helper, which was the errno value
    that it wanted.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64b7673f91c0c3614028c5942b0d6a91d0b64a98
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:48 2005 -0700

    [PATCH] uml: Remove some build warnings
    
    These ugly double-casts are the result of gdb complaining about size
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9f0d9151083a9a77331a020a7fee498cf828e3b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:47 2005 -0700

    [PATCH] uml: Remove a useless include
    
    linux/inet.h isn't needed, and on my system, is empty.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edcc2205d33d6baefc773c915b6e7ce517bc0b19
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:47 2005 -0700

    [PATCH] uml: Remove an unused file
    
    This removes a file which is no longer used.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3eddddcf239c89bbd3c50d1440001a3d384ed40a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:46 2005 -0700

    [PATCH] uml: breakpoint an arbitrary thread
    
    This patch implements a stack trace for a thread, not unlike sysrq-t does.
    The advantage to this is that a break point can be placed on showreqs, so that
    upon showing the stack, you jump immediately into the debugger.  While sysrq-t
    does the same thing, sysrq-t shows *all* threads stacks.  It also doesn't work
    right now.  In the future, I thought it might be acceptable to make this show
    all pids stacks, but perhaps leaving well enough alone and just using sysrq-t
    would be okay.  For now, upon receiving the stack command, UML switches
    context to that thread, dumps its registers, and then switches context back to
    the original thread.  Since UML compacts all threads into one of 4 host
    threads, this sort of mechanism could be expanded in the future to include
    other debugging helpers that sysrq does not cover.
    
    Note by jdike - The main benefit to this is that it brings an arbitrary thread
    back into context, where it can be examined by gdb.  The fact that it dumps it
    stack is secondary.  This provides the capability to examine a sleeping
    thread, which has existed in tt mode, but not in skas mode until now.
    
    Also, the other threads, that sysrq doesn't cover, can be gdb-ed directly
    anyway.
    
    Signed-off-by: Allan Graves <allan.graves@gmail.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6e34c6af6f18bd6c66bfb1c6a7c57068412aa73
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Sep 16 19:27:43 2005 -0700

    [PATCH] uml: _switch_to code consolidation
    
    This patch moves code that is in both switch_to_tt and switch_to_skas to the
    top level _switch_to function, keeping us from duplicating code.  It is
    required for the stack trace patch to work properly.
    
    Signed-off-by: Allan Graves <allan.graves@gmail.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6add9f7f529b124938d14ae9db5a952d1272075a
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Fri Sep 16 19:27:42 2005 -0700

    [PATCH] s390: kernel stack corruption
    
    When an asynchronous interruption occurs during the execution of the
    'critical section' within the generic interruption handling code (entry.S),
    a faulty check for a userspace PSW may result in a corrupted kernel stack
    pointer which subsequently triggers a stack overflow check.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26ff6ad9786abf6f40a6d3cbb89753b4fa50cb00
Author: Srivatsa Vaddagiri <vatsa@in.ibm.com>
Date:   Fri Sep 16 19:27:40 2005 -0700

    [PATCH] CPU hotplug breaks wake_up_new_task
    
    Fix a problem wherein a new-born task is added to a dead CPU.
    
    Signed-off-by: Srivatsa Vaddagiri <vatsa@in.ibm.com>
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Acked-by: Shaohua Li <shaohua.li@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa72e26a640e551637f91122d782d5a85d514f5b
Author: Domen Puncer <domen@coderock.org>
Date:   Fri Sep 16 19:27:36 2005 -0700

    [PATCH] Remove arch/arm26/boot/compressed/hw-bse.c
    
    Remove nowhere referenced file (egrep "hw-bse\." didn't find anything).
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c782268be8892962a1ae2c09a2e87e7849454ef1
Author: Volker Sameske <sameske@de.ibm.com>
Date:   Fri Sep 16 19:27:35 2005 -0700

    [PATCH] s390: diag 0x308 reipl
    
    Add code to support the re-IPL method using diagnose 0x308.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7ae9dd80a3ecf070ea0c5fe1d405cd7687d6c51
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Fri Sep 16 19:27:34 2005 -0700

    [PATCH] s390: show_cpuinfo fix
    
    Disable preemption in show_cpuinfo to avoid problems and the warning about
    smp_processor_id.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90f4e12112284f1a41594e2950e6eced5b064efc
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Fri Sep 16 19:27:34 2005 -0700

    [PATCH] s390: crypto driver patch take 2
    
    Got confused with the crypto update.  The last patch added a call to
    destroy_workqueue() for a non-existent workqueue with the comment "Remove
    device workqueue on module unload".  This is nonsense.  Remove the offending
    hunk again.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d176795b3eedc18f95160ecc0d7cdf0d2bc5a578
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Fri Sep 16 19:27:33 2005 -0700

    [PATCH] s390: bl_dev array size
    
    Calculate correct size for bl_dev array.  It should be 8KB instead of 512KB
    for 2^16 bits.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1306a2b2be35179449db737ac0562b067cb96ddb
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Fri Sep 16 19:27:32 2005 -0700

    [PATCH] s390: default configuration
    
    Update default configuration of s390.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62052d42a5327281fc43fd7bcfb73ac7d36ffc2e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 16 19:27:31 2005 -0700

    [PATCH] MTD: Update SharpSL partition definitions
    
    Add partition definitions for the new Sharp Zaurus models Spitz (SL-C3000),
    Akita (SL-C1000) and Borzoi (SL-C3100)
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12e8780813c8c515b685b86c1306d169a4cae5fe
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 16 19:27:30 2005 -0700

    [PATCH] SharpSL: Add missing hunk from backlight update
    
    This hunk from the sharpsl/corgi backlight update appears to have got lost
    somewhere along the way.  Its needed to match the other changes.
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7e70ba45fd9850296ebb78ff5827f6a375f650c
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Fri Sep 16 19:27:29 2005 -0700

    [PATCH] RAID6 Altivec fix
    
    This patch fixes a signedness bug with RAID6 for Altivec, and makes the
    Altivec code testable in userspace.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c58ec93245a1fb7354f9e331960380827b9f41db
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Sep 17 00:46:27 2005 -0700

    [TG3]: Fix 4GB boundary tx handling
    
    Fix and simplify the workaround code for the 4GB boundary tx buffer
    hardware bug.
    
    1. Need to unmap the original SKB's dma addresses if a new SKB cannot
       be allocated.
    
    2. Need to pass the base flag to tigon3_4gb_hwbug_workaround() or TSO
       won't work properly.
    
    3. The guilty entry and length parameters for
       tigon3_4gb_hwbug_workaround() are removed as they are not necessary.
    
    4. Remove assumption that only one fragment can hit the 4GB boundary.
       Another fragment can hit 8GB for example.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb8edb085716621605cc2e7131a6369d2223d992
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Sep 17 00:42:26 2005 -0700

    [DCCP]: Add MAINTAINERS and CREDITS entries
    
    Also remove the SPX entry in MAINTAINERS, forgot to do that
    when I removed it.
    
    Signed-off-by: Ian McDonald <iam4@cs.waikato.ac.nz>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9eb0eec74d9425f4376df653304783339a027d79
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Sep 17 00:41:21 2005 -0700

    [NETFILTER] move nfnetlink options to right location in kconfig menu
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 777ed97f3e549832845d70dcae96cb36c41a543a
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Sep 17 00:41:02 2005 -0700

    [NETFILTER] Fix Kconfig dependencies for nfnetlink/ctnetlink
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 22abe310bc4b0c684fd3716af6b6116ff1011707
Author: Peter Hagervall <hager@cs.umu.se>
Date:   Fri Sep 16 17:01:03 2005 -0700

    [TG3]: Sparse fixes for tg3
    
    Change 0 to NULL where appropriate.
    
    Signed-off-by: Peter Hagervall <hager@cs.umu.se>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8f39143ac67ffa2e26ce48aaac6bf5dc7dae95f
Author: Harald Welte <laforge@netfilter.org>
Date:   Fri Sep 16 17:00:38 2005 -0700

    [NETFILTER]: Fix oops in conntrack event cache
    
    ip_ct_refresh_acct() can be called without a valid "skb" pointer.
    This used to work, since ct_add_counters() deals with that fact.
    However, the recently-added event cache doesn't handle this at all.
    
    This patch is a quick fix that is supposed to be replaced soon by a cleaner
    solution during the pending redesign of the event cache.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 136e92bbec0a6d4c2dd1e5b5ac869ab5470547a4
Author: KOVACS Krisztian <hidden@balabit.hu>
Date:   Fri Sep 16 17:00:04 2005 -0700

    [NETFILTER] CLUSTERIP: use a bitmap to store node responsibility data
    
    Instead of maintaining an array containing a list of nodes this instance
    is responsible for let's use a simple bitmap. This provides the
    following features:
    
      * clusterip_responsible() and the add_node()/delete_node() operations
        become very simple and don't need locking
      * the config structure is much smaller
    
    In spite of the completely different internal data representation the
    user-space interface remains almost unchanged; the only difference is
    that the proc file does not list nodes in the order they were added.
    (The target info structure remains the same.)
    
    Signed-off-by: KOVACS Krisztian <hidden@balabit.hu>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4451362445b2d83886003f1d739b94e4f000eeeb
Author: KOVACS Krisztian <hidden@balabit.hu>
Date:   Fri Sep 16 16:59:46 2005 -0700

    [NETFILTER] CLUSTERIP: introduce reference counting for entries
    
    The CLUSTERIP target creates a procfs entry for all different cluster
    IPs.  Although more than one rules can refer to a single cluster IP (and
    thus a single config structure), removal of the procfs entry is done
    unconditionally in destroy(). In more complicated situations involving
    deferred dereferencing of the config structure by procfs and creating a
    new rule with the same cluster IP it's also possible that no entry will
    be created for the new rule.
    
    This patch fixes the problem by counting the number of entries
    referencing a given config structure and moving the config list
    manipulation and procfs entry deletion parts to the
    clusterip_config_entry_put() function.
    
    Signed-off-by: KOVACS Krisztian <hidden@balabit.hu>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1cbf07478bbf3e350a2025bc5ea23fedaa95855a
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Sep 16 16:59:20 2005 -0700

    [TG3]: Add AMD K8 to list of write-reorder chipsets.
    
    Thanks to Andy Stewart for the report and testing
    debug patches from Michael Chan.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 67e6b629212fa9ffb7420e8a88a41806af637e28
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 16 16:58:40 2005 -0700

    [DCCP]: Introduce DCCP_SOCKOPT_SERVICE
    
    As discussed in the dccp@vger mailing list:
    
    Now applications have to use setsockopt(DCCP_SOCKOPT_SERVICE, service[s]),
    prior to calling listen() and connect().
    
    An array of unsigned ints can be passed meaning that the listening sock accepts
    connection requests for several services.
    
    With this we can ditch struct sockaddr_dccp and use only sockaddr_in (and
    sockaddr_in6 in the future).
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0c10c5d96865ce611d6a780888eff0ef4fab358b
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 16 16:58:33 2005 -0700

    [DCCP]: More precisely set reset_code when sending RESET packets
    
    Moving the setting of DCCP_SKB_CB(skb)->dccpd_reset_code to the places
    where events happen that trigger sending a RESET packet.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37f7f421cce13435fdc0d870caf51141e5ebf079
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Sep 16 16:51:01 2005 -0700

    [NET]: Do not leak MSG_CMSG_COMPAT into userspace.
    
    Noticed by Sridhar Samudrala.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d0fc3a2d6901bdedd8497acdb3358e2da9abefc
Merge: 06168d8... 20305e5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 16 11:54:13 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 06168d8a10ceccced51380d683245b33474d428a
Author: Karsten Keil <kkeil@suse.de>
Date:   Fri Sep 16 19:34:17 2005 +0200

    [PATCH] cleanup whitespace in pci_ids.h
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a063cf5b7dde94d98f3f7c9f1c951e02c6564022
Author: Karsten Keil <kkeil@suse.de>
Date:   Fri Sep 16 19:32:53 2005 +0200

    [PATCH] Add PCI IDs for Sitecom DC-105
    
    Sitecom DC-105 PCI work with hfc_pci HiSax driver
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20305e59724381365096b6ab0a48054723367c80
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Fri Sep 16 13:44:56 2005 +0900

    [IA64] mca_drv cleanup
    
    There were some trailing white spaces, long lines, brackets in
    weird style etc.  This patch cleans them up.
    
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 03e6b495ccbdd14282ce0dd0753481d4f4f0bab1
Merge: bc9a515... 1b3cb73...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 16 10:39:24 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit bc9a5154a24d16d41cc79dbf1442de34454bc7db
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Sep 15 22:53:28 2005 +0100

    [PATCH] epca iomem annotations + several missing readw()
    
    [originally sent to Alan, he had no problems with it]
    
     - iomem pointers marked as such
     - several direct dereferencings of such pointers replaced with read[bw]().
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ee9e23d41d2c51fafd158861fa4639fb199baf0
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Sep 16 14:49:14 2005 +1000

    [IA64] Add Documentation/ia64/mca.txt
    
    Add Documentation/ia64/mca.txt, an ad-hoc collection of notes on IA64
    MCA and INIT processing.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6da34a8dc03c9605b03154eacfd2234627cc485a
Merge: 53abbf7... 7fb6ec2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 16 10:31:31 2005 -0700

    Merge branch 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 24b8e0cc09483adc0fdd9c68914b19597bb9fddc
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Thu Sep 15 15:36:35 2005 +1000

    [IA64] Remove warnings for gcc 4.0 IA64 compilation.
    
    This patch removes some compilation warnings, mostly
    trivially. acpi.c fix also noted by Kenji Kaneshige.
    
    Signed-off-by; Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1832a5862f2e1b4e5835611ee14bc30a8ed3cad5
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Fri Sep 16 11:01:14 2005 +0200

    [SCSI] change port speed definitions for scsi_transport_fc
    
    obviously FC Port Speeds in scsi_transport_fc.h are defined according
    to FC-HBA:
    
    #define FC_PORTSPEED_1GBIT              1
    #define FC_PORTSPEED_2GBIT              2
    #define FC_PORTSPEED_10GBIT             4
    #define FC_PORTSPEED_4GBIT              8
    
    Problem is, whoever invented FC-HBA did not care about FC-FS or
    FC-GS-x. Following FC-FS/FC-GS-x defintions of port speeds would look
    like:
    
    1 GBit: 0x0001
    2 GBit: 0x0002
    4 GBit: 0x0004
    10GBit: 0x0008
    
    (and new in FC-LS:
    8 Gbit: 0x0010
    16GBit: 0x0020)
    
    I really appreciate if scsi_transport_fc.h would define port speeds
    according to FC-GS-x/FC-FS. Thus mapping of port speed capabilities to
    values defined in scsi_transport_fc.h can be avoided in the LLDD.
    
    Attached is a patch to change the definitions.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7fb6ec287a05d7a71ec086d8bc9a452d5e16ff1a
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Sep 16 06:01:48 2005 -0400

    [libata] fix PIO completion race
    
    Make sure we that completion is the final action we take; prior to this
    change, another CPU may have changed ap->pio_task_state before we tested
    it a final time.
    
    Spotted by, and original patch by Albert Lee @ IBM.
    
    Also includes a minor optimization:  eliminate a ton of unnecessary
    queue_work() calls, simply by jumping to the beginning of the FSM
    function ata_pio_task().

commit 53abbf7eeab22620586cbba272e569fd3e729b0b
Author: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
Date:   Fri Sep 16 08:55:33 2005 +0200

    [PATCH] net: fix spider_net media detection
    
    This patch makes the driver work with any BladeCenter
    network switch, it used to work only with certain
    models.
    
    Please apply.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8b51292764a0ed46d7eb6bead4625ba83ee2ec05
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 14 09:45:44 2005 -0700

    [PATCH] 8139cp: allocate statistics space only when needed
    
    Don't crash if ethtool statistics are requested and device is down.
    Fix is to allocate pci space for statistics only when needed.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ed4b9f8014db4f343e89b44b7c5ca355f439ce36
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Wed Sep 14 14:52:09 2005 -0700

    [PATCH] bonding: plug reference count leak
    
    	Bonding leaks route structures when the ARP monitor is
    configured to send probes over VLANs.
    
    	Originally reported by Ian Abel <ian.abel@mxtelecom.com>; his
    original fix was modified by Jay Vosburgh to correct coding style and to
    close a leak it missed.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c5f977a0d2d6a8f02f32139b5dd129e52073f38f
Merge: f3d242e... 065d9ca...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Sep 16 02:46:15 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 17b14451fd2b187ddd6303726755a3af0a926b6c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Sep 15 15:44:00 2005 +0100

    [PATCH] PATCH: remove function for non-PCI as requested
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7a83e90b32a2b2500e0be6a5317ab411b39222c9
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Sep 15 15:24:59 2005 +0100

    [PATCH] PATCH: silly in piix driver
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6cb1269b9607649b5edf1c4e7818e0cf34a9db71
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Sep 15 23:25:41 2005 -0500

    JFS: Fix sparse warnings, including endian error
    
    The fix in inode.c is a real bug.  It could result in undeleted, yet
    unconnected files on big-endian hardware.
    
    The others are trivial.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 541950027f8b7c96a639bc16e48930c590f1b98a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Sep 15 21:52:51 2005 -0400

    [SCSI] fix use after potential free in scsi_remove_device
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 065d9cac98a5406ecd5a1368f8fd38f55739dee9
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Thu Sep 15 21:34:33 2005 +0800

    [PATCH] vc: Use correct size on buffer copy in vc_resize
    
    In the unlikely case of the new screen width much wider then the old,
    use (old_row_size * new_rows) instead of new_screen_size to prevent a
    buffer overrun during the copy.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d36ba629e0ef47a03d3703ee1d38143c25532a8
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Thu Sep 15 21:14:56 2005 +0800

    [PATCH] vgacon: Fix sanity checking in vgacon_resize
    
    Reported by: walt <wa1ter@myrealbox.com>
    
    "I routinely switch the console font during bootup to
    8x8 so I can get 50 lines per screen.  Until 09 Sept,
    just changing to the small font automatically gave me
    all 50 lines -- but now I'm only getting 25 lines even
    with the small font.  The bottom half of the screen
    displays the text that already scrolled off the top."
    
    This bug is due to an erroneous check in the recently added hook,
    vgacon_resize(). It checks the new height against the original number of
    rows of the console. Because the original number of rows depends on both
    the scanline and the font height, check it instead against the
    scanline/fontheight.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b6a186d65589901a73d460070504a5e02703c45
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Thu Sep 15 20:58:57 2005 +0800

    [PATCH] savagefb: Fix load failure of the Twister chipset
    
    - The Twister chipsets are actually prosavages.  Reclassify them as
      such and remove the S3_SAVAGE_TWISTER id.
    - Fix i2c code if fb_firmware_edid() returns NULL
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be201f7f4cd26b1bb994062803e0d87877e749ce
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Thu Sep 15 08:42:19 2005 -0400

    [PATCH] ppc64: Fix recent regression
    
    As noted by Olof Johansson <olof@lixom.net>:
    
      "A recent patch changed the way the LPAR bit is checked during early
       boot.  This resulted in a polarity change in a conditional branch
       without changing the branch, causing at least some legacy machines to
       not boot."
    
    This fixes it.
    
    Signed-off-by: Jimi Xenidis <jimix@watson.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fb74dfb08b3d40e41ffdb6540078dcac433ac7a
Merge: 40796c5... 4db2ce0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 15 07:36:41 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 1b3cb73f7306f97a68fa973dec9f3c3b68bd29cf
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 15 15:17:59 2005 +0100

    [ARM] Tighten pfn_valid() test.
    
    Thomas Gleixner reported that mmaping and unmapping each physical
    page in turn eventually caused the kernel to oops.  It appears
    that pfn_valid() in the discontigmem case was too simplistic for
    proper operation.
    
    Tighten the logic so we also check if the PFN is within the range
    of the selected memory node.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b5683557331b129658ab435391df527ef72d63dc
Author: James Bottomley <jejb@titanic.(none)>
Date:   Thu Sep 15 08:59:36 2005 -0500

    [SCSI] atp870u: fix memory addressing bug
    
    From: Alan Cox <alan@redhat.com>
    
    The virt_to_bus() wasn't correctly taken out of this driver.  It needs
    to be able to track both physical and virtual addresses for its prd table.
    Update the driver to do this with separate tracking entries.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 13b9d47ed36e8019a99c798b84c341ef75868e02
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 15 14:53:22 2005 +0100

    [ARM] 2914/1: PXA Poodle: Add MMC and UDC support
    
    Patch from Richard Purdie
    
    This patch adds MMC and UDC support to the PXA Poodle platform.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f29d245549aa38325c37716dbecea8d817c00274
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 15 14:53:22 2005 +0100

    [ARM] 2913/1: PXA Poodle: Cleanup some unneeded code
    
    Patch from Richard Purdie
    
    This patch cleans up the PXA Poodle platform code removing an unneeded
    static iomap. It also corrects errors in the platform header file and
    adds a missing GPIO define.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdce05bbfe171882adf53ce32e04da24276cb8cd
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 15 14:53:21 2005 +0100

    [ARM] 2912/1: PXA Corgi: Cleanup some unneeded code
    
    Patch from Richard Purdie
    
    This patch cleans up the PXA Corgi platform code removing an unneeded
    static iomap, an unneeded function and some debug messages.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c071760224d8418f65606bd67e755c6a5463ec53
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 15 14:52:00 2005 +0100

    [ARM] 2915/1: SA1100 Collie: Correct scoop device calls
    
    Patch from Richard Purdie
    
    This patch adds a missing parameter to the scoop calls made by collie.c
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2b8c6944544319caa22ed8bcb3443153a1a3b4c
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Sep 15 13:02:32 2005 +0100

    [ARM] 2905/1: enable the ixp2000 i2c bus driver in ixp2000 defconfigs
    
    Patch from Lennert Buytenhek
    
    It's silly to have I2C enabled in all ixp2000 defconfigs but not to
    have the ixp2000 bus driver enabled in any of them.  This patch enables
    CONFIG_I2C_IXP2000 for all in-tree ixp2000 boards.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2e4e8bbb6e2da073c5654a39a58eb0895e3ba4c7
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Sep 15 13:02:31 2005 +0100

    [ARM] 2904/1: update ixp2000 defconfigs to 2.6.13
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44449bbf4b051ef7bbea648602f4e21658fe2354
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Sep 15 13:00:52 2005 +0100

    [ARM] 2909/1: remove IXP2000_PROD_ID
    
    Patch from Lennert Buytenhek
    
    The intel docs call it IXP2000_PRODUCT_ID, and we have a definition
    for IXP2000_PRODUCT_ID as well, so IXP2000_PROD_ID can go.  It's only
    used in one place.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 917afce1000d978dfd3f07da5da9d864bc49c77e
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Sep 15 13:00:25 2005 +0100

    [ARM] 2911/1: ixp2000_reg_{read,write} accessors
    
    Patch from Lennert Buytenhek
    
    This patch:
    - changes the ixp2000_reg_write accessor to take a 'volatile void *'
      instead of a 'volatile unsigned long *', which then allows passing in
      a u32 * as first argument without being greeted with a warning; and
    - adds an ixp2000_reg_read accessor.
    We can then use these accessors in ixp2000 code to access on-chip
    peripherals, instead of directly dereferencing pointers.  This is for
    use by the ixp2000 microengine driver which was recently announced on
    netdev.  We can't use readl/writel on the ixp2000 since it is usually
    run in big-endian mode, and on big-endian platforms, readl/writel
    perform byteswapping.
    A future patch will remove the readback from ixp2000_reg_write, since
    it's not needed to prevent erratum #66, and add manual readbacks to the
    places that need them (writes are not synchronous since we map in device
    space using XCB=101 nowadays), such as interrupt disabling and GPIO
    manipulation.  See also:
    	http://lists.arm.linux.org.uk/pipermail/linux-arm-kernel/2005-February/027084.html
    Patch has been ACKed by Jeff Garzik.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fea2efe3bba15f0aa8f840fbe052699808187cb6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 15 12:30:11 2005 +0100

    [ARM] Remove PFN_TO_NID for !DISCONTIGMEM
    
    Platform classes need not define PFN_TO_NID when DISCONTIGMEM is
    not selected.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4db2ce0199f04b6e99999f22e28ef9a0ae5f0d2f
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Sep 14 21:47:01 2005 -0700

    [LIB]: Consolidate _atomic_dec_and_lock()
    
    Several implementations were essentialy a common piece of C code using
    the cmpxchg() macro.  Put the implementation in one spot that everyone
    can share, and convert sparc64 over to using this.
    
    Alpha is the lone arch-specific implementation, which codes up a
    special fast path for the common case in order to avoid GP reloading
    which a pure C version would require.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4a805e863d6b9466baf7084e1d6fdbe6e0628d8e
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Sep 14 21:40:00 2005 -0700

    [COMPAT]: Fixup compat_do_execve()
    
    Missing acct_update_integrals() and update_mem_hiwater() calls
    compared to it's native counterpart.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 40796c5e8f2a93008e9034b3110a7e7b1fa0fba0
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Wed Sep 14 21:10:20 2005 -0700

    [IPV6]: Fix per-socket multicast filtering in sk_reuse case
    
    per-socket multicast filters were not being applied to all sockets
    in the case of an exact-match bound address, due to an over-exuberant
    "return" in the look-up code. Fix below. IPv4 does not have this problem.
    
    Thanks to Hoerdt Mickael for reporting the bug.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87375ab47cd0ba04124c6d3fd80db5c368f5dcb6
Author: Julian Anastasov <ja@ssi.bg>
Date:   Wed Sep 14 21:08:51 2005 -0700

    [IPVS]: ip_vs_ftp breaks connections using persistence
    
    ip_vs_ftp when loaded can create NAT connections with unknown client
    port for passive FTP. For such expectations we lookup with cport=0 on
    incoming packet but it matches the format of the persistence templates
    causing packets to other persistent virtual servers to be forwarded to
    real server without creating connection. Later the reply packets are
    treated as foreign and not SNAT-ed.
    
    This patch changes the connection lookup for packets from clients:
    
    * introduce IP_VS_CONN_F_TEMPLATE connection flag to mark the
      connection as template
    
    * create new connection lookup function just for templates -
      ip_vs_ct_in_get
    
    * make sure ip_vs_conn_in_get hits only connections with
      IP_VS_CONN_F_NO_CPORT flag set when s_port is 0. By this way
      we avoid returning template when looking for cport=0 (ftp)
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f5e229db9cdb27f83594712ca4bb98d9377eb6ed
Author: Julian Anastasov <ja@ssi.bg>
Date:   Wed Sep 14 21:04:23 2005 -0700

    [IPVS]: Really invalidate persistent templates
    
    Agostino di Salle noticed that persistent templates are not
    invalidated due to buggy optimization.
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c011bed5f49ce9e6193b18b226106a41ecfa95c
Author: Bart De Schuymer <bdschuym@pandora.be>
Date:   Wed Sep 14 20:55:16 2005 -0700

    [BRIDGE-NF]: Fix iptables redirect on bridge interface
    
    Here's a slightly altered patch, originally from Mark Glines who
    diagnosed and fixed the problem.
    
    Signed-off-by: Bart De Schuymer <bdschuym@pandora.be>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit de9daad90ecb54f3c37c3f8967d581e20d927539
Author: Denis Lukianov <denis@voxelsoft.com>
Date:   Wed Sep 14 20:53:42 2005 -0700

    [MCAST]: Fix MCAST_EXCLUDE line dupes
    
    This patch fixes line dupes at /ipv4/igmp.c and /ipv6/mcast.c in the
    2.6 kernel, where MCAST_EXCLUDE is mistakenly used instead of
    MCAST_INCLUDE.
    
    Signed-off-by: Denis Lukianov <denis@voxelsoft.com>
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20ae975dfd54de581287b2ca8a1ad97099ab0396
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Sep 14 20:52:37 2005 -0700

    [NETLINK]: Reserve a slot for NETLINK_GENERIC.
    
    As requested by Jamal.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3c05d92ed49f644d1f5a960fa48637d63b946016
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Sep 14 20:50:35 2005 -0700

    [TCP]: Compute in_sacked properly when we split up a TSO frame.
    
    The problem is that the SACK fragmenting code may incorrectly call
    tcp_fragment() with a length larger than the skb->len.  This happens
    when the skb on the transmit queue completely falls to the LHS of the
    SACK.
    
    And add a BUG() check to tcp_fragment() so we can spot this kind of
    error more quickly in the future.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1619cca2921f6927f4240e03f413d4165c7002fc
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:56:27 2005 -0700

    Partially revert "Fix time going twice as fast problem on ATI Xpress chipsets"
    
    Commit 66759a01adbfe8828dd063e32cf5ed3f46696181 introduced the fix for
    time ticking too fast on some boards by disabling one of the doubly
    connected timer pins on ATI boards.
    
    However, it ends up being _much_ too broad a brush, and that just makes
    some other ATI boards not work at all since they now have no timer
    source.
    
    So disable the automatic ATI southbridge detection, and just rely on
    people who see this problem disabling it by hand with the option
    "disable_timer_pin_1" on the kernel command line.
    
    Maybe somebody can figure out the proper tests at a later date.
    
    Acked-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38400e42713de5f5d0d676eb721bc7f7237f7f18
Merge: b75cdf3... deb75f3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:37:43 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit b75cdf388ecdcd5ab5e66178f19c39a4c94dea26
Merge: 881787a... f6af5da...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:27:39 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm-smp

commit 881787a7d379a4a4474e94fce87b511a7f641595
Merge: 77b2555... 2d93486...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:20:57 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 77b2555b52a894a2e39a42e43d993df875c46a6a
Merge: 4117b61... da16e32...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:20:04 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-i2c

commit 4117b61f7200cc83d509ed226e4d8239e4d6044b
Merge: ef4cbee... 2cef2d5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 15:19:49 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit f6af5da388a5d058cd9a5a47d030e3966b22e991
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Sep 14 23:10:48 2005 +0100

    [ARM SMP] Add timer/watchdog defines for MPCore
    
    Actually add the file this time.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit da16e3245a4827d969943ca0493a4a6e34009342
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Sep 14 22:54:45 2005 +0100

    [I2C] Add a functionality method, and remove algorithm ids
    
    This allows i2c-pxa to finally build.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2cef2d552f75b7feb7859d29a71388c020023872
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Sep 14 22:42:31 2005 +0100

    [ARM] 2910/1: missing Lubbock audio device declaration
    
    Patch from Nicolas Pitre
    
    This apparently fell in the crack somewhere.  Add it back.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2d93486c6c110cf81db720359b4ec20de9c91450
Author: Vincent Sanders <vince@kyllikki.org>
Date:   Wed Sep 14 22:36:03 2005 +0100

    [ARM] 2907/1: GCC 4 serial driver compile fixes
    
    Patch from Vincent Sanders
    
    When building the ARM platforms several serial drivers fail to compile
    with GCC 4.01 due to extern/static ambiguity.
    
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ef4cbee0b0d0f791bb593f99b702410f3c0efce6
Author: Anton Blanchard <anton@samba.org>
Date:   Wed Sep 14 14:19:18 2005 -0700

    [PATCH] hvc_console: start kernel thread before registering tty
    
    Its possible that we can write to the hvc_console tty as soon it is
    registered.  Recently this started happening due to (what looks like) a
    change to the hotplug code.
    
    Unfortunately at this stage we have not started the khvcd kernel thread and
    oops.  The solution is to start the kernel thread before registering the
    tty.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b7fc4214b550fafe595330e28d7c2c72b8b62f6
Author: Roland Dreier <rolandd@cisco.com>
Date:   Wed Sep 14 14:19:17 2005 -0700

    [PATCH] add PCI IDs so RME32 and RME96 drivers build
    
    While doing an allyesconfig build, I noticed that the commit
    
        commit 8cdfd2519c6c9a1e6057dc5970b2542b35895738
        Author: Takashi Iwai <tiwai@suse.de>
        Date:   Wed Sep 7 14:08:11 2005 +0200
    
            [ALSA] Remove superfluous PCI ID definitions
    
    broke the RME32 and RME96 drivers, since the PCI IDs they use seem to have
    changed names.  Here's a patch to fix this -- compile tested only, since I
    have no idea what the hardware even is.
    
    Fix the build of the RME32 and RME96 drivers by having them use the
    PCI_DEVICE_ID_RME_xxx names defined in <linux/pci_ids.h> instead of the
    PCI_DEVICE_ID_xxx names that they used to define themselves.
    
    Also fix the typo in the id PCI_DEVICE_IDRME__DIGI96_8_PAD_OR_PST so the
    name is PCI_DEVICE_ID_RME_DIGI96_8_PAD_OR_PST.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Acked-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ed8e048c9e11e69ec951f94066105e80cdc59fd
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Wed Sep 14 14:19:15 2005 -0700

    [PATCH] nv_i2c oops fix
    
    The call to fb_firmware_edid may return NULL but this is not checked before
    trying to memcpy using this pointer.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fd9808aec0198b25ff9f8bb19508d9492f86920
Author: Pantelis Antoniou <pantelis.antoniou@gmail.com>
Date:   Wed Sep 14 14:19:14 2005 -0700

    [PATCH] ppc32 8xx: flush_tlb_range() declaration uses wrong pointer type
    
    On 8xx flush_tlb_range() declaration is using a "struct mm_struct *"
    pointer type while the function itself uses "struct vm_area_struct *".
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84d370b906b0eb00277a841216987285cf4114d4
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Sep 14 14:19:13 2005 -0700

    [PATCH] i4l: Sedlbauer speed star II V 3.1 exist with various subversions
    
    the 4th id field should be not used
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit deb75f3c29a13ac37a50d82a256c8dc17de58c3d
Merge: 5a23f34... 82f1b07...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Sep 14 14:14:45 2005 -0700

    Pull fix-offsets-h into release branch

commit 59897dad98d63ac15e1e36fcc3a107c892b1826c
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Sep 14 12:57:42 2005 -0400

    [SCSI] fix sym scsi boot hang
    
    On Wed, 2005-09-14 at 18:06 +1000, Anton Blanchard wrote:
    > And in particular it looks like the scsi_unprep_request in
    > scsi_queue_insert is causing it. The following patch fixes the boot
    > problems on the vscsi machine:
    
    OK, my fault.  Your fix is almost correct .. I was going to do this
    eventually, honest, because there's no need to unprep and reprep a
    command that comes in through scsi_queue_insert().
    
    However, I decided to leave it in to exercise the scsi_unprep_request()
    path just to make sure it was working.  What's happening, I think, is
    that we also use this path for retries.  Since we kill and reget the
    command each time, the retries decrement is never seen, so we're
    retrying forever.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d39a942c3f4061d2218dcadf79ce10010dbcdb3c
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Sep 13 21:43:56 2005 -0700

    [SCSI] scsi: 2 drivers need MODULE_LICENSE()
    
    Modules need a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 186d330e682210100c671355580a8592e4a21692
Author: Timothy Thelin <Timothy.Thelin@wdc.com>
Date:   Tue Sep 13 19:56:28 2005 -0700

    [SCSI] scsi: sd, sr, st, and scsi_lib all fail to copy cmd_len to new cmd
    
    This fixes an issue in scsi command initialization from a request
    where sd, sr, st, and scsi_lib all fail to copy the request's
    cmd_len to the scsi command's cmd_len field.
    
    Signed-off-by: Timothy Thelin <timothy.thelin@wdc.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5a23f34798f15838fe1b7f0fd7e5be388e08c2b2
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 13:05:17 2005 -0700

    Fix yenta error message when unable to find a bus assignment
    
    And mention 'pci=assign-busses' as a possible fix.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b175a7e68c2f51555820efb0a01681e3419c1bc
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Thu Sep 15 00:48:42 2005 +0530

    [PATCH] Fix the fdtable freeing in the case of vmalloced fdset/arrays
    
    Noted by David Miller:
    
      "The bug is that free_fd_array() takes a "num" argument, but when
       calling it from __free_fdtable() we're instead passing in the size in
       bytes (ie.  "num * sizeof(struct file *)")."
    
    Yes it is a bug. I think I messed it up while merging newer
    changes with an older version where I was using size in bytes
    to optimize.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7e43c78ae4d8630c418ce3495787b995e61a580
Author: Alok N Kataria <alokk@calsoftinc.com>
Date:   Wed Sep 14 12:17:53 2005 -0700

    [PATCH] Fix slab BUG_ON() triggered by change in array cache size
    
    With the new changes that we made in the initialization of the slab
    allocator, we first setup the cache from which array caches are allocated,
    and then the cache, from which kmem_list3's are allocated.
    
    Now if the array cache comes from a cache in which objsize > 32, (in this
    instance size-64) then, first size-64 cache will be allocated and then the
    size-128 (if this is the cache from which kmem_list3's are going to be
    allocated).
    
    So with these new changes, we are not guaranteed that we will be
    initializing the malloc_sizes array in a serialized order. Thus there is
    a bug in __find_general_cachep, as we are checking whether the first
    cache_sizes ptr is NULL.
    
    This is replaced by checking whether the array-cache cache is initialized.
    Attached is a patch which does that.  Boots fine on a x86-64, with
    DEBUG_SPIN, DEBUG_SLAB, and preempt.
    
    Attached is a patch which does that.  Boots fine on a x86-64, with
    DEBUG_SPIN, DEBUG_SLAB, and preempt.Thanks & Regards, Alok
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Shobhit Dayal <shobhit@calsoftinc.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Cc: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7fb0b35ada6e0e691e70af5591a2006fbec85b5
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Wed Sep 14 23:05:30 2005 +0400

    [PATCH] yenta oops fix
    
    In some cases, especially on modern laptops with a lot of PCI and
    cardbus bridges, we're unable to assign correct secondary/subordinate
    bus numbers to all cardbus bridges due to BIOS limitations unless
    we are using "pci=assign-busses" boot option.
    So some cardbus controllers may not have attached subordinate pci_bus
    structure, and yenta driver must cope with it - just ignore such cardbus
    bridges.
    
    For example, see https://bugzilla.novell.com/show_bug.cgi?id=113778
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fd4ef85e0db9ed75c98e13953257a967ea55e03
Author: Hugh Dickins <hugh@veritas.com>
Date:   Wed Sep 14 06:13:02 2005 +0100

    [PATCH] error path in setup_arg_pages() misses vm_unacct_memory()
    
    Pavel Emelianov and Kirill Korotaev observe that fs and arch users of
    security_vm_enough_memory tend to forget to vm_unacct_memory when a
    failure occurs further down (typically in setup_arg_pages variants).
    
    These are all users of insert_vm_struct, and that reservation will only
    be unaccounted on exit if the vma is marked VM_ACCOUNT: which in some
    cases it is (hidden inside VM_STACK_FLAGS) and in some cases it isn't.
    
    So x86_64 32-bit and ppc64 vDSO ELFs have been leaking memory into
    Committed_AS each time they're run.  But don't add VM_ACCOUNT to them,
    it's inappropriate to reserve against the very unlikely case that gdb
    be used to COW a vDSO page - we ought to do something about that in
    do_wp_page, but there are yet other inconsistencies to be resolved.
    
    The safe and economical way to fix this is to let insert_vm_struct do
    the security_vm_enough_memory check when it finds VM_ACCOUNT is set.
    
    And the MIPS irix_brk has been calling security_vm_enough_memory before
    calling do_brk which repeats it, doubly accounting and so also leaking.
    Remove that, and all the fs and arch calls to security_vm_enough_memory:
    give it a less misleading name later on.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb085cf1d4294824571815d487daccc0609543f0
Author: Alexander Nyberg <alexn@telia.com>
Date:   Wed Sep 14 18:54:06 2005 +0200

    [PATCH] Fix fs/exec.c:788 (de_thread()) BUG_ON
    
    It turns out that the BUG_ON() in fs/exec.c: de_thread() is unreliable
    and can trigger due to the test itself being racy.
    
    de_thread() does
     	while (atomic_read(&sig->count) > count) {
    	}
    	.....
    	.....
    	BUG_ON(!thread_group_empty(current));
    
    but release_task does
    	write_lock_irq(&tasklist_lock)
    	__exit_signal
    		(this is where atomic_dec(&sig->count) is run)
    	__exit_sighand
    	__unhash_process
    		takes write lock on tasklist_lock
    		remove itself out of PIDTYPE_TGID list
    	write_unlock_irq(&tasklist_lock)
    
    so there's a clear (although small) window between the
    atomic_dec(&sig->count) and the actual PIDTYPE_TGID unhashing of the
    thread.
    
    And actually there is no need for all threads to have exited at this
    point, so we simply kill the BUG_ON.
    
    Big thanks to Marc Lehmann who provided the test-case.
    
    Fixes Bug 5170 (http://bugme.osdl.org/show_bug.cgi?id=5170)
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Roland McGrath <roland@redhat.com>
    Cc: Andrew Morton <akpm@osdl.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32a3658533c6f4c6bf370dd730213e802464ef9b
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed Sep 14 09:52:42 2005 -0400

    [PATCH] pci: only call pci_restore_bars at boot
    
    Certain (SGI?) ia64 boxes object to having their PCI BARs
    restored unless absolutely necessary. This patch restricts calling
    pci_restore_bars from pci_set_power_state unless the current state
    is PCI_UNKNOWN, the actual (i.e. physical) state of the device is
    PCI_D3hot, and the device indicates that it will lose its configuration
    when transitioning to PCI_D0.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 186051d70444742bf1c2bc0257dd4696a3df66e3
Merge: 668e4bc... e172577...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 14 09:35:34 2005 -0700

    Merge branch 'upstream-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit f3d242e8f2bf12cb45eb35b7d2e69483d1209b13
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Wed Sep 14 18:05:31 2005 +0200

    [PATCH] s390: qeth driver fixes
    
    [patch 4/4] s390: qeth driver fixes .
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    	- Clear read channel first prior to using ccw_device_set_offline.
    	- use QETH_DBF_TEXT instead of QETH_DBF_SPRINTF
    	- invoke qeth_halt_channel and qeth_clear_channel for all channels,
    	  even if halt/clear for one of the channel fails.
    	- enable qeth_arp_query function for GuestLAN devices
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    
    diffstat:
     qeth.h      |    2 -
     qeth_main.c |  106 +++++++++++++++++++++++++-----------------------------------
     qeth_sys.c  |   11 +++---
     3 files changed, 53 insertions(+), 66 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9cb90de84b1d9c4686f12042a3696df38e0114c3
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Wed Sep 14 18:03:26 2005 +0200

    [PATCH] s390: TSO related fixes in qeth driver
    
    Jeff,
    I'm sorry seems that they have not been sent out either ...
    ok here they come ...
    
    [patch 3/4] s390: TSO related fixes in qeth driver
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    	TSO related fixes :
    	  - changing value of large_send attribute while network traffic
    	    is running caused program check and thus device recovery.
    	  - Due to hardware restriction discard packet when it exceeds 60K
    	    otherwise qeth will cause program checks and thus traffic stall
    	    when trying to send such huge packets.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    
    diffstat:
     qeth.h      |    4 ++--
     qeth_main.c |   33 +++++++++++++++++++++------------
     qeth_sys.c  |   10 +++-------
     3 files changed, 26 insertions(+), 21 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e172577da02cde3916e75406b314e6f01c228a5c
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu Sep 8 09:50:06 2005 +0200

    [PATCH] s390: ctc driver fixes
    
    Jeff,
    sorry if I have flooded your inbox, I had some problems with the
    mail server here yesterday, but it seems to be fixed ...
    Ok patch 3-4 have no dependencies on patch 2 since only qeth driver is
    affected.Thus I have made a new patch 2 for ctc driver.
    Thank you .
    
    [patch 2/4] s390: ctc driver fixes
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
    	- race condition fixed
    	- minor cleanup
    
    Signed-off-by: Peter Tiedemann <ptiedem@de.ibm.com>
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    
    diffstat:
     ctcmain.c |   41 ++++++++++++++++++++++-------------------
     1 files changed, 22 insertions(+), 19 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 46a60f2d718d56bba8695d6f1145eb40548d86f8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Sep 9 12:54:56 2005 -0700

    [PATCH] skge: gmac register access errors in dual port
    
    Merge of four previous patches and the Kconfig fix
     * Remove debug printk's
     * whitespace cleanup and version number change
     * clear interrupts, reset phy, and reset hardware on shutdown
     * ignore 64bit counter overflow interrupts
     * fix a couple of places where second port could clobber state
       of first port.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c535a9dd26d1a4c6dcbd486cbe181a9e71237af1
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 10:49:00 2005 -0400

    [PATCH] ixgb: correct rx_dropped counting
    
    Do not count frames dropped by the hardware as part of rx_dropped.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ecf7130b087a9bd1b9d03dbf452630243210d22e
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 10:48:59 2005 -0400

    [PATCH] e100: correct rx_dropped and add rx_missed_errors
    
    Do not count non-error frames dropped by the hardware as
    part of rx_dropped. Instead, count those frames dropped as
    rx_missed_errors. Also, do not count other error frames as part of
    rx_dropped. Finally, do not count oversized frames in rx_dropped
    (since they are counted as part of rx_length_errors).
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bd061bf1ff37e186012c6e2522328b58e5d35ed8
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 10:48:59 2005 -0400

    [PATCH] e1000: correct rx_dropped counting
    
    Do not count frames dropped by the hardware as part of rx_dropped.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1141455d5e29e47004ad61e0fc385cb612d4e51c
Author: matthieu castet <castet.matthieu@free.fr>
Date:   Mon Sep 12 23:31:39 2005 +0200

    [PATCH] airo : fix channel number in scan
    
    this patch display the correct channel number with iwlist scan
    
    Signed-off-by: Matthieu CASTET <castet.matthieu@free.fr>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 668e4bc7229c1866f65f3bef6ab011f8c9034089
Author: Uwe Koziolek <uwe.koziolek@gmx.net>
Date:   Sun Sep 11 17:03:35 2005 +0200

    [PATCH] sata_sis: uninitialized variable
    
    There is an uninitialized variable issue in sata_sis.c
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 39eb936c7ec8ef1dccb88d3bcfc1c5fa2410c472
Author: Arnaud Patard <apatard@mandriva.com>
Date:   Tue Sep 13 00:36:45 2005 +0200

    [PATCH] sata_sis: Fix typo in sata port2 initialisation
    
    This patch fixes a nasty typo I introduced in my previous patch (commit
    f2c853bca542f5ac0b036377637192a74f2091c2). The right offset of the
    second port in pure sata mode is 64 and not 0x64.
    Thanks to Martin Schuster for pointing this to me
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
     ---
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3be034b68acab61d6878431593203fc1b10d10ab
Author: Keith Owens <kaos@sgi.com>
Date:   Tue Sep 13 15:05:13 2005 +1000

    [PATCH] Correct xircom_cb use of CONFIG_NET_POLL_CONTROLLER
    
    xircom_cb.c does #if CONFIG_NET_POLL_CONTROLLER instead of #ifdef,
    resulting in drivers/net/tulip/xircom_cb.c:120:5: warning:
    "CONFIG_NET_POLL_CONTROLLER" is not defined.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6b4d617d154a1cf51015f7d3db158835d2235768
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Sep 12 23:21:55 2005 -0700

    [PATCH] s2io warning fixes
    
    drivers/net/s2io.c: In function `init_shared_mem':
    drivers/net/s2io.c:431: warning: cast from pointer to integer of different size
    drivers/net/s2io.c: In function `free_shared_mem':
    drivers/net/s2io.c:662: warning: cast from pointer to integer of different size
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9734c3fc89e5e2b5c132ed47fe096711eff2c092
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Sep 13 10:02:44 2005 -0700

    [PATCH] sk98lin: remove PCI id info for cards for conflicting devices
    
    Fix PCI device id issues with sk98lin driver.
    1. DLINK 530-T card has no Vital Product Data (VPD) area so the sk98lin
       driver won't work. (skge does however)
    2. Remove commented out Yukon2 stuff
    3. Restrict Linksys card to revisions that don't conflict with r8169 version.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ad4162f3712ddf25e148cff1e7dc37eafdff3e51
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Sep 14 09:56:38 2005 +0100

    [ARM SMP] Add timer/watchdog defines for MPCore
    
    The timer/watchdog register definitions were missing from
    the mpcore watchdog patch.  Add them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d8ac10639b6a1ed900efbee38c18baaca31e64dc
Merge: b24fd48... 033d974...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 17:07:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 033d974405276c22609c45d50167dd11df20aa82
Merge: ae01d27... 2b80230...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 13 16:32:40 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit b24fd48a0b9afe9a16bec94ab10d7e83c1b57ce6
Merge: 0a305d2... 34f521f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 15:19:14 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 0a305d2e1bd872fed6a073b27e38d457af2a69b0
Author: Cal Peake <cp@absolutedigital.net>
Date:   Tue Sep 13 02:28:07 2005 -0400

    [PATCH] Even more fallout from ATI Xpress timer workaround
    
    disable_timer_pin_1 needs IO-APIC, not just local APIC.
    
    Signed-off-by: Cal Peake <cp@absolutedigital.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b80230a7f8cd346c1e2ebafdd02be432bf10459
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Sep 13 19:05:08 2005 -0300

    [DCCP]: Handle SYNC packets in dccp_rcv_state_process
    
    Eliciting a SYNCACK in response, we were handling SYNC packets
    only in the DCCP_OPEN state, in dccp_rcv_established.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 811265b8e8bf84e3b91507bf6a3a8eea20e7a4b7
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Sep 13 19:03:15 2005 -0300

    [DCCP]: Check if already in the CLOSING state in dccp_rcv_closereq
    
    It is possible to receive more than one CLOSEREQ packet if the
    CLOSE packet sent in response is somehow lost, change the state
    to DCCP_CLOSING only on the first CLOSEREQ packet received.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 34f521fd5552fff2a5f892f4c3dbc75e309ad63b
Author: George G. Davis <davis_g@mvista.com>
Date:   Tue Sep 13 22:55:00 2005 +0100

    [ARM] 2896/1: Add sys_ipc_wrapper to pass 'fifth' argument on stack
    
    Patch from George G. Davis
    
    As pointed out be Matthew Klahn <MKLAHN@motorola.com>, some sys_ipc()
    call options require six args, e.g. SEMTIMEDOP. This patch adds an ARM sys_ipc_wrapper to save the sys_ipc() 'fifth' arg on the stack.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
     arch/arm/kernel/calls.S        |    2 +-
     arch/arm/kernel/entry-common.S |    5 +++++
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae01d2798d1825307044d75de11eb5c9ffb79c5a
Merge: adcb5ad... 0915e88...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 13 14:03:09 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/holtmann/bluetooth-2.6

commit adcb5ad1e5ba3996d53a047c5486efa6e734b413
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 13 13:49:15 2005 -0700

    [NETFILTER]: Fix DHCP + MASQUERADE problem
    
    In 2.6.13-rcX the MASQUERADE target was changed not to exclude local
    packets for better source address consistency. This breaks DHCP clients
    using UDP sockets when the DHCP requests are caught by a MASQUERADE rule
    because the MASQUERADE target drops packets when no address is configured
    on the outgoing interface. This patch makes it ignore packets with a
    source address of 0.
    
    Thanks to Rusty for this suggestion.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cd0bf2d796ebb51c346b1ed4208cdbfd86e98a61
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 13 13:48:58 2005 -0700

    [NETFILTER]: Fix rcu race in ipt_REDIRECT
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e7fa1bd93f977c03050bd6b3d13846aa43310fef
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 13 13:48:34 2005 -0700

    [NETFILTER]: Simplify netbios helper
    
    Don't parse the packet, the data is already available in the conntrack
    structure.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5cb30640ce01d76d256533bb2824c9cc14eb4070
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 13 13:48:00 2005 -0700

    [NETFILTER]: Use correct type for "ports" module parameter
    
    With large port numbers the helper_names buffer can overflow.
    Noticed by Samir Bellabes <sbellabes@mandriva.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a89f29f6ea8dba0b7c4ae5d1d0b43de6cb500ea6
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Aug 30 11:48:07 2005 -0500

    [SCSI] aic7xxx: move to dma_get_required_mask() and correct 39 bit assumptions
    
    This patch moves aic7xxx over to the dma_get_required_mask() API and
    dumps its open coded memory check.
    
    It also appears from this bug:
    
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=167049
    
    That 39 bit addressing doesn't work on older cards.  I surmise that the
    AHC_LARGE_SCBS flag is the one that marks cards capable of using 39 bit
    addressing, so I also folded that check into the code.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f3591fff043f5df937120962668c8adfcd3f5b29
Author: Andi Kleen <ak@suse.de>
Date:   Tue Sep 13 11:35:28 2005 +0200

    [PATCH] x86_64: Export end_pfn
    
    Fixes
    
    > if [ -r System.map -a -x /sbin/depmod ]; then /sbin/depmod -ae -F
    > System.map  2. 6.14-rc1; fi
    > WARNING: /lib/modules/2.6.14-rc1/kernel/drivers/char/agp/amd64-agp.ko
    > needs unknown symbol end_pfn
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da04c035039b5288039a5bf2d340866114ae994b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Sep 13 11:17:59 2005 +0200

    [PATCH] Fix spinlock owner debugging
    
    fix up the runqueue lock owner only if we truly did a context-switch
    with the runqueue lock held. Impacts ia64, mips, sparc64 and arm.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33333373c40633cec8791a284e84e4b116522c8f
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Tue Sep 13 04:55:41 2005 -0400

    [PATCH] i386: Ignore masked FPU exceptions
    
    Masked FPU exceptions should obviously not happen in the first place,
    but if they do, ignoring them seems to be the right thing to do.
    
    Although there is no documentation available for Cyrix MII, I did find
    erratum F-7 for Winchip C6, "FPU instruction may result in spurious
    exception under certain conditions" which seems to indicate that this
    can happen.
    
    That would also explain the behaviour Ondrej Zary reported on the MII.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddbf9ef385bfbef897210733abfb73cb9b94ecec
Merge: 5d54e69... 2c40579...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 09:48:54 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/chrisw/lsm-2.6

commit 5d54e69c68c05b162a56f9914cae72afd7e6f40a
Merge: 63f3d1d... b6ddc51...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 09:47:30 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dwmw2/audit-2.6

commit 63f3d1df1ad276a30b75339dd682a6e1f9d0c181
Merge: a8cd2e5... 676e1a2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 09:46:22 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa-current

commit a8cd2e5045688157479a654786b2c08ab85f4d8f
Merge: 0160f53... c315b7e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 09:45:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog

commit 82f1b07b9ad88066c0fa867dd6b32ce43ae7ad22
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Sep 13 08:50:39 2005 -0700

    [IA64] fix circular dependency on generation of asm-offsets.h
    
    Fix?  One ugly hack is replaced by a different ugly hack.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0160f53e427e9f1f6d19b898867c105406037b6f
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Sep 13 20:56:20 2005 +1000

    [PATCH] ppc64: Make eeh_init function again
    
    My patch "Separate pci bits out of struct device_node" (commit
    1635317facea3094ddf34082cd86797efb1d9f7e) had the unfortunate
    side-effect that it stopped eeh_init() from working correctly.
    
    It needs the pointers set up by find_and_init_phbs(), but it was being
    called just before find_and_init_phbs().  That meant that we didn't
    enable EEH (pSeries PCI error recovery) on any devices, and that meant
    that on POWER5 systems, the hypervisor wouldn't let us enable memory or
    I/O space access to any devices, and their drivers got somewhat
    confused.
    
    This fixes it by moving the eeh_init call after find_and_init_phbs.
    Tested on a POWER5 partition.
    
    Signed-of-by: Paul Mackerras <paulus@samba.org>
    Signed-of-by: Linus Torvalds <torvalds@osdl.org>

commit 42ac8ff2ce58138ba1339296406bde6636792bd8
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 13 01:25:51 2005 -0700

    [PATCH] x86_64: NMI watchdog frequency calculation adjustments
    
    Like previously done for i386, get the x86_64 watchdog tick calculation
    into a state where it can also be used on CPUs with frequencies beyond
    4GHz.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33bf56106d9be272696b73d9179da4e56b277472
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Sep 13 01:25:50 2005 -0700

    [PATCH] feature removal of io_remap_page_range()
    
    As written in Documentation/feature-removal-schedule.txt, remove the
    io_remap_page_range() kernel API.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82006d084109bb4118f1de0dc5855abe5ccae430
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Tue Sep 13 01:25:49 2005 -0700

    [PATCH] drivers/video: Replace custom macro with isdigit()
    
    Replace the custom CHAR_IS_NUM() macro with isdigit() from <linux/ctype.h>
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Acked-by: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f673d83ca3b7a6aeaacfd45d6ce466c33df8039
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Tue Sep 13 01:25:48 2005 -0700

    [PATCH] arch/i386: Replace custom macro with isdigit()
    
    Replace the custom is_digit() macro with isdigit() from <linux/ctype.h>
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64ccd0cfa1e29c2d20b7085ab9611114d327b571
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Tue Sep 13 01:25:47 2005 -0700

    [PATCH] More documentation, minor cleanup in kdump.txt
    
    Added clarification on the root device format to be used for second kernel,
    as well as specifying initrd if drivers are built as modules.
    
    Signed-off-by: Kishore Sampathkumar <kishore.sampathkumar@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4f9eb0ea14c8c478f0e8137b84a366499335aab
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Sep 13 01:25:46 2005 -0700

    [PATCH] Tell people not to use pm_register()
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cc5753f86589c5fb7e2f4a1fe778db3881f8f72
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Sep 13 01:25:46 2005 -0700

    [PATCH] Doc: update oops-tracing.txt (Tainted flags)
    
    Update Documentation/oops-tracing.txt:
    
    - add descriptions of 3 more "Tainted" flags;
    - fix some typos;
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 438e5c5e2dae30359b53514a02f5827fb6e552c7
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 13 01:25:45 2005 -0700

    [PATCH] matroxfb adjustments
    
    Some adjustments to the matroxfb code, for one part preventing the display
    to be disabled for longer than necessary, and for the other part to make
    information about the frame buffer position available so that a kernel
    debugger might obtain that before the initial mode change.
    
    Finally, some return code corrections to fit the generic fb code.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f4516dbd048f25eba78e115e8e73e1e8f04e7f9
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 13 01:25:44 2005 -0700

    [PATCH] fbcon: constify font data
    
    const-ify the font control structures and data, to make somewhat better
    guarantees that these are not modified anywhere in the kernel.
    Specifically for a kernel debugger to share this information from the
    normal kernel code, such a guarantee seems rather desirable.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e703ecc3bfbe10f478500798c0c5826d00ad9fe3
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 13 01:25:43 2005 -0700

    [PATCH] minor fbcon_scroll adjustment
    
    An adjustment to the SM_DOWN case of fbcon_scroll to match the behavior of
    SM_UP.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93352f5cf15279c6c46acb5a875e92c0ee513e7c
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Sep 13 01:25:42 2005 -0700

    [PATCH] v4l: fixup on cx88_dvb for Dvico HDTV5 Gold
    
    - Bug fix for DViCO FusionHDTV5 Gold to avoid noise after frontend init.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9db455064dfa1c2250e5eda7386c80bc77764e30
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Sep 13 01:25:40 2005 -0700

    [PATCH] v4l: experimental Sliced VBI API support
    
    Adds all defines, ioctls and structs needed for the sliced VBI API
    
    VBI = Vertical Blank Interval.
    
    It is related with the way TV signals work.  It sends a line, then, it has a
    retrace time to allow the tube to move electrons to the beginning of the next
    line.  This was the main reason at the beginning of analog B&W TV.
    
    There is a lot of bandwidth lost on VBI.  So, lots of TV systems use it to
    send other information such as Closed Captions and Teletext.  Also,
    broadcasters uses this as a channel to exchange information from the content
    producer to their subsidiaries at each city.
    
    There's already a raw VBI interface on V4L2 api, used for Closed Captions and
    Teletext.  The decoding is doing at userlevel space and it is mostly for
    analog TV signals, non encoded.
    
    Encoded signals (MPEG, for example), may need also to transmit other
    information (like, for example, display aspect, i.e.  4x3, widescreen...).
    Sliced VBI interface is a method to allow the video stream to transmit this
    kind of information.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 939bb7ef901b2537aa5b4cd819f9c1b25c6a5710
Author: Neil Brown <neilb@suse.de>
Date:   Tue Sep 13 01:25:39 2005 -0700

    [PATCH] Code cleanups in calbacks in svcsock
    
    Change a printk(KERN_WARNING to dprintk, and it is really only interesting
    when trying to debug a problem, and can occur normally without error.
    
    Remove various gratuitous gotos in surrounding code, and remove some
    type-cast assignments from inside 'if' conditionals, as that is just
    obscuring what it going on.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73aea4ecd38ebeff9e322f738057f4ae2c32a3ee
Author: Neil Brown <neilb@suse.de>
Date:   Tue Sep 13 01:25:39 2005 -0700

    [PATCH] nfsd4: fix setclientid unlock of unlocked state lock
    
    We could try to unlock the state lock here without having first locked it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b59e3c0e172e3f3a147021aa16b929482b8d5846
Author: Neil Brown <neilb@suse.de>
Date:   Tue Sep 13 01:25:38 2005 -0700

    [PATCH] nfsd4: fix open seqid incrementing in lock
    
    In the case of a lock which introduces a new lockowner, the openowner's
    sequence id should be incremented, even when the operation fails, if the
    error is a sequence-id-mutating error.  The current code fails to do that
    in some cases.  Fix this by using the same sequence-id-incrementing
    mechanism that all other such operations use.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2327d9adb1e948a7041128e971effd8d6e2d42c
Author: Neil Brown <neilb@suse.de>
Date:   Tue Sep 13 01:25:37 2005 -0700

    [PATCH] nfsd4: move replay_owner
    
    It seems more natural to move the setting of the replay_owner into the
    relevant procedure instead of doing it in nfsv4_proc_compound.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 849823c52d9c96cf777038670bb0ee3a291ca69d
Author: Neil Brown <neilb@suse.de>
Date:   Tue Sep 13 01:25:36 2005 -0700

    [PATCH] nfsd4: printk reduction
    
    Demote some printk's that look like they could be triggered by non-buggy
    clients to dprintk's.  (For example, stale clientid's are normal
    occurrences on reboot, and on a server with a lot of clients these messages
    could become annoying.)
    
    Also remove some redundant dprintk's (e.g. no need for both STALE_CLIENTID
    and its callers to do dprintks).
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fff71312e7227c6850f367ff9c72f96d5b33b1d0
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:35 2005 -0700

    [PATCH] SharpSL: Add an input keyboard driver for Zaurus cxx00 series
    
    Add a input driver for the keyboard found on the Zaurus Cxx00 series (Spitz,
    Akita, Borzoi).  Its based on corgikbd but there are enough subtle differences
    to justify a separate driver.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dd28f1dd83a0e49b75d5171477bc56158681411
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:34 2005 -0700

    [PATCH] SharpSL: Add new ARM PXA machines Spitz and Borzoi with partial Akita Support
    
    Add the platform support code for two new Sharp Zaurus Models, Spitz
    (SL-C3000) and Borzoi (SL-C3100).
    
    This patch also adds most of the foundations for Akita (SL-C1000) Support.
    The missing link for Akita is the driver for its I2C io expander.  Once this
    has been finished, the missing Kconfig option and machine declaration can
    easily be added to this code.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1351e6e093271d0f5056f3ac272864cf4383041a
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:33 2005 -0700

    [PATCH] SharpSL: Abstract model specifics from Corgi Backlight driver
    
    Separate out the Sharp Zaurus c7x0 series specific code from the Corgi
    backlight driver.  Abstract model/machine specific functions to corgi_lcd.c
    via sharpsl.h
    
    This enables the driver to be used by the Zaurus cxx00 series.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 513b6e1afaf81b42cacbb24ef1aa7eea5e9661c2
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:33 2005 -0700

    [PATCH] SharpSL: Abstract c7x0 specifics from Corgi Touchscreen driver
    
    Separate out the Sharp Zaurus c7x0 series specific code from the Corgi
    Touchscreen driver.  Use the new functions in corgi_lcd.c via sharpsl.h for
    hsync handling and pass the IRQ as a platform device resource.  Move a
    function prototype into the w100fb header file where it belongs.
    
    This enables the driver to be used by the Zaurus cxx00 series.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fc7896b62b48714fafecf9266d9dc14c1cd6e33
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:32 2005 -0700

    [PATCH] SharpSL: Add cxx00 support to the Corgi LCD driver
    
    The same LCD is present on both the Sharp Zaurus c7x0 series and the cxx00 but
    with different framebuffer drivers (w100fb vs.  pxafb).  This patch adds
    support for the cxx00 series to the LCD driver.  It also adds some LCD to
    touchscreen interface logic needed by the touchscreen driver to prevent
    interference problems, the idea being to keep all the ugly code in one place
    leaving the drivers themselves clean.  sharpsl.h is used to provide the
    abstraction.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50a5de44821352354a3ee804e2c7cbfee5a81c06
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 13 01:25:30 2005 -0700

    [PATCH] SharpSL: Abstract c7x0 specifics from Corgi SSP
    
    Sharp's newer range of Zaurus clamshell handhelds, the cxx00's are similar to
    the c7x0 series yet different.  This patch series abstracts the differences
    and generates a set of common drivers that support both series of devices.  It
    then adds machine support for Spitz (SL-C3000) and Borzoi (SL-C3100).  Hooks
    for Akita (SL-C1000) differences are also added.  The I2C driver for its IO
    expander is the only missing piece.
    
    This patch:
    
    Separate out the Sharp Zaurus c7x0 series specific code from corgi_ssp.c so
    that other models such as the cxx00's can share it.  Create sharpsl.h which
    will be used to abstract machine/model specifics.
    
    This enables the driver to be used by the Zaurus cxx00 series.
    
    Signed-Off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 610827dee82731c7be5a135d750d194ac56881a9
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:29 2005 -0700

    [PATCH] pktcdvd: BUG_ON cleanups
    
    Remove some redundant BUG_ON() statements in pktcdvd and move one run-time
    check to compile-time.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1107d2e0352769b9bde6a4877c295b9309cdb877
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:29 2005 -0700

    [PATCH] pktcdvd: use kcalloc and kzalloc
    
    Use kcalloc and kzalloc in pktcdvd.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06e7ab53f4a1e8bbf66c3985968468949d74d006
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:28 2005 -0700

    [PATCH] pktcdvd: more accurate I/O accounting
    
    In the /proc statistics, only count writes that upper layers have requested.
    Don't count additional writes created inside the packet driver to satisfy the
    requirement to only write full packets.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a676f8d092f2a3aff419cacae79c80c3b7f6c0f5
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:27 2005 -0700

    [PATCH] pktcdvd: documentation update
    
    Update the "theory of operation" description.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0272e78eee4dc53c887fd132e9035daf037d423
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:27 2005 -0700

    [PATCH] pktcdvd: fix bogus BUG_ON
    
    In the packet writing driver, if the drive reports a packet size larger than
    the driver can handle, bail out safely instead of triggering a BUG_ON.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9f0bd0895c040f69a0440286b64725f74f5b387
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:26 2005 -0700

    [PATCH] cciss: SCSI tape info for /proc
    
    Add SCSI host and device info not elsewhere available to /proc/scsi/cciss/*
    Namely, connect cciss device instance with scsi host number, and give scsi
    host number, bus, target, lun, devicetype, and 8-byte cciss LUNID for each
    tapedrive/medium changer attached to a controller
    
    For instance:
    
    # cat /proc/scsi/cciss/2
    cciss0: SCSI host: 2
    c2b0t0l0 01 0x0000000000000001
    
    Signed-off-by: Stephen M. Cameron <steve.cameron@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47922d068e90ed34c1336cdd39912d51e190f8a5
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:25 2005 -0700

    [PATCH] cciss: One Button Disaster Recovery support
    
    This patch adds support for "One Button Disaster Recovery" devices to the
    cciss driver.  (OBDR devices are tape drives which can pretend to be cd-rom
    devices temporarily.  Once booted the device can be reverted to a tape drive
    and data recovery operations can be automatically begun.)
    
    This is an enhancement request by a vendor/partner working on One Button
    Disaster Recovery.
    
    Signed-off-by: Stephen M. Cameron <steve.cameron@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb2a37bf4131d64b76dcdb126e3ff5bf371b1842
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:24 2005 -0700

    [PATCH] cciss: fix for DMA brokeness
    
    The CCISS driver seems to loose track of DMA mappings created by it's
    fill_cmd() routine.  Neither callers of this routine are extracting the DMA
    address created in order to do the unmap.
    
    Instead, they simply try to unmap 0x0.  It's easy to see this problem on an
    x86_64 system when using the "swiotlb=force" boot option.  In this case, the
    driver is leaking resources of the swiotlb and not causing a sync of the
    bounce buffer.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a445d3ba6b90ce13a843ad5d1a0867388b08096
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:23 2005 -0700

    [PATCH] cciss: bug fix in cciss_remove_one
    
    This patch fixes a bug in cciss_remove_one.  A set of braces was missing for
    the if statement causing an Oops on driver unload.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33079b21978f478865068ee6a3c5807b6c6ecdbe
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:22 2005 -0700

    [PATCH] cciss: direct lookup for command completions
    
    This patch changes the way we complete commands.  In the old method when we
    got a completion we searched our command list from the top until we find it.
    
    This method uses a tag associated with each command (not SCSI command tagging)
    to index us directly to the completed command.  This helps performance.
    
    Signed-off-by: Don Brace <dab@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddd474420a0b0dfeda38b6b5f83c7af751235cc3
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:22 2005 -0700

    [PATCH] cciss: new disk register/deregister routines
    
    This patch removes a couple of functions dealing with configuration and
    replaces them with new functions.  This implementation fixes some bugs
    associated with the ACUXE.  It also allows a logical volume to be removed from
    the middle without deleting all volumes behind it.
    
    If a user has 5 logical volumes and decides he wants to reconfigure volume
    number 3, he can now do that without removing volumes 4 & 5 first.  This code
    has been tested in our labs against all application software.
    
    Signed-off-by: Chase Maupin <chase.maupin@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f8ef3806c40e74733f45f436d44b3d8e9a2fa48
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:21 2005 -0700

    [PATCH] cciss: busy_initializing flag
    
    This patch adds a flag called busy_initializing.  If there are multiple
    controllers in a server AND the HP agents are running it's possible the agents
    may try to poll a card that is still initializing if the driver is removed and
    then added again.
    
    Signed-off-by: Don Brace <dab@hp.com>
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dc7a86e85593c834bb930f5d5aba3a19ee7a350
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 13 01:25:19 2005 -0700

    [PATCH] cciss: new controller pci/subsystem ids
    
    This patch adds new PCI and subsystem ID's that finally made the spec.  It
    also include a name change for one controller.  I know there's a lot of
    duplicat names but the fw folks wanted this for the different implementations.
    
    Even though the same ASIC is used it may be embedded on some platforms,
    standup card in others, and a mezzanine in other servers.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fbc33680c191f4e74c937c8289685d6caaadea6
Author: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
Date:   Tue Sep 13 01:25:18 2005 -0700

    [PATCH] dontdiff: add asm_offsets
    
    We seem to use both asm-offsets.* and asm_offsets.*
    
    Signed-off-by: Michal K. K. Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f03783ce5d851e4b98dfaf3e9eb177870f6c75d
Author: Chris Mason <mason@suse.com>
Date:   Tue Sep 13 01:25:17 2005 -0700

    [PATCH] reiserfs: use mark_inode_dirty instead of reiserfs_update_sd
    
    reiserfs should use mark_inode_dirty during reiserfs_file_write and
    reiserfs_commit_write.  This makes sure the inode is properly flagged as
    dirty, which is used during O_SYNC to decide when to trigger log commits.
    
    This patch also removes the O_SYNC check from reiserfs_commit_write, since
    that gets dealt with properly at higher layers once we start using
    mark_inode_dirty.
    
    Thanks to Hifumi Hisashi <hifumi.hisashi@lab.ntt.co.jp> for catching this.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f1583339a6f52c0c26441d39a0deff8246800f7
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Sep 13 01:25:16 2005 -0700

    [PATCH] use add_taint() for setting tainted bit flags
    
    Use the add_taint() interface for setting tainted bit flags instead of
    doing it manually.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb911ee849756fc6c609dddded92d9207ff3fb29
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 13 01:25:15 2005 -0700

    [PATCH] Remove unnecessary check_region references in comments
    
    Remove check_region references from comments and printk statements so that
    searching for real users of this deprecated function gets easier.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a1c17574a01555e5d3fdf56d8d72969904c91ca
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Sep 13 01:25:15 2005 -0700

    [PATCH] schedule_timeout_[un]interruptible() speedup
    
    These functions don't need schedule_timeout()'s barrier.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 498d0c5711094b0e1fd93f5355d270ccebdec706
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Sep 13 01:25:14 2005 -0700

    [PATCH] set_current_state() commentary
    
    Explain the mysteries of set_current_state().
    
    Quoth Linus:
    
     The scheduler itself never needs the memory barrier at all.
    
     The barrier is needed only if the user itself ends up testing some other
     thing afterwards, ie if you have
    
     	set_process_state(TASK_INTERRUPTIBLE);
     	if (still_need_to_sleep())
     		schedule();
    
     then the "still_need_to_sleep()" thing may test flags and wakeup events,
     and then you _may_ want to (and often do) make sure that the write of
     TASK_INTERRUPTIBLE is serialized wrt the reads of any wakeup data (since
     the wakeup may have happened on another CPU).
    
     So the comment is somewhat wrong. We don't really _care_ whether the state
     propagates out to other CPU's since all of our actions are purely local,
     and there is nothing we do that is conditional on any other CPU: we're
     going to sleep unconditionally, and the scheduler only cares about _our_
     state, not about somebody elses state.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 921717a2a1cde78c9b2aa971c16510d63efe7320
Author: Andi Kleen <ak@suse.de>
Date:   Tue Sep 13 01:25:13 2005 -0700

    [PATCH] Make BUILD_BUG_ON fail at compile time.
    
    Force a compiler error instead of a link error, because they are easier to
    track down.  Idea stolen from code by Jan Beulich <jbeulich@novell.com>
    
    If the argument to BUILD_BUG_ON evaluates to non-zero the compiler will do:
    
    	t.c:6: error: size of array `type name' is negative
    
    (surprised that gcc doesn't have an extension for this)
    
    Signed-off-by: "Andi Kleen" <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f3d2bd54f8fb178f516fc6903366e16e20f7428
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 13 01:25:12 2005 -0700

    [PATCH] free initrd mem adjustment
    
    Besides freeing initrd memory, also clear out the now dangling pointers to
    it, to make sure accidental late use attempts can be detected.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1a5b3d93ca45613ec1d920fdb131b69b6553882
Author: Peter Staubach <staubach@redhat.com>
Date:   Tue Sep 13 01:25:12 2005 -0700

    [PATCH] open returns ENFILE but creates file anyway
    
    When open(O_CREAT) is called and the error, ENFILE, is returned, the file
    may be created anyway.  This is counter intuitive, against the SUS V3
    specification, and may cause applications to misbehave if they are not
    coded correctly to handle this semantic.  The SUS V3 specification
    explicitly states "No files shall be created or modified if the function
    returns -1.".
    
    The error, ENFILE, is used to indicate the system wide open file table is
    full and no more file structs can be allocated.
    
    This is due to an ordering problem.  The entry in the directory is created
    before the file struct is allocated.  If the allocation for the file struct
    fails, then the system call must return an error, but the directory entry
    was already created and can not be safely removed.
    
    The solution to this situation is relatively easy.  The file struct should
    be allocated before the directory entry is created.  If the allocation
    fails, then the error can be returned directly.  If the creation of the
    directory entry fails, then the file struct can be easily freed.
    
    Signed-off-by: Peter Staubach <staubach@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 873d3469db66ea08e94b0d04a96b1a4507684824
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Sep 13 01:25:10 2005 -0700

    [PATCH] ppc32: remove use of asm/segment.h
    
    Removed ppc32 architecture specific users of asm/segment.h and
    asm-ppc/segment.h itself
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a00cbfcf8ffdd719cb5a27e1a0a9779665d1e23
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Tue Sep 13 01:25:09 2005 -0700

    [PATCH] ppc32: discard *.exit.text and *.exit.data sections
    
    Discard *.exit.text sections on runtime.  We cannot do this on link time
    because of the way BUG macros are implemented.  If "__exit function" calls
    one of those macros, __bug_table section will reference this function.
    This is similar to ".altinstructions" situation on i386.
    
    *.exit.data seems to be OK in this respect and is discarded on link
    time.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b952b3c143660b6436fcb299b249cefde61c18d
Author: Andi Kleen <ak@suse.de>
Date:   Tue Sep 13 01:25:08 2005 -0700

    [PATCH] Fix MPOL_F_VERIFY
    
    There was a pretty bad bug in there that the code would always check the full
    VMA, not the range the user requested.
    
    When the VMA to be checked was merged with the previous VMA this could lead to
    spurious failures.
    
    Signed-off-by: "Andi Kleen" <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d0986e289a4b018fec87fcc49538945fb401f37
Author: Con Kolivas <kernel@kolivas.org>
Date:   Tue Sep 13 01:25:07 2005 -0700

    [PATCH] vm: kswapd cleanup: use pgdat
    
    Use the pgdat pointer we've already defined in wakeup_kswapd
    
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7979aca38b78ffe6a65ef309f26721c527104eaf
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Sep 13 01:25:07 2005 -0700

    [PATCH] i2c-keywest warning fix
    
    Unused variable.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f39a4aa5ea579bcdcfbb9661ee77817bc4945562
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Tue Sep 13 01:25:05 2005 -0700

    [PATCH] pcmcia: add another orinoco_cs id
    
    Add new id to orinoco_cs (corega PCCB-11).
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7d7634c0f021d7d7ed781680d2c88940fc5fee8
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue Sep 13 01:25:04 2005 -0700

    [PATCH] ide: clean up the garbage in eighty_ninty_three
    
    Replace the foot long pile of festering garbage in eighty_ninty_three with
    some actual clean code.  All the ifdefs are fixed and havent changed since
    2.4
    
    Acked-by: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c352ec8ab87b065cd2edda171811f49ac7d0d5cd
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Sep 13 01:25:03 2005 -0700

    [PATCH] pcmcia: warn on IOCTL usage
    
    More visible user information of scheduled feature removal.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db84502b0229ed3075ca74b7d34eb8c609de3200
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Tue Sep 13 01:25:02 2005 -0700

    [PATCH] fbdev Kconfig fix
    
    Fix compile error if CONFIG_FB_I810_I2C is 'y' and CONFIG_I2C = 'm'.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4aed0644d684428e811bb6944f032b460a3ab165
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Tue Sep 13 01:25:01 2005 -0700

    [PATCH] drivers/base/*: use kzalloc instead of kmalloc+memset
    
    Fixes a bunch of memset bugs too.
    
    Signed-off-by: Lion Vollnhals <webmaster@schiggl.de>
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 154fb614df83086ceb18a2c19908154e78d4dc98
Author: Dave Boutcher <sleddog@us.ibm.com>
Date:   Tue Sep 13 10:09:02 2005 -0500

    [SCSI] ibmvscsi compatibility fix
    
    Linda Xie ever so gently pointed out that she had a patch
    to preserve compatibility with older SLES targets, and I told
    her we didn't need to push it to mainline.
    
    This patch explicitly checks the version of the IBMVSCSI target
    and ensures that large scatterlists are not sent to older
    targets.
    
    Signed-off-by: Linda Xie <lxie@us.ibm.com>
    Signed-off-by: Dave Boutcher <boutcher@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 299cc3c166f7a11f6cc3b66aafbaf75c2aa0e0e2
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 13 07:59:34 2005 -0700

    Fix up more strange byte writes to the PCI_ROM_ADDRESS config word
    
    It's a dword thing, and the value we write is a dword.  Doing a byte
    write to it is nonsensical, and writes only the low byte, which only
    contains the enable bit.  So we enable a nonsensical address (usually
    zero), which causes the controller no end of problems.
    
    Trivial fix, but nasty to find.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c5363153dc7ae694404e7732b4ce36eecc94ca7
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Sep 12 09:15:14 2005 -0500

    [SCSI] blacklist REPORT LUNS usage on transtec arrays
    
    They report being SCSI-3 but seem to give back rubbish to a
    REPORT_LUNS command.  Force them to be sequentially scanned.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2f4ba45a75d6383b4a1201169a808ffea416ffa0
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 20:12:09 2005 -0700

    Linux 2.6.14-rc1
    
    Two weeks after 2.6.13: starting to calm things down.

commit 9c2aba4852c7e4a33741023109c3713e309d5f8f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Sep 13 11:14:08 2005 +1000

    [PATCH] m68knommu: optimized local_irq_disable, and platform reboot code
    
    Switch to a space optimized version of local_irq_disable() for ColdFire
    platforms. Also add reboot support for the Freescale M5272 platform.
    Patch originally submitted by Philippe De Muyter <phdm@macqel.be>.
    
    Add reboot support for the Freescale M523x ColdFire platform. Patch originally
    submitted by Jate Sujjavanich.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f5757476dc1c8eabc51e7d14722a2646bc2cb9d
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Sep 13 11:14:08 2005 +1000

    [PATCH] m68knommu: startup code for the Drangen Engine 68328 based board
    
    Specialized startup code for the 68328 based DragenEngine board.
    It doesn't easily fit into the common 68x328 startup code framework.
    It doesn't want any of the common hardware setup to be done here.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7cf27cb4162bd586c015e32383f30bc7fbb3ff8a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Sep 13 11:14:08 2005 +1000

    [PATCH] m68knommu: implement scatter/gather support macros
    
    Implement the scattergather support macros for m68knommu targets.
    Patch originally submitted by Leon Woestenberg <leonw@mailcan.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 962d69ed6f5c911fbdb23ef2304e3a5903e5ccbb
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Sep 13 11:14:08 2005 +1000

    [PATCH] m68knommu: fix cache actions for ColdFire 5249, 527x and 528x processors
    
    Add better support for flushing the cache's on some ColdFire processors.
    The 5249 cache code is now enabled (it was stubbed out), it really is
    needed. Add support for the 527x and 528x families - we only use the
    simple instruction cache on them.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35d91f75c2c9548e606e813413f03c5cc35da969
Merge: 9401c70... 70c83e1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 20:02:18 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit 0915e8865fe4684dc82f043ac7036f34bf89f52a
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Sep 13 01:32:37 2005 +0200

    [Bluetooth] Add ignore parameters to the HCI USB driver
    
    This patch adds the module parameters ignore_csr and ignore_sniffer
    to the HCI USB driver. This allows an easier use of CSR ROM chips
    that need an additional initialization routine and the Frontline
    sniffers.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 354d28d5f8546e115ebaae9311897f0bc4b6a8d4
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Sep 13 01:32:31 2005 +0200

    [Bluetooth] Prevent RFCOMM connections through the RAW socket
    
    This patch adds additional checks to prevent RFCOMM connections be
    established through the RAW socket interface.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 21d9e30ed020d24336cc3bee2a4e04da232ed554
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Sep 13 01:32:25 2005 +0200

    [Bluetooth] Add support for extended inquiry responses
    
    This patch adds the handling of the extended inquiry responses and
    inserts them into the inquiry cache.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 9401c705f2a6a7e5df102f6443dba395c3c5e5a8
Merge: 61b22e6... 074c527...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 15:55:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 61b22e693ea33af02f3380d3dbed9ee65a80c729
Merge: 3a3bca5... 24b8e05...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 15:55:09 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 3a3bca5ace9123d1a6b890ceac2902ebf2b1fd50
Merge: bd6fe9e... b9d36b8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 15:54:41 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit bd6fe9e14589ab39bdabb942773b3ed669fa5738
Merge: 862aad5... 210ce2a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 15:54:23 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc

commit b9d36b851a5085d35b9598235a456604532f306e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Sep 12 22:56:56 2005 +0100

    [ARM SMP] Add MPCore watchdog driver
    
    Add platform independent parts of the ARM MPCore watchdog driver.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 24b8e05dc1b03c1f80828e642838511c16e17250
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 14:45:08 2005 -0700

    [BNX2]: Add support for ETHTOOL_GPERMADDR.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ff436977ed3eeca2d39ae40bbfdb1ce58da8453
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 14:44:20 2005 -0700

    [TG3]: Add support for ETHTOOL_GPERMADDR.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4f63b877726135b19ae73108acf9e0ebb4323dda
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Sep 12 14:43:18 2005 -0700

    [TG3]: Do not count non-error frames dropped by the hardware as rx_errors.
    
    Instead, count them as part of rx_missed_errors.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b88a762b6062f06d431af0045de4854a758646c0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:28:03 2005 -0700

    [NETROM]: Introduct stuct nr_private
    
    NET/ROM's virtual interfaces don't have a proper private data
    structure yet.  Create struct nr_private and put the statistics there.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e21ce8c7c013fb223a002c70bb0a547de6c26c12
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:27:37 2005 -0700

    [NETROM]: Implement G8PZT Circuit reset for NET/ROM
    
    NET/ROM is lacking a connection reset like TCP's RST flag which at times
    may result in a connecting having to slowly timing out instead of just being
    reset.  An earlier attempt to reset the connection by sending a
    NR_CONNACK | NR_CHOKE_FLAG transport was inacceptable as it did result in
    crashes of BPQ systems.  An alternative approach of introducing a new
    transport type 7 (NR_RESET) has be implemented several years ago in
    Paula Jayne Dowie G8PZT's Xrouter.
    
    Implement NR_RESET for Linux's NET/ROM but like any messing with the state
    engine consider this experimental for now and thus control it by a sysctl
    (net.netrom.reset) which for the time being defaults to off.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d2ce4bc340946d5b78484d638ac10df958c4c3bf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:26:52 2005 -0700

    [ROSE]: ROSE has no ARP
    
    ARP over ROSE does not exist so it's obviously not implemented on any
    ROSE stack, so the ROSE interfaces really should default to IFF_NOARP.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 723772913e6caf82919754f9d73fa55fc762bb1b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:26:26 2005 -0700

    [NETROM]: NET/ROM has no ARP
    
    ARP over NET/ROM does not exist so it's obviously not implemented on any
    NET/ROM stack, so the NET/ROM interfaces really should default to IFF_NOARP.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd8aa40431d2776ef72fd36aab6a6a6bf0f45967
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:25:57 2005 -0700

    [NETROM] NET/ROM has no txqueue
    
    NET/ROM uses virtual interfaces so setting a queue length is wrong.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4676356b57ee767d5a95df8270f5c372b838dd33
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:25:25 2005 -0700

    [AX.25]: Reformat ax25_proto_ops initialization
    
    Reformat iniitalization of ax25_proto_ops.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20b7d10a3339cbfa2f7a52da0ad77b5a0723f0ca
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:24:55 2005 -0700

    [AX.25/ROSE]: Whitespace formatting changes
    
    Small formatting changes.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b01ef8ffafc5239a871bc24af74f604654e7de2b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:24:24 2005 -0700

    [AX.25]: Add descriptions to constants
    
    Comment the names used for the AX.25 state machine.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9b37ee75858ce35cf3c0e4724acaf4efabb45687
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:23:52 2005 -0700

    [NETROM/AX.25/ROSE]: Remove useless tests
    
    Remove error tests that have already been performed by the caller.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ddcf626fd0a3cbf410ceb483cb76074ed1c5873
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:23:06 2005 -0700

    [NETROM]: statistics fix
    
    Calling an incoming NET/ROM-encapsulated IP packet an error if the
    interface isn't up is probably a bit over the top, so count it as
    dropped instead of an error.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3bf0ae7b57cade2003ffd0125ee30e80adb93d23
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:22:30 2005 -0700

    [AX.25]: Add more PIDs
    
    Add a few more PID definitions.  AX.25 PIDs are the equivalent to IP
    protocol numbers.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3f2aadd041a7a3e732d182c3770b3fa95a2300b2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:21:48 2005 -0700

    [NETROM]: Fix rebuild header mess
    
    For reason that probably nobody recalls NET/ROM does it's actual
    packet transmission in nr_rebuild_header and even treats invocation of
    it's hard_start_xmit method nr_xmit as a bug.  Fix that by splitting
    the job done by nr_rebuild_header into two halves.  Along with that we
    now also can get rid of the silly clone of the skb on transmit.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f74998e5c3b4610e6eba06babf16547369c512a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:21:01 2005 -0700

    [AX.25]: Rename ax25_encapsulate to ax25_hard_header
    
    Rename ax25_encapsulate to ax25_hard_header which these days more
    accurately describes what the function is supposed to do.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4bc7ee2e474819d3932e8d726fdf7cb0bdc00c1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Sep 12 14:19:26 2005 -0700

    [HAMRADIO]: driver cleanups
    
    Misc related cleanups in hamradio drivers:
    
     o Use symbolic constants instead of magic numbers
     o Don't try to handle the case where AX.25 isn't configured - the kernel
       configuration doesn't permit that.
     o Remove useless headers
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59c2353dd045509626d7cc1953cb2d6b7358ab7a
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Mon Sep 12 14:16:58 2005 -0700

    [CCID3]: Listen socks doesn't have a private CCID block
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 074c5279ef671e4fcd2ce2960ecc9d7d9735fabd
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Sep 12 14:16:17 2005 -0700

    [SPARC] drivers/sbus: fix-up schedule_timeout() usage
    
    Use schedule_timeout_uninterruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 121caf577dc61588c1128821873a08cec48baf58
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Sep 12 14:15:34 2005 -0700

    [NET]: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{,un}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.  Also use
    human-time conversion functions instead of hard-coded division to avoid
    rounding issues.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 862aad56dcd67fd0313db51d09a5269f7e3f1f0b
Merge: cc6120c... d58dde0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 13:32:56 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit cc6120c6687c34501c0b1d49b4d7e46c63911fed
Merge: 7b799bc... f5e09b7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 13:32:20 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit 7b799bc82b5eebb8937ff773e4c4be7260698627
Merge: 8d3ef74... ad2c10f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 13:31:33 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit d58dde0f552a5c5c4485b962d8b6e9dd54fefb30
Merge: 877599f... 2ade814...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Sep 12 12:45:04 2005 -0700

    Merge ../torvalds-2.6/

commit 210ce2a7504e429b7ccc191b1efba4c772c4d8b6
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Mon Sep 12 20:36:19 2005 +0100

    [MMC] Clean up wbsd detection handling
    
    The wbsd driver's card detection routing is a bit of a mess. This
    patch cleans up the routine and makes it a bit more comprihensible.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e062c8ae85df633f2ecaa5a5af0d9922ced5e074
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Mon Sep 12 20:35:54 2005 +0100

    [MMC] Remove unused timer.
    
    Remove timer that was left from earlier cleanup.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 877599fdef5ea4a7dd1956e22fa9d6923add97f8
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Sep 12 17:12:43 2005 +0400

    [PATCH] crc16: remove w1 specific comments.
    
    Remove w1 comments from crc16.h and move
    specific constants into w1_ds2433.c where they are used.
    Replace %d with %zd.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8d3ef7461c2460c1bc02c63279b638fae80bba37
Merge: a217e8c... b979118...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 12:34:45 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/aia21/ntfs-2.6

commit a217e8c18113c4f3238b01307782b99aa1547ea2
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 12:32:31 2005 -0700

    Fix fallout from ATI Xpress timer workaround
    
    ACPI earlyquirks needs to honor the proper config variables, and include
    the right header file.
    
    (Fixes commit 66759a01adbfe8828dd063e32cf5ed3f46696181)
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5e09b7cac4a2705f55830db64d448c062e84e8e
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Mon Sep 12 12:23:25 2005 +0100

    [PATCH] USB: ftdi_sio: custom baud rate fix
    
    ftdi_sio: I messed up the baud_base for custom baud rate support in
    2.6.13.  The attached one-liner patch fixes it.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc506517ec5dcc638eaa55672d5a924c1e2a2d0b
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu Sep 1 14:35:05 2005 -0700

    [PATCH] USB: Usbmon setup DMA patch
    
    Alan Stern sent me this patch. It goes on top of the patch the adds
    mon_dmapeek:
     http://ftp.kernel.org/pub/linux/kernel/people/gregkh/gregkh-2.6/gregkh-04-usb/usb-usbmon-dma-areas.patch
    
    Please be warned about ordering requirements or the build may fail.
    
    Actually, mon_dmapeek is generic enough to support SETUP packets too.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f36163d3abefbda1b21a330b3fdf3c2dc076d94
Author: Thomas Sailer <sailer@ife.ee.ethz.ch>
Date:   Fri Sep 9 10:43:50 2005 +0200

    [PATCH] usb: fix uss720 schedule with interrupts off
    
    This patch fixes the long standing schedule with interrupts off problem
    of the uss720 driver. The problem is caused by the parport layer calling
    the save and restore methods within a write_lock_irqsave guarded region.
    The fix is to issue the control transaction requests required by save
    and restore asynchronously.
    
    Signed-off-by: Thomas Sailer, <sailer@ife.ee.ethz.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ce441594e965e32965432404cfaba73e8fbc6ff7
Author: Harald Welte <laforge@gnumonks.org>
Date:   Sat Sep 3 11:27:08 2005 +0200

    [PATCH] USB: fix usbdevice_fs header breakage
    
    [USBDEVFS] fix inclusion of <linux/compat.h> to avoud header mess
    
    Without moving the include of compat.h down, userspace programs that use
    usbdevice_fs.h end up including half the kernel includes (and eventually
    fail to compile).
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e1c37b8d83fb588cc1142938fb1a1476046c8d67
Author: Daniel Drake <dsd@gentoo.org>
Date:   Wed Aug 31 16:38:41 2005 +0100

    [PATCH] USB: usb-storage: Add unusual_devs entry for Neuros Audio MP3 player
    
    Alan Stern wrote:
    > If the device sometimes reports the correct values, then you should
    > include NEED_OVERRIDE flag to prevent messages about unnecessary
    > overrides showing up in the system log.  Also, if bInterfaceSubclass
    > is correct and only bInterfaceProtocol is wrong, then the entry should
    > say US_SC_DEVICE instead of US_SC_SCSI.
    
    Fair points, thanks.
    
    When connected over USB2, this device reports a nonsense
    bInterfaceProtocol value 6 and doesn't work with usb-storage.  When
    connected over USB1, the device reports the correct bInterfaceProtocol
    value 0x50 (bulk) and works with no problems.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1ea640ce1118b0742a6e8675bddc07fc3df326b7
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon Aug 29 22:38:28 2005 -0700

    [PATCH] USB: storage: Add unusual_dev SINGLE_LUN entries
    
    This patch adds entries for several USB floppies that need
    the US_FL_SINGLE_LUN flag. These were reported by
    Sebastian Kapfer <sebastian_kapfer@gmx.net> and Olaf Hering
    <olh@suse.de>, with rediffing and cleaning from me.
    
    Reported-by: Sebastian Kapfer <sebastian_kapfer@gmx.net>
    Reported-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 490dce15ce7b36026e5430d10ee28197a593c711
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Tue Aug 23 07:46:13 2005 -0700

    [PATCH] USB Storage: unusual_devs.h request for Transcend
    
    The stick replies to the door lock commands with a check condition (e.g.
    FAIL status in a normal bulk CSW), but the subsequent REQUEST SENSE
    returns all-zero sense. The situation is documented in our Bugzilla,
    including usbmon traces.
    	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=162559
    
    The error is purely cosmetic, data integrity is not in danger.
    But I thought we might as well do it. It looks nicer that way.
    
    I discussed this with Phil and he told me to submit directly.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 226173edae1c49c68ebb723771a02302c85e3475
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Aug 25 20:03:50 2005 -0700

    [PATCH] USB: storage: Fix messed-up locking
    
    This is patch as550 from Alan Stern.
    
    Apparently someone changed the SCSI core so that it no longer holds the
    host lock when doing a device or bus reset.  usb-storage was updated at
    the time, but the change was done carelessly.  Some of the code depends
    on that lock being held.
    
    This patch reintroduces the host lock where needed and tries to clarify
    the comments explaining why the lock is necessary.  It also moves the
    code that clears the TIMED_OUT and ABORTING bitflags so that it executes
    as soon as the timed-out command has completed (and while the host lock
    is held).
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b789696af8b4102b7cc26dec30c2c51ce51ee18b
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 10:41:44 2005 -0700

    [PATCH] USB: relax usbcore reset timings
    
    This appears to help some folk, please merge.
    This patch relaxes reset timings.  There are some reports that it
    helps make enumeration work better on some high speed devices.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5f9809487bf035b49ff470709a65fbce3b345f51
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Sep 8 21:56:56 2005 -0700

    [PATCH] USB: proc_usb_info.txt: add blank lines
    
    Update Documentation/usb/proc_usb_info.txt:
    - remove some trailing whitespace
    - add a blank line before each T: line to match current kernel
      and to make the text more readable.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68e110a078a7e8a416ba06bfa6372ae28222809e
Author: Robert Spanton <rds204@ecs.soton.ac.uk>
Date:   Tue Aug 30 23:38:23 2005 +0100

    [PATCH] USB: PL2303: CA-42 Phone cable
    
    This patch adds the product ID and vendor ID for a Nokia CA-42 USB cable
    to the list of devices handled by the pl2303 driver. The patch is
    against 2.6.13.
    
    Signed-off-by: Robert Spanton <rds204@zepler.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 155faf5e1e36ca3a6127bdfb5c624d58e520c411
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 11:54:09 2005 -0700

    [PATCH] USB: OHCI, pxa27x OHCI port power tweaks
    
    Now that it's in use on other boards, a bug in the original code needs fixing.
    
    There is no need for the PXA27x OHCI to set usb power during init, since
    the hub driver in usbcore handles that. Those platform-specific power
    control functions are also incorrect, and should therefore be removed.
    
    Add a check to clear the OTG pin hold bit until such times OTG is
    properly implemented.
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fdd13b36c4a501d8787a27e54635fbd943f2685d
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 11:52:57 2005 -0700

    [PATCH] USB: OHCI relies less on NDP register
    
    Some OHCI implementations have differences in the way the NDP register
    (in roothub_a) reports the number of ports present. This patch allows the
    platform specific code to optionally supply the number of ports. The
    driver just reads the value at init (if not supplied) instead of reading
    it every time its needed (except for an AMD756 bug workaround).
    
    It also sets the value correctly for the ARM pxa27x architecture.
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e0fd3cbc50a8c925e8e7d8448df689015362c458
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 10:47:20 2005 -0700

    [PATCH] USB: OHCI irq tweak
    
    Evidently there are some boards which care a lot about this, but
    as a rule it's been hard to notice.
    
    OHCI_INTR_RD wasn't always cleared in the ohci irq handler.  On some
    systems this means certain remote wakeup scenarios could seem to hang
    (in an interrupt storm, RD never clearing).
    
    From: "William Morrow" <William.Morrow@amd.com>
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4809ecc29935893d954ab9244899777ffaca40ac
Author: Pavol Kurina <kurina@gmx.net>
Date:   Wed Sep 7 09:49:34 2005 -0700

    [PATCH] USB gadgetfs: fixes an error on writing to endpoint file
    
    this patch fixes an "Invalid argument" error returned by a write to an
    endpoint-file after reopening it in the gadgetfs module in the kernel
    2.6.12.
    
    This was testet only with dummy_hcd module!
    
    Signed-off-by: Pavol Kurina  <kurina@gmx.net>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>

commit 22c438632850c0d6257b45c90afed0cea6953afc
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Aug 15 11:30:11 2005 -0700

    [PATCH] drivers/usb: fix-up schedule_timeout() usage
    
    Description: Use schedule_timeout_{,un}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dd16525b698528172899f10c14a3eb6ddb888a53
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 10:45:25 2005 -0700

    [PATCH] USB: get rid of minor log spamming
    
    Routine cases like handoff-to-companion shouldn't trigger diagnostics.
    This gets rid of some recently added log spamming.  It's routine for
    hub_port_wait_reset() to return -ENOTCONN to indicate handoff from
    highspeed hubs to companions, so an error message is incorrect.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7201c3dcd7799f2aa3d6ec427b194225360ecee
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Sep 2 18:58:09 2005 -0700

    [PATCH] USB: EHCI workaround for NForce and mem > 2GB
    
    NVidia reports (via Mark Overby) that some of their EHCI controllers
    don't like certain data structure addresses beyond the 2GB mark.
    He provided an earlier version of this patch.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10f6524a8ef1413a8cbd952673997013183fe2a9
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 10:55:38 2005 -0700

    [PATCH] USB: EHCI port tweaks
    
    One change may improve some S1 or S3 resume cases, and the other
    seems mostly to explain some strange state "lsusb" would show.
    Two fixes:
    
      - On resume, don't think about resuming any unpowered port, or
        resetting any port with OWNER set to the OHCI/UHCI companion.
        This will make some S1 and S3 resume scenarios work better.
    
      - PORT_CSC was not being cleared correctly in ehci_hub_status_data.
        This was visible at least through current versions of "lsusb",
        and might have caused some other hub related strangeness.
    
        The fix addresses all three write-to-clear bits, using the same
        approach that UHCI happens to use:  a mask of bits that are
        cleared in most writes to that port status register.
    
    Original patch seems to have been from from William.Morrow@amd.com
    and this version (from David) finishes the write-to-clear changes.
    
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 198b95170f2c7ad56b4ba92fe3d4d896f5be5c7e
Author: Craig Shelley <craig@microtron.org.uk>
Date:   Sun Aug 28 09:51:15 2005 +0100

    [PATCH] USB: CP2101 New Device IDs
    
    Three new device IDs for CP2101 USB to UART Bridge
    
    Signed-off-by: Craig Shelley <craig@microtron.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1f09df8bfe358994fcb5f3dc4f890694c4069621
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Sep 5 13:59:51 2005 -0400

    [PATCH] USB UHCI: remove the FSBR kernel timer
    
    This patch (as558) removes from the UHCI driver a kernel timer used for
    checking Full Speed Bandwidth Reclamation (FSBR).  The checking can be
    done during normal root-hub polling; it doesn't need a separate timer.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1a15606d5be8490a122f1c94c554bd0f07d8d26
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Sep 5 13:55:23 2005 -0400

    [PATCH] usbcore: small changes to HCD glue layer
    
    This patch (as549) introduces two small changes in the HCD glue layer.
    The first simply removes a redundant test.  The second allows root-hub
    polling to continue for a single iteration after a host controller dies;
    this is needed for the patch that follows.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7214ff4e8248513ec626212b2c1a3ca0b2a0888
Author: Stelian Pop <stelian@popies.net>
Date:   Thu Sep 8 10:19:48 2005 +0200

    [PATCH] USB: add apple usb touchpad driver
    
    This is a driver for the USB touchpad which can be found on post-February 2005
    Apple PowerBooks.
    
    This driver is derived from Johannes Berg's appletrackpad driver [1],
    but it has been improved in some areas:
        * appletouch is a full kernel driver, no userspace program is necessary
        * appletouch can be interfaced with the synaptics X11 driver[2], in order
          to have touchpad acceleration, scrolling, two/three finger tap, etc.
    
    This driver has been tested by the readers of the 'debian-powerpc' mailing
    list for a few weeks now and I believe it is now ready for inclusion into the
    mainline kernel.
    
    Credits go to Johannes Berg for reverse-engineering the touchpad protocol,
    Frank Arnold for further improvements, and Alex Harper for some additional
    information about the inner workings of the touchpad sensors.
    
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1bbb4f2035d94d86e52e9b5341c142dcb39bb879
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Mon Aug 29 17:01:16 2005 +0200

    [PATCH] USB: sisusb[vga] update
    
    here is a new and extended version of the sisusbvga (previously: sisusb)
    driver. The patch is against 2.6.13 and updates the driver to version 0.0.8.
    
    Additions include complete VGA/EGA text console support and a build-in
    display mode infrastructure for userland applications that don't know
     about the graphics internals.
    
    Fixes include some BE/LE issues and a get/put_dev bug in the previous
    version.
    
    Other changes include a change of the module name from "sisusb" to
    "sisusbvga". The previous one was too generic IMHO.
    
    Please note that the patch also affects the Makefile in
    drivers/video/console as the driver requires the VGA 8x16 font in case
    the text console part is selected.
    
    Heavily tested, as usual. Please apply.
    
    One thing though: I already prepared for removal of the "mode" field and
    the changed "name" field in the usb_class_driver structure. This will
    perhaps need some refinement depending on whether you/Linus merge the
    respective core changes before or after 2.6.14.
    
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ad2c10f8f00d3fe2e37dd8a107e7cf4ac0459489
Merge: 6b78390... 2ade814...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Sep 12 12:10:59 2005 -0700

    Merge ../torvalds-2.6/

commit 80908309ce44677a07763e24e6ec9371cfa3ab5f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Sep 12 11:58:07 2005 -0700

    Revert "[PATCH] USB: Prevent hid-core claiming Apple Bluetooth device on new G4 powerbooks"
    
       This reverts 22af8878d2d641c6b15fe39fe4de3c05b2c477f0 commit.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2ade81473636b33aaac64495f89a7dc572c529f0
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: clean up local_add/sub arguments
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b6a455c7472dabcc624faa740a297d50815b4c7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: Use correct mask to compute conflicting nodes in SRAT
    
    The nodes are not set online yet at this point.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bce2b54ae91aac76b62e8110b627ba5e5cbbffd
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: reset apicid<->node tables when SRAT cannot be parsed
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e58e0d03120d6c2aa134fd3be4f0f762f0bb25e7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: Clean up the SRAT node list before computing the hash function
    
    Also use for_each_node_mask instead of hand crafted loops.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66759a01adbfe8828dd063e32cf5ed3f46696181
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: i386/x86-64: Fix time going twice as fast problem on ATI Xpress chipsets
    
    Original patch from Bertro Simul
    
    This is probably still not quite correct, but seems to be
    the best solution so far.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 049cdefe19f95b67b06b70915cd8e4ae7173337a
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: reduce x86-64 bug frame by 4 bytes
    
    As mentioned before, the size of the bug frame can be further reduced while
    continuing to use instructions to encode the information.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c47a3167d0454c0af5fb0a0322b01a0e3487798e
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: Make dmi_find_device for !DMI case inline
    
    Otherwise it will generate warnings and be generated many times.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aeb39986ec8bf31c8d55eba22f0a9996363482fb
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: Allow frame pointer and fix help text.
    
    Allow frame pointer and fix help text.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9cdd304b20b921507fa1670aaf751496627c8d9c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: more gratitious linux/irq.h includes
    
    	... and with that all instances in arch/x86_64 are gone.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff347b221512a83e7b08356729e3e2c14346e29e
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Mon Sep 12 18:49:25 2005 +0200

    [PATCH] x86-64: Fix incorrect FP signals
    
    This is the same patch that went into i386 just before 2.6.13
    came out.  I still can't build 64-bit user apps, so I tested
    with program (see below) in 32-bit mode on 64-bit kernel:
    
    Before:
    
    	$ fpsig
    	handler: nr = 8, si = 0x0804bc90, vuc = 0x0804bd10
    	handler: altstack is at 0x0804b000, ebp = 0x0804bc7c
    	handler: si_signo = 8, si_errno = 0, si_code = 0 [unknown]
    	handler: fpu cwd = 0xb40, fpu swd = 0xbaa0
    	handler: i387 unmasked precision exception, rounded up
    
    After:
    
    	$ fpsig
    	handler: nr = 8, si = 0x0804bc90, vuc = 0x0804bd10
    	handler: altstack is at 0x0804b000, ebp = 0x0804bc7c
    	handler: si_signo = 8, si_errno = 0, si_code = 6 [inexact result]
    	handler: fpu cwd = 0xb40, fpu swd = 0xbaa0
    	handler: i387 unmasked precision exception, rounded up
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 847815760cc0f41985b3185d780aa4369fcb475d
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Clean up nmi error message
    
    The x86_64 nmi code is missing a newline in one of its messages.
    
    I added a space before the CPU id for readability and killed the trailing
    space on the previous line as well.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2d236b3ac8fcbbf1bae7d815294d258ba24e3f5
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Lose constraints on cmpxchg
    
    While only cosmetic for x86-64, this adjusts the cmpxchg code appearantly
    inherited from i386 to use more generic constraints.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a426cb76443f5b0a021a9df57d3446d14763c21
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Declare NMI_VECTOR and handle it in the IPI sending code.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2a0c992e9da823dc23abcb92a42ec5faf856b8b
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove unused vxtime.hz field
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0d58c9741e4ef42f5fbdfb2a6b86f03c6e9092f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Set the stack pointer correctly in init_thread and init_tss
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1209140c3c70aaa32d1a0462d79557f2a44a4ef8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Safe interrupts in oops_begin/end
    
    Rather than blindly re-enabling interrupts in oops_end(), save their state
    in oope_begin() and then restore that state.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 059bf0f6c33058680e4381f17d554baaa4f45d68
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Merge msr.c with i386 version
    
    The only difference was the inline assembly, so move that into
    asm/msr.h and merge with the i386 version.
    
    This adds some missing sysfs support code to x86-64.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55679edb19f5ee1dcb0147afe2f198a10ef963f0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Clean up includes in arch/x86_64/kernel/suspend.c
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7effaa882af523085f7acadc5871b75a7e506baf
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix CFI information
    
    Being the foundation for reliable stack unwinding, this fixes CFI unwind
    annotations in many low-level x86_64 routines, plus a config option
    (available to all architectures, and also present in the previously sent
    patch adding such annotations to i386 code) to enable them separatly
    rather than only along with adding full debug information.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3ab8382245541ea030faaa1645f66258fde452d
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix gcc 4 warnings about pointer signedness
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bf97e01192f0fcdff2f0e9eae063e7785f6f915
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Use physflat on Intel for < 8 CPUs with CPU hotplug
    
    This avoids races with the APIC broadcast/mask modes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27183ebd330a676fe29f7eb9b7ff582492246ec8
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Add dma_sync_single_range_for_{cpu,device}
    
    Currently just defined to their non range parts.
    
    Pointed out by John Linville
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05d1fa4bf6a1528e4d4e39fa537f11e6cfca4720
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Improve error handling for overlapping PXMs in SRAT.
    
    - Report PXMs instead of nodes
    - Report the correct PXM, not always the one of node 1.
    - Only warn for the case of a PXM overlapping by itself
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e8ad43ec07545780ce7992cb18e2d82c7abd24c
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Prevent gcc 4 from optimizing away vsyscalls
    
    They were previously static.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1a71a1ede8f743209237b2736893f3aebe13bb0
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Delivery mode should be APIC_DM_FIXED when using physical mode.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c0aa0f9a16557a3dd9b7b0d39bc67ddf1fa0b32
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] Replace extern inline with static inline in asm-x86_64/*
    
    They should be identical in the kernel now, but this
    makes it consistent with other code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47e5701e37cf10948c3f2952870d9f18b6e84965
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove freeing of SMP trampoline pages
    
    Nick points out it never worked because PageReserved was
    set and it might cause problems later on. Also HOTPLUG_CPU
    is much more common now so let's care not too much
    about the !hotplug case.
    
    Cc: nickpiggin@yahoo.com.au
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 016102dea838e8526a4bc57821309f0cd9db81b7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix typo CONFIG_CPU_HOTPLUG -> CONFIG_HOTPLUG_CPU in genapic.c
    
    Noted by Ashok Raj
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24dead8ac9c8fa78b9bfb45b06080a7018fd2ed3
Author: Alexander Nyberg <alexn@telia.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] Remove unnecessary BUG_ON in irq.c
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f297e4e5e4245a5c3fb36e7f754cde96cdb4bc43
Author: Nakul Saraiya <saraiya@fabric7.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] Increase nodemap hash.
    
    Needed for some newer Opteron systems with E stepping and memory
    relocation enabled. The node addresses are different in lower
    bits now so the nodemap hash function needs to be enlarged.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb048927ad93420b6dd2eddcdde71ea7b6ff95e4
Author: Jim Paradis <jparadis@redhat.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix off by one in pfn_valid
    
    When I gave proposed the fix to pfn_valid() for RHEL4, Stephen Tweedie's
    sharp eyes caught this:
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e44f12ba64a58f25f8e6f35aa4c175f613001be
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] i386: add memory clobbers to syscall macros
    
    As noted by matz@suse.de
    
    The problem is, that on i386 the syscallN
    macro is defined like so:
    
      long __res; \
      __asm__ volatile ("int $0x80" \
            : "=a" (__res) \
            : "0" (__NR_##name),"b" ((long)(arg1)),"c" ((long)(arg2)), \
              "d" ((long)(arg3)),"S" ((long)(arg4)),"D" ((long)(arg5))); \
    
    If one of the arguments (in the _llseek syscall it's the arg4) is a pointer
    which the syscall is expected to write to (to the memory pointed to by this
    ptr), then this side-effect is not captured in the asm.
    
    If anyone uses this macro to define it's own version of the syscall
    (sometimes necessary when not using glibc) and it's inlined, then GCC
    doesn't know that this asm write to "*dest", when called like so for instance:
    
      out = 1;
      llseek (fd, bla, blubb, &out, trara)
      use (out);
    
    Here nobody tells GCC that "out" actually is written to (just a pointer to it
    is passed to the asm).  Hence GCC might (and in the above bug did)
    copy-propagate "1" into the second use of "out".
    
    The easiest solution would be to add a "memory" clobber to the definition
    of this syscall macro.  As this is a syscall, it shouldn't inhibit too many
    optimizations.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e92343cc8e9ca4bc0db4b007dd37d33a207ef637
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix show_mem a little bit
    
    - Add KERN_INFO to printks (from i386)
    - Use longs instead of ints to accumulate pages.
    - Fix broken indenting.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 083044e63b4d10ebf9afb231bc0d34aec72169b4
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove disable_tsc code in context switch
    
    It only offers extremly dubious security advantages and
    is not worth the overhead in this critical path.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe5d5f073eb133b65a8814b48af1722a1ca5aa25
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Print version at end of kernel build
    
    (from i386)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48496e349554f3704fd1cdf16f389e0615956909
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix (harmless) typo in head.S early level2 page table
    
    The global bit  was not set in the first 2MB page, instead
    it had a bit in the free AVL section which is useless.
    Fixed thus.
    
    Noticed by Eric Biederman
    
    Cc:  Eric W. Biederman <ebiederm@xmission.com>
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8f68e9ffaf5e7c9c463ecd2598cc33f8e6df75e
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix idle=poll
    
    x86_64 idle=poll might be a little less responsive than it should: unlike
    mwait_idle, and unlike i386, its poll_idle left TIF_POLLING_NRFLAG set.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e99b861a3e9ec93a48b985519e09b2515c201e8d
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Only allocate per cpu data for possible CPUs, not compiled in CPUs.
    
    Saves some memory except for hotplug situations.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b4a08150e0ce2f6eb5d0987fdfe3524ec799313
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Increase TLB flush array size
    
    The generic TLB flush functions kept upto 506 pages per
    CPU to avoid too frequent IPIs.
    
    This value was done for the L1 cache of older x86 CPUs,
    but with modern CPUs it does not make much sense anymore.
    TLB flushing is slow enough that using the L2 cache is fine.
    
    This patch increases the flush array on x86-64 to cache
    5350 pages. That is roughly 20MB with 4K pages. It speeds
    up large munmaps in multithreaded processes on SMP considerably.
    
    The cost is roughly 42k of memory per CPU, which is reasonable.
    
    I only increased it on x86-64 for now, but it would probably
    make sense to increase it everywhere. Embedded architectures
    with SMP may keep it smaller to save some memory per CPU.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 165aeb82848c81ee1774f8defc74df4341e9184b
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't include config.h in asm/timex.h
    
    asm-x86-64/timex.h does not reference CONFIG constants.
    Do not need to include config.h.
    
    Signed-off-by: Grant Grundler <iod00d@hp.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f74478b5fd7263e9311cdb320923d599c73a792
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Some cleanup and optimization to the processor data area.
    
    - Remove unused irqrsp field
    - Remove pda->me
    - Optimize set_softirq_pending slightly
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 459192c92cde49d1a2f721c90adf45d774c2dcf5
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Add simnow console
    
    This adds console and earlyprintk support for a host file
    on AMD's SimNow simulator.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5bc8b6baf86538f3d0407cf0880f86aec828a13
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Make remote TLB flush more scalable
    
    Instead of using a global spinlock to protect the state
    of the remote TLB flush use a lock and state for each sending CPU.
    
    To tell the receiver where to look for the state use 8 different
    call vectors.  Each CPU uses a specific vector to trigger flushes on other
    CPUs. Depending on the received vector the target CPUs look into
    the right per cpu variable for the flush data.
    
    When the system has more than 8 CPUs they are hashed to the 8 available
    vectors. The limited global vector space forces us to this right now.
    In future when interrupts are split into per CPU domains this could be
    fixed, at the cost of needing more IPIs in flat mode.
    
    Also some minor cleanup in the smp flush code and remove some outdated
    debug code.
    
    Requires patch to move cpu_possible_map setup earlier.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83b942bd3437d84d6ddf582477120b6b86369052
Author: Tsuneo Yoshioka <Tsuneo.Yoshioka@f-secure.com>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix 32bit sendfile
    
    If we use 64bit kernel on ia64/x86_64/s390 architecture, and we run
    32bit binary on 32bit compatibility mode, sendfile system call seems be
    not set offset argument.
    
    This is because sendfile's return value is not zero but the code regards
    the result by return value is zero or not.
    
    This problem will be affect to ia64/x86_64/s390 and not affect to other
    architecture does not affect other architecture (mips/parisc/ppc64/sparc64).
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9acf23c42b13d682abbd5db1d293c7a77ae54b61
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Include build number in oops output
    
    Include build number in oops output
    
    Helps me to match oopses to correct kernel.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69e1a33f62eff9b228a8cc2c3e4429dbee8966c9
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Use ACPI PXM to parse PCI<->node assignments
    
    Since this is shared code I had to implement it for i386 too
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 413588c7cb8113c03d0044f1d41b832ad7201c29
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove code to resume machine check state of other CPUs.
    
    The resume code uses CPU hotplug now so at resume time
    we only ever see one CPU.
    
    Pointed out by Yu Luming.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9aac10dddd927f0b9cfcca19a272ded87015574
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove redundant max_mapnr and replace with end_pfn
    
    The FLATMEM people added it, but there doesn't seem a good reason
    because end_pfn is identical.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a43e4bf7489074c667f24b9670ecd88f6eb0a07
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Use e820_find_hole to compute reserved pages
    
    Avoids a very dumb loop
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c7a3897f678cfafebc8ec0a5e61a814f2f24e42
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix harmless off by one in e820 code
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 117090b5e815d0075bff85c2be954d68a11ac4ed
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Micro optimization to dma_alloc_coherent node lookup
    
    Use pcibus_to_node directly
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d3fbbf9fe8d5cd5f94256781cc69a4ac289a767
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't trust boot_cpu_id in the mptable.
    
    It could be wrong for kexec or other cases. Read it from
    the CPU instead.
    
    Signed-off-by: Murali <muralim@in.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c566ef5f3eb5d9daf61d0fa31d82c211f601ba0
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Add command line option to set machine check tolerance level
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 673242c10d535bfe238d9d8e82ac93432d35b88e
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Make lockless machine check record passing a bit more robust.
    
    One machine is constantly throwing NMI watchdog timeouts in mce_log
    
    This was one attempt to fix it.
    
    (AK: this doesn't actually fix the bug I'm seeing unfortunately, probably
    drop.  I don't like it that the reader can spin forever now waiting
    for a writer)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a54e678b8f476d6f28e6aa4409f6b88ce476af1b
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove redundant swiotlb=force handling
    
    It's already handled in the main swiotlb code.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63f02fd7ceb2fa4065d8a0c9943e4af2876b6c91
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't allocate aperture when swiotlb is enabled and no AGP found
    
    No-one needs it then
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d3d0f7704ed0bc7eaca0501eeae3e5da1ea6c87
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Reverse order of bootmem lists
    
    This leads to bootmem allocating first from node 0 instead
    of from the last node.  This avoids swiotlb allocating on the last node, which
    doesn't really work on a machine with >4GB.
    
    Note: there is a better patch around from someone else that gets
    rid of the pgdat list completely.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6142891a0c0209c91aa4a98f725de0d6e2ed4918
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Avoid unnecessary double bouncing for swiotlb
    
    PCI_DMA_BUS_IS_PHYS has to be zero even when the GART IOMMU is disabled
    and the swiotlb is used. Otherwise the block layer does unnecessary
    double bouncing.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 357e11d4cbbbb959a88a9bdbbf33a10f160b0823
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't assume APIC for boot processor has an APIC ID of zero
    
    Originally from Stuart Hayes.
    
    When setting up the APIC for the Uniprocessor kernel don't
    assume the CPU has an APIC ID of zero.
    
    This fixes boot with the UP kernel on Dell PowerEdge 6800/6850 4way systems.
    
    Cc: Stuart.Hayes@dell.com
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df0cc26b1b7f88f46307eea50a7469f0b58132d9
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Use SRAT data on Intel systems too.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f098c2605bdf50176b26f4fa724e9b9c99e5242
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Support dualcore and 8 socket systems in k8 fallback node parsing
    
    In particular on systems where the local APIC space and node space
    is very different from the Linux CPU number space.
    
    Previously the older NUMA setup code directly parsing the K8
    northbridge registers had some issues on 8 socket or dual core
    systems. This patch fixes them.
    
    This is mainly done by fixing some confusion between Linux
    CPU numbers and local APIC ids. We now pass the local APIC IDs
    to later code, which avoids mismatches.
    
    Also add some heuristics to detect cases where the Hypertransport
    nodeids and the local APIC IDs don't match, but are shifted
    by a constant offset.
    
    This is still all quite hackish, hopefully BIOS writers fill
    in correct SRATs instead.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b91691164be174b780f5c1bb145a7ab5d33fce2f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't cache align PDA on UP builds
    
    Suggested by someone I forgot who sorry.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8675b1a454016c7c50215552ea5c5c4a2413fda0
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Fix the apic version that gets printed during boot
    
    Signed-off-by: Suresh Sidda <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b07e984fc7a51b1a7c75e1bfdcf59d1ad065353
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Don't assign CPU numbers in SRAT parsing
    
    Do that later when the CPU boots. SRAT just stores the APIC<->Node
    mapping node. This fixes problems on systems where the order
    of SRAT entries does not match the MADT.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1f4e83fd9b5ce77d05825586d0426a54b8f3a68
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: White space and comment fixes for smp_call_function_single
    
    No functional changes
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4452218c4b7a579056d439b73a668b71654c137
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Enable interrupts during delay calibration on APs
    
    We used to disable them to work around a bug, but that
    is not needed anymore. Keeping them enabled avoids the NMI
    watchdog triggering in some cases.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70556463487f33bc6728a7596b97f86b811aad22
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Use largest APIC number, not number of CPUs to decide on physflat mode
    
    Handles case where BIOS gives CPUs very large APIC numbers correctly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a40b7c2abdedcf53c9a6ee790991acfcef5b6c7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:24 2005 +0200

    [PATCH] x86-64: Remove code for outdated APICs
    
    No x86-64 chipset has these APICs.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61c11341ed798db9b99b30c1711c1cf458457806
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:23 2005 +0200

    [PATCH] x86-64: Remove esr disable hack in APIC code
    
    This was just needed for the Numasaurus, which fortunately
    doesn't support x86-64 CPUs.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eddfb4ed290383abf912630fa8dac5acf65c9e55
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:23 2005 +0200

    [PATCH] x86-64: Remove obsolete APIC "write around" bug workaround
    
    No x86-64 chipset has this bug
    
    Generated code doesn't change because it was always disabled.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1507eb2ee845b123ace751bec9c992a1937872c
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:23 2005 +0200

    [PATCH] x86-64: Remove apic_write_around from smpboot.c
    
    We don't do workarounds for ancient hardware bugs.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit affc9b844905f749064752faebb1af699f2d13bf
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:23 2005 +0200

    [PATCH] x86-64: Update defconfig
    
    Allow diskless booting.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f343bb4cd7cc76d49d72415c8b867b1073d3c6db
Author: Andi Kleen <ak@suse.de>
Date:   Mon Sep 12 18:49:23 2005 +0200

    [PATCH] x86{-64}: Remove old hack that disabled mmconfig support on AMD systems.
    
    Now that Greg implemented MCFG/_SEG support this shouldn't be needed
    anymore
    
    Cc: gregkh@suse.de
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3426599af9524104be6938bcb1fcaab314781c7
Author: Paul Jackson <pj@sgi.com>
Date:   Mon Sep 12 04:30:30 2005 -0700

    [PATCH] cpuset semaphore depth check optimize
    
    Optimize the deadlock avoidance check on the global cpuset
    semaphore cpuset_sem.  Instead of adding a depth counter to the
    task struct of each task, rather just two words are enough, one
    to store the depth and the other the current cpuset_sem holder.
    
    Thanks to Nikita Danilov for the idea.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    
    [ We may want to change this further, but at least it's now
      a totally internal decision to the cpusets code ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9791184e7cc817ea5810405b49ead0b585e7e2d
Merge: c324229... f24ec7f...
Author: Anton Altaparmakov <aia21@hera.kernel.org>
Date:   Mon Sep 12 09:05:41 2005 -0700

    Merge branch 'master' of /pub/scm/linux/kernel/git/torvalds/linux-2.6

commit f24ec7f6c6278c0ea4c00efe96d50b1e66796c44
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Sep 12 17:12:43 2005 +0400

    [PATCH] crc16: remove w1 specific comments.
    
    Remove w1 comments from crc16.h and move specific constants into
    w1_ds2433.c where they are used.
    
    Replace %d with %zd.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26cda988ba1e3e843a0680fe98661a22fa430a60
Merge: 1df5c10... 2d909d0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 08:33:53 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit c3242291382c4ee2a30f4ef62270cd1c8a5b923f
Merge: 1df5c10... 89ecf38...
Author: Anton Altaparmakov <aia21@hera.kernel.org>
Date:   Mon Sep 12 08:25:52 2005 -0700

    Merge branch 'master' of imp.csi.cam.ac.uk:/home/src/ntfs-2.6.git/

commit 1df5c10a5b40d1ad747e3de3caf28764153c5c8e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 12 07:59:21 2005 -0700

    Mark ia64-specific MCA/INIT scheduler hooks as dangerous
    
    ..and only enable them for ia64. The functions are only valid
    when the whole system has been totally stopped and no scheduler
    activity is ongoing on any CPU, and interrupts are globally
    disabled.
    
    In other words, they aren't useful for anything else. So make
    sure that nobody can use them by mistake.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3ff8ec31c1249d268cd11390649768a12bec1b9
Author: Roland McGrath <roland@redhat.com>
Date:   Sun Sep 11 01:44:45 2005 -0700

    [PATCH] i386: Don't miss pending signals returning to user mode after signal processing
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Acked-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89ecf38c7aee6eb3f6aaf40a6d196ddff4b6d4a8
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 12 15:43:03 2005 +0100

    NTFS: Mask out __GFP_HIGHMEM when doing kmalloc() in __ntfs_malloc() as it
          otherwise causes a BUG().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 676e1a2c1e7499eee8e7a81e577b4b6ba71ffb25
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 12 14:51:00 2005 +0200

    [ALSA] [PATCH] Add missing sound PCI IDs to pci_ids.h
    
    Added missing PCI IDs for sound drivers to pci_ids.h.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5d46770f5f8bb0eff0a82596860958be13e7baf1
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Mon Sep 12 14:33:47 2005 +0100

    NTFS: Change the mount options {u,f,d}mask to always parse the number as
          an octal number to conform to how chmod(1) works, too.  Thanks to
          Giuseppe Bilotta and Horst von Brand for pointing out the errors of
          my ways.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit fecf92ba050a426b3bd302b6ba1c1525d576ccb9
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Mon Sep 12 12:09:25 2005 +0100

    [MMC] Remove trailing whitespace in wbsd
    
    Clean out trailing whitespace caused by not-so-great editor since it
    generates a lot of problems with editors configured to automatically
    strip whitespace.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ff4a964ee3f47c344efd9218dca0f14b9eff8877
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Sep 12 11:14:05 2005 +0200

    [ALSA] version 1.0.10rc1

commit 3bcd4649bca99ee9242f20d7da35e3f8741c6549
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 12 08:20:54 2005 +0200

    [ALSA] set owner field in struct pci_driver
    
    AD1889 driver,ALS4000 driver,ATIIXP driver,ATIIXP-modem driver
    AZT3328 driver,BT87x driver,CMIPCI driver,CS4281 driver
    ENS1370/1+ driver,ES1938 driver,ES1968 driver,FM801 driver
    Intel8x0 driver,Intel8x0-modem driver,Maestro3 driver,RME32 driver
    RME96 driver,SonicVibes driver,VIA82xx driver,VIA82xx-modem driver
    ALI5451 driver,au88x0 driver,CS46xx driver,EMU10K1/EMU10K2 driver
    HDA Intel driver,ICE1712 driver,ICE1724 driver,KORG1212 driver
    MIXART driver,NM256 driver,RME HDSP driver,RME9652 driver
    Trident driver,Digigram VX222 driver,YMFPCI driver
    Set the module owner field in each driver's struct pci_driver to get
    the driver symlink in the sysfs device directory.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 4338829e09db2d320a00b4e0ed0bcc49859d73cc
Author: Martin Habets <errandir_news@mph.eclipse.co.uk>
Date:   Sat Sep 10 15:39:00 2005 +0200

    [ALSA] Several fixes for the Sun DBRI driver
    
    SPARC DBRI driver
    This patch contains the following fixes to the Alsa DBRI driver:
    
    - Remove 2.6.13 build warning on the prom_getproperty() call.
    
    - Rework command synchronization: send a sequence number with D_WAIT,
      and check it in the completion interrupt.
      Move synchronization delays from _cmdsend() to _cmdlock() allowing the
      CPU to do other usefull things while the DBRI is processing the
      commands.
    
    - Fix first argument of printk() calls.
    
    - Enable burst transfers for DBRI. Original 2.4 patch from Krzysztof
      Helt
    
    - Make dbri_debug module parameter writable from sysfs. Remove obsolete
      write access to the /proc debug file.
    
    - Replace udelay() with msleep_interruptible() where possible.
    
    - Update documentation comments.
    
    Signed-off-by: Martin Habets <errandir_news@mph.eclipse.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit afe0f1f6688f4c4c9235873121548e76dedd8ef8
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Sep 10 10:24:10 2005 +0200

    [ALSA] snd-emu10k1: ALSA bug#1297: Fix a error recognising the SB Live Platinum.
    
    EMU10K1/EMU10K2 driver
    The card does not have an AC97 chip.
    .subsystem = 0x80611102
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 1b44c28dc180f4d0ea109e1fe4339b3403c2d530
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 15:05:33 2005 +0200

    [ALSA] Another fix for DocBook
    
    PCM Midlevel
    Revive snd_pcm_format_cpu_endian() document.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 561b220a4dece18d67177413e6fa21b49aa4acce
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 14:22:34 2005 +0200

    [ALSA] Replace with kzalloc() - others
    
    Documentation,SA11xx UDA1341 driver,Generic drivers,MPU401 UART,OPL3
    OPL4,Digigram VX core,I2C cs8427,I2C lib core,I2C tea6330t,L3 drivers
    AK4114 receiver,AK4117 receiver,PDAudioCF driver,PPC PMAC driver
    SPARC AMD7930 driver,SPARC cs4231 driver,Synth,Common EMU synth
    USB generic driver,USB USX2Y
    Replace kcalloc(1,..) with kzalloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e560d8d8368ad8b6161839984b253de622863265
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 14:21:46 2005 +0200

    [ALSA] Replace with kzalloc() - pci stuff
    
    AD1889 driver,ATIIXP driver,ATIIXP-modem driver,AZT3328 driver
    BT87x driver,CMIPCI driver,CS4281 driver,ENS1370/1+ driver
    ES1938 driver,ES1968 driver,FM801 driver,Intel8x0 driver
    Intel8x0-modem driver,Maestro3 driver,SonicVibes driver,VIA82xx driver
    VIA82xx-modem driver,AC97 Codec,AK4531 codec,au88x0 driver
    CA0106 driver,CS46xx driver,EMU10K1/EMU10K2 driver,HDA Codec driver
    HDA generic driver,HDA Intel driver,ICE1712 driver,ICE1724 driver
    KORG1212 driver,MIXART driver,NM256 driver,Trident driver,YMFPCI driver
    Replace kcalloc(1,..) with kzalloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9e76a76efc43d604a20bf0c5564caaf028a24d2e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 14:21:17 2005 +0200

    [ALSA] Replace with kzalloc() - isa stuff
    
    ES18xx driver,OPL3SA2 driver,AD1816A driver,AD1848 driver,CS4231 driver
    ES1688 driver,GUS Library,Opti9xx drivers,EMU8000 driver
    SB16/AWE driver,SB drivers
    Replace kcalloc(1,..) with kzalloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ecca82b4b447f8df73c807a018dac3e2863912d9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 14:20:49 2005 +0200

    [ALSA] Replace with kzalloc() - seq stuff
    
    ALSA sequencer,Instrument layer,ALSA<-OSS sequencer
    Replace kcalloc(1,..) with kzalloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ca2c0966562cfbf9273167a5b60e8fddc24078d6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 14:20:23 2005 +0200

    [ALSA] Replace with kzalloc() - core stuff
    
    Control Midlevel,ALSA Core,HWDEP Midlevel,PCM Midlevel,RawMidi Midlevel
    Timer Midlevel,ALSA<-OSS emulation
    Replace kcalloc(1,..) with kzalloc().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8648811f1db85eeacb821591ef11a2c229c29aa0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 9 13:56:32 2005 +0200

    [ALSA] hda-codec - Added ASUS A6
    
    HDA Codec driver
    Added ASUS A6 support for ALC880 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a06147d22865e9becb2918baec59d618fb09d896
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 8 19:54:17 2005 +0200

    [ALSA] intel8x0 - Add buggy_semaphore option
    
    Documentation,Intel8x0 driver
    Added buggy_semaphore module option to snd-intel8x0 driver
    for a workaround for hardwards with buggy codec semaphores.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 10f69f9e42833b82288882d10901dc86adc3e473
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 8 13:48:34 2005 +0200

    [ALSA] pcm-oss - Add bugg-yptr option
    
    Documentation,ALSA<-OSS emulation
    Added 'buggy-ptr' proc option to switch the behavior of GETOPTR ioctl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f328385309f310626751c54f694641459e2d4582
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Sep 7 17:08:40 2005 +0200

    [ALSA] powermac - Add AUTO_DRC config
    
    PPC,PPC Tumbler driver
    Added AUTO_DRC kernel config to enable/disable the auto-DRC-toggle
    feature on tumbler/snapper.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a28f1cda0d01f6f98e3bef6a07c483a90f6a35d6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Sep 7 15:26:56 2005 +0200

    [ALSA] hda-intel - Fix modem PCM creation
    
    HDA Intel driver
    Fix a bug of modem PCM creation (due to a typo).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0dd119f703d50759f0835f342e385f82cbf8b89e
Author: Jiri Slaby <xslaby@fi.muni.cz>
Date:   Wed Sep 7 14:28:33 2005 +0200

    [ALSA] pci_find_device remove
    
    Memalloc module,CS46xx driver,VIA82xx driver,ALI5451 driver
    au88x0 driver
    Replace pci_find_device() with pci_get_device() and pci_dev_put().
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8cdfd2519c6c9a1e6057dc5970b2542b35895738
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Sep 7 14:08:11 2005 +0200

    [ALSA] Remove superfluous PCI ID definitions
    
    CS46xx driver,EMU10K1/EMU10K2 driver,PCM Midlevel,Trident driver
    YMFPCI driver,BT87x driver,CMIPCI driver,CS4281 driver
    ENS1370/1+ driver,ES1938 driver,ES1968 driver,Intel8x0 driver
    Intel8x0-modem driver,Maestro3 driver,RME32 driver,RME96 driver
    SonicVibes driver,VIA82xx driver,ALI5451 driver,ICE1712 driver
    ICE1724 driver,NM256 driver,RME HDSP driver,RME9652 driver
    Remove superfluous PCI ID definitions.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit df8db936e5e829ab3ff66346dbdf4033fa3ce588
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Sep 7 13:38:19 2005 +0200

    [ALSA] Fix DocBook warnings
    
    PCM Midlevel,RawMidi Midlevel
    Fix DocBook warnings.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ec9e1c5c9c7350cc8214f8b9c529f9678036d9a8
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Sep 7 13:29:22 2005 +0200

    [ALSA] hda-codec - Assign audio PCMS first
    
    HDA Codec driver,HDA Intel driver,HDA generic driver
    Assign audio PCMs first before modem PCMs.
    The modem stream is assigned up to device #6, to be consistent over
    different models.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 821690cdc82e4090ef6f91947f76a231fad5cbb1
Author: Vincent Pelletier <subdino2004@yahoo.fr>
Date:   Wed Sep 7 13:28:14 2005 +0200

    [ALSA] Correct detection of iBook G4 1420Mhz soundcard
    
    PPC PMAC driver
    Here is a patch to correct detection of the soundcard on my iBook model
    (bought really recently).
    Without that fix, there were only andui in the headphone, and the mixer
    was totaly non functional.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a4f508b27c6b32d15c923b119b3e90a2d6a9500f
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue Sep 6 08:00:19 2005 +0200

    [ALSA] rtctimer: add option to make RTC timer the default sequencer timer
    
    ALSA Core,ALSA sequencer
    Add an option to make the RTC timer the default sequencer timer.  This
    becomes necessary for precise MIDI timing when the system timer runs at
    less than 1000 Hz.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 43bcd973d6d05d16b876e09dcc49a09d3e48e88d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 17:19:20 2005 +0200

    [ALSA] Add snd_card_set_generic_dev() call to ISA drivers
    
    ISA,CMI8330 driver,ES18xx driver,OPL3SA2 driver,Sound Galaxy driver
    Sound Scape driver,AD1848 driver,CS4231 driver,CS4236+ driver
    ES1688 driver,GUS Classic driver,GUS Extreme driver,GUS MAX driver
    AMD InterWave driver,Opti9xx drivers,SB16/AWE driver,SB8 driver
    Wavefront drivers
    - Added snd_card_set_generic_dev() call.
    - Added SND_GENERIC_DRIVER to Kconfig.
    - Clean up the error path in probe if necessary.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 16dab54b8cbac39bd3f639db5d7d0fd8300a6cb0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 17:17:58 2005 +0200

    [ALSA] Add snd_card_set_generic_dev() call
    
    ARM,SA11xx UDA1341 driver,Generic drivers,MPU401 UART,MIPS
    MIPS AU1x00 driver,PPC,PPC PowerMac driver,SPARC,SPARC AMD7930 driver
    SPARC cs4231 driver,SPARC DBRI driver
    - Added snd_card_set_generic_dev() call.
    - Added SND_GENERIC_DRIVER to Kconfig.
    - Clean up the error path in probe if necessary.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ecbcfe36fa882e9f8f2be63ac0c42978336bf997
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 17:15:37 2005 +0200

    [ALSA] Introduce snd_card_set_generic_dev()
    
    ALSA Core
    A new function snd_card_set_generic_dev() is introduced to add the
    'generic device' support for devices without proper bus on sysfs.
    It's a last resort, and should be removed in future when they have
    a proper bus, instead.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6243008b82222d6244b055beeeba94b14f23b7e2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 17:12:29 2005 +0200

    [ALSA] Update/fix ALSA document
    
    Documentation
    Update/fix ALSA document.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0be3b5d3fb94c36c517655d18a936681d7108667
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 17:11:40 2005 +0200

    [ALSA] hda-intel - Check validity of DMA position
    
    HDA Intel driver
    Check the validity of the current DMA position when position_fix=0 (auto)
    is set.  If the DMA position overcomes the threshold, the driver changes
    the fix behavior automatically to use POSBUF.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a76af199dc025e8f5cf6b9542efadc3de5163a7a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Sep 5 16:56:40 2005 +0200

    [ALSA] Add snd_card_set_dev()
    
    ARM AACI PL041 driver,PARISC Harmony driver
    Added snd_card_set_dev() calls to register the device pointer for the card.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0ca21611b668eee9ac07bb85825ce30002976550
Author: Davide Libenzi <davidel@xmailserver.org>
Date:   Mon Sep 5 11:56:47 2005 +0200

    [ALSA] hda-codec - Bring the Vaio's RA826G HDA (82801) to life ...
    
    HDA Codec driver
    Add the subsystem PCI devid to the list (on top of 2.6.13).
    
    Signed-off-by: Davide Libenzi <davidel@xmailserver.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit db67319ac29d2f35ece30bce6a9b611afd6b600f
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 5 10:36:27 2005 +0200

    [ALSA] opti93x: optimize a register access
    
    Opti9xx drivers
    When clearing some bits in a register, don't bother with the bits that
    won't be changed anyway.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 4d23359b7ec8b03da2154df935af7d625075f6cf
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 5 10:35:20 2005 +0200

    [ALSA] sparse address space annotations
    
    ALSA Core,RawMidi Midlevel,ALSA<-OSS emulation,ALSA sequencer
    RME32 driver,RME96 driver,EMU10K1/EMU10K2 driver,NM256 driver
    Add sparse annotations where we do strange this with __iomem/__user
    pointers.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 49045d3d4dc7c43310b1fca693e29fcdbe68faba
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 5 10:31:05 2005 +0200

    [ALSA] usb-audio: add SNDRV_PCM_INFO_BATCH flag
    
    USB generic driver
    Add the SNDRV_PCM_INFO_BATCH flag to the PCM hardware information to
    indicate that the driver uses double buffering.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 025cd2f6b1624f536d4df564add3d13ea5022f53
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Sep 3 12:05:47 2005 +0200

    [ALSA] snd-ca0106, snd-emu10k1: Add symlink in the sys tree.
    
    CA0106 driver,EMU10K1/EMU10K2 driver
    A thread appeared on the LKML. This patch implements the fix.
    
    Question:
    in sysfs, /sys/bus/*/drivers lists the driver names, with their exported .name (eg. '.name = 'EMU10K1_Audigy'' in the module code, from now on 'driver name'). In /sys/modules, the kernel modules are listed with their module name, eg. snd_emu10k1. However, it seems to me that in sysfs, there is no way in particular to tell, which module has which .name. That is, that snd_emu10k1 is EMU10K1_Audigy and vice versa.
    
    I wonder whether it wouldn't be possible to add a symlink to the particular module from the driver, and/or from the module to the driver, so the list of devices handled by the module and the module name would be accessible. This way, I would know which driver name corresponds to which module name and vice versa.
    
    Answer:
    For PCI drivers, just add the line:
    	.owner = THIS_MODULE,
    
    to their struct pci_driver definition and you will get the symlink
    created for you.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit a5022b0dc6e45254437b75289e773876bb43e262
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Sep 2 14:03:05 2005 +0200

    [ALSA] Fix ALC658D support
    
    AC97 Codec
    Fix the internal speaker problem (e.g. Targa Traveller 826)
    with ALC658D codec.  The info is taken from Cyberlink/realtek-modified code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b73c1c122a097500e1c3dd495045432a1c818b92
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Sep 2 08:49:21 2005 +0200

    [ALSA] hdsp: always initialize card name
    
    RME HDSP driver
    When using the kernel firmware loader, initialize the card shortname
    before registering the card with ALSA to prevent it from using a
    default card ID.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 84010e6f04a59e88e4eb784ff33f2da97ac022f4
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Sep 2 07:57:59 2005 +0200

    [ALSA] ad1889: add AD1889 driver docs
    
    Documentation
    move the AD1889 driver docs to the kernel tree, too
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 5d529390dc944e5d17e46cb5ca93519153f9bf07
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 1 13:56:23 2005 +0200

    [ALSA] intel8x0 - Add quirk for IBM NetVisa A30p
    
    Intel8x0 driver
    Added ac97_quirk entry for IBM NetVisa A30p.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 8e3d759d4b5d841c2a665cffe6cd237dab49e3b1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Sep 1 11:56:34 2005 +0200

    [ALSA] atiixp - Fix PM resume
    
    ATIIXP driver
    Fixed PM resume on atiixp driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 12bb5b78e512898034cdd8813f2889743fa6fa3d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Sep 1 08:14:40 2005 +0200

    [ALSA] ad1889: add AD1889 driver
    
    PCI drivers,AD1889 driver
    move the AD1889 driver to the kernel tree
    
    Acked-by: Thibaut Varene <varenet@parisc-linux.org>
    Acked-by: Kyle McMartin <kyle@parisc-linux.org>
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit ee71508e7359c16b43d6232e52cd19ec328e1f7c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 31 17:31:07 2005 +0200

    [ALSA] Fix EAPD for MSI S270
    
    AC97 Codec
    Fix pin47 setting for EAPD control on MSI S270 laptop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9f566cfde14e185bcc3589ba7470788ed193535a
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Tue Aug 30 21:00:46 2005 +0200

    [ALSA] snd-ca0106: Tidy up volume controls
    
    CA0106 driver
    Playback volume controls were appearing in both the playback and capture
    displays of alsamixer. Now those playback controls only appear in the
    playback display.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit c315b7e840a1f336ffefb21d3130f9799af2ecd6
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Mon Sep 12 00:21:19 2005 +0200

    [WATCHDOG] pcwd_pci-include+WDIOC_SETOPTIONS-patch
    
    Clean-up includes
    Check results for start + stop in the WDIOC_SETOPTIONS ioctl call
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 3908bb1867e7455c4ea132b758970c312513c37d
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun Sep 11 23:58:22 2005 +0200

    [WATCHDOG] sbc8360+w83977f_wdt-consolidate_CONFIG_WATCHDOG_NOWAYOUT_handling
    
    Attached patch removes #ifdef CONFIG_WATCHDOG_NOWAYOUT mess and
    replaces it with common define in linux/watchdog.h.
    
    Signed-Off-By: Wim Van Sebroeck <wim@iguana.be>

commit b4cc4aa24ca47b6a2bdb9029020502cff7c6e774
Author: Jose Miguel Goncalves <jose.goncalves@inov.pt>
Date:   Tue Sep 6 17:05:30 2005 -0700

    [WATCHDOG] w83977f-watchdog-driver.patch
    
    In a project for my company I've needed to use the watchdog device in a
    PCM-5335 SBC from AAEON.  The watchdog timer is from a Winbond's SuperIO
    chip, the W83977F.
    
    I've made this driver based on two others already on the kernel tree,
    the w83877f_wdt and the wdt977.
    
    Signed-off-by: Jose Goncalves <jose.goncalves@inov.pt>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 2d909d08db7655a53f3afb31c7627c5c8c87142a
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Sep 12 13:19:51 2005 +1000

    [PATCH] ppc64: Remove unused code
    
    ppc64_attention_msg and ppc64_dump_msg are not used so remove them.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1ed2fd2d3a8d18f184ba2d06e0f03bff773f28ab
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Sep 12 13:17:27 2005 +1000

    [PATCH] ppc64: Fix for missing start-cpu rtas token
    
    If the rtas start-cpu token doesnt exist then presume the cpu is already
    spinning. If it isnt we will catch it later on when the cpu doesnt
    respond.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3238e9c9735cd5ebe30a59df1f8f5af2687344de
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Sep 12 13:14:26 2005 +1000

    [PATCH] ppc64: indent pci code
    
    Fix up some badly indented code.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 26370322d8e3504db61cb8d438a9fca3b87ac0db
Author: Anton Blanchard <anton@samba.org>
Date:   Mon Sep 12 13:12:11 2005 +1000

    [PATCH] ppc64: xics cleanup
    
    A few xics cleanups:
    
    - Make some things static.
    - Be more consistent with error printing - interrupts are unsigned,
      error values are signed.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fd9648dff6f9797ecc509bcd181706a274dc074d
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Sep 10 16:01:11 2005 +1000

    [PATCH] ppc64: Add ptrace data breakpoint support
    
    Add hardware data breakpoint support.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a94d308513bdb2b926b45c11d7ce7fac6d6ca865
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Sep 10 16:01:10 2005 +1000

    [PATCH] ppc64: Add definitions for new PTRACE calls
    
    - Add PTRACE_GET_DEBUGREG/PTRACE_SET_DEBUGREG. The definition is
      as follows:
    
    /*
     * Get or set a debug register. The first 16 are DABR registers and the
     * second 16 are IABR registers.
     */
    #define PTRACE_GET_DEBUGREG    25
    #define PTRACE_SET_DEBUGREG    26
    
      DABR == data breakpoint and IABR = instruction breakpoint in IBM
      speak. We could split out the IABR into 2 more ptrace calls but I
      figured there was no need and 16 DABR registers should be more
      than enough (POWER4/POWER5 have one).
    
    - Add 2 new SIGTRAP si_codes: TRAP_HWBKPT and TRAP_BRANCH. I couldnt
      find any standards on either of these so I copied what ia64 is
      doing. Again this might be better placed in
      include/asm-generic/siginfo.h
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit df09ce4a15bac7b05356b2f00fbb600c5890b1f3
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Sep 10 16:01:09 2005 +1000

    [PATCH] ppc64: Fix up some whitespace issues in ptrace32.c
    
    Fix up some whitespace issues in ptrace32.c
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a0987224dc80b3eb98cc7a135422acbda8538146
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Sep 10 16:01:08 2005 +1000

    [PATCH] ppc64: ptrace cleanups
    
    - Remove the PPC_REG* defines
    - Wrap some more stuff with ifdef __KERNEL__
    - Add missing PT_TRAP, PT_DAR, PT_DSISR defines
    - Add PTRACE_GETEVRREGS/PTRACE_SETEVRREGS, even though we dont use it on
      ppc64 we dont want to allocate them for something else.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 962bca7f389229a30ced441d7b37f55f203006a2
Author: Robert Jennings <rcjenn@austin.ibm.com>
Date:   Sat Sep 10 16:01:07 2005 +1000

    [PATCH] ppc64: Add PTRACE_{GET|SET}VRREGS
    
    The ptrace get and set methods for VMX/Altivec registers present in the
    ppc tree were missing for ppc64.  This patch adds the 32-bit and
    64-bit methods.  Updated with the suggestions from Anton following the lines
    of his code snippet.
    
    Added:
     - flush_altivec_to_thread calls as suggested by Anton
     - piecewise copy of structure to preserve 32-bit vrsave data as per
       Anton
    
    (I consolidated the 32 and 64bit versions with 2 helper macros - Anton)
    
    Signed-off-by: Robert C Jennings <rcjenn@austin.ibm.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4267292b0f368c1633ff3316a53b5f7fbada95f8
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Sep 12 17:17:36 2005 +1000

    ppc64: Set up PCI tree from Open Firmware device tree
    
    This adds code which gives us the option on ppc64 of instantiating the
    PCI tree (the tree of pci_bus and pci_dev structs) from the Open
    Firmware device tree rather than by probing PCI configuration space.
    The OF device tree has a node for each PCI device and bridge in the
    system, with properties that tell us what addresses the firmware has
    configured for them and other details.
    
    There are a couple of reasons why this is needed.  First, on systems
    with a hypervisor, there is a PCI-PCI bridge per slot under the PCI
    host bridges.  These PCI-PCI bridges have special isolation features
    for virtualization.  We can't write to their config space, and we are
    not supposed to be reading their config space either.  The firmware
    tells us about the address ranges that they pass in the OF device
    tree.
    
    Secondly, on powermacs, the interrupt controller is in a PCI device
    that may be behind a PCI-PCI bridge.  If we happened to take an
    interrupt just at the point when the device or a bridge on the path to
    it was disabled for probing, we would crash when we try to access the
    interrupt controller.
    
    I have implemented a platform-specific function which is called for
    each PCI bridge (host or PCI-PCI) to say whether the code should look
    in the device tree or use normal PCI probing for the devices under
    that bridge.  On pSeries machines we use the device tree if we're
    running under a hypervisor, otherwise we use normal probing.  On
    powermacs we use normal probing for the AGP bridge, since the device
    for the AGP bridge itself isn't shown in the device tree (at least on
    my G5), and the device tree for everything else.
    
    This has been tested on a dual G5 powermac, a partition on a POWER5
    machine (running under the hypervisor), and a legacy iSeries
    partition.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c93a777103263c2a610a49771c6336f7a53d8ab7
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Sep 12 09:18:12 2005 +0800

    [PATCH] i810fb: Update i810fb documentation
    
    Update i810fb documentation to describe new features and configuration
    changes.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 747a5054c0663a21c440524bdac1bca31be0d20e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Sep 12 09:16:47 2005 +0800

    [PATCH] i810fb: Change option ext_vga to extvga to match documentation
    
    Reported by: Manuel Lauss <mano@roarinelk.homelinux.net>
    
    He was getting random initial video modes depending on the kernel
    configuration.  His option line includes 'extvga'.
    
    The i810fb documentation describes the option 'extvga', however the
    driver accepts 'ext_vga'.  Besides 'extvga' being ignored by i810fb,
    it also confuses the option parser of i810fb and assigns 'extvga' to
    'mode_option'.  This leads to an incorrect video mode at boot time.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 595e8a97f48619fe7952f31259d3e61af9118f49
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Sep 12 09:15:16 2005 +0800

    [PATCH] i810fb: Restore xres and yres option parameters
    
    If i810fb successfully probed for the EDID, it will disregard the
    boot option parameters 'xres' and 'yres'.  Fix this regression.
    
    Excellent testing done by Manuel Lauss <mano@roarinelk.homelinux.net>.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 883f64510718e7df9abbfeec4748d92745d8cc3e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Sep 12 09:13:32 2005 +0800

    [PATCH] i810fb: Fix oops if CONFIG_FB_I810_I2C is set to no
    
    Reported by: Manuel Lauss <mano@roarinelk.homelinux.net>
    
    compiled with CONFIG_FB_I810_I2C = n and CONFIG_FB_I810 = y
    it oopses at boot in file drivers/video/i810/i810_main.c:1884
    
    ...
    Unable to handle kernel NULL pointer dereference at virtual address 00000054
    printing eip:
    c02543c0
    *pde = 00000000
    Oops: 0000 [#1]
    last sysfs file:
    Modules linked in:
    CPU:    0
    EIP:    0060:[<c02543c0>]    Not tainted VLI
    EFLAGS: 00010286   (2.6.13-mm2)
    EIP is at i810fb_find_init_mode+0x53/0x93
    eax: c113ddd4   ebx: c1194000   ecx: c04be2dd   edx: c1194000
    esi: c1194008   edi: c113ddd4   ebp: c1194240   esp: c113ddcc
    ds: 007b   es: 007b   ss: 0068
    
    struct fb_monspecs *specs is initialized to NULL causing the oops.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81d4903d2d17a9f33ece2666185a8b51e6935ae0
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: common RAM based 68360 startup code
    
    Create common start code for all 68360 based platforms that are
    loaded and run directly from RAM (as opposed to running from
    flash/ROM). This replaces the old specific startup code for
    each board.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d871629b83774fc24db6dd2775ceaf46b433b056
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: allow for SDRAM and GPIO differences on 5270/1 and 5274/5 processors
    
    Allow for differences in the SDRAM controller setup and GPIO pin setup
    of the 5270/1 and 5274/5 parts. With separate config options for each
    now this no longer needs to be board specific.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d9d166e1cb2909bd8d3ac0d1ee8db83abb9fd86
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: FEC eth definitions support for the 523x Coldfire processor family
    
    Add support for the FEC ethernet driver of the Freescale 523x processor
    family to the FEC header definitions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ce4d42503949b62f481be989d8f5a25f5af10ff
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: add SPI register definitions for 528x processors
    
    Add QSPI register definitions of ColdFIre 528x processor SPI controller.
    
    Patch originally submitted by Derek Cheung <derek.cheung@sympatico.ca>
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66aa2b4b1cf9a61f1550251c56fc6f0d48287591
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] uclinux: add NULL check, 0 end valid check and some more exports to nommu.c
    
    Move call to get_mm_counter() in update_mem_hiwater() to be
    inside the check for tsk->mm being null. Otherwise you can be
    following a null pointer here. This patch submitted by
    Javier Herrero <jherrero@hvsistemas.es>.
    
    Modify the end check for munmap regions to allow for the
    legacy behavior of 0 being valid. Pretty much all current
    uClinux system libc malloc's pass in 0 as the end point.
    A hard check will fail on these, so change the check so
    that if it is non-zero it must be valid otherwise it fails.
    A passed in value will always succeed (as it used too).
    
    Also export a few more mm system functions - to be consistent
    with the VM code exports.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 966cdb2fdf1776392c98f7d38e0eb9c6dd1c4715
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: dma support for 523x processors
    
    Support the DMA unit of the ColdFire 523x processor family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6515db47e6d8cb502e4b0fd7255652da4ba1393
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] uclinux: remove use of mtd_put_device() in uclinux MTD map driver
    
    We should not call mtd_put_device() in the uclinux MTD map driver.
    Also consistently use phys/virt fields of maps map_info struct,
    instead of mixing it with map_priv_1.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0433b99339a9fdc2effe213491812556e4896fb
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: add ColdFire serial driver support for 523x processor family
    
    Add support for the new Freescale 523x processor family to ColdFire
    serial driver. Also set different default baud rate for MOD5272
    board.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c1ee9387c0ce06d573e2d27de10cbc24179941e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: change addr arg to const in bitops.h/find_next_zero_bit()
    
    Change addr arg to find_next_zero_bit to be a const.
    Cleans up compiler warning.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df28f34bf998795c4d4e08c1604eac0a6d84f502
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: correct prototype args in checksum.h
    
    Bring arg types for csum_partial_copy and csum_paritial_copy_from_user
    prototypes into line with their actual implementation.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42ae766fffdad89267151acddaf936df58ab2267
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: common ROM/flash based 68360 startup code
    
    Create common start code for all 68360 based platforms that are
    loaded and run directly from ROM/flash (as opposed to running from
    RAM). This replaces the old specific startup code for each board.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a6e43e9ee84eb8fb39bfdf8f0b6e466905491d0
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: cache support for 523x/528x processors
    
    Add support for the cache of the ColdFIre 523x family of processors.
    Enable the 528x cache by default now, all final shipping silicon
    has the cache bug fixed.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dd6a2aa27a7a8036fbaf60cbce38a64128d1d4d
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: ColdFire FEC eth driver improvements
    
    A few improvements to the Freescale/ColdFire FEC driver:
    
    . some formatting cleanups
    . add support for the FEC device in the ColdFire 523x processor family
    . add support for MAC address setting on MOD5272 and M5272C3 boards
    . don't re-read the PHY status register many times
    . ack status interrupt before reading status register
    . move printing init message to after full init (so that the
      ethX name is filled out for printing)
    
    Some parts of this patch submitted by Philippe De Muyter <phdm@macqel.be>
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2af6921f6382456ed69163be9d2ee2c339134496
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Sep 12 11:18:10 2005 +1000

    [PATCH] m68knommu: config support for FEC eth of 523x Coldfire processor family
    
    Add configuration support for the FEC ethernet controller in the
    Freescale 523x processor family. Also add and option to configure
    the second FEC controller on some Freescale processors.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7caaeabb17758295edff9703c18a840073c5b8f4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Sep 11 20:14:07 2005 -0700

    [SPARC]: Fix dot-symbol exporting for good.
    
    From: Al Viro <viro@www.linux.org.uk>
    
    Instead of playing all of these hand-coded assembler aliasing games,
    just translate symbol names in the name space ".sym" to "_Sym" at
    module load time.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7672d0b54411371e0b6a831c1cb2f0ce615de6dc
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sun Sep 11 19:15:07 2005 -0700

    [NET]: Add netlink connector.
    
    Kernel connector - new userspace <-> kernel space easy to use
    communication module which implements easy to use bidirectional
    message bus using netlink as it's backend.  Connector was created to
    eliminate complex skb handling both in send and receive message bus
    direction.
    
    Connector driver adds possibility to connect various agents using as
    one of it's backends netlink based network.  One must register
    callback and identifier. When driver receives special netlink message
    with appropriate identifier, appropriate callback will be called.
    
    From the userspace point of view it's quite straightforward:
    
    	socket();
    	bind();
    	send();
    	recv();
    
    But if kernelspace want to use full power of such connections, driver
    writer must create special sockets, must know about struct sk_buff
    handling...  Connector allows any kernelspace agents to use netlink
    based networking for inter-process communication in a significantly
    easier way:
    
    int cn_add_callback(struct cb_id *id, char *name, void (*callback) (void *));
    void cn_netlink_send(struct cn_msg *msg, u32 __groups, int gfp_mask);
    
    struct cb_id
    {
    	__u32			idx;
    	__u32			val;
    };
    
    idx and val are unique identifiers which must be registered in
    connector.h for in-kernel usage.  void (*callback) (void *) - is a
    callback function which will be called when message with above idx.val
    will be received by connector core.
    
    Using connector completely hides low-level transport layer from it's
    users.
    
    Connector uses new netlink ability to have many groups in one socket.
    
    [ Incorporating many cleanups and fixes by myself and
      Andrew Morton -DaveM ]
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 357d596bd552ad157a906289ab13ea6ba7e66e3d
Merge: e6c69bd... d67eb16...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 15:51:40 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit d67eb16f5d444fb6d173bcec889ddb2066c0fa0c
Merge: c85b2a5... a1cddb8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Sun Sep 11 14:34:23 2005 -0700

    Pull sn-features into release branch

commit c85b2a5fe200d744a814d23c258460d4fc98a546
Merge: 49a28cc... 6cf07a8...
Author: Tony Luck <tony.luck@intel.com>
Date:   Sun Sep 11 14:27:15 2005 -0700

    Pull sim-fixes into release branch

commit 49a28cc8fd26f5317c47a9aeb2bdd1c33e21738e
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:24:42 2005 +1000

    [IA64] MCA/INIT: remove obsolete unwind code
    
    Delete the special case unwind code that was only used by the old
    MCA/INIT handler.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 05f335ea04881ecb912b572c83e281a016149169
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:23:42 2005 +1000

    [IA64] MCA/INIT: remove the physical mode path from minstate.h
    
    Remove the physical mode path from minstate.h.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7f613c7d2203ae137d98fc1c38abc30fd7048637
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:22:53 2005 +1000

    [PATCH] MCA/INIT: use per cpu stacks
    
    The bulk of the change.  Use per cpu MCA/INIT stacks.  Change the SAL
    to OS state (sos) to be per process.  Do all the assembler work on the
    MCA/INIT stacks, leaving the original stack alone.  Pass per cpu state
    data to the C handlers for MCA and INIT, which also means changing the
    mca_drv interfaces slightly.  Lots of verification on whether the
    original stack is usable before converting it to a sleeping process.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 289d773ee89ea80dcc364ef97d1be7ad1817387e
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:21:46 2005 +1000

    [IA64] MCA/INIT: avoid reading INIT record during INIT event
    
    Reading the INIT record from SAL during the INIT event has proved to be
    unreliable, and a source of hangs during INIT processing.  The new
    MCA/INIT handlers remove the need to get the INIT record from SAL.
    Change salinfo.c so mca.c can just flag that a new record is available,
    without having to read the record during INIT processing.  This patch
    can be applied without the new MCA/INIT handlers.
    
    Also clean up some usage of NR_CPUS which should have been using
    cpu_online().
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e619ae0b96b6ace6629a6a0c6a5db23861ddaa78
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:20:14 2005 +1000

    [IA64] MCA/INIT: add an extra thread_info flag
    
    Add an extra thread_info flag to indicate the special MCA/INIT stacks.
    Mainly for debuggers.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a2a979821b6ab75a4f143cfaa1c4672cc259ec10
Author: Keith Owens <kaos@sgi.com>
Date:   Sun Sep 11 17:19:06 2005 +1000

    [PATCH] MCA/INIT: scheduler hooks
    
    Scheduler hooks to see/change which process is deemed to be on a cpu.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e6c69bd39199656a8bbd0569edaff60574ff9cac
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Sep 11 22:35:18 2005 +0200

    mips: rename offsets.c to asm-offsets.c
    
    Cannot build MIPS now.
    We need to change offset.c to asm-offsets.c
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5011cdd01bedd66b314e330a638c97984c71b53d
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Sep 11 22:32:57 2005 +0200

    kbuild: fix silentoldconfig with make O=
    
    Al Viro reported that sometimes silentoldconfig failed because
    output directory was missing.
    So create it unconditionally before executing conf
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5bb78269000cf326bfdfa19f79449c02a9158020
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Sep 11 22:30:22 2005 +0200

    kbuild: rename prepare to archprepare to fix dependency chain
    
    When introducing the generic asm-offsets.h support the dependency
    chain for the prepare targets was changed. All build scripts expecting
    include/asm/asm-offsets.h to be made when using the prepare target would broke.
    With the limited number of prepare targets left in arch Makefiles
    the trivial solution was to introduce a new arch specific target: archprepare
    
    The dependency chain looks like this now:
    
    prepare
      |
      +--> prepare0
             |
             +--> archprepare
                    |
    		+--> scripts_basic
                    +--> prepare1
                           |
                           +---> prepare2
                                   |
                                   +--> prepare3
    
    So prepare 3 is processed before prepare2 etc.
    This guaantees that the asm symlink, version.h, scripts_basic
    are all updated before archprepare is processed.
    
    prepare0 which build the asm-offsets.h file will need the
    actions performed by archprepare.
    
    The head target is now named prepare, because users scripts will most
    likely use that target, but prepare-all has been kept for compatibility.
    Updated Documentation/kbuild/makefiles.txt.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3809ad384af43ad883f47ee22a6faa33cedd61bc
Author: Ian E. Morgan <imorgan@webcon.ca>
Date:   Thu Sep 1 22:49:17 2005 +0200

    [WATCHDOG] New SBC8360 watchdog driver (revised)
    
    New SBC8360 watchdog driver patch
    
    From: Ian E. Morgan <imorgan@webcon.ca>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 266aa1c4b3d004123d330eb412cc26a3d10f9029
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Fri Aug 19 23:31:41 2005 +0200

    [WATCHDOG] driver-for-ibm-automatic-server-restart-watchdog-fix2.patch
    
    The device/watchdog has a fixed timeout/heartbeat.
    So we don't support the WDIOC_SETTIMEOUT ioctl call
    and we also may not set the WDIOF_SETTIMEOUT flag.
    
    Cc: Andrey Panin <pazke@donpac.ru>
    Cc: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit cd7b80079b120406de902ee1eaa2dbdaa867dada
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Aug 19 23:21:01 2005 +0200

    [WATCHDOG] driver-for-ibm-automatic-server-restart-watchdog-fix
    
    Add fixed timeout comments
    
    Cc: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit d532134d4cad1da0ad0efc1d5db9f74475df80c6
Author: Andrey Panin <pazke@donpac.ru>
Date:   Fri Aug 19 23:15:11 2005 +0200

    [WATCHDOG] driver-for-ibm-automatic-server-restart-watchdog.patch
    
    This patch adds driver for IBM Automatic Server Restart watchdog hardware
    found in some IBM eServer xSeries machines.  This driver is based on the ugly
    driver provided by IBM.  Driver was tested on IBM eServer 226.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit abda5c8bd20d3bd42718b0438b8a81a73ffa4372
Author: David Hardeman <david@2gen.com>
Date:   Thu Sep 1 22:34:53 2005 +0200

    [WATCHDOG] i6300.h-removal-patch
    
    the attached patch moves the content of drivers/char/watchdog/i6300.h
    into drivers/char/watchdog/i6300.c, since it is the only file using the
    defines there is no real reason to have a separate header.
    
    Also cleaned up the comments a bit and added myself to the copyright
    holders.
    
    Signed-off-by: David Hardeman <david@2gen.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit bb5dc36644975ca5237a415fb63f59f9803d84fa
Author: Jiri Slaby <xslaby@fi.muni.cz>
Date:   Mon Aug 22 09:05:03 2005 +0200

    [WATCHDOG] i6300esb.c-2-bugs-little-cleanup.patch
    
    In i6300esb.c watchdog card driver were 2 bugs (misused pc_match_device and
    pci_dev_put wasn't called in one error case) and one little cleanup was
    done (long line was converted to a shorter one with using built-in macro).
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 811f999160487c586917937e95506cb8528472a3
Author: Naveen Gupta <ngupta@google.com>
Date:   Sun Aug 21 13:02:41 2005 +0200

    [WATCHDOG] i6300esb.c-pci_dev_put+nowayout-patch
    
    One pci_dev_put was misused (there was one case without putting
    the device).
    Changed nowayout according to other drivers.
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Naveen Gupta <ngupta@google.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit ce2f50b4ae71f700c7b4b0bf0ff11c328611dae8
Author: Naveen Gupta <ngupta@google.com>
Date:   Wed Aug 17 09:11:46 2005 +0200

    [WATCHDOG] i6300esb-set_correct_reload_register_bit
    
    This patch writes into bit 8 of the reload register to perform the
    correct 'Reload Sequence' instead of writing into bit 4 of Watchdog for
    Intel 6300ESB chipset.
    
    Signed-off-by: Naveen Gupta <ngupta@google.com>
    Signed-off-by: David Hardeman <david@2gen.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 28562af3d4b21d687dd57c44006aeeed1036c781
Author: Naveen Gupta <ngupta@google.com>
Date:   Wed Aug 17 09:10:10 2005 +0200

    [WATCHDOG] i6300esb.c-WDT_ENABLE-bug
    
    This patch sets the WDT_ENABLE bit of the Lock Register to enable the
    watchdog and WDT_LOCK bit only if nowayout is set. The old code always
    sets the WDT_LOCK bit of watchdog timer for Intel 6300ESB chipset. So, we
    end up locking the watchdog instead of enabling it.
    
    Signed-off-by: Naveen Gupta <ngupta@google.com>
    Signed-off-by: David Hardeman <david@2gen.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit c69af038cad5e6ea86e927a17b70b49af1f7cbfa
Author: Jiri Slaby <xslaby@fi.muni.cz>
Date:   Wed Aug 17 09:09:13 2005 +0200

    [WATCHDOG] removes pci_find_device from i6300esb.c
    
    This patch changes pci_find_device to pci_get_device
    (encapsulated in for_each_pci_dev) in i6300esb watchdog
    card with appropriate adding pci_dev_put.
    
    Generated in 2.6.13-rc5-mm1 kernel version.
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit cc90ef0f9b24d1b017c8cfa22db5195c17b5c968
Author: David Hardeman <david@2gen.com>
Date:   Wed Aug 17 09:07:44 2005 +0200

    [WATCHDOG] i6300esb.patch
    
    I wrote earlier to the list[1] asking for a driver for the watchdog
    included in the 6300ESB chipset.  I got a 2.4 driver via private email
    from Ross Biro which I've changed into what I hope resembles a 2.6
    driver (which was done by looking a lot at the watchdog drivers
    already in the 2.6 tree).
    
    I've attached the result, and I'm hoping to get some feedback on the
    coding as a first step.  I can't actually test it on the hardware
    right now as I won't have physical access until April. So my own tests
    have been limited to "compiles-without-warnings" and
    "can-be-insmodded-in-other-machine-without-oops".
    
    [1] http://marc.theaimsgroup.com/?l=linux-kernel&m=110711079825794&w=2
    [2] http://marc.theaimsgroup.com/?l=linux-kernel&m=110711973917746&w=2
    
    Signed-off-by: David Hardeman <david@2gen.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 9fe66dfd8846706ff11ed7990d06c92644973bd8
Merge: 3298369... 1b205c2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 10:16:07 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband

commit 32983696a48a6c41d99f3eca82ba7510a552d843
Merge: ce1289a... 1d15b10...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 10:14:54 2005 -0700

    Merge branch 'for-linus' from kernel.org:/.../shaggy/jfs-2.6 manually
    
    Clash due to new delete_inode behavior (the filesystem now needs to do
    the truncate_inode_pages() call itself).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce1289adeb67b5480f35cb257cbf6e9881153783
Author: Willy Tarreau <willy@w.ods.org>
Date:   Sun Sep 11 09:04:07 2005 +0200

    [PATCH] Sun HME: enable and map PCI ROM properly
    
    This ports the Sun GEM ROM mapping/enable fixes it sunhme (which used
    the same PCI ROM mapping code).
    
    Without this, I get NULL MAC addresses for all 4 ports (it's a SUN QFE).
    With it, I get the correct addresses (the ones printed on the label on
    the card).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4120b028dd231743935d954732045a87edda2a0a
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 09:26:20 2005 -0700

    Sun GEM ethernet: enable and map PCI ROM properly
    
    This same patch was reported to fix the MAC address detection on sunhme
    (next patch).  Most people seem to be running this on Sparcs or PPC
    machines, where we get the MAC address from their respective firmware
    rather than from the (previously broken) ROM mapping routines.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ec4ff421f032f24416217f23b0c82dc9a5f38f6
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 09:22:50 2005 -0700

    hpt366: write the full 4 bytes of ROM address, not just low 1 byte
    
    This is one heck of a confused driver.  It uses a byte write to a dword
    register to enable a ROM resource that it doesn't even seem to be using.
    
    "Lost and wandering in the desert of confusion"
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa7c3a119a6202b758a669cde9e3829ced64a13f
Merge: 5437775... c4a72cb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 11 09:16:03 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc

commit 5437775e0bc38d633c0a4b7660812f15b6693b69
Author: Pavel Machek <pavel@suse.cz>
Date:   Sun Sep 11 10:28:00 2005 +0100

    [MFD] Cleanups suggested by Dmitri, Vojtech and lists.
    
    These are small ucb1x00-ts cleanups, as suggested by Vojtech, Dmitri
    and the lists.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 48c92022ad264cb8084cee78a499f183b264e45f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 11 10:27:23 2005 +0100

    [MFD] Add code UCB1200/UCB1300 assabet platform support
    
    Add support for Intel assabet specific board support for
    UCB1200/UCB1300 devices.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit acb45439a89c6830349c02405f00a7208db0a66b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 11 10:26:57 2005 +0100

    [MFD] Add code UCB1200/UCB1300 touchscreen support
    
    Add support for Philips UCB1200 and UCB1300 touchscreen
    interfaces found on ARM devices.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 05c45ca9aa4ec57e8e22341633c7a98cc879423d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 11 10:26:31 2005 +0100

    [MFD] Add code UCB1200/UCB1300 device support
    
    Add the core device support code for the Philips UCB1200 and
    UCB1300 devices.  Also includes the following from Pavel:
    
    This fixes u32 vs. pm_message_t confusion and uses cleaner
    try_to_freeze() [fixing compilation as a side-effect on newer
    kernels.]
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 70c83e110541e894fa16aee0f57bcf4207b33e7b
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Sep 11 09:37:19 2005 +0900

    [SCSI] scsi: Error handler description document
    
    This patch adds Documentation/scsi/scs_eh.txt.  I've chosen plain
    text over DocBook as most other scsi docs are in plain text and it's
    more accessible.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f16b5359ceb96780eac4178393b0e8a3c8aa1ea
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Sat Sep 10 16:45:35 2005 -0500

    [SCSI] set error value when failing commands in prep_fn
    
    set DID_NO_CONNECT for the BLKPREP_KILL case and correct a few
    BLKPREP_DEFER cases that weren't checking for the need to plug the
    queue.
    
    Signed-Off-By: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2f79f458d2ab4a77f1b9df8d0041e51ce085d7c0
Merge: 2d21247... e130af5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 10 17:42:47 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 2d21247998c5d183179a7e822c4032974a53ff49
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Sep 11 04:01:09 2005 +0400

    [PATCH] Fix breakage on ppc{,64} by "nvidiafb: Fallback to firmware EDID"
    
    Fix
    
    drivers/video/nvidia/nv_of.c:34: error: conflicting types for 'nvidia_probe_i2c_connector'
    drivers/video/nvidia/nv_proto.h:38: error: previous declaration of 'nvidia_probe_i2c_connector' was here
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e130af5dab2abbf01c5d92ec5ac05912cf3d9aa7
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Sep 10 17:19:09 2005 -0700

    [TCP]: Fix double adjustment of tp->{lost,left}_out in tcp_fragment().
    
    There is an extra left_out/lost_out adjustment in tcp_fragment which
    means that the lost_out accounting is always wrong.  This patch removes
    that chunk of code.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d3fd4c2d48ac4590a922f2a950a2d46386c97a8a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Sep 11 00:24:27 2005 +0100

    [PATCH] uml spinlock breakage
    
    mingo missed that one...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f93220b624de1b7d9fcff8a2cebd6fce7ed4665
Merge: 2b8dfec... d39969d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 10 15:54:41 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dtor/input

commit 2b8dfec8c8fa4ba5bc946a602e94e99861462cad
Merge: 16b0367... 8d36a62...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 10 13:18:15 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/sam/kbuild

commit 146f7262ee0ec7fc6882f06e5fcb13883308073c
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Sep 10 12:44:09 2005 -0500

    [SCSI] Alter the scsi_add_device() API to conform to what users expect
    
    The original API returned either an ERR_PTR() or a refcounted sdev.
    Unfortunately, if it's successful, you need to do a scsi_device_put() on
    the sdev otherwise the refcounting is wrong.
    
    Everyone seems to expect that scsi_add_device() should be callable
    without doing the ref put, so alter the API so it is (we still have
    __scsi_add_device with the original behaviour).
    
    The only actual caller that needs altering is the one in firewire ...
    not because it gets this right, but because it acts on the error if one
    is returned.
    
    Acked-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d36a62364b6b04dc7b0e9fe09f6968f4e5a1f0a
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Sep 10 21:05:36 2005 +0200

    kbuild: fix generic asm-offsets.h support
    
    iThis fixes a bug where the generated asm-offsets.h file was saved in
    the source tree even with make O=.
    Thanks to Stephen Rothwell <sfr@canb.auug.org.au> for the report.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3be10211abcb631ba9631274d6cfe6e5b1e8559c
Author: James Chapman <jchapman@katalix.com>
Date:   Wed Aug 17 09:01:33 2005 +0200

    [WATCHDOG] mv64x60_wdt.patch
    
    Add mv64x60 (Marvell Discovery) watchdog support.
    
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 0a504f259c90fb41d3495d490fc9dbe2530c8749
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Sep 10 21:02:11 2005 +0200

    kbuild: add objectify
    
    Use foo := $(call objectify, $(foo)) to prefix $(foo) with $(obj)/ unless
    $(foo) is an absolute path.
    For now no in-tree users - soon to come.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 16b036786a6bd08cf7a91e0cd58219a6717da2a6
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:58 2005 +0200

    [PATCH] uml: avoid already done dirtying
    
    The PTE returned from handle_mm_fault is already marked as dirty and accessed
    if needed.
    
    Also, since this is not set with set_pte() (which sets NEWPAGE and NEWPROT as
    needed), this wouldn't work anyway.
    
    This version has been updated and fixed, thanks to some feedback from Jeff Dike.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d129f31236c241c07e583e8bc695c382365d02ce
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:57 2005 +0200

    [PATCH] uml: fix fault handler on write
    
    The UML fault handler was recently changed to enforce PROT_NONE protections,
    by requiring VM_READ or VM_EXEC on VMA's.
    
    However, by mistake, things were changed such that VM_READ is always checked,
    also on write faults; so a VMA mapped with only PROT_WRITE is not readable
    (unless it's prefaulted with MAP_POPULATE or with a write), which is different
    from i386.
    
    Discovered while testing remap_file_pages protection support.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d99c4022f60a9aa3a8dc6b7d71f3d0998c696912
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:56 2005 +0200

    [PATCH] uml: inline mk_pte and various friends
    
    Turns out that, for UML, a *lot* of VM-related trivial functions are not
    inlined but rather normal functions.
    
    In other sections of UML code, this is justified by having files which
    interact with the host and cannot therefore include kernel headers, but in
    this case there's no such justification.
    
    I've had to turn many of them to macros because of missing declarations. While
    doing this, I've decided to reuse some already existing macros.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4413a511f22ec771edc0b7c93e5b34e05511acb5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:55 2005 +0200

    [PATCH] x86_64 linker script cleanups for debug sections
    
    Use the new macros for x86_64 too.
    
    Note that the current scripts includes different definitions; more exactly,
    it only contains part of the DWARF2 sections and the .comment one from
    Stabs. Shouldn't be a problem, anyway.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7d0c210337246fa9c25b73cf76dfdbb159f642b
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:54 2005 +0200

    [PATCH] i386 / uml: add dwarf sections to static link script
    
    Inside the linker script, insert the code for DWARF debug info sections. This
    may help GDB'ing a Uml binary. Actually, it seems that ld is able to guess
    what I added correctly, but normal linker scripts include this section so it
    should be correct anyway adding it.
    
    On request by Sam Ravnborg <sam@ravnborg.org>, I've added it to
    asm-generic/vmlinux.lds.s. I've also moved there the stabs debug section,
    used the new macro in i386 linker script and added DWARF debug section to
    that.
    
    In the truth, I've not been able to verify the difference in GDB behaviour
    after this change (I've seen large improvements with another patch). This
    may depend on my binutils version, older one may have worse defaults.
    
    However, this section is present in normal linker script, so add it at
    least for the sake of cleanness.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d5cbf324c0fd4d0e1427bcb50b8bc00069e81b8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 10 19:44:53 2005 +0200

    [PATCH] Uml: more cleaning
    
    We must remove even arch/um/os-Linux/util/mk_user_constants, which we don't do.
    Also, Kconfig_arch must be listed only once, between CLEAN_FILES.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 180536f8274b76d69a589ab9af4b73d3b780e62f
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Sep 10 20:53:57 2005 +0200

    [WATCHDOG] Kconfig+Makefile-clean2
    
    Clean the Kconfig+Makefile according to a sorted list
    of the drivers of each architecture (and sub-architecture).
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 2a0445158192246c421467320af0d2f45a98f02c
Merge: 2625c1b... e6df439...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Sep 10 11:01:33 2005 -0700

    Merge davem@outer-richmond.davemloft.net:src/GIT/net-2.6/

commit 2625c1be3425f5a9d8ef1434449b7d954aaf199d
Merge: abf9142... 6f0d618...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 10 10:17:13 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit abf914208a1e120446ea4f9bc26406bd3a4579e1
Merge: 0aaaa02... daad566...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 10 10:16:47 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 0aaaa028297a0e2aed9671419a11d8e17510cb51
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 22:09:08 2005 +0100

    [PATCH] envctrl fixes
    
    envctrl doesn't need unistd.h; moreover, since it declares errno static
    gcc4 gets very unhappy about including unistd.h.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe08ac3178243fbed61f24878ffcf5cfb53fceb1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 22:03:44 2005 +0100

    [PATCH] __user annotations (scsi/ch)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b35b7072178b76814a088ac71ac4702de8bf7c7b
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun Sep 11 00:00:14 2005 +1000

    [PATCH] powerpc: Move include3 to arch/$(ARCH)/include
    
    This is less troublesome and makes more sense.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35797132b311b3b7d4add48393b0a03f3566cbc1
Author: Jens Axboe <axboe@suse.de>
Date:   Sat Sep 10 14:17:10 2005 +0200

    [PATCH] cfq-iosched: reverse bad reference count fix
    
    The reference count fix merged isn't fully bug free. It doesn't leak
    now, but instead it crashes due to looking at freed memory. So for now,
    lets reverse the change and I'll fix it for real next week.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31139971b3dc9fbb2e8a8572fb81e6e8470f363a
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Sep 10 21:13:13 2005 +1000

    [PATCH] ppc32: support hotplug cpu on powermacs
    
    This allows cpus to be off-lined on 32-bit SMP powermacs.  When a cpu
    is off-lined, it is put into sleep mode with interrupts disabled.  It
    can be on-lined again by asserting its soft-reset pin, which is
    connected to a GPIO pin.
    
    With this I can off-line the second cpu in my dual G4 powermac, which
    means that I can then suspend the machine (the suspend/resume code
    refuses to suspend if more than one cpu is online, and making it cope
    with multiple cpus is surprisingly messy).
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb0bb3b6596cdb08adb0b72453cc67d48e139c2c
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Sep 10 21:13:11 2005 +1000

    [PATCH] ppc32: Kill init on unhandled synchronous signals
    
    This is a patch that I have had in my tree for ages.  If init causes
    an exception that raises a signal, such as a SIGSEGV, SIGILL or
    SIGFPE, and it hasn't registered a handler for it, we don't deliver
    the signal, since init doesn't get any signals that it doesn't have a
    handler for.  But that means that we just return to userland and
    generate the same exception again immediately.  With this patch we
    print a message and kill init in this situation.
    
    This is very useful when you have a bug in the kernel that means that
    init doesn't get as far as executing its first instruction. :)
    Without this patch the system hangs when it gets to starting the
    userland init; with it you at least get a message giving you a clue
    about what has gone wrong.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e63bc7342c40f0f1dd83d80d368665bd06f4963
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:31 2005 -0700

    [PATCH] telephony: fix-up schedule_timeout() usage
    
    Use schedule_timeout_uninterruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b4ccf8db4c1dc343ad5d6ed19240bbc3b5f945f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:31 2005 -0700

    [PATCH] parport: fix-up schedule_timeout() usage
    
    Use schedule_timeout_interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.  Also use
    human-time to jiffies units conversion functions rather than direct HZ
    division to avoid rounding issues.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da4cd8dfe18ee901b880f94ca0fa79d5cc1cd0eb
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:30 2005 -0700

    [PATCH] drivers/char: fix-up schedule_timeout() usage
    
    Use schedule_timeout_interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ddee1b7a732dc96d479afaa7d0a26aa53990089
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:29 2005 -0700

    [PATCH] drivers/cdrom: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{un,}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86e8486245a01f05a3267b2e8b5c02c2303b670d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:28 2005 -0700

    [PATCH] drivers/block: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{un,}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 310b587e011ce02328c8e4c29eccd9f14d9007c5
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:27 2005 -0700

    [PATCH] mips: fix-up schedule_timeout() usage
    
    Use schedule_timeout_interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.  Also, replace
    custom timespectojiffies() function with globally availabe
    timespec_to_jiffies().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52e6e6308801697ae8e59e7a577f9ca71231a35c
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:26 2005 -0700

    [PATCH] i386: fix-up schedule_timeout() usage
    
    Use schedule_timeout_interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20c6abd1fd3a6296282f63fae82e589aa81862ff
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:25 2005 -0700

    [PATCH] alpha: fix-up schedule_timeout() usage
    
    Use schedule_timeout_interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13e4b57f6a4e23ceb99794a650d777e74831f4a6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:25 2005 -0700

    [PATCH] mm: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{,un}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75bcc8c5e1de78616b04ef9f317a293a7c1c163c
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:24 2005 -0700

    [PATCH] kernel: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{,un}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 041e0e3b1970c508dc9a95b7dd9dc86271a7d7ac
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:23 2005 -0700

    [PATCH] fs: fix-up schedule_timeout() usage
    
    Use schedule_timeout_{,un}interruptible() instead of
    set_current_state()/schedule_timeout() to reduce kernel size.  Also use helper
    functions to convert between human time units and jiffies rather than constant
    HZ division to avoid rounding errors.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 373016e9e1353f2af871993d27d00768f08cc883
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Sep 10 00:27:23 2005 -0700

    [PATCH] time.h: remove ifdefs
    
    Remove these ifdefs - there's no need to have more than one definition of
    these multipliers anywhere.
    
    Cc: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84f902c0903a98a315b45a4fba3d2ac0de388256
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:22 2005 -0700

    [PATCH] include: update jiffies/{m,u}secs conversion functions
    
    Clarify the human-time units to jiffies conversion functions by using the
    constants in time.h.  This makes many of the subsequent patches direct
    copies of the current code.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64ed93a268bc18fa6f72f61420d0e0022c5e38d1
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:21 2005 -0700

    [PATCH] add schedule_timeout_{,un}interruptible() interfaces
    
    Add schedule_timeout_{,un}interruptible() interfaces so that
    schedule_timeout() callers don't have to worry about forgetting to add the
    set_current_state() call beforehand.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 672289e9faa56acd4e39ad866ea258b7be7c99a6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:21 2005 -0700

    [PATCH] i386/x86_64: make get_cpu_vendor() static
    
    get_cpu_vendor() no longer has any users in other files.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e711700a0e6a6824fcfd5519d6b6982850a648ee
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:20 2005 -0700

    [PATCH] fs/cramfs/uncompress.c should #include <linux/cramfs_fs.h>
    
    Every file should #include the header with the prototypes of the global
    functions it is offering.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b01d8684e9e5b04270970c97df856d47668267e3
Author: Pavel Machek <pavel@suse.cz>
Date:   Sat Sep 10 00:27:19 2005 -0700

    [PATCH] remove ACPI S4bios support
    
    Remove S4BIOS support.  It is pretty useless, and only ever worked for _me_
    once.  (I do not think anyone else ever tried it).  It was in feature-removal
    for a long time, and it should have been removed before.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2d08dade7743bd3a28cc5f68163e71c00a2a908
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:18 2005 -0700

    [PATCH] include/linux/bio.h: "extern inline" -> "static inline"
    
    "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9adeb1b409e832c31d93106ce52482a5f0078439
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:18 2005 -0700

    [PATCH] "extern inline" -> "static inline"
    
    "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2befb9e36dc52d715c3a67a9dbad36ac1edc376f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:17 2005 -0700

    [PATCH] include/linux/blkdev.h: "extern inline" -> "static inline"
    
    "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2afe67453e5b1499459ee3596b1e7924a5208f5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:27:16 2005 -0700

    [PATCH] include/asm-i386/: "extern inline" -> "static inline"
    
    "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea0e0a4f53a75ed9d0812352c0410f6fc2a0b62a
Author: James Lamanna <jlamanna@gmail.com>
Date:   Sat Sep 10 00:27:16 2005 -0700

    [PATCH] janitor: reiserfs: super.c - vfree() checking cleanups
    
    super.c vfree() checking cleanups.
    
    Signed-off by: James Lamanna <jlamanna@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2aad5f03d97bbaf1b19f31347656de953247c7da
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:15 2005 -0700

    [PATCH] janitor: ide/ide-cs: replace schedule_timeout() with msleep()
    
    Uses msleep() in place of schedule_timeout() to guarantee the task delays as
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6a2f3404a3b09281a264058fa8dd318bac51178
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:14 2005 -0700

    [PATCH] janitor: block/xd: replace schedule_timeout() with msleep()/msleep_interruptible()
    
    Use msleep() or msleep_interruptible() [as appropriate] instead of
    schedule_timeout() to gurantee the task delays as expected.  As a result
    changed the units of the timeout variable from jiffies to msecs.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31a34571e5eed7cb1d70d5e7edd013261fe602e9
Author: Michael Veeck <michael.veeck@gmx.net>
Date:   Sat Sep 10 00:27:13 2005 -0700

    [PATCH] janitor: sh: hd64465: minmax-removal
    
    Patch removes unnecessary min/max macros and changes calls to use kernel.h
    macros instead.
    
    Signed-off-by: Michael Veeck <michael.veeck@gmx.net>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e8bbf59bd1ff78ad7e6c7afe6acef91372914e1
Author: Michael Veeck <michael.veeck@gmx.net>
Date:   Sat Sep 10 00:27:11 2005 -0700

    [PATCH] janitor: sh: bigsur/io: minmax-removal
    
    Patch removes unnecessary min/max macros and changes calls to use kernel.h
    macros instead.
    
    Signed-off-by: Michael Veeck <michael.veeck@gmx.net>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c5719c43d34073f6b4b0a2dd99f5317a5f63abd
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:10 2005 -0700

    [PATCH] janitor: tulip/de4x5: list_for_each
    
    s/for/list_for_each/
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46308c0bbbb066305e0798a2fa03328467a3c7d6
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:09 2005 -0700

    [PATCH] janitor: block/umem: replace PRINTK with pr_debug
    
    Removed unused dprintk, replaced PRINTK with pr_debug.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80ce45fd961ba8c951adc9857bfda87102b1f5b1
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:27:08 2005 -0700

    [PATCH] janitor: ide-tape: replace schedule_timeout() with msleep()
    
    Uses msleep() instead of schedule_timeout() to guarantee
    the task delays at least the desired time amount.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cdca3f9806a3dbaa07b5e8175000cd513ba92d4
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:07 2005 -0700

    [PATCH] janitor: fs/dcache.c: list_for_each*
    
    First one is list_for_each_entry (thanks maks), second 2 list_for_each_safe.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdadd65fbce0ff966cb8e74247d9636f52a7fc7a
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:07 2005 -0700

    [PATCH] janitor: fs/namespace.c: list_for_each_entry
    
    Make code more readable with list_for_each_entry.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 216d81bb35fc50923993462cc4fbc7029f9be1a9
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:05 2005 -0700

    [PATCH] janitor: jffs/intrep: list_for_each_entry
    
    Use list_for_each_entry to make code more readable.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: <jffs-dev@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81616c5a0811564667ef39928da4573d99c70bed
Author: Domen Puncer <domen@coderock.org>
Date:   Sat Sep 10 00:27:04 2005 -0700

    [PATCH] janitor: net/ppp-generic: list_for_each_entry
    
    Make code more readable with list_for_each_entry.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2665b891c42ef67eb4cb51d665b523892f992749
Author: Clemens Buchacher <drizzd@aon.at>
Date:   Sat Sep 10 00:27:00 2005 -0700

    [PATCH] janitor: ide: min/max macros in ide-timing.h
    
    I replaced the custom MIN/MAX macros with the type safe min/max macros
    from linux/kernel.h.
    
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecec4cb7a9df5f61fe00710d2f2c69ce9a3b1d40
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:59 2005 -0700

    [PATCH] lib/sort.c: small cleanups
    
    This patch contains the following small cleanups:
    - make two needlessly global functions static
    - every file should #include the header files containing the prototypes
      of it's global functions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 207f36eec9e7b1077d7a0aaadb4800e2c9b4cfa4
Author: Renaud Lienhart <renaud.lienhart@free.fr>
Date:   Sat Sep 10 00:26:59 2005 -0700

    [PATCH] remove invalid comment in mm/page_alloc.c
    
    free_pages_bulk() doesn't free the entire list if count == 0.
    
    Signed-off-by: Renaud Lienhart <renaud.lienhart@free.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dcbb32f1654e79c212c20d9cd9d48509ee1eaf7
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Sep 10 00:26:58 2005 -0700

    [PATCH] Spelling and whitespace fixes for REPORTING-BUGS
    
    The attached patch fixes some spelling errors in REPORTING-BUGS and also
    removes all trailing whitespaces.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96757701336365e30bea9fccdfac087338954e09
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Sat Sep 10 00:26:57 2005 -0700

    [PATCH] drivers/char/lp.c : Use of the time_after() macro
    
    Use of the time_after() macro, defined at linux/jiffies.h, which deals with
    wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82b44429e0c8a8fec8f36e98a725f516227dabc0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:56 2005 -0700

    [PATCH] patch] remove sound/oss/skeleton.c
    
    We do no longer need a template for OSS drivers.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8e38dde33b839bb9e9f98e88688bfac1811d57a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:55 2005 -0700

    [PATCH] include/asm-arm26/hardirq.h: remove #define irq_enter()
    
    This patch removes a #define for irq_enter that is superfluous due to a
    similar one in include/linux/hardirq.h.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 338cec3253a6d43d02e5e96abc327197565efcc8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:54 2005 -0700

    [PATCH] merge some from Rusty's trivial patches
    
    This patch contains the most trivial from Rusty's trivial patches:
    - spelling fixes
    - remove duplicate includes
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9101210e7aa72daf92722d451a2f7e3af5f781f
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sat Sep 10 00:26:54 2005 -0700

    [PATCH] vfree and kfree cleanup in drivers/
    
    This patch does a full cleanup of 'NULL checks before vfree', and a partial
    cleanup of calls to kfree for all of drivers/ - the kfree bit is partial in
    that I only did the files that also had vfree calls in them.  The patch
    also gets rid of some redundant (void *) casts of pointers being passed to
    [vk]free, and a some tiny whitespace corrections also crept in.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 887c27f369abc458556a5ce8ab22ddd498474307
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:52 2005 -0700

    [PATCH] fix unusual placement of inline keyword in hpet
    
    With gcc -W:
    
    drivers/char/hpet.c:102: warning: `inline' is not at beginning of declaration
    drivers/char/hpet.c:109: warning: `inline' is not at beginning of declaration
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3358a116c25267446a45e4164cb2b8e98276da0
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Sat Sep 10 00:26:51 2005 -0700

    [PATCH] update FSF address in COPYING
    
    FSF has moved so update the address as per
    http://www.gnu.org/licenses/gpl.txt.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aeb8397b6a289a358f04fa12b69194af6c259ad6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:26:50 2005 -0700

    [PATCH] i386/smpboot: use msleep() instead of schedule_timeout()
    
    Replace schedule_timeout() with msleep() to guarantee the task delays as
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4c9925ccc185da68c2d42230711d017f222e420
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 10 00:26:50 2005 -0700

    [PATCH] telephony/ixj: use msleep() instead of schedule_timeout()
    
    Replace schedule_timeout() with msleep() to guarantee the task delays as
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a11ec5e502cb61ee31095008318f9c107d9db60
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Sat Sep 10 00:26:49 2005 -0700

    [PATCH] dmapool: Fix "nocast type" warnings
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00b61f51922e432fd92a482ba1e0b5f8f326ef46
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Sat Sep 10 00:26:48 2005 -0700

    [PATCH] lib/radix-tree: Fix "nocast type" warnings
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d533f671852cc4e481ea7070aa1a3b6fc75b8e44
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Sat Sep 10 00:26:46 2005 -0700

    [PATCH] Spelling fixes for Documentation/
    
    The attached patch fixes the following spelling errors in Documentation/
            - double "the"
            - Several misspellings of function/functionality
            - infomation
            - memeory
            - Recieved
            - wether
    and possibly others which I forgot ;-)
    Trailing whitespaces on the same line as the typo are also deleted.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9de75d110c9681d4aaa7fe87b8db99d5562012a2
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Sat Sep 10 00:26:46 2005 -0700

    [PATCH] mm/swap_state: Fix "nocast type" warnings
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e776eba0feaea9a3eba7aff73f50701b9804b57f
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Sat Sep 10 00:26:44 2005 -0700

    [PATCH] Add kerneldoc reference to CodingStyle
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c05e0664e1d080344d6ce346de43e51895541e21
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Sep 10 00:26:44 2005 -0700

    [PATCH] SH64: C99 initializers for hw_interrupt_type structures
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aecd4568ac8abcedc1e46fc3804439ac8e1b8ff4
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Sep 10 00:26:43 2005 -0700

    [PATCH] V850: C99 initializers for hw_interrupt_type structures
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08d0fd07c3f0b6e561260f0b078d03d6fa1ac59f
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Sep 10 00:26:42 2005 -0700

    [PATCH] SH: C99 initializers for hw_interrupt_type structures
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2830e21eb3c600865245478cd7a28ae73191b6b7
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Sep 10 00:26:40 2005 -0700

    [PATCH] PPC: C99 initializers for hw_interrupt_type structures
    
    Convert the initializers of hw_interrupt_type structures to C99 initializers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 417ef531415c070926b071b75fd1c1ac4b6e2f7e
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Sep 10 00:26:39 2005 -0700

    [PATCH] kernel/acct: add kerneldoc
    
    for kernel/acct.c:
    - fix typos
    - add kerneldoc for non-static functions
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 621a4d1a823e1ec631fbfbe6e53ad036e2d2abc6
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Sat Sep 10 00:26:38 2005 -0700

    [PATCH] char/n_tty: fix sparse warnings (__nocast type)
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2d550736f8b2186b8ef7e206d0bfbfec2238ae8
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Sat Sep 10 00:26:36 2005 -0700

    [PATCH] mm/slab: fix sparse warnings
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfc866e5059561cc79a0cc1c68ff1492f4c78508
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 10 00:26:35 2005 -0700

    [PATCH] sb16_csp: untypedef
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31bbf8f5d55c706f2e429f7cfa7b339a332e785e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 10 00:26:34 2005 -0700

    [PATCH] sb16_csp: remove home-grown le??_to_cpu macros
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ac19f4ccd8636dbe76a97cec36c95d7548cc871
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Sat Sep 10 00:26:33 2005 -0700

    [PATCH] hdpu_cpustate.c: misc_register() can fail
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf85d5ca880c9611906e0ca0c729fdf01c724501
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Sat Sep 10 00:26:32 2005 -0700

    [PATCH] drivers/char/lcd.c: misc_register() can fail
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 819a3eba4233ffc6c125e1bf0a15ae093b97c3a6
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Sat Sep 10 00:26:29 2005 -0700

    [PATCH] applicom: fix error handling
    
    misc_register() can fail.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ce7852cdf07ab903fb1c72d0915ac492c6e07c7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 10 00:26:28 2005 -0700

    [PATCH] mm/filemap.c: make two functions static
    
    With Nick Piggin <npiggin@suse.de>
    
    Give some things static scope.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd81eca83c8300c95d8a1eaf0d38f56513711535
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sat Sep 10 00:26:24 2005 -0700

    [PATCH] Yet another RCU documentation update
    
    Update RCU documentation based on discussions and review of RCU-based tree
    patches.  Add an introductory whatisRCU.txt file.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12c62c2e9abf8da804fe1def1f5bb44d023f569f
Author: Arthur Othieno <a.othieno@bluewin.ch>
Date:   Sat Sep 10 00:26:22 2005 -0700

    [PATCH] Remove even more stale references to Documentation/smp.tex
    
    Randy cleaned out the bulk of these stale references to the now long gone
    Documentation/smp.tex back in 2004.  I followed this up with a few more
    sweeps.  Somehow, these have managed to sneak back in since.
    
    I can't seem to figure out a contact point for M32R (no one listed in
    MAINTAINERS!), but, these patches are only but trivial.
    
    Signed-off-by: Arthur Othieno <a.othieno@bluewin.ch>
    Acked-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c117f1b4d14380baeed9c883f765ee023da8761
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sat Sep 10 00:26:21 2005 -0700

    [PATCH] sched: allow the load to grow upto its cpu_power
    
    Don't pull tasks from a group if that would cause the group's total load to
    drop below its total cpu_power (ie.  cause the group to start going idle).
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa3b6ddc3f4a8eadba52234134cdb59c28b5332d
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sat Sep 10 00:26:21 2005 -0700

    [PATCH] sched: don't kick ALB in the presence of pinned task
    
    Jack Steiner brought this issue at my OLS talk.
    
    Take a scenario where two tasks are pinned to two HT threads in a physical
    package.  Idle packages in the system will keep kicking migration_thread on
    the busy package with out any success.
    
    We will run into similar scenarios in the presence of CMP/NUMA.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5927ad78ec75870b1bdfa65a10ad1300cd664d36
Author: Renaud Lienhart <renaud.lienhart@free.fr>
Date:   Sat Sep 10 00:26:20 2005 -0700

    [PATCH] sched: use cached variable in sys_sched_yield()
    
    In sys_sched_yield(), we cache current->array in the "array" variable, thus
    there's no need to dereference "current" again later.
    
    Signed-Off-By: Renaud Lienhart <renaud.lienhart@free.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5969fe0618051e8577316555a81a6e44b7b7d640
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 10 00:26:19 2005 -0700

    [PATCH] sched: HT optimisation
    
    If an idle sibling of an HT queue encounters a busy sibling, then make
    higher level load balancing of the non-idle variety.
    
    Performance of multiprocessor HT systems with low numbers of tasks
    (generally < number of virtual CPUs) can be significantly worse than the
    exact same workloads when running in non-HT mode.  The reason is largely
    due to poor scheduling behaviour.
    
    This patch improves the situation, making the performance gap far less
    significant on one problematic test case (tbench).
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e17224bf1d01b461ec02a60f5a9b7657a89bdd23
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 10 00:26:18 2005 -0700

    [PATCH] sched: less locking
    
    During periodic load balancing, don't hold this runqueue's lock while
    scanning remote runqueues, which can take a non trivial amount of time
    especially on very large systems.
    
    Holding the runqueue lock will only help to stabilise ->nr_running, however
    this doesn't do much to help because tasks being woken will simply get held
    up on the runqueue lock, so ->nr_running would not provide a really
    accurate picture of runqueue load in that case anyway.
    
    What's more, ->nr_running (and possibly the cpu_load averages) of remote
    runqueues won't be stable anyway, so load balancing is always an inexact
    operation.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6d5cfaf4551aa7713ca6ab73bb77e832602204b
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 10 00:26:16 2005 -0700

    [PATCH] sched: less newidle locking
    
    Similarly to the earlier change in load_balance, only lock the runqueue in
    load_balance_newidle if the busiest queue found has a nr_running > 1.  This
    will reduce frequency of expensive remote runqueue lock aquisitions in the
    schedule() path on some workloads.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67f9a619e7460b7d07284a9d0745727a77d3ade6
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 10 00:26:16 2005 -0700

    [PATCH] sched: fix SMT scheduler latency bug
    
    William Weston reported unusually high scheduling latencies on his x86 HT
    box, on the -RT kernel.  I managed to reproduce it on my HT box and the
    latency tracer shows the incident in action:
    
                     _------=> CPU#
                    / _-----=> irqs-off
                   | / _----=> need-resched
                   || / _---=> hardirq/softirq
                   ||| / _--=> preempt-depth
                   |||| /
                   |||||     delay
       cmd     pid ||||| time  |   caller
          \   /    |||||   \   |   /
          du-2803  3Dnh2    0us : __trace_start_sched_wakeup (try_to_wake_up)
            ..............................................................
            ... we are running on CPU#3, PID 2778 gets woken to CPU#1: ...
            ..............................................................
          du-2803  3Dnh2    0us : __trace_start_sched_wakeup <<...>-2778> (73 1)
          du-2803  3Dnh2    0us : _raw_spin_unlock (try_to_wake_up)
            ................................................
            ... still on CPU#3, we send an IPI to CPU#1: ...
            ................................................
          du-2803  3Dnh1    0us : resched_task (try_to_wake_up)
          du-2803  3Dnh1    1us : smp_send_reschedule (try_to_wake_up)
          du-2803  3Dnh1    1us : send_IPI_mask_bitmask (smp_send_reschedule)
          du-2803  3Dnh1    2us : _raw_spin_unlock_irqrestore (try_to_wake_up)
            ...............................................
            ... 1 usec later, the IPI arrives on CPU#1: ...
            ...............................................
      <idle>-0     1Dnh.    2us : smp_reschedule_interrupt (c0100c5a 0 0)
    
    So far so good, this is the normal wakeup/preemption mechanism.  But here
    comes the scheduler anomaly on CPU#1:
    
      <idle>-0     1Dnh.    2us : preempt_schedule_irq (need_resched)
      <idle>-0     1Dnh.    2us : preempt_schedule_irq (need_resched)
      <idle>-0     1Dnh.    3us : __schedule (preempt_schedule_irq)
      <idle>-0     1Dnh.    3us : profile_hit (__schedule)
      <idle>-0     1Dnh1    3us : sched_clock (__schedule)
      <idle>-0     1Dnh1    4us : _raw_spin_lock_irq (__schedule)
      <idle>-0     1Dnh1    4us : _raw_spin_lock_irqsave (__schedule)
      <idle>-0     1Dnh2    5us : _raw_spin_unlock (__schedule)
      <idle>-0     1Dnh1    5us : preempt_schedule (__schedule)
      <idle>-0     1Dnh1    6us : _raw_spin_lock (__schedule)
      <idle>-0     1Dnh2    6us : find_next_bit (__schedule)
      <idle>-0     1Dnh2    6us : _raw_spin_lock (__schedule)
      <idle>-0     1Dnh3    7us : find_next_bit (__schedule)
      <idle>-0     1Dnh3    7us : find_next_bit (__schedule)
      <idle>-0     1Dnh3    8us : _raw_spin_unlock (__schedule)
      <idle>-0     1Dnh2    8us : preempt_schedule (__schedule)
      <idle>-0     1Dnh2    8us : find_next_bit (__schedule)
      <idle>-0     1Dnh2    9us : trace_stop_sched_switched (__schedule)
      <idle>-0     1Dnh2    9us : _raw_spin_lock (trace_stop_sched_switched)
      <idle>-0     1Dnh3   10us : trace_stop_sched_switched <<...>-2778> (73 8c)
      <idle>-0     1Dnh3   10us : _raw_spin_unlock (trace_stop_sched_switched)
      <idle>-0     1Dnh1   10us : _raw_spin_unlock (__schedule)
      <idle>-0     1Dnh.   11us : local_irq_enable_noresched (preempt_schedule_irq)
      <idle>-0     1Dnh.   11us < (0)
    
    we didnt pick up pid 2778! It only gets scheduled much later:
    
       <...>-2778  1Dnh2  412us : __switch_to (__schedule)
       <...>-2778  1Dnh2  413us : __schedule <<idle>-0> (8c 73)
       <...>-2778  1Dnh2  413us : _raw_spin_unlock (__schedule)
       <...>-2778  1Dnh1  413us : trace_stop_sched_switched (__schedule)
       <...>-2778  1Dnh1  414us : _raw_spin_lock (trace_stop_sched_switched)
       <...>-2778  1Dnh2  414us : trace_stop_sched_switched <<...>-2778> (73 1)
       <...>-2778  1Dnh2  414us : _raw_spin_unlock (trace_stop_sched_switched)
       <...>-2778  1Dnh1  415us : trace_stop_sched_switched (__schedule)
    
    the reason for this anomaly is the following code in dependent_sleeper():
    
                    /*
                     * If a user task with lower static priority than the
                     * running task on the SMT sibling is trying to schedule,
                     * delay it till there is proportionately less timeslice
                     * left of the sibling task to prevent a lower priority
                     * task from using an unfair proportion of the
                     * physical cpu's resources. -ck
                     */
    [...]
                            if (((smt_curr->time_slice * (100 - sd->per_cpu_gain) /
                                    100) > task_timeslice(p)))
                                            ret = 1;
    
    Note that in contrast to the comment above, we dont actually do the check
    based on static priority, we do the check based on timeslices.  But
    timeslices go up and down, and even highprio tasks can randomly have very
    low timeslices (just before their next refill) and can thus be judged as
    'lowprio' by the above piece of code.  This condition is clearly buggy.
    The correct test is to check for static_prio _and_ to check for the
    preemption priority.  Even on different static priority levels, a
    higher-prio interactive task should not be delayed due to a
    higher-static-prio CPU hog.
    
    There is a symmetric bug in the 'kick SMT sibling' code of this function as
    well, which can be solved in a similar way.
    
    The patch below (against the current scheduler queue in -mm) fixes both
    bugs.  I have build and boot-tested this on x86 SMT, and nice +20 tasks
    still get properly throttled - so the dependent-sleeper logic is still in
    action.
    
    btw., these bugs pessimised the SMT scheduler because the 'delay wakeup'
    property was applied too liberally, so this fix is likely a throughput
    improvement as well.
    
    I separated out a smt_slice() function to make the code easier to read.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d79fc0fc6645b0cf5cd980da76942ca6d6300fa4
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 10 00:26:12 2005 -0700

    [PATCH] sched: TASK_NONINTERACTIVE
    
    This patch implements a task state bit (TASK_NONINTERACTIVE), which can be
    used by blocking points to mark the task's wait as "non-interactive".  This
    does not mean the task will be considered a CPU-hog - the wait will simply
    not have an effect on the waiting task's priority - positive or negative
    alike.  Right now only pipe_wait() will make use of it, because it's a
    common source of not-so-interactive waits (kernel compilation jobs, etc.).
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95cdf3b799a481969a48d69a1a52916ad5da6694
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 10 00:26:11 2005 -0700

    [PATCH] sched cleanups
    
    whitespace cleanups.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da5a5522709a030da91932d4d4c2b179a481a8c0
Author: M.Baris Demiray <baris@labristeknoloji.com>
Date:   Sat Sep 10 00:26:09 2005 -0700

    [PATCH] sched: make idlest_group/cpu cpus_allowed-aware
    
    Add relevant checks into find_idlest_group() and find_idlest_cpu() to make
    them return only the groups that have allowed CPUs and allowed CPUs
    respectively.
    
    Signed-off-by: M.Baris Demiray <baris@labristeknoloji.com>
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc38ed7531eefa332c8c69ee288487860cd6b426
Author: Con Kolivas <kernel@kolivas.org>
Date:   Sat Sep 10 00:26:08 2005 -0700

    [PATCH] sched: run SCHED_NORMAL tasks with real time tasks on SMT siblings
    
    The hyperthread aware nice handling currently puts to sleep any non real
    time task when a real time task is running on its sibling cpu.  This can
    lead to prolonged starvation by having the non real time task pegged to the
    cpu with load balancing not pulling that task away.
    
    Currently we force lower priority hyperthread tasks to run a percentage of
    time difference based on timeslice differences which is meaningless when
    comparing real time tasks to SCHED_NORMAL tasks.  We can allow non real
    time tasks to run with real time tasks on the sibling up to per_cpu_gain%
    if we use jiffies as a counter.
    
    Cleanups and micro-optimisations to the relevant code section should make
    it more understandable as well.
    
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7482a2e7775d163aecd8c95af7bb1b8c83890cc
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sat Sep 10 00:26:07 2005 -0700

    [PATCH] synclink_cs add statistics clear
    
    Add ability to clear statistics.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4247bdc60048018b98f71228b45cfbc5f5270c86
Author: Paul Jackson <pj@sgi.com>
Date:   Sat Sep 10 00:26:06 2005 -0700

    [PATCH] cpuset semaphore depth check deadlock fix
    
    The cpusets-formalize-intermediate-gfp_kernel-containment patch
    has a deadlock problem.
    
    This patch was part of a set of four patches to make more
    extensive use of the cpuset 'mem_exclusive' attribute to
    manage kernel GFP_KERNEL memory allocations and to constrain
    the out-of-memory (oom) killer.
    
    A task that is changing cpusets in particular ways on a system
    when it is very short of free memory could double trip over
    the global cpuset_sem semaphore (get the lock and then deadlock
    trying to get it again).
    
    The second attempt to get cpuset_sem would be in the routine
    cpuset_zone_allowed().  This was discovered by code inspection.
    I can not reproduce the problem except with an artifically
    hacked kernel and a specialized stress test.
    
    In real life you cannot hit this unless you are manipulating
    cpusets, and are very unlikely to hit it unless you are rapidly
    modifying cpusets on a memory tight system.  Even then it would
    be a rare occurence.
    
    If you did hit it, the task double tripping over cpuset_sem
    would deadlock in the kernel, and any other task also trying
    to manipulate cpusets would deadlock there too, on cpuset_sem.
    Your batch manager would be wedged solid (if it was cpuset
    savvy), but classic Unix shells and utilities would work well
    enough to reboot the system.
    
    The unusual condition that led to this bug is that unlike most
    semaphores, cpuset_sem _can_ be acquired while in the page
    allocation code, when __alloc_pages() calls cpuset_zone_allowed.
    So it easy to mistakenly perform the following sequence:
      1) task makes system call to alter a cpuset
      2) take cpuset_sem
      3) try to allocate memory
      4) memory allocator, via cpuset_zone_allowed, trys to take cpuset_sem
      5) deadlock
    
    The reason that this is not a serious bug for most users
    is that almost all calls to allocate memory don't require
    taking cpuset_sem.  Only some code paths off the beaten
    track require taking cpuset_sem -- which is good.  Taking
    a global semaphore on the main code path for allocating
    memory would not scale well.
    
    This patch fixes this deadlock by wrapping the up() and down()
    calls on cpuset_sem in kernel/cpuset.c with code that tracks
    the nesting depth of the current task on that semaphore, and
    only does the real down() if the task doesn't hold the lock
    already, and only does the real up() if the nesting depth
    (number of unmatched downs) is exactly one.
    
    The previous required use of refresh_mems(), anytime that
    the cpuset_sem semaphore was acquired and the code executed
    while holding that semaphore might try to allocate memory, is
    no longer required.  Two refresh_mems() calls were removed
    thanks to this.  This is a good change, as failing to get
    all the necessary refresh_mems() calls placed was a primary
    source of bugs in this cpuset code.  The only remaining call
    to refresh_mems() is made while doing a memory allocation,
    if certain task memory placement data needs to be updated
    from its cpuset, due to the cpuset having been changed behind
    the tasks back.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb1c8f93d869b34cacb8b8932e2b83d96a19d720
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 10 00:25:56 2005 -0700

    [PATCH] spinlock consolidation
    
    This patch (written by me and also containing many suggestions of Arjan van
    de Ven) does a major cleanup of the spinlock code.  It does the following
    things:
    
     - consolidates and enhances the spinlock/rwlock debugging code
    
     - simplifies the asm/spinlock.h files
    
     - encapsulates the raw spinlock type and moves generic spinlock
       features (such as ->break_lock) into the generic code.
    
     - cleans up the spinlock code hierarchy to get rid of the spaghetti.
    
    Most notably there's now only a single variant of the debugging code,
    located in lib/spinlock_debug.c.  (previously we had one SMP debugging
    variant per architecture, plus a separate generic one for UP builds)
    
    Also, i've enhanced the rwlock debugging facility, it will now track
    write-owners.  There is new spinlock-owner/CPU-tracking on SMP builds too.
    All locks have lockup detection now, which will work for both soft and hard
    spin/rwlock lockups.
    
    The arch-level include files now only contain the minimally necessary
    subset of the spinlock code - all the rest that can be generalized now
    lives in the generic headers:
    
     include/asm-i386/spinlock_types.h       |   16
     include/asm-x86_64/spinlock_types.h     |   16
    
    I have also split up the various spinlock variants into separate files,
    making it easier to see which does what. The new layout is:
    
       SMP                         |  UP
       ----------------------------|-----------------------------------
       asm/spinlock_types_smp.h    |  linux/spinlock_types_up.h
       linux/spinlock_types.h      |  linux/spinlock_types.h
       asm/spinlock_smp.h          |  linux/spinlock_up.h
       linux/spinlock_api_smp.h    |  linux/spinlock_api_up.h
       linux/spinlock.h            |  linux/spinlock.h
    
    /*
     * here's the role of the various spinlock/rwlock related include files:
     *
     * on SMP builds:
     *
     *  asm/spinlock_types.h: contains the raw_spinlock_t/raw_rwlock_t and the
     *                        initializers
     *
     *  linux/spinlock_types.h:
     *                        defines the generic type and initializers
     *
     *  asm/spinlock.h:       contains the __raw_spin_*()/etc. lowlevel
     *                        implementations, mostly inline assembly code
     *
     *   (also included on UP-debug builds:)
     *
     *  linux/spinlock_api_smp.h:
     *                        contains the prototypes for the _spin_*() APIs.
     *
     *  linux/spinlock.h:     builds the final spin_*() APIs.
     *
     * on UP builds:
     *
     *  linux/spinlock_type_up.h:
     *                        contains the generic, simplified UP spinlock type.
     *                        (which is an empty structure on non-debug builds)
     *
     *  linux/spinlock_types.h:
     *                        defines the generic type and initializers
     *
     *  linux/spinlock_up.h:
     *                        contains the __raw_spin_*()/etc. version of UP
     *                        builds. (which are NOPs on non-debug, non-preempt
     *                        builds)
     *
     *   (included on UP-non-debug builds:)
     *
     *  linux/spinlock_api_up.h:
     *                        builds the _spin_*() APIs.
     *
     *  linux/spinlock.h:     builds the final spin_*() APIs.
     */
    
    All SMP and UP architectures are converted by this patch.
    
    arm, i386, ia64, ppc, ppc64, s390/s390x, x64 was build-tested via
    crosscompilers.  m32r, mips, sh, sparc, have not been tested yet, but should
    be mostly fine.
    
    From: Grant Grundler <grundler@parisc-linux.org>
    
      Booted and lightly tested on a500-44 (64-bit, SMP kernel, dual CPU).
      Builds 32-bit SMP kernel (not booted or tested).  I did not try to build
      non-SMP kernels.  That should be trivial to fix up later if necessary.
    
      I converted bit ops atomic_hash lock to raw_spinlock_t.  Doing so avoids
      some ugly nesting of linux/*.h and asm/*.h files.  Those particular locks
      are well tested and contained entirely inside arch specific code.  I do NOT
      expect any new issues to arise with them.
    
     If someone does ever need to use debug/metrics with them, then they will
      need to unravel this hairball between spinlocks, atomic ops, and bit ops
      that exist only because parisc has exactly one atomic instruction: LDCW
      (load and clear word).
    
    From: "Luck, Tony" <tony.luck@intel.com>
    
       ia64 fix
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjanv@infradead.org>
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Mikael Pettersson <mikpe@csd.uu.se>
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4327edf6b8a7ac7dce144313947995538842d8fd
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sat Sep 10 00:25:49 2005 -0700

    [PATCH] Subject: PATCH: fix numa caused compile warnings
    
    pcibus_to_cpumask expands into more than just an initialiser so gcc
    moans about code before variable declarations.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4012a9895b3e28e3bff3aa534d58c7827af6d4f
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Sep 10 00:25:47 2005 -0700

    [PATCH] ntfs build fix
    
    *** Warning: "bit_spin_lock" [fs/ntfs/ntfs.ko] undefined!
    *** Warning: "bit_spin_unlock" [fs/ntfs/ntfs.ko] undefined!
    
    Cc: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d39969deee4b541be4ee5789a2e4c14511c886e2
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Sep 10 12:04:42 2005 -0500

    Input: i8042 - use kzalloc instead of kcalloc
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit fe1e86049813641a518d15adf7191bd711b4f611
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat Sep 10 12:03:38 2005 -0500

    Input: clean up whitespace and formatting in drivers/char/keyboard.c
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7b4af953321fa65ae5705cb3becc742ab1ba1d6f
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Thu Sep 8 07:42:02 2005 +0200

    [WATCHDOG] s3c2410_wdt.c-state_warning.patch
    
    I've noticed that the patch from Ben Dooks (commit
    af4bb822bc65efb087cd36b83789f22161a6515b on your git tree) is
    introducing a warning. It's using 'u32 state' instead of 'pm_message_t
    state'. I've attached a one liner to fix it.
    
    Signed-Off-By: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit b70d37bf61f278f9d9adf17c52af6b2d0ae7800c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jul 26 10:30:40 2005 -0400

    [SCSI] Fix module removal/device add race
    
    This patch (as546) fixes an oops-causing failure to check the return code
    from scsi_device_get.  The call can return an error if the LLD is being
    unloaded from memory.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f631b4be76355dc3bf49563c706a9fb938993bde
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 31 15:23:12 2005 -0700

    [SCSI] lpfc: use wwn_to_u64() transport helper
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Acked-by: Smart, James <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f8b02a85ebbf5eed63163ca9ed915bf8c47309c5
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 31 15:21:20 2005 -0700

    [SCSI] qla2xxx: use wwn_to_u64() transport helper
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 218fba0004390b0101e681f6db1b8920c1109e54
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 31 15:18:35 2005 -0700

    [SCSI] fc_transport: Generalize WWN to u64 interger conversions.
    
    On some platforms the hard-casting of 8 byte node_name and
    port_name arrays to an u64 would cause unaligned-access
    warnings.  Generalize the conversions with a transport
    helper function which performs consistent shifting of WWN
    bytes.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit caba0233bc85ec311159a35f138d957d05cf2fe8
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Sep 3 13:57:15 2005 -0700

    [PATCH] kbuild: ignore all debugging info sections in scripts/reference_discarded.pl
    
    GCC 4 emits more DWARF debugging information than before and there is now a
    .debug_loc section as well.  This causes "make buildcheck" to fail.  Rather
    than just add that one to the special case list, I used a regexp to ignore
    any .debug_ANYTHING sections in case more show up in the future.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit cd05e6bdc6001ac6e8ab13720693b7e1302d9848
Author: Jan Beulich <JBeulich@novell.com>
Date:   Tue Sep 6 11:47:04 2005 +0200

    [PATCH] kbuild: fix split-include dependency
    
    Splitting of autoconf.h requires that split-include was built before,
    and
    needs to be-re-done when split-include changes. This dependency was
    previously missing. Additionally, since autoconf.h is (suppoosed to
    be)
    generated as a side effect of executing config targets, include/linux
    should be created prior to running the respective sub-make.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 4e25d8bb9550fb5912165196fe8502cdb831a336
Author: Jan Beulich <JBeulich@novell.com>
Date:   Thu Sep 8 17:07:35 2005 +0200

    [PATCH] kbuild: adjust .version updating
    
    In order to maintain a more correct build number, updates to the
    version
    number should only be commited after a successful link of vmlinux, not
    before (so that errors in the link process don't lead to pointless
    increments).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 7b49bb9aff8b14d15da58111d8908c877c0a525e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 21:14:35 2005 +0100

    [PATCH] kbuild: CF=<arguments> passes arguments to sparse
    
    Allows to add to sparse arguments without mutilating makefiles - just
    pass CF=<arguments> and they will be added to CHECKFLAGS.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6d12884259ac65f74538b7819f5fadf4ebb0d569
Author: Zach Brown <zach.brown@oracle.com>
Date:   Wed Sep 7 12:08:23 2005 -0700

    [PATCH] kbuild: add kernelrelease to 'make help'
    
    Dunno if there was a conscious decision to leave it out, but if you're
    happy with adding some help text for it here's a patch against 2.6.13-mm1..
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c4a72cbdb39fd559988b16d118f7e5782935ff11
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Sep 10 11:58:21 2005 +0100

    [MMC] Add mmc_detect_change() delay support for wbsd driver
    
    Convert wbsd to use the new delay functionality in mmc_detect_change()
    rather than implementing its own timer.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6df439b89dbf9eb977c2dc6f7b0644be3704df4
Author: Brian Haley <brian.haley@hp.com>
Date:   Sat Sep 10 00:15:06 2005 -0700

    [IPV6]: Bring Type 0 routing header in-line with rfc3542.
    
    Signed-off-by: Brian Haley <brian.haley@hp.com>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3874b98c655b9490bea1cf9c7697d5dc5338376f
Merge: 41c29dd... dd27466...
Author: David S. Miller <davem@outer-richmond.davemloft.net>
Date:   Sat Sep 10 00:10:49 2005 -0700

    Merge git://git.skbuff.net/gitroot/yoshfuji/linux-2.6-git-rfc3542

commit 41c29dd15b5c36bacdb06ee11facb9199d0b2de0
Merge: 87fc767... 59d203f...
Author: David S. Miller <davem@outer-richmond.davemloft.net>
Date:   Sat Sep 10 00:01:36 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit 1b205c2d2464bfecbba80227e74b412596dc5521
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Sep 9 20:52:00 2005 -0700

    [PATCH] IB: fix CM use-after-free
    
    If the CM REQ handling function gets to error2, then it frees
    cm_id_priv->timewait_info.  But the next line goes through
    ib_destroy_cm_id() -> ib_send_cm_rej() -> cm_reset_to_idle(),
    which ends up calling cm_cleanup_timewait(), which dereferences the
    pointer we just freed.  Make sure we clear cm_id_priv->timewait_info
    after freeing it, so that doesn't happen.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit dd27466df9924706ae34639ce3f4f837875d45c1
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Sat Sep 10 11:32:45 2005 +0900

    [IPV6]: Note values allocated for ip6_tables.
    
    To avoid future conflicts, add a note values allocated for ip6_tables.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 9928890c1f94da58bf753ede937b7324f6832866
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Sat Sep 10 11:26:34 2005 +0900

    [IPV6]: rearrange constants for new advanced API to solve conflicts.
    
    64, 65 are already used in ip6_tables.
    Pointed out by Patrick McHardy <kaber@trash.net>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 354ba39cf96e439149541acf3c6c7c0df0a3ef25
Author: John Kingman <kingman@storagegear.com>
Date:   Fri Sep 9 18:23:32 2005 -0700

    [PATCH] IB CM: support CM redir
    
    Changes to CM to support CM and port redirection (REJ reason 24).
    
    Signed-off-by: John Kingman <kingman@storagegear.com>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d344c5e0856ad03278d8700b503762dbc8b86e12
Merge: 010988e... 87fc767...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Fri Sep 9 20:14:47 2005 -0500

    Manual merge with Linus

commit 37be6eeb4990c05fc7dd683ceaf1501d46ebe9a4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Sep 9 18:38:27 2005 -0500

    [SCSI] SAS transport class: fixup prototype of sas_host_setup
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 87fc767b832ef5a681a0ff9d203c3289bc3be2bf
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:04 2005 -0700

    [PATCH] md: fix BUG when raid10 rebuilds without enough drives
    
    This shouldn't be a BUG.  We should cope.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d508242b231cb6e6803faaef54456abe846edb8
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:03 2005 -0700

    [PATCH] md: fix raid10 assembly when too many devices are missing
    
    If you try to assemble an array with too many missing devices, raid10 will now
    reject the attempt, instead of allowing it.
    
    Also check when hot-adding a drive and refuse the hot-add if the array is
    beyond hope.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 611815651b2640449bda928079160b9263efac1c
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:02 2005 -0700

    [PATCH] md: really get sb_size setting right in all cases
    
    There was another case where sb_size wasn't being set, so instead do the
    sensible thing and set if when filling in the content of a superblock.  That
    ensures that whenever we write a superblock, the sb_size MUST be set.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 188c18fd7982d220f4dea234cbb5cc6c75d0f512
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:01 2005 -0700

    [PATCH] md: make sure the new 'sb_size' is set properly device added without pre-existing superblock.
    
    There are two ways to add devices to an md/raid array.
    
      It can have superblock written to it, and then given to the md driver,
      which will read the superblock (the new way)
    
    or
    
      md can be told (through SET_ARRAY_INFO) the shape of the array, and
      the told about individual drives, and md will create the required
      superblock (the old way).
    
    The newly introduced sb_size was only set for drives being added the
    new way, not the old ways.  Oops :-(
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b325a32e5732d7aef70ca3c58acb3953ed20f66c
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:00 2005 -0700

    [PATCH] md: report spare drives in /proc/mdstat
    
    Just like failed drives have (F), so spare drives now have (S).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cd6bf19bbe8098153d7a478d8fc551edbea9305
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:24:00 2005 -0700

    [PATCH] md: add information about superblock version to /proc/mdstat
    
    Leave it unchanged if the original (0.90) is used, incase it might be a
    compatability problem.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 720a3dc39b030e273bc955641f2517874fd38fc5
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:23:59 2005 -0700

    [PATCH] md: use queue_hardsect_size instead of block_size for md superblock size calc.
    
    Doh.  I want the physical hard-sector-size, not the current block size...
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53e87fbb5dc887766229eef3ba8bd8ab8853b066
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 9 16:23:58 2005 -0700

    [PATCH] md: choose better default offset for bitmap.
    
    On reflection, a better default location for hot-adding bitmaps with version-1
    superblocks is immediately after the superblock.  There might not be much room
    there, but there is usually atleast 3k, and that is a good start.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 500af87abb81098da47474c81f29ea315a056dc5
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:58 2005 -0700

    [PATCH] md: tidy up daemon stop/start code in md/bitmap.c
    
    The bitmap code used to have two daemons, so there is some 'common' start/stop
    code.  But now there is only one, so the common code is just noise.
    
    This patch tidies this up somewhat.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ba00538ada7ecb4fb8bd71ba734a8eada987817
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:57 2005 -0700

    [PATCH] md: ensure bitmap_writeback_daemon handles shutdown properly.
    
    mddev->bitmap gets clearred before the writeback daemon is stopped.  So the
    write_back daemon needs to be careful not to dereference the 'bitmap' if it is
    NULL.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6fb0934f923f889055152cb0b033674f627460b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:56 2005 -0700

    [PATCH] md: use kthread infrastructure in md
    
    Switch MD to use the kthread infrastructure, to simplify the code and get rid
    of tasklist_lock abuse in md_unregister_thread.
    
    Also don't flush signals in md_thread, as the called thread will always do
    that.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 934ce7c840992a771ffc478b132092db9c935c42
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:55 2005 -0700

    [PATCH] md: write-intent bitmap support for raid6
    
    This is a direct port of the raid5 patch.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72626685dc66d455742a7f215a0535c551628b9e
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:54 2005 -0700

    [PATCH] md: add write-intent-bitmap support to raid5
    
    Most awkward part of this is delaying write requests until bitmap updates have
    been flushed.
    
    To achieve this, we have a sequence number (seq_flush) which is incremented
    each time the raid5 is unplugged.
    
    If the raid thread notices that this has changed, it flushes bitmap changes,
    and assigned the value of seq_flush to seq_write.
    
    When a write request arrives, it is given the number from seq_write, and that
    write request may not complete until seq_flush is larger than the saved seq
    number.
    
    We have a new queue for storing stripes which are waiting for a bitmap flush
    and an extra flag for stripes to record if the write was 'degraded' and so
    should not clear the a bit in the bitmap.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0002b2718dd04da67c21f8a7830de8d95a9b0345
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:53 2005 -0700

    [PATCH] md: limit size of sb read/written to appropriate amount
    
    version-1 superblocks are not (normally) 4K long, and can be of variable size.
     Writing the full 4K can cause corruption (but only in non-default
    configurations).
    
    With this patch the super-block-flavour can choose a size to read, and set a
    size to write based on what it finds.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 773f7834425e83144c95fbbc553ced3c2b74b828
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:53 2005 -0700

    [PATCH] md: remove old cruft from md_k.h header file
    
    These inlines haven't been used for ages, they should go.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab904d634625ef8dc590240b7ee06c7b724e636b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:52 2005 -0700

    [PATCH] md: fix bitmap/read_sb_page so that it handles errors properly.
    
    read_sb_page() assumed that if sync_page_io fails, the device would be marked
    faultly.  However it isn't.  So in the face of error, read_sb_page would loop
    forever.
    
    Redo the logic so that this cannot happen.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71c0805cb48462c99fbe0e5fcc6c12d7b9929c09
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:51 2005 -0700

    [PATCH] md: allow md to load a superblock with feature-bit '1' set
    
    As this is used to flag an internal bitmap.
    
    Also, introduce symbolic names for feature bits.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b1e35f6d666693e8f376ce02242efca3ec09aaf
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:50 2005 -0700

    [PATCH] md: allow hot-adding devices to arrays with non-persistant superblocks.
    
    It is possibly (and occasionally useful) to have a raid1 without persistent
    superblocks.  The code in add_new_disk for adding a device to such an array
    always tries to read a superblock.
    
    This will obviously fail.
    
    So do the appropriate test and call md_import_device with
    appropriate args.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3178b0dbdf67322f6506582e494bdf553cc85c32
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:50 2005 -0700

    [PATCH] md: do not set mddev->bitmap until bitmap is fully initialised
    
    When hot-adding a bitmap, bitmap_daemon_work could get called while the bitmap
    is being created, so don't set mddev->bitmap until the bitmap is ready.
    
    This requires freeing the bitmap inside bitmap_create if creation failed
    part-way through.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 585f0dd5a955c420ff3af5193aa07d6f789bf81a
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:49 2005 -0700

    [PATCH] md: make sure bitmap_daemon_work actually does work.
    
    The 'lastrun' time wasn't being initialised, so it could be half a
    jiffie-cycle before it seemed to be time to do work again.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e6603da9b9cfb14a6aca3845227f8c59f7eeb9b
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:48 2005 -0700

    [PATCH] md: raid1_quiesce is back to front, fix it.
    
    A state of 0 mean 'not quiesced'
    A state of 1 means 'is quiesced'
    
    The original code got this wrong.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15945fee6f09bff1f86b1a735b5888dc59cf38e3
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:47 2005 -0700

    [PATCH] md: support md/linear array with components greater than 2 terabytes.
    
    linear currently uses division by the size of the smallest componenet device
    to find which device a request goes to.  If that smallest device is larger
    than 2 terabytes, then the division will not work on some systems.
    
    So we introduce a pre-shift, and take care not to make the hash table too
    large, much like the code in raid0.
    
    Also get rid of conf->nr_zones, which is not needed.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b6d287f627b5fb6a49f78f9e81649ff98c62bb7
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:47 2005 -0700

    [PATCH] md: add write-behind support for md/raid1
    
    If a device is flagged 'WriteMostly' and the array has a bitmap, and the
    bitmap superblock indicates that write_behind is allowed, then write_behind is
    enabled for WriteMostly devices.
    
    Write requests will be acknowledges as complete to the caller (via b_end_io)
    when all non-WriteMostly devices have completed the write, but will not be
    cleared from the bitmap until all devices complete.
    
    This requires memory allocation to make a local copy of the data being
    written.  If there is insufficient memory, then we fall-back on normal write
    semantics.
    
    Signed-Off-By: Paul Clements <paul.clements@SteelEye.com>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ddf9efe6708f3674f0ddfeb6425fd27bea109a2
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:45 2005 -0700

    [PATCH] md: support write-mostly device in raid1
    
    This allows a device in a raid1 to be marked as "write mostly".  Read requests
    will only be sent if there is no other option.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36fa30636fb84b209210299684e1be66d9e58217
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:45 2005 -0700

    [PATCH] md: all hot-add and hot-remove of md intent logging bitmaps
    
    Both file-bitmaps and superblock bitmaps are supported.
    
    If you add a bitmap file on the array device, you lose.
    
    This introduces a 'default_bitmap_offset' field in mddev, as the ioctl used
    for adding a superblock bitmap doesn't have room for giving an offset.  Later,
    this value will be setable via sysfs.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a07997fc34ac15a1c5dc650285d79b7604a2276
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:44 2005 -0700

    [PATCH] md: improve handling of bitmap initialisation.
    
    When we find a 'stale' bitmap, possibly because it is new, we should just
    assume every bit needs to be set, but rather base the setting of bits on the
    current state of the array (degraded and recovery_cp).
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1923b99a0f4748aa6be0b9b9523ce224a3449b17
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:43 2005 -0700

    [PATCH] md: don't allow new md/bitmap file to be set if one already exists
    
    ... otherwise we loose a reference and can never free the file.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 844e8d904a7c1446e3f040683b4a0645c3eb168f
Author: Jun'ichi Nomura <j-nomura@ce.jp.nec.com>
Date:   Fri Sep 9 16:23:42 2005 -0700

    [PATCH] dm: fix rh_dec()/rh_inc() race in dm-raid1.c
    
    Fix another bug in dm-raid1.c that the dirty region may stay in or be moved
    to clean list and freed while in use.
    
    It happens as follows:
    
       CPU0                                   CPU1
       ------------------------------------------------------------------------------
       rh_dec()
         if (atomic_dec_and_test(pending))
            <the region is still marked dirty>
                                              rh_inc()
                                                if the region is clean
                                                   mark the region dirty
                                                   and remove from clean list
            mark the region clean
            and move to clean list
                                                      atomic_inc(pending)
    
    At this stage, the region is in clean list and will be mistakenly reclaimed
    by rh_update_states() later.
    
    Signed-off-by: Jun'ichi Nomura <j-nomura@ce.jp.nec.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5dcdd80a60627371f40797426273048630dc8ca
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:41 2005 -0700

    [PATCH] md: fail IO request to md that require a barrier.
    
    md does not yet support BIO_RW_BARRIER, so be honest about it and fail
    (-EOPNOTSUPP) any such requests.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ec67ac1a399d576d48b0736096bcce7721fe3cf
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Fri Sep 9 16:23:40 2005 -0700

    [PATCH] md: fix minor error in raid10 read-balancing calculation.
    
    'this_sector' is a virtual (array) address while 'head_position' is a physical
    (device) address, so substraction doesn't make any sense.  devs[slot].addr
    should be used instead of this_sector.
    
    However, this patch doesn't make much practical different to the read
    balancing due to the effects of later code.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d327d082325a0d4afb3748ef8b59e734e57cfe4c
Author: adam radford <aradford@gmail.com>
Date:   Fri Sep 9 15:55:13 2005 -0700

    [SCSI] 3ware 9000: handle use_sg != 0 for emulated commands
    
    The attached patch updates the driver for the 3ware 9000 series to do
    the following:
    
    - Correctly handle single sgl's with use_sg = 1.
    
    This is needed with the latest scsi-block-2.6 merge otherwise the 3w-9xxx
    driver will not work.  I tested the patch James sent a few weeks back to fix
    this, and it had a bug where the request_buffer was accessed in
    twa_scsiop_execute_scsi_complete() when it was invalid.  This is a corrected
    variation of that patch.
    
    Signed-off-by: Adam Radford <linuxraid@amcc.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 59d203f9e989c81defc2cb1c559d678e16dbe684
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 20:01:25 2005 -0300

    [CCID3] Cleanup ccid3 debug calls
    
    Also use some BUG_ON where appropriate and use LIMIT_NETDEBUG for the unlikely
    cases where we, at this stage, want to know about, that in my tests hasn't
    appeared in the radar.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit dc19336c76d213fd9ae7b6a352e837f509418012
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 19:59:26 2005 -0300

    [DCCP] Only call the HC _exit() routines in dccp_v4_destroy_sock
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit d7e0fb985cb033e605c3167ff183b5e98b7f7644
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 19:58:18 2005 -0300

    [CCID3] Initialize ccid3hctx_t_ipi to 250ms
    
    To match more closely what is described in RFC 3448.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: Ian McDonald <iam4@cs.waikato.ac.nz>

commit 63aaf647529e8a56bdf31fd8f2979d4371c6a332
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Sep 9 15:55:08 2005 -0700

    Make sure that userspace does not retrieve stale asynchronous or
    completion events after destroying a CQ, QP or SRQ.  We do this by
    sweeping the event lists before returning from a destroy calls, and
    then return the number of events already reported before the destroy
    call.  This allows userspace wait until it has processed all events
    for an object returned from the kernel before it frees its context for
    the object.
    
    The ABI of the destroy CQ, destroy QP and destroy SRQ commands has to
    change to return the event count, so bump the ABI version from 1 to 2.
    The userspace libibverbs library has already been updated to handle
    both the old and new ABI versions.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 486a153f0e294f7cc735838edcb6b32e623cbe52
Merge: 9c8550e... f64a227...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 15:46:49 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/sam/kbuild

commit 2e9f7cb7869059e55cd91f5e23c6380f3763db56
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Sep 9 15:45:57 2005 -0700

    [PATCH] IB: Add struct for ClassPortInfo
    
    Add structure definition for ClassPortInfo format.  This is
    needed for (at least) handling CM redirects.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9c8550ee25e26d14a8f0fe1b761a676e23fe3cf0
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 15:43:46 2005 -0700

    Remove "must_check" attributes in PCI-land
    
    Don't just irritate all other kernel developers.  Fix the users first,
    then you can re-introduce the must-check infrastructure to avoid new
    cases creeping in.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac5b8b6f22118620cd1133d9943b1f31dc40a913
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 15:42:34 2005 -0700

    Preempt-safe RCU file usage
    
    Fix up fs/compat.c fixes.

commit f0eca9626c6becb6fc56106b2e4287c6c784af3d
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Fri Sep 9 00:57:14 2005 +0200

    [PATCH] Update PCI IOMEM allocation start
    
    This fixes the problem with "Averatec 6240 pcmcia_socket0: unable to
    apply power", which was due to the CardBus IOMEM register region being
    allocated at an address that was actually inside the RAM window that had
    been reserved for video frame-buffers in an UMA setup.
    
    The BIOS _should_ have marked that region reserved in the e820 memory
    descriptor tables, but did not.
    
    It is fixed by rounding up the default starting address of PCI memory
    allocations, so that we leave a bigger gap after the final known memory
    location.  The amount of rounding depends on how big the unused memory
    gap is that we can allocate IOMEM from.
    
    Based on example code by Linus.
    
    Acked-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbed8eee70cf7e11fbf231afafc0ccb313acc62e
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Fri Sep 9 15:24:04 2005 -0700

    [PATCH] IB: Move SA attributes to ib_sa.h
    
    SA: Move SA attributes to ib_sa.h so are accessible to more than
    sa_query.c. Also, remove deprecated attributes and add one missing one.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 41d0ab2a7dfe9e25504169c98eac5e84e5509e3d
Merge: a4531ed... cdb9b9f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 15:17:00 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit a4531edd75522804dd2b268d8ccc5eaa70748011
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 15:10:52 2005 -0700

    Fix up lost patch in compat_sys_select() for new RCU files world order
    
    Andrew lost this in patch reject resolution, and never noticed, since
    the compat code isn't in use on x86.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7ebbbce366c02e5657ac6b6059933fe0353b175
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Sep 9 16:22:50 2005 +0200

    [SCSI] SAS transport class
    
    The SAS transport class contains common code to deal with SAS HBAs, an
    aproximated representation of SAS topologies in the driver model,
    and various sysfs attributes to expose these topologies and managment
    interfaces to userspace.
    
    In addition to the basic SCSI core objects this transport class introduces
    two additional intermediate objects:  The SAS PHY as represented by struct
    sas_phy defines an "outgoing" PHY on a SAS HBA or Expander, and the SAS
    remote PHY represented by struct sas_rphy defines an "incoming" PHY on a
    SAS Expander or end device.  Note that this is purely a software concept, the
    underlying hardware for a PHY and a remote PHY is the exactly the same.
    
    There is no concept of a SAS port in this code, users can see what PHYs
    form a wide port based on the port_identifier attribute, which is the same
    for all PHYs in a port.
    
    This submission doesn't handle hot-plug addition or removal of SAS devices
    and thus doesn't do scanning in a workqueue yet, that will be added in
    phase2 after this submission.  In a third phase I will add additional
    managment infrastructure.
    
    I think this submission is ready for 2.6.14, but additional comments are
    of course very welcome.
    
    I'd like to thanks James Smart a lot for his very useful input on the
    design.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 942fc2fb73f2cac53484ebaf1c4f9af7aefaca83
Author: Douglas Gilbert <dougg@torque.net>
Date:   Fri Sep 9 20:07:32 2005 +1000

    [SCSI] permit READ DEFECT DATA in block/scsi_ioctl
    
    The soon to be released smartmontools 5.34 uses the
    READ DEFECT DATA command on SCSI disks. A disk that
    has defect list entries (or worse, an increasing number
    of them) is at risk.
    
    Currently the first invocation of smartctl causes this:
       scsi: unknown opcode 0x37
    message to appear the console and in the log.
    
    The READ DEFECT DATA SCSI command does not change
    the state of a disk. Its opcode (0x37) is valid for
    SBC devices (e.g. disks) and SMC-2 devices (media
    changers) where it is called INITIALIZE STATUS ELEMENT
    WITH RANGE and again doesn't change the external state
    of the device.
    
    Changelog:
      - mark SCSI opcode 0x37 (READ DEFECT DATA) as
        safe_for_read
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c8e71d72026ed4c6ba0fdfd7eebd865f4fd1415
Author: Douglas Gilbert <dougg@torque.net>
Date:   Fri Sep 9 17:18:57 2005 +1000

    [SCSI] sg: do not set VM_IO flag on mmap-ed pages
    
    Further to the problem discussed in this post:
    http://marc.theaimsgroup.com/?l=linux-scsi&m=112540053711489&w=2
    
    It seems that the sg driver does not need to set the VM_IO flag
    on pages that it memory maps to the user space since they are
    not from the IO space. Ahmed Teirelbar <ahmed.teirelbar@adic.com>
    wants the facility and has tested this patch as I have without
    adverse effects.
    
    The oops protection is still important. Some users really did
    try and use dio transfers from the sg driver to memory mapped
    IO space (on a video capture card if my memory serves) during the
    lk 2.4 series. I'm not sure how successful it was but that will
    now be politely refused in lk 2.6.13+ .
    
    Changelog:
       - set the page flags for sg's reserved buffer mmap-ed
         to the user space to VM_RESERVED (rather than
         VM_RESERVED | VM_IO )
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6b7839007098a6b5612d31690e11277d4242e6ae
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Sep 6 21:23:25 2005 +0200

    [PATCH] I2C: i2c-nforce2: drop unused define
    
    One more cleanup in i2c-nforce2.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2251cf1a4b37bd483501614c2d78f5b8286f20d7
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Sep 4 22:52:17 2005 +0200

    [PATCH] hwmon: w83627hf: no reset by default
    
    Make the reset of the chips in w83627hf optional rather than the
    default. This reset has been causing trouble several times already. It
    may even go completely away unless it proves to be useful to at least
    one user.
    
    Closes bug #5168:
    http://bugzilla.kernel.org/show_bug.cgi?id=5168
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0db9714a0ca2a1a36721a2e90fbfcbdf3d5ff117
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Sep 6 21:21:54 2005 +0200

    [PATCH] hwmon: Update smsc47m1 head comment
    
    Update the head comment of the smsc47m1 driver to mention all the
    supported devices.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b51f64c0de0355338480093abb35d5232f6d349a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Sep 8 22:42:36 2005 +0200

    [PATCH] hwmon: fix sis5595, via686a force_addr module parameter
    
    Recent changes to the i2c-isa design broke the force_addr parameter of
    two hardware monitoring drivers as a side effect: sis5595 and via686a.
    The last address test was in fact useless beforehand, and the redesign
    turned it into a bug. I'm sorry about that.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 788ce43aa1ad7158f894b6bb3df8ba2f63794c20
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Sep 9 13:40:23 2005 -0500

    [SCSI] SCSI core: fix leakage of scsi_cmnd's
    
    Actually, just one problem and one cosmetic fix:
    
    1) We need to dequeue for the loop and kill case (it seems easiest
    simply to dequeue in the scsi_kill_request() routine)
    2) There's no real need to drop the queue lock.  __scsi_done() is lock
    agnostic, so since there's no requirement, let's just leave it in to
    avoid any locking issues.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8ccc457722ba226ea72fca6f9ba3b54535d4749e
Merge: 20dd026... 5dce225...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Sep 9 14:26:01 2005 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit 1d8674edb534a3c5cb549bfde5a39fa5598cb3bc
Merge: d99901d... cb7b593...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 14:25:22 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit d99901d6fdfb4098b9996de89ffbbae890e08288
Author: Kirill Korotaev <dev@sw.ru>
Date:   Fri Sep 9 13:59:48 2005 +0400

    [PATCH] Lost sockfd_put() in routing_ioctl()
    
    This patch adds lost sockfd_put() in 32bit compat rounting_ioctl() on
    64bit platforms
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Maxim Giryaev <gem@sw.ru>
    Signed-off-By: Linus Torvalds <torvalds@osdl.org>

commit 20dd026d7f5a6972dc78b4928a99620001fa547d
Author: Christophe Lucas <clucas@rotomalug.org>
Date:   Thu Sep 8 08:55:53 2005 +0200

    [PATCH] printk : Documentation/firmware_class/firmware_sample_driver.c
    
    printk() calls should include appropriate KERN_* constant.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 49a1fd60d2a8e671222515cf6055e91781278517
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Aug 19 17:05:21 2005 -0400

    [PATCH] aoe [2/2]: update driver version number to twelve
    
    Update driver version number to twelve.
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e39526e6e7a96904c9f1c85375d49ff437c18c44
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Aug 19 16:54:43 2005 -0400

    [PATCH] aoe [1/2]: support 16 AoE slot addresses per AoE shelf
    
    Change the number of supported AoE slot addresses per AoE shelf
    address to 16.
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 860e1d6b46bd4cbc67d8d065f0f682143513382f
Author: Robert Love <rml@novell.com>
Date:   Wed Aug 31 23:57:59 2005 -0400

    [PATCH] updated hdaps driver.
    
    Driver for the IBM Hard Drive Active Protection System (HDAPS), an
    accelerometer found in most modern ThinkPads.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 35311d6478077f7bfe35c1c653193e658bf32686
Author: Kirill Korotaev <dev@sw.ru>
Date:   Fri Sep 9 13:05:53 2005 -0700

    [PATCH] lost fput in 32bit ioctl on x86-64
    
    This adds a lost fput in 32bit tiocgdev ioctl on x86-64
    
    [ chrisw: Updated to use fget_light/fput_light ]
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Maxim Giryaev <gem@sw.ru>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f64a227b6b5cc1f8cc7f6ef9cc3351343636bac9
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 23:10:54 2005 +0200

    kbuild: um fix so it compile with generic asm-offsets.h support
    
    um has it own set of files for asm-offsets. So for now the
    gen-asm-offset macro is just duplicated in the um Makefile.
    
    This may well be the final solution since um is a bit special compared
    to other architectures - time will tell.
    
    Also added a dummy arch/um/kernel/asm-offsets.h file to keep kbuild happy.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit b95adac775aad29f79ffbbaf5db0e4d8d57f2714
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 21:42:25 2005 +0100

    [PATCH] trivial iomem annotations in qla2xxx/qla_dbg.c
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87162a28acceda05dadf10a8333183f6d2b55265
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 20:36:43 2005 +0100

    [PATCH] trivial __user annotations (md)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01703597ead8194b46932ba2bcda897e872e91e0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 20:29:12 2005 +0100

    [PATCH] trivial __user annotations (evdev)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21b29229086bcaf14c02b160c253095f3bb95f99
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 20:26:01 2005 +0100

    [PATCH] trivial __user cleanup (video1394)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18fb9442576c79fc2f4bca1fd90c3aa4d1115e97
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 20:14:05 2005 +0100

    [PATCH] trivial __user annotations (ipmi)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9f6a0dd54efea2a5d57a27e6c232f9197c25154
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Sep 9 13:10:41 2005 -0700

    [PATCH] more SPIN_LOCK_UNLOCKED -> DEFINE_SPINLOCK conversions
    
    This converts the final 20 DEFINE_SPINLOCK holdouts.  (another 580 places
    are already using DEFINE_SPINLOCK).  Build tested on x86.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d06afab73a75f40ae2864e6c296356bab1ab473
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Sep 9 13:10:40 2005 -0700

    [PATCH] timer initialization cleanup: DEFINE_TIMER
    
    Clean up timer initialization by introducing DEFINE_TIMER a'la
    DEFINE_SPINLOCK.  Build and boot-tested on x86.  A similar patch has been
    been in the -RT tree for some time.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c352bdf048811b8128019ffc1e886161e09c11c
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:39 2005 -0700

    [PATCH] FUSE: don't allow restarting of system calls
    
    This patch removes ability to interrupt and restart operations while there
    hasn't been any side-effect.
    
    The reason: applications.  There are some apps it seems that generate
    signals at a fast rate.  This means, that if the operation cannot make
    enough progress between two signals, it will be restarted for ever.  This
    bug actually manifested itself with 'krusader' trying to open a file for
    writing under sshfs.  Thanks to Eduard Czimbalmos for the report.
    
    The problem can be solved just by making open() uninterruptible, because in
    this case it was the truncate operation that slowed down the progress.  But
    it's better to solve this by simply not allowing interrupts at all (except
    SIGKILL), because applications don't expect file operations to be
    interruptible anyway.  As an added bonus the code is simplified somewhat.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8254798199332966e2ab647380c990193af7e854
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:38 2005 -0700

    [PATCH] FUSE: add fsync operation for directories
    
    This patch adds a new FSYNCDIR request, which is sent when fsync is called
    on directories.  This operation is available in libfuse 2.3-pre1 or
    greater.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b36c31ba95f0fe0a03c727300d9c4c54438a5636
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:38 2005 -0700

    [PATCH] fuse: don't update file times
    
    Don't change mtime/ctime/atime to local time on read/write.  Rather invalidate
    file attributes, so next stat() will force a GETATTR call.  Bug reported by
    Ben Grimm.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45323fb76465a9576220c7427dbac7b1e7ad3caf
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:37 2005 -0700

    [PATCH] fuse: more flexible caching
    
    Make data caching behavior selectable on a per-open basis instead of
    per-mount.  Compatibility for the old mount options 'kernel_cache' and
    'direct_io' is retained in the userspace library (version 2.4.0-pre1 or
    later).
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04730fef1f9c7277e5c730b193e681ac095b0507
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:36 2005 -0700

    [PATCH] fuse: transfer readdir data through device
    
    This patch removes a long lasting "hack" in FUSE, which used a separate
    channel (a file descriptor refering to a disk-file) to transfer directory
    contents from userspace to the kernel.
    
    The patch adds three new operations (OPENDIR, READDIR, RELEASEDIR), which
    have semantics and implementation exactly maching the respective file
    operations (OPEN, READ, RELEASE).
    
    This simplifies the directory reading code.  Also disk space is not
    necessary, which can be important in embedded systems.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 413ef8cb302511d8e995e2b0e5517ee1a65b9c77
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:35 2005 -0700

    [PATCH] FUSE - direct I/O
    
    This patch adds support for the "direct_io" mount option of FUSE.
    
    When this mount option is specified, the page cache is bypassed for
    read and write operations.  This is useful for example, if the
    filesystem doesn't know the size of files before reading them, or when
    any kind of caching is harmful.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a53368277efa2d80dd2206dddc1f4b19ef0c32a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:34 2005 -0700

    [PATCH] fuse: stricter mount option checking
    
    Check for the presence of all mandatory mount options.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87729a5514e855ce2c71e3e33833a106b8caf2ae
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:34 2005 -0700

    [PATCH] FUSE: tighten check for processes allowed access
    
    This patch tightens the check for allowing processes to access non-privileged
    mounts.  The rational is that the filesystem implementation can control the
    behavior or get otherwise unavailable information of the filesystem user.  If
    the filesystem user process has the same uid, gid, and is not suid or sgid
    application, then access is safe.  Otherwise access is not allowed unless the
    "allow_other" mount option is given (for which policy is controlled by the
    userspace mount utility).
    
    Thanks to everyone linux-fsdevel, especially Martin Mares who helped uncover
    problems with the previous approach.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db50b96c0f28a21c5a4a19ecaba12d0972aab06a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:33 2005 -0700

    [PATCH] FUSE - readpages operation
    
    This patch adds readpages support to FUSE.
    
    With the help of the readpages() operation multiple reads are bundled
    together and sent as a single request to userspace.  This can improve
    reading performace.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06663267b4b1e85ece73236ea720355668d4f736
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:32 2005 -0700

    [PATCH] FUSE: add padding
    
    Add padding to structures to make sizes the same on 32bit and 64bit archs.
    Initial testing and test machine generously provided by Franco Broi.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92a8780e1136c5ca0c7ed940000d399943d1576e
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:31 2005 -0700

    [PATCH] FUSE - extended attribute operations
    
    This patch adds the extended attribute operations to FUSE.
    
    The following operations are added:
    
     o getxattr
     o setxattr
     o listxattr
     o removexattr
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e9a4ed9396e9c31139721b639550ffb1df17065
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:31 2005 -0700

    [PATCH] FUSE - mount options
    
    This patch adds miscellaneous mount options to the FUSE filesystem.
    
    The following mount options are added:
    
     o default_permissions:  check permissions with generic_permission()
     o allow_other:          allow other users to access files
     o allow_root:           allow root to access files
     o kernel_cache:         don't invalidate page cache on open
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6aeadeda22a9aa322fdfcd3f4c69ccf0da5cbdd
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:30 2005 -0700

    [PATCH] FUSE - file operations
    
    This patch adds the file operations of FUSE.
    
    The following operations are added:
    
     o open
     o flush
     o release
     o fsync
     o readpage
     o commit_write
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e6268db496a2592e89457537ea54a496feabb77
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:29 2005 -0700

    [PATCH] FUSE - read-write operations
    
    This patch adds the write filesystem operations of FUSE.
    
    The following operations are added:
    
     o setattr
     o symlink
     o mknod
     o mkdir
     o create
     o unlink
     o rmdir
     o rename
     o link
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5e5558e923f35839108a12718494ecb73fb782f
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:28 2005 -0700

    [PATCH] FUSE - read-only operations
    
    This patch adds the read-only filesystem operations of FUSE.
    
    This contains the following files:
    
     o dir.c
        - directory, symlink and file-inode operations
    
    The following operations are added:
    
     o lookup
     o getattr
     o readlink
     o follow_link
     o directory open
     o readdir
     o directory release
     o permission
     o dentry revalidate
     o statfs
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 334f485df85ac7736ebe14940bf0a059c5f26d7d
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:27 2005 -0700

    [PATCH] FUSE - device functions
    
    This adds the FUSE device handling functions.
    
    This contains the following files:
    
     o dev.c
        - fuse device operations (read, write, release, poll)
        - registers misc device
        - support for sending requests to userspace
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8a5ba45457e4a22aa39c939121efd7bb6c76672
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:26 2005 -0700

    [PATCH] FUSE - core
    
    This patch adds FUSE core.
    
    This contains the following files:
    
     o inode.c
        - superblock operations (alloc_inode, destroy_inode, read_inode,
          clear_inode, put_super, show_options)
        - registers FUSE filesystem
    
     o fuse_i.h
        - private header file
    
    Requirements
    ============
    
     The most important difference between orinary filesystems and FUSE is
     the fact, that the filesystem data/metadata is provided by a userspace
     process run with the privileges of the mount "owner" instead of the
     kernel, or some remote entity usually running with elevated
     privileges.
    
     The security implication of this is that a non-privileged user must
     not be able to use this capability to compromise the system.  Obvious
     requirements arising from this are:
    
      - mount owner should not be able to get elevated privileges with the
        help of the mounted filesystem
    
      - mount owner should not be able to induce undesired behavior in
        other users' or the super user's processes
    
      - mount owner should not get illegitimate access to information from
        other users' and the super user's processes
    
     These are currently ensured with the following constraints:
    
      1) mount is only allowed to directory or file which the mount owner
        can modify without limitation (write access + no sticky bit for
        directories)
    
      2) nosuid,nodev mount options are forced
    
      3) any process running with fsuid different from the owner is denied
         all access to the filesystem
    
     1) and 2) are ensured by the "fusermount" mount utility which is a
        setuid root application doing the actual mount operation.
    
     3) is ensured by a check in the permission() method in kernel
    
     I started thinking about doing 3) in a different way because Christoph
     H. made a big deal out of it, saying that FUSE is unacceptable into
     mainline in this form.
    
     The suggested use of private namespaces would be OK, but in their
     current form have many limitations that make their use impractical (as
     discussed in this thread).
    
     Suggested improvements that would address these limitations:
    
       - implement shared subtrees
    
       - allow a process to join an existing namespace (make namespaces
         first-class objects)
    
       - implement the namespace creation/joining in a PAM module
    
     With all that in place the check of owner against current->fsuid may
     be removed from the FUSE kernel module, without compromising the
     security requirements.
    
     Suid programs still interesting questions, since they get access even
     to the private namespace causing some information leak (exact
     order/timing of filesystem operations performed), giving some
     ptrace-like capabilities to unprivileged users.  BTW this problem is
     not strictly limited to the namespace approach, since suid programs
     setting fsuid and accessing users' files will succeed with the current
     approach too.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04578f174f43d29b569500f01ba772afa4016330
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Sep 9 13:10:22 2005 -0700

    [PATCH] FUSE - MAINTAINERS, Kconfig and Makefile changes
    
    This patch adds FUSE filesystem to MAINTAINERS, fs/Kconfig and
    fs/Makefile.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e272d50688a1cae66a12426da128483197843d9f
Author: Ben Dooks <ben-lkinux@fluff.org>
Date:   Fri Sep 9 13:10:20 2005 -0700

    [PATCH] Documentation/sparse snapshot URL
    
    The URL for Documentation/sparse is wrong now that it is in git.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ea626aac1ab9a34aed62dc651070cf1e5134247
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Fri Sep 9 13:10:19 2005 -0700

    [PATCH] VFS: update documentation
    
    This patch brings the now out-of-date Documentation/filesystems/vfs.txt
    back to life.  Thanks to Carsten Otte, Trond Myklebust, and Anton
    Altaparmakov for their help on updating this documentation.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 952b649272f96d58817be889ed4b932f638a4dbe
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Fri Sep 9 13:10:19 2005 -0700

    [PATCH] Kdump: Documentation Update
    
    There are minor changes in command line options in kexec-tools for kdump.
    This patch updates the documentation to reflect those changes.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d01a82e46a8dd18233121a6bc140e5576649583
Author: Martin Waitz <tali@admingilde.org>
Date:   Fri Sep 9 13:10:17 2005 -0700

    [PATCH] DocBook: fix kernel-api documentation generation
    
    This patch changes a macro definition so that kernel-doc can understand it.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80e93effce55044c5a7fa96e8b313640a80bd4e9
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Sep 9 13:10:16 2005 -0700

    [PATCH] update kfree, vfree, and vunmap kerneldoc
    
    This patch clarifies NULL handling of kfree() and vfree().  I addition,
    wording of calling context restriction for vfree() and vunmap() are changed
    from "may not" to "must not."
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Acked-by: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af97c7220a0376beed827e72e3bb27731af7109d
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Sep 9 13:10:15 2005 -0700

    [PATCH] docs: fix misinformation about overcommit_memory
    
    Someone complained about the docs for vm_overcommit_memory being wrong.
    This patch copies the text from the vm documentation into procfs.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddb99f3d35b178f0715aab2f9d9ab25f61814347
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Sep 9 13:10:13 2005 -0700

    [PATCH] ISA DMA API documentation
    
    Documentation for how the ISA DMA controller is handled in the kernel.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 754c79768eed257dabd922b85cb9271822e50794
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Sep 9 13:10:12 2005 -0700

    [PATCH] Documentation: how to apply patches for various trees
    
    Add a new document describing the major kernel trees and how to apply their
    patches.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6c17ea4eff360359d1741272028610035bb2da9
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Fri Sep 9 13:10:11 2005 -0700

    [PATCH] Update Documentation/DocBook/kernel-hacking.tmpl
    
    Update the hacking guide, before CONFIG_PREEMPT_RT goes in and it needs
    rewriting again.
    
    Changes include modernization of quotes, removal of most references to
    bottom halves (some mention required because we still use bh in places to
    mean softirq).
    
    It would be nice to have a discussion of sparse and various annotations.
    Please send patches straight to akpm.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f92273c1653feadc8231c0bc4fa37fd4dc1c180f
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Sep 9 13:10:10 2005 -0700

    [PATCH] s3c2410fb: Platform support for ARM S3C2410 framebuffer driver
    
    This patch add the plateform specific stuff needed to configure and use the
    driver.
    
    Signed-Off-By: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Ben Dooks <ben@trinity.fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20fd5767689124a920c1deb9c380304e082f026c
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Sep 9 13:10:07 2005 -0700

    [PATCH] s3c2410fb: ARM S3C2410 framebuffer driver
    
    This set of two patches add support for the framebuffer of the Samsung S3C2410
    ARM SoC.  This driver was started about one year ago and is now used on iPAQ
    h1930/h1940, Acer n30 and probably other s3c2410-based machines I'm not aware
    of.  I've also heard yesterday that it's working also on iPAQ rx3715/rx3115
    (s3c2440-based machines).
    
    Signed-Off-By: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Ben Dooks <ben@trinity.fluff.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b4abffbadf728996fb9243b4af1df48dd771e86
Author: Olaf Hering <olh@suse.de>
Date:   Fri Sep 9 13:10:06 2005 -0700

    [PATCH] quiet non-x86 option ROM warnings
    
    Quiet an incorrect warning in aty128fb and radeonfb about the PCI ROM
    content.  Macs work just find without that signature.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63edceac69889e48b1b39f40ca0a4c00fdc3bbb0
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:05 2005 -0700

    [PATCH] i810fb: Stop LCD displays from flickering
    
    Stop LCD displays from flickering during high loads.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f6ae84b2315c2fa8a4110b09a1c0f3dca92674
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:04 2005 -0700

    [PATCH] i810fb: Add i2c/DDC support
    
    Add ddc/i2c support for i810fb.  This will allow the driver to get display
    information, especially for monitors with fickle timings.  The i2c support
    depends on CONFIG_FB_I810_GTF.
    
    Changed __init* to __devinit*
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 829e79b680210c4f4de435af6e1f90451922fc7d
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:04 2005 -0700

    [PATCH] fbcon: Break up bit_putcs into its component functions
    
    The function bit_putcs() in drivers/video/console/bitblit.c is becoming large.
     Break it up into its component functions (bit_putcs_unaligned and
    bit_putcs_aligned).
    
    Incorporated fb_pad_aligned_buffer() optimization by Roman Zippel.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba44cd2d8abc3271a608b42cdbf55e1e575e2ba5
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 9 13:10:03 2005 -0700

    [PATCH] pxafb: Add hsync time reporting hook
    
    To solve touchscreen interference problems devices like the Sharp Zaurus
    SL-C3000 need to know the length of the horitzontal sync pulses.  This patch
    adds a hook to pxafb so the touchscreen driver can function correctly.
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61ab7903b8cd772d3bfb28bc26d02c599cfb0e5b
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:02 2005 -0700

    [PATCH] fbdev: Initialize var structure in calc_mode_timings
    
    The var structure in calc_mode_timings is not properly initialized (zero set)
    which leads to undefined behavior when it is passed to fb_get_mode().
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c1cd6fd5efeb95603e37f35b5da293b452d8b64
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:01 2005 -0700

    [PATCH] nvidiafb: Fixed mirrored characters in big endian machines
    
    nvidiafb_imageblit converts the bitdata stream from big_endian to little
    endian.  This produces mirrored characters when machine is big_endian.  Do not
    endian convert on big endian machines.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88fb2c6efba8d9e941e9fb61f37dbeafc869fd75
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:10:00 2005 -0700

    [PATCH] fbcon: Stop cursor timer if console is inactive
    
    If console is blanked or in KD_GRAPHICS mode, delete cursor timer.  No sense
    flashing the cursor when there's nothing to be seen.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c52890cc366429798b3c97266d0a377810e08400
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:09:59 2005 -0700

    [PATCH] savagefb: Make mode_option available when compiled as a module
    
    Make "mode_option" available when compiled as a module.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 948a95ff5efb018d08d104c283081dba6472f801
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:09:59 2005 -0700

    [PATCH] nvidiafb: Use CVT to get mode for digital displays
    
    If no EDID block is probed, if the display is digital and if no mode option is
    specified by the user, get the timings by CVT instead of using the global mode
    database.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96fe6a2109db29cd15b90a093c16e6cb4b19371a
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:09:58 2005 -0700

    [PATCH] fbdev: Add VESA Coordinated Video Timings (CVT) support
    
    The Coordinated Video Timings (CVT) is the latest standard approved by VESA
    concerning video timings generation.  It addresses the limitation of GTF which
    is designed mainly for CRT displays.  CRT's have a high blanking requirement
    (as much as 25% of the horizontal frame length) which artificially increases
    the pixelclock.  Digital displays, on the other hand, needs to conserve the
    pixelclock as much as possible.  The GTF also does not take into account the
    different aspect ratios in its calculation.
    
    The new function added is fb_find_mode_cvt().  It is called by fb_find_mode()
    if it recognizes a mode option string formatted for CVT.  The format is:
    
    <xres>x<yres>[M][R][-<bpp>][<at-sign><refresh>][i][m]
    
    The 'M' tells the function to calculate using CVT.  On it's own, it will
    compute a timing for CRT displays at 60Hz.  If the 'R' is specified, 'reduced
    blanking' computation will be used, best for flatpanels.  The 'i' and the 'm'
    is for 'interlaced mode' and 'with margins' respectively.
    
    To determine if CVT was used, check for dmesg for something like this:
    
    CVT Mode - <pix>M<n>[-R], ie: .480M3-R  (800x600 reduced blanking)
    
    where: pix - product of xres and yres, in MB
        M   - is a CVT mode
        n   - the aspect ratio (3 - 4:3; 4 - 5:4; 9 - 16:9, 15:9; A - 16:10)
        -R   - reduced blanking
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdb9b9f730eac4f947a2c552806a3a550bf019ef
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Sep 6 09:31:03 2005 +1000

    [PATCH] PCI: Small rearrangement of PCI probing code
    
    This patch makes some small rearrangements of the PCI probing code in
    order to make it possible for arch code to set up the PCI tree
    without needing to duplicate code from the PCI layer unnecessarily.
    PPC64 will use this to set up the PCI tree from the Open Firmware
    device tree, which we need to do on logically-partitioned pSeries
    systems.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c87f883edbe969ca68c21dfa8a29674c828c22a3
Author: Rumen Ivanov Zarev <rzarev@its.caltech.edu>
Date:   Tue Sep 6 13:39:32 2005 -0700

    [PATCH] PCI: Unhide SMBus on Compaq Evo N620c
    
    Trivial patch against 2.6.13 to unhide SMBus on Compaq Evo N620c laptop using
    Intel 82855PM chipset.
    
    Signed-off-by: Rumen Zarev <rzarev@caltech.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c56075e60caaff1314decdb61b72ef576915270
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Tue Aug 16 17:32:04 2005 -0700

    [PATCH] PCI: Fix PCI bus mastering enable problem in pciehp
    
    Martin Franc reported that the pciehp driver was not enabling bus
    master capability on his hot-plugged card. pciehprm_enable_card()
    was updating the PCI command register only if _HPP indicated a
    value for SERR or PERR that was different from the current setting.
    I don't have hardware that reproduces this problem, but Martin
    reports that this patch fixes the problem for him.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    From rzarev@its.caltech.edu Tue Sep  6 18:29:50 2005
    Date: Tue, 6 Sep 2005 13:39:32 -0700 (PDT)
    From: Rumen Ivanov Zarev <rzarev@its.caltech.edu>
    Message-Id: <200509062039.j86KdWMr014934@inky.its.caltech.edu>
    To: gregkh@suse.de
    Subject: PCI: Unhide SMBus on Compaq Evo N620c
    Cc: linux-kernel@vger.kernel.org
    
    Trivial patch against 2.6.13 to unhide SMBus on Compaq Evo N620c laptop using
    Intel 82855PM chipset.
    
    Signed-off-by: Rumen Zarev <rzarev@caltech.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    ---
     drivers/pci/quirks.c |    6 ++++++
     1 file changed, 6 insertions(+)
    
    --- gregkh-2.6.orig/drivers/pci/quirks.c	2005-09-09 10:28:55.000000000 -0700
    +++ gregkh-2.6/drivers/pci/quirks.c	2005-09-09 13:51:44.000000000 -0700
    @@ -876,6 +876,12 @@ static void __init asus_hides_smbus_host
                            case 0xC00C: /* Samsung P35 notebook */
                                    asus_hides_smbus = 1;
                            }
    +	} else if (unlikely(dev->subsystem_vendor == PCI_VENDOR_ID_COMPAQ)) {
    +		if (dev->device == PCI_DEVICE_ID_INTEL_82855PM_HB)
    +			switch(dev->subsystem_device) {
    +			case 0x0058: /* Compaq Evo N620c */
    +				asus_hides_smbus = 1;
    +			}
     	}
     }
     DECLARE_PCI_FIXUP_HEADER(PCI_VENDOR_ID_INTEL,	PCI_DEVICE_ID_INTEL_82845_HB,	asus_hides_smbus_hostbridge );

commit 5251bffc9b4ca699993c79166adf02faf1bbc043
Author: Daniel Burcaw <dburcaw@terrasoftsolutions.com>
Date:   Fri Sep 9 13:04:59 2005 -0700

    [PATCH] radeonfb: Only request resources we need
    
    This patch changes radeon to request only resources 0 and 2 instead of all
    3.  This works around problems with some setups where BAR 1 (IO BAR) has
    not been assigned by the firmware since it's not used on the machine and
    the kernel fails to assign something to it due to the card being between a
    P2P bridge that was configured without an IO range at all.
    
    This typically fixes radeonfb on some Apple Xserve G5 machines
    
    Signed-off-by: Daniel Burcaw <dburcaw@terrasoftsolutions.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5eb5c1ea919f3f717236c5d0892f9c37f19de37
Author: Knut Petersen <Knut_Petersen@t-online.de>
Date:   Fri Sep 9 13:04:59 2005 -0700

    [PATCH] framebuffer: bit_putcs() optimization for 8x* fonts
    
    This trivial patch gives a performance boost to the framebuffer console
    
    Constructing the bitmaps that are given to the bitblit functions of the
    framebuffer drivers is time consuming.  Here we avoide a call to the slow
    fb_pad_aligned_buffer().  The patch replaces that call with a simple but
    much more efficient bytewise copy.
    
    The kernel spends a significant time at this place if you use 8x* fonts.
    Every pixel displayed on your screen is prepared here.
    
    Some benchmark results:
    
    Displaying a file of 2000 lines with 160 characters each takes 889 ms
    system time using cyblafb on my system (Im using a 1280x1024 video mode,
    resulting in a 160x64 character console)
    
    Displaying the same file with the enclosed patch applied to 2.6.13 only
    takes 760 ms system time, saving 129 ms or 14.5%.
    
    Font widths other than 8 are not affected.
    
    The advantage and correctness of this patch should be obvious.
    
    Signed-off-by: Knut Petersen <Knut_Petersen@t-online.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fa68eae9f8291a98bfe00b94b78f72eb253165a
Author: Knut Petersen <Knut_Petersen@t-online.de>
Date:   Fri Sep 9 13:04:56 2005 -0700

    [PATCH] framebuffer: new driver for cyberblade/i1 graphics core
    
    This is a framebuffer driver for the Cyberblade/i1 graphics core.
    
    Currently tridenfb claims to support the cyberblade/i1 graphics core.  This
    is of very limited truth.  Even vesafb is faster and provides more working
    modes and a much better quality of the video signal.  There is a great
    number of bugs in tridentfb ...  but most often it is impossible to decide
    if these bugs are real bugs or if fixing them for the cyberblade/i1 core
    would break support for one of the other supported chips.
    
    Tridentfb seems to be unmaintained,and documentation for most of the
    supported chips is not available.  So "fixing" cyberblade/i1 support inside
    of tridentfb was not an option, it would have caused numerous
    if(CYBERBLADEi1) else ...  cases and would have rendered the code to be
    almost unmaintainable.
    
    A first version of this driver was published on 2005-07-31.  A fix for a
    bug reported by Jochen Hein was integrated as well as some changes
    requested by Antonino A.  Daplas.
    
    A message has been added to tridentfb to inform current users of tridentfb
    to switch to cyblafb if the cyberblade/i1 graphics core is detected.
    
    This patch is one logical change, but because of the included documentation
    it is bigger than 70kb.  Therefore it is not sent to lkml and
    linux-fbdev-devel,
    
    Signed-off-by: Knut Petersen <Knut_Petersen@t-online.de>
    Cc: Muli Ben-Yehuda <mulix@mulix.org>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6062bfa1644f401c08e78d5c8a161f7d11c5c830
Author: Olaf Hering <olh@suse.de>
Date:   Fri Sep 9 13:04:55 2005 -0700

    [PATCH] better error handing in savagefb_probe
    
    err remains uninitialized of pci_request_regions fails.
    
    Found by Thorsten Kukuk, I added a few more checks.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 544393fe584d333480659a4bed30f5295355df11
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Fri Sep 9 13:04:45 2005 -0700

    [PATCH] sisfb update
    
    This lifts sisfb from version 1.7.17 to version 1.8.9. Changes include:
    
    - Added support for XGI V3XT, V5, V8, Z7 chipsets, including POSTing of
      all of these chipsets.
    
    - Added support for latest SiS chipsets (761).
    
    - Added support for SiS76x memory "hybrid" mode.
    
    - Added support for new LCD resolutions (eg 1280x854, 856x480).
    
    - Fixed support for 320x240 STN panels (for embedded devices).
    
    - Fixed many HDTV modes (525p, 750p, 1080i).
    
    - Fixed PCI config register reading/writing to use proper kernel
      functions for this purpose.
    
    - Fixed PCI ROM handling to use the kernel's proper functions.
    
    - Removed lots of "typedef"s.
    
    - Removed lots of code which was for X.org/XFree86 only.
    
    - Fixed coding style in many places.
    
    - Removed lots of 2.4 cruft.
    
    - Reduced stack size by unifying two previously separate structs into
      one.
    
    - Added new hooks for memory allocation (for DRM).  Now the driver can
      truly handle multiple cards, including memory management.
    
    - Fixed numerous minor bugs.
    
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c06e2aa6339112befdc87b350b8bf712890d7a7
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Sep 9 13:04:42 2005 -0700

    [PATCH] matroxfb: read MGA PInS data on PowerPC
    
    This updates the matroxfb code so that it can find the PInS data embedded
    in the BIOS on PowerPC cards.  The process for finding the data is
    different on OpenFirmware cards than on x86 cards, and the code for doing
    so was missing.
    
    After patching, building, installing, and booting a kernel, you should grep
    for "PInS" in /var/log/messages.  You should see two messages in the log:
    
    PInS data found at offset XXXXX
    PInS memtype = X
    
    On the GXT135p card I get "31168" and "5".  The first value is irrelevant,
    but it's presence lets me know that the PInS data was actually found.  On a
    GXT130p, the second value should be 3.  Since I don't have access to that
    hardware, if someone can verify that, I will submit a follow-on patch that
    rips out all the memtype parameter stuff.
    
    Signed-off-by: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f510a3c3d48fd5aaa7757aebbc37e9ee417913a3
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:41 2005 -0700

    [PATCH] radeonfb_old: Fix broken link
    
    The link for ATI's product page in drivers/video/Kconfig for FB_RADEON is
    broken.  Replace with a product comparison page.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a43b58589eac1fdcf62624e86c67c0f92f45bf7
Author: Alexander Kern <alex.kern@gmx.de>
Date:   Fri Sep 9 13:04:40 2005 -0700

    [PATCH] atyfb: Remove code that sets sync polarity unconditionally
    
    Currently, atyfb has code that sets the hsync and vsync polarity based on the
    current video mode, without letting the user override the settings.
    
    Remove this particular code.  The sync polarities are set by the PROM, the
    user or by the videomode.
    
    Signed-off-by: Alexander Kern <alex.kern@gmx.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b41dc1a3c7839a765ffa560a5ae07aa5d253cc8
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:39 2005 -0700

    [PATCH] console: Fix buffer copy on vc resize
    
    On a vc resize, the contents of the old screen buffer are transferred to the
    new screenbuffer.  If the new screenbuffer is smaller than the old one, only
    the contents from the bottom are copied to new.  If the contents of the old
    buffer are located at the top, then the contents will not be copied to the new
    buffer resulting in a blank screen.
    
    This bug will happen only if the vc in question is not in the foreground.
    Doing an fbset -a or con2fbmap will trigger this bug.
    
    To fix this problem, base the start of the copy from the location of the
    current cursor.  If the cursor is near the top of the buffer, copy the
    contents at the top, and if the cursor is near the bottom of the buffer, then
    copy the contents at the bottom.  In the unlikely case where the new row size
    is greater than 2x smaller than the old one, and the cursor is in the middle,
    copy 1/2 screenful from the top and bottom of the cursor position.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cc38ed13f1b0f9d80a2d0acc2916af94922f27e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:38 2005 -0700

    [PATCH] fbcon: Saner 16-color to 4-color conversion
    
    Currently, the default linux 16-colors are converted to 4-colors by simply
    dividing the values by 4.  However, this is not necessarily correct since the
    first 4 colors are converted to black, rendering them invisible.
    
    So, for black, no conversion; for light colors, convert to gray, for normal
    text color, no conversion, and for bright colors, convert to intense white.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8c909454f046b59065c6997b651fe20cd90c0f4
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:37 2005 -0700

    [PATCH] fbdev: Fix greater than 1 bit monochrome color handling
    
    Currently, fbcon assumes that the visual FB_VISUAL_MONO* is always 1 bit.
    According to Geert, there are old hardware where it's possible to have
    monochrome at 8-bit, but has only 2 colors, black - 0x00 and white - 0xff.
    Fix color handlers (fb_get_color_depth, and get_color) for this special case.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 094bb659f53b6d90aab6067268d6d14f1f352d30
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:36 2005 -0700

    [PATCH] nvidiafb: Fallback to firmware EDID
    
    If nvidiafb fails to probe the EDID block, get the EDID from the BIOS.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13776711ce4b234b5ad153e55e8b5d6703c6b1ef
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:35 2005 -0700

    [PATCH] savagefb: Driver updates
    
    - Fallback to firmware EDID if chipset has no DDC/I2C support or if I2C
      probing failed
    
    - Add fb_blank hook
    
    - Fix savagefb_suspend/resume to enable driver to successfully suspend and
      resume from S3, memory or disk
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e518d7672dea4cd7c60871e40d0490c52f01d13
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:34 2005 -0700

    [PATCH] fbdev: Resurrect hooks to get EDID from firmware
    
    For the i386, code is already present in video.S that gets the EDID from the
    video BIOS.  Make this visible so drivers can also use this data as fallback
    when i2c does not work.
    
    To ensure that the EDID block is returned for the primary graphics adapter
    only, by check if the IORESOURCE_ROM_SHADOW flag is set.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53eed4ec8bcd8701b9135859ec46b10a0d88ba25
Author: David Vrabel <dvrabel@arcom.com>
Date:   Fri Sep 9 13:04:32 2005 -0700

    [PATCH] fbdev: geode updates
    
    Geode framebuffer driver updates:
    
    - Local mode list (taken from modedb.c) containing only relevant modes.
      This also makes the driver work as a module.
    
    - Make it a PCI driver (from James Simmons <jsimmons@infradead.org>).
    
    - A few other minor cosmetic bits and pieces.
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c7ffe0b9f7f40bd818fe3af51342f64c483908e
Author: James Simmons <jsimmons@infradead.org>
Date:   Fri Sep 9 13:04:31 2005 -0700

    [PATCH] fbdev: prevent drivers that have hardware cursors from calling software cursor code
    
    This patch removes drivers that have hardware cursors from calling the
    software cursor code.  Also if the driver sets a no hardware cursor flag
    then the driver reports a error it someone attempts to use the cursor.
    
    Signed-off-by: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2d58384fc5d4c0fe2d8e34bc2d15a90a9bb372a
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:31 2005 -0700

    [PATCH] vesafb: Add blanking support
    
    Add rudimentary support by manipulating the VGA registers.  However, not
    all vesa modes are VGA compatible, so VGA compatiblity is checked first.
    Only 2 levels are supported, powerup and powerdown.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7726e9e10fc6e026ed2dc00e48f4a3ffc1254ad2
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Fri Sep 9 13:04:29 2005 -0700

    [PATCH] fbdev: Add fbset -a support
    
    Add capability to fbdev to listen to the FB_ACTIVATE_ALL flag.  If set, it
    notifies fbcon that all consoles must be set to the current var.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb2e87a65d6cd735eb06fa595bf90497af28c37b
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:28 2005 -0700

    [PATCH] v9fs: fix handling of malformed 9P messages
    
    This patch attempts to do a better job of cleaning up after detecting errors
    on the transport.  This should also improve error reporting on broken
    connections to servers.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b501611a6f78558eafcf09b228abd866d4ea5d9f
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:27 2005 -0700

    [PATCH] v9fs: readlink extended mode check
    
    LANL reported some issues with random crashes during mount of legacy protocol
    servers (9P2000 versus 9P2000.u) -- crash was always happening in readlink
    (which should never happen in legacy mode).  Added some sanity conditionals to
    the get_inode code which should prevent the errors LANL was seeing.  Code
    tested benign through regression.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d58bec5b7a8b8303df0a4dcb9a18feeefac6091
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:27 2005 -0700

    [PATCH] v9fs: Fix support for special files (devices, named pipes, etc.)
    
    Fix v9fs special files (block, char devices) support.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73c592b9b844cc353bbaea690fb4aa652ac168a6
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:26 2005 -0700

    [PATCH] v9fs: Clean-up vfs_inode and setattr functions
    
    Cleanup code in v9fs vfs_inode as suggested by Alexey Dobriyan.  Did some
    major revamping of the v9fs setattr code to remove unnecessary allocations and
    clean up some dead-code.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1346f51ede71fc1e5021062898d150e192dc4dc8
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:25 2005 -0700

    [PATCH] v9fs: Change error magic numbers to defined constants
    
    Change magic error numbers to system defined constants in v9fs error.h As
    suggested by Jan-Benedict Glaw.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ed8491c8a75cefe95b57f7f428a3e2ddd421e97
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:24 2005 -0700

    [PATCH] v9fs: debug and support routines
    
    This part of the patch contains debug and other misc routines.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 322b329ab787de5f45abca9c9eabfd33bc5927e8
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:23 2005 -0700

    [PATCH] v9fs: Support to force umount
    
    Support for force umount
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 426cc91aa651b50713d06d45e5c3c3e90cfd40d9
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:22 2005 -0700

    [PATCH] v9fs: transport modules
    
    This part of the patch contains transport routines.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8cf945b3166c4394386f162a527c9950f396ce2
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:21 2005 -0700

    [PATCH] v9fs: 9P protocol implementation
    
    This part of the patch contains the 9P protocol functions.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e82cf6a802a72f0f447eb4c76d6a3fc8736a31d
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:20 2005 -0700

    [PATCH] v9fs: VFS superblock operations and glue
    
    This part of the patch contains VFS superblock and mapping code.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bad8471511ce5cc3ea90d0940622bd4b56b9cce
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:19 2005 -0700

    [PATCH] v9fs: VFS inode operations
    
    This part of the patch contains the VFS inode interfaces.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e69e7fe5b0c86b7271045444a3a681136234c659
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:18 2005 -0700

    [PATCH] v9fs: VFS file, dentry, and directory operations
    
    This part of the patch contains the VFS file, dentry & directory interfaces.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93fa58cb831337fdf5d36b3b913441100a484dae
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Fri Sep 9 13:04:18 2005 -0700

    [PATCH] v9fs: Documentation, Makefiles, Configuration
    
    OVERVIEW
    
    V9FS is a distributed file system for Linux which provides an
    implementation of the Plan 9 resource sharing protocol 9P.  It can be
    used to share all sorts of resources: static files, synthetic file servers
    (such as /proc or /sys), devices, and application file servers (such as
    FUSE).
    
    BACKGROUND
    
    Plan 9 (http://plan9.bell-labs.com/plan9) is a research operating
    system and associated applications suite developed by the Computing
    Science Research Center of AT&T Bell Laboratories (now a part of
    Lucent Technologies), the same group that developed UNIX , C, and C++.
    Plan 9 was initially released in 1993 to universities, and then made
    generally available in 1995. Its core operating systems code laid the
    foundation for the Inferno Operating System released as a product by
    Lucent Bell-Labs in 1997. The Inferno venture was the only commercial
    embodiment of Plan 9 and is currently maintained as a product by Vita
    Nuova (http://www.vitanuova.com). After updated releases in 2000 and
    2002, Plan 9 was open-sourced under the OSI approved Lucent Public
    License in 2003.
    
    The Plan 9 project was started by Ken Thompson and Rob Pike in 1985.
    Their intent was to explore potential solutions to some of the
    shortcomings of UNIX in the face of the widespread use of high-speed
    networks to connect machines. In UNIX, networking was an afterthought
    and UNIX clusters became little more than a network of stand-alone
    systems. Plan 9 was designed from first principles as a seamless
    distributed system with integrated secure network resource sharing.
    Applications and services were architected in such a way as to allow
    for implicit distribution across a cluster of systems. Configuring an
    environment to use remote application components or services in place
    of their local equivalent could be achieved with a few simple command
    line instructions. For the most part, application implementations
    operated independent of the location of their actual resources.
    
    Commercial operating systems haven't changed much in the 20 years
    since Plan 9 was conceived. Network and distributed systems support is
    provided by a patchwork of middle-ware, with an endless number of
    packages supplying pieces of the puzzle. Matters are complicated by
    the use of different complicated protocols for individual services,
    and separate implementations for kernel and application resources.
    The V9FS project (http://v9fs.sourceforge.net) is an attempt to bring
    Plan 9's unified approach to resource sharing to Linux and other
    operating systems via support for the 9P2000 resource sharing
    protocol.
    
    V9FS HISTORY
    
    V9FS was originally developed by Ron Minnich and Maya Gokhale at Los
    Alamos National Labs (LANL) in 1997.  In November of 2001, Greg Watson
    setup a SourceForge project as a public repository for the code which
    supported the Linux 2.4 kernel.
    
    About a year ago, I picked up the initial attempt Ron Minnich had
    made to provide 2.6 support and got the code integrated into a 2.6.5
    kernel.   I then went through a line-for-line re-write attempting to
    clean-up the code while more closely following the Linux Kernel style
    guidelines.  I co-authored a paper with Ron Minnich on the V9FS Linux
    support including performance comparisons to NFSv3 using Bonnie and
    PostMark - this paper appeared at the USENIX/FREENIX 2005
    conference in April 2005:
    ( http://www.usenix.org/events/usenix05/tech/freenix/hensbergen.html ).
    
    CALL FOR PARTICIPATION/REQUEST FOR COMMENTS
    
    Our 2.6 kernel support is stabilizing and we'd like to begin pursuing
    its integration into the official kernel tree.  We would appreciate any
    review, comments, critiques, and additions from this community and are
    actively seeking people to join our project and help us produce
    something that would be acceptable and useful to the Linux community.
    
    STATUS
    
    The code is reasonably stable, although there are no doubt corner cases
    our regression tests haven't discovered yet.  It is in regular use by several
    of the developers and has been tested on x86 and PowerPC
    (32-bit and 64-bit) in both small and large (LANL cluster) deployments.
    Our current regression tests include fsx, bonnie, and postmark.
    
    It was our intention to keep things as simple as possible for this
    release -- trying to focus on correctness within the core of the
    protocol support versus a rich set of features.  For example: a more
    complete security model and cache layer are in the road map, but
    excluded from this release.   Additionally, we have removed support for
    mmap operations at Al Viro's request.
    
    PERFORMANCE
    
    Detailed performance numbers and analysis are included in the FREENIX
    paper, but we show comparable performance to NFSv3 for large file
    operations based on the Bonnie benchmark, and superior performance for
    many small file operations based on the PostMark benchmark.   Somewhat
    preliminary graphs (from the FREENIX paper) are available
    (http://v9fs.sourceforge.net/perf/index.html).
    
    RESOURCES
    
    The source code is available in a few different forms:
    
    tarballs: http://v9fs.sf.net
    CVSweb: http://cvs.sourceforge.net/viewcvs.py/v9fs/linux-9p/
    CVS: :pserver:anonymous@cvs.sourceforge.net:/cvsroot/v9fs/linux-9p
    Git: rsync://v9fs.graverobber.org/v9fs (webgit: http://v9fs.graverobber.org)
    9P: tcp!v9fs.graverobber.org!6564
    
    The user-level server is available from either the Plan 9 distribution
    or from http://v9fs.sf.net
    Other support applications are still being developed, but preliminary
    version can be downloaded from sourceforge.
    
    Documentation on the protocol has historically been the Plan 9 Man
    pages (http://plan9.bell-labs.com/sys/man/5/INDEX.html), but there is
    an effort under way to write a more complete Internet-Draft style
    specification (http://v9fs.sf.net/rfc).
    
    There are a couple of mailing lists supporting v9fs, but the most used
    is v9fs-developer@lists.sourceforge.net -- please direct/cc your
    comments there so the other v9fs contibutors can participate in the
    conversation.  There is also an IRC channel: irc://freenode.net/#v9fs
    
    This part of the patch contains Documentation, Makefiles, and configuration
    file changes.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2822541893d88f84dd4f1525108d73effecd9d39
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:15 2005 -0700

    [PATCH] files: files locking doc
    
    Add documentation describing the new locking scheme for file descriptor table.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b835996f628eadb55c5fb222ba46fe9395bf73c7
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:14 2005 -0700

    [PATCH] files: lock-free fd look-up
    
    With the use of RCU in files structure, the look-up of files using fds can now
    be lock-free.  The lookup is protected by rcu_read_lock()/rcu_read_unlock().
    This patch changes the readers to use lock-free lookup.
    
    Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Ravikiran Thirumalai <kiran_th@gmail.com>
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab2af1f5005069321c5d130f09cce577b03f43ef
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:13 2005 -0700

    [PATCH] files: files struct with RCU
    
    Patch to eliminate struct files_struct.file_lock spinlock on the reader side
    and use rcu refcounting rcuref_xxx api for the f_count refcounter.  The
    updates to the fdtable are done by allocating a new fdtable structure and
    setting files->fdt to point to the new structure.  The fdtable structure is
    protected by RCU thereby allowing lock-free lookup.  For fd arrays/sets that
    are vmalloced, we use keventd to free them since RCU callbacks can't sleep.  A
    global list of fdtable to be freed is not scalable, so we use a per-cpu list.
    If keventd is already handling the current cpu's work, we use a timer to defer
    queueing of that work.
    
    Since the last publication, this patch has been re-written to avoid using
    explicit memory barriers and use rcu_assign_pointer(), rcu_dereference()
    premitives instead.  This required that the fd information is kept in a
    separate structure (fdtable) and updated atomically.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e72ad2c581de121cc7e772469e2a8f6b1fd4379
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:12 2005 -0700

    [PATCH] files-sparc64-fix 2
    
    Fix sparc64 timod to use the new files_fdtable() api to get the fd table.
    This is necessary for RCUification.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit badf16621c1f9d1ac753be056fce11b43d6e0be5
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:10 2005 -0700

    [PATCH] files: break up files struct
    
    In order for the RCU to work, the file table array, sets and their sizes must
    be updated atomically.  Instead of ensuring this through too many memory
    barriers, we put the arrays and their sizes in a separate structure.  This
    patch takes the first step of putting the file table elements in a separate
    structure fdtable that is embedded withing files_struct.  It also changes all
    the users to refer to the file table using files_fdtable() macro.  Subsequent
    applciation of RCU becomes easier after this.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0dfb2905126e9e94edebbce8d3e05001301f52d
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:09 2005 -0700

    [PATCH] files: rcuref APIs
    
    Adds a set of primitives to do reference counting for objects that are looked
    up without locks using RCU.
    
    Signed-off-by: Ravikiran Thirumalai <kiran_th@gmail.com>
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b6490e5faafb3a16ea45654fb55f9ff086f1495
Author: Dipankar Sarma <dipankar@in.ibm.com>
Date:   Fri Sep 9 13:04:07 2005 -0700

    [PATCH] files: fix rcu initializers
    
    First of a number of files_lock scaability patches.
    
     Here are the x86 numbers -
    
     tiobench on a 4(8)-way (HT) P4 system on ramdisk :
    
                                             (lockfree)
     Test            2.6.10-vanilla  Stdev   2.6.10-fd       Stdev
     -------------------------------------------------------------
     Seqread         1400.8          11.52   1465.4          34.27
     Randread        1594            8.86    2397.2          29.21
     Seqwrite        242.72          3.47    238.46          6.53
     Randwrite       445.74          9.15    446.4           9.75
    
     The performance improvement is very significant.
     We are getting killed by the cacheline bouncing of the files_struct
     lock here. Writes on ramdisk (ext2) seems to vary just too
     much to get any meaningful number.
    
     Also, With Tridge's thread_perf test on a 4(8)-way (HT) P4 xeon system :
    
     2.6.12-rc5-vanilla :
    
     Running test 'readwrite' with 8 tasks
     Threads     0.34 +/- 0.01 seconds
     Processes   0.16 +/- 0.00 seconds
    
     2.6.12-rc5-fd :
    
     Running test 'readwrite' with 8 tasks
     Threads     0.17 +/- 0.02 seconds
     Processes   0.17 +/- 0.02 seconds
    
     I repeated the measurements on ramfs (as opposed to ext2 on ramdisk in
     the earlier measurement) and I got more consistent results from tiobench :
    
     4(8) way xeon P4
     -----------------
                                             (lock-free)
     Test            2.6.12-rc5      Stdev   2.6.12-rc5-fd   Stdev
     -------------------------------------------------------------
     Seqread         1282            18.59   1343.6          26.37
     Randread        1517            7       2415            34.27
     Seqwrite        702.2           5.27    709.46           5.9
     Randwrite       846.86          15.15   919.68          21.4
    
     4-way ppc64
     ------------
                                             (lock-free)
     Test            2.6.12-rc5      Stdev   2.6.12-rc5-fd   Stdev
     -------------------------------------------------------------
     Seqread         1549            91.16   1569.6          47.2
     Randread        1473.6          25.11   1585.4          69.99
     Seqwrite        1096.8          20.03   1136            29.61
     Randwrite       1189.6           4.04   1275.2          32.96
    
     Also running Tridge's thread_perf test on ppc64 :
    
     2.6.12-rc5-vanilla
     --------------------
     Running test 'readwrite' with 4 tasks
     Threads     0.20 +/- 0.02 seconds
     Processes   0.16 +/- 0.01 seconds
    
     2.6.12-rc5-fd
     --------------------
     Running test 'readwrite' with 4 tasks
     Threads     0.18 +/- 0.04 seconds
     Processes   0.16 +/- 0.01 seconds
    
     The benefits are huge (upto ~60%) in some cases on x86 primarily
     due to the atomic operations during acquisition of ->file_lock
     and cache line bouncing in fast path. ppc64 benefits are modest
     due to LL/SC based locking, but still statistically significant.
    
    This patch:
    
    RCU head initilizer no longer needs the head varible name since we don't use
    list.h lists anymore.
    
    Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f97a931b337e4662e736ca67f1fab0a187f5852
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:05 2005 -0700

    [PATCH] v4l: tveeprom improved to support newer Hauppage cards
    
    - tveeprom improved and updated to reflect newer Hauppage cards.
    - CodingStyle fixes.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18fc59e230bbda9725736f8f526ef88aab212348
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:05 2005 -0700

    [PATCH] v4l: TVaudio cleanup and better debug messages
    
    - adds the adapter number + i2c address to printk msgs.
    - Some CodingStyle cleanups.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc75fc1b924ccf44ca9f0446701acc0081605b49
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:04 2005 -0700

    [PATCH] v4l: Remove kernel version dependency from tea575x-tuner.h
    
    - Removed kernel version dependency from tea575x-tuner.h
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10b89ee387fd6cc38532a881f64b3d35f338ea0b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:03 2005 -0700

    [PATCH] v4l: include saa6588 compiler option and files / fixes comments on tuner.h
    
    - Include saa6588 compiler option and files.
    - Fix comment on tuner.h
    - linux/utsname.h replaced by linux/version.h to compile on vanilla 2.6.13
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67e49a1abe3e9458c7ffba66775b350b5ceffae0
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:00 2005 -0700

    [PATCH] v4l: make the input event device for IR matchable by udev rules.
    
    - Makes the input event device created by the V4L drivers for the
      infrared remote matchable by udev rules.
    
    Signed-off-by: Rudo Thomas <rudo@matfyz.cz>
    Signed-off-by: Michael Fair <michael@daclubhouse.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5129b1589883d6eaa54886f3e0c5d918dafe329e
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:00 2005 -0700

    [PATCH] v4l: add some missing parameter descriptions in msp3400.c
    
    - added some missing parameter descriptions at msp3400.c
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21d4df375be2c9e5f1002800036fbfb793cf031f
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:59 2005 -0700

    [PATCH] v4l: print warning if pal= or secam= argument is unrecognized
    
    - print warning if pal= or secam= argument is unrecognized
    
    Signed-off-by: Philip Rowlands <phr@doc.ic.ac.uk>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a989d7328aa4a0b4793ea05b13871bf1b500b1e
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:57 2005 -0700

    [PATCH] v4l: correct the amux for composite and s-video inputs on the Sabrent SBT-TVFM card.
    
    - correct the amux for composite and s-video inputs on the Sabrent SBT-TVFM
      card.
    
    Signed-off-by: Michael Rodriquez-Torrent <mike@themikecam.com>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fccdf1bd362452d5e2bc0a1874b2b504b481e367
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:57 2005 -0700

    [PATCH] v4l: #include <linux/config.h> no longer needed.
    
    - #include <linux/config.h> no longer needed.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33ac6b52679743c3dbb7c7245f1df90588ee1097
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:56 2005 -0700

    [PATCH] v4l: the Microtune 4049FM5 uses an IF frequency of 33.3 MHz for FM radio.
    
    - The Microtune 4049FM5 uses an IF frequency of 33.3 MHz for FM radio.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08adb9e20be83bb4c5322bf15b966c537038f6d9
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:55 2005 -0700

    [PATCH] v4l: some error treatment implemented at resume functions.
    
    - Some error treatment implemented at resume functions.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c93b07a48039cee1d845f38294abec0f803e05e
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:54 2005 -0700

    [PATCH] v4l: change LG TDVS H062F from NTSC to ATSC
    
    - Change LG TDVS H062F from NTSC to ATSC.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c94aeecd3fd2aed66d9a1135f5329df622e6137
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:52 2005 -0700

    [PATCH] v4l: normalize whitespace and comments in tuner lists
    
    - normalize whitespace and comments in tuner lists
    
    Signed-off-by: Philip Rowlands <phr@doc.ic.ac.uk>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10c35cf8fd89e166d13bc93175f2b05d9cb85e07
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:52 2005 -0700

    [PATCH] v4l: cx88-dvb incorrect reporting fixed and remove bad PCI ID for Sabrent
    
    - cx88-dvb has been incorrectly reporting the card name instead of frontend name
    - Removes a bad PCI subsystem ID for saa713x Sabrent card
    - Renames DVICO --> DViCO for bttv.
    - #include <linux/config.h> no longer needed.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4279f02478c2c4f106ec9efb80ca152e8d406844
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:51 2005 -0700

    [PATCH] v4l: add saa713x card #66: Yuan TUN-900 (saa7135)
    
    - Add saa713x card #66: Yuan TUN-900 (saa7135)
    
    Signed-off-by: De Greef Sebastien <sebdg@hotmail.com>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 260784dcca44b5a526cece1f275cb81ccd186a3e
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:49 2005 -0700

    [PATCH] v4l: add saa713x card #65 Kworld V-Stream Studio TV Terminator
    
    - Add saa713x card #65 Kworld V-Stream Studio TV Terminator
    
    Signed-off-by: James R Webb <jrwebb@qwest.net>
    Signed-off-by: Peter Missel <peter.missel@onlinehome.de>
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5adc1c306b1ce5b297bd8ee010a62f39cd32b9e4
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:48 2005 -0700

    [PATCH] v4l: correct LG NTSC TALN mini tuner takeover
    
    - correct LG NTSC TALN mini tuner takeover as far we can
      empirically determine for now.
    
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 272435dc44f7254c7174d69b41eb430a50583d1a
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:47 2005 -0700

    [PATCH] v4l: syncs tveeprom tuners list with the list from ivtv
    
    - Syncs tveeprom tuners list with the list from ivtv.
    - Fixes the incorrect reporting of the radio presence.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0e9eae60e8f1a18e2e6502b3e738dd2886d18ff
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:47 2005 -0700

    [PATCH] v4l: change the prefix of msp34xx and error while reading chip version
    
    - Changes the prefix to 'msp34xx' instead of 'msp3400'.
    - Changes the message 'error while reading chip version' to a debug printk at
       msp3400.c
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f1807102a3a5c9b9782b6e8d271fc8ccef91f0a
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:46 2005 -0700

    [PATCH] v4l: SAA7134 updates and board additions
    
    - Remove $Id CVS logs for V4L files
    - linux/version.h replaced by linux/utsname.h
    - Add new Digimatrix card and LG TAPC Mini tuner for it
    
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e52e98a7eccfb0e7e91630d01690fb11d77db77d
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:41 2005 -0700

    [PATCH] v4l: CX88 updates and card additions
    
    - Remove $Id CVS logs for V4L files
    - add ioctl indirection via cx88_ioctl_hook and cx88_ioctl_translator to
      cx88-blackbird.c.
    - declare the indirection hooks from cx88-blackbird.c.
    - dcprintk macro which uses core instead of dev->core on cx88-video.c.
    - replace dev->core occurances with core on cx88-video.c.
    - CodingStyle fixes.
    - MaxInput replaced by a define.
    - cx8801 structures moved from cx88.h.
    - The output_mode needs to be set for the Hauppauge Nova-T DVB-T
      for versions after 2.6.12.
    - Corrected GPIO values for cx88 cards #28 & #31 for s-video and composite.
    - Updated DViCO FusionHDTV5 Gold & added DVB support.
    - Fixed DViCO FusionHDTV 3 Gold-Q GPIO.
    - Some clean up in cx88-tvaudio.c
    - replaced hex values when writing to AUD_CTL to EN_xx for better reading.
    - Allow select by hand between Mono, Lang1, Lang2 and Stereo for BTSC.
    - Support for stereo NICAM and BTSC improved.
    - Broken stereo check removed.
    - Added support for remote control to Cinergy DVBT-1400.
    - local var renamed from rc5 to a better name (ircode).
    - LGDT330X QAM lock bug fixes.
    - Some reorg: move some bits to struct cx88_core, factor out common ioctl's
      to cx88_do_ioctl.
    - Get rid of '//' comments, replace them with #if 0 and /**/.
    - Minor clean-ups: remove dcprintk and replace all instances of "dev->core"
      with "core".
    - Added some registers to control PCI controller at CX2388x chips.
    - New tuner standby API.
    - Small mpeg fixes and cleanups for blackbird.
    - fix mpeg packet size & count
    - add VIDIOC_QUERYCAP ioctl for the mpeg stream
    - return more information in struct v4l2_format
    - fix default window height
    - small cleanups
    
    Signed-off-by: Uli Luckas <luckas@musoft.de>
    Signed-off-by: Torsten Seeboth <Torsten.Seeboth@t-online.de>
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Patrick Boettcher <patrick.boettcher@desy.de>
    Signed-off-by: Catalin Climov <catalin@climov.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24a70fdce872d70171b1f49dcd1a7c3a4e8396b2
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:39 2005 -0700

    [PATCH] v4l: BTTV updates and card additions
    
    - Remove $Id CVS logs for V4L files
    - Added DVICO FusionHDTV 5 Lite card.
    - Added Acorp Y878F.
    - CodingStyle fixes.
    - Added tuner_addr to bttv cards structure.
    - linux/version.h replaced by linux/utsname.h on bttvp.h
    - kernel module for acquiring RDS data from a SAA6588.
    - Allow multiple open() and reading calls to /dev/radio on bttv-driver.c
    - added i2c address for lgdt330x.
    
    Signed-off-by: Hans J. Koch <koch@hjk-az.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 793cf9e6a54c698e109a599c8b8e303658fcaae6
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:37 2005 -0700

    [PATCH] v4l: common part Updates and tuner additions
    
    - Remove $Id CVS logs for V4L files
    - Included newer cards.
    - Added a new NEC protocol for ir based on pulse distance.
    - Enable ATSC support for DViCO FusionHDTV5 Gold.
    - Added tuner LG NTSC (TALN mini series).
    - Fixed tea5767 autodetection.
    - Resolve more tuner types.
    - Commented debug function removed from mainstream.
    - Remove comments from mainstream. Still on development tree.
    - linux/version dependencies removed.
    - BTSC Lang1 now is set to auto_stereo mode.
    - New tuner standby API.
    - i2c-core.c uses hexadecimal for the i2c address, so it should stay consistent.
    
    Signed-off-by: Uli Luckas <luckas@musoft.de>
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1938038dd7e4188a8663e49242fa77dd2adb7ed
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Sep 9 13:03:34 2005 -0700

    [PATCH] VIDEO_BT848: remove not required part of the help text
    
    Things that are already expressed through the dependencies don't have to be
    mentioned in the help text.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Cc: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e498be7dafd72fd68848c1eef1575aa7c5d658df
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Fri Sep 9 13:03:32 2005 -0700

    [PATCH] Numa-aware slab allocator V5
    
    The NUMA API change that introduced kmalloc_node was accepted for
    2.6.12-rc3.  Now it is possible to do slab allocations on a node to
    localize memory structures.  This API was used by the pageset localization
    patch and the block layer localization patch now in mm.  The existing
    kmalloc_node is slow since it simply searches through all pages of the slab
    to find a page that is on the node requested.  The two patches do a one
    time allocation of slab structures at initialization and therefore the
    speed of kmalloc node does not matter.
    
    This patch allows kmalloc_node to be as fast as kmalloc by introducing node
    specific page lists for partial, free and full slabs.  Slab allocation
    improves in a NUMA system so that we are seeing a performance gain in AIM7
    of about 5% with this patch alone.
    
    More NUMA localizations are possible if kmalloc_node operates in an fast
    way like kmalloc.
    
    Test run on a 32p systems with 32G Ram.
    
    w/o patch
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      485.36  100       485.3640     11.99      1.91   Sat Apr 30 14:01:51 2005
      100    26582.63   88       265.8263     21.89    144.96   Sat Apr 30 14:02:14 2005
      200    29866.83   81       149.3342     38.97    286.08   Sat Apr 30 14:02:53 2005
      300    33127.16   78       110.4239     52.71    426.54   Sat Apr 30 14:03:46 2005
      400    34889.47   80        87.2237     66.72    568.90   Sat Apr 30 14:04:53 2005
      500    35654.34   76        71.3087     81.62    714.55   Sat Apr 30 14:06:15 2005
      600    36460.83   75        60.7681     95.77    853.42   Sat Apr 30 14:07:51 2005
      700    35957.00   75        51.3671    113.30    990.67   Sat Apr 30 14:09:45 2005
      800    33380.65   73        41.7258    139.48   1140.86   Sat Apr 30 14:12:05 2005
      900    35095.01   76        38.9945    149.25   1281.30   Sat Apr 30 14:14:35 2005
     1000    36094.37   74        36.0944    161.24   1419.66   Sat Apr 30 14:17:17 2005
    
    w/patch
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.27  100       484.2736     12.02      1.93   Sat Apr 30 15:59:45 2005
      100    28262.03   90       282.6203     20.59    143.57   Sat Apr 30 16:00:06 2005
      200    32246.45   82       161.2322     36.10    282.89   Sat Apr 30 16:00:42 2005
      300    37945.80   83       126.4860     46.01    418.75   Sat Apr 30 16:01:28 2005
      400    40000.69   81       100.0017     58.20    561.48   Sat Apr 30 16:02:27 2005
      500    40976.10   78        81.9522     71.02    696.95   Sat Apr 30 16:03:38 2005
      600    41121.54   78        68.5359     84.92    834.86   Sat Apr 30 16:05:04 2005
      700    44052.77   78        62.9325     92.48    971.53   Sat Apr 30 16:06:37 2005
      800    41066.89   79        51.3336    113.38   1111.15   Sat Apr 30 16:08:31 2005
      900    38918.77   79        43.2431    134.59   1252.57   Sat Apr 30 16:10:46 2005
     1000    41842.21   76        41.8422    139.09   1392.33   Sat Apr 30 16:13:05 2005
    
    These are measurement taken directly after boot and show a greater
    improvement than 5%.  However, the performance improvements become less
    over time if the AIM7 runs are repeated and settle down at around 5%.
    
    Links to earlier discussions:
    http://marc.theaimsgroup.com/?t=111094594500003&r=1&w=2
    http://marc.theaimsgroup.com/?t=111603406600002&r=1&w=2
    
    Changelog V4-V5:
    - alloc_arraycache and alloc_aliencache take node parameter instead of cpu
    - fix initialization so that nodes without cpus are properly handled.
    - simplify code in kmem_cache_init
    - patch against Andrews temp mm3 release
    - Add Shai to credits
    - fallback to __cache_alloc from __cache_alloc_node if the node's cache
      is not available yet.
    
    Changelog V3-V4:
    - Patch against 2.6.12-rc5-mm1
    - Cleanup patch integrated
    - More and better use of for_each_node and for_each_cpu
    - GCC 2.95 fix (do not use [] use [0])
    - Correct determination of INDEX_AC
    - Remove hack to cause an error on platforms that have no CONFIG_NUMA but nodes.
    - Remove list3_data and list3_data_ptr macros for better readability
    
    Changelog V2-V3:
    - Made to patch against 2.6.12-rc4-mm1
    - Revised bootstrap mechanism so that larger size kmem_list3 structs can be
      supported. Do a generic solution so that the right slab can be found
      for the internal structs.
    - use for_each_online_node
    
    Changelog V1-V2:
    - Batching for freeing of wrong-node objects (alien caches)
    - Locking changes and NUMA #ifdefs as requested by Manfred
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Shobhit Dayal <shobhit@calsoftinc.com>
    Signed-off-by: Shai Fultheim <Shai@Scalex86.org>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd65a68574b787304a0cd90f22cfd44540ce3695
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Fri Sep 9 13:03:29 2005 -0700

    [PATCH] pcmcia: add pcmcia to IRQ information
    
    Add a devname parameter to the pcmcia_device structure, fills it with
    "pcmcia<bus_id>" in pcmcia_device_add, and passes it to request_irq in
    pcmcia_request_irq.
    
    Signed-off-by: Brice Goglin <Brice.Goglin@ens-lyon.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3feb1844ad33911ab1fe9df1ead66082b3bce9b
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Sep 9 13:03:28 2005 -0700

    [PATCH] pcmcia: more IDs for ide_cs
    
    (Partly From: David Brownell <dbrownell@users.sourceforge.net> )
    
    Make ID-CS recognize the CF card manufacturer records for Samsung, Lexar and
    STI.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f74e48a51c38f54fa26eb86a7a42f592156eccc2
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Fri Sep 9 13:03:28 2005 -0700

    [PATCH] pcmcia: OMAP CF controller
    
    This adds a socket driver for the OMAP CF controller; it's currently in use on
    OSK boards.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71ed90d89eff51a1137cbef727f11b8f7d5b20f1
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Sep 9 13:03:27 2005 -0700

    [PATCH] pcmcia: remove unused Vpp1, Vpp2 and Vcc
    
    config_t->Vpp1, Vpp2 and Vcc are never read, so remove them.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76d82ec526b0549cedf332d80929c8c225b653fa
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Sep 9 13:03:26 2005 -0700

    [PATCH] pcmcia: remove unused client_t
    
    client_t and CLIENT_MAGIC are unused, so remove them
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8751e4c0bd32ecb76434240a56a087fa223280c
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Fri Sep 9 13:03:25 2005 -0700

    [PATCH] pcmcia/yenta: avoid PCI write posting problem
    
    extend cb_writel(), exca_writeb(), exca_writel() to do a read[lb]() after
    the write[lb]() to avoid possible problem with PCI write posting.
    
    Seems to fix Bug #5061.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c181e0e00ff778623c7fda055fd404a06d2c7845
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Fri Sep 9 13:03:25 2005 -0700

    [PATCH] fix pcmcia_request_irq() for multifunction card
    
    multifunction cards need to have the same irq assigned to both functions.
    the code tries that but fails because ret is still set to CS_IN_USE which
    results in the function having the CB irq assigned.  yenta_set_socket then
    just changes the irq routing to use the PCI interrupt but the first
    functions irq handler is registered on an ISA interrupt.  boom.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf4de6f2db79f3c396bd884f546cd2ea91a686f2
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Fri Sep 9 13:03:23 2005 -0700

    [PATCH] pcmcia/cs: fix possible missed wakeup
    
    - thread_done should only be completed when the wait_queue is installed.
    
    - all wake up conditions should be checked before schedule()
    
    this fixes a hang of rmmod in the sequence modprobe yenta_socket; rmmod
    yenta_socket as reported by Andreas Steinmetz.  w/o this rmmod yenta_socket
    can hang on wait_for_completion() in pcmcia_unregister_socket()
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dominik Brodowski <linux@brodo.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3743fa4442fc172e950ff0eaf6aa96e7d5ce9be
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Fri Sep 9 13:03:23 2005 -0700

    [PATCH] yenta: share code with PCI core
    
    Share code between setup-bus.c and yenta_socket.c: use the write-out code of
    resources to the bridge also in yenta_socket.c, as it provides useful debug
    output.  In addition, it fixes the bug that the CPU-centric resource view
    might need to be transferred to the PCI-centric view: setup-bus.c does that,
    while yenta-socket.c did not.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76fa82fb7156aa7191dfd1fdede1fc0da51d45dd
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Sep 9 13:03:21 2005 -0700

    [PATCH] pcmcia: reduce ds.c stack footprint
    
    This patch reduces the stack footprint of pcmcia_device_query() from 416 bytes
    to 36 bytes.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4da006c63fb4758ee2d688aa65a461337b3ed065
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Fri Sep 9 13:03:15 2005 -0700

    [PATCH] dvb: ttusb-budget: use time_after_eq()
    
    Use of the time_after_eq() macro, defined at linux/jiffies.h, which deal
    with wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ac2854cbc637de7e958cfa8d153ccf9e6668dda
Author: Philipp Matthias Hahn <pmhahn@titan.lahn.de>
Date:   Fri Sep 9 13:03:13 2005 -0700

    [PATCH] dvb: saa7146: i2c vs. sysfs fix
    
    Integrate saa7146_i2c adapter into device model:
    Moves entries from /sys/device/platform to /sys/device/pci*.
    
    Signed-off-by: Philipp Hahn <pmhahn@titan.lahn.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6af4ee10f0b2bec2b8c40150298a9f7c1e9e46c6
Author: Karl Herz <karl.herz@gmx.de>
Date:   Fri Sep 9 13:03:13 2005 -0700

    [PATCH] dvb: ttpci: add PCI ids for old Siemens/TT DVB-C card
    
    Add PCI-ids of Siemens-DVB-C card with Technotrend manufacturer id.
    
    Signed-off-by: Karl Herz <karl.herz@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03388ae30260475650bab24223151397afb72ec9
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Fri Sep 9 13:03:12 2005 -0700

    [PATCH] dvb: ttpci: av7110: RC5+ remote control support
    
    Improved remote control support for av7110-based cards:
    o extended rc5 protocol, firmware >= 0x2620 required
    o key-up timer slightly adjusted
    o completely moved remote control code to av7110_ir.c
    o support for multiple ir receivers
    o for now, all av7110 cards share the same ir configuration and event device
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a7b102e7f5ccb2826a81315abc89f95adaf4421
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Fri Sep 9 13:03:11 2005 -0700

    [PATCH] dvb: av7110: conditionally disable workaround for broken firmware
    
    Disable COM_IF_LOCK workaround for firmware > 0x261f.
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce7d3c11aee415c76bcbd5f43cace16132b48a21
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:03:10 2005 -0700

    [PATCH] dvb: av7110: disable superflous firmware handshake
    
    Disable superflous firmware handshake.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87b2ecaebceb35c6f6199edd29ae24963d3f9c35
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:03:09 2005 -0700

    [PATCH] dvb: budget-av: enable frontend on KNC1 Plus cards
    
    Enable frontend on KNC plus cards.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b548747d78f8840024ac3439b7149348a282e086
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:03:08 2005 -0700

    [PATCH] dvb: budget-av: fixes for CI interface
    
    Fixes for CI interface.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc27a1696089a9a9d317fc815915e6761e22eeb5
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:03:07 2005 -0700

    [PATCH] dvb: budget-ci: add support for TT DVB-C CI card
    
    Add support for TT DVB-C CI card.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f63f5346c943008fe8f6ac66a9026f6c35e24947
Author: thomas schorpp <t.schorpp@gmx.de>
Date:   Fri Sep 9 13:03:06 2005 -0700

    [PATCH] dvb: av7110: Siemens DVB-C analog video input support
    
    Add support for analog video inputs (CVBS and Y/C) of the
    analog module for the Siemens DVB-C card.
    
    Signed-off-by: thomas schorpp <t.schorpp@gmx.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d78933c291bd0b6292e2c631e2f5e346c14d3fa
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:03:05 2005 -0700

    [PATCH] dvb: cinergyT2: remote control fixes
    
    IR RC fixes:
    - EVIOCSKEYCODE is not supported by this driver, fix potential crash
      when it is used by not setting rc_input_dev->keycodesize
    - fix key repeat handling (hopefully)
    - reduce default poll internal to 50msec (necessary for key repeat handling)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d6e7322b5f63d62ec8785c5fbf469c9a233baff
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:03:04 2005 -0700

    [PATCH] dvb: dst: Updated Documentation
    
    Updated Documentation
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dea88514c476d303f59e19b27ef26bb52dc193a
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:03:03 2005 -0700

    [PATCH] dvb: dst: ci doc update
    
    Updated documentation
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62867429d0d79e47e19ceedc3133efe74993932f
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:03:02 2005 -0700

    [PATCH] dvb: dst: fix DVB-C tuning
    
    Fix BUG in DVB-C frequency setting.  Thanks to Peng Cao <caopeng75@gmail.com>
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62121b1f9e25377ff50121f8c34a4aa92c47f465
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:03:01 2005 -0700

    [PATCH] dvb: dst: identify boards
    
    Identify board properly: Add functions to retrieve MAC Address, FW details,
    Card type and Vendor Information.
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a427de6f72bc0d83ebb1d87f9003c5e1009f21cd
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:03:00 2005 -0700

    [PATCH] dvb: dst: dprrintk cleanup
    
    Code Cleanup:
    o Remove debug noise
    o Remove debug module parameter
      debug level is achieved using the verbosity level
    o Updated to kernel coding style
      (case labels should not be indented)
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94b7410c8a2d23fad5937b326a0a9e8c5a876e2d
Author: Manu Abraham <manu@linuxtv.org>
Date:   Fri Sep 9 13:02:59 2005 -0700

    [PATCH] dvb: dst: remove unnecessary code
    
    Code Simplification: CA PMT object is not parsed in the driver anymore.
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f612c5793449ac653b2f4531696d8e74e771e3d3
Author: Manu Abraham <manu@kromtek.com>
Date:   Fri Sep 9 13:02:58 2005 -0700

    [PATCH] dvb: dst: fix symbol rate setting
    
    Make the Symbolrate setting card specific.
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f30db067a593aeb3fdd97ec0a3e6399ea566f2ad
Author: Stuart Auchterlonie <stuarta@squashedfrog.net>
Date:   Fri Sep 9 13:02:56 2005 -0700

    [PATCH] dvb: nebula DigiTV nxt6000 fix
    
    Fix bug in Nebula DigiTV frontend detection for nxt6000.
    
    Signed-off-by: Stuart Auchterlonie <stuarta@squashedfrog.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05ade5a5cd32f8393c22fc454b0546df2ed497c5
Author: David Johnson <dj@david-web.co.uk>
Date:   Fri Sep 9 13:02:55 2005 -0700

    [PATCH] dvb: bt8xx: Nebula DigiTV mt352 support
    
    Add support for Nebula DigiTV PCI cards with the MT352 frontend.
    
    Signed-off-by: David Johnson <dj@david-web.co.uk>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f15ddd0b79d1722049952b7359533a18a72f106
Author: David Johnson <dj@david-web.co.uk>
Date:   Fri Sep 9 13:02:54 2005 -0700

    [PATCH] dvb: bt8xx: cleanup
    
    Indentation fixes and remove unnecessary braces.
    
    Signed-off-by: David Johnson <dj@david-web.co.uk>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 466d725ac8d9c58a5de87f72b4fe066c4bad3d9d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:53 2005 -0700

    [PATCH] dvb: bt8xx: endianness fix
    
    Endianness fix for risc DMA start address setting.  (reported by Stefan
    Haubenthal/Peter Hettkamp)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b5b53452be0b1132cfb8e22fbe5fe43c25140a0
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:52 2005 -0700

    [PATCH] dvb: remove noisy debug print
    
    comment out noisy dprintk in dst_get_signal() (why are errors only visible
    with debug on?  this needs to be cleaned up so we can disable debug by
    default)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2efeab26b77061ba5418f4c98c3b3ed100fb608
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:51 2005 -0700

    [PATCH] dvb: usb: cxusb: fixes for new firmware
    
    This patch changes two things:
    
    1) a firmware update made by the vendor, which has to be done in Windows
       for now, changes the DVB-data-pipe from isochronous to bulk: it fixes the
       data distortions (and thus the video-distortions) in DVB-T mode; there is
       no backwards compatibility with the old firmware as it didn't work anyway
    
    2) with the help of Steve Toth some reverse-engineered functionality is now
       named correctly, thank you
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3beab78f8ad5a483fdbdcbb8599fb06da102b8b7
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:50 2005 -0700

    [PATCH] dvb: usb: white space cleanup
    
    white space cleanup
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 115eea4e91049a42d81e5284cbb0f50acab6eb39
Author: Svante Olofsson <svante@agentum.com>
Date:   Fri Sep 9 13:02:48 2005 -0700

    [PATCH] dvb: usb: digitv: support for nxt6000 demod
    
    Add support for the NXT6000-based digitv-box.  Add .get_tune_settings callback
    for the NXT6000 to have a min_tune_delay of 500ms.
    
    Signed-off-by: Svante Olofsson <svante@agentum.com>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47dc3d688d04f06d8ef90a06c48930906fbc4a8c
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:47 2005 -0700

    [PATCH] dvb: usb: core: change dvb_usb_device_init() API
    
    Change the init call to optionally return the new dvb_usb_device directly.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62703b9d72114a563488cd4be6d0827618395589
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:46 2005 -0700

    [PATCH] dvb: usb: dtt200u: add proper device names
    
    Added names for clones of the DVB-T stick.
    Whitespace cleanups.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43bc3f41e4b1bb88adaef593f50c1f032bf0e876
Author: Ye Jianjun (Joey) <joeyye@trident.com.cn>
Date:   Fri Sep 9 13:02:44 2005 -0700

    [PATCH] dvb: usb: dtt200u: copy frontend_ops before modifying
    
    Fix: copy frontend_ops before modifying
    
    Signed-off-by: Ye Jianjun (Joey) <joeyye@trident.com.cn>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54127d64d2094207e0e12a4a9eec33573f25f7ac
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:43 2005 -0700

    [PATCH] dvb: usb: removed empty module_init/exit calls
    
    Removed empty module_init/exit calls.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e69339d9a43d4691f6a05c5a54a00d54814aaa68
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:42 2005 -0700

    [PATCH] dvb: usb: dibusb: Kworld Xpert DVB-T USB2.0 support
    
    Add USB IDs of the Kworld Xpert DVB-T USB2.0 (clone of the ADStech box).
    Thanks to Marcus Hagn for testing.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3706a4da2012679631da6d22e86c6a34cde7419a
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:41 2005 -0700

    [PATCH] dvb: usb: add TwinhanDTV StarBox support
    
    Add driver for the TwinhanDTV StarBox and clones.
    
    Thanks to Ralph Metzler for his initial work on this box and thanks to Twinhan
    for their support.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80e27e20619902b11aa255081fd83eab10fc0839
Author: Mac Michaels <wmichaels1@earthlink.net>
Date:   Fri Sep 9 13:02:40 2005 -0700

    [PATCH] dvb: frontend: or51132: remove bogus optimization attempt
    
    This fix has also been applied to lgdt330x.  There is an optimization that
    keeps track of the frequency tuned by the digital decoder.  The digital driver
    does not set the frequency if it has not changed since it was tuned.  The
    analog tuner driver knows nothing about the frequency saved by the digital
    driver.  When the frequency is set using the video4linux code with tvtime, the
    hardware get changed but the digital driver's state does not get updated.
    Switch back to the same digital channel and the driver finds no change in
    frequency so the tuner is not reset to the digital frequency.  The work around
    is to remove the check and always set the tuner to the specified frequency.
    
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 593cbf3dcbffc852cf91a30951eb518b59bf7322
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Fri Sep 9 13:02:38 2005 -0700

    [PATCH] dvb: frontend: stv0297: QAM128 tuning improvement
    
    while investigating the QAM_128-issue with the stv0297-driver for the
    Cablestar (which is not the same as the one in dvb-kernel CVS, yet), I fixed
    it, not by increasing the timeout, but by disabling the corner-detection for
    QAM_128 and higher.
    
    This patch has been tested on dvb-kernel cvs, and has been reported to work by
    multiple users.  Some cards still need timeout increase on top of this patch.
    This will be addressed later.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c589ebfce79834a9617c44d7ec0f608fa70eb42d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:37 2005 -0700

    [PATCH] dvb: frontend: cx24110: clean up timeout handling.
    
    Clean up timeout handling.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 296c786a0d2122b1e47c80ca717d8a8ac36402c1
Author: Adam Szalkowski <adamsz@gmx.net>
Date:   Fri Sep 9 13:02:35 2005 -0700

    [PATCH] dvb: frontend: cx24110: another DiSEqC fix
    
    Fix DiSEqC problems.
    
    Signed-off-by: Adam Szalkowski <adam@szalkowski.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d897275500d8fac919a11073eb587ce0e3fcc36c
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:34 2005 -0700

    [PATCH] dvb: frontend: cx24110: DiSEqC fix
    
    Fix DiSEqC switching (one bug fix suggested by Peter Hettkamp, and one
    experimentally determined msleep(30) suggested by Adam Szalkowski).
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6816a4c183e62bca1fa4812214e483ab503dcb7d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:34 2005 -0700

    [PATCH] dvb: frontend: ves1820: improve tuning
    
    Reset acgconf register after tuning to improve locking, as suggested by Marco
    Schluessler.  Minor cleanups in ves1820_init().
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2026b3af0c8ad33ef253a950c271f2d0da111b6
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:02:33 2005 -0700

    [PATCH] dvb: frontend: tda1004x: fix SNR reading
    
    Fix SNR reading
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78639a3f81d14117d1841476771d7a4736e7b9d1
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:02:32 2005 -0700

    [PATCH] dvb: frontend: stv0299: support reading both BER and UCBLOCKS
    
    Allow the stv0299 to read the BER and UCBLOCKS.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9d6a80b41c04e8ff4c7442cc35f5df610863841
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri Sep 9 13:02:31 2005 -0700

    [PATCH] dvb: frontend: s5h1420: fixes
    
    Misc. fixes.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfbfce1566f11c0dbad8a16173f0448b0c78cecb
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:30 2005 -0700

    [PATCH] dvb: frontend: stv0299: pass i2c bus to pll callback
    
    Pass a pointer to the i2c bus to the pll callbacks (stv0299 only).
    
    It was not possible to tell which i2c bus should be used if an adapter has
    multiple frontends on multiple i2c buses.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ff4ac1beae58a2fea7ec2ad43d6c3b60d90ec61
Author: Barry Scott <barry.scott@onelan.co.uk>
Date:   Fri Sep 9 13:02:29 2005 -0700

    [PATCH] dvb: frontend: mt352: fix signal strength reading
    
    Fix two problems with the signal strength value in the mt352.c frontend:
    1. the 4 most significant bits are zeroed - shift and mask wrong way round
    2. need to align the 12 bits from the registers at the top of the 16 bit
       returned value - otherwise the range is not 0 to 0xffff its 0xf000 to 0xffff
    
    Signed-off-by: Barry Scott <barry.scott@onelan.co.uk>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50b447d5b70dc4021ae3b4eaf8ce98932f61a413
Author: Dominique Dumont <domi.dumont@free.fr>
Date:   Fri Sep 9 13:02:27 2005 -0700

    [PATCH] dvb: core: CI timeout fix
    
    Patch from Dominique Dumont to get the SCM Red Viaccess CAM working with the
    budget-ci.
    
    Signed-off-by: Dominique Dumont <domi.dumont@free.fr>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dad4a73071532448f6cee29791476494a8eb3a58
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:26 2005 -0700

    [PATCH] dvb: core: dvb_demux formatting fixes
    
    Formatting fixes (Lindent + some handwork).
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db574d7d6e38fe37bbb97e2b0a0363b5d2ffa203
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:26 2005 -0700

    [PATCH] dvb: core: dvb_demux: use INIT_LIST_HEAD
    
    Use INIT_LIST_HEAD for frontend_list.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d2cd1631e97f5eb9c8666ff9cd8011cd5c12e7d
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:24 2005 -0700

    [PATCH] dvb: core: dvb_demux: remove more unused cruft
    
    Removed more unused variables and constants.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 218721b8ef334a7c778fe3bc033922edef911a1f
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:24 2005 -0700

    [PATCH] dvb: core: dvb_demux: remove unsused descramble callbacks
    
    Removed unused descramble_mac_address and descramble_section_payload callbacks.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 936534676ef6c6af389eb9e61de7d725ee79a316
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:23 2005 -0700

    [PATCH] dvb: core: dvb_demux: remove unused cruft
    
    Removed some useless functions and variables.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e0ae280e91a4f69b08770c6ab72808711dd4f2b
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:22 2005 -0700

    [PATCH] dvb: core: dvb_demux: fix continuity counter error handling
    
    Don't return immediately from dvb_dmx_swfilter_section_packet() if CC is not
    ok.  Otherwise a new feed drops all packets until the first packet with CC=0
    arrives.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c05100528efe997a27d841230f9f5b2f4adf3d0f
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Fri Sep 9 13:02:21 2005 -0700

    [PATCH] dvb: core: glue code for DMX_GET_CAPS and DMX_SET_SOURCE
    
    Glue code for DMX_GET_CAPS and DMX_SET_SOURCE ioctls.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3cc2176cbbee6adfaceac2df6d77312cf30cee83
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:20 2005 -0700

    [PATCH] dvb: avoid building empty built-in.o
    
    Don't build empty built-in.o when DVB/V4L is not configured.  Thanks to Sam
    Ravnborg and Keith Owens.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34f7373aaec80564cc87b7829e4e2a0e3c20c4b7
Author: Olaf Hering <olh@suse.de>
Date:   Fri Sep 9 13:02:20 2005 -0700

    [PATCH] dvb: remove version.h dependencies
    
    Remove all #include <linux/version.h> and all references to LINUX_VERSION_CODE
    and KERNEL_VERSION.  Based on patch by Olaf Hering.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8d995c99ef56a3dbcdbe291bb71658bf00e9ad6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Fri Sep 9 13:02:19 2005 -0700

    [PATCH] dvb: email address update
    
    Update email address of Peter Hettkamp.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59f4e7d572980a521b7bdba74ab71b21f5995538
Author: Truxton Fulton <trux@truxton.com>
Date:   Fri Sep 9 13:02:18 2005 -0700

    [PATCH] fix reboot via keyboard controller reset
    
    I have a system (Biostar IDEQ210M mini-pc with a VIA chipset) which will
    not reboot unless a keyboard is plugged in to it.  I have tried all
    combinations of the kernel "reboot=x,y" flags to no avail.  Rebooting by
    any method will leave the system in a wedged state (at the "Restarting
    system" message).
    
    I finally tracked the problem down to the machine's refusal to fully reboot
    unless the keyboard controller status register had bit 2 set.  This is the
    "System flag" which when set, indicates successful completion of the
    keyboard controller self-test (Basic Assurance Test, BAT).
    
    I suppose that something is trying to protect against sporadic reboots
    unless the keyboard controller is in a good state (a keyboard is present),
    but I need this machine to be headless.
    
    I found that setting the system flag (via the command byte) before giving
    the "pulse reset line" command will allow the reboot to proceed.  The patch
    is simple, and I think it should be fine for everybody whether they have
    this type of machine or not.  This affects the "hard" reboot (as done when
    the kernel boot flags "reboot=c,h" are used).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e8dcee3e63f5a2cba4affff4bbb6e228f4b258a
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:17 2005 -0700

    [PATCH] synclinkmp.c: fix async internal loopback
    
    Fix async internal loopback by not using enable_loopback function which
    reprograms clocking and should only be used for hdlc mode.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 166692e4a045348109f66b493e1b41afde6f3769
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:16 2005 -0700

    [PATCH] synclinkmp.c: add statistics clear
    
    Add ability to clear statistics.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 761a444d8d059e4e2de326383b1dec4a636e0a92
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:15 2005 -0700

    [PATCH] synclinkmp.c: disable burst transfers
    
    Disable burst transfers on adapter local bus.  Hardware feature does not work
    on latest version of adapter.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f3edb94564d319cd58cc11c2c986b7ec25643d8
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:14 2005 -0700

    [PATCH] synclinkmp.c: fix double mapping of signals
    
    Serial signals were incorrectly mapped twice to events.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c1fff58cfaaf1c4b6a31a569e18cb7d2d8db0a6
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:14 2005 -0700

    [PATCH] synclink.c: add loopback to async mode
    
    Add internal loopback support for asynchronous mode operation.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9661239f7f698ba3a79db5e8ab5bb2f4090663d9
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:13 2005 -0700

    [PATCH] synclink.c: add clear stats
    
    Add the ability to clear statistics.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a918bc233c8b9537fbc05a8bbb33928a4980cc5
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Sep 9 13:02:12 2005 -0700

    [PATCH] synclink.c: compiler optimisation fix
    
    Make some fields of DMA descriptor volatile to prevent compiler optimizations.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d5c1e1bf2b906966609f8cf4a844e61adb86bcd
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 9 13:02:12 2005 -0700

    [PATCH] deadline: clean up question mark operator
    
    That ?: trick gives us the creeps.
    
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24b20ac6e1c80082889b3d6ae08aadda777519e5
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri Sep 9 13:02:11 2005 -0700

    [PATCH] remove unnecessary handle_IRQ_event() prototypes
    
    The function prototype for handle_IRQ_event() in a few architctures is not
    needed because they use GENERIC_HARDIRQ.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73a358d1892a8233801e3fd54668075b52ec42da
Author: KUROSAWA Takahiro <kurosawa@valinux.co.jp>
Date:   Fri Sep 9 13:02:10 2005 -0700

    [PATCH] fix for cpusets minor problem
    
    This patch fixes minor problem that the CPUSETS have when files in the
    cpuset filesystem are read after lseek()-ed beyond the EOF.
    
    Signed-off-by: KUROSAWA Takahiro <kurosawa@valinux.co.jp>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac0b1bc1edbe81c0cb36cad7e7f5b91f4d9e12ed
Author: Benjamin LaHaise <bcrl@linux.intel.com>
Date:   Fri Sep 9 13:02:09 2005 -0700

    [PATCH] aio: kiocb locking to serialise retry and cancel
    
    Implement a per-kiocb lock to serialise retry operations and cancel.  This
    is done using wait_on_bit_lock() on the KIF_LOCKED bit of kiocb->ki_flags.
    Also, make the cancellation path lock the kiocb and subsequently release
    all references to it if the cancel was successful.  This version includes a
    fix for the deadlock with __aio_run_iocbs.
    
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f58202bf6b915656e116ece3bc4ace14bfe533a
Author: Wendy Cheng <wcheng@redhat.com>
Date:   Fri Sep 9 13:02:08 2005 -0700

    [PATCH] change io_cancel return code for no cancel case
    
    Note that other than few exceptions, most of the current filesystem and/or
    drivers do not have aio cancel specifically defined (kiob->ki_cancel field
    is mostly NULL).  However, sys_io_cancel system call universally sets
    return code to -EAGAIN.  This gives applications a wrong impression that
    this call is implemented but just never works.  We have customer inquires
    about this issue.
    
    Changed by Benjamin LaHaise to EINVAL instead of ENOSYS
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Acked-by: Benjamin LaHaise <bcrl@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f519165a97924ab3eeb99f388718d12ff97f1f4
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Fri Sep 9 13:02:07 2005 -0700

    [PATCH] cs89x0: add netpoll support
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Cc: Matt Mackall <mpm@selenic.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fac92becdaecff64dd91daab0292c5131de92f0d
Author: Andrew Stribblehill <a.d.stribblehill@durham.ac.uk>
Date:   Fri Sep 9 13:02:04 2005 -0700

    [PATCH] bfs: fix endianness, signedness; add trivial bugfix
    
    * Makes BFS code endianness-clean.
    
    * Fixes some signedness warnings.
    
    * Fixes a problem in fs/bfs/inode.c:164 where inodes not synced to disk
      don't get fully marked as clean.  Here's how to reproduce it:
    
    # mount -o loop -t bfs /bfs.img /mnt
    # df -i /mnt
    Filesystem            Inodes   IUsed   IFree IUse% Mounted on
    /bfs.img                  48       1      47    3% /mnt
    # df -k /mnt
    Filesystem           1K-blocks      Used Available Use% Mounted on
    /bfs.img                   512         5       508   1% /mnt
    # cp 60k-archive.zip /mnt/mt.zip
    # df -k /mnt
    Filesystem           1K-blocks      Used Available Use% Mounted on
    /bfs.img                   512        65       447  13% /mnt
    # df -i /mnt
    Filesystem            Inodes   IUsed   IFree IUse% Mounted on
    /bfs.img                  48       2      46    5% /mnt
    # rm /mnt/mt.zip
    # echo $?
    0
    
     [If the unlink happens before the buffers flush, the following happens:]
    
    # df -i /mnt
    Filesystem            Inodes   IUsed   IFree IUse% Mounted on
    /bfs.img                  48       2      46    5% /mnt
    # df -k /mnt
    Filesystem           1K-blocks      Used Available Use% Mounted on
    /bfs.img                   512        65       447  13% /mnt
    
     fs/bfs/bfs.h           |    1
    
    Signed-off-by: Andrew Stribblehill <ads@wompom.org>
    Cc: <tigran@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 383f2835eb9afb723af71850037b2f074ac9db60
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Fri Sep 9 13:02:02 2005 -0700

    [PATCH] Prefetch kernel stacks to speed up context switch
    
    For architecture like ia64, the switch stack structure is fairly large
    (currently 528 bytes).  For context switch intensive application, we found
    that significant amount of cache misses occurs in switch_to() function.
    The following patch adds a hook in the schedule() function to prefetch
    switch stack structure as soon as 'next' task is determined.  This allows
    maximum overlap in prefetch cache lines for that structure.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0d62e6d5b3318b6b722121d945afa295f7201b5
Author: Jason Baron <jbaron@redhat.com>
Date:   Fri Sep 9 13:02:01 2005 -0700

    [PATCH] fix disassociate_ctty vs. fork race
    
    Race is as follows. Process A forks process B, both being part of the same
    session. Then, A calls disassociate_ctty while B forks C:
    
    A				B
    ====				====
    				fork()
    				  copy_signal()
    dissasociate_ctty()		....
    				  attach_pid(p, PIDTYPE_SID, p->signal->session);
    
    Now, C can have current->signal->tty pointing to a freed tty structure, as
    it hasn't yet been added to the session group (to have its controlling tty
    cleared on the diassociate_ctty() call).
    
    This has shown up as an oops but could be even more serious.  I haven't
    tried to create a test case, but a customer has verified that the patch
    below resolves the issue, which was occuring quite frequently.  I'll try
    and post the test case if i can.
    
    The patch simply checks for a NULL tty *after* it has been attached to the
    proper session group and clears it as necessary.  Alternatively, we could
    simply do the tty assignment after the the process is added to the proper
    session group.
    
    Signed-off-by: Jason Baron <jbaron@redhat.com>
    Cc: Roland McGrath <roland@redhat.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f76baf9365bd66216bf0e0ebfc083e22eda6215b
Author: Alexander Krizhanovsky <klx@yandex.ru>
Date:   Fri Sep 9 13:01:59 2005 -0700

    [PATCH] autofs: fix "busy inodes after umount..."
    
    This patch for old autofs (version 3) cleans dentries which are not putted
    after killing the automount daemon (it's analogue of recent patch for
    autofs4).
    
    Signed-off-by: Alexander Krizhanovsky <klx@yandex.ru>
    Cc: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28254d439b8c65f93cb331f5aa741efa6a8ec62f
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Fri Sep 9 13:01:58 2005 -0700

    [PATCH] vga text console and stty cols/rows
    
    Some people use 66-cells braille devices for reading the console, and hence
    would like to reduce the width of the screen by using:
    
    stty cols 66
    
    However, the vga text console doesn't behave correctly: the 14 first
    characters of the second line are put on the right of the first line and so
    forth.
    
    Here is a patch to correct that.  It corrects the disp_end and offset
    registers of the vga board on console resize and console switch.
    
    On usual screens, you then correctly get a right and/or bottom blank
    margin.  On some laptop panels, the output is resized so that text actually
    gets magnified, which can be great for some people (see
    http://dept-info.labri.fr/~thibault/ls.jpg ).
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff55fe2075e3901db4dbdc00e0b44a71bef97afd
Author: Jason Baron <jbaron@redhat.com>
Date:   Fri Sep 9 13:01:57 2005 -0700

    [PATCH] pty_chars_in_buffer oops fix
    
    The idea of this patch is to lock both sides of a ptmx/pty pair during line
    discipline changing.  This is needed to ensure that say a poll on one side of
    the pty doesn't occur while the line discipline is actively being changed.
    This resulted in an oops reported on lkml, see:
    
    	http://marc.theaimsgroup.com/?l=linux-kernel&m=111342171410005&w=2
    
    A 'hacky' approach was previously implmemented which served to eliminate the
    poll vs.  line discipline changing race.  However, this patch takes a more
    general approach to the issue.  The patch only adds locking on a less often
    used path, the line-discipline changing path, as opposed to locking the
    ptmx/pty pair on read/write/poll paths.
    
    The patch below, takes both ldisc locks in either order b/c the locks are both
    taken under the same spinlock().  I thought about locking the ptmx/pty
    separately, such as master always first but that introduces a 3 way deadlock.
    For example, process 1 does a blocking read on the slave side.  Then, process
    2 does an ldisc change on the slave side, which acquires the master ldisc lock
    but not the slave's.  Finally, process 3 does a write which blocks on the
    process 2's ldisc reference.
    
    This patch does introduce some changes in semantics.  For example, a line
    discipline change on side 'a' of a ptmx/pty pair, will now wait for a
    read/write to complete on the other side, or side 'b'.  The current behavior
    is to simply wait for any read/writes on only side 'a', not both sides 'a' and
    'b'.  I think this behavior makes sense, but I wanted to point it out.
    
    I've tested the patch with a bunch of read/write/poll while changing the line
    discipline out from underneath.
    
    This patch obviates the need for the above "hide the problem" patch.
    
    Signed-off-by: Jason Baron <jbaron@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69ac59647e66c1b53fb98fe8b6d0f2099cffad60
Author: Chaskiel Grundman <cg2v@andrew.cmu.edu>
Date:   Fri Sep 9 13:01:54 2005 -0700

    [PATCH] alpha: process_reloc_for_got confuses r_offset and r_addend
    
    arch/alpha/kernel/module.c:process_reloc_for_got(), which figures out how big
    the .got section for a module should be, appears to be confusing r_offset (the
    file offset that the relocation needs to be applied to) with r_addend (the
    offset of the relocation's actual target address from the address of the
    relocation's symbol).  Because of this, one .got entry is allocated for each
    relocation instead of one each unique symbol/addend.
    
    In the module I am working with, this causes the .got section to be almost 10
    times larger than it needs to be (75544 bytes instead of 7608 bytes).  As the
    .got is accessed with global-pointer-relative instructions, it needs to be
    within the 64k gp "zone", and a 75544 byte .got clearly does not fit.  The
    result of this is that relocation overflows are detected during module load
    and the load is aborted.
    
    Change struct got_entry/process_reloc_for_got to fix this.
    
    Acked-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 092c948811359d8715790af0eedefc7dff1cd619
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Sep 9 13:01:53 2005 -0700

    [PATCH] x86_64: Don't call enforce_max_cpus when hotplug is enabled
    
    enforce_max_cpus nukes out cpu_present_map and cpu_possible_map making it
    impossible to add new cpus in the system.  Since it doesnt provide any
    additional value apart this call and reference is removed.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdf26d933a8171c2a5bd35b4a5ca3b099a216a35
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Sep 9 13:01:52 2005 -0700

    [PATCH] x86_64: Don't do broadcast IPIs when hotplug is enabled in flat mode.
    
    The use of non-shortcut version of routines breaking CPU hotplug.  The option
    to select this via cmdline also is deleted with the physflat patch, hence
    directly placing this code under CONFIG_HOTPLUG_CPU.
    
    We dont want to use broadcast mode IPI's when hotplug is enabled.  This causes
    bad effects in send IPI to a cpu that is offline which can trip when the cpu
    is in the process of being kicked alive.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c7fc7220f6a3cce9b3f4bd66362176df67df577
Author: Andrea Arcangeli <andrea@cpushare.com>
Date:   Fri Sep 9 13:01:51 2005 -0700

    [PATCH] i386: seccomp fix for auditing/ptrace
    
    This is the same issue as ppc64 before, when returning to userland we
    shouldn't re-compute the seccomp check or the task could be killed during
    sigreturn when orig_eax is overwritten by the sigreturn syscall.  This was
    found by Roland.
    
    This was harmless from a security standpoint, but some i686 users reported
    failures with auditing enabled system wide (some distro surprisingly makes
    it the default) and I reproduced it too by keeping the whole workload under
    strace -f.
    
    Patch is tested and works for me under strace -f.
    
    nobody@athlon:~/cpushare> strace -o /tmp/o -f python seccomp_test.py
    make: Nothing to be done for `seccomp_test'.
    Starting computing some malicious bytecode
    init
    load
    start
    stop
    receive_data failure
    kill
    exit_code 0 signal 9
    The malicious bytecode has been killed successfully by seccomp
    Starting computing some safe bytecode
    init
    load
    start
    stop
    174 counts
    kill
    exit_code 0 signal 0
    The seccomp_test.py completed successfully, thank you for testing.
    
    (akpm: collaterally cleaned up a bit of do_syscall_trace() too)
    
    Signed-off-by: Andrea Arcangeli <andrea@cpushare.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d666d7ada2e14d71d463c85b8b5ef2e2e6723f2
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Sep 9 13:01:49 2005 -0700

    [PATCH] mips: add TANBAC TB0287 support
    
    Add TANBAC TB0287 support.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95409aaca734700e8dcba9db685b8600b67ba05d
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Fri Sep 9 13:01:48 2005 -0700

    [PATCH] ppc32: Kill PVR_440* defines
    
    The following patch changes the usages of PVR_440* into strcmp's with the
    cpu_name field, and removes the defines altogether.  The Ebony portion was
    briefly tested long ago.  One benefit of moving from PVR-tests to string
    tests in general is that not all CPUs can be on and be able to do this type
    of comparison.
    
    See http://patchwork.ozlabs.org/linuxppc/patch?id=1250 for the original
    thread.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66b375bf7d9c995fd6169191c3862071e710f456
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Fri Sep 9 13:01:47 2005 -0700

    [PATCH] ppc32: In the boot code, don't rely on BASE_BAUD directly
    
    Modifies serial_init to get base baud rate from the rs_table entry instead
    of BAUD_BASE.  This patch eliminates duplication between the
    SERIAL_PORT_DFNS macro and BAUD_BASE.  Without the patch, if a port set the
    baud rate in SERIAL_PORT_DFNS, but did not update BASE_BAUD, the BASE_BAUD
    value would still be used.
    
    Signed-off-by: Grant Likely <grant.likely@gdcanada.com>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99cc2192132ab28c495d015ed2e95dc29e2a27ad
Author: Frank van Maarseveen <frankvm@frankvm.com>
Date:   Fri Sep 9 13:01:46 2005 -0700

    [PATCH] ppc32: Correct an instruction in the boot code
    
    In the flush and invalidate bootcode on PPC4xx we were accidentally using
    the wrong instruction.  Use cmplw, which reads from a register like we
    want.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83f7da8acd81354e921ff12d6efbeae5b1a5d6a4
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Fri Sep 9 13:01:45 2005 -0700

    [PATCH] ppc32: make perfmon.o CONFIG_E500 specific
    
    Subject says it all, there is no need to link perfmon.o on
    sub-architectures other than CONFIG_E500.
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e31e14ec356f36b131576be5bc31d8fef7e95483
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:45 2005 -0700

    [PATCH] remove the inode_post_link and inode_post_rename LSM hooks
    
    This patch removes the inode_post_link and inode_post_rename LSM hooks as
    they are unused (and likely useless).
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a74574aafea3a63add3251047601611111f44562
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:44 2005 -0700

    [PATCH] Remove security_inode_post_create/mkdir/symlink/mknod hooks
    
    This patch removes the inode_post_create/mkdir/mknod/symlink LSM hooks as
    they are obsoleted by the new inode_init_security hook that enables atomic
    inode security labeling.
    
    If anyone sees any reason to retain these hooks, please speak now.  Also,
    is anyone using the post_rename/link hooks; if not, those could also be
    removed.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 570bc1c2e5ccdb408081e77507a385dc7ebed7fa
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:43 2005 -0700

    [PATCH] tmpfs: Enable atomic inode security labeling
    
    This patch modifies tmpfs to call the inode_init_security LSM hook to set
    up the incore inode security state for new inodes before the inode becomes
    accessible via the dcache.
    
    As there is no underlying storage of security xattrs in this case, it is
    not necessary for the hook to return the (name, value, len) triple to the
    tmpfs code, so this patch also modifies the SELinux hook function to
    correctly handle the case where the (name, value, len) pointers are NULL.
    
    The hook call is needed in tmpfs in order to support proper security
    labeling of tmpfs inodes (e.g.  for udev with tmpfs /dev in Fedora).  With
    this change in place, we should then be able to remove the
    security_inode_post_create/mkdir/...  hooks safely.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac50960afa31877493add6d941d8402fa879c452
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:41 2005 -0700

    [PATCH] ext3: Enable atomic inode security labeling
    
    This patch modifies ext3 to call the inode_init_security LSM hook to obtain
    the security attribute for a newly created inode and to set the resulting
    attribute on the new inode as part of the same transaction.  This parallels
    the existing processing for setting ACLs on newly created inodes.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10f47e6a1b8b276323b652053945c87a63a5812d
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:39 2005 -0700

    [PATCH] ext2: Enable atomic inode security labeling
    
    This patch modifies ext2 to call the inode_init_security LSM hook to obtain
    the security attribute for a newly created inode and to set the resulting
    attribute on the new inode.  This parallels the existing processing for
    setting ACLs on newly created inodes.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e41ff9e0650f327a6c819841fa412da95d57319
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Fri Sep 9 13:01:35 2005 -0700

    [PATCH] security: enable atomic inode security labeling
    
    The following patch set enables atomic security labeling of newly created
    inodes by altering the fs code to invoke a new LSM hook to obtain the security
    attribute to apply to a newly created inode and to set up the incore inode
    security state during the inode creation transaction.  This parallels the
    existing processing for setting ACLs on newly created inodes.  Otherwise, it
    is possible for new inodes to be accessed by another thread via the dcache
    prior to complete security setup (presently handled by the
    post_create/mkdir/...  LSM hooks in the VFS) and a newly created inode may be
    left unlabeled on the disk in the event of a crash.  SELinux presently works
    around the issue by ensuring that the incore inode security label is
    initialized to a special SID that is inaccessible to unprivileged processes
    (in accordance with policy), thereby preventing inappropriate access but
    potentially causing false denials on legitimate accesses.  A simple test
    program demonstrates such false denials on SELinux, and the patch solves the
    problem.  Similar such false denials have been encountered in real
    applications.
    
    This patch defines a new inode_init_security LSM hook to obtain the security
    attribute to apply to a newly created inode and to set up the incore inode
    security state for it, and adds a corresponding hook function implementation
    to SELinux.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5ee56cc184e0944ebc9ff1691985219959596f6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Sep 9 13:01:32 2005 -0700

    [PATCH] txx9 serial update
    
    Support for the new RBHMA4500 eval board for the TX4938.  General update
    from the 8250 ancestor of this driver.  Replace use of deprecated
    interfaces.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fef266580e5cf897a1b63528fc6b1185e2d6bb87
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Fri Sep 9 13:01:31 2005 -0700

    [PATCH] update filesystems for new delete_inode behavior
    
    Update the file systems in fs/ implementing a delete_inode() callback to
    call truncate_inode_pages().  One implementation note: In developing this
    patch I put the calls to truncate_inode_pages() at the very top of those
    filesystems delete_inode() callbacks in order to retain the previous
    behavior.  I'm guessing that some of those could probably be optimized.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>
    Acked-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e85b565233236a2a833adea73fb2f0e0f8fa2a61
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Fri Sep 9 13:01:29 2005 -0700

    [PATCH] move truncate_inode_pages() into ->delete_inode()
    
    Allow file systems supporting ->delete_inode() to call
    truncate_inode_pages() on their own.  OCFS2 wants this so it can query the
    cluster before making a final decision on whether to wipe an inode from
    disk or not.  In some corner cases an inode marked on the local node via
    voting may not actually get orphaned.  A good example is node death before
    the transaction moving the inode to the orphan dir commits to the journal.
    Without this patch, the truncate_inode_pages() call in
    generic_delete_inode() would discard valid data for such inodes.
    
    During earlier discussion in the 2.6.13 merge plan thread, Christoph
    Hellwig indicated that other file systems might also find this useful.
    
    IMHO, the best solution would be to just allow ->drop_inode() to do the
    cluster query but it seems that would require a substantial reworking of
    that section of the code.  Assuming it is safe to call write_inode_now() in
    ocfs2_delete_inode() for those inodes which won't actually get wiped, this
    solution should get us by for now.
    
    Trivial testing of this patch (and a related OCFS2 update) has shown this
    to avoid the corruption I'm seeing.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>
    Acked-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f6fd5db2dbc28d475d67f9a6b041fefe1d6f7c8
Author: Kumar Gala <galak@freescale.com>
Date:   Fri Sep 9 13:01:26 2005 -0700

    [PATCH] ppc32: Fix Kconfig mismerge
    
    Looks like the help comment for MPC834x got merged incorrectly.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abda24528ac3045511fb59291a2d6ccbddf30eda
Author: Magnus Damm <magnus@valinux.co.jp>
Date:   Fri Sep 9 13:01:23 2005 -0700

    [PATCH] i386: CONFIG_ACPI_SRAT typo fix
    
    Fix a typo involving CONFIG_ACPI_SRAT.
    
    Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b5d37ac02954572e80e09255bb5737277aaee8e
Author: Giancarlo Formicuccia <giancarlo.formicuccia@gmail.com>
Date:   Fri Sep 9 13:01:22 2005 -0700

    [PATCH] Clear task_struct->fs_excl on fork()
    
    An oversight.  We don't want to carry the IO scheduler's "we hold exclusive fs
    resources" hint over to the child across fork().
    
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1299232b5743da454c73853b90b3d2d83dce1737
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 9 13:01:21 2005 -0700

    [PATCH] x86: MP_processor_info fix
    
    Remove the weird and apparently unnecessary logic in MP_processor_info() which
    assumes that the BSP is the first one to run MP_processor_info().  On one of
    my boxes that isn't true and cpu_possible_map gets the wrong value.
    
    Cc: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Cc: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0037c78a96bb391635bff103d401c24459c5092d
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 22:47:53 2005 +0200

    kbuild: frv,m32r,sparc64 introduce fake asm-offsets.h file
    
    Needed to get them to build.
    And a hint to avoid hardcoding to many constants in assembler.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 1325cc79163058739b70bed9860fccbecac6236b
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Fri Sep 9 13:45:51 2005 -0700

    [PATCH] IB: Define more SA methods
    
    ib_sa.h: Define more SA methods (initially for madeye decode)
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 5a0773698c51fdcec7eb361b6b819669ed1d249e
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 22:44:31 2005 +0200

    kbuild: cris use generic asm-offsets.h support
    
    Cris has a dedicated asm-offsets.c file per subarchitecture.
    So a symlink is created to put the desired asm-offsets.c file
    in $(ARCH)/kernel
    This is absolutely not good practice, but it was the trick
    used in the rest of the cris code.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit cb7b593c2c808b32a1ea188599713c434b95f849
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Sep 9 13:35:42 2005 -0700

    [IPV4] fib_trie: fix proc interface
    
    Create one iterator for walking over FIB trie, and use it
    for all the /proc functions. Add a /proc/net/route
    output for backwards compatibility with old applications.
    
    Make initialization of fib_trie same as fib_hash so no #ifdef
    is needed in af_inet.c
    
    Fixes: http://bugzilla.kernel.org/show_bug.cgi?id=5209
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 048eb582f3f89737d4a29668de9935e6feea7c36
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 22:32:31 2005 +0200

    kbuild: mips use generic asm-offsets.h support
    
    Removed obsolete stuff from arch makefile.
    mips had a special rule for generating asm-offsets.h so preserved it
    using an architecture specific hook in top-level Kbuild file.
    Renamed .h file to asm-offsets.h
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 8259f1625789ad03e6451ecef3e690af52e8e802
Merge: 5dce225... 59725dc...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Sep 9 13:17:43 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/acme/net-2.6

commit 39e01cb874cbf694bd0b0c44f54c4f270e2aa556
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 22:03:13 2005 +0200

    kbuild: ia64 use generic asm-offsets.h support
    
    Delete obsolete stuff from arch Makefile
    Rename file to asm-offsets.h
    The trick used in the arch Makefile to circumvent the circular
    dependency is kept.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit fb61a8615fce15f30b1bb1cf265ed05e251b9ed8
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 21:39:46 2005 +0200

    kbuild: v850 use generic asm-offsets.h support
    
    Deleted obsolete stuff from arch makefile
    Renamed .c file to asm-offsets.h
    Fix include of asm-offsets.h to use new name
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e2d5df935d8a82cb7a2c50726628fa928aa89b9b
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 21:28:48 2005 +0200

    kbuild: alpha,x86_64 use generic asm-offsets.h support
    
    Delete obsolete stuff from arch makefiles
    Rename .h file to asm-offsets.h
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e6ae744dd2eae8e00af328b11b1fe77cb0931136
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 21:08:59 2005 +0200

    kbuild: arm - use generic asm-offsets.h support
    
    Delete obsoleted stuff from arch Makefile and rename
    constants.h to asm-offsets.h
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 0013a85454c281faaf064ccb576e373a2881aac8
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 20:57:26 2005 +0200

    kbuild: m68k,parisc,ppc,ppc64,s390,xtensa use generic asm-offsets.h support
    
    Delete obsoleted parts form arch makefiles and rename to asm-offsets.h
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 47003497dd819b10874a2291e54df7dc5cf8be57
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 20:35:55 2005 +0200

    kbuild: arm26,sparc use generic asm-offset support
    
    Rename all includes to use asm-offsets.h to match generic name
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit cca6e6f5f473ec63e85c87dfc77279ce1ca114e6
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 20:28:49 2005 +0200

    kbuild: h8300,m68knommu,sh,sh64 use generic asm-offsets.h support
    
    h8300, m68knommu, sh and sh64 all used the name asm-offsets.h so minimal
    changes required.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 144a50ea5e1487b8b8e722289b4177713354448a
Author: Dave Jones <davej@redhat.com>
Date:   Tue Aug 9 00:20:10 2005 -0400

    [PATCH] must_check attributes for PCI layer.
    
    Self explanatory really. Some newer gcc's print a warning
    if a function is used and we don't check its result.
    We do this for a bunch of things in the kernel already,
    this extends that to the PCI layer.
    
    Based on a patch originally from Arjan van de Ven.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7bcf5c0e7fd9ab4ddb9e24d7e91bda2ac23e5678
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 18 14:33:01 2005 +1000

    [PATCH] PCI: move pci core to use add_hotplug_env_var()
    
    This fixes a bug in the environment variables for all PCI device hotplug calls.
    
    Thanks to Kay Sievers for pointing out the problem.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit daad56661d56cc382948fc95b74e17d3326b901b
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 9 18:54:04 2005 +0100

    [ARM] 2894/1: Sharp Scoop driver pm_message_t type fix
    
    Patch from Richard Purdie
    
    Fix a pm_message_t type warning in the Sharp scoop driver
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit aa6c2e794f7e1f54dc52c84471c750327fa21ccd
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Sep 9 18:54:03 2005 +0100

    [ARM] 2893/1: [MMC] Update corgi to use the new mmc delayed detection function
    
    Patch from Richard Purdie
    
    We can remove this timer and its associated code from the corgi
    platform code now mmc_detect_change() and the pxamci code support
    an optional delay.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5dce225bd9ea60e28e17076de63df0dee51b2883
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 18:31:38 2005 +0100

    [PATCH] Fix CONFIG_ACPI_BLACKLIST_YEAR
    
    This makes ACPI_BLACKLIST_YEAR be consistently defined when ACPI is
    enabled, regardless of whether we're on x86 or not, and thus avoids
    bogus -Wundef warnings on ia64.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3aed77bc84013fced136977b7cc17fff60eddf7a
Merge: 0b968d2... b2ad7b5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 9 10:38:02 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit 0b968d23610d65a46299347b141a687e207bd294
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Fri Sep 9 12:59:04 2005 +0200

    [PATCH] Fix misspelled i8259 typo in io_apic.c
    
    The legacy PIC's name is "i8259".
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b9eb8c06177f07657ad35440b56cbf68e1d253b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Sep 9 18:35:12 2005 +0100

    [ARM] sys_mbind needs wrapping
    
    sys_mbind is a 6-arg syscall, hence needs wrapping to save the
    sixth argument.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc0b1af2571cd56f8f2b218ef72b911135c0e37a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 17:18:14 2005 +0100

    [PATCH] __user annotations for pointers in i386 sigframe
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85c39206ac556c9dd7345465ea5265c1f33e50d1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 17:15:13 2005 +0100

    [PATCH] uaccess.h annotations (uml)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2624f124b3b5d550ab2fbef7ee3bc0e1fed09722
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 17:14:12 2005 +0100

    [PATCH] sparse on uml (infrastructure bits)
    
    Passes -m64 to sparse on uml/amd64, tells sparse to stay out of
    USER_OBJS.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f91f4d923f4039bf3460eca299ed5a3f7ecd7b96
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 17:02:51 2005 +0100

    [PATCH] gratuitous includes of asm/serial.h
    
    Removed gratuitous includes of asm/serial.h in synklinkmp and ip2main.
    Allows to remove the rest of "broken on sparc32" in drivers/char - this
    stuff doesn't break the build anymore.  Since it got zero testing, it almost
    certainly won't work there, though...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d310a35a487388859432648daa2ea4fc5e51c049
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 16:56:05 2005 +0100

    [PATCH] missing CHECKFLAGS on s390
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f70353ea91ad77c83500e70507a239b2ab0c980
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 16:53:56 2005 +0100

    [PATCH] bogus cast in bio.c
    
    <qualifier> void * is not the same as void <qualifier> *...
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c9afc655d4df902211d00a437e893881cdef588
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 9 16:50:43 2005 +0100

    [PATCH] basic iomem annotations (ppc64)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86feeaa8120bb1b0ab21efed49e9754039395ef1
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Fri Sep 9 19:28:28 2005 +0200

    kbuild: full dependency check on asm-offsets.h
    
    Building asm-offsets.h has been moved to a seperate Kbuild file
    located in the top-level directory. This allow us to share the
    functionality across the architectures.
    
    The old rules in architecture specific Makefiles will die
    in subsequent patches.
    
    Furhtermore the usual kbuild dependency tracking is now used
    when deciding to rebuild asm-offsets.s. So we no longer risk
    to fail a rebuild caused by asm-offsets.c dependencies being touched.
    
    With this common rule-set we now force the same name across
    all architectures. Following patches will fix the rest.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 2fd9d74b35efa9823f1f7d34cb421e2b9eee9650
Author: Brett M Russ <russb@emc.com>
Date:   Fri Sep 9 10:02:22 2005 -0700

    [PATCH] PCI: PCI/libata INTx bug fix
    
    Previous INTx cleanup patch had a bug that was not caught.  I found
    this last night during testing and can confirm that it is now 100%
    working.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e91442b635be776ea205fba233bdd5bc74b62bc3
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Fri Sep 9 10:44:16 2005 -0500

    [SCSI] SCSI core: fix leakage of scsi_cmnd's
    
    From: 	Alan Stern <stern@rowland.harvard.edu>
    
    This patch (as559b) adds a new routine, scsi_unprep_request, which
    gets called every place a request is requeued.  (That includes
    scsi_queue_insert as well as scsi_requeue_command.)  It also changes
    scsi_kill_requests to make it call __scsi_done with result equal to
    DID_NO_CONNECT << 16.  (I'm not sure if it's necessary to call
    scsi_init_cmd_errh here; maybe you can check on that.)  Finally, the
    patch changes the return value from scsi_end_request, to avoid
    returning a stale pointer in the case where the request was requeued.
    Fortunately the return value is used in only place, and the change
    actually simplified it.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    
    Rejections fixed up and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 286f3e13a1dc7f32407629fbd7aabc8ea78c62b5
Author: Neil Brown <neilb@suse.de>
Date:   Fri Sep 2 13:13:54 2005 +1000

    [SCSI] fix possible deadlock in scsi_lib.c
    
      If a filesystem, while writing out data, decides that it is good
    to issue a cache flush on a SCSI drive (or other 'sd' device), it will
    call blkdev_issue_flush which calls ->issue_flush_fn which is
    scsi_issue_flush_fn.
    This calls sd_issue_flush which calls sd_sync_cache, which calls
    scsi_execute_request.
    This will (as sshdr != NULL) call
        kmalloc(SCSI_SENSE_BUFFERSIZE, GFP_KERNEL)
    
    If memory is tight, the presence of GFP_KERNEL may cause write
    requests to be sent to some filesystem to free up memory, however if
    that filesystem is waiting for the issue_flush_fn to complete, you
    could get a deadlock.
    
    I wonder if it might be more appropriate to use GFP_NOIO as in the
    following patch.
    
    I wonder if it might be even more appropriate to cope better with a
    kmalloc failure, especially as in this use, sd_sync_cache only will
    use the sense information to print out a more informative error
    message.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 903f4fed858a7b56b260cbd55d174fe54d188fb7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jul 26 10:20:53 2005 -0400

    [SCSI] fix callers of scsi_remove_device() who already hold the scan muted
    
    This patch (as544) adds a private entry point to scsi_remove_device, for
    use when callers already own the scan_mutex.  The appropriate callers are
    modified to use the new entry point.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e517d3133f62c27b211f305a6dbd6f6ccac0db1b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jul 26 10:18:45 2005 -0400

    [SCSI] add missing scan mutex to scsi_scan_target()
    
    This patch (as543) adds a private entry point to scsi_scan_target, for use
    when the caller already owns the scan_mutex, and updates the kerneldoc for
    that routine (which was badly out-of-date).  It converts scsi_scan_channel
    to use the new entry point.  Lastly, it modifies scsi_get_host_dev to make
    it acquire the scan_mutex, necessary since the routine adds a new
    scsi_device even if it doesn't do any actual scanning.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ddcc95963449d028b16d9b9fe50f6e91ce7d9e81
Merge: 223176b... 5f50241...
Author: Anton Altaparmakov <aia21@hera.kernel.org>
Date:   Fri Sep 9 08:19:10 2005 -0700

    Merge branch 'master' of /pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 6f0d618f0e9b8025d1c3531e82d7cc8455e79394
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Sep 9 16:17:58 2005 +0100

    [SERIAL] Spelling fix in 8250.c
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 35efb606e544403835df48cd240441a8e089c80b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Sep 9 15:57:17 2005 +0100

    [ARM] Fix typo in arch/arm/Kconfig.debug
    
    It's called printch, not printchar
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2ad7b5e8115582cdf5bbda065aa516c24d62c21
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri Sep 9 23:02:36 2005 +1000

    Allow PCI config space syscalls to be used by 64-bit processes.
    
    The pciconfig_iobase, pciconfig_read and pciconfig_write system calls
    were only implemented for 32-bit processes; for 64-bit processes they
    returned an ENOSYS error.  This allows them to be used by 64-bit
    processes as well.  The X server uses pciconfig_iobase at least, and
    this change is necessary to allow a 64-bit X server to work on my G5.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 766375362a1dcac63dc0c0fb61ce4143c8de63d9
Author: Arthur Othieno <a.othieno@bluewin.ch>
Date:   Sat Aug 20 21:48:47 2005 -0400

    [PATCH] ppc64: Big-endian I/O memory accessors.
    
    I/O memory accessors. Big-endian version. For those busses/devices
    that do export big-endian I/O memory.
    
    Of notable relevance/reference:
    
       http://lwn.net/Articles/132804/
       http://ozlabs.org/pipermail/linuxppc-embedded/2005-August/019798.html
       http://ozlabs.org/pipermail/linuxppc-embedded/2005-August/019752.html
    
    Signed-Off-By: Arthur Othieno <a.othieno@bluewin.ch>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1635317facea3094ddf34082cd86797efb1d9f7e
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Sep 6 13:17:54 2005 +1000

    [PATCH] Separate pci bits out of struct device_node
    
    This patch pulls the PCI-related junk out of struct device_node and
    puts it in a separate structure, struct pci_dn.  The device_node now
    just has a void * pointer in it, which points to a struct pci_dn for
    nodes that represent PCI devices.  It could potentially be used in
    future for device-specific data for other sorts of devices, such as
    virtual I/O devices.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b28d2582ce8aafe531d909bb9c4dcf29189e786e
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Aug 24 11:56:56 2005 -0500

    [PATCH] ppc64: remove use of asm/segment.h
    
    Remove asm-ppc64/segment.h now that all users are gone.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3cc747e96480d4e26560e5bc59f2b9c9204ade0e
Author: Mark Bellon <mbellon@mvista.com>
Date:   Tue Sep 6 15:50:02 2005 -0700

    [PATCH] PPC64: large INITRD causes kernel not to boot
    
    In PPC64 there are number of problems in arch/ppc64/boot/main.c that
    prevent a kernel from making use of a large (greater than ~16MB) INITRD.
    This is 64 bit architecture and really large INITRD images should be
    possible.
    
    Simply put the existing code has a fixed reservation (claim) address and
    once the kernel plus initrd image are large enough to pass this address
    all sorts of bad things occur. The fix is the dynamically establish the
    first claim address above the loaded kernel plus initrd (plus some
    "padding" and rounding). If PROG_START is defined this will be used as
    the minimum safe address - currently known to be 0x01400000 for the
    firmwares tested so far.
    
    Signed-off-by: Mark Bellon <mbellon@mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f9526785d8a03fd0e21f9cfc951adc03bde1c395
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Sep 8 14:05:49 2005 -0500

    [PATCH] powerpc: Fix __power64__ typos that should be __powerpc64__
    
    Fix __power64__ typo that should be __powerpc64__ instead.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e4df7671716f1fffb3437a7c1a14e3d2465fefef
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Wed Aug 10 17:57:42 2005 -0700

    [PATCH] ppc64: makefile cleanup
    
    This patch cleans up the output generated by ppc64 builds.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a24c8481b6439cb151a4750cc278ea2df4fb0e53
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Aug 15 13:59:13 2005 -0700

    [PATCH] ppc64: zimage build fix
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dd56fdf23dfa0127d512b73d4238dbd2b5a7c1eb
Author: Jon Loeliger <jdl@freescale.com>
Date:   Wed Sep 7 15:59:48 2005 -0500

    [PATCH] powerpc: Merge a few more include files
    
    Merge a few asm-ppc and asm-ppc64 header files.
    Note: the merge of setup.h intentionally does not carry
    forward the m68k cruft.  That means this patch continues
    to break the already broken amiga on the ppc32.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 64807081e38703617cf9a5d71db14ea2b3e1cb04
Author: Jon Loeliger <jdl@freescale.com>
Date:   Wed Sep 7 15:56:20 2005 -0500

    [PATCH] powerpc: Make check_bugs() static inline
    
    Make check_bugs() static inline and remove it from syscalls.c.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a37c8875a764b4decf941859f4a2c63e1e86c8fa
Author: Jon Loeliger <jdl@freescale.com>
Date:   Wed Sep 7 15:27:09 2005 -0500

    [PATCH] powerpc: Standardize on _ASM_POWERPC header symbol prefix
    
    Standardize on _ASM_POWERPC_... prefix for all #include
    exclusion symbols.  Fixup all the non-compilers.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 38c0ff06d5ba05b6fbf18652c49747ad320aaeb0
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Sep 7 19:52:38 2005 +1000

    [PATCH] ppc64: iSeries early printk breakage
    
    The earlier commit 8d9273918635f0301368c01b56c03a6f339e8d51
    (Consolidate early console and PPCDBG code) broke iSeries because
    it caused unregister_console(&udbg_console) to be called
    unconditionally.  iSeries never registers the udbg_console.
    
    This just reverts part of the change.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 34b5233f379847097a1925a02b62f129c407c1e4
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Sep 6 21:00:02 2005 +1000

    [PATCH] ppc64: Fix oops for !CONFIG_NUMA
    
    The SPARSEMEM EXTREME code (802f192e4a600f7ef84ca25c8b818c8830acef5a) that
    went in yesterday broke PPC64 for !CONFIG_NUMA.
    
    The problem is that (free|reserve)_bootmem don't take a page number as their
    first argument, they take an address. Ruh roh.
    
    Booted on P5 LPAR, iSeries and G5.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a84195f36e373001e6eed2e95a5dc1994cf30480
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Thu Aug 18 19:35:21 2005 +0200

    [PATCH] ppc64: fix IPI on bpa_iic
    
    This fixes a severe bug in the bpa_iic driver that caused
    all sorts of problems.
    
    We had been using incorrect priority values for inter processor
    interrupts, which resulted in always doing CALL_FUNCTION
    instead of RESCHEDULE or DEBUGGER_BREAK.
    
    The symptoms cured by this patch include bad performance on
    SMP systems spurious kernel panics in the IPI code.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9c2c389307c03a35672c80725ccf7968656d87ef
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Sep 9 11:12:51 2005 +0100

    [ARM] Add memory type based allocation syscalls
    
    Add syscall numbers and syscall table entries for mbind,
    set_mempolicy and get_mempolicy.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 59725dc2a2e86a03bbf97976ede3bdc6f95bba92
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:40:58 2005 -0300

    [CCID3] Introduce ccid3_hc_[rt]x_sk() for overal consistency
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit b0e567806d16586629468c824dfb2e71155df7da
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:38:35 2005 -0300

    [DCCP] Introduce dccp_timestamp
    
    To start the timestamps with 0.0ms, easing the integer maths in the CCIDs, this
    probably will be reworked to use the to be introduced struct timeval_offset
    infrastructure out of skb_get_timestamp, etc.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 954ee31f366fabe53fb450482789258fe552f40b
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:37:05 2005 -0300

    [CCID3] Initialize more fields in ccid3_hc_rx_init
    
    The initialization of ccid3hcrx_rtt to 5ms is just a bandaid, I'll continue
    auditing the CCID3 HC rx codebase to fix this properly, probably I'll add a
    feedback timer as suggested in the CCID3 draft.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit b3a3077d963fc54a25be26e2e84fe9f4327c1e12
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:34:10 2005 -0300

    [CCID3] Make the ccid3hcrx_rtt calc look more like the ccid3hctx_rtt one
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 1a28599a2c2781dd6af72f4f84175e2db74d3bb1
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:32:56 2005 -0300

    [CCID3] Use ELAPSED_TIME in the HC TX RTT estimation
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 1c14ac0ae8eb62cbb40af1e31b156994c7d7d3d5
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:32:01 2005 -0300

    [DCCP] Give precedence to the biggest ELAPSED_TIME
    
    We can get this value in an TIMESTAMP_ECHO and/or in an ELAPSED_TIME option, if
    receiving both give precendence to the biggest one.
    
    In my tests they are very close if not equal at all times, so we may well think
    about removing the code in CCID3 that inserts this option and leaving this to
    the core, and perhaps even use just TIMESTAMP_ECHO including the elapsed time.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 27ae543e6f116df66e2b19ff0a3aa1053e4784d8
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:31:07 2005 -0300

    [CCID3] Calculate ccid3hcrx_x_recv using usecs_div
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 507d37cf269ebbd1b32bcc435fe577e411f73151
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:30:07 2005 -0300

    [CCID] Only call the HC insert_options methods when requested
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 0ba7a3ba6608de6e0c0bfe3009a63d7e0b7ab0ce
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Sep 9 02:28:47 2005 -0300

    [CCID3] Avoid unsigned integer overflows in usecs_div
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 5f5024130287a9467a41b9f94ec170958ae45cbd
Merge: 82b7ec7... 8add788...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 20:26:11 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 82b7ec75df5b52d6febffb02ce4080a67550ac56
Merge: 03981f2... c9fc0d6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 20:24:02 2005 -0700

    Merge git://oss.sgi.com:8090/oss/git/xfs-2.6

commit 8add788574694c5aed04fcb281a5c999e40cd8f6
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Sep 8 23:07:29 2005 -0400

    [libata] minor fixes
    
    * sata_mv: remove pci_intx(), now that the same function is in PCI core
    * sata_sis: fix variable initialization bug, trim trailing whitespace

commit c9fc0d6a6901e7f06c6bbd0061e503d96464266d
Author: Nathan Scott <nathans@bruce>
Date:   Fri Sep 9 11:38:09 2005 +1000

    [XFS] Revert recent quota Makefile change, not in a fit state for merging.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 03981f2427c767cfcd917cb51197c43fe68ba5db
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: extract common timer code for 68EZ328 processor
    
    Rework the 68x328 configuration and setup code. All 68x328 varients
    share the same timer hardware. So extract that into its own file,
    instead of keeping copies in each processors setup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9b9d5ddb827dc36cc1f7214f5818640e1bc22d5
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: include ColdFire 523x processor register definitions
    
    Include the ColdFire 523x register definitions when compiling
    for that target processor.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75003c4812ae23a8a99e9921bbe66ffb0e784c8e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: create common timer code for 68x328 processor varients
    
    Create common timer code for all 68x328 processor varients.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a79626604bc044cec30bfc6cc3332007588e1a94
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: register map setup for MOD5272 board
    
    The boot loader on the MOD5272 board doesn't set the register maping,
    so set it in the 5272 init code. There was code in there to support
    this, but we had never needed to use it before.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a052b7affc193a7937e6791d262addcb82654d5f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: add timer support for the 523x ColdFire processor family
    
    Add timer support for the ColdFire 523x processor family.
    (It uses the ColdFire PIT timer hardware, so we just build that in).
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dbdd91fe67e3cd28af36d3853df38b92deec711
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: include support for the ColdFire 523x processor UARTs
    
    Add support definitions for the integrated UARTs on the 523x ColdFire
    processor family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee721126cae77e66efb470d38cf971ed7b0c506b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: extract common timer code for 68328 processor
    
    Rework the 68x328 configuration and setup code. All 68x328 varient
    share the same timer hardware, so extract that into its own file,
    instead of keeping copies in each processors setup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c2b58ce716112cbba167b0abcb9558c118b8c9a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: create common config code for all 68VZ328 platforms
    
    Create common 68VZ328 config code. It is essentially the same for
    all boards that use this, so no point having a version of it for
    each.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55f37debf75f34e4fdd42ea1a81c1cea60c7ad9f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: remove DrangonEngine2 specific config code
    
    Remove DragonEngine2 specific config code. Use common 68VZ328 config
    code now.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58201a2d03272b99bdbb5090c0aca517db0702a7
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: remove uCdimm specific config code
    
    Remove uCdimm specific config code. Use common 68VZ328 config code now.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97591b2c76e3a11d6060b72aa53dc30d3d5478c5
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: 523x ColdFire processor init/config Makefile
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bdd89db117a55c77a854829ff507d6d68ab6485
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: defines to support the ColdFire 523x processor
    
    Add processor level and clock support defines for the ColdFire 523x
    processor.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 910ce396a88b84b99377f7c46888a1ff9a86ded3
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 9 09:32:14 2005 +1000

    [PATCH] m68knommu: ColdFire 523x processor register definitions
    
    ColdFire 523x processor hardware register definitions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fe8a0f4c5d64cbc78227a88df4566c0d0ee4648
Merge: 529980c... 344a076...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 17:26:52 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 529980c8b0b04e8a3f6606cdc156f1f81a5d68cd
Merge: e3e3679... 52c18fd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 17:24:34 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq

commit e3e3679cfc1c6689e035f6d69606253b1eda63ca
Merge: 5420520... 29db35e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 17:22:53 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart

commit 54205209732a05f51f5fbb3eb3e5c36ac81e79d9
Merge: 6d8de3a... b71e318...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 17:21:02 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit b71e318cdb1dc301d734fdd4983dfc6dc167235a
Author: Henk <Henk.Vergonet@gmail.com>
Date:   Wed Aug 17 10:40:26 2005 +0200

    [PATCH] USB: yealink: fix htons usage, documentation updates
    
    Signed-off-by: Henk Vergonet <henk.vergonet@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d5ae36dd439549305f00a755556f49c9fa7bb237
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Aug 16 12:33:30 2005 -0700

    [PATCH] USB: fix endian issues in yealink driver.
    
    sparse still complains about the htons usage, but I'll leave that for
    others to fix.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aca951a22a1d93ebe31b54052b3eb9a8196df2fc
Author: Henk <Henk.Vergonet@gmail.com>
Date:   Tue Aug 16 16:17:43 2005 +0200

    [PATCH] input-driver-yealink-P1K-usb-phone
    
    This patch aggregates all modifications in the -mm tree and adds
    complete ringtone support.
    
    The following features are supported:
      - keyboard          full support
      - LCD               full support
      - LED               full support
      - dialtone          full support
      - ringtone          full support
      - audio playback    via generic usb audio diver
      - audio record      via generic usb audio diver
    
    For driver documentation see: Documentation/input/yealink.txt
    For vendor documentation see: http://yealink.com
    
    Signed-off-by: Henk <Henk.Vergonet@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d6450e19329c85ac4888c185429094236a650928
Author: Nick Sillik <n.sillik@temple.edu>
Date:   Wed Aug 17 13:37:34 2005 -0400

    [PATCH] USB Storage: code cleanups for onetouch.c
    
    As sugested by Alan Stern here are a few code cleanups for onetouch.c:
    
    -Check number of endpoints before directly referencing intf->endpoint[2]
    -Use defined constants instead of magic numbers
    -Revmove the non-ascii characters from copyright notice
    -Make registration and deregistration messages more similar
    
    Signed-off-by: Nick Sillik <n.sillik@temple.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0256839619d9b1e933cafc83e7f0deaad4216465
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Aug 15 16:53:57 2005 -0700

    [PATCH] usbmon in 2.6.13: peeking into DMA areas
    
    This code looks at urb->transfer_dma, maps the page and takes the data.
    I am looking for volunteers to contribute architectures other than i386
    or to develop an architecure-neutral API for it (or point me that it
    was done already).
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0384200f6b608e77fb5ddf7dfae1bf0e42c1c6e
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Aug 13 18:44:58 2005 -0700

    [PATCH] ehci: add tt_usecs
    
    This adds the field tt_usecs to ehci_qh and ehci_iso_stream, and sets it
    appropriately when setting them up as periodic endpoints.  It records
    the transation translator's think_time (added in last patch) plus the
    downstream (i.e. low or full speed) bustime of the transfer associated
    with each interrupt or iso frame, as calculated by usb_calc_bus_time.
    
    Signed-off-by: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e09711aef4180002241c7f2eab37390ddf40d6a0
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Aug 13 18:41:04 2005 -0700

    [PATCH] ehci: add think_time
    
    This adds think_time to the usb_tt struct and sets it appropriately
    (measured in ns); this can help us implement better split transaction
    scheduling.
    
    Signed-off-by: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 090ffa9d0e904e1ed0f86c84dcf20684a8ac1a5a
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:54:50 2005 -0700

    [PATCH] USB: usbnet (9/9) module for pl2301/2302 cables
    
    This wraps up the conversion of the "usbnet" driver structure, by
    moving the Prolific PL-2201/2302 minidriver to a module of its own.
    It also includes some minor cleanups to the remaining "usbnet" file,
    notably removing that long changelog at the top.
    
    Minor historical note:  Linux 2.2 first called the driver for
    this hardware "plusb".
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 64e049102d3de3e61409cb6019403a9e689dfda6
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:54:36 2005 -0700

    [PATCH] USB: usbnet (8/9) module for RNDIS devices
    
    This adds host-side RNDIS support to the "usbnet" driver, so Linux can talk
    to various devices (often based on WinCE) that otherwise only Windows could
    talk to.
    
    Tested with little-endian Linux talking to a Linux-USB Ethernet/RNDIS based
    peripheral.  This also includes updates from Eddie C. Dost <ecd@brainaid.de>
    for big-endian SPARC Linux talking to a Nokia 9500 Communicator.
    
    It's still marked as EXPERIMENTAL because this code is so young.  This
    ought to let Linux to work with various cable modems that previously
    would have been "Windows Only".
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4324fd493430c0ab99dd7e89d50540b5e70f8098
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:54:20 2005 -0700

    [PATCH] USB: usbnet (7/9) module for CDC Ethernet
    
    Makes the CDC Ethernet support live in a separate driver module.
    This module is a bit special since it exports utility functions
    that are reused by the the Zaurus and RNDIS drivers, but it's
    not "core" like usbnet itself.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0aa599c5644fddd3052433c5335260108a8a39a2
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:53:58 2005 -0700

    [PATCH] USB: usbnet (6/9) module for Zaurii and compatibles
    
    This moves usbnet support for Zaurus and compatibles into its own module.
    Other than exporting a couple of helper functions, this just involved
    shuffling some code and updating the comments.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47ee3051c856cc2aa95d35d577a8cb37279d540f
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:53:42 2005 -0700

    [PATCH] USB: usbnet (5/9) module for genesys gl620a cables
    
    This moves the GeneSys GL620USB-A support into its own driver file.
    It also fixes a "return wrong skb" glitch in the rx unbatching, as
    recently reported, and adds some missing byteswaps in the special
    "genelink" headers (so it might now work on big-endian Linux).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 904813cd8a0b334189da285bb05af0b18b062502
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:53:26 2005 -0700

    [PATCH] USB: usbnet (4/9) module for net1080 cables
    
    As with the "cdc_subset" and "asix" drivers, this just moves the net1080
    support into its one driver module.  In this case there's a small bit of
    extra cleanup involved, moving some funky framing logic into the tx_fixup()
    routine (resolving a long overdue FIXME).
    
    Minor historical note:  "usbnet" started out as "net1080", then got
    generalized to make it easier for other network drivers to reuse the
    urb queueing and fault management code here.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2e55cc7210fef90f88201e860d8767594974574e
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:53:10 2005 -0700

    [PATCH] USB: usbnet (3/9) module for ASIX Ethernet adapters
    
    This patch moves the ASIX AX8817x driver into its own file, just using
    the "usbnet" infrastructure as a utility library.
    
     - As with "cdc_subset" this involved minor Kconfig/kbuild tweaks,
       moving code from one file to another, and exporting a few functions.
    
     - This includes updates from Jamie Painter to add (and use) a new hook
       to handle the different maximum transfer sizes for rx and tx sides.
    
     - Also from Jamie, some bugfixes:
        * MDIO byteorder (to address some PPC media negotiation problems);
        * Force alignment at key spots when using ax88772 framing (on some
          embedded hardware, the network stack will break otherwise);
        * Address some link reset problems.
    
    It also makes this driver use the standard (5 seconds vs half second)
    control timeouts used elsewhere in USB; and wraps a few lines before
    the 80th column (which previously needed it).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 38bde1d4699af45e6a4167a72e2e512e45c35ca8
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:52:45 2005 -0700

    [PATCH] USB: usbnet (2/9) module for simple network links
    
    This patch creates the first of several separate "minidriver" modules
    for "usbnet".  This one handles only the very simplest hardware, which
    can be handled almost entirely by the "usbnet" core.
    
        - Move device-specific bits into new "cdc_subset.c" driver,
          shrinking "usbnet" by a bunch;
    
        - Export the functions needed to support this minidriver
          (with EXPORT_SYMBOL_GPL);
    
        - Update Kconfig and kbuild accordingly.
    
    This one handles about a dozen different device types, with the most
    notable ones being Gumstix and most Linux-based PDAs (except Zaurus
    running that ancient code from Sharp).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f29fc259976e9f4dd1fe8ed59ccdd50e4ea61db0
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Aug 31 09:52:31 2005 -0700

    [PATCH] USB: usbnet (1/9) clean up framing
    
    This starts to prepare the core of "usbnet" to know less about various
    framing protocols that map Ethernet packets onto USB, so "minidrivers"
    can be modules that just plug into the core.
    
      - Remove some framing-specific code that cluttered the core:
    
          * net->hard_header_len records how much space to preallocate;
            now drivers that add their own framing (Net1080, GeneLink,
    	Zaurus, and RNDIS) will have smoother TX paths.  Even for
    	the drivers (Zaurus, Net1080) that need trailers.
    
          * defines new dev->hard_mtu, using this "hardware" limit to
            check changes to the link's settable "software" mtu.
    
          * now net->hard_header_len and dev->hard_mtu are set up in the
            driver bind() routines, if needed.
    
      - Transaction ID is no longer specific to the Net1080 framing;
        RNDIS needs one too.
    
      - Creates a new "usbnet.h" header with declarations that are shared
        between the core and what will be separate modules.
    
      - Plus a couple other minor tweaks, like recognizing -ESHUTDOWN
        means the keventd work should just shut itself down asap.
    
    The core code is only about 1/3 of this large file.  Splitting out the
    minidrivers into separate modules (e.g. ones for ASIX adapters,
    Zaurii and similar, CDC Ethernet, etc), in later patches, will
    improve maintainability and shrink typical runtime footprints.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dd7d50081f5dafd9392bd79f1ec90d553a7303c9
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Aug 14 17:24:26 2005 +0400

    [PATCH] USB ldusb: fmt warnings fixes for 64-bit platforms
    
    Fix
    
    drivers/usb/misc/ldusb.c: In function `ld_usb_read':
    drivers/usb/misc/ldusb.c:467: warning: int format, different type arg (arg 4)
    drivers/usb/misc/ldusb.c: In function `ld_usb_write':
    drivers/usb/misc/ldusb.c:531: warning: int format, different type arg (arg 4)
    drivers/usb/misc/ldusb.c:532: warning: int format, different type arg (arg 5)
    drivers/usb/misc/ldusb.c:532: warning: int format, different type arg (arg 6)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9bc45e0c01ae268ad5f9e6d35492bbd8197e32f2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Aug 14 13:00:58 2005 +0200

    [PATCH] USB: schedule OSS USB drivers for removal
    
    Deprecate the OSS USB drivers.
    
    This patch includes spelling fixes by Lee Revell.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4fbd55f03e294d18bd7a5c4c98974e157f6f84e7
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Wed Aug 10 17:25:25 2005 -0700

    [PATCH] USB: remove include of asm/usb.h in ohci-ppc-soc.c
    
    ohci-ppc-soc.c provides for a platform-specific callback mechanism for
    when the HC is successfully probed or removed.  It turned out that none
    of the 3 platforms using it need this facility. Also the required
    include/asm-ppc/usb.h has never been accepted.  This patch removes the
    callback feature and the include of <asm/usb.h>.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8f34c2883b894b9a97f07b23b5b86fd65ecd2f85
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Aug 11 19:36:36 2005 -0700

    [PATCH] USB: remove annoying message
    
    Avoid an annoying message that can appear if devices are disconnected
    in the middle of a USB scatterlist operation.
    
    Message noted in http://bugzilla.kernel.org/show_bug.cgi?id=4373
    (but the real issue there seems to be a SCSI level hang).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f956e7cd9ac4618b98022020e638bbdc01d9d65a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Aug 11 19:37:01 2005 -0700

    [PATCH] USB: tweak highspeed timing calculations
    
    Use a more correct calculation for highspeed bit times.
    
      http://bugzilla.kernel.org/show_bug.cgi?id=3604
    
    This sort if thing might start to make a difference now that the high
    speed periodic scheduler is more complete -- and even getting used.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3b4d7f79164853e10342d707e32307e0c8054982
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Aug 11 15:50:32 2005 -0400

    [PATCH] USB: Support unbinding of the usb_generic driver
    
    This patch (as556) adds support for unbinding the usb_generic "driver".
    That driver only binds to USB devices, as opposed to interfaces, and it
    does nothing much besides marking which struct device's go with an
    overall USB device plus providing suspend/resume methods.  Now that
    users can unbind drivers at will using the sysfs "unbind" attribute, we
    need a rational way of dealing with USB devices that are no longer under
    full control of the USB stack.  The patch handles this by unconfiguring
    the device, thereby removing all the interfaces and their associated
    drivers and children.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3ea15966ed59f2bc20928c7b0496b4585f6de206
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Aug 11 10:15:39 2005 -0400

    [PATCH] USB: Add timeout to usb_lock_device_for_reset
    
    This patch (as555) modifies the already-awkward
    usb_lock_device_for_reset routine in usbcore by adding a timeout.  The
    whole point of the routine is that the caller wants to acquire some
    semaphores in the wrong order; protecting against the possibility of
    deadlock by timing out seems only prudent.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e52b1d3afe698cb77c080ecbe9e745257ff8c81b
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Aug 9 12:13:35 2005 -0700

    [PATCH] USB: Fix typo in ohci-ppc-soc.c: usb_hcd_put => usb_put_hcd
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ba44e7c407e248ed85d4f510728d0284373cf678
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Aug 9 15:04:00 2005 +0100

    [PATCH] USB: S3C24XX port numbering fix
    
    Fix the port numbering confusion for the S3C24XX platform device
    information as reported by Rudy <rudyboy168@gmail.com>
    
    This patch ensurs that the the ports are numbered 0 and 1.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bf193d3cd2a3b73f2df74f57106114867946c09c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Aug 10 17:12:31 2005 -0400

    [PATCH] USB: Disconnect children when unbinding the hub driver
    
    This patch (as554) makes the hub driver disconnect any child USB devices
    when it is unbound from a hub.  Normally this will never happen, but
    there are a few oddball ways to unbind the hub driver while leaving the
    children intact.  For example, the new "unbind" sysfs attribute can be
    used for this purpose.
    
    Given that unbinding hubs with children is now safe, the patch also
    removes the code that prevented people from doing so using usbfs.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8b28c7526a302bbfa618f7eab4ef961edd68c9a0
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Aug 10 17:04:13 2005 -0400

    [PATCH] USB: Code motion in the hub driver
    
    This patch (as553) merely moves some code and deletes an unneeded test in
    the hub driver.  This is in preparation for the patch that follows.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68a6457edb8a64fdcc231a4fc5406f6e3f6c9b33
Author: Daniel Drake <dsd@gentoo.org>
Date:   Wed Aug 10 18:30:04 2005 +0100

    [PATCH] USB: Fix HP8200 detection in shuttle_usbat
    
    Adding flash-device support to the shuttle_usbat driver in 2.6.11
    introduced the need to detect which type of device we are dealing with:
    CDRW drive, or flash media reader.
    
    The detection routine used turned out to not work for HP8200 CDRW users,
    who saw their devices being detected as a flash disk.
    
    This patch (which has been tested on both flash and cdrom) removes some
    unnecessary code, moves device detection to much later during
    initialization, and introduces a new detection routine which appears to
    work.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 242cf670c09c05504ce53dfc27f8331a072f169d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Jul 29 16:11:07 2005 -0400

    [PATCH] USB: fix up URB_ASYNC_UNLINK usages from the usb-serial drivers
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b375a0495fd622037560c73c05f23ae6f127bb0c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jul 29 16:11:07 2005 -0400

    [PATCH] USB: URB_ASYNC_UNLINK flag removed from the kernel
    
    29 July 2005, Cambridge, MA:
    
    This afternoon Alan Stern submitted a patch to remove the URB_ASYNC_UNLINK
    flag from the Linux kernel.  Mr. Stern explained, "This flag is a relic
    from an earlier, less-well-designed system.  For over a year it hasn't
    been used for anything other than printing warning messages."
    
    An anonymous spokesman for the Linux kernel development community
    commented, "This is exactly the sort of thing we see happening all the
    time.  As the kernel evolves, support for old techniques and old code can
    be jettisoned and replaced by newer, better approaches.  Proprietary
    operating systems do not have the freedom or flexibility to change so
    quickly."
    
    Mr. Stern, a staff member at Harvard University's Rowland Institute who
    works on Linux only as a hobby, noted that the patch (labelled as548) did
    not update two files, keyspan.c and option.c, in the USB drivers' "serial"
    subdirectory.  "Those files need more extensive changes," he remarked.
    "They examine the status field of several URBs at times when they're not
    supposed to.  That will need to be fixed before the URB_ASYNC_UNLINK flag
    is removed."
    
    Greg Kroah-Hartman, the kernel maintainer responsible for overseeing all
    of Linux's USB drivers, did not respond to our inquiries or return our
    calls.  His only comment was "Applied, thanks."
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a4e628328ec60873fec9d506d682155391f589ce
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Jul 28 14:50:29 2005 -0700

    [PATCH] USB Storage: wedge SCSI revision at 2 for usb-storage devices
    
    This patch started life as as479b, and has been rediffed.  Please note
    the order of submission of this latest patch series -- even tho this has
    an older original number, it is the last patch I'll be sending today.
    
    This patch changes the reported SCSI revision level to 2 for all
    disk-type devices.  This is needed in a few cases because the device
    reports a level of 3 or higher but then crashes when given a REPORT LUNS
    command (for which support is supposed to be mandatory at those levels).
    This shouldn't harm us, since it only matters for sparse LUNs and we
    have separate ways of coping with that.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34008dbfe8c00eca67f97bad484eb5cb03bafe66
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Jul 28 14:49:01 2005 -0700

    [PATCH] USB Storage: add support for Maxtor One-Touch button
    
    This patch is originally from Nick Sillik, and has been rediffed against
    the latest tree.
    
    This patch adds usability to the OneTouch Button on Maxtor External USB
    Hard Drives. Using an unusual device entry it declares an extra init
    function which claims the interrupt endpoint associated with this
    button.  The button is connected to the input system.
    
    Signed-off-by: Nick Sillik <n.sillik@temple.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 26186ba77b493204ae0fadc3c88a67b14f22168f
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Jul 28 14:45:50 2005 -0700

    [PATCH] USB Storage: close a race condition in disconnect near queuecommand
    
    This patch started life as as534, and has been re-diffed against the latest
    tree.
    
    usb-storage has a small loophole, a window between the time queuecommand
    accepts a new command and the time the control thread starts to execute
    it.  If disconnect is called during that window, the driver won't cancel
    the pending command -- we've been relying on the SCSI core to cancel it
    for us during host removal.  But it's better for usb-storage to cancel
    it;  this avoids races and reduces reliance on the SCSI core.
    Fortunately cancelling these commands is easy to do; the key is to do it
    _before_ calling scsi_remove_host.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 77f46328fb83b64befd889ebce6d7fb959932509
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Jul 28 14:44:29 2005 -0700

    [PATCH] USB Storage: close a race condition in disconnect near probe
    
    This patch started life as as533, and has been re-diffed against the
    current tree.
    
    Disconnect processing in usb-storage naturally divides into two parts:
    one to quiesce the driver (make sure no commands are executing or
    queued) and remove the host, and the other to deallocate all the USB and
    non-USB resources.  This patch creates two subroutines to handle those
    two parts.  Mostly it's just code movement, but there is one significant
    change.  If the scsi-scanning thread fails to initialize but the host
    has successfully been added, we need to quiesce the driver before
    removing the host.  After all, it's possible that scanning could have
    been initiated from somewhere else, such as userspace -- very low
    probability, but it's easily handled by calling the new subroutine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f64e078139109d1902e5b1274c23cec9a9ad12e
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Thu Jul 28 14:43:08 2005 -0700

    [PATCH] USB Storage: remove dependency on SCSI-provided serial/tag number
    
    This patch started life as as531 from Alan Stern.  It has been rediffed
    against the latest tree.
    
    The SCSI people have deprecated the use of scsi_cmnd.serial_number for
    anything other than printk.  Worse than that, the SCSI core doesn't
    always increment the number (when the error handler is running, for
    example).  So this patch creates a locally-stored value for use in
    bulk-only tags.  The net result is a simplification, since we no longer
    have to save & restore the serial_number value while autosensing.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a57116bc9e36c9accc869f666e1d25c5e2cdcbf
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Fri Aug 5 14:23:35 2005 +0300

    [PATCH] USB: Switch isp116x-hcd over to root hub interrupt
    
    Switch isp116x-hcd over from root hub polling to interrupt.  This change closes
    also a race that was present with the old polling scheme: status polling could
    happen in a time window, where root hub status bits were not stable.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f8d23d309809ae69c763520dababb7e845938272
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 17:02:54 2005 +0300

    [PATCH] USB: isp116x-hcd: remove clock() and reset()
    
    This patch removes support for user-provided platform-specific hardware reset
    and clock starting/stopping functions. Hardware reset was needed earlier as
    getting the software reset working was tricky due to the lack of documentation.
    Recently, a number of people using isp116x have said the software reset is
    working for them.
    
    I haven't heard of anybody using the clock starting/stopping.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9d233d9faedfd8a4ee22288c1fdc698a6f75db21
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 16:54:08 2005 +0300

    [PATCH] USB: isp116x-hcd: per-port overcurrent reporting
    
    This patch sets the isp116x to report overcurrent always per-port.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 165c0f39390212d7a517b80c3bb61cb8f1782fef
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 16:52:31 2005 +0300

    [PATCH] USB: isp116x-hcd: support only per-port power switching
    
    The isp116x chip will now always be in per-port power switching mode. Remove
    conf options to set any other mode.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d4d62861b5cdb0ecfcae448e4281623284de5d05
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 16:48:19 2005 +0300

    [PATCH] USB: isp116x-hcd: remove unnecessary ClockNotStop configuration option
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dc5bed091a7a5fe378055c30a2da874f77228b71
Author: Olav Kongas <ok@artecdesign.ee>
Date:   Thu Aug 4 16:46:28 2005 +0300

    [PATCH] USB: isp116x-hcd: use fixed power-on-to-power-good-time
    
    This patch removes the power-on-to-power-good-time configuration option for
    isp116x-hcd.
    
    Signed-off-by: Olav Kongas <ok@artecdesign.ee>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0d9899f8139b1e4ee84b97fb61615714fd40be5b
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Jul 28 20:46:32 2005 -0700

    [PATCH] USB: usbnet and unsigned gfp_flags
    
    This just fixes some gfp flags warnings that joined us recently.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0bc8e009a2d5106183ea31a2b83035e790778cab
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 31 20:41:19 2005 -0700

    [PATCH] USB usblp: rate-limit printer status error messages
    
    Rate-limit usblp printer error status messages.
    
    I unplugged my USB printer and almost instantly got several hundred
    of these in my kernel message log:
    drivers/usb/class/usblp.c: usblp0: error -19 reading printer status
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a1cf96efbabac2f8af6f75286ffcefd40b0a466c
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun Aug 14 21:16:03 2005 -0700

    [PATCH] USB: ub 4: Zaitcev's quasi-S/G
    
    Back out Axboe-style quasi-S/G and replace it with one command and
    repeated URBs. This is similar to what usb-storage does, only instead
    of a few URBs allocated together, one URB is reused.
    
    Jens's idea was very nice, but it collapsed when I had to support
    packet commads for CD burning. I cannot issue two or more packet
    commands where application expected only one.
    
    However, burning does not work completely yet. The cdrecord starts,
    recognizes the device, then aborts without writing a TOC.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6c1eb8c1c3ec2df00b629ab4fe7fe04a95129f08
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Jul 30 22:51:52 2005 -0700

    [PATCH] USB: ub 3/3: death to ub_bd_rq_fn_1
    
    When Al Viro saw the ub.c, he observed that it was a proof positive of
    Linus not reading patches anymore: names like fo_ob_ar_ba_2 used to
    cause serious fireworks. In my defence, any good scheme can be pushed
    to the realm of absurd if pushed far enough.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 07d4fd2566ddbf2a91ff3cde80ddf449ab82c381
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Jul 30 22:51:45 2005 -0700

    [PATCH] USB: ub 2/3: Fold one line
    
    Evidently, Yani Ioannou's display is wider than mine.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ba6abf1352dc83e500a71e3ad9b39de0337f0c6b
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Jul 30 22:38:30 2005 -0700

    [PATCH] USB: ub 1/3: Axboe's quasi-S/G
    
    This the quasi-S/G patch for ub as suggested by Jens Axboe at OLS and
    implemented that night before 4 a.m. Surprisingly, it worked right away...
    Alas, I had to skip some OLS partying, but it was for the good cause.
    Now the speed of ub is quite acceptable even on partitions with small
    block size.
    
    The ub does not really support S/G. Instead, it just tells the block
    layer that it does. Then, most of the time, the block layer merges
    requests and passes single-segmnent requests down to ub; everything
    works as before. Very rarely ub gets an unmerged S/G request. In such
    case, it issues several commands to the device.
    
    I added a small array of counters to monitor the merging (sg_stat).
    This may be dropped later.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 64be07585893d207d23f8516948222faf746aa43
Author: Mihnea-Costin Grigore <mihnea@zulu.ro>
Date:   Fri Jul 29 13:48:48 2005 +0300

    [PATCH] usb-storage: Add IGNORE_RESIDUE flag for Mitsumi USB 2.0 card reader (VIA hardware)
    
    This patch adds an entry in the unusual_devs.h file for a Mitsumi card
    reader/floppy combo that uses a VIA chipset. The IGNORE_RESIDUE flag was
    needed for the second LUN to operate properly.
    
    Signed-off-by: Mihnea-Costin Grigore <mihnea@zulu.ro>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fad21bdf56a25e1cb3e92bba33349de368e8f0b0
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Aug 10 15:15:57 2005 -0400

    [PATCH] USB: Fix regression in core/devio.c
    
    This patch (as551) fixes another little problem recently added to the
    USB core.  Someone didn't fix the type of the first argument to
    unregister_chrdev_region.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fbf82fd2e1f4e679c60516d772d1862c941ca845
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Sun Jul 31 01:05:53 2005 +0200

    [PATCH] USB: real nodes instead of usbfs
    
    This patch introduces a /sys/class/usb_device/ class
    where every connected usb-device will show up:
    
      tree /sys/class/usb_device/
      /sys/class/usb_device/
      |-- usb1.1
      |   |-- dev
      |   `-- device -> ../../../devices/pci0000:00/0000:00:1d.0/usb1
      |-- usb2.1
      |   |-- dev
      |   `-- device -> ../../../devices/pci0000:00/0000:00:1d.1/usb2
      ...
    
    The presence of the "dev" file lets udev create real device nodes.
      kay@pim:~/src/linux-2.6> tree /dev/bus/usb/
      /dev/bus/usb/
      |-- 1
      |   `-- 1
      |-- 2
      |   `-- 1
      ...
    
    udev rule:
      SUBSYSTEM="usb_device", PROGRAM="/sbin/usb_device %k", NAME="%c"
      (echo $1 | /bin/sed 's/usb\([0-9]*\)\.\([0-9]*\)/bus\/usb\/\1\/\2/')
    
    This makes libusb pick up the real nodes instead of the mounted usbfs:
      export USB_DEVFS_PATH=/dev/bus/usb
    
    Background:
      All this makes it possible to manage usb devices with udev instead of
      the devfs solution. We are currently working on a pam_console/resmgr
      replacement driven by udev and a pam-helper. It applies ACL's to device
      nodes, which is required for modern desktop functionalty like
      "Fast User Switching" or multiple local login support.
    
    New patch with its own major. I've succesfully disabled usbfs and use real
    nodes only on my box. With: "export USB_DEVFS_PATH=/dev/bus/usb" libusb picks
    up the udev managed nodes instead of reading usbfs files.
    
    This makes udev to provide symlinks for libusb to pick up:
      SUBSYSTEM="usb_device", PROGRAM="/sbin/usbdevice %k", SYMLINK="%c"
    
    /sbin/usbdevice:
      #!/bin/sh
      echo $1 | /bin/sed 's/usbdev\([0-9]*\)\.\([0-9]*\)/bus\/usb\/\1\/\2/'
    
    Signed-off-by: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 22af8878d2d641c6b15fe39fe4de3c05b2c477f0
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Aug 4 23:16:12 2005 +0100

    [PATCH] USB: Prevent hid-core claiming Apple Bluetooth device on new G4 powerbooks
    
    To recap: My new G4 powerbook has a bluetooth device that boots up in
    what apppears to be a compatability mode - it looks exactly like an HID
    keyboard/mouse device.
    
    A special command sequence is sent to switch it into full bluetooth
    mode. When this occurs the original HID device vanishes, and a new
    (bluetooth HID) USB device appears on the bus with a different product
    ID.
    
    The original thread is here:
    http://sourceforge.net/mailarchive/message.php?msg_id=12532263
    
    The attached patch adds the device to the hid-core quirks so that
    hid-core ignores it.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e6ac4a40e5f5c58f6e1058f6b3fb98be921dc7f4
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue Aug 2 14:01:27 2005 +0100

    [PATCH] USB ftdi_sio: New IDs for ELV, Xsens and Falcom products
    
    This patch for the ftdi_sio driver adds a bunch of new devices and fixes
    an incorrect PID:
    
    o Fix PID for ELV UO100 (the PID was in fact for ELV UR100).
    o Add PID ELV UR100 (see above) and ELV ALC 8500 Expert.
    o Add a whole bunch of other PIDs for ELV USB devices, commented out for
       now as they may be used by other drivers eventually.  (Christian Abt
       of ELV.de submitted a full list of devices including an indication of
       which set of drivers are used by default in the MS Windows world.  We
       decided to comment out the devices that use FTDI's D2XX Windows
       drivers by default.)
    o Add PIDs for eight devices from Xsens Technologies BV (submitted in a
       patch against 2.6.12.2 by Patrick Riphagen).
    o Add PID for Falcom Samba GPRS modem (submitted by Sebastian Schubert).
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fdcb0a0f1b8b050cbb7ed0ea2e030741ce5bb517
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Thu Jul 28 18:40:32 2005 +0100

    [PATCH] USB ftdi_sio: user specified VID/PID
    
    ftdi_sio: Support one user specified vendor and product ID via a couple
    of new module parameters.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1694899fd1af43636351aac97f415fd3c9cefb1d
Author: Dariusz M <D.Marcinkiewicz@elka.pw.edu.pl>
Date:   Thu Jul 28 18:06:13 2005 +0200

    [PATCH] USB: pl2303 driver, makes pl2303HX chip work correctly
    
    This trivial patch makes pl2303 driver work correctly with pl2303HX chip.
    Apparently some bug in HX version of pl2303 makes the chip loose some
    transmitted bytes or stop working at all after reception of
    USB_REQ_CLEAR_FEATURE mesage. Logs generated by UsbSnoop application reveal
    that windows driver does not send this type of messages to the converter.
    
    From: "Dariusz M." <D.Marcinkiewicz@elka.pw.edu.pl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ef0840286045fe7ce84cb77e7608f0844c81001c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jul 27 01:06:19 2005 -0700

    [PATCH] USB: fix keyspan_remote endian bug on probe
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 91e79c91fab10f5790159d8d0c1d16da2a9653f9
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Jul 13 15:18:30 2005 -0700

    [PATCH] USB: Gadget library: centralize gadget controller numbers
    
    This patch centralizes the assignment of bcdDevice numbers for different
    gadget controllers.  This won't improve the object code at all, but it
    does save a lot of repetitive and error-prone source code ... and will
    simplify the work of supporting a new controller driver, since most new
    gadget drivers will no longer need patches (unless some hardware quirks
    limit USB protocol messaging).
    
    Added minor cleanups and identifer hooks for the UDC in the Freescale
    iMX series processors.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 81671ddb7e24e9d1f84812dba8ed810935f77d40
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jul 4 19:32:51 2005 +0200

    [PATCH] USB: drivers/serial/usb-serial: Remove unneeded void * casts
    
    The following patch removes unneeded casts for the following (void *) pointers:
    	- tty_struct->driver_data
    	- void *private argument of usb_serial_port_softint()
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7bb75aeeeec7417a961920b3f63a83007475260f
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 01:08:30 2005 -0700

    [PATCH] USB: option card driver coding style tweaks
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9db07fba7f113764d7379b0f68324a9a5450306
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue Jul 12 17:21:31 2005 -0500

    [PATCH] USB: whitespace fixes for cypress_m8 driver
    
    Reading this driver I noticed some trailing whitespaces and tabs so I
    removed them with some 80th column fitting and a few more similar
    things.
    
    From: Carlo Perassi <carlo@linux.it>
    Signed-off-by: Lonnie Mendez <dignome@gmail.com>
    Signed-off-by: Carlo Perassi <carlo@linux.it>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6d8de3a26b5c20b04a9317b4446582167d5883da
Merge: 7bbedd5... 0a25e4d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:55:53 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/w1-2.6

commit 7bbedd521310547ca73cc77adcf61fb85723adc3
Merge: f44702f... a04ce0f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:55:23 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit f44702f49056c203341badaa2cb8a706160d9119
Merge: 27e2df2... 4d803fc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:54:53 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 27e2df2228712af43e657b9768828448c64ba424
Merge: c0d6f96... e104411...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:52:11 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit c0d6f9663b30a09ed725229b2d50391268c8538e
Merge: 0db7443... 6fd60fa...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:43:09 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-i2c manually
    
    Old tree, so the automatic merge had some problems.

commit 0db7443b2bd0b92da4e8afa46f8123a7076136c6
Merge: 6306846... 6df29de...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:30:14 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 63068465fa9ba8258e341f70c07cd2221b8c114d
Merge: 35b7ac4... c26971c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:28:16 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc

commit 35b7ac4c48fa851600c028e088d2239a2cf3dfca
Merge: 4e14918... 61c8c15...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 15:26:48 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit e104411b82f5c4d19752c335492036abdbf5880d
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Sep 8 15:11:55 2005 -0700

    [XFRM]: Always release dst_entry on error in xfrm_lookup
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf0b450cd5176b68ac7d5bbe68aeae6bb6a5a4b8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 8 15:10:52 2005 -0700

    [TCP]: Fix off by one in tcp_fragment() "already sent" test.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 61c8c158c828073cfebf11ca8e340727feafa038
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Sep 8 23:07:40 2005 +0100

    [ARM] 2892/1: remove gcc workaround for direct access to absolute memory addresses
    
    Patch from Nicolas Pitre
    
    It used to make a difference in the gcc-2.95 era.  However these days
    modern gcc apparently got better at not being influenced by such constructs
    (which is good in general) and therefore such workaround is of no real
    advantage anymore.
    The good news is that gcc (from version 4.1.0) is now fixed with
    regards to the defficiency this workaround was trying to address.
    For those interested the patch can easily be backported to older gcc
    versions and can be found here:
    http://gcc.gnu.org/cgi-bin/cvsweb.cgi/gcc/gcc/config/arm/arm.c.diff?r1=1.476&r2=1.478
    and also here:
    http://savannah.gnu.org/cgi-bin/viewcvs/gcc/gcc/gcc/config/arm/arm.c.diff?r1=text&tr1=1.476&r2=text&tr2=1.478&diff_format=u
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0dffefbf1a26ee0661d47516420d86b485a08e9c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Sep 8 23:07:39 2005 +0100

    [ARM] 2891/1: S3C2410 - update s3c2410_defconfig for 2.6.13
    
    Patch from Ben Dooks
    
    Updated the s3c2410_defconfig for the 2.6.13-git8
    kernel release, as well as adding the Anubis
    board to the list of boards built.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7c38cf021b42a4297bc8f860ab627734bdd6c8d1
Author: Tony Lindgren <tony@atomide.com>
Date:   Thu Sep 8 23:07:38 2005 +0100

    [ARM] 2890/1: OMAP 1/4: Update omap1 specific files, take 2
    
    Patch from Tony Lindgren
    
    This patch syncs the mainline kernel with linux-omap tree.
    The highlights of the patch are:
    - Convert more drivers to register resources in board-*.c to take
      advantage of the driver model by David Brownell and Ladislav Michl
    - Use set_irq_type() for GPIO interrupts instead of
      omap_set_gpio_edge_ctrl() by David Brownell
    - Add minimal support for handling optional add-on boards, such as
      OSK Mistral board with LCD and keypad, by David Brownell
    - Minimal support for loading functions to SRAM by Tony Lindgren
    - Wake up from serial port by muxing RX lines temporarily into GPIO
      interrupts by Tony Lindgren
    - 32KHz sched_clock by Tony Lindgren and Juha Yrjola
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a04ce0ffcaf561994ecf382cd3caad75556dc499
Author: Brett M Russ <russb@emc.com>
Date:   Mon Aug 15 15:23:41 2005 -0400

    [PATCH] PCI/libata INTx cleanup
    
    Simple cleanup to eliminate X copies of the pci_enable_intx() function
    in libata.  Moved ahci.c's pci_intx() to pci.c and use it throughout
    libata and msi.c.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3fe9d19f9e86a55679f5f2b38ec0a43a1a510cee
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Wed Aug 17 15:32:19 2005 -0700

    [PATCH] PCI: Support PCM PM CAP version 3
    
    - support PCI PM CAP version 3 (as defined in PCI PM Interface Spec v1.2)
    
    - pci/probe.c sets the PM state initially to 4 which is D3cold.  add a
      PCI_UNKNOWN
    
    - minor cleanups
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cecf4864cf52a4a243a62b2856a6a155edbb55e8
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Aug 18 14:33:01 2005 +1000

    [PATCH] PCI: Add pci_walk_bus function to PCI core (nonrecursive)
    
    The PCI error recovery infrastructure needs to be able to contact all
    the drivers affected by a PCI error event, which may mean traversing
    all the devices under a given PCI-PCI bridge.  This patch adds a
    function to the PCI core that traverses all the PCI devices on a PCI
    bus and under any PCI-PCI bridges on that bus (and so on), calling a
    given function for each device.  This provides a way for the error
    recovery code to iterate through all devices that are affected by an
    error event.
    
    This version is not implemented as a recursive function.  Instead,
    when we reach a PCI-PCI bridge, we set the pointers to start doing the
    devices on the bus under the bridge, and when we reach the end of a
    bus's devices, we use the bus->self pointer to go back up to the next
    higher bus and continue doing its devices.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 223176bc722a7bf519904180e956292ae1d1e819
Merge: 7d333d6... 1b11d78...
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 23:03:30 2005 +0100

    Merge branch 'master' of /usr/src/linux-2.6

commit 7d333d6c739a5cd6d60102ea1a9940cbbb0546ec
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 23:01:16 2005 +0100

    NTFS: 2.1.24 release and some minor final fixes.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 1d2450a4a6eb656798c6282b5ffc8e5f9f52ac14
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Fri Aug 12 10:13:34 2005 -0400

    [PATCH] PCI Hotplug: SGI hotplug driver fixes
    
    These fixes were suggested by pcihpd-discuss, but were dropped in the
    initial checkin of the code.  These fixes include cleaning up the
    hotplug driver sysfs filename, and some minor code cleanups.  The driver
    also requires at least PROM 4.30, not 4.20.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c9d8073fd2a0bcb5df973654e988282b523cf553
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Wed Aug 10 02:09:39 2005 +0200

    [PATCH] PCI: remove pci_find_device from parport_pc.c
    
    This patch changes pci_find_device to pci_get_device (encapsulated in
    for_each_pci_dev).
    
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11f3859b1e85dd408756c72e228cfb5aa7230c87
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Aug 10 15:18:44 2005 -0400

    [PATCH] PCI: Fix regression in pci_enable_device_bars
    
    This patch (as552) fixes yet another small problem recently added.  If an
    attempt to put a PCI device back into D0 fails because the device doesn't
    support PCI PM, it shouldn't count as error.  Without this patch the UHCI
    controllers on my Intel motherboard don't work.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 95a629657dbe28e44a312c47815b3dc3f1ce0970
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jul 28 11:37:33 2005 -0700

    [PATCH] PCI: start paying attention to a lot of pci function return values
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 085ae41f66657a9655ce832b0a61832a06f0e1dc
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 8 13:19:08 2005 -0700

    [PATCH] Make sparc64 use setup-res.c
    
    There were three changes necessary in order to allow
    sparc64 to use setup-res.c:
    
    1) Sparc64 roots the PCI I/O and MEM address space using
       parent resources contained in the PCI controller structure.
       I'm actually surprised no other platforms do this, especially
       ones like Alpha and PPC{,64}.  These resources get linked into the
       iomem/ioport tree when PCI controllers are probed.
    
       So the hierarchy looks like this:
    
       iomem --|
    	   PCI controller 1 MEM space --|
    				        device 1
    					device 2
    					etc.
    	   PCI controller 2 MEM space --|
    				        ...
       ioport --|
                PCI controller 1 IO space --|
    					...
                PCI controller 2 IO space --|
    					...
    
       You get the idea.  The drivers/pci/setup-res.c code allocates
       using plain iomem_space and ioport_space as the root, so that
       wouldn't work with the above setup.
    
       So I added a pcibios_select_root() that is used to handle this.
       It uses the PCI controller struct's io_space and mem_space on
       sparc64, and io{port,mem}_resource on every other platform to
       keep current behavior.
    
    2) quirk_io_region() is buggy.  It takes in raw BUS view addresses
       and tries to use them as a PCI resource.
    
       pci_claim_resource() expects the resource to be fully formed when
       it gets called.  The sparc64 implementation would do the translation
       but that's absolutely wrong, because if the same resource gets
       released then re-claimed we'll adjust things twice.
    
       So I fixed up quirk_io_region() to do the proper pcibios_bus_to_resource()
       conversion before passing it on to pci_claim_resource().
    
    3) I was mistakedly __init'ing the function methods the PCI controller
       drivers provide on sparc64 to implement some parts of these
       routines.  This was, of course, easy to fix.
    
    So we end up with the following, and that nasty SPARC64 makefile
    ifdef in drivers/pci/Makefile is finally zapped.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 064b53dbcc977dbf2753a67c2b8fc1c061d74f21
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed Jul 27 10:19:44 2005 -0400

    [PATCH] PCI: restore BAR values after D3hot->D0 for devices that need it
    
    Some PCI devices (e.g. 3c905B, 3c556B) lose all configuration
    (including BARs) when transitioning from D3hot->D0.  This leaves such
    a device in an inaccessible state.  The patch below causes the BARs
    to be restored when enabling such a device, so that its driver will
    be able to access it.
    
    The patch also adds pci_restore_bars as a new global symbol, and adds a
    correpsonding EXPORT_SYMBOL_GPL for that.
    
    Some firmware (e.g. Thinkpad T21) leaves devices in D3hot after a
    (re)boot.  Most drivers call pci_enable_device very early, so devices
    left in D3hot that lose configuration during the D3hot->D0 transition
    will be inaccessible to their drivers.
    
    Drivers could be modified to account for this, but it would
    be difficult to know which drivers need modification.  This is
    especially true since often many devices are covered by the same
    driver.  It likely would be necessary to replicate code across dozens
    of drivers.
    
    The patch below should trigger only when transitioning from D3hot->D0
    (or at boot), and only for devices that have the "no soft reset" bit
    cleared in the PM control register.  I believe it is safe to include
    this patch as part of the PCI infrastructure.
    
    The cleanest implementation of pci_restore_bars was to call
    pci_update_resource.  Unfortunately, that does not currently exist
    for the sparc64 architecture.  The patch below includes a null
    implemenation of pci_update_resource for sparc64.
    
    Some have expressed interest in making general use of the the
    pci_restore_bars function, so that has been exported to GPL licensed
    modules.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1248d636122e4ec9d7802b850904e3bb48a0da23
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Fri Aug 5 12:16:06 2005 -0700

    [PATCH] PCI Hotplug: use bus_slot number for name
    
    For systems with multiple hotplug controllers, you need to use more than
    just the slot number to uniquely name the slot.  Without a unique slot
    name, the pci_hp_register() will fail.  This patch adds the bus number
    to the name.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 346d38823b59d65c3c1365971776b52e0661b7e5
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sun Jul 31 11:51:45 2005 +0300

    [PATCH] arch/386/pci: remap_pfn_range -> io_remap_pfn_range
    
    Convert i386/pci to use io_remap_pfn_range instead of remap_pfn_range.
    This is good for Xen which reuses i386/pci/i386.c for domain 0 code.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4352dfd5cd9172f1ee425924a463b43e6157b840
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jul 28 11:37:33 2005 -0700

    [PATCH] PCI: clean up pci.h and split pci register info to separate header file.
    
    This cleans up some of the #ifdef CONFIG_PCI stuff up, and moves the pci register
    info out to a separate file, where it belongs.  Eventually we can stop including
    this file from within pci.h, but lots of code needs to be audited first.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8fdc23ee1ab7c1f8f1dd40602f62b9cc84072531
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 00:07:11 2005 -0700

    [PATCH] PCI: fix up pretty-names removal patch
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 982245f01734e9d5a3ab98b2b2e9761ae7719094
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 17 04:22:20 2005 +0200

    [PATCH] PCI: remove CONFIG_PCI_NAMES
    
    This patch removes CONFIG_PCI_NAMES.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 74d863ee8a9da2b0f31e0f977daf127807b2e9d2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 25 23:28:14 2005 -0700

    [PATCH] PCI: Move PCI fixup data into r/o section
    
    Make PCI fixup data const, so it'll end up in a r/o section.
    
    This also fixes the conversion into ECOFF which gets broken by too many
    changes between r/w and r/o sections.  Call it a hack but it's a change
    that's correct by itself.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d42c69972b853fd33a26c8c7405624be41a22136
Author: Andi Kleen <ak@suse.de>
Date:   Wed Jul 6 19:56:03 2005 +0200

    [PATCH] PCI: Run PCI driver initialization on local node
    
    Run PCI driver initialization on local node
    
    Instead of adding messy kmalloc_node()s everywhere run the
    PCI driver probe on the node local to the device.
    
    This would not have helped for IDE, but should for
    other more clean drivers that do more initialization in probe().
    It won't help for drivers that do most of the work
    on first open (like many network drivers)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56d8456b06ad1316bff3c75caed5e06e786f20d8
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 10:17:03 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Purify hotplug
    
    Currently rpaphp registers the following bus types as hotplug slots:
    1) Actual PCI Hotplug slots
    2) Embedded/Internal PCI slots
    3) PCI Host Bridges
    
    The second and third bus types are not actually direct parents of
    removable adapters.  As such, the rpaphp has special case code to fake
    results for attributes like power, adapter status, etc.  This patch
    removes types 2 and 3 from the rpaphp module.
    
    This patch also changes the DLPAR module so that slots can be
    DLPAR-added/removed without having been designated as hotplug-capable.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 940903c5a5a906c622a79b3101586deb1a1b3480
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 10:16:58 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Export slot enable
    
    This patch exports rpaphp_config_pci_adapter() for use by the rpadlpar
    module.  It also changes this function by removing any dependencies on
    struct slot.  The patch also changes the RPA DLPAR-add path to enable
    newly-added slots in a separate step from that which registers them as
    hotplug slots.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0945cd5f908a09ad99bf42d7ded16f26f24f317d
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 10:16:53 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Remove rpaphp_find_pci
    
    The rpaphp module currently uses a fragile method to find a pci device
    by its device node.  This function is unnecessary, so this patch scraps
    it.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c209c919df95f83aa042b3352c43841ad15a02b
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 11:13:38 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Change slot pci reference
    
    The slot structure in the rpaphp module currently references the PCI
    contents of the slot using the PCI device of the parent bridge.  This
    is unnecessary, since the module is actually interested in the
    subordinate bus of the bridge.  The dependency on a PCI bridge device
    also prohibits the module from registering hotplug slots that have a
    root bridge as a parent, since root bridges on PPC64 don't have PCI
    devices.
    
    This patch changes struct slot to reference the PCI subsystem using a
    pci_bus rather than a pci_dev.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5eeb8c63a38ff20285f3bbe7bcfe5e7c33c8ba14
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 10:16:42 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Move VIO registration
    
    Currently, rpaphp registers Virtual I/O slots as hotplug slots.  The
    only purpose of this registration is to ensure that the VIO subsystem
    is notified of new VIO buses during DLPAR adds.  Similarly, rpaphp
    notifies the VIO subsystem when a VIO bus is DLPAR-removed.  The rpaphp
    module has special case code to fake results for attributes like power,
    adapter status, etc.
    
    The VIO register/unregister functions could just as easily be made from
    the DLPAR module.  This patch moves the VIO registration calls to the
    DLPAR module, and removes the VIO fluff from rpaphp altogether.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bde168412440084e649e7e04938bd1ab6e7bf978
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jul 25 10:16:37 2005 -0500

    [PATCH] PCI Hotplug: rpaphp: Remove unused stuff
    
    Subject line says it all :)
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c26971cbb39727b0b692c6236f890ba13046a663
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 8 22:48:16 2005 +0100

    [MMC] Add mmc_detect_change() delay support for PXAMCI driver
    
    Allow PXA platforms to pass an appropriate delay value to the
    PXA MCI driver for delaying detection changes.
    
    Signed-Off-By: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4e1491847ef5ca1c5a661601d5f96dcb7d90d2f0
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 14:47:12 2005 -0700

    Fix up ARM serial driver compile failure
    
    Proud member of Uglyhacks'R'US.
    
    Acked-by: David S. Miller <davem@davemloft.net>
    Acked-by: Russell King <rmk+lkml@arm.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01357dcac62ac028de65a1c315eb75c530c8a5d6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 8 22:46:00 2005 +0100

    [MMC] Ensure correct mmc_priv() behaviour
    
    mmc_priv() has some nasty effects if the wrong pointer type is
    passed to it.  Introduce type checking, which also means we get
    the right type.  Also add an additional member to mmc_host which
    is used to align host-private data appropriately.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0a25e4d5647003a32ba5496f9d0f40ba9c1e3863
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Aug 17 15:24:37 2005 +0400

    [PATCH] w1_ds2433: Added crc16 protection and read caching.
    
    The changes to ds2433 to add CRC16 protection and read caching.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a45f105ad4b456f99f622642056ae533f70710b7
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Aug 17 15:19:08 2005 +0400

    [PATCH] w1: added private family data into w1_slave strucutre.
    
    Add family_data to struct w1_slave.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7657ec1fcb69e266ab876af56332d0c484ca6d00
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Aug 17 15:17:26 2005 +0400

    [PATCH] lib/crc16: added crc16 algorithm.
    
    Add the crc16 routines, as used by w1 devices.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a3d65f254274567daa89d8b99ab3d481d60fcaef
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:50 2005 +0400

    [PATCH] w1: Added DS2433 driver - family id update.
    
    Work by Ben Gardner <bgardner@wabtec.com>.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80895392c83e54653540e72e7d40573aac7ee690
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:50 2005 +0400

    [PATCH] w1: Added DS2433 driver.
    
    Work by Ben Gardner <bgardner@wabtec.com>.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c8f5703de91ade517d4fd6c3cc8e08dbba2b739
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:50 2005 +0400

    [PATCH] w1: Decreased debug level.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3aca692d3ec7cf89da4575f598e41f74502b22d7
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:50 2005 +0400

    [PATCH] w1: Detouching bug fixed.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d2a4ef6a0ce4d841293b49bf2cdc17a0ebfaaf9d
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:50 2005 +0400

    [PATCH] w1: Added add/remove slave callbacks.
    
    Patch is based on work from Ben Gardner <bgardner@wabtec.com>
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ea7d8f65c865ebfa1d7cd67c360a87333ff013c1
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:49 2005 +0400

    [PATCH] w1: Added w1_reset_select_slave() - Resets the bus and then selects the slave by
    
    sending either a skip rom or a rom match.
    
    Patch from Ben Gardner <bgardner@wabtec.com>
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db2d0008de519c5db6baec45f7831e08790301cf
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 17:27:49 2005 +0400

    [PATCH] w1: Added inline functions on top of container_of().
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e8eb8501212eb92826ccf191f9ca8c186f531c3
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 13:45:54 2005 +0400

    [PATCH] w1: Fixed 64bit compilation warning.
    
    Fixed 64bit compilation warning.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f772ed8df27c6941952452330c618512389c4c7
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Aug 11 13:20:07 2005 +0400

    [PATCH] w1: hotplug support.
    
    Here is W1 hotplug in addition to netlink notifications.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8949d2aa05ddf5e9a31d738568a79915970cb38e
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Aug 3 15:14:50 2005 +0400

    [PATCH] W1: Sync with w1/ds9490 tree.
    
    Whitespace, static/nonstatic cleanups.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d8331792ea3f5ccfd147288afba148537337019
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed Jul 27 13:10:11 2005 +0400

    [PATCH] W1: w1_netlink: New init/fini netlink callbacks.
    
    They are guarded with NETLINK_DISABLE compile time options,
    so if CONFIG_NET is disabled, no linking errors occur.
    Bug noticed by Adrian Bunk <bunk@stusta.de>.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4d803fcdcd97dd346d4b39c3b76e5879cead8a31
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Sep 8 14:37:53 2005 -0700

    [SPARC64]: Inline membar()'s again.
    
    Since GCC has to emit a call and a delay slot to the
    out-of-line "membar" routines in arch/sparc64/lib/mb.S
    it is much better to just do the necessary predicted
    branch inline instead as:
    
    	ba,pt	%xcc, 1f
    	 membar	#whatever
    1:
    
    instead of the current:
    
    	call	membar_foo
    	 dslot
    
    because this way GCC is not required to allocate a stack
    frame if the function can be a leaf function.
    
    This also makes this bug fix easier to backport to 2.4.x
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a57ebc90f1350296edded12d33d7c278831bc3bf
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Sep 8 14:27:47 2005 -0700

    [IPV6]: Don't redo xfrm_lookup for cached dst entries
    
    The xfrm lookup is already done when the dst entry is looked up first and
    stored in the cache.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 344a076110f4ecb16ea6d286b63be696604982ed
Merge: 9b17e7e... 1b11d78...
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Sep 8 14:27:13 2005 -0700

    [IA64] Manual merge fix for 3 files
    
    	arch/ia64/Kconfig
    	arch/ia64/kernel/acpi.c
    	include/asm-ia64/irq.h
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e604635c8bea16f6177e6133eb3efbfb4a029ef6
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 22:13:02 2005 +0100

    NTFS: Improve scalability by changing the driver global spin lock in
          fs/ntfs/aops.c::ntfs_end_buffer_async_read() to a bit spin lock
          in the first buffer head of a page.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit a01ac532b519dc0e0b4d8bc4e12373e4e4cd1b1a
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 22:08:11 2005 +0100

    NTFS: Fix page_has_buffers()/page_buffers() handling in fs/ntfs/aops.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 311120eca0013083f5eb0aff13ffb8aa9fdd050c
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 22:04:20 2005 +0100

    NTFS: Fixup handling of sparse, compressed, and encrypted attributes in
          fs/ntfs/aops.c::ntfs_readpage().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8273d5d4c28a9fde68f830cc6ff61e37e8ae1dca
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 22:00:33 2005 +0100

    NTFS: Fix fs/ntfs/aops.c::ntfs_{read,write}_block() to handle the case
          where a concurrent truncate has truncated the runlist under our feet.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 9b17e7e74e767d8a494a74c3c459aeecd1e08c5f
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Sep 8 15:28:28 2005 -0500

    [IA64] Increase max physical address for SN platforms
    
    Increase the value for the maximum physical address on SN systems.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 408865ce4829376120489ac8011b72125453dcff
Author: Dean Nelson <dcn@sgi.com>
Date:   Thu Sep 8 10:46:58 2005 -0500

    [IA64] ensure XPC and XPNET are loaded on sn2 platforms only
    
    These are SN2 only drivers.  They should have platform checks to prevent
    them from doing evil stuff in GENERIC kernels.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Acked-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1ee9bed173acd2f505f4e76e69d13cb2b82963e9
Merge: 1b11d78... 45ac56c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 13:52:24 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 087f902686beb6c02157c271e3fc95606dbdfdbf
Author: Martin Hicks <mort@sgi.com>
Date:   Thu Sep 8 11:28:11 2005 -0400

    [IA64] defconfig: turn off QLOGIC_FC
    
    Turn off the QLOGIC_FC driver.  Supposedly qla2xxx should support
    these devices.  Do any ia64 machines have one of these devices as
    the boot device?
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 45ac56ca6403b83ad880083be164c425f4b50882
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Sep 8 16:44:33 2005 -0400

    Kconfig: IEEE80211 should not depend on NET_RADIO
    
    We should not restrict use of ieee80211 to only when wireless drivers
    are enabled.  In-development and out-of-tree drivers may wish to use it,
    and by removing this restriction we eliminate a circular dependency.

commit 54b02eb01c0172294e43e2b54d6815f65637c111
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:43:47 2005 +0100

    NTFS: Optimize fs/ntfs/aops.c::ntfs_write_block() by extending the page
          lock protection over the buffer submission for i/o which allows the
          removal of the get_bh()/put_bh() pairs for each buffer.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit baed16a7ff5194487764db300c2753ac7409c4c5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Sep 8 13:40:41 2005 -0700

    [AX.25]: Make asc2ax() thread-proof
    
    Asc2ax was still using a static buffer for all invocations which isn't
    exactly SMP-safe.  Change asc2ax to take an additional result buffer as
    the argument.  Change all callers to provide such a buffer.
    
    This one only really is a fix for ROSE and as per recent discussions
    there's still much more to fix in ROSE ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bd45fdd209ca49c5010ac9af469c41ae6dd3f145
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:38:05 2005 +0100

    NTFS: Fixup handling of sparse, compressed, and encrypted attributes in
          fs/ntfs/aops.c::ntfs_writepage().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 3a93481589dc80d9ff9082731f35031b0345442e
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Sep 8 13:36:34 2005 -0700

    [NETFILTER]: ip_conntrack_netbios_ns.c gcc-2.95.x build fix
    
    gcc-2.95.x can't do this sort of initialisation
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ce723d8e048ef98ea64d12379e3921c933f5b3e0
Author: Julian Anastasov <ja@ssi.bg>
Date:   Thu Sep 8 13:34:47 2005 -0700

    [IPV4]: Fix refcount damaging in net/ipv4/route.c
    
    	One such place that can damage the dst refcnts is route.c with
    CONFIG_IP_ROUTE_MULTIPATH_CACHED enabled, i don't see the user's
    .config. In this new code i see that rt_intern_hash is called before
    dst->refcnt is set to 1, dst is the 2nd arg to rt_intern_hash.
    
    Arg 2 of rt_intern_hash must come with refcnt 1 as it is added to
    table or dropped depending on error/add/update. One such example is
    ip_mkroute_input where __mkroute_input return rth with refcnt 0 which
    is provided to rt_intern_hash. ip_mkroute_output looks like a 2nd such
    place. Appending untested patch for comments and review.  The idea is
    to put previous reference as we are going to return next result/error.
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8dcdebafb848415eae25924b00c4f0b9ec907da0
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:25:48 2005 +0100

    NTFS: Make ntfs_write_block() not instantiate sparse blocks if they are zero.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 67bb103725e4cde322cb4ddb160a12933c5c7072
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:19:45 2005 +0100

    NTFS: Fixup handling of sparse, compressed, and encrypted attributes in
          fs/ntfs/inode.c::ntfs_read_locked_{,attr_,index_}inode().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit c921e4c4dbb043f9435414c4e661e7f0a783053d
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Sep 8 13:15:32 2005 -0700

    [BNX2]: Fix bug in irq handler and add prefetch
    
    Fix bug in bnx2_interrupt() that caused an unnecessary register read.
    The BNX2_PCICFG_MISC_STATUS should only be read when the status tag
    has not changed.
    
    Add prefetch of the status block in bnx2_msi() similar to tg3_msi().
    The status block is not touched in bnx2_msi() and prefetching it will
    speed up bnx2_poll() that will run on the same CPU that received the
    MSI.
    
    Update version.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c7d469d47668f4664b892a6cd1c452a0c02d710
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:15:09 2005 +0100

    NTFS: Truncate {a,c,m}time to the ntfs supported time granularity when
          updating the times in the inode in ntfs_setattr().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit bbf1813fb8ff9d21171bf22e6d1f0e0393601e86
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:09:06 2005 +0100

    NTFS: Fix cluster (de)allocators to work when the runlist is NULL and more
          importantly to take a locked runlist rather than them locking it
          which leads to lock reversal.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 6fd60fa97b706e52abba7c9f810b148aa230817f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 8 21:04:58 2005 +0100

    [I2C] Clean up i2c-pxa debugging/printks
    
    Fix up comments made by review by gregkh.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 807c453de7c5487d2e5eece76bafdea8f39d249e
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 21:01:17 2005 +0100

    NTFS: Fix handling of sparse attributes in ntfs_attr_make_non_resident().
          Also, add BUG() checks to ntfs_attr_make_non_resident() and
          ntfs_attr_set() to ensure that these functions are never called
          for compressed or encrypted attributes.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 2e66fc41169c90d93b7811caf7e7822de6aa2259
Merge: 42ca89c... 41a1f8e...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Sep 8 12:59:43 2005 -0700

    Merge git://git.skbuff.net/gitroot/yoshfuji/linux-2.6-git-rfc3542

commit 42ca89c18b75e1c4c3b02aa5589ad3aa916909a8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Sep 8 12:57:43 2005 -0700

    [IPV6]: Need to use pskb_trim_rcsum().
    
    Fix pskb_trim usage in ipv6. Only the udp one is really
    a bug, other places are just doing equivalent code.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2983d1bd1a596e88cdddc0c2d45b9e97728f3f41
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:56:09 2005 +0100

    NTFS: Fix several bugs in fs/ntfs/attrib.c.
    
    - Fix a bug in ntfs_map_runlist_nolock() where we forgot to protect
      access to the allocated size in the ntfs inode with the size lock.
    - Fix ntfs_attr_vcn_to_lcn_nolock() and ntfs_attr_find_vcn_nolock() to
      return LCN_ENOENT when there is no runlist and the allocated size is
      zero.
    - Fix load_attribute_list() to handle the case of a NULL runlist.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 0aacceacf35451ffb771ec825555e98c5dce8b01
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:40:32 2005 +0100

    NTFS: Add fs/ntfs/attrib.[hc]::ntfs_resident_attr_value_resize().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit f25dfb5e44fa8641961780d681bc1871abcfb861
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:35:33 2005 +0100

    NTFS: Remove bogus setting of PageError in ntfs_read_compressed_block().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit e50ef933e649a2b43aa10c8a60c491543b8b4c02
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Sep 8 12:32:46 2005 -0700

    [NET]: Need struct sock forward decl in net/compat.h
    
    Else we get build failures like:
    
      CC      arch/sparc64/kernel/sparc64_ksyms.o
    In file included from arch/sparc64/kernel/sparc64_ksyms.c:28:
    include/net/compat.h:37: warning: "struct sock" declared inside parameter list
    include/net/compat.h:37: warning: its scope is only this definition or declaration, which is probably not what you want
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e308e25c97f06cf704e65eeb773412f5460a3b93
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Sep 8 12:32:21 2005 -0700

    [IPV4] udp: trim forgets about CHECKSUM_HW
    
    A UDP packet may contain extra data that needs to be trimmed off.
    But when doing so, UDP forgets to fixup the skb checksum if CHECKSUM_HW
    is being used.
    
    I think this explains the case of a NFS receive using skge driver
    causing 'udp hw checksum failures' when interacting with a crufty
    settop box.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0e4e4220f10bf8f58a8606f0cb28538088c64b1a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Sep 8 12:32:03 2005 -0700

    [NET]: Optimize pskb_trim_rcsum()
    
    Since packets almost never contain extra garbage at the end, it is
    worthwhile to optimize for that case.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e08ceaeacd5d300aaad166f2eef8bfc37e09831
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:29:50 2005 +0100

    NTFS: Fix a bug in fs/ntfs/index.c::ntfs_index_lookup().  When the returned
          index entry is in the index root, we forgot to set the @ir pointer in
          the index context.  Thanks for Yura Pakhuchiy for finding this bug.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 6e48321a40610f7213e3ac75ba234f6f8b3ed5f5
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:26:34 2005 +0100

    NTFS: Add ntfs_rl_punch_nolock() which punches a caller specified hole into a runlist.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 3ffc5a443824fcf426d8d35dc632acc4dd9fb6d1
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 20:23:06 2005 +0100

    NTFS: Change ntfs_rl_truncate_nolock() to throw away the runlist if the new
          length is zero.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 1b11d78cf87a7014f96e5b7fa2e1233cc8081a00
Merge: 8920e8f... 6a690df...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 11:51:01 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 8dc003359cc3996abad9e53a7b2280b272610283
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Sep 8 17:53:01 2005 +0100

    [MMC] Allow detection/removal to be delayed
    
    Change mmc_detect_change() to take a delay argument such that
    the detection of card insertions and removals can be delayed
    according to the requirements of the host driver or platform.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f94ad38e68e1623660fdbb063d0c580ba6661c29
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 17:04:11 2005 +0100

    NTFS: Report unrepresentable inodes during ntfs_readdir() as KERN_WARNING
          messages and include the inode number.  Thanks to Yura Pakhuchiy for
          pointing this out.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 2b0ada2b8e086c267dd116a39ad41ff0a717b665
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:52:31 2005 +0100

    NTFS: Fix handling of valid but empty mapping pairs array in
          fs/ntfs/runlist.c::ntfs_mapping_pairs_decompress().
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8bb735216a0675e247bbe8b8b92c09d6884d1a17
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:48:28 2005 +0100

    NTFS: Remove two bogus BUG_ON()s from fs/ntfs/mft.c.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 84d6ebe63f50b6efd8be252b58a207132157c60f
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:46:55 2005 +0100

    NTFS: Fix two nasty runlist merging bugs that had gone unnoticed so far.
          Thanks to Stefano Picerno for the bug report.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 9529d461d0992959026264b8fc002ac01d226708
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:33:12 2005 +0100

    NTFS: Use ntfs_malloc_nofs_nofail() in runlist.c::ntfs_runlists_merge()
          in the two critical regions.  This means we no longer need to
          panic() when the allocation fails as it now cannot fail.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 06d0e3cf3d527f927681773c6ffbe697ccc5db7f
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:28:25 2005 +0100

    NTFS: Allow highmem kmalloc() in ntfs_malloc_nofs() and add _nofail() version.
    
    - Modify fs/ntfs/malloc.h::ntfs_malloc_nofs() to do the kmalloc() based
      allocations with __GFP_HIGHMEM, analogous to how the vmalloc() based
      allocations are done.
    - Add fs/ntfs/malloc.h::ntfs_malloc_nofs_nofail() which is analogous to
      ntfs_malloc_nofs() but it performs allocations with __GFP_NOFAIL and
      hence cannot fail.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 8920e8f94c44e31a73bdf923b04721e26e88cadd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 18:28:51 2005 -0700

    [PATCH] Fix 32bit sendmsg() flaw
    
    When we copy 32bit ->msg_control contents to kernel, we walk the same
    userland data twice without sanity checks on the second pass.
    
    Second version of this patch: the original broke with 64-bit arches
    running 32-bit-compat-mode executables doing sendmsg() syscalls with
    unaligned CMSG data areas
    
    Another thing is that we use kmalloc() to allocate and sock_kfree_s()
    to free afterwards; less serious, but also needs fixing.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7a1033b946f4f2622f2b338ab107f559aad542c
Author: Anton Altaparmakov <aia21@cantab.net>
Date:   Thu Sep 8 16:12:28 2005 +0100

    NTFS: Support more clean journal ($LogFile) states.
    
          - Support journals ($LogFile) which have been modified by chkdsk.  This
            means users can boot into Windows after we marked the volume dirty.
            The Windows boot will run chkdsk and then reboot.  The user can then
            immediately boot into Linux rather than having to do a full Windows
            boot first before rebooting into Linux and we will recognize such a
            journal and empty it as it is clean by definition.
          - Support journals ($LogFile) with only one restart page as well as
            journals with two different restart pages.  We sanity check both and
            either use the only sane one or the more recent one of the two in the
            case that both are valid.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

commit 6df29debb7fc04ac3f92038c57437f40bab4e72d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 8 16:04:41 2005 +0100

    [SERIAL] Use an enum for serial8250 platform device IDs
    
    Rather than hard-coding the platform device IDs, enumerate them.
    We don't particularly care about the actual ID we get, just as
    long as they're unique.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5aa3b610a7330c3cd6f0cb264d2189a3a1dcf534
Author: Kumar Gala <galak@freescale.com>
Date:   Thu Sep 8 09:20:55 2005 -0500

    [PATCH] ppc32: Fix head_4xx.S compile error
    
    head_4xx.S wasn't compiling due to a missing #endif
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7b6b3589471c3856f1e6dc9c77abc4af962ffdb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 8 15:32:23 2005 +0100

    [ARM] Fix ARMv6 VIPT cache >= 32K
    
    This adds the necessary changes to ensure that we flush the
    caches correctly with aliasing VIPT caches.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6a4b170c54289f427645019c52d1b9c871a6661e
Merge: eccdfcd... 64e4748...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Sep 8 07:21:59 2005 -0700

    Merge branch 'release' of master.kernel.org:/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6

commit b38d950d3aedf90c8b15b3c7c799b5eb53c47c45
Author: John Lenz <lenz@cs.wisc.edu>
Date:   Thu Sep 8 14:41:54 2005 +0100

    [ARM] Add suspend/resume support to locomo.c
    
    This adds low-level suspend/resume support to locomo.c.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6a690df5c8b37d4a1c41df40770d42d44fac0e97
Author: Hannes Reinecke <hare@suse.de>
Date:   Tue Jun 28 17:30:38 2005 -0700

    [PATCH] scan all enabled ports on ata_piix
    
    ICH6 spec defines the PORT_ bits as:
    
    PORT_ENABLED (R/W):
    
      0 = Disabled.  The port is in the off state and cannot detect any
      devices.
    
      1 = Enabled.  The port can transition between the on, partial, and
      slumber states and can detect devices.
    
    PORT_PRESENT  (R/O)
    
      The status of this bit may change at any time.  This bit is cleared
      when the port is disabled via PORT_ENABLED.  This bit is not cleared upon
      surprise removal of a device.
    
    So from a textual view it is not necessary that PORT_PRESENT _must_ be set,
    especially if a device detection has to be done anyway.  And, in fact, this
    is the view that ACER has been taken with its new Laptops (e.g.  Travelmate
    4150).
    
    And the definition of PORT_ENABLED / PORT_PRESENT is mixed up, btw.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5a2cec83a9bb1b4295aa8ab728fcb8ca1811a33c
Merge: f2c853b... caf39e8...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Sep 8 05:37:58 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 64e47488c913ac704d465a6af86a26786d1412a5
Merge: 4a35a46... caf39e8...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Sep 8 01:45:47 2005 -0400

    Merge linux-2.6 with linux-acpi-2.6

commit eccdfcd6f8265300380fa14a83aeb14e69830323
Author: Nathan Scott <nathans@bruce>
Date:   Thu Sep 8 15:38:52 2005 +1000

    [XFS] Fix modular XFS builds (Makefile botch).
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 20ba02879bc78cdf1ed89a1c6a92ee55d31ee103
Author: Nathan Scott <nathans@bruce>
Date:   Thu Sep 8 15:34:58 2005 +1000

    [XFS] Remove special Kconfig XFS menu, make XFS options "inline".
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f016bad6be720496b5582a59738bca00a26f876c
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Sep 8 15:30:05 2005 +1000

    [XFS] Cleanup some -Wundef flag warnings in the endian macros (thanks
    Christoph).
    
    SGI-PV: 942400
    SGI-Modid: xfs-linux-melb:xfs-kern:23771a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit caf39e87cc1182f7dae84eefc43ca14d54c78ef9
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 18:44:33 2005 -0700

    [SCSI] Re-do "final klist fixes"
    
    With the previous commit that introduces the klist enhancements, we can
    now re-do 2b7d6a8cb9718fc1d9e826201b64909c44a915f4 again.

commit 34bb61f9ddabd7a7f909cbfb05592eb775f6662a
Author: James Bottomley <James.Bottomley@HansenPartnership.com>
Date:   Tue Sep 6 16:56:51 2005 -0700

    [PATCH] fix klist semantics for lists which have elements removed on traversal
    
    The problem is that klists claim to provide semantics for safe traversal of
    lists which are being modified.  The failure case is when traversal of a
    list causes element removal (a fairly common case).  The issue is that
    although the list node is refcounted, if it is embedded in an object (which
    is universally the case), then the object will be freed regardless of the
    klist refcount leading to slab corruption because the klist iterator refers
    to the prior element to get the next.
    
    The solution is to make the klist take and release references to the
    embedding object meaning that the embedding object won't be released until
    the list relinquishes the reference to it.
    
    (akpm: fast-track this because it's needed for the 2.6.13 scsi merge)
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41a1f8ea4fbfcdc4232f023732584aae2220de31
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Sep 8 10:19:03 2005 +0900

    [IPV6]: Support IPV6_{RECV,}TCLASS socket options / ancillary data.
    
    Based on patch from David L Stevens <dlstevens@us.ibm.com>
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 333fad5364d6b457c8d837f7d05802d2aaf8a961
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Sep 8 09:59:17 2005 +0900

    [IPV6]: Support several new sockopt / ancillary data in Advanced API (RFC3542).
    
    Support several new socket options / ancillary data:
      IPV6_RECVPKTINFO, IPV6_PKTINFO,
      IPV6_RECVHOPOPTS, IPV6_HOPOPTS,
      IPV6_RECVDSTOPTS, IPV6_DSTOPTS, IPV6_RTHDRDSTOPTS,
      IPV6_RECVRTHDR, IPV6_RTHDR,
      IPV6_RECVHOPOPTS, IPV6_HOPOPTS
    
    Old semantics are preserved as IPV6_2292xxxx so that
    we can maintain backward compatibility.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit df4edad1787bbfa3c9c10824e4f11e9f4a7ec5c6
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:50:58 2005 -0700

    [SCSI] Revert "final klist fixes"
    
    Revert commit 2b7d6a8cb9718fc1d9e826201b64909c44a915f4.
    
    The "fix" was known to not even compile.  Duh.  That's not a fix.
    That's just stupid.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2c853bca542f5ac0b036377637192a74f2091c2
Author: Arnaud Patard <apatard@mandriva.com>
Date:   Wed Sep 7 22:44:48 2005 +0200

    [PATCH] sata_sis: Add support for SiS182 chipset
    
    This patch adds support for the SiS182 sata chipset. This is a
    minimalistic version of the patch from
    http://bugme.osdl.org/show_bug.cgi?id=4192. Basically, it add the PCI
    IDs and handles the change of the 2nd port adress register.
    
    Signed-Off-By: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0481990b758628e12f4b0a9e15094e70cefc7cd1
Merge: db400b3... 17fa53d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:31:27 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-for-linus-2.6

commit db400b3c4ee89d384d9163836a55577abdae772d
Merge: 0dd7f88... 908f9c4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:29:07 2005 -0700

    Merge branch 'drm-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6

commit 0dd7f883a9e21c5f2ff5e8f1cbb0e78cdc044d8a
Merge: cc896f0... 344baba...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:28:25 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6

commit cc896f08717c445235554a7963a7b2ecf58911ad
Merge: 87129d9... ca20aa6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:27:39 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 87129d96265cebcb1176896746d285b46c2d7b36
Merge: 55faed1... cde410a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:23:52 2005 -0700

    Merge git://oss.sgi.com:8090/oss/git/xfs-2.6

commit 55faed1e607a24ca7f3453a3eb463ca8987f8139
Merge: 946e91f... 0edd5b4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:22:43 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 946e91f36e90eea46758dd725b1c3b239f270f68
Merge: f7402dc... 09bbe10...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:21:17 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit f7402dc44d617be807e7184c6c624611b2d35b4e
Merge: e72225d... 832079d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:20:11 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit e72225d160a2529d6ce6d5898a267f7dae02aa6e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:23:50 2005 +0100

    [PATCH] bogus #if (simserial)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3352ae5de4945242040d23e16b674d17ddc7ce15
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:28:32 2005 +0100

    [PATCH] CHECKFLAGS on ppc64 got broken
    
    Now that asm-powerpc/* is using ifdefs on __powerpc64__ we need to add it
    to CHECKFLAGS on ppc64.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 147a67f0107effad2b454b786228c97e429f654e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:26:35 2005 +0100

    [PATCH] bogus #if (ncr53c406)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c86b114a45361aa3b321fd24c53023c300566fc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:25:15 2005 +0100

    [PATCH] bogus #if (smc91x.h)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a0b3869bbf7cc66ee668515d4852c729158c0ca
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:21:11 2005 +0100

    [PATCH] bogus #if (arch/um/kernel/mem.c)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f718404aa939d2ae19efda8e71f7fa79cbdf1646
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:19:41 2005 +0100

    [PATCH] -Wundef fixes (hisax)
    
    CARD_... in hisax are all used with #if; CARD_FN_ENTERNOW_PCI lacks define
    to 0 if corresponding config option is not set.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 185a7a1cd79b9891e3c17abdb103ba1c98d6ca7a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:18:24 2005 +0100

    [PATCH] -Wundef fixes (ncr5380)
    
    NDEBUG and NDEBUG_ABORT are almost always used as integers in NCR5380; added
    define to 0 if they are not defined, switched lone ifdef NDEBUG into if.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f20badbe1207bb10a8ad5fdadc2131c94344b5d9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Sep 7 23:16:59 2005 +0100

    [PATCH] -Wundef fixes (hamachi)
    
    All uses of ADDRLEN are comparisons with 64 (it's an address width).
    added define to 32 (again, we only care about comparisons with 64)
    if not defined.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95608261dae863bc43292e6fbd946a3abd3aa49f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 22:33:51 2005 +0100

    [PATCH] bogus symbol used in arch/um/os-Linux/elf_aux.c
    
    elf_aux is userland code; it uses symbol (ELF_CLASS) that doesn't exist in
    userland headers; pulled into kernel-offsets.h, switched elf_aux to using it.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8412205838ae92489ab2f029687659b056dd96ff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 19:35:49 2005 +0100

    [PATCH] updated mail address
    
    parcelfarce is dead...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e12ba644eefa9b8df4f961be91f1a0c5ea5038fa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 02:06:57 2005 +0100

    [PATCH] iomem annotations (sound/arm/aaci)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90dffc03ca8caa0ea047f11c81fe61cd86d80568
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 02:02:22 2005 +0100

    [PATCH] lost chunk of "uml: build cleanups"
    
    A piece of the UML stubs patch got lost - it has
        Killed STUBS_CFLAGS - it's not needed and the only remaining use had been
        gratitious - it only polluted CFLAGS
    in description and does remove it in arch/um/Makefile-x86_64, but forgets to
    do the same in i386 counterpart.  Lost chunk follows:
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a08b6b7968e7a6afc75e365ac31830867275abdc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 01:48:42 2005 +0100

    [PATCH] Kconfig fix (BLK_DEV_FD dependencies)
    
    Sanitized and fixed floppy dependencies: split the messy dependencies for
    BLK_DEV_FD by introducing a new symbol (ARCH_MAY_HAVE_PC_FDC), making
    BLK_DEV_FD depend on that one and taking declarations of ARCH_MAY_HAVE_PC_FDC
    to arch/*/Kconfig.  While we are at it, fixed several obvious cases when
    BLK_DEV_FD should have been excluded (architectures lacking asm/floppy.h
    are *not* going to have floppy.c compile, let alone work).
    
    If you can come up with better name for that ("this architecture might
    have working PC-compatible floppy disk controller"), you are more than
    welcome - just s/ARCH_MAY_HAVE_PC_FDC/your_prefered_name/g in the patch
    below...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ae418cf85b92cae7bce3d810b6aaf354e77be84
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 2 20:15:29 2005 +0100

    [PATCH] s2io u64 use for uintptr_t
    
    u64 is not uintptr_t; unsigned long is...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24c83d45d76303db8325b8553a05c69c838ef370
Merge: 1077682... 66172d2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:02:24 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 1077682b2f97cee76a79cf38bab3fa022a97d9f8
Merge: dc9ca2a... bafa49c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 7 17:00:53 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit dc9ca2af4917ce4e545fa3eb1d845c555128cabc
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Sep 6 15:19:40 2005 -0700

    [PATCH] DVB: lgdt330x check callback fix
    
    Most of the patch is whitespace cleanup, but more importantly, this patch
    checks to see whether a callback is set before calling it.  On cx88 boards
    (currently the only boards using lgdt330x in 2.6.13) every callback is set.
    However, newer drivers currently in development leave a callback undefined,
    and lgdt330x must not call it if it isn't defined.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2684f5c74d5c2d3eb6ddbb599a8c89a06c5fa420
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Tue Sep 6 15:19:38 2005 -0700

    [PATCH] DVB: Clarify description text for dvb-bt8xx in Kconfig
    
    Patrick Keene wrote to the linux-dvb list, asking where in menuconfig he
    can enable dvb-bt8xx for his AVerMedia DVB card.  I pointed the following
    out to him:
    
    config DVB_BT8XX
           tristate "Nebula/Pinnacle PCTV/Twinhan PCI cards"
    
    It has been agreed upon that this description is extremely misleading.
    
    This patch changes the one-liner description text of dvb-bt8xx to something
    more meaningful, and adds AVerMedia to the detailed description.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d203a7eca85101f0a8ce1dc139ee91196142da36
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Sep 6 15:19:37 2005 -0700

    [PATCH] Indycam / VINO drivers
    
    Rewrite of the Indycam / VINO video v4l2 drivers for the SGI Indy.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Mikael Nousiainen <tmnousia@cc.hut.fi>
    Cc: <video4linux-list@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bb6fcc13ae4fad98e0d610458975e47be0d2203
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:19:36 2005 -0700

    [PATCH] pivot_root() circular reference fix
    
    Fix http://bugzilla.kernel.org/show_bug.cgi?id=4857
    
    When pivot_root is called from an init script in an initramfs environment,
    it causes a circular reference in the mount tree.
    
    The cause of this is that pivot_root() is not prepared to handle pivoting
    an unattached mount.  In an initramfs environment, rootfs is the root of
    the namespace, and so it is not attached.
    
    This patch fixes this and related problems, by returning -EINVAL if either
    the current root or the new root is detached.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Cc: <bigfish@asmallpond.org>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit deac66ae454cacf942c051b86d9232af546fb187
Author: Keshavamurthy Anil S <anil.s.keshavamurthy@intel.com>
Date:   Tue Sep 6 15:19:35 2005 -0700

    [PATCH] kprobes: fix bug when probed on task and isr functions
    
    This patch fixes a race condition where in system used to hang or sometime
    crash within minutes when kprobes are inserted on ISR routine and a task
    routine.
    
    The fix has been stress tested on i386, ia64, pp64 and on x86_64.  To
    reproduce the problem insert kprobes on schedule() and do_IRQ() functions
    and you should see hang or system crash.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Acked-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bce0649417d6e71f6df8ab7b11103d247913b142
Author: Jim Keniston <jkenisto@us.ibm.com>
Date:   Tue Sep 6 15:19:34 2005 -0700

    [PATCH] kprobes: fix handling of simultaneous probe hit/unregister
    
    This patch fixes a bug in kprobes's handling of a corner case on i386 and
    x86_64.  On an SMP system, if one CPU unregisters a kprobe just after
    another CPU hits that probepoint, kprobe_handler() on the latter CPU sees
    that the kprobe has been unregistered, and attempts to let the CPU continue
    as if the probepoint hadn't been hit.  The bug is that on i386 and x86_64,
    we were neglecting to set the IP back to the beginning of the probed
    instruction.  This could cause an oops or crash.
    
    This bug doesn't exist on ppc64 and ia64, where a breakpoint instruction
    leaves the IP pointing to the beginning of the instruction.  I don't know
    about sparc64.  (Dave, could you please advise?)
    
    This fix has been tested on i386 and x86_64 SMP systems.  To reproduce the
    problem, set one CPU to work registering and unregistering a kprobe
    repeatedly, and another CPU pounding the probepoint in a tight loop.
    
    Acked-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Jim Keniston <jkenisto@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 661e5a3d9958dc83d610992da85625c0ada9bb06
Author: Keshavamurthy Anil S <anil.s.keshavamurthy@intel.com>
Date:   Tue Sep 6 15:19:32 2005 -0700

    [PATCH] Kprobes/IA64: fix race when break hits and kprobe not found
    
    This patch addresses a potential race condition for a case where Kprobe has
    been removed right after another CPU has taken a break hit.
    
    The way this is addressed here is when the CPU that has taken a break hit
    does not find its corresponding kprobe, then we check to see if the
    original instruction got replaced with other than break.  If it got
    replaced with other than break instruction, then we continue to execute
    from the replaced instruction, else if we find that it is still a break,
    then we let the kernel handle this, as this might be the break instruction
    inserted by other than kprobe(may be kernel debugger).
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83005161c84efa70f3d4dc193eb1024a40b650dc
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:31 2005 -0700

    [PATCH] kprobes-prevent-possible-race-conditions-sparc64-changes fix
    
    This patch adds flags "ax" to .kprobe.text section.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05e14cb3bafabbf08216ab5566f3cd687eba9723
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:30 2005 -0700

    [PATCH] Kprobes: prevent possible race conditions sparc64 changes
    
    This patch contains the sparc64 architecture specific changes to prevent the
    possible race conditions.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f7ad57b75ab0fba27455c7344a6ab7aa6bd90c5
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:30 2005 -0700

    [PATCH] Kprobes: prevent possible race conditions ia64 changes
    
    This patch contains the ia64 architecture specific changes to prevent the
    possible race conditions.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb144a85c70a65730424ad1a9dc50fef66e5cafe
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:29 2005 -0700

    [PATCH] Kprobes: prevent possible race conditions ppc64 changes
    
    This patch contains the ppc64 architecture specific changes to prevent the
    possible race conditions.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f2fbdcbb041f9087da42f8ac2e81f2817098d2a
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:28 2005 -0700

    [PATCH] kprobes: prevent possible race conditions x86_64 changes
    
    This patch contains the x86_64 architecture specific changes to prevent the
    possible race conditions.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d97ae5b958855ac007b6f56a0f94ab8ade09e9e
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:27 2005 -0700

    [PATCH] kprobes: prevent possible race conditions i386 changes
    
    This patch contains the i386 architecture specific changes to prevent the
    possible race conditions.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0aaff9796c3310326d10da44fc0faed352a1d29
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Tue Sep 6 15:19:26 2005 -0700

    [PATCH] Kprobes: prevent possible race conditions generic
    
    There are possible race conditions if probes are placed on routines within the
    kprobes files and routines used by the kprobes.  For example if you put probe
    on get_kprobe() routines, the system can hang while inserting probes on any
    routine such as do_fork().  Because while inserting probes on do_fork(),
    register_kprobes() routine grabs the kprobes spin lock and executes
    get_kprobe() routine and to handle probe of get_kprobe(), kprobes_handler()
    gets executed and tries to grab kprobes spin lock, and spins forever.  This
    patch avoids such possible race conditions by preventing probes on routines
    within the kprobes file and routines used by kprobes.
    
    I have modified the patches as per Andi Kleen's suggestion to move kprobes
    routines and other routines used by kprobes to a seperate section
    .kprobes.text.
    
    Also moved page fault and exception handlers, general protection fault to
    .kprobes.text section.
    
    These patches have been tested on i386, x86_64 and ppc64 architectures, also
    compiled on ia64 and sparc64 architectures.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 505db03639db34ca2c64fe7ee27190d324281f2c
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Tue Sep 6 15:19:25 2005 -0700

    [PATCH] Fix smsc_ircc_init return value
    
    I noticed a strange return value in smsc_ircc_init in
    drivers/net/irda/smsc_ircc2.c in rc4-mm1.
    
    When reaching the line "if (ircc_fir > 0 && ircc_sir > 0)", ret is 0.  So I
    don't see the point of setting it to 0 in the "else" case.  >From what I
    see in 2.6.12 it should probably be set to -ENODEV at the begining of the
    "else" case.  The attached patch does this.
    
    Note that I didn't actually see any breakage caused by this.
    
    Signed-off-by: Brice Goglin <Brice.Goglin@ens-lyon.org>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fa2f491f0547ddb87fa3069afee3eda43b51057
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:24 2005 -0700

    [PATCH] smsc-ircc2: dont use void * where specific type will do
    
    IRDA: smsc-ircc2 - do not over-use void * pointers, use specific
          types wherever possible.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da0841a09531818000f816b76374abaef7e4b9b9
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:23 2005 -0700

    [PATCH] smsc-ircc2: use netdev_priv()
    
    IRDA: smsc-ircc2 - use netdev_priv() instead of accessing pointer
          directly.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bb3b2cd40973ca67c9c6ab26c34df61680f5f84
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:22 2005 -0700

    [PATCH] smsc-ircc2: add to sysfs as platform device, new PM
    
    IRDA: smsc-ircc2 - add sysfs support (platform device and driver) and
          switch power management to the new scheme.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80a9058924d66643b645dbf5ad92acdac6d1d134
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:21 2005 -0700

    [PATCH] smsc-ircc2: dont pass iobase around
    
    IRDA: smsc-ircc2 - cleanup - do not pass around iobase, it can be
          retrieved from smsc_ircc_cb structure.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6158d23a60ac32fc08316703266b6ab14d9dc00
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:20 2005 -0700

    [PATCH] smsc-ircc2: remove typedefs
    
    IRDA: smsc-ircc2 - remove excessive typedefs.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a956f4ca3ede0a77e307f504e4a98554047b44ff
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:20 2005 -0700

    [PATCH] smsc-ircc2: drop DIM macro in favor of ARRAY_SIZE
    
    IRDA: smsc-ircc2 - remove home-grown DIM macro, use ARRAY_SIZE intead.
          Also fix out-of-bound array access.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98b7777331d4344821e900040da5d1d3016d9e67
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:19 2005 -0700

    [PATCH] smsc-ircc2: formatting fixes
    
    IRDA: smsc-ircc2 - some formatting changes for better readability.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 527b6af4133f433542a875dea7a24d58f8871d4b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Tue Sep 6 15:19:17 2005 -0700

    [PATCH] smsc-ircc2: whitespace fixes
    
    IRDA: smsc-ircc2 - whitespace fixes.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4407c2b6b297339e296facf62e020cf66e55053d
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:17 2005 -0700

    [PATCH] Fix race in do_get_write_access()
    
      attached patch should fix the following race:
         Proc 1                               Proc 2
    
         __flush_batch()
           ll_rw_block()
                                            do_get_write_access()
    					   lock_buffer
                                                 jh is only waiting for checkpoint
    					     -> b_transaction == NULL ->
    					     do nothing
                                               unlock_buffer
        test_set_buffer_locked()
        test_clear_buffer_dirty()
                                               __journal_file_buffer()
                                            change the data
        submit_bh()
    
    and we have sent wrong data to disk...  We now clean the dirty buffer flag
    under buffer lock in all cases and hence we know that whenever a buffer is
    starting to be journaled we either finish the pending write-out before
    attaching a buffer to a transaction or we won't write the buffer until the
    transaction is going to be committed.
    
    The test in jbd_unexpected_dirty_buffer() is redundant - remove it.
    Furthermore we have to clear the buffer dirty bit under the buffer lock to
    prevent races with buffer write-out (and hence prevent returning a buffer with
    IO happening).
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e39f07c83bac96850265b87a69dfc5c90ed4f1f5
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:16 2005 -0700

    [PATCH] Change HFS+ to not use ll_rw_block()
    
    Use block layer predefined function.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 096125f31ae3aa2c7271463b9986dd228e0da089
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:15 2005 -0700

    [PATCH] Change ll_rw_block() calls in UFS
    
    We need to be sure that current data are sent to disk.  Hence we call
    ll_rw_block() with SWRITE.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53778ffde601c962ad9250c4998df7de6f428246
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:14 2005 -0700

    [PATCH] Change ll_rw_block() calls in Reiser
    
    We need to be sure that current data in buffer are sent to disk.  Hence we
    need to call ll_rw_block() with SWRITE.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26707699b5337ea471ba1774447e8a1170c99e52
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:12 2005 -0700

    [PATCH] Change ll_rw_block() calls in JBD
    
    We must be sure that the current data in buffer are sent to disk.  Hence we
    have to call ll_rw_block() with SWRITE.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7662236253374012d364106b6dc9161bd929e2e
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:10 2005 -0700

    [PATCH] Make ll_rw_block() wait for buffer lock
    
    Introduce new ll_rw_block() operation SWRITE meaning that block layer should
    wait for the buffer lock and write-out afterwards.  Hence data in buffers at
    the time of call are guaranteed to be submitted to the disk.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6c9f5c1888097c936334bf9740024520ca47b8e
Author: Jan Kara <jack@suse.cz>
Date:   Tue Sep 6 15:19:09 2005 -0700

    [PATCH] Fix JBD race in t_forget list handling
    
    Fix race between journal_commit_transaction() and other places as
    journal_unmap_buffer() that are adding buffers to transaction's t_forget list.
     We have to protect against such places by holding j_list_lock even when
    traversing the t_forget list.  The fact that other places can only add buffers
    to the list makes the locking easier.  OTOH the lock ranking complicates the
    stuff...
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbf0d27a131639f4f3e4faa94373c5c6f89f8f07
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Tue Sep 6 15:19:08 2005 -0700

    [PATCH] kjournald: missing JFS_UNMOUNT check
    
    It seems that kjournald() may be missing a check of the JFS_UNMOUNT flag
    before calling schedule().  This showed up in testing of OCFS2 recovery
    where our recovery thread would hang in journal_kill_thread() called from
    journal_destroy() because kjournald never got a chance to read the flag to
    shut down before the schedule().
    
    Zach pointed out the missing check which led me to hack up this trivial
    patch.  It's been tested many times now and I have yet to reproduce the
    hang, which was happening very regularly before.
    
    <mild rant>
    I'm guessing that we could really use some wait_event() calls with helper
    functions in, well, most of jbd these days which would make a ton of the
    wait code there vastly cleaner.
    </mild rant>
    
    As for why this doesn't happen in ext3 (or OCFS2 during normal
    mount/unmount of the local nodes journal), I think it may that the specific
    timing of events in the ocfs2 recovery thread exposes a race there.
    Because ocfs2_replay_journal() is only interested in playing back the
    journal, initialization and shutdown happen very quicky with no other
    metadata put into that specific journal.
    
    Acked-by: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3870ee8c63d5e55aea990654dfeb231264e13134
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:07 2005 -0700

    [PATCH] Corgi: Add MMC/SD write protection switch handling
    
    Add MMC/SD write protection switch handling for the Corgi platform
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7ceff348bbd2ef35b5bc2ab47541dcac4b0b8ea
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:07 2005 -0700

    [PATCH] Corgi: Add keyboard and touchscreen device definitions
    
    Add keyboard and touchscreen device definitions for corgi.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3158106685acac8f8d4e74a17b974f160fe77c0b
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:06 2005 -0700

    [PATCH] Input: Add a new switch event type
    
    The corgi keyboard has need of a switch event type with slightly type to the
    input system as recommended by the input maintainer.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41b1bce80b43f7c6a6c64006b2abe3a8d52ab120
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:05 2005 -0700

    [PATCH] w100fb: Update corgi platform code to match new driver
    
    This patch moves the platform specific Sharp SL-C7x0 LCD code from the
    w100fb driver into a more appropriate place and updates the Corgi code to
    match the new w100fb driver.
    
    It also updates the corgi touchscreen code to match the new simplified
    interface available from w100fb.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aac51f09d96a0acfb73c1d1c0796358bb47ea07b
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:03 2005 -0700

    [PATCH] w100fb: Rewrite for platform independence
    
    The code w100fb was based on was horribly Sharp SL-C7x0 specific and there
    was little else that could be done as I had no access to anything else with
    a w100 in it.  There is no real documentation about this chipset available.
    
    Ian Molton has access to other platforms with the w100 (Toshiba e-series)
    and so between us, we've improved w100fb and made it platform independent.
    Ian Molton also added support for the very similar w3220 and w3200
    chipsets.
    
    There are a lot of changes here and it nearly amounts to a rewrite of the
    driver but it has been extensively tested and is being used in preference
    to the original driver in the Zaurus community.  I'd therefore like to
    update the mainline code to reflect this.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cc3c7af42aa826d413e3134628d85f3920457d8
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:02 2005 -0700

    [PATCH] Corgi touchscreen: Fix a pmu bug
    
    Corgi Touchscreen bugfix.  If the PMU isn't running, the register needs to
    be set to a sane value rather than reusing some random value.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74b74890bc23b8c6f5b0c0d99f6e1b3d39cb3dae
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:02 2005 -0700

    [PATCH] Corgi Touchscreen: Code cleanup / fixes
    
    Clean up some Corgi Touchscreen logic and merge the repeat calls to
    w100fb_blanking() in anticipation of the w100fb patch.
    
    Fix a pm_message_t reference.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 347e4843fa1fc21bf542c6f086fcf5ef1ab5f58e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:01 2005 -0700

    [PATCH] Corgi Touchscreen: Allow the driver to share the PMU
    
    The Corgi Touchscreen driver uses the PMU as an accurate timing source which
    conflicts with its usage for performance monitoring.  This patch allows it to
    be shared with other users such as oprofile.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 948e12f0bd51db439659fed857971e22fbdd7527
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:19:00 2005 -0700

    [PATCH] Corgi Keyboard: Code tidying
    
    The input system handles key state tracking so there's no need for the driver
    to do so as well.  Also tidy up some comment formatting and remove a now
    unneeded function.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8240a4a4bc95814502da522d5ee929fe0f0dc679
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:18:59 2005 -0700

    [PATCH] Corgi Keyboard: Add some power management code
    
    Add some power management code to the corgi keyboard driver so that only one
    power event gets reported within any reasonable time frame and the driver
    doesn't enter an infinte loop due to key repeat.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aba5a4c055dde13a3cece53e1b4b060294d631ed
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:18:59 2005 -0700

    [PATCH] Corgi Keyboard: Fix a couple of compile errors
    
    Fix a couple of compile errors in the corgi keyboard driver.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bc20a8d497e137c0a9ee9a3bacce3dd4a2b6993
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:58 2005 -0700

    [PATCH] mmc: conditional scr sysfs entry
    
    Only show the scr file in sysfs for SD cards.  Previously this was present
    for all cards but had a contents of 0 for MMC cards.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65ae2118e84616680dce37b951ffc366dcce7cf0
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Sep 6 15:18:57 2005 -0700

    [PATCH] mmc: wbsd Secure Digital support
    
    Add support for Secure Digital specific features in the wbsd driver.  Adds
    support for read-only switch and wide bus transfers.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e619524fe5f5b0c13db34ed0f6320d2dcccf6e8d
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Sep 6 15:18:56 2005 -0700

    [PATCH] Add write protection switch handling to the PXA MMC driver
    
    Add a write protection switch handling code to the PXA MMC driver so
    that platform specific code can provide it if available.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b4fd9aef778e223968dfab1b90f905b3f2bd23d
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:56 2005 -0700

    [PATCH] sd: SD copyright notice
    
    Credit where credit is due.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f218278a456b3c272b480443c89004c3d2a49f18
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:55 2005 -0700

    [PATCH] sd: SD 4-bit bus
    
    Infrastructure for 4-bit bus transfers with SD cards.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9c4342beb4cd28b3a05c3401195e2536c37c150
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:54 2005 -0700

    [PATCH] sd: SCR in sysfs
    
    Export the SCR register through sysfs.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b57c43ad81602589afca3948a5a7121e40026e17
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:53 2005 -0700

    [PATCH] sd: SCR register
    
    Read the SD specific SCR register from the card.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a00fc09029f02ca833cf90e5d5625f08c4ac4f51
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:52 2005 -0700

    [PATCH] sd: read-only switch
    
    Support for the read-only switch on SD cards which must be enforced by the
    host.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 335eadf2ef6a1122a720aea98e758e5d431da87d
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Tue Sep 6 15:18:50 2005 -0700

    [PATCH] sd: initialize SD cards
    
    Support for the Secure Digital protocol in the MMC layer.
    
    A summary of the legal issues surrounding SD cards, as understood by yours
    truly:
    
    Members of the Secure Digital Association, hereafter SDA, are required to sign
    a NDA[1] before given access to any specifications.  It has been speculated
    that including an SD implementation would forbid these members to redistribute
    Linux.  This is the basic problem with SD support so it is unclear if it even
    is a problem since it has no effect on those of us that aren't members.
    
    The SDA doesn't seem to enforce these rules though since the patches included
    here are based on documentation made public by some of the members.  The most
    complete specs[2] are actually released by Sandisk, one of the founding
    companies of the SDA.
    
    Because of this the NDA is considered a non-issue by most involved in the
    discussions concerning these patches.  It might be that the SDA is only
    interested in protecting the so called "secure" bits of SD, which so far
    hasn't been found in any public spec.  (The card is split into two sections,
    one "normal" and one "secure" which has an access scheme similar to TPM:s).
    
    (As a side note, Microsoft is working to make things easier for us since they
    want to be able to include the source code for a SD driver in one of their
    development kits.  HP is making sure that the new NDA will allow a Linux
    implementation.  So far only the SDIO specs have been opened up[3].  More will
    hopefully follow.)
    
     [1] http://www.sdcard.org/membership/images/ippolicy.pdf
     [2] http://www.sandisk.com/pdf/oem/ProdManualSDCardv1.9.pdf
     [3] http://www.sdcard.org/sdio/Simplified%20SDIO%20Card%20Specification.pdf
    
    This patch contains the central parts of the SD support.  If no MMC cards are
    found on a bus then the MMC layer proceeds looking for SD cards.  Helper
    functions are extended to handle the special needs of SD cards.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 328b9227865026268261a24a97a578907b280415
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Sep 6 15:18:49 2005 -0700

    [PATCH] hfs: NLS support
    
    This adds NLS support to HFS.  Using the kernel options iocharset and codepage
    it's possible to map the disk encoding to a local mapping.  If these options
    are not used, it falls back to the old direct mapping.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 717dd80e999cdc84fb611decec5c5054d37c40d2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Sep 6 15:18:48 2005 -0700

    [PATCH] hfs: show_options support
    
    This adds support for show_options.  It also fixes some namespace polution in
    the hfsplus driver.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5e3985fa014029eb6795664c704953720cc7f7d
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Sep 6 15:18:47 2005 -0700

    [PATCH] hfs: remove debug code
    
    This removes some old debug code, which is no longer needed.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c702e16207c70119d03df924de35f8c3629a5c4
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:46 2005 -0700

    [PATCH] ipmi poweroff: fix chassis control
    
    The IPMI power control function proc_write_chassctrl was badly written, it
    directly used userspace pointers, it assumed that strings were NULL
    terminated, and it used the evil sscanf function.  This converts over to
    using the sysctl interface for this data and changes the semantics to be a
    little more logical.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Cc: <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 877197ef89aa486c8eea369a9357af34381d11e0
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:45 2005 -0700

    [PATCH] ipmi: remove unused fields
    
    This removes the unused "all_cmd_rcvr" variable from the IPMI driver.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8b336173b86c5db5dd5ae5ad33f3f8605878d0d
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:45 2005 -0700

    [PATCH] ipmi: style cleanups
    
    Clean up various style issues in the IPMI driver.  Should be no functional
    changes.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 168524d673f99550d75af49eb3f5d2850420eb66
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:43 2005 -0700

    [PATCH] ipmi: add hacks for IPMI chassis poweroff for certain Dell servers
    
    This patch allows Dell servers with IPMI controllers that predate IPMI 1.5
    to use the standard poweroff or powercycle commands.  These systems
    firmware don't set the chassis capability bit in the Get Device ID, but
    they do implement the standard poweroff and powercycle commands.
    
    Tested on RHEL3 kernel 2.4.21-20.ELsmp on a PowerEdge 2600.  The standard
    ipmi_poweroff driver cannot drive these systems.  With this patch, they
    power off or powercycle as expected.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56a55ec64806fb56e0cd43b0f726020b74c6689b
Author: Corey Minyard <cminyard@mvista.com>
Date:   Tue Sep 6 15:18:42 2005 -0700

    [PATCH] ipmi: fix panic ipmb response
    
    The "null message handler" in the IPMI driver is used in startup and panic
    situations to handle messages.  It was only designed to work with messages
    from the local management controller, but in some cases it was used to get
    messages from remote managmenet controllers, and the system would then
    panic.  This patch makes the "null message handler" in the IPMI driver more
    general so it works with any kind of message.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fdd75bd6cfa60a54b6db91d9256a711ab52fef3
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:42 2005 -0700

    [PATCH] ipmi: clean up versioning of the IPMI driver
    
    This adds MODULE_VERSION, MODULE_DESCRIPTION, and MODULE_AUTHOR tags to the
    IPMI driver modules.  Also changes the MODULE_VERSION to remove the
    prepended 'v' on each value, consistent with the module versioning policy.
    
    This patch also removes all the version information from everything except
    the ipmi_msghandler module.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ae0e0f9b15b95a2c3e64088d2a85e3f4a707681
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:41 2005 -0700

    [PATCH] ipmi: OEM flag handling and hacks for some Dell machines
    
    The ipmi driver does not have a way to handle firmware-generated events
    which have the OEM[012] Data Available flags set.  In such a case, the
    SMS_ATN bit may never get cleared by firmware, leaving the driver looping
    infinitely but never able to make any progress.
    
    This patch first simplifies storage and use of the data returned from an
    IPMI Get Device ID command.
    
    It then creates a new per-OEM handler hook, which should know how to handle
    events with the OEM[012] Data Available flags set.  It then uses this to
    implement a workaround for IPMI 1.5-capable Dell PowerEdge servers which
    are susceptable to setting the OEM[012] Data Available flags when the
    driver can't handle it.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07766f241b54d67999907d529b99ffaa61d8b7d9
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:40 2005 -0700

    [PATCH] ipmi: allow userland to include ipmi.h
    
    The IPMI driver include file needs to include compiler.h so it has definitions
    for __user and such.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f05ee9a63b414da4fd036a9dab2d27727301188
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:39 2005 -0700

    [PATCH] ipmi: watchdog/NMI interaction fixes
    
    There are some interactions between IPMI NMI timeouts and the other operations
    of the IPMI driver.  This make sure those interactions are handled properly.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75b0768a396f2a25901b7b1edc87b95cdb3af4ef
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:38 2005 -0700

    [PATCH] ipmi: high-res timer support fixes
    
    Fix some problems with the high-res timer support.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c14979b993021377228958498937bcdd9539cbce
Author: Corey Minyard <minyard@acm.org>
Date:   Tue Sep 6 15:18:38 2005 -0700

    [PATCH] ipmi: add per-channel IPMB addresses
    
    IPMI allows multiple IPMB channels on a single interface, and each channel
    might have a different IPMB address.  However, the driver has only one IPMB
    address that it uses for everything.  This patch adds new IOCTLS and a new
    internal interface for setting per-channel IPMB addresses and LUNs.  New
    systems are coming out with support for multiple IPMB channels, and they are
    broken without this patch.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b224cd3a0ca376dd52f382905c1aaf5a83a54692
Author: Andrey Panin <pazke@donpac.ru>
Date:   Tue Sep 6 15:18:37 2005 -0700

    [PATCH] IPMI: use dmi_find_device()
    
    This patch replaces homebrew DMI scanning code in IPMI System Interface driver
    with dmi_find_device() call.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8db08ea7e6527eff82d8e45507468003e3cefba3
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:36 2005 -0700

    [PATCH] ALSA: convert kcalloc to kzalloc
    
    This patch introduces a memory-leak tracking version of kzalloc for ALSA.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e915fc497a8da551f32b7e5fda687eb4a10bc23b
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:35 2005 -0700

    [PATCH] fs: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82ca76b6b160b6fce46f78c069f87fe1a4dc0778
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:35 2005 -0700

    [PATCH] drivers: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b842b6e3704f4b9606ff8a4ffe03579d9addf5e
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:34 2005 -0700

    [PATCH] USB: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a97e148a8b8da8b04bc3e18ceb824a8f5f56d567
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:33 2005 -0700

    [PATCH] input: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 874ca6cd3fb454f4dfafd2bbb6c6893303227c3f
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:32 2005 -0700

    [PATCH] PPC64: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f96cb1f0580324b95b7219466312a376a59a796f
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:18:31 2005 -0700

    [PATCH] IA64: convert kcalloc to kzalloc
    
    This patch converts kcalloc(1, ...) calls to use the new kzalloc() function.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd3927105b6f65afb7dac17682172cdfb86d3f00
Author: Pekka J Enberg <penberg@cs.Helsinki.FI>
Date:   Tue Sep 6 15:18:31 2005 -0700

    [PATCH] introduce and use kzalloc
    
    This patch introduces a kzalloc wrapper and converts kernel/ to use it.  It
    saves a little program text.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 640e803376b9c4072f69fec42e304c974a631298
Author: Robert Love <rml@novell.com>
Date:   Tue Sep 6 15:18:30 2005 -0700

    [PATCH] fix: dmi_check_system
    
    Background:
    
    	1) dmi_check_system() returns the count of the number of
    	   matches.  Zero thus means no matches.
    	2) A match callback can return nonzero to stop the match
    	   checking.
    
    Bug: The count is incremented after we check for the nonzero return value,
    so it does not reflect the actual count.  We could say this is intended,
    for some dumb reason, except that it means that a match on the first check
    returns zero--no matches--if the callback returns nonzero.
    
    Attached patch implements the count before calling the callback and thus
    before potentially short-circuiting.
    
    Signed-off-by: Robert Love <rml@novell.com>
    Cc: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebad6a4230bdb5927495e28bc7837f515bf667a7
Author: Andrey Panin <pazke@donpac.ru>
Date:   Tue Sep 6 15:18:29 2005 -0700

    [PATCH] dmi: add onboard devices discovery
    
    This patch adds onboard devices and IPMI BMC discovery into DMI scan code.
    Drivers can use dmi_find_device() function to search for devices by type and
    name.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3c7120d552989be94c9137989be5abb6da8954f
Author: Andrey Panin <pazke@donpac.ru>
Date:   Tue Sep 6 15:18:28 2005 -0700

    [PATCH] dmi: make dmi_string() behave like strdup()
    
    This patch changes dmi_string() function to allocate string copy by itself, to
    avoid code duplication in the next patch.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e70b9a3d68909ad7e79bf6e1b0dcec6de922a7c
Author: Andrey Panin <pazke@donpac.ru>
Date:   Tue Sep 6 15:18:28 2005 -0700

    [PATCH] dmi: remove old debugging code
    
    DMI debugging code is unused for ages.  This patch removes it.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61e032fa2f659fada02ede5087b46963a1c7de34
Author: Andrey Panin <pazke@donpac.ru>
Date:   Tue Sep 6 15:18:26 2005 -0700

    [PATCH] dmi: remove uneeded function
    
    After elimination of central DMI blacklist dmi_scan_machine() function became
    a wrapper for dmi_iterate().  This patch moves some code around to kill
    unneeded function.
    
    Signed-off-by: Andrey Panin <pazke@donpac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e08fc0457af28f2ebec36296ea7ada6024fde81b
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:26 2005 -0700

    [PATCH] cifs_create() fix
    
    cifs_create() did totally the wrong thing with nd->intent.open.flags:
    it interpreted nd->intent.open.flags as the original open flags, not
    the one transformed for open_namei().  Also it used the intent data
    even if it was not filled in (if called from sys_mknod()).
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Cc: Steven French <sfrench@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e922efc342d565a38eed3af377ff403f52148864
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:25 2005 -0700

    [PATCH] remove duplicated sys_open32() code from 64bit archs
    
    64 bit architectures all implement their own compatibility sys_open(),
    when in fact the difference is simply not forcing the O_LARGEFILE
    flag.  So use the a common function instead.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab8d11beb46f0bd0617e04205c01f5c1fe845b61
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:24 2005 -0700

    [PATCH] remove duplicated code from proc and ptrace
    
    Extract common code used by ptrace_attach() and may_ptrace_attach()
    into a separate function.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e21ccb136047e556acf0fdf227cab5db05c1c25
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:23 2005 -0700

    [PATCH] fix enum pid_directory_inos in proc/base.c
    
    This patch fixes wrongly placed elements in the pid_directory_inos
    enum.  Also add comment so this mistake is not repeated.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0494f6ec5d3a015d53b57e37280b93c19446676a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:22 2005 -0700

    [PATCH] use get_fs_struct() in proc
    
    This patch cleans up proc_cwd_link() and proc_root_link() by factoring
    out common code into get_fs_struct().
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09dd17d3e5e43ea6d3f3a12829108c4ca13ff810
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:21 2005 -0700

    [PATCH] namei cleanup
    
    Extract common code into inline functions to make reading easier.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e89bbd3a0b3c054d9a94feb0db7bbae1cdb99e54
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:18:21 2005 -0700

    [PATCH] remove iattr.ia_attr_flags
    
    Remove unused ia_attr_flags from struct iattr, and related defines.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c320aa545bc3921fc2b192ab0443218d27a2738c
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Tue Sep 6 15:18:19 2005 -0700

    [PATCH] Remove maintainer's bad e-mails addresses
    
    This patch removes 1 whole entry, which is no longer maintained and 1
    e-mail, which is not right.  [comtrol was posted by Rolf Eike Beer]
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Jiri Slaby <xslaby@fi.muni.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b19d85acca488b63af96f59c8bad2dfd75506b0
Author: Olaf Hering <olh@suse.de>
Date:   Tue Sep 6 15:18:18 2005 -0700

    [PATCH] provide MODALIAS= enviroment variable to autoload ieee1394 modules via udev
    
    https://bugzilla.novell.com/show_bug.cgi?id=103746
    
    Old 2.6.13 hotplug enviroment for 'plug in firewire disk' event:
    
    ==> debug.01139.ieee1394.add.8211 <==
    set -- ieee1394
    UDEV_LOG='7'
    ACTION='add'
    DEVPATH='/class/ieee1394/00010410100036e0-0'
    SUBSYSTEM='ieee1394'
    SEQNUM='1139'
    PHYSDEVPATH='/devices/pci0001:10/0001:10:0d.0/0001:11:0a.0/fw-host0/00010410100036e0/00010410100036e0-0'
    PHYSDEVBUS='ieee1394'
    VENDOR_ID='000000'
    MODEL_ID='001010'
    GUID='00010410100036e0'
    SPECIFIER_ID='00609e'
    VERSION='010483'
    UDEVD_EVENT='1'
    
    Module spb2 is not loaded.
    
    grep sbp2 /lib/modules/2.6.13-20050901172817-default/modules.alias
    alias ieee1394:ven*mo*sp0000609Ever00010483* sbp2
    
    printf 'ieee1394:ven%08Xmo%08Xsp%08Xver%08X\n' '0x000000' '0x001010' '0x00609e' '0x010483'
    ieee1394:ven00000000mo00001010sp0000609Ever00010483
    
    modprobe -v ieee1394:ven00000000mo00001010sp0000609Ever00010483
    insmod /lib/modules/2.6.13-20050901172817-default/kernel/drivers/ieee1394/sbp2.ko
    
    Providing a MODALIAS= enviroment variable with the content above will fix it.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 736c7b808f38f3bb72941345e11e236ec65dec3d
Author: Coywolf Qi Hunt <qiyong@fc-cn.com>
Date:   Tue Sep 6 15:18:17 2005 -0700

    [PATCH] alloc_buffer_head() and free_buffer_head() cleanup
    
    Signed-off-by: Coywolf Qi Hunt <qiyong@fc-cn.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f4bb1f4199b7dc0c958447b1e4898980013b884
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 6 15:18:16 2005 -0700

    [PATCH] struct dentry: place d_hash close to d_parent and d_name to speedup lookups
    
    dentry cache uses sophisticated RCU technology (and prefetching if
    available) but touches 2 cache lines per dentry during hlist lookup.
    
    This patch moves d_hash in the same cache line than d_parent and d_name
    fields so that :
    
    1) One cache line is needed instead of two.
    
    2) the hlist_for_each_rcu() prefetching has a chance to bring all the
       needed data in advance, not only the part that includes d_hash.next.
    
    I also changed one old comment that was wrong for 64bits.
    
    A further optimisation would be to separate dentry in two parts, one that
    is mostly read, and one writen (d_count/d_lock) to avoid false sharing on
    SMP/NUMA but this would need different field placement depending on 32bits
    or 64bits platform.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0811bab24ff1eecab38110eda7ea7847db95c64e
Author: John Hawkes <hawkes@sgi.com>
Date:   Tue Sep 6 15:18:15 2005 -0700

    [PATCH] cpusets: re-enable "dynamic sched domains"
    
    Revert the hack introduced last week.
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1b551386a5f3f50a5003b691f819b07f8e6f034
Author: John Hawkes <hawkes@sgi.com>
Date:   Tue Sep 6 15:18:14 2005 -0700

    [PATCH] cpusets: fix the "dynamic sched domains" bug
    
    For a NUMA system with multiple CPUs per node, declaring a cpu-exclusive
    cpuset that includes only some, but not all, of the CPUs in a node will mangle
    the sched domain structures.
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Cc; Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c1cfda20a508b181bdda8c0045f7c0c333880a5
Author: John Hawkes <hawkes@sgi.com>
Date:   Tue Sep 6 15:18:14 2005 -0700

    [PATCH] cpusets: Move the ia64 domain setup code to the generic code
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef08e3b4981aebf2ba9bd7025ef7210e8eec07ce
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Sep 6 15:18:13 2005 -0700

    [PATCH] cpusets: confine oom_killer to mem_exclusive cpuset
    
    Now the real motivation for this cpuset mem_exclusive patch series seems
    trivial.
    
    This patch keeps a task in or under one mem_exclusive cpuset from provoking an
    oom kill of a task under a non-overlapping mem_exclusive cpuset.  Since only
    interrupt and GFP_ATOMIC allocations are allowed to escape mem_exclusive
    containment, there is little to gain from oom killing a task under a
    non-overlapping mem_exclusive cpuset, as almost all kernel and user memory
    allocation must come from disjoint memory nodes.
    
    This patch enables configuring a system so that a runaway job under one
    mem_exclusive cpuset cannot cause the killing of a job in another such cpuset
    that might be using very high compute and memory resources for a prolonged
    time.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bf2229f8817677127a60c177aefce1badd22d7b
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Sep 6 15:18:12 2005 -0700

    [PATCH] cpusets: formalize intermediate GFP_KERNEL containment
    
    This patch makes use of the previously underutilized cpuset flag
    'mem_exclusive' to provide what amounts to another layer of memory placement
    resolution.  With this patch, there are now the following four layers of
    memory placement available:
    
     1) The whole system (interrupt and GFP_ATOMIC allocations can use this),
     2) The nearest enclosing mem_exclusive cpuset (GFP_KERNEL allocations can use),
     3) The current tasks cpuset (GFP_USER allocations constrained to here), and
     4) Specific node placement, using mbind and set_mempolicy.
    
    These nest - each layer is a subset (same or within) of the previous.
    
    Layer (2) above is new, with this patch.  The call used to check whether a
    zone (its node, actually) is in a cpuset (in its mems_allowed, actually) is
    extended to take a gfp_mask argument, and its logic is extended, in the case
    that __GFP_HARDWALL is not set in the flag bits, to look up the cpuset
    hierarchy for the nearest enclosing mem_exclusive cpuset, to determine if
    placement is allowed.  The definition of GFP_USER, which used to be identical
    to GFP_KERNEL, is changed to also set the __GFP_HARDWALL bit, in the previous
    cpuset_gfp_hardwall_flag patch.
    
    GFP_ATOMIC and GFP_KERNEL allocations will stay within the current tasks
    cpuset, so long as any node therein is not too tight on memory, but will
    escape to the larger layer, if need be.
    
    The intended use is to allow something like a batch manager to handle several
    jobs, each job in its own cpuset, but using common kernel memory for caches
    and such.  Swapper and oom_kill activity is also constrained to Layer (2).  A
    task in or below one mem_exclusive cpuset should not cause swapping on nodes
    in another non-overlapping mem_exclusive cpuset, nor provoke oom_killing of a
    task in another such cpuset.  Heavy use of kernel memory for i/o caching and
    such by one job should not impact the memory available to jobs in other
    non-overlapping mem_exclusive cpusets.
    
    This patch enables providing hardwall, inescapable cpusets for memory
    allocations of each job, while sharing kernel memory allocations between
    several jobs, in an enclosing mem_exclusive cpuset.
    
    Like Dinakar's patch earlier to enable administering sched domains using the
    cpu_exclusive flag, this patch also provides a useful meaning to a cpuset flag
    that had previously done nothing much useful other than restrict what cpuset
    configurations were allowed.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f90b1d2f1aaaa40c6519a32e69615edc25bb97d5
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Sep 6 15:18:10 2005 -0700

    [PATCH] cpusets: new __GFP_HARDWALL flag
    
    Add another GFP flag: __GFP_HARDWALL.
    
    A subsequent "cpuset_zone_allowed" patch will use this flag to mark GFP_USER
    allocations, and distinguish them from GFP_KERNEL allocations.
    
    Allocations (such as GFP_USER) marked GFP_HARDWALL are constrainted to the
    current tasks cpuset.  Other allocations (such as GFP_KERNEL) can steal from
    the possibly larger nearest mem_exclusive cpuset ancestor, if memory is tight
    on every node in the current cpuset.
    
    This patch collides with Mel Gorman's patch to reduce fragmentation in the
    standard buddy allocator, which adds two GFP flags.  This was discussed on
    linux-mm in July.  Most likely, one of his flags for user reclaimable memory
    can be the same as my __GFP_HARDWALL flag, under some generic name meaning its
    user address space memory.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a49335cceab8afb6603152fcc3f7d3b6677366ca
Author: Paul Jackson <pj@sgi.com>
Date:   Tue Sep 6 15:18:09 2005 -0700

    [PATCH] cpusets: oom_kill tweaks
    
    This patch series extends the use of the cpuset attribute 'mem_exclusive'
    to support cpuset configurations that:
     1) allow GFP_KERNEL allocations to come from a potentially larger
        set of memory nodes than GFP_USER allocations, and
     2) can constrain the oom killer to tasks running in cpusets in
        a specified subtree of the cpuset hierarchy.
    
    Here's an example usage scenario.  For a few hours or more, a large NUMA
    system at a University is to be divided in two halves, with a bunch of student
    jobs running in half the system under some form of batch manager, and with a
    big research project running in the other half.  Each of the student jobs is
    placed in a small cpuset, but should share the classic Unix time share
    facilities, such as buffered pages of files in /bin and /usr/lib.  The big
    research project wants no interference whatsoever from the student jobs, and
    has highly tuned, unusual memory and i/o patterns that intend to make full use
    of all the main memory on the nodes available to it.
    
    In this example, we have two big sibling cpusets, one of which is further
    divided into a more dynamic set of child cpusets.
    
    We want kernel memory allocations constrained by the two big cpusets, and user
    allocations constrained by the smaller child cpusets where present.  And we
    require that the oom killer not operate across the two halves of this system,
    or else the first time a student job runs amuck, the big research project will
    likely be first inline to get shot.
    
    Tweaking /proc/<pid>/oom_adj is not ideal -- if the big research project
    really does run amuck allocating memory, it should be shot, not some other
    task outside the research projects mem_exclusive cpuset.
    
    I propose to extend the use of the 'mem_exclusive' flag of cpusets to manage
    such scenarios.  Let memory allocations for user space (GFP_USER) be
    constrained by a tasks current cpuset, but memory allocations for kernel space
    (GFP_KERNEL) by constrained by the nearest mem_exclusive ancestor of the
    current cpuset, even though kernel space allocations will still _prefer_ to
    remain within the current tasks cpuset, if memory is easily available.
    
    Let the oom killer be constrained to consider only tasks that are in
    overlapping mem_exclusive cpusets (it won't help much to kill a task that
    normally cannot allocate memory on any of the same nodes as the ones on which
    the current task can allocate.)
    
    The current constraints imposed on setting mem_exclusive are unchanged.  A
    cpuset may only be mem_exclusive if its parent is also mem_exclusive, and a
    mem_exclusive cpuset may not overlap any of its siblings memory nodes.
    
    This patch was presented on linux-mm in early July 2005, though did not
    generate much feedback at that time.  It has been built for a variety of
    arch's using cross tools, and built, booted and tested for function on SN2
    (ia64).
    
    There are 4 patches in this set:
      1) Some minor cleanup, and some improvements to the code layout
         of one routine to make subsequent patches cleaner.
      2) Add another GFP flag - __GFP_HARDWALL.  It marks memory
         requests for USER space, which are tightly confined by the
         current tasks cpuset.
      3) Now memory requests (such as KERNEL) that not marked HARDWALL can
         if short on memory, look in the potentially larger pool of memory
         defined by the nearest mem_exclusive ancestor cpuset of the current
         tasks cpuset.
      4) Finally, modify the oom killer to skip any task whose mem_exclusive
         cpuset doesn't overlap ours.
    
    Patch (1), the one time I looked on an SN2 (ia64) build, actually saved 32
    bytes of kernel text space.  Patch (2) has no affect on the size of kernel
    text space (it just adds a preprocessor flag).  Patches (3) and (4) added
    about 600 bytes each of kernel text space, mostly in kernel/cpuset.c, which
    matters only if CONFIG_CPUSET is enabled.
    
    This patch:
    
    This patch applies a few comment and code cleanups to mm/oom_kill.c prior to
    applying a few small patches to improve cpuset management of memory placement.
    
    The comment changed in oom_kill.c was seriously misleading.  The code layout
    change in select_bad_process() makes room for adding another condition on
    which a process can be spared the oom killer (see the subsequent
    cpuset_nodes_overlap patch for this addition).
    
    Also a couple typos and spellos that bugged me, while I was here.
    
    This patch should have no material affect.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f68f447e8389de9a62e3e80c3c5823cce484c2e5
Author: John Hawkes <hawkes@sgi.com>
Date:   Tue Sep 6 15:18:06 2005 -0700

    [PATCH] ia64 cpuset + build_sched_domains() mangles structures
    
    I've already sent this to the maintainers, and this is now being sent to a
    larger community audience.  I have fixed a problem with the ia64 version of
    build_sched_domains(), but a similar fix still needs to be made to the
    generic build_sched_domains() in kernel/sched.c.
    
    The "dynamic sched domains" functionality has recently been merged into
    2.6.13-rcN that sees the dynamic declaration of a cpu-exclusive (a.k.a.
    "isolated") cpuset and rebuilds the CPU Scheduler sched domains and sched
    groups to separate away the CPUs in this cpu-exclusive cpuset from the
    remainder of the non-isolated CPUs.  This allows the non-isolated CPUs to
    completely ignore the isolated CPUs when doing load-balancing.
    
    Unfortunately, build_sched_domains() expects that a sched domain will
    include all the CPUs of each node in the domain, i.e., that no node will
    belong in both an isolated cpuset and a non-isolated cpuset.  Declaring a
    cpuset that violates this presumption will produce flawed data structures
    and will oops the kernel.
    
    To trigger the problem (on a NUMA system with >1 CPUs per node):
       cd /dev/cpuset
       mkdir newcpuset
       cd newcpuset
       echo 0 >cpus
       echo 0 >mems
       echo 1 >cpu_exclusive
    
    I have fixed this shortcoming for ia64 NUMA (with multiple CPUs per node).
    A similar shortcoming exists in the generic build_sched_domains() (in
    kernel/sched.c) for NUMA, and that needs to be fixed also.  The fix
    involves dynamically allocating sched_group_nodes[] and
    sched_group_allnodes[] for each invocation of build_sched_domains(), rather
    than using global arrays for these structures.  Care must be taken to
    remember kmalloc() addresses so that arch_destroy_sched_domains() can
    properly kfree() the new dynamic structures.
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38f18527592756d24a12e84c0713e8c902ba7f15
Author: Brian King <brking@us.ibm.com>
Date:   Tue Sep 6 15:18:04 2005 -0700

    [PATCH] block: CFQ refcounting fix
    
    I ran across a memory leak related to the cfq scheduler. The cfq
    init function increments the refcnt of the associated request_queue.
    
    This refcount gets decremented in cfq's exit function. Since blk_cleanup_queue
    only calls the elevator exit function when its refcnt goes to zero, the
    request_q never gets cleaned up. It didn't look like other io schedulers were
    incrementing this refcnt, so I removed the refcnt increment and it fixed the
    memory leak for me.
    
    To reproduce the problem, simply use cfq and use the scsi_host scan sysfs
    attribute to scan "- - -" repeatedly on a scsi host and watch the memory
    vanish.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49e31cbac5be2202f351626fd4fb33ad4d4819b8
Author: Max Kellermann <max@duempel.org>
Date:   Tue Sep 6 15:18:03 2005 -0700

    [PATCH] sunrpc: print unsigned integers in stats
    
    The sunrpc stats are collected in unsigned integers, but they are printed
    with '%d'.  That can result in negative numbers in /proc/net/rpc when the
    highest bit of a counter is set.  The following patch changes '%d' to '%u'
    where appropriate.
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ea6040b0eff07d3a9a4e2d248ac137c6ad02d42
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Tue Sep 6 15:18:02 2005 -0700

    [PATCH] inotify: fix event loss on hardlinked files
    
    People have run into a problem when they do this:
    
    watch (file1, all_events);
    watch (file2, some_events);
    
    if file2 is a hard link to file1, some events will be missed because by
    default we replace the mask.  The patch below adds a flag IN_MASK_ADD which
    will cause inotify to add to the existing mask if present.
    
    Signed-off-by: John McCutchan <ttb@tentacle.dhs.org>
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8191151d0933d65fb6b659ffbd765479f0f200e1
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:18:01 2005 -0700

    [PATCH] Consolidate the asm-ppc*/fcntl.h files into asm-powerpc
    
    This makes sense now that we have asm-powerpc.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d286aa5eaf951bf53d4a0f64576d4b377c435ba
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:18:01 2005 -0700

    [PATCH] Clean up struct flock64 definitions
    
    This patch gathers all the struct flock64 definitions (and the operations),
    puts them under !CONFIG_64BIT and cleans up the arch files.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ac353f9baf7169298ebb7de86b2d697b25bca44
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:18:00 2005 -0700

    [PATCH] Clean up struct flock definitions
    
    This patch just gathers together all the struct flock definitions except
    xtensa into asm-generic/fcntl.h.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1abf62afb6e9cdc1b2618b69067a186b94281587
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:17:59 2005 -0700

    [PATCH] Clean up the fcntl operations
    
    This patch puts the most popular of each fcntl operation/flag into
    asm-generic/fcntl.h and cleans up the arch files.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e64ca97fd80a129e538ca42d0b12c379746b83db
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:17:58 2005 -0700

    [PATCH] Clean up the open flags
    
    This patch puts the most popular of each open flag into asm-generic/fcntl.h
    and cleans up the arch files.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b2fa38e5f3f17a5e1ef3fe29a9869d93197ebfd
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:17:58 2005 -0700

    [PATCH] Consolidate asm-ppc*/fcntl.h
    
    These two files are basically identical, so make one just include the other
    (protecting the 32-bit-only parts with __powerpc64__).  Also remove some
    completely unused defines.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9317259ead88fe6c05120ae1e3ace99738e2c698
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:17:57 2005 -0700

    [PATCH] Create asm-generic/fcntl.h
    
    This set of patches creates asm-generic/fcntl.h and consolidates as much as
    possible from the asm-*/fcntl.h files into it.
    
    This patch just gathers all the identical bits of the asm-*/fcntl.h files into
    asm-generic/fcntl.h.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ba4d46dc44c5399bc4e7a39239de5a1690848a4
Author: Philipp Matthias Hahn <pmhahn@titan.lahn.de>
Date:   Tue Sep 6 15:17:56 2005 -0700

    [PATCH] tpm: fix tpm_atmel.c on ICH6
    
    While installing Debian on our new IBM X41 Tablet, I tried briefly to use
    the built-in Atmel TPM.  The Athmel TPM is also located on the LPC-bus of
    the ICH6.  To make it work I had to apply the following patch:
    
    Signed-off-by: Philipp Matthias Hahn <pmhahn@titan.lahn.de>
    Acked-by: Kylene Jo Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e1a5cc77ec019e0d67c2abcbd486e4f3ac947a4
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Sep 6 15:17:55 2005 -0700

    [PATCH] isdn_v110 warning fix
    
    Here's a small warning fix for drivers/isdn/i4l/isdn_v110.c
     drivers/isdn/i4l/isdn_v110.c:523: warning: `ret' might be used uninitialized in this function
    
    In addition to Karsten Keil signing off on the patch, Thomas Pfeiffer also
    commented on the patch, saying
    "initializing ret with the value zero is correct and should be done."
    
    Please apply.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96803820b3d9830518083c02681fd3f72987ae4d
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Tue Sep 6 15:17:54 2005 -0700

    [PATCH] hpet: fix drift and url
    
    The HPET driver is using a parts per second drift factor instead of the
    standard parts per million drift the time interpolator code expects.  This
    patch fixes that problem and updates the URL for the HPET spec.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Cc: "Robert W. Picco" <bob.picco@hp.com>
    Acked-by: "Pallipadi, Venkatesh" <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 414edcd32aa54bad8827e7c74cace168006c5fab
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Tue Sep 6 15:17:52 2005 -0700

    [PATCH] vt: fix possible memory corruption in complement_pos
    
    Based on a patch from Andr Pereira de Almeida <andre@cachola.com.br>
    
    It might be possible for the saved pointer (*p) to become invalid in
    between vc_resizes, so saving the screen offset instead of the screen
    pointer is saner.
    
    This bug is very hard to trigger though, but Andre probably did, if he's
    submitting this patch.  Anyway, with Andre's patch, it's still possible for
    the offsets to be still illegal, if the new screen size is smaller than the
    old one.  So I've also added checks if the offsets are still within the
    screenbuffer size.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eed74dfcd48101d259012ac08d29061eea500249
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Sep 6 15:17:51 2005 -0700

    [PATCH] optimise 64bit unaligned access on 32bit kernel
    
    I've rewriten Atushi's fix for the 64-bit put_unaligned on 32-bit systems
    bug to generate more efficient code.
    
    This case has buzilla URL http://bugzilla.kernel.org/show_bug.cgi?id=5138.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82a25b5670eef736a20613f8b93fe55ecb5ca4bc
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Sep 6 15:17:51 2005 -0700

    [PATCH] remove verify_area(): remove fs/umsdos/notes as it only contain a verify_area related note
    
    The file `fs/umsdos/notes' contains only a small note about a possible bug
    involving verify_area().  Since umsdos is no longer in the kernel and
    verify_area() is also gone, it seems to make sense that this file goes the way
    of the Dodo.
    
    After applying this patch the `fs/umsdos/' directory will be empty and can be
    removed entirely.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 720a845911097cea1394fe7abb2c9efa76e32715
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Sep 6 15:17:50 2005 -0700

    [PATCH] remove verify_area(): remove or edit references to verify_area in Documentation/
    
    Remove (or edit) remaining references to the now dead verify_area() function
    from files in Documentation/.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97de50c0add1e8f3b4e764c66a13c07235fee631
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Sep 6 15:17:49 2005 -0700

    [PATCH] remove verify_area(): remove verify_area() from various uaccess.h headers
    
    Remove the deprecated (and unused) verify_area() from various uaccess.h
    headers.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e5d7a22292613e55da8e91d75bcc062fd861f41
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:17:48 2005 -0700

    [PATCH] pipe: remove redundant fifo_poll abstraction
    
    Remove a redundant fifo_poll() abstraction from fs/pipe.c and adds a big
    fat comment stating we set POLLERR for FIFOs too on Linux unlike most
    Unices.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c45817f41af987277353e463c78a1c6beb37da2
Author: Kumar Gala <galak@freescale.com>
Date:   Tue Sep 6 15:17:47 2005 -0700

    [PATCH] Remove non-arch consumers of asm/segment.h
    
    asm/segment.h varies greatly on different architectures but is clearly
    deprecated.  Removing all non-architecture consumers will make it easier
    for us to get ride of asm/segment.h all together.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 309c0a1d5d1dae2e543bfc5a0e762d0424696e0d
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Sep 6 15:17:47 2005 -0700

    [PATCH] blk: Use blk_queue_xxx functions to set parameters
    
    Per-queue parameters should be updated using the appropriate blk_queue_xxx
    functions.
    
    Signed-off-by: Stuart McLaren <stuart.mclaren@hp.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b149ee2233edf08fb59b11e879a2c5941929bcb8
Author: john stultz <johnstul@us.ibm.com>
Date:   Tue Sep 6 15:17:46 2005 -0700

    [PATCH] NTP: ntp-helper functions
    
    This patch cleans up a commonly repeated set of changes to the NTP state
    variables by adding two helper inline functions:
    
    ntp_clear(): Clears the ntp state variables
    
    ntp_synced(): Returns 1 if the system is synced with a time server.
    
    This was compile tested for alpha, arm, i386, x86-64, ppc64, s390, sparc,
    sparc64.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c231b7bab0aa6860cd9da2de8a064eddc34c146
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Tue Sep 6 15:17:45 2005 -0700

    [PATCH] Additions to .data.read_mostly section
    
    Mark variables which are usually accessed for reads with __readmostly.
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39ed3fdeec1290dd246dcf1da6b278566987a084
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Tue Sep 6 15:17:44 2005 -0700

    [PATCH] futex: remove duplicate code
    
    This patch cleans up the error path of futex_fd() by removing duplicate
    code.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 580b2e3c0183818adf6151e60270405b02ea8504
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 6 15:17:43 2005 -0700

    [PATCH] Adapt scripts/ver_linux to new util-linux version strings
    
    Tested with 2.12i and 2.13-pre2.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e752dd6cc66a3e6a11396928998baf390cc00420
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Sep 6 15:17:42 2005 -0700

    [PATCH] fix send_sigqueue() vs thread exit race
    
    posix_timer_event() first checks that the thread (SIGEV_THREAD_ID case)
    does not have PF_EXITING flag, then it calls send_sigqueue() which locks
    task list.  But if the thread exits in between the kernel will oops
    (->sighand == NULL after __exit_sighand).
    
    This patch moves the PF_EXITING check into the send_sigqueue(), it must be
    done atomically under tasklist_lock.  When send_sigqueue() detects exiting
    thread it returns -1.  In that case posix_timer_event will send the signal
    to thread group.
    
    Also, this patch fixes task_struct use-after-free in posix_timer_event.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a97c9bf33f4612e2aed6f000f6b1d268b6814f3c
Author: Dave Johnson <djohnson+linux-kernel@sw.starentnetworks.com>
Date:   Tue Sep 6 15:17:40 2005 -0700

    [PATCH] fix cramfs making duplicate entries in inode cache
    
    Every time cramfs_lookup() is called to lookup and inode for a dentry,
    get_cramfs_inode() will allocate a new inode without checking to see if that
    inode already exists in the inode cache.
    
    This is fine the first time, but if the dentry cache entry(ies) associated
    with that inode are aged out, but the inode entry is not aged out (which can
    be quite common if the inode has buffer cache linked to it), cramfs_lookup()
    will be called again and another inode will be allocated and added to the
    inode cache creating a duplicate in the inode cache.
    
    The big issue here is that the buffers associated with each inode cache entry
    are not shared between the duplicates!
    
    The older inode entries are now orphaned as no dentry points to it and won't
    be freed until the buffer cache assoicated with them are first freed.  The
    newest entry will have to create all new buffer cache for each part of its
    file as the old buffer cache is now orphaned as well.
    
    Patch below fixes this by making get_cramfs_inode() use the inode cache before
    blindly creating a new entry every time.  This eliminates the duplicate inodes
    and duplicate buffer cache.
    
    Cc: Phillip Lougher <phillip@lougher.demon.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f4bde9a3486cd7e70bedd2aff35b38667d50173
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:17:39 2005 -0700

    [PATCH] remove the second arg of do_timer_interrupt()
    
    The second arg of do_timer_interrupt() is not used in the functions, and
    all callers pass NULL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Paul Mundt <lethal@Linux-SH.ORG>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2832e9366a1fcd6f76957a42157be041240f994e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 6 15:17:38 2005 -0700

    [PATCH] remove file.f_maxcount
    
    struct file cleanup: f_maxcount has an unique value (INT_MAX).  Just use
    the hard-wired value.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0730ded5be28653675ed314fdd878b8db5f88aa4
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Sep 6 15:17:37 2005 -0700

    [PATCH] remove a redundant variable in sys_prctl()
    
    The patch removes a redundant variable `sig' from sys_prctl().
    
    For some reason, when sys_prctl is called with option == PR_SET_PDEATHSIG
    then the value of arg2 is assigned to an int variable named sig.  Then sig
    is tested with valid_signal() and later used to set the value of
    current->pdeath_signal .
    
    There is no reason to use this intermediate variable since valid_signal()
    takes a unsigned long argument, so it can handle being passed arg2
    directly, and if the call to valid_signal is OK, then we know the value of
    arg2 is in the range zero to _NSIG and thus it'll easily fit in a plain int
    and thus there's no problem assigning it later to current->pdeath_signal
    (which is an int).
    
    The patch gets rid of the pointless variable `sig'.
    This reduces the size of kernel/sys.o in 2.6.13-rc6-mm1 by 32 bytes on my
    system.
    
    Patch has been compile tested, boot tested, and just to make damn sure I
    didn't break anything I wrote a quick test app that calls
    prctl(PR_SET_PDEATHSIG ...) with the entire range of values for a
    unsigned long, and it behaves as expected with and without the patch.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5acd57936c3224fd86e838201e528e0169373e9b
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Sep 6 15:17:36 2005 -0700

    [PATCH] fs: remove redundant timespec_equal test in update_atime()
    
    In update_atime(), timespec_equal() test is done twice in succession and
    the second is always false.  This patch removes the second test.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c9c0b52b8c6b68b05bb06efd7079a8fc5e9ba60
Author: Peter Staubach <staubach@redhat.com>
Date:   Tue Sep 6 15:17:35 2005 -0700

    [PATCH] largefile support for accounting
    
    There is a problem in the accounting subsystem in the kernel can not
    correctly handle files larger than 2GB.  The output file containing the
    process accounting data can grow very large if the system is large enough
    and active enough.  If the 2GB limit is reached, then the system simply
    stops storing process accounting data.
    
    Another annoying problem is that once the system reaches this 2GB limit,
    then every process which exits will receive a signal, SIGXFSZ.  This signal
    is generated because an attempt was made to write beyond the limit for the
    file descriptor.  This signal makes it look like every process has exited
    due to a signal, when in fact, they have not.
    
    The solution is to add the O_LARGEFILE flag to the list of flags used to
    open the accounting file.  The rest of the accounting support is already
    largefile safe.
    
    The changes were tested by constructing a large file (just short of 2GB),
    enabling accounting, and then running enough commands to cause the
    accounting data generated to increase the size of the file to 2GB.  Without
    the changes, the file grows to 2GB and the last command run in the test
    script appears to exit due a signal when it has not.  With the changes,
    things work as expected and quietly.
    
    There are some user level changes required so that it can deal with
    largefiles, but those are being handled separately.
    
    Signed-off-by: Peter Staubach <staubach@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 439c430e3d448b16112de3f3d92bef6ee2639d89
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:17:34 2005 -0700

    [PATCH] arm26: one -g is enough for everyone
    
    The main Makefile is already adding -g to the CFLAGS if
    CONFIG_DEBUG_INFO=y.
    
    Not that two -g would do harm, but one works as well.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc505a478d3fffcfb269b72f64df4510305cfe81
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Sep 6 15:17:32 2005 -0700

    [PATCH] do_notify_parent_cldstop() cleanup
    
    This patch simplifies the usage of do_notify_parent_cldstop(), it lessens
    the source and .text size slightly, and makes the code (in my opinion) a
    bit more readable.
    
    I am sending this patch now because I'm afraid Paul will touch
    do_notify_parent_cldstop() really soon, It's better to cleanup first.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d237c63659c098a662b1b09d43460f04c498436
Author: Stephane Doyon <s.doyon@videotron.ca>
Date:   Tue Sep 6 15:17:31 2005 -0700

    [PATCH] Console blanking locking fix
    
    I've had WARN_CONSOLE_UNLOCKED warnings when calling TIOCLINUX
    TIOCL_BLANKSCREEN and TIOCL_UNBLANKSCREEN.
    
    (I'm blind and I use a braille display.  I use those functions to blank my
    laptop's screen so people don't read it, and hopefully to conserve power.)
    
    The warnings are from these places:
    do_blank_screen at drivers/char/vt.c:2754 (Not tainted)
    save_screen at drivers/char/vt.c:575 (Not tainted)
    do_unblank_screen at drivers/char/vt.c:2822 (Not tainted)
    set_palette at drivers/char/vt.c:2908 (Not tainted)
    
    At a glance I would think the following patch ought to fix that.  Tested on
    one machine.  Could you please tell me if this is correct and/or forward
    the patch where appropriate...
    
    Signed-off-by: Stephane Doyon <s.doyon@videotron.ca>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f62c6d0a2607b2d1fdf280d4d1467a7a6e24c67d
Author: Neil Horman <nhorman@redhat.com>
Date:   Tue Sep 6 15:17:30 2005 -0700

    [PATCH] Add missing overflow check in get_blkdev_list
    
    Patch to clean up missing overflow check in get_blkdev_list.  The printf
    which adds the "Block Devices" string in /proc/devices can overflow the
    presented page if get_chrdev_list eats up the entire 4k space.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f23ef184b486ac021b6a471b4e94cfa04860d3b0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Sep 6 15:17:29 2005 -0700

    [PATCH] Delete unused do_nanosleep declaration
    
    There is no do_nanosleep function so kill it's declaration in <linux/time.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2de93fbf3c427df010b5a923c302e20c143d60cf
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Tue Sep 6 15:17:28 2005 -0700

    [PATCH] 3c59x: read current link status from phy
    
    The phy status register must be read twice in order to get the actual link
    state.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8d127418d78aaeeb1a417ef7453dc09c9118146
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 15:17:27 2005 -0700

    [PATCH] remove asm-*/hdreg.h
    
    unused and useless..
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96d0821cacd095e25a39dfff5232a45b63ed18dd
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Sep 6 15:17:26 2005 -0700

    [PATCH] Fix function/macro name collision on i386 oprofile
    
    The i386 OProfile code has a function named nmi_exit(), which collides with
    the nmi_exit() macro in linux/hardirq.h.  At the moment, we get away with
    it, because hardirq.h isn't included in the oprofile code.  I hit this as a
    bug when working with a patch which (indirectly) adds a #include of
    hardirq.h to oprofile.
    
    Regardless, the name collision is probably not a good idea, so this patch
    fixes it, renaming the oprofile function to op_nmi_exit().  It also renames
    the nmi_init() and nmi_timer_init() functions similarly, for consistency.
    
    Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f26fdd59929e1144c6caf72adcaf4561d6e682a4
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Sep 6 15:17:25 2005 -0700

    [PATCH] CHECK_IRQ_PER_CPU() to avoid dead code in __do_IRQ()
    
    IRQ_PER_CPU is not used by all architectures.  This patch introduces the
    macros ARCH_HAS_IRQ_PER_CPU and CHECK_IRQ_PER_CPU() to avoid the generation
    of dead code in __do_IRQ().
    
    ARCH_HAS_IRQ_PER_CPU is defined by architectures using IRQ_PER_CPU in their
    include/asm_ARCH/irq.h file.
    
    Through grepping the tree I found the following architectures currently use
    IRQ_PER_CPU:
    
            cris, ia64, ppc, ppc64 and parisc.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8eeaaf4180334a8e5c3582fe62a5f8176a8c124
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Tue Sep 6 15:17:24 2005 -0700

    [PATCH] Make the bzImage format self-terminating
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Cc: Frank Sorenson <frank@tuxrocks.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e1efe4931bf7d95b2f3d48ca0b79ea0e8341cc2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:17:23 2005 -0700

    [PATCH] jffs/jffs2: remove wrong function prototypes
    
    This patch removes prototypes for the generic_file_open and
    generic_file_llseek functions.
    
    Besides being superfluous because they are already present in fs.h, they
    were also wrong because the actual functions aren't weak functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 919532a54518c3a4a8258319e2bba0e07f69a925
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:17:22 2005 -0700

    [PATCH] fs/Kconfig: quota help text updates
    
    This patch contains the following updates to the help texts:
    - QUOTA: most people will get the quota utilities from their
             distribution, and if not the mini-HOWTO will tell them
    - QFMT_V2: quota utilities 3.01 are no longer recent, they are now
               ancient
               and 3.01 is lower than the minimal version documented in
               Documentation/Changes
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85747f0325406f3393f48e50c7e31437e2915141
Author: Maximilian Attems <janitor@sternwelten.at>
Date:   Tue Sep 6 15:17:21 2005 -0700

    [PATCH] parport: add NetMOS 9805 support
    
    This interface is said to be commonly used in germany: "The patch has been
    proven to work fine in a beige G3 Mac."
    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=262324
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b0dc07e66ade18e0209331afbd16b3de8384f5c
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Tue Sep 6 15:17:20 2005 -0700

    [PATCH] cleanup of deadline_dispatch_requests()
    
    cleanup of deadline_dispatch_requests():
    
    - replace drq selection with hopefully clearer while semantically the
      same construct: take write request, if there is any, otherwise take read
      one, or NULL if none exist.
    
    - kill unused other_dir.
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffdfc40976dda18d923cd001d44bf0ee55da1af4
Author: Olof Johansson <olof@lixom.net>
Date:   Tue Sep 6 15:17:19 2005 -0700

    [PATCH] Add rdinit parameter to pick early userspace init
    
    Since early userspace was added, there's no way to override which init to
    run from it.  Some people tack on an extra cpio archive with a link from
    /init depending on what they want to run, but that's sometimes impractical.
    
    Changing the "init=" to also override the early userspace isn't feasible,
    since it is still used to indicate what init to run from disk when early
    userspace has completed doing whatever it's doing (i.e.  load filesystem
    modules and drivers).
    
    Instead, introduce "rdinit=" and make it override the default "/init" if
    specified.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b579beec255d6589fabe51b60933d723630bcd4
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Tue Sep 6 15:17:18 2005 -0700

    [PATCH] proc: link count fix
    
    This patch fixes bug titled "sunrpc as module and bad proc/sys link count"
    reported by Jiri Slaby.
    
    The problem was, that only proc_dir_entry->nlink was updated and the
    corresponding inode->i_nlink was not.  The fix is to implement the
    inode->getattr() method, and update i_nlink (if necessary).
    
    A quick audit of proc code shows that no other attribute changes after
    creation.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 230649da7cb73914b8b2a1ffc802a2951e970454
Author: Mika Kukkonen <mikukkon@gmail.com>
Date:   Tue Sep 6 15:17:17 2005 -0700

    [PATCH] create_workqueue_thread() signedness fix
    
    With "-W -Wno-unused -Wno-sign-compare" I get the following compile warning:
    
      CC      kernel/workqueue.o
    kernel/workqueue.c: In function `workqueue_cpu_callback':
    kernel/workqueue.c:504: warning: ordered comparison of pointer with integer zero
    
    On error create_workqueue_thread() returns NULL, not negative pointer, so
    following trivial patch suggests itself.
    
    Signed-off-by: Mika Kukkonen <mikukkon@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b80068543794864f533163c586be2a1a9880a65d
Author: Robert Love <rml@novell.com>
Date:   Tue Sep 6 15:17:16 2005 -0700

    [PATCH] fsnotify: hook on removexattr, too
    
    Add fsnotify_xattr() hook to removexattr().
    
    Signed-off-by: Robert Love <rml@novell.com>
    Signed-off-by: John McCtuchan <ttb@tentacle.dhs.org>
    Cc: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90563ec4129f14d19f018240d1d3ff5c0e5e6392
Author: Doug Warzecha <Douglas_Warzecha@dell.com>
Date:   Tue Sep 6 15:17:15 2005 -0700

    [PATCH] dcdbas: add Dell Systems Management Base Driver with sysfs support
    
    This patch adds the Dell Systems Management Base Driver with sysfs support.
    
    This driver has been tested with Dell OpenManage.
    
    Signed-off-by: Doug Warzecha <Douglas_Warzecha@dell.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c54c28e69f2a374ad708fba37cbe1c5bb94e283
Author: Abhay Salunke <Abhay_Salunke@dell.com>
Date:   Tue Sep 6 15:17:14 2005 -0700

    [PATCH] dell_rbu: new Dell BIOS update driver
    
    Remote BIOS Update driver for updating BIOS images on Dell servers and
    desktops.  See dell_rbu.txt for details.
    
    Signed-off-by: Abhay Salunke <Abhay_Salunke@dell.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e3eaab02028c4087a92711b20abb9e72cc803a7
Author: Abhay Salunke <Abhay_Salunke@dell.com>
Date:   Tue Sep 6 15:17:13 2005 -0700

    [PATCH] modified firmware_class.c to support no hotplug
    
    Upgrade the request_firmware_nowait function to not start the hotplug
    action on a firmware update.
    
    This patch is tested along with dell_rbu driver on i386 and x86-64 systems.
    
    Signed-off-by: Abhay Salunke <Abhay_Salunke@dell.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3ef6f63e5c575c136b39bb423a6e9a002932da7
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Sep 6 15:17:12 2005 -0700

    [PATCH] Speedup FAT filesystem directory reads
    
          OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    
    This speeds up directory reads for large FAT partitions, if the buffercache
    has to be filled from the drive. Following values were taken from:
    
            $ time find path_to_freshly_mounted_fat > /dev/null
    
    on an otherwise idle system.
    
    FAT with 16KB Clusters on IDE attached drive:   Factor  2
    FAT with 32KB Clusters on USB2 attached drive:  Factor 10 (!)
    Its less than 1/10 slower, if the buffercache is uptodate.
    
    The patch introduces the new function fat_dir_readahead().
    
    fat_dir_readahead() calls sb_breadahead() to readahead a whole cluster,
    if the requested sector is the first one in a cluster.
    It is usefull to do this, because on FAT directories occupy whole
    clusters, with the exception of FAT12/FAT16 root dirs.
    
    Readahead is only done, if the cluster's first sector is not uptodate
    to avoid overhead, when the buffer cache is already uptodate.
    Note that under memory pressure, the maximal byte count wasted
    (read: has to be red from disk twice) is 1 cluster's size.  Thats 64KB.
    
    fat_dir_readahead() is called from fat__get_entry().
    
    There is also an unrelated cleanup at one spot:
    
            if (bh)
                    brelse(bh);
    
    is replaced with:
    
            brelse(bh);
    
    brelse() can handle NULL pointer arguments by itself.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 378bac820be6a0ec95df8151524de73ad2b2d2ac
Author: Thomas Koeller <thomas.koeller@baslerweb.com>
Date:   Tue Sep 6 15:17:11 2005 -0700

    [PATCH] flush icache early when loading module
    
    Change the sequence of operations performed during module loading to flush
    the instruction cache before module parameters are processed.  If a module
    has parameters of an unusual type that cannot be handled using the standard
    accessor functions param_set_xxx and param_get_xxx, it has to to provide a
    set of accessor functions for this type.  This requires module code to be
    executed during parameter processing, which is of course only possible
    after the icache has been flushed.
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19b4946ca9d1e35d4c641dcebe27378de34f3ddd
Author: Mike Waychison <mikew@google.com>
Date:   Tue Sep 6 15:17:10 2005 -0700

    [PATCH] ipc: convert /proc/sysvipc/* to generic seq_file interface
    
    Change the /proc/sysvipc/shm|sem|msg files to use the generic seq_file
    implementation for struct ipc_ids.
    
    Signed-off-by: Mike Waychison <mikew@google.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae7817745eef3b4ed3c2e36cb403e0c50f17d4e4
Author: Mike Waychison <mikew@google.com>
Date:   Tue Sep 6 15:17:09 2005 -0700

    [PATCH] ipc: add generic struct ipc_ids seq_file iteration
    
    The following two patches convert /proc/sysvipc/* to use seq_file.
    
    This gives us the following:
    
     - Self-consistent IPC records in proc.
     - O(n) reading of the files themselves.
    
    This patch:
    
    Add a generic method for ipc types to be displayed using seq_file.  This
    patch abstracts out seq_file iterating over struct ipc_ids into ipc/util.c
    
    Signed-off-by: Mike Waychison <mikew@google.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f35279d3f713e5c97b98cbdbf47d98f79942c11f
Author: Bruce Allan <bwa@us.ibm.com>
Date:   Tue Sep 6 15:17:08 2005 -0700

    [PATCH] sunrpc: cache_register can use wrong module reference
    
    When registering an RPC cache, cache_register() always sets the owner as the
    sunrpc module.  However, there are RPC caches owned by other modules.  With
    the incorrect owner setting, the real owning module can be removed potentially
    with an open reference to the cache from userspace.
    
    For example, if one were to stop the nfs server and unmount the nfsd
    filesystem, the nfsd module could be removed eventhough rpc.idmapd had
    references to the idtoname and nametoid caches (i.e.
    /proc/net/rpc/nfs4.<cachename>/channel is still open).  This resulted in a
    system panic on one of our machines when attempting to restart the nfs
    services after reloading the nfsd module.
    
    The following patch adds a 'struct module *owner' field in struct
    cache_detail.  The owner is further assigned to the struct proc_dir_entry
    in cache_register() so that the module cannot be unloaded while user-space
    daemons have an open reference on the associated file under /proc.
    
    Signed-off-by: Bruce Allan <bwa@us.ibm.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d013a068a5675ecd8e71f585a44e7af0798a4307
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Tue Sep 6 15:17:07 2005 -0700

    [PATCH] meye: use dma-mapping constants
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() This patch includes
    dma-mapping.h explicitly because it caused errors on some architectures
    otherwise.  See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for
    details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b30bbd963ac2606b0377b39c9d148d6eeef7dce
Author: Steven Pratt <slpratt@austin.ibm.com>
Date:   Tue Sep 6 15:17:06 2005 -0700

    [PATCH] readahead: reset cache_hit earlier
    
    We don't reset the cache hit count until after readahead does a successful
    readahead.  This seems to leave a corner case open where we miss in cache,
    but don't restart the readhead right away.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e139aa595c5d3bd01699530cbe017dec75fdb07f
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Sep 6 15:17:05 2005 -0700

    [PATCH] PNP: make pnp_dbg conditional directly on CONFIG_PNP_DEBUG
    
    Seems pointless to require .c files to test CONFIG_PNP_DEBUG and
    conditionally define DEBUG before including <linux/pnp.h>.  Just test
    CONFIG_PNP_DEBUG directly in pnp.h.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 486d46aefe7ded0d343e306be740edd972aff740
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Tue Sep 6 15:17:04 2005 -0700

    [PATCH] optimize writer path in time_interpolator_get_counter()
    
          Christoph Lameter <clameter@engr.sgi.com>
    
    When using a time interpolator that is susceptible to jitter there's
    potentially contention over a cmpxchg used to prevent time from going
    backwards.  This is unnecessary when the caller holds the xtime write
    seqlock as all readers will be blocked from returning until the write is
    complete.  We can therefore allow writers to insert a new value and exit
    rather than fight with CPUs who only hold a reader lock.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f4a6dce10941380ad7365cc9b0ef038ed56cbf9
Author: Stelian Pop <stelian@popies.net>
Date:   Tue Sep 6 15:17:03 2005 -0700

    [PATCH] sonypi: remove obsolete event
    
    Remove old obsolete event.
    
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2052c1676a39cae101a81f3da8a4ade8b668c88
Author: Erik Waling <erikw@acc.umu.se>
Date:   Tue Sep 6 15:17:02 2005 -0700

    [PATCH] sonypi SPIC initialisation fix
    
    Newer Sony VAIO models (VGN-S480, VGN-S460, VGN-S3XP etc) use a new method to
    initialize the SPIC device.  The new way to initialize (and disable) the
    device comes directly from the AML code in the _CRS, _SRS and _DIS methods
    from the DSDT table.  This patch adds support for the new models.
    
    Signed-off-by: Erik Waling <erikw@acc.umu.se>
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2865cf001878d22d5fd12e5215621dffbcad76dc
Author: Zhigang Huo <zghuo@ncic.ac.cn>
Date:   Tue Sep 6 15:17:00 2005 -0700

    [PATCH] remove pipe definitions
    
    These no longer have any users.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a10077708233becfbae7b0104e1e8c0569359aa7
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 15:16:59 2005 -0700

    [PATCH] move 68360serial.c over use initcalls
    
    this is the last serial driver not using initcalls.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: <jeff@uclinux.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 573fc113133e0b0984d2c0090e706c6506661f91
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 15:16:58 2005 -0700

    [PATCH] move m68k rtc drivers over to initcalls
    
    this gets rid of the last two explicit initializations in misc.c
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdb3826b9958c204bc8ffda2cf9bbe2d899ef90c
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 15:16:57 2005 -0700

    [PATCH] remove misleading comment above sys_brk
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edf83015fcbff8976b75b42b565a77e9d450c567
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 15:16:56 2005 -0700

    [PATCH] remove a dead extern in mem.c
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1d7ef70a71eb54fb389a9a411d331661be73056
Author: Avery, Brian <b.avery@hp.com>
Date:   Tue Sep 6 15:16:56 2005 -0700

    [PATCH] Add warning `init=' to init/main.c
    
    I passed init=/mylinuxrc to the kernel on the command line.  The kernel
    silently dropped down to exec /sbin/init.  It turned out that /mylinuxrc
    had improper permissions.  Without any warning message from the kernel that
    something was wrong it took awhile to find the issue.  The patch below adds
    a warning.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fc2751beb0941966d3a97b26544e8585e428c08
Author: Mark Bellon <mbellon@mvista.com>
Date:   Tue Sep 6 15:16:54 2005 -0700

    [PATCH] disk quotas fail when /etc/mtab is symlinked to /proc/mounts
    
    If /etc/mtab is a regular file all of the mount options (of a file system)
    are written to /etc/mtab by the mount command.  The quota tools look there
    for the quota strings for their operation.  If, however, /etc/mtab is a
    symlink to /proc/mounts (a "good thing" in some environments) the tools
    don't write anything - they assume the kernel will take care of things.
    
    While the quota options are sent down to the kernel via the mount system
    call and the file system codes handle them properly unfortunately there is
    no code to echo the quota strings into /proc/mounts and the quota tools
    fail in the symlink case.
    
    The attached patchs modify the EXT[2|3] and JFS codes to add the necessary
    hooks.  The show_options function of each file system in these patches
    currently deal with only those things that seemed related to quotas;
    especially in the EXT3 case more can be done (later?).
    
    Jan Kara also noted the difficulty in moving these changes above the FS
    codes responding similarly to myself to Andrew's comment about possible
    VFS migration. Issue summary:
    
     - FS codes have to process the entire string of options anyway.
    
     - Only FS codes that use quotas must have a show_options function (for
       quotas to work properly) however quotas are only used in a small number
       of FS.
    
     - Since most of the quota using FS support other options these FS codes
       should have the a show_options function to show those options - and the
       quota echoing becomes virtually negligible.
    
    Based on feedback I have modified my patches from the original:
    
       JFS a missing patch has been restored to the posting
       EXT[2|3] and JFS always use the show_options function
           - Each FS has at least one FS specific option displayed
           - QUOTA output is under a CONFIG_QUOTA ifdef
           - a follow-on patch will add a multitude of options for each FS
       EXT[2|3] and JFS "quota" is treated as "usrquota"
       EXT3 journalled data check for journalled quota removed
       EXT[2|3] mount when quota specified but not compiled in
    
     - no changes from my original patch.  I tested the patch and the codes
       warn but
    
     - still mount.  With all due respection I believe the comments
       otherwise were a
    
     - misread of the patch.  Please reread/test and comment.  XFS patch
       removed - the XFS team already made the necessary changes EXT3 mixing
       old and new quotas are handled differently (not purely exclusive)
    
     - if old and new quotas for the same type are used together the old
       type is silently depricated for compatability (e.g.  usrquota and
       usrjquota)
    
     - mixing of old and new quotas is an error (e.g.  usrjquota and
       grpquota)
    
    Signed-off-by: Mark Bellon <mbellon@mvista.com>
    Acked-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Cc: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c92371566ea505cf455c208cdfb89046b3db87de
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Tue Sep 6 15:16:52 2005 -0700

    [PATCH] Fix sound/arm/Makefile for locality of reference
    
    Ensure that sound/arm/Makefile is sanely organised so that additions to it
    don't break all other patches out there.  This means I only have to adjust
    the line numbers in my patch queue rather than having to re-generate by
    hand those which touch this file.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2822e7f00cdccbff8e507b5ebbddce1aa95eb5d
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Sep 6 15:16:51 2005 -0700

    [PATCH] pnp: consolidate kmalloc wrappers
    
    ISAPNP, PNPBIOS, and PNPACPI all had their own kmalloc wrappers that
    reimplemented kcalloc().  Remove the wrappers and just use kcalloc()
    directly.
    
    Note that this also removes the PNPBIOS error message when the kmalloc
    fails.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea2f1590aaffbd02f1850c19c3895ff4d092c6e0
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Tue Sep 6 15:16:50 2005 -0700

    [PATCH] yenta: make ToPIC95 bridges work with 16bit cards
    
    ToPIC95 brides (and maybe some other too) require to use the ExCA registers
    to power up the socket if a 16bit card is pluged.  allow socket drivers to
    set a flag so that yenta does just that.  also clean up yenta_get_status()
    a bit to use the new yenta_get_power() function.
    
    Side note: ToPIC97 bridges (at least in Rev.5 i have) don't require this.
    
    Ryan Underwood <nemesis-lists@icequake.net> said:
    
     According to the mail that David Hinds received from a Toshiba engineer,
     ToPIC95 and 97 do require this, and ToPIC100 does not.  Maybe you have a
     later revision.
    
     For all chips, 16-bit cards can be enabled through ExCA.  So doesn't it
     make sense just to make this the default behavior for all Toshiba chips,
     to avoid corner cases showing up later?
    
    Daniel responded:
    
     I disagree with ryan to change anything for topic97 bridges.  they work.
     and I couldn't find (read google) any report of a topic97 breaking on
     applying power with the CB registers.
    
     I'm having several toshba notebooks at work (and home) with topic95,97,100
     bridges.  Only the ones with a topic95 didn't work.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36d57ac4a818cb4aa3edbdf63ad2ebc31106f925
Author: H. J. Lu <hjl@lucon.org>
Date:   Tue Sep 6 15:16:49 2005 -0700

    [PATCH] auxiliary vector cleanups
    
    The size of auxiliary vector is fixed at 42 in linux/sched.h.  But it isn't
    very obvious when looking at linux/elf.h.  This patch adds AT_VECTOR_SIZE
    so that we can change it if necessary when a new vector is added.
    
    Because of include file ordering problems, doing this necessitated the
    extraction of the AT_* symbols into a standalone header file.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32605a18152b246df483fadc1c23854addde8755
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Tue Sep 6 15:16:48 2005 -0700

    [PATCH] radix_tag_get(): differentiate between no present node and tag unset cases
    
    Simple patch to radix_tree_tag_get() to return different values for non
    present node and tag unset.
    
    The function is not used by any in-kernel callers (yet), but this
    information is definitely useful.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 201b6264ff3865090747f58f48e087c3a35e0dbc
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Tue Sep 6 15:16:46 2005 -0700

    [PATCH] radix-tree: Remove unnecessary indirections and clean up code
    
    - There is frequent use of indirections in the radix code. This patch
      removes those indirections, makes the code more readable and allows
      the compilers to generate better code.
    
    - Removing indirections allows the removal of several casts.
    
    - Removing indirections allows the reduction of the radix_tree_path
      size from 3 to 2 words.
    
    - Use pathp-> consistently.
    
    - Remove unnecessary tmp variable in radix_tree_insert
    
    - Separate the upper layer processing from the lowest layer in __lookup()
      in order to make it easier to understand what is going on and allow
      compilers to generate better code for the loop.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 987132bb0b136c93cef5f195e7371bb98df64709
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Sep 6 15:16:45 2005 -0700

    [PATCH] Support powering sharp zaurus sl-5500 LCD up and down
    
    This adds support for powering Zaurus's video up and down.  PDA without
    screen is kind of useless, so it is quite important...  I'll have to figure
    out how to really control the frontlight, because LCD without that is quite
    hard to read.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2cf8e25ba4cf4e0881e612125858b4eed563ee4
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue Sep 6 15:16:44 2005 -0700

    [PATCH] Clean up the old digi support and rescue it
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5dd42c262bd742fa3602180bbe5550b4828de8f3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:16:43 2005 -0700

    [PATCH] remove register_ioctl32_conversion and unregister_ioctl32_conversion
    
    All users have been converted.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3676347a5e216a7fec7f8eedbbcf8bed6b9c4e40
Author: Peter Osterlund <petero2@telia.com>
Date:   Tue Sep 6 15:16:42 2005 -0700

    [PATCH] kill bio->bi_set
    
    Jens:
    
    ->bi_set is totally unnecessary bloat of struct bio.  Just define a proper
    destructor for the bio and it already knows what bio_set it belongs too.
    
    Peter:
    
    Fixed the bugs.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f00df24ee394f345a8789d3a2f98fc1d9195b9f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Sep 6 15:16:41 2005 -0700

    [PATCH] Strip local symbols from kallsyms
    
    Local symbols generated by gcc start with a `$'; no point in including them
    in the kernel.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 022a4a7bbdefdedc2706a13c81c832d8c3173c6d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Sep 6 15:16:41 2005 -0700

    [PATCH] fs/jbd/: cleanups
    
    This patch contains the following cleanups:
    - make needlessly global functions static
    - journal.c: remove the unused global function __journal_internal_check
                 and move the check to journal_init
    - remove the following write-only global variable:
      - journal.c: current_journal
    - remove the following unneeded EXPORT_SYMBOL:
      - journal.c: journal_recover
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Andreas Dilger <adilger@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202e5979af4d91c7ca05892641131dee22653259
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Sep 6 15:16:40 2005 -0700

    [PATCH] compat: be more consistent about [ug]id_t
    
    When I first wrote the compat layer patches, I was somewhat cavalier about
    the definition of compat_uid_t and compat_gid_t (or maybe I just
    misunderstood :-)).  This patch makes the compat types much more consistent
    with the types we are being compatible with and hopefully will fix a few
    bugs along the way.
    
    	compat type		type in compat arch
    	__compat_[ug]id_t	__kernel_[ug]id_t
    	__compat_[ug]id32_t	__kernel_[ug]id32_t
    	compat_[ug]id_t		[ug]id_t
    
    The difference is that compat_uid_t is always 32 bits (for the archs we
    care about) but __compat_uid_t may be 16 bits on some.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dbfc5cfdcac04d656f6f6789eb8fcdcc3d2dfda
Author: Bodo Eggert <7eggert@gmx.de>
Date:   Tue Sep 6 15:16:39 2005 -0700

    [PATCH] use select in sound/isa/Kconfig
    
    In sound/isa/Kconfig, select ISAPNP and depend on ISAPNP are intermixed,
    resulting in funny behaviour.  (Soundcarts get selectable if other
    soundcards are selected).
    
    This patch changes the "depend on ISAPNP"s to select.
    
    Signed-Off-By: Bodo Eggert <7eggert@gmx.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 820249bafe441dce5336ad544a5e709df42fceb5
Author: John McCutchan <ttb@tentacle.dhs.org>
Date:   Tue Sep 6 15:16:38 2005 -0700

    [PATCH] inotify speedup
    
    Bypass an inotify-related fastpath spinlock and several function calls on
    systems which have no inotify watches registered.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19306059cd7fedaf96b4b0260a9a8a45e513c857
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Tue Sep 6 15:16:35 2005 -0700

    [PATCH] NMI: Update NMI users of RCU to use new API
    
    Uses of RCU for dynamically changeable NMI handlers need to use the new
    rcu_dereference() and rcu_assign_pointer() facilities.  This change makes
    it clear that these uses are safe from a memory-barrier viewpoint, but the
    main purpose is to document exactly what operations are being protected by
    RCU.  This has been tested on x86 and x86-64, which are the only
    architectures affected by this change.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe21773d655c2c64641ec2cef499289ea175c817
Author: David Howells <dhowells@redhat.com>
Date:   Tue Sep 6 15:16:34 2005 -0700

    [PATCH] Provide better printk() support for SMP machines
    
    The attached patch prevents oopses interleaving with characters from
    other printks on other CPUs by only breaking the lock if the oops is
    happening on the machine holding the lock.
    
    It might be better if the oops generator got the lock and then called an
    inner vprintk routine that assumed the caller holds the lock, thus
    making oops reports "atomic".
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3d8c1414573be8cf7c8fdc1e076935697c7f6af
Author: Christoph Lameter <christoph@scalex86.org>
Date:   Tue Sep 6 15:16:33 2005 -0700

    [PATCH] More __read_mostly variables
    
    Move some more frequently read variables that showed up during some of our
    performance tests as sometimes ending up in hot cachelines to the
    read_mostly section.
    
    Fix: Move the __read_mostly from before hpet_usec_quotient to follow the
    variable like the other uses of __read_mostly.
    
    Signed-off-by: Alok N Kataria <alokk@calsoftinc.com>
    Signed-off-by: Christoph Lameter <christoph@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3dbb4ecd46767b621df3dedd28788da93ee0cac
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Tue Sep 6 15:16:31 2005 -0700

    [PATCH] kallsyms: change compression algorithm
    
    This patch changes the way the compression algorithm works.  The base
    algorithm is similiar to the previous but we force the compressed token
    size to 2.
    
    Having a fixed size compressed token allows for a lot of optimizations, and
    that in turn allows this code to run over *all* the symbols faster than it
    did before over just a subset.
    
    Having it work over all the symbols will make it behave better when symbols
    change positions between passes, and the "inconsistent kallsyms" messages
    should become less frequent.
    
    In my tests the compression ratio was degraded by about 0.5%, but the
    results will depend greatly on the number of symbols to compress.
    
    Signed-off-by: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e82894f84dbba130ab46c97748c03647f8204f92
Author: Tom Zanussi <zanussi@us.ibm.com>
Date:   Tue Sep 6 15:16:30 2005 -0700

    [PATCH] relayfs
    
    Here's the latest version of relayfs, against linux-2.6.11-mm2.  I'm hoping
    you'll consider putting this version back into your tree - the previous
    rounds of comment seem to have shaken out all the API issues and the number
    of comments on the code itself have also steadily dwindled.
    
    This patch is essentially the same as the relayfs redux part 5 patch, with
    some minor changes based on reviewer comments.  Thanks again to Pekka
    Enberg for those.  The patch size without documentation is now a little
    smaller at just over 40k.  Here's a detailed list of the changes:
    
    - removed the attribute_flags in relay open and changed it to a
      boolean specifying either overwrite or no-overwrite mode, and removed
      everything referencing the attribute flags.
    - added a check for NULL names in relayfs_create_entry()
    - got rid of the unnecessary multiple labels in relay_create_buf()
    - some minor simplification of relay_alloc_buf() which got rid of a
      couple params
    - updated the Documentation
    
    In addition, this version (through code contained in the relay-apps tarball
    linked to below, not as part of the relayfs patch) tries to make it as easy
    as possible to create the cooperating kernel/user pieces of a typical and
    common type of logging application, one where kernel logging is kicked off
    when a user space data collection app starts and stops when the collection
    app exits, with the data being automatically logged to disk in between.  To
    create this type of application, you basically just include a header file
    (relay-app.h, included in the relay-apps tarball) in your kernel module,
    define a couple of callbacks and call an initialization function, and on
    the user side call a single function that sets up and continuously monitors
    the buffers, and writes data to files as it becomes available.  Channels
    are created when the collection app is started and destroyed when it exits,
    not when the kernel module is inserted, so different channel buffer sizes
    can be specified for each separate run via command-line options.  See the
    README in the relay-apps tarball for details.
    
    Also included in the relay-apps tarball are a couple examples
    demonstrating how you can use this to create quick and dirty kernel
    logging/debugging applications.  They are:
    
    - tprintk, short for 'tee printk', which temporarily puts a kprobe on
      printk() and writes a duplicate stream of printk output to a relayfs
      channel.  This could be used anywhere there's printk() debugging code
      in the kernel which you'd like to exercise, but would rather not have
      your system logs cluttered with debugging junk.  You'd probably want
      to kill klogd while you do this, otherwise there wouldn't be much
      point (since putting a kprobe on printk() doesn't change the output
      of printk()).  I've used this method to temporarily divert the packet
      logging output of the iptables LOG target from the system logs to
      relayfs files instead, for instance.
    
    - klog, which just provides a printk-like formatted logging function
      on top of relayfs.  Again, you can use this to keep stuff out of your
      system logs if used in place of printk.
    
    The example applications can be found here:
    
    http://prdownloads.sourceforge.net/dprobes/relay-apps.tar.gz?download
    
    From: Christoph Hellwig <hch@lst.de>
    
      avoid lookup_hash usage in relayfs
    
    Signed-off-by: Tom Zanussi <zanussi@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8446f1d391f3d27e6bf9c43d4cbcdac0ca720417
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Sep 6 15:16:27 2005 -0700

    [PATCH] detect soft lockups
    
    This patch adds a new kernel debug feature: CONFIG_DETECT_SOFTLOCKUP.
    
    When enabled then per-CPU watchdog threads are started, which try to run
    once per second.  If they get delayed for more than 10 seconds then a
    callback from the timer interrupt detects this condition and prints out a
    warning message and a stack dump (once per lockup incident).  The feature
    is otherwise non-intrusive, it doesnt try to unlock the box in any way, it
    only gets the debug info out, automatically, and on all CPUs affected by
    the lockup.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4732efbeb997189d9f9b04708dc26bf8613ed721
Author: Jakub Jelinek <jakub@redhat.com>
Date:   Tue Sep 6 15:16:25 2005 -0700

    [PATCH] FUTEX_WAKE_OP: pthread_cond_signal() speedup
    
    ATM pthread_cond_signal is unnecessarily slow, because it wakes one waiter
    (which at least on UP usually means an immediate context switch to one of
    the waiter threads).  This waiter wakes up and after a few instructions it
    attempts to acquire the cv internal lock, but that lock is still held by
    the thread calling pthread_cond_signal.  So it goes to sleep and eventually
    the signalling thread is scheduled in, unlocks the internal lock and wakes
    the waiter again.
    
    Now, before 2003-09-21 NPTL was using FUTEX_REQUEUE in pthread_cond_signal
    to avoid this performance issue, but it was removed when locks were
    redesigned to the 3 state scheme (unlocked, locked uncontended, locked
    contended).
    
    Following scenario shows why simply using FUTEX_REQUEUE in
    pthread_cond_signal together with using lll_mutex_unlock_force in place of
    lll_mutex_unlock is not enough and probably why it has been disabled at
    that time:
    
    The number is value in cv->__data.__lock.
            thr1            thr2            thr3
    0       pthread_cond_wait
    1       lll_mutex_lock (cv->__data.__lock)
    0       lll_mutex_unlock (cv->__data.__lock)
    0       lll_futex_wait (&cv->__data.__futex, futexval)
    0                       pthread_cond_signal
    1                       lll_mutex_lock (cv->__data.__lock)
    1                                       pthread_cond_signal
    2                                       lll_mutex_lock (cv->__data.__lock)
    2                                         lll_futex_wait (&cv->__data.__lock, 2)
    2                       lll_futex_requeue (&cv->__data.__futex, 0, 1, &cv->__data.__lock)
                              # FUTEX_REQUEUE, not FUTEX_CMP_REQUEUE
    2                       lll_mutex_unlock_force (cv->__data.__lock)
    0                         cv->__data.__lock = 0
    0                         lll_futex_wake (&cv->__data.__lock, 1)
    1       lll_mutex_lock (cv->__data.__lock)
    0       lll_mutex_unlock (cv->__data.__lock)
              # Here, lll_mutex_unlock doesn't know there are threads waiting
              # on the internal cv's lock
    
    Now, I believe it is possible to use FUTEX_REQUEUE in pthread_cond_signal,
    but it will cost us not one, but 2 extra syscalls and, what's worse, one of
    these extra syscalls will be done for every single waiting loop in
    pthread_cond_*wait.
    
    We would need to use lll_mutex_unlock_force in pthread_cond_signal after
    requeue and lll_mutex_cond_lock in pthread_cond_*wait after lll_futex_wait.
    
    Another alternative is to do the unlocking pthread_cond_signal needs to do
    (the lock can't be unlocked before lll_futex_wake, as that is racy) in the
    kernel.
    
    I have implemented both variants, futex-requeue-glibc.patch is the first
    one and futex-wake_op{,-glibc}.patch is the unlocking inside of the kernel.
     The kernel interface allows userland to specify how exactly an unlocking
    operation should look like (some atomic arithmetic operation with optional
    constant argument and comparison of the previous futex value with another
    constant).
    
    It has been implemented just for ppc*, x86_64 and i?86, for other
    architectures I'm including just a stub header which can be used as a
    starting point by maintainers to write support for their arches and ATM
    will just return -ENOSYS for FUTEX_WAKE_OP.  The requeue patch has been
    (lightly) tested just on x86_64, the wake_op patch on ppc64 kernel running
    32-bit and 64-bit NPTL and x86_64 kernel running 32-bit and 64-bit NPTL.
    
    With the following benchmark on UP x86-64 I get:
    
    for i in nptl-orig nptl-requeue nptl-wake_op; do echo time elf/ld.so --library-path .:$i /tmp/bench; \
    for j in 1 2; do echo ( time elf/ld.so --library-path .:$i /tmp/bench ) 2>&1; done; done
    time elf/ld.so --library-path .:nptl-orig /tmp/bench
    real 0m0.655s user 0m0.253s sys 0m0.403s
    real 0m0.657s user 0m0.269s sys 0m0.388s
    time elf/ld.so --library-path .:nptl-requeue /tmp/bench
    real 0m0.496s user 0m0.225s sys 0m0.271s
    real 0m0.531s user 0m0.242s sys 0m0.288s
    time elf/ld.so --library-path .:nptl-wake_op /tmp/bench
    real 0m0.380s user 0m0.176s sys 0m0.204s
    real 0m0.382s user 0m0.175s sys 0m0.207s
    
    The benchmark is at:
    http://sourceware.org/ml/libc-alpha/2005-03/txt00001.txt
    Older futex-requeue-glibc.patch version is at:
    http://sourceware.org/ml/libc-alpha/2005-03/txt00002.txt
    Older futex-wake_op-glibc.patch version is at:
    http://sourceware.org/ml/libc-alpha/2005-03/txt00003.txt
    Will post a new version (just x86-64 fixes so that the patch
    applies against pthread_cond_signal.S) to libc-hacker ml soon.
    
    Attached is the kernel FUTEX_WAKE_OP patch as well as a simple-minded
    testcase that will not test the atomicity of the operation, but at least
    check if the threads that should have been woken up are woken up and
    whether the arithmetic operation in the kernel gave the expected results.
    
    Acked-by: Ingo Molnar <mingo@redhat.com>
    Cc: Ulrich Drepper <drepper@redhat.com>
    Cc: Jamie Lokier <jamie@shareable.org>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b039e681b8c5f30aac9cc04385cc94be45d0823
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Sep 6 15:16:22 2005 -0700

    [PATCH] 3c59x PM fixes
    
    This patch adds some missing pci-related calls to the suspend and resume
    routines of the 3c59x driver.  It also makes the driver free/request IRQ on
    suspend/resume, in accordance with the proposal at:
    http://lists.osdl.org/pipermail/linux-pm/2005-May/000955.html
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7ae79c72d072e3208c18ff2dc402a69229b7b1b
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Sep 6 15:16:21 2005 -0700

    [PATCH] swsusp: update documentation
    
    This updates documentation a bit (mostly removing obsolete stuff), and
    marks swsusp as no longer experimental in config.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48c8b1134249432318c8e5d19adc37c45242c4b1
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Sep 6 15:16:20 2005 -0700

    [PATCH] x86_64: Fix off by one in e820_mapped
    
    This allows a valid iommu placed immediately after memory to work, to be
    recognized as after the last byte of memory and not overlapping it.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a888cebe17e39476e5ca18c3a4bd96c6775070db
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Sep 6 15:16:19 2005 -0700

    [PATCH] x86_64: create sysfs entries for cpu only for present cpus
    
    Need to create sysfs only for cpus that are present.  Without which we see
    NR_CPUS entries created when we have CONFIG_HOTPLUG and CONFIG_HOTPLUG_CPU
    enabled.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c2b9d5c035f5a82c9c4ba717984d04838a0701e
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Sep 6 15:16:18 2005 -0700

    [PATCH] x86_64: Fix cluster mode send_IPI_allbutself to use get_cpu()/put_cpu()
    
    Need to ensure we dont get prempted when we clear ourself from mask when using
    clustered mode genapic code.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19aaabb5841439988fc357f90d5c59d28fa84658
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 6 15:16:17 2005 -0700

    [PATCH] x86_64: prefetchw() can fall back to prefetch() if !3DNOW
    
    This is a multi-part message in MIME format.  If the cpu lacks 3DNOW
    feature, we can use a normal prefetcht0 instruction instead of NOP5.
    "prefetchw (%rxx)" and "prefetcht0 (%rxx)" have the same length, ranging
    from 3 to 5 bytes depending on the register.  So this patch even helps
    AMD64, shortening the length of the code.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c078d3266e58a3edd698b9f143f78fc585679031
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Tue Sep 6 15:16:16 2005 -0700

    [PATCH] x86_64: print processor number in show_regs
    
    Up to date I've been using the GS value to determine the processor number
    in dumps from show_regs, however this can be cumbersome to do if you don't
    have the vmlinux to verify with the address of cpu_pda, how about the
    following?  I considered using hard_smp_processor_id for robustness but we
    already dereference current so we're already relying on MSR_GS_BASE being
    sane.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54d5d42404e7705cf3804593189e963350d470e5
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Sep 6 15:16:15 2005 -0700

    [PATCH] x86/x86_64: deferred handling of writes to /proc/irqxx/smp_affinity
    
    When handling writes to /proc/irq, current code is re-programming rte
    entries directly. This is not recommended and could potentially cause
    chipset's to lockup, or cause missing interrupts.
    
    CONFIG_IRQ_BALANCE does this correctly, where it re-programs only when the
    interrupt is pending. The same needs to be done for /proc/irq handling as well.
    Otherwise user space irq balancers are really not doing the right thing.
    
    - Changed pending_irq_balance_cpumask to pending_irq_migrate_cpumask for
      lack of a generic name.
    - added move_irq out of IRQ_BALANCE, and added this same to X86_64
    - Added new proc handler for write, so we can do deferred write at irq
      handling time.
    - Display of /proc/irq/XX/smp_affinity used to display CPU_MASKALL, instead
      it now shows only active cpu masks, or exactly what was set.
    - Provided a common move_irq implementation, instead of duplicating
      when using generic irq framework.
    
    Tested on i386/x86_64 and ia64 with CONFIG_PCI_MSI turned on and off.
    Tested UP builds as well.
    
    MSI testing: tbd: I have cards, need to look for a x-over cable, although I
    did test an earlier version of this patch.  Will test in a couple days.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Acked-by: Zwane Mwaikambo <zwane@holomorphy.com>
    Grudgingly-acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f63ed39c578a2a2d067356a85ce7c28a7c795d8a
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Tue Sep 6 15:16:14 2005 -0700

    [PATCH] ppc32: add missing sysfs node for ocp_func_emac_data.phy_feat_exc
    
    Add sysfs node for ocp_func_emac_data.phy_feat_exc field.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 842363ff5fd79ce75c311175ea832901e2b2d40e
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Tue Sep 6 15:16:13 2005 -0700

    [PATCH] ppc32: fix ocp_device_suspend to use pm_message_t instead of u32
    
    Recent "u32 -> pm_message_t" change triggered hidden bug in
    ocp_device_suspend.  Fix it to correctly use pm_message_t instead of u32.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9799e4d39a7e2763a614084f6ae6cc936047de70
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed Sep 7 14:08:18 2005 +0900

    [IA64] Minor cleanups - remove unnecessary function prototype in iosapic.h
    
    The function prototypes for iosapic_enable_intr() and
    iosapic_pci_fixup() in include/asm-ia64/iosapic.h are no longer
    needed. This patch removes them. The original patch has been posted by
    Satoru Takeuchi.
    
    Signed-off-by: Satoru Takeuchi <takeuchi_satoru@jp.fujitsu.com>
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 697eaad417f9f2e40f62282e8b396208b72990cf
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed Sep 7 14:06:25 2005 +0900

    [IA64] Minor cleanups - remove CONFIG_ACPI_DEALLOCATE_IRQ
    
    The config option 'CONFIG_ACPI_DEALLOCATE_IRQ' is no longer
    needed. This patch removes it.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a52ac87eb249f5e87f43e1a0adeb1a737f4a2b43
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed Sep 7 14:04:14 2005 +0900

    [IA64] Minor cleanups - remove unnecessary function prototype in irq.h
    
    The function prototype for handl_IRQ_event() in include/asm-ia64/irq.h
    is no longer needed. This patch removes it.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 02326223247c773bc007629d54622d750c0371c1
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Wed Sep 7 01:00:37 2005 -0700

    [IA64] minor performance tune-up in ia64_switch_to
    
    The reenabling of psr.ic should really belong to dtr mapping code block.
    It make the fall through code fast since it doesn't need to execute the
    predicated-off instruction.  Logically make more sense as well since psr.ic
    was turned off in .map code block.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 66172d259b816cbb65878a05d30771935a6928e8
Author: Max Asbock <masbock@us.ibm.com>
Date:   Wed Sep 7 21:37:00 2005 +0100

    [SERIAL] Update ibmasm driver for death of register_serial&co
    
    Signed-off-by: Max Asbock <masbock@us.ibm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 17781cd6186cb3472ff34b2d9a15e647bd311e8b
Author: James Lentini <jlentini@netapp.com>
Date:   Wed Sep 7 12:43:08 2005 -0700

    [PATCH] IB: clean up user access config options
    
    Add a new config option INFINIBAND_USER_MAD to control whether we
    build ib_umad.  Change INFINIBAND_USER_VERBS to INFINIBAND_USER_ACCESS,
    and have it control ib_ucm and ib_uat as well as ib_uverbs.
    
    Signed-off-by: James Lentini <jlentini@netapp.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b5dcbf47e10e568273213a4410daa27c11cdba3a
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Wed Sep 7 11:03:41 2005 -0700

    [PATCH] IB: RMPP fixes
    
    - Fix payload length of middle RMPP sent segments. Middle payload
      lengths should be 0 on the send side.
    
      (This is perhaps a compliance and should not be an interop issue as
      middle payload lengths are supposed to be ignored on receive).
    
    - Fix length in first segment of multipacket sends
    
      (This is a compliance issue but does not affect at least OpenIB to
      OpenIB RMPP transfers).
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 30a7e8ef13b2ff0db7b15af9afdd12b93783f01e
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Sep 7 09:45:00 2005 -0700

    [PATCH] IB: Initialize qp->wait
    
    Add missing call to init_waitqueue_head().
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c9fe2b3287498b80781284306064104ef9c8a31a
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Sep 7 09:43:23 2005 -0700

    [PATCH] IB: really reset QPs
    
    When we modify a QP to the RESET state, completely clean up the QP
    so that it is really and truly reset.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 0b2b35f68140ceeb1b78ef85680198e63ebc8649
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Sep 1 09:28:03 2005 -0700

    [PATCH] IB: Add user-supplied context to userspace CM ABI
    
    - Add user specified context to all uCM events.  Users will not retrieve
      any events associated with the context after destroying the corresponding
      cm_id.
    - Provide the ib_cm_init_qp_attr() call to userspace clients of the CM.
      This call may be used to set QP attributes properly before modifying the QP.
    - Fixes some error handling synchonization and cleanup issues.
    - Performs some minor code cleanup.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1d6801f9dd3ebb054ae685153a01b1a4ec817f46
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Thu Sep 1 09:19:44 2005 -0700

    [PATCH] IB/sa_query: avoid unnecessary list scan
    
    Using ib_get_client_data in SA event handler performs a list scan.
    It's better to use container_of to get the sa device directly.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 06c56e44f3e32a859420ecac97996cc6f12827bb
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Thu Sep 1 09:19:02 2005 -0700

    [PATCH] IPoIB: fix memory leak
    
    Fix IPoIB memory leak on device removal.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit bafa49cc1b800df4748b29e2b038ff029d7c8747
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Sep 7 17:24:48 2005 +0100

    [ARM] 2884/1: BAST - fix PC104 IRQ routing
    
    Patch from Ben Dooks
    
    This has been broken for a while now, so fix the
    problems with the code, test and bring up to date.
    This also makes the code conditional on an
    Kconfig option
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7691d931aa55409ae3339d541ec0b87ab0a2adae
Author: Adam Brooks <adam.j.brooks@gmail.com>
Date:   Wed Sep 7 17:24:36 2005 +0100

    [ARM] 2871/1: Fixes an issue with gettimeofday not working correctly on Intel IOP3xx processors
    
    Patch from Adam Brooks
    
    The current gettimeofday implementation for the IOP3xx processors reads the contents of the timer interrupt register and does math on the value to figure out exactly what time it is.  To do this it  multiplies the contents of the timer register with a large constant.  The result is then divided by a large constant.  Unfortunately the result of the first multiplication is often too large for the register to hold.  The solution is to combine the two large constants to a single smaller constant at compile time.  Then the timer value can be divided by single smaller constant without any overflow issues.
    
    Signed-off-by: Adam Brooks <adam.j.brooks@intel.com>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fd6480f27e38f86ddea78eb5b46db249dfd09f17
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Sep 7 17:24:35 2005 +0100

    [ARM] 2883/1: PXA Sharpsl: Add detection of new PXA based Zaurii machine types
    
    Patch from Richard Purdie
    
    Add machine detection routines for several new models of PXA based Zaurii
    (SL-C3000 - Spitz, SL-C1000 - Akita, SL-C3100 - Borzoi, SL-C6000 - Tosa).
    Sharp continue to use broken bootloaders in ROM.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7dfe508a821adf180beafa29761b4a303536d67b
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Sep 7 17:20:28 2005 +0100

    [ARM] 2880/1: OMAP 4/4: Update H2 defconfig
    
    Patch from Tony Lindgren
    
    This patch updates H2 defconfig
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9839c6b8dd414612be0b6a70c4aa06eaca5b7652
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Sep 7 17:20:27 2005 +0100

    [ARM] 2888/1: OMAP 3/4: Update omap include files, take 2
    
    Patch from Tony Lindgren
    
    This patch syncs the mainline kernel with linux-omap tree.
    The highlights of the patch are:
    - Start adding 24xx support by Paul Mundt
    - Clean-up of cpu detection by Dirk Behme and Tony Lindgren
    - Add DSP header by Toshihiro Kobayashi
    - Add support for mtd-xip by Vladimir Barinov
    - Add various new mux registers
    - Move OMAP specific serial defines back to serial.h
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 92105bb70634abacc08bbe12bf6f888fbd7dad38
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Sep 7 17:20:26 2005 +0100

    [ARM] 2887/1: OMAP 2/4: Update files common to omap1 and omap2, take 2
    
    Patch from Tony Lindgren
    
    This patch syncs the mainline kernel with linux-omap tree.
    The highlights of the patch are:
    - Clock updates by Tuukka Tikkanen, Juha Yrjola,
      Daniel Petrini and Tony Lindgren
    - DMA fixes by Imre Deak, Juha Yrjola and Daniel Petrini
    - Add support to dual-mode hardware timers by Lauri Leukkunen
    - GPIO support for 24xx by Paul Mundt
    - GPIO wake-up support by Tony Lindgren
    - Better GPIO interrupt handler to not lose interrupts by
      Ralph Walden and Ladislav Michl
    - Power Management updates by Tuukka Tikkanen
    - Make Power Management code use new SRAM functions by
      Tony Lindgren
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 295bd89279aad6959f0d363ee8e946d4766f9ad8
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Tue Sep 6 16:05:23 2005 -0700

    [IA64] make exception handler in copy_user more robust
    
    The exception handler in copy user always expects fault occurs only on
    user space address and the fall back recovery code is written with that
    very assumption in mind.  Recent source code inspection revealed that
    while it worked splendid and to the expectation under normal circumstances,
    It broke down under unexpected condition where some address calculation
    might go outside the legal address range the original copy_user was
    called for.  This patch is to make copy_user exception handler more robust
    and to prevent potential memory corruption.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7efb833d645d10258e32664404354d26cf6070e3
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Sep 7 11:49:23 2005 +0100

    [ARM] 2889/1: S3C2410 - Add machine Anubis
    
    Patch from Ben Dooks
    
    Add the Simtec Anubis to the list of supported
    machines in the arch/arm/mach-s3c2410 directory.
    This ensures the core peripherals are registered,
    the timer source is configured and the correct
    power-management is enabled.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca20aa6954bcb4537064a1bf5e8f74af57da2a03
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Sep 7 02:05:59 2005 -0400

    [libata sata_mv] fix build
    
    This function will go away when pci_intx() finally makes it
    into the core PCI layer.

commit 20f733e7d75a16bffc34842b7682c9247dd5f954
Author: Brett Russ <russb@emc.com>
Date:   Thu Sep 1 18:26:17 2005 -0400

    [PATCH] libata: Marvell SATA support (PIO mode)
    
    This is my libata compatible low level driver for the Marvell SATA
    family.  Currently it successfully runs in PIO mode on a 6081 chip.
    EDMA support is in the works and should be done shortly.  Review,
    testing (especially on other flavors of Marvell), comments welcome.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7da79312830e6d9b3f6ee06b86c3a35caba2f6e7
Author: Brett Russ <russb@emc.com>
Date:   Thu Sep 1 21:53:34 2005 -0400

    [PATCH] libata: fix pio_mask values (take 2)
    
    ata_get_mode_mask() uses bits 3 and 4 in the pio_mask to represent PIO
    modes 3 and 4.  The value read from the drive, which reports support
    for PIO3 and PIO4 in bits 0 and 1, is shifted left by 3 bits and OR'd
    with 0x7 (which then corresponds to PIO 2-0 in libata).  Thus, the
    drivers below need adjustments to comply with the way pio_mask is
    used.  I changed the masks from the commented values to all support
    PIO4-0, since the spec mandates that PIO0-2 are supported and there's
    no reason not to support PIO3 IMO.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 344babaa9d39b10b85cadec4e5335d43b52b4ec0
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Sep 7 01:15:17 2005 -0400

    [kernel-doc] fix various DocBook build problems/warnings
    
    Most serious is fixing include/sound/pcm.h, which breaks the DocBook
    build.
    
    The other stuff is just filling in things that cause warnings.

commit 0edd5b44913cd0aba6f23b626b407f70bb3fb018
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Sep 7 00:48:31 2005 -0400

    [wireless ieee80211,ipw2200] Lindent source code
    
    No code changes, just Lindent + manual fixups.
    
    This prepares us for updating to the latest Intel driver code, plus
    gives the source code a nice facelift.

commit bbeec90b98a3066f6f2b8d41c80561f5665e4631
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Sep 7 00:27:54 2005 -0400

    [wireless] build fixes after merging WE-19

commit 09bbe1043a65903c93f6b6df123e36e3584bfac7
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 6 20:12:15 2005 -0700

    [SPARC64]: Fix set/get MTU cases in sunos_ioctl()
    
    Need to use compat struct sizes and compat_sys_ioctl().
    Reported by Adrian Bunk via kernel bugzilla #2683
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 832079d29a781ddf89467662ab4b540f0c1e668a
Author: Max Kellermann <max@duempel.org>
Date:   Tue Sep 6 20:04:59 2005 -0700

    [SUNRPC]: print unsigned integers in stats
    
    From: Max Kellermann <max@duempel.org>
    
    The sunrpc stats are collected in unsigned integers, but they are printed
    with '%d'.  That can result in negative numbers in /proc/net/rpc when the
    highest bit of a counter is set.  The following patch changes '%d' to '%u'
    where appropriate.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6bb15a0c485fbdd3d161da54fd29f4f15e1b070
Author: Pieter Dejaeghere <pieter@dejaeghere.net>
Date:   Tue Sep 6 19:54:48 2005 -0700

    [ARCNET]: Fix return value from arcnet_send_packet().
    
    From: Pieter Dejaeghere <pieter@dejaeghere.net>
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0a3f4358ac6283fe3a565183eaf9716de28b6fd0
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 19:47:50 2005 -0700

    [NET]: proto_unregister: fix sleeping while atomic
    
    proto_unregister holds a lock while calling kmem_cache_destroy, which
    can sleep.
    
    Noticed by Daniele Orlandi <daniele@orlandi.com>.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e345d5ef6d476cc236f64d90d9528143a70745c8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 25 06:24:21 2005 +0100

    [PATCH] lvalues abuse in lance
    
    result of comma operator is not an lvalue
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ce6623c3d8f932a15306355a7c9a0cdfdd6a26ec
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:45:10 2005 -0700

    [PATCH] airo : WE-19 support
    
    	Dan Williams already included most parts of my WE-19 patch for
    the airo driver in the kernel. There was just a few bits he could not
    do because WE-19 itself was not in the kernel. Those are the missing
    bits.
            Tested with 2.6.13 (with real HW).
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 61bd49631474c8763676a6ac72461cb523ddb78a
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:42:56 2005 -0700

    [PATCH] prism54 : WE-17 support
    
    	My patch that adds WE-17 support to the Prism54 driver went
    already in the kernel, except for a tiny bit that was dropped on the
    way. This is the missing bit....
    	Tested with 2.6.13 (with real HW).
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 00b309f561e9746fd6ac9598c4203c6610fcb26c
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:37:38 2005 -0700

    [PATCH] wl3501_cs : WE-17 support
    
    	wl3501_cs won't compile with WE-19. This patches fixes it.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Acked-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 72f98d38a890822cf547f94c8fbdef591b082ec2
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:36:00 2005 -0700

    [PATCH] atmel_cs : WE-17 support
    
    	This adds support for WE-17 to the atmel_cs driver. Not
    tested, I don't have the HW.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 62337dd54bad660258d44c89754721f60283ea84
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:39:02 2005 -0700

    [PATCH] iw263_netwave_we17.diff
    
            This adds support for WE-17 to the netwave_cs driver. Tested
    with 2.6.13 (with real HW).
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3d5d5ac085c467f05cce85d32985e78912db4a7e
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:40:39 2005 -0700

    [PATCH] ray_cs : WE-17 support
    
            This adds support for WE-17 to the ray_cs driver. Tested
    with 2.6.13 (with real HW).
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6582c164f2b3b6e58d1f13c1c031b19ee691eb14
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Sep 2 11:32:28 2005 -0700

    [PATCH] WE-19 for kernel 2.6.13
    
    	Hi Jeff,
    
    	This is version 19 of the Wireless Extensions. It was supposed
    to be the fallback of the WPA API changes, but people seem quite happy
    about it (especially Jouni), so the patch is rather small.
    	The patch has been fully tested with 2.6.13 and various
    wireless drivers, and is in its final version. Would you mind pushing
    that into Linus's kernel so that the driver and the apps can take
    advantage ot it ?
    
    	It includes :
    	o iwstat improvement (explicit dBm). This is the result of
    long discussions with Dan Williams, the authors of
    NetworkManager. Thanks to him for all the fruitful feedback.
    	o remove pointer from event stream. I was not totally sure if
    this pointer was 32-64 bits clean, so I'd rather remove it and be at
    peace with it.
    	o remove linux header from wireless.h. This has long been
    requested by people writting user space apps, now it's done, and it
    was not even painful.
    	o final deprecation of spy_offset. You did not like it, it's
    now gone for good.
    	o Start deprecating dev->get_wireless_stats -> debloat netdev
    	o Add "check" version of event macros for ieee802.11
    stack. Jiri Benc doesn't like the current macros, we aim to please ;-)
    	All those changes, except the last one, have been bit-roting on
    my web pages for a while...
    
    	Patches for most kernel drivers will follow. Patches for the
    Orinoco and the HostAP drivers have been sent to their respective
    maintainers.
    
    	Have fun...
    
    	Jean
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 054034dbf5b1a6aef800af4eb22d421d1c7d4b6d
Author: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
Date:   Tue Sep 6 19:30:55 2005 -0700

    [PATCH] net: fix bonding with spider_net
    
    Another small update for the spidernet driver to fix a bug encountered
    during testing our latest hardware with dual-ethernet support.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 543cec517dbc07c7c801ccacd02141d99f09f756
Author: Jens Osterkamp <osterkam@de.ibm.com>
Date:   Tue Sep 6 19:30:54 2005 -0700

    [PATCH] net: update the spider_net driver
    
    - Prevent PCI posting problems by using synchronous register access
      in critical places
    
    - Check return value from firmware device tree functions
    
    - fix device cleanup
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit aaec0fab5f8809fe1509fdc204e769bb35ebe41a
Author: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
Date:   Mon Sep 5 15:19:29 2005 -0700

    [PATCH] net: add driver for the NIC on Cell Blades
    
    This patch adds a driver for a new 1000 Mbit ethernet NIC.  It is
    integrated on the south bridge that is used for our Cell Blades.
    
    The code gets the MAC address from the Open Firmware device tree, so it
    won't compile on platforms other than ppc64.
    
    This is the first public release, so I don't expect the first version to
    get merged, but I'd aim for integration within the 2.6.13 time frame.
    
    Cc: Utz Bacher <utz.bacher@de.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 25097d4bda4a554d8b4a9989c7d8bcb67ef53f48
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 01:36:58 2005 +0100

    [PATCH] __user annotations (forcedeth.c)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 269cd3819cf1cc20f9567c4920b59c15751076d3
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Sep 6 10:39:38 2005 +1000

    [PATCH] iseries_veth: Update copyright notice
    
    My overlords have asked me to update the copyright notice for iseries_veth.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 43fece7b8ba005b7d6a98186c48c577156a25623
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 01:36:58 2005 +0100

    [PATCH] missed s/u32/pm_message_t/ (dm9000)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5ac90037c8ea428bbf7c5ce383a63a05d05ec763
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 6 01:36:58 2005 +0100

    [PATCH] iomem annotations (ac3200.c)
    
    no need to mess with (wrong) casts for ->mem_start, when we have the
    original iomem pointer used to set ->mem_start in the first place...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8e84c801bad50d2e0e9f802610d2c13f8d342230
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Tue Sep 6 15:03:09 2005 +0200

    [PATCH] s390: claw driver fixes
    
    [patch 1/4] s390: claw driver fixes
    
    From: Andy Richter <richtera@us.ibm.com>
    	- change memory allocation and move dbf from proc to debugfs
    	- use dev_kfree_skb_any instead of dev_kfree_skb_irq
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    
    diffstat:
     claw.c |   20 ++++++++++----------
     1 files changed, 10 insertions(+), 10 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 776bd20fa25fd8fc71fd4a2f213c106d6868db39
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Tue Sep 6 21:36:56 2005 -0700

    [PATCH] S2io: Hardware and miscellaneous fixes
    
    Hi,
    This patch contains the following hardware related fixes and other
    miscellaneous bug fixes.
    
    1. Updated the definition of single and double-bit ECC errors
    2. Earlier we were allocating Transmit descriptors equal to
       MAX_SKB_FRAGS. This was causing a boundary condition failure.
       Need to allocate MAX_SKB_FRAGS+1 descriptors.
    3. On some platforms(like PPC), pci_alloc_consistent() can return
       a zero DMA address. Since the NIC cannot handle zero-addresses,
       a workaround has been provided. Basically, we don't use such
       that page. We reallocate.
    4. If list_info allocation failed during driver load, check for
       it during driver exit and return instead of trying to dereference
       NULL pointer.
    5. Increase the debug level of few non-critical debug messages.
    6. Reset the card on critical ECC double errors only in case of
       XframeI since XframeII can recover from such errors.
    7. Print copyright message on driver load.
    8. Bumped up the driver version no. to 2.0.8.1
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 63028aa7f581d9d4e6889f9dc06ded2534250a76
Author: Kiyoshi Ueda <k-ueda@ct.jp.nec.com>
Date:   Wed Aug 24 18:03:43 2005 -0400

    [IA64] page_not_present fault in region 5 is normal
    
    When copying data from user-space to kernel-space by __copy_user(),
    a page_not_present fault sometimes occurs at vmalloced kernel address
    because of VHPT pre-fetching.
    
    Ignore the page_not_present fault in ia64_do_page_fault() before
    jumping into exception handlers.
    
    Signed-off-by: Kiyoshi Ueda <k-ueda@ct.jp.nec.com>
    Signed-off-by: Jun'ichi Nomura <j-nomura@ce.jp.nec.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 17fa53da1239b8712c5cebbd72a74c713b6c2db9
Merge: 3173d8c... fe1b2d5...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Tue Sep 6 17:52:54 2005 -0500

    Merge by hand (conflicts in sd.c)

commit 48bc41a49c4f3aa760dff84e7f71437f5ed520fe
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Sep 6 15:51:48 2005 -0700

    [IPV4]: Reassembly trim not clearing CHECKSUM_HW
    
    This was found by inspection while looking for checksum problems
    with the skge driver that sets CHECKSUM_HW. It did not fix the
    problem, but it looks like it is needed.
    
    If IP reassembly is trimming an overlapping fragment, it
    should reset (or adjust) the hardware checksum flag on the skb.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f75268cd6cbd24e6c70ff1390f4de5d0bb618539
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Sep 6 15:49:39 2005 -0700

    [AX25]: Make ax2asc thread-proof
    
    Ax2asc was still using a static buffer for all invocations which isn't
    exactly SMP-safe.  Change ax2asc to take an additional result buffer as
    the argument.  Change all callers to provide such a buffer.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f2c383988d68c91a7d474b7cf26c0a2df49bbafe
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Sep 6 15:48:03 2005 -0700

    [NET]: skb_get/set_timestamp use const
    
    The new timestamp get/set routines should have const attribute
    on parameters (helps to indicate direction).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 513c25000005257e5474f261bf27d4a3c1dff1e3
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:43:59 2005 -0700

    [NETLINK]: Don't prevent creating sockets when no kernel socket is registered
    
    This broke the pam audit module which includes an incorrect check for
    -ENOENT instead of -EPROTONOTSUPP.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3173d8c342971a03857d8af749a3f57da7d06b57
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Sep 4 11:32:05 2005 -0500

    [SCSI] quieten messages on scsi_execute commands
    
    scsi_io_completion() can be a bit noisy about certain conditions.
    Previously this wasn't a problem for internally generated commands,
    since they never hit it.  However, since we do all SCSI commands via
    bios, now they do.  user CD testers like magicdev are now getting not
    ready messages every time they touch the CD to see if there's anything
    in it.
    
    Fix this by making all scsi_execute commands REQ_QUIET and making
    scsi_finish_io() not say anything for REQ_QUIET.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fe1b2d544d71300f8e2d151c3c77a130d13a58be
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 14:15:37 2005 +0200

    [SCSI] unexport scsi_add_timer/scsi_delete_timer
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c5478def7a3a2dba9ceda452c2aa3539514d30a9
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 14:04:26 2005 +0200

    [SCSI] switch EH thread startup to the kthread API
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 32993523dc59759ae6cb349e4d231d4cd2165329
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Sep 6 14:03:44 2005 +0200

    [SCSI] fix SCSI_IOCTL_PROBE_HOST
    
    This returns always false with new-style drivers right now.  Make it
    return always true instead, as a host must be present if we are able
    to call the ioctl (without a host attached there would be no device
    node to call on..)
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4869040512082b761de2d7c35975d01044f8bfea
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 18:08:14 2005 +1000

    [SCSI] Universal Xport no attach blacklist
    
    On Fri, Dec 13, 2002 at 12:24:39AM +1100, Anton Blanchard wrote:
    
    > We tested 2.5.51 on a ppc64 box, qlogic 2312 and a fastt700 array. I
    > had CONFIG_SCSI_REPORT_LUNS and unfortunately it thought the management
    > LUN was a disk:
    >
    >   Vendor: IBM       Model: Universal Xport   Rev: 0520
    >   Type:   Direct-Access                      ANSI SCSI revision: 03
    >
    > ...
    >
    > SCSI device sdaj: drive cache: write through
    > SCSI device sdaj: 40960 512-byte hdwr sectors (21 MB)
    >  sdaj: unknown partition table
    > Attached scsi disk sdaj at scsi2, channel 0, id 0, lun 31
    >
    > ...
    >
    > end_request: I/O error, dev sdaj, sector 0
    
    Three years later...
    
    It looks like SGI use the same FC vendor and they already have a
    workaround for this issue. The following patch adds the IBM version of
    it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4451e472627881e3e2240b224f127c99be500f91
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jul 12 10:45:17 2005 -0400

    [SCSI] sd: pause in sd_spinup_disk for slow USB devices
    
    This patch adds a delay tailored for USB flash devices that are slow to
    initialize their firmware.  The symptom is a repeated Unit Attention with
    ASC=0x28 (Not Ready to Ready transition).  The patch will wait for up to 5
    seconds for such devices to become ready.  Normal devices won't send the
    repeated Unit Attention sense key and hence won't trigger the patch.
    
    This fixes a problem with James Roberts-Thomson's USB device, and I've
    seen several reports of other devices exhibiting the same symptoms --
    presumably they will be helped as well.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e47373ec1c9aab9ee134f4e2b8249957e9f4c7ef
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Mar 30 15:05:45 2005 -0500

    [SCSI] return success after retries in scsi_eh_tur
    
    The problem lies in the way the error handler uses TEST UNIT READY to
    tell whether error recovery has succeeded.  The scsi_eh_tur function
    gives up after one round of retrying; after that it decides that more
    error recovery is needed.
    
    However TUR is liable to report sense data indicating a retry is needed
    when in fact error recovery has succeeded.  A typical example might be
    SK=2, ASC=4, ASCQ=1 (Logical unit in process of becoming ready).  The mere
    fact that we were able to get a sensible reply to the TUR should indicate
    that the device is working well enough to stop error recovery.
    
    I ran across a case back in January where this happened.  A CD-ROM drive
    timed out the INQUIRY command, and a device reset fixed the blockage.
    But then the drive kept responding with 2/4/1 -- because it was spinning
    up I suppose -- until the error handler gave up and placed it offline.
    If the initial INQUIRY had received the 2/4/1 instead, everything would
    have worked okay.  It doesn't seem reasonable for things to fail just
    because the error handler had started running.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1cd9855c1ba60b3e615e09d3ddf557f7bc371533
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Sep 6 23:14:59 2005 +0100

    [SERIAL] Fix lh7a40x serial driver
    
    Missed updating two lh7a40xuart_stop_tx calls.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2be863c959ea22ac9eb83e30f6cd92a8ae78bfdc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Sep 6 23:13:17 2005 +0100

    [ARM] Fix missed initialisers/missing comma
    
    Fix the broken initialisers missed by the recent IRQ patch.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4dddbc26c3895ecdab1f4b16435685b47f96f599
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Tue Sep 6 17:11:54 2005 -0500

    [SCSI] ibmvscsi: handle large scatter/gather lists
    
    The maximum size of a scatter-gather list that the current IBM VSCSI
    Client can handle is 10.  This patch adds large scatter-gather support
    to the client so that it is capable of handling up to SG_ALL(255)
    number of requests in the scatter-gather list.
    
    Signed-off-by: Linda Xie <lxie@us.ibm.com>
    Acked by: Dave Boutcher <sleddog@us.ibm.com>
    
    Rejections fixed up and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e4466399398a2ec854776e9eca2b4415b40bd1ff
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:11:10 2005 -0700

    [NETFILTER]: Missing unlock in TCP connection tracking error path
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49719eb355d32fa07793017b4b46b1c02e88b275
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Tue Sep 6 15:10:46 2005 -0700

    [NETFILTER]: kill __ip_ct_expect_unlink_destroy
    
    The following patch kills __ip_ct_expect_unlink_destroy and export
    unlink_expect as ip_ct_unlink_expect. As it was discussed [1], the function
    __ip_ct_expect_unlink_destroy is a bit confusing so better do the following
    sequence: ip_ct_destroy_expect and ip_conntrack_expect_put.
    
    [1] https://lists.netfilter.org/pipermail/netfilter-devel/2005-August/020794.html
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91c46e2e60da0b43a1e8740729737318862f64eb
Author: Pablo Neira Ayuso <pablo@netfilter.org>
Date:   Tue Sep 6 15:10:23 2005 -0700

    [NETFILTER]: Don't increase master refcount on expectations
    
    As it's been discussed [1][2]. We shouldn't increase the master conntrack
    refcount for non-fulfilled conntracks. During the conntrack destruction,
    the expectations are always killed before the conntrack itself, this
    guarantees that there won't be any orphan expectation.
    
    [1]https://lists.netfilter.org/pipermail/netfilter-devel/2005-August/020783.html
    [2]https://lists.netfilter.org/pipermail/netfilter-devel/2005-August/020904.html
    
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e7dfb09a3624a32df2dd00683875d0e56406a603
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:10:00 2005 -0700

    [NETFILTER]: Fix HW checksum handling in nfnetlink_queue
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 03486a4f838c55481317fca5ac2e7d12550a4fb7
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:09:43 2005 -0700

    [NETFILTER]: Handle NAT module load race
    
    When the NAT module is loaded when connections are already confirmed
    it must not change their tuples anymore. This is especially important
    with CONFIG_NETFILTER_DEBUG, the netfilter listhelp functions will
    refuse to remove an entry from a list when it can not be found on
    the list, so when a changed tuple hashes to a new bucket the entry
    is kept in the list until and after the conntrack is freed.
    
    Allocate the exact conntrack tuple for NAT for already confirmed
    connections or drop them if that fails.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31c913e7fd48000163a88cfe10383fd3be20910e
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Tue Sep 6 15:09:20 2005 -0700

    [NETFILTER]: Fix CONNMARK Kconfig dependency
    
    Connection mark tracking support is one of the feature in connection
    tracking, so IP_NF_CONNTRACK_MARK depends on IP_NF_CONNTRACK.
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2978aea393b5e00b55b219786a5b8a47f838a7f
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:08:51 2005 -0700

    [NETFILTER]: Add NetBIOS name service helper
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2248bcfcd8fb622ec88b8587d0c1f139635ffd2e
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 6 15:06:42 2005 -0700

    [NETFILTER]: Add support for permanent expectations
    
    A permanent expectation exists until timeing out and can expect
    multiple related connections.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9261c9b042547d01eeb206cf0e21ce72832245ec
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 6 14:51:39 2005 -0700

    [NET]: Make sure l_linger is unsigned to avoid negative timeouts
    
    One of my x86_64 (linux 2.6.13) server log is filled with :
    
    schedule_timeout: wrong timeout value ffffffffffffff06 from ffffffff802e63ca
    schedule_timeout: wrong timeout value ffffffffffffff06 from ffffffff802e63ca
    schedule_timeout: wrong timeout value ffffffffffffff06 from ffffffff802e63ca
    schedule_timeout: wrong timeout value ffffffffffffff06 from ffffffff802e63ca
    schedule_timeout: wrong timeout value ffffffffffffff06 from ffffffff802e63ca
    
    This is because some application does a
    
    struct linger li;
    li.l_onoff = 1;
    li.l_linger = -1;
    setsockopt(sock, SOL_SOCKET, SO_LINGER, &li, sizeof(li));
    
    And unfortunatly l_linger is defined as a 'signed int' in
    include/linux/socket.h:
    
    struct linger {
             int             l_onoff;        /* Linger active                */
             int             l_linger;       /* How long to linger for       */
    };
    
    I dont know if it's safe to change l_linger to 'unsigned int' in the
    include file (It might be defined as int in ABI specs)
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe2d5295a11e2ab2d6f4e7ea074816000b32eba3
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Sep 6 14:49:44 2005 -0700

    [CRYPTO] Fix boundary check in standard multi-block cipher processors
    
    The boundary check in the standard multi-block cipher processors are
    broken when nbytes is not a multiple of bsize.  In those cases it will
    always process an extra block.
    
    This patch corrects the check so that it processes at most nbytes of
    data.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b69aee04fbfc027fc4ddaddc809ea8711cef9511
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Sep 6 14:42:45 2005 -0700

    [NET]: Use file->private_data to get socket pointer.
    
    Avoid touching file->f_dentry on sockets, since file->private_data
    directly gives us the socket pointer.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93c37f292110a37dd77e4cc0aaf1c341d79bf6aa
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Sep 6 13:57:08 2005 -0700

    [SERIAL]: Avoid 'statement with no effect' warnings.
    
    When SUPPORT_SYSRQ is false, gcc can emit warnings for
    the uart_handle_sysrq_char() that results.  Using an
    empty inline returning zero kills the warning.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4706df3d3c42af802597d82c8b1542c3d52eab23
Merge: 5bcaa15... cebb2b1...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 05:16:24 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit 5bcaa155797ab62ed363932ec0f02fbcb5db1ef1
Merge: 1e231ef... 3a48c4c...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:47:18 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 1e231efe50ffe4d291be24d2fe393188de9c4b08
Merge: ef88b7d... 0ce7625...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:45:34 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit ef88b7dba2b47c70037a34a599d383462bb74bd3
Merge: f65e776... aaebf43...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:35:51 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/sam/kbuild

commit f65e77693aa5a1cf688fc378bc6913a56f9ff7b7
Merge: 8566cfc... d856f1e...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:32:12 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6

commit 8566cfc9fe0934f52ddedc12b083176116c13978
Merge: 7bdb2b6... 77ae845...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:31:02 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit 7bdb2b6aca356c765bb697a4e9e7599357ee1542
Merge: 4c2cac8... c0f2f76...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Tue Sep 6 00:29:52 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit b6ddc518520887a62728b0414efbf802a9dfdd55
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Sep 6 08:09:03 2005 +0100

    Fix build failure on ppc64 without CONFIG_AUDIT
    
    We shouldn't call audit_syscall_exit() unless it actually exists.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cebb2b156319990fc2fba615bbfeac81be62a86a
Author: Olaf Hering <olh@suse.de>
Date:   Sun Jul 10 19:35:15 2005 +0000

    [PATCH] remove linux/version.h include from arch/ppc64
    
    Changing CONFIG_LOCALVERSION rebuilds too much, for no apparent reason.
    
    Use system_utsname for progress and debug header.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 14b34661615ec036ab4c91637913706e4caccc93
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Sep 6 14:59:47 2005 +1000

    [PATCH] Invert sense of SLB class bit
    
    Currently, we set the class bit in kernel SLB entries, and clear it on
    user SLB entries.  On POWER5, ERAT entries created in real mode have
    the class bit clear.  So to avoid flushing kernel ERAT entries on each
    context switch, this patch inverts our usage of the class bit, setting
    it on user SLB entries and clearing it on kernel SLB entries.
    
    Booted on POWER5 and G5.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c0f2f761e1ea3923952e31cce2cdb7d65f450fbd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 23:35:41 2005 -0700

    [SPARC64]: Kconfig fix (GEN_RTC dependencies)
    
    Yet another architecture not coverd by GEN_RTC - sparc64 never picked
    it until now and it doesn't have asm/rtc.h to go with it, so it
    wouldn't compile anyway (or have these ioctls in the user-visible
    headers, for that matter).
    
    FWIW, I'm very tempted to introduce ARCH_HAS_GEN_RTC and have it set
    in arch/*/Kconfig for architectures that know what to do with this
    stuff - for something supposedly generic the list of architectures
    where it doesn't work is getting too long...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d9c994840f0e217c391871ddbb84a506d275658
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 23:35:05 2005 -0700

    [SUNSU]: Compile fixes.
    
    sunsu had been broken by ->stop_tx/->start_tx API changes.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e5e259466f2fe68251b1e1092949ef3d4dabb254
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 23:34:13 2005 -0700

    [SPARC64]: Don't include drivers/firmware/Kconfig
    
    It's really not relevant for this platform in any
    way, after all.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53d0fc27af3a3ab22c0ffb67857adfa18977e681
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 23:33:05 2005 -0700

    [RTC]: Use SA_SHIRQ in sparc specific code.
    
    Based upon a report from Jason Wever.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d25240fcfce0e55540a273b1e1b07d304065a31
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 23:30:15 2005 -0700

    [MOXA]: Fix this driver properly.
    
    Actually, proper fix of that breakage is embarrassingly simple - it's yet
    another gratitious leftover include of asm/segment.h, so incremental to the
    previos would be removal of that BROKEN and removal of bogus include from
    mxser.c itself.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c2cac8908ded8436191bd058e52d2737fd7fd31
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 23:19:49 2005 -0700

    [IEEE80211]: Use correct size_t printf format string in ieee80211_rx.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fdf0b8634055b016f7b93cfcdea2eb9091f0271
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:59:16 2005 +1000

    [PATCH] ppc64: Fix build with oprofile disabled
    
    Fix build with oprofile disabled.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8fef0306f9164d4bfd0befb62e63e4d1167681b5
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:57:52 2005 +1000

    [PATCH] ppc64: Move oprofile_model into cpu feature struct
    
    Move oprofile_model into cpu feature struct.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dca859329cee9b4cf02c8b7cb805b49973292ed2
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:55:35 2005 +1000

    [PATCH] ppc64: Move oprofile_impl.h into include/asm-ppc64
    
    Move oprofile_impl.h into include/asm-ppc64 in preparation for moving
    oprofile_model into cpu feature struct.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1a410d883023da70806a0190c4bde104545cb9c6
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:53:57 2005 +1000

    [PATCH] ppc64: Add oprofile cpu_type to cpu feature struct
    
    Add oprofile cpu_type to cpu feature struct.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a6908cd00036080fbea14ff67335e5f2a1ab5489
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:52:12 2005 +1000

    [PATCH] ppc64: Use num_pmcs in oprofile code
    
    Change oprofile to use num_pmcs from the cpu feature struct.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8530935d384bef1467ba76e1f4382f0f8b3c899d
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:50:48 2005 +1000

    [PATCH] ppc64: remove CPU_FTR_PMC8
    
    Remove the CPU_FTR_PMC8 feature now we encode the number of PMCs
    directly.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fd5b4377eacac42293b1a349dbb0f9892bf7f74a
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 14:47:49 2005 +1000

    [PATCH] ppc64: add number of PMCs to cputable
    
    Add a field in the cputable struct to store the number of PMCs.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3da54c5b253549153ee6521db21d541a06abaa65
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 23:08:01 2005 -0700

    [IPW2200]: ipw2200.h needs linux/dma-mapping.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 71839267f2554d76bb0862cdd0181a60bd0f4970
Author: Wim Coekaerts <wim.coekaerts@oracle.com>
Date:   Mon Sep 5 20:22:47 2005 -0700

    [PATCH] ppc64: Allow world readable /proc/ppc64/lparcfg
    
    I would like to be able to read the lparcfg data from any user so we
    can make "intelligent" decisions based on underlying attributes when
    running in lpars.  Yes there's software that likes to do this :) and
    runs as non-root.
    
    It's very similar to say VM where you can get CP to provide feedback
    of the real hardware inside a VM guest.
    
    Signed-off-by: Wim Coekaerts <wim.coekaerts@oracle.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fa2259b06c38a7c392966c66cd1cdd710d487463
Author: Kumar Gala <galak@freescale.com>
Date:   Wed Aug 24 11:56:56 2005 -0500

    [PATCH] ppc64: remove use of asm/segment.h
    
    Removed PPC64 architecture specific users of asm/segment.h.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6b9269abd64c54f11dc4aaf162d2915fccae6c77
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Sep 1 15:51:52 2005 -0500

    [PATCH] ppc/ppc64: Merge more include files
    
    This patch merges several include files from
    asm-ppc and asm-ppc64 into the new asm-powerpc.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ad6571a78ac74e9fa27e581834709067dba459af
Author: Becky Bruce <bgill@freescale.com>
Date:   Sat Sep 3 19:01:57 2005 -0500

    [PATCH] Move 3 more headers to asm-powerpc
    
    Merged several nearly-identical header files from asm-ppc and asm-ppc64
    into asm-powerpc.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Becky Bruce <becky.bruce@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b2c0ab17ba751abe13a28508b1ac7e9ca074cd87
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 13:05:58 2005 +1000

    [PATCH] ppc64: speedup cmpxchg
    
    cmpxchg has the following code:
    
    __typeof__(*(ptr)) _o_ = (o);
    __typeof__(*(ptr)) _n_ = (n);
    
    Unfortunately it makes gcc 4.0 store and load the variables to the stack.
    Eg in atomic_dec_and_test we get:
    
      stw     r10,112(r1)
      stw     r9,116(r1)
      lwz     r9,112(r1)
      lwz     r0,116(r1)
    
    x86 is just casting the values so do that instead. Also change __xchg*
    and __cmpxchg* to take unsigned values, removing a few sign extensions.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4721e2214b5fd6eca48caea76afb1bad3148930f
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Sep 6 12:05:26 2005 +1000

    [PATCH] ppc64: poison initmem
    
    Poison initmem after we free it so we catch use after free issues.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2f4cf721eb2ff23b60af2932fd9fa4026f2a1164
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Thu Sep 1 11:57:10 2005 -0400

    [PATCH] ppc64: systemcfg is now a pointer
    
    The following patch fixes 2 issues:
      1) use PLATFORM_LPAR bit to test if running in LPAR mode
      2) systemcfg pointer is assigned from static data in
         arch/ppc64/kernel/pacaData.c.  The file arch/ppc64/kernel/head.S
         now refers to is using the GOT binding to the pointer and hence
         must deref it.
    
    Signed-off-by: Jimi Xenidis <jimix@watson.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8d9273918635f0301368c01b56c03a6f339e8d51
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:57:27 2005 +1000

    [PATCH] ppc64: Consolidate early console and PPCDBG code
    
    Consolidate the early console and PPCDBG code in udbg.c
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 188d2ce78feac67e41e41808acda7951810f677b
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:57:00 2005 +1000

    [PATCH] ppc64: Remove old includes
    
    Trim some no longer needed includes from udbg.c and friends.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c8f1c8be629ee34991fdba8bfe46a5c455393209
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:56:42 2005 +1000

    [PATCH] ppc64: Take udbg out of ppc_md
    
    Take udbg out of ppc_md. Allows us to not overwrite early udbg inits
    when assigning ppc_md.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7f853352e79bf57c4ee279b7458ed0c072e2be76
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:56:02 2005 +1000

    [PATCH] ppc64: Split SCC and 15550 udbg code
    
    Split scc and 15550 functions from udbg each into their own file.
    This makes them more symetric with the lpar and btext code.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 37548d58e5ce53dda609c5b35c0eb62d50d59675
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:55:38 2005 +1000

    [PATCH] ppc64: Make udbg_init_uart set the ppc_md udbg methods.
    
    make udbg_init_uart set the ppc_md udbg methods.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cb14c4d641b4e083fae7ce4a0e8a3973cecb7554
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:55:00 2005 +1000

    [PATCH] ppc64: Clean up CR handling
    
    Make the 16550 and real mode 16550 use tail recursion like the scc code
    instead of repeating the routine except for the character sent.
    
    Gcc recoginizes the tail recursion and handles it efficently without
    stack allocations.  The maple real putc shrinks from 188 to 104 bytes
    of instructions.  udbg_putc drops from 188 to 140 bytes.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5fdabaab01ee8928597aae8a0178a3a4f7b66365
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:54:42 2005 +1000

    [PATCH] ppc64: Remove dummy getc routines
    
    Now that xmon is fixed we should not need the dummy getc routines.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 41be31b7d61c661a63bb1d5c8be3c39f124beabd
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:54:13 2005 +1000

    [PATCH] ppc64: dont bypass ppc_md.udbg* functions
    
    udbg_getc_poll is a ppc_md function.   don't call directly into udbg.c
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cdcd318fefab8c8655fdc3b085ccc23848a93001
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Sep 6 11:50:55 2005 +1000

    [PATCH] ppc64: Add missing include
    
    inline pmac_call_feature references ppc_md so include asm/machdep.h
    in asm/pmac_feature.h
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fb5f5e6e0cebd574be737334671d1aa8f170d5f3
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Sep 5 18:55:48 2005 -0700

    [TCP]: Fix TCP_OFF() bug check introduced by previous change.
    
    The TCP_OFF assignment at the bottom of that if block can indeed set
    TCP_OFF without setting TCP_PAGE.  Since there is not much to be
    gained from avoiding this situation, we might as well just zap the
    offset.  The following patch should fix it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1198ad002ad36291817c7bf0308ab9c50ee2571d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Sep 5 18:44:37 2005 -0700

    [NET]: 2.6.13 breaks libpcap (and tcpdump)
    
    Patrick McHardy says:
    
      Never mind, I got it, we never fall through to the second switch
      statement anymore. I think we could simply break when load_pointer
      returns NULL. The switch statement will fall through to the default
      case and return 0 for all cases but 0 > k >= SKF_AD_OFF.
    
    Here's a patch to do just that.
    
    I left BPF_MSH alone because it's really a hack to calculate the IP
    header length, which makes no sense when applied to the special data.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6baf1f417d092bd2de7c8892cecad456024c993f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 18:14:11 2005 -0700

    [NET]: Do not protect sysctl_optmem_max with CONFIG_SYSCTL
    
    The ipv4 and ipv6 protocols need to access it unconditionally.
    SYSCTL=n build failure reported by Russell King.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa07ca5793414ce257ad98809147bd1dbb7a3837
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon Sep 5 18:09:08 2005 -0700

    [NETFILTER] remove bogus hand-coded htonll() from nenetlink_queue
    
    htonll() is nothing else than cpu_to_be64(), so we'd rather call the
    latter.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 506e7beb7468c7cf56370d0a7a6afbec56653473
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 5 18:08:11 2005 -0700

    [IRDA]: IrDA prototype fixes
    
    Every file should #include the header files containing the prototypes
    of it's global functions.
    
    In this case this showed that the prototype of irlan_print_filter()
    was wrong which is also corrected in this patch.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c5955d83ed26455a49d12e783cc2258d11279a9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 5 18:07:42 2005 -0700

    [SCTP]: net/sctp/sysctl.c should #include <net/sctp/sctp.h>
    
    Every file should #include the header files containing the prototypes of
    it's global functions.
    
    sctp.h contains the prototypes of sctp_sysctl_{,un}register().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 395dde20fb06153feb65d79d7fe83eda41bf50e7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 5 18:06:45 2005 -0700

    [NETFILTER]: net/netfilter/nfnetlink*: make functions static
    
    This patch makes needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 43d60661ac67c28b358f012d07587762074017fc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 5 18:05:52 2005 -0700

    [IPV4]: net/ipv4/ipconfig.c should #include <linux/nfs_fs.h>
    
    Every file should #include the header files containing the prototypes of
    it's global functions.
    
    nfs_fs.h contains the prototype of root_nfs_parse_addr().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 295098e9f4822aecdddd4cab05705f1ee63bc3f4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 5 18:04:28 2005 -0700

    [ATM]: net/atm/ioctl.c should #include "common.h"
    
    Every file should #include the header files containing the prototypes
    of it's global functions.
    
    common.h contains the prototype for vcc_ioctl().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 74da1edf264c5982b465041a5706caff25d7e1ed
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 5 17:56:11 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 38f3843ed6bdbcff9465386c3539523466880320
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Sep 5 17:53:32 2005 -0700

    [TG3]: Use status tag to check for new events
    
    Use the status tag to determine if there are new events in
    tg3_interrupt_tagged(). We discussed about this a while ago with Grant
    Grundler and DaveM. This scheme makes it unnecessary to clear the
    updated bit in the status block when using tagged mode, and only
    a simple comparison is needed to determine if there are new events.
    
    The tp->lock around netif_rx_complete() and tg3_restart_ints() is also
    removed. It is unnecessary with DaveM's new locking scheme.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 61487480dd79acc5e82b08cd29cbcbd3301645fa
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Sep 5 17:53:19 2005 -0700

    [TG3]: Remove status block access in tg3_msi() and add prefetches
    
    Remove unnecessary status block accesses in tg3_msi(). Since MSI is
    not shared, it is unnecessary to read the status block to determine if
    there are any new events in the MSI handler. It is also unnecessary to
    clear the updated bit in the status block.
    
    Since the poll list is per-cpu, tg3_poll() will be scheduled to run on
    the same CPU that received the MSI. Prefetches for the status block
    and the next rx descriptors are added in tg3_msi() to improve their
    access times when tg3_poll() runs.
    
    In the non-MSI irq handlers, we need to check the status block because
    interrupts may be shared. Only prefetches for the next rx descriptors
    are added.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f40dead25957434937f2b1872e9f4b43605f0ad
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Sep 5 17:53:06 2005 -0700

    [TG3]: Add PHY loopback test
    
    Improve ethtool loopback self test by adding PHY loopback to the
    existing MAC loopback test.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4009a93d8e85f685b02794aee28e3272be862e2b
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Sep 5 17:52:54 2005 -0700

    [TG3]: Add ethtool -p support
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c98748763ce25c5394a7edd686d92c70b4fac38
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Sep 5 17:52:38 2005 -0700

    [TG3]: Minor 5780 and 5752 fixes
    
    Minor SerDes bug fixes for 5780S and nvram bug fixes for 5780 and
    5752.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d856f1e337782326c638c70c0b4df2b909350dec
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 19 09:14:01 2005 -0400

    [PATCH] klist: fix klist to have the same klist_add semantics as list_head
    
    at the moment, the list_head semantics are
    
    list_add(node, head)
    
    whereas current klist semantics are
    
    klist_add(head, node)
    
    This is bound to cause confusion, and since klist is the newcomer, it
    should follow the list_head semantics.
    
    I also added missing include guards to klist.h
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fef6ec8dd96205fb22e3cfe2e4abd69d89413631
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Wed Aug 17 22:06:34 2005 +0200

    [PATCH] Driver core: small cleanup; remove check for NULL before kfree() in driver core
    
    Remove needless checking of variable for NULL before calling kfree() on it.
    Applies to 2.6.13-rc6-git9
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ceaeade1f94c0a1c0163906ceeaede6493a9715e
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Thu Aug 11 10:37:39 2005 +0800

    [PATCH] Driver core: hande sysdev suspend failure
    
    This patch adds the return value check for sysdev suspend and does
    restore in failure case. Send the patch to pm-list, but seems lost, so I
    resend it.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 91e49001b9a7fe5dc2fa5b56039fbca9aa638ccc
Author: Jan Veldeman <jan@mind.be>
Date:   Sun Jul 31 13:12:10 2005 +0200

    [PATCH] Driver core: Documentation: use S_IRUSR | ... in stead of 0644
    
    Change filemode to use defines in stead of 0644,
    based on suggestions by Walter Harms and Domen Puncer.
    
    Signed-off-by: Jan Veldeman <Jan.Veldeman@advalvas.be>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f8d825bfb8d2a7546eeb57569d0eedf8c5565d28
Author: Jan Veldeman <jan@mind.be>
Date:   Sun Jul 31 13:12:09 2005 +0200

    [PATCH] Driver core: Documentation: fix whitespace between parameters
    
    Fix whitespace after comma between parameters.
    
    Signed-off-by: Jan Veldeman <Jan.Veldeman@advalvas.be>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a8af6b3b64ee97a1aeecde017ffd02e6796913a
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 17:37:34 2005 -0700

    [PATCH] Floppy: add cmos attribute to floppy driver tidy
    
    Fiddle with coding style a bit.
    
    Cc: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94fd0db7bfb4a03da202fd426d4e8e7eab42ab86
Author: Hannes Reinecke <hare@suse.de>
Date:   Fri Jul 15 10:09:25 2005 +0200

    [PATCH] Floppy: Add cmos attribute to floppy driver
    
    Currently only a device 'fdX' shows up in sysfs; the other possible
    device for this drive (like fd0h1440 etc) must be guessed from there.
    
    This patch corrects the floppy driver to create a platform device for
    each floppy found; each platform device also has an attribute 'cmos'
    which represents the cmos type for this drive. From this attribute the
    other possible device types can be computed.
    
    From: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 76d1ce00bdd76c2987fbfb763cd40447413a55b3
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Jul 10 01:21:24 2005 -0500

    [PATCH] Driver core: link device and all class devices derived from it.
    
    Driver core: link device and all class devices derived from it.
    
    To ease the task of locating class devices derived from a certain
    device create symlinks from parent device to its class devices.
    Change USB host class device name from usbX to usb_hostX to avoid
    conflict when creating aforementioned links.
    
    Tweaked by Greg to have the symlink be "class_name:class_device_name" in
    order to prevent duplicate links.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d65da6eae10cc77f93ead0188cde0b45f124d912
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 17 17:33:11 2005 -0700

    [PATCH] Fix manual binding infinite loop
    
    Fix for manual binding of drivers to devices.  Problem is if you pass in
    a valid device id, but the driver refuses to bind.  Infinite loop as
    write() tries to resubmit the data it just sent.
    
    Thanks to Michal Ostrowski <mostrows@watson.ibm.com> for pointing the
    problem out.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3a48c4c2d52a08e12319ab7caacad0a9b88e6cb4
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:10:06 2005 -0400

    [PATCH] orinoco: New driver - spectrum_cs.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree dee4f325520d4ea29397dd67ca657b7235bb1790 (from c88faac230cc9775445e5c644991c352e35c72a1)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 17:46:39 2005 -0400
    
        New driver - spectrum_cs.
    
        Driver for 802.11b cards using RAM-loadable Symbol firmware, such as
        Symbol Wireless Networker LA4100, CompactFlash cards by Socket
        Communications and Intel PRO/Wireless 2011B.
    
        The driver implements Symbol firmware download.  The rest is handled
        in hermes.c and orinoco.c.
    
        Utilities for downloading the Symbol firmware are available at
        http://sourceforge.net/projects/orinoco/
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ec82905177a22b0fe0abaf4ecb76813d3d45d16e
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:08:56 2005 -0400

    [PATCH] orinoco: New driver - orinoco_nortel.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree dce61aef99ceb57370b70222dc34d788666c0ac3 (from ceb6695092be8dcdfe2dec6ee5097d613011489d)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 15:50:55 2005 -0400
    
        New driver - orinoco_nortel.
    
        This is a driver for Nortel emobility PCI adaptors, which consist of an
        Orinoco compatible PCMCIA card and a simple PCI-to-PCMCIA bridge.  The
        driver initializes the device and uses Orinoco core driver for actual
        wireless networking.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8c09e16bd8f816f19cea0920430a1ac26478fcf6
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:07:52 2005 -0400

    [PATCH] orinoco: Remove EXPERIMENTAL mark from PLX_HERMES, TMD_HERMES and PCI_HERMES.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree ceb6695092be8dcdfe2dec6ee5097d613011489d (from 6b39374a27eb4be7e9d82145ae270ba02ea90dc8)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 14:50:10 2005 -0400
    
        Remove EXPERIMENTAL mark from PLX_HERMES, TMD_HERMES and PCI_HERMES.
    
        Those drivers have been used for a long time, and there have been very
        few problem reports.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c89cc225f72ec240196733872fa1a9eb9d8335ac
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:06:06 2005 -0400

    [PATCH] orinoco: Optimize orinoco_join_ap()
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree cb289b9f9b2a0f3ae7070a008f22e383b37526ee (from 56bfcdb38b3d04c1f8c1fd705e411f4be53b663c)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 19:05:16 2005 -0400
    
        Optimize orinoco_join_ap() - break from loop once the requested
    BSSID
        is found.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 708218b064e3ad3d55ac0f9d19b3c8c0fb7af3a4
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:05:19 2005 -0400

    [PATCH] orinoco: Fix memory leak on error in processing hostscan frames.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree ca955293cdfd3139e150d3b4fed3922a7eb651fb (from cb289b9f9b2a0f3ae7070a008f22e383b37526ee)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 19:08:00 2005 -0400
    
        Fix memory leak on error in processing hostscan frames.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit acf73a8563ff7540a54345c23f6cfe5a49b9d682
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:04:20 2005 -0400

    [PATCH] orinoco: Remove entry for Intel PRO/Wireless 2011B.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree c88faac230cc9775445e5c644991c352e35c72a1 (from dce61aef99ceb57370b70222dc34d788666c0ac3)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 17:09:45 2005 -0400
    
        Remove entry for Intel PRO/Wireless 2011B.
    
        It is not supported by this driver because it has no firmware in
        flash.  spectrum_cs is needed for this device.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 70817c40b94eef047f1bfdd46f8c56cc16075a78
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Sep 1 20:02:50 2005 -0400

    [PATCH] orinoco: Change orinoco_translate_scan() to return error code on error.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    
    diff-tree 8fc038ec51acf5f777fade80c5e38112b766aeee (from ca955293cdfd3139e150d3b4fed3922a7eb651fb)
    Author: Pavel Roskin <proski@gnu.org>
    Date:   Thu Sep 1 19:10:12 2005 -0400
    
        Change orinoco_translate_scan() to return error code on error.
        Adjust the caller to check for errors and clean up if needed.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7cda62455c800cf46bb86487d4f32ac6e4e8c519
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 2 20:13:40 2005 +0100

    [PATCH] Kconfig fix (PHYLIB vs. s390)
    
    drivers/net/phy/phy.c is broken on s390; it uses enable_irq() and friends
    and these do not exist on s390.  Marked as broken for now.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9a4822063e4865d07e902edbd0f31baf4857c2ce
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 25 06:24:56 2005 +0100

    [PATCH] (15/22) Kconfig fix (82596)
    
    driver is non-modular
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 63c9e549148fb95c11befb4f255c84ded9277f89
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Sep 2 13:49:10 2005 -0700

    [PATCH] mv643xx: add netpoll api support
    
    Add support for the netpoll api for use by netconsole, kgdb, etc.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7342cd810cfd73120687d5323846e5c114cb23bb
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Sep 2 12:36:48 2005 -0700

    [PATCH] mv643xx: Fix promiscuous mode handling
    
    mv643xx_eth_get_config_reg() was reading the wrong register.
    mv643xx_eth_set_config_reg() was or'ing instead of setting the
    register.  These functions are trivial and both are called only from
    mv643xx_eth_set_rx_mode() when changing to/from promiscuous mode.
    Remove both functions and do the operations directly in
    mv643xx_eth_set_rx_mode().
    
    Also, maintain promiscuous mode setting across port resets.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8f543718ea1c20795853bf065f1dcb510f210465
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Sep 2 12:34:35 2005 -0700

    [PATCH] mv643xx: Disable per port bandwidth limits
    
    The mv643xx chips support per port bandwith limits.  This patch
    disables the bandwidth limits by clearing the MTU register.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b111ceb68ac4c44d1a6fa697c55f267fa09b1058
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Sep 2 10:25:24 2005 -0700

    [PATCH] mv643xx: fix outstanding tx skb counter
    
    This patch corrects the accounting of outstanding tx skbs.  It fixes
    a bug that causes "Error on Queue Full" messages seen since scatter-gather
    was enabled by using the hardware tcp/udp checksum generator.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b1dd9ca177bd2ff5260376dd024dd43eb4631dc7
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Sep 1 09:59:23 2005 -0700

    [PATCH] mv643xx: fix skb memory leak
    
    This patch fixes an skb memory leak under heavy receive load
    (whenever the more packets have been received than the NAPI budget
    allows to be processed).
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e797637f4c1cbcecb2d8f5cfa05b161da1f0b802
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Sep 3 00:57:51 2005 +0200

    [PATCH] sis190: basic sis191 support
    
    The sis191 is the gigabit brother of the sis190. SiS's driver suggests
    that the register set is backward compatible: this should hopefully
    give a basic driver.
    
    The device should allow the usual features from a modern ethernet
    adapter (802.1q, SG, Jumbo frames, TSO, checksum offload). So far
    the relevant register layout is not documented. SiS's driver does
    not provide these features either (at least not for Linux).
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c3d6f1f24cf3fdfdad3bff631349dc2aef06c8df
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Sep 3 00:56:57 2005 +0200

    [PATCH] sis190: RGMII Tx internal delay fiddling
    
    Don't ask.
    The patch is based on SiS's GPLed driver.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6614a6dc6ebba4d3ca0ba5ea023b61a7d22ab00b
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Sep 3 00:56:16 2005 +0200

    [PATCH] sis190: make 10Mbps the default when handling the StationControl register
    
    This patch does three things:
    - widen the access to the StationControl register (note the SIS_W16
      versus SIS_W32 change);
    - default to 10Mbps half duplex when the LPA can not be evaluated
      (reg31->ctl is identical for both). It can be argued that it makes
      sense as the lowest common denominator when everything else failed.
      Btw it works better than the current code. :o)
    - remove some enums: they do not document anymore.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 900eb9d69252cf91d42f6a87fc80b1c5518dbff1
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Sep 3 00:55:27 2005 +0200

    [PATCH] sis190: recent chipsets from SiS include a RGMII
    
    Extracted from SiS's GPLed driver. From the few pdf available at SiS's,
    it seems that the 965 and the 966 south bridge include this interface
    whereas the 965L (and anything below) does not. It is expected to be a
    sis191 related feature and should not hurt the existing sis190 driver.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 21461380d30fb52b0bbf96dbcccd0b5096a7b346
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Sep 3 00:54:25 2005 +0200

    [PATCH] sis190: unmask the link change events
    
    link changes reporting does not work when the driver masks its irq event
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit dc85dec68880176c8ba05f68218a161964cada46
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Sat Sep 3 14:05:06 2005 -0700

    [PATCH] 'mdio_bus_exit' in discarded section .text.exit
    
    When building with  CONFIG_PHYLIB=y on Itanium, I see:
     `mdio_bus_exit' referenced in section `.init.text' of
    drivers/built-in.o: defined in discarded section `.exit.text' of
    drivers/built-in.o
    
    I believe that mdio_bus_exit should not be declared __exit, because it is
    referencesd from __init sections in, say, phy_init().
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9d8cc1b6c3cba2be61c0884e3a04dd6baea70654
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 14:04:55 2005 -0700

    [PATCH] drivers/net/ne3210.c: cleanups
    
    - make two needlessly global functions static
    
    - kill an ancient version variable
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0bf0519d2b531459009caab718b94fdf94d63d17
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:26:18 2005 +0100

    [PATCH] (7/7) __user annotations (ethtool)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 843684a24eb7b261461d8bc1aa723c23732ecb94
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:26:13 2005 +0100

    [PATCH] (6/7) missing include (ipw2200)
    
    added missing include of dma-mapping.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2be041a79bbdbb3c830f4cc3bc3387ba6fff7566
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:26:08 2005 +0100

    [PATCH] (5/7) iomem annotations, NULL noise removal (ipw2100)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6cafa99f01ee355bf2590a45f0f7d236fe6bdca8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:26:03 2005 +0100

    [PATCH] (4/7) missing include (uli526x)
    
    added missing include of dma-mapping.h, removed bogus ptrace.h (what the
    hell was it doing there, in the first place?)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 509a2671a445345d917d8828b2cb3f5743af6093
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:25:58 2005 +0100

    [PATCH] (3/7) iomem annotations (s2io)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1bea9add7391be9d83886530a610fd0694f93130
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:25:53 2005 +0100

    [PATCH] (2/7) iomem annotations (e1000)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 91fb4c964c606e63ce0d0d31814728d62a5de9bc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Sep 5 03:25:48 2005 +0100

    [PATCH] (1/7) chelsio sparse annotations
    
    NULL noise removal, __iomem annotations, use of if_mii() instead of
    open-coding it.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0ce7625f3c1e3f921f6b83f7e944e00031a39dfa
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Sep 5 20:49:54 2005 +0100

    [ARM] 2882/1: pxa2xx_sharpsl: Update PCMCIA driver to support variety of new hardware
    
    Patch from Richard Purdie
    
    This patch updates the PCMCIA pxa2xx_sharpsl driver to support multiple scoop
    devices by adding a scoop to pcmcia slot mapping structure. It adds platform
    support for poodle, is known to work on spitz (which is dual slot) and
    should also support collie with a minor amount of further work.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 027da01d734db0ca9dd1a084339dab07ab576935
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Sep 5 20:47:53 2005 +0100

    [ARM] 2876/1: N30 - remove task to toggle USB D+ line
    
    Patch from Ben Dooks
    
    The n30 machine file is using a kernel thread to change the
    state of the USB D+ pull-up resistor, which is not the proper
    way to do this. Once the usb-gadget support for the 24xx is
    merge, the proper access method will be added.
    This patch also removes the problem of using HZ for the
    msleep calls, from Nishanth Aravamudan.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 77ae84554cc0178e03862391599a0cedf96fa4c4
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Sep 3 10:52:11 2005 +0200

    [PATCH] I2C: Drop the I2C_ACK_TEST ioctl
    
    Drop the I2C_ACK_TEST ioctl, which was commented out. It never really
    existed (not after 1999 anyway), and there is no such thing as a ack
    test on I2C/SMBus anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11be27ea9bfd0ea7bca797ba6937285d18d426c2
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Sep 2 23:05:07 2005 +0200

    [PATCH] hwmon: (3/3) pc87360 driver update
    
    pc87360: consolidate fan helper
    
    This patch consolidates the _set_fan_min() helper routine into the 2
    line sysfs-callback wrapper that uses it.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 694fa056a60828ef54a5db958468cc600c3b3622
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Sep 2 22:57:52 2005 +0200

    [PATCH] hwmon: (2/3) pc87360 driver update
    
    pc87360: number-skew to init
    
    The temp, therm, fan, pwm callbacks all have an offset skew in the code
    which accommodates attribute numbering conventions under
    /sys/bus/i2c/devices/9191-6620/ (ie they start at 1)
    
    This patch moves that skew into the declaration, and out of the
    functions (except for therm, where we simplify from 2 skews to 1). The
    declarative skew is clearer, less error-prone, and more efficient.
    
    The use of 11+offset-4 below reflects the fact that the sysfs numbering
    of these units is 4, 5, 6, but they use internal VLM units 11, 12, 13 to
    measure the thermistor voltages.
    
    There's one remaining skew factor, in *_crit callbacks below, because
    there are no critical thresholds for voltages 0-10, only for those
    supporting the thermistors.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f0986bd8f390392948db85dac526fb238752372b
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Sep 2 22:52:43 2005 +0200

    [PATCH] hwmon: (1/3) pc87360 driver update
    
    Use the new "dynamic sysfs callbacks", as introduced recently by Yani
    Ioannou, in pc87360.
    
    Note that this change isn't indiscriminate.  Only those attributes that
    would benefit from having an index (i.e., those which are
    macro-repeated) have been converted.
    
    This significantly shrinks the size of the module:
      before:  49235  drivers/hwmon/pc87360.ko
      after:   32532  drivers/hwmon/pc87360.ko
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a89923fff79f8eeed0ccdf51e13453754e48a71e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Sep 2 21:28:00 2005 +0200

    [PATCH] I2C: Fix sgi_xfer return value
    
    The sgi_xfer function returns 0 on success instead of the number of
    transfered messages as it is supposed to. This patch fixes that.
    
    Let's just hope that no client chip driver was relying on this
    misbehavior.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d1b2f0a9754d3087ee29b3e88b8f20f2d30090d3
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Sep 2 21:25:47 2005 +0200

    [PATCH] i2c: bug fix for busses/i2c-mv64xxx.c
    
    When an i2c transfer is successful, an incorrect value is returned.
    This patch fixes that.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8e14d6c173f8fff05a94e62669c87c26141766af
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Thu Sep 1 18:12:04 2005 -0700

    [PATCH] i2c: chips/ds1374.c fixup
    
    The 'new_time' variable should be static.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a44e40b4d8c2c6faa2158caf7114e1065fed3b34
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Thu Sep 1 18:09:54 2005 -0700

    [PATCH] i2c: chips/m41t00.c fixup
    
    The 'new_time' variable should be static.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b280dab6d62c8d0434cbc0aaeebf56d1fa4fcc19
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Aug 29 21:10:31 2005 +0200

    [PATCH] I2C: Drop probe parameter of i2c-keywest
    
    The i2c-keywest driver has a "probe" module parameter which enables bus
    scanning at load time. This can be done in userspace with the i2cdetect
    tool (part of the lm_sensors package) instead. What's more, i2cdetect
    gives more control on the way the bus is scanned, and is safer
    (i2c-keywest currently scans reserved addresses and doesn't properly
    handle the famous 24RF08 corruption case.)
    
    Thus, I would propose that this module parameter be simply dropped.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 386625f9f5cd94d10a21241b555b130dcec484fb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 25 16:43:29 2005 +0200

    [PATCH] I2C: Drop debug eeprom dump code in pcilynx
    
    The pcilynx driver includes code to dump the contents of an i2c eeprom
    for debugging purposes. The same can be done from userspace using the
    i2cdump tool (part of the lm_sensors project) instead, in a more
    efficient and flexible way.
    
    Thus I would suggest that this functionality be simply dropped from the
    pcilynx driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4e0c64cfc1126a2946487d4771168458bb9ba9be
Merge: fae91e7... 67d2c36...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Sep 5 09:20:31 2005 -0700

    Merge HEAD from gregkh@master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6.git

commit fae91e72b79ba9a21f0ce7551a1fd7e8984c85a6
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Aug 15 19:57:04 2005 +0200

    [PATCH] I2C: Drop I2C_DEVNAME and i2c_clientname
    
    I2C_DEVNAME and i2c_clientname were introduced in 2.5.68 [1] to help
    media/video driver authors who wanted their code to be compatible with
    both Linux 2.4 and 2.6. The cause of the incompatibility has gone since
    [2], so I think we can get rid of them, as they tend to make the code
    harder to read and longer to preprocess/compile for no more benefit.
    
    I'd hope nobody seriously attempts to keep media/video driver compatible
    across Linux trees anymore, BTW.
    
    [1] http://marc.theaimsgroup.com/?l=linux-kernel&m=104930186524598&w=2
    [2] http://www.linuxhq.com/kernel/v2.6/0-test3/include/linux/i2c.h
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b5439652af79106b792faf79b2c1e787e143ba0
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Aug 15 19:51:02 2005 +0200

    [PATCH] hwmon: separate maintainer
    
    Now that the hardware monitoring drivers are no more part of the i2c
    subsystem, they probably deserve their own entry in MAINTAINERS.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 020789e9cb688ac8b15a9950d25fe45492b23398
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Aug 13 13:04:32 2005 +0200

    [PATCH] I2C: Outdated i2c_adapter comment
    
    Delete an outdated comment about i2c_algorithm.id being computed
    from algo->id.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c2459cf257106cea5adbc83f084b76d0030eb700
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:52:35 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (7/7)
    
    The I2C_ALGO_* constants have no more users, delete them. Also update
    the comments in i2c-id.h so that they reflect the current state of the
    file.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1684a984303abbfc39aa8b59b0fe825c717811a9
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:51:10 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (6/7)
    
    In theory, there should be no more users of I2C_ALGO_* at this point.
    However, it happens that several drivers were using I2C_ALGO_* for
    adapter ids, so we need to correct these before we can get rid of all
    the I2C_ALGO_* definitions.
    
    Note that this also fixes a bug in media/video/tvaudio.c:
    
    	/* don't attach on saa7146 based cards,
    	   because dedicated drivers are used */
    	if ((adap->id & I2C_ALGO_SAA7146))
    		return 0;
    
    This test was plain broken, as it would succeed for many more adapters
    than just the saa7146: any those id would share at least one bit with
    the saa7146 id. We are really lucky that the few other adapters we want
    this driver to work with did not fulfill that condition.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c7a46533ff7ef9e1c51bae6e54208527c5275b24
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:41:56 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (5/7)
    
    Merge the algorithm id part (16 upper bits) of the i2c adapters ids
    into the definition of the adapters ids directly. After that, we don't
    need to OR both ids together for each i2c_adapter structure.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d8b9e1bad35fa3ea829990b9056c2a257d8fe79
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:40:19 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (4/7)
    
    There are no more users of i2c_algorithm.id, so we can finally drop
    this structure member.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 87c3d7a8bc0ff5c8d4481e509b407b6be1859925
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:38:52 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (3/7)
    
    Don't rely on i2c_algorithm.id to alter the i2c adapter's id, use the
    I2C_ALGO_* value directly instead, because i2c_algorithm will soon
    have no id member no more.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e51cc6b3a365e170d3ebe51c2308fdd42e027a46
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:36:49 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.id (2/7)
    
    Use the adapter id rather than the algorithm id to detect the i2c-isa
    pseudo-adapter. This saves one level of dereferencing, and the
    algorithm ids will soon be gone anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 975185880d55676b1352047e82a0cb84173c6c28
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Aug 11 23:33:24 2005 +0200

    [PATCH] I2C: Kill i2c_algorithm.name (1/7)
    
    The name member of the i2c_algorithm is never used, although all
    drivers conscientiously fill it. We can drop it completely, this
    structure doesn't need to have a name.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4c9337da37c877e53a64696fc8524f642d446cba
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Aug 9 20:28:10 2005 +0200

    [PATCH] I2C: Centralize 24RF08 corruption prevention
    
    The 24RF08 corruption would better be prevented at i2c-core level than
    at chip driver level, for several reasons:
    * The second quick write should happen as soon as possible after the
      first one, so as to limit the risk that another command is issued on
      the bus inbetween, causing the corruption.
    * As a matter of fact, the protection code at driver level was reworked
      at least three times already, which proves how hard it is to get it
      right there, while it's straightforward at i2c-core level.
    * It's easy to add a new driver that would need the protection, and
      forget to add it. This did happen already.
    * As additional probing addresses can be passed to most i2c chip drivers
      as module parameters, virtually every i2c chip driver would need the
      protection if we want to be really safe.
    * Why duplicate code when we can easily avoid it?
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a89ba0bc02e82920a0f4137aa5d655ac0366cc28
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Aug 9 20:17:55 2005 +0200

    [PATCH] I2C: Rewrite i2c_probe
    
    i2c_probe was quite complex and slow, so I rewrote it in a more
    efficient and hopefully clearer way.
    
    Note that this slightly changes the way the module parameters are
    handled. This shouldn't change anything for the most common cases
    though.
    
    For one thing, the function now respects the order of the parameters
    for address probing. It used to always do lower addresses first. The
    new approach gives the user more control.
    
    For another, ignore addresses don't overrule probe addresses anymore.
    This could have been restored the way it was at the cost of a few more
    lines of code, but I don't think it's worth it. Both lists are given
    as module parameters, so a user would be quite silly to specify the
    same addresses in both lists. The normal addresses list is the only
    one that isn't controlled by a module parameter, thus is the only one
    the user may reasonably want to remove an address from.
    
    Another significant change is the fact that i2c_probe() will no more
    stop when a detection function returns -ENODEV. Just because a driver
    found a chip it doesn't support isn't a valid reason to stop all
    probings for this one driver. This closes the long standing lm_sensors
    ticket #1807.
    
      http://www2.lm-sensors.nu/~lm78/readticket.cgi?ticket=1807
    
    I updated the documentation accordingly.
    
    In terms of algorithmic complexity, the new code is way better. If
    I is the ignore address count, P the probe address count, N the
    normal address count and F the force address count, the old code
    was doing 128 * (F + I + P + N) iterations max, while the new code
    does F + P + ((I+1) * N) iterations max. For the most common case
    where F, I and P are empty, this is down from 128 * N to N.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3b6c0634cc989f0735a1541ccf9288947685cab5
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Fri Aug 5 15:40:11 2005 +0000

    [PATCH] hwmon: VID table update
    
    This patch updates the VID entries, so any future
    Intel CPU will be detected as unknown rather than 9.0
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 19f673eddb5a406be72989fb57b7f286772b8cf4
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 22:12:09 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (11/11)
    
    Use the common vid_from_reg function in lm78 rather than
    reimplementing it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0f282706df877f8fd8869419e308d24eedb523b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Aug 1 22:50:08 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (10/11)
    
    I see very little reason why vid_from_reg is inlined. It is not
    exactly short, its parameters are seldom known in advance, and it is
    never called in speed critical areas. Uninlining it should cause
    little performance loss if any, and saves a signficant space as well
    as compilation time.
    
    As suggested by Alexey Dobriyan, I am leaving vid_to_reg inline for now,
    as it is short and has a single user so far.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ee70d3a33368038d41985474d9e70ac07f19651c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:57:33 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (09/11)
    
    Delete DEFAULT_VRM from hwmon-vid.h, it has no more users.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit da97a5a3279340462e8be6612feabc4b28883f87
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:54:28 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (08/11)
    
    Cleanup hwmon-vid a bit, fixing typos, rewording some comments and
    reindenting properly at places.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 303760b44a7a142cb9f4c9df4609fb63bbda98db
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:52:01 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (07/11)
    
    The only part left in i2c-sensor is the VRM/VRD/VID handling code.
    This is in no way related to i2c, so it doesn't belong there. Move
    the code to hwmon, where it belongs.
    
    Note that not all hardware monitoring drivers do VRM/VRD/VID
    operations, so less drivers depend on hwmon-vid than there were
    depending on i2c-sensor.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4b50261207c987913f076d867c2e154d71fd012
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:49:03 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (06/11)
    
    The only thing left in i2c-sensor.h are module parameter definition
    macros. It's only an extension of what i2c.h offers, and this extension
    is not sensors-specific. As a matter of fact, a few non-sensors drivers
    use them. So we better merge them in i2c.h, and get rid of i2c-sensor.h
    altogether.
    
    Signed-off-by: Jean Delvare <khali@linux-fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 96478ef3f3f71fa929cc905cc794993e312d9a5d
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:45:27 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (05/11)
    
    The i2c_detect function has no more user, delete it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2ed2dc3c116d26fc6a9384e83d136b15cc203b6c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:42:02 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (04/11)
    
    i2c_probe and i2c_detect now do the exact same thing and operate on
    the same data structure, so we can have everyone call i2c_probe.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b78ec31582c60578ee1d3bb470791d6dde96ccf7
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:36:24 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (03/11)
    
    We now have two identical structures, i2c_address_data in i2c-sensor.h
    and i2c_client_address_data in i2c.h. We can kill one of them, I choose
    to keep the one in i2c.h as it makes more sense (this structure is not
    specific to sensors.)
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ef8dec5d8b3e96e359f377f35cd8caff42fe6d58
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:33:23 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (02/11)
    
    The way i2c-sensor handles forced addresses could be optimized. It
    defines a structure (i2c_force_data) to associate a module parameter
    with a given kind value, but in fact this kind value is always the
    index of the structure in each array it is used in. So this additional
    value can be omitted, and still be deduced in the code handling these
    arrays.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9fc6adfa9adf2be84119a3c2592287f33bd1dff2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 21:20:43 2005 +0200

    [PATCH] hwmon: hwmon vs i2c, second round (01/11)
    
    Add support for kind-forced addresses to i2c_probe, like i2c_detect
    has for (essentially) hardware monitoring drivers.
    
    Note that this change will slightly increase the size of the drivers
    using I2C_CLIENT_INSMOD, with no immediate benefit. This is a
    requirement if we want to merge i2c_probe and i2c_detect though, and
    seems a reasonable price to pay in comparison with the previous
    cleanups which saved much more than that (such as the i2c-isa cleanup
    or the i2c address ranges removal.)
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5cb802293e87035920d47979107af8cf42a2f62a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jul 29 20:51:54 2005 +0200

    [PATCH] hwmon: lm85: trivial cleanups
    
    Remove an unused macro and an outdated comment from the lm85 driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 53ae11b08353268c4012ef107bf205a0724d71aa
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jul 28 23:14:59 2005 +0200

    [PATCH] hwmon: move SENSORS_LIMIT to hwmon.h
    
    Move SENSORS_LIMIT from i2c-sensor.h to hwmon.h, as it is in no way
    related to i2c.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b6d7b3d1b5a388b7e9af2629a9ecccedee064078
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jul 31 19:02:53 2005 +0200

    [PATCH] I2C: Improve core debugging messages
    
    The debugging messages in i2c-core are more confusing than helpful. Some
    lack their trailing newline, some lack a prefix, some are redundant,
    some lack precious information. Here is my attempt to introduce some
    standardization in there.
    
    I also changed two messages in i2c-dev to make it clear they come from
    i2c-dev.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 014e45380a3b96f2ebd8ff0d115b7a33c06d06d1
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jul 28 23:08:43 2005 +0200

    [PATCH] I2C: fix typo in documentation
    
    Fix a typo in the i2c documentation: the i2c bus scanning tool found in
    lm_sensors is called i2cdetect, not i2c_detect.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48edcb65ddcd93b6421831ad133599aacea9724a
Author: Ian Campbell <icampbell@arcom.com>
Date:   Wed Aug 10 08:51:16 2005 +0100

    [PATCH] I2C: i2c-algo-pca -- gracefully handle a busy bus
    
    I've been running with this patch for a while now, and while I've never
    seen it trigger except with buggy hardware I think it is a cleaner way
    to handle a busy bus. I had -EBUSY until about 10 minutes ago but -EIO
    seems to be what most of the existing algo drivers will return in the
    same circumstances.
    
    Signed-off-by: Ian Campbell <icampbell@arcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cdcb19219714c796ddef1202e952566c5f86354d
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jul 28 23:09:40 2005 +0200

    [PATCH] I2C: inline i2c_adapter_id
    
    We could inline i2c_adapter_id, as it is really, really short. Doing
    so saves a few bytes both in i2c-core and in the drivers using this
    function.
    
                                                before     after      diff
    drivers/hwmon/adm1026.ko                     41344     41305       -39
    drivers/hwmon/asb100.ko                      27325     27246       -79
    drivers/hwmon/gl518sm.ko                     20824     20785       -39
    drivers/hwmon/it87.ko                        26419     26380       -39
    drivers/hwmon/lm78.ko                        21424     21385       -39
    drivers/hwmon/lm85.ko                        41034     40939       -95
    drivers/hwmon/w83781d.ko                     39561     39514       -47
    drivers/hwmon/w83792d.ko                     32979     32932       -47
    drivers/i2c/i2c-core.ko                      24708     24531      -177
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e6cfb3ad7209e4f4dcdc14f5fc437db55667041f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 27 21:32:02 2005 +0200

    [PATCH] hwmon: tag super-i/o find functions __init
    
    Super-I/O find functions in hardware monitoring drivers can be tagged
    __init as they are only called from functions themselves tagged __init.
    Two of them (smsc47b397 and w83627ehf) already do, but the other four
    of them (it87, pc87360, smsc47m1 and w83627hf) did not.
    
    This saves a few bytes of memory after the drivers are loaded, 192 in
    the case of the it87 driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7bef559455fc71f66f8573cc1aafe1dd33966c1c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 27 22:14:49 2005 +0200

    [PATCH] I2C: refactor message in i2c_detach_client
    
    We could refactor the error message 34 different i2c drivers print if
    i2c_detach_client() fails in this function itself. Saves quite a few
    lines of code. Documentation is updated to reflect that change.
    
    Note that this patch should be applied after Rudolf Marek's w83792d
    patches.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1ff4e3065b41847b6fe5908b1214cb508dd49e61
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Wed Jul 27 09:25:28 2005 +0000

    [PATCH] I2C: W83792D documentation 3/3
    
    This patch adds documentation entry for W83792D chip.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ce785ab460ce8728a9daf337ba8fab3ba692b6aa
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Wed Jul 27 11:50:18 2005 +0000

    [PATCH] I2C: W83792D add hwmon class register 2/3
    
    This patch adds registration of hwmon class. Tested with help of i2c-stub.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5563e27d3a42667734e81c1cb8ad72bff76321f6
Author: Rudolf Marek <R.Marek@sh.cvut.cz>
Date:   Wed Jul 27 11:43:47 2005 +0000

    [PATCH] I2C: W83792D driver 1/3
    
    I would like to announce support for W83792D chip. This driver was developed
    by Winbond Electronics Corp. I added sysfs attributes callbacks infrastructure
    plus various code fixes and codingstyle cleanups. I would like to thank Winbond
    for supporting free software.
    
    This patch is against 2.6.13rc3 plus hwmon-class and hwmon-split.
    Separate patch for documantation and hwmon class register will follow.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Chunhao Huang <DZShen@Winbond.com.tw>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 570aefc361d3315ec6749f573009286106b0b2d8
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 20 00:09:03 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (9/9)
    
    Move the definitions of i2c_is_isa_client and i2c_is_isa_adapter from
    i2c.h to i2c-isa.h. Only hybrid drivers still need them.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02ff982c6911de1484e13a1d765d7bd31a0f8fee
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 20 00:05:33 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (8/9)
    
    Kill all uses of i2c_is_isa_adapter except for the hybrid drivers (it87,
    lm78, w83781d). The i2c-isa adapter not being registered with the i2c
    core anymore, drivers don't have to fear being erroneously attached to
    it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5071860aba7fc69279ab822638ed2c2e4549f9fd
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 20 00:02:32 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (7/9)
    
    Kill normal_isa in header files, documentation and all chip drivers, as
    it is no more used.
    
    normal_i2c could be renamed to normal, but I decided not to do so at the
    moment, so as to limit the number of changes. This might be done later
    as part of the i2c_probe/i2c_detect merge.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4926c0d4de77c5396a274ee7941ed7fc02afed26
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Jul 19 23:57:54 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (6/9)
    
    Kill all isa-related stuff from i2c_detect, it's not used anymore.
    
    This is one major step in the directiom of merging i2c_probe and
    i2c_detect. The last obstacle I can think of is the different way forced
    addresses work between sensors and non-sensors i2c drivers. I'll deal
    with that in a later patchset.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d8672c5a6ba0d3f1d8d3ad61ef67868941364f0
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Jul 19 23:56:35 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (5/9)
    
    Call the ISA chip drivers detection function directly instead of relying
    on i2c_detect. The net effect is that address lists won't be handled
    anymore, but they were mostly useless in the ISA case anyway (pc87360,
    smsc47m1, smsc47b397 had already dropped them).
    
    We don't need to handle multiple devices, all we may need is a way to
    force a given address instead of the original one (some drivers already
    do: sis5595, via686a, w83627hf), and, for drivers supporting multiple
    chips, a way to force one given kind. All this may be added later on
    demand, but I actually don't think there will be much demand.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5042c7d752fe72c6924037058367f63902e68c5c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Jul 19 23:53:07 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (4/9)
    
    All ISA hardware monitoring drivers (including hybrid drivers) now have
    a hard dependency on i2c-isa, so they must select I2C_ISA. As a result,
    CONFIG_I2C_ISA doesn't need to be left visible to the user. The good
    thing here is that users will stop complaining that some driver doesn't
    work just because they forgot to compile or load i2c-isa.
    
    At this point, all drivers are working again and the cleanup phase can
    begin.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fde0950903ce8cc38a91dd095280decceda2ff82
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Jul 19 23:51:07 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (3/9)
    
    Convert the 10 ISA hardware monitoring drivers (it87, lm78, pc87360,
    sis5595, smsc47b397, smsc47m1, via686a, w83627hf, w83627ehf, w83781d) to
    explicitely register with i2c-isa. For hybrid drivers (it87, lm78,
    w83781d), we now have two separate instances of i2c_driver, one for the
    I2C interface of the chip, and one for ISA interface. In the long run,
    the one for ISA will be replaced with a different driver type.
    
    At this point, all drivers are working again, except for missing
    dependencies in Kconfig.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 400c455eaa0d0819d18cd42a74070e0e238a73dc
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Jul 19 23:48:43 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (2/9)
    
    Convert i2c-isa from a dumb i2c_adapter into a pseudo i2c-core for ISA
    hardware monitoring drivers. The isa i2c_adapter is no more registered
    with i2c-core, drivers have to explicitely connect to it using the new
    i2c_isa_{add,del}_driver interface.
    
    At this point, all ISA chip drivers are useless, because they still
    register with i2c-core in the hope i2c-isa is registered there as well,
    but it isn't anymore.
    
    The fake bus will be named i2c-9191 in sysfs. This is the number it
    already had internally in various places, so it's not exactly new,
    except that now the number is seen in userspace as well. This shouldn't
    be a problem until someone really has 9192 I2C busses in a given system
    ;)
    
    The fake bus will no more show in "i2cdetect -l", as it won't be seen by
    i2c-dev anymore (not being registered with i2c-core), which is a good
    thing, as i2cdetect/i2cdump/i2cset cannot operate on this fake bus
    anyway.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit efde723fdac02111872bff606ef362074fc1efa8
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 20 23:03:50 2005 +0200

    [PATCH] I2C: Separate non-i2c hwmon drivers from i2c-core (1/9)
    
    Temporarily export a few structures and functions from i2c-core, because we
    will soon need them in i2c-isa.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 943b0830cebe4711354945ed3cb44e84152aaca0
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Fri Jul 15 21:39:18 2005 -0400

    [PATCH] I2C hwmon: add hwmon sysfs class to drivers
    
    This patch modifies sensors chip drivers to make use of the new
    sysfs class "hwmon".
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1236441f38b6a98caf4c7983e7efdecc2d1527b5
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Fri Jul 15 21:38:08 2005 -0400

    [PATCH] I2C hwmon: hwmon sysfs class
    
    This patch adds the sysfs class "hwmon" for use by hardware monitoring
    (sensors) chip drivers.  It also fixes up the related Kconfig/Makefile
    bits.
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8dd2d2ca7fafdedaebd1862e954fccaef212f1e1
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 27 21:33:15 2005 +0200

    [PATCH] hwmon: Document on the W83627EHG chip
    
    Document the fact that the W83627EHG is compatible with the W83627EHF.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 27fe048eb3787d29bf9cf9d6d12077bb8af869a6
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 27 21:30:16 2005 +0200

    [PATCH] hwmon: kill client name lm78-j
    
    Drop the separate client name for the LM78-J chip. This is really
    only a later revision of the LM78, with almost no difference and
    no difference the driver handles in any case.
    
    This was the only client name that had a dash in it, and special care
    had to be taken in libsensors because of it. As we plan to write a new
    library soon, I'd like to get rid of this exception before we do.
    
    As a nice side effect, it saves 876 bytes in lm78.ko.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e647ecf15e365679f0528d7815ab4db0d4802918
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Jul 27 21:28:28 2005 +0200

    [PATCH] hwmon: soften lm75 initialization
    
    The LM75 initialization is a bit agressive, it arbitrarily reconfigures
    the chip. Make it only change the bit it needs. This is a port from
    the 2.4 kernel version of the driver (lm_sensors).
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 17f990c87a1e5addc49b99a53b3d2a2fac9680e9
Author: Ben Gardner <bgardner@wabtec.com>
Date:   Wed Jul 27 12:43:14 2005 -0500

    [PATCH] I2C: max6875 code cleanup
    
    Remove an unused local variable and change the subclient name.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0283fe6c3bdbe9ca9aefa28b24883ec1dee3ccbd
Author: Ben Gardner <bgardner@wabtec.com>
Date:   Wed Jul 27 12:43:21 2005 -0500

    [PATCH] I2C: max6875 documentation cleanup
    
    Fix a spelling error and change a sysfs name.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a61fc683ae1b7871d8d81ac5025af1a923731547
Author: Ben Gardner <bgardner@wabtec.com>
Date:   Wed Jul 27 12:43:03 2005 -0500

    [PATCH] I2C: add kobj_to_i2c_client
    
    Move the inline function kobj_to_i2c_client() from max6875.c to i2c.h.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5033017c2678df9dc75be0139f19701ff224a498
Author: Hans-Frieder Vogt <hfvogt@gmx.net>
Date:   Sat Jul 23 15:33:39 2005 +0200

    [PATCH] I2C: cleanup of i2c-nforce2
    
    attached is a small patch that removes unused code from i2c-nforce2 and
    adds a single debug message. The patch is against 2.6.13-rc3-mm1.
    I have tested the patch with 2.6.13-rc3: compiles cleanly and works as
    without the patch (as expected).
    
    Signed-off-by: Hans-Frieder Vogt <hfvogt@arcor.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8decc658a8800e61f13b9240125f2a34d7fd3f5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jul 27 12:43:03 2005 -0500

    [PATCH] I2C: fix max6875 build error
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 93ffa435147abd47ebd7d7d24176b3c653aef940
Author: Ben Gardner <bgardner@wabtec.com>
Date:   Tue Jul 12 13:21:50 2005 -0500

    [PATCH] I2C: update max6875 documentation
    
    Updates to the max6875 driver documentation.
    This brings the documentation in sync with the code, which was recently
    simplified.
    
    This patch is based off 2.6.13-rc2-mm2.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc769ff8f5f6e3d249bfde082653e5bf1c2b5698
Author: Ben Gardner <bgardner@wabtec.com>
Date:   Tue Jul 12 13:21:11 2005 -0500

    [PATCH] I2C: simplify max6875 driver
    
    This is an update to the max6875 driver.
    It no longer does any detection, so the address must be forced on module load.
    It only makes available the user EEPROM (read-only).
    
    This patch is based off 2.6.13-rc2-mm2.
    
    Signed-off-by: Ben Gardner <bgardner@wabtec.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 67d2c36e901403bb97cb79ddb44d702c3284d0ba
Merge: 94f8c66... 1cc7724...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 06:00:45 2005 -0700

    Merge watchdog driver updates
    
    Automated merge from
    
    	master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog
    
    failed due to duplicate different changes to Kconfig file. Manually fixed
    up. Hopefully.

commit 94f8c66e5e543d79231abf203d6e514ecb668688
Merge: da1f136... d0bd992...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 05:50:36 2005 -0700

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 908f9c485042e516bb3749f4361129a94772fe26
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Sep 5 21:51:30 2005 +1000

    drm: fix MGA on non AGP systems
    
    Al Viro noticed that MGA wouldn't build on non AGP systems.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit f210973bb6d17aa220c797e8ea23d127d96859b7
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Sep 5 21:33:44 2005 +1000

    drm: small cleanups
    
    This patch contains the following small cleanups:
    - make two needlessly global functions static
    - drm_sysfs.c: every file should #include the header with the prototypes
                  of the global functions it is offering
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 89625eb186b9b0b9454d44126f8b1bcc72ad93b7
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Mon Sep 5 21:23:23 2005 +1000

    drm: fix issue with handle lookup for a 0 handle
    
    On 32-bit PPC a 0 handle is valid for AGP space, the 32/64 lookup
    doesn't handle 0 correctly.
    
    From: Ben Herrenschmidt <benh@kernel.crashing.org> and Paul Mackerras <paulus@samba.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9d88347758c58ee5b4ac9cd594b96eaafa5e08bb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Sep 5 10:21:04 2005 +0100

    [ARM] Remove unused DYN_TICK_* macros
    
    Neither DYN_TICK_SKIPPING nor DYN_TICK_SUITABLE are used on ARM.
    Remove them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d0bd99299bf933ae006d2dc6a31ffcba482ae3f2
Merge: 6f10623... 586a4ac...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Sep 5 05:20:33 2005 -0400

    /spare/repo/libata-dev branch 'iomap-try3'

commit 586a4ac509b041df55f26c2b26cd7cbdaf9b045d
Merge: 374b187... 6b39374...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Sep 5 05:16:50 2005 -0400

    /spare/repo/libata-dev branch 'master'

commit da1f136c26d45c57e8b2d711bf17a6e5ec4de2d1
Merge: 64c4813... 1656fa5...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 00:18:09 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc

commit 64c4813d9ea0d646a0652bd9dcc5b40db6ddce69
Merge: babf68d... 664399e...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 00:17:25 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit babf68de5848f7e4b97c9c4a2d5e30598b825387
Merge: e766f1c... 9b4e3b1...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 00:14:47 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit e766f1cc596078b1603ac2c96617660c4c7e2d81
Merge: 4846764... ebede60...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 00:12:58 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 48467641bcc057f7cba3b6cbbe66cb834d64cc81
Merge: 3863e72... d70063c...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Mon Sep 5 00:11:50 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 3863e72414fa2ebf5f3b615d1bf99de32e59980a
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Sep 3 15:58:06 2005 -0700

    [PATCH] s390: disconnected 3270 console
    
    Fix reboot with a disconnected 3270 console.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9513e5e3f5a6b429da8a9fd4330f71f1e547c8e0
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Sep 3 15:58:05 2005 -0700

    [PATCH] s390: spinlock corner case
    
    On s390 the lock value used for spinlocks consists of the lower 32 bits of the
    PSW that holds the lock.  If this address happens to be on a four gigabyte
    boundary the lock is left unlocked.  This allows other cpus to grab the same
    lock and enter a lock protected code path concurrently.  In theory this can
    happen if the vmalloc area for the code of a module crosses a 4 GB boundary.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c563077e526d130b8c9aab4e75116551eb5fdc2d
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Sep 3 15:58:04 2005 -0700

    [PATCH] s390: compat system calls
    
    Use TIF bit to tell if a process is running in 31 bit mode instead of checking
    the addressing mode bits of the PSW.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dee702fcb197d80c1a94650fb611539dd8135ce
Author: Eric Rossman <edrossma@us.ibm.com>
Date:   Sat Sep 3 15:58:03 2005 -0700

    [PATCH] s390: crypto driver update
    
    crypto device driver update:
    
     - Suppress syslog messages for some return codes.
    
     - Fix incorrect bounds checking in /proc interface.
    
     - Remove hotplug calls.
    
     - Remove linux version checks.
    
     - Remove device workqueue on module unload.
    
    Signed-off-by: Eric Rossman <edrossma@us.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6d09449d53f5aa7c67b1be3e90d7b7ab2aad09c
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Sep 3 15:58:02 2005 -0700

    [PATCH] s390: pfault interrupt race
    
    There is a race in pfault_interrupt.  That function gets called two times for
    each pfault notification.  Once with a subcode of 0 to indicate that a real
    page is not available and once with a subcode of 0x80 to indicate that the
    page is present again.
    
    Since the two external interrupts can be delivered on two different cpus the
    order in which the two calls are made is unpredictable.  It is possible that
    the subcode 0x80 interrupt is completed before the subcode 0x00 interrupt has
    done the wake_up() call.
    
    To avoid calling wake_up() on an already removed task structure proper task
    structure reference counting is needed.  Increase the reference counter in the
    subcode 0x00 interrupt before setting pfault_wait to zero and return the
    reference after the wake_up call.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c24da79e29537f0e240a331220a1c46cb9bc085
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sat Sep 3 15:58:01 2005 -0700

    [PATCH] s390: reIPL fix and extern/static inline
    
    Common i/o layer changes:
    
    - Collect the irb at the correct subchannel when waiting for the clear
      interrupt during subchannel cleaning befor reIPL - don't stop at the first
      interrupt that comes in.
    
    - Change "extern __inline__" to "static inline".
    
    - Remove unneeded qdio includes.
    
    Signed-off-by: Cornelia Huck <cohuck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd49f41aa0c125ec649c56a45337b3024d6b1736
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sat Sep 3 15:58:00 2005 -0700

    [PATCH] s390: 64 bit diag250 support
    
    Add support for diag 250 access to dasd devices for 64 bit kernels.  In
    addition fix detach/attach for diag disks.  The VM control block needs to get
    recreated by a call to mdsk_init_io.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6eb7b7703ac4b3401b74f411c8c51ded214bf19
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sat Sep 3 15:57:58 2005 -0700

    [PATCH] s390: deadlock in dasd_devmap
    
    Reintroduce a read-only copy of the devmap features in the device struct.
    This is necessary to solve a deadlock on the dasd_devmap_lock which is
    acquired by dasd_get_features called from the dasd tasklet.  The current
    implementation of devmap doesn't allow to call any devmap function from
    interrupt or softirq context.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 942eaabd5d77522223a311ed9bddaaa3cefde27d
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Sat Sep 3 15:57:58 2005 -0700

    [PATCH] s390: debug feature changes
    
    debug feature changes/bug fixes:
    
    - Use get_clock() function instead of private inline assembly.
    
    - Use 'struct timeval' instead of 'struct timespec' for call to
      tod_to_timeval().  Now the microsecond part of the timestamp is correct
      again.
    
    - Fix a locking problem: when creating a snapshot of the current content
      of the debug areas, lock the entire debug_info object.
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae6aa2ea8973e200cb3d0564a64a1b441d233428
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Sep 3 15:57:56 2005 -0700

    [PATCH] s390: machine check handler bugs
    
    The new machine check handler still has a few bugs.
    
    1) The system entry time has to be stored in the machine check handler,
    
    2) the machine check return psw may not be stored at the usual place
       because it might overwrite the return psw of the interrupted context,
    
    3) the return address for the call to s390_handle_mcck in the i/o interrupt
       handler is not correct,
    
    4) the system call cleanup has to take the different save area of the
       machine check handler into account,
    
    5) the machine check handler may not call UPDATE_VTIME before
       CREATE_STACK_FRAME, and
    
    6) the io leave path needs a critical section cleanup to make sure that the
       TIF_MCCK_PENDING bit is really checked before switching back to user space.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c139862b8831261d57de02716b92f82e5fb463b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:57:55 2005 -0700

    [PATCH] xtensa: delete accidental file
    
    This file seems to be an accident.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d99cf715a0751b0c819cdd8616c8870c1dd51910
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:57:53 2005 -0700

    [PATCH] xtensa: replace 'extern inline' with 'static inline'
    
    "extern inline" doesn't make sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ef939054139ef857cebbec07cbd12d7cf7beedd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:52 2005 -0700

    [PATCH] uml: fix x86_64 page leak
    
    We were leaking pmd pages when 3_LEVEL_PGTABLES was enabled.  This fixes that.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9dfefe423a7633d81310c7b06c5566c74f9167b
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:51 2005 -0700

    [PATCH] uml: fix advanced sysemu check
    
    cleanup and fix the check for advanced sysemu (PTRACE_SYSEMU_SINGLESTEP
    option)
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9838d86536fe17e76d19bf3e737100fae618396
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:51 2005 -0700

    [PATCH] uml: allow host capability usage to be disabled
    
    Add new cmdline setups:
      - noprocmm
      - noptracefaultinfo
    In case of testing, they can be used to switch off usage of
    /proc/mm and PTRACE_FAULTINFO independently.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07bf731e4b95d7c9ea9dbacd1fc4a041120dfffb
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:50 2005 -0700

    [PATCH] uml: skas0 stubs now check system call return values
    
    Change syscall-stub's data to include a "expected retval".
    
    Stub now checks syscalls retval and aborts execution of syscall list, if
    retval != expected retval.
    
    run_syscall_stub prints the data of the failed syscall, using the data pointer
    and retval written by the stub to the beginning of the stack.
    
    one_syscall_stub is removed, to simplify code, because only some instructions
    are saved by one_syscall_stub, no host-syscall.
    
    Using the stub with additional data (modify_ldt via stub)
    is prepared also.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b51304ed3184826fb262c1e9d3e58b0b00fd083
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:49 2005 -0700

    [PATCH] uml: increase granularity of host capability checking
    
    This change enables SKAS0/SKAS3 to work with all combinations of /proc/mm and
    PTRACE_FAULTINFO being available or not.
    
    Also it changes the initialization of proc_mm and ptrace_faultinfo slightly,
    to ease forcing SKAS0 on a patched host.  Forcing UML to run without /proc/mm
    or PTRACE_FAULTINFO by cmdline parameter can be implemented with a setup
    resetting the related variable.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60d339f6fe0831060600c62418b71a62ad26c281
Author: Gennady Sharapov <gennady.v.sharapov@intel.com>
Date:   Sat Sep 3 15:57:47 2005 -0700

    [PATCH] uml: move libc-dependent startup and signal code
    
    The serial UML OS-abstraction layer patch (um/kernel dir).
    
    This moves all systemcalls from process.c file under os-Linux dir and join
    process.c and process_kern.c files.
    
    Signed-off-by: Gennady Sharapov <gennady.v.sharapov@intel.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09ace81c1d737bcbb2423db235ac980cac4d5de9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:46 2005 -0700

    [PATCH] uml: add host AIO support to block driver
    
    This adds AIO support to the ubd driver.
    
    The driver breaks a struct request into IO requests to the host, based on the
    hardware segments in the request and on any COW blocks covered by the request.
    
    The ubd IO thread is gone, since there is now an equivalent thread in the AIO
    module.
    
    There is provision for multiple outstanding requests now.  Requests aren't
    retired until all pieces of it have been completed.  The AIO requests have a
    shared count, which is decremented as IO operations come in until it reaches
    0.  This can be possibly moved to the request struct - haven't looked at this
    yet.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75e5584c89d213d6089f64f22cd899fb172e4c95
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:45 2005 -0700

    [PATCH] uml: use host AIO support
    
    This patch makes UML use host AIO support when it (and
    /usr/include/linux/aio_abi.h) are present.  This is only the support, with no
    consumers - a consumer is coming in the next patch.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30f7dabb083f8ff4ce541b5ac4e5d70cc173051a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Sep 3 15:57:43 2005 -0700

    [PATCH] uml: build cleanups
    
    Added missing include list to uml AFLAGS
    
    Killed magic for stubs.  [So] - it was needed only because of messed AFLAGS
    Switched segv_stubs.c to kernel CFLAGS sans profile, instead of user ones
    Killed STUBS_CFLAGS - it's not needed and the only remaining use had been
    gratitious - it only polluted CFLAGS
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e32dacb9f481fd6decb41adb28e720c923d34f54
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:42 2005 -0700

    [PATCH] uml: system call path cleanup
    
    This merges two sets of files which had no business being split apart in the
    first place.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08964c565b2fe49e338ffbe4907adcc19647ef16
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:41 2005 -0700

    [PATCH] uml: merge duplicated page table code
    
    There is a lot of code which is duplicated between the 2 and 3 level
    implementation, with the only difference that the 3-level implementation is a
    bit more generalized (instead of accessing directly pte_t.pte, it uses the
    appropriate access macros).
    
    So this code is joined together.
    
    As obvious, a "core code nice cleanup" is not a "stability-friendly patch" so
    usual care applies.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c56004901fa5dcf55f92318f192ab3c0e87db2d1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:36 2005 -0700

    [PATCH] uml: TLB operation batching
    
    This adds VM op batching to skas0.  Rather than having a context switch to and
    from the userspace stub for each address space change, we write a number of
    operations to the stub data page and invoke a different stub which loops over
    them and executes them all in one go.
    
    The operations are stored as [ system call number, arg1, arg2, ... ] tuples.
    
    The set is terminated by a system call number of 0.  Single operations, i.e.
    page faults, are handled in the old way, since that is slightly more
    efficient.
    
    For a kernel build, a minority (~1/4) of the operations are part of a set.
    These sets averaged ~100 in length, so for this quarter, the context switching
    overhead is greatly reduced.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77fa5adcda6d686d2f45a2b55dcb9a03e7d33fa1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:34 2005 -0700

    [PATCH] uml: remove duplicated exports
    
    Al Viro <viro@www.linux.org.uk> spotted a bunch of duplicated
    exports - this removes them.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02edeb586ae4cdd17778923674700edb732a4741
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:33 2005 -0700

    [PATCH] uml: mark SMP on UML/x86_64 as broken
    
    Noticed by Al Viro <viro@www.linux.org.uk> - SMP on x86_64 is
    fundamentally broken due to UML's reuse of the host arch's percpu stuff.  This
    is OK on x86, but the x86_64 pda stuff just won't work for UML.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13abf8130139c2ccd4962a7e5a8902be5e6cb5a7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Sep 3 15:57:31 2005 -0700

    [PATCH] uml: remove libc reference in build
    
    Remove an unneeded reference to libc.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93ea5a5b5c71ddbefd4082627d8f33e4bc038a6f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Sep 3 15:57:30 2005 -0700

    [PATCH] uml: build cleanup
    
    Build cleanups
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec7cf783dd6cf5c8fb6b6767560686ed28d1cd6d
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:29 2005 -0700

    [PATCH] uml: error path cleanup
    
    This cleans up the error path in ubd_open, causing it now to call ubd_close
    appropriately when something fails.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7efd08c85523f9468a6a8748d6f02b3e73967569
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Sep 3 15:57:28 2005 -0700

    [PATCH] uml: fix a macro typo
    
    Fix a macro typo which could break if the macro is passed arguments with
    side-effects.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e54a5dfb960053437f464a7ce372a8acc293fdcb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Sep 3 15:57:27 2005 -0700

    [PATCH] uml: fix signal frame copy_user
    
    The copy_user stuff in the signal frame code was broke.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b52166cf72f0826c6d8fa0541c7d4ae39c5a146
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:57:26 2005 -0700

    [PATCH] uml: fault handler micro-cleanups
    
    Avoid chomping low bits of address for functions doing it by themselves,
    fix whitespace, add a correctness checking.
    
    I did this for remap-file-pages protection support, it was useful on its
    own too.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e40cd383ccc7c9f8b338c56ce28c326e25eb2fe
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:57:25 2005 -0700

    [PATCH] uml: fixes performance regression in activate_mm and thus exec()
    
    Normally, activate_mm() is called from exec(), and thus it used to be a
    no-op because we use a completely new "MM context" on the host (for
    instance, a new process), and so we didn't need to flush any "TLB entries"
    (which for us are the set of memory mappings for the host process from the
    virtual "RAM" file).
    
    Kernel threads, instead, are usually handled in a different way.  So, when
    for AIO we call use_mm(), things used to break and so Benjamin implemented
    activate_mm().  However, that is only needed for AIO, and could slow down
    exec() inside UML, so be smart: detect being called for AIO (via
    PF_BORROWED_MM) and do the full flush only in that situation.
    
    Comment also the caller so that people won't go breaking UML without
    noticing.  I also rely on the caller's locks for testing current->flags.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Benjamin LaHaise <bcrl@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed1b58d8b53519e10a35c6a2bb49cac35f439621
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:24 2005 -0700

    [PATCH] uml: fix SIGWINCH handler race while waiting for signals.
    
    If a SIGWINCH comes in, while winch_thread() isn't waiting in wait(),
    winch_thread could miss signals.  It isn't very probable, that anyone will
    see this causing trouble, as it would need a very special timing, that a
    missed SIGWINCH results in a wrong window size.
    
    So, this is a minor problem.  But why not fix, as it can be done so easy?
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0221575903ad68debea57679b5b46575bf57afb1
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:57:23 2005 -0700

    [PATCH] uml: workaround GDB problems on debugging
    
    Apparently, GDB gets confused when we do an execvp() on ourselves.
    
    Since it's simply done to allocate further space for command line arguments
    (which we'll use to allow gathering the startup command line for guest
    processes through the host), allow the user to disable that to get a
    debuggable UML binary.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 640aa46e25922a00b805e6b0d0b5181ad9cf736a
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:57:22 2005 -0700

    [PATCH] uml: SYSEMU: slight cleanup and speedup
    
    As a follow-up to "UML Support - Ptrace: adds the host SYSEMU support, for
    UML and general usage" (i.e.  uml-support-* in current mm).
    
    Avoid unconditionally jumping to work_pending and code copying, just reuse
    the already existing resume_userspace path.
    
    One interesting note, from Charles P.  Wright, suggested that the API is
    improvable with no downsides for UML (except that it will have to support
    yet another host API, since dropping support for the current API, for UML,
    is not reasonable from users' point of view).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Charles P. Wright <cwright@cs.sunysb.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab1c23c24471c760c573f4fb0dd78e166ddfd844
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:21 2005 -0700

    [PATCH] SYSEMU: fix sysaudit / singlestep interaction
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    This is simply an adjustment for "Ptrace - i386: fix Syscall Audit interaction
    with singlestep" to work on top of SYSEMU patches, too.  On this patch, I have
    some doubts: I wonder why we need to alter that way ptrace_disable().
    
    I left the patch this way because it has been extensively tested, but I don't
    understand the reason.
    
    The current PTRACE_DETACH handling simply clears child->ptrace; actually this
    is not enough because entry.S just looks at the thread_flags; actually,
    do_syscall_trace checks current->ptrace but I don't think depending on that is
    good, at least for performance, so I think the clearing is done elsewhere.
    For instance, on PTRACE_CONT it's done, but doing PTRACE_DETACH without
    PTRACE_CONT is possible (and happens when gdb crashes and one kills it
    manually).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Roland McGrath <roland@redhat.com>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b38f0064e4e0b9ec626e39f0740b1cf2e295743
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:20 2005 -0700

    [PATCH] Uml support: add PTRACE_SYSEMU_SINGLESTEP option to i386
    
    This patch implements the new ptrace option PTRACE_SYSEMU_SINGLESTEP, which
    can be used by UML to singlestep a process: it will receive SINGLESTEP
    interceptions for normal instructions and syscalls, but syscall execution will
    be skipped just like with PTRACE_SYSEMU.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8c86cecd1d1a2722acb28a01d1babf7b6993697
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:19 2005 -0700

    [PATCH] Uml support: reorganize PTRACE_SYSEMU support
    
    With this patch, we change the way we handle switching from PTRACE_SYSEMU to
    PTRACE_{SINGLESTEP,SYSCALL}, to free TIF_SYSCALL_EMU from double use as a
    preparation for PTRACE_SYSEMU_SINGLESTEP extension, without changing the
    behavior of the host kernel.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed75e8d58010fdc06e2c3a81bfbebae92314c7e3
Author: Laurent Vivier <LaurentVivier@wanadoo.fr>
Date:   Sat Sep 3 15:57:18 2005 -0700

    [PATCH] UML Support - Ptrace: adds the host SYSEMU support, for UML and general usage
    
          Jeff Dike <jdike@addtoit.com>,
          Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>,
          Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    
    Adds a new ptrace(2) mode, called PTRACE_SYSEMU, resembling PTRACE_SYSCALL
    except that the kernel does not execute the requested syscall; this is useful
    to improve performance for virtual environments, like UML, which want to run
    the syscall on their own.
    
    In fact, using PTRACE_SYSCALL means stopping child execution twice, on entry
    and on exit, and each time you also have two context switches; with SYSEMU you
    avoid the 2nd stop and so save two context switches per syscall.
    
    Also, some architectures don't have support in the host for changing the
    syscall number via ptrace(), which is currently needed to skip syscall
    execution (UML turns any syscall into getpid() to avoid it being executed on
    the host).  Fixing that is hard, while SYSEMU is easier to implement.
    
    * This version of the patch includes some suggestions of Jeff Dike to avoid
      adding any instructions to the syscall fast path, plus some other little
      changes, by myself, to make it work even when the syscall is executed with
      SYSENTER (but I'm unsure about them). It has been widely tested for quite a
      lot of time.
    
    * Various fixed were included to handle the various switches between
      various states, i.e. when for instance a syscall entry is traced with one of
      PT_SYSCALL / _SYSEMU / _SINGLESTEP and another one is used on exit.
      Basically, this is done by remembering which one of them was used even after
      the call to ptrace_notify().
    
    * We're combining TIF_SYSCALL_EMU with TIF_SYSCALL_TRACE or TIF_SINGLESTEP
      to make do_syscall_trace() notice that the current syscall was started with
      SYSEMU on entry, so that no notification ought to be done in the exit path;
      this is a bit of a hack, so this problem is solved in another way in next
      patches.
    
    * Also, the effects of the patch:
    "Ptrace - i386: fix Syscall Audit interaction with singlestep"
    are cancelled; they are restored back in the last patch of this series.
    
    Detailed descriptions of the patches doing this kind of processing follow (but
    I've already summed everything up).
    
    * Fix behaviour when changing interception kind #1.
    
      In do_syscall_trace(), we check the status of the TIF_SYSCALL_EMU flag
      only after doing the debugger notification; but the debugger might have
      changed the status of this flag because he continued execution with
      PTRACE_SYSCALL, so this is wrong.  This patch fixes it by saving the flag
      status before calling ptrace_notify().
    
    * Fix behaviour when changing interception kind #2:
      avoid intercepting syscall on return when using SYSCALL again.
    
      A guest process switching from using PTRACE_SYSEMU to PTRACE_SYSCALL
      crashes.
    
      The problem is in arch/i386/kernel/entry.S.  The current SYSEMU patch
      inhibits the syscall-handler to be called, but does not prevent
      do_syscall_trace() to be called after this for syscall completion
      interception.
    
      The appended patch fixes this.  It reuses the flag TIF_SYSCALL_EMU to
      remember "we come from PTRACE_SYSEMU and now are in PTRACE_SYSCALL", since
      the flag is unused in the depicted situation.
    
    * Fix behaviour when changing interception kind #3:
      avoid intercepting syscall on return when using SINGLESTEP.
    
      When testing 2.6.9 and the skas3.v6 patch, with my latest patch and had
      problems with singlestepping on UML in SKAS with SYSEMU.  It looped
      receiving SIGTRAPs without moving forward.  EIP of the traced process was
      the same for all SIGTRAPs.
    
    What's missing is to handle switching from PTRACE_SYSCALL_EMU to
    PTRACE_SINGLESTEP in a way very similar to what is done for the change from
    PTRACE_SYSCALL_EMU to PTRACE_SYSCALL_TRACE.
    
    I.e., after calling ptrace(PTRACE_SYSEMU), on the return path, the debugger is
    notified and then wake ups the process; the syscall is executed (or skipped,
    when do_syscall_trace() returns 0, i.e.  when using PTRACE_SYSEMU), and
    do_syscall_trace() is called again.  Since we are on the return path of a
    SYSEMU'd syscall, if the wake up is performed through ptrace(PTRACE_SYSCALL),
    we must still avoid notifying the parent of the syscall exit.  Now, this
    behaviour is extended even to resuming with PTRACE_SINGLESTEP.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94c80b2598dbd2b8a6fe5f5c2c3af1beb37f66c7
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Sep 3 15:57:13 2005 -0700

    [PATCH] Ptrace/i386: fix "syscall audit" interaction with singlestep
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Avoid giving two traps for singlestep instead of one, when syscall auditing is
    enabled.
    
    In fact no singlestep trap is sent on syscall entry, only on syscall exit, as
    can be seen in entry.S:
    
    # Note that in this mask _TIF_SINGLESTEP is not tested !!! <<<<<<<<<<<<<<
            testb $(_TIF_SYSCALL_TRACE|_TIF_SYSCALL_AUDIT|_TIF_SECCOMP),TI_flags(%ebp)
            jnz syscall_trace_entry
    	...
    syscall_trace_entry:
    	...
    	call do_syscall_trace
    
    But auditing a SINGLESTEP'ed process causes do_syscall_trace to be called, so
    the tracer will get one more trap on the syscall entry path, which it
    shouldn't.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Roland McGrath <roland@redhat.com>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08b178ebf37bbfb78329e0ae6ea688b103d205bf
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:12 2005 -0700

    [PATCH] uml: Rename Kconfig files to be like the other arches
    
    To the extent that sub-Kconfig files exist elsewhere in the tree, they are
    named Kconfig.foo, rather than the Kconfig_foo that UML has.  This patch
    brings the names in line with the rest of the tree.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96e59245e1abf3ea2e98c4b9ee2ebd975db653db
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Sep 3 15:57:12 2005 -0700

    [PATCH] uml: remove debugging code from page fault path
    
    This eliminates the segfault info ring buffer, which added a system call to
    each page fault, and which hadn't been useful for debugging in ages.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49f9ebc894ecdb985475060d051a571dc231cce7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:57:10 2005 -0700

    [PATCH] arch/cris/Kconfig.debug: use lib/Kconfig.debug
    
    This patch converts arch/cris/Kconfig.debug to using lib/Kconfig.debug.
    
    This should fix a compile error in 2.6.13-rc4 caused by a missing
    CONFIG_LOG_BUF_SHIFT definition.
    
    While I was editing this file, I also converted some spaces to tabs.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 072dffda1d35c391fe893ec9b1d098145e668fef
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sat Sep 3 15:57:10 2005 -0700

    [PATCH] m68k: cleanup inline mem functions
    
    Use the builtin functions for memset/memclr/memcpy, special optimizations for
    page operations have dedicated functions now.  Uninline memmove/memchr and
    move all functions into a single file and clean it up a little.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2855b97020f6d4a4dfb005fb77c0b79c8cb9d13f
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sat Sep 3 15:57:09 2005 -0700

    [PATCH] m68k: move cache functions into separate file
    
    Move a few cache functions into its own file and fix flush_icache_range() so
    it can handle both kernel and user addresses correctly (assuming context is
    set correctly).
    
    Turn copy_to_user_page/copy_from_user_page into inline functions and add a
    missing cache flush.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69f447cffb911bb2d9737fa905f6d983ec2aa5d3
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sat Sep 3 15:57:08 2005 -0700

    [PATCH] m68k: sys_ptrace cleanup
    
    - create helper function singlestep_disable()
    - move variable definitions to the top of the function
    - use "out_eio" label as common error destination
    - don't clear failure value for PTRACE_SETREGS/PTRACE_GETREGS
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3319f50acbe3a26c258cdd899b9baa2e5e94efc
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sat Sep 3 15:57:07 2005 -0700

    [PATCH] m68k: indent sys_ptrace
    
    This reformats and properly indents sys_ptrace (only whitespace changes).
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3c433e4f33afe255389ba3b1a003dc8deb3de9a
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Sat Sep 3 15:57:07 2005 -0700

    [PATCH] add suspend/resume for timer
    
    The timers lack .suspend/.resume methods.  Because of this, jiffies got a
    big compensation after a S3 resume.  And then softlockup watchdog reports
    an oops.  This occured with HPET enabled, but it's also possible for other
    timers.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57c4ce3cbfba1bb0da7f37b9328a713cbd5d0919
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:57:06 2005 -0700

    [PATCH] pm: clean up /sys/power/disk
    
    Clean code up a bit, and only show suspend to disk as available when
    it is configured in.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6161b2ce8116b9a623260ab811e2c035b3fac2e5
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:57:05 2005 -0700

    [PATCH] pm: fix process freezing
    
    If process freezing fails, some processes are frozen, and rest are left in
    "were asked to be frozen" state.  Thats wrong, we should leave it in some
    consistent state.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99dc7d63e0dcb457580241055b2a39d011309db8
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:57:05 2005 -0700

    [PATCH] swsusp: fix error handling and cleanups
    
    Drop printing during normal boot (when no image exists in swap), print
    message when drivers fail, fix error paths and consolidate near-identical
    functions in disk.c (and functions with just one statement).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd5d666b7995e542b7f81a4bb1c7ad634f4f6c51
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Sat Sep 3 15:57:04 2005 -0700

    [PATCH] swsusp: add locking to software_resume
    
    It is trying to protect swsusp_resume_device and software_resume() from two
    users banging it from userspace at the same time.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ed9fcec85d5ef0e34ea18affe95e4a246714565
Author: Andreas Steinmetz <ast@domdv.de>
Date:   Sat Sep 3 15:57:03 2005 -0700

    [PATCH] swsusup with dm-crypt mini howto
    
    The attached patch contains a mini howto for using dm-crypt together with
    swsusp.
    
    Signed-off-by: Andreas Steinmetz <ast@domdv.de>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56057e1a128a9aab516350500e5b154e70577929
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Sat Sep 3 15:57:02 2005 -0700

    [PATCH] swsusp: simpler calculation of number of pages in PBE list
    
    The function calc_nr uses an iterative algorithm to calculate the number of
    pages needed for the image and the pagedir.  Exactly the same result can be
    obtained with a one-line expression.
    
    Note that this was even proved correct ;-).
    
    Signed-off-by: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46dacba52a19d1414ba249499a48382c16242d99
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Sat Sep 3 15:57:01 2005 -0700

    [PATCH] swsusp: prevent disks from spinning down and up
    
    Stop the disks from spinning down and up on suspend.
    
    Signed-off-by: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2ff18f4070f6303a81fd7d9d967d7c9e01b588f
Author: Andreas Steinmetz <ast@domdv.de>
Date:   Sat Sep 3 15:56:59 2005 -0700

    [PATCH] encrypt suspend data for easy wiping
    
    The patch protects from leaking sensitive data after resume from suspend.
    During suspend a temporary key is created and this key is used to encrypt the
    data written to disk.  When, during resume, the data was read back into memory
    the temporary key is destroyed which simply means that all data written to
    disk during suspend are then inaccessible so they can't be stolen lateron.
    
    Think of the following: you suspend while an application is running that keeps
    sensitive data in memory.  The application itself prevents the data from being
    swapped out.  Suspend, however, must write these data to swap to be able to
    resume lateron.  Without suspend encryption your sensitive data are then
    stored in plaintext on disk.  This means that after resume your sensitive data
    are accessible to all applications having direct access to the swap device
    which was used for suspend.  If you don't need swap after resume these data
    can remain on disk virtually forever.  Thus it can happen that your system
    gets broken in weeks later and sensitive data which you thought were encrypted
    and protected are retrieved and stolen from the swap device.
    
    Signed-off-by: Andreas Steinmetz <ast@domdv.de>
    Acked-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 583a4e88db1eadc52116e1f97b4519de655b2b80
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:56:58 2005 -0700

    [PATCH] fix pm_message_t stuff in -mm tree
    
    This should bits from -mm tree that are affected by pm_message_t
    conversion.  [I'm not 100% sure I got all of them, but I certainly got all
    the errors on make allyesconfig build, and most of warnings, too.  I'll go
    through the buildlog tommorow and fix any remaining bits].
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca078bae813dd46c0f9b102fdfb4a3384641ff48
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:56:57 2005 -0700

    [PATCH] swsusp: switch pm_message_t to struct
    
    This adds type-checking to pm_message_t, so that people can't confuse it
    with int or u32.  It also allows us to fix "disk yoyo" during suspend (disk
    spinning down/up/down).
    
    [We've tried that before; since that cpufreq problems were fixed and I've
    tried make allyes config and fixed resulting damage.]
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 829ca9a30a2ddb727981d80fabdbff2ea86bc9ea
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:56:56 2005 -0700

    [PATCH] swsusp: fix remaining u32 vs. pm_message_t confusion
    
    Fix remaining bits of u32 vs.  pm_message confusion.  Should not break
    anything.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e958883bced7e435f5a76349e15684858d3477c
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:56:56 2005 -0700

    [PATCH] suspend: update documentation
    
    Update suspend documentation.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dc24db1757f950f8bd21b7191106d4bf5134be7
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Sep 3 15:56:55 2005 -0700

    [PATCH] ISA DMA suspend for x86_64
    
    Reset the ISA DMA controller into a known state after a suspend.  Primary
    concern was reenabling the cascading DMA channel (4).
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 795312e763569ce4df67e7a0ca726a9901358fa2
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Sep 3 15:56:54 2005 -0700

    [PATCH] ISA DMA suspend for i386
    
    Reset the ISA DMA controller into a known state after a suspend.  Primary
    concern was reenabling the cascading DMA channel (4).
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a23b5d1e119fd10e25b8e93464c8d549f5a5c5d
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Sep 3 15:56:53 2005 -0700

    [PATCH] remove busywait in refrigerator
    
    This should make refrigerator sleep properly, not busywait after the first
    schedule() returns.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52fdd08903a1d1162e184114837e232640191627
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Sat Sep 3 15:56:52 2005 -0700

    [PATCH] unify x86/x86-64 semaphore code
    
    This patch moves the common code in x86 and x86-64's semaphore.c into a
    single file in lib/semaphore-sleepers.c.  The arch specific asm stubs are
    left in the arch tree (in semaphore.c for i386 and in the asm for x86-64).
    There should be no changes in code/functionality with this patch.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ad8d38342430f8b52f7a8458dce90caf8c8ca64
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Sat Sep 3 15:56:51 2005 -0700

    [PATCH] i386 boottime for_each_cpu broken
    
    for_each_cpu walks through all processors in cpu_possible_map, which is
    defined as cpu_callout_map on i386 and isn't initialised until all
    processors have been booted. This breaks things which do for_each_cpu
    iterations early during boot. So, define cpu_possible_map as a bitmap with
    NR_CPUS bits populated. This was triggered by a patch i'm working on which
    does alloc_percpu before bringing up secondary processors.
    
    From: Alexander Nyberg <alexn@telia.com>
    
    i386-boottime-for_each_cpu-broken.patch
    i386-boottime-for_each_cpu-broken-fix.patch
    
    The SMP version of __alloc_percpu checks the cpu_possible_map before
    allocating memory for a certain cpu.  With the above patches the BSP cpuid
    is never set in cpu_possible_map which breaks CONFIG_SMP on uniprocessor
    machines (as soon as someone tries to dereference something allocated via
    __alloc_percpu, which in fact is never allocated since the cpu is not set
    in cpu_possible_map).
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7271b14b2e9e5905aba0fbf5c4dc4f8980c0cb2
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:50 2005 -0700

    [PATCH] i386: encapsulate copying of pgd entries
    
    Add a clone operation for pgd updates.
    
    This helps complete the encapsulation of updates to page tables (or pages
    about to become page tables) into accessor functions rather than using
    memcpy() to duplicate them.  This is both generally good for consistency
    and also necessary for running in a hypervisor which requires explicit
    updates to page table entries.
    
    The new function is:
    
    clone_pgd_range(pgd_t *dst, pgd_t *src, int count);
    
       dst - pointer to pgd range anwhere on a pgd page
       src - ""
       count - the number of pgds to copy.
    
       dst and src can be on the same page, but the range must not overlap
       and must not cross a page boundary.
    
    Note that I ommitted using this call to copy pgd entries into the
    software suspend page root, since this is not technically a live paging
    structure, rather it is used on resume from suspend.  CC'ing Pavel in case
    he has any feedback on this.
    
    Thanks to Chris Wright for noticing that this could be more optimal in
    PAE compiles by eliminating the memset.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 748f2edb52712aa3d926470a888608dc500d17e8
Author: George Anzinger <george@mvista.com>
Date:   Sat Sep 3 15:56:48 2005 -0700

    [PATCH] x86 NMI: better support for debuggers
    
    This patch adds a notify to the die_nmi notify that the system is about to
    be taken down.  If the notify is handled with a NOTIFY_STOP return, the
    system is given a new lease on life.
    
    We also change the nmi watchdog to carry on if die_nmi returns.
    
    This give debug code a chance to a) catch watchdog timeouts and b) possibly
    allow the system to continue, realizing that the time out may be due to
    debugger activities such as single stepping which is usually done with
    "other" cpus held.
    
    Signed-off-by: George Anzinger <george@mvista.com>
    Cc: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: George Anzinger <george@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2f30ebca6c0c95e987cb9a1fd1495770a75432e
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:47 2005 -0700

    [PATCH] x86: introduce a write acessor for updating the current LDT
    
    Introduce a write acessor for updating the current LDT.  This is required
    for hypervisors like Xen that do not allow LDT pages to be directly
    written.
    
    Testing - here's a fun little LDT test that can be trivially modified to
    test limits as well.
    
    /*
     * Copyright (c) 2005, Zachary Amsden (zach@vmware.com)
     * This is licensed under the GPL.
     */
    
    #include <stdio.h>
    #include <signal.h>
    #include <asm/ldt.h>
    #include <asm/segment.h>
    #include <sys/types.h>
    #include <unistd.h>
    #include <sys/mman.h>
    #define __KERNEL__
    #include <asm/page.h>
    
    void main(void)
    {
            struct user_desc desc;
            char *code;
            unsigned long long tsc;
    
            code = (char *)mmap(0, 8192, PROT_EXEC|PROT_READ|PROT_WRITE,
                                     MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
            desc.entry_number = 0;
            desc.base_addr = code;
            desc.limit = 1;
            desc.seg_32bit = 1;
            desc.contents = MODIFY_LDT_CONTENTS_CODE;
            desc.read_exec_only = 0;
            desc.limit_in_pages = 1;
            desc.seg_not_present = 0;
            desc.useable = 1;
            if (modify_ldt(1, &desc, sizeof(desc)) != 0) {
                    perror("modify_ldt");
            }
            printf("code base is 0x%08x\n", (unsigned)code);
            code[0x0ffe] = 0x0f;  /* rdtsc */
            code[0x0fff] = 0x31;
            code[0x1000] = 0xcb;  /* lret */
            __asm__ __volatile("lcall $7,$0xffe" : "=A" (tsc));
            printf("TSC is 0x%016llx\n", tsc);
    }
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9f86e351fda5b3c40192fc3990453613f160779
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:45 2005 -0700

    [PATCH] x86: remove redundant TSS clearing
    
    When reviewing GDT updates, I found the code:
    
    	set_tss_desc(cpu,t);	/* This just modifies memory; ... */
            per_cpu(cpu_gdt_table, cpu)[GDT_ENTRY_TSS].b &= 0xfffffdff;
    
    This second line is unnecessary, since set_tss_desc() has already cleared
    the busy bit.
    
    Commented disassembly, line 1:
    
    c028b8bd:       8b 0c 86                mov    (%esi,%eax,4),%ecx
    c028b8c0:       01 cb                   add    %ecx,%ebx
    c028b8c2:       8d 0c 39                lea    (%ecx,%edi,1),%ecx
    
      => %ecx = per_cpu(cpu_gdt_table, cpu)
    
    c028b8c5:       8d 91 80 00 00 00       lea    0x80(%ecx),%edx
    
      => %edx = &per_cpu(cpu_gdt_table, cpu)[GDT_ENTRY_TSS]
    
    c028b8cb:       66 c7 42 00 73 20       movw   $0x2073,0x0(%edx)
    c028b8d1:       66 89 5a 02             mov    %bx,0x2(%edx)
    c028b8d5:       c1 cb 10                ror    $0x10,%ebx
    c028b8d8:       88 5a 04                mov    %bl,0x4(%edx)
    c028b8db:       c6 42 05 89             movb   $0x89,0x5(%edx)
    
      => ((char *)%edx)[5] = 0x89
      (equivalent) ((char *)per_cpu(cpu_gdt_table, cpu)[GDT_ENTRY_TSS])[5] = 0x89
    
    c028b8df:       c6 42 06 00             movb   $0x0,0x6(%edx)
    c028b8e3:       88 7a 07                mov    %bh,0x7(%edx)
    c028b8e6:       c1 cb 10                ror    $0x10,%ebx
    
      => other bits
    
    Commented disassembly, line 2:
    
    c028b8e9:       8b 14 86                mov    (%esi,%eax,4),%edx
    c028b8ec:       8d 04 3a                lea    (%edx,%edi,1),%eax
    
      => %eax = per_cpu(cpu_gdt_table, cpu)
    
    c028b8ef:       81 a0 84 00 00 00 ff    andl   $0xfffffdff,0x84(%eax)
    
      => per_cpu(cpu_gdt_table, cpu)[GDT_ENTRY_TSS].b &= 0xfffffdff;
      (equivalent) ((char *)per_cpu(cpu_gdt_table, cpu)[GDT_ENTRY_TSS])[5] &= 0xfd
    
    Note that (0x89 & ~0xfd) == 0; i.e, set_tss_desc(cpu,t) has already stored
    the type field in the GDT with the busy bit clear.
    
    Eliminating redundant and obscure code is always a good thing; in fact, I
    pointed out this same optimization many moons ago in arch/i386/setup.c,
    back when it used to be called that.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5201129307f414890f9a4410e38da205f5d7359
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:44 2005 -0700

    [PATCH] x86: make IOPL explicit
    
    The pushf/popf in switch_to are ONLY used to switch IOPL.  Making this
    explicit in C code is more clear.  This pushf/popf pair was added as a
    bugfix for leaking IOPL to unprivileged processes when using
    sysenter/sysexit based system calls (sysexit does not restore flags).
    
    When requesting an IOPL change in sys_iopl(), it is just as easy to change
    the current flags and the flags in the stack image (in case an IRET is
    required), but there is no reason to force an IRET if we came in from the
    SYSENTER path.
    
    This change is the minimal solution for supporting a paravirtualized Linux
    kernel that allows user processes to run with I/O privilege.  Other
    solutions require radical rewrites of part of the low level fault / system
    call handling code, or do not fully support sysenter based system calls.
    
    Unfortunately, this added one field to the thread_struct.  But as a bonus,
    on P4, the fastest time measured for switch_to() went from 312 to 260
    cycles, a win of about 17% in the fast case through this performance
    critical path.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0998e4228aca046fbd747c3fed909791d52e88eb
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:43 2005 -0700

    [PATCH] x86: privilege cleanup
    
    Privilege checking cleanup.  Originally, these diffs were much greater, but
    recent cleanups in Linux have already done much of the cleanup.  I added
    some explanatory comments in places where the reasoning behind certain
    tests is rather subtle.
    
    Also, in traps.c, we can skip the user_mode check in handle_BUG().  The
    reason is, there are only two call chains - one via die_if_kernel() and one
    via do_page_fault(), both entering from die().  Both of these paths already
    ensure that a kernel mode failure has happened.  Also, the original check
    here, if (user_mode(regs)) was insufficient anyways, since it would not
    rule out BUG faults from V8086 mode execution.
    
    Saving the %ss segment in show_regs() rather than assuming a fixed value
    also gives better information about the current kernel state in the
    register dump.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2ab4461249df85b20930a7a57b54f39c5ae291a
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:42 2005 -0700

    [PATCH] x86: more asm cleanups
    
    Some more assembler cleanups I noticed along the way.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f0cb8d978ab4b6e3b40147f619f48316d9d7f63
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 3 15:56:41 2005 -0700

    [PATCH] i386: fix incorrect TSS entry for LDT
    
    Noticed by Chuck Ebbert: the .ldt entry of the TSS was set up incorrectly.
    It never mattered since this was a leftover from old times, so remove it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9b02a24130e3ff14a553d966a79f46cf806b037
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:40 2005 -0700

    [PATCH] i386: use set_pte macros in a couple places where they were missing
    
    Also, setting PDPEs in PAE mode does not require atomic operations, since the
    PDPEs are cached by the processor, and only reloaded on an explicit or
    implicit reload of CR3.
    
    Since the four PDPEs must always be present in an active root, and the kernel
    PDPE is never updated, we are safe even from SMIs and interrupts / NMIs using
    task gates (which reload CR3).  Actually, much of this is moot, since the user
    PDPEs are never updated either, and the only usage of task gates is by the
    doublefault handler.  It appears the only place PGDs get updated in PAE mode
    is in init_low_mappings() / zap_low_mapping() for initial page table creation
    and recovery from ACPI sleep state, and these sites are safe by inspection.
    Getting rid of the cmpxchg8b saves code space and 720 cycles in pgd_alloc on
    P4.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7a2ff593c0e48b130434dee4d2fd3452a850e6f
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:39 2005 -0700

    [PATCH] i386: load_tls() fix
    
    Subtle fix: load_TLS has been moved after saving %fs and %gs segments to avoid
    creating non-reversible segments.  This could conceivably cause a bug if the
    kernel ever needed to save and restore fs/gs from the NMI handler.  It
    currently does not, but this is the safest approach to avoiding fs/gs
    corruption.  SMIs are safe, since SMI saves the descriptor hidden state.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f2984eb4afb2a4298e3186cb49cc7e88dd6d929
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:38 2005 -0700

    [PATCH] i386: generate better code around descriptor update and access functions
    
    GCC can generate better code around descriptor update and access functions
    when there is not an explicit "eax" register constraint.
    
    Testing: You won't boot if this is messed up, since the TSS descriptor will be
    corrupted.  Verified the assembler and booted.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d37e7e3fd851428dede4d05d3e69d03795a744a
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:38 2005 -0700

    [PATCH] i386: inline assembler: cleanup and encapsulate descriptor and task register management
    
    i386 inline assembler cleanup.
    
    This change encapsulates descriptor and task register management.  Also,
    it is possible to improve assembler generation in two cases; savesegment
    may store the value in a register instead of a memory location, which
    allows GCC to optimize stack variables into registers, and MOV MEM, SEG
    is always a 16-bit write to memory, making the casting in math-emu
    unnecessary.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 245067d1674d451855692fcd4647daf9fd47f82d
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:37 2005 -0700

    [PATCH] i386: cleanup serialize msr
    
    i386 arch cleanup.  Introduce the serialize macro to serialize processor
    state.  Why the microcode update needs it I am not quite sure, since wrmsr()
    is already a serializing instruction, but it is a microcode update, so I will
    keep the semantic the same, since this could be a timing workaround.  As far
    as I can tell, this has always been there since the original microcode update
    source.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bb0d3ec3e5b1e9e2399cdc641b3b6521ac9cdaa
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:56:36 2005 -0700

    [PATCH] i386: inline asm cleanup
    
    i386 Inline asm cleanup.  Use cr/dr accessor functions.
    
    Also, a potential bugfix.  Also, some CR accessors really should be volatile.
    Reads from CR0 (numeric state may change in an exception handler), writes to
    CR4 (flipping CR4.TSD) and reads from CR2 (page fault) prevent instruction
    re-ordering.  I did not add memory clobber to CR3 / CR4 / CR0 updates, as it
    was not there to begin with, and in no case should kernel memory be clobbered,
    except when doing a TLB flush, which already has memory clobber.
    
    I noticed that page invalidation does not have a memory clobber.  I can't find
    a bug as a result, but there is definitely a potential for a bug here:
    
    #define __flush_tlb_single(addr) \
    	__asm__ __volatile__("invlpg %0": :"m" (*(char *) addr))
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a0694d15d55d0deed928786a6393d5e45e37d76
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Sep 3 15:56:35 2005 -0700

    [PATCH] i386: clean up vDSO alignment padding
    
    This makes the vDSO use nops for all its padding around instructions,
    rather than sometimes zeros, and nop-pads the end of the area containing
    instructions to a 32-byte cache line, to keep text and data in separate
    lines.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56f1d5d52a21b93bc2984c920b17e0d80df5d1b2
Author: Natalie Protasevich <Natalie.Protasevich@unisys.com>
Date:   Sat Sep 3 15:56:34 2005 -0700

    [PATCH] ES7000 platform update (i386)
    
    This is subarch update for ES7000.  I've modified platform check code and
    removed unnecessary OEM table parsing for newer systems that don't use OEM
    information during boot.  Parsing the table in fact is causing problems,
    and the platform doesn't get recognized.  The patch only affects the ES7000
    subach.
    
    Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1740913cae231fb8e485306fb09671ed9a6e550
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Sat Sep 3 15:56:33 2005 -0700

    [PATCH] via vt8237 apic bypass deassertion quirk
    
    The VIA VT8237's IOAPIC sends 'APIC De-Assert Messages' by default, causing
    another CPU interrupt when the IRQ pin is de-asserted.  This feature is
    switched off by the patch to get rid of doubled ioapic level interrupt
    rates.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Tested-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 252943efcfce945d8dd3738ca4c4b9cbeb4f3fa9
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sat Sep 3 15:56:32 2005 -0700

    [PATCH] x86: Add the check for all the cores in a package in cache information
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 911a62d42365076209e2c327e7688db296e35d62
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sat Sep 3 15:56:31 2005 -0700

    [PATCH] x86: sutomatically enable bigsmp when we have more than 8 CPUs
    
    i386 generic subarchitecture requires explicit dmi strings or command line
    to enable bigsmp mode.  The patch below removes that restriction, and uses
    bigsmp as soon as it finds more than 8 logical CPUs, Intel processors and
    xAPIC support.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 484b90c4b965d54037ff99b198d84cdf144f8a35
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Sat Sep 3 15:56:31 2005 -0700

    [PATCH] kdump: Save parameter segment in protected mode (x86)
    
    o With introduction of kexec as boot-loader, the assumption that parameter
      segment will always be loaded at lower address than kernel and will be
      addressable by early bootup page tables is no longer valid. In kexec on
      panic case parameter segment might well be loaded beyond kernel image and
      might not be addressable by early boot page tables.
    o This case might hit in the scenario where user has reserved a chunk of
      memory for second kernel, for example 16MB to 64MB, and has also built
      second kernel for physical memory location 16MB. In this case kexec has no
      choice but to load the parameter segment at a higher address than new kernel
      image at safe location where new kernel does not stomp it.
    o Though problem should automatically go away once relocatable kernel for i386
      is in place and kexec can determine the location of new kernel at run time
      and load parameter segment at lower address than kernel image. But till then
      this patch can go in (assuming it does not break something else).
    o This patch moves up the boot parameter saving code. Now boot parameters
      are copied out in protected mode before page tables are initialized. This
      will ensure that parameter segment is always addressable irrespective of
      its physical location.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fd75ebb1a58c1a3c9e3d9fdf75ce7286b79bb74
Author: Petr Tesarik <kernel@tesarici.cz>
Date:   Sat Sep 3 15:56:28 2005 -0700

    [PATCH] vm86: Honor TF bit when emulating an instruction
    
    If the virtual 86 machine reaches an instruction which raises a General
    Protection Fault (such as CLI or STI), the instruction is emulated (in
    handle_vm86_fault).  However, the emulation ignored the TF bit, so the
    hardware debug interrupt was not invoked after such an emulated instruction
    (and the DOS debugger missed it).
    
    This patch fixes the problem by emulating the hardware debug interrupt as
    the last action before control is returned to the VM86 program.
    
    Signed-off-by: Petr Tesarik <kernel@tesarici.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ae65fd334232468a9d6b523a4fc141cd6ec5ea4
Author: Matt Tolentino <metolent@snoqualmie.dp.intel.com>
Date:   Sat Sep 3 15:56:27 2005 -0700

    [PATCH] x86: fix EFI memory map parsing
    
    The memory descriptors that comprise the EFI memory map are not fixed in
    stone such that the size could change in the future.  This uses the memory
    descriptor size obtained from EFI to iterate over the memory map entries
    during boot.  This enables the removal of an x86 specific pad (and ifdef)
    in the EFI header.  I also couldn't stomach the broken up nature of the
    function to put EFI runtime calls into virtual mode any longer so I fixed
    that up a bit as well.
    
    For reference, this patch only impacts x86.
    
    Signed-off-by: Matt Tolentino <matthew.e.tolentino@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4116c527ea9517623369a5b3b037aedde280d672
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sat Sep 3 15:56:27 2005 -0700

    [PATCH] hpet: use read_timer_tsc only when CPU has TSC
    
    Only use read_timer_tsc only when CPU has TSC.  Thanks to Andrea for
    pointing this out.  Should not be issue on any platforms as all recent
    systems that has HPET also has CPUs that supports TSC.  The patch is still
    required for correctness.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 869f96a00e8f53c7db8470ca9cf72e2e3fa40119
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Sep 3 15:56:26 2005 -0700

    [PATCH] x86: compress the stack layout of do_page_fault()
    
    This patch pushes the creation of a rare signal frame (SIGBUS or SIGSEGV)
    into a separate function, thus saving stackspace in the main
    do_page_fault() stackframe.  The effect is 132 bytes less of stack used by
    the typical do_page_fault() invocation - resulting in a denser
    cache-layout.
    
    (Another minor effect is that in case of kernel crashes that come from a
    pagefault, we add less space to the already existing frame, giving the
    crash functions a slightly higher chance to do their stuff without
    overflowing the stack.)
    
    (The changes also result in slightly cleaner code.)
    
    argument bugfix from "Guillaume C." <guichaz@gmail.com>
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e06066b87ffd2c7a7f4c3f1c612293307270976
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:56:24 2005 -0700

    [PATCH] arch/sh64/Kconfig: doesn't need it's own LOG_BUF_SHIFT
    
    The LOG_BUF_SHIFT from lib/Kconfig.debug is sufficient.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Paul Mundt <lethal@Linux-SH.ORG>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59df6bbf386d8f26870b28307d0e4f06d631685f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:23 2005 -0700

    [PATCH] mips: kludge envdev to build for 64-bit MIPS with 32-bit compat
    
    Extend the compat mode kludgeology in envdev to cover MIPS as well.
    
    Or why we should need something like is_compat_task() ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fe7f2578fb4903af79abeb29bb9b9ab5eace1b5
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:23 2005 -0700

    [PATCH] mips: remove timex.h for vr41xx
    
    vr41xx doesn't need mach-vr41xx/timex.h.  This patch has removed
    mach-vr41xx/timex.h.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 766160c29fadbafad1d6eb5e965922c7e78beb88
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:22 2005 -0700

    [PATCH] mips: fix build warnings
    
    This patch has fixed the following warnings.
    
    arch/mips/kernel/genex.S:250:5: warning: "CONFIG_64BIT" is not defined
    arch/mips/math-emu/cp1emu.c:1128:5: warning: "__mips64" is not defined
    arch/mips/math-emu/cp1emu.c:1206:5: warning: "__mips64" is not defined
    arch/mips/math-emu/cp1emu.c:1270:5: warning: "__mips64" is not defined
    arch/mips/math-emu/cp1emu.c:323:5: warning: "__mips64" is not defined
    arch/mips/math-emu/cp1emu.c:808:5: warning: "__mips64" is not defined
    arch/mips/math-emu/cp1emu.c:953:5: warning: "__mips64" is not defined
    arch/mips/mm/tlbex.c:519:5: warning: "CONFIG_64BIT" is not defined
    include/asm/reg.h:73:5: warning: "CONFIG_64BIT" is not defined
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed5ba2fbc6d03c41c4c3334648a6569bc42da764
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:21 2005 -0700

    [PATCH] mips: add more SYS_SUPPORT_*_KERNEL and CPU_SUPPORTS_*_KERNEL
    
    The addtion of SYS_SUPPORTS_*_KERNEL and CPU_SUPPORTS_*_KERNEL is halfway.
    This patch has added more SYS_SUPPORTS_*_KERNEL and CPU_SUPPORTS_*_KERNEL
    to arch/mips/Kconfig.  Please apply.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e63ea56fe2669c20f4668d89522500f4ab439b04
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:20 2005 -0700

    [PATCH] mips: add pcibios_bus_to_resource
    
    This patch has added pcibios_bus_to_resource to MIPS.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2de84920d9489f7fd87fa4b04d996d569def4fa
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:19 2005 -0700

    [PATCH] mips: add pcibios_select_root
    
    Add pcibios_select_root to MIPS.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ce588cd563e6b817adb0c7d03b3ed9c74cadc27
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:19 2005 -0700

    [PATCH] mips: fix coherency configuration
    
    Fix the MIPS coherency configuration such that we always keep the mapping
    state in <asm/pci.h> when we need to on non-coherent platforms.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42a3b4f25af8f8d77feddf27f839fa0628dbff1a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:17 2005 -0700

    [PATCH] mips: nuke trailing whitespace
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 875d43e72b5bf22161a81de7554f88eccf8a51ae
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:16 2005 -0700

    [PATCH] mips: clean up 32/64-bit configuration
    
    Start cleaning 32-bit vs. 64-bit configuration.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63fb6fd1c86181d9dd9ba0e6e6082799e149b56b
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:16 2005 -0700

    [PATCH] mips: changed from VR41xx to VR4100 series in Kconfig
    
    This patch has changed from VR41XX to VR4100 series in arch/mips/Kconfig.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e07a7235dd05891a8c1695213ae1f2b48b09f69e
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:15 2005 -0700

    [PATCH] mips: remove vrc4171 config
    
    This patch has removed obsolete VRC4171 config.
    
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 466adc66cf6eea0268c8678834c8c6a56e5a2f9e
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:14 2005 -0700

    [PATCH] fix warning of TANBAC_TB0219 in drivers/char/Kconfig
    
    $ make menuconfig
    scripts/kconfig/mconf arch/i386/Kconfig
    drivers/char/Kconfig:847:warning: 'select' used by config symbol
    'TANBAC_TB0219' refer to undefined symbol 'PCI_VR41XX'
    
    Here is a patch for this warning fix.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8dd4aebe49b24348e48581af835ac41c8e483d68
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:14 2005 -0700

    [PATCH] mips: add default select configs for vr41xx
    
    This patch has added default select configs for vr41xx.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63b799f9ded82444212afdcf61379a247d544909
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:13 2005 -0700

    [PATCH] mips: add TANBAC VR4131 multichip module
    
    This patch has added TANBAC VR4131 multichip module in arch/mips/Kconfig
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc4ec916f6ea0c2818e9b81c4e9b33231f5f70e4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:12 2005 -0700

    [PATCH] MIPS Technologies PCI ID bits
    
    - MIPS Denmark does no longer exist; the PCI vendor ID is now owned by
      MIPS Technologies.
    
    - Add ID for SOC-it, MIPS's system controller.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07119621e62de0a2c8db6e4896e762c498bfdd17
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:11 2005 -0700

    [PATCH] mips: add support for Qemu system architecture
    
    Add support for the virtual MIPS system that is emulated by Qemu.  See
    http://www.linux-mips.org/wiki/Qemu for a detailed current status.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7901c7998267d9d8c3f1b226a8c8cfd7f8e48a01
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:11 2005 -0700

    [PATCH] DEC PMAGB B framebuffer update
    
    Revive HX frame buffer support for 2.6.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af690a948cc545d1eca19acab23016b96e178dcf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:09 2005 -0700

    [PATCH] DEC PMAG BA frame buffer update
    
    Rewrite PMAG BA frame buffer driver for 2.6.
    
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61838ffeee8296de8bfee751e9ad67bf6c61d0b4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:09 2005 -0700

    [PATCH] DEC PMAG AA framebuffer update
    
    Get it working again.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 003b54925e2ac78306f74ac433126ad5de387f7a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:08 2005 -0700

    [PATCH] mips: remove HP Laserjet remains
    
    Remove the one file which managed to survive the removel of HP Laserjet
    support.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab1418a31619a47d78843c20b5fa2245c29824ca
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:56:07 2005 -0700

    [PATCH] more vr4181 removal
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ad7305f52bc8880d50a6471c90d35a6768f2865
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:07 2005 -0700

    [PATCH] mips: moreover remove vr4181
    
    We also need this patch for removing mips vr4181.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fdda107e10133583f31c72326959555bfb61042
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Sep 3 15:56:06 2005 -0700

    [PATCH] mips: remove VR4181 support
    
    There seem to be no more users or interest in the NEC Osprey evaluation
    system for the NEC VR4181 SOC which is an old part anyway, so remove the
    code.  More information on the Osprey can be found at
    http://www.linux-mips.org/wiki/Osprey.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bb670c1407c2a4890810fd3e348dac1b89e669e
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:05 2005 -0700

    [PATCH] mips: change system type name in proc for vr41xx
    
    This patch has changed system type name in proc for vr41xx.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 979934da9e7a0005bd9c8b1d7d00febb59ff67f7
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:04 2005 -0700

    [PATCH] mips: update IRQ handling for vr41xx
    
    This patch has updated IRQ handling for vr41xx.
    o added common IRQ dispatch
    o changed IRQ number in int-handler.S
    o added resource management to icu.c
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 006cfb51ad12047497a2a5ad796fb8914a1bc487
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Sep 3 15:56:03 2005 -0700

    [PATCH] mips: remove obsolete GIU function call for vr41xx
    
    This patch has removed obsolete GIU function call for vr41xx.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ba06ba6a142247589711b46f9ca7908adc21e21
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sat Sep 3 15:56:02 2005 -0700

    [PATCH] frv: Remove export of strtok()
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0287ebedfa032a57bb47f4bc5cb5e268ecd844ad
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Sat Sep 3 15:56:01 2005 -0700

    [PATCH] ppc64: replace schedule_timeout() with msleep_interruptible()
    
    Use msleep_interruptible() instead of schedule_timeout() in ppc64-specific
    code to cleanup/simplify the sleeping logic.  Change the units of the
    parameter of do_event_scan_all_cpus() to milliseconds from jiffies.  The
    return value of rtas_extended_busy_delay_time() was incorrectly being used
    as a jiffies value (it is actually milliseconds), which is fixed by using
    the value as a parameter to msleep_interruptible().  Also, use
    rtas_extended_busy_delay_time() in another case where similar logic is
    duplicated.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 233ccd0d0452682edb51725410e0f8c0384e8b34
Author: Olof Johansson <olof@lixom.net>
Date:   Sat Sep 3 15:55:59 2005 -0700

    [PATCH] ppc64: Add VMX save flag to VPA
    
    We need to indicate to the hypervisor that it needs to save our VMX
    registers when switching partitions on a shared-processor system, just as
    it needs to for FP and PMC registers.
    
    This could be made to be on-demand when VMX is used, but we don't do that
    for FP nor PMC right now either so let's not overcomplicate things.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Anton Blanchard <anton@samba.org>
    Cc: <engebret@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b749bfcd1be72f8cb8310e1cac12825bda029432
Author: Olaf Hering <olh@suse.de>
Date:   Sat Sep 3 15:55:58 2005 -0700

    [PATCH] ppc64: update xmon helptext
    
    xmon will do nothing but noise on a G5 if BOOTX_TEXT is not enabled.
    mention the recognized kernel cmdline options for xmon.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Paul Mackeras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f54bef9e9c84c8dc656c55dc96c1da7b6d1c53d8
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Sat Sep 3 15:55:57 2005 -0700

    [PATCH] ppc32: cpci690 updates
    
    Update the cpci690 platform code:
    - pass mem size in from bootwrapper via bi_rec
    - some minor fixups
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4c6cc8d1e2305796f7fdad52d83b88cea4d2276
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Sat Sep 3 15:55:57 2005 -0700

    [PATCH] ppc32: katana updates
    
    Update the katana platform support code:
    - if booted as zImage, pass mem size in via bi_req from bootwrapper
    - if booted as uImage, get mem size from bd_info passed in from u-boot
    - add support for 82544 present on katana 752i's
    - set cacheline size on pci devices
    - some minor fixups
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d01c08c9ae91c1526d4564b400b3e0e04b49d1ba
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Sat Sep 3 15:55:56 2005 -0700

    [PATCH] ppc32: mv64x60 updates & enhancements
    
    Updates and enhancement to the ppc32 mv64x60 code:
    - move code to get mem size from mem ctlr to bootwrapper
    - address some errata in the mv64360 pic code
    - some minor cleanups
    - export one of the bridge's regs via sysfs so user daemon can watch for
      extraction events
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbde630b553d349307fe719486bc06f8cf9c1a2d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:55 2005 -0700

    [PATCH] ppc32: Added cputable entry for 7448
    
    Added cputable entry for 7448 as well adding it to checks for saving and
    restoring of cpu state.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8834801bf9e2ee96c3ac29adf0ff6840afcd841
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:54 2005 -0700

    [PATCH] ppc32: export cacheable_memcpy()
    
    Add declaration and cacheable_memcpy().  I'll be needing this function in
    new 4xx EMAC driver I'm going to submit to netdev soon.
    
    IMHO, the better place for the declaration would be asm-powerpc/string.h,
    unfortunately, ppc64 doesn't have this function, so asm-ppc/system.h is the
    next best place.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a0a401b40abe31b34673a190c57697e7eced149
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:53 2005 -0700

    [PATCH] ppc32: add dcr_base field to ocp_func_mal_data
    
    Add dcr_base field to ocp_func_mal_data.  This is preparation step for the
    new EMAC driver.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28fa031e765b808520173f750bafbade832ba909
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:53 2005 -0700

    [PATCH] ppc32: move 4xx PHY_MODE_XXX defines to ibm_ocp.h
    
    Move 4xx PHY_MODE_XXX defines to asm-ppc/ibm_ocp.h.  This is a preparation
    step for the new EMAC driver.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c31625aa844d549cbb8a7aafb94ec4fde8b54a3
Author: Arthur Othieno <a.othieno@bluewin.ch>
Date:   Sat Sep 3 15:55:52 2005 -0700

    [PATCH] ppc32: Add cputable entry for 750CXe DD2.4 ("Gekko")
    
    Add a table entry for 750CXe DD2.4 ("Gekko") as found in the GameCube from
    Nintendo:
    
      http://www-306.ibm.com/chips/techlib/techlib.nsf/techdocs/291C8D0EF3EAEC1687256B72005C745C#C1
    
    Signed-off-by: Arthur Othieno <a.othieno@bluewin.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac1ff0477cbe640a6a3652a0cd1aa78026f19246
Author: Arthur Othieno <a.othieno@bluewin.ch>
Date:   Sat Sep 3 15:55:51 2005 -0700

    [PATCH] ppc32: Re-order cputable for 750CXe DD2.4 entry
    
    "745/755" (pvr_value:0x00083000) is a catch-all entry.
    Since arch/ppc/kernel/misc.S:identify_cpu() returns on first match,
    move this lower in the table so 750CXe DD2.4 (pvr_value:0x00083214)
    may be correctly enumerated.
    
    Signed-off-by: Arthur Othieno <a.othieno@bluewin.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66d2cc95d14b5d750a9c58209fddb62eb139eaab
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:50 2005 -0700

    [PATCH] ppc32: Added PCI support MPC83xx
    
    Adds support for the two PCI busses on MPC83xx and the MPC834x SYS/PIBS
    reference board.
    
    The code initializes PCI inbound/outbound windows, allocates and registers
    PCI memory/io space.  Be aware that setup of the PCI buses on the PIBs
    board is expected to be done by the firmware.
    
    Signed-off-by: Tony Li <tony.li@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc9c540b6c4c883d7ff250c17647dedfa4184ca6
Author: Lee Nicks <allinux@gmail.com>
Date:   Sat Sep 3 15:55:49 2005 -0700

    [PATCH] ppc32: defconfig for Marvell EV64360BP board
    
    Here is the default configuration for Marvell EV64360BP board.  It has been
    tested on the board.
    
    Signed-off-by: Lee Nicks <allinux@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3acb23440f90b03b19846d2b3a005dcbf61a55cf
Author: Lee Nicks <allinux@gmail.com>
Date:   Sat Sep 3 15:55:48 2005 -0700

    [PATCH] ppc32: add support for Marvell EV64360BP board
    
    This patch adds support for Marvell EV64360BP board.  So far, it supports
    mpsc serial console, gigabit ethernet, jffs2 root filesystem, etc.  Other
    device support, like watchdog, RTC, will be added later.
    
    Signed-off-by: Lee Nicks <allinux@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 164ada643ddf4f492a206b9bf2f2b02918b618da
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:47 2005 -0700

    [PATCH] ppc32: add CONFIG_HZ
    
    While ppc32 has the CONFIG_HZ Kconfig option, it wasnt actually being used.
    Connect it up and set all platforms to 250Hz.  This pretty much mimics the
    ppc64 patch from Anton Blanchard.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88adfe70c667c9e8fe5ec68eba78af566b539e24
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:46 2005 -0700

    [PATCH] ppc32: ppc_sys system on chip identification additions
    
    Add the ability to identify an SOC by a name and id.  There are cases in
    which the integer identifier is not sufficient to specify a specific SOC.
    In these cases we can use a string to further qualify the match.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa71f0e0f541e65280fdb9d60b142012f1951b7c
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:45 2005 -0700

    [PATCH] ppc32: disable IBM405_ERR77 and IBM405_ERR51 workarounds for 405EP
    
    Disable IBM405_ERR77 and IBM405_ERR51 errata workarounds for 405EP.  This
    chip has these problems fixed.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc506644202d23bcf115999ee911a53f177ce682
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:45 2005 -0700

    [PATCH] ppc32: fix Bamboo and Luan build warnings
    
    Fix STD_UART_OP definitions in Bamboo and Luan board ports which were
    causing "initialization makes pointer from integer without a cast"
    warnings.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cce9d7e36f92f2d48de8c701b65ad27e76fedd02
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:44 2005 -0700

    [PATCH] ppc32: fix EMAC Tx channel assignments for NPe405H
    
    Fix PowerPC NPe405H EMAC Tx channel assignments.  EMAC unit in this chip
    uses common for 4xx "two Tx / one Rx" configuration.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a6a4d4320aed1918bf79dfb6bd841317f33b8e9
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Sep 3 15:55:43 2005 -0700

    [PATCH] ppc32: Don't sleep in flush_dcache_icache_page()
    
    flush_dcache_icache_page() will be called on an instruction page fault.  We
    can't sleep in the fault handler, so use kmap_atomic() instead of just
    kmap() for the Book-E case.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Acked-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 656de7e46901fe3228b592e1d9fc89c353f0fa4e
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sat Sep 3 15:55:42 2005 -0700

    [PATCH] ppc32: add cputable entry for 440SP Rev. A
    
    Adds the appropriate cputable entry for PPC440SP so cache line sizes are
    configured correctly.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac6295c289f205bed59b1edfdc4518468db7b1cb
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:41 2005 -0700

    [PATCH] ppc32: removed find_name.c
    
    No one uses find_name.c and no one seems to care about either.  So I'm
    removing it.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9149fb3b8e6913eeb0c80010afef9c55892f6e61
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Sep 3 15:55:40 2005 -0700

    [PATCH] ppc32: add 440GX rev.F cputable entry
    
    Add PowerPC 440GX rev.F cputable entry.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39cdc4bfb5c587c617ab6a28083c19101154e149
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:39 2005 -0700

    [PATCH] ppc32: Cleaned up global namespace of Book-E watchdog variables
    
    Renamed global variables used to convey if the watchdog is enabled and
    periodicity of the timer and moved the declarations into a header for these
    variables
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0531b9b3299f3066b1db78f1693edabbba08b5c
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:38 2005 -0700

    [PATCH] cpm_uart: Fix baseaddress for SMC 1 and 2
    
    Base addess register for SMC 1 and 2 are never initialized.  This means
    that they will not work unless a bootloader already configured them.
    
    The DPRAM already have space reserved, this patch just makes sure the base
    addess register is updated correctly on initialization.
    
    Signed-off-by: Rune Torgersen <runet@innovsys.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 638861d54eec6b04a88d5d8df8b790d87de80b8d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:37 2005 -0700

    [PATCH] cpm_uart: use schedule_timeout instead of direct call to schedule
    
    use schedule_timeout instead of direct call to schedule
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d8ba1a9793302fdcee3d6d4133c455023ca8ce9
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:36 2005 -0700

    [PATCH] cpm_uart: Fix 2nd serial port on MPC8560 ADS
    
    The 2nd serial port on the MPC8560 ADS was not being configured correctly
    and thus could not be used as a console.  Updated the defconfig for the
    board to configure the proper SCC channel for the 2nd serial port.
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2698ebcb4338f09206b5accd75bc5cf2ed3dc641
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sat Sep 3 15:55:35 2005 -0700

    [PATCH] ppc32: add phy excluded features to ocp_func_emac_data
    
    This patch adds a field to struct ocp_func_emac_data that allows
    platform-specific unsupported PHY features to be passed in to the ibm_emac
    ethernet driver.
    
    This patch also adds some logic for the Bamboo eval board to populate this
    field based on the dip switches on the board.  This is a workaround for the
    improperly biased RJ-45 sockets on the Rev.  0 Bamboo.
    
    Signed-off-by: Wade Farnsworth <wfarnsworth@mvista.com>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e8fff09756bdb799154d034c63033192d6f8f89
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:34 2005 -0700

    [PATCH] ppc32: Add ppc_sys descriptions for PowerQUICC II devices
    
    Added ppc_sys device and system definitions for PowerQUICC II devices.
    This will allow drivers for PQ2 to be proper platform device drivers.
    Which can be shared on PQ3 processors with the same peripherals.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f40ccd294d14e5aca464c1913e8e0d8de35fca
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:33 2005 -0700

    [PATCH] ppc32: Added support for the Book-E style Watchdog Timer
    
    PowerPC 40x and Book-E processors support a watchdog timer at the processor
    core level.  The timer has implementation dependent timeout frequencies
    that can be configured by software.
    
    One the first Watchdog timeout we get a critical exception.  It is left to
    board specific code to determine what should happen at this point.  If
    nothing is done and another timeout period expires the processor may
    attempt to reset the machine.
    
    Command line parameters:
      wdt=0 : disable watchdog (default)
      wdt=1 : enable watchdog
    
      wdt_period=N : N sets the value of the Watchdog Timer Period.
    
      The Watchdog Timer Period meaning is implementation specific. Check
      User Manual for the processor for more details.
    
    This patch is based off of work done by Takeharu Kato.
    
    Signed-off-by: Matt McClintock <msm@freescale.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 886b9fa49900b055e20cd98f379fda49835d1ee6
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Sat Sep 3 15:55:32 2005 -0700

    [PATCH] ppc32: Add usb support to IBM stb04xxx platforms
    
    Support ochi-ppc-soc.c on IBM stb04xxx platforms
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d27477c2259488825f2f425d24f209a1b6f8dc7d
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Sep 3 15:55:31 2005 -0700

    [PATCH] ppc32: fix asm-ppc/dma-mapping.h sparse warning
    
    GFP flags must be passed as unisgned int __nocast these days, else we'll
    get tons of sparse warnings in every driver.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 617bf9a47f017b7e91dab9ef9bdaaeaee24163a7
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:30 2005 -0700

    [PATCH] ppc32: Remove board support for PCORE
    
    Support for the PCORE board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4ad35a34bdc27ae18f97d684ca0e693bbffd5f5
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:29 2005 -0700

    [PATCH] ppc32: Remove board support for SPD823TS
    
    Support for the SPD823TS board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b1a97776d0e4ad76e1e350e7ec1f4406af5f9e1
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:28 2005 -0700

    [PATCH] ppc32: Remove board support for SM850
    
    Support for the SM850 board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea08dcfa5439acaf33660e372d44fc049a90b121
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:28 2005 -0700

    [PATCH] ppc32: Remove board support for REDWOOD
    
    Support for the REDWOOD board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2d34169cc9834f29dac0b02f95022b1e0b97e52
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:27 2005 -0700

    [PATCH] ppc32: Remove board support for RAINIER
    
    Support for the RAINIER board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37330c9146767fd4f5eb147b01cb500eabf773cf
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:26 2005 -0700

    [PATCH] ppc32: Remove board support for OAK
    
    Support for the OAK board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6db789b6a3a9ee41b22de3980748af85f7dbe416
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:25 2005 -0700

    [PATCH] ppc32: Remove board support for MENF1
    
    Support for the MENF1 board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89d7f53030baa2616eb2fe87cbc19bc73111a78e
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:24 2005 -0700

    [PATCH] ppc32: Remove board support for MCPN765
    
    Support for the MCPN765 board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9d1e2a3da505f0574751c3041bbc307c30aeca
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:23 2005 -0700

    [PATCH] ppc32: Remove board support for K2
    
    Support for the K2 board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94cb20e951511051367493a1399e16eb1a7433ae
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:23 2005 -0700

    [PATCH] ppc32: Remove defconfig for CEDAR
    
    Support for the CEDAR board no longer exists, removing the defconfig for it
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8bc6cedb272542ca401dfb01b17bf11ecb56a8c
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:22 2005 -0700

    [PATCH] ppc32: Remove board support for BEECH
    
    Support for the BEECH board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4f1269cb36adfb452c04dcb3d40f51b8a1956bb
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:21 2005 -0700

    [PATCH] ppc32: Remove board support for ASH
    
    Support for the ASH board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3800d8ffa0a91f3047cbfa82e435d483ffc8dd4
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Sep 3 15:55:20 2005 -0700

    [PATCH] ppc32: Remove board support for ADIR
    
    Support for the ADIR board is no longer maintained and thus being removed
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b4dc82247184504ba6d0689566a25d03eb1095c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:55:19 2005 -0700

    [PATCH] arch/ppc/kernel/ppc_ksyms.c: remove unused #define EXPORT_SYMTAB_STROPS
    
    This #define is only used on sparc.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f549d6c18c0e8e6cf1bf0e7a47acc1daf7e2cec1
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sat Sep 3 15:55:18 2005 -0700

    [PATCH] Generic VFS fallback for security xattrs
    
    This patch modifies the VFS setxattr, getxattr, and listxattr code to fall
    back to the security module for security xattrs if the filesystem does not
    support xattrs natively.  This allows security modules to export the incore
    inode security label information to userspace even if the filesystem does
    not provide xattr storage, and eliminates the need to individually patch
    various pseudo filesystem types to provide such access.  The patch removes
    the existing xattr code from devpts and tmpfs as it is then no longer
    needed.
    
    The patch restructures the code flow slightly to reduce duplication between
    the normal path and the fallback path, but this should only have one
    user-visible side effect - a program may get -EACCES rather than
    -EOPNOTSUPP if policy denied access but the filesystem didn't support the
    operation anyway.  Note that the post_setxattr hook call is not needed in
    the fallback case, as the inode_setsecurity hook call handles the incore
    inode security state update directly.  In contrast, we do call fsnotify in
    both cases.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5bf6c55edf94e9c7fc01724d5b271f78eaf1d3f
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 3 15:55:17 2005 -0700

    [PATCH] selinux: endian notations
    
    This patch adds endian notations to the SELinux code.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 782ebb992ec20b5afdd5786ee8c2f1b58b631f24
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sat Sep 3 15:55:16 2005 -0700

    [PATCH] selinux: Reduce memory use by avtab
    
    This patch improves memory use by SELinux by both reducing the avtab node
    size and reducing the number of avtab nodes.  The memory savings are
    substantial, e.g.  on a 64-bit system after boot, James Morris reported the
    following data for the targeted and strict policies:
    
                #objs  objsize   kernmem
    Targeted:
      Before:  237888       40     9.1MB
      After:    19968       24     468KB
    
    Strict:
      Before:  571680       40   21.81MB
      After:   221052       24    5.06MB
    
    The improvement in memory use comes at a cost in the speed of security
    server computations of access vectors, but these computations are only
    required on AVC cache misses, and performance measurements by James Morris
    using a number of benchmarks have shown that the change does not cause any
    significant degradation.
    
    Note that a rebuilt policy via an updated policy toolchain
    (libsepol/checkpolicy) is required in order to gain the full benefits of
    this patch, although some memory savings benefits are immediately applied
    even to older policies (in particular, the reduction in avtab node size).
    Sources for the updated toolchain are presently available from the
    sourceforge CVS tree (http://sourceforge.net/cvs/?group_id=21266), and
    tarballs are available from http://www.flux.utah.edu/~sds.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 720d6c29e146e96cca858057469951e91e0e6850
Author: Egry Gabor <gaboregry@t-online.hu>
Date:   Sat Sep 3 15:55:15 2005 -0700

    [PATCH] kconfig: linux.pot for all arch
    
    The 'make update-po-config' creates the .pot file for the default arch.  This
    patch enhances it with all arch.
    
    Signed-off-by: Egry Gabor <gaboregry@t-online.hu>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 964267e627966ffa018fc4a3e19e6bad337a9125
Author: Egry Gabor <gaboregry@t-online.hu>
Date:   Sat Sep 3 15:55:14 2005 -0700

    [PATCH] kconfig: kxgettext: EOL fix
    
    The end of line character doesn't exist on end of help in all case, check it
    first.
    
    Signed-off-by: Egry Gabor <gaboregry@t-online.hu>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c196eff3060270f155343b63ef3d06f31ccfcd2e
Author: Egry Gabor <gaboregry@t-online.hu>
Date:   Sat Sep 3 15:55:12 2005 -0700

    [PATCH] kconfig: kxgettext: message fix
    
    The gettext doesn't handle the {CONFIG}:00000 markers as sources.  I added a
    simple comment prefix for them.
    
    Signed-off-by: Egry Gabor <gaboregry@t-online.hu>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c07e02db76940c75fc92f2f2c9adcdbb09ed70d0
Author: Martin Hicks <mort@sgi.com>
Date:   Sat Sep 3 15:55:11 2005 -0700

    [PATCH] VM: add page_state info to per-node meminfo
    
    Add page_state info to the per-node meminfo file in sysfs.  This is mostly
    just for informational purposes.
    
    The lack of this information was brought up recently during a discussion
    regarding pagecache clearing, and I put this patch together to test out one
    of the suggestions.
    
    It seems like interesting info to have, so I'm submitting the patch.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e070ad49f31155d872d8e96cab2142840993e3c0
Author: Mauricio Lin <mauriciolin@gmail.com>
Date:   Sat Sep 3 15:55:10 2005 -0700

    [PATCH] add /proc/pid/smaps
    
    Add a "smaps" entry to /proc/pid: show howmuch memory is resident in each
    mapping.
    
    People that want to perform a memory consumption analysing can use it
    mainly if someone needs to figure out which libraries can be reduced for
    embedded systems.  So the new features are the physical size of shared and
    clean [or dirty]; private and clean [or dirty].
    
    Take a look the example below:
    
    # cat /proc/4576/smaps
    
    08048000-080dc000 r-xp /bin/bash
    Size:               592 KB
    Rss:                500 KB
    Shared_Clean:       500 KB
    Shared_Dirty:         0 KB
    Private_Clean:        0 KB
    Private_Dirty:        0 KB
    080dc000-080e2000 rw-p /bin/bash
    Size:                24 KB
    Rss:                 24 KB
    Shared_Clean:         0 KB
    Shared_Dirty:         0 KB
    Private_Clean:        0 KB
    Private_Dirty:       24 KB
    080e2000-08116000 rw-p
    Size:               208 KB
    Rss:                208 KB
    Shared_Clean:         0 KB
    Shared_Dirty:         0 KB
    Private_Clean:        0 KB
    Private_Dirty:      208 KB
    b7e2b000-b7e34000 r-xp /lib/tls/libnss_files-2.3.2.so
    Size:                36 KB
    Rss:                 12 KB
    Shared_Clean:        12 KB
    Shared_Dirty:         0 KB
    Private_Clean:        0 KB
    Private_Dirty:        0 KB
    ...
    
    (Includes a cleanup from "Richard Purdie" <rpurdie@rpsys.net>)
    
    From: Torsten Foertsch <torsten.foertsch@gmx.net>
    
    show_smap calls first show_map and then prints its additional information to
    the seq_file.  show_map checks if all it has to print fits into the buffer and
    if yes marks the current vma as written.  While that is correct for show_map
    it is not for show_smap.  Here the vma should be marked as written only after
    the additional information is also written.
    
    The attached patch cures the problem.  It moves the functionality of the
    show_map function to a new function show_map_internal that is called with an
    additional struct mem_size_stats* argument.  Then show_map calls
    show_map_internal with NULL as struct mem_size_stats* whereas show_smap calls
    it with a real pointer.  Now the final
    
    	if (m->count < m->size)  /* vma is copied successfully */
    		m->version = (vma != get_gate_vma(task))? vma->vm_start: 0;
    
    is done only if the whole entry fits into the buffer.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00e145b6d59a16dd7740197a18f7abdb3af004a9
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sat Sep 3 15:55:07 2005 -0700

    [PATCH] slab: removes local_irq_save()/local_irq_restore() pair
    
    Proposed by and based on a patch from Eric Dumazet <dada1@cosmosbay.com>:
    This patch removes unnecessary critical section in ksize() function, as
    cli/sti are rather expensive on modern CPUS.
    
    It additionally adds a docbook entry for ksize() and further simplifies the
    code.
    
    Signed-Off-By: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34342e863c3143640c031760140d640a06c6a5f8
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Sat Sep 3 15:55:06 2005 -0700

    [PATCH] mm/slab.c: prefetchw the start of new allocated objects
    
    Mostobjects returned by __cache_alloc() will be written by the caller,
    (but not all callers want to write all the object, but just at the
    begining) prefetchw() tells the modern CPU to think about the future
    writes, ie start some memory transactions in advance.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61e06037e764337da39dff307cbcdbe9cf288349
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:55:06 2005 -0700

    [PATCH] x86_64: avoid some atomic operations during address space destruction
    
    Any architecture that has hardware updated A/D bits that require
    synchronization against other processors during PTE operations can benefit
    from doing non-atomic PTE updates during address space destruction.
    Originally done on i386, now ported to x86_64.
    
    Doing a read/write pair instead of an xchg() operation saves the implicit
    lock, which turns out to be a big win on 32-bit (esp w PAE).
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a600388d28419305aad3c4c0af52c223cf6fa0af
Author: Zachary Amsden <zach@vmware.com>
Date:   Sat Sep 3 15:55:04 2005 -0700

    [PATCH] x86: ptep_clear optimization
    
    Add a new accessor for PTEs, which passes the full hint from the mmu_gather
    struct; this allows architectures with hardware pagetables to optimize away
    atomic PTE operations when destroying an address space.  Removing the
    locked operation should allow better pipelining of memory access in this
    loop.  I measured an average savings of 30-35 cycles per zap_pte_range on
    the first 500 destructions on Pentium-M, but I believe the optimization
    would win more on older processors which still assert the bus lock on xchg
    for an exclusive cacheline.
    
    Update: I made some new measurements, and this saves exactly 26 cycles over
    ptep_get_and_clear on Pentium M.  On P4, with a PAE kernel, this saves 180
    cycles per ptep_get_and_clear, for a whopping 92160 cycles savings for a
    full address space destruction.
    
    pte_clear_full is not yet used, but is provided for future optimizations
    (in particular, when running inside of a hypervisor that queues page table
    updates, the full hint allows us to avoid queueing unnecessary page table
    update for an address space in the process of being destroyed.
    
    This is not a huge win, but it does help a bit, and sets the stage for
    further hypervisor optimization of the mm layer on all architectures.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Cc: Christoph Lameter <christoph@lameter.com>
    Cc: <linux-mm@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa5b08d5f818063d18433194f20359ef2ae50254
Author: Kyle Moffett <mrmacman_g4@mac.com>
Date:   Sat Sep 3 15:55:03 2005 -0700

    [PATCH] sab: consolidate kmem_bufctl_t
    
    This is used only in slab.c and each architecture gets to define whcih
    underlying type is to be used.
    
    Seems a bit silly - move it to slab.c and use the same type for all
    architectures: unsigned int.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e5c9f39f64d8a55c5db37a5ea43e37d3422fd92
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Sat Sep 3 15:55:02 2005 -0700

    [PATCH] remove hugetlb_clean_stale_pgtable() and fix huge_pte_alloc()
    
    I don't think we need to call hugetlb_clean_stale_pgtable() anymore
    in 2.6.13 because of the rework with free_pgtables().  It now collect
    all the pte page at the time of munmap.  It used to only collect page
    table pages when entire one pgd can be freed and left with staled pte
    pages.  Not anymore with 2.6.13.  This function will never be called
    and We should turn it into a BUG_ON.
    
    I also spotted two problems here, not Adam's fault :-)
    (1) in huge_pte_alloc(), it looks like a bug to me that pud is not
        checked before calling pmd_alloc()
    (2) in hugetlb_clean_stale_pgtable(), it also missed a call to
        pmd_free_tlb.  I think a tlb flush is required to flush the mapping
        for the page table itself when we clear out the pmd pointing to a
        pte page.  However, since hugetlb_clean_stale_pgtable() is never
        called, so it won't trigger the bug.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Adam Litke <agl@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02b0ccef903e85673ead74ddb7c431f2f7ce183d
Author: Adam Litke <agl@us.ibm.com>
Date:   Sat Sep 3 15:55:01 2005 -0700

    [PATCH] hugetlb: check p?d_present in huge_pte_offset()
    
    For demand faulting, we cannot assume that the page tables will be
    populated.  Do what the rest of the architectures do and test p?d_present()
    while walking down the page table.
    
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Cc: <linux-mm@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bf07f3d4b4358aa6d99a26d7a0165f1e91c3fcc
Author: Adam Litke <agl@us.ibm.com>
Date:   Sat Sep 3 15:55:00 2005 -0700

    [PATCH] hugetlb: move stale pte check into huge_pte_alloc()
    
    Initial Post (Wed, 17 Aug 2005)
    
    This patch moves the
    	if (! pte_none(*pte))
    		hugetlb_clean_stale_pgtable(pte);
    logic into huge_pte_alloc() so all of its callers can be immune to the bug
    described by Kenneth Chen at http://lkml.org/lkml/2004/6/16/246
    
    > It turns out there is a bug in hugetlb_prefault(): with 3 level page table,
    > huge_pte_alloc() might return a pmd that points to a PTE page. It happens
    > if the virtual address for hugetlb mmap is recycled from previously used
    > normal page mmap. free_pgtables() might not scrub the pmd entry on
    > munmap and hugetlb_prefault skips on any pmd presence regardless what type
    > it is.
    
    Unless I am missing something, it seems more correct to place the check inside
    huge_pte_alloc() to prevent a the same bug wherever a huge pte is allocated.
    It also allows checking for this condition when lazily faulting huge pages
    later in the series.
    
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Cc: <linux-mm@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32e51a8c976fc72c3e9bcece9767d9908816bf8e
Author: Adam Litke <agl@us.ibm.com>
Date:   Sat Sep 3 15:54:59 2005 -0700

    [PATCH] hugetlb: add pte_huge() macro
    
    This patch adds a macro pte_huge(pte) for i386/x86_64 which is needed by a
    patch later in the series.  Instead of repeating (_PAGE_PRESENT |
    _PAGE_PSE), I've added __LARGE_PTE to i386 to match x86_64.
    
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Cc: <linux-mm@kvack.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd195c49fb17a21e232f50bddb2267150053cf34
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Sat Sep 3 15:54:58 2005 -0700

    [PATCH] arm: allow for arch-specific IOREMAP_MAX_ORDER
    
    Version 6 of the ARM architecture introduces the concept of 16MB pages
    (supersections) and 36-bit (40-bit actually, but nobody uses this) physical
    addresses.  36-bit addressed memory and I/O and ARMv6 can only be mapped
    using supersections and the requirement on these is that both virtual and
    physical addresses be 16MB aligned.  In trying to add support for ioremap()
    of 36-bit I/O, we run into the issue that get_vm_area() allows for a
    maximum of 512K alignment via the IOREMAP_MAX_ORDER constant.  To work
    around this, we can:
    
    - Allocate a larger VM area than needed (size + (1ul << IOREMAP_MAX_ORDER))
      and then align the pointer ourselves, but this ends up with 512K of
      wasted VM per ioremap().
    
    - Provide a new __get_vm_area_aligned() API and make __get_vm_area() sit
      on top of this. I did this and it works but I don't like the idea
      adding another VM API just for this one case.
    
    - My preferred solution which is to allow the architecture to override
      the IOREMAP_MAX_ORDER constant with it's own version.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b4ee40ebbbaf3f8c775b023d89ceedda1167d79
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:54:57 2005 -0700

    [PATCH] mm: correct _PAGE_FILE comment
    
    _PAGE_FILE does not indicate whether a file is in page / swap cache, it is
    set just for non-linear PTE's.  Correct the comment for i386, x86_64, UML.
    Also clearify _PAGE_NONE.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4944e76d81801b8e60ed3e7789443f210c16ed65
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:54:56 2005 -0700

    [PATCH] mm: remove implied vm_ops check
    
    If !vma->vm-ops we already BUG above, so retesting it is useless.  The
    compiler cannot optimize this because BUG is a macro and is not thus marked
    noreturn; that should possibly be fixed.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d44ed4f86892e350f4b16a3489b7e7c1a9bb7ead
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:54:55 2005 -0700

    [PATCH] shmem_populate: avoid an useless check, and some comments
    
    Either shmem_getpage returns a failure, or it found a page, or it was told
    it couldn't do any I/O.  So it's useless to check nonblock in the else
    branch.  We could add a BUG() there but I preferred to comment the
    offending function.
    
    This was taken out from one Ingo Molnar's old patch I'm resurrecting.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0abf40c1ac3f25d264c019e1cfe155d590defb87
Author: Martin Hicks <mort@sgi.com>
Date:   Sat Sep 3 15:54:54 2005 -0700

    [PATCH] vm: slab.c spelling correction
    
    Fix a small spelling mistake.  subtile->subtle
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e83a9596712eb784e7e6604f43a2c140eb912743
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Sep 3 15:54:53 2005 -0700

    [PATCH] comment typo fix
    
    smp_entry_t -> swap_entry_t
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 836d5ffd34550901ea024347693e689273ded8aa
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:53 2005 -0700

    [PATCH] mm: fix madvise vma merging
    
    Better late than never, I've at last reviewed the madvise vma merging
    going into 2.6.13.  Remove a pointless check and fix two little bugs -
    a simple test (with /proc/<pid>/maps hacked to show ReadHints) showed
    both mismerges in practice: though being madvise, neither was disastrous.
    
    1. Correct placement of the success label in madvise_behavior: as in
       mprotect_fixup and mlock_fixup, it is necessary to update vm_flags
       when vma_merge succeeds (to handle the exceptional Case 8 noted in
       the comments above vma_merge itself).
    
    2. Correct initial value of prev when starting part way into a vma: as
       in sys_mprotect and do_mlock, it needs to be set to vma in this case
       (vma_merge handles only that minimum of cases shown in its comments).
    
    3. If find_vma_prev sets prev, then the vma it returns is prev->vm_next,
       so it's pointless to make that same assignment again in sys_madvise.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53e9a6159fdc6419874ce4d86d3577dbedc77b62
Author: Martin Hicks <mort@bork.org>
Date:   Sat Sep 3 15:54:51 2005 -0700

    [PATCH] VM: zone reclaim atomic ops cleanup
    
    Christoph Lameter and Marcelo Tosatti asked to get rid of the
    atomic_inc_and_test() to cleanup the atomic ops in the zone reclaim code.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bce5f6ba340b09d8b29902add204bb95a6d3d88b
Author: Martin Hicks <mort@sgi.com>
Date:   Sat Sep 3 15:54:50 2005 -0700

    [PATCH] VM: add capabilites check to set_zone_reclaim
    
    Add a capability check to sys_set_zone_reclaim().  This syscall is not
    something that should be available to a user.
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 242e54686257493f0b10ac557e730419d9af7d24
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 3 15:54:50 2005 -0700

    [PATCH] mm: remove atomic
    
    This bitop does not need to be atomic because it is performed when there will
    be no references to the page (ie.  the page is being freed).
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a61c349b28ec5aef7e929236571fd770fdef0bb
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 3 15:54:49 2005 -0700

    [PATCH] mm: remap ZERO_PAGE mappings
    
    filemap_xip's nopage routine maps the ZERO_PAGE into readonly mappings, if it
    has no data page to map there: then if the hole in the file is later filled,
    __xip_unmap uses an rmap technique to replace the ZERO_PAGEs mapped for that
    offset by the newly allocated file page, so that established mappings will see
    the newly written data.
    
    However, on MIPS (alone) there's not one but as many as eight ZERO_PAGEs,
    chosen for coloring by user virtual address; and if mremap has meanwhile been
    used to move a mapping containing a ZERO_PAGE, it will generally not match the
    ZERO_PAGE(address) __xip_unmap is looking for.
    
    To maintain XIP's established mappings correctly on MIPS, we need Nick's fix
    to mremap's move_one_page (originally presented as an optimization), to
    replace the ZERO_PAGE appropriate to the old address by the ZERO_PAGE
    appropriate to the new address.
    
    (But when I first saw this, I was thinking the ZERO_PAGEs themselves would get
    corrupted, very bad.  Now I think it's the other way round, that the
    established mappings will fail to see the newly written data: incorrect, but
    not corrupting everything else.  Whether filemap_xip's technique is generally
    safe, I'd hesitate to say in a hurry: it's interesting, but we've never tried
    to do that in tmpfs.)
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d7670e0f649f9e6e6ea6c8bb9f52441fa00f92b
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 3 15:54:48 2005 -0700

    [PATCH] mm: cleanup rmap
    
    Thanks to Bill Irwin for pointing this out.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2822c1aa574d277b9ba0130b1e71c1a5874bc04a
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 3 15:54:47 2005 -0700

    [PATCH] mm: micro-optimise rmap
    
    Microoptimise page_add_anon_rmap.  Although these expressions are used only in
    the taken branch of the if() statement, the compiler can't reorder them inside
    because atomic_inc_and_test is a barrier.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3dce2d89c269d5373a120d4a22fc2426ec992b0
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sat Sep 3 15:54:46 2005 -0700

    [PATCH] mm: comment rmap
    
    Just be clear that VM_RESERVED pages here are a bug, and the test is not there
    because they are expected.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e21c8f145f5052c1c2fb4a4b41bee01c848159b
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Sat Sep 3 15:54:45 2005 -0700

    [PATCH] /proc/<pid>/numa_maps to show on which nodes pages reside
    
    This patch was recently discussed on linux-mm:
    http://marc.theaimsgroup.com/?t=112085728500002&r=1&w=2
    
    I inherited a large code base from Ray for page migration.  There was a
    small patch in there that I find to be very useful since it allows the
    display of the locality of the pages in use by a process.  I reworked that
    patch and came up with a /proc/<pid>/numa_maps that gives more information
    about the vma's of a process.  numa_maps is indexes by the start address
    found in /proc/<pid>/maps.  F.e.  with this patch you can see the page use
    of the "getty" process:
    
    margin:/proc/12008 # cat maps
    00000000-00004000 r--p 00000000 00:00 0
    2000000000000000-200000000002c000 r-xp 00000000 08:04 516                /lib/ld-2.3.3.so
    2000000000038000-2000000000040000 rw-p 00028000 08:04 516                /lib/ld-2.3.3.so
    2000000000040000-2000000000044000 rw-p 2000000000040000 00:00 0
    2000000000058000-2000000000260000 r-xp 00000000 08:04 54707842           /lib/tls/libc.so.6.1
    2000000000260000-2000000000268000 ---p 00208000 08:04 54707842           /lib/tls/libc.so.6.1
    2000000000268000-2000000000274000 rw-p 00200000 08:04 54707842           /lib/tls/libc.so.6.1
    2000000000274000-2000000000280000 rw-p 2000000000274000 00:00 0
    2000000000280000-20000000002b4000 r--p 00000000 08:04 9126923            /usr/lib/locale/en_US.utf8/LC_CTYPE
    2000000000300000-2000000000308000 r--s 00000000 08:04 60071467           /usr/lib/gconv/gconv-modules.cache
    2000000000318000-2000000000328000 rw-p 2000000000318000 00:00 0
    4000000000000000-4000000000008000 r-xp 00000000 08:04 29576399           /sbin/mingetty
    6000000000004000-6000000000008000 rw-p 00004000 08:04 29576399           /sbin/mingetty
    6000000000008000-600000000002c000 rw-p 6000000000008000 00:00 0          [heap]
    60000fff7fffc000-60000fff80000000 rw-p 60000fff7fffc000 00:00 0
    60000ffffff44000-60000ffffff98000 rw-p 60000ffffff44000 00:00 0          [stack]
    a000000000000000-a000000000020000 ---p 00000000 00:00 0                  [vdso]
    
    cat numa_maps
    2000000000000000 default MaxRef=43 Pages=11 Mapped=11 N0=4 N1=3 N2=2 N3=2
    2000000000038000 default MaxRef=1 Pages=2 Mapped=2 Anon=2 N0=2
    2000000000040000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N0=1
    2000000000058000 default MaxRef=43 Pages=61 Mapped=61 N0=14 N1=15 N2=16 N3=16
    2000000000268000 default MaxRef=1 Pages=2 Mapped=2 Anon=2 N0=2
    2000000000274000 default MaxRef=1 Pages=3 Mapped=3 Anon=3 N0=3
    2000000000280000 default MaxRef=8 Pages=3 Mapped=3 N0=3
    2000000000300000 default MaxRef=8 Pages=2 Mapped=2 N0=2
    2000000000318000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N2=1
    4000000000000000 default MaxRef=6 Pages=2 Mapped=2 N1=2
    6000000000004000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N0=1
    6000000000008000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N0=1
    60000fff7fffc000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N0=1
    60000ffffff44000 default MaxRef=1 Pages=1 Mapped=1 Anon=1 N0=1
    
    getty uses ld.so.  The first vma is the code segment which is used by 43
    other processes and the pages are evenly distributed over the 4 nodes.
    
    The second vma is the process specific data portion for ld.so.  This is
    only one page.
    
    The display format is:
    
    <startaddress>	 Links to information in /proc/<pid>/map
    <memory policy>  This can be "default" "interleave={}", "prefer=<node>" or "bind={<zones>}"
    MaxRef=		<maximum reference to a page in this vma>
    Pages=		<Nr of pages in use>
    Mapped=		<Nr of pages with mapcount >
    Anon=		<nr of anonymous pages>
    Nx=		<Nr of pages on Node x>
    
    The content of the proc-file is self-evident.  If this would be tied into
    the sparsemem system then the contents of this file would not be too
    useful.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 839b9685e80592809d6dfdd865986cd1b5ddc2fb
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:43 2005 -0700

    [PATCH] rmap: don't test rss
    
    Remove the three get_mm_counter(mm, rss) tests from rmap.c: there was a
    time when testing rss was important to avoid a particular race between
    dup_mmap and the anonmm rmap; but now it's just a rather silly pseudo-
    optimization, made even more obscure by the get_mm_counter macro.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3279ffd97f1b3962e40d3c5f09495ef8320b180b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:43 2005 -0700

    [PATCH] delete from_swap_cache BUG_ONs
    
    Three of the four BUG_ONs in delete_from_swap_cache are immediately
    repeated in __delete_from_swap_cache: delete those and add the one.  But
    perhaps mm/ is altogether overprovisioned with historic BUGs?
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dae06ac43d56d23e50a2300d511b32a9e38cd657
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:42 2005 -0700

    [PATCH] swap: update swsusp use of swap_info
    
    Aha, swsusp dips into swap_info[], better update it to swap_lock.  It's
    bitflipping flags with 0xFF, so get_swap_page will allocate from only the one
    chosen device: let's change that to flip SWP_WRITEOK.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d337b9194b1ce3b6fd5f3cb2799455ed2f9a3d1
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:41 2005 -0700

    [PATCH] swap: swap_lock replace list+device
    
    The idea of a swap_device_lock per device, and a swap_list_lock over them all,
    is appealing; but in practice almost every holder of swap_device_lock must
    already hold swap_list_lock, which defeats the purpose of the split.
    
    The only exceptions have been swap_duplicate, valid_swaphandles and an
    untrodden path in try_to_unuse (plus a few places added in this series).
    valid_swaphandles doesn't show up high in profiles, but swap_duplicate does
    demand attention.  However, with the hold time in get_swap_pages so much
    reduced, I've not yet found a load and set of swap device priorities to show
    even swap_duplicate benefitting from the split.  Certainly the split is mere
    overhead in the common case of a single swap device.
    
    So, replace swap_list_lock and swap_device_lock by spinlock_t swap_lock
    (generally we seem to prefer an _ in the name, and not hide in a macro).
    
    If someone can show a regression in swap_duplicate, then probably we should
    add a hashlock for the swap_map entries alone (shorts being anatomic), so as
    to help the case of the single swap device too.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 048c27fd72816b44e096997d1c6901c3abbfd45b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:40 2005 -0700

    [PATCH] swap: scan_swap_map latency breaks
    
    The get_swap_page/scan_swap_map latency can be so bad that even those without
    preemption configured deserve relief: periodically cond_resched.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52b7efdbe5f5696fc80338560a3fc51e0b0a993c
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:39 2005 -0700

    [PATCH] swap: scan_swap_map drop swap_device_lock
    
    get_swap_page has often shown up on latency traces, doing lengthy scans while
    holding two spinlocks.  swap_list_lock is already dropped, now scan_swap_map
    drop swap_device_lock before scanning the swap_map.
    
    While scanning for an empty cluster, don't worry that racing tasks may
    allocate what was free and free what was allocated; but when allocating an
    entry, check it's still free after retaking the lock.  Avoid dropping the lock
    in the expected common path.  No barriers beyond the locks, just let the
    cookie crumble; highest_bit limit is volatile, but benign.
    
    Guard against swapoff: must check SWP_WRITEOK before allocating, must raise
    SWP_SCANNING reference count while in scan_swap_map, swapoff wait for that to
    fall - just use schedule_timeout, we don't want to burden scan_swap_map
    itself, and it's very unlikely that anyone can really still be in
    scan_swap_map once swapoff gets this far.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dfad4183bf9cd92f977caa3c12cc74f0eefc0e6
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:38 2005 -0700

    [PATCH] swap: scan_swap_map restyled
    
    Rewrite scan_swap_map to allocate in just the same way as before (taking the
    next free entry SWAPFILE_CLUSTER-1 times, then restarting at the lowest wholly
    empty cluster, falling back to lowest entry if none), but with a view towards
    dropping the lock in the next patch.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb4f88dcabdc716c7c350e09cf4a38a419b007e1
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:37 2005 -0700

    [PATCH] swap: get_swap_page drop swap_list_lock
    
    Rewrite get_swap_page to allocate in just the same sequence as before, but
    without holding swap_list_lock across its scan_swap_map.  Decrement
    nr_swap_pages and update swap_list.next in advance, while still holding
    swap_list_lock.  Skip full devices by testing highest_bit.  Swapoff hold
    swap_device_lock as well as swap_list_lock to clear SWP_WRITEOK.  Reduces lock
    contention when there are parallel swap devices of the same priority.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89d09a2c80ea6baafb559b86d545fada05e14ab5
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:36 2005 -0700

    [PATCH] swap: freeing update swap_list.next
    
    This makes negligible difference in practice: but swap_list.next should not be
    updated to a higher prio in the general helper swap_info_get, but rather in
    swap_entry_free; and then only in the case when entry is actually freed.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6eb396dc4a9781c5e7951143ab56ce5710687ab3
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:35 2005 -0700

    [PATCH] swap: swap unsigned int consistency
    
    The swap header's unsigned int last_page determines the range of swap pages,
    but swap_info has been using int or unsigned long in some cases: use unsigned
    int throughout (except, in several places a local unsigned long is useful to
    avoid overflows when adding).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53092a7402f227151a681b0c92ec8598c5618b1a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:34 2005 -0700

    [PATCH] swap: show span of swap extents
    
    The "Adding %dk swap" message shows the number of swap extents, as a guide to
    how fragmented the swapfile may be.  But a useful further guide is what total
    extent they span across (sometimes scarily large).
    
    And there's no need to keep nr_extents in swap_info: it's unused after the
    initial message, so save a little space by keeping it on stack.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11d31886dbcb61039ed3789e583d21c6e70960fd
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:34 2005 -0700

    [PATCH] swap: swap extent list is ordered
    
    There are several comments that swap's extent_list.prev points to the lowest
    extent: that's not so, it's extent_list.next which points to it, as you'd
    expect.  And a couple of loops in add_swap_extent which go all the way through
    the list, when they should just add to the other end.
    
    Fix those up, and let map_swap_page search the list forwards: profiles shows
    it to be twice as quick that way - because prefetch works better on how the
    structs are typically kmalloc'ed?  or because usually more is written to than
    read from swap, and swap is allocated ascendingly?
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4cd3bb10ff0b21b77b5a4cd13b4bd36694e054c4
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:33 2005 -0700

    [PATCH] swap: move destroy_swap_extents calls
    
    sys_swapon's call to destroy_swap_extents on failure is made after the final
    swap_list_unlock, which is faintly unsafe: another sys_swapon might already be
    setting up that swap_info_struct.  Calling it earlier, before taking
    swap_list_lock, is safe.  sys_swapoff's call to destroy_swap_extents was safe,
    but likewise move it earlier, before taking the locks (once try_to_unuse has
    completed, nothing can be needing the swap extents).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2244ec2efa4ee1edf391d0001d314933e2b2974
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:32 2005 -0700

    [PATCH] swap: correct swapfile nr_good_pages
    
    If a regular swapfile lies on a filesystem whose blocksize is less than
    PAGE_SIZE, then setup_swap_extents may have to cut the number of usable swap
    pages; but sys_swapon's nr_good_pages was not expecting that.  Also,
    setup_swap_extents takes no account of badpages listed in the swap header: not
    worth doing so, but ensure nr_badpages is 0 for a regular swapfile.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0d9bcd4bb79a7834f8492f2ae5c2655a551f23d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Sep 3 15:54:31 2005 -0700

    [PATCH] swap: update swapfile i_sem comment
    
    Update swap extents comment: nowadays we guard with S_SWAPFILE not i_sem.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd4fd5aac1282825195c6816ed40a2a6d42db5bf
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sat Sep 3 15:54:30 2005 -0700

    [PATCH] mm: consolidate get_order
    
    Someone mentioned that almost all the architectures used basically the same
    implementation of get_order.  This patch consolidates them into
    asm-generic/page.h and includes that in the appropriate places.  The
    exceptions are ia64 and ppc which have their own (presumably optimised)
    versions.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28ae55c98e4d16eac9a05a8a259d7763ef3aeb18
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sat Sep 3 15:54:29 2005 -0700

    [PATCH] sparsemem extreme: hotplug preparation
    
    This splits up sparse_index_alloc() into two pieces.  This is needed
    because we'll allocate the memory for the second level in a different place
    from where we actually consume it to keep the allocation from happening
    underneath a lock
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Cc: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e347261a80b57df792ab9464b5f0ed59add53a8
Author: Bob Picco <bob.picco@hp.com>
Date:   Sat Sep 3 15:54:28 2005 -0700

    [PATCH] sparsemem extreme implementation
    
    With cleanups from Dave Hansen <haveblue@us.ibm.com>
    
    SPARSEMEM_EXTREME makes mem_section a one dimensional array of pointers to
    mem_sections.  This two level layout scheme is able to achieve smaller
    memory requirements for SPARSEMEM with the tradeoff of an additional shift
    and load when fetching the memory section.  The current SPARSEMEM
    implementation is a one dimensional array of mem_sections which is the
    default SPARSEMEM configuration.  The patch attempts isolates the
    implementation details of the physical layout of the sparsemem section
    array.
    
    SPARSEMEM_EXTREME requires bootmem to be functioning at the time of
    memory_present() calls.  This is not always feasible, so architectures
    which do not need it may allocate everything statically by using
    SPARSEMEM_STATIC.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 802f192e4a600f7ef84ca25c8b818c8830acef5a
Author: Bob Picco <bob.picco@hp.com>
Date:   Sat Sep 3 15:54:26 2005 -0700

    [PATCH] SPARSEMEM EXTREME
    
    A new option for SPARSEMEM is ARCH_SPARSEMEM_EXTREME.  Architecture
    platforms with a very sparse physical address space would likely want to
    select this option.  For those architecture platforms that don't select the
    option, the code generated is equivalent to SPARSEMEM currently in -mm.
    I'll be posting a patch on ia64 ml which uses this new SPARSEMEM feature.
    
    ARCH_SPARSEMEM_EXTREME makes mem_section a one dimensional array of
    pointers to mem_sections.  This two level layout scheme is able to achieve
    smaller memory requirements for SPARSEMEM with the tradeoff of an
    additional shift and load when fetching the memory section.  The current
    SPARSEMEM -mm implementation is a one dimensional array of mem_sections
    which is the default SPARSEMEM configuration.  The patch attempts isolates
    the implementation details of the physical layout of the sparsemem section
    array.
    
    ARCH_SPARSEMEM_EXTREME depends on 64BIT and is by default boolean false.
    
    I've boot tested under aim load ia64 configured for ARCH_SPARSEMEM_EXTREME.
     I've also boot tested a 4 way Opteron machine with !ARCH_SPARSEMEM_EXTREME
    and tested with aim.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0216f86dafb389c0ad97529fd45e64e883298cfd
Author: Matt Mackall <mpm@selenic.com>
Date:   Sat Sep 3 15:54:25 2005 -0700

    [PATCH] kbuild: fix make clean damaging hg repos
    
    Running 'make clean' was quietly deleting files in Mercurial kernel
    repositories matching '.*.d', which was corrupting the tags portions of the
    repository.  Spotted and fixed by several people.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8a650150b1001bc34d506e4c44538463d368890
Author: Marcel Selhorst <selhorst@crypto.rub.de>
Date:   Sat Sep 3 15:54:20 2005 -0700

    [PATCH] tpm_infineon: Bugfix in PNPACPI-handling
    
    This patch corrects the PNP-handling inside the tpm-driver
    and some minor coding style bugs.
    Note: the pci-device and pnp-device mixture is currently necessary,
    since the used "tpm"-interface requires a pci-dev in order to register
    the driver. This will be fixed within the next iterations.
    
    Signed-off-by: Marcel Selhorst <selhorst@crypto.rub.de>
    Cc: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e770e8506110a57c868bbef9706d132285c2090f
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Sat Sep 3 15:54:18 2005 -0700

    [PATCH] dvb: saa7134-dvb must select tda1004x
    
    Please apply this to 2.6.14, and also to 2.6.13.1 -stable.  Without this
    patch, users will have to EXPLICITLY select tda1004x in Kconfig.  This
    SHOULD be done automatically when saa7134-dvb is selected.  This patch
    corrects this problem.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 010988e888a0abbe7118635c1b33d049caae6b29
Author: Stefan Nickl <Stefan.Nickl@kontron.com>
Date:   Mon Sep 5 01:57:46 2005 -0500

    Input: HIDDEV - make HIDIOCSREPORT wait IO completion
    
    When trying to make the hiddev driver issue several Set_Report control
    transfers to a custom device with 2.6.13-rc6, only the first transfer in a
    row is carried out, while others immediately following it are silently
    dropped.
    
    This happens where hid_submit_report() (in hid-core.c) tests for
    HID_CTRL_RUNNING, which seems to be still set because the first transfer is
    not finished yet.
    
    As a workaround, inserting a delay between the two calls to
    ioctl(HIDIOCSREPORT) in userspace "solves" the problem.  The
    straightforward fix is to add a call to hid_wait_io() to the implementation
    of HIDIOCSREPORT (in hiddev.c), just like for HIDIOCGREPORT.  Works fine
    for me.
    
    Apparently, this issue has some history:
    http://marc.theaimsgroup.com/?l=linux-usb-users&m=111100670105558&w=2
    
    Signed-off-by: Stefan Nickl <Stefan.Nickl@kontron.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7d25258f69cedc2f2e55eb25ba2e2078060b44f4
Author: Brian Schau <brian@schau.com>
Date:   Mon Sep 5 01:57:41 2005 -0500

    Input: HID - add Wireless Security Lock to HID blacklist
    
    The device is a Wireless Security Lock (WSL).  The device identifies itself
    as a Cypress Ultra Mouse.  It is, however, not a mouse at all and as such,
    shouldn't be handled as one.
    
    Signed-off-by: Brian Schau <brian@schau.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e875ce374759087771313c9e76b672b86ac20950
Author: Stelian Pop <stelian@popies.net>
Date:   Mon Sep 5 01:57:33 2005 -0500

    Input: HID - add mapping for Powerbook USB keyboard
    
    Map custom HID events (such as the ones generated by some Logitech and
    Apple Powerbooks USB keyboards) to the FN keycode.
    
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 61cdecd9f5f602775af1e89c200179d093a94ae2
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:13:32 2005 -0500

    Input: HID - add the Trust Predator TH 400 gamepad to the badpad list
    
    Reported-by: Karl Relton <karllinuxtest.relton@ntlworld.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c58de6d949a9d2c386c4d814013b6c967c14ea5a
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:13:15 2005 -0500

    Input: HID - add a quirk for the Apple Powermouse
    
    Add a quirk for the Apple Powermouse, remapping GenericDesktop.Z to
    Rel.HWheel, to allow horizontal scrolling in Linux.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c4786ca8a4274a0bbffe217917972943348bed64
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:13:03 2005 -0500

    Input: HID - fix URB success status handling
    
    Add a missing break; statement to the URB status handling
    in hid-core.c, avoiding flushing the request queue on success.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8d9a9ae3b2941d94bb0023a3aca2ec2bfa83d0c2
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:12:47 2005 -0500

    Input: sunkbd - extend mapping to handle Type-6 Sun keyboards
    
    Map an unmarked key at 'Esc' position to KEY_MACRO
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit fb76b099f86624d3c629cfab071aa2296f65b7bb
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:12:39 2005 -0500

    Input: iforce - use wait_event_interruptible_timeout
    
    The timeout while() loops in iforce-packets.c lack a
    set_current_state(TASK_INTERRUPTIBLE); call. The right solution is
    to replace them with wait_event_interruptible_timeout().
    
    Reported-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 39fd748f56012fdde4cf862f127ce4cdec50d661
Author: Micah F. Galizia <mfgalizi@uwo.ca>
Date:   Mon Sep 5 00:12:15 2005 -0500

    Input: HID - add support for Logitech UltraX Media Remote control
    
    The hid now supports the Logitech UltraX Media Remote control.
    For now, ID 45 on the consumer usage page has been incorrectly
    mapped to KEY_RADIO since no other devices uses it.
    
    Signed-off-by: Micah F. Galizia <mfgalizi@csd.uwo.ca>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit bf0964dcda97e42964d312d0ff73a832171e080a
Author: Michael Haboustak <mike-@cinci.rr.com>
Date:   Mon Sep 5 00:12:01 2005 -0500

    Input: HID - handle multi-transascion reports
    
    Fixes handling of multi-transaction reports for HID devices. New
    function hid_size_buffers() that calculates the longest report
    for each endpoint and stores the result in the hid_device object.
    These lengths are used to allocate buffers that are large enough
    to store any report on the endpoint. For compatibility, the minimum
    size for an endpoint buffer set to HID_BUFFER_SIZE rather than the
    known optimal case (the longest report length).
    
    It fixes bug #3063 in bugzilla.
    
    Signed-off-by: Michael Haboustak <mike-@cinci.rr.com>
    
    I simplified the patch a bit to use just a single buffer size.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 903b126bffb77dc313b7c2971880df408bf41a9e
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:11:41 2005 -0500

    Input: atkbd - handle keyboards generating scancode 0x7f
    
    Extend bat_xl handling to do err_xl handling, so that
    keyboards using 0x7f scancode for regular keys can work.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8a409b0118c2d78f84f740f60fe03abda1fe3333
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:08:08 2005 -0500

    Input: HID - add more consumer usages
    
    Extend mapping of the consumer usage page in hid-input.c to handle
    more cases appearing on new USB keyboards.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0aebfdac042b63d0f2625414062e138a4333181c
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:07:59 2005 -0500

    Input: add HID simulation mappings
    
    Add simulation usage page mappings to hid-input.c to support
    a new crop of joysticks using them to designate Rudder and
    Throttle controls.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b8c9c642db4ab0811cc5bb0d8b90cc7819055c95
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Sep 5 00:07:37 2005 -0500

    Inpur: recognize and ignore Logitech vendor usages in HID
    
    These get in our way with MX mice.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit cde410a99d0dd38eb218be884d02034fcdf5125b
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Sep 5 11:47:01 2005 +1000

    [XFS] Sort out some cosmetic differences between XFS trees.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:23719a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1aab60c25e9a500b9f15c1dfd775e70e7bde555c
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:10:30 2005 -0700

    [SCSI] qla2xxx: Update version number to 8.01.00-k.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f6ef3b1872915c6d69ca36cf4ca16269cb9a73ad
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:10:20 2005 -0700

    [SCSI] qla2xxx: Stop firmware execution at unintialization time.
    
    On ISP24xx parts, stop execution of firmware during ISP
    tear-down.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fe74c71f6bb63376d92bc606597f0818f5b11c2e
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:10:10 2005 -0700

    [SCSI] qla2xxx: Replace schedule_timeout().
    
    From: Nishanth Aravamudan <nacc@us.ibm.com>
    
    Replace schedule_timeout() with
    msleep()/msleep_interruptible() as appropriate, to guarantee the task
    delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 86cd6baa8294dc5b2cedd84fb5cf3944eaf5271f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:10:00 2005 -0700

    [SCSI] qla2xxx: Remove bad call to fc_remove_host() during probe failure.
    
    fc_remove_host() should only be called after a scsi_host has
    been successfully added via scsi_add_host() -- any failures
    while qla2xxx probing would result in an incorrect call to
    fc_remove_host() during cleanup.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit afb046e2be724a90f21f7cf0ba50e328005bd038
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:09:40 2005 -0700

    [SCSI] qla2xxx: Add host attributes.
    
    Export additional host information via the shost_attrs member in
    the scsi_host template.  Attributes include: driver version,
    firmware version, ISP serial number, ISP type, ISP product ID,
    HBA model name, HBA model description, PCI interconnect
    information, and HBA port state.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ce7e4af7f507c156c3fd3dbb41ffe4a77c700b54
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:09:30 2005 -0700

    [SCSI] qla2xxx: Add change_queue_depth/type() API support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 131736d34ebc3251d79ddfd08a5e57a3e86decd4
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:09:20 2005 -0700

    [SCSI] qla2xxx: Remove redundant call to pci_unmap_sg().
    
    In a corner-case failure where the request-q does not
    contain enough entries for a given request, pci_unmap_sg()
    would be called twice.  Remove direct call and let the
    failure-path logic handle the unmapping.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c32c4cb9fbe3bdc2a90c6eaae5ae30521d4ba9fc
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:09:10 2005 -0700

    [SCSI] qla2xxx: Remove RISC pause/release barriers during flash manipulation.
    
    Remove unnecessary RISC pause/release barriers during
    ISP24xx flash manipulation.  The ISP24xx can arbitrate flash
    access requests during RISC executions.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 06c22bd13f4eb55e291d5a31280b2ae5a70ad00d
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:09:00 2005 -0700

    [SCSI] qla2xxx: Correct LED scheme definition.
    
    Original implementation used an overloaded bit in the EFI
    parameters.  The correct bit is BIT_4 of the special_options
    section of NVRAM.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c00c72ae01c03d3d172150392419040f8d55ab04
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:08:50 2005 -0700

    [SCSI] qla2xxx: Simplify redundant target/device reset logic.
    
    Remove redundant qla2x00_target_reset() function in favour of
    the equivalent qla2x00_device_reset().  Update callers of
    old function.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f7d289f62e2ea911ecb710015efd45c687fa81ce
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:08:40 2005 -0700

    [SCSI] qla2xxx: Correct domain/area exclusion logic.
    
    In an FL topology, limit port recognition to those devices
    not within the same area and domain of the ISP.  The
    firmware will recogonize such devices during local-loop
    discovery.
    
    Some devices may respond to a PLOGI before they have
    completed their fabric login or they may not be a public
    device. In this case they will report:
    
            domain == 00
            area == 00
            alpa == <XX>
    
    which is valid. Exclude such devices from local loop
    discovery.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cca5335caf2d19ef8bd6b833445d2c6ca652a89b
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:08:30 2005 -0700

    [SCSI] qla2xxx: Add FDMI support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ad3e0edaceb9771be7ffbd7aa24fb444a7ed85bf
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:08:10 2005 -0700

    [SCSI] qla2xxx: Export class-of-service (COS) information.
    
    Export COS information for the fc_host and fc_remote_port
    objects added by the driver.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7524f9b9e72cd36f0a70defcd424eba81c180f42
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Aug 26 19:08:00 2005 -0700

    [SCSI] qla2xxx: Use dma_get_required_mask() in determining the 'ideal' DMA mask.
    
    In order to efficiently utilise the ISP's IOCB
    request-queue, use the dma_get_required_mask() function to
    determine the use of command-type 2 or 3 IOCBs when queueing
    SCSI commands.  This applies to ISP2[123]xx chips only, as
    the ISP24xx uses command-type 7 IOCBs which use 64bit DSDs.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c6678e0cfb41b029c3600c54b5bb65954de1230a
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Aug 18 16:24:53 2005 +0200

    [SCSI] fusion: whitespace fixes
    
    Acked by: Moore, Eric Dean <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 637fa99b86a00a0b5767a982b83a512ff48ad6d2
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Aug 18 16:25:44 2005 +0200

    [SCSI] fusion: endianess fixes
    
    Assorted endianess fixes.  I'll work on full endianess annotations
    later.
    
    Acked by: Moore, Eric Dean <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ccf3b7bd26b242b39d54148ea2117295721681d3
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Aug 18 16:24:26 2005 +0200

    [SCSI] fusion: update LSI headers
    
    Acked by: Moore, Eric Dean <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 69218ee5186aded6c78e12e083e073d000ff2e9b
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Aug 18 16:26:15 2005 +0200

    [SCSI] fusion: extended config header support
    
    Acked by: Moore, Eric Dean <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1ff927306e08b356d764e605eff7c50079550bd2
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Aug 19 18:57:13 2005 +0200

    [SCSI] aic7xxx: remove aiclib.c
    
    #include of C files and macro tricks to rename symbols are evil and just
    cause trouble.  Let's doublicate the two functions as they're going to
    go away soon enough anyway.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 77d71d222e871670300f3e3092e2a06f20c842f0
Author: Mark Haverkamp <markh@osdl.org>
Date:   Thu Sep 1 08:19:23 2005 -0700

    [SCSI] aacraid: bad BUG_ON fix
    
    This was noticed by Doug Bazamic and the fix found by Mark Salyzyn at
    Adaptec.
    
    There was an error in the BUG_ON() statement that validated the
    calculated fib size which can cause the driver to panic.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit deb92b7ee98e8e580cafaa63bd1edbe6646877bc
Author: Douglas Gilbert <dougg@torque.net>
Date:   Thu Sep 1 21:50:02 2005 +1000

    [SCSI] sg direct io/mmap oops, st sync
    
    This patch adopts the same solution as proposed by Kai M. in
    a post titled: "[PATCH] SCSI tape signed/unsigned fix".
    The fix is in a function that the sg driver borrowed from
    the st driver so its maintenance is a little easier if
    the functions remain the same after the fix.
    
       - change nr_pages type from unsigned to signed so errors
         from get_user_pages() call are properly handled
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 07542b832309b93a2741cd162a391ab909f66438
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Wed Aug 31 20:27:22 2005 -0400

    This patch fixes in st.c the bug in the signed/unsigned int comparison
    reported by Doug Gilbert and fixed by him in sg.c (see [PATCH] sg direct
    io/mmap oops). Doug fixed the comparison in sg.c. This fix for st.c does not
    touch the comparison but makes both arguments signed to remove the
    problem. The new code is adapted from linux/fs/bio.c.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    
    Rejections fixed up and
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c31e887807a3eab26614ee142629ba447cbcc0dc
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Sep 5 10:06:55 2005 +1000

    [XFS] Fix incorrect use of BMAPI_READ in unwritten extent handling
    (luckily just cosmetic).
    
    SGI-PV: 942232
    SGI-Modid: xfs-linux-melb:xfs-kern:23718a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a3c476d8a19ded7c5f1e17ea07df377764d9d1d3
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:40:49 2005 +1000

    [XFS] replace "extern inline" with "static inline"  Patch from Adrian Bunk
    <bunk@stusta.de>, thanks a lot!
    
    SGI-PV: 942227
    SGI-Modid: xfs-linux:xfs-kern:198642a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 4df08c52582be558e12316ae60bf077ca8f17a1e
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:34:18 2005 +1000

    [XFS] Switch kernel thread handling to the kthread_ API
    
    SGI-PV: 942063
    SGI-Modid: xfs-linux:xfs-kern:198388a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 2f926587512869ebf6bc820bd5f030e127aae774
Author: David Chinner <dgc@sgi.com>
Date:   Mon Sep 5 08:33:35 2005 +1000

    [XFS] Fix racy access to pb_flags.  pagebuf_rele() modified pb_flags after
    the pagebuf had been unlocked if the buffer was delwri. At high load, this
    could result in a race when the superblock was being synced that would
    result the flags being incorrect and the iodone functions being executed
    incorrectly. This then leads to iclog callback failures or AIL list
    corruptions resulting in filesystem shutdowns.
    
    SGI-PV: 923981
    SGI-Modid: xfs-linux:xfs-kern:23616a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ba403ab43e896c57f32995ccba9a6bd6ec8dd1b9
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:33:00 2005 +1000

    [XFS] Retry linux inode cacech lookup if we found a stale inode.  This
    fixes crashes under high nfs load
    
    SGI-PV: 941429
    SGI-Modid: xfs-linux:xfs-kern:197929a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit efa092f3d4c60be7e81de515db9f06e5f8426afc
Author: Tim Shimmin <tes@sgi.com>
Date:   Mon Sep 5 08:29:01 2005 +1000

    [XFS] Fixes a bug in the quota code when allocating a new dquot record
    which can cause an extent hole to be filled and a free extent to be
    processed. In this case, we make a few mistakes: forget to pass back the
    transaction, forget to put a hold on the buffer and forget to add the buf
    to the new transaction.
    
    SGI-PV: 940366
    SGI-Modid: xfs-linux:xfs-kern:23594a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 0f9fffbcc1817c655d6dd40960ae2e0086b0f64f
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:28:16 2005 +1000

    [XFS] remove some dead code from pagebuf
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:197783a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 02ba71de98d5eee63e82cc2d88f9ea8430810a9a
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:28:02 2005 +1000

    [XFS] allow a null behaviour pointer in linvfs_clear_inode
    
    SGI-PV: 940531
    SGI-Modid: xfs-linux:xfs-kern:197782a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 53937c52c3f1dff6100174f50a85c068f16713ae
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Sep 5 08:27:50 2005 +1000

    [XFS] Manage spinlock differences between kernel versions a bit.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux:xfs-kern:23563a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 526c420c44b45b11e25a98f37702cc3044ba9bdc
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Mon Sep 5 08:25:06 2005 +1000

    [XFS] add handlers to fix xfs_flock_t alignment issues in compat ioctls
    
    SGI-PV: 938899
    SGI-Modid: xfs-linux:xfs-kern:197403a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 0c147f9a864f043e6f93a4bb3519c1166419bd74
Author: Felix Blyakher <felixb@sgi.com>
Date:   Mon Sep 5 08:24:49 2005 +1000

    [XFS] Check if there is first behavior before calling VOP_RECLAIM from
    linvfs_clear_inode(). The behavior may go away in VOP_INACTIVE.
    
    SGI-PV: 941000
    SGI-Modid: xfs-linux:xfs-kern:197355a
    
    Signed-off-by: Felix Blyakher <felixb@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 4cd4a034a3ef020d9de48fe0a3f5f976e5134669
Author: Tim Shimmin <tes@sgi.com>
Date:   Mon Sep 5 08:24:10 2005 +1000

    [XFS] Need to be able to reset sb_qflags if not mounting with quotas
    having previously mounted with quotas.
    
    SGI-PV: 940491
    SGI-Modid: xfs-linux:xfs-kern:23388a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 56d433e430eb399a4b6d0e73d28af6e1d4713547
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:23:54 2005 +1000

    [XFS] streamline the clear_inode path
    
    SGI-PV: 940531
    SGI-Modid: xfs-linux:xfs-kern:196888a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit c1a073bdff997216eac25254a2716faf640e4e8d
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:23:35 2005 +1000

    [XFS] Delay I/O completion for unwritten extents after conversion
    
    SGI-PV: 936584
    SGI-Modid: xfs-linux:xfs-kern:196886a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f09738638d3bae6501e8e160c66233832d8c280f
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:22:52 2005 +1000

    [XFS] Delay direct I/O completion to a workqueue  This is nessecary
    because aio+dio completions may happen from irq context but we need
    process context for converting unwritten extents.  We also queue regular
    direct I/O completions to workqueue for regularity, there's only one
    queue_work call per syscall.
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:196857a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 65b3da3705ff873d8704074a75ac983495863380
Author: Christoph Hellwig <hch@sgi.com>
Date:   Mon Sep 5 08:18:12 2005 +1000

    [XFS] Add in the new xfs_aops.h header file for I/O completion struct.
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:196857a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 664399e1fbdceb18da9c9c5534dedd62327c63e8
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 4 19:45:00 2005 +0100

    [ARM] Wrap calls to descriptor handlers
    
    This is part of Thomas Gleixner's generic IRQ patch, which converts
    ARM to use the generic IRQ subsystem.  Here, we wrap calls to
    desc->handler() in an inline function, desc_handle_irq().  This
    reduces the size of Thomas' patch since the changes become more
    localised.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7801907b8c4a49f8ec033d13a938751114a97a55
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 4 19:43:13 2005 +0100

    [ARM] Change irq_chip wake/type methods to set_wake/set_type
    
    This is part of Thomas Gleixner's generic IRQ patch, which converts
    ARM to use the generic IRQ subsystem.  Here, we rename two of the
    irq_chip methods - wake becomes set_wake, and type becomes set_type.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e24da5d316667a91b3a19b5761a211946ec649bb
Author: Pavel Machek <pavel@suse.cz>
Date:   Sun Sep 4 11:33:12 2005 +0100

    [ARM] Fix compilation in locomo.c
    
    Do not access children in struct device directly, use
    device_for_each_child helper instead. It fixes compilation.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7db078be194469490caacac7d13bace38eaebdf5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Sep 4 11:03:15 2005 +0100

    [ARM] Stack starts at THREAD_START_SP offset, not THREAD_SIZE-8
    
    Use the correct constants.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca6ca91d8c7498d45e0d35800503699164366f10
Author: Timothy Baldwin <T.E.Baldwin99@members.leeds.ac.uk>
Date:   Sun Sep 4 10:13:48 2005 +0100

    [ARM] 2875/1: Data Abort fixes
    
    Patch from Timothy Baldwin
    
    All data aborts are treated as read accesses. The existing code updates the wrong bit of r1, also the comments are wrong in that the sense of the L bit is inverted.
    
    Signed-off-by: Timothy Baldwin <T.E.Baldwin99@members.leeds.ac.uk>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7545c24c6a6ab62922266197a72119212280ea2a
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:42:10 2005 -0500

    Input: i8042 - add Lifebook E4010 to MUX blacklist
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 945ef0d428bc33c639e49d27fb8cc765adec3fdf
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:42:00 2005 -0500

    Input: i8042 - add i8042.nokbd module option to allow supressing
           creation of keyboard port.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c3d31e7f9a94800ba895a081e143e79954f6c62f
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:41:51 2005 -0500

    Input: i8042 - fix IRQ printing when either KBD or AUX port
           is absent from ACPI/PNP tables.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8d5987a6e17fa36776a0c9964db0f24c3d070862
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:41:38 2005 -0500

    Input: make i8042_platform_init return 'real' error code
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0854e52d86080c1043bc8988daef2ebda4775f64
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:41:27 2005 -0500

    Input: i8042 - clean up initialization code; abort if we
           can't create all ports.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 4cee99564db7f65a6f88e4b752da52768cde3802
Author: Ian Campbell <ijc@hellion.org.uk>
Date:   Sun Sep 4 01:41:14 2005 -0500

    Input: fix checking whether new keycode fits size-wise
    
    When dev->keycodesize == sizeof(int) the old code produces
    incorrect result.
    
    Signed-off-by: Ian Campbell <ijc@hellion.org.uk>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d2b5ffca73594e4046f405e3ef2438ce41f76fb2
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun Sep 4 01:40:55 2005 -0500

    Input: psmouse - add new Logitech wheel mouse model
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e6c047b98bbd09473c586744c681e877ebf954ff
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun Sep 4 01:40:43 2005 -0500

    Input: ALPS - fix wheel decoding
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit cfe9e88866fe892f4f71bf132c64ec8bd5256e5e
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:40:20 2005 -0500

    Input: rework psmouse attributes to reduce module size
    
    Rearrange attribute code to use generic show and set handlers
    instead of replicating them for every attribute; switch to
    using attribute_group instead of creating all attributes
    manually. All this saves about 4K.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 15c42e5a1f0bccb69508059b8ae0720840068b8e
Merge: 541e316... f505380...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sun Sep 4 01:35:56 2005 -0500

    Merge HEAD from rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 9bed07d0fed01f7c39d128e59e5d35d7d67ff439
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 3 19:39:26 2005 +0100

    [ARM] 2874/1: S3C2410 - add cpu_init() call after sleep wakeup
    
    Patch from Ben Dooks
    
    The power management sleep code needs to call cpu_init()
    to restore the cpu state after the system resumes from
    suspend. Also clear off an un-necessary comment.
    Thanks to Dimitry Andric for reporting the bug and
    for rmk for pointing out the cause.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f36598aeca4c2dbaa607bf6f774e38eb965402f2
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Sep 3 19:39:25 2005 +0100

    [ARM] 2873/1: PCMCIA soc: Allow access to filesystems on CF at boot time
    
    Patch from Richard Purdie
    
    This change makes the soc pcmcia interfaces available earlier in the
    boot process meaning devices like CF microdrives can be used for the
    root filesystem.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4a35a46bf1cda4737c428380d1db5d15e2590d18
Author: Len Brown <len.brown@intel.com>
Date:   Sat Sep 3 12:40:06 2005 -0400

    [ACPI] revert bad processor_core.c patch for bug 5128
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1656fa579e44691a860b095016eee910bc0b2793
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Sep 3 16:45:49 2005 +0100

    [MMC] support for mmc chip select in wbsd
    
    Use the chip select ios in the wbsd driver.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 865e9f13c94891daed4f6a5f69c5d6ec04d4932f
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Sep 3 16:45:02 2005 +0100

    [MMC] ios for mmc chip select
    
    Adds a new ios for setting the chip select pin on MMC cards. Needed on
    SD controllers which use this pin for other things and therefore cannot
    have it pulled high at all times.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9b4e3b13b147e9b737de63188a9ae740eaa8c36d
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Sat Sep 3 16:26:49 2005 +0100

    [SERIAL] Fix moxa tty driver name
    
    The moxa driver was named "ttya", which is wrong:
    1) Documentation/devices.txt says that the name should be "ttyMX".
    2) First 10 ports (ttya0...ttya9) clash with the legacy pty driver.
    
    This patch changes the driver name to "ttyMX".
    
    http://bugme.osdl.org/show_bug.cgi?id=5012
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 707b1c84ec828da479107e839eae0322bacec4d7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Sep 3 15:36:36 2005 +0100

    [SERIAL]  feature-removal-schedule.txt: remove {,un}register_serial entry
    
    If the feature is removed, there's no need to keep the entry in
    feature-removal-schedule.txt.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 30b7a3bc133c5b4a723163be35157ed709fca91c
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Sep 3 15:30:21 2005 +0100

    [SERIAL] Prefix serial printks with KERN_INFO and pre-format
    
    Pre-format the IO part of the ttyS printks, and prefix them with
    KERN_INFO to avoid bootsplash corruption.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1cc77248106aafc12ba529953f652d6f8db2c84d
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Aug 19 14:14:07 2005 +0200

    [WATCHDOG] softdog-timer-running-oops.patch
    
    The softdog watchdog timer has a bug that can create an oops:
    
    1.  Load the module without the nowayout option.
    2.  Open the driver and close it without writing 'V' before close.
    3.  Unload the module.  The timer will continue to run...
    4.  Oops happens when timer fires.
    
    Reported Sun, 10 Oct 2004, by Michael Schierl <schierlm@gmx.de>
    
    Fix is easy: always take a reference on the module on open.
    Release it only when the device is closed and no timer is running.
    Tested on 2.6.13-rc6 using the soft_noboot option.  While the
    timer is running and the device is closed, the module use count
    stays at 1.  After the timer fires, it drops to 0.  Repeatedly
    opening and closing the driver caused no problems.  Please apply.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 93642ecd463df30d032da8ac37c2676cee4ad876
Author: P Draig Brady <P@draigBrady.com>
Date:   Wed Aug 17 09:06:07 2005 +0200

    [WATCHDOG] w83627hf_wdt.c-initialized_bios_bug
    
    Attached is a small update to the w83627hf watchdog driver
    to initialise appropriately if it was already initialised
    in the BIOS. On tyan motherboards for e.g. you can init
    the watchdog to 4 mins, then when the driver is loaded it
    sets the watchdog to "seconds" mode, and then machine will
    reboot within 4 seconds. So this patch resets the timeout
    to the configured value if the watchdog is already running.
    
    Signed-off-by: P draig Brady <P@draigBrady.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 94f1e9f316b10972b77a64344006c3bf8a4929b4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 17 09:04:52 2005 +0200

    [WATCHDOG] s3c2410 watchdog - replace reboot notifier
    
    Patch from Dimitry Andric <dimitry.andric@tomtom.com>
    
    Change to using platfrom driver's .shutdown method instead
    of an reboot notifier
    
    Signed-off-by: Dimitry Andric <dimitry.andric@tomtom.com>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit af4bb822bc65efb087cd36b83789f22161a6515b
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 17 09:03:23 2005 +0200

    [WATCHDOG] s3c2410 watchdog power management
    
    Patch from Dimitry Andric <dimitry.andric@tomtom.com>, updated
    by Ben Dooks <ben-linux@fluff.org>. Patch is against 2.6.11-mm2
    
    Add power management support to the s3c2410 watchdog, so that
    it is shut-down over suspend, and re-initialised on resume.
    
    Also add Dimitry to the list of authors.
    
    Signed-off-by: Dimitry Andric <dimitry.andric@tomtom.com>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 2dab3cabc4b3c1ef53965233dc8a05e0ddeeb38e
Author: Olaf Hering <olh@suse.de>
Date:   Wed Aug 17 08:58:34 2005 +0200

    [WATCHDOG] correct sysfs name for watchdog devices
    
    While looking for possible candidates for our udev.rules package,
    I found a few odd ->name properties. /dev/watchdog has minor 130
    according to devices.txt. Since all watchdog drivers use the
    misc_register() call, they will end up in /sys/class/misc/$foo.
    udev may create the /dev/watchdog node if the driver is loaded.
    I dont have such a device, so I cant test it.
    The drivers below provide names with spaces and even with / in it.
    Not a big deal, but apps may expect /dev/watchdog.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 09c8a9a0c0fe5b3182b6ecfa556fa77a55892c93
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Sep 3 13:46:56 2005 +0200

    [WATCHDOG] Kconfig+Makefile-clean
    
    Clean the Kconfig+Makefile according to a sorted list
    of the drivers of each architecture (and sub-architecture).
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit be3df0f94d77ba3cff40c14c3e21a753c40ba6f2
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Wed Aug 17 01:49:24 2005 +0200

    [WATCHDOG] Makefile-probe_order-patch
    
    Re-arrange Makefile according to what we want to probe first.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 2413d2c12cf0dc5980d7b082d838d5468d83a8b9
Author: Len Brown <len.brown@intel.com>
Date:   Sat Sep 3 02:55:47 2005 -0400

    [ACPI] build fix - processor_core.c w/ !CONFIG_SMP
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5128
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 129521dcc94f781890f8f668219ab79f0073ff9f
Merge: 824b558... f505380...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Sep 3 02:44:09 2005 -0400

    Merge linux-2.6 into linux-acpi-2.6 test

commit 824b558bbe2c298b165cdb54c33718994dda30bb
Author: Luming Yu <luming.yu@intel.com>
Date:   Sun Aug 21 19:17:00 2005 -0400

    [ACPI] acpi_video_device_write_state() now works
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5060
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9a31477a95d642dd42a1be7cc342f5902b56f584
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Tue Aug 30 17:55:00 2005 -0400

    [ACPI] fix processor_core.c for NR_CPUS > 256
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5128
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit dbed12da5bb06b15c63930e9282b45daea566d7b
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sat Sep 3 00:37:56 2005 -0400

    [ACPI] PNPACPI IRQ workaround for HP workstations
    
    Move pcibios_penalize_isa_irq() to pnpacpi_parse_allocated_irqresource().
    Previously we passed the GSI, not the IRQ, and we did it even if parsing
    the IRQ resource failed.
    
    Parse IRQ descriptors that contain multiple interrupts.  This violates the
    spec (in _CRS, only one interrupt per descriptor is allowed), but some
    firmware, e.g., HP rx7620 and rx8620 descriptions of HPET, has this bug.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5f0110f2a716376f3b260703835f527ca8900946
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Sat Sep 3 00:34:32 2005 -0400

    [ACPI] fix run-time error checking in acpi_pci_irq_disable()
    
    The 'bus' field in pci_dev structure should be checked before calling
    pci_read_config_byte() because pci_bus_read_config_byte() called by
    pci_read_config_byte() refers to 'bus' field.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8713cbefafbb5a101ade541a4b0ffa108bf697cc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Sep 2 17:16:48 2005 -0400

    [ACPI] add static to function definitions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit aff8c2777d1a9edf97f26bf60579f9c931443eb1
Author: Robert Moore <Robert.Moore@intel.com>
Date:   Fri Sep 2 17:24:17 2005 -0400

    [ACPI] ACPICA 20050902
    
    Fixed a problem with the internal Owner ID allocation and
    deallocation mechanisms for control method execution and
    recursive method invocation.  This should eliminate the
    OWNER_ID_LIMIT exceptions and "Invalid OwnerId" messages
    seen on some systems.  Recursive method invocation depth
    is currently limited to 255.  (Alexey Starikovskiy)
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4892
    
    Completely eliminated all vestiges of support for the
    "module-level executable code" until this support is
    fully implemented and debugged.  This should eliminate the
    NO_RETURN_VALUE exceptions seen during table load on some
    systems that invoke this support.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5162
    
    Fixed a problem within the resource manager code where
    the transaction flags for a 64-bit address descriptor were
    handled incorrectly in the type-specific flag byte.
    
    Consolidated duplicate code within the address descriptor
    resource manager code, reducing overall subsystem code size.
    
    Signed-off-by: Robert Moore <Robert.Moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a94f18810f52d3a6de0a09bee0c7258b62eca262
Author: Len Brown <len.brown@intel.com>
Date:   Sat Sep 3 00:09:12 2005 -0400

    [ACPI] revert owner-id-3.patch
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ebede60741e2cec6d210f137fd22a30e37abc0be
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 2 12:20:18 2005 -0700

    [SPARC32]: More dependencies fallout
    
    More stuff that got exposed to sparc32 build due to inclusion of
    drivers/char/Kconfig in arch/sparc/Kconfig needs to be excluded.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d70063c4634af060a5387337b7632f6334ca3458
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Sep 2 12:18:03 2005 -0700

    [ATM]: Fix dereference of uninitialized pointer in zatm
    
    Fixing breakage from [NET]: Kill skb->list - original was
    	assign vcc
    	do a bunch of stuff using ZATM_VCC(vcc)->pool as common subexpression
    Now we do
    	int pos = ZATM_VCC(vcc)->pool;
    	assign vcc
    	do a bunch of stuff
    even though vcc is not even initialized when we enter that block...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d27400746189f3b5194b49575833ea660c430118
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Sep 2 16:58:06 2005 +0100

    [SERIAL] crisv10: Remove {,un}register_serial dummies
    
    It seems we can simply kill these dummies with this patch.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f505380ba7b98ec97bf25300c2a58aeae903530b
Merge: 13ae6d8... 504be3a...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Sep 2 02:01:35 2005 -0700

    Merge refs/heads/ieee80211-wifi from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 504be3aa095903895f9b99abfed40709ff5d1e62
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Sep 2 04:44:25 2005 -0400

    [wireless hostap] automatically select ieee80211 dependency in Kconfig

commit 13ae6d81b963c7b22ab9c158ee5a392fb57579fe
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Sep 2 09:03:09 2005 +0200

    [PATCH] remove driverfs references from init/do_mounts.c
    
    This patch is against 2.6.10, but still applies cleanly. It's just
    s/driverfs/sysfs/ in this file.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d51fe1be3f738e7d73f63bb5aa0df88bafb41a21
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Sep 2 08:59:25 2005 +0200

    [PATCH] remove driverfs references from include/linux/cpu.h and net/sunrpc/rpc_pipe.c
    
    This patch is against 2.6.10, but still applies cleanly. It's just
    s/driverfs/sysfs/ in these two files.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a9b28dda3baf6fbbda349788cfe236f631f0359
Author: Miles Bader <miles@gnu.org>
Date:   Fri Sep 2 15:13:31 2005 +0900

    [PATCH] v850: Add show_mem
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20216fc86d83e5e96fca7fa8d22de94d294695eb
Author: Miles Bader <miles@gnu.org>
Date:   Fri Sep 2 15:13:30 2005 +0900

    [PATCH] v850: Update defconfigs
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 023239c6c96dfacbf32e7162ee7692bdd4f58213
Author: Miles Bader <miles@gnu.org>
Date:   Fri Sep 2 15:13:30 2005 +0900

    [PATCH] v850: Round up length passed to slram driver to a multiple of SLRAM_BLK_SZ
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 213b24c93b6c43d96973b9db453bf845c97bbe18
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] uclinux: use MAP_PRIVATE when mmaping code regions in flat binary loader
    
    Use MAP_PRIVATE when calling mmap to get memory for the code region.
    The flat loader was using MAP_SHARED, but underlying changes to the
    MMUless mmap means this is now wrong.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03a002e783b71517a5203e681f84a2719e9cec0e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: update defconfig for m68knommu
    
    Updated defconfig for m68knommu arch.
    Patch originaly submitted by Jan Dittmer <jdittmer@ppp0.net>
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4945b30291ba85a36adffdaafb75bd73f5d887b6
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: new board support in linker script
    
    . add support for the M5235EVB board
    . add support for the SOM5282 board
    . add support for the MOD5272 board
    . fix end of memory define for eLITE board
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e70bd1160109f2b7e62222550a7af37910dba88a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: need pfn_valid macro
    
    Need pfn_valid macro, even on MMUless platforms.
    Enclose the macro args of __pa and __va in parentheses.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8410a546765c10d929b82d1e8237398904a79283
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: use THREAD_SIZE instead of hard coded size
    
    Use the THREAD_SIZE define when manipulating the stack instead of
    hard coded values (for the 68328 and 68360 sub-architectures).
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c4dbba9fc5e562db502e775e95023453b620409
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: new family (523x) and board config support
    
    New architecture and board configuration support for m68knommu.
    
    . add 523x ColdFire support
    . add support for SOM5282 and MOD5272 boards
    . break up the 527x to be separate 5271 and 5275. There is some
      subtle differences that (like RAM config) that need to be dealt with
    . add option to support selecting 4k kernel stack
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 777354b63f3fabf702ff88f12c4d513a7219832b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: 523x ColdFire processor support in arch Makefile
    
    Add support for the 523x ColdFire family of processors
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db81fb8486563573aca023dac30a2d70c46855e8
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: cleanup showstack()
    
    Make show_stack() consistent with other architectures.
    Put the vector string names in the .rodata section.
    Patch originally submitted by Philippe De Muyter <phdm@macqel.be>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d052c170e9a7ac0c7d58fe4fbf39fca3c24f2cc
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] uclinux: update MAINTAINERS entry for UCLINUX
    
    Modify maintainers for uClinux (MMUless). Neither Dave nor Jeff
    manitain the 2.6 code in mainline, so no point emailing them about
    problems.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 029fc1375fcf687a83faf7521358a9f5c589da13
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: fix ColdFire startup code to properly handle non 0 based ram
    
    Correctly determine the end of ram for ram setups that do not
    start at base address of 0. Add support for the MOD5272 board,
    which doesn not have a ram base of 0.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6070a1712e69779f322239056fb5f1e1db802ce
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: new family (523x) and board setup
    
    . setup for the new 523x ColdFire family
    . break up of 527x to be 5271 and 5275
    . some white space cleanup
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5aaf3f71cf5a6115cf76671b011de0209223fc2
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Sep 2 10:42:52 2005 +1000

    [PATCH] m68knommu: 523x ColdFire processor init code
    
    Low level initialization code for the 523x ColdFire processor family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 138307b475286a5bcc985b06b3e71fcd33dd5e2c
Merge: 66f3767... bc49a66...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Sep 2 00:53:36 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-serial

commit 66f3767376e2bbffb4c2c78ea171e1fdcb62201b
Merge: 5d8c397... 86a8a83...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Sep 2 00:52:05 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-arm

commit 5d8c397f304e1363f8ff9749b08172eb59e6534a
Merge: 4475722... ceeec3d...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Sep 2 00:48:33 2005 -0700

    Merge refs/heads/ieee80211-wifi from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 44757223cd77f6e332dfa0b043c67df7b665bc19
Merge: 712fbdd... ee05f03...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Fri Sep 2 00:46:53 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 0829c3602f4df95898752c402ea90b92a3e33154
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:58:49 2005 +1000

    [XFS] Add infrastructure for tracking I/O completions
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:196856a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 51c91ed52b8a9a30fcb2a465b40c20a1f11735ba
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:58:38 2005 +1000

    [XFS] add infrastructure for waiting on I/O completion at inode reclaim
    time
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:196854a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 592cb26bda6fe69838529acf71e50a6dee7acbb4
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:56:14 2005 +1000

    [XFS] remove unessecary vnode flags
    
    SGI-PV: 934766
    SGI-Modid: xfs-linux:xfs-kern:196852a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 760dea671ea9c5b8c732d76d09673d6d052a186f
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:56:02 2005 +1000

    [XFS] Fix sparse warnings in kmem_* functions  Patch from Victor Fusco
    <victor@cetuc.puc-rio.br>
    
    SGI-PV: 940376
    SGI-Modid: xfs-linux:xfs-kern:196705a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6f948fbd443255e3a918438ce41cd7581cf8146d
Author: Tim Shimmin <tes@sgi.com>
Date:   Fri Sep 2 16:52:55 2005 +1000

    [XFS] Need to unlock the AIL before calling xfs_force_shutdown() because
    when it goes to force out the log, and get the tail lsn, it will want to
    get the AIL lock.
    
    SGI-PV: 940076
    SGI-Modid: xfs-linux:xfs-kern:23260a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 0432dab2d2d3b35347a95c01c78a40781b6431fb
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:46:51 2005 +1000

    [XFS] remove struct vnode::v_type
    
    SGI-PV: 936236
    SGI-Modid: xfs-linux:xfs-kern:195878a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 155ffd075caedcea5ad595c95403c71bfc391c4a
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Sep 2 16:43:48 2005 +1000

    [XFS] Remove extraneous quotacheck diagnostics.
    
    SGI-PV: 907752
    SGI-Modid: xfs-linux:xfs-kern:23163a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit e69a333b5e0c8c6b687b07665a3cb5545657d2aa
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Sep 2 16:42:26 2005 +1000

    [XFS] Add in grpid/nogrpid mount option parsing, actual code was always
    there..
    
    SGI-PV: 939444
    SGI-Modid: xfs-linux:xfs-kern:23162a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 7e9c63961558092d584936a874cf3fee80002eb6
Author: Tim Shimmin <tes@sgi.com>
Date:   Fri Sep 2 16:42:05 2005 +1000

    [XFS] 929956 add log debugging and tracing info
    
    SGI-PV: 931456
    SGI-Modid: xfs-linux:xfs-kern:23155a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 32fb9b57aef35b82434cfb4c9de18b484fc3ec88
Author: Tim Shimmin <tes@sgi.com>
Date:   Fri Sep 2 16:41:43 2005 +1000

    [XFS] Fix up the calculation of the reservation overhead to hopefully
    include all the components which make up the transaction in the ondisk
    log. Having this incomplete has shown up as problems on IRIX when some v2
    log changes went in. The symptom was the msg of "xfs_log_write:
    reservation ran out. Need to up reservation" and was seen on synchronous
    writes on files with lots of holes (and therefore lots of extents).
    
    SGI-PV: 931457
    SGI-Modid: xfs-linux:xfs-kern:23095a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d52b44d07a43b723ac2fbf1bf4053031f723676c
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Sep 2 16:41:32 2005 +1000

    [XFS] Fix regression in transaction reserved-block accounting for direct
    writes.
    
    SGI-PV: 938145
    SGI-Modid: xfs-linux:xfs-kern:23088a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ad4a8ac4e9d9cffb0a4c9ebebc6bda9d8dbbfe99
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Fri Sep 2 16:41:16 2005 +1000

    [XFS] Fix check for writeable file in xfs_ioc_space ioctl code
    
    SGI-PV: 938905
    SGI-Modid: xfs-linux:xfs-kern:195240a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 3bdbfb104e53b367892cc9510e6722346dfb656b
Author: David Chinner <dgc@sgi.com>
Date:   Fri Sep 2 16:40:47 2005 +1000

    [XFS] Prevent the incore superblock sb_fdblocks count from leaking when we
    are getting ENOSPC errors on writes. When we fail to allocate space for
    indirect blocks in xfs_bmapi() make sure we release the direct block
    allocation before returning.
    
    SGI-PV: 938502
    SGI-Modid: xfs-linux:xfs-kern:22986a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit bcec2b7f2bf856bdf2a8780a57fe78417a513682
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Sep 2 16:40:17 2005 +1000

    [XFS] Add a chunk of tracing code to diagnose truncate related issues.
    
    SGI-PV: 938410
    SGI-Modid: xfs-linux:xfs-kern:22966a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit eedb5530aad71aecbc1e99cb67f676c26280d3f9
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Sep 2 16:39:56 2005 +1000

    [XFS] Make metadata IO completion consistent with other IO completion
    handlers.
    
    SGI-PV: 938409
    SGI-Modid: xfs-linux:xfs-kern:22965a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit cdb626878f6f5e37d678d30c9cacf5726b88a656
Author: Christoph Hellwig <hch@sgi.com>
Date:   Fri Sep 2 16:24:19 2005 +1000

    [XFS] replace vn_get usage by ihold
    
    SGI-PV: 938306
    SGI-Modid: xfs-linux:xfs-kern:194627a
    
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6475be16fd9b3c6746ca4d18959246b13c669ea8
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Sep 1 22:47:01 2005 -0700

    [TCP]: Keep TSO enabled even during loss events.
    
    All we need to do is resegment the queue so that
    we record SACK information accurately.  The edges
    of the SACK blocks guide our resegmenting decisions.
    
    With help from Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb3f724e12eb9c62c92ff6f14a856bc58ba35f5e
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Fri Sep 2 15:43:05 2005 +1000

    [XFS] send dmapi events from nopage for mmapped files
    
    SGI-PV: 935317
    SGI-Modid: xfs-linux:xfs-kern:192007a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 536388be42c938fb6d0eece681526ce13bb50aab
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Fri Sep 2 15:35:43 2005 +1000

    [XFS] upate copyrights
    
    SGI-PV: 933765
    SGI-Modid: xfs-linux:xfs-kern:190760a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 616b1c7238f0de5cec12045267a924035f8ed317
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Fri Sep 2 15:30:57 2005 +1000

    [XFS] Update copyrights
    
    SGI-PV: 933551
    SGI-Modid: xfs-linux:xfs-kern:190625a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a7a6cac204147634aba7487e4d618b028ff54c0d
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Sep 1 21:51:26 2005 -0700

    [SPARC]: Kill io_remap_page_range()
    
    It's been deprecated long enough and there are no in-tree
    users any longer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef015786152adaff5a6a8bf0c8ea2f70cee8059d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 1 17:48:59 2005 -0700

    [TCP]: Fix sk_forward_alloc underflow in tcp_sendmsg
    
    I've finally found a potential cause of the sk_forward_alloc underflows
    that people have been reporting sporadically.
    
    When tcp_sendmsg tacks on extra bits to an existing TCP_PAGE we don't
    check sk_forward_alloc even though a large amount of time may have
    elapsed since we allocated the page.  In the mean time someone could've
    come along and liberated packets and reclaimed sk_forward_alloc memory.
    
    This patch makes tcp_sendmsg check sk_forward_alloc every time as we
    do in do_tcp_sendpages.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d80d99d643090c3cf2b1f9fb3fadd1256f7e384f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 1 17:48:23 2005 -0700

    [NET]: Add sk_stream_wmem_schedule
    
    This patch introduces sk_stream_wmem_schedule as a short-hand for
    the sk_forward_alloc checking on egress.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2dac4b96b9362954a0638317b90e3e7bcb112e83
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Sep 1 17:44:49 2005 -0700

    [IPV6]: Repair Incoming Interface Handling for Raw Socket.
    
    Due to changes to enforce checking interface bindings,
    sockets did not see loopback packets bound for our local address
    on our interface.
    
    e.g.)
      When we ping6 fe80::1%eth0, skb->dev points loopback_dev while
      IP6CB(skb)->iif indicates eth0.
    
    This patch fixes the issue by using appropriate incoming interface,
    in the sense of scoping architecture.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 573dbd95964b01a942aa0c68e92b06f2c9536964
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Thu Sep 1 17:44:29 2005 -0700

    [CRYPTO]: crypto_free_tfm() callers no longer need to check for NULL
    
    Since the patch to add a NULL short-circuit to crypto_free_tfm() went in,
    there's no longer any need for callers of that function to check for NULL.
    This patch removes the redundant NULL checks and also a few similar checks
    for NULL before calls to kfree() that I ran into while doing the
    crypto_free_tfm bits.
    
    I've succesfuly compile tested this patch, and a kernel with the patch
    applied boots and runs just fine.
    
    When I posted the patch to LKML (and other lists/people on Cc) it drew the
    following comments :
    
     J. Bruce Fields commented
      "I've no problem with the auth_gss or nfsv4 bits.--b."
    
     Sridhar Samudrala said
      "sctp change looks fine."
    
     Herbert Xu signed off on the patch.
    
    So, I guess this is ready to be dropped into -mm and eventually mainline.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5170dbebbb2e9159cdf6bbf35e5d79cd7009799a
Author: KOVACS Krisztian <hidden@balabit.hu>
Date:   Thu Sep 1 17:44:06 2005 -0700

    [NETFILTER]: CLUSTERIP: fix memcpy() length typo
    
    Fix a trivial typo in clusterip_config_init().
    
    Signed-off-by: KOVACS Krisztian <hidden@balabit.hu>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 12a49ffd842bf5b07c62eaabf178703ce4fe09d7
Author: Patrick Caulfield <patrick@tykepenguin.com>
Date:   Thu Sep 1 17:43:45 2005 -0700

    [DECNET]: Tidy send side socket SKB allocation.
    
    Patch from Steve Whitehouse which I've vetted and tested:
    
    "This patch is really intended has a move towards fixing the
    sendmsg/recvmsg functions in various ways so that we will finally
    have working nagle. Also reduces code duplication."
    
    Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb6f1160ddb2fdadf50f350da79d0796c37f17e2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 1 17:43:25 2005 -0700

    [CRYPTO]: Use CRYPTO_TFM_REQ_MAY_SLEEP where appropriate
    
    This patch goes through the current users of the crypto layer and sets
    CRYPTO_TFM_REQ_MAY_SLEEP at crypto_alloc_tfm() where all crypto operations
    are performed in process context.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64baf3cfea974d2b9e671ccfdbc03e030ea5ebc6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Sep 1 17:43:05 2005 -0700

    [CRYPTO]: Added CRYPTO_TFM_REQ_MAY_SLEEP flag
    
    The crypto layer currently uses in_atomic() to determine whether it is
    allowed to sleep.  This is incorrect since spin locks don't always cause
    in_atomic() to return true.
    
    Instead of that, this patch returns to an earlier idea of a per-tfm flag
    which determines whether sleeping is allowed.  Unlike the earlier version,
    the default is to not allow sleeping.  This ensures that no existing code
    can break.
    
    As usual, this flag may either be set through crypto_alloc_tfm(), or
    just before a specific crypto operation.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb4f10ed50f01b0f953068456bfb6e2885921b01
Author: Aaron Grothe <ajgrothe@yahoo.com>
Date:   Thu Sep 1 17:42:46 2005 -0700

    [CRYPTO]: Fix XTEA implementation
    
    The XTEA implementation was incorrect due to a misinterpretation of
    operator precedence.  Because of the wide-spread nature of this
    error, the erroneous implementation will be kept, albeit under the
    new name of XETA.
    
    Signed-off-by: Aaron Grothe <ajgrothe@yahoo.com>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 75c80c382fbd08acf06fbef9d54c9844e806a8b4
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Sep 1 17:42:23 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 51b9146869ab9492da785c5c9321d85f01655ab6
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Sep 1 17:41:28 2005 -0700

    [TG3]: Minimize locking in TX path.
    
    This is similar to Eric Dumazet's tx_lock patch for tg3 but takes it
    one step further to eliminate the tx_lock in the tx_completion path
    when the tx queue is not stopped.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 86d9f7f0c9cf06d7d3cfa2a9f0514cf21fa5fda1
Author: Eric Lemoine <eric.lemoine@gmail.com>
Date:   Thu Sep 1 17:41:07 2005 -0700

    [SUNGEM]: Fix netpoll bug in Sun GEM Ether driver
    
    From: Eric Lemoine <eric.lemoine@gmail.com>
    
    To me the bug is that __LINK_STATE_RX_SCHED can be set while
    __netif_rx_schedule() hasen't be called. Why don't fix it in the
    simplest way ? See attached patch (absolutely untested).
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0014c6156f9e7d034d20742d164d7d4da289b42a
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Thu Sep 1 17:40:46 2005 -0700

    [SUNGEM]: fix minor bug in sungem.h
    
    This changes the Sun Gem Ether driver's tx ring buffer
    length to the proper constant.  Currently TX_RING_SIZE
    and RX_RING_SIZE are equal, so no malfunction occurs.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 732db659b83579b922c18dee9123e1529b5fb5d2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Sep 1 17:40:26 2005 -0700

    [IPVS]: "extern inline" -> "static inline"
    
    "extern inline" doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff4cc3ac93e1d0369928fd60ec1fe82417afc576
Author: Mike Kershaw <dragorn@kismetwireless.net>
Date:   Thu Sep 1 17:40:05 2005 -0700

    [TUNTAP]: Allow setting the linktype of the tap device from userspace
    
    Currently tun/tap only supports the EN10MB ARP type.  For use with
    wireless and other networking types it should be possible to set the
    ARP type via an ioctl.
    
    Patch v2: Included check that the tap interface is down before changing the
    link type out from underneath it
    
    Signed-off-by: Mike Kershaw <dragorn@kismetwireless.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ceeec3dc375e3b0618f16b34efc56fe093918f8b
Merge: fbff868... e3ee3b7...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Sep 1 18:02:27 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit e3ee3b78f83688a0ae4315e8be71b2eac559904a
Merge: 91cb70c... 6b39374...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Sep 1 18:02:01 2005 -0400

    /spare/repo/netdev-2.6 branch 'master'

commit 86a8a83963a3f6beeca4900d26da93c7d2a9d92d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 1 22:41:55 2005 +0100

    [ARM] Fix ARMv6 page table bits
    
    We weren't explicitly setting the page table bits we desired
    in user_prot in the protection table, which resulted in the
    user mappings for v6 CPUs being marked global.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 52c18fd2dc5c6d96cec4f48c69fc17b00edd9860
Author: Dave Jones <davej@redhat.com>
Date:   Thu Sep 1 11:01:02 2005 -0700

    [CPUFREQ] Remove trailing whitespace before \n's in printks.
    
    From: Denis Vlasenko <vda@ilport.com.ua>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 712fbdd33306aa07085d1e648b5f3d45d7943794
Merge: b25dd28... 986632f...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Thu Sep 1 10:58:18 2005 -0700

    Merge refs/heads/release from master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit b25dd2842bcaef2413db7a06c67034b187aa007f
Merge: 80ac291... 147056f...
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Thu Sep 1 10:56:57 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-arm.git

commit 80ac2912f846c01d702774bb6aa7100ec71e88b9
Author: Kumar Gala <kumar.gala@freescale.com>
Date:   Wed Aug 31 14:54:47 2005 +1000

    [PATCH] ppc: L2 cache prefetch fixes on 745x
    
    We run into problems if we blindly enable L2 prefetching without
    checking that the L2 cache is actually enabled.  Additionaly, if we
    disable the L2 cache we need to ensure that we disable L2 prefetching.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8085ce084c0f0144c353963853f81486fc331120
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Aug 31 14:16:53 2005 +1000

    [PATCH] Fix PCI ROM mapping
    
    This fixes a problem with pci_map_rom() which doesn't properly
    update the ROM BAR value with the address thas allocated for it by the
    PCI code. This problem, among other, breaks boot on Mac laptops.
    
    It'ss a new version based on Linus latest one with better error
    checking.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29db35edb2548c3b0299c53d62d5f26d77a8e58f
Author: Dave Jones <davej@redhat.com>
Date:   Thu Sep 1 10:50:13 2005 -0700

    [AGPGART] Remove trailing space before \n
    
    From: Denis Vlasenko <vda@ilport.com.ua>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 319e76a1ae835c34a2838c2bfebe3db4d5a6b387
Author: David Gibson <dwg@au1.ibm.com>
Date:   Wed Aug 31 14:34:05 2005 +1000

    [PATCH] Fix bug in ppc64 dynamic hugepage support
    
    In adjusting the logic for SLB miss for the dynamic hugepage stuff, I
    messed up the !CONFIG_HUGETLB_PAGE case, failing to set the SLB flags
    properly.
    
    This fixes it.  It also streamlines the logic for the HUGETLB_PAGE case
    (removing a couple of branches) while we're at it.
    
    Booted, and roughly tested on POWER5 (with and without HUGETLB_PAGE),
    iSeries/RS64 (no hugepage available), and G5 (with and without
    HUGETLB_PAGE).
    
    Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7eaa414ee86cda4c153002ed218b9a0ad17f7de1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Aug 31 17:43:51 2005 +0200

    [PATCH] Add missing select's to DVB_BUDGET_AV
    
    This fixes the following compile error:
    
    	...
    	  LD      .tmp_vmlinux1
    	drivers/built-in.o: In function `frontend_init':
    	budget-av.c:(.text+0xb9448): undefined reference to `tda10046_attach'
    	budget-av.c:(.text+0xb9518): undefined reference to `tda10021_attach'
    	drivers/built-in.o: In function `philips_tu1216_request_firmware':
    	budget-av.c:(.text+0xb937b): undefined reference to `request_firmware'
    	make: *** [.tmp_vmlinux1] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Johannes Stezenbach <js@linuxtv.org>
    Acked-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc49a661e6e82bfa8219c3d0a2e4dea51c847d23
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 1 15:56:26 2005 +0100

    [SERIAL] Move serial8250_*_port prototypes to linux/serial_8250.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1d15b10f95d4c4295a0f2288c7be7b6a005490da
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Sep 1 09:05:39 2005 -0500

    JFS: Implement jfs_init_security
    
    This atomically initializes the security xattr when an object is created
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 4f4b401bfaa97edbea41a1fcab794148e7ac0421
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Sep 1 09:02:43 2005 -0500

    JFS: allow extended attributes to be set within a existing transaction
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 103461a80c2f2dd95fe9a39a5decd984622c2a9e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 1 14:51:59 2005 +0100

    [ARM] Simplify setup_mm_for_reboot()
    
    No point checking what CPU architecture level we have each time
    within the loop, so precompute the base PMD flags outside the
    loop.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 08f4ffb3eb4ff23daf9c61bcd523940d43c2270c
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 1 14:45:18 2005 +0100

    [ARM] Convert open-coded __pmd_populate to use inline function
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8dd49fa054814f365fcff8d72ca47e8afda9743
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 1 14:25:45 2005 +0100

    [SERIAL] mwave is no longer broken
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 569d2c34dcf259b07977835492aa8813d1168230
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Sep 1 12:48:48 2005 +0100

    [ARM] 2864/1: VST aka CONFIG_NO_IDLE_HZ support for SA11x0
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 20e912680842504ab4633deaa644c2b855ad3d44
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Sep 1 12:48:47 2005 +0100

    [ARM] 2863/1: clarify comment in PXA2xx and SA1x00 timer code
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5c53ff088cb76dca52bdf2ef36ea63147763f9ea
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Sep 1 12:48:40 2005 +0100

    [ARM] 2862/1: VST aka CONFIG_NO_IDLE_HZ support for PXA2xx
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 68d9102f76de7a923fb81c8b6de4764f8f50ed17
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Sep 1 12:37:13 2005 +0100

    [ARM] 2865/2: fix fadvise64_64 syscall argument passing
    
    Patch from Nicolas Pitre
    
    The prototype for sys_fadvise64_64() is:
        long sys_fadvise64_64(int fd, loff_t offset, loff_t len, int advice)
    The argument list is therefore as follows on legacy ABI:
    	fd: type int (r0)
    	offset: type long long (r1-r2)
    	len: type long long (r3-sp[0])
    	advice: type int (sp[4])
    With EABI this becomes:
    	fd: type int (r0)
    	offset: type long long (r2-r3)
    	len: type long long (sp[0]-sp[4])
    	advice: type int (sp[8])
    Not only do we have ABI differences here, but the EABI version requires
    one additional word on the syscall stack.
    To avoid the ABI mismatch and the extra stack space required with EABI
    this syscall is now defined with a different argument ordering
    on ARM as follows:
        long sys_arm_fadvise64_64(int fd, int advice, loff_t offset, loff_t len)
    This gives us the following ABI independent argument distribution:
    	fd: type int (r0)
    	advice: type int (r1)
    	offset: type long long (r2-r3)
    	len: type long long (sp[0]-sp[4])
    Now, since the syscall entry code takes care of 5 registers only by
    default including the store of r4 to the stack, we need a wrapper to
    store r5 to the stack as well.  Because that wrapper was missing and was
    always required this means that sys_fadvise64_64 never worked on ARM and
    therefore we can safely reuse its syscall number for our new
    sys_arm_fadvise64_64 interface.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce38b51edfe51abacb053e88d62cf96a0c003a04
Author: Mika Kukkonen <mikukkon@miku.homelinux.net>
Date:   Sun Aug 7 22:49:39 2005 +0300

    [CPUFREQ] Remove extra arg from dprintk in cpufreq/speedstep-smi.c
    
    Minor fallout from my upcoming __attribute__((format(printf,x,y)))
    patches. The variable 'result' is untouched, so this patch just removes
    it.
    
    Signed-off-by: Mika Kukkonen <mikukkon@gmail.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 123411f2d0da5c42eb9ee0912b6e824cbe88a411
Author: Mika Kukkonen <mikukkon@miku.homelinux.net>
Date:   Sun Aug 7 23:13:00 2005 +0300

    [CPUFREQ] dprintf format fixes in cpufreq/speedstep-centrino.c
    
    Ho-hum, did not notice there was more printf fixes for cpufreq (you
    should see the amount I have for isdn and reiser ...). Sorry for noise.
    
    Signed-off-by: Mika Kukkonen <mikukkon@gmail.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f914be79ab2144efe291d9fc383661e0e23dca44
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Aug 29 13:54:55 2005 -0700

    [CPUFREQ] speedstep-centrino: skip extract_clock logic for acpi based centrino
    
    speedstep_centrino.c:extract_clock() assumes the bus speed of 100MHz, which is
    not true with latest laptops. Due to this assumption and due to the encoded
    frequency check during initialization, speedstep-centrino driver fails even
    on systems that has proper ACPI information to do the P-state transition.
    
    The change below moves the centrino-speedstep detection to be used only
    when table based P-state transition is done. For ACPI based P-state
    transition, we skip the centrino_cpu identification, and as a result we
    don't use the bus speed assumption in extract_clock. This change makes
    speedstep-centrino work on Pentium-M based systems, which have more than 100MHz
    bus speed.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8085e1f1f0645fc6ddefcb54fdcba95808df5049
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Thu Aug 25 13:14:06 2005 -0700

    [CPUFREQ] Bugfix: Call driver exit in cpufreq_add_dev error path
    
    A minor fix for cpufreq_add_dev() error path. We need to call driver->exit()
    if driver_init() call has succeeded.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit fbff868db3a4cc6a89d51da9a6d49b26c29d04fb
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 17:53:32 2005 -0700

    [PATCH] hostap: Fix null pointer dereference in prism2_pccard_card_present()
    
    local->hw_priv was initialized only after the interrupt handler was
    registered. This could trigger a NULL pointer dereference in
    prism2_pccard_card_present() that assumed that local->hw_priv is always
    set (and it should have been). Fix this by setting local->hw_priv before
    registering the interrupt handler.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ee05f031ec72cc06abc4002992649c3a8344d246
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:29 2005 +1000

    [PATCH] iseries_veth: Be consistent about driver name, increment version
    
    The iseries_veth driver tells sysfs that it's called 'iseries_veth', but if
    you ask it via ethtool it thinks it's called 'veth'. I think this comes from
    2.4 when the driver was called 'veth', but it's definitely called
    'iseries_veth' now, so fix it.
    
    To make sure we don't do it again define DRV_NAME and use it everywhere.
    
    While we're at it, change the version number to 2.0, to reflect the changes
    made in this patch series.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 59f17aebabef709a32a8fc09b4cd3507f32dea01
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:27 2005 +1000

    [PATCH] iseries_veth: Remove studly caps from iseries_veth.c
    
    Having merged iseries_veth.h, let's remove some of the studly caps that came
    with it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 642d1a4c36b9002a45ea6498bda5d1e911eeb933
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:25 2005 +1000

    [PATCH] iseries_veth: Incorporate iseries_veth.h in iseries_veth.c
    
    iseries_veth.h is only used by iseries_veth.c, so merge the former into
    the latter.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 07a5c1727d6bf5c917034fe4006acf726cb158bf
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:21 2005 +1000

    [PATCH] iseries_veth: Add sysfs support for port structs
    
    Also to aid debugging, add sysfs support for iseries_veth's port structures.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 76812d81238cda5c5c4060da27517a08287620fc
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:20 2005 +1000

    [PATCH] iseries_veth: Add sysfs support for connection structs
    
    To aid in field debugging, add sysfs support for iseries_veth's connection
    structures. At the moment this is all read-only, however we could think about
    adding write support for some attributes in future.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit db5e8718eac0b8166d6fd05b1ed7f8114c243988
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:19 2005 +1000

    [PATCH] iseries_veth: Fix bogus counting of TX errors
    
    There's a number of problems with the way iseries_veth counts TX errors.
    
    Firstly it counts conditions which aren't really errors as TX errors. This
    includes if we don't have a connection struct for the other LPAR, or if the
    other LPAR is currently down (or just doesn't want to talk to us). Neither
    of these should count as TX errors.
    
    Secondly, it counts one TX error for each LPAR that fails to accept the packet.
    This can lead to TX error counts higher than the total number of packets sent
    through the interface. This is confusing for users.
    
    This patch fixes that behaviour. The non-error conditions are no longer
    counted, and we introduce a new and I think saner meaning to the TX counts.
    
    If a packet is successfully transmitted to any LPAR then it is transmitted
    and tx_packets is incremented by 1.
    
    If there is an error transmitting a packet to any LPAR then that is counted
    as one error, ie. tx_errors is incremented by 1.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e0808494ff44d5cedcaf286bb8a93d08e8d9af49
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:18 2005 +1000

    [PATCH] iseries_veth: Simplify full-queue handling
    
    The iseries_veth driver often has multiple netdevices sending packets over
    a single connection to another LPAR. If the bandwidth to the other LPAR is
    exceeded, all the netdevices must have their queues stopped.
    
    The current code achieves this by queueing one incoming skb on the
    per-netdevice port structure. When the connection is able to send more packets
    we iterate through the port structs and flush any packet that is queued,
    as well as restarting the associated netdevice's queue.
    
    This arrangement makes less sense now that we have per-connection TX timers,
    rather than the per-netdevice generic TX timer.
    
    The new code simply detects when one of the connections is full, and stops
    the queue of all associated netdevices. Then when a packet is acked on that
    connection (ie. there is space again) all the queues are woken up.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 24562ffa8bdf3a111278a8b93ab92837b9ec9113
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:17 2005 +1000

    [PATCH] iseries_veth: Add a per-connection ack timer
    
    Currently the iseries_veth driver contravenes the specification in
    Documentation/networking/driver.txt, in that if packets are not acked by
    the other LPAR they will sit around forever.
    
    This patch adds a per-connection timer which fires if we've had no acks for
    five seconds. This is superior to the generic TX timer because it catches
    the case of a small number of packets being sent and never acked.
    
    This fixes a bug we were seeing on real systems, where some IPv6 neighbour
    discovery packets would not be acked and then prevent the module from being
    removed, due to skbs lying around.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 48683d72f8146dfb896e05c90d3544bbad63778c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:12 2005 +1000

    [PATCH] iseries_veth: Remove TX timeout code
    
    The iseries_veth driver uses the generic TX timeout watchdog, however a better
    solution is in the works, so remove this code.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f0c129caa34b4bb0944bbb758b56c3d85b105557
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:09 2005 +1000

    [PATCH] iseries_veth: Use kobjects to track lifecycle of connection structs
    
    The iseries_veth driver can attach to multiple vlans, which correspond to
    multiple net devices. However there is only 1 connection between each LPAR,
    so the connection structure may be shared by multiple net devices.
    
    This makes module removal messy, because we can't deallocate the connections
    until we know there are no net devices still using them. The solution is to
    use ref counts on the connections, so we can delete them (actually stop) as
    soon as the ref count hits zero.
    
    This patch fixes (part of) a bug we were seeing with IPv6 sending probes to
    a dead LPAR, which would then hang us forever due to leftover skbs.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ec60beebed497691c97d674c1facac5ca3d7a4b3
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:08 2005 +1000

    [PATCH] iseries_veth: Make init_connection() & destroy_connection() symmetrical
    
    This patch makes veth_init_connection() and veth_destroy_connection()
    symmetrical in that they allocate/deallocate the same data.
    
    Currently if there's an error while initialising connections (ie. ENOMEM)
    we call veth_module_cleanup(), however this will oops because we call
    driver_unregister() before we've called driver_register(). I've never seen
    this actually happen though.
    
    So instead we explicitly call veth_destroy_connection() for each connection,
    any that have been set up will be deallocated.
    
    We also fix a potential leak if vio_register_driver() fails.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cbf9074cc30ca0eee19c9bd7304faf9f1beb1e76
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:07 2005 +1000

    [PATCH] iseries_veth: Only call dma_unmap_single() if dma_map_single() succeeded
    
    The iseries_veth driver unconditionally calls dma_unmap_single() even
    when the corresponding dma_map_single() may have failed.
    
    Rework the code a bit to keep the return value from dma_unmap_single()
    around, and then check if it's a dma_mapping_error() before we do
    the dma_unmap_single().
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b08bd5c0a3110f143faeef9cd057d9d8ff2f0714
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:06 2005 +1000

    [PATCH] iseries_veth: Replace lock-protected atomic with an ordinary variable
    
    The iseries_veth driver uses atomic ops to manipulate the in_use field of
    one of its per-connection structures. However all references to the
    flag occur while the connection's lock is held, so the atomic ops aren't
    necessary.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d7893ddd1b2110a54a5b1773a405748172ba1fe5
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:05 2005 +1000

    [PATCH] iseries_veth: Remove redundant message stack lock
    
    The iseries_veth driver keeps a stack of messages for each connection
    and a lock to protect the stack. However there is also a per-connection lock
    which makes the message stack lock redundant.
    
    Remove the message stack lock and document the fact that callers of the
    stack-manipulation functions must hold the connection's lock.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2a5391a12297d1759b1c736634acb95793d43fb3
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:02 2005 +1000

    [PATCH] iseries_veth: Fix broken promiscuous handling
    
    Due to a logic bug, once promiscuous mode is enabled in the iseries_veth
    driver it is never disabled.
    
    The driver keeps two flags, promiscuous and all_mcast which have exactly the
    same effect. This is because we only ever receive packets destined for us,
    or multicast packets. So consolidate them into one promiscuous flag for
    simplicity.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 58c5900bdaffbf76afd7ad5e053410cb95eb3169
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:29:00 2005 +1000

    [PATCH] iseries_veth: Try to avoid pathological reset behaviour
    
    The iseries_veth driver contains a state machine which is used to manage
    how connections are setup and neogotiated between LPARs.
    
    If one side of a connection resets for some reason, the two LPARs can get
    stuck in a race to re-setup the connection. This can lead to the connection
    being declared dead by one or both ends. In practice the connection is
    declared dead by one or both ends approximately 8/10 times a connection is
    reset, although it is rare for connections to be reset.
    
    (an example here: http://michael.ellerman.id.au/files/misc/veth-trace.html)
    
    The core of the problem is that the end that resets the connection doesn't
    wait for the other end to become aware of the reset. So the resetting end
    starts setting the connection back up, and then receives a reset from the
    other end (which is the response to the initial reset). And so on.
    
    We're severely limited in what we can do to fix this. The protocol between
    LPARs is essentially fixed, as we have to interoperate with both OS/400
    and old Linux drivers. Which also means we need a fix that only changes the
    code on one end.
    
    The only fix I've found given that, is to just blindly sleep for a bit when
    resetting the connection, in the hope that the other end will get itself
    sorted.  Needless to say I'd love it if someone has a better idea.
    
    This does work, I've so far been unable to get it to break, whereas without
    the fix a reset of one end will lead to a dead connection ~8/10 times.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit abfda4719c61550be4efaf277d4a904a7930d410
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:28:59 2005 +1000

    [PATCH] iseries_veth: Remove a FIXME WRT deletion of the ack_timer
    
    The iseries_veth driver has a timer which we use to send acks. When the
    connection is reset or stopped we need to delete the timer.
    
    Currently we only call del_timer() when resetting a connection, which means
    the timer might run again while the connection is being re-setup. As it turns
    out that's ok, because the flags the timer consults have been reset.
    
    It's cleaner though to call del_timer_sync() once we've dropped the lock,
    although the timer may still run between us dropping the lock and calling
    del_timer_sync(), but as above that's ok.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 61a3c6966158dfd9b1279c10ea8eeb3bc7acdef4
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Sep 1 11:28:57 2005 +1000

    [PATCH] iseries_veth: Cleanup error and debug messages
    
    Currently the iseries_veth driver prints the file name and line number in its
    error messages. This isn't very useful for most users, so just print
    "iseries_veth: message" instead.
    
     - convert uses of veth_printk() to veth_debug()/veth_error()/veth_info()
     - make terminology consistent, ie. always refer to LPAR not lpar
     - be consistent about printing return codes as %d not %x
     - make format strings fit in 80 columns
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8a36895c0ddac143b7f0e87d46153f4f75d9fff7
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Aug 31 15:01:33 2005 -0700

    [SPARC64]: Use 'unsigned long' for port argument to I/O string ops.
    
    This kills warnings when building drivers/ide/ide-iops.c
    and puts us in-line with what other platforms do here.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8813dfbfc56b3f7c369b3115c2f70bcacd77ec51
Author: Alexey Y. Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Thu Aug 25 09:56:52 2005 +0400

    [ACPI] Error: Invalid owner_id: 00
    
    Signed-off-by: Alexey Y. Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 986632fd7033a0199f9548c44606377cdf1f4a80
Merge: a994018... 6b39374...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Aug 31 14:19:44 2005 -0700

    Auto-update from upstream

commit 5981d644209c38029df7f91eb8c61bc5952f182b
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Aug 31 22:19:33 2005 +0100

    [SERIAL] Convert mwave to use serial8250_(un)?register_port
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a994018a5fc987702dfb4f5d31172842ea6186dc
Author: Martin Hicks <mort@sgi.com>
Date:   Wed Aug 31 11:21:00 2005 -0700

    [IA64] uncached allocator: use generic (not sn2 specific) functions
    
    Change sn2-specific calls into generic functions.  Without this change
    the uncached allocator will not work on non-sn2 platforms.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0f302dc35412dc67035efc188b9d5c40711b4222
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Wed Aug 31 21:48:47 2005 +0100

    [ARM] 2866/1: add i.MX set_mctrl / get_mctrl functions
    
    Patch from Sascha Hauer
    
    This patch adds support for setting and getting RTS / CTS via
    set_mtctrl / get_mctrl functions.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 147056fb84150966d736fe21fa01d5e0f08e0980
Author: David Vrabel <dvrabel@arcom.com>
Date:   Wed Aug 31 21:45:14 2005 +0100

    [ARM] 2869/1: ixp4xx: correct ioread*/iowrite*
    
    Patch from David Vrabel
    
    Correct the ioread* and iowrite* functions.  In particular, add an offset to the cookie in ioport_map so we can map I/O port ranges starting from 0 (0 is for reporting errors).
    
    Signed-off-by: David Vrabel <dvrabel@arcom.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dcb86e8cbd66c5bd6b51a5485ea3ff35bb4ced22
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Aug 31 21:45:14 2005 +0100

    [ARM] 2868/1: Include linux/cpumask.h in arch/arm/common/gic.c
    
    Patch from Catalin Marinas
    
    Minor compilation error fix.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4fbd1514173a80f9dc93e8ebbd6d4eb97cee123e
Author: Yann Droneaud <ydroneaud@mandriva.com>
Date:   Tue Jun 7 16:54:01 2005 +0200

    [ACPI] check acpi_disabled in IPMI
    
    Signed-off-by: Yann Droneaud <ydroneaud@mandriva.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f21ee2d4245293ee6906eb7afd0a701f40e839b9
Author: Steve Longerbeam <stevel@mwwireless.net>
Date:   Wed Aug 31 21:22:20 2005 +0100

    [ARM] 2867/2: unaligned ldrd/strd fixups
    
    Patch from Steve Longerbeam
    
    Adds an implementation of unaligned LDRD and STRD fixups.
    Also fixes a bug where do_alignment() would misinterpret and
    fixup an unaligned LDRD/STRD as LDRH/STRH, causing memory
    corruption.
    This is the same as Patch #2867/1, but with minor whitespace
    and comments changes, plus a check for arch-level >= v5TE
    before printing ai_dword count in proc_alignment_read().
    
    Signed-off-by: Steve Longerbeam <stevel@mwwireless.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a1cddb88920b915eaba10712ecfd0fc698b00a22
Author: Jack Steiner <steiner@sgi.com>
Date:   Wed Aug 31 08:05:00 2005 -0700

    [IA64-SGI] Add new vendor-specific SAL calls for:
    
    - notifying the PROM of specific features that are supported by the OS.
      This is used to enable PROM feature if and only if the corresponding
      feature is implemented in the OS
    
    - fetch feature sets that are supported by the current PROM. This allows
      the OS to selectively enable features when the PROM support is available.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6cf07a8cc86a0b471466c7fe45892f7ef434015b
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue Aug 23 20:07:00 2005 -0700

    [IA64] Fix nasty VMLPT problem...
    
    I've solved the problem I was having with the simulator and not
    booting Debian.
    
    The problem is that the number of bits for the virtual linear array
    short-format VHPT (Virtually mapped linear page table, VMLPT for
    short) is being tested incorrectly.
    
    There are two problems:
          1. The PAL call that should tell the kernel the size of the
          virtual address space isn't implemented for the simulator, so
          the kernel uses the default 50.  This is addressed separately
          in dc90e95f310f4f821c905b2aec8e9449bb3270fa
    
          2.  In arch/ia64/mm/init.c there's code to calcualte the size
          of the VMLPT based on the number of implemented virtual address
          bits and the page size.  It checks to see if the VMLPT base
          address overlaps the top of the mapped region, but this check
          doesn't allow for the address space hole, and in fact will
          never trigger.
    
    Here's an alternative test and panic, that I think is more accurate.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 714d2dc14914f0f7bb008effe830c99eb47c75df
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Thu Aug 25 17:39:00 2005 -0700

    [IA64] Allow /proc/pal/cpu0/vm_info under the simulator
    
    Not all of the PAL VM calls are implemented for the SKI simulator.
    Don't just give up if one fails, print information from the calls
    that succeed.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit dc90e95f310f4f821c905b2aec8e9449bb3270fa
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Wed Aug 24 17:13:00 2005 -0700

    [IA64] Add PAL_VM_SUMMARY/PAL_MEM_ATTRIB to bootloader for SKI
    
    This patch implements PAL_VM_SUMMARY (and PAL_MEM_ATTRIB for good
    measure) and pretends that the simulated machine is a McKinley.
    
    Some extra comments and clean-up by Tony Luck.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit afc7097f45bdfddc2a0d375ef4a2c38b6e09c339
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 31 06:11:16 2005 -0400

    [netdrvr de2104x] store PCI bus addresses in unsigned long
    
    BZ# 4475.

commit 1a4493584078be87fa9dcbdd8def3cb53d41720c
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 31 05:48:59 2005 -0400

    [netdrvr tulip] new PCI ID
    
    Noted in BZ# 2960.

commit b129a8ccd53f74c43e4c83c8e0031a4990040830
Merge: 6b39374... 194d071...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Aug 31 10:12:14 2005 +0100

    [SERIAL] Clean up and fix tty transmission start/stoping
    
    The start_tx and stop_tx methods were passed a flag to indicate
    whether the start/stop was from the tty start/stop callbacks, and
    some drivers used this flag to decide whether to ask the UART to
    immediately stop transmission (where the UART supports such a
    feature.)
    
    There are other cases when we wish this to occur - when CTS is
    lowered, or if we change from soft to hard flow control and CTS
    is inactive.  In these cases, this flag was false, and we would
    allow the transmitter to drain before stopping.
    
    There is really only one case where we want to let the transmitter
    drain before disabling, and that's when we run out of characters
    to send.
    
    Hence, re-jig the start_tx and stop_tx methods to eliminate this
    flag, and introduce new functions for the special "disable and
    allow transmitter to drain" case.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3618886f645c2ede45742d3e3d22a96b2ee2f527
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Aug 31 09:42:14 2005 +0100

    [ARM] 2857/2: Dynamic tick - fix OOPS if configured and not provided
    
    Patch from Ben Dooks
    
    timer_dyn_reprogram() fails with an OOPS if the
    configuration for CONFIG_NO_IDLE_HZ is enabled, and
    the system has no support for it.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5843e37e24d7cf32f7996dd015245633e0790595
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 30 21:46:19 2005 -0700

    [SPARC64]: Use drivers/Kconfig
    
    And move some other stuff into drivers/sbus/char/Kconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 61a7afa2c476a3be261cf88a95b0dea0c3bd29d4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Aug 16 18:27:34 2005 -0500

    [SCSI] embryonic RAID class
    
    The idea behind a RAID class is to provide a uniform interface to all
    RAID subsystems (both hardware and software) in the kernel.
    
    To do that, I've made this class a transport class that's entirely
    subsystem independent (although the matching routines have to match per
    subsystem, as you'll see looking at the code).  I put it in the scsi
    subdirectory purely because I needed somewhere to play with it, but it's
    not a scsi specific module.
    
    I used a fusion raid card as the test bed for this; with that kind of
    card, this is the type of class output you get:
    
    jejb@titanic> ls -l /sys/class/raid_devices/20\:0\:0\:0/
    total 0
    lrwxrwxrwx  1 root root     0 Aug 16 17:21 component-0 -> ../../../devices/pci0000:80/0000:80:04.0/host20/target20:1:0/20:1:0:0/
    lrwxrwxrwx  1 root root     0 Aug 16 17:21 component-1 -> ../../../devices/pci0000:80/0000:80:04.0/host20/target20:1:1/20:1:1:0/
    lrwxrwxrwx  1 root root     0 Aug 16 17:21 device -> ../../../devices/pci0000:80/0000:80:04.0/host20/target20:0:0/20:0:0:0/
    -r--r--r--  1 root root 16384 Aug 16 17:21 level
    -r--r--r--  1 root root 16384 Aug 16 17:21 resync
    -r--r--r--  1 root root 16384 Aug 16 17:21 state
    
    So it's really simple: for a SCSI device representing a hardware raid,
    it shows the raid level, the array state, the resync % complete (if the
    state is resyncing) and the underlying components of the RAID (these are
    exposed in fusion on the virtual channel 1).
    
    As you can see, this type of information can be exported by almost
    anything, including software raid.
    
    The more difficult trick, of course, is going to be getting it to
    perform configuration type actions with writable attributes.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2b7d6a8cb9718fc1d9e826201b64909c44a915f4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Aug 28 09:13:17 2005 -0500

    [SCSI] attribute container final klist fixes
    
    Since the attribute container deletes from a klist while it's walking
    it, it is vulnerable to the problem (and fix) here:
    
    http://marc.theaimsgroup.com/?l=linux-scsi&m=112485448830217
    
    The attached fixes this (but won't compile without the above).
    
    It also fixes the logical reversal in the traversal loop which meant
    that we were never actually traversing the loop to hit this bug in the
    first place.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 53c165e0a6c8a4ff7df316557528fa7a52d20711
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Aug 22 10:06:19 2005 -0500

    [SCSI] correct attribute_container list usage
    
    One of the changes in the attribute_container code in the scsi-misc tree
    was to add a lock to protect the list of devices per container.  This,
    unfortunately, leads to potential scheduling while atomic problems if
    there's a sleep in the function called by a trigger.
    
    The correct solution is to use the kernel klist infrastructure instead
    which allows lockless traversal of a list.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2ef27778a26dd828dd0d348ff12d2c180062746e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 30 20:21:34 2005 -0700

    [SPARC64]: Preserve nucleus ctx page size during TLB flushes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f1062330499cee10396bf3fc66a03eb228c5fad
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 21:52:18 2005 -0400

    [libata] fix ATAPI-enable typo
    
    Dumb typo spotted by Mark Lord.

commit 3c2cafaf50a0f9e7efe2b3f584f3bba6c5ee929a
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 30 15:11:52 2005 -0700

    [SPARC64]: Do not expand CHEETAH_LOG_ERROR 3 times.
    
    We only need to expand this thing once, saving some
    text section space.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff67b59726a8cd3549b069dfa78de2f538d3b8e3
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Aug 30 14:59:24 2005 -0700

    [IA64] Low byte of current->personality is not a bitmask.
    
    Peter Staubach pointed out that it is not correct to check
    current->personality & PER_LINUX32 (this will have false
    hits on several other personality values).
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b1b5d7f9b7ac6a8e3452ac43a53eebf69fdf5a77
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Tue Aug 30 14:28:56 2005 -0500

    JFS: jfs_delete_inode should always call clear_inode.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit dbd2fdf549317de00e0b5ea465de5372039b7ee8
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 30 11:26:15 2005 -0700

    [SPARC64]: Kill BRANCH_IF_ANY_CHEETAH() from copy page.
    
    Just patch the branch at boot time instead.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b39374a27eb4be7e9d82145ae270ba02ea90dc8
Merge: 62c592e... ed735cc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 30 11:16:30 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6.git

commit 62c592edead3c3a045662595f7ade3c12f133373
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Tue Aug 30 13:40:22 2005 -0300

    [PATCH] ppc32 8xx: fix warnings in m8xx_setup.c
    
    The following patch fixes two warnings in arch/ppc/syslib/m8xx_setup.c
    
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81d4af1340badcd2100c84fbd1bfd13156de41aa
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Tue Aug 30 18:48:52 2005 +0400

    [PATCH] x86: pci_assign_unassigned_resources() update
    
    I had some time to think about PCI assign issues in 2.6.13-rc series.
    
    The major problem here is that we call pci_assign_unassigned_resources()
    way too early - at subsys_initcall level. Therefore we give no chances
    to ACPI and PnP routines (called at fs_initcall level) to reserve their
    respective resources properly, as the comments in drivers/pnp/system.c
    and drivers/acpi/motherboard.c suggest:
    
     /**
      * Reserve motherboard resources after PCI claim BARs,
      * but before PCI assign resources for uninitialized PCI devices
      */
    
    So I moved the pci_assign_unassigned_resources() call to
    pcibios_assign_resources() (fs_initcall), which should hopefully fix a
    lot of problems and make PCIBIOS_MIN_IO tweaks unnecessary.
    
    Other changes:
    - remove resource assignment code from pcibios_assign_resources(), since
      it duplicates pci_assign_unassigned_resources() functionality and
      actually does nothing in 2.6.13;
    - modify ROM assignment code as per Ben's suggestion: try to use firmware
      settings by default (if PCI_ASSIGN_ROMS is not set);
    - set CARDBUS_IO_SIZE back to 4K as it's a wonderful stress test for
      various setups.
    
    Confirmed by Tero Roponen <teanropo@cc.jyu.fi> (who had problems with
    the 4kB CardBus IO size previously).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed735ccbefaf7e5e3ef61418f7e209b8c59308a7
Merge: 39fbe47... d8971fc...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 13:32:29 2005 -0400

    Merge HEAD from /spare/repo/linux-2.6/.git

commit 288ceb8f142249109fd2e9f1bf0492bd6ff6d892
Merge: e438bef... d8971fc...
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Aug 30 09:30:09 2005 -0700

    Auto-update from upstream

commit ae11be6f37dfa140b6c2d1a53b307ef57da69a04
Merge: 444bd6f... 01fa90c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 30 07:47:42 2005 -0700

    Merge refs/heads/for-linus from master.kernel.org:/pub/scm/linux/kernel/git/shaggy/jfs-2.6.git

commit 444bd6fc18e4788f701a119cdfefe4f02444d9cb
Merge: 3cb904c... c884697...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 30 07:47:01 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa

commit 3cb904caa97f5c193df21b8cdf780a826564baff
Merge: d8971fc... 7a9aff3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 30 07:45:15 2005 -0700

    Merge refs/heads/drm-latest from master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6

commit c88469704d63787e8d44ca5ea1c1bd0adc29572d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue Aug 2 15:26:52 2005 +0200

    [ALSA] usb-audio: throttle MIDI URB resubmits on USB errors
    
    USB generic driver
    When a USB error occurs that might indicate that the device has been
    unplugged, don't resubmit the URB immediately to prevent flooding the
    log with error messages before khubd has us disconnect()ed.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 374b1873571bf80dc0c1fcceaaad067980f3b9de
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 05:42:52 2005 -0400

    [libata] update several drivers to use pci_iomap()/pci_iounmap()

commit ea6ba10bbb88e106f9e2db7dc253993bb3bbbe3b
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 05:18:18 2005 -0400

    [libata] __iomem annotations for various drivers

commit e005f01de32f22be8af255f2761018e9766000d2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 04:18:28 2005 -0400

    [libata ahci] minor remove/unplug path cleanup
    
    Don't bother calling a hook, to call our own module, to call a helper
    than simply calls ionumap().
    
    If you unroll all that convolution, you get a simple kfree()+iounmap()
    pair of calls.

commit 1623c81eece58740279b8de802fa5895221f2044
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 30 03:37:42 2005 -0400

    [libata] allow ATAPI to be enabled with new atapi_enabled module option
    
    ATAPI is getting close to being ready.  To increase exposure, we enable
    the code in the upstream kernel, but default it to off (present
    behavior).  Users must pass atapi_enabled=1 as a module option (if
    module) or on the kernel command line (if built in) to turn on
    discovery of their ATAPI devices.

commit d568121ce3151c36cc4718dd4e977f217c6144c2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 30 08:58:37 2005 +0200

    [PATCH] Assign device pointer to OSS devices
    
    Add register_sound_special_device() function to allow assignment of
    device pointer to a specific OSS device for HAL.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 68c339d9068502347015ce462530ec54c4d841e4
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Aug 30 08:48:35 2005 +0200

    [ALSA] version 1.0.10rc1

commit c6c0b841dd85c878fe9794862b10ce8eb4e90761
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Mon Aug 29 17:42:00 2005 +0200

    [ALSA] Add identification for Live 5.1 [SB0220]
    
    EMU10K1/EMU10K2 driver
    Add identification for Live 5.1 [SB0220]
    
    Signed-off-by: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6a293552ba0d104ef9d35b48972a01540fbd181b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Aug 26 17:26:40 2005 +0200

    [ALSA] emu10k1 - Add missing ac97 support on SBLive! Player 5.1
    
    EMU10K1/EMU10K2 driver
    Added the missing ac97 support on SBLive! Player 5.1.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9970dce56686d7b71310388025d8925d3d29e6ec
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Aug 25 20:30:27 2005 +0200

    [ALSA] intel8x0 - Add quirk for FSC 4010
    
    Intel8x0 driver
    Added ac97_quirk for FSC 4010.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7153a558ad598ff521f1d9430982e2a4a6865126
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Aug 25 19:51:47 2005 +0200

    [ALSA] pcm - Fix zero-division in 32bit compat layer
    
    PCM Midlevel
    Fixed zero-division bug in PCM 32bit compat layer.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e0c93cf311b3eaa04bfb5769cff38861d4e748c8
Author: Daniel Horchner <dbjh@gmx.net>
Date:   Thu Aug 25 13:02:24 2005 +0200

    [ALSA] intel8x0 - add AC97_TUNE_MUTE_LED quirk for HP nx8220 laptop 103c:0934
    
    Intel8x0 driver
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c347e9fca710551f0def6a4d58505a6f4c0d87f6
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Aug 25 11:10:05 2005 +0200

    [ALSA] usb-audio: fix Emagic MIDI protocol handling
    
    USB generic driver
    Emagic devices pad their packets not with 0xff bytes but with a 0xff
    byte followed by garbage, so we have to stop at the first such byte.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit a278655ff5d0c9d5eb34cf99f3a4c20da09eb09e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 24 17:57:25 2005 +0200

    [ALSA] Fix missing spin_unlock
    
    au88x0 driver,Common EMU synth
    Fixed missing spin_unlock.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f442e8b0eae4fbb6bbf9b8b005002b51a59e23bf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Aug 24 17:01:02 2005 +0200

    [ALSA] include/sound/gus.h: 'extern inline' -> 'static inline'
    
    GUS Library
    'extern inline' doesn't make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 07e4ca50a5f82aa6eab52e348059579b250c63db
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 24 14:14:57 2005 +0200

    [ALSA] hda-intel - Fix ULI M5461 support
    
    HDA Intel driver
    Fix and clean up for the support of ULI M5461
    - set CORB/RIRB sizes explicitly
    - add workarounds for ULI on ia32
    - max number of streams depends on the chip type now
    - increase the size of BDL
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3c10a9d9f8c76fd87c92a14c201ae211d0b81288
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 23 20:02:27 2005 +0200

    [ALSA] hda-codec - Add beep support for Uniwill
    
    HDA Codec driver
    Added the missing beep support for Uniwill laptop (ALSA bug#1358).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5ba094dbf14828858cdff27c8201df33b7a0bc96
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 23 19:27:31 2005 +0200

    [ALSA] vxpocket - Register device pointer
    
    Digigram VX Pocket driver
    Add snd_card_set_dev() to register the device pointer.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit adf111e6ff1674b81cae3ff7cdd5a5d1edf003f0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 23 19:01:38 2005 +0200

    [ALSA] vxpocket - Fix wrong index assignment
    
    Digigram VX Pocket driver
    Fixed the wrong index number assignment.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 328ac7da6f49f2c8b8af349fef525ad79b4a3987
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 23 15:50:41 2005 +0200

    [ALSA] vxpocket - Add missing event callback
    
    Digigram VX Pocket driver
    Added the missing event callback.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e0be4d32bdae5cebc4e6d9dc65886e279aa69d08
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 23 11:11:03 2005 +0200

    [ALSA] Fix compilation without CONFIG_PROC_FS
    
    Memalloc module
    Fix an error when built without CONFIG_PROC_FS.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit befdf316eaba02ed52284fb78a8027ff35c6a736
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Aug 22 13:57:55 2005 +0200

    [ALSA] hda-codec - Code clean up
    
    HDA Codec driver
    Use struct instead of array to improve the readability of hda_codec.c.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9d8f53f2bba3c2c06e1e78126222aecf91f8ecdd
Author: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
Date:   Mon Aug 22 13:47:16 2005 +0200

    [ALSA] hda-intel - correct a bug in detection of rate supported
    
    HDA Codec driver
    The insertion of the rate 9600 make a shift in detection of supported
    rate, put this rate at the end of the list.
    
    Signed-off-by: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 66d10647feb32178e1204d5b5c7126b1731efe9c
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Aug 22 13:43:39 2005 +0200

    [ALSA] HP nx6110 quirks
    
    Intel8x0 driver,AC97 Codec
    The HP nx6110 laptop needs to have Headphone Jack Sense enabled so
    that the internal speakers will be turned off when headphones are
    plugged in.
    
    Also ac97_quirk=hp_only is needed to make a single Master volume in
    the mixer instead of separate volumes for internal speakers and
    headphones, which just confuses the user.
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5049c35b1389097a1c0c7686519928eaaf31e40b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Aug 22 12:19:14 2005 +0200

    [ALSA] ac97_bus - revert last change and do it only in the ALSA tree
    
    AC97 Codec
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 34ad73b9c5b5b25b795136c23f65b9a3ac21130b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Aug 22 11:30:37 2005 +0200

    [ALSA] ac97_bus - replace <linux/module.h> with <sound/driver.h> for consistency
    
    AC97 Codec
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 352dbfd0e6eb7733bcca79c14f8711bb86b55e4e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Aug 19 17:49:10 2005 +0200

    [ALSA] via82xx - Add DXS entry for MSI 7142
    
    VIA82xx driver
    Added the DXS entry for MSI 7142 (K8MM-V).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41e4845c426024ec41724326397a36b3aa2cb6a3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Aug 18 13:43:12 2005 +0200

    [ALSA] PCM resume cleanups
    
    Digigram VX core,CS4231 driver,ATIIXP driver,VIA82xx driver
    VIA82xx-modem driver,au88x0 driver,CS46xx driver,Trident driver
    This patch disables SNDRV_PCM_INFO_RESUME flag for drivers which does not
    support the full resume.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 61be3ce0f2d9d80bc271e58c42cb9b021b3d48d8
Author: Bjorge Dijkstra <bjorge@gmx.net>
Date:   Tue Aug 16 17:05:05 2005 +0200

    [ALSA] ac97 - make ac97 codec device name unique
    
    AC97 Codec
    The patch fixes the bus_id conflict error when registering two codecs
    of the same type (ALSA bug#1334).
    
    Signed-off-by: Bjorge Dijkstra <bjorge@gmx.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e8da2fbc2dd1fb4d603442f7220d23a2192955fa
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 16 16:55:13 2005 +0200

    [ALSA] hdspm - Fix module parameter description
    
    RME9652 driver
    Fix the module parameter description after proofreading.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1204de32d0df87892e56062042e25c775ca0e08c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 16 16:54:12 2005 +0200

    [ALSA] nm256 - Fix PM and irq handling
    
    NM256 driver
    - Fixed the PCM resume - restoring the rate setting
    - Fixed the handling of buggy irqs
    - Dynamically acquire/release irq handler to make the driver more robust
      to unknown irq storms (as OSS driver does).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1cfe43d21bc5ff751e95b6a62410e05956c09e38
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Aug 16 16:52:24 2005 +0200

    [ALSA] intel8x0 - Fix PM
    
    Intel8x0 driver
    Fixed the PCM resume of intel8x0.
    Restores the requested register setting.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 65d11d95515db3efb629202104cfc672476618b5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Aug 16 13:05:43 2005 +0200

    [ALSA] ALSA timer - fixed compilation
    
    Timer Midlevel
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5ca307b28d6fa12f46b4ad32cb4bb854f8ee69c3
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Aug 16 11:32:04 2005 +0200

    [ALSA] Timer API - SNDRV_TIMER_EVENT_RESUME - val is resolution in ns
    
    ALSA Core
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a501dfa3a763451dedd583eb90a6c9e90d0e3a3c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Aug 16 11:09:05 2005 +0200

    [ALSA] Timer API - added SUSPEND/RESUME events
    
    PCM Midlevel,Timer Midlevel,ALSA Core
    - added SNDRV_TIMER_EVENT_SUSPEND / RESUME events
    - changed timer events from PAUSE / CONTINUE in PCM midlevel to SUSPEND / RESUME
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 47123197c5522f4ae3dc5914e7832dd047f9ddc8
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Aug 15 20:53:07 2005 +0200

    [ALSA] hda-intel: Suspend/resume fixes for PCM devices
    
    HDA Intel driver
    - removed SNDRV_PCM_INFO_RESUME (the driver cannot do PCM resume at the time)
    - fixed chip->pcm_devs initialization
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5a47fe3c5e8f394fb1578bbe8117f3dcc250b6fd
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Aug 15 20:01:40 2005 +0200

    [ALSA] hda-patch-realtek - added pci subdevice ID for Acer TravelMate 8100 (3 stack model + digital out)
    
    HDA Codec driver
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 16d3f140fc265c9b9c0f8975e0b36fe15912508f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Aug 15 15:02:28 2005 +0200

    [ALSA] via82xx - Fix SPDIF sample rates
    
    VIA82xx driver
    Fixed the sample rates set in the fourth DXS channel with Non-VRA mode.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b27113102f576092cd8f5d6ce8365aa6e2f58134
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Aug 15 15:01:10 2005 +0200

    [ALSA] Fix PCM 32bit compat layer
    
    PCM Midlevel
    Fixed the handling of boundary in PCM 32bit compat layer.
    Positions in hwsync are bound in the 32bit boundary size.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cff79742fc9e80242a9147a348621e4373c76287
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Aug 15 13:08:04 2005 +0200

    [ALSA] opl3sa2 - use different name for PnP BIOS driver
    
    OPL3SA2 driver
    - use different name (opl3sa2-pnpbios) for PnP BIOS driver
    - don't print warning when manual config of resources fails (PnP BIOS)
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3e6c6139f0cf9c196c3fd700055f2e22ca22e726
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 09:13:32 2005 +0200

    [ALSA] ac97: make patch_wolfson_wm97??_specific() functions static
    
    AC97 Codec
    Make the patch_wolfson_wm97??_specific() functions static again.
    This patch was accidentally reverted in rev. 1.92.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 6207e51b79f89352a8623f806df5bfafb012e489
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:35:25 2005 +0200

    [ALSA] usb-audio: use vmalloc for the PCM buffer
    
    USB generic driver
    With the double buffering, we no longer need contiguous memory for the
    PCM buffer, so we can use vmalloc() instead of the preallocation
    functions, and increase the maximum size to 256 KB.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 55851f734d7af7e5362d43b60331c95c32a3b027
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:34:16 2005 +0200

    [ALSA] usb-audio: use usb_buffer_alloc/free
    
    USB generic driver
    Use the USB buffer allocation functions to avoid repeated DMA mappings
    of our buffers, which are re-used quite a lot.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit daa150ef7d437d17973210f47a1c58623415df94
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:25:50 2005 +0200

    [ALSA] usb-audio: properly lock hwptr_done accesses
    
    USB generic driver
    Take the substream lock when reading hwptr_done to avoid a race
    condition with the updates in the URB callbacks.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 9624ea812c7afd2e403c56366cadddb9ecfb88c6
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:25:24 2005 +0200

    [ALSA] usb-audio: actually schedule playback URBs at frame boundaries
    
    USB generic driver
    Change prepare_playback_urb() not to stop preparing packets before a
    frame boundary has been reached.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 7efd8bc800324a967a37e8a425433468b7f06adb
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:24:44 2005 +0200

    [ALSA] usb-audio: double-buffer all playback data
    
    USB generic driver
    We always had to use double buffering when capturing, and when playback
    data for one URB crosses a buffer boundary.  The latter would make hwptr
    updates less precise because the double-buffered data is read from the
    buffer much earlier than the other data is read by the host controller.
    
    Double-buffering all data allows to update hwptr immediately after the
    data was copied to the USB buffer(s), which has the additional benefit
    of avoiding the latency imposed by the host controller's delay of up to
    one frame when interrupting.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b263a9bdf9394062a4fc4272ebed60de331c5490
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Aug 15 08:22:39 2005 +0200

    [ALSA] usb-audio: optimize handling of capture URBs
    
    USB generic driver
    When preparing capture URBs, we don't need to stop when we cross a
    period boundary because we now never handle more than one millisecond of
    data per URB anyway.
    
    When handling captured data, use an extra flag to call
    snd_pcm_period_elapsed() no more than once.  This allows us to move the
    period boundary checking code before the copying of the data which
    avoids a second locking of the substream's lock.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 99250872fc619bb5b5ddddcf1c58714a774526fc
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Fri Aug 12 23:54:58 2005 +0200

    [ALSA] Add new card ID. Fixes ALSA bug #1297
    
    EMU10K1/EMU10K2 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 1b05962e8b2d8a1b1f5934087a4a00f7532fa2d1
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Fri Aug 12 23:50:13 2005 +0200

    [ALSA] Add new ID. Fixes ALSA bug #1298
    
    CA0106 driver
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 53b266632b79e2adc48754d5a6e9e5ebbde08c12
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Aug 12 17:35:09 2005 +0200

    [ALSA] opl3sa2 - fixed typo in PnP BIOS IDs (YMF0021 -> YMH0021)
    
    OPL3SA2 driver
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1265509cb0f00206c2ed93f120121dd818a3902d
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Aug 12 17:24:24 2005 +0200

    [ALSA] opl3sa2 driver - added support for PnP BIOS devices
    
    OPL3SA2 driver
    The driver has been extended to support also PnP BIOS devices.
    The detection path is:
    
    1) detect PnP BIOS devices
    2) detect ISA PnP devices
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f347c774c37c83e7b2d2b75d962ca40b9a283b2b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Aug 12 16:47:49 2005 +0200

    [ALSA] via82xx - Add DXS entry for MSI K8MM-V
    
    VIA82xx driver
    Added the DXS entry for MSI K8MM-V.
    Also fixed a typo in last patch for Acer Aspire 1524 WLMi.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4b4994869d68328276f6a3cc9df90cce8c82b43d
Author: Philip Prindeville <philipp_subx@redfish-solutions.com>
Date:   Fri Aug 12 16:46:17 2005 +0200

    [ALSA] Add VT1617A codec support
    
    AC97 Codec
    Added (minimal) support of VT1617A codec with SPDIF.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 47672310789431c16de22f16934febf4d55b4bb0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Aug 12 16:44:04 2005 +0200

    [ALSA] hda-intel - Add SiS966 support
    
    HDA Intel driver
    Added SiS966 pci id to snd-hda-intel driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a93bf99077886d209f8e72bc134e1ceb36e76aa2
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Aug 12 15:19:39 2005 +0200

    [ALSA] usb-audio: schedule high speed URBs with 1 ms alignment
    
    USB generic driver
    The EHCI driver doesn't interrupt more than once per millisecond, and
    organizes all iso transfers with frame-sized ITDs, so we can (try to)
    be more efficient by aligning all URBs on frame boundaries.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 71d848ca00a16179b17e58e5f51c2d9a6c4f97a2
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Aug 12 15:18:00 2005 +0200

    [ALSA] usb-audio: make nrpacks parameter writeable
    
    USB generic driver
    The nrpacks module parameter is used only when initializing a playback
    stream, so it doesn't hurt to make it writeable.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d6db392e9235c48bb945624798e9beede7b85b12
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Aug 12 08:28:27 2005 +0200

    [ALSA] usb-audio: fix packets per URB calculation for playback
    
    USB generic driver
    When determining how many packets are needed for one period, we cannot
    assume that all packets have their maximum size -- we always use the
    nominal sample rate when sending data, and could use an even lower rate
    when the endpoint uses frequency feedback.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 15a24c0778e9bdd48d8e1cf60a263837b5c30ed5
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Aug 12 08:25:26 2005 +0200

    [ALSA] usb-audio: use 1 ms URBs when capturing
    
    USB generic driver
    When capturing audio data, we do not know beforehand how many samples
    the device sends per frame, so we have to use URBs that are as short as
    possible to make sure that we can handle period boundaries without any
    additional latencies.
    
    Furthermore, the total count of URBs submitted doesn't matter when
    capturing, so we can just use the maximum number.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit a53fc188ec6fc406276799da465fe789c40d96b2
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Aug 11 15:59:17 2005 +0200

    [ALSA] make local objects static
    
    Memalloc module,PCM Midlevel,Timer Midlevel,GUS Library,AC97 Codec
    ALI5451 driver,RME9652 driver
    Make some functions/variables that are used in only one file static.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit b65f824c1ea954ea2b974e42c064f72bfbfe3dd2
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Thu Aug 11 11:18:38 2005 +0200

    [ALSA] hda-codec - support for Si3054/5 HDA modems
    
    HDA generic driver,HDA Codec driver
    Support for Si3054/5 HDA modem codecs.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 673b683a07272bdc1f757aa32784b9fcc4b3a014
Author: Sasha Khapyorsky <sashak@smlink.com>
Date:   Thu Aug 11 11:00:16 2005 +0200

    ALSA CVS update
    HDA Codec driver,HDA generic driver
    Summar: hda-codec - MFG support
    
    This adds Modem Functional Group (MFG) support and option for 9600
    sample rate.
    
    Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 443feb882679e21ba5d1e0ff9eff067ac26d9461
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Wed Aug 10 11:18:19 2005 +0200

    [ALSA] ALSA's struct _snd_pcm_substream: Obsolete open_flag
    
    PCM Midlevel,ALSA<-OSS emulation,USB USX2Y
    This patch removes open_flag from struct _snd_pcm_substream.
    All of its uses are substituted by querying struct _snd_pcm_substream's
    member ffile instead.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9bcf655109ae06a8e652671a0de6fe2da5c213c2
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Aug 10 10:21:43 2005 +0200

    [ALSA] ymfpci: add per-voice volume controls
    
    YMFPCI driver
    Implements mixer controls for the volume of each playback substream of
    the main PCM device.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit a55bfdc5821df787068da15a6864f2c669d7d22c
Author: Dirk Opfer <dirk@do13.de>
Date:   Mon Aug 8 16:29:43 2005 +0200

    [ALSA] Fix compiler warnings in PXA2XX-AC97
    
    ARM PXA2XX driver
    -  change pxa2xx_ac97_do_suspend and pxa2xx_ac97_do_resume to use
       the expected arguments
    
    Signed-off-by: Dirk Opfer <dirk@do13.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 064d2112ff24937f9aabb6baae8de88b6e5ef453
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Aug 5 10:25:08 2005 +0200

    [ALSA] WM9713 modem detection
    
    AC97 Codec
    This patch fixes a problem whereby the WM9713 has modem functionality
    incorrectly detected after an AC97 cold reset.
    
    Changes:-
    
      o Cleared AC97_SCAP_MODEM in wm9713 scaps
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4a677ac5d0a4fad286cdfb4890a5e2de61534b1c
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Aug 5 10:24:36 2005 +0200

    [ALSA] PXA27x AC97 warm reset
    
    ARM PXA2XX driver
    This patch extends the period of an AC97 warm reset on the PXA27x from
    50uS to 500uS. The shorter reset didn't always guarantee that the codec
    would wake up.
    
    Changes:-
    
      o Change pxa27x warm reset period to 500uS
      o Removed double semi-colon.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5b8f7f7329289fa3b74ef8cdbaa9d2929787d3e6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 3 14:02:47 2005 +0200

    [ALSA] ad1816a - Add clockfreq module option
    
    Documentation,AD1816A driver
    Added clockfreq module option for the card with a different clock frequency
    than 33kHz.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5549d54992391d81a8cbfbaac45a958876fbc9cb
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Aug 3 13:50:30 2005 +0200

    [ALSA] use PCM interface for IEC958 controls
    
    Digigram VX core,ENS1370/1+ driver,CA0106 driver,EMU10K1/EMU10K2 driver
    RME HDSP driver,RME9652 driver
    For consistency, use the PCM interface instead of MIXER for IEC958
    default/mask/stream mixer controls.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 10e8d78a94fc57f1bf11d50b97ff85b005e46d0b
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Aug 3 13:40:08 2005 +0200

    [ALSA] use SNDRV_CTL_NAME_IEC958 macro
    
    CMI8330 driver,ENS1370/1+ driver,FM801 driver,VIA82xx driver,AC97 Codec
    ALI5451 driver,CS46xx driver,EMU10K1/EMU10K2 driver,HDA Codec driver
    ICE1712 driver,ICE1724 driver
    Where appropriate, use the SNDRV_CTL_NAME_IEC958 instead of a literal
    string.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 506d4c6a5f909d78c3d624693f10d8cc0eafda48
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 3 14:02:47 2005 +0200

    [ALSA] ad1816a - Add clockfreq module option
    
    Documentation
    Added clockfreq module option for the card with a different clock frequency
    than 33kHz.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 267d4d6475cf591a5f838449b40cbacfc2915e8b
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Fri Jul 29 16:59:31 2005 +0200

    [ALSA] adds __init and in snd_memory_init()
    
    ALSA Core
    This patch adds the __init macro to snd_memory_init().
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0ca06a00e206b963587ac471e6d1c52bf33b9a18
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Jul 29 16:13:36 2005 +0200

    [ALSA] AC97 bus interface for ad-hoc drivers
    
    AC97 Codec,PCI drivers
    I've made the review changes and as requested I've pasted the RFC by
    Nicolas below:-
    
    'I would like to know what people think of the following patch.  It
    allows for a codec on an AC97 bus to be shared with other drivers which
    are completely unrelated to audio.  It registers a new bus type, and
    whenever a codec instance is created then a device for it is also
    registered with the driver model using that bus type.  This allows, for
    example, to use the extra features of the UCB1400 like the touchscreen
    interface and the additional GPIOs and ADCs available on that chip for
    battery monitoring.  I have a working UCB1400 touchscreen driver here
    that simply registers with the driver model happily working alongside
    with audio features using this.'
    
    Changes over RFC:-
    
      o Now matches codec name within codec group.
      o Added ac97_dev_release() to stop kernel complaining about no release
    method for device.
      o Added 'config SND_AC97_BUS' to sound/pci/Kconfig and moved 'config
    SND_AC97_CODEC' out with the PCI=n statement.
      o module is now called snd-ac97-bus
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 67ed4161f60d76b3b27efc085b36357a6a90768c
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Jul 29 15:32:58 2005 +0200

    [ALSA] sound - fix .iface field of mixer control elements
    
    Documentation,CS46xx driver,EMU10K1/EMU10K2 driver,AD1848 driver
    SB16/AWE driver,CMIPCI driver,ENS1370/1+ driver,RME32 driver
    RME96 driver,ICE1712 driver,ICE1724 driver,KORG1212 driver
    RME HDSP driver,RME9652 driver
    This patch changes .iface to SNDRV_CTL_ELEM_IFACE_MIXER whre _PCM or
    _HWDEP was used in controls that are not associated with a specific PCM
    (sub)stream or hwdep device, and changes some controls that got
    inconsitent .iface values due to copy+paste errors.  Furthermore, it
    makes sure that all control that do use _PCM or _HWDEP use the correct
    number in the .device field.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 42dfd0adab83c95890e562623264999914771763
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jul 29 14:18:39 2005 +0200

    [ALSA] via82xx - Add dxs entry for Acer Aspire 1524 WMLi
    
    VIA82xx driver
    Added the dxs entry for Acer Aspire 1524 WMLi.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit b9f5a89c74e541533766dcda55d34a06253f60f3
Author: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
Date:   Fri Jul 29 12:17:20 2005 +0200

    [ALSA] hda-codec - Fix LFE volume/switch
    
    HDA Codec driver
    Fixed LFE volume/switch control.
    
    Signed-off-by: Nicolas Graziano <nicolas.graziano@wanadoo.fr>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d827560c96346e0b8b02c1000cc347d73488c818
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jul 29 11:56:41 2005 +0200

    [ALSA] hda-codec - Add default config for ASUS P5AD2
    
    HDA Codec driver
    Added the default config for ASUS P5AD2.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cb8e2f83851ff17b1b361644e82420a923fbc318
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jul 29 11:54:32 2005 +0200

    [ALSA] hda-codec - Fix reordering of surround channels
    
    HDA Codec driver
    - Fixed the reordering of surround channels.
      Originally reported by Nicolas GRAZIANO <nicolas.graziano@wanadoo.fr>.
    
    - Show the selected ssid when debug option is set.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3998b70fd0ab40a276147a0f55816d383fcbeb54
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Jul 29 11:41:55 2005 +0200

    [ALSA] WM97xx AC97 codec controls
    
    AC97 Codec
    o Enhanced current WM97xx support to provide additional controls and
      use the kcontrol suffix naming convention.
    o Added AC97_HAS_NO_MIC, AC97_HAS_NO_TONE and AC97_HAS_NO_STD_PCM.
    o Cleaned up WM97xx related comments.
    o Removed some wm9713 double mono controls and replaced with stereo
      controls.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d8971fcb702e24d1e22c77fd1772f182ffee87e3
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Aug 29 22:51:28 2005 -0700

    [INET]: compile errors when DEBUG is defined
    
    Fix build problem found by compiling driver with DEBUG defined that used tcp.h.
    Since pr_debug(arg) expands to printk("<7>" arg) the argument
    needs to be string that can be concatenated.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7ce78fd9a51ca0d6b9a8cf35baef884ddb9a95c
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 22:46:43 2005 -0700

    [SPARC64]: Eliminate irq_cpustat_t.
    
    We can put the __softirq_pending mask in the cpudata,
    no need for the silly NR_CPUS array in kernel/softirq.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1fdab81e675c6ef76a49b8aabb7eaf4be51d1b80
Merge: a8e4f43... 7ef24b6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 22:05:21 2005 -0700

    Merge refs/heads/upstream-fixes from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit a8e4f435d9ea38bfe9171d7458b2057d440825b1
Merge: 8bc2bee... 502c7f1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 22:04:58 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 8bc2bee26bc7ba77eb1ffc3e3282002d9893cf09
Merge: 826509f... 8913ca1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 21:44:33 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit 7ef24b69f9ff4858d7242059fbb19477c10e6dd7
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Aug 25 17:14:46 2005 -0700

    [PATCH] s2io build fix
    
    Damir Perisa <damir.perisa@solnet.ch> reports:
    
     drivers/net/s2io.h:765: error: invalid lvalue in assignment
     drivers/net/s2io.h:766: error: invalid lvalue in assignment
    
    That's a gcc4 error.  I don't see why the casts are there anyway..
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8913ca1c9ccb5eb6471afd419159729eef6e2730
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Wed Jul 27 15:47:23 2005 +1000

    [PATCH] Remove nested feature sections
    
    The {BEGIN,END}_FTR_SECTION asm macros used in ppc64 to nop out
    sections of code at runtime cannot be nested.  However, we do nest
    them in hash_low.S.  We get away with it there, because there is
    nothing between the BEGIN markers for each section.  However, that's
    confusing to someone reading the code.
    
    This patch removes the nested ifset and ifclr feature sections,
    replacing them with a single feature section in the full mask/value
    form.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a18ecf413ca9846becb760f7f990c2c62c15965e
Author: Bob Moore <robert.moore@intel.com>
Date:   Mon Aug 15 03:42:00 2005 -0800

    [ACPI] ACPICA 20050815
    
    Implemented a full bytewise compare to determine if a table load
    request is attempting to load a duplicate table. The compare is
    performed if the table signatures and table lengths match. This
    will allow different tables with the same OEM Table ID and
    revision to be loaded.
    
    Although the BIOS is technically violating the ACPI spec when
    this happens -- it does happen -- so Linux must handle it.
    
    Signed-off-by: Robert Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 597f95e2bfbe9b83ed8b0761ebf4e7d55fd4df17
Author: Joel Schopp <jschopp@austin.ibm.com>
Date:   Fri Aug 12 14:34:58 2005 -0500

    [PATCH] ppc64: lparconfig.c memory leak
    
    This patch fixes a rare memory leak found by Coverity.
    
    Signed-off-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5ff98ae18bec792d77bfea801aa4b3385b98b355
Author: Joel Schopp <jschopp@austin.ibm.com>
Date:   Thu Aug 11 17:39:28 2005 -0500

    [PATCH] ppc64: of_device.c remove useless code
    
    Coverity found more unused code.
    
    Signed-off-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 717522ff44f1fbee5ea09e83d7cd4b5c956e30f9
Author: Anton Blanchard <anton@samba.org>
Date:   Wed Aug 24 08:53:03 2005 +1000

    [PATCH] ppc64: Add CONFIG_HZ
    
    While ppc64 has the CONFIG_HZ Kconfig option, it wasnt actually being
    used.  Connect it up and set all platforms to 250Hz.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 04ed65190a5d1562220dd3a7fc9eac2402c7104c
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Wed Aug 24 15:22:12 2005 -0500

    [PATCH] oprofile PVR 970MP
    
    Here's the 970MP's PVR (processor version register) entry for oprofile.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7fea82ab1a74030f79a2adfac1af3d93b8638fc3
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Aug 28 21:42:10 2005 -0500

    [PATCH] PPC64: Don't try to claim memory from OF at 1GB mark
    
    Some RS64-based machines (p620, F80, others) have problems with firmware
    returning 0xdeadbeef instead of failure to allocations that end at the
    1GB mark.
    
    We have two options:
    1. Detect the undocumented 0xdeadbeef return value and interpret it as
    a failure.
    2. Avoid allocating that high.
    
    (2) is really the cleaner solution here. 768MB is plenty of room so use
    that as the max alloc_top instead of 1GB.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6f9aa727433fe7647869c9b64ce2f7b5feac0052
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Aug 29 14:08:11 2005 +1000

    [PATCH] Move all the very similar files to asm-powerpc
    
    They differed in either simple comments or in the protecting ifdefs.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 88999ceb55bf959e63df0c911915166b005977fc
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Aug 29 14:06:56 2005 +1000

    [PATCH] Move the identical files from include/asm-ppc{,64}
    
    Move the identical files from include/asm-ppc{,64}/ to
    include/asm-powerpc/.  Remove hdreg.h completely as it is unused in
    the tree.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 45e2a6e4e5e22acd4321f69e84b726c2a568dacf
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Aug 29 13:15:50 2005 +1000

    [PATCH] Create include/asm-powerpc
    
    The ppc and ppc64 trees are hopefully going to merge over time, so this
    patch begins the process by creating a place for the merging of the
    header files.
    
    Create include/asm-powerpc (and move linkage.h into it from
    asm-{ppc,ppc64} since we don't like empty directories).  Modify the
    ppc and ppc64 Makefiles to cope.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fb120da678c517f72d4b39932062c2191827b331
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 17 16:42:59 2005 +1000

    [PATCH] Make MODULE_DEVICE_TABLE work for vio devices
    
    Make MODULE_DEVICE_TABLE work for vio devices.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 71d276d751ff5ddba28312aecefb174b20a5b970
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 17 16:41:44 2005 +1000

    [PATCH] Create vio_bus_ops
    
    Create vio_bus_ops so that we just pass a structure to vio_bus_init
    instead of three separate function pointers.
    
    Rearrange vio.h to avoid forward references. vio.h only needs
    struct device_node from prom.h so remove the include and just
    declare it.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b877b90f227fb9698d99fb70492d432362584082
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 17 16:40:12 2005 +1000

    [PATCH] Create vio_register_device
    
    Take some assignments out of vio_register_device_common and
    rename it to vio_register_device.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5c0b4b8759f78c31172088a91e10733fc014ccee
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 17 16:37:35 2005 +1000

    [PATCH] Formatting changes to vio.c
    
    Formatting changes to vio.c to bring it closer to the
    kernel coding standard.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1e4a79e0458beca871c662028610ae3a88e3f1bf
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Aug 29 18:26:01 2005 +1000

    [PATCH] fix iSeries build for gcc-3.4
    
    gcc 3.4 (at least the build we are using) puts the gcc generated .ident
    string into a .note section at the end of the files it compiles (gcc
    3.3.3-hammer and gcc 4.0.2 Debian puts it in the .text section).  This
    means that the lparmap.s file we produce in the iSeries build may end with
    a .note section.  When we include it into head.S, the assembler can no
    longer resolve some of the conditional branches since the target label
    ends up too far away.  This patch just forces us back to the .text section
    after including lparmap.s.
    
    The breakage was caused by my patch "iSeries build with newer assemblers
    and compilers" (sha1-id: 2ad56496627630ebc99f06af5f81ca23e17e014e).
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2739e8cf113ce6e931608986a28bab5a42c0acd9
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Aug 30 12:54:07 2005 +1000

    [PATCH] Restore lparmap.s include for iSeries
    
    A mistake rebasing the series of ppc64 head.S cleanup patches meant
    the #include of lparmap.s, needed for iSeries was lost.  This patch
    puts it back again.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b74d0bd53406c23636707565d87ddaa55d315b26
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Aug 10 13:53:41 2005 +1000

    [PATCH] ppc64: four level pagetables fix
    
    With CONFIG_HUGETLB_PAGE=n:
    
    In file included from kernel/sysctl.c:37:
    include/linux/hugetlb.h:104:1: warning: "hugetlb_free_pgd_range" redefined
    In file included from include/linux/mm.h:36,
                     from kernel/sysctl.c:23:
    include/asm/pgtable.h:492:1: warning: this is the location of the previous definition
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 826509f8110049663799bc20f2b5b6170e2f78ca
Merge: d992895... c530cfb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 17:36:46 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6.git

commit d992895ba2b27cf5adf1ba0ad6d27662adc54c5e
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun Aug 28 16:49:11 2005 +1000

    [PATCH] Lazy page table copies in fork()
    
    Defer copying of ptes until fault time when it is possible to reconstruct
    the pte from backing store. Idea from Andi Kleen and Nick Piggin.
    
    Thanks to input from Rik van Riel and Linus and to Hugh for correcting
    my blundering.
    
    Ray Fucillo <fucillo@intersystems.com> reports:
    
      "I applied this latest patch to a 2.6.12 kernel and found that it does
       resolve the problem.  Prior to the patch on this machine, I was
       seeing about 23ms spent in fork for ever 100MB of shared memory
       segment.
    
       After applying the patch, fork is taking about 1ms regardless of the
       shared memory size."
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40193713df2cdb9c233b3fc2029ecdccb40cb1e4
Merge: 8f3d17f... c594ada...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 17:11:29 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/paulus/ppc64-2.6

commit c530cfb1ce1e8f230744c3f3bd86771f50725053
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Mon Aug 29 02:15:54 2005 -0300

    [CCID3]: Call sk->sk_write_space(sk) when receiving a feedback packet
    
    This makes the send rate calculations behave way more closely to what
    is specified, with the jitter previously seen on x and x_recv
    disappearing completely on non lossy setups.
    
    This resembles the tcp_data_snd_check code, that possibly we'll end up
    using in DCCP as well, perhaps moving this code to
    inet_connection_sock.
    
    For now I'm doing the simplest implementation tho.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a84ffe430342db6ee585a5038f3242a6b4112d69
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 28 04:51:32 2005 -0300

    [DCCP]: Introduce DCCP_SOCKOPT_PACKET_SIZE
    
    So that applications can set dccp_sock->dccps_pkt_size, that in turn
    is used in the CCID3 half connection init routines to set
    ccid3hc[tr]x_s and use it in its rate calculations.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e438befd76a5a743725a89365140a8a7bf276096
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 16:13:36 2005 -0700

    [IA64-SGI] One new use of "UNCACHED" needed fixing for sn2 region cleanup
    
    Some shub2 changes were not in the tree when Greg cleaned up the sn2
    region definitions in 1b66776da71e33dff5edcc0b096ec3b7c40c75ad, so this
    one didn't get fixed.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0ac4f893f20ed524198da5ebf591fc0b9e2ced2f
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Aug 27 22:37:30 2005 -0700

    [NETFILTER6]: Add new ip6tables HOPLIMIT target
    
    This target allows users to modify the hoplimit header field of the
    IPv6 header.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f2c3b910744f68e1a507f027398f404b3feb5fb
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Aug 27 22:37:03 2005 -0700

    [NETFILTER]: Add new iptables TTL target
    
    This new iptables target allows manipulation of the TTL of an IPv4 packet.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29e4f8b3c340c4b2a0c6dd197b985e03826afd13
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 28 02:00:28 2005 -0300

    [CCID3]: Move ccid3_hc_rx_detect_loss to packet_history.c
    
    Renaming it to dccp_rx_hist_detect_loss.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 072ab6c68e3dd158b68d97eaff16734474d2f8f8
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 28 01:19:14 2005 -0300

    [CCID3]: Move ccid3_hc_rx_add_hist to packet_history.c
    
    Renaming it to dccp_rx_hist_add_packet.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 36729c1a73c354a155db18d64d9e79b86c446fcf
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 28 00:47:15 2005 -0300

    [DCCP]: Move the calc_X routines to dccp_tfrc_lib
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5cea0ddce56ff3406a81fbbab80ef45c65701673
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 23:50:46 2005 -0300

    [DCCP]: Introduce dccp_tfrc_lib module with net/dccp/ccids/lib/*.c
    
    I'll now take a look at the other proposed TFRC DCCP CCIDs to find
    more code that is now in ccid3.c and move to this module, the loss
    event rate, calc_X, etc most probably will be moved there.
    
    The main goal of these changes is to pave the way for the
    implementation of more TFRC based DCCP CCIDs and to shrink ccid3.c,
    reducing its complexity and helping in getting it rock solid.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4524b259541e1eea07020af825d8e7b0e4faaec5
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 23:18:26 2005 -0300

    [DCCP]: Just move packet_history.[ch] to net/dccp/ccids/lib/
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ae6706f0678b89de07ad3b456893cc883584f711
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 23:03:09 2005 -0300

    [CCID3]: Move the loss interval code to loss_interval.[ch]
    
    And put this into net/dccp/ccids/lib/, where packet_history.[ch] will also be
    moved and then we'll have a tfrc_lib.ko module that will be used by
    dccp_ccid3.ko and other CCIDs that are variations of TFRC (RFC 3448).
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cfc3c525a3b434cabf92bf7054f2c6c93497fbea
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 20:20:37 2005 -0300

    [CCID3]: Move the CCID3 defines to ccid3.h
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b5e633ab1525b4def3f36b53903b00586e9966d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 20:11:28 2005 -0300

    [CCID3]: Introduce usecs_div
    
    To avoid open coding this all over the place.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6ee3d4ada4e85d9b9b9164c1327ef0850c79d5e
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 18:18:18 2005 -0300

    [CCID3]: Reorganise timeval handling
    
    Introducing functions to add to or subtract from a timeval variable
    and renaming now_delta to timeval_new_delta that calls do_gettimeofday
    and then timeval_delta, that should be used when there are several
    deltas made relative to the current time or setting variables to it,
    so as to avoid calling do_gettimeofday excessively.
    
    I'm leaving these "timeval_" prefixed funcions internal to DCCP for a
    while till we're sure there are no subtle bugs in it.
    
    It also is more correct as it checks if the number of usecs added to
    or subtracted from a tv_usec field is more than 2 seconds.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1f2333aea3269e196c44ae9a220e714cc1427792
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 03:51:58 2005 -0300

    [CCID3]: Reflow to mostly fit under 80 columns
    
    No code changes.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d6809c12b3334a929c39bf08ea63bd819e0500f7
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 03:06:35 2005 -0300

    [DCCP]: Introduce dccp_wait_for_ccid and use it in dccp_write_xmit
    
    This is not quite what I think we should have long term but improves
    performance for now, so lets use it till we get CCID3 working well,
    then we can think about using sk_write_queue, perhaps using some ideas
    from Juwen Lai's old stack for 2.4.20.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 75b3f207b433dcb807fcf0f47de1c8398571ba5f
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 27 02:35:30 2005 -0300

    [DCCP]: Make the Debug Menu available when DCCP is statically linked too
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba89966c1984513f4f2cc0a6c182266be44ddd03
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Aug 26 12:05:31 2005 -0700

    [NET]: use __read_mostly on kmem_cache_t , DEFINE_SNMP_STAT pointers
    
    This patch puts mostly read only data in the right section
    (read_mostly), to help sharing of these data between CPUS without
    memory ping pongs.
    
    On one of my production machine, tcp_statistics was sitting in a
    heavily modified cache line, so *every* SNMP update had to force a
    reload.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29cb9f9c5502f6218cd3ea574efe46a5e55522d2
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Aug 25 16:23:11 2005 -0700

    [LIB]: Make TEXTSEARCH_BM plain tristate like the others
    
    And select it when the relevant modules are enabled.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8082e4ed0a61da347f1c7f210493c4e9e55c8cd0
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Thu Aug 25 16:12:22 2005 -0700

    [LIB]: Boyer-Moore extension for textsearch infrastructure strike #2
    
    Attached the implementation of the Boyer-Moore string search
    algorithm for the new textsearch infrastructure.
    
    I've added as well a note about the limitations that this approach
    presents, as Thomas has remarked.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf4ef01440ca5c6d96f2ea2b793a37a0a863a045
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Thu Aug 25 16:08:37 2005 -0700

    [LIST]: Add docbook header comments for hlist_add_{before,after}_rcu()
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 57bf1451ac79640c5a0a4f31284c43539fac2903
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Aug 25 16:06:19 2005 -0700

    [NET]: net/802: more endian annotations
    
    The rest of endian warnings now belongs to tr.c exclusively.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73eef4cddb2738c4e8c5ef157ebb1b19d6c9272f
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:39:15 2005 -0700

    [BNX2]: update version and minor fixes
    
    Update version and add 4 minor fixes, the last 2 were suggested by
    Jeff Garzik:
    
    1. check for a valid ethernet address before setting it
    2. zero out bp->regview if init_one encounters an error and unmaps
       the IO address. This prevents remove_one from unmapping again.
    3. use netif_rx_schedule() instead of hand coding the same.
    4. use IRQ_HANDLED and IRQ_NONE.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c770a65cee7cc250d7bccd99fa55e742988ae4e0
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:38:39 2005 -0700

    [BNX2]: change irq locks to bh locks
    
    Change all locks from spin_lock_irqsave() to spin_lock_bh(). All
    places that require spinlocks are in BH context.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e89bbf1049aac3625fdafe3657ed8d7d5373d351
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:36:58 2005 -0700

    [BNX2]: remove atomics in tx
    
    Remove atomic operations in the fast tx path. Expensive atomic
    operations were used to keep track of the number of available tx
    descriptors. The new code uses the difference between the consumer
    and producer index to determine the number of free tx descriptors.
    
    As suggested by Jeff Garzik, the name of the inline function is
    changed to all lower case.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cd339a0ed61097d92ce03b6d1042b1e4d58535e7
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:35:24 2005 -0700

    [BNX2]: speedup serdes linkup
    
    This speeds up link-up time on 5706 SerDes if the link partner does
    not autoneg, a rather common scenario in blade servers. Some blade
    servers use IPMI for keyboard input and it's important to minimize
    link disruptions.
    
    The speedup is achieved by shortening the timer to (HZ / 3) during
    the transient period right after initiating a SerDes autoneg. If
    autoneg does not complete, parallel detect can be done sooner. After
    the transient period is over, the timer goes back to its normal HZ
    interval.
    
    As suggested by Jeff Garzik, the timer initialization is moved to
    bnx2_init_board() from bnx2_open().
    
    An eeprom bit is also added to allow default forced SerDes speed for
    even faster link-up time.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit afdc08b9f9a7174d7912a160f657f39d46379b5e
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Aug 25 15:34:29 2005 -0700

    [BNX2]: Fix rtnl deadlock in bnx2_close
    
    This fixes an rtnl deadlock problem when flush_scheduled_work() is
    called from bnx2_close(). In rare cases, linkwatch_event() may be on
    the workqueue from a previous close of a different device and it will
    try to get the rtnl lock which is already held by dev_close().
    
    The fix is to set a flag if we are in the reset task which is run
    from the workqueue. bnx2_close() will loop until the flag is cleared.
    As suggested by Jeff Garzik, the loop is changed to call msleep(1)
    instead of yield() in the original patch.
    
    flush_scheduled_work() is also moved to bnx2_remove_one() before the
    netdev is freed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2373ce1ca04dd46bf2b8b0f9a799eb2a90da92fb
Author: Robert Olsson <Robert.Olsson@data.slu.se>
Date:   Thu Aug 25 13:01:29 2005 -0700

    [IPV4]: Convert FIB Trie to RCU.
    
    * Removes RW-lock
    * Proteced read functions uses
      rcu_dereference proteced with rcu_read_lock()
    * writing of procted pointer w. rcu_assigen_pointer
    * Insert/Replace atomic list_replace_rcu
    * A BUG_ON condition removed.in trie_rebalance
    
    With help from Paul E. McKenney.
    
    Signed-off-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e5b4376074e02b783e56a8f7c42d544e18112c4e
Author: Robert Olsson <Robert.Olsson@data.slu.se>
Date:   Thu Aug 25 13:01:03 2005 -0700

    [IPV4]: Prepare FIB core for RCU.
    
    * RCU versions of hlist_***_rcu
    * fib_alias partial rcu port just whats needed now.
    
    Signed-off-by: Robert Olsson <Robert.Olsson@data.slu.se>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3625796806419d97641d90e0f197eab9b952212e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 24 11:38:53 2005 -0700

    [IPV4]: Module export of ip_rcv() no longer needed.
    
    With ip_rcv nowhere outside the IP stack being used anymore it's
    EXPORT_SYMBOL is not needed any longer either.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c91326db013ddff478da8a8d66fb99ef4579f19a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 24 11:37:45 2005 -0700

    [AX25/NETROM/ROSE]: Kill net/ip.h inclusion
    
    All these are claiming to include <net/ip.h> to get ip_rcv() but in
    fact don't need the header at all, so away with the inclusion.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 98a82febb6340466824c3a453738d4fbd05db81a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 24 11:35:51 2005 -0700

    [AX25/NETROM]: Cleanup direct calls into IP stack
    
    Get rid of the calls to ip_rcv and arp_rcv which were layering
    violations anyway.  With those being replaced by netif_rx, less parts
    of AX.25 and relatives depend on INET support actually being enabled.
    This also will make PF_PACKET sockets work for IP and ARP packets
    received over AX.25 and for IP packets over NET/ROM.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0c7770c740156c8802c23d24fc094d06967d997d
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 23 21:59:41 2005 -0700

    [IPV4]: FIB trie cleanup
    
    This is a redo of earlier cleanup stuff:
    	* replace DBG() macro with pr_debug()
    	* get rid of duplicate extern's that are already in fib_lookup.h
    	* use BUG_ON and WARN_ON
    	* don't use BUG checks for null pointers where next statement would
    	  get a fault anyway
    	* remove debug printout when rebalance causes deep tree
    	* remove trailing blanks
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 502c7f1dd566e7ca8aabdb755182664c5fdaebf1
Merge: 2cba582... 8f3d17f...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 19:06:29 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 331968bd0c1b2437f3ad773cbf55f2e0737bafc0
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:54:23 2005 -0700

    [DCCP]: Initial dccp_poll implementation
    
    Tested with a patched netcat, no horror stories so far 8)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8efa544f9c84919c047dc2f96e308c902e8fb1a4
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:54:00 2005 -0700

    [DCCP]: Call the HC exit routines at dccp_v4_destroy_sock
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc40c7bc76054f5e4382835ca2bafb895b993a8a
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:52:58 2005 -0700

    [ICSK]: Generalise tcp_listen_poll
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2babe1f6fea717c36c008c878fe095d1ca5696c1
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:52:35 2005 -0700

    [DCCP]: Introduce dccp_get_info
    
    And also hc_tx and hc_rx get_info functions for the CCIDs to fill in
    information that is specific to them.
    
    For now reusing struct tcp_info, later I'll try to figure out a better
    solution, for now its really nice to get this kind of info:
    
    [root@qemu ~]# ./ss -danemi
    State       Recv-Q Send-Q  Local Addr:Port  Peer Addr:Port
    LISTEN      0      0                *:5001          *:*     ino:628 sk:c1340040
             mem:(r0,w0,f0,t0) cwnd:0 ssthresh:0
    ESTAB       0      0       172.20.0.2:5001 172.20.0.1:32785 ino:629 sk:c13409a0
             mem:(r0,w0,f0,t0) ts rto:1000 rtt:0.004/0 cwnd:0 ssthresh:0 rcv_rtt:61.377
    
    This, for instance, shows that we're not congestion controlling ACKs,
    as the above output is in the ttcp receiving host, and ttcp is a one
    way app, i.e. the received never calls sendmsg, so
    ccid_hc_tx_send_packet is never called, so the TX half connection
    stays in TFRC_SSTATE_NO_SENT state and hctx_rtt is never calculated,
    stays with the value set in ccid3_hc_tx_init, 4us, as show above in
    milliseconds (0.004ms), upcoming patches will fix this.
    
    rcv_rtt seems sane tho, matching ping results :-)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4fded33b3e8177d1d2eec0ccc69af8dfe8b4c3c3
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:51:59 2005 -0700

    [CCID3]: Calculate the RTT in the RX half connection
    
    Using TIMESTAMP_ECHO and ELAPSED_TIME options received.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4b81ff70547b40c9b0742b163e8354560003cc0
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:51:36 2005 -0700

    [DCCP]: Export dccp_insert_option_timestamp to CCIDs
    
    And don't insert a TIMESTAMP option in all packets, leave the decision
    to the CCIDs.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 012e13eac7579fcc7618df4ca1d5af3cdc03748c
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:51:13 2005 -0700

    [CCID]: Make ccid_hc_[rt]x_exit accept NULL arguments
    
    Just like kfree, etc it will just not call the CCID exit
    routines when the private data area is set to NULL.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a4beb1b64f5846e216bf2c439022df480151902a
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:50:45 2005 -0700

    [DCCP]: Send a DATAACK packet when we have a TIMESTAMP_ECHO pending
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20472af986569b0615bd77f0fd7ca9e3d33e9895
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:50:21 2005 -0700

    [DCCP]: Fix skb leak in dccp_sendmsg
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ad07e7cf343181002c10c39d3f57a88e4903d4f
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 23 21:50:06 2005 -0700

    [DCCP]: Implement the CLOSING timer
    
    So that we retransmit CLOSE/CLOSEREQ packets till they elicit an
    answer or we hit a timeout.
    
    Most of the machinery uses TCP approaches, this code has to be
    polished & audited, but this is better than we had before.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 58e45131dc269eff0983c6d44494f9e687686900
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Aug 21 23:46:01 2005 -0700

    [DCCP]: Fix printf format warnings on 64-bit.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 05465343bf74e00c8c2c5a310740157de3149f27
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 21 23:31:43 2005 -0700

    [NETFILTER]: Add goto target
    
    Originally written by Henrik Nordstrom <hno@marasystems.com>, taken
    from netfilter patch-o-matic and added ip6_tables support.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 764d8a9f240729534a1d8a0ffd39e722cf5cc5af
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 21 23:31:06 2005 -0700

    [NETFILTER]: Add IPv6 REJECT target
    
    Originally written by Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>,
    taken from netfilter patch-o-matic and fixed up to work with current
    kernels.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7567662ba896ee0c33d6215f32e2011488a6d1bf
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Sun Aug 21 23:30:34 2005 -0700

    [NETFILTER]: Add string match
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24117727b753426d85ba09671c24854834f81b2c
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 21 05:40:16 2005 -0300

    [DCCP]: Fix ackno setting in SYNC/SYNCACK packets
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 03ace394ac9bcad38043a381ae5f4860b9c9fa1c
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 21 05:36:45 2005 -0300

    [DCCP]: Fix the ACK and SEQ window variables settings
    
    This is from a first audit, more eyeballs are more than welcome.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a3054d48b9b9d6290eccc9fc09c286ef450d9b1d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 21 05:35:18 2005 -0300

    [DCCP]: Give more info on Step 6 failure debug printk
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2807d4ffb0dccb8f932c3e1701b6b6163153d333
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 21 05:33:48 2005 -0300

    [DCCP]: Fix seqno setting in dccp_v4_ctl_send_reset
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c68e64cfb5ac675b002215b5659146b73d2e9d5d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sun Aug 21 05:07:37 2005 -0300

    [CCID3]: Reintroduce ccid3hctx_t_rto
    
    CCID3 keeps this variable in usecs, inet_connection_socks in jiffies,
    so to avoid Mars orbiter losses lets reintroduce ccid3hctx_t_rto 8)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 33d043d65bbd3d97efca96c9bbada443cac3c4da
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:27:34 2005 -0700

    [IPV4]: ip_finish_output() can be inlined
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9070683bdac59a3b26e2ce6dd0d05fbfcb3fc7d8
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:27:09 2005 -0700

    [IPV4]: Remove some dead code from ip_forward()
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e192beaf5ef260a31e84a12c0a04eff2eec02ab
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:26:30 2005 -0700

    [IPV4]: Avoid common branch mispredictions in ip_rcv_finish()
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d245407e758b14c464c609b632873f85709360c7
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:26:12 2005 -0700

    [IPV4]: Move ip options parsing out of ip_rcv_finish()
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e9c604227391308b185aa6b14c7f93b0a0c2e51b
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:25:52 2005 -0700

    [IPV4]: Avoid common branch misprediction while checking csum in ip_rcv()
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 58615242417638794a5ba299c49e3fbd6f47c2a3
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:25:29 2005 -0700

    [IPV4]: Consistency and whitespace cleanup of ip_rcv()
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c656491e9ce77e12337073973794c4be467a489
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Aug 20 17:24:25 2005 -0700

    [NET]: Fix ipl=>ihl typo in ip_fast_csum
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a6f9a70578b981321b63786ac8015f17cca4fcbd
Author: Jon Wetzel <jon_wetzel@dell.com>
Date:   Sat Aug 20 17:15:54 2005 -0700

    [NET]: Add support for getting the permanent hardware address.
    
    This patch adds a new field to net device to hold the permanent
    hardware address, and adds a new generic ethtool_op function to
    get that address.
    
    Signed-off-by: Jon Wetzel <jon_wetzel@dell.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cd25c1fcfbf6460983e99091d278187421c1a1d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Aug 20 17:14:11 2005 -0700

    [NET]: fix PROC_FS=n compile
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1bc0986957b63a2fbbc46ab95d3d1d72830bda83
Author: Ian McDonald <iam4@cs.waikato.ac.nz>
Date:   Sat Aug 20 00:23:43 2005 -0300

    [DCCP]: Fix the timestamp options
    
    This changes timestamp, timestamp echo, and elapsed time to use units of 10
    usecs as per DCCP spec. This has been tested to verify that times are correct.
    Also fixed up length and used hton/ntoh more.
    
    Still to add in later patches:
    - actually use elapsed time to adjust RTT
    (commented out as was prior to this patch)
    - send options at times more closely following the spec
    (content is now correct)
    
    Signed-off-by: Ian McDonald <iam4@cs.waikato.ac.nz>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bf0ff9e578ba7dd8331005f00ad7310122011f43
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Aug 19 16:37:30 2005 -0700

    [IPVS]: ipv4_table --> ipvs_ipv4_table
    
    Fix conflict with symbol of same name in global
    namespace.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c59eab4637dbc3f832503be4ccb9213b0f323d92
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Aug 18 21:12:02 2005 -0300

    [DCCP]: Use LIMIT_NETDEBUG in some debugging printks
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5480855bfbc125f34d9b752689bb9a64da7e1fc6
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Aug 18 20:47:02 2005 -0300

    [DCCP]: Set dccp_ctl_socket to NULL in dccp_ctl_sock_exit
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b1c9fe7b818acbd36dc908c5c1ad4cab34c67b39
Author: Ian McDonald <iam4@cs.waikato.ac.nz>
Date:   Thu Aug 18 20:45:29 2005 -0300

    [DCCP]: Fix elapsed time option as per section 13.2 of spec v11
    
    The elapsed time can be two bytes or four bytes only.
    
    Signed-off-by: Ian McDonald <iam4@cs.waikato.ac.nz>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d179cd12928443f3ec29cfbc3567439644bd0afc
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Aug 17 14:57:30 2005 -0700

    [NET]: Implement SKB fast cloning.
    
    Protocols that make extensive use of SKB cloning,
    for example TCP, eat at least 2 allocations per
    packet sent as a result.
    
    To cut the kmalloc() count in half, we implement
    a pre-allocation scheme wherein we allocate
    2 sk_buff objects in advance, then use a simple
    reference count to free up the memory at the
    correct time.
    
    Based upon an initial patch by Thomas Graf and
    suggestions from Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e92ae93a8aa66aea12935420cb22d4df1c18d023
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Wed Aug 17 03:10:59 2005 -0300

    [DCCP]: Send SYNCACK packets in response to SYNC packets
    
    Also fix step 6 when receiving SYNC or SYNCACK packets, i.e. we were not using
    the updated swl.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba602a816132dcc66e875dddf2c62512a9f6f8cb
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 16 20:50:16 2005 -0700

    [IPVS]: Rename tcp_{init,exit}() --> ip_vs_tcp_{init,exit}()
    
    Conflicts with global namespace functions with the
    same name.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bf73d1c5d726ac717755efc7e15d2a86dd383448
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Aug 16 20:45:45 2005 -0700

    [IRDA]: Possible cleanups.
    
    This patch contains the following possible cleanups:
    
    - make the following needlessly global function static:
      - irnet/irnet_ppp.c: irnet_init
    
    - remove the following unneeded EXPORT_SYMBOL's:
      - irlmp.c: sysctl_discovery_timeout
      - irlmp.c: irlmp_reasons
      - irlmp.c: irlmp_dup
      - irqueue.c: hashbin_find_next
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c6ea29d82e0d1b9b37e6b879e0a7fd6c409333d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 16 19:46:48 2005 -0300

    [IP]: Introduce ip_options_get_from_user
    
    This variant is needed to satisfy sparse __user annotations.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ed8a48582c08432e84e5610564c1d25fe00dd7f
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 16 19:02:15 2005 -0300

    [NETLINK]: Fix sparse warnings
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20380731bc2897f2952ae055420972ded4cd786e
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 16 02:18:02 2005 -0300

    [NET]: Fix sparse warnings
    
    Of this type, mostly:
    
    CHECK   net/ipv6/netfilter.c
    net/ipv6/netfilter.c:96:12: warning: symbol 'ipv6_netfilter_init' was not declared. Should it be static?
    net/ipv6/netfilter.c:101:6: warning: symbol 'ipv6_netfilter_fini' was not declared. Should it be static?
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9deff7f2365958c5c5aa8cb5a0dd651c4dd83f8f
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 15 21:13:25 2005 -0700

    [RXRPC]: Fix build failure introduced by skb->stamp changes.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 63a1222b1fd79c52491c14534b086bffbfaed8bf
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 15 20:35:44 2005 -0700

    [DECNET]: Fix build after netlink changes.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 216efaaaa006d2f3ecbb5bbc2b6673423813254e
Author: James Morris <jmorris@namei.org>
Date:   Mon Aug 15 20:34:48 2005 -0700

    [SELINUX]: Update for tcp_diag rename to inet_diag.
    
    Also, support dccp sockets.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 066286071d3542243baa68166acb779187c848b3
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Aug 15 12:33:26 2005 -0700

    [NETLINK]: Add "groups" argument to netlink_kernel_create
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9a4595bc7e67962f13232ee55a64e063062c3a99
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Aug 15 12:32:15 2005 -0700

    [NETLINK]: Add set/getsockopt options to support more than 32 groups
    
    NETLINK_ADD_MEMBERSHIP/NETLINK_DROP_MEMBERSHIP are used to join/leave
    groups, NETLINK_PKTINFO is used to enable nl_pktinfo control messages
    for received packets to get the extended destination group number.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7fa9b10edbb9391bdd4ec8e8b3d621d0664b198
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Aug 15 12:29:13 2005 -0700

    [NETLINK]: Support dynamic number of multicast groups per netlink family
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab33a1711cf60bfb562b1ab89ac9f23d1425e8b1
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:31:36 2005 -0700

    [NETLINK]: Return -EPROTONOSUPPORT in netlink_create() if no kernel socket is registered
    
    This is necessary for dynamic number of netlink groups to make sure we know
    the number of possible groups before bind() is called. With this change pure
    userspace communication using unused netlink protocols becomes impossible.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac6d439d2097b72ea0cbc2322ce1263a38bc1fd0
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:29:52 2005 -0700

    [NETLINK]: Convert netlink users to use group numbers instead of bitmasks
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d629b836d151d43332492651dd841d32e57ebe3b
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:27:50 2005 -0700

    [NETLINK]: Use group numbers instead of bitmasks internally
    
    Using the group number allows increasing the number of groups without
    beeing limited by the size of the bitmask. It introduces one limitation
    for netlink users: messages can't be broadcasted to multiple groups anymore,
    however this feature was never used inside the kernel.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77247bbb3094246be9d057e7be442cc708f123a8
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:27:13 2005 -0700

    [NETLINK]: Fix module refcounting problems
    
    Use-after-free: the struct proto_ops containing the module pointer
    is freed when a socket with pid=0 is released, which besides for kernel
    sockets is true for all unbound sockets.
    
    Module refcount leak: when the kernel socket is closed before all user
    sockets have been closed the proto_ops struct for this family is
    replaced by the generic one and the module refcount can't be dropped.
    
    The second problem can't be solved cleanly using module refcounting in the
    generic socket code, so this patch adds explicit refcounting to
    netlink_create/netlink_release.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db080529798b497eb5a37b92a25e966be5a7dd5d
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:26:34 2005 -0700

    [NETLINK]: Remove unused groups member from struct netlink_skb_parms
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 43e943c32b9213b5d25407b281c94aaa474fd9a6
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 19:25:47 2005 -0700

    [NETLINK]: Fix missing dst_groups initializations in netlink_broadcast users
    
    netlink_broadcast users must initialize NETLINK_CB(skb).dst_groups to the
    destination group mask for netlink_recvmsg.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ad93e266a17c6f606e96304c866eb73665ae34fa
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Sun Aug 14 19:24:58 2005 -0700

    [NETLINK]: w1_int.c: fix default netlink group
    
    w1 does not need to multicast its state to several groups at once,
    and upcoming netlink changes will not allow bitmask for groups anyway.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7de76272b54e3677bcd247d1e1809015236a298d
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Aug 14 18:01:08 2005 -0700

    [IPX]: Fix build error in ipx_recvmsg()
    
    Missing semicolon introduced by skb->stamp changeset:
    d3258b7d8ed96f97032639bc745179f1951b0da5
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a10cedd4b905236603c6c4fd77cf338ebbfb1a60
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 21:05:53 2005 -0300

    [DCCP]: Fix compiler warnings
    
    may be a false warning if there always is something on ccid3hcrx_hist:
    
    net/dccp/ccids/ccid3.c: In function 'ccid3_hc_rx_packet_recv':
    net/dccp/ccids/ccid3.c:1634: warning: 'tstamp.tv_usec' may be used uninitialized in this function
    net/dccp/ccids/ccid3.c:1634: warning: 'tstamp.tv_sec' may be used uninitialized in this function
    
    const on inline functions doesn't have any effect:
    
    net/dccp/dccp.h:64: warning: type qualifiers ignored on function return type
    net/dccp/dccp.h:70: warning: type qualifiers ignored on function return type
    net/dccp/dccp.h:76: warning: type qualifiers ignored on function return type
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a1d3a35518779df0579dd9de0121354b49c68ddc
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 22:42:25 2005 -0300

    [DCCP]: Fix sparse warnings
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8649b0d4166e6e80ffa298e75abd8f2afdd491a6
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 20:36:01 2005 -0300

    [DCCP]: Fix RESET handling in dccp_rcv_state_process
    
    To avoid holding TIMEWAIT state for sockets in the LISTEN state.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 725ba8eee3881e619c8e5a0116f1bdb6480ac2d9
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 20:35:39 2005 -0300

    [DCCP]: Introduce the DCCP Kernel hacking menu
    
    Only available if CONFIG_DEBUG_KERNEL is enabled in the "Kernel
    Hacking" Menu.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 531669a0a9041d60d13920973ef8aa4f743c14a0
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 20:35:17 2005 -0300

    [DCCP]: Rewrite dccp_sendmsg to be more like UDP
    
    Based on discussions with Nishida-san.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7690af3fff7633e40b1b9950eb8489129251d074
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 20:34:54 2005 -0300

    [DCCP]: Just reflow the source code to fit in 80 columns
    
    Andrew Morton should be happy now 8)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c173437669967301facff151bfeb7bae67354e4c
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Sat Aug 13 20:34:23 2005 -0300

    [PACKET_HISTORY]: Add dccphtx_rtt and rename the win_count fields
    
    As requested by Ian.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: Ian McDonald <iam4@cs.waikato.ac.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 34b4a4a624bafe089107966a6c56d2a1aca026d4
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Aug 14 17:33:59 2005 -0700

    [NETFILTER]: Remove tasklist_lock abuse in ipt{,6}owner
    
    Rip out cmd/sid/pid matching since its unfixable broken and stands in the
    way of locking changes to tasklist_lock.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 000efe1d86620244b8e017429e57fab4170ab05a
Author: Gary Wayne Smith <gary.w.smith@primeexalia.com>
Date:   Sun Aug 14 17:33:24 2005 -0700

    [NETFILTER]: Make NETMAP target usable in OUTPUT
    
    Signed-off-by: Gary Wayne Smith <gary.w.smith@primeexalia.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9baa5c67ff4ce57b6b9f68c90714a1bb876fccd7
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 17:32:50 2005 -0700

    [NETFILTER]: Don't exclude local packets from MASQUERADING
    
    Increases consistency in source-address selection.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb13ab2849074244a51ae5147483610529a29ced
Author: Domen Puncer <domen@coderock.org>
Date:   Sun Aug 14 17:32:05 2005 -0700

    [NETFILTER]: Remove two unused files
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a61bbcf28a8cb0ba56f8193d512f7222e711a294
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 14 17:24:31 2005 -0700

    [NET]: Store skb->timestamp as offset to a base timestamp
    
    Reduces skb size by 8 bytes on 64-bit.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 25ed891019b84498c83903ecf53df7ce35e9cff6
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Aug 13 13:58:21 2005 -0700

    [NETFILTER]: Nicer names for ipt_connbytes constants
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ffde671730df0b392ca478643b88ef7153244c0
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Aug 13 13:57:58 2005 -0700

    [NETFILTER]: Fix div64_64 in ipt_connbytes
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d810fd2d28a9d672eca3136476af1a54a380bb2
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Aug 13 13:56:26 2005 -0700

    [NETFILTER]: Add new iptables "connbytes" match
    
    This patch ads a new "connbytes" match that utilizes the CONFIG_NF_CT_ACCT
    per-connection byte and packet counters.  Using it you can do things like
    packet classification on average packet size within a connection.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ba2c6e8c0fb5cde5a23a213c2e7cb851b85c310
Author: Harald Welte <laforge@netfilter.org>
Date:   Sat Aug 13 13:55:44 2005 -0700

    [NETFILTER]: introduce and use aligned_u64 data type
    
    As proposed by Andi Kleen, this is required esp. for x86_64 architecture,
    where 64bit code needs 8byte aligned 64bit data types, but 32bit userspace
    apps will only align to 4bytes.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 17b085eacef81a6286bd478f2ec75e04abb091cb
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 12:59:17 2005 -0300

    [INET_DIAG]: Move the tcp_diag interface to the proper place
    
    With this the previous setup is back, i.e. tcp_diag can be built as a module,
    as dccp_diag and both share the infrastructure available in inet_diag.
    
    If one selects CONFIG_INET_DIAG as module CONFIG_INET_TCP_DIAG will also be
    built as a module, as will CONFIG_INET_DCCP_DIAG, if CONFIG_IP_DCCP was
    selected static or as a module, if CONFIG_INET_DIAG is y, being statically
    linked CONFIG_INET_TCP_DIAG will follow suit and CONFIG_INET_DCCP_DIAG will be
    built in the same manner as CONFIG_IP_DCCP.
    
    Now to aim at UDP, converting it to use inet_hashinfo, so that we can use
    iproute2 for UDP sockets as well.
    
    Ah, just to show an example of this new infrastructure working for DCCP :-)
    
    [root@qemu ~]# ./ss -dane
    State      Recv-Q Send-Q Local Address:Port  Peer Address:Port
    LISTEN     0      0                  *:5001             *:*     ino:942 sk:cfd503a0
    ESTAB      0      0          127.0.0.1:5001     127.0.0.1:32770 ino:943 sk:cfd50a60
    ESTAB      0      0          127.0.0.1:32770    127.0.0.1:5001  ino:947 sk:cfd50700
    TIME-WAIT  0      0          127.0.0.1:32769    127.0.0.1:5001  timer:(timewait,3.430ms,0) ino:0 sk:cf209620
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8c2190ee7da1a1dc68ff1a6b5f03feb61e523a5
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 12:56:38 2005 -0300

    [INET_DIAG]: Rename tcp_diag.[ch] to inet_diag.[ch]
    
    Next changeset will introduce net/ipv4/tcp_diag.c, moving the code that was put
    transitioanlly in inet_diag.c.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73c1f4a033675f168df7e98bbeeafca3c644b8a6
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 12:51:49 2005 -0300

    [TCPDIAG]: Just rename everything to inet_diag
    
    Next changeset will rename tcp_diag.[ch] to inet_diag.[ch].
    
    I'm taking this longer route so as to easy review, making clear the changes
    made all along the way.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4f5736c4c7cf6f9bd8db82b712cfdd51c87e06b9
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 09:27:49 2005 -0300

    [TCPDIAG]: Introduce inet_diag_{register,unregister}
    
    Next changeset will rename tcp_diag to inet_diag and move the tcp_diag code out
    of it and into a new tcp_diag.c, similar to the net/dccp/diag.c introduced in
    this changeset, completing the transition to a generic inet_diag
    infrastructure.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5324a040ccc708998e61ea93e669b81312f0ae11
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 09:26:18 2005 -0300

    [INET6_HASHTABLES]: Move inet6_lookup functions to net/ipv6/inet6_hashtables.c
    
    Doing this we allow tcp_diag to support IPV6 even if tcp_diag is compiled
    statically and IPV6 is compiled as a module, removing the previous restriction
    while not building any IPV6 code if it is not selected.
    
    Now to work on the tcpdiag_register infrastructure and then to rename the whole
    thing to inetdiag, reflecting its by then completely generic nature.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 505cbfc577f3fa778005e2800b869eca25727d5f
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Fri Aug 12 09:19:38 2005 -0300

    [IPV6]: Generalise the tcp_v6_lookup routines
    
    In the same way as was done with the v4 counterparts, this will be moved
    to inet6_hashtables.c.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b766b305d3f2d8be173e5d9853534ea1afdbabba
Author: Harald Welte <laforge@netfilter.org>
Date:   Fri Aug 12 11:36:44 2005 -0700

    [NETFILTER]: Fix gcc-3.4.x warning about iplicit operator precedence
    
    Fix gcc-3.4.x warning about iplicit operator precedence in NF_QUEUE_NR()
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0a242efc4fb859b2da506cdf8f3366231602e4ff
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Thu Aug 11 15:32:53 2005 -0700

    [NET]: Deinline netif_carrier_{on,off}().
    
    # grep -r 'netif_carrier_o[nf]' linux-2.6.12 | wc -l
    246
    
    # size vmlinux.org vmlinux.carrier
    text    data     bss     dec     hex filename
    4339634 1054414  259296 5653344  564360 vmlinux.org
    4337710 1054414  259296 5651420  563bdc vmlinux.carrier
    
    And this ain't an allyesconfig kernel!
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5917ed961def82a4dba9198d11a75f79d115a8cb
Author: Harald Welte <laforge@netfilter.org>
Date:   Thu Aug 11 15:31:15 2005 -0700

    [NETFILTER]: Fix NF_QUEUE_NR() macro
    
    I obviously wanted to use bitwise-or, not logical or.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 622439270c74f3ad4f69d1417aca4bb3b79514f4
Author: Harald Welte <laforge@netfilter.org>
Date:   Thu Aug 11 15:30:45 2005 -0700

    [NETFILTER]: Fix compilation when no PROC_FS enabled
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e41aac41e3856c87fee52c5b8bca71705d15449b
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Thu Aug 11 14:37:16 2005 -0700

    [TCPDIAG]: Introduce CONFIG_IP_TCPDIAG_DCCP
    
    Similar to CONFIG_IP_TCPDIAG_IPV6
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 14ab9b867aa6c107b4886bdc5b23f277ab10792e
Author: Peter Hagervall <hager@cs.umu.se>
Date:   Wed Aug 10 14:18:16 2005 -0700

    [BNX2]: Possible sparse fixes, take two
    
    This patch contains the following possible cleanups/fixes:
    
    - use C99 struct initializers
    - make a few arrays and structs static
    - remove a few uses of literal 0 as NULL pointer
    - use convenience function instead of cast+dereference in bnx2_ioctl()
    - remove superfluous casts to u8 * in calls to readl/writel
    
    Signed-off-by: Peter Hagervall <hager@cs.umu.se>
    Acked-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 07dc3f0718d2c88c3094a0aadeeb4744effc5439
Author: Benjamin LaHaise <bcrl@linux.intel.com>
Date:   Wed Aug 10 14:16:04 2005 -0700

    [NET]: Make use of ->private_data in sockfd_lookup
    
    Please consider the patch below which makes use of file->private_data to
    store the pointer to the socket, which avoids touching several unused
    cachelines in the dentry and inode in sockfd_lookup.
    
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cef07fd6029c20f95571d09cefce45ee3276a920
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Wed Aug 10 13:29:27 2005 -0300

    [CCID3]: Ditch USEC_IN_SEC as time.h has USEC_PER_SEC
    
    That is equivalent, no need to have a private one.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 8c60f3fab55712f23f2bd557ceedfbb00c649f37
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Wed Aug 10 12:59:38 2005 -0300

    [CCID3]: Separate most of the packet history code
    
    This also changes the list_for_each_entry_safe_continue behaviour to match its
    kerneldoc comment, that is, to start after the pos passed.
    
    Also adds several helper functions from previously open coded fragments, making
    the code more clear.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>

commit 540722ffc3a0d7e11d97a13e1ce6f3bc23b061c1
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Wed Aug 10 05:54:28 2005 -0300

    [TCPDIAG]: Implement cheapest way of supporting DCCPDIAG_GETSOCK
    
    With ugly ifdefs, etc, but this actually:
    
    1. keeps the existing ABI, i.e. no need to recompile the iproute2
       utilities if not interested in DCCP.
    
    2. Provides all the tcp_diag functionality in DCCP, with just a
       small patch that makes iproute2 support DCCP.
    
    Of course I'll get this cleaned-up in time, but for now I think its
    OK to be this way to quickly get this functionality.
    
    iproute2-ss050808 patch at:
    
    http://vger.kernel.org/~acme/iproute2-ss050808.dccp.patch
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6687e988d9aeaccad6774e6a8304f681f3ec0a03
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Wed Aug 10 04:03:31 2005 -0300

    [ICSK]: Move TCP congestion avoidance members to icsk
    
    This changeset basically moves tcp_sk()->{ca_ops,ca_state,etc} to inet_csk(),
    minimal renaming/moving done in this changeset to ease review.
    
    Most of it is just changes of struct tcp_sock * to struct sock * parameters.
    
    With this we move to a state closer to two interesting goals:
    
    1. Generalisation of net/ipv4/tcp_diag.c, becoming inet_diag.c, being used
       for any INET transport protocol that has struct inet_hashinfo and are
       derived from struct inet_connection_sock. Keeps the userspace API, that will
       just not display DCCP sockets, while newer versions of tools can support
       DCCP.
    
    2. INET generic transport pluggable Congestion Avoidance infrastructure, using
       the current TCP CA infrastructure with DCCP.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64ce207306debd7157f47282be94770407bec01c
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 20:50:53 2005 -0700

    [NET]: Make NETDEBUG pure printk wrappers
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64cf1e5d8b5f88d56509260e08fa0d8314277350
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 9 20:45:21 2005 -0700

    [DCCP]: Finish the TIMEWAIT minisock support
    
    Using most of the infrastructure TCP uses, with a dccp_death_row,
    etc. As per my current interpretation of the draft what we have with
    this changeset seems to be all we need (or very close to it 8)).
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 696ab2d3bffc746fb8cf3712f066d42b9886aeed
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 9 20:45:03 2005 -0700

    [TIMEWAIT]: Move inet_timewait_death_row routines to net/ipv4/inet_timewait_sock.c
    
    Also export the ones that will be used in the next changeset, when
    DCCP uses this infrastructure.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 295ff7edb8f72b77d524759266f7524deae379b3
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 9 20:44:40 2005 -0700

    [TIMEWAIT]: Introduce inet_timewait_death_row
    
    That groups all of the tables and variables associated to the TCP timewait
    schedulling/recycling/killing code, that now can be isolated from the TCP
    specific code and used by other transport protocols, such as DCCP.
    
    Next changeset will move this code to net/ipv4/inet_timewait_sock.c
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b4e03bf0bc43ad6250a1e2fa25fc3eb2b028977
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 9 20:31:11 2005 -0700

    [DCCP]: Initialize icsk_rto in dccp_v4_init_sock
    
    Fixes nasty bug related to the retransmit timer (yeah, DCCP does
    retransmits) firing too early.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 27258ee54f8cd4a43d09319aa5448145afc2cb8d
Author: Arnaldo Carvalho de Melo <acme@mandriva.com>
Date:   Tue Aug 9 20:30:56 2005 -0700

    [DCCP]: Introduce dccp_write_xmit from code in dccp_sendmsg
    
    This way it gets closer to the TCP flow, where congestion window
    checks are done, it seems we can map ccid_hc_tx_send_packet in
    dccp_write_xmit to tcp_snd_wnd_test in tcp_write_xmit, a CCID2
    decision should just fit in here as well...
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d48d93947dd9ea21c5cdc76a8581b06a4a39281
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Aug 9 20:30:28 2005 -0700

    [Bluetooth]: Move packet type into the SKB control buffer
    
    This patch moves the usage of packet type into the SKB control
    buffer. After this patch it is now possible to shrink the sk_buff
    structure and redefine its pkt_type.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2eb25a6c34504254760e67172f7518d6bfdd7676
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Tue Aug 9 20:29:11 2005 -0700

    [Bluetooth]: Fix sparse warnings (__nocast type)
    
    This patch fixes the sparse warnings "implicit cast to nocast type"
    for the priority or gfp_mask parameters of the memory allocations.
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a5e903c09aed19ca4a1bb26d87b8d6461a93818
Author: J. Suter <jsuter@hardwave.de>
Date:   Tue Aug 9 20:28:46 2005 -0700

    [Bluetooth]: Implement RFCOMM remote port negotiation
    
    This patch implements the remote port negotiation (RPN) of the RFCOMM
    protocol for Bluetooth.
    
    Signed-off-by: J. Suter <jsuter@hardwave.de>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b9eb9e2099f6f4acd6a36bcd7820d27c3cf5ee3
Author: Timo Teras <ext-timo.teras@nokia.com>
Date:   Tue Aug 9 20:28:21 2005 -0700

    [Bluetooth]: Call tty_hangup() when DCD is de-asserted
    
    The RFCOMM layer does not handle properly the de-assertation
    of CD signal. It should call tty_hangup() to work properly.
    
    Signed-off-by: Timo Teras <ext-timo.teras@nokia.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85a1e930bf628700e8e9c166b1f5c1c26d3651cc
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Aug 9 20:28:02 2005 -0700

    [Bluetooth]: Track page scan repetition mode changes
    
    The HCI page scan repetition mode change event contains the actual
    page scan repetition mode for the remote device. It is the same
    value that is received from an inquiry response and it can be used
    to make further reconnections faster.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 45bb4bf08b9c16122af84d3f26a018c8022b24e5
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Aug 9 20:27:49 2005 -0700

    [Bluetooth]: Workaround for inquiry results with RSSI and page scan mode
    
    This patch implements a workaround for buggy Bluetooth 1.2 devices from
    Silicon Wave. Their inquiry results with RSSI contain the page scan mode
    field. This field was removed in the final Bluetooth 1.2 specification.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4aa769b99724953a6f322c648c0cfbe8c6616382
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Aug 9 20:27:37 2005 -0700

    [Bluetooth]: Update and cleanup of the virtual HCI driver
    
    This patch cleans up the virtual HCI driver. It also adds support for
    the dynamic minor device number allocation.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6ccf55419c4f0021e7382f000f2fd14a29f3d3c
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 20:27:14 2005 -0700

    [DCCP]: Fix u64 printf format warnings.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d3de414eb20d937d82c5219fd13ee4cedc499cb
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:26:55 2005 -0700

    [NETFILTER]: New iptables DCCP protocol header match
    
    Using this new iptables DCCP protocol header match, it is possible to
    create simplistic stateless packet filtering rules for DCCP.  It
    permits matching of port numbers, packet type and options.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e2e268665f6c01686b477a6b0cc5a70bab689d54
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:26:28 2005 -0700

    [DCCP]: Fix struct sockaddr_dccp definition
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5a47a470e602eecb168ddd3b78841b84ceddd319
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:26:03 2005 -0700

    [DCCP]: make <linux/dccp.h> include-able from userspace
    
    The protocol header files in <linux/foo.h> are usually structured in a
    way to be included by userspace code.  The top section consists of
    general protocol structure definitions, typedefs, enums - followed by
    an #ifdef __KERNEL__ section.
    
    Currently <linux/dccp.h> doesn't follow that convention and can
    therefore not be used from userspace.  However, for example iptables'
    libipt_dccp.c actually needs various definitions from there.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb435b8d816582064ee0ddb1e2a6fbca67f34108
Author: Stephen Hemmigner <shemminger@osdl.org>
Date:   Tue Aug 9 20:25:39 2005 -0700

    [IPV4]: fib_trie: Use const
    
    Use const where possible and get rid of EXTRACT() macro
    that was never used.
    
    Signed-off-by: Stephen Hemmigner <shemminger@osdl.org>
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f80b3c8262d0d646812f776db024d88d569a0c1
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Tue Aug 9 20:25:06 2005 -0700

    [IPV4]: fib_trie: Use ERR_PTR to handle errno return
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91b9a277fc4d207249e459a455abf804ebb5499d
Author: Olof Johansson <olof@lixom.net>
Date:   Tue Aug 9 20:24:39 2005 -0700

    [IPV4]: FIB Trie cleanups.
    
    Below is a patch that cleans up some of this, supposedly without
    changing any behaviour:
    
    * Whitespace cleanups
    * Introduce DBG()
    * BUG_ON() instead of if () { BUG(); }
    * Remove some of the deep nesting to make the code flow more
      comprehensible
    * Some mask operations were simplified
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7663f18807805f02608457af8e2f59eee5d910fd
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Tue Aug 9 20:24:15 2005 -0700

    [NETFILTER]: return ENOMEM when ip_conntrack_alloc() fails.
    
    This patch fixes the bug which doesn't return ERR_PTR(-ENOMEM) if it
    failed to allocate memory space from slab cache.  This bug leads to
    erroneously not dropped packets under stress, and wrong statistic
    counters ('invalid' is incremented instead of 'drop').  It was
    introduced during the ctnetlink merge in the net-2.6.14 tree, so no
    stable or mainline releases affected.
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a61fadb3908454ccfa538aaa75eb1d22def5700
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:23:53 2005 -0700

    [NETFILTER]: check nf_log function call arguments
    
    Check whether pf is too large in order to prevent array overflow.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d72367b6f36e557f122beefaa8c6b80eb1c7f245
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:23:36 2005 -0700

    [NETFILTER]: more verbose return codes from nf_{log,queue}
    
    This adds EEXIST to distinguish between the following return values:
    0: 	nobody was registered, registration successful
    EEXIST:	the exact same handler was already registered, no registration
    	required
    EBUSY:	somebody else is registered, registration unsuccessful.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bbd86b9fc469b7e91dc7444e6abb8930811d79cb
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:23:11 2005 -0700

    [NETFILTER]: add /proc/net/netfilter interface to nf_queue
    
    This patch adds a /proc/net/netfilter/nf_queue file, similar to the
    recently-added /proc/net/netfilter/nf_log.  It indicates which queue
    handler is registered to which protocol family.  This is useful since
    there are now multiple queue handlers in the treee (ip[6]_queue,
    nfnetlink_queue).
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fbcd923c3e0c8ec9e4ed64f5a4e5766807b32729
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:22:10 2005 -0700

    [NETFILTER]: add correct bridging support to nfnetlink_{queue,log}
    
    This patch adds support for passing the real 'physical' device ifindex
    down to userspace via nfnetlink_log and nfnetlink_queue.
    
    This feature basically obsoletes net/bridge/netfilter/ebt_ulog.c, and
    it is likely ebt_ulog.c will die with one of the next couple of
    patches.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6ebe77f955d77a988ce726f0818ec0103b11323
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:21:49 2005 -0700

    [NETFILTER]: split net/core/netfilter.c into net/netfilter/*.c
    
    This patch doesn't introduce any code changes, but merely splits the
    core netfilter code into four separate files.  It also moves it from
    it's old location in net/core/ to the recently-created net/netfilter/
    directory.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 210a9ebef2d1bd32d9e9d81c84d538e237769cdb
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:20:54 2005 -0700

    [NETFILTER]: ip{6}_queue: prevent unregistration race with nfnetlink_queue
    
    Since nfnetlink_queue can override ip{6}_queue as queue handlers, we
    can no longer blindly unregister whoever is registered for PF_INET[6],
    but only unregister ourselves.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f682faefb8c6045468c4cf0fe435128352683c22
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:20:34 2005 -0700

    [NETFILTER]: fix autoloading of nfnetlink_log
    
    This patch adds the MODULE_ALIAS required for netnlink autoloading of
    nfnetlink_log.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91483c4b711549bff5e9069e25c4c1400b135198
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Aug 9 20:20:07 2005 -0700

    [SUNRPC]: svcsock.c needs linux/tcp.h
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2669d63d20683828f673b606915957f3a070602d
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:19:44 2005 -0700

    [NETFILTER]: move conntrack helper buffers from BSS to kmalloc()ed memory
    
    According to DaveM, it is preferrable to have large data structures be
    allocated dynamically from the module init() function rather than
    putting them as static global variables into BSS.
    
    This patch moves the conntrack helper packet buffers into dynamically
    allocated memory.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb97d31f5130d677644d9931ef38613d1164ec94
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:19:14 2005 -0700

    [INET]: Make inet_create try to load protocol modules
    
    Syntax is net-pf-PROTOCOL_FAMILY-PROTOCOL-SOCK_TYPE and if this
    fails net-pf-PROTOCOL_FAMILY-PROTOCOL.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 087fe256f0aef8d16b19a30c6fb10b899bf1a701
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:17:41 2005 -0700

    [TG3]: Fix bug in setting a tg3_flag
    
    Found a bug while reviewing the patches the second time.
    
    The TG3_FLAG_TXD_MBOX_HWBUG flag is set after the register access
    methods have been determined. This patch fixes it by moving it up before
    the various access methods are assigned.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15f5a585c6b8dac31ed0a55693aacf51934f0f5d
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:17:28 2005 -0700

    [TG3]: Eliminate one register write in tg3_restart_ints()
    
    The register write to register 0x68 to restart interrupts is unnecessary
    as the interrupt wasn't masked in that register by the irq handler. This
    will save one register write in the fast path.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6892914fb7980d844f2bac859f4095df9ebd18da
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:17:14 2005 -0700

    [TG3]: Add indirect register method for 5703 behind ICH
    
    This patch adds the new workaround for 5703 A1/A2 if it is behind
    certain ICH bridges. The workaround disables memory and uses config.
    cycles only to access all registers. The 5702/03 chips can mistakenly
    decode the special cycles from the ICH chipsets as memory write cycles,
    causing corruption of register and memory space. Only certain ICH
    bridges will drive special cycles with non-zero data during the address
    phase which can fall within the 5703's address range. This is not an ICH
    bug as the PCI spec allows non-zero address during special cycles.
    However, only these ICH bridges are known to drive non-zero addresses
    during special cycles.
    
    The indirect_lock is also changed to spin_lock_irqsave from spin_lock_bh
    because it is used in irq handler when using the indirect method to
    disable interrupts.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 09ee929cccfd0b56ea3724b3c6299fbbe813df43
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:17:00 2005 -0700

    [TG3]: Add mailbox read method
    
    This patch adds the mailbox read method and also adds an inline function
    tw32_mailbox_f() for mailbox writes that require read flush.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 329058028523a5b36de449f130111b7671a4f269
Merge: bcdd3a9... 1b66776...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 15:50:32 2005 -0700

    Pull rationalise-regions into release branch

commit 1ee582d8e49a1c9dd43b2599f1cd26507182a8d4
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:16:46 2005 -0700

    [TG3]: Add various register methods
    
    This patch adds various dedicated register read/write methods for the
    existing workarounds, including PCIX target workaround, write with read
    flush, etc. The chips that require these workarounds will use these
    dedicated access functions.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2009493065e01b1fe27c1b98ffbcfab98e185f72
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 9 20:16:32 2005 -0700

    [TG3]: Add basic register access function pointers
    
    This patch adds the basic function pointers to do register accesses in
    the fast path. This was suggested by David Miller. The idea is that
    various register access methods for different hardware errata can easily
    be implemented with these function pointers and performance will not be
    degraded on chips that use normal register access methods.
    
    The various register read write macros (e.g. tw32, tr32, tw32_mailbox)
    are redefined to call the function pointers.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 757f612e091e7d13707eedc3ff71f1a9b53f5537
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:16:04 2005 -0700

    [CCID3]: Reenable list_for_each_entry_safe_continue usage
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 74459dc7bacda04d14626d239c8f5c4dac22560d
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:15:51 2005 -0700

    [LIST]: Introduce list_for_each_entry_safe_continue
    
    Used in the dccp CCID3 code, that is going to be submitted RSN.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95b81ef794278c835b321f6376b0522cd5df59b7
Author: Yoshifumi Nishida <nishida@csl.sony.co.jp>
Date:   Tue Aug 9 20:15:35 2005 -0700

    [DCCP]: Fix checksum routines
    
    Signed-off-by: Yoshifumi Nishida <nishida@csl.sony.co.jp>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a019d6fe2b9da68ea4ba6cf3c4e86fc1dbf554c3
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:15:09 2005 -0700

    [ICSK]: Move generalised functions from tcp to inet_connection_sock
    
    This also improves reqsk_queue_prune and renames it to
    inet_csk_reqsk_queue_prune, as it deals with both inet_connection_sock
    and inet_request_sock objects, not just with request_sock ones thus
    belonging to inet_request_sock.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c657876b63cb1d8a2ec06f8fc6c37bb8412e66c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:14:34 2005 -0700

    [DCCP]: Initial implementation
    
    Development to this point was done on a subversion repository at:
    
    http://oops.ghostprotocols.net:81/cgi-bin/viewcvs.cgi/dccp-2.6/
    
    This repository will be kept at this site for the foreseable future,
    so that interested parties can see the history of this code,
    attributions, etc.
    
    If I ever decide to take this offline I'll provide the full history at
    some other suitable place.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4365c9235f80128c3c3d5993074173941b1c1f0
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:12:30 2005 -0700

    [RANDOM]: Introduce secure_dccp_sequence_number
    
    Code contributed by Stephen Hemminger.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8c97a9451068dd9f7b838a240bb6db894133a5e
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:12:12 2005 -0700

    [NET]: Export symbols needed by the current DCCP code
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 295f7324ff8d9ea58b4d3ec93b1aaa1d80e048a9
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:11:56 2005 -0700

    [ICSK]: Introduce reqsk_queue_prune from code in tcp_synack_timer
    
    With this we're very close to getting all of the current TCP
    refactorings in my dccp-2.6 tree merged, next changeset will export
    some functions needed by the current DCCP code and then dccp-2.6.git
    will be born!
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0a5578cf8e5e045aaa68643c17ce885426697c6b
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:11:41 2005 -0700

    [ICSK]: Generalise tcp_listen_{start,stop}
    
    This also moved inet_iif from tcp to inet_hashtables.h, as it is
    needed by the inet_lookup callers, perhaps this needs a bit of
    polishing, but for now seems fine.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f1d2604c71498579609b1532fedc5a89276bb00
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:11:24 2005 -0700

    [ICSK]: Introduce inet_csk_clone
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3f421baa4720b708022f8bcc52a61e5cd6f10bf8
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:11:08 2005 -0700

    [NET]: Just move the inet_connection_sock function from tcp sources
    
    Completing the previous changeset, this also generalises tcp_v4_synq_add,
    renaming it to inet_csk_reqsk_queue_hash_add, already geing used in the
    DCCP tree, which I plan to merge RSN.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bcdd3a911499abd65bf1f123b2a6ad9c1d5611ea
Merge: b946ecb... d1e079b...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 15:48:51 2005 -0700

    Pull ngam-maule-steiner into release branch

commit b946ecbb11145ae2f375d2d7289a6e7280462b02
Merge: 7115c13... f8220c7...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 15:48:23 2005 -0700

    Pull pending-2.6.14 into release branch

commit 463c84b97f24010a67cd871746d6a7e4c925a5f9
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:10:42 2005 -0700

    [NET]: Introduce inet_connection_sock
    
    This creates struct inet_connection_sock, moving members out of struct
    tcp_sock that are shareable with other INET connection oriented
    protocols, such as DCCP, that in my private tree already uses most of
    these members.
    
    The functions that operate on these members were renamed, using a
    inet_csk_ prefix while not being moved yet to a new file, so as to
    ease the review of these changes.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87d11ceb9deb7a3f13fdee6e89d9bb6be7d27a71
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:10:12 2005 -0700

    [SOCK]: Introduce sk_clone
    
    Out of tcp_create_openreq_child, will be used in
    dccp_create_openreq_child, and is a nice sock function anyway.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c676270bcd25015b978722ec0352c330dcc87883
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:09:59 2005 -0700

    [INET_TWSK]: Introduce inet_twsk_alloc
    
    With the parts of tcp_time_wait that are not TCP specific, tcp_time_wait uses
    it and so will dccp_time_wait.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e48c414ee61f4ac8d5cff2973e66a7cbc8a93aa5
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:09:46 2005 -0700

    [INET]: Generalise the TCP sock ID lookup routines
    
    And also some TIME_WAIT functions.
    
    [acme@toy net-2.6.14]$ grep built-in /tmp/before.size /tmp/after.size
    /tmp/before.size: 282955   13122    9312  305389   4a8ed net/ipv4/built-in.o
    /tmp/after.size:  281566   13122    9312  304000   4a380 net/ipv4/built-in.o
    [acme@toy net-2.6.14]$
    
    I kept them still inlined, will uninline at some point to see what
    would be the performance difference.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8feaf0c0a5488b3d898a9c207eb6678f44ba3f26
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:09:30 2005 -0700

    [INET]: Generalise tcp_tw_bucket, aka TIME_WAIT sockets
    
    This paves the way to generalise the rest of the sock ID lookup
    routines and saves some bytes in TCPv4 TIME_WAIT sockets on distro
    kernels (where IPv6 is always built as a module):
    
    [root@qemu ~]# grep tw_sock /proc/slabinfo
    tw_sock_TCPv6  0  0  128  31  1
    tw_sock_TCP    0  0   96  41  1
    [root@qemu ~]#
    
    Now if a protocol wants to use the TIME_WAIT generic infrastructure it
    only has to set the sk_prot->twsk_obj_size field with the size of its
    inet_timewait_sock derived sock and proto_register will create
    sk_prot->twsk_slab, for now its only for INET sockets, but we can
    introduce timewait_sock later if some non INET transport protocolo
    wants to use this stuff.
    
    Next changesets will take advantage of this new infrastructure to
    generalise even more TCP code.
    
    [acme@toy net-2.6.14]$ grep built-in /tmp/before.size /tmp/after.size
    /tmp/before.size: 188646   11764    5068  205478   322a6 net/ipv4/built-in.o
    /tmp/after.size:  188144   11764    5068  204976   320b0 net/ipv4/built-in.o
    [acme@toy net-2.6.14]$
    
    Tested with both IPv4 & IPv6 (::1 (localhost) & ::ffff:172.20.0.1
    (qemu host)).
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 33b62231908c58ae04185e4f1063d1e35a7c8576
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:09:06 2005 -0700

    [INET]: Generalise tcp_v4_lookup_listener
    
    [acme@toy net-2.6.14]$ grep built-in /tmp/before /tmp/after
    /tmp/before: 282560       13122    9312  304994   4a762 net/ipv4/built-in.o
    /tmp/after:  282560       13122    9312  304994   4a762 net/ipv4/built-in.o
    
    Will be used in DCCP, not exporting it right now not to get in Adrian
    Bunk's exported-but-not-used-on-modules radar 8)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81849d106b1fb97f8e2d311c0c4d36347def55b8
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:08:50 2005 -0700

    [INET]: Generalise tcp_v4_hash & tcp_unhash
    
    It really just makes the existing code be a helper function that
    tcp_v4_hash and tcp_unhash uses, specifying the right inet_hashinfo,
    tcp_hashinfo.
    
    One thing I'll investigate at some point is to have the inet_hashinfo
    pointer in sk_prot, so that we get all the hashtable information from
    the sk pointer, this can lead to some extra indirections that may well
    hurt performance/code size, we'll see. Ultimate idea would be that
    sk_prot would provide _all_ the information about a protocol
    implementation.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c752f0739f09b803aed191c4765a3b6650a08653
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:08:28 2005 -0700

    [TCP]: Move the tcp sock states to net/tcp_states.h
    
    Lots of places just needs the states, not even linux/tcp.h, where this
    enum was, needs it.
    
    This speeds up development of the refactorings as less sources are
    rebuilt when things get moved from net/tcp.h.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f3f05f7046e7c85b04af390d95a82a27160dd5d0
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:08:09 2005 -0700

    [INET]: Generalise the tcp_listen_ lock routines
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e04e02165a7209a71db553b7bc48d68421e5ebf
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:07:35 2005 -0700

    [INET]: Move tcp_port_rover to inet_hashinfo
    
    Also expose all of the tcp_hashinfo members, i.e. killing those
    tcp_ehash, etc macros, this will more clearly expose already generic
    functions and some that need just a bit of work to become generic, as
    we'll see in the upcoming changesets.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2d8c4ce51903636ce0f60addc8134aa50ab8fa76
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:07:13 2005 -0700

    [INET]: Generalise tcp_bind_hash & tcp_inherit_port
    
    This required moving tcp_bucket_cachep to inet_hashinfo.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff21d5774b4a186c98be6398eacde75d896db804
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Tue Aug 9 20:06:42 2005 -0700

    [NETFILTER]: fix list traversal order in ctnetlink
    
    Currently conntracks are inserted after the head. That means that
    conntracks are sorted from the biggest to the smallest id. This happens
    because we use list_prepend (list_add) instead list_add_tail. This can
    result in problems during the list iteration.
    
                     list_for_each(i, &ip_conntrack_hash[cb->args[0]]) {
                             h = (struct ip_conntrack_tuple_hash *) i;
                             if (DIRECTION(h) != IP_CT_DIR_ORIGINAL)
                                     continue;
                             ct = tuplehash_to_ctrack(h);
                             if (ct->id <= *id)
                                     continue;
    
    In that case just the first conntrack in the bucket will be dumped. To
    fix this, we iterate the list from the tail to the head via
    list_for_each_prev. Same thing for the list of expectations.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 28b19d99ac6d92e4fb2fe34144c495019a638a64
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Tue Aug 9 20:06:27 2005 -0700

    [NETFILTER]: Fix typo in ctnl_exp_cb array (no bug, just memory waste)
    
    This fixes the size of the ctnl_exp_cb array that is IPCTNL_MSG_EXP_MAX
    instead of IPCTNL_MSG_MAX. Simple typo.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37012f7fd326eb3c959428a4fe7e203e6304fe43
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Tue Aug 9 20:06:11 2005 -0700

    [NETFILTER]: fix conntrack refcount leak in unlink_expect()
    
    In unlink_expect(), the expectation is removed from the list so the
    refcount must be dropped as well.
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 14a50bbaa51202b676a95e9b41bc5ed6c77aa9cc
Author: Pablo Neira Ayuso <pablo@eurodev.net>
Date:   Tue Aug 9 20:05:52 2005 -0700

    [NETFILTER]: ctnetlink: make sure event order is correct
    
    The following sequence is displayed during events dumping of an ICMP
    connection: [NEW] [DESTROY] [UPDATE]
    
    This happens because the event IPCT_DESTROY is delivered in
    death_by_timeout(), that is called from the icmp protocol helper
    (ct->timeout.function) once we see the reply.
    
    To fix this, we move this event to destroy_conntrack().
    
    Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1444fc559b01aa5d4fedf4ee4f306a9e9cd56f95
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:04:07 2005 -0700

    [NETFILTER]: don't use nested attributes for conntrack_expect
    
    We used to use nested nfattr structures for ip_conntrack_expect.  This is
    bogus, since ip_conntrack and ip_conntrack_expect are communicated in
    different netlink message types.  both should be encoded at the top level
    attributes, no extra nesting required.  This patch addresses the issue.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a42827b71b87fc9816d2f58626e825b0eb500efe
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:03:54 2005 -0700

    [NETFILTER]: cleanup nfnetlink_check_attributes()
    
    1) memset return parameter 'cda' (nfattr pointer array) only on success
    2) a message without attributes and just a 'struct nfgenmsg' is valid,
       don't return -EINVAL
    3) use likely() and unlikely() where apropriate
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 927ccbcc28dceee29dad876982768cca29738564
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:03:40 2005 -0700

    [NETFILTER]: attribute count is an attribute of message type, not subsytem
    
    Prior to this patch, every nfnetlink subsystem had to specify it's
    attribute count.  However, in reality the attribute count depends on
    the message type within the subsystem, not the subsystem itself.  This
    patch moves 'attr_count' from 'struct nfnetlink_subsys' into
    nfnl_callback to fix this.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bd9a26b7f2ee7567571bb5b7acc1a256c544a0dd
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 20:03:22 2005 -0700

    [NETFILTER]: fix ctnetlink 'create_expect' parsing
    
    There was a stupid copy+paste mistake where we parse the MASK nfattr into
    the "tuple" variable instead of the "mask" variable.  This patch fixes it.
    Thanks to Pablo Neira.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88aa0429048d08c18f2772782588f953bbbd79be
Author: Pablo Neira <pablo@eurodev.net>
Date:   Tue Aug 9 20:02:55 2005 -0700

    [NETFILTER]: conntrack_netlink: Fix locking during conntrack_create
    
    The current codepath allowed for ip_conntrack_lock to be unlock'ed twice.
    
    Signed-off-by: Pablo Neira <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 94cd2b67641e7ddc2e6ed71d76e00116957423db
Author: Pablo Neira <pablo@eurodev.net>
Date:   Tue Aug 9 20:02:36 2005 -0700

    [NETFILTER]: remove bogus memset() calls from ip_conntrack_netlink.c
    
    nfattr_parse_nested() calls nfattr_parse() which in turn does a memset
    on the 'tb' array.  All callers therefore don't need to memset before
    calling it.
    
    Signed-off-by: Pablo Neira <pablo@eurodev.net>
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a86888b925299330053d20e0eba03ac4d2648c4b
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 20:02:13 2005 -0700

    [NETFILTER]: Fix multiple problems with the conntrack event cache
    
    refcnt underflow: the reference count is decremented when a conntrack
    entry is removed from the hash but it is not incremented when entering
    new entries.
    
    missing protection of process context against softirq context: all
    cache operations need to locally disable softirqs to avoid races.
    Additionally the event cache can't be initialized when a packet
    enteres the conntrack code but needs to be initialized whenever we
    cache an event and the stored conntrack entry doesn't match the
    current one.
    
    incorrect flushing of the event cache in ip_ct_iterate_cleanup:
    without real locking we can't flush the cache for different CPUs
    without incurring races. The cache for different CPUs can only be
    flushed when no packets are going through the
    code. ip_ct_iterate_cleanup doesn't need to drop all references, so
    flushing is moved to the cleanup path.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a55ebcc4c4532107ad9eee1c9bb698ab5f12c00f
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:01:14 2005 -0700

    [INET]: Move bind_hash from tcp_sk to inet_sk
    
    This should really be in a inet_connection_sock, but I'm leaving it
    for a later optimization, when some more fields common to INET
    transport protocols now in tcp_sk or inet_sk will be chunked out into
    inet_connection_sock, for now its better to concentrate on getting the
    changes in the core merged to leave the DCCP tree with only DCCP
    specific code.
    
    Next changesets will take advantage of this move to generalise things
    like tcp_bind_hash, tcp_put_port, tcp_inherit_port, making the later
    receive a inet_hashinfo parameter, and even __tcp_tw_hashdance, etc in
    the future, when tcp_tw_bucket gets transformed into the struct
    timewait_sock hierarchy.
    
    tcp_destroy_sock also is eligible as soon as tcp_orphan_count gets
    moved to sk_prot.
    
    A cascade of incremental changes will ultimately make the tcp_lookup
    functions be fully generic.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77d8bf9c6208eb535f05718168ffcc476be0ca8c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 20:00:51 2005 -0700

    [INET]: Move the TCP hashtable functions/structs to inet_hashtables.[ch]
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f7ff9274e72fd254fbd1ab117bbc1db6e7cdb34
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:59:44 2005 -0700

    [INET]: Just rename the TCP hashtable functions/structs to inet_
    
    This is to break down the complexity of the series of patches,
    making it very clear that this one just does:
    
    1. renames tcp_ prefixed hashtable functions and data structures that
       were already mostly generic to inet_ to share it with DCCP and
       other INET transport protocols.
    
    2. Removes not used functions (__tb_head & tb_head)
    
    3. Removes some leftover prototypes in the headers (tcp_bucket_unlock &
       tcp_v4_build_header)
    
    Next changesets will move tcp_sk(sk)->bind_hash to inet_sock so that we can
    make functions such as tcp_inherit_port, __tcp_inherit_port, tcp_v4_get_port,
    __tcp_put_port,  generic and get others like tcp_destroy_sock closer to generic
    (tcp_orphan_count will go to sk->sk_prot to allow this).
    
    Eventually most of these functions will be used passing the transport protocol
    inet_hashinfo structure.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 304a16180fb6d2b153b45f6fbbcec1fa814496e5
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:59:20 2005 -0700

    [INET]: Move the TCP ehash functions to include/net/inet_hashtables.h
    
    To be shared with DCCP (and others), this is the start of a series of patches
    that will expose the already generic TCP hash table routines.
    
    The few changes noticed when calling gcc -S before/after on a pentium4 were of
    this type:
    
            movl    40(%esp), %edx
            cmpl    %esi, 472(%edx)
            je      .L168
    -       pushl   $291
    +       pushl   $272
            pushl   $.LC0
            pushl   $.LC1
            pushl   $.LC2
    
    [acme@toy net-2.6.14]$ size net/ipv4/tcp_ipv4.before.o net/ipv4/tcp_ipv4.after.o
       text    data     bss     dec     hex filename
      17804     516     140   18460    481c net/ipv4/tcp_ipv4.before.o
      17804     516     140   18460    481c net/ipv4/tcp_ipv4.after.o
    
    Holler if some weird architecture has issues with things like this 8)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0597f2680d666a3bcf101ac0c771ba7e50016bbd
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:58:39 2005 -0700

    [NETFILTER]: Add new "nfnetlink_log" userspace packet logging facility
    
    This is a generic (layer3 independent) version of what ipt_ULOG is already
    doing for IPv4 today.  ipt_ULOG, ebt_ulog and finally also ip[6]t_LOG will
    be deprecated by this mechanism in the long term.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 608c8e4f7b6e61cc783283e9dff8a465a5ad59bb
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:58:27 2005 -0700

    [NETFILTER]: Extend netfilter logging API
    
    This patch is in preparation to nfnetlink_log:
    - loggers now have to register struct nf_logger instead of nf_logfn
    - nf_log_unregister() replaced by nf_log_unregister_pf() and
      nf_log_unregister_logger()
    - add comment to ip[6]t_LOG.h to assure nobody redefines flags
    - add /proc/net/netfilter/nf_log to tell user which logger is currently
      registered for which address family
    - if user has configured logging, but no logging backend (logger) is
      available, always spit a message to syslog, not just the first time.
    - split ip[6]t_LOG.c into two parts:
      Backend: Always try to register as logger for the respective address family
      Frontend: Always log via nf_log_packet() API
    - modify all users of nf_log_packet() to accomodate additional argument
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 838ab6364956d9bdcefe84712de1621cf20a40b3
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:50:45 2005 -0700

    [NETFILTER]: Add refcounting and /proc/net/netfilter interface to nfnetlink_queue
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 32519f11d38ea8f4f60896763bacec7db1760f9c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:50:02 2005 -0700

    [INET]: Introduce inet_sk_rebuild_header
    
    From tcp_v4_rebuild_header, that already was pretty generic, I only
    needed to use sk->sk_protocol instead of the hardcoded IPPROTO_TCP and
    establish the requirement that INET transport layer protocols that
    want to use this function map TCP_SYN_SENT to its equivalent state.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6cbb0df788b90777a7ed0f9d8261260353f48076
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:49:02 2005 -0700

    [SOCK]: Introduce sk_setup_caps
    
    From tcp_v4_setup_caps, that always is preceded by a call to
    __sk_dst_set, so coalesce this sequence into sk_setup_caps, removing
    one call to a TCP function in the IP layer.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 614c6cb4f225a7da9f13e5dd0fac3b531078eb9f
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:47:37 2005 -0700

    [SOCK]: Rename __tcp_v4_rehash to __sk_prot_rehash
    
    This operation was already generic and DCCP will use it.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6848976b721eeb5551cd94673faafeef78d9f35
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:45:38 2005 -0700

    [NET]: Cleanup INET_REFCNT_DEBUG code
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d13964f4490157b8a290903362bfbc54f750a6bc
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 19:45:02 2005 -0700

    [IPV4/6]: Check if packet was actually delivered to a raw socket to decide whether to send an ICMP unreachable
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0bd1b59b15e4057101c89d4db15a3683c0d897f7
Author: Andrew McDonald <andrew@mcdonald.org.uk>
Date:   Tue Aug 9 19:44:42 2005 -0700

    [IPV6]: Check interface bindings on IPv6 raw socket reception
    
    Take account of whether a socket is bound to a particular device when
    selecting an IPv6 raw socket to receive a packet. Also perform this
    check when receiving IPv6 packets with router alert options.
    
    Signed-off-by: Andrew McDonald <andrew@mcdonald.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7af4cc3fa158ff1dda6e7451c7e6afa6b0bb85cb
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:44:15 2005 -0700

    [NETFILTER]: Add "nfnetlink_queue" netfilter queue handler over nfnetlink
    
    - Add new nfnetlink_queue module
    - Add new ipt_NFQUEUE and ip6t_NFQUEUE modules to access queue numbers 1-65535
    - Mark ip_queue and ip6_queue Kconfig options as OBSOLETE
    - Update feature-removal-schedule to remove ip[6]_queue in December
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ab43f84995f2c2fcc5cc58a9accaa1095e1317f
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:43:44 2005 -0700

    [NETFILTER]: Core changes required by upcoming nfnetlink_queue code
    
    - split netfiler verdict in 16bit verdict and 16bit queue number
    - add 'queuenum' argument to nf_queue_outfn_t and its users ip[6]_queue
    - move NFNL_SUBSYS_ definitions from enum to #define
    - introduce autoloading for nfnetlink subsystem modules
    - add MODULE_ALIAS_NFNL_SUBSYS macro
    - add nf_unregister_queue_handlers() to register all handlers for a given
      nf_queue_outfn_t
    - add more verbose DEBUGP macro definition to nfnetlink.c
    - make nfnetlink_subsys_register fail if subsys already exists
    - add some more comments and debug statements to nfnetlink.c
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2cc7d5730957c4a3f3659d17d2ba5e06d5581c1f
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:42:34 2005 -0700

    [NETFILTER]: Move reroute-after-queue code up to the nf_queue layer.
    
    The rerouting functionality is required by the core, therefore it has
    to be implemented by the core and not in individual queue handlers.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4fdb3bb723db469717c6d38fda667d8b0fa86ebd
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:40:55 2005 -0700

    [NETLINK]: Add properly module refcounting for kernel netlink sockets.
    
    - Remove bogus code for compiling netlink as module
    - Add module refcounting support for modules implementing a netlink
      protocol
    - Add support for autoloading modules that implement a netlink protocol
      as soon as someone opens a socket for that protocol
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 020b4c12dbe3868d792a01d7c1470cd837abe10f
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:39:00 2005 -0700

    [NETFILTER]: Move ipv4 specific code from net/core/netfilter.c to net/ipv4/netfilter.c
    
    Netfilter cleanup
    - Move ipv4 code from net/core/netfilter.c to net/ipv4/netfilter.c
    - Move ipv6 netfilter code from net/ipv6/ip6_output.c to net/ipv6/netfilter.c
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 089af26c706d1473f641c909fee7c878d29c1f1a
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:37:23 2005 -0700

    [NETFILTER]: Rename skb_ip_make_writable() to skb_make_writable()
    
    There is nothing IPv4-specific in it.  In fact, it was already used by
    IPv6, too...  Upcoming nfnetlink_queue code will use it for any kind
    of packet.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 373ac73595491b7c1f2f10cb37e9b7bae6901227
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 19:36:53 2005 -0700

    [NETFILTER]: C99 initizalizers for NAT protocols
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 86e65da9c1fc6fb421b9f796b597b3eced6b55ab
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 19:36:29 2005 -0700

    [NET]: Remove explicit initializations of skb->input_dev
    
    Instead, set it in one place, namely the beginning of
    netif_receive_skb().
    
    Based upon suggestions from Jamal Hadi Salim.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0742fd53a3774781255bd1e471e7aa2e4a82d5f7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Aug 9 19:35:47 2005 -0700

    [IPV4]: possible cleanups
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - #if 0 the following unused global function:
      - xfrm4_state.c: xfrm4_state_fini
    - remove the following unneeded EXPORT_SYMBOL's:
      - ip_output.c: ip_finish_output
      - ip_output.c: sysctl_ip_default_ttl
      - fib_frontend.c: ip_dev_find
      - inetpeer.c: inet_peer_idlock
      - ip_options.c: ip_options_compile
      - ip_options.c: ip_options_undo
      - net/core/request_sock.c: sysctl_max_syn_backlog
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f2ccd8fa06c8e302116e71df372f5c1f83432e03
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 19:34:12 2005 -0700

    [NET]: Kill skb->real_dev
    
    Bonding just wants the device before the skb_bond()
    decapsulation occurs, so simply pass that original
    device into packet_type->func() as an argument.
    
    It remains to be seen whether we can use this same
    exact thing to get rid of skb->input_dev as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6b99eb5409d75ae35390057cd28f3aedfbd4cf4
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 19:33:51 2005 -0700

    [NET]: Reduce tc_index/tc_verd to u16
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83e3609eba3818f6e18b8bf9442195169ac306b7
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Aug 9 19:33:31 2005 -0700

    [REQSK]: Move the syn_table destroy from tcp_listen_stop to reqsk_queue_destroy
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 080774a243f56ce2195ace96fba3d18548ee48ce
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:32:58 2005 -0700

    [NETFILTER]: Add ctnetlink subsystem
    
    Add ctnetlink subsystem for userspace-access to ip_conntrack table.
    This allows reading and updating of existing entries, as well as
    creating new ones (and new expect's) via nfnetlink.
    
    Please note the 'strange' byte order: nfattr (tag+length) are in host
    byte order, while the payload is always guaranteed to be in network
    byte order.  This allows a simple userspace process to encapsulate netlink
    messages into arch-independent udp packets by just processing/swapping the
    headers and not knowing anything about the actual payload.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f1cf16582160c4839f05007c978743911aa022b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 9 19:31:17 2005 -0700

    [NET]: Remove HIPPI private from skbuff.h
    
    This removes the private element from skbuff, that is only used by
    HIPPI. Instead it uses skb->cb[] to hold the additional data that is
    needed in the output path from hard_header to device driver.
    
    PS: The only qdisc that might potentially corrupt this cb[] is if
    netem was used over HIPPI. I will take care of that by fixing netem
    to use skb->stamp. I don't expect many users of netem over HIPPI
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b0573dea1fb32ebc72ffa05980fd840df1d80860
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 19:30:51 2005 -0700

    [NET]: Introduce SO_{SND,RCV}BUFFORCE socket options
    
    Allows overriding of sysctl_{wmem,rmrm}_max
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f9e815b376dc19e6afc551cd755ac64e9e42d81f
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:30:24 2005 -0700

    [NETFITLER]: Add nfnetlink layer.
    
    Introduce "nfnetlink" (netfilter netlink) layer.  This layer is used as
    transport layer for all userspace communication of the new upcoming
    netfilter subsystems, such as ctnetlink, nfnetlink_queue and some day even
    the mythical pkttables ;)
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac3247baf8ecadf168642e3898b0212c29c79715
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:28:03 2005 -0700

    [NETFILTER]: connection tracking event notifiers
    
    This adds a notifier chain based event mechanism for ip_conntrack state
    changes.  As opposed to the previous implementations in patch-o-matic, we
    do no longer need a field in the skb to achieve this.
    
    Thanks to the valuable input from Patrick McHardy and Rusty on the idea
    of a per_cpu implementation.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abc3bc58047efa72ee9c2e208cbeb73d261ad703
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Aug 9 19:25:56 2005 -0700

    [NET]: Kill skb->tc_classid
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8728b834b226ffcf2c94a58530090e292af2a7bf
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Aug 9 19:25:21 2005 -0700

    [NET]: Kill skb->list
    
    Remove the "list" member of struct sk_buff, as it is entirely
    redundant.  All SKB list removal callers know which list the
    SKB is on, so storing this in sk_buff does nothing other than
    taking up some space.
    
    Two tricky bits were SCTP, which I took care of, and two ATM
    drivers which Francois Romieu <romieu@fr.zoreil.com> fixed
    up.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 6869c4d8e066e21623c812c448a05f1ed931c9c6
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:24:19 2005 -0700

    [NETFILTER]: reduce netfilter sk_buff enlargement
    
    As discussed at netconf'05, we're trying to save every bit in sk_buff.
    The patch below makes sk_buff 8 bytes smaller.  I did some basic
    testing on my notebook and it seems to work.
    
    The only real in-tree user of nfcache was IPVS, who only needs a
    single bit.  Unfortunately I couldn't find some other free bit in
    sk_buff to stuff that bit into, so I introduced a separate field for
    them.  Maybe the IPVS guys can resolve that to further save space.
    
    Initially I wanted to shrink pkt_type to three bits (PACKET_HOST and
    alike are only 6 values defined), but unfortunately the bluetooth code
    overloads pkt_type :(
    
    The conntrack-event-api (out-of-tree) uses nfcache, but Rusty just
    came up with a way how to do it without any skb fields, so it's safe
    to remove it.
    
    - remove all never-implemented 'nfcache' code
    - don't have ipvs code abuse 'nfcache' field. currently get's their own
      compile-conditional skb->ipvs_property field.  IPVS maintainers can
      decide to move this bit elswhere, but nfcache needs to die.
    - remove skb->nfcache field to save 4 bytes
    - move skb->nfctinfo into three unused bits to save further 4 bytes
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bf3a46aa9b96f6eb3a49a568f72a2801c3e830c0
Author: Harald Welte <laforge@netfilter.org>
Date:   Tue Aug 9 19:22:01 2005 -0700

    [NETFILTER]: convert nfmark and conntrack mark to 32bit
    
    As discussed at netconf'05, we convert nfmark and conntrack-mark to be
    32bits even on 64bit architectures.
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 083bc6b3c9b52b5998cc49d4aa2f8f15c2e84e6b
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Aug 29 22:54:53 2005 +0100

    [ARM] 2853/1: Make alloc_init_supersection() work with 36-bit mappings
    
    Patch from Deepak Saxena
    
    Working on adding support for 36-bit static mappings for ARMv6 and
    Intel's XSC3 core and noticed that alloc_init_supersection currently
    increments the phys addr by 1MB on each of the 16 iterations and then
    forces alignment to supersection size (16MB).  This is really uneeded
    b/c we have already forced the phys address to be 16MB aligned in
    create_mapping(). Furthermore, this breaks 36-bit addressing b/c bits
    [23:20] of the PMD contain bits [35:32] of the physical address and
    the masking causes us to loose those bits thus ending up with an
    incorrect virt -> phys translation.  The other option is to have an
    alloc_init_supersection36.
    Tested on Intel IXP2350 CPU with 36-bit static I/O mappings.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3e88a579d05e1bb6c51d88f0936e372895edb8ff
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Aug 29 22:46:33 2005 +0100

    [ARM] 2861/1: PXA: Add some extra pxa27x register definitions
    
    Patch from Richard Purdie
    
    Add some extra pxa27x register definitions needed for the Sharp
    SL-C3000 (Spitz).
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb85a502e0c2019d8bc302b011150bd62ecf70ab
Author: Nicolas Pitre <nico@cam.org>
Date:   Mon Aug 29 22:46:32 2005 +0100

    [ARM] 2858/1: ARM has sys_fadvise64_64 only
    
    Patch from Nicolas Pitre
    
    There is no need to define __ARCH_WANT_SYS_FADVISE64 on ARM since it
    only serves to compile in a compatibility wrapper for sys_fadvise64
    which never was tied to any syscall number.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 01b9c414828d951148a3792237ff3bf6e6debc85
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Aug 29 22:46:31 2005 +0100

    [ARM] 2856/1: S3C2440 - show DVS status at startup
    
    Patch from Ben Dooks
    
    Show the state of DVS (Dynamic Voltage Scaling) when
    starting up on the S3C2440
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d6b0bf213b4be478029b768fcee80058ace7150a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Aug 29 22:46:30 2005 +0100

    [ARM] 2855/1: S3C2410 - add CLKSLOW definitions, and show in init
    
    Patch from Ben Dooks
    
    Add the definitions for the S3C2410_CLKSLOW registers to
    the header files, and show the values when the system
    starts up
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bdf82b59c5dcf04bbdbd1938eefca14dd9cb44d3
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Aug 29 22:46:30 2005 +0100

    [ARM] 2836/1: Cleanup IXP4xx GPIO code
    
    Patch from Deepak Saxena
    
    This patch implements the set_irq_type() hooks for configuring GPIO
    IRQ type and updates all the platforms to use it instead of the
    gpio_line_config() function which is now used to configure input
    vs. output on the pins.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e605ecd7c8a38f65759c938a235a1b84f41a744e
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Aug 29 22:46:29 2005 +0100

    [ARM] 2834/1: Remove IXP4xx board-specific map_io routines
    
    Patch from Deepak Saxena
    
    None of the board-specific map_io routines do anything, so kill them.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7115c13bd6d166982212276610b27773b8c27aec
Merge: 7d2e423... 4db8699...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 14:15:10 2005 -0700

    Pull acpi-p-state into release branch

commit 7d2e423addf3054a3238347740df6f46d4d83f3d
Merge: 3ec8a77... a877bd3...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 14:14:40 2005 -0700

    Pull asm-segment into release branch

commit 3ec8a773d2775db86cc21d28b77bea29c8a1ea3c
Merge: 95ecc5e... e8579e7...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 14:14:18 2005 -0700

    Pull swiotlb-size into release branch

commit 95ecc5e5a3b20a3c76164d089c69051662e9d9b3
Merge: 87dbaaa... 1a402aa...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 14:13:49 2005 -0700

    Pull unaligned-snsc_event into release branch

commit 27a639a92d3289c4851105efcbc2f8b88969194f
Merge: d395bf1... bf4e70e...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 29 17:02:17 2005 -0400

    Auto-update from upstream

commit 8f3d17fb7bcb7c255197d11469fb5e9695c9d2f4
Merge: 4f07118... 70d374e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 13:54:35 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 39fbe47377062200acc26ea0ccef223b4399a82c
Merge: cfc4692... c1b054d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 16:53:08 2005 -0400

    /spare/repo/netdev-2.6 branch 'chelsio'

commit c1b054d03f5b31c33eaa0b267c629b118eaf3790
Merge: 559fb51... bf4e70e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 16:40:27 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 70d374ea9907036e15574a5ce89219edd5baee10
Merge: aa7e16d... bf4e70e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 15:59:42 2005 -0400

    Merge /spare/repo/linux-2.6/

commit cfc4692825ea4d932b94c0ec791f2f01d055b79f
Merge: 8aaf226... 611494d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 15:55:26 2005 -0400

    /spare/repo/netdev-2.6 branch 'e100'

commit 8aaf226a8eaa0823c4f3c58d5207004ff6e3e758
Merge: 1703ecc... 3690b6c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 15:52:56 2005 -0400

    /spare/repo/netdev-2.6 branch 'sis190'

commit 1703ecc7e88ea2d583fc9ebe7de8edb004eff863
Merge: bf4e70e... 945a787...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 15:52:42 2005 -0400

    /spare/repo/netdev-2.6 branch 'uli-tulip'

commit 4f07118f656c179740cad35b827032e2e29b1210
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 12:46:22 2005 -0700

    [SPARC64]: More fully work around Spitfire Errata 51.
    
    It appears that a memory barrier soon after a mispredicted
    branch, not just in the delay slot, can cause the hang
    condition of this cpu errata.
    
    So move them out-of-line, and explicitly put them into
    a "branch always, predict taken" delay slot which should
    fully kill this problem.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 442464a50077ff00454ff8d7628cbe1b8eacc034
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 12:46:07 2005 -0700

    [SPARC64]: Make debugging spinlocks usable again.
    
    When the spinlock routines were moved out of line into
    kernel/spinlock.c this made it so that the debugging
    spinlocks record lock acquisition program counts in the
    kernel/spinlock.c functions not in their callers.
    This makes the debugging info kind of useless.
    
    So record the correct caller's program counter and
    now this feature is useful once more.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca7c8d2c1e2a2f2445cb5e00f45b93af57f22c1b
Author: Kumar Gala <kumar.gala@freescale.com>
Date:   Mon Aug 29 12:45:44 2005 -0700

    [SPARC]: remove use of asm/segment.h
    
    Removed sparc architecture specific users of asm/segment.h and
    asm-sparc/segment.h itself
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d6364abcfdaedeb34418c2894f61251d48614f6
Author: Kumar Gala <kumar.gala@freescale.com>
Date:   Mon Aug 29 12:45:30 2005 -0700

    [SPARC64]: remove use of asm/segment.h
    
    Removed sparc64 architecture specific users of asm/segment.h and
    asm-sparc64/segment.h itself
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c52a96e6cacb35403b85c3b42db0faf26f3ed85
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 12:45:11 2005 -0700

    [SPARC64]: Revamp Spitfire error trap handling.
    
    Current uncorrectable error handling was poor enough
    that the processor could just loop taking the same
    trap over and over again.  Fix things up so that we
    at least get a log message and perhaps even some register
    state.
    
    In the process, much consolidation became possible,
    particularly with the correctable error handler.
    
    Prefix assembler and C function names with "spitfire"
    to indicate that these are for Ultra-I/II/IIi/IIe only.
    
    More work is needed to make these routines robust and
    featureful to the level of the Ultra-III error handlers.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bde4e4ee9f90142d550e2684dec2c8df302f5f8e
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 12:44:57 2005 -0700

    [SPARC64]: Do not call winfix_dax blindly
    
    Verify we really are taking a data access exception trap, at TL1, from
    one of the window spill/fill handlers.
    
    Else call a new function, data_access_exception_tl1, to log the error.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5ea68e02766c52c153c62fc423cda659a80e45fa
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Aug 29 12:44:40 2005 -0700

    [SPARC64]: Fix trap state reading for instruction_access_exception.
    
    1) Read ASI_IMMU SFSR not ASI_DMMU.
    2) IMMU has no SFAR, read TPC instead
    3) Delete old and incorrect comment about the DTLB protection
       trap having a dependency on the SFSR contents in order to
       function correctly
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa7e16d6b88b3b38db0d2ee49ed5e44e7b2045ec
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 15:12:56 2005 -0400

    [libata sata_nv] NVIDIA ok'd license change from OSL+GPL to GPL

commit 87dbaaabde5ce141ac4f8d726e6d3c937209e0a5
Merge: 7ee175f... 16592d2...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 11:39:18 2005 -0700

    Pull lameter-rwsem-limit into release branch

commit 7ee175f7418cfb17872afd8ffca767ab0e75aff3
Merge: dcf8296... badea12...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 11:38:48 2005 -0700

    Pull mm-context-fix into release branch

commit dcf8296216065fb391a5e29e44e814b0d1ab88aa
Merge: 02b3e4e... f521089...
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Aug 29 11:38:01 2005 -0700

    Pull lameter-spinlock-optimization into release branch

commit bf4e70e54cf31dcca48d279c7f7e71328eebe749
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Aug 28 03:52:22 2005 +0100

    [PATCH] missing include in smc-ultra
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03ecc6749ab2bfe7baf84b3e0e35018884758fa3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Aug 28 03:47:50 2005 +0100

    [PATCH] missing include in tda80xx
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e2d3cd34a159948dc753a14573e16bffc04dba8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Aug 28 03:19:14 2005 +0100

    [PATCH] mod_devicetable.h fixes
    
     * ieee1394_device_id has kernel_ulong_t field after an odd number of
       __u32 ones.  Since mod_devicetable.h is included both from kernel and
       from host build helper, we may be in trouble if we are building on
       32bit host for 64bit target - userland sees unsigned long long,
       kernel sees unsigned long and while their sizes match, alignments
       might not.  Fixed by forcing alignment.  Fortunately, almost nobody
       else needs that - the rest of such fields is naturally aligned as it
       is.
    
     * of_device_id has void * in it.  Host userland helpers need
       kernel_ulong_t instead, since their void * might have nothing to do
       with the kernel one.  Fixed in the same way it's done for similar
       problems in pcmcia_device_id (ifdef __KERNEL__).
    
     * pcmcia_device_id has the same problem as ieee1394_device_id.  Fixed
       the same way.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bbe6ab938208bb3d4e16f7a28b11fcddd4f9ff2
Author: Benjamin LaHaise <bcrl@linux.intel.com>
Date:   Sun Aug 28 18:05:17 2005 -0400

    [PATCH] new name for 2.6.14
    
    We've had Woozy Numbat for a while now.  Here's an updated name care of
    Jeff Garzik and myself.
    
    Signed-off-by: Benjamin LaHaise <bcrl@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a78b3371b628559eb5c46ee1518df27c62f3e801
Merge: 97c169a... a4d61e8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:36:48 2005 -0700

    Merge HEAD from master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband.git

commit 97c169a21bfb5bb2ab2bccd852da4f0d0e021c55
Merge: 9ab7486... 4cd426f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:35:43 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-arm.git

commit 9ab7486e446447c8e62f8f46ca85b809e6a9d491
Merge: 975f957... dce7737...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:35:21 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-mmc.git

commit 975f957dc408925805dd8f5aa4217b7eeea2d005
Merge: 2321fbd... 661299d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:34:59 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 2321fbd2b87539edc1fbfc2e186528a1ef93835f
Merge: 3d963f5... 323cdfc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:34:31 2005 -0700

    Merge HEAD from master.kernel.org:/home/rmk/linux-2.6-ucb.git

commit 3d963f5bb1949af53a37acf36d3b12e97ca9b1e5
Merge: 5be1d85... e139345...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:04:37 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 5be1d85c208f135fc88f972f91b91a879b702b40
Merge: 69be8f1... 1359326...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 29 10:03:46 2005 -0700

    Merge refs/heads/upstream from master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 69be8f189653cd81aae5a74e26615b12871bb72e
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Mon Aug 29 11:44:09 2005 -0400

    [PATCH] convert signal handling of NODEFER to act like other Unix boxes.
    
    It has been reported that the way Linux handles NODEFER for signals is
    not consistent with the way other Unix boxes handle it.  I've written a
    program to test the behavior of how this flag affects signals and had
    several reports from people who ran this on various Unix boxes,
    confirming that Linux seems to be unique on the way this is handled.
    
    The way NODEFER affects signals on other Unix boxes is as follows:
    
    1) If NODEFER is set, other signals in sa_mask are still blocked.
    
    2) If NODEFER is set and the signal is in sa_mask, then the signal is
    still blocked. (Note: this is the behavior of all tested but Linux _and_
    NetBSD 2.0 *).
    
    The way NODEFER affects signals on Linux:
    
    1) If NODEFER is set, other signals are _not_ blocked regardless of
    sa_mask (Even NetBSD doesn't do this).
    
    2) If NODEFER is set and the signal is in sa_mask, then the signal being
    handled is not blocked.
    
    The patch converts signal handling in all current Linux architectures to
    the way most Unix boxes work.
    
    Unix boxes that were tested:  DU4, AIX 5.2, Irix 6.5, NetBSD 2.0, SFU
    3.5 on WinXP, AIX 5.3, Mac OSX, and of course Linux 2.6.13-rcX.
    
    * NetBSD was the only other Unix to behave like Linux on point #2. The
    main concern was brought up by point #1 which even NetBSD isn't like
    Linux.  So with this patch, we leave NetBSD as the lonely one that
    behaves differently here with #2.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cba582a49f1535c1a12a687cfb3dab713c22cc4
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 29 05:12:30 2005 -0400

    [libata sata_promise] Do not attempt to use SATA phy on PATA controllers

commit c594adad5653491813959277fb87a2fef54c4e05
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Thu Aug 11 16:55:21 2005 +1000

    [PATCH] Dynamic hugepage addresses for ppc64
    
    Paulus, I think this is now a reasonable candidate for the post-2.6.13
    queue.
    
    Relax address restrictions for hugepages on ppc64
    
    Presently, 64-bit applications on ppc64 may only use hugepages in the
    address region from 1-1.5T.  Furthermore, if hugepages are enabled in
    the kernel config, they may only use hugepages and never normal pages
    in this area.  This patch relaxes this restriction, allowing any
    address to be used with hugepages, but with a 1TB granularity.  That
    is if you map a hugepage anywhere in the region 1TB-2TB, that entire
    area will be reserved exclusively for hugepages for the remainder of
    the process's lifetime.  This works analagously to hugepages in 32-bit
    applications, where hugepages can be mapped anywhere, but with 256MB
    (mmu segment) granularity.
    
    This patch applies on top of the four level pagetable patch
    (http://patchwork.ozlabs.org/linuxppc64/patch?id=1936).
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9a5573e378c5c8976c6000a7643b52e2a0481688
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Aug 9 15:20:20 2005 +1000

    [PATCH] ppc64: Check of_chosen in check_for_initrd()
    
    You can't call get_property() on a NULL node, so check if of_chosen is set
    in check_for_initrd().
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    
     arch/ppc64/kernel/setup.c |   20 ++++++++++++--------
     1 files changed, 12 insertions(+), 8 deletions(-)
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 95920324f51b3a12603cf6d9bacbd831f34c5b60
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Aug 9 15:20:19 2005 +1000

    [PATCH] ppc64: unflatten_device_tree() should check if lmb_alloc() fails
    
    unflatten_device_tree() doesn't check if lmb_alloc() succeeds or not, it
    should. All it can do is panic, but at least there's an error message
    (assuming you have some sort of console at that point).
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    
     arch/ppc64/kernel/prom.c |    9 +++++++--
     1 files changed, 7 insertions(+), 2 deletions(-)
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 145ec7d51ae507c7cc8889ad05e24af05bbd9147
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Aug 9 15:20:18 2005 +1000

    [PATCH] ppc64: Fix a misleading printk in unflatten_dt_node()
    
    When unflatten_dt_node() fails to find an OF_DT_END_NODE tag it prints
    "Weird tag at start of node", this should be "Weird tag at end of node".
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    
     arch/ppc64/kernel/prom.c |    2 +-
     1 files changed, 1 insertion(+), 1 deletion(-)
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 180a33627d958d5d9d3602dde6ac74b315e136f0
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Aug 9 11:13:36 2005 +1000

    [PATCH] ppc64: Move ppc64_enable_pmcs() logic into a ppc_md function
    
    This patch moves power4_enable_pmcs() to arch/ppc64/kernel/pmc.c.
    
    I've tested it on P5 LPAR and P4. It does what it used to.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b13cfd173f73c3f6f9a307b7b6e64d45fbd756b2
Author: Olaf Hering <olh@suse.de>
Date:   Thu Aug 4 19:26:42 2005 +0200

    [PATCH] ppc64: allow xmon=off
    
    If both CONFIG_XMON and CONFIG_XMON_DEFAULT is enabled in the .config,
    there is no way to disable xmon again. setup_system calls first xmon_init,
    later parse_early_param. So a new 'xmon=off' cmdline option will do the right
    thing.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bef5686229810709091fb6e505071f4aa41e3760
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:26 2005 +1000

    [PATCH] ppc64: Remove CONFIG_MSCHUNKS
    
    We can now remove CONFIG_MSCHUNKS as it doesn't do anything interesting
    anymore.
    
    The only macro in abs_addr.h which is called by non-iSeries code is
    phys_to_abs(), so remove the other dummy implementations, and we add a
    firmware feature check to phys_to_abs().
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 71e1f55ad4bc4c8bcfe696400a950a34263a750e
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:26 2005 +1000

    [PATCH] ppc64: Simplify some lmb functions
    
    lmb_phys_mem_size() can always return lmb.memory.size, as long as it's called
    after lmb_analyze(), which it is. There's no need to recalculate the size on
    every call.
    
    lmb_analyze() was calculating a few things we then threw away, so just don't
    calculate them to start with.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 180379dcefb39e8bd05d562b0685e9084dffcc0a
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:26 2005 +1000

    [PATCH] ppc64: Remove physbase from the lmb_property struct
    
    We no longer need the lmb code to know about abs and phys addresses, so
    remove the physbase variable from the lmb_property struct.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e88bcd1b29f63738b702e57d831758706162347e
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:25 2005 +1000

    [PATCH] ppc64: Remove redundant abs_to_phys() macro
    
    abs_to_phys() is a macro that turns out to do nothing, and also has the
    unfortunate property that it's not the inverse of phys_to_abs() on iSeries.
    
    The following is for my benefit as much as everyone else.
    
    With CONFIG_MSCHUNKS enabled, the lmb code is changed such that it keeps
    a physbase variable for each lmb region. This is used to take the possibly
    discontiguous lmb regions and present them as a contiguous address space
    beginning from zero.
    
    In this context each lmb region's base address is its "absolute" base
    address, and its physbase is it's "physical" address (from Linux's point of
    view). The abs_to_phys() macro does the mapping from "absolute" to "physical".
    
    Note: This is not related to the iSeries mapping of physical to absolute
    (ie. Hypervisor) addresses which is maintained with the msChunks structure.
    And the msChunks structure is not controlled via CONFIG_MSCHUNKS.
    
    Once upon a time you could compile for non-iSeries with CONFIG_MSCHUNKS
    enabled. But these days CONFIG_MSCHUNKS depends on CONFIG_PPC_ISERIES, so
    for non-iSeries code abs_to_phys() is a no-op.
    
    On iSeries we always have one lmb region which spans from 0 to
    systemcfg->physicalMemorySize (arch/ppc64/kernel/iSeries_setup.c line 383).
    This region has a base (ie. absolute) address of 0, and a physbase address
    of 0 (as calculated in lmb_analyze() (arch/ppc64/kernel/lmb.c line 144)).
    
    On iSeries, abs_to_phys(aa) is defined as lmb_abs_to_phys(aa), which finds
    the lmb region containing aa (and there's only one, ie. 0), and then does:
    
     return lmb.memory.region[0].physbase + (aa - lmb.memory.region[0].base)
    
    physbase == base == 0, so you're left with "return aa".
    
    So remove abs_to_phys(), and lmb_abs_to_phys() which is the implementation
    of abs_to_phys() for iSeries.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a4a0f97020444f83bf22bb9c8c20d8af2b4e6317
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:24 2005 +1000

    [PATCH] ppc64: Remove redundant use of pointers in lmb code
    
    The lmb code is all written to use a pointer to an lmb struct. But it's always
    the same lmb struct, called "lmb". So we take the address of lmb, call it
    _lmb and then start using _lmb->foo everywhere, which is silly.
    
    This patch removes the _lmb pointers and replaces them with direct references
    to the one "lmb" struct. We do the same for some _mem and _rsv pointers which
    point to lmb.memory and lmb.reserved respectively.
    
    This patch looks quite busy, but it's basically just:
    s/_lmb->/lmb./g
    s/_mem->/lmb.memory./g
    s/_rsv->/lmb.reserved./g
    s/_rsv/&lmb.reserved/g
    s/mem->/lmb.memory./g
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aefd16b0c5a594b5feaba23954ad74061f45c8a5
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:24 2005 +1000

    [PATCH] ppc64: Remove redundant uses of physRpn_to_absRpn
    
    physRpn_to_absRpn is a no-op on non-iSeries platforms, remove the two
    redundant calls.
    
    There's only one caller on iSeries so fold the logic in there so we can get
    rid of it completely.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ce21795275ab469b97384faa36462350af17eca0
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:23 2005 +1000

    [PATCH] ppc64: Consolidate some macros
    
    The only caller of chunk_offset() and abs_chunk() is phys_to_abs(), so
    fold the former two into the latter.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 56e97b71bf55edb69dc8e9715553972ce50b1564
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:23 2005 +1000

    [PATCH] ppc64: Rename msChunks structure
    
    Rename the msChunks struct to get rid of the StUdlY caps and make it a bit
    clearer what it's for.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 34c8f6961fc601294a38c5bd5ca12131b2e52674
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:23 2005 +1000

    [PATCH] ppc64: msChunks cleanups
    
    Chunks are 256KB, so use constants for the size/shift/mask, rather than
    getting them from the msChunks struct. The iSeries debugger (??) might still
    need access to the values in the msChunks struct, so we keep them around
    for now, but set them from the constant values.
    
    Replace msChunks_entry typedef with regular u32.
    
    Simplify msChunks_alloc() to manipulate klimit directly, rather than via
    a parameter.
    
    Move msChunks_alloc() and msChunks into iSeries_setup.c, as that's where
    they're used.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 38e85dc18036804ada8698951cfad4e6114fec1b
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Aug 3 20:21:23 2005 +1000

    [PATCH] ppc64: Remove PTRRELOC() from msChunks code
    
    The msChunks code was written to work on pSeries, but now it's only used on
    iSeries. This means there's no need to do PTRRELOC anymore, so remove it all.
    
    A few places were getting "extern reloc_offset()" from abs_addr.h, move it
    into system.h instead.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aed31351941aa990fb0865c186565a589c56d3fe
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 3 14:43:21 2005 +1000

    [PATCH] ppc64: introduce FW_FEATURE_ISERIES
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8d15a3e55f49678b0900dcf5c1cddb322a129325
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 3 14:40:16 2005 +1000

    [PATCH] ppc64: make firmware_has_feature() stronger
    
    Make firmware_has_feature() evaluate at compile time for the non pSeries
    case and tidy up code where possible.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1ababe11480d59d75be806804c71fa55d203a5a6
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 3 14:35:25 2005 +1000

    [PATCH] ppc64: create firmware_has_feature()
    
    Create the firmware_has_feature() inline and move the firmware feature
    stuff into its own header file.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7a6af5e38054d8e658a4b1b703902331a845de1a
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 3 14:32:30 2005 +1000

    [PATCH] ppc64: remove firmware features from cpu_spec
    
    The firmware_features field of struct cpu_spec should really be a separate
    variable as the firmware features do not depend on the chip and the
    bitmask is constructed independently.  By removing it, we save 112 bytes
    from the cpu_specs array and we access the bitmask directly instead of via
    the cur_cpu_spec pointer.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6fbb49d56d228b666cb4534bbc3c2dfe833c8053
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:32 2005 +1000

    [PATCH] Move variables in ppc64 head.S from .data to .bss
    
    The ppc64 head.S defines several zero-initialized structures, such as
    the empty_zero_page and the kernel top-level pagetable.  Currently
    they are defined to be in the data section.  However, they're not used
    until after the bss is cleared, so this patch moves them to the bss,
    saving two and a half pages from the vmlinux.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 91a57fc6723d778e12686b5106a38583072fd767
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:32 2005 +1000

    [PATCH] Tweak comments in ppc64 head.S
    
    This patch adjust some comments in head.S for accuracy, clarity, and
    spelling.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1d086e6bd605ac44154e019fe96ae3568e8b2ba2
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:32 2005 +1000

    [PATCH] Remove unneeded #defines in head.S
    
    arch/ppc64/kernel/head.S #defines SECONDARY_PROCESSORS then has some
    #ifdefs based on it.  Whatever purpose this had is long lost, this
    patch removes it.
    
    Likewise, head.S defines H_SET_ASR, which is now defined, along with
    other hypervisor call numbers in hvcall.h.  This patch deletes it, as
    well, from head.S.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 60ba44945714d9b7dae8b85ab0926f6f13809c73
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:32 2005 +1000

    [PATCH] Fix apparent code overlap in ppc64 head.S
    
    An #if/#else construct near the top of ppc64's head.S appears to
    create overlapping sections of code for iSeries and pSeries (i.e. one
    thing on iSeries and something different in the same place on
    pSeries).  In fact, checking the various absolute offsets, it doesn't.
    This patch unravels the #ifdefs to make it more obvious what's going
    on.  This accomplishes another microstep towards a single kernel image
    which can boot both iSeries and pSeries.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0ab20002f4b41f4b1799bad5948389da1c4c8444
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:31 2005 +1000

    [PATCH] Remove general use functions from head.S
    
    As well as the interrupt vectors and initialization code, head.S
    contains several asm functions which are used during runtime.  This
    patch moves these to misc.S, a more sensible location for random asm
    support code.  A couple The functions moved are:
    	disable_kernel_fp
    	giveup_fpu
    	disable_kernel_altivec
    	giveup_altivec
    	__setup_cpu_power3	(empty function)
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c59c464a3e29830bcfae5eea1777cad9e00087f3
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:31 2005 +1000

    [PATCH] Change address of ppc64 initial segment table
    
    On ppc64 machines with segment tables, CPU0's segment table is at a
    fixed address, currently 0x9000.  This patch moves it to the free
    space at 0x6000, just below the fwnmi data area.  This saves 8k of
    space in vmlinux and the runtime kernel image.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ec465515eeb662f66725c8c483a46b6bdd9bdd48
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:31 2005 +1000

    [PATCH] Move iSeries and common vectors into unused space in head.S
    
    In the ppc64 kernel head.S there is currently quite a lot of unused
    space between the naca (at fixed address 0x4000) and the fwnmi data
    area (at fixed address 0x7000).  This patch moves various exception
    vectors and support code into this region to use the wasted space.
    
    The functions load_up_fpu and load_up_altivec are moved down as well,
    since they are essentially continuations of the fp_unavailable_common
    and altivec_unavailable_common vectors, respectively.
    
    Likewise, the fwnmi vectors themselves are moved down into this area,
    because while the location of the fwnmi data area is fixed by the RPA,
    the vectors themselves can be anywhere sufficiently low.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2e2446ea0758cd57dd065962d9544e3f4d44ea2b
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 19 14:52:31 2005 +1000

    [PATCH] Remove NACA fixed address constraint
    
    Comments in head.S suggest that the iSeries naca has a fixed address,
    because tools expect to find it there.  The only tool which appears to
    access the naca is addRamDisk, but both the in-kernel version and the
    version used in RHEL and SuSE in fact locate the NACA the same way as
    the hypervisor does, by following the pointer in the hvReleaseData
    structure.
    
    Since the requirement for a fixed address seems to be obsolete, this
    patch removes the naca from head.S and replaces it with a normal C
    initializer.
    
    For good measure, it removes an old version of addRamDisk.c which was
    sitting, unused, in the ppc32 tree.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 19dbd0f6a74f7529d6d49dd50ad6b31adbe0598d
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jul 12 17:50:26 2005 +1000

    [PATCH] ppc64: split pSeries specific parts out of vio.c
    
    This patch just splits out the pSeries specific parts of vio.c.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6312236fe82bbd3b0e1dee60b3eb3b270a2f6aeb
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jul 12 17:45:27 2005 +1000

    [PATCH] ppc64: make the bus matching function platform specific
    
    This patch allows us to have a different bus if matching function for
    each platform.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8c65b5c955b8598d9c63b4e97392377269873a54
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jul 12 17:42:49 2005 +1000

    [PATCH] ppc64: move iSeries vio iommu init
    
    Since the iSeries vio iommu tables cannot be used until after the vio bus has
    been initialised, move the initialisation of the tables to there.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3e494c80481653bbc810b4e67651097595ea0294
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Tue Jul 12 17:40:17 2005 +1000

    [PATCH] ppc64: split iSeries specific parts out of vio.c
    
    This patch splits the iSeries specific parts out of vio.c.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6020164499ff3a61cd8bebceb9e294a155079f71
Author: Frank Rowand <frowand@mvista.com>
Date:   Tue Jun 28 16:48:04 2005 -0700

    [PATCH] ppc64: change duplicate Kconfig menu "General setup" to "Bus Options"
    
    arch/ppc64/Kconfig defines a "General setup" menu, but also sources
    init/Kconfig which also defines a "General setup" menu.  Both of these
    menus appear at the top level of make menuconfig.  Having two menus with
    the same name is confusing.  This patch renames the ppc64/Kconfig menu to
    be "Bus Options" and moves options in this menu which are not bus related
    to the end of the "Platform support" menu.
    
    There are many variations among architectures on the exact naming of the
    "Bus Options" menu.  I chose to use the simplest one, which is also used
    in arch/ppc/Kconfig.
    
    Signed-off-by: Frank Rowand <frowand@mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 293da76b3d4c2f362f906bce8c5d2e053bdf8d44
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Thu Jun 9 09:31:12 2005 -0500

    [PATCH] ppc64: PCI device-node failure detection
    
    OpenFirmware marks devices as failed in the device-tree when a hardware
    problem is detected.  The kernel needs to fail config reads/writes to
    prevent a kernel crash when incorrect data is read.
    
    This patch validates that the device-node is not marked "fail" when
    config space reads/writes are attempted.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 34153fa3af45d84f3221d9b67ba2ab7e8a220d28
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Aug 9 10:36:34 2005 +0200

    [PATCH] flattened device tree changes
    
    This patch updates the format of the flattened device-tree passed
    between the boot trampoline and the kernel to support a more compact
    representation, for use by embedded systems mostly.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e28f7faf05159f1cfd564596f5e6178edba6bd49
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Fri Aug 5 19:39:06 2005 +1000

    [PATCH] Four level pagetables for ppc64
    
    Implement 4-level pagetables for ppc64
    
    This patch implements full four-level page tables for ppc64, thereby
    extending the usable user address range to 44 bits (16T).
    
    The patch uses a full page for the tables at the bottom and top level,
    and a quarter page for the intermediate levels.  It uses full 64-bit
    pointers at every level, thus also increasing the addressable range of
    physical memory.  This patch also tweaks the VSID allocation to allow
    matching range for user addresses (this halves the number of available
    contexts) and adds some #if and BUILD_BUG sanity checks.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit decd300b30e499fe6be1bbfc5650fc971de8c1fa
Author: Olaf Hering <olh@suse.de>
Date:   Mon Aug 8 13:24:38 2005 +1000

    [PATCH] ppc64: make arch/ppc64/boot standalone
    
    Make the bootheader for ppc64 independent from kernel and libc headers.
    * add -nostdinc -isystem $gccincludes to not include libc headers
    * declare all functions in header files, also the stuff from string.S
    * declare some functions static
    * use stddef.h to get size_t (hopefully ok)
    * remove ppc32-types.h, only elf.h used the __NN types
    
    With further modifications by Paul Mackerras and Stephen Rothwell.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e13934563db047043ccead26412f552375cea90c
Author: Andy Fleming <afleming@freescale.com>
Date:   Wed Aug 24 18:46:21 2005 -0500

    [PATCH] PHY Layer fixup
    
    This patch adds back the code that was taken out, thus re-enabling:
    
    * The PHY Layer to initialize without crashing
    * Drivers to actually connect to PHYs
    * The entire PHY Control Layer
    
    This patch is used by the gianfar driver, and other drivers which are in
    development.
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit af36d7f0df56de3e3e4bbfb15d0915097ecb8cab
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Aug 28 20:18:39 2005 -0400

    [libata] license change, other bits
    
    - changes license of all code from OSL+GPL to plain ole GPL
      - except for NVIDIA, who hasn't yet responded about sata_nv
      - copyright holders were already contacted privately
    
    - adds info in each driver about where hardware/protocol docs may be
      obtained
    
    - where I have made major contributions, updated copyright dates

commit a8eef8a22232e64be76410100c52038b21bda7ed
Author: Kalle Valo <Kalle.Valo@iki.fi>
Date:   Sun Aug 28 22:46:57 2005 +0300

    [PATCH] hostap: Fix null pointer dereference in prism2_pccard_card_present()
    
    With my Buffalo WLI-CF-S11G PC Card kernel oopses every time in
    prism2_interrupt() when I try load the hostap module. local->hw_priv is null
    during the first call to prism2_interrupt(). It feels like
    interrupts are enabled too early, or something.
    
    This patch fixes the symptom, but not the cause.
    
    Signed-off-by: Kalle Valo <Kalle.Valo@iki.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6c5b90d2c84d557baed56e71729504b467ff3e5b
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 10:51:36 2005 -0700

    [PATCH] hostap: Fix hash values for product strings
    
    hostap_cs: 0.4.1-kernel (Jouni Malinen <jkmaline@cc.hut.fi>)
    pcmcia: hostap_cs: invalid hash for product string "BUFFALO": is 0x1b01a57b,
    should be 0x2decece3
    pcmcia: see Documentation/pcmcia/devicetable.txt for details
    pcmcia: hostap_cs: invalid hash for product string "WLI-CF-S11G": is
    0xefd5102a, should be 0x82067c18
    pcmcia: see Documentation/pcmcia/devicetable.txt for details
    
    This patch fixes them.
    
    Signed-off-by: Kalle Valo <Kalle.Valo@iki.fi>
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c6e3f95df7328479e2a454eedb5614eacbdb84ac
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 10:51:35 2005 -0700

    [PATCH] hostap: Update version
    
    Version 0.4.4 of Host AP driver was released, so let's sync the version
    number in netdev-2.6 tree.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fd67b0641118031a65d370f65bd80eef1982b45a
Merge: 831a179... 91cb70c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Aug 28 19:23:37 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 91cb70c1769d9b72dd1efe40c31f01005820b09e
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 10:51:34 2005 -0700

    [PATCH] ieee80211: Fix debug comments ipw->ieee80211
    
    Debug variables and procfs dir should be "ieee80211", not "ipw".
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 51e828b6a123912f27afc512377ad3e2ab40d2eb
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 10:51:33 2005 -0700

    [PATCH] ieee80211: Remove EAPOL debug
    
    IEEE 802.11 code has no business touching payloads of EAPOL frames.
    There are some EAPOL structures defined for debugging and these were
    confusingly called EAP types which they are not. Let's just remove these
    before someone else starts using them in the kernel.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5f55d0850e4ae0b4bfabc9a372af5b9f52be02da
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 28 10:51:32 2005 -0700

    [PATCH] ieee80211: Remove WIRELESS_EXT < 17 support
    
    No need to maintain support for WIRELESS_EXT < 17 since this kernel
    tree is already using WIRELESS_EXT 18.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4cd426f24ff2d95dd9b3aa15fa5fca9736678ad5
Author: Pavel Machek <pavel@suse.cz>
Date:   Sun Aug 28 22:39:08 2005 +0100

    [ARM] drop i386-isms from arm Kconfig
    
    This kills i386-specific stuff from arm Kconfig. Please apply,
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ba482ef4b16bad5172d2be693d4b2420b84c84e7
Merge: e514385... 51490c8...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 11:40:00 2005 -0500

    Merge by hand (conflicts in sr.c)

commit e514385be2b355c1f3fc6385a98a6a0fc04235ae
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Aug 9 11:55:36 2005 -0500

    [SCSI] fix sense buffer length handling problem
    
    The new bio code was incorrectly converted from stack allocated to
    kmalloc'd buffer handling.  There are two places where it incorrectly
    uses sizeof(*sense) to get the size of the sense buffer.  This
    actually produces one, so no sense data was ever getting back, causing
    failure in things like disk spin up.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c9d297c543f379a27a34082070ed03a8ef846fc2
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jun 28 09:18:21 2005 -0500

    [SCSI] fix 3ware raid emulated commands
    
    The 3ware emulated commands all expect they are executing in the
    use_sg == 0 case, which isn't true either in the block layer rework or
    an SG_IO ioctl.
    
    Fix this by adding the correct kmapping of the first element in the sg
    list.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f189c5cb8ddde0c01838f2b3bc7650e86c097a14
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jun 19 11:32:53 2005 +0200

    [SCSI] comment cleanup for spi_execute
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1ccb48bb163853c24840c0a50c2a6df1affe029c
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 26 00:12:51 2005 -0700

    [SCSI] fix C syntax problem in scsi_lib.c
    
    Older gcc's require variable definitions at the beginning of a block.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 84743bbcf9fc3767aa33f769898432538281e6dc
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jun 12 22:37:10 2005 -0500

    [SCSI] convert ch to use scsi_execute_req
    
    I also tinkered with it's sense recognition routines to make them take
    scsi_sense_hdr structures instead of raw sense data.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 820732b501a5bbdd3bde1263f391891e21b5ed8c
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jun 12 22:21:29 2005 -0500

    [SCSI] convert sr to scsi_execute_req
    
    This follows almost the identical model to sd, except that there's one
    ioctl which returns raw sense data, so it had to use scsi_execute()
    instead.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ea73a9f23906c374b697cd5b0d64f6dceced63de
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 11:33:52 2005 -0500

    [SCSI] convert sd to scsi_execute_req (and update the scsi_execute_req API)
    
    This one removes struct scsi_request entirely from sd.  In the process,
    I noticed we have no callers of scsi_wait_req who don't immediately
    normalise the sense, so I updated the API to make it take a struct
    scsi_sense_hdr instead of simply a big sense buffer.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 33aa687db90dd8541bd5e9a762eebf880eaee767
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 11:31:14 2005 -0500

    [SCSI] convert SPI transport class to scsi_execute
    
    This one's slightly more difficult.  The transport class uses
    REQ_FAILFAST, so another interface (scsi_execute) had to be invented to
    take the extra flag.  Also, the sense functions are shifted around to
    allow spi_execute to place data directly into a struct scsi_sense_hdr.
    With this change, there's probably a lot of unnecessary sense buffer
    allocation going on which we can fix later.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1cf72699c1530c3e4ac3d58344f6a6a40a2f46d3
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 11:27:01 2005 -0500

    [SCSI] convert the remaining mid-layer pieces to scsi_execute_req
    
    After this, we just have some drivers, all the ULDs and the SPI
    transport class using scsi_wait_req().
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7a93aef7fbac6f4db40b6fec5c0c6b654ae7a93c
Merge: 3921603... 8224bfa...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 11:18:35 2005 -0500

    Merge HEAD from ../scsi-misc-2.6-tmp

commit 51490c89f95b8581782e9baa855da166441852be
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Tue Jul 5 18:18:08 2005 -0700

    [SCSI] sr.c: Fix getting wrong size
    
    Here's the problem. Try to do this on 2.6.12:
    - Kill udev and HAL
    - Insert a CD-ROM into a SCSI or USB CD-ROM drive
    - Run dd if=/dev/scd0
    - cat /sys/block/sr0/size
    - Eject the CD, insert a different one
    - Run dd if=/dev/scd0
    This is likely to do "access beyond the end of device", if you let it
    - cat /sys/block/sr0/size
    This shows the size of a previous CD, even though dd was supposed
    to revalidate the device.
    - Run dd if=/dev/scd0
    The second run of dd works correctly!
    
    The bug was introduced in 2.5.31, when Al fixes the recursive opens
    in partitioning. Before, the code worked like this:
    - Block layer called cdrom_open directly
    - cdrom_open called sr_open
    - sr_open called check_disk_change
    - check_disk_change called sr_media_change
    - sr_media_change did cd->needs_disk_change=1
    - before returning sr_open tested cd->needs_disk_change
      and called get_sector_size.
    
    In 2.6.12, the check_disk_change is called from cdrom_open only. Thus:
    - Block layer calls sr_bd_open
    - sr_bd_open calls cdrom_open
    - cdrom_open calls sr_open
    - sr_open tests cd->needs_disk_change, which wasn't set yet; returns
    - cdrom_open calls check_disk_change
    - check_disk_change calls sr_media_change
    - sr_media_change does cd->needs_disk_change=1, but nobody cares
    
    Acked by: Al Viro <aviro@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8224bfa84d510630b40ea460b2bb380c91acb8ae
Author: Dave Boutcher <sleddog@us.ibm.com>
Date:   Mon Aug 22 14:38:26 2005 -0500

    [SCSI] ibmvscsi timeout fix
    
    This patch fixes a long term borkenness in
    ibmvscsi where we were using the wrong timeout
    field from the scsi command (and using the
    wrong units.)  Now broken by the fact that the
    scsi_cmnd timeout field is gone entirely.
    This only worked before because all the SCSI
    targets assumed that 0 was default.
    
    Signed-off-by: Dave Boutcher <boutcher@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit de540a53f2f7b68a48c3021e5ab78ea49f6cf21c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Aug 20 21:27:27 2005 +0200

    [SCSI] drivers/scsi/constants.c should include scsi_dbg.h
    
    C files should include the files with the prototypes for their global
    functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit caca1779870b1bcc0fb07e48ebd2403901f356b8
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Aug 16 17:26:10 2005 -0500

    [SCSI] add missing attribute container function prototype
    
    attribute_container_classdev_to_container is an exported function of the
    attribute_container.c file.  However, there's no prototype for it.  Now
    I actually want to use it, so add one.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit be042f240a8528b8f6b741a484cdbbf515698388
Author: Dave Boutcher <sleddog@us.ibm.com>
Date:   Mon Aug 15 16:52:58 2005 -0500

    [SCSI] ibmvscsi eh locking
    
    With the removal of the spinlocking around eh calls, we need to add a
    little more locking back in, otherwise we do some naked list
    manipulation.
    
    Signed-off-by: Dave Boutcher <boutcher@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3b2946cc96bfafa90a555c70b2e876cbbd0fae98
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Aug 15 10:50:24 2005 -0700

    [SCSI] aacraid: Fix aacraid probe breakage (updated)
    
    This patch fixes the bad assumption of the aacraid driver with use_sg.
    I used the 3w-xxxx driver fix as a guide for this.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ebd8bb7647e908e8654e565fa289b0300f9f8fa7
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Aug 15 16:13:19 2005 -0500

    [SCSI] fix transport class corner case after rework
    
    If your transport class sets the ATTRIBUTE_CONTAINER_NO_CLASSDEVS flag,
    then its configure method never gets called.  This patch fixes that so
    that the configure method is called with a NULL classdev.
    
    Also remove a spurious inverted comma in the transport_class comments.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 392160335c798bbe94ab3aae6ea0c85d32b81bbc
Author: James Bottomley <jejb@titanic.(none)>
Date:   Wed Jun 15 18:48:29 2005 -0500

    [SCSI] use scatter lists for all block pc requests and simplify hw handlers
    
    Original From: Mike Christie <michaelc@cs.wisc.edu>
    
    Add scsi_execute_req() as a replacement for scsi_wait_req()
    
    Fixed up various pieces (added REQ_SPECIAL and caught req use after
    free)
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e6401187ef7fb1edc2740832b48bf47ed2c90f2
Author: James Bottomley <jejb@titanic.(none)>
Date:   Wed Jun 15 18:16:09 2005 -0500

    update scsi_wait_req to new format for blk_rq_map_kern()
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e537a36d528053f6b9dbe6c88e763e835c0d3517
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jun 5 02:07:14 2005 -0500

    [SCSI] use scatter lists for all block pc requests and simplify hw handlers
    
    Here's the proof of concept for this one.  It converts scsi_wait_req to
    do correct REQ_BLOCK_PC submission (and works nicely in my setup).
    
    The final goal should be to eliminate struct scsi_request, but that
    can't be done until the character submission paths of sg and st are also
    modified.
    
    There's some loss of functionality to this: retries are no longer
    controllable (except by setting REQ_FASTFAIL) and the wait_req API needs
    to be altered, but it looks very nice.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 31151ba2cef171344beac254e65bd7e00138bb0d
Merge: 3d52acb... 73747ae...
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sun Aug 28 10:43:07 2005 -0500

    fix mismerge in ll_rw_blk.c

commit efda9452046bdd707b23a85b7846ec33548f84f1
Merge: b01f2cc... 36676bc...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Aug 27 14:30:07 2005 +0200

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit b01f2cc1c37ac3d5ca313c90370a586dffe5aca9
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Aug 27 10:25:43 2005 +0100

    [AUDIT] Allow filtering on system call success _or_ failure
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 17888225c2f392bfdbac6c7f0713cbd9a4d02b05
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Aug 27 10:23:46 2005 +0100

    Fix missing audit_syscall_exit() on ppc64 sigsuspend exit path
    
    When we leave sigsuspend() directly into a signal handler, we don't want
    to go via the normal syscall exit path -- it'll corrupt r4 and r5 which
    are supposed to be giving information to the signal handler, and it'll
    give us one more single-step SIGTRAP than we need if single-stepping is
    in operation.
    
    However, we _should_ be calling audit_syscall_exit(), which would
    normally get invoked in that patch. It's not wonderfully pretty, but I
    suspect the best answer is just to call it directly...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 86f0cd505781e42000763821ec6f70127a6abaae
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Wed Aug 24 01:14:23 2005 +0200

    [PATCH] r8169: avoid conflict between revisions 2 and 3 of the Linksys EG1032
    
    Both revisions share the same PCI device ID and vendor ID but revision 2
    of the device uses SysKonnect's chipset whereas revision 3 of the device
    uses Realtek's 8169 chipset.
    
    Credit goes to Christiaan Lutzer <mythtv.lutzer@gmail.com> for reporting
    the issue and giving the actual value for the different revisions.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 815f62bf742718458ba822a7e1f51f285eb997f2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Aug 24 18:06:36 2005 +0100

    [PATCH] SMP rewrite of mkiss
    
    Rewrite the mkiss driver to make it SMP-proof following the example of
    6pack.c.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 135932651fd1eeb95eb6c5d4f6652aae73fe2c24
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Aug 27 04:20:12 2005 -0400

    [libata scsi] fix read/write translation edge cases
    
    Fix bugs for unlikely edge cases noticed by Douglas Gilbert:
    
    - When READ(6)/WRITE(6) sector count == 0, treat it as 256 sectors
    
    - For other READ(x)/WRITE(x), when sector count == 0, error.
      We don't support successfully completing zero-length transfers at
      this time.

commit d18d36b4edbb980c9de7fe00724c3ded5de1b7a7
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Aug 27 04:13:52 2005 -0400

    libata: fix a few alan-isms

commit a4d61e84804f3b14cc35c5e2af768a07c0f64ef6
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Aug 25 13:40:04 2005 -0700

    [PATCH] IB: move include files to include/rdma
    
    Move the InfiniBand headers from drivers/infiniband/include to include/rdma.
    This allows InfiniBand-using code to live elsewhere, and lets us remove the
    ugly EXTRA_CFLAGS include path from the InfiniBand Makefiles.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1ad62a19f177e61d4dde111ba35fb4badd0c2106
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Aug 24 14:41:51 2005 -0700

    [PATCH] IPoIB: Fix device removal race
    
    Currently we may have work scheduled in default kernel workqueue when
    the device is going down.  The device could get freed before this
    workqueue gets serviced.  I am actually seeing this causing system
    hangs.
    
    The following patch fixes this by using ipoib_workqueue which gets
    flushed when the device is going down.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit fe9e08e17af414a5fd8f3141b0fd88677f81a883
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Fri Aug 19 13:50:33 2005 -0700

    [PATCH] IB: Add handling for ABORT and STOP RMPP MADs.
    
    Add handling for ABORT / STOP RMPP MADs.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b9ef520f9caf20aba8ac7cb2bbba45b52ff19d53
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Fri Aug 19 13:46:34 2005 -0700

    [PATCH] IB: fix userspace CM deadlock
    
    Fix deadlock condition resulting from trying to destroy a cm_id
    from the context of a CM thread.  The synchronization around the
    ucm context structure is simplified as a result, and some simple
    code cleanup is included.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4ce059378c04b40c2e9f658b1c6a2e9078b85c7c
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Aug 19 12:03:17 2005 -0700

    [PATCH] IPoIB: Set full membership bit in P_Keys
    
    Always make sure that the full membership bit is set in the P_Keys
    that IPoIB uses.  This makes sure that all hosts join the correct
    multicast groups so that hosts that are partial partition members
    can talk to the rest of the network.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ec34a922d243c3401a694450734e9effb2bafbfe
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Aug 19 10:59:31 2005 -0700

    [PATCH] IB/mthca: Add SRQ implementation
    
    Add mthca support for shared receive queues (SRQs),
    including userspace SRQs.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d20a40192868082eff6fec729b311cb8463b4a21
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Aug 19 10:36:11 2005 -0700

    [PATCH] IB/mthca: Handle context tables smaller than our chunk size
    
    When creating a table in context memory where the table is smaller
    than our chunk size, we don't want to allocate and map a full chunk.
    Instead, allocate just enough memory to cover the table.
    
    This can be pretty simple because all tables are a power-of-2 size, so
    either the table is a multiple of the chunk size, or it's smaller than
    one chunk.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c04bc3d1f417a8a90eef9ab46523dfd44858b28d
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Aug 19 10:33:35 2005 -0700

    [PATCH] IB/mthca: Move WQE structures into their own header
    
    Move the definitions of the WQE structures from mthca_qp.c into
    mthca_wqe.h, so that we'll be able to share them when we add the
    SRQ code in mthca_srq.c.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 288bdeb4bc5b89befd7ee2f0f0183604034ff6c5
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Fri Aug 19 09:19:05 2005 -0700

    [PATCH] IB/mthca: Simplify handling of completions with error
    
    Mem-free HCAs never generate error CQEs that complete multiple WQEs,
    so just skip the call to mthca_free_err_wqe() for them rather than
    having logic to handle the mem-free case in mthca_free_err_wqe().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 87b816706bb2b79fbaff8e0b8e279e783273383e
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Aug 18 13:39:31 2005 -0700

    [PATCH] IB/mthca: Factor out common queue alloc code
    
    Clean up the allocation of memory for queues by factoring out the
    common code into mthca_buf_alloc() and mthca_buf_free().  Now CQs and
    QPs share the same queue allocation code, which we'll also use for SRQs.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f520ba5aa48e2891c3fb3e364eeaaab4212c7c45
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Aug 18 12:24:13 2005 -0700

    [PATCH] IB: userspace SRQ support
    
    Add SRQ support to userspace verbs module.  This adds several commands
    and associated structures, but it's OK to do this without bumping the
    ABI version because the commands are added at the end of the list so
    they don't change the existing numbering.  There are two cases to
    worry about:
    
    1. New kernel, old userspace.  This is OK because old userspace simply
       won't try to use the new SRQ commands.  None of the old commands are
       changed.
    
    2. Old kernel, new userspace.  This works perfectly as long as
       userspace doesn't try to use SRQ commands.  If userspace tries to
       use SRQ commands, it will get EINVAL, which is perfectly
       reasonable: the kernel doesn't support SRQs, so we couldn't do any
       better.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d41fcc6705eddd04f7218c985b6da35435ed73cc
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Aug 18 12:23:08 2005 -0700

    [PATCH] IB: Add SRQ support to midlayer
    
    Make the required core API additions and changes for
    shared receive queues (SRQs).
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d1887ec2125988adccbd8bf0de638c41440bf80e
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Thu Aug 18 12:14:11 2005 -0700

    [PATCH] IB/mthca: Report correct max_msg_sz
    
    Set the max_msg_sz port property correctly in mthca's port_query
    function.  Also zero out the attr struct so that we don't leave
    any other members uninitialized.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit da6561c285a6e28a075b97fd5a1560a2b0ce843e
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Aug 17 07:39:10 2005 -0700

    [PATCH] IB/mthca: Use correct port width capability value
    
    When we call the INIT_IB firmware command to bring up a port, use
    the actual port width capability returned by the QUERY_DEV_LIM
    command instead of always trying to enable both 1X and 4X.  This
    fixes breakage seen when the firmware is build to allow 4X only.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2aeba9a03b0d249fc710b9939fc089ce53d8cd30
Author: Olaf Hering <olh@suse.de>
Date:   Mon Aug 15 14:29:03 2005 -0700

    [PATCH] IB: Remove unnecessary includes of <linux/version.h>
    
    changing CONFIG_LOCALVERSION rebuilds too much, for no appearent reason.
    Remove unneeded includes of <linux/version.h>.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 5dd2ce1200f4b12687d74de89a527f99e16c344e
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Mon Aug 15 14:16:36 2005 -0700

    [PATCH] IB: Fix ib_mad_thread_completion_handler declaration
    
    Change ib_mad_thread_completion_handler to conform to ib_comp_handler
    declaration.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 7f9f2dba729cee6ea10596ccb07447d467705b08
Author: Guy German <guyg@voltaire.com>
Date:   Mon Aug 15 07:38:50 2005 -0700

    [PATCH] IB/mthca: use generic function instead of arbel_ version in mthca_free_region()
    
    Use the generic key_to_hw_index() function instead of the Arbel-specific
    version in mthca_free_region().
    
    Signed-off-by: Guy German <guyg@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ffbf4c34f1916fa1e0554269c94c57da4a21a348
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Mon Aug 15 07:35:16 2005 -0700

    [PATCH] IB: unmap FMRs when destroying FMR pool
    
    Make sure that all FMRs are unmapped before we deallocate them so that
    we don't leak references to our protection domain when destroying an
    FMR pool.  (Bug reported by Guy German <guyg@voltaire.com>)
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2e8b981c5d5c6fe5479ad47c44e3e76ebb5408ef
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Aug 13 21:19:38 2005 -0700

    [PATCH] IB/mthca: add HCA board ID to sysfs info
    
    Add support for reporting HCA board ID returned from QUERY_ADAPTER
    firmware command through sysfs.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 97f52eb438be7caebe026421545619d8a0c1398a
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Aug 13 21:05:57 2005 -0700

    [PATCH] IB: sparse endianness cleanup
    
    Fix sparse warnings.  Use __be* where appropriate.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 92a6b34bf4d0d11c54b2a6bdd6240f98cb326200
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Aug 13 20:50:27 2005 -0700

    [PATCH] IB: Eliminate redundant NULL checks
    
    IPoIB: Eliminate NULL checks prior to calling kfree
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2a1d9b7f09aaaacf235656cb32a40ba2c79590b3
Author: Roland Dreier <roland@eddore.topspincom.com>
Date:   Wed Aug 10 23:03:10 2005 -0700

    [PATCH] IB: Add copyright notices
    
    Make some lawyers happy and add copyright notices for people who
    forgot to include them when they actually touched the code.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 49f6a7fbe123dde25ca4193a7d60705784e18317
Author: Tziporet Koren <tziporet@mellanox.co.il>
Date:   Wed Aug 10 23:00:50 2005 -0700

    [PATCH] IB: Update current firmware versions in mthca driver
    
    Update FW versions in mthca according to July 05 Mellanox release
    
    Signed-off-by: Tziporet Koren <tziporet@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d395bf12d1ba61437e546eb642f0d7ea666123ff
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Thu Aug 25 15:59:00 2005 -0400

    [ACPI] Reduce acpi-cpufreq switching latency by 50%
    
    The acpi-cpufreq driver does a P-state get after a P-state set
    to verify whether set went through successfully. This test
    is kind of redundant as set goes throught most of the times,
    and the test is also expensive as a get of P-states can
    take a lot of time (same as a set operation) as it goes
    through SMM mode. Effectively, we are doubling the P-state
    latency due to this get opertion.
    
    momdule parameter "acpi_pstate_strict" restores orginal paranoia.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5129
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 60cfff3516580f5c782cef4dc28f2974c4df8ed1
Merge: 89ef1a2... 212d6d2...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 26 22:11:28 2005 -0400

    Auto-update from upstream

commit 953d1137fc4aba16deace262e93974913596dcfe
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Aug 26 19:46:24 2005 -0400

    [libata sata_sil] list documentation URL, since its public

commit f8220c7f15c54aefb4976ad7c6e2aa98b27a8ce8
Author: Kenneth Chen <kenneth.w.chen@intel.com>
Date:   Fri Aug 26 14:57:00 2005 -0700

    [IA64] Delete erroneous copy_page.o in global lib-y list
    
    copy_page.o appeared twice in arch/ia64/lib/Makefile. The
    one in global lib-y is wrong where it should be just in
    lib-$(CONFIG_ITANIUM).
    
    Both copy_page.o and copy_page_mck.o are build for Itanium2
    processor and the link order will pick up the low performing
    copy_page function (originally written for itanium processor).
    In this case, we really want the copy_page_mck.o for optimized
    version.
    
    Signed-off-by: Kenneth Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4db8699bcfa8faddb5727b1cb010a4d9b8a42e8c
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Fri Jul 29 16:15:00 2005 -0700

    [IA64] Add ACPI based P-state support
    
    Patch to support P-state transitions on ia64. This driver is based on ACPI,
    and uses the ACPI processor driver interface to find out the P-state support
    information for the processor. This driver plugs into generic cpufreq
    infrastructure.
    
    Once this driver is loaded successfully, ondemand/userspace governor can be
    used to change the CPU frequency dynamically based on load or on request from
    userspace process.
    
    Refer :
    ACPI specification -
          http://www.acpi.info
    P-state related PAL calls -
          http://developer.intel.com/design/itanium/downloads/24869909.pdf
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d1e079b3fc90c7c114f46771e983a72ac8740882
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Aug 15 14:46:00 2005 -0700

    [IA64-SGI] fix bte_copy() calling smp_processor_id() while preemptible
    
    bte_copy() calls calls smp_processor_id(), which will get flagged if
    preemption if enabled.  raw_smp_processor_id() is used instead
    because we are just using it to pick a BTE interface and are not
    tied to a specific cpu.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b73fc89f6d1f84326e5e897ad249d00a9f218fd7
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri Aug 26 16:03:19 2005 +0100

    [PATCH] libata: regularize dma_start/stop arguments
    
    Needed for a few PATA drivers.
    
    Also fix up a wrong comment.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 31433ea369d250ad011577eee6110d3efcb9d861
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri Aug 26 15:56:47 2005 +0100

    [PATCH] libata: typo
    
    You spelt heuristic wrongly. Also reformatted to 80 columns,
    ignore the diff and fix the typo if you prefer that.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8409668b561fbe464f7a392e8dc77eca225d27ac
Author: Mark Maule <maule@sgi.com>
Date:   Thu Aug 25 11:45:00 2005 -0700

    [IA64] altix: Abstract irq_affinity at the sn pci provider
    
    Altix patch to abstract irq_affinity down to the pci provider level since
    different SGI hardware implements this in different ways.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3690b6c124fbc7259634f3b80d92a6d9fe51ec79
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri Aug 26 00:30:37 2005 +0200

    [PATCH] sis190: complete the mii probe before registering the netdevice
    
    The userspace must not be able to issue ethtool command and manage the
    mii before it is completely initialized. Avoid some pesky "eth%d" messages.
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b8f6153ee421014f42b620238f4203a4106db309
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 25 22:01:20 2005 -0400

    libata: fix EH locking
    
    Wrap ata_qc_complete() calls in EH context in spinlocks, to prevent
    races (mainly in ATAPI code paths).

commit 831a179fc9387af6dbaa12816ae1e074d1f1a730
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 25 20:59:10 2005 -0400

    hostap: s/IEEE80211_FCTL_WEP/IEEE80211_FCTL_PROTECTED/ to fix build

commit b4bf343093e81e33d75bede45896eda52cd5f2b4
Merge: 343b059... 099c5bb...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 25 20:31:13 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 099c5bb169e9816a7761336f668b63010762807b
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:15:10 2005 -0400

    ieee80211: use endian-aware types
    
    From: Michael Wu <flamingice@sourmilk.net>
    
    This patch:
    - fixes misc. whitespace/comments
    - replaces u16 with __le16/__be16 where appropriate
    
    Signed-off-by: Michael Wu <flamingice@sourmilk.net>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 95d5185d1ab6875b86a639310919dc48a716c7be
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:13:04 2005 -0400

    ieee80211: convert defines to enums
    
    From: Gertjan van Wingerde <gwingerde@home.nl>
    
    Attached patch cleans up the long lists of #defines for status codes,
    reason codes, and information elements.
    
    Signed-off-by: Gertjan van Wingerde <gwingerde@home.nl>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit f13baae43e97e84d3f06080908db75a017c62165
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:11:46 2005 -0400

    ieee80211: new constants from latest 802.11x specifications
    
    From: Gertjan van Wingerde <gwingerde@home.nl>
    
    Attached patch updates the definitions of the generic ieee80211 stack to
    the latest versions of the published 802.11x specification suite.
    
    Signed-off-by: Gertjan van Wingerde <gwingerde@home.nl>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 8d45ff7d7bd85d9066f5b498cda5c4a52ac36a7f
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:09:39 2005 -0400

    ipw2200: minor cleanups
    
    This removes one trap for a programmer, few unused macros, and one
    unused struct.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 771abed990d8642f289f733dc0fa8a395ab31ca1
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:08:22 2005 -0400

    This removes support for old (and non-mainline) kernels from ipw2200.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 3ce329cec29b788bd5d9aaa446fd7ecdd4df64fe
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:07:01 2005 -0400

    ipw2100: interface-up carrier state fix
    
    From: Imre Deak <imre.deak@nokia.com>
    
    I had a problem where doing an open after a close left the device
    unusable. netif_carrier_on should be called whenever we go to the
    associated state, but this is not so in case of a close->open sequence.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 53788015c736b9957448aebd7b7c286da217ee51
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:05:45 2005 -0400

    ipw2100: Fix incorrectly named config option.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: Jirka Bohac <jbohac@suse.cz>

commit c4aee8c21ff5d8d6f9a27112468f5e840d5ced1b
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:04:43 2005 -0400

    ipw2100: minor cleanups
    
    From: Adrian Bunk <bunk@stusta.de>
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - remove the unused IPW_DEBUG_ENABLED
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 797b4f7652a4dcf06bdf6a8c870991acdf56c03d
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:03:27 2005 -0400

    ipw2100: remove custom debug-print macros
    
    From: Pavel Machek <pavel@ucw.cz>
    
    ipw2100 uses custom debug prints that are sometimes longer and always
    harder to read than normal printk. They also introduced some bugs where
    prefix is printed twice.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 19f7f74297e7f88f60c183acb105a5488dd189b6
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:02:10 2005 -0400

    ipw2100: remove strange symbol prefixes
    
    From: Pavel Machek <pavel@ucw.cz>
    
    ipw2100 uses strange X__ prefixes even for symbols already prefixed
    by ipw2100. Fixed.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit e88187eedc0a9223914b23b063342db8bcc31f9c
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Aug 25 20:00:53 2005 -0400

    ieee80211: Puts debug macros together and makes escape_essid not inlined.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: Jirka Bohac <jbohac@suse.cz>

commit 89ef1a21a174a4f581a4b6973f9a9f9ee28a9304
Merge: 09d4a80... 78f81cc...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 17:41:14 2005 -0400

    merge ibm into test

commit 78f81cc4355c31c798564ff7efb253cc4cdce6c0
Author: Borislav Deianov <borislav@users.sf.net>
Date:   Wed Aug 17 00:00:00 2005 -0400

    [ACPI] IBM ThinkPad ACPI Extras Driver v0.12
    
    http://ibm-acpi.sf.net/
    
    Signed-off-by: Borislav Deianov <borislav@users.sf.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 611494dccacb3e42f55359df74d604b67312598b
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:06:52 2005 -0700

    [PATCH] e100: Driver version, white space, comments & other
    
    Driver version, white space, comments & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 685fac63f5ca6c5ca06bab641e1a32bbf9287e89
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:06:34 2005 -0700

    [PATCH] e100: CPU cycle saver microcode
    
    Add cpu cycle saver microcode to 8086:{1209/1229} other than ICH devices.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e6280f26b43775d8fa0c54e50c92491cfccbf738
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:06:23 2005 -0700

    [PATCH] e100: Increased delay loop for command blocks
    
    Increased delay loop for command blocks
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 996ec3533ae15424e339089a8045ca1c998f8a87
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:06:08 2005 -0700

    [PATCH] e100: fixed endian bug in xmit_prepare routine
    
    Fixed endian bug associated with cb_i bit in xmit_prepare
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a074fb860846937a4a46dbbf439cbbb2e2ba960c
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:05:57 2005 -0700

    [PATCH] e100: added msleep_interruptible delay
    
    added msleep_interruptible delay right before returning from diag_test
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 136df52d532af9c19e5cd0e43a54ea4ee2d934fc
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 25 13:05:41 2005 -0700

    [PATCH] e100: Do not check Rx packet length against mtu
    
    Do not check Rx packet length against mtu - patch from Darren Tucker
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 09d4a80e66cdf3e68cdb06e907f7bc0b242acbd0
Merge: d0d59b9... 9c2c38a...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:45:49 2005 -0400

    Merge HEAD from ../from-linus

commit d0d59b98d7a0b3801ce03e695ba885b698a6d122
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:41:22 2005 -0400

    [IA64] fix allnoconfig build
    
    cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6153df7b2f4d27c8bde054db1b947369a6f64d83
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:27:09 2005 -0400

    [ACPI] delete CONFIG_ACPI_PCI
    
    Delete the ability to build an ACPI kernel that does
    not include PCI support.  When such a machine is created
    and it requires a tuned kernel, send a patch.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=1364
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 07fefe4ca93b3e45b2bea32871a4496067888852
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:22:04 2005 -0400

    [ACPI] remove "default m" from acpi/Kconfig
    
    Andi Kleen suggested it was unconventional for us to "default m"
    on ACPI modules -- even though they are expected to be deployed
    as modules.  But as "default n" would likely result in some
    users building nonsense kernels, we compromise to "default y".
    
    Distros are expected to continue to use =m in their configs.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit bfea6c2af798d9a882bbc6b9ae9893ab1864d230
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:15:11 2005 -0400

    [ACPI] reduce use of EXPERIMENTAL in acpi/Kconfig
    
    Distros are shipping modules we had marked EXPERIMENTAL,
    so clearly it has lost some meaning.
    
    Delete that dependency for shipping modules, retaining
    it only for ACPI_HOTKEY and ACPI_CONTAINER to emphasize
    that they lack testing on real hardware.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit eb7b6b32644f7a48357e02f8004f88b3220f3494
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 25 12:08:25 2005 -0400

    [ACPI] IA64-related ACPI Kconfig fixes
    
    Build issues were mostly in the ACPI=n case -- don't do that.
    Select ACPI from IA64_GENERIC.
    Add some missing dependencies on ACPI.
    
    Mark BLACKLIST_YEAR and some laptop-only ACPI drivers
    as X86-only.  Let me know when you get an IA64 Laptop.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5b9021bc5800796e23e4994f8cf2dc61536be0a7
Author: Russ Anderson <rja@sgi.com>
Date:   Wed Aug 17 10:00:00 2005 -0700

    [IA64] SGI SN remove redundant partition SAL call
    
    Clean up of SGI SN partitioning related code.
    The SN_SAL_GET_SN_INFO SAL call returns the partition ID, making
    the SN_SAL_SYSCTL_PARTITION_GET SAL call redundant.  Remove sn_partid
    and use sn_partition_id.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 5390970d1c11b6d5d6a8253a718ed100e2178e14
Author: Mark Goodwin <markgw@sgi.com>
Date:   Tue Aug 16 00:51:00 2005 -0700

    [IA64] - SGI SN hwperf enhancements -
    
    Update the SN pci device info to use the nearest node function
    to allocate driver memory on the nearest node (rather than
    defaulting to node 0).
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 60a3ba0bb45995ecf9cfe208527d7cfd6128d053
Author: Mark Goodwin <markgw@sgi.com>
Date:   Wed Aug 17 15:17:00 2005 -0700

    [IA64] - SGI SN hwperf enhancements -
    
    Add a new exported function for determining the nearest node
    with CPUs for I/O nodes and fix a bug where the hwperf dynamic
    misc device was being registered before misc_init().
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ecc3c30ae39c4d3cbf249a1ebd599465e0e25708
Author: Mark Goodwin <markgw@sgi.com>
Date:   Tue Aug 16 00:50:00 2005 -0700

    [IA64] - SGI SN hwperf enhancements - export_pci_topology
    
    Bugfix to export PCI topology information in /proc/sgi_sn/sn_topology.
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1b66776da71e33dff5edcc0b096ec3b7c40c75ad
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Mon Aug 22 09:57:00 2005 -0700

    [IA64] clean up sn2 region definitions
    
    Clean up some duplicate region definitions in sn2 code.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0a41e2501160587eb8f66cef3bdf1c6f2cb86997
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue Aug 16 19:54:00 2005 -0700

    [IA64] Rationalise Region Definitions
    
    Currently, region numbers are defined in several files, with several
    names.  For example, we have REGION_KERNEL in asm/page.h and
    RGN_KERNEL in pgtable.h
    
    We also have address definitions that should depend on the
    RGN_XXX macros, but are currently just long constants.
    
    The following patch reorganises all the definitions so that they have
    the same form (RGN_XXX), are in one place, and that addresses that
    depend on RGN_XXX are derived from them.
    
    (This is a necessary but not sufficient patch to allow UML-like
    operation on IA64).
    
    Thanks to David Mosberger for catching the change I missed in mmu_context.h.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b5f3616ba73699d07deee1f244179fae49502052
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Aug 23 09:24:00 2005 -0700

    [IA64] fix IO_SPACE_SPARSE_ENCODING macro ambiguity
    
    Parenthesize "p" to avoid ambiguity.  No callers have a problem today;
    this is just to clean up the bad form.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 38d26b9f577ec63ba64926c45f4ee3805ed2041c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Aug 24 03:58:00 2005 -0700

    [IA64] arch/ia64/hp/sim/boot/fw-emu.c: remove egcs workaround
    
    Kernel 2.6 doesn't support egcs, and I didn't find any user of this
    function.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a877bd36f7584fd7e4729099348cfc9190ba00aa
Author: Kumar Gala <kumar.gala@freescale.com>
Date:   Wed Aug 24 09:53:00 2005 -0700

    [IA64] remove use of asm/segment.h
    
    Removed IA64 architecture specific users of asm/segment.h
    The removal of asm-ia64/segment.h itself can wait until all
    of the kernel source has been purged of references.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 76f58584824c61eb5b3bdbf019236815921d2e7c
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 24 12:10:49 2005 -0400

    [ACPI] delete CONFIG_ACPI_BUS
    
    it is a synonym for CONFIG_ACPI
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8466361ad5233d4356a4601e16b66c25277920d1
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 24 12:09:07 2005 -0400

    [ACPI] delete CONFIG_ACPI_INTERPRETER
    
    it is a synonym for CONFIG_ACPI
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 888ba6c62bc61a995d283977eb3a6cbafd6f4ac6
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 24 12:07:20 2005 -0400

    [ACPI] delete CONFIG_ACPI_BOOT
    
    it has been a synonym for CONFIG_ACPI since 2.6.12
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 75a95178dafb5c8d69b4abe45ea746a9cea23142
Merge: 8531c5f... 0572e3d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 24 01:03:34 2005 -0400

    Merge upstream into 'upstream' branch of netdev-2.6.git.
    
    Hand fix merge conflict in drivers/net/tokenring/Kconfig.

commit 343b0597297c3190647854881c087c01faf40a6f
Merge: b2dabd5... b2382b3...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 24 01:02:24 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit b2382b363df828f25e35ed8b70a3da33b29b2a64
Merge: 1b5cca3... 0572e3d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 24 01:02:04 2005 -0400

    Merge upstream into ieee80211.
    
    Hand-fix merge conflict in drivers/usb/net/zd1201.c.

commit 617e44fdfd7ee3d53388ab295d9411b826437ce9
Merge: 4887f76... 0572e3d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 24 00:55:22 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 84ffa747520edd4556b136bdfc9df9eb1673ce12
Merge: 702c7e7... 81065e2...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Aug 23 22:12:23 2005 -0400

    Merge from-linus to-akpm

commit 16592d269801ea68130b283c888ffb3c3e988299
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Aug 22 12:20:00 2005 -0700

    [IA64] Remove rwsem limitation of 32k waiters
    
    We ran into the limit with the maximum number of waiters at one of our sites.
    
    This patch increases the number of possible waiters from 2^15 to 2^31 by using
    a long for the counter in struct rw_semaphore. S390 and alpha already do this.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: Kenneth Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4887f76ec3d38e99286c9d0fdd6a719174d02e44
Merge: 1410b0a... 6885433...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 23 03:35:44 2005 -0400

    /spare/repo/libata-dev branch 'upstream-fixes'

commit 8531c5ffbca65f6df868637c26e6df6f88bff738
Author: Arthur Kepner <akepner@sgi.com>
Date:   Tue Aug 23 01:34:53 2005 -0400

    [PATCH] bonding: inherit zero-copy flags of slaves
    
    This change allows a bonding device to inherit the "zero-copy"
    features of its slave devices.
    
    It was inspired by a couple of previous postings on this topic:
    http://marc.theaimsgroup.com/?l=bonding-devel&m=111924607327794&w=2
    http://marc.theaimsgroup.com/?l=bonding-devel&m=111925242706297&w=2
    and it's largely a combination of the patches that appear in those
    emails.
    
    Signed-off-by: Arthur Kepner <akepner@sgi.com>

commit efcce839360fb3a7b6dedeacaec80f68b0f2d052
Author: Finn Thain <fthain@telegraphics.com.au>
Date:   Sat Aug 20 15:53:22 2005 +1000

    [PATCH] macsonic/jazzsonic network drivers update
    
    The purpose of this patch:
    
    - Adopt the DMA API (jazzsonic, macsonic & core driver).
    
    - Adopt the driver model (macsonic).
    
    This part was cribbed from jazzsonic. As a consequence, macsonic once
    again works as a module. Driver model is also used by the DMA calls.
    
    - Support 16 bit cards (macsonic & core driver, also affects jazzsonic)
    
    This code was adapted from the mac68k linux 2.2 kernel, where it has
    languished for a long time.
    
    - Support more 32-bit mac cards (macsonic)
    
    Also from mac68k repo.
    
    - Zero-copy buffer handling (core driver)
    
    Provides a nice performance improvement. The new algorithm incidentally
    helped to replace the old Jazz DMA code.
    
    The patch was tested on a variety of macs (several 32-bit quadra built-in
    NICs, a 16-bit LC PDS NIC and a 16-bit comm-slot NIC), and also on MIPS
    Jazz.
    
    Signed-off-by: Finn Thain <fthain@telegraphics.com.au>
    Acked-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1410b0a7ad3178968c120bad726976fb48ab336b
Merge: e4deec6... f6fdd7d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 23 01:07:10 2005 -0400

    Merge /spare/repo/linux-2.6/

commit e4deec6304cbd5fd08bf573eccc68787945071c2
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Aug 23 07:27:25 2005 +0900

    [PATCH] sil: apply M15W quirk selectively (take 2)
    
     As SII reports that only original 3112's are affected by M15W quirk,
    This patch adds SIL_FLAG_MOD15WRITE to selectively apply M15W quirk
    depending on chipsets.  As of yet, we don't know exactly which PCI IDs
    are for original 3112, so M15W quirk is applied to all except for 3512
    and 3124.  Once more info is avaliable, we can change some of these
    sil_3112_m15w's to sil_3112.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 40e8c82c74b9be793601e098fd1313bc2632c5dc
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Aug 22 17:12:45 2005 +0900

    [PATCH] libata: implement ata_poll_qc_complete and use it in polling functions
    
    [PATCH libata-dev-2.6:upstream] implement ata_poll_qc_complete and use it in polling functions
    
     Previously, libata polling functions turned irq back on and completed
    qc commands without holding host lock.  This creates a race condition
    between the polling task and interrupts from other ports on the same
    host set or spurious interrupt from itself.
    
     This patch implements ata_poll_qc_complete which enables irq and
    completes qc atomically and convert all polling functions.
    
     Note: atapi_packet_task() didn't use to turn irq back on or clear
    ATA_FLAG_NOINTR on error exits.  This patch makes it use
    ata_poll_qc_complete which does both.
    
     Note: With this change, ALL invocations of ata_qc_complete() are now
    done under host_set lock.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c1389503710ef4b4e5d21bea284afde19e9619cf
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Aug 22 14:59:24 2005 +0900

    [PATCH] fix atapi_packet_task vs. intr race (take 2)
    
    Interrupts from devices sharing the same IRQ could cause
    ata_host_intr to finish commands being processed by atapi_packet_task
    if the commands are using ATA_PROT_ATAPI_NODATA or ATA_PROT_ATAPI_DMA
    protocol.  This is because libata interrupt handler is unaware that
    interrupts are not expected during that period.  This patch adds
    ATA_FLAG_NOINTR flag to tell the interrupt handler that we're not
    expecting interrupts.
    
     Note that once proper HSM is implemented for interrupt-driven PIO,
    this should be merged into it and this flag will be removed.
    
     ahci.c is a different kind of beast, so it's left alone.
    
    * The following drivers use ata_qc_issue_prot and ata_interrupt, so
      changes in libata core will do.
    
      ata_piix sata_sil sata_svw sata_via sata_sis sata_uli
    
    * The following drivers use ata_qc_issue_prot and custom intr handler.
      They need this change to work correctly.
    
      sata_nv sata_vsc
    
    * The following drivers use custom issue function and intr handler.
      Currently all custom issue functions don't support ATAPI, so this
      change is irrelevant, updated for consistency and to avoid later
      mistakes.
    
      sata_promise sata_qstor sata_sx4
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c0b34ad2956036cdba87792d6c46d8f491539df1
Author: Martin Wilck <martin.wilck@fujitsu-siemens.com>
Date:   Thu Aug 4 09:04:56 2005 +0200

    [PATCH] Fix HD activity LED with ahci
    
    Patch: fix wrong HD activity control by ahci driver
    
    The ahci driver 1.0 sets the SActive bit on every transaction,
    causing the LED to light up. The SActive bit is used only for
    native command queuing (NCQ) which the current driver version
    doesn't implement. Resetting the SActive bit is the device's
    responsibility (by sending a "Set Device Bits FIS" to the
    host adapter) but this is not required in response to
    non-NCQ commands, and (most) devices don't. Thus the LED
    stays always on. This patch fixes the LED behavior.
    
    Spec references:
    http://www.intel.com/technology/serialata/pdf/rev1_1.pdf, sec. 3.3.13, 5.5.1
    http://www.serialata.org/docs/serialata10a.pdf
    http://www.intel.com/design/storage/papers/25266401.pdf
    
    Signed-off-by: Martin Wilck <Martin.Wilck@fujitsu-siemens.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9309049544935f804b745aa4dea043fb39b2bf2a
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Aug 22 14:59:23 2005 +0100

    [PATCH] sata_promise: Add PDC40519 id
    
    The Promise TX4200 is a 4-port SATA controller based on the PDC40519 chip. It
    meets the description of the 20319, so just a simple ID needs to be added to
    support this hardware. Thanks to Martin Povoln for testing.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 08b791c02b86e25f456cba64f5f1a1f90326db1d
Author: Otto Meier <gf435@gmx.net>
Date:   Mon Aug 22 14:58:57 2005 +0100

    [PATCH] sata_promise: Add PDC40718 id
    
    Otto Meier recently submitted a patch to support the PDC40718 chip (marketed
    as SATA300 TX4, a 4-port SATA controller).
    
    Signed-off-by: Otto Meier <gf435@gmx.net>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3f3791d30036a367f05b9d0be28ce7ff2e017a5a
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Aug 16 14:25:38 2005 +0800

    [PATCH] libata: Clear ATA_QCFLAG_ACTIVE flag before calling the completion callback
    
    Description:
      After calling the completion callback, the libata error handler might be
    running and getting atapi sense data. Clearing the ATA_QCFLAG_ACTIVE flag
    at this point might interfere with the libata error handler.
    
    Changes:
       - Clear the ATA_QCFLAG_ACTIVE flag before calling the completion callback
         (and also before the error handler)
       - Add some comment
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 443d089703ffa585aea1af47c68f1be5d0ec3115
Merge: 972dcaf... 563a6e1...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Aug 23 00:59:54 2005 -0400

    /spare/repo/libata-dev branch 'upstream-fixes'

commit 2600636065406dc14948ac2d2913c66c51be80d5
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Mon Aug 22 15:53:29 2005 -0700

    [PATCH] mv643xx: add workaround for HW checksum generation bug
    
    [PATCH] [NET] mv643xx: add workaround for HW checksum generation bug
    
    The hardware checksum generator on the mv64xxx occasionally generates
    an incorrect checksum.  This patch works around the issue and enables
    hardware checksum generation.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7a9aff3cff807261e476a1719273a4ac5d254ecb
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Tue Aug 23 12:15:43 2005 +1000

    drm: fix a bad VERSION check.
    
    I found why my G5 was crashing when using the linux-2.6 version of the
    DRM + git-drm.patch from 2.6.13-rc6-mm1, but not with the CVS DRM.
    The reason was that dev->agp->cant_use_aperture wasn't getting set,
    and the reason for that was that <linux/version.h> no longer gets
    included and the #if LINUX_VERSION_CODE < 0x020408 in drm_agpsupport.c
    was going the wrong way.  With this patch (and a few others) a 32-bit
    server works correctly, as does DRI.
    
    From: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 2c40579bdc2a94977fcff2521d5b53a97c33e77a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Aug 22 18:20:50 2005 +0200

    [PATCH] SECURITY must depend on SYSFS
    
    CONFIG_SECURITY=y and CONFIG_SYSFS=n results in the following compile
    error:
    
    <--  snip  -->
    
    ...
      LD      vmlinux
    security/built-in.o: In function `securityfs_init':
    inode.c:(.init.text+0x1c2): undefined reference to `kernel_subsys'
    make: *** [vmlinux] Error 1
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit e0c93142ceed0a2ea4f5b8e9d0f62c884241e9c0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Aug 20 17:20:28 2005 +0100

    [ARM] fs/adfs/adfs.h: "extern inline" doesn't make sense
    
    "extern inline" doesn't make sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 88f399cd0a5a540db2815eee3002f8f00ef6461e
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sat Aug 20 17:43:33 2005 +1000

    drm: fixes for powerpc
    
    Remove a bogus check on whether an area is memory (we need a better interface)
    also change pgprot flags for powerpc
    don't check on x86-64 either
    
    From: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit ffbbf7a3ccdcac7526296a55968e5dac0626fd9e
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sat Aug 20 17:40:04 2005 +1000

    drm: add new texture upload code from r300 project
    
    Paul Mackerras did some new upload code for r300, I forgot to add it
    to the kernel with r300 merge.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 945a787675cc5ba362f5d4ce135d2a2c20be5985
Author: Peer Chen <Peer.Chen@uli.com.tw>
Date:   Sat Aug 20 01:10:06 2005 -0400

    [netdrvr uli526x] fix problems found in review
    
    - s/DEVICE/net_device/
    - improve formatting
    - remove dead code
    - check return value, in several areas

commit e960fc5c7d9144b1ce80dda9891ca7dfc656c078
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Fri Aug 12 10:15:59 2005 -0700

    [PATCH] S2io: Hardware fixes for Xframe II adapter
    
    Hi,
    
    Patch Description:
    This patch incorporates the following hardware fixes required
    for Xframe II adapter.
    1. New values to program the dtx_control register.
    2. Disable memory controller interrupts(MC_INTR) since these
       are now monitored thru' a poll routine.
    3. Don't reset an XframeII card on an ECC double-bit error(It
       can recover).
    4. Save/restore PCI config space before/after a reset irrespective
       of Xframe I or II card.
    5. Bumped up the driver version no. to 2.0.3.1
    
    Please review the patch and apply the same if it looks ok.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3d52365c4f62edb9ff9710e1c57952e957b2879f
Author: Jochen Friedrich <jochen@scram.de>
Date:   Fri Aug 19 15:51:46 2005 +0200

    [PATCH] tms380tr: remove prototypes in Space.c
    
    Cleanup: remove two prototypes.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 84c3ea01d163a24323d827e1d280dc3346905972
Author: Jochen Friedrich <jochen@scram.de>
Date:   Fri Aug 19 21:05:56 2005 -0400

    [netdrvr] Convert madgemc to new MCA API.
    
    Now that all tms380 devices have a valid
    struct device with dma_mask, remove dmalimit from tmsdev_init().
    
    Kconfig: depend tms380tr and madgemc on MCA.
    abyss.c, proteon.c, skisa.c, tmspci.c, tms380tr.h:
      remove dmalimit parameter from tmsdev_init().
    tms380tr.c: use device->dma_mask instead of dmalimit.
    madgemc.c: move to new MCA API using struct device.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 01fa90cb2f0b664bc86d9aff807f4ea7f09e2e7f
Merge: 686762c... 2ad5649...
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Aug 19 10:37:59 2005 -0500

    Merge with /home/shaggy/git/linus-clean/

commit dce773771834221817e2d359a7e07a618ba08807
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Aug 19 09:42:52 2005 +0100

    [MMC] Use an IDR for host name indicies
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1ad434d7cf5f490c71cfbbb2fb91076c01c8704e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Aug 19 09:42:21 2005 +0100

    [MMC] Use class device name for mmc host name
    
    There's no point in having the host name duplicated between
    the mmc_host structure and the encapsulated class device
    structure.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 00b137cfda5276b3d2c87d44236fe4c5ee68b405
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Aug 19 09:41:24 2005 +0100

    [MMC] Add MMC class devices
    
    Create a mmc_host class to allow enumeration of MMC host controllers
    even though they have no card(s) inserted.
    
    Patch based on work by Pierre Ossman.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d366b6436386875b1310ce8f70e3f9dea4647bac
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Aug 19 09:40:08 2005 +0100

    [MMC] Add mmc_hostname() macro
    
    mmc_hostname() returns a pointer to the hostname for the mmc_host.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9f7f0098eaadd9200ab52ad0dad523f797d3bf39
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Aug 19 03:52:49 2005 -0400

    [netdrvr eepro100] check for skb==NULL before calling rx_align(skb)

commit b4ee21f442ba7a8c43e00b32088d437259890cd0
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 27 01:14:44 2005 -0700

    [PATCH] e1000 printk warning fix 2
    
    drivers/net/e1000/e1000_main.c: In function `e1000_clean_tx_irq':
    drivers/net/e1000/e1000_main.c:2774: warning: size_t format, dma_addr_t arg (arg 8)
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d9a8a0a3574525bf422fd2f05eec739c0d25814f
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Sat Aug 6 12:01:43 2005 +0900

    [PATCH] network: fix fmvj18x_cs multicast code
    
    The multicast code of the fmvj18x_cs driver is broken.
    I fixed it to work properly.
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e9985d53e3da3b51d0334d0622c449fda78ae089
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Aug 9 02:41:00 2005 +0200

    [PATCH] SIS190 must select MII
    
    SIS190 must select MII since it's using it.
    
    While I was editing the Kconfig entry, I also converted the spaces to
    tabs.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 913168de6284cd27810e9ee7ae029d408a2a0555
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 01:12:11 2005 +0200

    [PATCH] r8169: PCI ID for the Linksys EG1032
    
    The Linksys EG1032 uses Realtek's 8169 chipset.
    
    Credit goes to Bob Wilson <bwilson4web@hotmail.com> for the report.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b2dabd5aadae6a93026f35269e1e53c1a0c6de2d
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 13 00:33:46 2005 -0700

    [PATCH] more-u32-vs-pm_message_t-fixes-6
    
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a51d74409d856e472bad753aecf1f2715718c242
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Jun 27 09:20:04 2005 -0700

    [PATCH] net/cycx_drv: replace delay_cycx() with msleep_interruptible()
    
    Use msleep_interruptible() instead of delay_cycx() to guarantee the task
    delays as expected. Remove the prototype and definition of delay_cycx().
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1b1b3c9b6d346d441a99e2de0b34f3ba93963ad8
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sat Aug 6 23:47:55 2005 +0200

    [PATCH] forcedeth: Initialize link settings in every nv_open()
    
    Rdiger found a bug in nv_open that explains some of the reports
    with duplex mismatches:
    nv_open calls nv_update_link_speed for initializing the hardware link speed
    registers. If current link setting matches the values in np->linkspeed and
    np->duplex, then the function does nothing.
    Usually, doing nothing is the right thing, but not in nv_open: During
    nv_open, the registers must be initialized because the nic was reset.
    
    The attached patch fixes that by setting np->linkspeed to an invalid value
    before calling nv_update_link_speed from nv_open.
    
    Signed-Off-By: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a3bc068022b968a3042b48eb9a8e8b0418fb9cdd
Merge: 54cfb5a... 91aa9fb...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 18 22:14:39 2005 -0400

    Merge /spare/repo/linux-2.6/

commit e8579e72ca240f3fbaa669f09a9d610436505366
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Thu Aug 4 13:06:00 2005 -0700

    [IA64, X86_64] fix swiotlb sizing
    
       Fix swiotlb sizing to match what the comments and the kernel
    parameters documentation indicate.  Given a default 16k page size kernel
    (ia64) and a 2k swiotlb page size, we're off by a multiple of 8 trying
    to size the swiotlb.  When specified on the boot line, the swiotlb is
    made 8x bigger than requested.  When left to the default value, it's 8x
    smaller than the comments indicate.  For x86_64 the multiplier would be
    2x.  The patch below fixes this.  Now, what's a good default swiotlb
    size?  Apparently we don't really need 64MB.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f27ecacc54cc0e5397c9b35f6c25065f07c4448d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 18 21:31:00 2005 +0100

    [ARM] Add support for ARM GIC
    
    Add support for the ARM Generic Interrupt Controller.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 323cdfc191b7c1597dc748175062c368568d6af4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 18 10:10:46 2005 +0100

    [MFD] Add SA11x0 MCP platform device support
    
    Add platform device data for the SA11x0 MCP device.  This allows
    platforms to customise the configuration of the SA11x0 MCP device
    according to their needs.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5e742ad66b4a8ba6f9d729660f822676d9e405d4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 18 10:08:15 2005 +0100

    [MFD] Add SA11x0 MCP support
    
    This adds support for the MCP interface found on SA11x0 devices.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a4e137ab1447fc5009f21e257971aa60a9ec98fb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 18 10:06:59 2005 +0100

    [MFD] Add multimedia communication port core support
    
    Add support for the core of the multimedia communication port
    framework.  This is a port used to communicate with devices
    with two DMA paths and a control path.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8c8b83854ea973ee7f37db6612d10d3acc5531d9
Author: Dave Jones <davej@redhat.com>
Date:   Wed Aug 17 23:08:11 2005 -0700

    Fix up various printk levels and whitespace corrections.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit a8b3e6f10f08f66ae1072efd087b30966a3654f6
Merge: 46acac3... 099d44e...
Author: Dave Jones <davej@redhat.com>
Date:   Wed Aug 17 22:56:07 2005 -0700

    Merge /pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 470ceb05d9a2b4d61c19fac615a79e56e8401565
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:28:00 2005 -0700

    [IA64-SGI] - New SN hardware support - ptc_fixes
    
    Shub2 provides a much improved mechanism for issuing internode
    TLB purges. Add code to support the newer mechanism. There is also
    some debug code (disabled) that is useful for testing.
    
    Collect statistics on the number, type & duration of TLB purges.
    This data will be useful for making future improvements in the algorithms.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 68b9753f47953930cb94de0223c163f289399091
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:28:00 2005 -0700

    [IA64-SGI] - New SN hardware support - cpu_relax
    
    Add a few missing calls to "hint @pause".
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7e95b9d6e21eda23bac1ff024d465d2072c8996d
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:27:00 2005 -0700

    [IA64-SGI] - New SN hardware support - bte_fixes
    
    Change the BTE driver so that it works for both shub1 and
    shub2. Most of the changes are related to the number of cores
    that use the BTE engine, to the MMR addresses of various
    shub registers, and to using the correct processor or network
    physical address.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1007d02160974a46cc4fd3b1737c183c0471b88f
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:27:00 2005 -0700

    [IA64-SGI] - New SN hardware support - no_wars
    
    Disable some shub1-specific code when running on systems with shub2.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2fdbb590e4f9b346e5d06cf7f85dcb7a9f2e0a48
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:26:00 2005 -0700

    [IA64-SGI] - New SN hardware support - boot_init_shub2
    
    Update the addresses of the pio_write_status_addr so that
    they are correct for newer processors. Shub2 did not number
    the threads in the order that I had expected.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0aa2c72e59cf1d09a0b321e4e6292af78a51b8b3
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:26:00 2005 -0700

    [IA64-SGI] - New SN hardware support - use_alias_space
    
    Use local SHUB alias space when referencing MMRs that are known
    to be node local. There is a slight performance benefit & code
    simplification.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3d14487b2677cc44b5d1ef115d9d4301ec046591
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 11 10:25:00 2005 -0700

    [IA64-SGI] - New SN hardware support - addr_macros
    
    Update the SN address macros so that they work on both shub1
    and shub2. Most of the code to support shub2 was added last year
    but this patch fixes a few bugs and adds macros to help generate
    both processor-specific physical addresses & numalink physical
    addresses. More cleanup & optimization will be done later.
    
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 686762c8049457a6255ad5caf9275c100fbaceb6
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Aug 17 13:53:13 2005 -0500

    JFS: Initialize dentry->d_op for negative dentries too
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 3c789a19054034847afe80af2f23ebb0eebfbad6
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Wed Aug 17 16:05:35 2005 +0100

    AUDIT: Prevent duplicate syscall rules
    
    The following patch against audit.81 prevents duplicate syscall rules in
    a given filter list by walking the list on each rule add.
    
    I also removed the unused struct audit_entry in audit.c and made the
    static inlines in auditsc.c consistent.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c3896495942392f1a792da1cafba7a573cbf6fc2
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Aug 17 14:49:57 2005 +0100

    AUDIT: Speed up audit_filter_syscall() for the non-auditable case.
    
    It was showing up fairly high on profiles even when no rules were set.
    Make sure the common path stays as fast as possible.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 413a1c7520ad6207c9122a749983c500f29e3e32
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Aug 17 14:45:55 2005 +0100

    AUDIT: Fix task refcount leak in audit_filter_syscall()
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 327b6b08d6ab3bf5488120ba02ed2fe06b09efe6
Merge: c973b11... 2ad5649...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Aug 17 14:37:55 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 54cfb5aa0f4859bd38706eabe0118175780a542f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 16 14:01:05 2005 -0700

    [PATCH] skge: turn on link status LED
    
    Turn on the link status LED when link comes up.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c59230818f7a8969c2f9d3b601745679127a4016
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 16 14:01:02 2005 -0700

    [PATCH] skge: increase receive flush threshold default
    
    The flush threshold in the MAC chip should be increased.
    Found while reviewing vendor version of sk98lin driver.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5e1705ddc83f77da4b29a6d687da14e971912e41
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 16 14:00:58 2005 -0700

    [PATCH] skge: fibre vs copper detection cleanup
    
    Cleanup the code that handles fibre vs copper detection.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    
     drivers/net/skge.c |   26 ++++++++++++--------------
     drivers/net/skge.h |   11 ++---------
     2 files changed, 14 insertions(+), 23 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 050ec18a35f3106437da8e9c55e441c076c7b93e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 16 14:00:54 2005 -0700

    [PATCH] skge: stop bogus sensor messages
    
    Some versions of the Marvell yukon generate bogus sensor warning interrupts.
    The driver would flood log with these messages.  Handle this situation
    cleanly by masking away at boot time.
    
    Fixes: http://bugs.gentoo.org/show_bug.cgi?id=87182
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    
     drivers/net/skge.c |   24 ++++++++++--------------
     drivers/net/skge.h |    8 ++++++--
     2 files changed, 16 insertions(+), 16 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c8b432dc0c8d635254010513ca1a3a10a77037a1
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Tue Aug 16 20:54:18 2005 +1000

    drm: update pci ids for savage and via
    
    Fixup savage and via pci ids
    
    From: Dave Airlie <airlied@linux.ie>

commit 414ed537995617f4cbcab65e193f26a2b2dcfa5e
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Tue Aug 16 20:43:16 2005 +1000

    drm: add initial r300 3D support.
    
    This adds initial r300 3D support to the radeon DRM.
    
    From: Nicolai Haehnle, Vladimir Dergachev, and others.
    Signed-off-by: David Airlie <airlied@linux.ie>

commit 702c7e7626deeabb057b6f529167b65ec2eefbdb
Author: MAEDA Naoaki <maeda.naoaki@jp.fujitsu.com>
Date:   Mon Aug 8 01:09:00 2005 -0400

    [ACPI] fix ia64 build issues resulting from Lindent and merge
    
    Signed-off-by: MAEDA Naoaki <maeda.naoaki@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Brown, Len <len.brown@intel.com>

commit 1a402aaca51b7d56e62348f50a426c531b6bc29e
Author: Greg Howard <ghoward@sgi.com>
Date:   Mon Aug 15 13:00:00 2005 -0700

    [IA64-SGI] fix unaligned memory access in snsc_event.c
    
    It's been pointed out that environmental events from the system
    controllers on Altix machines cause the kernel to complain about
    unaligned memory accesses.  This turns out to be because
    "be32_to_cpup()" didn't do everything I thought/hoped it did.
    I've added calls to pull the offending integers out of the
    buffers using get_unaligned() before feeding them to
    be32_to_cpup().
    
    Signed-off-by: Greg Howard <ghoward@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 09d92002718edf8ef284ec3726247acc83efbbe0
Merge: cb220c1... 3edea48...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 15 16:07:26 2005 -0400

    Merge from-linus to-akpm

commit cb220c1af49644786944c549518b491d4c654030
Merge: 1dadb3d... f686997...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 15 15:56:23 2005 -0400

    Merge 'acpi-2.6.12' branch into to-akpm

commit f6869979bec3cc2efddc7359f30ba37642084fb7
Merge: 50526df... 30e332f...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Aug 15 15:52:00 2005 -0400

    Merge to-linus-stable into to-akpm

commit 975f24bdc7d3833875309509abbc7da2b2a28234
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 15 13:29:55 2005 +0200

    [SCSI] aiclib remove dead
    
    remove lots of completely dead code from aiclib, there's not a lot left
    and even what's left is rather useless.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 85a46523ff68aa0e4d2477c51075ffd9fc7e7a14
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 15 13:28:46 2005 +0200

    [SCSI] aic79xx: sane pci probing
    
    remove ahd_tailq and do sane pci probing.  ported over from aic7xxx.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d46b1d549e1414d673e0ec18219f4f5e30d5f3f5
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 15 13:27:39 2005 +0200

    [SCSI] aic79xx: remove some dead code
    
    remove some dead cruft, as done already in aic7xxx
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ea6bfb0adf1361c2039adac3fcaca27f91d7c2c7
Merge: b2f4a2e... 1b5cca3...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 15 00:32:24 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 1b5cca3a88b7682d538d129c25f0e3092613a243
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 15 00:32:15 2005 -0400

    ieee80211: remove last uses of compat define WLAN_CAPABILITY_BSS

commit b2f4a2e3b1620667da9654f9e220c92ea52bdbe4
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 21:00:01 2005 -0700

    [PATCH] hostap: Replace WLAN_FC_ defines with ieee80211 ones
    
    Replace remaining WLAN_FC_* defines with the ones used in ieee80211
    header file. This completes the move from hostap version of frame
    control field processing to ieee80211 version.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e313087e42da177df00652d03be9afccf25f9545
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 21:00:00 2005 -0700

    [PATCH] hostap: Capability field is called ESS, not BSS
    
    Remove backwards compatibility define for WLAN_CAPABILITY_ESS now that
    net/ieee80211.h defines this.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit eff349b136be49b0569bfdc225b49e28ce66ed22
Merge: 20445cc... 2474385...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Aug 15 00:28:33 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 2474385e5b623fc46cf172a921d94f9f03a9a704
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 20:59:59 2005 -0700

    [PATCH] ieee80211: Capability field is called ESS, not BSS
    
    IEEE 802.11 has a capability field flag called ESS, but ieee80211 had
    renamed this to BSS for some reason. hostap has been using
    WLAN_CAPABILITY_ESS and since that matches with the standard, lets use
    it as the name for this define. Add WLAN_CAPABILITY_BSS as a backwards
    compatibility name for the same bit since ieee80211 and ipw2200 are
    using this and there are versions outside kernel tree that expect to
    find this define name.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 20445cc9159089d9d6b88d7864578efb10eb6590
Merge: 4339d32... 4c0e176...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Aug 14 23:10:26 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 4c0e176dd5e4c44dd60f398518f75eedbe1a65f3
Merge: f241be7... 2ba8468...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Aug 14 23:10:00 2005 -0400

    Merge /spare/repo/linux-2.6/

commit f241be74b803dcf9d70c9978292946370654320f
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:45 2005 -0700

    [PATCH] ieee80211: Fix frame control pver mask
    
    IEEE 802.11 frame control has two bits reserved for protocol
    version. IEEE80211_FCTL_VERS was not used anywhere, but I would assume
    it was supposed to be a mask for the protocol field and as such, it
    should be 0x0003, not 0x0002. This matches with WLAN_FC_PVER
    definition in hostap.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4339d328631aa815fe2181b9164b3690ca2db4da
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:44 2005 -0700

    [PATCH] hostap: Use ieee80211 WLAN_FC_GET_{TYPE,STYPE}
    
    Replace temporary HOSTAP_FC_GET_{TYPE,STYPE} macros with the ieee80211
    version of WLAN_FC_GET_{TYPE,STYPE}.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c0f72ca8e4f1b459b5582c1c8dcaf7e53151f069
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:43 2005 -0700

    [PATCH] hostap: Replace hostap_ieee80211_hdr with ieee80211_hdr
    
    Replace hostap-specific struct hostap_ieee80211_hdr with struct
    ieee80211_hdr from net/ieee80211.h.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3ec0f4857df4c3dd0d0455ce5b2470b4be77fc77
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:42 2005 -0700

    [PATCH] hostap: Remove extra defines
    
    Remove unused defines that are already available from generic kernel
    header files.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 67e0e473fb54e7657f6604236e42ef07fd7a2768
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:41 2005 -0700

    [PATCH] hostap: Use void *hw_priv instead of #ifdef in local data
    
    Replace hardware model specific #ifdef's in struct local_info with
    void *hw_priv that is pointing to cs/pci/plx specific data
    structure. This removes unneeded #ifdef's and as such, is a step
    towards making it possible to share objects for hostap_hw.c and
    hostap_download.c with cs/pci/plx drivers without having to compile
    and link the same code separately for each one.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ea3f1865f33bd328bf043f47492f401a42de5edb
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:40 2005 -0700

    [PATCH] hostap: Remove experimental PCI bus master/DMA code
    
    PCI version of Prism2.5/3 has undocumented DMA support for TX/RX data,
    but this seems to have some hardware bugs that prevent it from being
    used properly for TX. RX side could possibly be made to work reliably.
    
    Even though DMA support would be very useful for saving host CPU (from
    about 40% to 5-10% when operating at maximum throughput), it seems to
    be best to just remove this code finally. The implementation has
    always been commented out by default and has received very limited
    testing. The code may have already been broken number of times and I
    don't have much interested in trying to verify whether it works or
    not. Getting this out makes it easier to maintain the driver and
    allows some cleanups that have been partly postponed because of this
    experimental bus master/DMA code.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5bee720fd7fa5ed4eade96058acd3a684da30932
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sun Aug 14 19:08:39 2005 -0700

    [PATCH] hostap: Fix skb->cb use for TX meta data
    
    Old AP mode code for power saving was using skb->cb for couple of
    flags before the more generic 802.11 TX code started using the same
    buffer for struct hostap_skb_tx_data. This resulted in the power save
    code corrupting the magic value in beginning of the buffer and TX code
    dropping the power saved packets because of this for the case where
    STAs send PS-Poll frames with PwrMgmt flag set.
    
    This patch modifies the power save code to use the same struct
    hostap_skb_tx_data as rest of the TX path in order to avoid corrupting
    the data in skb->cb.
    
    In addition, this patch reorders fields in the structure and makes
    them use smaller types in order to make the structure fit in skb->cb
    on 64-bit hosts.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d0a7e574007fd547d72ec693bfa35778623d0738
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Aug 14 17:09:01 2005 -0500

    [SCSI] correct transport class abstraction to work outside SCSI
    
    I recently tried to construct a totally generic transport class and
    found there were certain features missing from the current abstract
    transport class.  Most notable is that you have to hang the data on the
    class_device but most of the API is framed in terms of the generic
    device, not the class_device.
    
    These changes are two fold
    
    - Provide the class_device to all of the setup and configure APIs
    - Provide and extra API to take the device and the attribute class and
      return the corresponding class_device
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 10c1b88987d618f4f89c10e11e574c76de73b5e7
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Aug 14 14:34:06 2005 -0500

    [SCSI] add ability to deny binding to SPI transport class
    
    This patch is necessary if we begin exposing underlying physical disks
    (which can attach to the SPI transport class) of the hardware RAID
    cards, since we don't want any SPI parameters binding to the RAID
    devices.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3a4f5c60dbe1978580ea03c1aff353d1e63d1638
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Sat Aug 13 09:42:45 2005 -0500

    [SCSI] aic7xxx: lost multifunction flags handling
    
    From: Christoph Hellwig <hch@lst.de>
    
    Multi-function cards need to inherit the PCI flags from the master PCI
    device.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit badea125d7cbd93f1678a95cf009b3bdfe6065cd
Author: David Mosberger-Tang <David.Mosberger@acm.org>
Date:   Mon Jul 25 22:23:00 2005 -0700

    [IA64] Fix race in mm-context wrap-around logic.
    
    The patch below should fix a race which could cause stale TLB entries.
    Specifically, when 2 CPUs ended up racing for entrance to
    wrap_mmu_context().  The losing CPU would find that by the time it
    acquired ctx.lock, mm->context already had a valid value, but then it
    failed to (re-)check the delayed TLB flushing logic and hence could
    end up using a context number when there were still stale entries in
    its TLB.  The fix is to check for delayed TLB flushes only after
    mm->context is valid (non-zero).  The patch also makes GCC v4.x
    happier by defining a non-volatile variant of mm_context_t called
    nv_mm_context_t.
    
    Signed-off-by: David Mosberger-Tang <David.Mosberger@acm.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0336ee5aed1f9a5a6a04e3deabd7797dc193ccd3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 8 21:49:48 2005 -0700

    [SCSI] fix warning in aic7770.c
    
    From: "Martin J. Bligh" <mbligh@mbligh.org>
    
    drivers/scsi/aic7xxx/aic7770.c: In function `aic7770_config':
    drivers/scsi/aic7xxx/aic7770.c:129: warning: unused variable `l'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6becdff3bcaff1b89c392cf0630dcb5759704492
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Aug 9 00:17:03 2005 -0700

    [SCSI] fix warning in scsi_softirq
    
    From: Andrew Morton <akpm@osdl.org>
    
    drivers/scsi/scsi.c: In function `scsi_softirq':
    drivers/scsi/scsi.c:814: warning: int format, long int arg (arg 4)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3a1c1d446b7cac6ddd8f6b1f3254ccffe87f1751
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Aug 11 13:42:35 2005 -0400

    [SCSI] Add Emulex as maintainer of lpfc SCSI driver
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9909b79e3d533b422c6c72945da35aef124dbce1
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:03:17 2005 -0400

    [SCSI] lpfc driver 8.0.30 : update version to 8.0.30
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 918865230e55b1fece2d8edec39d46c00626590b
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:03:09 2005 -0400

    [SCSI] lpfc driver 8.0.30 : convert to use of int_to_scsilun()
    
    Replace use of lpfc_put_lun with midlayer's int_to_scsilun
    
    Remove driver's local definition of lpfc_put_lun (which converts an
    int back to a 64-bit LUN) and replace it's use with the recently added
    int_to_scsilun function provided by the midlayer.
    
    Note: Embedding midlayer structure in our structure caused
    need for more files to include midlayer headers.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ea84c3f74df646a0897e95c78147190517a751a9
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:02:30 2005 -0400

    [SCSI] lpfc driver 8.0.30 : dev_loss and nodev timeouts
    
    Fix handling of the dev_loss and nodev timeouts.
    
    Symptoms: when remote port disappears for a period of time longer then
    either nodev_tmo or dev_loss_tmo, the lpfc driver worker thread will
    stall removing that remote port.
    
    Cause: removing remote port involves un-blocking and sync-ing
    corresponding block device queue. But corresponding node in the lpfc
    driver is still in the NPR(?node port recovery?) state and mid-layer
    gets SCSI_MLQUEUE_HOST_BUSY as a return value when it is trying to call
    queuecommand() with command for that node (AKA remote port)
    
    Fix: Instead of returning SCSI_MLQUEUE_HOST_BUS from queuecommand() for
    nodes in NPR states complete it with retry-able error code  DID_BUS_BUSY
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f888ba3ce77c66bece3d804caf7d559838209a4a
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:03:01 2005 -0400

    [SCSI] lpfc driver 8.0.30 : fix get_stats panic
    
    Fix panic in lpfc_get_stats()
    
    Symptoms: Panic on sysfs stats access
    
    Cause: In lpfc_get_stats() we are writing to memory that we do not
    own.
    
    Fix: Fix our stats structure allocation. Embed phba->link_stats in
    struct lpfc_hba and stop treating it like rogue structure.
    
    Note: Embedding midlayer/transport structure in our structure caused
    need for more files to include midlayer/transport headers.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 69859dc47744430ecda16522b0791b6d17e3fa93
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:02:37 2005 -0400

    [SCSI] lpfc driver 8.0.30 : task mgmt bit clearing
    
    Clear task management bits when preparing SCSI commands
    
    In lpfc_scsi_prep_cmnd, clear the task management bits (fcpCntl2 member
    in the fcp_cmd structure) when preparing regular SCSI commands.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8cbdc5fffa15d5c573e2531c6f533822d08b6b0f
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:02:50 2005 -0400

    [SCSI] lpfc driver 8.0.30 : fix lip/cablepull panic
    
    Fix panic on lip and cable pull
    
    Symptoms: Panic on lip or cable pull
    
    Cause: Use after free of nlp in lpfc_nlp_remove()
    
    Fix: Do not make FC transport calls after a node is removed. Transport
    calls are disabled by ignoring the initial delete transition.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 483f05f0134e60b724bc3678507c1def860c56d5
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 10 15:02:45 2005 -0400

    [SCSI] lpfc driver 8.0.30 : fix iocb reuse initialization
    
    IOCB BDE not getting fully initialized during reuse
    
    Symptoms: Driver gets Status 3 and Reason 0x13 on IOCB completions.
    
    Cause: The IOCB bpl.bdeSize and bdeFlags are not getting initialized on reuse.
    
    Fix: Reinitialize these fields in prep_dma each time an IOCB is used.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 507caac75e86bd041c5462e5e988fb7138e21d79
Author: James Bottomley <jejb@mulgrave.(none)>
Date:   Tue Aug 9 12:57:11 2005 -0500

    [SCSI] Make the HSG80 a REPORTLUN2 device
    
    From: 	Steve Wilcox <spwilcox@att.com>
    
    In order to properly report LUN's > 7, the DEC HSG80 definition in
    scsi_devinfo.c needs to include BLIST_REPORTLUN2 rather than
    BLIST_SPARSELUN.  I've tested this change with several HSG firmware
    revisions and with both Emulex and Qlogic HBA's.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 563a6e1fb0af58433beec1ab418e1fafbd100b56
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Aug 12 14:17:50 2005 +0800

    [PATCH] libata handle the case when device returns/needs extra data
    
    PATCH 2/2:  handle the case when device returns/needs extra data
    
    Description:
       Sometimes the device returns/needs extra data than expected.
    
    Changes:
       Modify __atapi_pio_bytes() to handle the case where device returns/needs extra data.
         - for read case, discard trailing data from the device
         - for write case, padding zero data to the device
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6ae4cfb5711b6f2878c9e384617971d98c34a7f5
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Aug 12 14:15:34 2005 +0800

    [PATCH] libata ata_data_xfer() fix
    
    PATCH 1/2: ata_data_xfer() fix
    
    Changes:
       - Modify ata_mmio_data_xfer() and ata_pio_data_xfer() to handle odd-lengthed buffer.
       - Add some function comments
    
    This patch does not reuse ap->pad as alignment buffer since
    using local variable seems good enough.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1dadb3dadfaa01890fc10df03f0dd03a9f8774b2
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Jul 27 18:32:00 2005 -0400

    [ACPI] don't complain about PCI root bridges without _SEG
    
    There are lots of single-PCI-segment machines that don't
    supply _SEG for the root bridges.  The PCI root bridge driver
    silently assumes the segment to be zero in this case,
    so glue.c shouldn't complain either.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 46acac3b4fd8ef66eec63b51de8d556a17c7d4f7
Author: Dave Jones <davej@redhat.com>
Date:   Thu Aug 11 20:28:56 2005 -0700

    [AGPGART] Drop duplicate setting of info->mode in agp_copy_info()
    
    Spotted by Jeremy Fitzhardinge, this change crept in with the multiple
    backend support.  It's clearly incorrect to overwrite info->mode after
    we just went to lengths to determine which bits to mask out.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c9221da9f2796f082642c3498edb2c8783ad4774
Author: Mark Maule <maule@sgi.com>
Date:   Wed Aug 3 14:07:00 2005 -0700

    [IA64-SGI] sn pci provider for TIOCE (pci
    
    Altix patch to add an SN pci provider for TIOCE, which is SGI's
    PCI Express implementation.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 5b53ed1f2ed6c85e2b1c39d97cc112ea32004609
Author: Mark Maule <maule@sgi.com>
Date:   Wed Aug 3 14:06:00 2005 -0700

    [IA64-SGI] add support for TIO huge-window
    
    Altix patch to add TIO "huge-window" address support to sn_dma_flush().
    
    Update copyright in affected files.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 735e60f4c67823a3e01655c990296e2e56574885
Author: Mark Maule <maule@sgi.com>
Date:   Wed Aug 3 14:06:00 2005 -0700

    [IA64-SGI] abstract force_interrupt() mechanism
    
    Altix patch to abstract the force_interrupt() mechanism away from the
    pcibr provider.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 89963d16dc50a5d91ed09914a1232d59e6461fd6
Author: Mark Maule <maule@sgi.com>
Date:   Wed Aug 3 14:06:00 2005 -0700

    [IA64-SGI] altix: cosmetic rename of SGI_PCIBR_ERROR
    
    Cosmetic altix patch to rename SGI_PCIBR_ERROR to something more generic and
    remove a duplicate #define.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 674c6479b7bdc78528ea83dd43897e3161558b8b
Author: Colin Ngam <cngam@sgi.com>
Date:   Wed Aug 3 13:35:00 2005 -0700

    [IA64-SGI] Altix only: Add PCI Domain number support.
    
    This patch enables PCI Domain numbering on Altix.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6c89cce75c6f93088a5a2a25bb9674a9194592cc
Merge: 13779c7... 50526df...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 11 17:43:19 2005 -0400

    Merge acpi-2.6.12 to-akpm

commit 50526df605e7c3e22168664acf726269eae10171
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 11 17:32:05 2005 -0400

    [ACPI] Lindent drivers/acpi/ec.c
    
    necessary for clean merge from acpi-2.6.12 to-akpm
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 716e084edb0230910b174000dc3490f9e91652e3
Author: Luming Yu <luming.yu@intel.com>
Date:   Wed Aug 10 01:40:00 2005 -0400

    [ACPI] Fix "ec_burst=1" mode latency issue
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3851
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ab707da7cf0a1a1d27c6021356cfb3692cf1bd26
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:59:59 2005 -0700

    [PATCH] ixgb: Driver version, white space, comments
    
    Driver version, white space, comments & added Module_version Patch from linville
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b40a1f06c062d5fb2dc11fcb826d97b28918524f
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:59:44 2005 -0700

    [PATCH] ixgb: Redefined buffer_info-dma to be dma_addr_t instead of uint64
    
    Redefined buffer_info-dma to be dma_addr_t instead of uint64
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fcb01756e8e95e8d4e423377bc435e8856194328
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:59:31 2005 -0700

    [PATCH] ixgb: Remove unused functions
    
    Remove unused functions, render some variable static instead of global  - based on patch from Adrian Bunk
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit db0bacaa8313e00bb571e2d1102dc9f567353a24
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:59:20 2005 -0700

    [PATCH] ixgb: Ethtool cleanup patch from Stephen Hemminger
    
    Ethtool cleanup patch from Stephen Hemminger
       * use ADVERTISED_xxx fields when setting advertised fields
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9ef2eec39383f8fe2bd7c9fac4dfdd4fdf7173e6
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:59:07 2005 -0700

    [PATCH] ixgb: Fix data output by ethtool -d
    
    Fix data output by ethtool -d
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7b89178d1d803c854dfd6f4e81633109a1238884
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:58:55 2005 -0700

    [PATCH] ixgb: Fix Broadcast/Multicast packets received statistics
    
    Fix Broadcast/Multicast packets received statistics
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8908c6cd1d6889850148aeb50bb14301959adaa7
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:58:40 2005 -0700

    [PATCH] ixgb: Use netdev_priv() instead of netdev->priv
    
    Use netdev_priv() instead of netdev->priv
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 51b54b512cd26c4477ccd57b8d3736b99ccef7a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:58:23 2005 -0700

    [PATCH] ixgb: Fix unnecessary link state messages
    
    Fix unnecessary link state messages
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9c15d24f2420c2155eccd32d7ab909a9c0e63c2b
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Aug 11 13:58:02 2005 -0700

    [PATCH] ixgb: Set RXDCTL:PTHRESH/HTHRESH to zero
    
    Set RXDCTL:PTHRESH/HTHRESH to zero
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 13779c739168fdb905fae81287d75a9e632825e3
Merge: 95f193a... 7d69fa6...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 11 17:09:15 2005 -0400

    Merge ../from-linus

commit ea8f400c98ec9ae0604bc5a6721174ef68635815
Author: Peer Chen <Peer.Chen@uli.com.tw>
Date:   Thu Aug 11 15:09:23 2005 -0400

    [netdrvr tulip] Remove ULi-specific code from generic tulip driver
    
    It has a separate driver now, 'uli526x'.

commit 972dcafb6d743a6c7611a2e4681ed814e30d6230
Author: Douglas Gilbert <dougg@torque.net>
Date:   Thu Aug 11 03:35:53 2005 -0400

    [libata scsi] add START STOP UNIT translation

commit 4c71812261ce3c48a7c5dd257d96d9fd35d62287
Merge: 3db368f... bc68552...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 11 03:33:08 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 2bf69b5fe90b3246ab50064c5a690a363e8c53e2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 11 02:47:54 2005 -0400

    phy subsystem: more cleanups
    
    - unexport symbols never used outside of home module
    - remove dead code
    - remove CONFIG_PHYCONTROL, make it unconditionally enabled

commit 67c4f3fa25502ce7ed82fb0307e09cf36f1f81da
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 11 02:07:25 2005 -0400

    Fix numerous minor problems with new phy subsystem.
    
    Includes fixes for problems noted by Adrian Bunk, Andrew Morton,
    and one other person lost in the annals of history (and email folders).

commit 95f193aa4fe50eb2dc987081d066edd6e13027de
Merge: e872d4c... bc68552...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 11 00:56:08 2005 -0400

    Merge ../to-linus

commit 1e4adbdb3f0348dcf4fce92f1acc7c8386982c17
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Aug 4 00:16:27 2005 +0100

    [PATCH] hostap update
    
    Add the device ID of the Buffalo AirStation WLI-CF-S11G
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 303bcb4b675d7284a1097dd1c18c995c0179883a
Author: Ravinandan Arakali <ravinandan.arakali@neterion.com>
Date:   Wed Aug 3 12:41:38 2005 -0700

    [PATCH] S2io: Errors found during review
    
    Hi,
    This is a patch to incorporate comments from earlier 12 patches.
    It also fixes a few issues we found during this time.
    Following is a list of changes in this patch. Item 1 incorporates
    earlier comments. Issues addressed in items 2 to 4 were discovered
    recently.
    
    1. wmb() call in s2io_xmit() replaced with mmiowb().
    2. The dtx_control register was earlier programmed incorrectly
       for Xframe II adapter.
    3. As suggested by hardware team, after a reset, in case of
       Xframe II adapter, we clear certain spurious errors by
       clearing PCI-X ECC status register, "detected parity error"
       bit in PCI_STATUS register and PCI_STATUS bit in txpic_int register.
    4. On IBM PPC platforms, we found that in the Rx buffer replenish
       function, two memory writes(one to the the descriptor length and
       another to the ownership) were getting reordered. This was causing
       the adapter to see the ownership transfered to it before the length
       was updated.
    
       One solution was to add a wmb() but since this would turnout expensive
       on some platforms if called for every descriptor, we set the ownership
       bit and other fields of '2' to 'N' Rx descriptors followed by a wmb()
       and then set the ownership of first descriptor ('1').
    
       Here the value 'N' is configurable by making it a module loadable
       parameter (rxsync_frequency).
       (NOTE: This parameter is a power of 2).
    5. Bumped up the driver version no. to 2.0.2.1
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0b1f7ebe455ba4f1f46e7024150eeddbbf08addc
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:39:56 2005 -0700

    [PATCH] S2io: Miscellaneous fixes
    
    Hi,
    The last patch in this series fixes the following issues found during
    testing.
    1. Ensure we don't pass zero sized buffers to the card(which can lockup)
    2. Restore the PCI-X parameters(in case of Xframe I adapter) after a reset.
    3. Make sure total size of all FIFOs does not exceed 8192.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a371a07de9bce837ea4e84569a2b390a42e360ef
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:38:59 2005 -0700

    [PATCH] S2io: New link handling scheme for Xframe II
    
    Hi,
    The below patch implements a new "Link state change handling"
    scheme supported by the Xframe II adapter. It also bumps up the
    driver version to 2.0.2.0.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b6e3f9828b9dc188cfe80364365cc68bf45df949
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:38:01 2005 -0700

    [PATCH] S2io: Support for bimodal interrupts
    
    Hi,
    This is a patch to provide bimodal interrupt moderation support for
    Xframe II adapter. Basically, in this moderation scheme, the adapter
    raises a traffic interrupt if the no. of packets transmitted and/or
    received reaches a programmable threshold.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 541ae68f6ddf1c27aa6879935ce541f110484202
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:36:55 2005 -0700

    [PATCH] S2io: Support for Xframe II NIC
    
    Hi,
    This patch provides basic support for the Xframe II adapter.
    Includes the following changes:
    1. New values to program XAUI interface.
    2. Print the PCI/PCI-X mode(bus frequency, width).
    3. Remove EOI from reset during intialization.
    4. Enable all 8 PCCs if Xframe II adapter.
    5. Programs the RLDRAM size depending on the device.
    (Note: RLDRAM size on XFARME-I is 64Mb whereas on XFRAME-II it's 32 Mb).
    6. Enable extended(64-bit) statistics counters.
    7. Program timer interrupt duration based on PCI/PCI-X clock speed.
    8. Not required to save/restore PCI config space before/after reset.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit be3a6b02eb68a4d47397b771b6e4aa1f7f0f7ffb
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:35:55 2005 -0700

    [PATCH] S2io: VLAN support
    
    Hi,
    Patch below adds VLAN support to the driver.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 25fff88eb7dbc63e03f1766e130515900d440dbb
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:34:11 2005 -0700

    [PATCH] S2io: Timer based slowpath handling
    
    Hi,
    This patch implements the slow-path handling functions(link
    state change, hardware errors) as a timer. It is not
    handled in interrupt handler as was done previously.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d8892c6ee39614bc6d282dbef0ff9fa461a6467c
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:33:12 2005 -0700

    [PATCH] S2io: Support for runtime MTU change
    
    Hi,
    Patch below supports MTU change on-the-fly(without bringing interface
    down)
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fe113638328995b69d8797e6466b29661b1602d1
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:32:00 2005 -0700

    [PATCH] S2io: Performance improvements
    
    Hi,
    This patch relates to mostly performance related changes.
    1. Fixed incorrect computation of PANIC level in rx_buffer_level().
    2. Removed unnecessary PIOs(read/write of tx_traffic_int and
       rx_traffic_int) from interrupt handler and removed read of
       general_int_status register from xmit routine.
    3. Enable two-buffer mode(for Rx path) automatically for SGI
       systems. This improves Rx performance dramatically on
       SGI systems.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1ddc50d40a19b3524d302d1d6bfd52ac7bc6b6f7
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:30:43 2005 -0700

    [PATCH] S2io: Removed memory leaks
    
    Hi,
    This patch fixes certain memory leaks discovered in free_tx_buffers()
    and rx_osm_handler()
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 7ba013ac029513eb4b70cfcd4b86e37c5f16c483
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:29:20 2005 -0700

    [PATCH] S2io: Software fixes
    
    Hi,
    Below patch includes fixes for few purely software bugs identified
    since last release.
    1. Keep track and display(as part of ethtool command output) the no.
       of single-bit and double-bit ECC errors.
    2. Handle race condition between intr handler and "interface down"
       routine.
    3. Initial link state setting modified so that the link state displayed
       after "interface Up" is correct.
    4. Fix for "Incorrect Tx packet count when TSO is enabled".
    5. Disable periodic DMA of statistics and schedule one-shot DMA
       only when required.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 5e25b9ddb6683fe225a2266b53d73c57381a0c18
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:27:09 2005 -0700

    [PATCH] S2io: Hardware fixes
    
    Hi,
    Below patch addresses few h/w specific issues.
    1. Check for additional ownership bit on Rx path before
       starting Rx processing.
    2. Enable only 4 PCCs(Per Context Controller) for Xframe I
       revisions less than 4.
    3. Program Rx and Tx round robin registers depending on
       no. of rings/FIFOs.
    4. Tx continous interrupts is now a loadable parameter.
    5. Reset the card if we get double-bit ECC errors.
    6. A soft reset of XGXS being done to force a link state change has been
       eliminated.
    7. After a reset, clear "parity error detected" bit,
       PCI-X ECC status register, and PCI_STATUS bit in
       tx_pic_int register.
    8. The error in the disabling allmulticast implementation has been
       rectified.
    9. Leave the PCI-X parameters MMRBC, OST etc. at their
       BIOS/system defaults.
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 20346722ec474245446bcbf460594a935a5c0512
Author: Raghavendra Koushik <raghavendra.koushik@neterion.com>
Date:   Wed Aug 3 12:24:33 2005 -0700

    [PATCH] S2io: Code cleanup
    
    Hi,
    We are submitting a series of 13 patches to support our Xframe I and
    Xframe II line of products. The patches can be categorized as follows:
    
    Patches 1-8 : Changes applicable to both Xframe I and II
    Patches 9-11: Xframe II specific features
    Patch 12: Addresses issues found during testing cycle.
    Patch 13: Incorpoates mostly the review comments from community
    	and some last moment bug fixes.
    
    Please review the patches and let us know your comments.
    
    Starting with patch 1 below.
    This patch involves cosmetic changes(tabs and indentation,
    regrouping of transmit and receive data structures, typecasting,
    code cleanup).
    
    Signed-off-by: Ravinandan Arakali <ravinandan.arakali@neterion.com>
    Signed-off-by: Raghavendra Koushik <raghavendra.koushik@neterion.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cd04b947bc674f8fc9cac38ec30497bae5d664ad
Merge: b3df9f8... bc68552...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Aug 11 00:07:03 2005 -0400

    Merge /spare/repo/linux-2.6/

commit f521089158cd48a81b4d72e8e39da006dd79779b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Aug 5 08:02:00 2005 -0700

    [IA64] Spinlock optimizations
    
    1. Nontemporal store for spin unlock.
    
    A nontemporal store will not update the LRU setting for the cacheline. The
    cacheline with the lock may therefore be evicted faster from the cpu
    caches. Doing so may be useful since it increases the chance that the
    exclusive cache line has been evicted when another cpu is trying to
    acquire the lock.
    
    The time between dropping and reacquiring a lock on the same cpu is
    typically very small so the danger of the cacheline being
    evicted is negligible.
    
    2. Avoid semaphore operation in write_unlock and use nontemporal store
    
    write_lock uses a cmpxchg like the regular spin_lock but write_unlock uses
    clear_bit which requires a load and then a loop over a cmpxchg. The
    following patch makes write_unlock simply use a nontemporal store to clear
    the highest 8 bits. We will then still have the lower 3 bytes (24 bits)
    left to count the readers.
    
    Doing the byte store will reduce the number of possible readers from 2^31
    to 2^24 = 16 million.
    
    These patches were discussed already:
    
    http://marc.theaimsgroup.com/?t=111472054400001&r=1&w=2
    http://marc.theaimsgroup.com/?l=linux-ia64&m=111401837707849&w=2
    
    The nontemporal stores will only work using GCC. If a compiler is used
    that does not support inline asm then fallback C code is used. This
    will preserve the byte store but not be able to do the nontemporal stores.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit aaebf4332018980fef4e601d1b5a6e52dd9e9ae4
Author: Ryan Anderson <ryan@michonline.com>
Date:   Sun Jul 31 04:57:49 2005 -0400

    [PATCH] kbuild: automatically append a short string to the version based upon the git commit
    
    If CONFIG_AUTO_LOCALVERSION is set, the user is using a git-based tree, and the
    current HEAD is not referred to by any tags in .git/refs/tags/, append -g and
    the first 8 characters of the commit to the version string.  This makes it
    easier to use git-bisect, and/or to do a daily build, without trampling on your
    older, working builds, or accidentally setting up conflicting sets of modules.
    
    Signed-off-by: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit dbec486632d2303f5c0e75af7a8473fa4c4a145a
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Wed Aug 10 20:44:50 2005 +0200

    kconfig: move initramfs options to General Setup
    
    Move initramfs options from Device Drivers | Block Drivers to General Setup
    This is a more natural place for this option.
    
    Furthermore separate out intramfs options to usr/Kconfig
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3db368f71a91f08c5a93a5bfb6ca1e2de2668e04
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Wed Aug 10 06:18:43 2005 -0700

    [PATCH] ahci: AHCI mode SATA patch for Intel ICH7-M DH
    
    Hello,
    
    This patch adds the Intel ICH7-M DH DID to the ahci.c file for AHCI mode SATA support. This patch was built against the 2.6.13-rc6 kernel.
    If acceptable, please apply.
    
    Thanks,
    
    Jason Gaston
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a7144b23da073f4b3192e356ad74de12aba60e00
Merge: 8a60a07... 86b3786...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Aug 10 13:43:09 2005 -0400

    Merge /spare/repo/linux-2.6/

commit a80b3424d9fde3c4b6d62adaf6dda78128dc5c27
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Aug 8 19:06:50 2005 -0500

    [SCSI] aic79xx: fix boot panic with no hardware
    
    There's a spurious (and illegal since it's marked __exit) call to
    ahc_linux_exit() in ahc_linux_init() which causes a double list
    deletion of the transport class; remove it.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c973b112c76c9d8fd042991128f218a738cc8d0a
Merge: c5fbc39... 00dd1e4...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Aug 9 16:51:35 2005 +0100

    Merge with /shiny/git/linux-2.6/.git

commit 0d7323c865608dffb1ed39ec2f3841697ec3e009
Author: Dave Jones <davej@redhat.com>
Date:   Mon Aug 8 19:01:43 2005 -0400

    [SCSI] blacklist addition.
    
    When run on a kernel that scans all LUNs, a certain crappy
    scsi scanner reports the same LUN over and over..
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=155457
    
    Aparently they were so shamed by this, they chose to remain
    anonymous. Though it seems the blacklist code handles
    anonymous vendors just fine.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e87c2f118d40d2dc2f5d0140818e8cd023b13e1
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Aug 8 14:20:43 2005 -0700

    [SCSI] aacraid: adapter support update
    
    Received from Mark Salyzyn
    
    This patch adds the product ID for the ICP9067MA adapter.
    
    The entries for the ICP9085LI, ICP5085BR, IBM8k & ASR4810SAS were
    incorrect and would not initialize the adapters correctly.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b21a41385118f9a6af3cd96ce71090c5ada52eb5
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 5 21:45:40 2005 -0500

    [SCSI] add global timeout to the scsi mid-layer
    
    There are certain rogue devices (and the aic7xxx driver) that return
    BUSY or QUEUE_FULL forever.  This code will apply a global timeout (of
    the total number of retries times the per command timer) to a given
    command.  If it is exceeded, the command is completed regardless of its
    state.
    
    The patch also removes the unused field in the command: timeout and
    timeout_total.
    
    This solves the problem of detecting an endless loop in the mid-layer
    because of BUSY/QUEUE_FULL bouncing, but will not recover the device.
    In the aic7xxx case, the driver can be recovered by sending a bus reset,
    so possibly this should be tied into the error handler?
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f03a567054fea4f9d43c50ec91338266c0bd588d
Author: Kai Makisara <Kai.Makisara@kolumbus.fi>
Date:   Tue Aug 2 13:40:47 2005 +0300

    [SCSI] drivers/scsi/st.c: add reference count and related fixes
    
    I have rediffed the patch against 2.6.13-rc5, done a couple of cosmetic
    cleanups, and run some tests.  Brian King has acknowledged that it fixes the
    problems he has seen. Seems mature enough for inclusion into 2.6.14 (or
    later)?
    
    Nate's explanation of the changes:
    
    I've attached patches against 2.6.13rc2. These are basically identical
    to my earlier patches, as I found that all issues I'd seen in earlier
    kernels still existed in this kernel.
    
    To summarize, the changes are: (more details in my original email)
    
    - add a kref to the scsi_tape structure, and associate reference
    counting stuff
    
    - set sr_request->end_io = blk_end_sync_rq so we get notified when an IO
    is rejected when the device goes away
    
    - check rq_status when IOs complete, else we don't know that IOs
    rejected for a dead device in fact did not complete
    
    - change last_SRpnt so it's set before an async IO is issued (in case
    st_sleep_done is bypassed)
    
    - fix a bogus use of last_SRpnt in st_chk_result
    
    Signed-off-by: Nate Dailey <nate.dailey@stratus.com>
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5262d0851cc6692390ee1aa2c55f57f3bfd0a7c7
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 5 16:31:35 2005 -0500

    [SCSI] aacraid: correct use of cmd->timeout field
    
    The cmd->timeout field has been obsolete for a while now.  While looking
    to remove it, I came across this use in the aacraid driver.  It looks
    like you want to initialise the firmware with the current timeout of the
    command (in seconds), so the value I think you should be using is
    cmd->timeout_per_command.
    
    Acked by: Mark Haverkamp <markh@osdl.org>
    Acked by: Mark Salyzyn <mark_salyzyn@adaptec.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 541e316aed6f7d6efeb427a88645c2a8f61418d6
Author: Stephen Evanchik <evanchsa@gmail.com>
Date:   Mon Aug 8 01:26:18 2005 -0500

    Input: psmouse - add support for IBM TrackPoint devices.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a2ae85df80a5b996a05d6d2ffc9bf97797e93ec6
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Aug 6 23:32:07 2005 -0700

    [SCSI] aic79xx: needs to select SPI_TRANSPORT_ATTRS
    
    without it you get this failure:
    
    drivers/built-in.o(.text+0xdcccd): In function `ahd_linux_slave_configure':
    drivers/scsi/aic7xxx/aic79xx_osm.c:636: undefined reference to `spi_dv_device'
    drivers/built-in.o(.text+0xdd7b1): In function `ahd_send_async':
    drivers/scsi/aic7xxx/aic79xx_osm.c:1652: undefined reference to `spi_display_xfer_agreement'
    drivers/built-in.o(.init.text+0x7b4d): In function `ahd_linux_init':
    drivers/scsi/aic7xxx/aic79xx_osm.c:2765: undefined reference to `spi_attach_transport'
    drivers/built-in.o(.init.text+0x7c94):drivers/scsi/aic7xxx/aic79xx_osm.c:2774: undefined reference to `spi_release_transport'
    drivers/built-in.o(.exit.text+0x72c): In function `ahd_linux_exit':
    drivers/scsi/aic7xxx/aic79xx_osm.c:2783: undefined reference to `spi_release_transport'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 282a16749ba63256bcdce2766817f46aaac4dc20
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Aug 7 15:43:54 2005 +1000

    drm: add savage driver
    
    Add driver for savage chipsets.
    
    From: Felix Kuehling
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d27c9b548ad79c14830c57355dbe3a35f970532a
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Aug 7 15:19:58 2005 +1000

    drm: remove version.h and any version checks..
    
    This patch removes all the drm kernel conditionals from the kernel DRM tree.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0e68c00373f61fcdee453f6c9878e3390fc0f0ce
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:39:49 2005 -0700

    [SCSI] aacraid: sgraw command support
    
    Received from Mark Salyzyn from Adaptec:
    
    This patch adds support for the new raw io command. This new command
    offers much larger io commands, is more friendly to the internal firmware
    structure requiring less translation efforts by the firmware and offers
    support for targets greater than 2TB (patch to support >2TB will
    be sent in the future).
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 12a26d0879d8a4502425037e9013b1f64ed669b7
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:39:25 2005 -0700

    [SCSI] aacraid: aif registration timeout fix
    
    Received from Mark Salyzyn from Adaptec:
    
    If the Adapter is quiet and does not produce an AIF event packets to be
    picked up by the management applications for longer than the timeout
    interval of two minutes, the cleanup code that deals with aging out
    registrants could erroneously drop the registration. The timeout is
    there to clean up should the management application die and fail to poll
    for updated AIF event packets.
    
    Moving the timer update from the ioctl code that delivers an AIF to the
    polling registrant to the bottom of the ioctl means the timeout is reset
    with any management application polling activity regardless if an AIF is
    delivered or not removing the erroneous timeout cleanups.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e53cb35aaefb83de695e3fd305b9cfabd5bf8c86
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:39:09 2005 -0700

    [SCSI] aacraid: remove duplicate io callback code
    
    Received from Mark Salyzyn from Adaptec:
    
    This patch removes the duplicate code in the write_callback command
    completion handler, and renames read_callback to io_callback. Optimized
    the lba calculation into the debug print routine macro to optimize the
    i/o code path.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bd1aac809ddbcf7772cfd809d8cfb29c729c6cf9
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:39:01 2005 -0700

    [SCSI] aacraid: driver shutdown method
    
    Add in pci shutdown method so that the adapter shuts down correctly and
    flushes its cache. Shutdown should also disable the adapter's interrupt
    when shutdown (in particularly if the driver is rmmod'd) to prevent
    spurious hardware activities.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c7f476023f57145357df32346b7de9202ce47d5f
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:38:55 2005 -0700

    [SCSI] aacraid: driver version update
    
    Received from Mark Salyzyn from Adaptec.
    
    Fixes a bug in check_revision.  It should return the driver version not
    the firmware version.
    Update driver version number.
    Update driver version string.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bed30de47b034b5f28fb7db2fae4860b9d9c0622
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed Aug 3 15:38:51 2005 -0700

    [SCSI] aacraid: interupt mitigation
    
    Received from Mark Salyzyn from Adaptec:
    
    If more than two commands are outstanding to the controller, there is no
    need to notify the adapter via a PCI bus transaction of additional
    commands added into the queue; it will get to them when it works through
    the produce/consumer indexes.
    
    This reduced the PCI traffic in the driver to submit a command to the
    queue to near zero allowing a significant number of commands to be
    turned around with no need to block for the PCI bridge to flush the
    notify request to the adapter.
    
    Interrupt mitigation has always been present in the driver; it was
    turned off because of a bug that prevented one from realizing the
    usefulness of the feature. This bug is fixed in this patch.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fc789a93994858b5e5a46afb96d0dcf6cc1b6f08
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Aug 5 16:24:54 2005 -0500

    [SCSI] aic7xxx/79xx: fix another potential panic due to a non existent target
    
    I ran into this one sending bus resets across the hardware.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e872d4cace8681838e8d18d52c92f4870e980a08
Merge: 1f3a730... 403fe5a...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 5 13:03:06 2005 -0400

    Merge ../from-linus

commit aa0ca6b4bb818406d4769edb9ff115500c8e4090
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 23:09:14 2005 +1000

    drm: fix warning in drm_pci.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1fad99499afdd2730adb1d53413b91580b1f0662
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 22:40:34 2005 +1000

    drm: remove the gamma driver
    
    The gamma driver has been broken for quite a while, it doesn't build,
    we don't have a userspace, mine is in Ireland etc...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit db215327c62c2db533afb322761fa04ea6244164
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 22:13:15 2005 +1000

    drm: switch drm_handle_t to unsigned int
    
    This converts the drm_handle_t to unsigned int.
    This is currently safe to do as we don't pass these across the kernel/user
    boundary, but userspace does use these, but no-one builds userspace against
    the kernel headers at present so it is okay to switch over the kernel copy
    of drm.h at this point. (The CVS tree will switch over soon in sync with
    some Mesa changes)
    
    From: Egbert Eich <eich@suse.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d1f2b55ad2c11f46e30547a9f7754e99b478348e
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 22:11:22 2005 +1000

    drm: updated DRM map patch for 32/64 bit systems
    
    I basically combined Paul's patches with additions that I had made
    for PCI scatter gather.
    I also tried more carefully to avoid problems with the same token
    assigned multiple times while trying to use the base address in the
    token if possible to gain as much backward compatibility as possible
    for broken DRI clients.
    
    From: Paul Mackerras <paulus@samba.org> and Egbert Eich <eich@suse.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit c73681e77b40697d16ada777adf2c6dc4db05917
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 22:02:48 2005 +1000

    drm: copy the right data back to userspace for getreserved contexts ioctl
    
    This fixes the information copied back to userspace by the get reserved
    contexts ioctl.
    
    From: Egbert Eich <eich@suse.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 24d109422787119337cd83732feef930d6a23f5c
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 21:52:18 2005 +1000

    drm: fix ioctl direction in r128 getparam
    
    Set the IOWR correctly for r128 getparam.
    
    From: Egbert Eich <eich@suse.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1f3a730117ceda2a7c917d687921fe3c82283968
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 5 03:33:14 2005 -0400

    [ACPI] Lindent created a syntax error that broke the build
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c202ac9fbdb64145f034be266d6ee88c98b40aa8
Merge: 4be44fc... c306895...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 5 00:49:06 2005 -0400

    Merge ../to-linus

commit 4be44fcd3bf648b782f4460fd06dfae6c42ded4b
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 5 00:44:28 2005 -0400

    [ACPI] Lindent all ACPI files
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c65ade4dc8b486e8c8b9b0a6399789a5428e2039
Author: Pavel Machek <pavel@suze.cz>
Date:   Fri Aug 5 00:37:45 2005 -0400

    [ACPI] whitespace
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1d492eb41371d9a5145651e8eb64bea1042a4057
Merge: 5d2a220... cbfc1ba...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Aug 5 00:31:42 2005 -0400

    [ACPI] Merge acpi-2.6.12 branch into 2.6.13-rc3
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cbfc1bae55bbd053308ef0fa6b6448cd1ddf3e67
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 30 04:18:00 2005 -0400

    [ACPI] ACPI_HOTPLUG_CPU Kconfig dependency update
    
    prevent:
    
    HOTPLUG_CPU=y
    ACPI_PROCESSOR=y
    ACPI_HOTPLUG_CPU=n
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4fdcf0804598f44b0f48da9e5281af48a4db393f
Author: Andrew Morton <len.brown@intel.com>
Date:   Sat Jul 30 04:18:00 2005 -0400

    [ACPI] lint: irqrouter_suspend() takes a pm_message_t, not a u32
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 031ec77bf67e4bda994ef8ceba267be3295ffdb7
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Sat Jul 30 04:18:00 2005 -0400

    [ACPI] acpi_remove_notify_handler() on video driver unload
    
    The video driver doesn't properly remove all the notify handlers
    on module unload.  This has a side effect of subdevices failing
    to register on module reload, but sudden death looms if the
    handlers trigger after the module is unloaded.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e92310a930462c6e1611f35453f57357c42bde14
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 30 04:18:00 2005 -0400

    [ACPI] fix IA64 build warning
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intelc.com>

commit 53de49f52e305e96143375d1741f15acff7bf34b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 30 04:18:00 2005 -0400

    [ACPI] CONFIG_ACPI=n build fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 14454a1b3ff8d1d15fbe7cc77f27373777184ddf
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] iosapic_register_intr() now returns error instead of panic
    error condition is passed along by acpi_register_gsi().
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 58e0276245f6c60119f0384e7eca576b08aa89e2
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] 8250 driver now checks for acpi_register_gsi() errors
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 71df30f8e3e97fde573c41df063c2d66c1ad01b0
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] PNPACPI driver now checks for acpi_register_gsi() errors
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a9bd53bc49ee8984633e57c1d9d45111c58e9457
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] HPET driver now checks for acpi_register_gsi() errors
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 349f0d5640c18db09a646f9da51a97f1da908660
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] acpi_pci_enable_irq() now checks for acpi_register_gsi() errors
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1f3a6a15771ed70d3b2581663dcc6b9bc134baa5
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Jul 28 14:42:00 2005 -0400

    [ACPI] acpi_register_gsi() can return error
    
    Current acpi_register_gsi() function has no way to indicate errors to its
    callers even though acpi_register_gsi() can fail to register gsi because of
    some reasons (out of memory, lack of interrupt vectors, incorrect BIOS, and so
    on).  As a result, caller of acpi_register_gsi() cannot handle the case that
    acpi_register_gsi() fails.  I think failure of acpi_register_gsi() should be
    handled properly.
    
    This series of patches changes acpi_register_gsi() to return negative value on
    error, and also changes callers of acpi_register_gsi() to handle failure of
    acpi_register_gsi().
    
    This patch changes the type of return value of acpi_register_gsi() from
    "unsigned int" to "int" to indicate an error.  If acpi_register_gsi() fails to
    register gsi, it returns negative value.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 79778a27be4c704552a18cf2a3e8b9e30623acd1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Aug 4 17:33:22 2005 -0500

    [SCSI] aic7xxx: upport all sequencer and core fixes from adaptec version 6.3.9
    
    This patch upports all relevant code fixes and bumps the driver version
    to 7.0 to signify starting a new tree.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 52b5cfb355b2b3274979d25490f190d478ab1fad
Author: Hannes Reinecke <hare@suse.de>
Date:   Thu Aug 4 09:16:59 2005 +0200

    [SCSI] aic79xx: fixup DT setting
    
    this patch is just a cross-port of the fixup for aic7xxx DT settings.
    As the same restrictions apply for aic79xx also (DT requires wide
    transfers) the dt setting routine should be modified equivalently.
    And an invalid period setting will be caught by ahd_find_syncrate()
    anyway.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5d2a22079c825669d91a3a200332f1053b4b61b0
Merge: 1c5ad84... bd6dbdf...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 4 18:09:09 2005 -0400

    /home/lenb/src/to-akpm branch 'acpi-2.6.12'

commit bd6dbdf3c7b9784fbf5d8500e427a954e27a976a
Merge: aefdcfa... d4ab025...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Aug 4 00:17:42 2005 -0400

    When a merge does not work automatically, git prevents
    commit from running until a change has been made in
    the destination.  In this instance the desired result
    was to choose the destination version of the file
    and ignore the source version, but git would not
    allow that.
    
    Here I added a blank line to let git commit think
    I resolved a merge conflict.

commit aefdcfa6c243702f1d35d23515d0e5eeca225c97
Merge: 0c9938c... 79cda7d...
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 3 18:12:57 2005 -0400

    Merge ../to-linus

commit 88ff29a4a5a8c4e0ecf375f783be071d1e7e264d
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Aug 3 15:59:04 2005 -0500

    [SCSI] aic79xx: add hold_mcs to the transport parameters
    
    since this card can support the setting, add it to the parameter list.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d872ebe4549576e7aab60ed7c746193196381dd0
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Aug 3 15:43:52 2005 -0500

    [SCSI] add missing hold_mcs parameter to the spi transport class
    
    This parameter is important only to people who take the time to tune the
    margin control settings, otherwise it's completely irrelevant.  However,
    just in case anyone should want to do this, it's appropriate to include
    the parameter.
    
    I don't do anything with it in DV by design, so the parameter will come
    up as off by default, so if anyone actually wants to play with the
    margin control settings they'll have to enable it under the
    spi_transport class first.
    
    I also updated the transfer settings display to report all of the PPR
    settings instead of only DT, IU and QAS
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3f40d7d6eaadecd48f6d1c0c4a5ad414b992260e
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Aug 3 13:25:10 2005 -0500

    [SCSI] aic79xx: fix up transport settings
    
    There's a slight problem in the way you've done the transport
    parameters; reading from the variables actually produces the current
    settings, not the ones you just set (and there's usually a lag because
    devices don't renegotiate until the next command goes over the bus).  If
    you set the bit immediately, you get into the situation where the
    transport parameters report something as being set even if the drive
    cannot support it.
    
    I patched the driver to do it this way and also corrected a panic in the
    proc routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a4b53a11806f5c0824eb4115b1de8206ed7bb89a
Author: Hannes Reinecke <hare@suse.de>
Date:   Mon Aug 1 09:52:56 2005 +0200

    [SCSI] aic79xx: DV parameter settings
    
    This patch updates various scsi_transport_spi parameters with the actual
    parameters used by the driver internally.
    Domain Validation for all devices should now work properly.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 73a25462100772b72a5d62fd66dff01b53018618
Author: Hannes Reinecke <hare@suse.de>
Date:   Fri Jul 22 16:44:04 2005 +0200

    [SCSI] aic79xx: update to use scsi_transport_spi
    
    This patch updates the aic79xx driver to take advantage of the
    scsi_transport_spi infrastructure. Patch is quite a mess as some
    procedures have been reshuffled to be closer to the aic7xxx driver.
    
    Rejections fixed and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 60a13213840296b1e32d6781653a0eaa83d04382
Author: Hannes Reinecke <hare@suse.de>
Date:   Fri Jul 22 16:42:28 2005 +0200

    [SCSI] aic79xx: Remove busyq
    
    From: Jeff Garzik <jgarzik@pobox.com>
    
    This patch removes the busyq in aic79xx and uses the command-queue from
    the midlayer instead. Additionally some dead code is removed.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    
    Fixed rejections
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d6810d33e5e43b11675190318a81303c601a568
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:49:26 2005 +0200

    [SCSI] qla1280: endianess annotations
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7a34766fdcec0c619aa68ace203b934dd7cf9dbc
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:49:22 2005 +0200

    [SCSI] qla1280: don't use bitfields for hardware access, parameters
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0888f4c3312847eec4814a6d7cdcaaaa9fbd3345
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:55 2005 +0200

    [SCSI] qla1280: don't use bitfields for hardware access in isp_config
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5c79d6154f335543ea4c4a555f645a1f76b5d117
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:46 2005 +0200

    [SCSI] qla1280: always load microcode
    
    we have the most recent microcode, make sure to always load it.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 748422d92a55faadf3184e5aa8487da88c1ee849
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:41 2005 +0200

    [SCSI] qla1280: remove SG_SEGMENTS
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d6db3e8d5fe3178776d0a0314e612c3f55e55fb4
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:36 2005 +0200

    [SCSI] qla1280: use SAM_ constants
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2b55cac3d2d9f545c141748d00eae86e2c042ca5
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:30 2005 +0200

    [SCSI] qla1280: misc cleanups
    
    print message tidy ups and some excess brace removal.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8af50dcd22aa0a5840f18276ff10a6977abc3853
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:19 2005 +0200

    [SCSI] qla1280: interupt posting for irq disabling/enabling
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a6c42741ace2fee235b6902e76f3c86a01d32146
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jul 4 17:48:13 2005 +0200

    [SCSI] qla1280: remove dead per-host flag variables
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Thiemo Seufer <ths@linux-mips.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8a60a07129fad60bba779a2a4038c7518b167fc7
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:13:24 2005 -0400

    libata: trim trailing whitespace.
    
    Also, fixup a tabs-to-spaces block of code in ata_piix.

commit 74fae82c8bd5dd78365abe25506a9ba388d4a889
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:08:32 2005 -0400

    [wireless hostap] trim trailing whitespace

commit 4fa969cfb2a6406fcffd0d1ec5f33ebf3fea9053
Merge: 2473535... bf79451...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:07:36 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit bf79451ec5862510b402c112c039698e68d0c250
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:07:26 2005 -0400

    [wireless ipw2200] trim trailing whitespace

commit 24735354f3074fa90b185b8cd7cb13fd53c39e6b
Merge: 62fe7e3... 2ff55fe...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:06:03 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit 2ff55fefc32bc8ead7eb46287e4daf0c2d83dafa
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Jul 31 13:05:43 2005 -0400

    ieee80211: trim trailing whitespace

commit b3df9f813bc7b9db62ae0c90b8990b1cebf97345
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:38:58 2005 +0200

    [PATCH] forcedeth: write back original mac address during ifdown
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 72b317825728942383b0c2e35016d29bbfb4df00
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:33:34 2005 +0200

    [PATCH] forcedeth: Add set_mac_address support
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ee73362cdd7d9b8166424f5f9e3176c629ac5cb2
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:32:26 2005 +0200

    [PATCH] forcedeth: 64-bit DMA support
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c2dba06dae7d6c4d15b83ea12d8c601cffd0aee9
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:29:47 2005 +0200

    [PATCH] forcedeth: rewritten tx irq handling
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit dc8216c192795b62f30ca34299fb79e897438372
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:26:05 2005 +0200

    [PATCH] forcedeth: Improve ethtool support
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d81c0983de80c956cf37835b0d35adb3ab4bb03a
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Sun Jul 31 18:20:30 2005 +0200

    [PATCH] forcedeth: Jumbo Frame Support
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0e920bfb0395fb16909fb98cb6e2782a1c6b73c7
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sat Jul 2 21:28:23 2005 -0400

    [PATCH] loopback: whitespace cleanup
    
    Whitespace cleanup for loopback driver.  Hopefully it fixes the last few
    annoyances.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 18c16c696e8b2323a306af455c686df15c717206
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sat Jul 2 21:28:22 2005 -0400

    [PATCH] loopback: optimize stats
    
    This patch slightly optimizes the loopback driver's stats update.
    
    Saves two loads, one add and one increment per packet sent.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d2ae1d2ff9282ca061b6f5244eee4c28ee2b3ffa
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sat Jul 2 21:28:21 2005 -0400

    [PATCH] loopback: #ifdef the TSO code
    
    This patch #ifdefs the TSO code in the loopback driver.
    
    Saves ~800 bytes of text on i386 and avoids a conditional in the fast path.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 541134cfe7af179f45458b68421ee1da7bab9cba
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun Jul 3 13:44:39 2005 +0100

    [PATCH] sata_nv: Support MCP51/MCP55 device IDs
    
    This is a multi-part message in MIME format.
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2f761478a2b436efa23659b4d5c826e53b11f91a
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Fri Jul 1 00:03:12 2005 +0200

    [PATCH] drivers/net/pci-skeleton.c: MODULE_PARM -> module_param
    
    Use module_param() instead of the old MODULE_PARM()
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit cd8749b4aa6b7502e234d72cb53c00a3bc27ed1b
Author: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
Date:   Fri Jul 15 11:16:42 2005 +0100

    [PATCH] Use time_before in hamradio drivers
    
    Use of time_before() macro, defined at linux/jiffies.h, which deal with
    wrapping correctly and are nicer to read.
    
    Signed-off-by: Marcelo Feitoza Parisi <marcelo@feitoza.com.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
     baycom_epp.c     |    3 ++-
     baycom_par.c     |    3 ++-
     baycom_ser_fdx.c |    3 ++-
     baycom_ser_hdx.c |    3 ++-
     mkiss.c          |    3 ++-
     5 files changed, 10 insertions(+), 5 deletions(-)
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b7721ff96fa15459c7c5de59323bedd61f1bcbd7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 22 23:39:12 2005 +0200

    [PATCH] include/net/ieee80211.h must #include <linux/wireless.h>
    
    -Wundef found an (although perhaps harmless) bug:
    
    <--  snip  -->
    
    ...
      CC      net/ieee80211/ieee80211_crypt.o
    In file included from net/ieee80211/ieee80211_crypt.c:21:
    include/net/ieee80211.h:26:5: warning: "WIRELESS_EXT" is not defined
      CC      net/ieee80211/ieee80211_crypt_wep.o
    In file included from net/ieee80211/ieee80211_crypt_wep.c:20:
    include/net/ieee80211.h:26:5: warning: "WIRELESS_EXT" is not defined
      CC      net/ieee80211/ieee80211_crypt_ccmp.o
      CC      net/ieee80211/ieee80211_crypt_tkip.o
    In file included from net/ieee80211/ieee80211_crypt_tkip.c:23:
    include/net/ieee80211.h:26:5: warning: "WIRELESS_EXT" is not defined
    ...
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6b9b97ce70b789014515f808b1b64c8e29e300d1
Author: Peter Hagervall <hager@cs.umu.se>
Date:   Wed Jul 27 01:14:46 2005 -0700

    [PATCH] orinoco: Sparse fixes
    
    A few sparse cleanups for orinoco.c
    
    Signed-off-by: Peter Hagervall <hager@cs.umu.se>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 504ff16cecf2a788181eddc9d6e47d94ce50a9f6
Author: Jochen Friedrich <jochen@scram.de>
Date:   Wed Jul 27 01:14:50 2005 -0700

    [PATCH] tms380tr: move to DMA API
    
    This patch makes tms380tr use the new DMA API.  Now that on Alpha, this API
    also supports bus master DMA for ISA (platform) devices, i changed the
    driver to use this new API.
    
    This also works around a bug in the firmware loader: The example provided
    in Documentation/firmware_class no longer works, as the firmware loader now
    calls get_kobj_path_length() and the kernel promptly oopses, as the
    home-grown device doesn't have a parent.  Of course, this doesn't happen
    with a "real" device which has its bus (or pseudo bus in the case of
    platform) as parent.
    
    Converted tms380tr to use new DMA API:
      - proteon.c, skisa.c: use platform pseudo bus to create a struct device
      - Space.c: delete init hooks
      - abyss.c, tmspci.c: pass struct device to tms380tr.c
      - tms380tr.c, tms380tr.h: new DMA API, use real device fo firmware loader
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 6b38aefe924daf2e4fdd73b384f21c913f31b668
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Jul 28 15:00:15 2005 -0400

    [PATCH] bonding: ALB -- allow slave to use bond's MAC address if its own MAC address conflicts
    
    In ALB mode, allow new slave to use bond's MAC address if the new
    slave's MAC address is being used within the bond and no other slave
    is using the bond's MAC address.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 62fe7e378109537ff80971c5208e12d40bf88bee
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 20:43:20 2005 -0700

    [PATCH] hostap: Replace crypto code with net/ieee80211 version
    
    Replace Host AP version of WEP, TKIP, CCMP implementation with
    net/ieee80211 that has more or less identical implementation (since
    it is based on the Host AP implementation). Remove Host AP specific
    implementation and modules from drivers/net/wireless/hostap.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ebed67d2847a9d299b47eeb5d82744671ab2b198
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 20:43:19 2005 -0700

    [PATCH] hostap: Start using net/ieee80211.h
    
    Preparations for starting to use net/ieee80211 instead of private
    IEEE 802.11 implementation. Include net/ieee80211.h and
    net/ieee80211_crypt.h into files that will be needed these in the
    future. Remove duplicate definitions from hostap_common.h and
    rename WLAN_FC_GET_{TYPE,STYPE} macros for now sinc net/ieee80211.h
    is using incompatible definitions. This will be resolved in the
    future by updating Host AP to use the versions that do not shift
    type/stype.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 727e6e932d76f05f8691a32bbeabd1061b051a3b
Merge: bdf242e... 889371f...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 31 13:34:09 2005 +1000

    Merge ../linux-2.6/

commit 00db8189d984d6c51226dafbbe4a667ce9b7d5da
Author: Andy Fleming <afleming@freescale.com>
Date:   Sat Jul 30 19:31:23 2005 -0400

    This patch adds a PHY Abstraction Layer to the Linux Kernel, enabling
    ethernet drivers to remain as ignorant as is reasonable of the connected
    PHY's design and operation details.
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8348b4db5f56d2c0d3849db06055225ec15b255a
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:16:14 2005 +0200

    [PATCH] sis190: compare the lpa to the local advertisement
    
    The station control register must depend on both the advertisement and the lpa
    
    The link partner ability has better be intersected with the current
    advertised value before it is feed to the station control register.
    
    Sight-catched-by: Lars Vahlenberg <lars.vahlenberg@gmail.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 560d3d521decc6d05dc0d6e007f1d2e1d3048102
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:15:51 2005 +0200

    [PATCH] sis190: PHY identifier for the K8S-MX motherboard.
    
    Added PHY identifier for the Asus K8S-MX motherboard
    
    Note: the same ID appears in the sis900 driver.
    
    Signed-off-by: Lars Vahlenberg <lars.vahlenberg@gmail.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fcb9821d3dd62ede360e7991734ac22b79e9a4f0
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:15:22 2005 +0200

    [PATCH] sis190: new PHY detection code.
    
    New PHY detection code.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fc10c39d7920b1db9ad2d80fa845896e529355dc
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:15:01 2005 +0200

    [PATCH] sis190: dummy read is required by the status register
    
    Add a dummy read before accessing the status register
    
    SiS driver suggests it.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 9ede109bbe93d5bbe4271e346106847fbfea95a1
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:14:38 2005 +0200

    [PATCH] sis190: allow a non-hardcoded ID for the PHY.
    
    Allow a non-hardcoded ID for the PHY
    
    This is the first step before the driver probes for the PHY address.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3cec93c7124c3037dbff826d6c08e9758a301cd7
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:14:18 2005 +0200

    [PATCH] sis190: add endian annotations.
    
    Add endian annotations.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bcad5e537840ef6fa28b2f1e126fefb4c39a7248
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:13:47 2005 +0200

    [PATCH] sis190: extract bits definition from SiS driver.
    
    extract bits definition from SiS driver
    
    - fix the Rx stats;
    - minor pieces of documentation.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 8b5641d4f1f7376257783b79f121a19ccd86b56b
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:13:03 2005 +0200

    [PATCH] sis190: the size of the Rx buffer is constrained
    
    Add a restriction to the size of the Rx buffer
    
    SiS driver forces the size of any Rx buffer to be a multiple of 64 bit.
    I would not be surprized that it goes along with some alignment issues
    which have been experienced before. So far it does not make much of a
    difference (both drivers use 1536 bytes buffer).
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 830fb7d23217ae748df0b16d4d419110810036b7
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:12:37 2005 +0200

    [PATCH] sis190: initialisation of MAC address.
    
    Extract some mac addr code from SiS's driver.
    
    Some magic may hide beyond the isa bridge. The Rx mac control
    register is now set without condition.
    
    Note: good or bad, this part of the code is quite close to sis900.c.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 40292fb0f041362bca2f6ad975acedce4f6e3f3e
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:12:06 2005 +0200

    [PATCH] sis190: remove hardcoded constants.
    
    Replace hardcoded constants by enumerated values in sis190_read_eeprom
    
    The names of the enumerated values have been extracted from SiS'official
    driver (v1.00.00 published on 2005/07/11).
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 188f23ba94a618b12cc205306f02b4f5036c4fa7
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:11:43 2005 +0200

    [PATCH] sis190: merge some register related information from SiS driver.
    
    Merge some register related information from SiS driver.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 92aab3c08eca4770228715d26c8234cca4fae9af
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:11:18 2005 +0200

    [PATCH] sis190: add MAINTAINER entry.
    
    add MAINTAINER entry
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 43afb949a955a7d88f4baf43d5c676bf4c31ff6c
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:10:21 2005 +0200

    [PATCH] sis190: ethtool/mii support.
    
    ethtool/mii support
    
    Bug: disabling autonegotiation and setting the link parameters at the
    same time does not provide the expected result. More investigation is
    needed.
    
    Note: past the initial probe/open time, the link is managed from user-space
    or accessed through sis190_phy_task, i.e. in a usermode context. Whence the
    very limited locking needs.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 4405d3b5ef0a870e8d70ee4a3d050c89fcc40a86
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:09:20 2005 +0200

    [PATCH] sis190: netconsole support.
    
    netconsole support.
    
    This stuff should be factored out of every driver.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 890e8d0a3ded0b1dee9020bbef7e9908e2228ffb
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Sat Jul 30 13:08:43 2005 +0200

    [PATCH] sis190: resurrection
    
    Raise the sis190 driver from the dead
    
    The driver handles the integrated network device found on SiS 965L
    chipset. It follows the classical (non-napi) interrupt-driven model
    and provides minimal ethtool support.
    
    The code comes from a heavy cleanup/rewrite of the original code
    which was removed from the kernel on 14/04/2004. Since the r8169
    driver does not work too bad and there will probably be (at least)
    a few months of improvements/testing/fixing, I made the code as
    close as possible to the r8169 one.
    
    Pascal Chapperon <pascal.chapperon@wanadoo.fr> deserves some special
    credit for testing and bug-catching. Many thanks to Lars Vahlenberg
    as well.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f3b10e1636dec053f4874d593e3de5d46da48a5f
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:50:06 2005 -0700

    [PATCH] hostap update
    
    Fixed beacon frame when moving from monitor mode to master mode
    (workaround for firmware bug that left IBSS IE in the Beacon
    frames). This is using the same workaround that was previously used
    when moving from adhoc mode to master mode.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit b15eff2632be3fcea68e01ba7f12e26a731e3157
Author: Pavel Roskin <proski@gnu.org>
Date:   Sat Jul 30 12:50:05 2005 -0700

    [PATCH] hostap update
    
    Warning fix for 64-bit platforms
    
    Hello!
    
    The patch fixes following warning seen on 64-bit platforms (in my case -
    x86_64, gcc-4.0):
    
    In file included from /usr/local/src/hostap/driver/modules/hostap_cs.c:203:
    /usr/local/src/hostap/driver/modules/hostap_hw.c: In function ?prism2_transmit_cb?:
    /usr/local/src/hostap/driver/modules/hostap_hw.c:1674: warning: cast from pointer to integer of different size
    /usr/local/src/hostap/driver/modules/hostap_hw.c: In function ?prism2_transmit?:
    /usr/local/src/hostap/driver/modules/hostap_hw.c:1758: warning: cast to pointer from integer of different size
    
    prism2_transmit_cb uses a (void *) argument to get an integer.   A
    simple fix would be to use double cast from pointer to long and then to
    int (and vice versa when int is passed as a pointer).  But I prefer a
    slightly longer patch.
    
    I believe that whenever an argument can hold both a pointer and an
    integer, it should be declared long.  long can hold both pointers and
    integers (except win64, but we are not coding for Windows), it can be
    cast to both of them and it's never assumed to be a valid pointer, which
    could be useful for some automatic code checkers.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 3e1d393240880e3d7ae580c46f1ba265643fcd15
Author: Brandon Enochs <enochs@itd.nrl.navy.mil>
Date:   Sat Jul 30 12:50:04 2005 -0700

    [PATCH] hostap update
    
    line 129 of hostap_80211_rx.c should read:
    
           LWNG_SETVAL(mactime, 2, 0, 4, rx_stats->mac_time);
    
    not:
           LWNG_SETVAL(mactime, 2, 0, 0, rx_stats->mac_time);
    
    The length field is incorrect.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0c629a69fd8ec7b67566cfc052a9b1c4b927805a
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:50:03 2005 -0700

    [PATCH] hostap update
    
    Firmware seems to be getting into odd state in host_roaming mode 2
    when hostscan is used without join command, so try to fix this by
    re-joining the current AP. This does not actually trigger a new
    association if the current AP is still in the scan results.
    
    This makes background scans (iwlist wlan0 scan) not to break data
    connection when in host_roaming 2 mode, e.g., when using wpa_supplicant.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2e4fd068e7e25e654a454ed4a425f239c0f6407a
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:50:02 2005 -0700

    [PATCH] hostap update
    
    Cleaned up scan result processing by converting struct
    hfa384x_scan_result into struct hfa384x_hostscan_result. This removes
    special cases from result processing since the results are only used
    in one, hostscan, format.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 72ca9c61cddb82a8596cee8141656d50aba42be5
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:50:01 2005 -0700

    [PATCH] hostap update
    
    Added support for setting channel mask for scan requests
    ('iwpriv wlan0 scan_channels 0x00ff' masks scans to use channels 1-8).
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f06ac319c05c6822f878f201ae80e54fbbe8be8c
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:50:00 2005 -0700

    [PATCH] hostap update
    
    Add MODULE_VERSION information for the Host AP kernel modules and
    update the version string to indicate which version of the external
    Host AP driver is included in the kernel tree.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 093853c395df33104ee12c3df4398820d665d107
Author: Henrik Brix Andersen <brix@gentoo.org>
Date:   Sat Jul 30 12:49:59 2005 -0700

    [PATCH] hostap update
    
    pcmcia id_table for hostap_cs.c
    
    Hi Jouni,
    
    Here's a patch for adding a pcmcia id_table to hostap_cs.c as introduced
    by the PCMCIA subsystem changes in linux-2.6.13-rc1. The id_table allows
    hotplug (along with pcmciautils [1]) to load the driver without the need
    for the pcmcia-cs cardmgr daemon.
    
    The id_table was generated from the CVS version of hostap_cs.conf using
    a script borrowed from Dominik Brodowski. I have removed any duplicate
    entries, but I have only been able to test the functionality of the
    patch with a Linksys WPC11v3.
    
    Sincerely,
    Brix
    
    [1]: http://www.kernel.org/pub/linux/utils/kernel/pcmcia/
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0cd545d6ba0e0138782eb0ec287d0eb3db529b69
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sat Jul 30 12:49:58 2005 -0700

    [PATCH] hostap update
    
    Create sysfs "device" files for hostap
    
    I was writing some scripts to automatically build kismet source lines,
    and I noticed that hostap devices don't have device files, unlike my
    prism54 and ipw2200 cards:
    
    $ ls -l /sys/class/net/eth0/device
    /sys/class/net/eth0/device -> ../../../devices/pci0000:00/0000:00:1e.0/0000:02:01.0
    $ ls -l /sys/class/net/wifi0
    ls: /sys/class/net/wifi0/device: No such file or directory
    $ ls -l /sys/class/net/wlan0
    ls: /sys/class/net/wlan0/device: No such file or directory
    
    The following (quite small) patch makes sure that both the wlan and wifi
    net devices have that pointer to the bus device.
    
    This way, I can do things like
    
            for i in /sys/class/net/*; do
                    if ! [ -e $i/device/drive ]; then
                            continue;
                    fi;
                    driver=$(basename $(readlink $i/device/driver))
                    case $driver in
                            hostap*)
                                    echo -- hostap,$i,$i-$driver
                                    break;
                            ipw2?00)
                                    echo -- $driver,$i,$i-$driver
                                    break;
                            prism54)
                                    echo prism54g,$i
                    esac
            done
    
    Which should generate a working set of source lines for kismet no matter
    what order I plug the cards in.
    
    It might also be handy to have a link between the two net devices, but
    that's a patch for another day.
    
    That patch is against 2.6.13-rc1-mm1.
    
    -- Dave
    
    Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 0ef79ee22cf5c1b177184c18b6525889bcc6681f
Author: Jar <jar@pcuf.fi>
Date:   Sat Jul 30 12:49:57 2005 -0700

    [PATCH] hostap update
    
    hostap_cs: Remove irq_list, irq_mask and pcmcia/version.h
    
    Remove irq_list, irq_mask and pcmcia/version.h as suggested in
    http://kernel.org/pub/linux/utils/kernel/pcmcia/pcmcia.html
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 1fad810473423bbf0626fab2fbeb27a4663fa2d5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 30 12:49:56 2005 -0700

    [PATCH] hostap update
    
    EXPORT_SYMTAB does nothing. There's no need to define something if it
    doesn't have any effect.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 47e362cf6942de8b3a227929bf8bab578d92ad49
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Sat Jul 30 12:49:55 2005 -0700

    [PATCH] hostap update
    
    Update hostap_cs to use new PCMCIA event callback registration.
    
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit de745fb27983770ebfdeaa70f8a36f791fb33786
Merge: 08cd84c... a670fcb...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Jul 30 18:14:50 2005 -0400

    /spare/repo/netdev-2.6 branch 'ieee80211'

commit a670fcb43f01a67ef56176afc76e5d43d128b25c
Merge: 327309e... b082548...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Jul 30 18:14:15 2005 -0400

    /spare/repo/netdev-2.6 branch 'master'

commit 47ba39eead9f4495cd6a3eca39d7c73d0f0d61c9
Author: James Bottomley <jejb@titanic.(none)>
Date:   Sat Jul 30 11:39:53 2005 -0500

    [SCSI] add template for scsi_host_set_state()
    
    Fixes up some warnings in the tree.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 82f29467a025f6a2192d281e97fca0be46e905cc
Author: Mike Anderson <andmike@us.ibm.com>
Date:   Thu Jun 16 11:14:33 2005 -0700

    [SCSI] host state model update: mediate host add/remove race
    
    Add support to not allow additions to a host when it is being removed.
    
    Signed-off-by: Mike Anderson <andmike@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d2c9d9eafa03dbd08a8a439e6c5addb8b1f03b9b
Author: Mike Anderson <andmike@us.ibm.com>
Date:   Thu Jun 16 11:13:42 2005 -0700

    [SCSI] host state model update: reimplement scsi_host_cancel
    
    Remove the old scsi_host_cancel function as it has not been working for
    sometime do to the device list possibly being empty when it is called and
    possible race issues. Add setting of SHOST_CANCEL at the state of beginning
    of scsi_remove_host.
    
    Signed-off-by: Mike Anderson <andmike@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d3301874083874f8a0ac88aa1bb7da6b62df34d2
Author: Mike Anderson <andmike@us.ibm.com>
Date:   Thu Jun 16 11:12:38 2005 -0700

    [SCSI] host state model update: replace old host bitmap state
    
    Migrate the current SCSI host state model to a model like SCSI
    device is using.
    
    Signed-off-by: Mike Anderson <andmike@us.ibm.com>
    
    Rejections fixed up and
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5dbffcd83d826a9b42a10afb89b13156dc5b9539
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jul 27 01:07:42 2005 -0700

    [SCSI] git-scsi-misc: drivers/scsi/ch.c: remove devfs stuff
    
    It seems very unlikely that this driver will go into any stable kernel
    before devfs will be removed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0a637a2cec724eeb4649f6d1c07026b72c39ad84
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jul 19 22:04:24 2005 +0200

    [SCSI] aic byteorder fixes after recent cleanup
    
     aic doesnt work anymore after this change which appeared int 2.6.13-rc1:
     [SCSI] aic7xxx/aic79xx: remove useless byte order macro cruft
    
     2 files did not include byteorder.h, aic died with panic
     "Unknown opcode encountered in seq program"
     This patch fixes it for me.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0c9938cc75057c0fca1af55a55dcfc2842436695
Author: Robert Moore <robert.moore@intel.com>
Date:   Fri Jul 29 15:15:00 2005 -0700

    [ACPI] ACPICA 20050729 from Bob Moore
    
    Implemented support to ignore an attempt to install/load
    a particular ACPI table more than once. Apparently there
    exists BIOS code that repeatedly attempts to load the same
    SSDT upon certain events. Thanks to Venkatesh Pallipadi.
    
    Restructured the main interface to the AML parser in
    order to correctly handle all exceptional conditions. This
    will prevent leakage of the OwnerId resource and should
    eliminate the AE_OWNER_ID_LIMIT exceptions seen on some
    machines. Thanks to Alexey Starikovskiy.
    
    Support for "module level code" has been disabled in this
    version due to a number of issues that have appeared
    on various machines. The support can be enabled by
    defining ACPI_ENABLE_MODULE_LEVEL_CODE during subsystem
    compilation. When the issues are fully resolved, the code
    will be enabled by default again.
    
    Modified the internal functions for debug print support
    to define the FunctionName parameter as a (const char *)
    for compatibility with compiler built-in macros such as
    __FUNCTION__, etc.
    
    Linted the entire ACPICA source tree for both 32-bit
    and 64-bit.
    
    Signed-off-by: Robert Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit bdf242eeb0f69567fe43eba93889d80ecacbfe94
Merge: 836cf04... b082548...
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sat Jul 30 14:37:43 2005 +1000

    Merge ../linux-2.6/

commit dd8f39bbf5154cdbfd698fc70c66faba33eafa44
Merge: c2c2e03... 87bec66...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 29 23:11:11 2005 -0400

    Merge ../to-linus

commit c2c2e03409f5f5405e79d9d9156202b75cb5b35b
Author: Iacopo Spalletti <avvisi@spalletti.it>
Date:   Sun Jul 17 02:06:00 2005 -0400

    [ACPI] update hotkey documentation
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4903
    
    Signed-off-by: Iacopo Spalletti <avvisi@spalletti.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4689ced99b18937e28c0f6c190394ccc3c61d651
Author: Peer Chen <Peer.Chen@uli.com.tw>
Date:   Fri Jul 29 15:33:58 2005 -0400

    [netdrvr] add 'uli526x' driver (a tulip clone)
    
    We want to extract our LAN card driver from tulip core driver and
    make a new file uli526x.c at tulip folder, because we have added
    some ethtool interface support and non-eprom support in our driver
    and may be other change in the futher.
    
    If our controllers support are still contained in the tulip core
    driver, I think it'll increase the complexity of maintenance, you
    know, tulip core driver include several files and support so many
    other controllers.  Furthermore, I tested the newest kernel 2.6.12
    and I found the tulip driver can not work on our lan controller, and
    I no time to debug it, so I aspired want to make a single uli526x.c
    file just for our controllers.  Could you help us remove the ULi
    m5261/m5263 lan controller support from tulip core driver and add
    the new single uli526x.c file for us?
    
    Signed-off-by: Peer Chen <Peer.Chen@uli.com.tw>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 670fac79b9dcf16549a4c1f4c0b73c457e53bd7e
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 29 00:16:54 2005 -0400

    [ACPI] disable module level AML code (for now)
    
    It is important that we support module level code --
    BIOS's implement it.  But this implementation needs
    more testing.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5d75ab45594c78d2d976a3248ea1ca281c9d7056
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 29 00:03:55 2005 -0400

    [ACPI] handle const char * __FUNCTION__ in debug code
    build warning: discards qualifiers from pointer target type
    when mixing "const char *" and "char *"
    
    We should probably update the routines to expect const,
    but easier for now to shut up the warning with 1 cast.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit feee9570753645f9f6888937ff9aee426b7afe55
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 29 00:01:00 2005 -0400

    [ACPI] comment out prototypes for new unused debug routines
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fb7f6ff614f3ead2ca41bb4a348b9ea431d95176
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 28 17:56:25 2005 +0200

    [PATCH] kconfig: trivial cleanup
    
    Replace all menu_add_prop mimicking menu_add_prompt with the latter func. I've
    had to add a return value to menu_add_prompt for one usage.
    
    I've rebuilt scripts/kconfig/zconf.tab.c_shipped by hand to reflect changes
    in the source (I've not the same Bison version so regenerating it wouldn't
    have been not a good idea), and compared it with what Roman itself did some
    time ago, and it's the same.
    
    So I guess this can be finally merged.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 66d609ec8a4464b5fbe7a0723e3958b98c95991a
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 28 23:11:34 2005 +0200

    kbuild: fix make TAGS (for emacs use)
    
    From: bongiojp@clarkson.edu <Jeremy Bongio>
    make TAGS does not make source code tags for emacs. It instead
    returns an error than "etags -" isn't valid. The problem is
    easily remedied.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 49490571bcfe24d279a66ba24198e8ba299fe58f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Jul 28 17:56:17 2005 +0200

    [PATCH] kbuild: describe Kbuild pitfall
    
    Whitespace is significant for make, and I just fought against this... so
    please apply this patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 661299d9d0437a0ff72240f3d60016ac3a361a6e
Merge: 05caac5... 41c018b...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jul 28 09:30:20 2005 +0100

    Merge with Linus' 2.6 tree

commit 61d9cdf2a9ccb9e4770d7723db8b18b8952778ce
Author: J.A. Magallon <jamagallon@able.es>
Date:   Fri Jul 15 22:14:43 2005 +0000

    [PATCH] kbuild: signed char fixes for scripts
    
    This time I did not break anything... and they shut up gcc4 ;)
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 84c2a2eb348f3bd85ec8eb3bb95ba04f65f4e217
Author: Keenan Pepper <keenanpepper@gmail.com>
Date:   Wed Jul 27 14:14:00 2005 -0400

    [PATCH] kbuild: signed/unsigned char fix for make menuconfig
    
    Quiet some silly warnings.
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit db8c1a7b2ca25f37b1429c00e82d6568f86caec1
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Wed Jul 27 22:11:01 2005 +0200

    kbuild: fix building external modules
    
    kbuild failed to locate Makefile for external modules.
    This brought to my attention how the variables for directories
    have different values in different usage scenarios.
    
    Different kbuild usage scenarios:
    make       - plain make in same directory where kernel source lives
    make O=    - kbuild is told to store output files in another directory
    make M=    - building an external module
    make O= M= - building an external module with kernel output seperate from src
    
    Value assigned to the different variables:
    
               |$(src)          |$(obj) |$(srctree)        |$(objtree)
    make       |reldir to k src |as src |abs path to k src |abs path to k src
    make O=    |reldir to k src |as src |abs path to k src |abs path to output dir
    make M=    |abs path to src |as src |abs path to k src |abs path to k src
    make O= M= |abs path to src |as src |abs path to k src |abs path to k output
    
    path to kbuild file:
    
    make       | $(srctree)/$(src), $(src)
    make O=    | $(srctree)/$(src)
    make M=    | $(src)
    make O= M= | $(src)
    
    From the table above it can be seen that the only good way to find the
    home directory of the kbuild file is to locate the one of the two variants
    that is an absolute path. If $(src) is an absolute path (starts with /)
    then use it, otherwise prefix $(src) with $(srctree).
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c5fbc3966f48279dbebfde10248c977014aa9988
Merge: 39299d9... 9e566d8...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jul 27 14:14:13 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 05caac585f8abd6c0113856bc8858e3ef214d8a6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:41:18 2005 +0100

    [SERIAL] Convert parport_serial to use new 8250_pci interfaces
    
    Convert parport_serial to use the new 8250_pci interface, converting
    the table to a pciserial_board table.  This also unuses the SPCI_*
    definitions in serialP.h, which can now be removed.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 241fc4367b3ca5d407b043599ed980304a70b91f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:35:54 2005 +0100

    [SERIAL] Expose 8250_pci setup/removal/suspend/resume functions
    
    Re-jig the setup/removal/suspend/resume of 8250 pci ports so that they
    know slightly less about how they're attached to a PCI device.  Expose
    this as the new interface for registering PCI serial ports, as well as
    the pciserial_board structure and associated flag definitions.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 70db3d91a5228c98603c55fa06c87184a1f9f6db
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:34:27 2005 +0100

    [SERIAL] Pass around serial_private instead of pci_dev
    
    Pass the serial_private structure via the setup method instead of
    the pci_dev.  We don't want to assume that the pci_dev's driver
    data is a pointer to serial_private.  Instead, put the pci_dev
    inside serial_private.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 67d74b870725448e0108984eec551609771e6b73
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:33:03 2005 +0100

    [SERIAL] Collapse the SIIG quirk entries
    
    Collapse all the SIIG quirk entries into one.  SIIG10x cards all
    have PCI device IDs of 0x10xx, SIIG20x cards all have PCI device
    IDs of 0x20xx.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 72ce9a83331afdd4df944f210a5210bf5acb7d6a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:32:04 2005 +0100

    [SERIAL] Factor out the common setup from the per-serial port loop.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1c7c1fe51629d82e1dff22b2c4d409b252fb2b05
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 27 11:31:19 2005 +0100

    [SERIAL] Rename pci_board to pciserial_board.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 72ba47c1b293ae78f7d798b458bb9d3db65c7551
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Wed Jul 27 11:39:37 2005 +0200

    kbuild: silence mystery message
    
    During last phase of the build the following message were displayed:
    /bin/sh: +@: command not found
    
    This message appears due to slightly changed semantics
    of cmd and if_changed_rule.
    The easy fix was to insert a dummy command first in rule_ksym_ld.
    The alternative was to redo part of this processing in the top-level
    Makefile - a volatile area that I try to avoid.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit 23a45e2c0a16bfd80eba853b44717d21c37bcf30
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Wed Jul 27 09:12:07 2005 +0200

    kbuild: pass less variables to second make invocation when using make O=...
    
    make exports all variables assigned on the command-line, so no need to pass
    them explicit.
    This fixes http://bugzilla.kernel.org/show_bug.cgi?id=4725
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit e579d351b4bcea0038f5df08fff7160352b2c365
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Wed Jul 27 08:10:10 2005 +0200

    kbuild: KBUILD_VERBOSE was exported twice
    
    This fixes http://bugzilla.kernel.org/show_bug.cgi?id=4727
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit f9f97bc014d7402cd2d135e20bcd25dfec93257b
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Wed Jul 20 05:43:05 2005 +0200

    [PATCH] kallsyms: clarify KALLSYMS_ALL help text
    
    Clarify the KALLSYMS_ALL help text slightly.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>

commit 2315c6e42278152360470124ce903ecb8c97270a
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Mon Jul 25 22:41:12 2005 +0000

    kbuild: define clean before including kbuild file
    
    Defining clean before including the kbuild file give us knowledge when
    the kbuild file is included for cleaning. This is rarey usefull - but in
    a corner case in klibc this proved necessary.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit 2a691470345a0024dd7ffaf47ad3d0f5f4f41924
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Mon Jul 25 20:26:04 2005 +0000

    kbuild: fix make O=...
    
    kbuild failed to locate Kbuild.include.
    Teach kbuild how to find Kbuild files when using make O=...
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit 8ec4b4ff1c89bb280e662b84eba503ca44abe836
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Mon Jul 25 20:10:36 2005 +0000

    kbuild: introduce Kbuild.include
    
    Kbuild.include is a placeholder for definitions originally present in
    both the top-level Makefile and scripts/Makefile.build.
    There were a slight difference in the filechk definition, so the most videly
    used version was kept and usr/Makefile was adopted for this syntax.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit 7c6b155fb49fbc63e0b30a1d49552693c0b45be7
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Mon Jul 25 12:51:08 2005 +0000

    kbuild: drop descend - converting existing users
    
    There was only two users left of descend. Fix them so they
    use $(clean)= and $(build)=.
    Drop definition of descend.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit 43af5f23354dbd67d2fd2d523eefad8053ac388b
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Mon Jul 25 12:40:34 2005 +0000

    kbuild: drop -Wundef from HOSTCFLAGS for now
    
    -Wundef caused warnings in the bison generated code in kconfig.
    Updating to a newer bison (1.875d) did not fix it. The alternatives
    was to correct the autogenerated code or drop -Wundef.
    For now -Wundef is dropped from HOSTCFLAGS.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    ---

commit d178817803d95e4e3ca270bccd1ae2bed4780977
Author: Coywolf Qi Hunt <coywolf@sosdg.org>
Date:   Tue Jul 19 09:42:54 2005 -0500

    [PATCH] kbuild: make help binrpm-pkg fix
    
    This fixes kbuild make help binrpm-pkg missing `''.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 3c521e06fad4b4b7fe4811fb8363d12cf49f40a2
Author: Olaf Hering <olh@suse.de>
Date:   Thu Jul 21 21:02:09 2005 +0200

    [PATCH] kbuild: add -Wundef to global CFLAGS
    
    A recent change to the aic scsi driver removed two defines to detect
    endianness. cpp handles undefined strings as 0. As a result, the test turned
    into #if 0 == 0 and the wrong code was selected.
    Adding -Wundef to global CFLAGS will catch such errors.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 39299d9d15c41cbdd7c7009967cd35afaf34d8fa
Merge: ce625a8... f60f700...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Jul 19 17:49:39 2005 -0400

    Merge with /shiny/git/linux-2.6/.git

commit ce625a801664d8ed7344117bbb57510e4e0e872c
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon Jul 18 14:24:46 2005 -0400

    AUDIT: Reduce contention in audit_serial()
    ... by generating serial numbers only if an audit context is actually
    _used_, rather than doing so at syscall entry even when the context
    isn't necessarily marked auditable.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ce454d4d7278b815dcee957653ce388146484f5f
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Fri Jul 15 07:56:36 2005 -0700

    [PATCH] kbuild: When checking depmod version, redirect stderr
    
    When running depmod to check for the correct version number, extra
    output we don't need to see, such as "depmod: QM_MODULES: Function not
    implemented" may show up.  Redirect stderr to /dev/null as the version
    information that we do care about comes to stdout.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit d5b454f2c40c9efd0cc113bc3220ebcb66b7c022
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Jul 15 12:56:03 2005 +0100

    AUDIT: Fix livelock in audit_serial().
    
    The tricks with atomic_t were bizarre. Just do it sensibly instead.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 946dc121d7d1c606f6bbeb8ae778963a1e2ff59c
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:28:49 2005 +0000

    kbuild: fix make O=... build
    
    It fixes the following error:
    
    make[1]: *** No rule to make target `include/asm', needed by `arch/alpha/kernel/asm-offsets.s'.  Stop.
    
    Reported by:
    From: Jan Dittmer <j.dittmer@portrix.net>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit a91f98a284321ffc9eb28ccfbf4329f7aa422f97
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:26:09 2005 +0000

    kbuild: Fix bug in make deb-pkg when using seperate source and output directories
    
    From: Ryan Anderson <ryan@michonline.com>
    
    When running "make O=something deb-pkg", I get a failure that claims I
    haven't configured my kernel (I have).  Running it a second time tells
    me to run "make mrproper"  (include/linux/version.h got built on the
    first run)
    
    Original patch from:
    From: Ajay Patel <patela@gmail.com>
    
    With modifications from:
    Signed-off-By: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit dc5962fdf13f4d10a5fb8d0b0ae6f406ee8aed49
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:24:56 2005 +0000

    uml: Restore proper descriptions in make deb-pkg target
    
    From: Ryan Anderson <ryan@michonline.com>
    
    This pulls the description from the Debian user-mode-linux package, and
    puts $version back in the appropriate places for both descriptions.
    
    Signed-off-by: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 687c3dac59f1746a1cf877eb52e93046a4998e03
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:24:00 2005 +0000

    uml: Make deb-pkg build target build a Debian-style user-mode-linux package
    
    From: Ryan Anderson <ryan@michonline.com>
    
    Make the deb-pkg build target understand the "um" arch and set up the
    package and directory structure to match a mainline-Debian style
    user-mode-linux package.
    
    This is primarily so that it stops matching, exactly, the naming
    convention used by normal, non-UML kernels generated by this command.
    
    Installing "linux-2.6.11" and "linux-2.6.11", where one is a UML kernel
    doesn't do the right thing.  This fixes that.
    
    Signed-off-by: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit d80e22460968ec7986c82fd7d207ebe3de59e03d
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:22:39 2005 +0000

    kbuild: Don't fail if include/asm symlink exists
    
    From: Andreas Gruenbacher <agruen@suse.de>
    
    We're having the following situation: There are user-space applications
    that include kernel headers directly. With a completely unconfigured
    /usr/src/linux tree, including most headers fails because essential
    files are not there:
    
    	include/asm
    	include/linux/autoconf.h
    	include/linux/version.h
    
    So we create these files. On the other hand, we want to use
    /usr/src/linux as read-only source for building kernels or additional
    modules. Now when building a kernel with a separate output directory
    (O=), there is a check in the main makefile for the include/asm symlink.
    There is no real need for this check: if we ensure that
    $(objdir)/include/asm is always created as the patch does,
    $(srctree)/include/asm becomes irrelevant.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c5f75eca120de6587e67a1951ce3e6912e2c6879
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:20:13 2005 +0000

    kbuild: fix buildcheck
    
    From: Randy Dunlap <rddunlap@osdl.org>
    
    I should not have added init.text test here;
    it's more than useless, it actually degrades the output.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 33bc25eae40c100238a5abe8472cef0cd40226f1
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:19:08 2005 +0000

    kbuild: Add target debug_kallsyms
    
    From: Keith Owens <kaos@ocs.com.au>
    
    Make it easier to generate maps for debugging kallsyms problems.
    debug_kallsyms is only a debugging target so no help or silent mode.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit bd5bdd875b29e882f80d2cd6dd1da468641dad2a
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:18:07 2005 +0000

    kbuild: "PREEMPT" in UTS_VERSION
    
    From: Matt Mackall <mpm@selenic.com>
    
    Add PREEMPT to UTS_VERSION where enabled as is done for SMP to make
    preempt kernels easily identifiable.
    Added SMP PREEMPT as comment in compile.h to force it to be
    updated when they change (sam).
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6d30e3a8995c9fa9e8471bb1dff8e070638df5ea
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:15:44 2005 +0000

    kbuild: Avoid inconsistent kallsyms data
    
    Several reports on inconsistent kallsyms data has been caused by the aliased symbols
    __sched_text_start and __down to shift places in the output of nm.
    The root cause was that on second pass ld aligned __sched_text_start to a 4 byte boundary
    which is the function alignment on i386.
    sched.text and spinlock.text is now aligned to an 8 byte boundary to make sure they
    are aligned to a function alignemnt on most (all?) archs.
    
    Tested by: Paulo Marques <pmarques@grupopie.com>
    Tested by: Alexander Stohr <Alexander.Stohr@gmx.de>
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 53e88e03e63621a15ec7fbccaaaca1a0f1616ed4
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:14:42 2005 +0000

    buildcheck: reduce DEBUG_INFO noise from reference* scripts
    
    From: Randy Dunlap <rddunlap@osdl.org>
    
    Reduce noise in 'make buildcheck' that is caused by CONFIG_DEBUG_INFO=y.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit cfca82f2179dd1aee84a5bf3b14710e4d7487aed
Author: Sam Ravnborg <sam@mars.(none)>
Date:   Thu Jul 14 20:12:40 2005 +0000

    kbuild: Fix build as root then user
    
    From: Matthew Wilcox <matthew@wil.cx>
    I inadvertently built a tree as root and then rebuilt it as a user.  I
    got a lot of prompts ...
    
    mv: overwrite `drivers/char/drm/drm_auth.o', overriding mode 0644?
    
    Using mv -f fixes that.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 351bb722590b2329ac5e72c4b824b8b6ce6e3082
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu Jul 14 14:40:06 2005 +0100

    AUDIT: Fix compile error in audit_filter_syscall
    
    We didn't rename it to audit_tgid after all. Except once... Doh.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f9f4601f331aa1226d7a798a01950efbb388f07f
Author: Robert Moore <robert.moore@intel.com>
Date:   Fri Jul 8 00:00:00 2005 -0400

    ACPICA 20050708 from Bob Moore <robert.moore@intel.com>
    
    The use of the CPU stack in the debug version of the
    subsystem has been considerably reduced.  Previously, a
    debug structure was declared in every function that used
    the debug macros.  This structure has been removed in
    favor of declaring the individual elements as parameters
    to the debug functions.  This reduces the cumulative stack
    use during nested execution of ACPI function calls at the
    cost of a small increase in the code size of the debug
    version of the subsystem.  With assistance from Alexey
    Starikovskiy and Len Brown.
    
    Added the ACPI_GET_FUNCTION_NAME macro to enable the
    compiler-dependent headers to define a macro that will
    return the current function name at runtime (such as
    __FUNCTION__ or _func_, etc.) The function name is used
    by the debug trace output.  If ACPI_GET_FUNCTION_NAME
    is not defined in the compiler-dependent header, the
    function name is saved on the CPU stack (one pointer per
    function.) This mechanism is used because apparently there
    exists no standard ANSI-C defined macro that that returns
    the function name.
    
    Alexey Starikovskiy redesigned and reimplemented the
    "Owner ID" mechanism used to track namespace objects
    created/deleted by ACPI tables and control method
    execution.  A bitmap is now used to allocate and free the
    IDs, thus solving the wraparound problem present in the
    previous implementation.  The size of the namespace node
    descriptor was reduced by 2 bytes as a result.
    
    Removed the UINT32_BIT and UINT16_BIT types that were used
    for the bitfield flag definitions within the headers for
    the predefined ACPI tables.  These have been replaced by
    UINT8_BIT in order to increase the code portability of
    the subsystem.  If the use of UINT8 remains a problem,
    we may be forced to eliminate bitfields entirely because
    of a lack of portability.
    
    Alexey Starikovksiy enhanced the performance of
    acpi_ut_update_object_reference.  This is a frequently used
    function and this improvement increases the performance
    of the entire subsystem.
    
    Alexey Starikovskiy fixed several possible memory leaks
    and the inverse - premature object deletion.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4c3ffbd79529b680b3c3ef2b6f42f0c89c694ec5
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Thu Jul 14 00:00:00 2005 -0400

    [ACPI] revert R40 workaround
    
    Should not be necessary...
    
    http://bugme.osdl.org/show_bug.cgi?id=1038
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 73459f73e5d1602c59ebec114fc45185521353c1
Author: Robert Moore <robert.moore@intel.com>
Date:   Fri Jun 24 00:00:00 2005 -0400

    ACPICA 20050617-0624 from Bob Moore <robert.moore@intel.com>
    
    ACPICA 20050617:
    
    Moved the object cache operations into the OS interface
    layer (OSL) to allow the host OS to handle these operations
    if desired (for example, the Linux OSL will invoke the
    slab allocator).  This support is optional; the compile
    time define ACPI_USE_LOCAL_CACHE may be used to utilize
    the original cache code in the ACPI CA core.  The new OSL
    interfaces are shown below.  See utalloc.c for an example
    implementation, and acpiosxf.h for the exact interface
    definitions.  Thanks to Alexey Starikovskiy.
    	acpi_os_create_cache
    	acpi_os_delete_cache
    	acpi_os_purge_cache
    	acpi_os_acquire_object
    	acpi_os_release_object
    
    Modified the interfaces to acpi_os_acquire_lock and
    acpi_os_release_lock to return and restore a flags
    parameter.  This fits better with many OS lock models.
    Note: the current execution state (interrupt handler
    or not) is no longer passed to these interfaces.  If
    necessary, the OSL must determine this state by itself, a
    simple and fast operation.  Thanks to Alexey Starikovskiy.
    
    Fixed a problem in the ACPI table handling where a valid
    XSDT was assumed present if the revision of the RSDP
    was 2 or greater.  According to the ACPI specification,
    the XSDT is optional in all cases, and the table manager
    therefore now checks for both an RSDP >=2 and a valid
    XSDT pointer.  Otherwise, the RSDT pointer is used.
    Some ACPI 2.0 compliant BIOSs contain only the RSDT.
    
    Fixed an interpreter problem with the Mid() operator in the
    case of an input string where the resulting output string
    is of zero length.  It now correctly returns a valid,
    null terminated string object instead of a string object
    with a null pointer.
    
    Fixed a problem with the control method argument handling
    to allow a store to an Arg object that already contains an
    object of type Device.  The Device object is now correctly
    overwritten.  Previously, an error was returned.
    
    ACPICA 20050624:
    
    Modified the new OSL cache interfaces to use ACPI_CACHE_T
    as the type for the host-defined cache object.  This allows
    the OSL implementation to define and type this object in
    any manner desired, simplifying the OSL implementation.
    For example, ACPI_CACHE_T is defined as kmem_cache_t for
    Linux, and should be defined in the OS-specific header
    file for other operating systems as required.
    
    Changed the interface to AcpiOsAcquireObject to directly
    return the requested object as the function return (instead
    of ACPI_STATUS.) This change was made for performance
    reasons, since this is the purpose of the interface in the
    first place.  acpi_os_acquire_object is now similar to the
    acpi_os_allocate interface.  Thanks to Alexey Starikovskiy.
    
    Modified the initialization sequence in
    acpi_initialize_subsystem to call the OSL interface
    acpi_osl_initialize first, before any local initialization.
    This change was required because the global initialization
    now calls OSL interfaces.
    
    Restructured the code base to split some files because
    of size and/or because the code logically belonged in a
    separate file.  New files are listed below.
    
      utilities/utcache.c	/* Local cache interfaces */
      utilities/utmutex.c	/* Local mutex support */
      utilities/utstate.c	/* State object support */
      parser/psloop.c	/* Main AML parse loop */
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2283a117f65650352f2a9fd6b9af4cdbf5478d14
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jul 7 15:39:26 2005 -0700

    [PATCH] scripts/kernel-doc: don't use uninitialized SRCTREE
    
    Current kernel-doc (perl) script generates this warning:
    Use of uninitialized value in concatenation (.) or string at scripts/kernel-doc line 1668.
    
    So explicitly check for SRCTREE in the ENV before using it,
    and then if it is set, append a '/' to the end of it, otherwise
    the SRCTREE + filename can (will) be missing the intermediate '/'.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 08cd84c81f27d5bd22ba958b7cae6d566c509280
Merge: e9dd256... 327309e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Jul 13 19:11:44 2005 -0400

    Merge /spare/repo/netdev-2.6 branch 'ieee80211'

commit 66da665ca36b07728acf35881f918a89a2c9fbb2
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Jul 13 11:55:42 2005 -0400

    [PATCH] Lindent: ignore .indent.pro
    
     When I recently submitted a Lindent patch, it turned out that my .indent.pro
     options were also applied to the tree. This patch directs indent(1) to ignore
     the .indent.pro directives and only use options specified on the command
     line.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit be3cef986f7c44593d6d112584fbdf4618b6569e
Author: Yum Rayan <yum.rayan@gmail.com>
Date:   Wed Jun 8 22:04:32 2005 -0700

    [PATCH] kbuild: restrain output of "make help" to 80 columns
    
    This patch fixes the output of "make help" to fit in a 80 column
    screen. Please push upstream as part of your other patches.
    
    Signed-off-by: Yum Rayan <yum.rayan@gmail.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e0af0d85f55ea800a2e38bf782d68b83e9942611
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Fri Feb 18 10:23:41 2005 +0100

    [PATCH] kbuild: obey HOSTLOADLIBES_programname for single-file compilation
    
    Single-file HOSTCC calls added the libraries from $(HOSTLOADLIBES),
    but not from $(HOSTLOADLIBES_programname). Multi-file HOSTCC calls do
    both.
    
    This patch fixes that inconsistency.
    
    Signed-Off-By: Matthias Urlichs <smurf@debian.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit a0674e88d9c150e016a69e78e735f48772314c53
Author: Ian Campbell <ijc@hellion.org.uk>
Date:   Thu Jun 23 11:25:54 2005 +0100

    [PATCH] kbuild: allow cscope to index multiple architectures
    
    I have a single source tree which I cross compile for a couple of
    different architectures using ARHC=foo O=blah etc.
    
    The existing cscope target is very handy but only indexes the current
    $(ARCH), which is a pain since inevitably I'm interested in the other
    one at any given time ;-). This patch allows me to pass a list of
    architectures for cscope to index. e.g.
    	make ALLSOURCE_ARCHS="i386 arm" cscope
    
    This change also works for etags etc, and I presume it is just as useful
    there.
    
    Signed-off-by: Ian Campbell <ijc@hellion.org.uk>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f55619642e863990d5a46cf2c2c840170d22a9f9
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jul 13 22:47:07 2005 +0100

    AUDIT: Avoid scheduling in idle thread
    When we flush a pending syscall audit record due to audit_free(), we
    might be doing that in the context of the idle thread. So use GFP_ATOMIC
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit acbef459a663a8349ceb46b5a11ede50fa7909c7
Author: Karl Hegbloom <hegbloom@pdx.edu>
Date:   Sun Jun 19 00:50:47 2005 -0700

    [PATCH] kbuild: make 'cscope -q' play well with cscope.el
    
    I tried the Linux Makefile 'make cscope' target, and found that the
    generated database is not compatible with 'cscope.el' under XEmacs.
    The thing is that 'cscope.el' does not allow setting the command line
    options to the 'cscope' commands it runs, and it errors with a message
    about the options not matching the ones used to generate the index.
    
    It turns out the cscope designers already thought of this.  The
    options can be written into the "cscope.files".  The included patch
    moves the "-q" and "-k" options from the 'cmd_cscope' to the
    'cmd_cscope-file', echoing them into the top of the files listing.
    
    Now the index is generated with the "-q" option, and when 'cscope.el'
    performs it's search, it uses that argument as well.  Lookups are fast
    and everyone is happy.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 582edda586120004d0fb67113115fa442a0a1571
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jul 13 22:39:34 2005 +0100

    AUDIT: Exempt the whole auditd thread-group from auditing
    and not just the one thread.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6c8c8ba5d7e31b37d0184c388183a6039a672417
Author: Victor Fusco <victor@cetuc.puc-rio.br>
Date:   Wed Jul 13 22:26:57 2005 +0100

    [AUDIT] Fix sparse warning about gfp_mask type
    
    Fix the sparse warning "implicit cast to nocast type"
    
    Signed-off-by: Victor Fusco <victor@cetuc.puc-rio.br>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d2cb1a95c5fa4d1691c90a4f530955b4ea3cfa24
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Thu Jul 29 13:07:32 2004 -0500

    [PATCH] kbuild: add ia64 support to rpm Makefile target
    
    On ia64, only the EFI (fat) partition is available to boot from.  The rpm
    needs to install the kernel under /boot/efi to be useable on ia64.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 88ac00f5a841dcfc5c682000f4a6add0add8caac
Author: Robert Moore <robert.moore@intel.com>
Date:   Thu May 26 00:00:00 2005 -0400

    ACPICA 20050526 from Bob Moore <robert.moore@intel.com>
    
    Implemented support to execute Type 1 and Type 2 AML
    opcodes appearing at the module level (not within a control
    method.)  These opcodes are executed exactly once at the
    time the table is loaded. This type of code was legal up
    until the release of ACPI 2.0B (2002) and is now supported
    within ACPI CA in order to provide backwards compatibility
    with earlier BIOS implementations. This eliminates the
    "Encountered executable code at module level" warning that
    was previously generated upon detection of such code.
    
    Fixed a problem in the interpreter where an AE_NOT_FOUND
    exception could inadvertently be generated during the
    lookup of namespace objects in the second pass parse of
    ACPI tables and control methods. It appears that this
    problem could occur during the resolution of forward
    references to namespace objects.
    
    Added the ACPI_MUTEX_DEBUG #ifdef to the
    acpi_ut_release_mutex function, corresponding to the same
    the deadlock detection debug code to be compiled out in
    the normal case, improving mutex performance (and overall
    subsystem performance) considerably.  As suggested by
    Alexey Starikovskiy.
    
    Implemented a handful of miscellaneous fixes for possible
    memory leaks on error conditions and error handling
    control paths. These fixes were suggested by FreeBSD and
    the Coverity Prevent source code analysis tool.
    
    Added a check for a null RSDT pointer in
    acpi_get_firmware_table (tbxfroot.c) to prevent a fault
    in this error case.
    
    Signed-off-by Len Brown <len.brown@intel.com>

commit 6f42ccf2fc50ecee8ea170040627f268430c1648
Author: Robert Moore <robert.moore@intel.com>
Date:   Fri May 13 00:00:00 2005 -0400

    ACPICA from Bob Moore <robert.moore@intel.com>
    
    Implemented support for PCI Express root bridges
    -- added support for device PNP0A08 in the root
    bridge search within AcpiEvPciConfigRegionSetup.
    acpi_ev_pci_config_region_setup().
    
    The interpreter now automatically truncates incoming
    64-bit constants to 32 bits if currently executing out
    of a 32-bit ACPI table (Revision < 2). This also affects
    the iASL compiler constant folding. (Note: as per below,
    the iASL compiler no longer allows 64-bit constants within
    32-bit tables.)
    
    Fixed a problem where string and buffer objects with
    "static" pointers (pointers to initialization data within
    an ACPI table) were not handled consistently. The internal
    object copy operation now always copies the data to a newly
    allocated buffer, regardless of whether the source object
    is static or not.
    
    Fixed a problem with the FromBCD operator where an
    implicit result conversion was improperly performed while
    storing the result to the target operand. Since this is an
    "explicit conversion" operator, the implicit conversion
    should never be performed on the output.
    
    Fixed a problem with the CopyObject operator where a copy
    to an existing named object did not always completely
    overwrite the existing object stored at name. Specifically,
    a buffer-to-buffer copy did not delete the existing buffer.
    
    Replaced "interrupt_level" with "interrupt_number" in all
    GPE interfaces and structs for consistency.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 327309e899662b482c58cf25f574513d38b5788c
Merge: 0c16877... c32511e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Jul 13 16:23:51 2005 -0400

    Merge upstream 2.6.13-rc3 into ieee80211 branch of netdev-2.6.

commit b95d4fec89c1f503ebad4c704ac08c3c6761329b
Author: Fabio Massimo Di Nitto <fabbione@fabbione.net>
Date:   Wed Jul 13 08:25:49 2005 +0200

    [PATCH] kbuild: modpost needs to cope with new glibc elf header on sparc
    
    Recently a change in the glibc elf.h header has been introduced causing
    modpost to spawn tons of warnings (like the one below) building the kernel
    on sparc:
    
    [SNIP]
    *** Warning: "current_thread_info_reg" [net/sunrpc/auth_gss/auth_rpcgss.ko] undefined!
    *** Warning: "" [net/sunrpc/auth_gss/auth_rpcgss.ko] undefined!
    *** Warning: "" [net/sunrpc/auth_gss/auth_rpcgss.ko] undefined!
    [SNIP]
    
    Ben Collins discovered that the STT_REGISTERED definition in glibc did change
    and that this change needs to be propagated to modpost.
    
    glibc change:
    -#define STT_REGISTER   13              /* Global register reserved to app. */
    +#define STT_SPARC_REGISTER     13      /* Global register reserved to app. */
    
    I did and tested this simple patch to maintain compatibility with newer (>= 2.3.4)
    and older (<= 2.3.2) glibc.
    
    Signed-off-by: Fabio M. Di Nitto <fabbione@fabbione.net>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit ad3f9a2238e401a1fc493b8c91341f9e57940eda
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jul 13 15:28:29 2005 +0100

    Fix positioning of audit in MAINTAINERS.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 30beab1491f0b96b2f23d3fb68af01fd921a16d8
Merge: 21af6c4... c32511e...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jul 13 15:25:59 2005 +0100

    Merge with /shiny/git/linux-2.6/.git

commit 6d983feab80948cdd0e3920c40d453a6436eeb23
Author: Jan-Benedict Glaw <jbglaw@lug-owl.de>
Date:   Tue May 24 11:27:37 2005 +0200

    [PATCH] kbuild: create tarballs
    
    It adds tarball packaging, which I prefer for distribution.
    Also one of the two blanks after @echo is removed. One seems to be enough :)
    
    Signed-off-by: Jan-Benedict Glaw <jbglaw@lug-owl.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 836cf0465c422ee6d654060edd7c620d9cf0c09c
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 19:27:04 2005 +1000

    drm: cleanup buffer/map code
    
    This is a patch from DRM CVS that cleans up some code that was in CVS
    that I never moved to the kernel, this patch produces the result of the
    cleanups and puts it into the kernel drm.
    
    From: Eric Anholt <anholt@freebsd.org>, Jon Smirl, Dave Airlie
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d01cff408057fa925b2f766fa1fd5a305fd1acbf
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 19:24:35 2005 +1000

    drm: add mga driver callbacks
    
    Add some missing driver callback for the PCI support
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 6795c985a648d1e90b367cc1387c18205ecca4b8
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 18:20:09 2005 +1000

    Add support for PCI MGA cards to MGA DRM.
    
    This patch adds serveral new ioctls and a new query to get_param query to
    support PCI MGA cards.
    
    Two ioctls were added to implement interrupt based waiting.  With this change,
    the client-side driver no longer needs to map the primary DMA region or the
    MMIO region.  Previously, end-of-frame waiting was done by busy waiting in the
    client-side driver until one of the MMIO registers (the current DMA pointer)
    matched a pointer to the end of primary DMA space.  By using interrupts, the
    busy waiting and the extra mappings are removed.
    
    A third ioctl was added to bootstrap DMA.  This ioctl, which is used by the
    X-server, moves a *LOT* of code from the X-server into the kernel.  This allows
    the kernel to do whatever needs to be done to setup DMA buffers.  The entire
    process and the locations of the buffers are hidden from user-mode.
    
    Additionally, a get_param query was added to differentiate between G4x0 cards
    and G550 cards.  A gap was left in the numbering sequence so that, if needed,
    G450 cards could be distinguished from G400 cards.  According to Ville
    Syrjl, the G4x0 cards and the G550 cards handle anisotropic filtering
    differently.  This seems the most compatible way to let the client-side driver
    know which card it's own.  Doing this very small change now eliminates the
    need to bump the DRM minor version twice.
    
    http://marc.theaimsgroup.com/?l=dri-devel&m=106625815319773&w=2
    
    (airlied - this may not work at this point, I think the follow on buffer
     cleanup patches will be needed)
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit b5d499cfdeebcb71f00f3513045796ccae718140
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 18:17:42 2005 +1000

    drm: make drm_alloc_agp take a dev arg.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 93f453f3ffd8f4dbb0311b58b854e7655da3d601
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 17:45:34 2005 +1000

    drm: add new mga ids and types
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit cda173806644d2af22ffd9896eed8ef99b97d356
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 17:31:26 2005 +1000

    drm: add test for AGP devices and driver override for it.
    
    Added device_is_agp callback to drm_driver.  This function is called by the
    platform-specific drm_device_is_agp function.  Added implementation of this
    function the the Linux-specific portion of the MGA driver to detect PCI G450
    cards.  Added code to the Linux-specific portion of the generic DRM layer to
    not initialize AGP infrastructure if the card is not AGP (this matches what
    already existed in BSD).
    
    Fix up i810/i830 and i915 drivers to always return AGP as they don't always
    report the capability.
    
    Fix the MGA to not report AGP for a card that has an AGP chip behind a PCI
    bridge.
    
    From: Ian Romanick, Dave Airlie, Alan Hourihane
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit ceb9c27aa7d61c70f4c75f017d9fbc9de50034f1
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 17:07:23 2005 +1000

    drm: destatic exported function.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d84f76d37c5eebb94c48337958d5a2ff2965c02d
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 17:04:22 2005 +1000

    drm: export symbols for use by drivers
    
    This just exports symbols for use in drivers.
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit aff138ab8ec340c23e7c6e1a95c1518ee832a8c6
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 16:58:40 2005 +1000

    drm: fix minor function header issue
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7ab984012a879a53abb56abfe03b0c686f42b281
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 16:56:52 2005 +1000

    drm: update some function so a driver can call them
    
    This patch splits some ioctl functions so that they can be called
    in-kernel by a DRM driver. The driver will use them later.
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9c8da5ebbf6f87293cf8555182da271449889a69
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 15:38:56 2005 +1000

    drm: update support for drm pci buffers
    
    The DRM needs to change the drm_pci interface for FreeBSD compatiblity,
    this patch introduces the drm_dma_handle_t and uses it in the Linux code.
    
    From: Tonnerre Lombard, Eric Anholt, and Sergey Vlasov
    Signed-off-by: David Airlie <airlied@linux.ie>

commit d59431bf96d1e8a3d6d240343f559f5e2ace7f1d
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 15:00:06 2005 +1000

    Refactor common, boilerplate ioctl code from drm_addbufs_* functions into
    drm_addbufs. This makes the code more like the BSD code, and makes the
    drm_addbufs_* functions callable in-kernel.
    
    From: Ian Romanick <idr@us.ibm.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit b84397d6390ef04e8080d66bf528418ab5e75dc0
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 14:46:12 2005 +1000

    drm: add framebuffer maps
    
    The patch makes drmAddBufs/drmMapBufs can handle buffers in video memory
    
    The attached patch adds a new buffer type DRM_FB_BUFFER. It works like
    AGP memory but uses video memory.
    
    From: Austin Yuan <austinyuan@viatech.com.cn>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 2d0f9eaff8e1d08b9707f5d24fe6b0ac95d231e3
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Sun Jul 10 14:34:13 2005 +1000

    drm: add _DRM_CONSISTENT map type
    
    Added a new DRM map type _DRM_CONSISTENT for consistent PCI memory. It
    uses drm_pci_alloc/free for allocating/freeing the memory.
    
    From: Felix Kuhling <fxkuehl@gmx.de>
    Signed-off-by: David Airlie <airlied@linux.ie>

commit 5a73c308754e27829c94544e010f133019cbd432
Author: Serge Hallyn <serue@us.ibm.com>
Date:   Fri Jul 8 15:44:19 2005 -0500

    [PATCH] seclvl securityfs
    
    Once again, the simple_attr in libfs was actually sufficient - I'd
    thought the __attribute__(format(printk(1,2))) was more mysterious than
    it really is.
    
    At last, here is the full patch to make seclvl use securityfs.
    
    Signed-off-by: Serge Hallyn <serue@us.ibm.com>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    --
    
     seclvl.c |  228 +++++++++++++++++++--------------------------------------------
     1 files changed, 70 insertions(+), 158 deletions(-)
    
    Index: linux-2.6.13-rc1/security/seclvl.c
    ===================================================================

commit b67dbf9d4c1987c370fd18fdc4cf9d8aaea604c2
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jul 7 14:37:53 2005 -0700

    [PATCH] add securityfs for all LSMs to use
    
    Here's a small patch against 2.6.13-rc2 that adds securityfs, a virtual
    fs that all LSMs can use instead of creating their own.  The fs should
    be mounted at /sys/kernel/security, and the fs creates that mount point.
    This will make the LSB people happy that we aren't creating a new
    /my_lsm_fs directory in the root for every different LSM.
    
    It has changed a bit since the last version, thanks to comments from
    Mike Waychison.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>

commit 21af6c4f2aa5f63138871b4ddd77d7ebf2588c9d
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Jul 2 14:10:46 2005 +0100

    AUDIT: Really don't audit auditd.
    
    The pid in the audit context isn't always set up. Use tsk->pid when
    checking whether it's auditd in audit_filter_syscall(), instead of
    ctx->pid. Remove a band-aid which did the same elsewhere.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ac4cec443a80bfde829516e7a7db10f7325aa528
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Jul 2 14:08:48 2005 +0100

    AUDIT: Stop waiting for backlog after audit_panic() happens
    
    We force a rate-limit on auditable events by making them wait for space
    on the backlog queue. However, if auditd really is AWOL then this could
    potentially bring the entire system to a halt, depending on the audit
    rules in effect.
    
    Firstly, make sure the wait time is honoured correctly -- it's the
    maximum time the process should wait, rather than the time to wait
    _each_ time round the loop. We were getting re-woken _each_ time a
    packet was dequeued, and the timeout was being restarted each time.
    
    Secondly, reset the wait time after audit_panic() is called. In general
    this will be reset to zero, to allow progress to be made. If the system
    is configured to _actually_ panic on audit_panic() then that will
    already have happened; otherwise we know that audit records are being
    lost anyway.
    
    These two tunables can't be exposed via AUDIT_GET and AUDIT_SET because
    those aren't particularly well-designed. It probably should have been
    done by sysctls or sysfs anyway -- one for a later patch.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7b430437c0de81681ecfa8efa8f55823df733529
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Jul 2 13:50:40 2005 +0100

    AUDIT: Fix definition of audit_log() if audit not enabled
    
    audit_log() also takes an extra argument, although it's a vararg
    function so the compiler didn't really notice.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 13774024da8ebdf17212c0f5a83f5b0681a649eb
Author: Badari Pulavarty <pbadari@yahoo.com>
Date:   Sat Jul 2 13:49:07 2005 +0100

    AUDIT: Fix definition of audit_log_start() if audit not enabled
    
    audit_log_start() seems to take 3 arguments, but its defined to take
    only 2 when AUDIT is turned off.
    
    security/selinux/avc.c:553:75: macro "audit_log_start" passed 3 arguments, but takes just 2
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d2f6409584e2c62ffad81690562330ff3bf4a458
Merge: e1b09eb... 4a89a04...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Jul 2 13:39:09 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit e9dd2561793c05d70c9df1bc16a2dde6f23388df
Merge: d011e15... 0c16877...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jun 30 00:49:38 2005 -0400

    Merge /spare/repo/netdev-2.6 branch 'ieee80211'

commit 0c168775709faa74c1b87f1e61046e0c51ade7f3
Merge: 9bd481f... 9b4311e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jun 30 00:49:18 2005 -0400

    Merge upstream 2.6.13-rc1-git1 into 'ieee80211' branch of netdev-2.6.

commit 9bd481f85940726bf66aae5cd03c5b912ad0ae4c
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jun 28 01:46:35 2005 -0400

    wireless: fix ipw warning; add is_broadcast_ether_addr() to linux/etherdevice.h

commit d011e151bc5d1a581bf35b492a4fde44d30382b9
Merge: 30b4d65... 2179a59...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jun 28 00:46:58 2005 -0400

    Merge /spare/repo/netdev-2.6 branch 'ieee80211'

commit 2179a59db18ddf8eb3fd0133a3bee57f1c2b5b06
Merge: ad3fee5... 99f95e5...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jun 28 00:46:46 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 30b4d6565e4d57c6d03600c7822411c7cac19638
Merge: aa8f6df... ad3fee5...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jun 27 23:45:25 2005 -0400

    Merge /spare/repo/netdev-2.6 branch 'ieee80211'

commit ad3fee560bc508008b3b2cf6358105c4c7081921
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 14:30:36 2005 -0700

    [PATCH] wireless-device-attr-fixes-2
    
    More fixes for greg depredations.
    
    Also nuke lots of pointless typecasts.
    
    All this new wireless code adds near-infinite amounts of trailing whitespace.
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit edfc43f2ec542c17c479d8ec7e4b0cee7b20f578
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 14:30:35 2005 -0700

    [PATCH] wireless-device-attr-fixes
    
    Repair Jeff's stuff after gregkh depredations.
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 011fe95a3b25ff124486fc27dc0395904ecf5852
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 20 14:30:36 2005 -0700

    [PATCH] ipw2100 old gcc fix
    
    drivers/net/wireless/ipw2100.c: In function `ipw2100_set_key_index':
    drivers/net/wireless/ipw2100.c:5326: array index in non-array initializer
    drivers/net/wireless/ipw2100.c:5326: (near initialization for `cmd')
    drivers/net/wireless/ipw2100.c:5326: warning: missing braces around initializer
    drivers/net/wireless/ipw2100.c:5326: warning: (near initialization for `cmd.host_command_parameters')
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 8724a118031a4eb62174b3e12745e4d35d4b03fe
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jun 20 14:28:43 2005 -0700

    [PATCH] ipw2100: small cleanups
    
    Fix few typos/thinkos in ipw, remove ugly macro (it is commented around,
    anyway), and fix types passed to pci_set_power_state.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 5dc54a65b6981d327a84c7651bbfeef0c0aff977
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jun 20 14:28:43 2005 -0700

    [PATCH] ipw2100: kill dead macros
    
    There are several never used macros in ipw2100.  This removes them.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 4663663f1d91aa0b84526841e47f401598bfa2f4
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jun 20 14:28:42 2005 -0700

    [PATCH] ipw2100: assume recent kernel
    
    ipw2100 still has support for old kernels.  Thats considered bad for patch in
    mainline...  this fixes few instances.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 0e08b44eedacb7824c88678d9a9ea7db25b5401c
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jun 20 14:28:41 2005 -0700

    [PATCH] drivers/net/wireless/ipw2200: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() instead of custom macros.
    
    This patch includes dma-mapping.h explicitly because it caused errors on some
    architectures otherwise.  See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 05743d165be9f0293b4ff67f4e1cf3724eb13e1f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jun 20 14:28:40 2005 -0700

    [PATCH] drivers/net/wireless/ipw2100: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() instead of custom macros.
    
    This patch includes dma-mapping.h explicitly because it caused errors on some
    architectures otherwise.  See
    http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 070d01651296d3c87bca94f3b1313447e9e06c2f
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jun 20 13:33:07 2005 +0200

    [PATCH] ipw2100: remove commented-out code
    
    This removes up various code/defines that was just commented out
    instead of being deleted.

commit aaa4d308a8cbc4ccfd870ee556def2e481557274
Author: Jiri Benc <jbenc@suse.cz>
Date:   Tue Jun 7 14:58:41 2005 +0200

    [PATCH] ieee80211: fix ipw 64bit compilation warnings
    
    On Mon, 06 Jun 2005 14:29:52 +0800, Zhu Yi wrote:
    > ("%zd", sizeof()) should be better.
    
    Thanks. This is a corrected version of the patch.
    
    This patch fixes warnings when compiling ipw2100 and ipw2200 on x86_64.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: Jirka Bohac <jbohac@suse.cz>

commit e19b813e0c9c5995423dc95b01379c89f188ae70
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 3 18:29:20 2005 +0200

    [PATCH] ieee80211: fix recursive ipw2200 dependencies
    
    This results in recursive dependencies:
    - IPW2200 depends on NET_RADIO
    - IPW2200 selects IEEE80211
    - IEEE80211 selects NET_RADIO
    
    This patch fixes the IPW2200 dependencies in a way that they are similar
    to the IPW2100 dependencies.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit 7c9d4c70b20e165eb11d8aed2b6374377d17f43a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 3 18:28:19 2005 +0200

    [PATCH] ieee80211: remove pci.h #include's
    
    I was wondering why editing pci.h triggered the rebuild of three files
    under net/, and as far as I can see, there's no reason for these three
    files to #include pci.h .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jiri Benc <jbenc@suse.cz>

commit aa8f6dfd355021b4dd8b74b0588fd6fd8f21b79f
Merge: f45727d... 245ac87...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jun 27 22:50:10 2005 -0400

    Merge /spare/repo/netdev-2.6 branch 'ieee80211'

commit 245ac8738b0b840552d56b842e70e750d65911cc
Merge: 716b433... a5fe736...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Jun 27 22:49:47 2005 -0400

    Merge upstream net/ieee80211.h changes into 'ieee80211' branch.

commit 716b43303df605510399d6da0d0dd4e2ea376e7c
Merge: 5696c19... c7b645f...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Mon Jun 27 22:03:52 2005 -0400

    Merge upstream ieee80211.h with us (us == branch 'ieee80211' of netdev-2.6)

commit f45727d52d1581e9ff4df9d1a12a60789ad2d1eb
Merge: 4c925f4... 5696c19...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 26 23:42:30 2005 -0400

    Merge /spare/repo/netdev-2.6/ branch 'ieee80211'

commit 5696c1944a33b4434a9a1ebb6383b906afd43a10
Merge: 66b04a8... 020f46a...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Sun Jun 26 23:38:58 2005 -0400

    Merge /spare/repo/linux-2.6/

commit e1b09eba2686eca94a3a188042b518df6044a3c1
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Jun 24 17:24:11 2005 +0100

    AUDIT: Use KERN_NOTICE for printk of audit records
    
    They aren't errors.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5bb289b5a0becb53ac3e1d60815ff8b779296b73
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Jun 24 14:14:05 2005 +0100

    AUDIT: Clean up user message filtering
    
    Don't look up the task by its pid and then use the syscall filtering
    helper. Just implement our own filter helper which operates solely on
    the information in the netlink_skb_parms.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 993e2d4106e94dae6e8cfbeb32073bd12cdee203
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Fri Jun 24 08:21:49 2005 +0100

    AUDIT: Return correct result from audit_filter_rules()
    
    When the task refcounting was added to audit_filter_rules() it became
    more of a problem that this function was violating the 'only one
    return from each function' rule. In fixing it to use a variable to store
    'ret' I stupidly neglected to actually change the 'return 1;' at the
    end. This makes it not work very well.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9e94e66a5bc739ab525ec0a26ba75300aaf154f3
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu Jun 23 18:33:54 2005 +0100

    AUDIT: No really, we don't want to audit auditd.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 559fb51ba7e66fe298b8355fabde1275b7def35f
Author: Scott Bardone <sbardone@chelsio.com>
Date:   Thu Jun 23 01:40:19 2005 -0400

    Update Chelsio gige net driver.
    
    - Use extern prefix for functions required.
    - Removed a lot of wrappers, including t1_read/write_reg_4.
    - Removed various macros, using native kernel calls now.
    - Enumerated various #defines.
    - Removed a lot of shared code which is not currently used in "NIC only" mode.
    - Removed dead code.
    
    Documentation/networking/cxgb.txt:
    - Updated release notes for version 2.1.1
    
    drivers/net/chelsio/ch_ethtool.h
    - removed file, no longer using ETHTOOL namespace.
    
    drivers/net/chelsio/common.h
    - moved code from osdep.h to common.h
    - added comment to #endif indicating which symbol it closes.
    
    drivers/net/chelsio/cphy.h
    - removed dead code.
    - added comment to #endif indicating which symbol it closes.
    
    drivers/net/chelsio/cxgb2.c
    - use DMA_{32,64}BIT_MASK in include/linux/dma-mapping.h.
    - removed unused code.
    - use printk message for link info resembling drivers/net/mii.c.
    - no longer using the MODULE_xxx namespace.
    - no longer using "pci_" namespace.
    - no longer using ETHTOOL namespace.
    
    drivers/net/chelsio/cxgb2.h
    - removed file, merged into common.h
    
    drivers/net/chelsio/elmer0.h
    - removed dead code.
    - added various enums.
    - added comment to #endif indicating which symbol it closes.
    
    drivers/net/chelsio/espi.c
    - removed various macros, using native kernel calls now.
    - removed a lot of wrappers, including t1_read/write_reg_4.
    
    drivers/net/chelsio/espi.h
    - added comment to #endif indicating which symbol it closes.
    
    drivers/net/chelsio/gmac.h
    - added comment to #endif indicating which symbol it closes.
    
    drivers/net/chelsio/mv88x201x.c
    - changes to sync with Chelsio TOT.
    
    drivers/net/chelsio/osdep.h
    - removed file, consolidation. osdep was used to translate wrapper functions
      since our code supports multiple OSs. removed wrappers.
    
      drivers/net/chelsio/pm3393.c
      - removed various macros, using native kernel calls now.
      - removed a lot of wrappers, including t1_read/write_reg_4.
      - removed unused code.
    
      drivers/net/chelsio/regs.h
      - added a few register entries for future and current feature support.
      - added comment to #endif indicating which symbol it closes.
    
      drivers/net/chelsio/sge.c
      - rewrote large portion of scatter-gather engine to stabilize
      performance.
      - using u8/u16/u32 kernel types instead of __u8/__u16/__u32 compiler
      types.
    
      drivers/net/chelsio/sge.h
      - rewrote large portion of scatter-gather engine to stabilize
      performance.
      - added comment to #endif indicating which symbol it closes.
    
      drivers/net/chelsio/subr.c
      - merged tp.c into subr.c
      - removed various macros, using native kernel calls now.
      - removed a lot of wrappers, including t1_read/write_reg_4.
      - removed unused code.
    
      drivers/net/chelsio/suni1x10gexp_regs.h
      - modified copyright and authorship of file.
      - added comment to #endif indicating which symbol it closes.
    
      drivers/net/chelsio/tp.c
      - removed file, merged into subr.c.
    
      drivers/net/chelsio/tp.h
      - removed file.
    
      include/linux/pci_ids.h
      - patched to include PCI_VENDOR_ID_CHELSIO 0x1425, removed define from
      our code.

commit a5324343955997d1439f26518ddac567cd5d134b
Merge: 8199d3a... a493604...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Wed Jun 22 21:50:57 2005 -0400

    Merge /spare/repo/linux-2.6/

commit 9470178e620fe8f512928eed34994572c1c44be4
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jun 22 15:40:55 2005 +0100

    AUDIT: Remove stray declaration of tsk from audit_receive_msg().
    
    It's not used any more.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9ad9ad385be27fcc7c16d290d972c6173e780a61
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jun 22 15:04:33 2005 +0100

    AUDIT: Wait for backlog to clear when generating messages.
    
    Add a gfp_mask to audit_log_start() and audit_log(), to reduce the
    amount of GFP_ATOMIC allocation -- most of it doesn't need to be
    GFP_ATOMIC. Also if the mask includes __GFP_WAIT, then wait up to
    60 seconds for the auditd backlog to clear instead of immediately
    abandoning the message.
    
    The timeout should probably be made configurable, but for now it'll
    suffice that it only happens if auditd is actually running.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 177bbc733a1d9c935bc3d6efd776a6699b29b1ca
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jun 22 15:01:16 2005 +0100

    Add audit subsystem to MAINTAINERS, for my sins.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4a4cd633b575609b741a1de7837223a2d9e1c34c
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Wed Jun 22 14:56:47 2005 +0100

    AUDIT: Optimise the audit-disabled case for discarding user messages
    
    Also exempt USER_AVC message from being discarded to preserve
    existing behaviour for SE Linux.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f6a789d19858a951e7ff9e297a44b377c21b6c33
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Jun 21 16:22:01 2005 +0100

    AUDIT: Spawn kernel thread to list filter rules.
    
    If we have enough rules to fill the netlink buffer space, it'll
    deadlock because auditctl isn't ever actually going to read from the
    socket until we return, and we aren't going to return until it
    reads... so we spawn a kernel thread to spew out the list and then
    exit.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ae7b961b1c943367dfe179411f120d7bf8eaba89
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon Jun 20 16:11:05 2005 +0100

    AUDIT: Report lookup flags with path/inode records.
    
    When LOOKUP_PARENT is used, the inode which results is not the inode
    found at the pathname. Report the flags so that this doesn't generate
    misleading audit records.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f7056d64ae101d910f965a2e39831f635ef7891b
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon Jun 20 16:07:33 2005 +0100

    AUDIT: Really exempt auditd from having its actions audited.
    
    We were only avoiding it on syscall exit before; now stop _everything_.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d6e0e1585a1a9a15e48ec47206a809828afe4450
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon Jun 20 16:02:09 2005 +0100

    AUDIT: Drop user-generated messages immediately while auditing disabled.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit df5179854bca84ac5be500849b12dd33ce03f03f
Merge: 0f45aa1... 8b22c24...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Mon Jun 20 15:51:24 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 73747aed04d3b3fb694961d025f81863b99c6898
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon Jun 20 14:21:01 2005 +0200

    [PATCH] ll_rw_blk.c kerneldoc updates
    
    The recent mapping changes didn't update the kerneldoc appropriately.
    
    Original from Christoph Hellwig <hch@lst.de>
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 994ca9a19616f0d4161a9e825f0835925d522426
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Mon Jun 20 14:11:09 2005 +0200

    [PATCH] update blk_execute_rq to take an at_head parameter
    
    Original From: Mike Christie <michaelc@cs.wisc.edu>
    
    Modified to split out block changes (this patch) and SCSI pieces.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f63eb21b4f32028755b6b9d47e5eb13c18ba0cae
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 20 14:10:25 2005 +0200

    [PATCH] kill 'reading' variable in sg_io(), it isn't used anymore.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit e1f546e185e9d8cb9303d74d1cd5bc704f265384
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Mon Jun 20 14:07:17 2005 +0200

    [PATCH] The blk_rq_map_user() change missed an update in scsi_ioctl.c
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit f1970baf6d74e03bd32072ab453f2fc01bc1b8d3
Author: James Bottomley  <James.Bottomley@SteelEye.com>
Date:   Mon Jun 20 14:06:52 2005 +0200

    [PATCH] Add scatter-gather support for the block layer SG_IO
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit dd1cab95f356f1395278633565f198463cf6bd24
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 20 14:06:01 2005 +0200

    [PATCH] Cleanup blk_rq_map_* interfaces
    
    Change the blk_rq_map_user() and blk_rq_map_kern() interface to require
    a previously allocated request to be passed in. This is both more efficient
    for multiple iterations of mapping data to the same request, and it is also
    a much nicer API.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit b823825e8e09aac6dc1ca362cd5639a87329d636
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 20 14:05:27 2005 +0200

    [PATCH] Keep the bio end_io parts inside of bio.c for blk_rq_map_kern()
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit df46b9a44ceb5af2ea2351ce8e28ae7bd840b00f
Author: Mike Christie  <michaelc@cs.wisc.edu>
Date:   Mon Jun 20 14:04:44 2005 +0200

    [PATCH] Add blk_rq_map_kern()
    
    Add blk_rq_map_kern which takes a kernel buffer and maps it into
    a request and bio. This can be used by the dm hw_handlers, old
    sg_scsi_ioctl, and one day scsi special requests so all requests
    comming into scsi will have bios. All requests having bios
    should allow scsi to use scatter lists for all IO and allow it
    to use block layer functions.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 0f45aa18e65cf3d768082d7d86054a0d2a20bb18
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sun Jun 19 19:35:50 2005 +0100

    AUDIT: Allow filtering of user messages
    
    Turn the field from a bitmask to an enumeration and add a list to allow
    filtering of messages generated by userspace. We also define a list for
    file system watches in anticipation of that feature.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b652b438fcad4c9c079d0774e9d45ee58fae22e2
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 15 12:38:14 2005 +0100

    [PATCH] I2C: Add PXA I2C driver
    
    Add support for the I2C PXA driver.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 4c925f452cfd16c690209e96821ee094e09a2404
Merge: 51a730d... 66b04a8...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 22:57:33 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch we18-ieee80211

commit 66b04a80eea60cabf9d89fd34deb3234a740052f
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri May 27 22:53:55 2005 -0400

    [wireless] ipw2100: fix build after applying SuSE cleanups
    
    s/ieee80211_header_data/ieee80211_hdr_3addr/

commit 286d974797705ae7ceedc846666ef98bdeee3646
Author: Jiri Benc <jbenc@suse.cz>
Date:   Tue May 24 15:10:18 2005 +0200

    [PATCH] ieee80211: cleanup
    
    Cleanup of unused and duplicated constants and structures in the ieee80211
    header.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: Jirka Bohac <jbohac@suse.cz>

commit 76fe1b0e4c093f985c66a062c9c10370b4985796
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat May 7 00:54:49 2005 +0200

    [PATCH] fix IEEE80211_CRYPT_* selects
    
    Some of the options didn't obey the most important rule of select
    
      If you select something, you have to ensure that the dependencies
      of what you do select are fulfilled.
    
    resulting in the following compile error:
    
    <--  snip  -->
    
    ...
      LD      .tmp_vmlinux1
    crypto/built-in.o(.init.text+0x31b): In function `aes_init':
    : undefined reference to `crypto_register_alg'
    crypto/built-in.o(.init.text+0x326): In function `michael_mic_init':
    : undefined reference to `crypto_register_alg'
    crypto/built-in.o(.exit.text+0x6): In function `aes_fini':
    : undefined reference to `crypto_unregister_alg'
    crypto/built-in.o(.exit.text+0x16): In function `michael_mic_exit':
    : undefined reference to `crypto_unregister_alg'
    net/built-in.o(.text+0x5ba52): In function `ieee80211_ccmp_init':
    : undefined reference to `crypto_alloc_tfm'
    net/built-in.o(.text+0x5ba94): In function `ieee80211_ccmp_init':
    : undefined reference to `crypto_free_tfm'
    net/built-in.o(.text+0x5bab7): In function `ieee80211_ccmp_deinit':
    : undefined reference to `crypto_free_tfm'
    net/built-in.o(.text+0x5c5c2): In function `ieee80211_tkip_init':
    : undefined reference to `crypto_alloc_tfm'
    net/built-in.o(.text+0x5c5d5): In function `ieee80211_tkip_init':
    : undefined reference to `crypto_alloc_tfm'
    net/built-in.o(.text+0x5c623): In function `ieee80211_tkip_init':
    : undefined reference to `crypto_free_tfm'
    net/built-in.o(.text+0x5c62a): In function `ieee80211_tkip_init':
    : undefined reference to `crypto_free_tfm'
    net/built-in.o(.text+0x5c65e): In function `ieee80211_tkip_deinit':
    : undefined reference to `crypto_free_tfm'
    net/built-in.o(.text+0x5c665): In function `ieee80211_tkip_deinit':
    : undefined reference to `crypto_free_tfm'
    make: *** [.tmp_vmlinux1] Error 1
    
    <--  snip  -->
    
    This patch adds the missing selects of CRYPTO (similar to how
    IEEE80211_CRYPT_WEP already does it).
    
    Yes, you could argue whether CRYPTO should be select'ed by the CRYPTO_*
    options, but with the current CRYPTO* dependencies this patch is
    required.

commit e157249d948bf0c5da10ce8610e2b4b36d0a3c4c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri May 6 23:32:39 2005 +0200

    [PATCH] net/ieee80211/: make two functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 3dcefbc9d6bd8b5ff0fc4bdbe3df938be5460f79
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 18:43:05 2005 +0100

    [PATCH] zd1201 fixes
    
    	In netdev-2.6 we need to update zd1201.c since we don't have
    driver/net/wireless/ieee802_11.h anymore.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 695b5bc3ecfc7da0a29360a6c2ee0849ffdb300a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] ieee80211_module.c::store_debug_level() cleanup
    
    	* trivial __user annotations
    	* store_debug_level() sanitized a bit
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 51a730d758ae4052e10ca7e06336f10af598c4fc
Merge: 6cd15a9... ff0e0ea...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 22:08:07 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch we18-ieee80211

commit ff0e0ea2f5d36fa90fc2c57fd019102b0a0cfabf
Merge: 43f66a6... 1f15d69...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 22:07:40 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch we18

commit 6cd15a9daf826115356f9403494c76e5aafa7793
Merge: ff1d276... 43f66a6...
Author: Jeff Garzik <jgarzik@pretzel.yyz.us>
Date:   Fri May 27 22:02:58 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch we18-ieee80211

commit 43f66a6ce8da299344cf1bc2ac2311889cc88555
Author: James Ketrenos <jketreno@linux.intel.com>
Date:   Fri Mar 25 12:31:53 2005 -0600

    Add ipw2200 wireless driver.

commit 2c86c275015c880e810830304a3a4ab94803b38b
Author: James Ketrenos <jketreno@linux.intel.com>
Date:   Wed Mar 23 17:32:29 2005 -0600

    Add ipw2100 wireless driver.

commit 0a989b24fd59e8867274246587b46f5595fa0baa
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Apr 11 16:52:15 2005 -0700

    [PATCH] net/ieee80211/ieee80211_tx.c: swapped memset arguments
    
    Fix swapped memset() arguments in net/ieee80211/ieee80211_tx.c found by
    Maciej Soltysiak.
    
    Patch by Jesper Juhl.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 8199d3a79c224bbe5943fa08684e1f93a17881b0
Author: Christoph Lameter <christoph@graphe.net>
Date:   Wed Mar 30 13:34:31 2005 -0800

    [PATCH] A new 10GB Ethernet Driver by Chelsio Communications
    
    A Linux driver for the Chelsio 10Gb Ethernet Network Controller by Chelsio
    (http://www.chelsio.com).  This driver supports the Chelsio N210 NIC and is
    backward compatible with the Chelsio N110 model 10Gb NICs.  It supports
    AMD64, EM64T and x86 systems.
    
    Signed-off-by: Tina Yang <tinay@chelsio.com>
    Signed-off-by: Scott Bardone <sbardone@chelsio.com>
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    
    Adrian said:
    
    - my3126.c is unused (because t1_my3126_ops isn't used anywhere)
    - what are the EXTRA_CFLAGS in drivers/net/chelsio/Makefile for?
    - $(cxgb-y) in drivers/net/chelsio/Makefile seems to be unneeded
    - completely unused global functions:
      - espi.c: t1_espi_get_intr_counts
      - sge.c: t1_sge_get_intr_counts
    - the following functions can be made static:
      - sge.c: t1_espi_workaround
      - sge.c: t1_sge_tx
      - subr.c: __t1_tpi_read
      - subr.c: __t1_tpi_write
      - subr.c: t1_wait_op_done
    
    shemminger said:
    
    The performance recommendations in cxgb.txt are common to all fast devices,
    and should be in one file rather than just for this device. I would rather
    see ip-sysctl.txt updated or a new file on tuning recommendations started.
    Some of them have consequences that aren't documented well.
    For example, turning off TCP timestamps risks data corruption from sequence wrap.
    
    A new driver shouldn't need so may #ifdef's unless you want to putit on older
    vendor versions of 2.4
    
    Some accessor and wrapper functions like:
            t1_pci_read_config_4
            adapter_name
            t1_malloc
    are just annoying noise.
    
    Why have useless dead code like:
    
    /* Interrupt handler */
    +static int pm3393_interrupt_handler(struct cmac *cmac)
    +{
    +       u32 master_intr_status;
    +/*
    +    1. Read master interrupt register.
    +    2. Read BLOCK's interrupt status registers.
    +    3. Handle BLOCK interrupts.
    +*/
    
    Jeff said:
    
    step 1:  kill all the OS wrappers.
    
     And do you really need hooks for multiple MACs, when only one MAC is
     really supported?  Typically these hooks are at a higher level anyway --
     struct net_device.
    
    From: Christoph Lameter <christoph@lameter
    
    Driver modified as suggested by Pekka Enberg, Stephen Hemminger and Andrian
    Bunk.  Reduces the size of the driver to ~260k.
    
    - clean up tabs
    - removed my3126.c
    - removed 85% of suni1x10gexp_regs.h
    - removed 80% of regs.h
    - removed various calls, renamed variables/functions.
    - removed system specific and other wrappers (usleep, msleep)
    - removed dead code
    - dropped redundant casts in osdep.h
    - dropped redundant check of kfree
    - dropped weird code (MODVERSIONS stuff)
    - reduced number of #ifdefs
    - use kcalloc now instead of kmalloc
    - Add information about known issues with the driver
    - Add information about authors
    
    Signed-off-by: Scott Bardone <sbardone@chelsio.com>
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    
    diff -puN /dev/null Documentation/networking/cxgb.txt

commit ff1d2767d5a43c85f944e86a45284b721f66196c
Author: Jouni Malinen <jkmaline@cc.hut.fi>
Date:   Thu May 12 22:54:16 2005 -0400

    Add HostAP wireless driver.
    
    Includes minor cleanups from Adrian Bunk <bunk@stusta.de>.

commit b453872c35cfcbdbf5a794737817f7d4e7b1b579
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 12 22:48:20 2005 -0400

    [NET] ieee80211 subsystem
    
    Contributors:
    Host AP contributors
    James Ketrenos <jketreno@linux.intel.com>
    Francois Romieu <romieu@fr.zoreil.com>
    Adrian Bunk <bunk@stusta.de>
    Matthew Galgoci <mgalgoci@parcelfarce.linux.th
    eplanet.co.uk>
